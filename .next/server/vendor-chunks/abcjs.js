/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/abcjs";
exports.ids = ["vendor-chunks/abcjs"];
exports.modules = {

/***/ "(ssr)/./node_modules/abcjs/index.js":
/*!*************************************!*\
  !*** ./node_modules/abcjs/index.js ***!
  \*************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/**!\nCopyright (c) 2009-2024 Paul Rosen and Gregory Dyke\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n **This text is from: http://opensource.org/licenses/MIT**\n!**/\nvar version = __webpack_require__(/*! ./version */ \"(ssr)/./node_modules/abcjs/version.js\");\nvar animation = __webpack_require__(/*! ./src/api/abc_animation */ \"(ssr)/./node_modules/abcjs/src/api/abc_animation.js\");\nvar tuneBook = __webpack_require__(/*! ./src/api/abc_tunebook */ \"(ssr)/./node_modules/abcjs/src/api/abc_tunebook.js\");\nvar sequence = __webpack_require__(/*! ./src/synth/abc_midi_sequencer */ \"(ssr)/./node_modules/abcjs/src/synth/abc_midi_sequencer.js\");\nvar strTranspose = __webpack_require__(/*! ./src/str/output */ \"(ssr)/./node_modules/abcjs/src/str/output.js\");\n\nvar abcjs = {};\n\nabcjs.signature = \"abcjs-basic v\" + version;\n\nObject.keys(animation).forEach(function (key) {\n\tabcjs[key] = animation[key];\n});\n\nObject.keys(tuneBook).forEach(function (key) {\n\tabcjs[key] = tuneBook[key];\n});\n\nabcjs.renderAbc = __webpack_require__(/*! ./src/api/abc_tunebook_svg */ \"(ssr)/./node_modules/abcjs/src/api/abc_tunebook_svg.js\");\nabcjs.tuneMetrics = __webpack_require__(/*! ./src/api/tune-metrics */ \"(ssr)/./node_modules/abcjs/src/api/tune-metrics.js\");\nabcjs.TimingCallbacks = __webpack_require__(/*! ./src/api/abc_timing_callbacks */ \"(ssr)/./node_modules/abcjs/src/api/abc_timing_callbacks.js\");\n\nvar glyphs = __webpack_require__(/*! ./src/write/creation/glyphs */ \"(ssr)/./node_modules/abcjs/src/write/creation/glyphs.js\");\nabcjs.setGlyph = glyphs.setSymbol;\nabcjs.strTranspose = strTranspose;\n\nvar CreateSynth = __webpack_require__(/*! ./src/synth/create-synth */ \"(ssr)/./node_modules/abcjs/src/synth/create-synth.js\");\nvar instrumentIndexToName = __webpack_require__(/*! ./src/synth/instrument-index-to-name */ \"(ssr)/./node_modules/abcjs/src/synth/instrument-index-to-name.js\");\nvar pitchToNoteName = __webpack_require__(/*! ./src/synth/pitch-to-note-name */ \"(ssr)/./node_modules/abcjs/src/synth/pitch-to-note-name.js\");\nvar SynthSequence = __webpack_require__(/*! ./src/synth/synth-sequence */ \"(ssr)/./node_modules/abcjs/src/synth/synth-sequence.js\");\nvar CreateSynthControl = __webpack_require__(/*! ./src/synth/create-synth-control */ \"(ssr)/./node_modules/abcjs/src/synth/create-synth-control.js\");\nvar registerAudioContext = __webpack_require__(/*! ./src/synth/register-audio-context */ \"(ssr)/./node_modules/abcjs/src/synth/register-audio-context.js\");\nvar activeAudioContext = __webpack_require__(/*! ./src/synth/active-audio-context */ \"(ssr)/./node_modules/abcjs/src/synth/active-audio-context.js\");\nvar supportsAudio = __webpack_require__(/*! ./src/synth/supports-audio */ \"(ssr)/./node_modules/abcjs/src/synth/supports-audio.js\");\nvar playEvent = __webpack_require__(/*! ./src/synth/play-event */ \"(ssr)/./node_modules/abcjs/src/synth/play-event.js\");\nvar SynthController = __webpack_require__(/*! ./src/synth/synth-controller */ \"(ssr)/./node_modules/abcjs/src/synth/synth-controller.js\");\nvar getMidiFile = __webpack_require__(/*! ./src/synth/get-midi-file */ \"(ssr)/./node_modules/abcjs/src/synth/get-midi-file.js\");\nvar midiRenderer = __webpack_require__(/*! ./src/synth/abc_midi_renderer */ \"(ssr)/./node_modules/abcjs/src/synth/abc_midi_renderer.js\");\n\nabcjs.synth = {\n\tCreateSynth: CreateSynth,\n\tinstrumentIndexToName: instrumentIndexToName,\n\tpitchToNoteName: pitchToNoteName,\n\tSynthController: SynthController,\n\tSynthSequence: SynthSequence,\n\tCreateSynthControl: CreateSynthControl,\n\tregisterAudioContext: registerAudioContext,\n\tactiveAudioContext: activeAudioContext,\n\tsupportsAudio: supportsAudio,\n\tplayEvent: playEvent,\n\tgetMidiFile: getMidiFile,\n\tsequence: sequence,\n\tmidiRenderer: midiRenderer,\n};\n\nabcjs['Editor'] = __webpack_require__(/*! ./src/edit/abc_editor */ \"(ssr)/./node_modules/abcjs/src/edit/abc_editor.js\");\nabcjs['EditArea'] = __webpack_require__(/*! ./src/edit/abc_editarea */ \"(ssr)/./node_modules/abcjs/src/edit/abc_editarea.js\");\n\nmodule.exports = abcjs;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYyxtQkFBTyxDQUFDLHdEQUFXO0FBQ2pDLGdCQUFnQixtQkFBTyxDQUFDLG9GQUF5QjtBQUNqRCxlQUFlLG1CQUFPLENBQUMsa0ZBQXdCO0FBQy9DLGVBQWUsbUJBQU8sQ0FBQyxrR0FBZ0M7QUFDdkQsbUJBQW1CLG1CQUFPLENBQUMsc0VBQWtCOztBQUU3Qzs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxrQkFBa0IsbUJBQU8sQ0FBQywwRkFBNEI7QUFDdEQsb0JBQW9CLG1CQUFPLENBQUMsa0ZBQXdCO0FBQ3BELHdCQUF3QixtQkFBTyxDQUFDLGtHQUFnQzs7QUFFaEUsYUFBYSxtQkFBTyxDQUFDLDRGQUE2QjtBQUNsRDtBQUNBOztBQUVBLGtCQUFrQixtQkFBTyxDQUFDLHNGQUEwQjtBQUNwRCw0QkFBNEIsbUJBQU8sQ0FBQyw4R0FBc0M7QUFDMUUsc0JBQXNCLG1CQUFPLENBQUMsa0dBQWdDO0FBQzlELG9CQUFvQixtQkFBTyxDQUFDLDBGQUE0QjtBQUN4RCx5QkFBeUIsbUJBQU8sQ0FBQyxzR0FBa0M7QUFDbkUsMkJBQTJCLG1CQUFPLENBQUMsMEdBQW9DO0FBQ3ZFLHlCQUF5QixtQkFBTyxDQUFDLHNHQUFrQztBQUNuRSxvQkFBb0IsbUJBQU8sQ0FBQywwRkFBNEI7QUFDeEQsZ0JBQWdCLG1CQUFPLENBQUMsa0ZBQXdCO0FBQ2hELHNCQUFzQixtQkFBTyxDQUFDLDhGQUE4QjtBQUM1RCxrQkFBa0IsbUJBQU8sQ0FBQyx3RkFBMkI7QUFDckQsbUJBQW1CLG1CQUFPLENBQUMsZ0dBQStCOztBQUUxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLG1CQUFPLENBQUMsZ0ZBQXVCO0FBQ2pELG9CQUFvQixtQkFBTyxDQUFDLG9GQUF5Qjs7QUFFckQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9pbmRleC5qcz84OTFiIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKiFcbkNvcHlyaWdodCAoYykgMjAwOS0yMDI0IFBhdWwgUm9zZW4gYW5kIEdyZWdvcnkgRHlrZVxuXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG5vZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG5pbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG50byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG5jb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbmZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG5hbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG5GSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbkFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbkxJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG5PVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG5USEUgU09GVFdBUkUuXG5cbiAqKlRoaXMgdGV4dCBpcyBmcm9tOiBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUKipcbiEqKi9cbnZhciB2ZXJzaW9uID0gcmVxdWlyZSgnLi92ZXJzaW9uJyk7XG52YXIgYW5pbWF0aW9uID0gcmVxdWlyZSgnLi9zcmMvYXBpL2FiY19hbmltYXRpb24nKTtcbnZhciB0dW5lQm9vayA9IHJlcXVpcmUoJy4vc3JjL2FwaS9hYmNfdHVuZWJvb2snKTtcbnZhciBzZXF1ZW5jZSA9IHJlcXVpcmUoJy4vc3JjL3N5bnRoL2FiY19taWRpX3NlcXVlbmNlcicpO1xudmFyIHN0clRyYW5zcG9zZSA9IHJlcXVpcmUoJy4vc3JjL3N0ci9vdXRwdXQnKTtcblxudmFyIGFiY2pzID0ge307XG5cbmFiY2pzLnNpZ25hdHVyZSA9IFwiYWJjanMtYmFzaWMgdlwiICsgdmVyc2lvbjtcblxuT2JqZWN0LmtleXMoYW5pbWF0aW9uKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0YWJjanNba2V5XSA9IGFuaW1hdGlvbltrZXldO1xufSk7XG5cbk9iamVjdC5rZXlzKHR1bmVCb29rKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0YWJjanNba2V5XSA9IHR1bmVCb29rW2tleV07XG59KTtcblxuYWJjanMucmVuZGVyQWJjID0gcmVxdWlyZSgnLi9zcmMvYXBpL2FiY190dW5lYm9va19zdmcnKTtcbmFiY2pzLnR1bmVNZXRyaWNzID0gcmVxdWlyZSgnLi9zcmMvYXBpL3R1bmUtbWV0cmljcycpO1xuYWJjanMuVGltaW5nQ2FsbGJhY2tzID0gcmVxdWlyZSgnLi9zcmMvYXBpL2FiY190aW1pbmdfY2FsbGJhY2tzJyk7XG5cbnZhciBnbHlwaHMgPSByZXF1aXJlKCcuL3NyYy93cml0ZS9jcmVhdGlvbi9nbHlwaHMnKTtcbmFiY2pzLnNldEdseXBoID0gZ2x5cGhzLnNldFN5bWJvbDtcbmFiY2pzLnN0clRyYW5zcG9zZSA9IHN0clRyYW5zcG9zZTtcblxudmFyIENyZWF0ZVN5bnRoID0gcmVxdWlyZSgnLi9zcmMvc3ludGgvY3JlYXRlLXN5bnRoJyk7XG52YXIgaW5zdHJ1bWVudEluZGV4VG9OYW1lID0gcmVxdWlyZSgnLi9zcmMvc3ludGgvaW5zdHJ1bWVudC1pbmRleC10by1uYW1lJyk7XG52YXIgcGl0Y2hUb05vdGVOYW1lID0gcmVxdWlyZSgnLi9zcmMvc3ludGgvcGl0Y2gtdG8tbm90ZS1uYW1lJyk7XG52YXIgU3ludGhTZXF1ZW5jZSA9IHJlcXVpcmUoJy4vc3JjL3N5bnRoL3N5bnRoLXNlcXVlbmNlJyk7XG52YXIgQ3JlYXRlU3ludGhDb250cm9sID0gcmVxdWlyZSgnLi9zcmMvc3ludGgvY3JlYXRlLXN5bnRoLWNvbnRyb2wnKTtcbnZhciByZWdpc3RlckF1ZGlvQ29udGV4dCA9IHJlcXVpcmUoJy4vc3JjL3N5bnRoL3JlZ2lzdGVyLWF1ZGlvLWNvbnRleHQnKTtcbnZhciBhY3RpdmVBdWRpb0NvbnRleHQgPSByZXF1aXJlKCcuL3NyYy9zeW50aC9hY3RpdmUtYXVkaW8tY29udGV4dCcpO1xudmFyIHN1cHBvcnRzQXVkaW8gPSByZXF1aXJlKCcuL3NyYy9zeW50aC9zdXBwb3J0cy1hdWRpbycpO1xudmFyIHBsYXlFdmVudCA9IHJlcXVpcmUoJy4vc3JjL3N5bnRoL3BsYXktZXZlbnQnKTtcbnZhciBTeW50aENvbnRyb2xsZXIgPSByZXF1aXJlKCcuL3NyYy9zeW50aC9zeW50aC1jb250cm9sbGVyJyk7XG52YXIgZ2V0TWlkaUZpbGUgPSByZXF1aXJlKCcuL3NyYy9zeW50aC9nZXQtbWlkaS1maWxlJyk7XG52YXIgbWlkaVJlbmRlcmVyID0gcmVxdWlyZSgnLi9zcmMvc3ludGgvYWJjX21pZGlfcmVuZGVyZXInKTtcblxuYWJjanMuc3ludGggPSB7XG5cdENyZWF0ZVN5bnRoOiBDcmVhdGVTeW50aCxcblx0aW5zdHJ1bWVudEluZGV4VG9OYW1lOiBpbnN0cnVtZW50SW5kZXhUb05hbWUsXG5cdHBpdGNoVG9Ob3RlTmFtZTogcGl0Y2hUb05vdGVOYW1lLFxuXHRTeW50aENvbnRyb2xsZXI6IFN5bnRoQ29udHJvbGxlcixcblx0U3ludGhTZXF1ZW5jZTogU3ludGhTZXF1ZW5jZSxcblx0Q3JlYXRlU3ludGhDb250cm9sOiBDcmVhdGVTeW50aENvbnRyb2wsXG5cdHJlZ2lzdGVyQXVkaW9Db250ZXh0OiByZWdpc3RlckF1ZGlvQ29udGV4dCxcblx0YWN0aXZlQXVkaW9Db250ZXh0OiBhY3RpdmVBdWRpb0NvbnRleHQsXG5cdHN1cHBvcnRzQXVkaW86IHN1cHBvcnRzQXVkaW8sXG5cdHBsYXlFdmVudDogcGxheUV2ZW50LFxuXHRnZXRNaWRpRmlsZTogZ2V0TWlkaUZpbGUsXG5cdHNlcXVlbmNlOiBzZXF1ZW5jZSxcblx0bWlkaVJlbmRlcmVyOiBtaWRpUmVuZGVyZXIsXG59O1xuXG5hYmNqc1snRWRpdG9yJ10gPSByZXF1aXJlKCcuL3NyYy9lZGl0L2FiY19lZGl0b3InKTtcbmFiY2pzWydFZGl0QXJlYSddID0gcmVxdWlyZSgnLi9zcmMvZWRpdC9hYmNfZWRpdGFyZWEnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBhYmNqcztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/api/abc_animation.js":
/*!*****************************************************!*\
  !*** ./node_modules/abcjs/src/api/abc_animation.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_animation.js: handles animating the music in real time.\n\nvar TimingCallbacks = __webpack_require__(/*! ./abc_timing_callbacks */ \"(ssr)/./node_modules/abcjs/src/api/abc_timing_callbacks.js\");\n\nvar animation = {};\n\n(function() {\n\t\"use strict\";\n\n\tvar timer;\n\tvar cursor;\n\tanimation.startAnimation = function(paper, tune, options) {\n\t\t//options.bpm\n\t\t//options.showCursor\n\t\t//options.hideCurrentMeasure\n\t\t//options.hideFinishedMeasures\n\t\tif (timer) {\n\t\t\ttimer.stop();\n\t\t\ttimer = undefined;\n\t\t}\n\n\t\tif (options.showCursor) {\n\t\t\tcursor = paper.querySelector('.abcjs-cursor');\n\t\t\tif (!cursor) {\n\t\t\t\tcursor = document.createElement('DIV');\n\t\t\t\tcursor.className = 'abcjs-cursor cursor';\n\t\t\t\tcursor.style.position = 'absolute';\n\n\t\t\t\tpaper.appendChild(cursor);\n\t\t\t\tpaper.style.position = 'relative';\n\t\t\t}\n\t\t}\n\n\t\tfunction hideMeasures(elements) {\n\t\t\tfor (var i = 0; i < elements.length; i++) {\n\t\t\t\tvar element = elements[i];\n\t\t\t\tif (!element.classList.contains('abcjs-bar'))\n\t\t\t\t\telement.style.display = \"none\";\n\t\t\t}\n\t\t}\n\n\t\tvar lastMeasure;\n\t\tfunction disappearMeasuresAfter(selector) {\n\t\t\tif (lastMeasure) {\n\t\t\t\tvar elements = paper.querySelectorAll(lastMeasure);\n\t\t\t\thideMeasures(elements);\n\t\t\t}\n\t\t\tlastMeasure = selector;\n\t\t}\n\n\t\tfunction disappearMeasuresBefore(selector) {\n\t\t\tvar elements = paper.querySelectorAll(selector);\n\t\t\thideMeasures(elements);\n\t\t}\n\n\t\tfunction measureCallback(selector) {\n\t\t\tif (options.hideCurrentMeasure) {\n\t\t\t\tdisappearMeasuresBefore(selector);\n\t\t\t} else if (options.hideFinishedMeasures) {\n\t\t\t\tdisappearMeasuresAfter(selector);\n\t\t\t}\n\t\t}\n\n\t\tfunction getLineAndMeasure(element) {\n\t\t\treturn '.abcjs-l' + element.line + '.abcjs-m' + element.measureNumber;\n\t\t}\n\n\t\tfunction setCursor(range) {\n\t\t\tif (range) {\n\t\t\t\tif (range.measureStart) {\n\t\t\t\t\tvar selector = getLineAndMeasure(range);\n\t\t\t\t\tif (selector)\n\t\t\t\t\t\tmeasureCallback(selector);\n\t\t\t\t}\n\t\t\t\tif (cursor) {\n\t\t\t\t\tcursor.style.left = range.left + \"px\";\n\t\t\t\t\tcursor.style.top = range.top + \"px\";\n\t\t\t\t\tcursor.style.width = range.width + \"px\";\n\t\t\t\t\tcursor.style.height = range.height + \"px\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttimer.stop();\n\t\t\t\ttimer = undefined;\n\t\t\t}\n\t\t}\n\n\t\ttimer = new TimingCallbacks(tune, {\n\t\t\tqpm: options.bpm,\n\t\t\teventCallback: setCursor\n\t\t});\n\t\ttimer.start();\n\t};\n\n\tanimation.pauseAnimation = function(pause) {\n\t\tif (timer) {\n\t\t\tif (pause)\n\t\t\t\ttimer.pause();\n\t\t\telse\n\t\t\t\ttimer.start();\n\t\t}\n\t};\n\n\tanimation.stopAnimation = function() {\n\t\tif (timer) {\n\t\t\ttimer.stop();\n\t\t\ttimer = undefined;\n\t\t}\n\t};\n\n})();\n\nmodule.exports = animation;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL2FwaS9hYmNfYW5pbWF0aW9uLmpzIiwibWFwcGluZ3MiOiJBQUFBOztBQUVBLHNCQUFzQixtQkFBTyxDQUFDLDBGQUF3Qjs7QUFFdEQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1CQUFtQixxQkFBcUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvYXBpL2FiY19hbmltYXRpb24uanM/NWY1NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAgICBhYmNfYW5pbWF0aW9uLmpzOiBoYW5kbGVzIGFuaW1hdGluZyB0aGUgbXVzaWMgaW4gcmVhbCB0aW1lLlxuXG52YXIgVGltaW5nQ2FsbGJhY2tzID0gcmVxdWlyZSgnLi9hYmNfdGltaW5nX2NhbGxiYWNrcycpO1xuXG52YXIgYW5pbWF0aW9uID0ge307XG5cbihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIHRpbWVyO1xuXHR2YXIgY3Vyc29yO1xuXHRhbmltYXRpb24uc3RhcnRBbmltYXRpb24gPSBmdW5jdGlvbihwYXBlciwgdHVuZSwgb3B0aW9ucykge1xuXHRcdC8vb3B0aW9ucy5icG1cblx0XHQvL29wdGlvbnMuc2hvd0N1cnNvclxuXHRcdC8vb3B0aW9ucy5oaWRlQ3VycmVudE1lYXN1cmVcblx0XHQvL29wdGlvbnMuaGlkZUZpbmlzaGVkTWVhc3VyZXNcblx0XHRpZiAodGltZXIpIHtcblx0XHRcdHRpbWVyLnN0b3AoKTtcblx0XHRcdHRpbWVyID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdGlmIChvcHRpb25zLnNob3dDdXJzb3IpIHtcblx0XHRcdGN1cnNvciA9IHBhcGVyLnF1ZXJ5U2VsZWN0b3IoJy5hYmNqcy1jdXJzb3InKTtcblx0XHRcdGlmICghY3Vyc29yKSB7XG5cdFx0XHRcdGN1cnNvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuXHRcdFx0XHRjdXJzb3IuY2xhc3NOYW1lID0gJ2FiY2pzLWN1cnNvciBjdXJzb3InO1xuXHRcdFx0XHRjdXJzb3Iuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuXG5cdFx0XHRcdHBhcGVyLmFwcGVuZENoaWxkKGN1cnNvcik7XG5cdFx0XHRcdHBhcGVyLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBoaWRlTWVhc3VyZXMoZWxlbWVudHMpIHtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcblx0XHRcdFx0aWYgKCFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnYWJjanMtYmFyJykpXG5cdFx0XHRcdFx0ZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dmFyIGxhc3RNZWFzdXJlO1xuXHRcdGZ1bmN0aW9uIGRpc2FwcGVhck1lYXN1cmVzQWZ0ZXIoc2VsZWN0b3IpIHtcblx0XHRcdGlmIChsYXN0TWVhc3VyZSkge1xuXHRcdFx0XHR2YXIgZWxlbWVudHMgPSBwYXBlci5xdWVyeVNlbGVjdG9yQWxsKGxhc3RNZWFzdXJlKTtcblx0XHRcdFx0aGlkZU1lYXN1cmVzKGVsZW1lbnRzKTtcblx0XHRcdH1cblx0XHRcdGxhc3RNZWFzdXJlID0gc2VsZWN0b3I7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZGlzYXBwZWFyTWVhc3VyZXNCZWZvcmUoc2VsZWN0b3IpIHtcblx0XHRcdHZhciBlbGVtZW50cyA9IHBhcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuXHRcdFx0aGlkZU1lYXN1cmVzKGVsZW1lbnRzKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBtZWFzdXJlQ2FsbGJhY2soc2VsZWN0b3IpIHtcblx0XHRcdGlmIChvcHRpb25zLmhpZGVDdXJyZW50TWVhc3VyZSkge1xuXHRcdFx0XHRkaXNhcHBlYXJNZWFzdXJlc0JlZm9yZShzZWxlY3Rvcik7XG5cdFx0XHR9IGVsc2UgaWYgKG9wdGlvbnMuaGlkZUZpbmlzaGVkTWVhc3VyZXMpIHtcblx0XHRcdFx0ZGlzYXBwZWFyTWVhc3VyZXNBZnRlcihzZWxlY3Rvcik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0TGluZUFuZE1lYXN1cmUoZWxlbWVudCkge1xuXHRcdFx0cmV0dXJuICcuYWJjanMtbCcgKyBlbGVtZW50LmxpbmUgKyAnLmFiY2pzLW0nICsgZWxlbWVudC5tZWFzdXJlTnVtYmVyO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHNldEN1cnNvcihyYW5nZSkge1xuXHRcdFx0aWYgKHJhbmdlKSB7XG5cdFx0XHRcdGlmIChyYW5nZS5tZWFzdXJlU3RhcnQpIHtcblx0XHRcdFx0XHR2YXIgc2VsZWN0b3IgPSBnZXRMaW5lQW5kTWVhc3VyZShyYW5nZSk7XG5cdFx0XHRcdFx0aWYgKHNlbGVjdG9yKVxuXHRcdFx0XHRcdFx0bWVhc3VyZUNhbGxiYWNrKHNlbGVjdG9yKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoY3Vyc29yKSB7XG5cdFx0XHRcdFx0Y3Vyc29yLnN0eWxlLmxlZnQgPSByYW5nZS5sZWZ0ICsgXCJweFwiO1xuXHRcdFx0XHRcdGN1cnNvci5zdHlsZS50b3AgPSByYW5nZS50b3AgKyBcInB4XCI7XG5cdFx0XHRcdFx0Y3Vyc29yLnN0eWxlLndpZHRoID0gcmFuZ2Uud2lkdGggKyBcInB4XCI7XG5cdFx0XHRcdFx0Y3Vyc29yLnN0eWxlLmhlaWdodCA9IHJhbmdlLmhlaWdodCArIFwicHhcIjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGltZXIuc3RvcCgpO1xuXHRcdFx0XHR0aW1lciA9IHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aW1lciA9IG5ldyBUaW1pbmdDYWxsYmFja3ModHVuZSwge1xuXHRcdFx0cXBtOiBvcHRpb25zLmJwbSxcblx0XHRcdGV2ZW50Q2FsbGJhY2s6IHNldEN1cnNvclxuXHRcdH0pO1xuXHRcdHRpbWVyLnN0YXJ0KCk7XG5cdH07XG5cblx0YW5pbWF0aW9uLnBhdXNlQW5pbWF0aW9uID0gZnVuY3Rpb24ocGF1c2UpIHtcblx0XHRpZiAodGltZXIpIHtcblx0XHRcdGlmIChwYXVzZSlcblx0XHRcdFx0dGltZXIucGF1c2UoKTtcblx0XHRcdGVsc2Vcblx0XHRcdFx0dGltZXIuc3RhcnQoKTtcblx0XHR9XG5cdH07XG5cblx0YW5pbWF0aW9uLnN0b3BBbmltYXRpb24gPSBmdW5jdGlvbigpIHtcblx0XHRpZiAodGltZXIpIHtcblx0XHRcdHRpbWVyLnN0b3AoKTtcblx0XHRcdHRpbWVyID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fTtcblxufSkoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBhbmltYXRpb247XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/api/abc_animation.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/api/abc_timing_callbacks.js":
/*!************************************************************!*\
  !*** ./node_modules/abcjs/src/api/abc_timing_callbacks.js ***!
  \************************************************************/
/***/ ((module) => {

eval("var TimingCallbacks = function(target, params) {\n\tvar self = this;\n\tif (!params) params = {};\n\tself.qpm = params.qpm ? parseInt(params.qpm, 10) : null;\n\tif (!self.qpm) {\n\t\tvar tempo = target.metaText ? target.metaText.tempo : null;\n\t\tself.qpm = target.getBpm(tempo);\n\t}\n\tself.extraMeasuresAtBeginning = params.extraMeasuresAtBeginning ? parseInt(params.extraMeasuresAtBeginning, 10) : 0;\n\tself.beatCallback = params.beatCallback; // This is called for each beat.\n\tself.eventCallback = params.eventCallback;   // This is called for each note or rest encountered.\n\tself.lineEndCallback = params.lineEndCallback;   // This is called when the end of a line is approaching.\n\tself.lineEndAnticipation = params.lineEndAnticipation ? parseInt(params.lineEndAnticipation, 10) : 0;   // How many milliseconds before the end should the call happen.\n\tself.beatSubdivisions = params.beatSubdivisions ? parseInt(params.beatSubdivisions, 10) : 1; // how many callbacks per beat is desired.\n\tself.joggerTimer = null;\n\n\tself.replaceTarget = function(newTarget) {\n\t\tself.noteTimings = newTarget.setTiming(self.qpm, self.extraMeasuresAtBeginning);\n\t\tif (newTarget.noteTimings.length === 0)\n\t\t\tself.noteTimings = newTarget.setTiming(0,0);\n\t\tif (self.lineEndCallback) {\n\t\t\tself.lineEndTimings = getLineEndTimings(newTarget.noteTimings, self.lineEndAnticipation);\n\t\t}\n\t\tself.startTime = null;\n\t\tself.currentBeat = 0;\n\t\tself.currentEvent = 0;\n\t\tself.currentLine = 0;\n\t\tself.currentTime = 0;\n\t\tself.isPaused = false;\n\t\tself.isRunning = false;\n\t\tself.pausedPercent = null;\n\t\tself.justUnpaused = false;\n\t\tself.newSeekPercent = 0;\n\t\tself.lastTimestamp = 0;\n\n\t\tif (self.noteTimings.length === 0)\n\t\t\treturn;\n\t\t// noteTimings contains an array of events sorted by time. Events that happen at the same time are in the same element of the array.\n\t\tself.millisecondsPerBeat = 1000 / (self.qpm / 60) / self.beatSubdivisions;\n\t\tself.lastMoment = self.noteTimings[self.noteTimings.length-1].milliseconds;\n\t\tself.totalBeats = Math.round(self.lastMoment / self.millisecondsPerBeat);\n\t};\n\n\tself.replaceTarget(target);\n\n\tself.doTiming = function (timestamp) {\n\t\t// This is called 60 times a second, that is, every 16 msecs.\n\t\t//console.log(\"doTiming\", timestamp, timestamp-self.lastTimestamp);\n\t\tif (self.lastTimestamp === timestamp)\n\t\t\treturn; // If there are multiple seeks or other calls, then we can easily get multiple callbacks for the same instant.\n\t\tself.lastTimestamp = timestamp;\n\t\tif (!self.startTime) {\n\t\t\tself.startTime = timestamp;\n\t\t}\n\n\t\tif (!self.isPaused && self.isRunning) {\n\t\t\tself.currentTime = timestamp - self.startTime;\n\t\t\tself.currentTime += 16; // Add a little slop because this function isn't called exactly.\n\t\t\twhile (self.noteTimings.length > self.currentEvent && self.noteTimings[self.currentEvent].milliseconds < self.currentTime) {\n\t\t\t\tif (self.eventCallback && self.noteTimings[self.currentEvent].type === 'event') {\n\t\t\t\t\tvar thisStartTime = self.startTime; // the event callback can call seek and change the position from beneath us.\n\t\t\t\t\tself.eventCallback(self.noteTimings[self.currentEvent]);\n\t\t\t\t\tif (thisStartTime !== self.startTime) {\n\t\t\t\t\t\tself.currentTime = timestamp - self.startTime;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tself.currentEvent++;\n\t\t\t}\n\t\t\tif (self.lineEndCallback && self.lineEndTimings.length > self.currentLine && self.lineEndTimings[self.currentLine].milliseconds < self.currentTime && self.currentEvent < self.noteTimings.length) {\n\t\t\t\tvar leftEvent = self.noteTimings[self.currentEvent].milliseconds === self.currentTime ? self.noteTimings[self.currentEvent] : self.noteTimings[self.currentEvent-1]\n\t\t\t\tself.lineEndCallback(self.lineEndTimings[self.currentLine], leftEvent, { line: self.currentLine, endTimings: self.lineEndTimings, currentTime: self.currentTime });\n\t\t\t\tself.currentLine++;\n\t\t\t}\n\t\t\tif (self.currentTime < self.lastMoment) {\n\t\t\t\trequestAnimationFrame(self.doTiming);\n\t\t\t\tif (self.currentBeat * self.millisecondsPerBeat < self.currentTime) {\n\t\t\t\t\tvar ret = self.doBeatCallback(timestamp);\n\t\t\t\t\tif (ret !== null)\n\t\t\t\t\t\tself.currentTime = ret;\n\t\t\t\t}\n\t\t\t} else if (self.currentBeat <= self.totalBeats) {\n\t\t\t\t// Because of timing issues (for instance, if the browser tab isn't active), the beat callbacks might not have happened when they are supposed to. To keep the client programs from having to deal with that, this will keep calling the loop until all of them have been sent.\n\t\t\t\tif (self.beatCallback) {\n\t\t\t\t\tvar ret2 = self.doBeatCallback(timestamp);\n\t\t\t\t\tif (ret2 !== null)\n\t\t\t\t\t\tself.currentTime = ret2;\n\t\t\t\t\trequestAnimationFrame(self.doTiming);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (self.currentTime >= self.lastMoment) {\n\t\t\t\tif (self.eventCallback) {\n\t\t\t\t\t// At the end, the event callback can return \"continue\" to keep from stopping.\n\t\t\t\t\t// The event callback can either be a promise or not.\n\t\t\t\t\tvar promise = self.eventCallback(null);\n\t\t\t\t\tself.shouldStop(promise).then(function(shouldStop) {\n\t\t\t\t\t\tif (shouldStop)\n\t\t\t\t\t\t\tself.stop();\n\t\t\t\t\t})\n\t\t\t\t} else\n\t\t\t\t\tself.stop();\n\t\t\t}\n\t\t}\n\t};\n\n\tself.shouldStop = function(promise) {\n\t\t// The return of the last event callback can be \"continue\" or a promise that returns \"continue\".\n\t\t// If it is then don't call stop. Any other value calls stop.\n\t\treturn new Promise(function (resolve) {\n\t\t\tif (!promise)\n\t\t\t\treturn resolve(true);\n\t\t\tif (promise === \"continue\")\n\t\t\t\treturn resolve(false);\n\t\t\tif (promise.then) {\n\t\t\t\tpromise.then(function (result) {\n\t\t\t\t\tresolve(result !== \"continue\");\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tself.doBeatCallback = function(timestamp) {\n\t\tif (self.beatCallback) {\n\t\t\tvar next = self.currentEvent;\n\t\t\twhile (next < self.noteTimings.length && self.noteTimings[next].left === null)\n\t\t\t\tnext++;\n\t\t\tvar endMs;\n\t\t\tvar ev;\n\t\t\tif (next < self.noteTimings.length) {\n\t\t\t\tendMs = self.noteTimings[next].milliseconds;\n\t\t\t\tnext = Math.max(0, self.currentEvent - 1);\n\t\t\t\twhile (next >= 0 && self.noteTimings[next].left === null)\n\t\t\t\t\tnext--;\n\n\t\t\t\tev = self.noteTimings[next];\n\t\t\t}\n\n\t\t\tvar position = {};\n\t\t\tvar debugInfo = {};\n\t\t\tif (ev) {\n\t\t\t\tposition.top = ev.top;\n\t\t\t\tposition.height = ev.height;\n\n\t\t\t\t// timestamp = the time passed in from the animation timer\n\t\t\t\t// self.startTime = the time that the tune was started (if there was seeking or pausing, it is adjusted to keep the math the same)\n\t\t\t\t// ev = the event that is either happening now or has most recently passed.\n\t\t\t\t// ev.milliseconds = the time that the current event starts (relative to self.startTime)\n\t\t\t\t// endMs = the time that the next event starts\n\t\t\t\t// ev.endX = the x coordinate that the next event happens (or the end of the line or repeat measure)\n\t\t\t\t// ev.left = the x coordinate of the current event\n\t\t\t\t//\n\t\t\t\t// The output is the X coordinate of the current cursor location. It is calculated with the ratio of the length of the event and the width of it.\n\t\t\t\tvar offMs = Math.max(0, timestamp-self.startTime-ev.milliseconds); // Offset in time from the last beat\n\t\t\t\tvar gapMs = endMs - ev.milliseconds; // Length of this event in time\n\t\t\t\tvar gapPx = ev.endX - ev.left; // The length in pixels\n\t\t\t\tvar offPx = gapMs ? offMs * gapPx / gapMs : 0;\n\t\t\t\tposition.left = ev.left + offPx;\n\t\t\t\t// See if this is before the first event - that is the case where there are \"prep beats\"\n\t\t\t\tif (self.currentEvent === 0 && ev.milliseconds > timestamp-self.startTime)\n\t\t\t\t\tposition.left = undefined\n\t\t\t\t\n\t\t\t\tdebugInfo = {\n\t\t\t\t\ttimestamp: timestamp,\n\t\t\t\t\tstartTime: self.startTime,\n\t\t\t\t\tev: ev,\n\t\t\t\t\tendMs: endMs,\n\t\t\t\t\toffMs: offMs,\n\t\t\t\t\toffPx: offPx,\n\t\t\t\t\tgapMs: gapMs,\n\t\t\t\t\tgapPx: gapPx\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tdebugInfo = {\n\t\t\t\t\ttimestamp: timestamp,\n\t\t\t\t\tstartTime: self.startTime,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tvar thisStartTime = self.startTime; // the beat callback can call seek and change the position from beneath us.\n\t\t\tself.beatCallback(\n\t\t\t\tself.currentBeat / self.beatSubdivisions,\n\t\t\t\tself.totalBeats / self.beatSubdivisions,\n\t\t\t\tself.lastMoment,\n\t\t\t\tposition,\n\t\t\t\tdebugInfo);\n\t\t\tif (thisStartTime !== self.startTime) {\n\t\t\t\treturn timestamp - self.startTime;\n\t\t\t} else\n\t\t\t\tself.currentBeat++;\n\t\t}\n\t\treturn null;\n\t};\n\n\t// In general music doesn't need a timer at 60 fps because notes don't happen that fast.\n\t// For instance, at 120 beats per minute, a sixteenth note takes 125ms. So just as a\n\t// compromise value between performance and jank this is set about half that.\n\tvar JOGGING_INTERVAL = 60;\n\n\tself.animationJogger = function() {\n\t\t// There are some cases where the animation timer doesn't work: for instance when\n\t\t// this isn't running in a visible tab and sometimes on mobile devices. We compensate\n\t\t// by having a backup timer using setTimeout. This won't be accurate so the performance\n\t\t// will be jerky, but without it the requestAnimationFrame might be skipped and so\n\t\t// not called again.\n\t\tif (self.isRunning) {\n\t\t\tself.doTiming(performance.now());\n\t\t\tself.joggerTimer = setTimeout(self.animationJogger, JOGGING_INTERVAL);\n\t\t}\n\t};\n\n\tself.start = function(offsetPercent, units) {\n\t\tself.isRunning = true;\n\t\tif (self.isPaused) {\n\t\t\tself.isPaused = false;\n\t\t\tif (offsetPercent === undefined)\n\t\t\t\tself.justUnpaused = true;\n\t\t}\n\t\tif (offsetPercent) {\n\t\t\tself.setProgress(offsetPercent, units);\n\t\t} else if (offsetPercent === 0) {\n\t\t\tself.reset();\n\t\t} else if (self.pausedPercent !== null) {\n\t\t\tvar now = performance.now();\n\t\t\tself.currentTime = self.lastMoment * self.pausedPercent;\n\t\t\tself.startTime = now - self.currentTime;\n\t\t\tself.pausedPercent = null;\n\t\t\tself.reportNext = true;\n\t\t}\n\t\trequestAnimationFrame(self.doTiming);\n\t\tself.joggerTimer = setTimeout(self.animationJogger, JOGGING_INTERVAL);\n\t};\n\tself.pause = function() {\n\t\tself.isPaused = true;\n\t\tvar now = performance.now();\n\t\tself.pausedPercent = (now - self.startTime) / self.lastMoment;\n\t\tself.isRunning = false;\n\t\tif (self.joggerTimer) {\n\t\t\tclearTimeout(self.joggerTimer);\n\t\t\tself.joggerTimer = null;\n\t\t}\n\t};\n\tself.currentMillisecond = function() {\n\t\treturn self.currentTime;\n\t};\n\tself.reset = function() {\n\t\tself.currentBeat = 0;\n\t\tself.currentEvent = 0;\n\t\tself.currentLine = 0;\n\t\tself.startTime = null;\n\t\tself.pausedPercent = null;\n\t};\n\tself.stop = function() {\n\t\tself.pause();\n\t\tself.reset();\n\t};\n\tself.setProgress = function(position, units) {\n\t\t// the effect of this function is to move startTime so that the callbacks happen correctly for the new seek.\n\t\tvar percent;\n\t\tswitch (units) {\n\t\t\tcase \"seconds\":\n\t\t\t\tself.currentTime = position * 1000;\n\t\t\t\tif (self.currentTime < 0) self.currentTime = 0;\n\t\t\t\tif (self.currentTime > self.lastMoment) self.currentTime = self.lastMoment;\n\t\t\t\tpercent = self.currentTime / self.lastMoment;\n\t\t\t\tbreak;\n\t\t\tcase \"beats\":\n\t\t\t\tself.currentTime = position * self.millisecondsPerBeat * self.beatSubdivisions;\n\t\t\t\tif (self.currentTime < 0) self.currentTime = 0;\n\t\t\t\tif (self.currentTime > self.lastMoment) self.currentTime = self.lastMoment;\n\t\t\t\tpercent = self.currentTime / self.lastMoment;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// this is \"percent\" or any illegal value\n\t\t\t\t// this is passed a value between 0 and 1.\n\t\t\t\tpercent = position;\n\t\t\t\tif (percent < 0) percent = 0;\n\t\t\t\tif (percent > 1) percent = 1;\n\t\t\t\tself.currentTime = self.lastMoment * percent;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (!self.isRunning)\n\t\t\tself.pausedPercent = percent;\n\n\t\tvar now = performance.now();\n\t\tself.startTime = now - self.currentTime;\n\n\t\tvar oldEvent = self.currentEvent;\n\t\tself.currentEvent = 0;\n\t\twhile (self.noteTimings.length > self.currentEvent && self.noteTimings[self.currentEvent].milliseconds < self.currentTime) {\n\t\t\tself.currentEvent++;\n\t\t}\n\n\t\tif (self.lineEndCallback) {\n\t\t\tself.currentLine = 0;\n\t\t\twhile (self.lineEndTimings.length > self.currentLine && self.lineEndTimings[self.currentLine].milliseconds + self.lineEndAnticipation < self.currentTime) {\n\t\t\t\tself.currentLine++;\n\t\t\t}\n\t\t}\n\n\t\tvar oldBeat = self.currentBeat;\n\t\tself.currentBeat = Math.floor(self.currentTime / self.millisecondsPerBeat);\n\t\tif (self.beatCallback && oldBeat !== self.currentBeat) // If the movement caused the beat to change, then immediately report it to the client.\n\t\t\tself.doBeatCallback(self.startTime+self.currentTime);\n\n\t\tif (self.eventCallback && self.currentEvent >= 0 && self.noteTimings[self.currentEvent].type === 'event')\n\t\t\tself.eventCallback(self.noteTimings[self.currentEvent]);\n\t\tif (self.lineEndCallback)\n\t\t\tself.lineEndCallback(self.lineEndTimings[self.currentLine], self.noteTimings[self.currentEvent], { line: self.currentLine, endTimings: self.lineEndTimings });\n\n\t\tself.joggerTimer = setTimeout(self.animationJogger, JOGGING_INTERVAL);\n\t};\n};\n\nfunction getLineEndTimings(timings, anticipation) {\n\t// Returns an array of milliseconds to call the lineEndCallback.\n\t// This figures out the timing of the beginning of each line and subtracts the anticipation from it.\n\tvar callbackTimes = [];\n\tvar lastTop = null;\n\tfor (var i = 0; i < timings.length; i++) {\n\t\tvar timing = timings[i];\n\t\tif (timing.type !== 'end' && timing.top !== lastTop) {\n\t\t\tcallbackTimes.push({ measureNumber: timing.measureNumber, milliseconds: timing.milliseconds-anticipation, top: timing.top, bottom: timing.top+timing.height });\n\t\t\tlastTop = timing.top;\n\t\t}\n\t}\n\treturn callbackTimes;\n}\n\nmodule.exports = TimingCallbacks;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL2FwaS9hYmNfdGltaW5nX2NhbGxiYWNrcy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUMsOENBQThDO0FBQzlDLGtEQUFrRDtBQUNsRCx5R0FBeUc7QUFDekcsOEZBQThGO0FBQzlGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFLHdGQUF3RjtBQUNySztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFO0FBQ3ZFLHlDQUF5QztBQUN6QyxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esc0dBQXNHLHlEQUF5RDs7QUFFL0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0JBQW9CO0FBQ3JDO0FBQ0E7QUFDQSx3QkFBd0Isd0lBQXdJO0FBQ2hLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvYXBpL2FiY190aW1pbmdfY2FsbGJhY2tzLmpzPzJiZWEiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIFRpbWluZ0NhbGxiYWNrcyA9IGZ1bmN0aW9uKHRhcmdldCwgcGFyYW1zKSB7XG5cdHZhciBzZWxmID0gdGhpcztcblx0aWYgKCFwYXJhbXMpIHBhcmFtcyA9IHt9O1xuXHRzZWxmLnFwbSA9IHBhcmFtcy5xcG0gPyBwYXJzZUludChwYXJhbXMucXBtLCAxMCkgOiBudWxsO1xuXHRpZiAoIXNlbGYucXBtKSB7XG5cdFx0dmFyIHRlbXBvID0gdGFyZ2V0Lm1ldGFUZXh0ID8gdGFyZ2V0Lm1ldGFUZXh0LnRlbXBvIDogbnVsbDtcblx0XHRzZWxmLnFwbSA9IHRhcmdldC5nZXRCcG0odGVtcG8pO1xuXHR9XG5cdHNlbGYuZXh0cmFNZWFzdXJlc0F0QmVnaW5uaW5nID0gcGFyYW1zLmV4dHJhTWVhc3VyZXNBdEJlZ2lubmluZyA/IHBhcnNlSW50KHBhcmFtcy5leHRyYU1lYXN1cmVzQXRCZWdpbm5pbmcsIDEwKSA6IDA7XG5cdHNlbGYuYmVhdENhbGxiYWNrID0gcGFyYW1zLmJlYXRDYWxsYmFjazsgLy8gVGhpcyBpcyBjYWxsZWQgZm9yIGVhY2ggYmVhdC5cblx0c2VsZi5ldmVudENhbGxiYWNrID0gcGFyYW1zLmV2ZW50Q2FsbGJhY2s7ICAgLy8gVGhpcyBpcyBjYWxsZWQgZm9yIGVhY2ggbm90ZSBvciByZXN0IGVuY291bnRlcmVkLlxuXHRzZWxmLmxpbmVFbmRDYWxsYmFjayA9IHBhcmFtcy5saW5lRW5kQ2FsbGJhY2s7ICAgLy8gVGhpcyBpcyBjYWxsZWQgd2hlbiB0aGUgZW5kIG9mIGEgbGluZSBpcyBhcHByb2FjaGluZy5cblx0c2VsZi5saW5lRW5kQW50aWNpcGF0aW9uID0gcGFyYW1zLmxpbmVFbmRBbnRpY2lwYXRpb24gPyBwYXJzZUludChwYXJhbXMubGluZUVuZEFudGljaXBhdGlvbiwgMTApIDogMDsgICAvLyBIb3cgbWFueSBtaWxsaXNlY29uZHMgYmVmb3JlIHRoZSBlbmQgc2hvdWxkIHRoZSBjYWxsIGhhcHBlbi5cblx0c2VsZi5iZWF0U3ViZGl2aXNpb25zID0gcGFyYW1zLmJlYXRTdWJkaXZpc2lvbnMgPyBwYXJzZUludChwYXJhbXMuYmVhdFN1YmRpdmlzaW9ucywgMTApIDogMTsgLy8gaG93IG1hbnkgY2FsbGJhY2tzIHBlciBiZWF0IGlzIGRlc2lyZWQuXG5cdHNlbGYuam9nZ2VyVGltZXIgPSBudWxsO1xuXG5cdHNlbGYucmVwbGFjZVRhcmdldCA9IGZ1bmN0aW9uKG5ld1RhcmdldCkge1xuXHRcdHNlbGYubm90ZVRpbWluZ3MgPSBuZXdUYXJnZXQuc2V0VGltaW5nKHNlbGYucXBtLCBzZWxmLmV4dHJhTWVhc3VyZXNBdEJlZ2lubmluZyk7XG5cdFx0aWYgKG5ld1RhcmdldC5ub3RlVGltaW5ncy5sZW5ndGggPT09IDApXG5cdFx0XHRzZWxmLm5vdGVUaW1pbmdzID0gbmV3VGFyZ2V0LnNldFRpbWluZygwLDApO1xuXHRcdGlmIChzZWxmLmxpbmVFbmRDYWxsYmFjaykge1xuXHRcdFx0c2VsZi5saW5lRW5kVGltaW5ncyA9IGdldExpbmVFbmRUaW1pbmdzKG5ld1RhcmdldC5ub3RlVGltaW5ncywgc2VsZi5saW5lRW5kQW50aWNpcGF0aW9uKTtcblx0XHR9XG5cdFx0c2VsZi5zdGFydFRpbWUgPSBudWxsO1xuXHRcdHNlbGYuY3VycmVudEJlYXQgPSAwO1xuXHRcdHNlbGYuY3VycmVudEV2ZW50ID0gMDtcblx0XHRzZWxmLmN1cnJlbnRMaW5lID0gMDtcblx0XHRzZWxmLmN1cnJlbnRUaW1lID0gMDtcblx0XHRzZWxmLmlzUGF1c2VkID0gZmFsc2U7XG5cdFx0c2VsZi5pc1J1bm5pbmcgPSBmYWxzZTtcblx0XHRzZWxmLnBhdXNlZFBlcmNlbnQgPSBudWxsO1xuXHRcdHNlbGYuanVzdFVucGF1c2VkID0gZmFsc2U7XG5cdFx0c2VsZi5uZXdTZWVrUGVyY2VudCA9IDA7XG5cdFx0c2VsZi5sYXN0VGltZXN0YW1wID0gMDtcblxuXHRcdGlmIChzZWxmLm5vdGVUaW1pbmdzLmxlbmd0aCA9PT0gMClcblx0XHRcdHJldHVybjtcblx0XHQvLyBub3RlVGltaW5ncyBjb250YWlucyBhbiBhcnJheSBvZiBldmVudHMgc29ydGVkIGJ5IHRpbWUuIEV2ZW50cyB0aGF0IGhhcHBlbiBhdCB0aGUgc2FtZSB0aW1lIGFyZSBpbiB0aGUgc2FtZSBlbGVtZW50IG9mIHRoZSBhcnJheS5cblx0XHRzZWxmLm1pbGxpc2Vjb25kc1BlckJlYXQgPSAxMDAwIC8gKHNlbGYucXBtIC8gNjApIC8gc2VsZi5iZWF0U3ViZGl2aXNpb25zO1xuXHRcdHNlbGYubGFzdE1vbWVudCA9IHNlbGYubm90ZVRpbWluZ3Nbc2VsZi5ub3RlVGltaW5ncy5sZW5ndGgtMV0ubWlsbGlzZWNvbmRzO1xuXHRcdHNlbGYudG90YWxCZWF0cyA9IE1hdGgucm91bmQoc2VsZi5sYXN0TW9tZW50IC8gc2VsZi5taWxsaXNlY29uZHNQZXJCZWF0KTtcblx0fTtcblxuXHRzZWxmLnJlcGxhY2VUYXJnZXQodGFyZ2V0KTtcblxuXHRzZWxmLmRvVGltaW5nID0gZnVuY3Rpb24gKHRpbWVzdGFtcCkge1xuXHRcdC8vIFRoaXMgaXMgY2FsbGVkIDYwIHRpbWVzIGEgc2Vjb25kLCB0aGF0IGlzLCBldmVyeSAxNiBtc2Vjcy5cblx0XHQvL2NvbnNvbGUubG9nKFwiZG9UaW1pbmdcIiwgdGltZXN0YW1wLCB0aW1lc3RhbXAtc2VsZi5sYXN0VGltZXN0YW1wKTtcblx0XHRpZiAoc2VsZi5sYXN0VGltZXN0YW1wID09PSB0aW1lc3RhbXApXG5cdFx0XHRyZXR1cm47IC8vIElmIHRoZXJlIGFyZSBtdWx0aXBsZSBzZWVrcyBvciBvdGhlciBjYWxscywgdGhlbiB3ZSBjYW4gZWFzaWx5IGdldCBtdWx0aXBsZSBjYWxsYmFja3MgZm9yIHRoZSBzYW1lIGluc3RhbnQuXG5cdFx0c2VsZi5sYXN0VGltZXN0YW1wID0gdGltZXN0YW1wO1xuXHRcdGlmICghc2VsZi5zdGFydFRpbWUpIHtcblx0XHRcdHNlbGYuc3RhcnRUaW1lID0gdGltZXN0YW1wO1xuXHRcdH1cblxuXHRcdGlmICghc2VsZi5pc1BhdXNlZCAmJiBzZWxmLmlzUnVubmluZykge1xuXHRcdFx0c2VsZi5jdXJyZW50VGltZSA9IHRpbWVzdGFtcCAtIHNlbGYuc3RhcnRUaW1lO1xuXHRcdFx0c2VsZi5jdXJyZW50VGltZSArPSAxNjsgLy8gQWRkIGEgbGl0dGxlIHNsb3AgYmVjYXVzZSB0aGlzIGZ1bmN0aW9uIGlzbid0IGNhbGxlZCBleGFjdGx5LlxuXHRcdFx0d2hpbGUgKHNlbGYubm90ZVRpbWluZ3MubGVuZ3RoID4gc2VsZi5jdXJyZW50RXZlbnQgJiYgc2VsZi5ub3RlVGltaW5nc1tzZWxmLmN1cnJlbnRFdmVudF0ubWlsbGlzZWNvbmRzIDwgc2VsZi5jdXJyZW50VGltZSkge1xuXHRcdFx0XHRpZiAoc2VsZi5ldmVudENhbGxiYWNrICYmIHNlbGYubm90ZVRpbWluZ3Nbc2VsZi5jdXJyZW50RXZlbnRdLnR5cGUgPT09ICdldmVudCcpIHtcblx0XHRcdFx0XHR2YXIgdGhpc1N0YXJ0VGltZSA9IHNlbGYuc3RhcnRUaW1lOyAvLyB0aGUgZXZlbnQgY2FsbGJhY2sgY2FuIGNhbGwgc2VlayBhbmQgY2hhbmdlIHRoZSBwb3NpdGlvbiBmcm9tIGJlbmVhdGggdXMuXG5cdFx0XHRcdFx0c2VsZi5ldmVudENhbGxiYWNrKHNlbGYubm90ZVRpbWluZ3Nbc2VsZi5jdXJyZW50RXZlbnRdKTtcblx0XHRcdFx0XHRpZiAodGhpc1N0YXJ0VGltZSAhPT0gc2VsZi5zdGFydFRpbWUpIHtcblx0XHRcdFx0XHRcdHNlbGYuY3VycmVudFRpbWUgPSB0aW1lc3RhbXAgLSBzZWxmLnN0YXJ0VGltZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0c2VsZi5jdXJyZW50RXZlbnQrKztcblx0XHRcdH1cblx0XHRcdGlmIChzZWxmLmxpbmVFbmRDYWxsYmFjayAmJiBzZWxmLmxpbmVFbmRUaW1pbmdzLmxlbmd0aCA+IHNlbGYuY3VycmVudExpbmUgJiYgc2VsZi5saW5lRW5kVGltaW5nc1tzZWxmLmN1cnJlbnRMaW5lXS5taWxsaXNlY29uZHMgPCBzZWxmLmN1cnJlbnRUaW1lICYmIHNlbGYuY3VycmVudEV2ZW50IDwgc2VsZi5ub3RlVGltaW5ncy5sZW5ndGgpIHtcblx0XHRcdFx0dmFyIGxlZnRFdmVudCA9IHNlbGYubm90ZVRpbWluZ3Nbc2VsZi5jdXJyZW50RXZlbnRdLm1pbGxpc2Vjb25kcyA9PT0gc2VsZi5jdXJyZW50VGltZSA/IHNlbGYubm90ZVRpbWluZ3Nbc2VsZi5jdXJyZW50RXZlbnRdIDogc2VsZi5ub3RlVGltaW5nc1tzZWxmLmN1cnJlbnRFdmVudC0xXVxuXHRcdFx0XHRzZWxmLmxpbmVFbmRDYWxsYmFjayhzZWxmLmxpbmVFbmRUaW1pbmdzW3NlbGYuY3VycmVudExpbmVdLCBsZWZ0RXZlbnQsIHsgbGluZTogc2VsZi5jdXJyZW50TGluZSwgZW5kVGltaW5nczogc2VsZi5saW5lRW5kVGltaW5ncywgY3VycmVudFRpbWU6IHNlbGYuY3VycmVudFRpbWUgfSk7XG5cdFx0XHRcdHNlbGYuY3VycmVudExpbmUrKztcblx0XHRcdH1cblx0XHRcdGlmIChzZWxmLmN1cnJlbnRUaW1lIDwgc2VsZi5sYXN0TW9tZW50KSB7XG5cdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShzZWxmLmRvVGltaW5nKTtcblx0XHRcdFx0aWYgKHNlbGYuY3VycmVudEJlYXQgKiBzZWxmLm1pbGxpc2Vjb25kc1BlckJlYXQgPCBzZWxmLmN1cnJlbnRUaW1lKSB7XG5cdFx0XHRcdFx0dmFyIHJldCA9IHNlbGYuZG9CZWF0Q2FsbGJhY2sodGltZXN0YW1wKTtcblx0XHRcdFx0XHRpZiAocmV0ICE9PSBudWxsKVxuXHRcdFx0XHRcdFx0c2VsZi5jdXJyZW50VGltZSA9IHJldDtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChzZWxmLmN1cnJlbnRCZWF0IDw9IHNlbGYudG90YWxCZWF0cykge1xuXHRcdFx0XHQvLyBCZWNhdXNlIG9mIHRpbWluZyBpc3N1ZXMgKGZvciBpbnN0YW5jZSwgaWYgdGhlIGJyb3dzZXIgdGFiIGlzbid0IGFjdGl2ZSksIHRoZSBiZWF0IGNhbGxiYWNrcyBtaWdodCBub3QgaGF2ZSBoYXBwZW5lZCB3aGVuIHRoZXkgYXJlIHN1cHBvc2VkIHRvLiBUbyBrZWVwIHRoZSBjbGllbnQgcHJvZ3JhbXMgZnJvbSBoYXZpbmcgdG8gZGVhbCB3aXRoIHRoYXQsIHRoaXMgd2lsbCBrZWVwIGNhbGxpbmcgdGhlIGxvb3AgdW50aWwgYWxsIG9mIHRoZW0gaGF2ZSBiZWVuIHNlbnQuXG5cdFx0XHRcdGlmIChzZWxmLmJlYXRDYWxsYmFjaykge1xuXHRcdFx0XHRcdHZhciByZXQyID0gc2VsZi5kb0JlYXRDYWxsYmFjayh0aW1lc3RhbXApO1xuXHRcdFx0XHRcdGlmIChyZXQyICE9PSBudWxsKVxuXHRcdFx0XHRcdFx0c2VsZi5jdXJyZW50VGltZSA9IHJldDI7XG5cdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNlbGYuZG9UaW1pbmcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmIChzZWxmLmN1cnJlbnRUaW1lID49IHNlbGYubGFzdE1vbWVudCkge1xuXHRcdFx0XHRpZiAoc2VsZi5ldmVudENhbGxiYWNrKSB7XG5cdFx0XHRcdFx0Ly8gQXQgdGhlIGVuZCwgdGhlIGV2ZW50IGNhbGxiYWNrIGNhbiByZXR1cm4gXCJjb250aW51ZVwiIHRvIGtlZXAgZnJvbSBzdG9wcGluZy5cblx0XHRcdFx0XHQvLyBUaGUgZXZlbnQgY2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIHByb21pc2Ugb3Igbm90LlxuXHRcdFx0XHRcdHZhciBwcm9taXNlID0gc2VsZi5ldmVudENhbGxiYWNrKG51bGwpO1xuXHRcdFx0XHRcdHNlbGYuc2hvdWxkU3RvcChwcm9taXNlKS50aGVuKGZ1bmN0aW9uKHNob3VsZFN0b3ApIHtcblx0XHRcdFx0XHRcdGlmIChzaG91bGRTdG9wKVxuXHRcdFx0XHRcdFx0XHRzZWxmLnN0b3AoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9IGVsc2Vcblx0XHRcdFx0XHRzZWxmLnN0b3AoKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0c2VsZi5zaG91bGRTdG9wID0gZnVuY3Rpb24ocHJvbWlzZSkge1xuXHRcdC8vIFRoZSByZXR1cm4gb2YgdGhlIGxhc3QgZXZlbnQgY2FsbGJhY2sgY2FuIGJlIFwiY29udGludWVcIiBvciBhIHByb21pc2UgdGhhdCByZXR1cm5zIFwiY29udGludWVcIi5cblx0XHQvLyBJZiBpdCBpcyB0aGVuIGRvbid0IGNhbGwgc3RvcC4gQW55IG90aGVyIHZhbHVlIGNhbGxzIHN0b3AuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG5cdFx0XHRpZiAoIXByb21pc2UpXG5cdFx0XHRcdHJldHVybiByZXNvbHZlKHRydWUpO1xuXHRcdFx0aWYgKHByb21pc2UgPT09IFwiY29udGludWVcIilcblx0XHRcdFx0cmV0dXJuIHJlc29sdmUoZmFsc2UpO1xuXHRcdFx0aWYgKHByb21pc2UudGhlbikge1xuXHRcdFx0XHRwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuXHRcdFx0XHRcdHJlc29sdmUocmVzdWx0ICE9PSBcImNvbnRpbnVlXCIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0fTtcblxuXHRzZWxmLmRvQmVhdENhbGxiYWNrID0gZnVuY3Rpb24odGltZXN0YW1wKSB7XG5cdFx0aWYgKHNlbGYuYmVhdENhbGxiYWNrKSB7XG5cdFx0XHR2YXIgbmV4dCA9IHNlbGYuY3VycmVudEV2ZW50O1xuXHRcdFx0d2hpbGUgKG5leHQgPCBzZWxmLm5vdGVUaW1pbmdzLmxlbmd0aCAmJiBzZWxmLm5vdGVUaW1pbmdzW25leHRdLmxlZnQgPT09IG51bGwpXG5cdFx0XHRcdG5leHQrKztcblx0XHRcdHZhciBlbmRNcztcblx0XHRcdHZhciBldjtcblx0XHRcdGlmIChuZXh0IDwgc2VsZi5ub3RlVGltaW5ncy5sZW5ndGgpIHtcblx0XHRcdFx0ZW5kTXMgPSBzZWxmLm5vdGVUaW1pbmdzW25leHRdLm1pbGxpc2Vjb25kcztcblx0XHRcdFx0bmV4dCA9IE1hdGgubWF4KDAsIHNlbGYuY3VycmVudEV2ZW50IC0gMSk7XG5cdFx0XHRcdHdoaWxlIChuZXh0ID49IDAgJiYgc2VsZi5ub3RlVGltaW5nc1tuZXh0XS5sZWZ0ID09PSBudWxsKVxuXHRcdFx0XHRcdG5leHQtLTtcblxuXHRcdFx0XHRldiA9IHNlbGYubm90ZVRpbWluZ3NbbmV4dF07XG5cdFx0XHR9XG5cblx0XHRcdHZhciBwb3NpdGlvbiA9IHt9O1xuXHRcdFx0dmFyIGRlYnVnSW5mbyA9IHt9O1xuXHRcdFx0aWYgKGV2KSB7XG5cdFx0XHRcdHBvc2l0aW9uLnRvcCA9IGV2LnRvcDtcblx0XHRcdFx0cG9zaXRpb24uaGVpZ2h0ID0gZXYuaGVpZ2h0O1xuXG5cdFx0XHRcdC8vIHRpbWVzdGFtcCA9IHRoZSB0aW1lIHBhc3NlZCBpbiBmcm9tIHRoZSBhbmltYXRpb24gdGltZXJcblx0XHRcdFx0Ly8gc2VsZi5zdGFydFRpbWUgPSB0aGUgdGltZSB0aGF0IHRoZSB0dW5lIHdhcyBzdGFydGVkIChpZiB0aGVyZSB3YXMgc2Vla2luZyBvciBwYXVzaW5nLCBpdCBpcyBhZGp1c3RlZCB0byBrZWVwIHRoZSBtYXRoIHRoZSBzYW1lKVxuXHRcdFx0XHQvLyBldiA9IHRoZSBldmVudCB0aGF0IGlzIGVpdGhlciBoYXBwZW5pbmcgbm93IG9yIGhhcyBtb3N0IHJlY2VudGx5IHBhc3NlZC5cblx0XHRcdFx0Ly8gZXYubWlsbGlzZWNvbmRzID0gdGhlIHRpbWUgdGhhdCB0aGUgY3VycmVudCBldmVudCBzdGFydHMgKHJlbGF0aXZlIHRvIHNlbGYuc3RhcnRUaW1lKVxuXHRcdFx0XHQvLyBlbmRNcyA9IHRoZSB0aW1lIHRoYXQgdGhlIG5leHQgZXZlbnQgc3RhcnRzXG5cdFx0XHRcdC8vIGV2LmVuZFggPSB0aGUgeCBjb29yZGluYXRlIHRoYXQgdGhlIG5leHQgZXZlbnQgaGFwcGVucyAob3IgdGhlIGVuZCBvZiB0aGUgbGluZSBvciByZXBlYXQgbWVhc3VyZSlcblx0XHRcdFx0Ly8gZXYubGVmdCA9IHRoZSB4IGNvb3JkaW5hdGUgb2YgdGhlIGN1cnJlbnQgZXZlbnRcblx0XHRcdFx0Ly9cblx0XHRcdFx0Ly8gVGhlIG91dHB1dCBpcyB0aGUgWCBjb29yZGluYXRlIG9mIHRoZSBjdXJyZW50IGN1cnNvciBsb2NhdGlvbi4gSXQgaXMgY2FsY3VsYXRlZCB3aXRoIHRoZSByYXRpbyBvZiB0aGUgbGVuZ3RoIG9mIHRoZSBldmVudCBhbmQgdGhlIHdpZHRoIG9mIGl0LlxuXHRcdFx0XHR2YXIgb2ZmTXMgPSBNYXRoLm1heCgwLCB0aW1lc3RhbXAtc2VsZi5zdGFydFRpbWUtZXYubWlsbGlzZWNvbmRzKTsgLy8gT2Zmc2V0IGluIHRpbWUgZnJvbSB0aGUgbGFzdCBiZWF0XG5cdFx0XHRcdHZhciBnYXBNcyA9IGVuZE1zIC0gZXYubWlsbGlzZWNvbmRzOyAvLyBMZW5ndGggb2YgdGhpcyBldmVudCBpbiB0aW1lXG5cdFx0XHRcdHZhciBnYXBQeCA9IGV2LmVuZFggLSBldi5sZWZ0OyAvLyBUaGUgbGVuZ3RoIGluIHBpeGVsc1xuXHRcdFx0XHR2YXIgb2ZmUHggPSBnYXBNcyA/IG9mZk1zICogZ2FwUHggLyBnYXBNcyA6IDA7XG5cdFx0XHRcdHBvc2l0aW9uLmxlZnQgPSBldi5sZWZ0ICsgb2ZmUHg7XG5cdFx0XHRcdC8vIFNlZSBpZiB0aGlzIGlzIGJlZm9yZSB0aGUgZmlyc3QgZXZlbnQgLSB0aGF0IGlzIHRoZSBjYXNlIHdoZXJlIHRoZXJlIGFyZSBcInByZXAgYmVhdHNcIlxuXHRcdFx0XHRpZiAoc2VsZi5jdXJyZW50RXZlbnQgPT09IDAgJiYgZXYubWlsbGlzZWNvbmRzID4gdGltZXN0YW1wLXNlbGYuc3RhcnRUaW1lKVxuXHRcdFx0XHRcdHBvc2l0aW9uLmxlZnQgPSB1bmRlZmluZWRcblx0XHRcdFx0XG5cdFx0XHRcdGRlYnVnSW5mbyA9IHtcblx0XHRcdFx0XHR0aW1lc3RhbXA6IHRpbWVzdGFtcCxcblx0XHRcdFx0XHRzdGFydFRpbWU6IHNlbGYuc3RhcnRUaW1lLFxuXHRcdFx0XHRcdGV2OiBldixcblx0XHRcdFx0XHRlbmRNczogZW5kTXMsXG5cdFx0XHRcdFx0b2ZmTXM6IG9mZk1zLFxuXHRcdFx0XHRcdG9mZlB4OiBvZmZQeCxcblx0XHRcdFx0XHRnYXBNczogZ2FwTXMsXG5cdFx0XHRcdFx0Z2FwUHg6IGdhcFB4XG5cdFx0XHRcdH07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkZWJ1Z0luZm8gPSB7XG5cdFx0XHRcdFx0dGltZXN0YW1wOiB0aW1lc3RhbXAsXG5cdFx0XHRcdFx0c3RhcnRUaW1lOiBzZWxmLnN0YXJ0VGltZSxcblx0XHRcdFx0fTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIHRoaXNTdGFydFRpbWUgPSBzZWxmLnN0YXJ0VGltZTsgLy8gdGhlIGJlYXQgY2FsbGJhY2sgY2FuIGNhbGwgc2VlayBhbmQgY2hhbmdlIHRoZSBwb3NpdGlvbiBmcm9tIGJlbmVhdGggdXMuXG5cdFx0XHRzZWxmLmJlYXRDYWxsYmFjayhcblx0XHRcdFx0c2VsZi5jdXJyZW50QmVhdCAvIHNlbGYuYmVhdFN1YmRpdmlzaW9ucyxcblx0XHRcdFx0c2VsZi50b3RhbEJlYXRzIC8gc2VsZi5iZWF0U3ViZGl2aXNpb25zLFxuXHRcdFx0XHRzZWxmLmxhc3RNb21lbnQsXG5cdFx0XHRcdHBvc2l0aW9uLFxuXHRcdFx0XHRkZWJ1Z0luZm8pO1xuXHRcdFx0aWYgKHRoaXNTdGFydFRpbWUgIT09IHNlbGYuc3RhcnRUaW1lKSB7XG5cdFx0XHRcdHJldHVybiB0aW1lc3RhbXAgLSBzZWxmLnN0YXJ0VGltZTtcblx0XHRcdH0gZWxzZVxuXHRcdFx0XHRzZWxmLmN1cnJlbnRCZWF0Kys7XG5cdFx0fVxuXHRcdHJldHVybiBudWxsO1xuXHR9O1xuXG5cdC8vIEluIGdlbmVyYWwgbXVzaWMgZG9lc24ndCBuZWVkIGEgdGltZXIgYXQgNjAgZnBzIGJlY2F1c2Ugbm90ZXMgZG9uJ3QgaGFwcGVuIHRoYXQgZmFzdC5cblx0Ly8gRm9yIGluc3RhbmNlLCBhdCAxMjAgYmVhdHMgcGVyIG1pbnV0ZSwgYSBzaXh0ZWVudGggbm90ZSB0YWtlcyAxMjVtcy4gU28ganVzdCBhcyBhXG5cdC8vIGNvbXByb21pc2UgdmFsdWUgYmV0d2VlbiBwZXJmb3JtYW5jZSBhbmQgamFuayB0aGlzIGlzIHNldCBhYm91dCBoYWxmIHRoYXQuXG5cdHZhciBKT0dHSU5HX0lOVEVSVkFMID0gNjA7XG5cblx0c2VsZi5hbmltYXRpb25Kb2dnZXIgPSBmdW5jdGlvbigpIHtcblx0XHQvLyBUaGVyZSBhcmUgc29tZSBjYXNlcyB3aGVyZSB0aGUgYW5pbWF0aW9uIHRpbWVyIGRvZXNuJ3Qgd29yazogZm9yIGluc3RhbmNlIHdoZW5cblx0XHQvLyB0aGlzIGlzbid0IHJ1bm5pbmcgaW4gYSB2aXNpYmxlIHRhYiBhbmQgc29tZXRpbWVzIG9uIG1vYmlsZSBkZXZpY2VzLiBXZSBjb21wZW5zYXRlXG5cdFx0Ly8gYnkgaGF2aW5nIGEgYmFja3VwIHRpbWVyIHVzaW5nIHNldFRpbWVvdXQuIFRoaXMgd29uJ3QgYmUgYWNjdXJhdGUgc28gdGhlIHBlcmZvcm1hbmNlXG5cdFx0Ly8gd2lsbCBiZSBqZXJreSwgYnV0IHdpdGhvdXQgaXQgdGhlIHJlcXVlc3RBbmltYXRpb25GcmFtZSBtaWdodCBiZSBza2lwcGVkIGFuZCBzb1xuXHRcdC8vIG5vdCBjYWxsZWQgYWdhaW4uXG5cdFx0aWYgKHNlbGYuaXNSdW5uaW5nKSB7XG5cdFx0XHRzZWxmLmRvVGltaW5nKHBlcmZvcm1hbmNlLm5vdygpKTtcblx0XHRcdHNlbGYuam9nZ2VyVGltZXIgPSBzZXRUaW1lb3V0KHNlbGYuYW5pbWF0aW9uSm9nZ2VyLCBKT0dHSU5HX0lOVEVSVkFMKTtcblx0XHR9XG5cdH07XG5cblx0c2VsZi5zdGFydCA9IGZ1bmN0aW9uKG9mZnNldFBlcmNlbnQsIHVuaXRzKSB7XG5cdFx0c2VsZi5pc1J1bm5pbmcgPSB0cnVlO1xuXHRcdGlmIChzZWxmLmlzUGF1c2VkKSB7XG5cdFx0XHRzZWxmLmlzUGF1c2VkID0gZmFsc2U7XG5cdFx0XHRpZiAob2Zmc2V0UGVyY2VudCA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRzZWxmLmp1c3RVbnBhdXNlZCA9IHRydWU7XG5cdFx0fVxuXHRcdGlmIChvZmZzZXRQZXJjZW50KSB7XG5cdFx0XHRzZWxmLnNldFByb2dyZXNzKG9mZnNldFBlcmNlbnQsIHVuaXRzKTtcblx0XHR9IGVsc2UgaWYgKG9mZnNldFBlcmNlbnQgPT09IDApIHtcblx0XHRcdHNlbGYucmVzZXQoKTtcblx0XHR9IGVsc2UgaWYgKHNlbGYucGF1c2VkUGVyY2VudCAhPT0gbnVsbCkge1xuXHRcdFx0dmFyIG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuXHRcdFx0c2VsZi5jdXJyZW50VGltZSA9IHNlbGYubGFzdE1vbWVudCAqIHNlbGYucGF1c2VkUGVyY2VudDtcblx0XHRcdHNlbGYuc3RhcnRUaW1lID0gbm93IC0gc2VsZi5jdXJyZW50VGltZTtcblx0XHRcdHNlbGYucGF1c2VkUGVyY2VudCA9IG51bGw7XG5cdFx0XHRzZWxmLnJlcG9ydE5leHQgPSB0cnVlO1xuXHRcdH1cblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2VsZi5kb1RpbWluZyk7XG5cdFx0c2VsZi5qb2dnZXJUaW1lciA9IHNldFRpbWVvdXQoc2VsZi5hbmltYXRpb25Kb2dnZXIsIEpPR0dJTkdfSU5URVJWQUwpO1xuXHR9O1xuXHRzZWxmLnBhdXNlID0gZnVuY3Rpb24oKSB7XG5cdFx0c2VsZi5pc1BhdXNlZCA9IHRydWU7XG5cdFx0dmFyIG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuXHRcdHNlbGYucGF1c2VkUGVyY2VudCA9IChub3cgLSBzZWxmLnN0YXJ0VGltZSkgLyBzZWxmLmxhc3RNb21lbnQ7XG5cdFx0c2VsZi5pc1J1bm5pbmcgPSBmYWxzZTtcblx0XHRpZiAoc2VsZi5qb2dnZXJUaW1lcikge1xuXHRcdFx0Y2xlYXJUaW1lb3V0KHNlbGYuam9nZ2VyVGltZXIpO1xuXHRcdFx0c2VsZi5qb2dnZXJUaW1lciA9IG51bGw7XG5cdFx0fVxuXHR9O1xuXHRzZWxmLmN1cnJlbnRNaWxsaXNlY29uZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzZWxmLmN1cnJlbnRUaW1lO1xuXHR9O1xuXHRzZWxmLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0c2VsZi5jdXJyZW50QmVhdCA9IDA7XG5cdFx0c2VsZi5jdXJyZW50RXZlbnQgPSAwO1xuXHRcdHNlbGYuY3VycmVudExpbmUgPSAwO1xuXHRcdHNlbGYuc3RhcnRUaW1lID0gbnVsbDtcblx0XHRzZWxmLnBhdXNlZFBlcmNlbnQgPSBudWxsO1xuXHR9O1xuXHRzZWxmLnN0b3AgPSBmdW5jdGlvbigpIHtcblx0XHRzZWxmLnBhdXNlKCk7XG5cdFx0c2VsZi5yZXNldCgpO1xuXHR9O1xuXHRzZWxmLnNldFByb2dyZXNzID0gZnVuY3Rpb24ocG9zaXRpb24sIHVuaXRzKSB7XG5cdFx0Ly8gdGhlIGVmZmVjdCBvZiB0aGlzIGZ1bmN0aW9uIGlzIHRvIG1vdmUgc3RhcnRUaW1lIHNvIHRoYXQgdGhlIGNhbGxiYWNrcyBoYXBwZW4gY29ycmVjdGx5IGZvciB0aGUgbmV3IHNlZWsuXG5cdFx0dmFyIHBlcmNlbnQ7XG5cdFx0c3dpdGNoICh1bml0cykge1xuXHRcdFx0Y2FzZSBcInNlY29uZHNcIjpcblx0XHRcdFx0c2VsZi5jdXJyZW50VGltZSA9IHBvc2l0aW9uICogMTAwMDtcblx0XHRcdFx0aWYgKHNlbGYuY3VycmVudFRpbWUgPCAwKSBzZWxmLmN1cnJlbnRUaW1lID0gMDtcblx0XHRcdFx0aWYgKHNlbGYuY3VycmVudFRpbWUgPiBzZWxmLmxhc3RNb21lbnQpIHNlbGYuY3VycmVudFRpbWUgPSBzZWxmLmxhc3RNb21lbnQ7XG5cdFx0XHRcdHBlcmNlbnQgPSBzZWxmLmN1cnJlbnRUaW1lIC8gc2VsZi5sYXN0TW9tZW50O1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJiZWF0c1wiOlxuXHRcdFx0XHRzZWxmLmN1cnJlbnRUaW1lID0gcG9zaXRpb24gKiBzZWxmLm1pbGxpc2Vjb25kc1BlckJlYXQgKiBzZWxmLmJlYXRTdWJkaXZpc2lvbnM7XG5cdFx0XHRcdGlmIChzZWxmLmN1cnJlbnRUaW1lIDwgMCkgc2VsZi5jdXJyZW50VGltZSA9IDA7XG5cdFx0XHRcdGlmIChzZWxmLmN1cnJlbnRUaW1lID4gc2VsZi5sYXN0TW9tZW50KSBzZWxmLmN1cnJlbnRUaW1lID0gc2VsZi5sYXN0TW9tZW50O1xuXHRcdFx0XHRwZXJjZW50ID0gc2VsZi5jdXJyZW50VGltZSAvIHNlbGYubGFzdE1vbWVudDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHQvLyB0aGlzIGlzIFwicGVyY2VudFwiIG9yIGFueSBpbGxlZ2FsIHZhbHVlXG5cdFx0XHRcdC8vIHRoaXMgaXMgcGFzc2VkIGEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxLlxuXHRcdFx0XHRwZXJjZW50ID0gcG9zaXRpb247XG5cdFx0XHRcdGlmIChwZXJjZW50IDwgMCkgcGVyY2VudCA9IDA7XG5cdFx0XHRcdGlmIChwZXJjZW50ID4gMSkgcGVyY2VudCA9IDE7XG5cdFx0XHRcdHNlbGYuY3VycmVudFRpbWUgPSBzZWxmLmxhc3RNb21lbnQgKiBwZXJjZW50O1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHRpZiAoIXNlbGYuaXNSdW5uaW5nKVxuXHRcdFx0c2VsZi5wYXVzZWRQZXJjZW50ID0gcGVyY2VudDtcblxuXHRcdHZhciBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcblx0XHRzZWxmLnN0YXJ0VGltZSA9IG5vdyAtIHNlbGYuY3VycmVudFRpbWU7XG5cblx0XHR2YXIgb2xkRXZlbnQgPSBzZWxmLmN1cnJlbnRFdmVudDtcblx0XHRzZWxmLmN1cnJlbnRFdmVudCA9IDA7XG5cdFx0d2hpbGUgKHNlbGYubm90ZVRpbWluZ3MubGVuZ3RoID4gc2VsZi5jdXJyZW50RXZlbnQgJiYgc2VsZi5ub3RlVGltaW5nc1tzZWxmLmN1cnJlbnRFdmVudF0ubWlsbGlzZWNvbmRzIDwgc2VsZi5jdXJyZW50VGltZSkge1xuXHRcdFx0c2VsZi5jdXJyZW50RXZlbnQrKztcblx0XHR9XG5cblx0XHRpZiAoc2VsZi5saW5lRW5kQ2FsbGJhY2spIHtcblx0XHRcdHNlbGYuY3VycmVudExpbmUgPSAwO1xuXHRcdFx0d2hpbGUgKHNlbGYubGluZUVuZFRpbWluZ3MubGVuZ3RoID4gc2VsZi5jdXJyZW50TGluZSAmJiBzZWxmLmxpbmVFbmRUaW1pbmdzW3NlbGYuY3VycmVudExpbmVdLm1pbGxpc2Vjb25kcyArIHNlbGYubGluZUVuZEFudGljaXBhdGlvbiA8IHNlbGYuY3VycmVudFRpbWUpIHtcblx0XHRcdFx0c2VsZi5jdXJyZW50TGluZSsrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZhciBvbGRCZWF0ID0gc2VsZi5jdXJyZW50QmVhdDtcblx0XHRzZWxmLmN1cnJlbnRCZWF0ID0gTWF0aC5mbG9vcihzZWxmLmN1cnJlbnRUaW1lIC8gc2VsZi5taWxsaXNlY29uZHNQZXJCZWF0KTtcblx0XHRpZiAoc2VsZi5iZWF0Q2FsbGJhY2sgJiYgb2xkQmVhdCAhPT0gc2VsZi5jdXJyZW50QmVhdCkgLy8gSWYgdGhlIG1vdmVtZW50IGNhdXNlZCB0aGUgYmVhdCB0byBjaGFuZ2UsIHRoZW4gaW1tZWRpYXRlbHkgcmVwb3J0IGl0IHRvIHRoZSBjbGllbnQuXG5cdFx0XHRzZWxmLmRvQmVhdENhbGxiYWNrKHNlbGYuc3RhcnRUaW1lK3NlbGYuY3VycmVudFRpbWUpO1xuXG5cdFx0aWYgKHNlbGYuZXZlbnRDYWxsYmFjayAmJiBzZWxmLmN1cnJlbnRFdmVudCA+PSAwICYmIHNlbGYubm90ZVRpbWluZ3Nbc2VsZi5jdXJyZW50RXZlbnRdLnR5cGUgPT09ICdldmVudCcpXG5cdFx0XHRzZWxmLmV2ZW50Q2FsbGJhY2soc2VsZi5ub3RlVGltaW5nc1tzZWxmLmN1cnJlbnRFdmVudF0pO1xuXHRcdGlmIChzZWxmLmxpbmVFbmRDYWxsYmFjaylcblx0XHRcdHNlbGYubGluZUVuZENhbGxiYWNrKHNlbGYubGluZUVuZFRpbWluZ3Nbc2VsZi5jdXJyZW50TGluZV0sIHNlbGYubm90ZVRpbWluZ3Nbc2VsZi5jdXJyZW50RXZlbnRdLCB7IGxpbmU6IHNlbGYuY3VycmVudExpbmUsIGVuZFRpbWluZ3M6IHNlbGYubGluZUVuZFRpbWluZ3MgfSk7XG5cblx0XHRzZWxmLmpvZ2dlclRpbWVyID0gc2V0VGltZW91dChzZWxmLmFuaW1hdGlvbkpvZ2dlciwgSk9HR0lOR19JTlRFUlZBTCk7XG5cdH07XG59O1xuXG5mdW5jdGlvbiBnZXRMaW5lRW5kVGltaW5ncyh0aW1pbmdzLCBhbnRpY2lwYXRpb24pIHtcblx0Ly8gUmV0dXJucyBhbiBhcnJheSBvZiBtaWxsaXNlY29uZHMgdG8gY2FsbCB0aGUgbGluZUVuZENhbGxiYWNrLlxuXHQvLyBUaGlzIGZpZ3VyZXMgb3V0IHRoZSB0aW1pbmcgb2YgdGhlIGJlZ2lubmluZyBvZiBlYWNoIGxpbmUgYW5kIHN1YnRyYWN0cyB0aGUgYW50aWNpcGF0aW9uIGZyb20gaXQuXG5cdHZhciBjYWxsYmFja1RpbWVzID0gW107XG5cdHZhciBsYXN0VG9wID0gbnVsbDtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aW1pbmdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIHRpbWluZyA9IHRpbWluZ3NbaV07XG5cdFx0aWYgKHRpbWluZy50eXBlICE9PSAnZW5kJyAmJiB0aW1pbmcudG9wICE9PSBsYXN0VG9wKSB7XG5cdFx0XHRjYWxsYmFja1RpbWVzLnB1c2goeyBtZWFzdXJlTnVtYmVyOiB0aW1pbmcubWVhc3VyZU51bWJlciwgbWlsbGlzZWNvbmRzOiB0aW1pbmcubWlsbGlzZWNvbmRzLWFudGljaXBhdGlvbiwgdG9wOiB0aW1pbmcudG9wLCBib3R0b206IHRpbWluZy50b3ArdGltaW5nLmhlaWdodCB9KTtcblx0XHRcdGxhc3RUb3AgPSB0aW1pbmcudG9wO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gY2FsbGJhY2tUaW1lcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBUaW1pbmdDYWxsYmFja3M7XG5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/api/abc_timing_callbacks.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/api/abc_tunebook.js":
/*!****************************************************!*\
  !*** ./node_modules/abcjs/src/api/abc_tunebook.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_tunebook.js: splits a string representing ABC Music Notation into individual tunes.\n\nvar Parse = __webpack_require__(/*! ../parse/abc_parse */ \"(ssr)/./node_modules/abcjs/src/parse/abc_parse.js\");\nvar bookParser = __webpack_require__(/*! ../parse/abc_parse_book */ \"(ssr)/./node_modules/abcjs/src/parse/abc_parse_book.js\");\nvar tablatures = __webpack_require__(/*! ../tablatures/abc_tablatures */ \"(ssr)/./node_modules/abcjs/src/tablatures/abc_tablatures.js\");\n\n\nvar tunebook = {};\n\n(function() {\n\t\"use strict\";\n\n\ttunebook.numberOfTunes = function(abc) {\n\t\tvar tunes = abc.split(\"\\nX:\");\n\t\tvar num = tunes.length;\n\t\tif (num === 0) num = 1;\n\t\treturn num;\n\t};\n\n\tvar TuneBook = tunebook.TuneBook = function(book) {\n\t\tvar parsed = bookParser(book);\n\t\tthis.header = parsed.header;\n\t\tthis.tunes = parsed.tunes;\n\t};\n\n\tTuneBook.prototype.getTuneById = function(id) {\n\t\tfor (var i = 0; i < this.tunes.length; i++) {\n\t\t\tif (this.tunes[i].id === ''+id)\n\t\t\t\treturn this.tunes[i];\n\t\t}\n\t\treturn null;\n\t};\n\n\tTuneBook.prototype.getTuneByTitle = function(title) {\n\t\tfor (var i = 0; i < this.tunes.length; i++) {\n\t\t\tif (this.tunes[i].title === title)\n\t\t\t\treturn this.tunes[i];\n\t\t}\n\t\treturn null;\n\t};\n\n\ttunebook.parseOnly = function(abc, params) {\n\t\tvar numTunes = tunebook.numberOfTunes(abc);\n\n\t\t// this just needs to be passed in because this tells the engine how many tunes to process.\n\t\tvar output = [];\n\t\tfor (var i = 0; i < numTunes; i++) {\n\t\t\toutput.push(1);\n\t\t}\n\t\tfunction callback() {\n\t\t\t// Don't need to do anything with the parsed tunes.\n\t\t}\n\t\treturn tunebook.renderEngine(callback, output, abc, params);\n\t};\n\n\ttunebook.renderEngine = function (callback, output, abc, params) {\n\t\tvar ret = [];\n\t\tvar isArray = function(testObject) {\n\t\t\treturn testObject && !(testObject.propertyIsEnumerable('length')) && typeof testObject === 'object' && typeof testObject.length === 'number';\n\t\t};\n\n\t\t// check and normalize input parameters\n\t\tif (output === undefined || abc === undefined)\n\t\t\treturn;\n\t\tif (!isArray(output))\n\t\t\toutput = [ output ];\n\t\tif (params === undefined)\n\t\t\tparams = {};\n\t\tvar currentTune = params.startingTune ? parseInt(params.startingTune, 10) : 0;\n\n\t\t// parse the abc string\n\t\tvar book = new TuneBook(abc);\n\t\tvar abcParser = new Parse();\n\n\t\t// output each tune, if it exists. Otherwise clear the div.\n\t\tfor (var i = 0; i < output.length; i++) {\n\t\t\tvar div = output[i];\n\t\t\tif (div === \"*\") {\n\t\t\t\t// This is for \"headless\" rendering: doing the work but not showing the svg.\n\t\t\t} else if (typeof(div) === \"string\")\n\t\t\t\tdiv = document.getElementById(div);\n\t\t\tif (div) {\n\t\t\t\tif (currentTune >= 0 && currentTune < book.tunes.length) {\n\t\t\t\t\tabcParser.parse(book.tunes[currentTune].abc, params, book.tunes[currentTune].startPos - book.header.length);\n\t\t\t\t\tvar tune = abcParser.getTune();\n\t\t\t\t\t//\n\t\t\t\t\t// Init tablatures plugins\n\t\t\t\t\t//\n\t\t\t\t\tif (params.tablature) {\n\t\t\t\t\t\ttune.tablatures = tablatures.preparePlugins(tune, currentTune, params);\n\t\t\t\t\t}\n\t\t\t\t\tvar warnings = abcParser.getWarnings();\n\t\t\t\t\tif (warnings)\n\t\t\t\t\t\ttune.warnings = warnings;\n\t\t\t\t\tvar override = callback(div, tune, i, book.tunes[currentTune].abc);\n\t\t\t\t\tret.push(override ? override : tune);\n\t\t\t\t} else {\n\t\t\t\t\tif (div['innerHTML'])\n\t\t\t\t\t\tdiv.innerHTML = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tcurrentTune++;\n\t\t}\n\t  return ret;\n\t};\n\n\tfunction flattenTune(tuneObj) {\n\t\t// This removes the line breaks and removes the non-music lines.\n\t\tvar staves = [];\n\t\tfor (var j = 0; j < tuneObj.lines.length; j++) {\n\t\t\tvar line = tuneObj.lines[j];\n\t\t\tif (line.staff) {\n\t\t\t\tfor (var k = 0; k < line.staff.length; k++) {\n\t\t\t\t\tvar staff = line.staff[k];\n\t\t\t\t\tif (!staves[k])\n\t\t\t\t\t\tstaves[k] = staff;\n\t\t\t\t\telse {\n\t\t\t\t\t\tfor (var i = 0; i < staff.voices.length; i++) {\n\t\t\t\t\t\t\tif (staves[k].voices[i])\n\t\t\t\t\t\t\t\tstaves[k].voices[i] = staves[k].voices[i].concat(staff.voices[i]);\n\t\t\t\t\t\t\t// TODO-PER: If staves[k].voices[i] doesn't exist, that means a voice appeared in the middle of the tune. That isn't handled yet.\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn staves;\n\t}\n\n\tfunction measuresParser(staff, tune) {\n\t\tvar voices = [];\n\t\tvar lastChord = null;\n\t\tvar measureStartChord = null;\n\t\tvar fragStart = null;\n\t\tvar hasNotes = false;\n\n\t\tfor (var i = 0; i < staff.voices.length; i++) {\n\t\t\tvar voice = staff.voices[i];\n\t\t\tvoices.push([]);\n\t\t\tfor (var j = 0; j < voice.length; j++) {\n\t\t\t\tvar elem = voice[j];\n\t\t\t\tif (fragStart === null && elem.startChar >= 0) {\n\t\t\t\t\tfragStart = elem.startChar;\n\t\t\t\t\tif (elem.chord === undefined)\n\t\t\t\t\t\tmeasureStartChord = lastChord;\n\t\t\t\t\telse\n\t\t\t\t\t\tmeasureStartChord = null;\n\t\t\t\t}\n\t\t\t\tif (elem.chord)\n\t\t\t\t\tlastChord = elem;\n\t\t\t\tif (elem.el_type === 'bar') {\n\t\t\t\t\tif (hasNotes) {\n\t\t\t\t\t\tvar frag = tune.abc.substring(fragStart, elem.endChar);\n\t\t\t\t\t\tvar measure = {abc: frag};\n\t\t\t\t\t\tlastChord = measureStartChord && measureStartChord.chord && measureStartChord.chord.length > 0 ? measureStartChord.chord[0].name : null;\n\t\t\t\t\t\tif (lastChord)\n\t\t\t\t\t\t\tmeasure.lastChord = lastChord;\n\t\t\t\t\t\tif (elem.startEnding)\n\t\t\t\t\t\t\tmeasure.startEnding = elem.startEnding;\n\t\t\t\t\t\tif (elem.endEnding)\n\t\t\t\t\t\t\tmeasure.endEnding = elem.endEnding;\n\t\t\t\t\t\tvoices[i].push(measure);\n\t\t\t\t\t\tfragStart = null;\n\t\t\t\t\t\thasNotes = false;\n\t\t\t\t\t}\n\t\t\t\t} else if (elem.el_type === 'note') {\n\t\t\t\t\thasNotes = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn voices;\n\t}\n\n\ttunebook.extractMeasures = function(abc) {\n\t\tvar tunes = [];\n\t\tvar book = new TuneBook(abc);\n\t\tfor (var i = 0; i < book.tunes.length; i++) {\n\t\t\tvar tune = book.tunes[i];\n\t\t\tvar arr = tune.abc.split(\"K:\");\n\t\t\tvar arr2 = arr[1].split(\"\\n\");\n\t\t\tvar header = arr[0] + \"K:\" + arr2[0] + \"\\n\";\n\t\t\tvar lastChord = null;\n\t\t\tvar measureStartChord = null;\n\t\t\tvar fragStart = null;\n\t\t\tvar measures = [];\n\t\t\tvar hasNotes = false;\n\t\t\tvar tuneObj = tunebook.parseOnly(tune.abc)[0];\n\t\t\tvar hasPickup = tuneObj.getPickupLength() > 0;\n\t\t\t// var staves = flattenTune(tuneObj);\n\t\t\t// for (var s = 0; s < staves.length; s++) {\n\t\t\t// \tvar voices = measuresParser(staves[s], tune);\n\t\t\t// \tif (s === 0)\n\t\t\t// \t\tmeasures = voices;\n\t\t\t// \telse {\n\t\t\t// \t\tfor (var ss = 0; ss < voices.length; ss++) {\n\t\t\t// \t\t\tvar voice = voices[ss];\n\t\t\t// \t\t\tif (measures.length <= ss)\n\t\t\t// \t\t\t\tmeasures.push([]);\n\t\t\t// \t\t\tvar measureVoice = measures[ss];\n\t\t\t// \t\t\tfor (var sss = 0; sss < voice.length; sss++) {\n\t\t\t// \t\t\t\tif (measureVoice.length > sss)\n\t\t\t// \t\t\t\t\tmeasureVoice[sss].abc += \"\\n\" + voice[sss].abc;\n\t\t\t// \t\t\t\telse\n\t\t\t// \t\t\t\t\tmeasures.push(voice[sss]);\n\t\t\t// \t\t\t}\n\t\t\t// \t\t}\n\t\t\t// \t}\n\t\t\t// \tconsole.log(voices);\n\t\t\t// }\n\t\t\t// measures = measures[0];\n\n\t\t\tfor (var j = 0; j < tuneObj.lines.length; j++) {\n\t\t\t\tvar line = tuneObj.lines[j];\n\t\t\t\tif (line.staff) {\n\t\t\t\t\tfor (var k = 0; k < 1 /*line.staff.length*/; k++) {\n\t\t\t\t\t\tvar staff = line.staff[k];\n\t\t\t\t\t\tfor (var kk = 0; kk < 1 /*staff.voices.length*/; kk++) {\n\t\t\t\t\t\t\tvar voice = staff.voices[kk];\n\t\t\t\t\t\t\tfor (var kkk = 0; kkk < voice.length; kkk++) {\n\t\t\t\t\t\t\t\tvar elem = voice[kkk];\n\t\t\t\t\t\t\t\tif (fragStart === null && elem.startChar >= 0) {\n\t\t\t\t\t\t\t\t\tfragStart = elem.startChar;\n\t\t\t\t\t\t\t\t\tif (elem.chord === undefined)\n\t\t\t\t\t\t\t\t\t\tmeasureStartChord = lastChord;\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\tmeasureStartChord = null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (elem.chord)\n\t\t\t\t\t\t\t\t\tlastChord = elem;\n\t\t\t\t\t\t\t\tif (elem.el_type === 'bar') {\n\t\t\t\t\t\t\t\t\tif (hasNotes) {\n\t\t\t\t\t\t\t\t\t\tvar frag = tune.abc.substring(fragStart, elem.endChar);\n\t\t\t\t\t\t\t\t\t\tvar measure = {abc: frag};\n\t\t\t\t\t\t\t\t\t\tlastChord = measureStartChord && measureStartChord.chord && measureStartChord.chord.length > 0 ? measureStartChord.chord[0].name : null;\n\t\t\t\t\t\t\t\t\t\tif (lastChord)\n\t\t\t\t\t\t\t\t\t\t\tmeasure.lastChord = lastChord;\n\t\t\t\t\t\t\t\t\t\tif (elem.startEnding)\n\t\t\t\t\t\t\t\t\t\t\tmeasure.startEnding = elem.startEnding;\n\t\t\t\t\t\t\t\t\t\tif (elem.endEnding)\n\t\t\t\t\t\t\t\t\t\t\tmeasure.endEnding = elem.endEnding;\n\t\t\t\t\t\t\t\t\t\tmeasures.push(measure);\n\t\t\t\t\t\t\t\t\t\tfragStart = null;\n\t\t\t\t\t\t\t\t\t\thasNotes = false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (elem.el_type === 'note') {\n\t\t\t\t\t\t\t\t\thasNotes = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\ttunes.push({\n\t\t\t\theader: header,\n\t\t\t\tmeasures: measures,\n\t\t\t\thasPickup: hasPickup\n\t\t\t});\n\t\t}\n\t\treturn tunes;\n\t};\n})();\n\nmodule.exports = tunebook;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL2FwaS9hYmNfdHVuZWJvb2suanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsWUFBWSxtQkFBTyxDQUFDLDZFQUFvQjtBQUN4QyxpQkFBaUIsbUJBQU8sQ0FBQyx1RkFBeUI7QUFDbEQsaUJBQWlCLG1CQUFPLENBQUMsaUdBQThCOzs7QUFHdkQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQix1QkFBdUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQix1QkFBdUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0IsY0FBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLG1CQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMEJBQTBCO0FBQzVDO0FBQ0E7QUFDQSxvQkFBb0IsdUJBQXVCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHlCQUF5QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLHlCQUF5QjtBQUMzQztBQUNBO0FBQ0EsbUJBQW1CLGtCQUFrQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdUJBQXVCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixtQkFBbUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsb0JBQW9CO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLG9CQUFvQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsMEJBQTBCO0FBQzdDO0FBQ0E7QUFDQSxxQkFBcUIsNkJBQTZCO0FBQ2xEO0FBQ0EsdUJBQXVCLGdDQUFnQztBQUN2RDtBQUNBLHlCQUF5QixvQkFBb0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvYXBpL2FiY190dW5lYm9vay5qcz9mNTIzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vICAgIGFiY190dW5lYm9vay5qczogc3BsaXRzIGEgc3RyaW5nIHJlcHJlc2VudGluZyBBQkMgTXVzaWMgTm90YXRpb24gaW50byBpbmRpdmlkdWFsIHR1bmVzLlxuXG52YXIgUGFyc2UgPSByZXF1aXJlKCcuLi9wYXJzZS9hYmNfcGFyc2UnKTtcbnZhciBib29rUGFyc2VyID0gcmVxdWlyZSgnLi4vcGFyc2UvYWJjX3BhcnNlX2Jvb2snKTtcbnZhciB0YWJsYXR1cmVzID0gcmVxdWlyZSgnLi4vdGFibGF0dXJlcy9hYmNfdGFibGF0dXJlcycpO1xuXG5cbnZhciB0dW5lYm9vayA9IHt9O1xuXG4oZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHR1bmVib29rLm51bWJlck9mVHVuZXMgPSBmdW5jdGlvbihhYmMpIHtcblx0XHR2YXIgdHVuZXMgPSBhYmMuc3BsaXQoXCJcXG5YOlwiKTtcblx0XHR2YXIgbnVtID0gdHVuZXMubGVuZ3RoO1xuXHRcdGlmIChudW0gPT09IDApIG51bSA9IDE7XG5cdFx0cmV0dXJuIG51bTtcblx0fTtcblxuXHR2YXIgVHVuZUJvb2sgPSB0dW5lYm9vay5UdW5lQm9vayA9IGZ1bmN0aW9uKGJvb2spIHtcblx0XHR2YXIgcGFyc2VkID0gYm9va1BhcnNlcihib29rKTtcblx0XHR0aGlzLmhlYWRlciA9IHBhcnNlZC5oZWFkZXI7XG5cdFx0dGhpcy50dW5lcyA9IHBhcnNlZC50dW5lcztcblx0fTtcblxuXHRUdW5lQm9vay5wcm90b3R5cGUuZ2V0VHVuZUJ5SWQgPSBmdW5jdGlvbihpZCkge1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50dW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKHRoaXMudHVuZXNbaV0uaWQgPT09ICcnK2lkKVxuXHRcdFx0XHRyZXR1cm4gdGhpcy50dW5lc1tpXTtcblx0XHR9XG5cdFx0cmV0dXJuIG51bGw7XG5cdH07XG5cblx0VHVuZUJvb2sucHJvdG90eXBlLmdldFR1bmVCeVRpdGxlID0gZnVuY3Rpb24odGl0bGUpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudHVuZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmICh0aGlzLnR1bmVzW2ldLnRpdGxlID09PSB0aXRsZSlcblx0XHRcdFx0cmV0dXJuIHRoaXMudHVuZXNbaV07XG5cdFx0fVxuXHRcdHJldHVybiBudWxsO1xuXHR9O1xuXG5cdHR1bmVib29rLnBhcnNlT25seSA9IGZ1bmN0aW9uKGFiYywgcGFyYW1zKSB7XG5cdFx0dmFyIG51bVR1bmVzID0gdHVuZWJvb2subnVtYmVyT2ZUdW5lcyhhYmMpO1xuXG5cdFx0Ly8gdGhpcyBqdXN0IG5lZWRzIHRvIGJlIHBhc3NlZCBpbiBiZWNhdXNlIHRoaXMgdGVsbHMgdGhlIGVuZ2luZSBob3cgbWFueSB0dW5lcyB0byBwcm9jZXNzLlxuXHRcdHZhciBvdXRwdXQgPSBbXTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG51bVR1bmVzOyBpKyspIHtcblx0XHRcdG91dHB1dC5wdXNoKDEpO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBjYWxsYmFjaygpIHtcblx0XHRcdC8vIERvbid0IG5lZWQgdG8gZG8gYW55dGhpbmcgd2l0aCB0aGUgcGFyc2VkIHR1bmVzLlxuXHRcdH1cblx0XHRyZXR1cm4gdHVuZWJvb2sucmVuZGVyRW5naW5lKGNhbGxiYWNrLCBvdXRwdXQsIGFiYywgcGFyYW1zKTtcblx0fTtcblxuXHR0dW5lYm9vay5yZW5kZXJFbmdpbmUgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIG91dHB1dCwgYWJjLCBwYXJhbXMpIHtcblx0XHR2YXIgcmV0ID0gW107XG5cdFx0dmFyIGlzQXJyYXkgPSBmdW5jdGlvbih0ZXN0T2JqZWN0KSB7XG5cdFx0XHRyZXR1cm4gdGVzdE9iamVjdCAmJiAhKHRlc3RPYmplY3QucHJvcGVydHlJc0VudW1lcmFibGUoJ2xlbmd0aCcpKSAmJiB0eXBlb2YgdGVzdE9iamVjdCA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHRlc3RPYmplY3QubGVuZ3RoID09PSAnbnVtYmVyJztcblx0XHR9O1xuXG5cdFx0Ly8gY2hlY2sgYW5kIG5vcm1hbGl6ZSBpbnB1dCBwYXJhbWV0ZXJzXG5cdFx0aWYgKG91dHB1dCA9PT0gdW5kZWZpbmVkIHx8IGFiYyA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0cmV0dXJuO1xuXHRcdGlmICghaXNBcnJheShvdXRwdXQpKVxuXHRcdFx0b3V0cHV0ID0gWyBvdXRwdXQgXTtcblx0XHRpZiAocGFyYW1zID09PSB1bmRlZmluZWQpXG5cdFx0XHRwYXJhbXMgPSB7fTtcblx0XHR2YXIgY3VycmVudFR1bmUgPSBwYXJhbXMuc3RhcnRpbmdUdW5lID8gcGFyc2VJbnQocGFyYW1zLnN0YXJ0aW5nVHVuZSwgMTApIDogMDtcblxuXHRcdC8vIHBhcnNlIHRoZSBhYmMgc3RyaW5nXG5cdFx0dmFyIGJvb2sgPSBuZXcgVHVuZUJvb2soYWJjKTtcblx0XHR2YXIgYWJjUGFyc2VyID0gbmV3IFBhcnNlKCk7XG5cblx0XHQvLyBvdXRwdXQgZWFjaCB0dW5lLCBpZiBpdCBleGlzdHMuIE90aGVyd2lzZSBjbGVhciB0aGUgZGl2LlxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgb3V0cHV0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZGl2ID0gb3V0cHV0W2ldO1xuXHRcdFx0aWYgKGRpdiA9PT0gXCIqXCIpIHtcblx0XHRcdFx0Ly8gVGhpcyBpcyBmb3IgXCJoZWFkbGVzc1wiIHJlbmRlcmluZzogZG9pbmcgdGhlIHdvcmsgYnV0IG5vdCBzaG93aW5nIHRoZSBzdmcuXG5cdFx0XHR9IGVsc2UgaWYgKHR5cGVvZihkaXYpID09PSBcInN0cmluZ1wiKVxuXHRcdFx0XHRkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkaXYpO1xuXHRcdFx0aWYgKGRpdikge1xuXHRcdFx0XHRpZiAoY3VycmVudFR1bmUgPj0gMCAmJiBjdXJyZW50VHVuZSA8IGJvb2sudHVuZXMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0YWJjUGFyc2VyLnBhcnNlKGJvb2sudHVuZXNbY3VycmVudFR1bmVdLmFiYywgcGFyYW1zLCBib29rLnR1bmVzW2N1cnJlbnRUdW5lXS5zdGFydFBvcyAtIGJvb2suaGVhZGVyLmxlbmd0aCk7XG5cdFx0XHRcdFx0dmFyIHR1bmUgPSBhYmNQYXJzZXIuZ2V0VHVuZSgpO1xuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0Ly8gSW5pdCB0YWJsYXR1cmVzIHBsdWdpbnNcblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdGlmIChwYXJhbXMudGFibGF0dXJlKSB7XG5cdFx0XHRcdFx0XHR0dW5lLnRhYmxhdHVyZXMgPSB0YWJsYXR1cmVzLnByZXBhcmVQbHVnaW5zKHR1bmUsIGN1cnJlbnRUdW5lLCBwYXJhbXMpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR2YXIgd2FybmluZ3MgPSBhYmNQYXJzZXIuZ2V0V2FybmluZ3MoKTtcblx0XHRcdFx0XHRpZiAod2FybmluZ3MpXG5cdFx0XHRcdFx0XHR0dW5lLndhcm5pbmdzID0gd2FybmluZ3M7XG5cdFx0XHRcdFx0dmFyIG92ZXJyaWRlID0gY2FsbGJhY2soZGl2LCB0dW5lLCBpLCBib29rLnR1bmVzW2N1cnJlbnRUdW5lXS5hYmMpO1xuXHRcdFx0XHRcdHJldC5wdXNoKG92ZXJyaWRlID8gb3ZlcnJpZGUgOiB0dW5lKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoZGl2Wydpbm5lckhUTUwnXSlcblx0XHRcdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRjdXJyZW50VHVuZSsrO1xuXHRcdH1cblx0ICByZXR1cm4gcmV0O1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGZsYXR0ZW5UdW5lKHR1bmVPYmopIHtcblx0XHQvLyBUaGlzIHJlbW92ZXMgdGhlIGxpbmUgYnJlYWtzIGFuZCByZW1vdmVzIHRoZSBub24tbXVzaWMgbGluZXMuXG5cdFx0dmFyIHN0YXZlcyA9IFtdO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgdHVuZU9iai5saW5lcy5sZW5ndGg7IGorKykge1xuXHRcdFx0dmFyIGxpbmUgPSB0dW5lT2JqLmxpbmVzW2pdO1xuXHRcdFx0aWYgKGxpbmUuc3RhZmYpIHtcblx0XHRcdFx0Zm9yICh2YXIgayA9IDA7IGsgPCBsaW5lLnN0YWZmLmxlbmd0aDsgaysrKSB7XG5cdFx0XHRcdFx0dmFyIHN0YWZmID0gbGluZS5zdGFmZltrXTtcblx0XHRcdFx0XHRpZiAoIXN0YXZlc1trXSlcblx0XHRcdFx0XHRcdHN0YXZlc1trXSA9IHN0YWZmO1xuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdGFmZi52b2ljZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0aWYgKHN0YXZlc1trXS52b2ljZXNbaV0pXG5cdFx0XHRcdFx0XHRcdFx0c3RhdmVzW2tdLnZvaWNlc1tpXSA9IHN0YXZlc1trXS52b2ljZXNbaV0uY29uY2F0KHN0YWZmLnZvaWNlc1tpXSk7XG5cdFx0XHRcdFx0XHRcdC8vIFRPRE8tUEVSOiBJZiBzdGF2ZXNba10udm9pY2VzW2ldIGRvZXNuJ3QgZXhpc3QsIHRoYXQgbWVhbnMgYSB2b2ljZSBhcHBlYXJlZCBpbiB0aGUgbWlkZGxlIG9mIHRoZSB0dW5lLiBUaGF0IGlzbid0IGhhbmRsZWQgeWV0LlxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gc3RhdmVzO1xuXHR9XG5cblx0ZnVuY3Rpb24gbWVhc3VyZXNQYXJzZXIoc3RhZmYsIHR1bmUpIHtcblx0XHR2YXIgdm9pY2VzID0gW107XG5cdFx0dmFyIGxhc3RDaG9yZCA9IG51bGw7XG5cdFx0dmFyIG1lYXN1cmVTdGFydENob3JkID0gbnVsbDtcblx0XHR2YXIgZnJhZ1N0YXJ0ID0gbnVsbDtcblx0XHR2YXIgaGFzTm90ZXMgPSBmYWxzZTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3RhZmYudm9pY2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgdm9pY2UgPSBzdGFmZi52b2ljZXNbaV07XG5cdFx0XHR2b2ljZXMucHVzaChbXSk7XG5cdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHZvaWNlLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHZhciBlbGVtID0gdm9pY2Vbal07XG5cdFx0XHRcdGlmIChmcmFnU3RhcnQgPT09IG51bGwgJiYgZWxlbS5zdGFydENoYXIgPj0gMCkge1xuXHRcdFx0XHRcdGZyYWdTdGFydCA9IGVsZW0uc3RhcnRDaGFyO1xuXHRcdFx0XHRcdGlmIChlbGVtLmNob3JkID09PSB1bmRlZmluZWQpXG5cdFx0XHRcdFx0XHRtZWFzdXJlU3RhcnRDaG9yZCA9IGxhc3RDaG9yZDtcblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRtZWFzdXJlU3RhcnRDaG9yZCA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGVsZW0uY2hvcmQpXG5cdFx0XHRcdFx0bGFzdENob3JkID0gZWxlbTtcblx0XHRcdFx0aWYgKGVsZW0uZWxfdHlwZSA9PT0gJ2JhcicpIHtcblx0XHRcdFx0XHRpZiAoaGFzTm90ZXMpIHtcblx0XHRcdFx0XHRcdHZhciBmcmFnID0gdHVuZS5hYmMuc3Vic3RyaW5nKGZyYWdTdGFydCwgZWxlbS5lbmRDaGFyKTtcblx0XHRcdFx0XHRcdHZhciBtZWFzdXJlID0ge2FiYzogZnJhZ307XG5cdFx0XHRcdFx0XHRsYXN0Q2hvcmQgPSBtZWFzdXJlU3RhcnRDaG9yZCAmJiBtZWFzdXJlU3RhcnRDaG9yZC5jaG9yZCAmJiBtZWFzdXJlU3RhcnRDaG9yZC5jaG9yZC5sZW5ndGggPiAwID8gbWVhc3VyZVN0YXJ0Q2hvcmQuY2hvcmRbMF0ubmFtZSA6IG51bGw7XG5cdFx0XHRcdFx0XHRpZiAobGFzdENob3JkKVxuXHRcdFx0XHRcdFx0XHRtZWFzdXJlLmxhc3RDaG9yZCA9IGxhc3RDaG9yZDtcblx0XHRcdFx0XHRcdGlmIChlbGVtLnN0YXJ0RW5kaW5nKVxuXHRcdFx0XHRcdFx0XHRtZWFzdXJlLnN0YXJ0RW5kaW5nID0gZWxlbS5zdGFydEVuZGluZztcblx0XHRcdFx0XHRcdGlmIChlbGVtLmVuZEVuZGluZylcblx0XHRcdFx0XHRcdFx0bWVhc3VyZS5lbmRFbmRpbmcgPSBlbGVtLmVuZEVuZGluZztcblx0XHRcdFx0XHRcdHZvaWNlc1tpXS5wdXNoKG1lYXN1cmUpO1xuXHRcdFx0XHRcdFx0ZnJhZ1N0YXJ0ID0gbnVsbDtcblx0XHRcdFx0XHRcdGhhc05vdGVzID0gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKGVsZW0uZWxfdHlwZSA9PT0gJ25vdGUnKSB7XG5cdFx0XHRcdFx0aGFzTm90ZXMgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB2b2ljZXM7XG5cdH1cblxuXHR0dW5lYm9vay5leHRyYWN0TWVhc3VyZXMgPSBmdW5jdGlvbihhYmMpIHtcblx0XHR2YXIgdHVuZXMgPSBbXTtcblx0XHR2YXIgYm9vayA9IG5ldyBUdW5lQm9vayhhYmMpO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYm9vay50dW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIHR1bmUgPSBib29rLnR1bmVzW2ldO1xuXHRcdFx0dmFyIGFyciA9IHR1bmUuYWJjLnNwbGl0KFwiSzpcIik7XG5cdFx0XHR2YXIgYXJyMiA9IGFyclsxXS5zcGxpdChcIlxcblwiKTtcblx0XHRcdHZhciBoZWFkZXIgPSBhcnJbMF0gKyBcIks6XCIgKyBhcnIyWzBdICsgXCJcXG5cIjtcblx0XHRcdHZhciBsYXN0Q2hvcmQgPSBudWxsO1xuXHRcdFx0dmFyIG1lYXN1cmVTdGFydENob3JkID0gbnVsbDtcblx0XHRcdHZhciBmcmFnU3RhcnQgPSBudWxsO1xuXHRcdFx0dmFyIG1lYXN1cmVzID0gW107XG5cdFx0XHR2YXIgaGFzTm90ZXMgPSBmYWxzZTtcblx0XHRcdHZhciB0dW5lT2JqID0gdHVuZWJvb2sucGFyc2VPbmx5KHR1bmUuYWJjKVswXTtcblx0XHRcdHZhciBoYXNQaWNrdXAgPSB0dW5lT2JqLmdldFBpY2t1cExlbmd0aCgpID4gMDtcblx0XHRcdC8vIHZhciBzdGF2ZXMgPSBmbGF0dGVuVHVuZSh0dW5lT2JqKTtcblx0XHRcdC8vIGZvciAodmFyIHMgPSAwOyBzIDwgc3RhdmVzLmxlbmd0aDsgcysrKSB7XG5cdFx0XHQvLyBcdHZhciB2b2ljZXMgPSBtZWFzdXJlc1BhcnNlcihzdGF2ZXNbc10sIHR1bmUpO1xuXHRcdFx0Ly8gXHRpZiAocyA9PT0gMClcblx0XHRcdC8vIFx0XHRtZWFzdXJlcyA9IHZvaWNlcztcblx0XHRcdC8vIFx0ZWxzZSB7XG5cdFx0XHQvLyBcdFx0Zm9yICh2YXIgc3MgPSAwOyBzcyA8IHZvaWNlcy5sZW5ndGg7IHNzKyspIHtcblx0XHRcdC8vIFx0XHRcdHZhciB2b2ljZSA9IHZvaWNlc1tzc107XG5cdFx0XHQvLyBcdFx0XHRpZiAobWVhc3VyZXMubGVuZ3RoIDw9IHNzKVxuXHRcdFx0Ly8gXHRcdFx0XHRtZWFzdXJlcy5wdXNoKFtdKTtcblx0XHRcdC8vIFx0XHRcdHZhciBtZWFzdXJlVm9pY2UgPSBtZWFzdXJlc1tzc107XG5cdFx0XHQvLyBcdFx0XHRmb3IgKHZhciBzc3MgPSAwOyBzc3MgPCB2b2ljZS5sZW5ndGg7IHNzcysrKSB7XG5cdFx0XHQvLyBcdFx0XHRcdGlmIChtZWFzdXJlVm9pY2UubGVuZ3RoID4gc3NzKVxuXHRcdFx0Ly8gXHRcdFx0XHRcdG1lYXN1cmVWb2ljZVtzc3NdLmFiYyArPSBcIlxcblwiICsgdm9pY2Vbc3NzXS5hYmM7XG5cdFx0XHQvLyBcdFx0XHRcdGVsc2Vcblx0XHRcdC8vIFx0XHRcdFx0XHRtZWFzdXJlcy5wdXNoKHZvaWNlW3Nzc10pO1xuXHRcdFx0Ly8gXHRcdFx0fVxuXHRcdFx0Ly8gXHRcdH1cblx0XHRcdC8vIFx0fVxuXHRcdFx0Ly8gXHRjb25zb2xlLmxvZyh2b2ljZXMpO1xuXHRcdFx0Ly8gfVxuXHRcdFx0Ly8gbWVhc3VyZXMgPSBtZWFzdXJlc1swXTtcblxuXHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCB0dW5lT2JqLmxpbmVzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHZhciBsaW5lID0gdHVuZU9iai5saW5lc1tqXTtcblx0XHRcdFx0aWYgKGxpbmUuc3RhZmYpIHtcblx0XHRcdFx0XHRmb3IgKHZhciBrID0gMDsgayA8IDEgLypsaW5lLnN0YWZmLmxlbmd0aCovOyBrKyspIHtcblx0XHRcdFx0XHRcdHZhciBzdGFmZiA9IGxpbmUuc3RhZmZba107XG5cdFx0XHRcdFx0XHRmb3IgKHZhciBrayA9IDA7IGtrIDwgMSAvKnN0YWZmLnZvaWNlcy5sZW5ndGgqLzsga2srKykge1xuXHRcdFx0XHRcdFx0XHR2YXIgdm9pY2UgPSBzdGFmZi52b2ljZXNba2tdO1xuXHRcdFx0XHRcdFx0XHRmb3IgKHZhciBra2sgPSAwOyBra2sgPCB2b2ljZS5sZW5ndGg7IGtraysrKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGVsZW0gPSB2b2ljZVtra2tdO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChmcmFnU3RhcnQgPT09IG51bGwgJiYgZWxlbS5zdGFydENoYXIgPj0gMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZnJhZ1N0YXJ0ID0gZWxlbS5zdGFydENoYXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoZWxlbS5jaG9yZCA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRtZWFzdXJlU3RhcnRDaG9yZCA9IGxhc3RDaG9yZDtcblx0XHRcdFx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdFx0XHRcdFx0bWVhc3VyZVN0YXJ0Q2hvcmQgPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRpZiAoZWxlbS5jaG9yZClcblx0XHRcdFx0XHRcdFx0XHRcdGxhc3RDaG9yZCA9IGVsZW07XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGVsZW0uZWxfdHlwZSA9PT0gJ2JhcicpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChoYXNOb3Rlcykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgZnJhZyA9IHR1bmUuYWJjLnN1YnN0cmluZyhmcmFnU3RhcnQsIGVsZW0uZW5kQ2hhcik7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBtZWFzdXJlID0ge2FiYzogZnJhZ307XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxhc3RDaG9yZCA9IG1lYXN1cmVTdGFydENob3JkICYmIG1lYXN1cmVTdGFydENob3JkLmNob3JkICYmIG1lYXN1cmVTdGFydENob3JkLmNob3JkLmxlbmd0aCA+IDAgPyBtZWFzdXJlU3RhcnRDaG9yZC5jaG9yZFswXS5uYW1lIDogbnVsbDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGxhc3RDaG9yZClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtZWFzdXJlLmxhc3RDaG9yZCA9IGxhc3RDaG9yZDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVsZW0uc3RhcnRFbmRpbmcpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWVhc3VyZS5zdGFydEVuZGluZyA9IGVsZW0uc3RhcnRFbmRpbmc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlbGVtLmVuZEVuZGluZylcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtZWFzdXJlLmVuZEVuZGluZyA9IGVsZW0uZW5kRW5kaW5nO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRtZWFzdXJlcy5wdXNoKG1lYXN1cmUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRmcmFnU3RhcnQgPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRoYXNOb3RlcyA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoZWxlbS5lbF90eXBlID09PSAnbm90ZScpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGhhc05vdGVzID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHR1bmVzLnB1c2goe1xuXHRcdFx0XHRoZWFkZXI6IGhlYWRlcixcblx0XHRcdFx0bWVhc3VyZXM6IG1lYXN1cmVzLFxuXHRcdFx0XHRoYXNQaWNrdXA6IGhhc1BpY2t1cFxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHJldHVybiB0dW5lcztcblx0fTtcbn0pKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gdHVuZWJvb2s7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/api/abc_tunebook.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/api/abc_tunebook_svg.js":
/*!********************************************************!*\
  !*** ./node_modules/abcjs/src/api/abc_tunebook_svg.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var tunebook = __webpack_require__(/*! ./abc_tunebook */ \"(ssr)/./node_modules/abcjs/src/api/abc_tunebook.js\");\nvar Tune = __webpack_require__(/*! ../data/abc_tune */ \"(ssr)/./node_modules/abcjs/src/data/abc_tune.js\");\n\nvar EngraverController = __webpack_require__(/*! ../write/engraver-controller */ \"(ssr)/./node_modules/abcjs/src/write/engraver-controller.js\");\nvar Parse = __webpack_require__(/*! ../parse/abc_parse */ \"(ssr)/./node_modules/abcjs/src/parse/abc_parse.js\");\nvar wrap = __webpack_require__(/*! ../parse/wrap_lines */ \"(ssr)/./node_modules/abcjs/src/parse/wrap_lines.js\");\n\n\nvar resizeDivs = {};\nfunction resizeOuter() {\n    var width = window.innerWidth;\n    for (var id in resizeDivs) {\n        if (resizeDivs.hasOwnProperty(id)) {\n            var outer = resizeDivs[id];\n            var ofs = outer.offsetLeft;\n            width -= ofs * 2;\n            outer.style.width = width + \"px\";\n        }\n    }\n}\n\ntry {\n    window.addEventListener(\"resize\", resizeOuter);\n    window.addEventListener(\"orientationChange\", resizeOuter);\n} catch(e) {\n    // if we aren't in a browser, this code will crash, but it is not needed then either.\n}\n\nfunction renderOne(div, tune, params, tuneNumber, lineOffset) {\n    if (params.viewportHorizontal) {\n        // Create an inner div that holds the music, so that the passed in div will be the viewport.\n        div.innerHTML = '<div class=\"abcjs-inner\"></div>';\n        if (params.scrollHorizontal) {\n            div.style.overflowX = \"auto\";\n            div.style.overflowY = \"hidden\";\n        } else\n            div.style.overflow = \"hidden\";\n        resizeDivs[div.id] = div; // We use a hash on the element's id so that multiple calls won't keep adding to the list.\n        div = div.children[0]; // The music should be rendered in the inner div.\n    }\n    else if (params.viewportVertical) {\n        // Create an inner div that holds the music, so that the passed in div will be the viewport.\n        div.innerHTML = '<div class=\"abcjs-inner scroll-amount\"></div>';\n        div.style.overflowX = \"hidden\";\n        div.style.overflowY = \"auto\";\n        div = div.children[0]; // The music should be rendered in the inner div.\n    }\n    else\n\t    div.innerHTML = \"\";\n    var engraver_controller = new EngraverController(div, params);\n    engraver_controller.engraveABC(tune, tuneNumber, lineOffset);\n    tune.engraver = engraver_controller;\n    if (params.viewportVertical || params.viewportHorizontal) {\n        // If we added a wrapper around the div, then we need to size the wrapper, too.\n        var parent = div.parentNode;\n        parent.style.width = div.style.width;\n    }\n}\n\n// A quick way to render a tune from javascript when interactivity is not required.\n// This is used when a javascript routine has some abc text that it wants to render\n// in a div or collection of divs. One tune or many can be rendered.\n//\n// parameters:\n//      output: an array of divs that the individual tunes are rendered to.\n//          If the number of tunes exceeds the number of divs in the array, then\n//          only the first tunes are rendered. If the number of divs exceeds the number\n//          of tunes, then the unused divs are cleared. The divs can be passed as either\n//          elements or strings of ids. If ids are passed, then the div MUST exist already.\n//          (if a single element is passed, then it is an implied array of length one.)\n//          (if a null is passed for an element, or the element doesn't exist, then that tune is skipped.)\n//      abc: text representing a tune or an entire tune book in ABC notation.\n//      renderParams: hash of:\n//          startingTune: an index, starting at zero, representing which tune to start rendering at.\n//              (If this element is not present, then rendering starts at zero.)\n//          width: 800 by default. The width in pixels of the output paper\nvar renderAbc = function(output, abc, parserParams, engraverParams, renderParams) {\n    // Note: all parameters have been condensed into the first ones. It doesn't hurt anything to allow the old format, so just copy them here.\n    var params = {};\n    var key;\n    if (parserParams) {\n        for (key in parserParams) {\n            if (parserParams.hasOwnProperty(key)) {\n                params[key] = parserParams[key];\n            }\n        }\n        if (params.warnings_id && params.tablature) {\n            params.tablature.warning_id = params.warnings_id;\n        }\n    }\n    if (engraverParams) {\n        for (key in engraverParams) {\n            if (engraverParams.hasOwnProperty(key)) {\n\t            // There is a conflict with the name of the parameter \"listener\". If it is in the second parameter, then it is for click.\n\t            if (key === \"listener\") {\n\t            \tif (engraverParams[key].highlight)\n\t\t                params.clickListener = engraverParams[key].highlight;\n\t            } else\n                    params[key] = engraverParams[key];\n            }\n        }\n    }\n    if (renderParams) {\n        for (key in renderParams) {\n            if (renderParams.hasOwnProperty(key)) {\n                params[key] = renderParams[key];\n            }\n        }\n    }\n\n    function callback(div, tune, tuneNumber, abcString) {\n        var removeDiv = false;\n        if (div === \"*\") {\n            removeDiv = true;\n            div = document.createElement(\"div\");\n            div.setAttribute(\"style\", \"visibility: hidden;\");\n            document.body.appendChild(div);\n        }\n        if (!removeDiv && params.wrap && params.staffwidth) {\n            tune = doLineWrapping(div, tune, tuneNumber, abcString, params);\n\t        return tune;\n        }\n        if (params.afterParsing)\n            params.afterParsing(tune, tuneNumber, abcString);\n        renderOne(div, tune, params, tuneNumber, 0);\n        if (removeDiv)\n            div.parentNode.removeChild(div);\n        return null;\n    }\n\n    return tunebook.renderEngine(callback, output, abc, params);\n};\n\nfunction doLineWrapping(div, tune, tuneNumber, abcString, params) {\n\tvar engraver_controller = new EngraverController(div, params);\n\tvar widths = engraver_controller.getMeasureWidths(tune);\n\n\tvar ret = wrap.calcLineWraps(tune, widths, params);\n\tif (ret.reParse) {\n        var abcParser = new Parse();\n        abcParser.parse(abcString, ret.revisedParams);\n        tune = abcParser.getTune();\n        var warnings = abcParser.getWarnings();\n        if (warnings)\n            tune.warnings = warnings;\n    }\n    if (params.afterParsing)\n        params.afterParsing(tune, tuneNumber, abcString);\n    renderOne(div, tune, ret.revisedParams, tuneNumber, 0);\n\ttune.explanation = ret.explanation;\n\treturn tune;\n}\n\nmodule.exports = renderAbc;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL2FwaS9hYmNfdHVuZWJvb2tfc3ZnLmpzIiwibWFwcGluZ3MiOiJBQUFBLGVBQWUsbUJBQU8sQ0FBQywwRUFBZ0I7QUFDdkMsV0FBVyxtQkFBTyxDQUFDLHlFQUFrQjs7QUFFckMseUJBQXlCLG1CQUFPLENBQUMsaUdBQThCO0FBQy9ELFlBQVksbUJBQU8sQ0FBQyw2RUFBb0I7QUFDeEMsV0FBVyxtQkFBTyxDQUFDLCtFQUFxQjs7O0FBR3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLGtDQUFrQztBQUNsQywrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRDtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvYXBpL2FiY190dW5lYm9va19zdmcuanM/YWFlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdHVuZWJvb2sgPSByZXF1aXJlKCcuL2FiY190dW5lYm9vaycpO1xudmFyIFR1bmUgPSByZXF1aXJlKCcuLi9kYXRhL2FiY190dW5lJyk7XG5cbnZhciBFbmdyYXZlckNvbnRyb2xsZXIgPSByZXF1aXJlKCcuLi93cml0ZS9lbmdyYXZlci1jb250cm9sbGVyJyk7XG52YXIgUGFyc2UgPSByZXF1aXJlKCcuLi9wYXJzZS9hYmNfcGFyc2UnKTtcbnZhciB3cmFwID0gcmVxdWlyZSgnLi4vcGFyc2Uvd3JhcF9saW5lcycpO1xuXG5cbnZhciByZXNpemVEaXZzID0ge307XG5mdW5jdGlvbiByZXNpemVPdXRlcigpIHtcbiAgICB2YXIgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICBmb3IgKHZhciBpZCBpbiByZXNpemVEaXZzKSB7XG4gICAgICAgIGlmIChyZXNpemVEaXZzLmhhc093blByb3BlcnR5KGlkKSkge1xuICAgICAgICAgICAgdmFyIG91dGVyID0gcmVzaXplRGl2c1tpZF07XG4gICAgICAgICAgICB2YXIgb2ZzID0gb3V0ZXIub2Zmc2V0TGVmdDtcbiAgICAgICAgICAgIHdpZHRoIC09IG9mcyAqIDI7XG4gICAgICAgICAgICBvdXRlci5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiO1xuICAgICAgICB9XG4gICAgfVxufVxuXG50cnkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHJlc2l6ZU91dGVyKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uQ2hhbmdlXCIsIHJlc2l6ZU91dGVyKTtcbn0gY2F0Y2goZSkge1xuICAgIC8vIGlmIHdlIGFyZW4ndCBpbiBhIGJyb3dzZXIsIHRoaXMgY29kZSB3aWxsIGNyYXNoLCBidXQgaXQgaXMgbm90IG5lZWRlZCB0aGVuIGVpdGhlci5cbn1cblxuZnVuY3Rpb24gcmVuZGVyT25lKGRpdiwgdHVuZSwgcGFyYW1zLCB0dW5lTnVtYmVyLCBsaW5lT2Zmc2V0KSB7XG4gICAgaWYgKHBhcmFtcy52aWV3cG9ydEhvcml6b250YWwpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGFuIGlubmVyIGRpdiB0aGF0IGhvbGRzIHRoZSBtdXNpYywgc28gdGhhdCB0aGUgcGFzc2VkIGluIGRpdiB3aWxsIGJlIHRoZSB2aWV3cG9ydC5cbiAgICAgICAgZGl2LmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPVwiYWJjanMtaW5uZXJcIj48L2Rpdj4nO1xuICAgICAgICBpZiAocGFyYW1zLnNjcm9sbEhvcml6b250YWwpIHtcbiAgICAgICAgICAgIGRpdi5zdHlsZS5vdmVyZmxvd1ggPSBcImF1dG9cIjtcbiAgICAgICAgICAgIGRpdi5zdHlsZS5vdmVyZmxvd1kgPSBcImhpZGRlblwiO1xuICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgIGRpdi5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgICAgIHJlc2l6ZURpdnNbZGl2LmlkXSA9IGRpdjsgLy8gV2UgdXNlIGEgaGFzaCBvbiB0aGUgZWxlbWVudCdzIGlkIHNvIHRoYXQgbXVsdGlwbGUgY2FsbHMgd29uJ3Qga2VlcCBhZGRpbmcgdG8gdGhlIGxpc3QuXG4gICAgICAgIGRpdiA9IGRpdi5jaGlsZHJlblswXTsgLy8gVGhlIG11c2ljIHNob3VsZCBiZSByZW5kZXJlZCBpbiB0aGUgaW5uZXIgZGl2LlxuICAgIH1cbiAgICBlbHNlIGlmIChwYXJhbXMudmlld3BvcnRWZXJ0aWNhbCkge1xuICAgICAgICAvLyBDcmVhdGUgYW4gaW5uZXIgZGl2IHRoYXQgaG9sZHMgdGhlIG11c2ljLCBzbyB0aGF0IHRoZSBwYXNzZWQgaW4gZGl2IHdpbGwgYmUgdGhlIHZpZXdwb3J0LlxuICAgICAgICBkaXYuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJhYmNqcy1pbm5lciBzY3JvbGwtYW1vdW50XCI+PC9kaXY+JztcbiAgICAgICAgZGl2LnN0eWxlLm92ZXJmbG93WCA9IFwiaGlkZGVuXCI7XG4gICAgICAgIGRpdi5zdHlsZS5vdmVyZmxvd1kgPSBcImF1dG9cIjtcbiAgICAgICAgZGl2ID0gZGl2LmNoaWxkcmVuWzBdOyAvLyBUaGUgbXVzaWMgc2hvdWxkIGJlIHJlbmRlcmVkIGluIHRoZSBpbm5lciBkaXYuXG4gICAgfVxuICAgIGVsc2Vcblx0ICAgIGRpdi5pbm5lckhUTUwgPSBcIlwiO1xuICAgIHZhciBlbmdyYXZlcl9jb250cm9sbGVyID0gbmV3IEVuZ3JhdmVyQ29udHJvbGxlcihkaXYsIHBhcmFtcyk7XG4gICAgZW5ncmF2ZXJfY29udHJvbGxlci5lbmdyYXZlQUJDKHR1bmUsIHR1bmVOdW1iZXIsIGxpbmVPZmZzZXQpO1xuICAgIHR1bmUuZW5ncmF2ZXIgPSBlbmdyYXZlcl9jb250cm9sbGVyO1xuICAgIGlmIChwYXJhbXMudmlld3BvcnRWZXJ0aWNhbCB8fCBwYXJhbXMudmlld3BvcnRIb3Jpem9udGFsKSB7XG4gICAgICAgIC8vIElmIHdlIGFkZGVkIGEgd3JhcHBlciBhcm91bmQgdGhlIGRpdiwgdGhlbiB3ZSBuZWVkIHRvIHNpemUgdGhlIHdyYXBwZXIsIHRvby5cbiAgICAgICAgdmFyIHBhcmVudCA9IGRpdi5wYXJlbnROb2RlO1xuICAgICAgICBwYXJlbnQuc3R5bGUud2lkdGggPSBkaXYuc3R5bGUud2lkdGg7XG4gICAgfVxufVxuXG4vLyBBIHF1aWNrIHdheSB0byByZW5kZXIgYSB0dW5lIGZyb20gamF2YXNjcmlwdCB3aGVuIGludGVyYWN0aXZpdHkgaXMgbm90IHJlcXVpcmVkLlxuLy8gVGhpcyBpcyB1c2VkIHdoZW4gYSBqYXZhc2NyaXB0IHJvdXRpbmUgaGFzIHNvbWUgYWJjIHRleHQgdGhhdCBpdCB3YW50cyB0byByZW5kZXJcbi8vIGluIGEgZGl2IG9yIGNvbGxlY3Rpb24gb2YgZGl2cy4gT25lIHR1bmUgb3IgbWFueSBjYW4gYmUgcmVuZGVyZWQuXG4vL1xuLy8gcGFyYW1ldGVyczpcbi8vICAgICAgb3V0cHV0OiBhbiBhcnJheSBvZiBkaXZzIHRoYXQgdGhlIGluZGl2aWR1YWwgdHVuZXMgYXJlIHJlbmRlcmVkIHRvLlxuLy8gICAgICAgICAgSWYgdGhlIG51bWJlciBvZiB0dW5lcyBleGNlZWRzIHRoZSBudW1iZXIgb2YgZGl2cyBpbiB0aGUgYXJyYXksIHRoZW5cbi8vICAgICAgICAgIG9ubHkgdGhlIGZpcnN0IHR1bmVzIGFyZSByZW5kZXJlZC4gSWYgdGhlIG51bWJlciBvZiBkaXZzIGV4Y2VlZHMgdGhlIG51bWJlclxuLy8gICAgICAgICAgb2YgdHVuZXMsIHRoZW4gdGhlIHVudXNlZCBkaXZzIGFyZSBjbGVhcmVkLiBUaGUgZGl2cyBjYW4gYmUgcGFzc2VkIGFzIGVpdGhlclxuLy8gICAgICAgICAgZWxlbWVudHMgb3Igc3RyaW5ncyBvZiBpZHMuIElmIGlkcyBhcmUgcGFzc2VkLCB0aGVuIHRoZSBkaXYgTVVTVCBleGlzdCBhbHJlYWR5LlxuLy8gICAgICAgICAgKGlmIGEgc2luZ2xlIGVsZW1lbnQgaXMgcGFzc2VkLCB0aGVuIGl0IGlzIGFuIGltcGxpZWQgYXJyYXkgb2YgbGVuZ3RoIG9uZS4pXG4vLyAgICAgICAgICAoaWYgYSBudWxsIGlzIHBhc3NlZCBmb3IgYW4gZWxlbWVudCwgb3IgdGhlIGVsZW1lbnQgZG9lc24ndCBleGlzdCwgdGhlbiB0aGF0IHR1bmUgaXMgc2tpcHBlZC4pXG4vLyAgICAgIGFiYzogdGV4dCByZXByZXNlbnRpbmcgYSB0dW5lIG9yIGFuIGVudGlyZSB0dW5lIGJvb2sgaW4gQUJDIG5vdGF0aW9uLlxuLy8gICAgICByZW5kZXJQYXJhbXM6IGhhc2ggb2Y6XG4vLyAgICAgICAgICBzdGFydGluZ1R1bmU6IGFuIGluZGV4LCBzdGFydGluZyBhdCB6ZXJvLCByZXByZXNlbnRpbmcgd2hpY2ggdHVuZSB0byBzdGFydCByZW5kZXJpbmcgYXQuXG4vLyAgICAgICAgICAgICAgKElmIHRoaXMgZWxlbWVudCBpcyBub3QgcHJlc2VudCwgdGhlbiByZW5kZXJpbmcgc3RhcnRzIGF0IHplcm8uKVxuLy8gICAgICAgICAgd2lkdGg6IDgwMCBieSBkZWZhdWx0LiBUaGUgd2lkdGggaW4gcGl4ZWxzIG9mIHRoZSBvdXRwdXQgcGFwZXJcbnZhciByZW5kZXJBYmMgPSBmdW5jdGlvbihvdXRwdXQsIGFiYywgcGFyc2VyUGFyYW1zLCBlbmdyYXZlclBhcmFtcywgcmVuZGVyUGFyYW1zKSB7XG4gICAgLy8gTm90ZTogYWxsIHBhcmFtZXRlcnMgaGF2ZSBiZWVuIGNvbmRlbnNlZCBpbnRvIHRoZSBmaXJzdCBvbmVzLiBJdCBkb2Vzbid0IGh1cnQgYW55dGhpbmcgdG8gYWxsb3cgdGhlIG9sZCBmb3JtYXQsIHNvIGp1c3QgY29weSB0aGVtIGhlcmUuXG4gICAgdmFyIHBhcmFtcyA9IHt9O1xuICAgIHZhciBrZXk7XG4gICAgaWYgKHBhcnNlclBhcmFtcykge1xuICAgICAgICBmb3IgKGtleSBpbiBwYXJzZXJQYXJhbXMpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZXJQYXJhbXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIHBhcmFtc1trZXldID0gcGFyc2VyUGFyYW1zW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtcy53YXJuaW5nc19pZCAmJiBwYXJhbXMudGFibGF0dXJlKSB7XG4gICAgICAgICAgICBwYXJhbXMudGFibGF0dXJlLndhcm5pbmdfaWQgPSBwYXJhbXMud2FybmluZ3NfaWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVuZ3JhdmVyUGFyYW1zKSB7XG4gICAgICAgIGZvciAoa2V5IGluIGVuZ3JhdmVyUGFyYW1zKSB7XG4gICAgICAgICAgICBpZiAoZW5ncmF2ZXJQYXJhbXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHQgICAgICAgICAgICAvLyBUaGVyZSBpcyBhIGNvbmZsaWN0IHdpdGggdGhlIG5hbWUgb2YgdGhlIHBhcmFtZXRlciBcImxpc3RlbmVyXCIuIElmIGl0IGlzIGluIHRoZSBzZWNvbmQgcGFyYW1ldGVyLCB0aGVuIGl0IGlzIGZvciBjbGljay5cblx0ICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJsaXN0ZW5lclwiKSB7XG5cdCAgICAgICAgICAgIFx0aWYgKGVuZ3JhdmVyUGFyYW1zW2tleV0uaGlnaGxpZ2h0KVxuXHRcdCAgICAgICAgICAgICAgICBwYXJhbXMuY2xpY2tMaXN0ZW5lciA9IGVuZ3JhdmVyUGFyYW1zW2tleV0uaGlnaGxpZ2h0O1xuXHQgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zW2tleV0gPSBlbmdyYXZlclBhcmFtc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChyZW5kZXJQYXJhbXMpIHtcbiAgICAgICAgZm9yIChrZXkgaW4gcmVuZGVyUGFyYW1zKSB7XG4gICAgICAgICAgICBpZiAocmVuZGVyUGFyYW1zLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXNba2V5XSA9IHJlbmRlclBhcmFtc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsbGJhY2soZGl2LCB0dW5lLCB0dW5lTnVtYmVyLCBhYmNTdHJpbmcpIHtcbiAgICAgICAgdmFyIHJlbW92ZURpdiA9IGZhbHNlO1xuICAgICAgICBpZiAoZGl2ID09PSBcIipcIikge1xuICAgICAgICAgICAgcmVtb3ZlRGl2ID0gdHJ1ZTtcbiAgICAgICAgICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBkaXYuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJ2aXNpYmlsaXR5OiBoaWRkZW47XCIpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVtb3ZlRGl2ICYmIHBhcmFtcy53cmFwICYmIHBhcmFtcy5zdGFmZndpZHRoKSB7XG4gICAgICAgICAgICB0dW5lID0gZG9MaW5lV3JhcHBpbmcoZGl2LCB0dW5lLCB0dW5lTnVtYmVyLCBhYmNTdHJpbmcsIHBhcmFtcyk7XG5cdCAgICAgICAgcmV0dXJuIHR1bmU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtcy5hZnRlclBhcnNpbmcpXG4gICAgICAgICAgICBwYXJhbXMuYWZ0ZXJQYXJzaW5nKHR1bmUsIHR1bmVOdW1iZXIsIGFiY1N0cmluZyk7XG4gICAgICAgIHJlbmRlck9uZShkaXYsIHR1bmUsIHBhcmFtcywgdHVuZU51bWJlciwgMCk7XG4gICAgICAgIGlmIChyZW1vdmVEaXYpXG4gICAgICAgICAgICBkaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkaXYpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdHVuZWJvb2sucmVuZGVyRW5naW5lKGNhbGxiYWNrLCBvdXRwdXQsIGFiYywgcGFyYW1zKTtcbn07XG5cbmZ1bmN0aW9uIGRvTGluZVdyYXBwaW5nKGRpdiwgdHVuZSwgdHVuZU51bWJlciwgYWJjU3RyaW5nLCBwYXJhbXMpIHtcblx0dmFyIGVuZ3JhdmVyX2NvbnRyb2xsZXIgPSBuZXcgRW5ncmF2ZXJDb250cm9sbGVyKGRpdiwgcGFyYW1zKTtcblx0dmFyIHdpZHRocyA9IGVuZ3JhdmVyX2NvbnRyb2xsZXIuZ2V0TWVhc3VyZVdpZHRocyh0dW5lKTtcblxuXHR2YXIgcmV0ID0gd3JhcC5jYWxjTGluZVdyYXBzKHR1bmUsIHdpZHRocywgcGFyYW1zKTtcblx0aWYgKHJldC5yZVBhcnNlKSB7XG4gICAgICAgIHZhciBhYmNQYXJzZXIgPSBuZXcgUGFyc2UoKTtcbiAgICAgICAgYWJjUGFyc2VyLnBhcnNlKGFiY1N0cmluZywgcmV0LnJldmlzZWRQYXJhbXMpO1xuICAgICAgICB0dW5lID0gYWJjUGFyc2VyLmdldFR1bmUoKTtcbiAgICAgICAgdmFyIHdhcm5pbmdzID0gYWJjUGFyc2VyLmdldFdhcm5pbmdzKCk7XG4gICAgICAgIGlmICh3YXJuaW5ncylcbiAgICAgICAgICAgIHR1bmUud2FybmluZ3MgPSB3YXJuaW5ncztcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5hZnRlclBhcnNpbmcpXG4gICAgICAgIHBhcmFtcy5hZnRlclBhcnNpbmcodHVuZSwgdHVuZU51bWJlciwgYWJjU3RyaW5nKTtcbiAgICByZW5kZXJPbmUoZGl2LCB0dW5lLCByZXQucmV2aXNlZFBhcmFtcywgdHVuZU51bWJlciwgMCk7XG5cdHR1bmUuZXhwbGFuYXRpb24gPSByZXQuZXhwbGFuYXRpb247XG5cdHJldHVybiB0dW5lO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlbmRlckFiYztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/api/abc_tunebook_svg.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/api/tune-metrics.js":
/*!****************************************************!*\
  !*** ./node_modules/abcjs/src/api/tune-metrics.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var tunebook = __webpack_require__(/*! ./abc_tunebook */ \"(ssr)/./node_modules/abcjs/src/api/abc_tunebook.js\");\nvar EngraverController = __webpack_require__(/*! ../write/engraver-controller */ \"(ssr)/./node_modules/abcjs/src/write/engraver-controller.js\");\n\nvar tuneMetrics = function(abc, params) {\n    function callback(div, tune, tuneNumber, abcString) {\n\t\tdiv = document.createElement(\"div\");\n\t\tdiv.setAttribute(\"style\", \"visibility: hidden;\");\n\t\tdocument.body.appendChild(div);\n\t\tvar engraver_controller = new EngraverController(div, params);\n\t\tvar widths = engraver_controller.getMeasureWidths(tune);\n            div.parentNode.removeChild(div);\n        return {sections: widths};\n    }\n\n    return tunebook.renderEngine(callback, \"*\", abc, params);\n};\n\nmodule.exports = tuneMetrics;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL2FwaS90dW5lLW1ldHJpY3MuanMiLCJtYXBwaW5ncyI6IkFBQUEsZUFBZSxtQkFBTyxDQUFDLDBFQUFnQjtBQUN2Qyx5QkFBeUIsbUJBQU8sQ0FBQyxpR0FBOEI7O0FBRS9EO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjs7QUFFQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL2FwaS90dW5lLW1ldHJpY3MuanM/OTAwZSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdHVuZWJvb2sgPSByZXF1aXJlKCcuL2FiY190dW5lYm9vaycpO1xudmFyIEVuZ3JhdmVyQ29udHJvbGxlciA9IHJlcXVpcmUoJy4uL3dyaXRlL2VuZ3JhdmVyLWNvbnRyb2xsZXInKTtcblxudmFyIHR1bmVNZXRyaWNzID0gZnVuY3Rpb24oYWJjLCBwYXJhbXMpIHtcbiAgICBmdW5jdGlvbiBjYWxsYmFjayhkaXYsIHR1bmUsIHR1bmVOdW1iZXIsIGFiY1N0cmluZykge1xuXHRcdGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0ZGl2LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwidmlzaWJpbGl0eTogaGlkZGVuO1wiKTtcblx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdik7XG5cdFx0dmFyIGVuZ3JhdmVyX2NvbnRyb2xsZXIgPSBuZXcgRW5ncmF2ZXJDb250cm9sbGVyKGRpdiwgcGFyYW1zKTtcblx0XHR2YXIgd2lkdGhzID0gZW5ncmF2ZXJfY29udHJvbGxlci5nZXRNZWFzdXJlV2lkdGhzKHR1bmUpO1xuICAgICAgICAgICAgZGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZGl2KTtcbiAgICAgICAgcmV0dXJuIHtzZWN0aW9uczogd2lkdGhzfTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHVuZWJvb2sucmVuZGVyRW5naW5lKGNhbGxiYWNrLCBcIipcIiwgYWJjLCBwYXJhbXMpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB0dW5lTWV0cmljcztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/api/tune-metrics.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/const/key-accidentals.js":
/*!*********************************************************!*\
  !*** ./node_modules/abcjs/src/const/key-accidentals.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var { relativeMajor } = __webpack_require__(/*! ./relative-major */ \"(ssr)/./node_modules/abcjs/src/const/relative-major.js\");\n\nvar key1sharp = { acc: 'sharp', note: 'f' };\nvar key2sharp = { acc: 'sharp', note: 'c' };\nvar key3sharp = { acc: 'sharp', note: 'g' };\nvar key4sharp = { acc: 'sharp', note: 'd' };\nvar key5sharp = { acc: 'sharp', note: 'A' };\nvar key6sharp = { acc: 'sharp', note: 'e' };\nvar key7sharp = { acc: 'sharp', note: 'B' };\nvar key1flat = { acc: 'flat', note: 'B' };\nvar key2flat = { acc: 'flat', note: 'e' };\nvar key3flat = { acc: 'flat', note: 'A' };\nvar key4flat = { acc: 'flat', note: 'd' };\nvar key5flat = { acc: 'flat', note: 'G' };\nvar key6flat = { acc: 'flat', note: 'c' };\nvar key7flat = { acc: 'flat', note: 'F' };\n\nvar keys = {\n\t'C#': [key1sharp, key2sharp, key3sharp, key4sharp, key5sharp, key6sharp, key7sharp],\n\t'F#': [key1sharp, key2sharp, key3sharp, key4sharp, key5sharp, key6sharp],\n\t'B': [key1sharp, key2sharp, key3sharp, key4sharp, key5sharp],\n\t'E': [key1sharp, key2sharp, key3sharp, key4sharp],\n\t'A': [key1sharp, key2sharp, key3sharp],\n\t'D': [key1sharp, key2sharp],\n\t'G': [key1sharp],\n\t'C': [],\n\t'F': [key1flat],\n\t'Bb': [key1flat, key2flat],\n\t'Eb': [key1flat, key2flat, key3flat],\n\t'Cm': [key1flat, key2flat, key3flat],\n\t'Ab': [key1flat, key2flat, key3flat, key4flat],\n\t'Db': [key1flat, key2flat, key3flat, key4flat, key5flat],\n\t'Gb': [key1flat, key2flat, key3flat, key4flat, key5flat, key6flat],\n\t'Cb': [key1flat, key2flat, key3flat, key4flat, key5flat, key6flat, key7flat],\n\n\t// The following are not in the 2.0 spec, but seem normal enough.\n\t// TODO-PER: These SOUND the same as what's written, but they aren't right\n\t'A#': [key1flat, key2flat],\n\t'B#': [],\n\t'D#': [key1flat, key2flat, key3flat],\n\t'E#': [key1flat],\n\t'G#': [key1flat, key2flat, key3flat, key4flat],\n\t'none': [],\n};\n\nfunction keyAccidentals(key) {\n\tvar newKey = keys[relativeMajor(key)]\n\tif (!newKey) // If we don't recognize the key then there is no change\n\t\treturn null\n\treturn JSON.parse(JSON.stringify(newKey))\n};\n\nmodule.exports = keyAccidentals;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL2NvbnN0L2tleS1hY2NpZGVudGFscy5qcyIsIm1hcHBpbmdzIjoiQUFBQSxNQUFNLGdCQUFnQixFQUFFLG1CQUFPLENBQUMsZ0ZBQWtCOztBQUVsRCxrQkFBa0I7QUFDbEIsa0JBQWtCO0FBQ2xCLGtCQUFrQjtBQUNsQixrQkFBa0I7QUFDbEIsa0JBQWtCO0FBQ2xCLGtCQUFrQjtBQUNsQixrQkFBa0I7QUFDbEIsaUJBQWlCO0FBQ2pCLGlCQUFpQjtBQUNqQixpQkFBaUI7QUFDakIsaUJBQWlCO0FBQ2pCLGlCQUFpQjtBQUNqQixpQkFBaUI7QUFDakIsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvY29uc3Qva2V5LWFjY2lkZW50YWxzLmpzP2U0MGMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHsgcmVsYXRpdmVNYWpvciB9ID0gcmVxdWlyZShcIi4vcmVsYXRpdmUtbWFqb3JcIik7XG5cbnZhciBrZXkxc2hhcnAgPSB7IGFjYzogJ3NoYXJwJywgbm90ZTogJ2YnIH07XG52YXIga2V5MnNoYXJwID0geyBhY2M6ICdzaGFycCcsIG5vdGU6ICdjJyB9O1xudmFyIGtleTNzaGFycCA9IHsgYWNjOiAnc2hhcnAnLCBub3RlOiAnZycgfTtcbnZhciBrZXk0c2hhcnAgPSB7IGFjYzogJ3NoYXJwJywgbm90ZTogJ2QnIH07XG52YXIga2V5NXNoYXJwID0geyBhY2M6ICdzaGFycCcsIG5vdGU6ICdBJyB9O1xudmFyIGtleTZzaGFycCA9IHsgYWNjOiAnc2hhcnAnLCBub3RlOiAnZScgfTtcbnZhciBrZXk3c2hhcnAgPSB7IGFjYzogJ3NoYXJwJywgbm90ZTogJ0InIH07XG52YXIga2V5MWZsYXQgPSB7IGFjYzogJ2ZsYXQnLCBub3RlOiAnQicgfTtcbnZhciBrZXkyZmxhdCA9IHsgYWNjOiAnZmxhdCcsIG5vdGU6ICdlJyB9O1xudmFyIGtleTNmbGF0ID0geyBhY2M6ICdmbGF0Jywgbm90ZTogJ0EnIH07XG52YXIga2V5NGZsYXQgPSB7IGFjYzogJ2ZsYXQnLCBub3RlOiAnZCcgfTtcbnZhciBrZXk1ZmxhdCA9IHsgYWNjOiAnZmxhdCcsIG5vdGU6ICdHJyB9O1xudmFyIGtleTZmbGF0ID0geyBhY2M6ICdmbGF0Jywgbm90ZTogJ2MnIH07XG52YXIga2V5N2ZsYXQgPSB7IGFjYzogJ2ZsYXQnLCBub3RlOiAnRicgfTtcblxudmFyIGtleXMgPSB7XG5cdCdDIyc6IFtrZXkxc2hhcnAsIGtleTJzaGFycCwga2V5M3NoYXJwLCBrZXk0c2hhcnAsIGtleTVzaGFycCwga2V5NnNoYXJwLCBrZXk3c2hhcnBdLFxuXHQnRiMnOiBba2V5MXNoYXJwLCBrZXkyc2hhcnAsIGtleTNzaGFycCwga2V5NHNoYXJwLCBrZXk1c2hhcnAsIGtleTZzaGFycF0sXG5cdCdCJzogW2tleTFzaGFycCwga2V5MnNoYXJwLCBrZXkzc2hhcnAsIGtleTRzaGFycCwga2V5NXNoYXJwXSxcblx0J0UnOiBba2V5MXNoYXJwLCBrZXkyc2hhcnAsIGtleTNzaGFycCwga2V5NHNoYXJwXSxcblx0J0EnOiBba2V5MXNoYXJwLCBrZXkyc2hhcnAsIGtleTNzaGFycF0sXG5cdCdEJzogW2tleTFzaGFycCwga2V5MnNoYXJwXSxcblx0J0cnOiBba2V5MXNoYXJwXSxcblx0J0MnOiBbXSxcblx0J0YnOiBba2V5MWZsYXRdLFxuXHQnQmInOiBba2V5MWZsYXQsIGtleTJmbGF0XSxcblx0J0ViJzogW2tleTFmbGF0LCBrZXkyZmxhdCwga2V5M2ZsYXRdLFxuXHQnQ20nOiBba2V5MWZsYXQsIGtleTJmbGF0LCBrZXkzZmxhdF0sXG5cdCdBYic6IFtrZXkxZmxhdCwga2V5MmZsYXQsIGtleTNmbGF0LCBrZXk0ZmxhdF0sXG5cdCdEYic6IFtrZXkxZmxhdCwga2V5MmZsYXQsIGtleTNmbGF0LCBrZXk0ZmxhdCwga2V5NWZsYXRdLFxuXHQnR2InOiBba2V5MWZsYXQsIGtleTJmbGF0LCBrZXkzZmxhdCwga2V5NGZsYXQsIGtleTVmbGF0LCBrZXk2ZmxhdF0sXG5cdCdDYic6IFtrZXkxZmxhdCwga2V5MmZsYXQsIGtleTNmbGF0LCBrZXk0ZmxhdCwga2V5NWZsYXQsIGtleTZmbGF0LCBrZXk3ZmxhdF0sXG5cblx0Ly8gVGhlIGZvbGxvd2luZyBhcmUgbm90IGluIHRoZSAyLjAgc3BlYywgYnV0IHNlZW0gbm9ybWFsIGVub3VnaC5cblx0Ly8gVE9ETy1QRVI6IFRoZXNlIFNPVU5EIHRoZSBzYW1lIGFzIHdoYXQncyB3cml0dGVuLCBidXQgdGhleSBhcmVuJ3QgcmlnaHRcblx0J0EjJzogW2tleTFmbGF0LCBrZXkyZmxhdF0sXG5cdCdCIyc6IFtdLFxuXHQnRCMnOiBba2V5MWZsYXQsIGtleTJmbGF0LCBrZXkzZmxhdF0sXG5cdCdFIyc6IFtrZXkxZmxhdF0sXG5cdCdHIyc6IFtrZXkxZmxhdCwga2V5MmZsYXQsIGtleTNmbGF0LCBrZXk0ZmxhdF0sXG5cdCdub25lJzogW10sXG59O1xuXG5mdW5jdGlvbiBrZXlBY2NpZGVudGFscyhrZXkpIHtcblx0dmFyIG5ld0tleSA9IGtleXNbcmVsYXRpdmVNYWpvcihrZXkpXVxuXHRpZiAoIW5ld0tleSkgLy8gSWYgd2UgZG9uJ3QgcmVjb2duaXplIHRoZSBrZXkgdGhlbiB0aGVyZSBpcyBubyBjaGFuZ2Vcblx0XHRyZXR1cm4gbnVsbFxuXHRyZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShuZXdLZXkpKVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBrZXlBY2NpZGVudGFscztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/const/key-accidentals.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/const/relative-major.js":
/*!********************************************************!*\
  !*** ./node_modules/abcjs/src/const/relative-major.js ***!
  \********************************************************/
/***/ ((module) => {

eval("// All these keys have the same number of accidentals\nvar keys = {\n\t'C': { modes: ['CMaj', 'Amin', 'Am', 'GMix', 'DDor', 'EPhr', 'FLyd', 'BLoc'], stepsFromC: 0 },\n\t'Db': { modes: ['DbMaj', 'Bbmin', 'Bbm', 'AbMix', 'EbDor', 'FPhr', 'GbLyd', 'CLoc'], stepsFromC: 1 },\n\t'D': { modes: ['DMaj', 'Bmin', 'Bm', 'AMix', 'EDor', 'F#Phr', 'GLyd', 'C#Loc'], stepsFromC: 2 },\n\t'Eb': { modes: ['EbMaj', 'Cmin', 'Cm', 'BbMix', 'FDor', 'GPhr', 'AbLyd', 'DLoc'], stepsFromC: 3 },\n\t'E': { modes: ['EMaj', 'C#min', 'C#m', 'BMix', 'F#Dor', 'G#Phr', 'ALyd', 'D#Loc'], stepsFromC: 4 },\n\t'F': { modes: ['FMaj', 'Dmin', 'Dm', 'CMix', 'GDor', 'APhr', 'BbLyd', 'ELoc'], stepsFromC: 5 },\n\t'Gb': { modes: ['GbMaj', 'Ebmin', 'Ebm', 'DbMix', 'AbDor', 'BbPhr', 'CbLyd', 'FLoc'], stepsFromC: 6 },\n\t'G': { modes: ['GMaj', 'Emin', 'Em', 'DMix', 'ADor', 'BPhr', 'CLyd', 'F#Loc'], stepsFromC: 7 },\n\t'Ab': { modes: ['AbMaj', 'Fmin', 'Fm', 'EbMix', 'BbDor', 'CPhr', 'DbLyd', 'GLoc'], stepsFromC: 8 },\n\t'A': { modes: ['AMaj', 'F#min', 'F#m', 'EMix', 'BDor', 'C#Phr', 'DLyd', 'G#Loc'], stepsFromC: 9 },\n\t'Bb': { modes: ['BbMaj', 'Gmin', 'Gm', 'FMix', 'CDor', 'DPhr', 'EbLyd', 'ALoc'], stepsFromC: 10 },\n\t'B': { modes: ['BMaj', 'G#min', 'G#m', 'F#Mix', 'C#Dor', 'D#Phr', 'ELyd', 'A#Loc'], stepsFromC: 11 },\n\t// Enharmonic keys\n\t'C#': { modes: ['C#Maj', 'A#min', 'A#m', 'G#Mix', 'D#Dor', 'E#Phr', 'F#Lyd', 'B#Loc'], stepsFromC: 1 },\n\t'F#': { modes: ['F#Maj', 'D#min', 'D#m', 'C#Mix', 'G#Dor', 'A#Phr', 'BLyd', 'E#Loc'], stepsFromC: 6 },\n\t'Cb': { modes: ['CbMaj', 'Abmin', 'Abm', 'GbMix', 'DbDor', 'EbPhr', 'FbLyd', 'BbLoc'], stepsFromC: 11 },\n}\n\nvar keyReverse = null\n\nfunction createKeyReverse() {\n\tkeyReverse = {}\n\tvar allKeys = Object.keys(keys)\n\tfor (var i = 0 ; i < allKeys.length; i++) {\n\t\tvar keyObj = keys[allKeys[i]]\n\t\tkeyReverse[allKeys[i].toLowerCase()] = allKeys[i];\n\t\tfor (var j = 0; j < keyObj.modes.length; j++) {\n\t\t\tvar mode = keyObj.modes[j].toLowerCase()\n\t\t\tkeyReverse[mode] = allKeys[i];\n\t\t}\n\t}\n}\n\nfunction relativeMajor(key) {\n\t// Translate a key to its relative major. If it doesn't exist, do the best we can\n\t// by just returning the original key.\n\t// There are alternate spellings of these - so the search needs to be case insensitive.\n\t// To make this efficient, the first time this is called the \"keys\" object is reversed so this search is fast in the future\n\tif (!keyReverse) {\n\t\tcreateKeyReverse()\n\t}\n\t// get the key portion itself - there might be other stuff, like extra sharps and flats, or the mode written out.\n\tvar mode = key.toLowerCase().match(/([a-g][b#]?)(maj|min|mix|dor|phr|lyd|loc|m)?/)\n\tif (!mode || !mode[2])\n\t\treturn key;\n\tmode = mode[1] + mode[2]\n\tvar maj = keyReverse[mode]\n\tif (maj)\n\t\treturn maj;\n\treturn key;\n}\n\nfunction relativeMode(majorKey, mode) {\n\t// The reverse of the relativeMajor. Translate it back to the original mode.\n\t// If it isn't a recognized mode or it is already major, then just return the major key.\n\tvar group = keys[majorKey]\n\tif (!group)\n\t\treturn majorKey;\n\tif (mode === '')\n\t\treturn majorKey;\n\tvar match = mode.toLowerCase().match(/^(maj|min|mix|dor|phr|lyd|loc|m)/)\t\n\tif (!match)\n\t\treturn majorKey\n\tvar regMode = match[1]\t\n\tfor (var i = 0; i < group.modes.length; i++) {\n\t\tvar thisMode = group.modes[i]\n\t\tvar ind = thisMode.toLowerCase().indexOf(regMode)\n\t\tif (ind !== -1 && ind === thisMode.length - regMode.length)\n\t\t\treturn thisMode.substring(0, thisMode.length - regMode.length)\n\t}\n\treturn majorKey;\n}\n\nfunction transposeKey(key, steps) {\n\t// This takes a major key and adds the desired steps.\n\t// It assigns each key a number that is the number of steps from C so that there can just be arithmetic.\n\tvar match = keys[key]\n\tif (!match)\n\t\treturn key;\n\twhile (steps < 0) steps += 12;\n\tvar fromC = (match.stepsFromC + steps) % 12;\n\tfor (var i = 0;  i < Object.keys(keys).length; i++) {\n\t\tvar k = Object.keys(keys)[i]\n\t\tif (keys[k].stepsFromC === fromC)\n\t\t\treturn k;\n\t}\n\treturn key;\n}\n\nmodule.exports = {relativeMajor: relativeMajor, relativeMode: relativeMode, transposeKey: transposeKey};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL2NvbnN0L3JlbGF0aXZlLW1ham9yLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQSxRQUFRLHNGQUFzRjtBQUM5RixTQUFTLDRGQUE0RjtBQUNyRyxRQUFRLHdGQUF3RjtBQUNoRyxTQUFTLHlGQUF5RjtBQUNsRyxRQUFRLDJGQUEyRjtBQUNuRyxRQUFRLHVGQUF1RjtBQUMvRixTQUFTLDZGQUE2RjtBQUN0RyxRQUFRLHVGQUF1RjtBQUMvRixTQUFTLDBGQUEwRjtBQUNuRyxRQUFRLDBGQUEwRjtBQUNsRyxTQUFTLHlGQUF5RjtBQUNsRyxRQUFRLDZGQUE2RjtBQUNyRztBQUNBLFNBQVMsOEZBQThGO0FBQ3ZHLFNBQVMsNkZBQTZGO0FBQ3RHLFNBQVMsK0ZBQStGO0FBQ3hHOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvQkFBb0I7QUFDdEM7QUFDQTtBQUNBLGtCQUFrQix5QkFBeUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHdCQUF3QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDhCQUE4QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL2NvbnN0L3JlbGF0aXZlLW1ham9yLmpzP2ZhMzgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQWxsIHRoZXNlIGtleXMgaGF2ZSB0aGUgc2FtZSBudW1iZXIgb2YgYWNjaWRlbnRhbHNcbnZhciBrZXlzID0ge1xuXHQnQyc6IHsgbW9kZXM6IFsnQ01haicsICdBbWluJywgJ0FtJywgJ0dNaXgnLCAnRERvcicsICdFUGhyJywgJ0ZMeWQnLCAnQkxvYyddLCBzdGVwc0Zyb21DOiAwIH0sXG5cdCdEYic6IHsgbW9kZXM6IFsnRGJNYWonLCAnQmJtaW4nLCAnQmJtJywgJ0FiTWl4JywgJ0ViRG9yJywgJ0ZQaHInLCAnR2JMeWQnLCAnQ0xvYyddLCBzdGVwc0Zyb21DOiAxIH0sXG5cdCdEJzogeyBtb2RlczogWydETWFqJywgJ0JtaW4nLCAnQm0nLCAnQU1peCcsICdFRG9yJywgJ0YjUGhyJywgJ0dMeWQnLCAnQyNMb2MnXSwgc3RlcHNGcm9tQzogMiB9LFxuXHQnRWInOiB7IG1vZGVzOiBbJ0ViTWFqJywgJ0NtaW4nLCAnQ20nLCAnQmJNaXgnLCAnRkRvcicsICdHUGhyJywgJ0FiTHlkJywgJ0RMb2MnXSwgc3RlcHNGcm9tQzogMyB9LFxuXHQnRSc6IHsgbW9kZXM6IFsnRU1haicsICdDI21pbicsICdDI20nLCAnQk1peCcsICdGI0RvcicsICdHI1BocicsICdBTHlkJywgJ0QjTG9jJ10sIHN0ZXBzRnJvbUM6IDQgfSxcblx0J0YnOiB7IG1vZGVzOiBbJ0ZNYWonLCAnRG1pbicsICdEbScsICdDTWl4JywgJ0dEb3InLCAnQVBocicsICdCYkx5ZCcsICdFTG9jJ10sIHN0ZXBzRnJvbUM6IDUgfSxcblx0J0diJzogeyBtb2RlczogWydHYk1haicsICdFYm1pbicsICdFYm0nLCAnRGJNaXgnLCAnQWJEb3InLCAnQmJQaHInLCAnQ2JMeWQnLCAnRkxvYyddLCBzdGVwc0Zyb21DOiA2IH0sXG5cdCdHJzogeyBtb2RlczogWydHTWFqJywgJ0VtaW4nLCAnRW0nLCAnRE1peCcsICdBRG9yJywgJ0JQaHInLCAnQ0x5ZCcsICdGI0xvYyddLCBzdGVwc0Zyb21DOiA3IH0sXG5cdCdBYic6IHsgbW9kZXM6IFsnQWJNYWonLCAnRm1pbicsICdGbScsICdFYk1peCcsICdCYkRvcicsICdDUGhyJywgJ0RiTHlkJywgJ0dMb2MnXSwgc3RlcHNGcm9tQzogOCB9LFxuXHQnQSc6IHsgbW9kZXM6IFsnQU1haicsICdGI21pbicsICdGI20nLCAnRU1peCcsICdCRG9yJywgJ0MjUGhyJywgJ0RMeWQnLCAnRyNMb2MnXSwgc3RlcHNGcm9tQzogOSB9LFxuXHQnQmInOiB7IG1vZGVzOiBbJ0JiTWFqJywgJ0dtaW4nLCAnR20nLCAnRk1peCcsICdDRG9yJywgJ0RQaHInLCAnRWJMeWQnLCAnQUxvYyddLCBzdGVwc0Zyb21DOiAxMCB9LFxuXHQnQic6IHsgbW9kZXM6IFsnQk1haicsICdHI21pbicsICdHI20nLCAnRiNNaXgnLCAnQyNEb3InLCAnRCNQaHInLCAnRUx5ZCcsICdBI0xvYyddLCBzdGVwc0Zyb21DOiAxMSB9LFxuXHQvLyBFbmhhcm1vbmljIGtleXNcblx0J0MjJzogeyBtb2RlczogWydDI01haicsICdBI21pbicsICdBI20nLCAnRyNNaXgnLCAnRCNEb3InLCAnRSNQaHInLCAnRiNMeWQnLCAnQiNMb2MnXSwgc3RlcHNGcm9tQzogMSB9LFxuXHQnRiMnOiB7IG1vZGVzOiBbJ0YjTWFqJywgJ0QjbWluJywgJ0QjbScsICdDI01peCcsICdHI0RvcicsICdBI1BocicsICdCTHlkJywgJ0UjTG9jJ10sIHN0ZXBzRnJvbUM6IDYgfSxcblx0J0NiJzogeyBtb2RlczogWydDYk1haicsICdBYm1pbicsICdBYm0nLCAnR2JNaXgnLCAnRGJEb3InLCAnRWJQaHInLCAnRmJMeWQnLCAnQmJMb2MnXSwgc3RlcHNGcm9tQzogMTEgfSxcbn1cblxudmFyIGtleVJldmVyc2UgPSBudWxsXG5cbmZ1bmN0aW9uIGNyZWF0ZUtleVJldmVyc2UoKSB7XG5cdGtleVJldmVyc2UgPSB7fVxuXHR2YXIgYWxsS2V5cyA9IE9iamVjdC5rZXlzKGtleXMpXG5cdGZvciAodmFyIGkgPSAwIDsgaSA8IGFsbEtleXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIga2V5T2JqID0ga2V5c1thbGxLZXlzW2ldXVxuXHRcdGtleVJldmVyc2VbYWxsS2V5c1tpXS50b0xvd2VyQ2FzZSgpXSA9IGFsbEtleXNbaV07XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBrZXlPYmoubW9kZXMubGVuZ3RoOyBqKyspIHtcblx0XHRcdHZhciBtb2RlID0ga2V5T2JqLm1vZGVzW2pdLnRvTG93ZXJDYXNlKClcblx0XHRcdGtleVJldmVyc2VbbW9kZV0gPSBhbGxLZXlzW2ldO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiByZWxhdGl2ZU1ham9yKGtleSkge1xuXHQvLyBUcmFuc2xhdGUgYSBrZXkgdG8gaXRzIHJlbGF0aXZlIG1ham9yLiBJZiBpdCBkb2Vzbid0IGV4aXN0LCBkbyB0aGUgYmVzdCB3ZSBjYW5cblx0Ly8gYnkganVzdCByZXR1cm5pbmcgdGhlIG9yaWdpbmFsIGtleS5cblx0Ly8gVGhlcmUgYXJlIGFsdGVybmF0ZSBzcGVsbGluZ3Mgb2YgdGhlc2UgLSBzbyB0aGUgc2VhcmNoIG5lZWRzIHRvIGJlIGNhc2UgaW5zZW5zaXRpdmUuXG5cdC8vIFRvIG1ha2UgdGhpcyBlZmZpY2llbnQsIHRoZSBmaXJzdCB0aW1lIHRoaXMgaXMgY2FsbGVkIHRoZSBcImtleXNcIiBvYmplY3QgaXMgcmV2ZXJzZWQgc28gdGhpcyBzZWFyY2ggaXMgZmFzdCBpbiB0aGUgZnV0dXJlXG5cdGlmICgha2V5UmV2ZXJzZSkge1xuXHRcdGNyZWF0ZUtleVJldmVyc2UoKVxuXHR9XG5cdC8vIGdldCB0aGUga2V5IHBvcnRpb24gaXRzZWxmIC0gdGhlcmUgbWlnaHQgYmUgb3RoZXIgc3R1ZmYsIGxpa2UgZXh0cmEgc2hhcnBzIGFuZCBmbGF0cywgb3IgdGhlIG1vZGUgd3JpdHRlbiBvdXQuXG5cdHZhciBtb2RlID0ga2V5LnRvTG93ZXJDYXNlKCkubWF0Y2goLyhbYS1nXVtiI10/KShtYWp8bWlufG1peHxkb3J8cGhyfGx5ZHxsb2N8bSk/Lylcblx0aWYgKCFtb2RlIHx8ICFtb2RlWzJdKVxuXHRcdHJldHVybiBrZXk7XG5cdG1vZGUgPSBtb2RlWzFdICsgbW9kZVsyXVxuXHR2YXIgbWFqID0ga2V5UmV2ZXJzZVttb2RlXVxuXHRpZiAobWFqKVxuXHRcdHJldHVybiBtYWo7XG5cdHJldHVybiBrZXk7XG59XG5cbmZ1bmN0aW9uIHJlbGF0aXZlTW9kZShtYWpvcktleSwgbW9kZSkge1xuXHQvLyBUaGUgcmV2ZXJzZSBvZiB0aGUgcmVsYXRpdmVNYWpvci4gVHJhbnNsYXRlIGl0IGJhY2sgdG8gdGhlIG9yaWdpbmFsIG1vZGUuXG5cdC8vIElmIGl0IGlzbid0IGEgcmVjb2duaXplZCBtb2RlIG9yIGl0IGlzIGFscmVhZHkgbWFqb3IsIHRoZW4ganVzdCByZXR1cm4gdGhlIG1ham9yIGtleS5cblx0dmFyIGdyb3VwID0ga2V5c1ttYWpvcktleV1cblx0aWYgKCFncm91cClcblx0XHRyZXR1cm4gbWFqb3JLZXk7XG5cdGlmIChtb2RlID09PSAnJylcblx0XHRyZXR1cm4gbWFqb3JLZXk7XG5cdHZhciBtYXRjaCA9IG1vZGUudG9Mb3dlckNhc2UoKS5tYXRjaCgvXihtYWp8bWlufG1peHxkb3J8cGhyfGx5ZHxsb2N8bSkvKVx0XG5cdGlmICghbWF0Y2gpXG5cdFx0cmV0dXJuIG1ham9yS2V5XG5cdHZhciByZWdNb2RlID0gbWF0Y2hbMV1cdFxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGdyb3VwLm1vZGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIHRoaXNNb2RlID0gZ3JvdXAubW9kZXNbaV1cblx0XHR2YXIgaW5kID0gdGhpc01vZGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHJlZ01vZGUpXG5cdFx0aWYgKGluZCAhPT0gLTEgJiYgaW5kID09PSB0aGlzTW9kZS5sZW5ndGggLSByZWdNb2RlLmxlbmd0aClcblx0XHRcdHJldHVybiB0aGlzTW9kZS5zdWJzdHJpbmcoMCwgdGhpc01vZGUubGVuZ3RoIC0gcmVnTW9kZS5sZW5ndGgpXG5cdH1cblx0cmV0dXJuIG1ham9yS2V5O1xufVxuXG5mdW5jdGlvbiB0cmFuc3Bvc2VLZXkoa2V5LCBzdGVwcykge1xuXHQvLyBUaGlzIHRha2VzIGEgbWFqb3Iga2V5IGFuZCBhZGRzIHRoZSBkZXNpcmVkIHN0ZXBzLlxuXHQvLyBJdCBhc3NpZ25zIGVhY2gga2V5IGEgbnVtYmVyIHRoYXQgaXMgdGhlIG51bWJlciBvZiBzdGVwcyBmcm9tIEMgc28gdGhhdCB0aGVyZSBjYW4ganVzdCBiZSBhcml0aG1ldGljLlxuXHR2YXIgbWF0Y2ggPSBrZXlzW2tleV1cblx0aWYgKCFtYXRjaClcblx0XHRyZXR1cm4ga2V5O1xuXHR3aGlsZSAoc3RlcHMgPCAwKSBzdGVwcyArPSAxMjtcblx0dmFyIGZyb21DID0gKG1hdGNoLnN0ZXBzRnJvbUMgKyBzdGVwcykgJSAxMjtcblx0Zm9yICh2YXIgaSA9IDA7ICBpIDwgT2JqZWN0LmtleXMoa2V5cykubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgayA9IE9iamVjdC5rZXlzKGtleXMpW2ldXG5cdFx0aWYgKGtleXNba10uc3RlcHNGcm9tQyA9PT0gZnJvbUMpXG5cdFx0XHRyZXR1cm4gaztcblx0fVxuXHRyZXR1cm4ga2V5O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtyZWxhdGl2ZU1ham9yOiByZWxhdGl2ZU1ham9yLCByZWxhdGl2ZU1vZGU6IHJlbGF0aXZlTW9kZSwgdHJhbnNwb3NlS2V5OiB0cmFuc3Bvc2VLZXl9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/const/relative-major.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/data/abc_tune.js":
/*!*************************************************!*\
  !*** ./node_modules/abcjs/src/data/abc_tune.js ***!
  \*************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_tune.js: a computer usable internal structure representing one tune.\n\nvar parseCommon = __webpack_require__(/*! ../parse/abc_common */ \"(ssr)/./node_modules/abcjs/src/parse/abc_common.js\");\nvar spacing = __webpack_require__(/*! ../write/helpers/spacing */ \"(ssr)/./node_modules/abcjs/src/write/helpers/spacing.js\");\nvar sequence = __webpack_require__(/*! ../synth/abc_midi_sequencer */ \"(ssr)/./node_modules/abcjs/src/synth/abc_midi_sequencer.js\");\nvar flatten = __webpack_require__(/*! ../synth/abc_midi_flattener */ \"(ssr)/./node_modules/abcjs/src/synth/abc_midi_flattener.js\");\nvar delineTune = __webpack_require__(/*! ./deline-tune */ \"(ssr)/./node_modules/abcjs/src/data/deline-tune.js\");\n\n/**\n * This is the data for a single ABC tune. It is created and populated by the window.ABCJS.parse.Parse class.\n * Also known as the ABCJS Abstract Syntax Tree\n * @alternateClassName ABCJS.Tune\n */\nvar Tune = function() {\n\tthis.reset = function () {\n\t\tthis.version = \"1.1.0\";\n\t\tthis.media = \"screen\";\n\t\tthis.metaText = {};\n\t\tthis.metaTextInfo = {};\n\t\tthis.formatting = {};\n\t\tthis.lines = [];\n\t\tthis.staffNum = 0;\n\t\tthis.voiceNum = 0;\n\t\tthis.lineNum = 0;\n\t\tthis.runningFonts = {};\n\t\tdelete this.visualTranspose;\n\t};\n\tthis.reset();\n\n\tfunction copy(dest, src, prop, attrs) {\n\t\tfor (var i = 0; i < attrs.length; i++)\n\t\t\tdest[prop][attrs[i]] = src[prop][attrs[i]];\n\t}\n\n\tthis.copyTopInfo = function(src) {\n\t\tvar attrs = ['tempo', 'title', 'header', 'rhythm', 'origin', 'composer', 'author', 'partOrder'];\n\t\tcopy(this, src, \"metaText\", attrs);\n\t\tcopy(this, src, \"metaTextInfo\", attrs);\n\t};\n\n\tthis.copyBottomInfo = function(src) {\n\t\tvar attrs = ['unalignedWords',\n\t\t\t'book',\n\t\t\t'source',\n\t\t\t'discography',\n\t\t\t'notes',\n\t\t\t'transcription',\n\t\t\t'history',\n\t\t\t'abc-copyright',\n\t\t\t'abc-creator',\n\t\t\t'abc-edited-by',\n\t\t\t'footer']\n\t\tcopy(this, src, \"metaText\", attrs);\n\t\tcopy(this, src, \"metaTextInfo\", attrs);\n\t};\n\n\t// The structure consists of a hash with the following two items:\n\t// metaText: a hash of {key, value}, where key is one of: title, author, rhythm, source, transcription, unalignedWords, etc...\n\t// tempo: { noteLength: number (e.g. .125), bpm: number }\n\t// lines: an array of elements, or one of the following:\n\t//\n\t// STAFF: array of elements\n\t// SUBTITLE: string\n\t//\n\t// TODO: actually, the start and end char should modify each part of the note type\n\t// The elements all have a type field and a start and end char\n\t// field. The rest of the fields depend on the type and are listed below:\n\t// REST: duration=1,2,4,8; chord: string\n\t// NOTE: accidental=none,dbl_flat,flat,natural,sharp,dbl_sharp\n\t//\t\tpitch: \"C\" is 0. The numbers refer to the pitch letter.\n\t//\t\tduration: .5 (sixteenth), .75 (dotted sixteenth), 1 (eighth), 1.5 (dotted eighth)\n\t//\t\t\t2 (quarter), 3 (dotted quarter), 4 (half), 6 (dotted half) 8 (whole)\n\t//\t\tchord: { name:chord, position: one of 'default', 'above', 'below' }\n\t//\t\tend_beam = true or undefined if this is the last note in a beam.\n\t//\t\tlyric: array of { syllable: xxx, divider: one of \" -_\" }\n\t//\t\tstartTie = true|undefined\n\t//\t\tendTie = true|undefined\n\t//\t\tstartTriplet = num <- that is the number to print\n\t//\t\tendTriplet = true|undefined (the last note of the triplet)\n\t// TODO: actually, decoration should be an array.\n\t//\t\tdecoration: upbow, downbow, accent\n\t// BAR: type=bar_thin, bar_thin_thick, bar_thin_thin, bar_thick_thin, bar_right_repeat, bar_left_repeat, bar_double_repeat\n\t//\tnumber: 1 or 2: if it is the start of a first or second ending\n\t// CLEF: type=treble,bass\n\t// KEY-SIG:\n\t//\t\taccidentals[]: { acc:sharp|dblsharp|natural|flat|dblflat,  note:a|b|c|d|e|f|g }\n\t// METER: type: common_time,cut_time,specified\n\t//\t\tif specified, { num: 99, den: 99 }\n\n\tthis.getBeatLength = function() {\n\t\t// This returns a fraction: for instance 1/4 for a quarter\n\t\t// There are two types of meters: compound and regular. Compound meter has 3 beats counted as one.\n\t\tvar meter = this.getMeterFraction();\n\t\tvar multiplier = 1;\n\t\tif (meter.num === 6 || meter.num === 9 || meter.num === 12)\n\t\t\tmultiplier = 3;\n\t\telse if (meter.num === 3 && meter.den === 8)\n\t\t\tmultiplier = 3;\n\n\t\treturn multiplier / meter.den;\n\t};\n\n\tfunction computePickupLength(lines, barLength) {\n\t\tvar pickupLength = 0;\n\t\tfor (var i = 0; i < lines.length; i++) {\n\t\t\tif (lines[i].staff) {\n\t\t\t\tfor (var j = 0; j < lines[i].staff.length; j++) {\n\t\t\t\t\tfor (var v = 0; v < lines[i].staff[j].voices.length; v++) {\n\t\t\t\t\t\tvar voice = lines[i].staff[j].voices[v];\n\t\t\t\t\t\tvar tripletMultiplier = 1;\n\t\t\t\t\t\tfor (var el = 0; el < voice.length; el++) {\n\t\t\t\t\t\t\tvar isSpacer = voice[el].rest && voice[el].rest.type === \"spacer\";\n\t\t\t\t\t\t\tif (voice[el].startTriplet)\n\t\t\t\t\t\t\t\ttripletMultiplier = voice[el].tripletMultiplier;\n\t\t\t\t\t\t\tif (voice[el].duration && !isSpacer && voice[el].el_type !== \"tempo\")\n\t\t\t\t\t\t\t\tpickupLength += voice[el].duration * tripletMultiplier;\n\t\t\t\t\t\t\tif (voice[el].endTriplet)\n\t\t\t\t\t\t\t\ttripletMultiplier = 1;\n\t\t\t\t\t\t\tif (pickupLength >= barLength)\n\t\t\t\t\t\t\t\tpickupLength -= barLength;\n\t\t\t\t\t\t\tif (voice[el].el_type === 'bar')\n\t\t\t\t\t\t\t\treturn pickupLength;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn pickupLength;\n\t}\n\tthis.getPickupLength = function() {\n\t\tvar barLength = this.getBarLength();\n\t\tvar pickupLength = computePickupLength(this.lines, barLength);\n\n\t\t// If computed pickup length is very close to 0 or the bar length, we assume\n\t\t// that we actually have a full bar and hence no pickup.\n\t\treturn (pickupLength < 1e-8 || barLength-pickupLength < 1e-8) ? 0 : pickupLength;\n\t};\n\n\tthis.getBarLength = function() {\n\t\tvar meter = this.getMeterFraction();\n\t\treturn meter.num / meter.den;\n\t};\n\n\tthis.getTotalTime = function() {\n\t\treturn this.totalTime;\n\t};\n\n\tthis.getTotalBeats = function() {\n\t\treturn this.totalBeats;\n\t};\n\n\tthis.millisecondsPerMeasure = function(bpmOverride) {\n\t\tvar bpm;\n\t\tif (bpmOverride) {\n\t\t\tbpm = bpmOverride;\n\t\t} else {\n\t\t\tvar tempo = this.metaText ? this.metaText.tempo : null;\n\t\t\tbpm = this.getBpm(tempo);\n\t\t}\n\t\tif (bpm <= 0)\n\t\t\tbpm = 1; // I don't think this can happen, but we don't want a possibility of dividing by zero.\n\n\t\tvar beatsPerMeasure = this.getBeatsPerMeasure();\n\n\t\tvar minutesPerMeasure = beatsPerMeasure / bpm;\n\t\treturn minutesPerMeasure * 60000;\n\t};\n\n\tthis.getBeatsPerMeasure = function() {\n\t\tvar beatLen = this.getBeatLength();\n\t\tvar barLen = this.getBarLength();\n\t\treturn barLen / beatLen;\n\t};\n\n\tthis.getMeter = function() {\n\t\tfor (var i = 0; i < this.lines.length; i++) {\n\t\t\tvar line = this.lines[i];\n\t\t\tif (line.staff) {\n\t\t\t\tfor (var j = 0; j < line.staff.length; j++) {\n\t\t\t\t\tvar meter = line.staff[j].meter;\n\t\t\t\t\tif (meter) {\n\t\t\t\t\t\treturn meter;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn { type: \"common_time\" };\n\t};\n\n\tthis.getMeterFraction = function() {\n\t\tvar meter = this.getMeter();\n\t\tvar num = 4;\n\t\tvar den = 4;\n\t\tif (meter) {\n\t\t\tif (meter.type === 'specified') {\n\t\t\t\tnum = parseInt(meter.value[0].num, 10);\n\t\t\t\tden = parseInt(meter.value[0].den,10);\n\t\t\t} else if (meter.type === 'cut_time') {\n\t\t\t\tnum = 2;\n\t\t\t\tden = 2;\n\t\t\t} else if (meter.type === 'common_time') {\n\t\t\t\tnum = 4;\n\t\t\t\tden = 4;\n\t\t\t}\n\t\t}\n\t\tthis.meter = { num: num, den: den };\n\t\treturn this.meter; // TODO-PER: is this saved value used anywhere? A get function shouldn't change state.\n\t};\n\n\tthis.getKeySignature = function() {\n\t\tfor (var i = 0; i < this.lines.length; i++) {\n\t\t\tvar line = this.lines[i];\n\t\t\tif (line.staff) {\n\t\t\t\tfor (var j = 0; j < line.staff.length; j++) {\n\t\t\t\t\tif (line.staff[j].key)\n\t\t\t\t\t\treturn line.staff[j].key;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn {  };\n\t};\n\n\tthis.getElementFromChar = function(char) {\n\t\tfor (var i = 0; i < this.lines.length; i++) {\n\t\t\tvar line = this.lines[i];\n\t\t\tif (line.staff) {\n\t\t\t\tfor (var j = 0; j < line.staff.length; j++) {\n\t\t\t\t\tvar staff = line.staff[j];\n\t\t\t\t\tfor (var k = 0; k < staff.voices.length; k++) {\n\t\t\t\t\t\tvar voice = staff.voices[k];\n\t\t\t\t\t\tfor (var ii = 0; ii < voice.length; ii++) {\n\t\t\t\t\t\t\tvar elem = voice[ii];\n\t\t\t\t\t\t\tif (elem.startChar && elem.endChar &&\n\t\t\t\t\t\t\t\telem.startChar <= char && elem.endChar > char)\n\t\t\t\t\t\t\t\treturn elem;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\n\tfunction addVerticalInfo(timingEvents) {\n\t\t// Add vertical info to the bar events: put the next event's top, and the event after the next measure's top.\n\t\tvar lastBarTop;\n\t\tvar lastBarBottom;\n\t\tvar lastEventTop;\n\t\tvar lastEventBottom;\n\t\tfor (var e = timingEvents.length - 1; e >= 0; e--) {\n\t\t\tvar ev = timingEvents[e];\n\t\t\tif (ev.type === 'bar') {\n\t\t\t\tev.top = lastEventTop;\n\t\t\t\tev.nextTop = lastBarTop;\n\t\t\t\tlastBarTop = lastEventTop;\n\n\t\t\t\tev.bottom = lastEventBottom;\n\t\t\t\tev.nextBottom = lastBarBottom;\n\t\t\t\tlastBarBottom = lastEventBottom;\n\t\t\t} else if (ev.type === 'event') {\n\t\t\t\tlastEventTop = ev.top;\n\t\t\t\tlastEventBottom = ev.top + ev.height;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction makeSortedArray(hash) {\n\t\tvar arr = [];\n\t\tfor (var k in hash) {\n\t\t\tif (hash.hasOwnProperty(k))\n\t\t\t\tarr.push(hash[k]);\n\t\t}\n\t\tarr = arr.sort(function (a, b) {\n\t\t\tvar diff = a.milliseconds - b.milliseconds;\n\t\t\t// if the events have the same time, make sure a bar comes before a note\n\t\t\tif (diff !== 0) {\n\t\t\t\treturn diff;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn a.type === \"bar\" ? -1 : 1;\n\t\t\t}\n\t\t});\n\t\treturn arr;\n\t}\n\n\tthis.addElementToEvents = function(eventHash, element, voiceTimeMilliseconds, top, height, line, measureNumber, timeDivider, isTiedState, nextIsBar) {\n\t\tif (element.hint)\n\t\t\treturn { isTiedState: undefined, duration: 0 };\n\t\tvar realDuration = element.durationClass ? element.durationClass : element.duration;\n\t\tif (element.abcelem.rest && element.abcelem.rest.type === \"spacer\")\n\t\t\trealDuration = 0;\n\t\tif (realDuration > 0) {\n\t\t\tvar es = [];\n\t\t\t// If there is an invisible rest, then there are not elements, so don't push a null one.\n\t\t\tfor (var i = 0; i < element.elemset.length; i++) {\n\t\t\t\tif (element.elemset[i] !== null)\n\t\t\t\t\tes.push(element.elemset[i]);\n\t\t\t}\n\t\t\tvar isTiedToNext = element.startTie;\n\t\t\tif (isTiedState !== undefined) {\n\t\t\t\teventHash[\"event\" + isTiedState].elements.push(es); // Add the tied note to the first note that it is tied to\n\t\t\t\tif (nextIsBar) {\n\t\t\t\t\tif (!eventHash[\"event\" + voiceTimeMilliseconds]) {\n\t\t\t\t\t\teventHash[\"event\" + voiceTimeMilliseconds] = {\n\t\t\t\t\t\t\ttype: \"event\",\n\t\t\t\t\t\t\tmilliseconds: voiceTimeMilliseconds,\n\t\t\t\t\t\t\tline: line,\n\t\t\t\t\t\t\tmeasureNumber: measureNumber,\n\t\t\t\t\t\t\ttop: top,\n\t\t\t\t\t\t\theight: height,\n\t\t\t\t\t\t\tleft: null,\n\t\t\t\t\t\t\twidth: 0,\n\t\t\t\t\t\t\telements: [],\n\t\t\t\t\t\t\tstartChar: null,\n\t\t\t\t\t\t\tendChar: null,\n\t\t\t\t\t\t\tstartCharArray: [],\n\t\t\t\t\t\t\tendCharArray: []\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\teventHash[\"event\" + voiceTimeMilliseconds].measureStart = true;\n\t\t\t\t\tnextIsBar = false;\n\t\t\t\t}\n\t\t\t\tif (!isTiedToNext)\n\t\t\t\t\tisTiedState = undefined;\n\t\t\t} else {\n\t\t\t\t// the last note wasn't tied.\n\t\t\t\tif (!eventHash[\"event\" + voiceTimeMilliseconds]) {\n\t\t\t\t\teventHash[\"event\" + voiceTimeMilliseconds] = {\n\t\t\t\t\t\ttype: \"event\",\n\t\t\t\t\t\tmilliseconds: voiceTimeMilliseconds,\n\t\t\t\t\t\tline: line,\n\t\t\t\t\t\tmeasureNumber: measureNumber,\n\t\t\t\t\t\ttop: top,\n\t\t\t\t\t\theight: height,\n\t\t\t\t\t\tleft: element.x,\n\t\t\t\t\t\twidth: element.w,\n\t\t\t\t\t\telements: [es],\n\t\t\t\t\t\tstartChar: element.abcelem.startChar,\n\t\t\t\t\t\tendChar: element.abcelem.endChar,\n\t\t\t\t\t\tstartCharArray: [element.abcelem.startChar],\n\t\t\t\t\t\tendCharArray: [element.abcelem.endChar],\n\t\t\t\t\t\tmidiPitches: element.abcelem.midiPitches ? parseCommon.cloneArray(element.abcelem.midiPitches) : []\n\t\t\t\t\t};\n\t\t\t\t\tif (element.abcelem.midiGraceNotePitches)\n\t\t\t\t\t\teventHash[\"event\" + voiceTimeMilliseconds].midiGraceNotePitches = parseCommon.cloneArray(element.abcelem.midiGraceNotePitches);\n\t\t\t\t} else {\n\t\t\t\t\t// If there is more than one voice then two notes can fall at the same time. Usually they would be lined up in the same place, but if it is a whole rest, then it is placed funny. In any case, the left most element wins.\n\t\t\t\t\tif (eventHash[\"event\" + voiceTimeMilliseconds].left)\n\t\t\t\t\t\teventHash[\"event\" + voiceTimeMilliseconds].left = Math.min(eventHash[\"event\" + voiceTimeMilliseconds].left, element.x);\n\t\t\t\t\telse\n\t\t\t\t\t\teventHash[\"event\" + voiceTimeMilliseconds].left = element.x;\n\t\t\t\t\teventHash[\"event\" + voiceTimeMilliseconds].elements.push(es);\n\t\t\t\t\teventHash[\"event\" + voiceTimeMilliseconds].startCharArray.push(element.abcelem.startChar);\n\t\t\t\t\teventHash[\"event\" + voiceTimeMilliseconds].endCharArray.push(element.abcelem.endChar);\n\t\t\t\t\tif (eventHash[\"event\" + voiceTimeMilliseconds].startChar === null)\n\t\t\t\t\t\teventHash[\"event\" + voiceTimeMilliseconds].startChar =element.abcelem.startChar;\n\t\t\t\t\tif (eventHash[\"event\" + voiceTimeMilliseconds].endChar === null)\n\t\t\t\t\t\teventHash[\"event\" + voiceTimeMilliseconds].endChar =element.abcelem.endChar;\n\t\t\t\t\tif (element.abcelem.midiPitches && element.abcelem.midiPitches.length) {\n\t\t\t\t\t\tif (!eventHash[\"event\" + voiceTimeMilliseconds].midiPitches)\n\t\t\t\t\t\t\teventHash[\"event\" + voiceTimeMilliseconds].midiPitches = [];\n\t\t\t\t\t\tfor (var i = 0; i < element.abcelem.midiPitches.length; i++)\n\t\t\t\t\t\t\teventHash[\"event\" + voiceTimeMilliseconds].midiPitches.push(element.abcelem.midiPitches[i]);\n\t\t\t\t\t}\n\t\t\t\t\tif (element.abcelem.midiGraceNotePitches && element.abcelem.midiGraceNotePitches.length) {\n\t\t\t\t\t\tif (!eventHash[\"event\" + voiceTimeMilliseconds].midiGraceNotePitches)\n\t\t\t\t\t\t\teventHash[\"event\" + voiceTimeMilliseconds].midiGraceNotePitches = [];\n\t\t\t\t\t\tfor (var j = 0; j < element.abcelem.midiGraceNotePitches.length; j++)\n\t\t\t\t\t\t\teventHash[\"event\" + voiceTimeMilliseconds].midiGraceNotePitches.push(element.abcelem.midiGraceNotePitches[j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (nextIsBar) {\n\t\t\t\t\teventHash[\"event\" + voiceTimeMilliseconds].measureStart = true;\n\t\t\t\t\tnextIsBar = false;\n\t\t\t\t}\n\t\t\t\t// TODO-PER: There doesn't seem to be a harm in letting ties be two different notes and it fixes a bug when a tie goes to a new line. If there aren't other problems with this change, then the variable can be removed completely. \n\t\t\t\t// if (isTiedToNext)\n\t\t\t\t// \tisTiedState = voiceTimeMilliseconds;\n\t\t\t}\n\t\t}\n\t\treturn { isTiedState: isTiedState, duration: realDuration / timeDivider, nextIsBar: nextIsBar || element.type === 'bar' };\n\t};\n\n\tthis.makeVoicesArray = function() {\n\t\t// First make a new array that is arranged by voice so that the repeats that span different lines are handled correctly.\n\t\tvar voicesArr = [];\n\t\tvar measureNumber = [];\n\t\tvar tempos = {};\n\t\tfor (var line = 0; line < this.engraver.staffgroups.length; line++) {\n\t\t\tvar group = this.engraver.staffgroups[line];\n\t\t\tif (group && group.staffs && group.staffs.length > 0) {\n\t\t\t\tvar firstStaff = group.staffs[0];\n\t\t\t\tvar middleC = firstStaff.absoluteY;\n\t\t\t\tvar top = middleC - firstStaff.top * spacing.STEP;\n\t\t\t\tvar lastStaff = group.staffs[group.staffs.length - 1];\n\t\t\t\tmiddleC = lastStaff.absoluteY;\n\t\t\t\tvar bottom = middleC - lastStaff.bottom * spacing.STEP;\n\t\t\t\tvar height = bottom - top;\n\n\t\t\t\tvar voices = group.voices;\n\t\t\t\tfor (var v = 0; v < voices.length; v++) {\n\t\t\t\t\tif (voices[v].staff && voices[v].staff.isTabStaff)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\tvar noteFound = false;\n\t\t\t\t\tif (!voicesArr[v])\n\t\t\t\t\t\tvoicesArr[v] = [];\n\t\t\t\t\tif (measureNumber[v] === undefined)\n\t\t\t\t\t\tmeasureNumber[v] = 0;\n\t\t\t\t\tvar elements = voices[v].children;\n\t\t\t\t\tfor (var elem = 0; elem < elements.length; elem++) {\n\t\t\t\t\t\tif (elements[elem].type === \"tempo\")\n\t\t\t\t\t\t\ttempos[measureNumber[v]] = this.getBpm(elements[elem].abcelem);\n\t\t\t\t\t\tvoicesArr[v].push({top: top, height: height, line: group.line, measureNumber: measureNumber[v], elem: elements[elem]});\n\t\t\t\t\t\tif (elements[elem].type === 'bar' && noteFound) // Count the measures by counting the bar lines, but skip a bar line that appears at the left of the music, before any notes.\n\t\t\t\t\t\t\tmeasureNumber[v]++;\n\t\t\t\t\t\tif (elements[elem].type === 'note' || elements[elem].type === 'rest')\n\t\t\t\t\t\t\tnoteFound = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.tempoLocations = tempos; // This should be passed back, but the function is accessible publicly so that would break the interface.\n\t\treturn voicesArr;\n\t};\n\n\tthis.setupEvents = function(startingDelay, timeDivider, startingBpm, warp) {\n\t\tif (!warp) warp = 1;\n\t\tvar timingEvents = [];\n\n\t\tvar eventHash = {};\n\t\t// The time is the number of seconds from the beginning of the piece.\n\t\t// The units we are scanning are in notation units (i.e. 0.25 is a quarter note)\n\t\tvar time = startingDelay;\n\t\tvar isTiedState;\n\t\tvar nextIsBar = true;\n\t\tvar voices = this.makeVoicesArray();\n\t\tvar maxVoiceTimeMilliseconds = 0;\n\t\tfor (var v = 0; v < voices.length; v++) {\n\t\t\tvar voiceTime = time;\n\t\t\tvar voiceTimeMilliseconds = Math.round(voiceTime * 1000);\n\t\t\tvar startingRepeatElem = 0;\n\t\t\tvar endingRepeatElem = -1;\n\t\t\tvar elements = voices[v];\n\t\t\tvar bpm = startingBpm;\n\t\t\ttimeDivider = this.getBeatLength() * bpm / 60;\n\t\t\tvar tempoDone = -1;\n\t\t\tfor (var elem = 0; elem < elements.length; elem++) {\n\t\t\t\tvar thisMeasure = elements[elem].measureNumber;\n\t\t\t\tif (tempoDone !== thisMeasure && this.tempoLocations[thisMeasure]) {\n\t\t\t\t\tbpm = this.tempoLocations[thisMeasure];\n\t\t\t\t\ttimeDivider = warp * this.getBeatLength() * bpm / 60;\n\t\t\t\t\ttempoDone = thisMeasure;\n\t\t\t\t}\n\t\t\t\tvar element = elements[elem].elem;\n\t\t\t\tvar ret = this.addElementToEvents(eventHash, element, voiceTimeMilliseconds, elements[elem].top, elements[elem].height, elements[elem].line, elements[elem].measureNumber, timeDivider, isTiedState, nextIsBar);\n\t\t\t\tisTiedState = ret.isTiedState;\n\t\t\t\tnextIsBar = ret.nextIsBar;\n\t\t\t\tvoiceTime += ret.duration;\n\t\t\t\tvar lastHash;\n\t\t\t\tif (element.duration > 0 && eventHash[\"event\" + voiceTimeMilliseconds]) // This won't exist if this is the end of a tie.\n\t\t\t\t\tlastHash = \"event\" + voiceTimeMilliseconds;\n\t\t\t\tvoiceTimeMilliseconds = Math.round(voiceTime * 1000);\n\t\t\t\tif (element.type === 'bar') {\n\t\t\t\t\tvar barType = element.abcelem.type;\n\t\t\t\t\tvar endRepeat = (barType === \"bar_right_repeat\" || barType === \"bar_dbl_repeat\");\n\t\t\t\t\tvar startEnding = (element.abcelem.startEnding === '1');\n\t\t\t\t\tvar startRepeat = (barType === \"bar_left_repeat\" || barType === \"bar_dbl_repeat\" || barType === \"bar_right_repeat\");\n\t\t\t\t\tif (endRepeat) {\n\t\t\t\t\t\t// Force the end of the previous note to the position of the measure - the cursor won't go past the end repeat\n\t\t\t\t\t\tif (elem > 0) {\n\t\t\t\t\t\t\teventHash[lastHash].endX = element.x;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (endingRepeatElem === -1)\n\t\t\t\t\t\t\tendingRepeatElem = elem;\n\t\t\t\t\t\tvar lastVoiceTimeMilliseconds = 0;\n\t\t\t\t\t\ttempoDone = -1;\n\t\t\t\t\t\tfor (var el2 = startingRepeatElem; el2 < endingRepeatElem; el2++) {\n\t\t\t\t\t\t\tthisMeasure = elements[el2].measureNumber;\n\t\t\t\t\t\t\tif (tempoDone !== thisMeasure && this.tempoLocations[thisMeasure]) {\n\t\t\t\t\t\t\t\tbpm = this.tempoLocations[thisMeasure];\n\t\t\t\t\t\t\t\ttimeDivider = warp * this.getBeatLength() * bpm / 60;\n\t\t\t\t\t\t\t\ttempoDone = thisMeasure;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar element2 = elements[el2].elem;\n\t\t\t\t\t\t\tret = this.addElementToEvents(eventHash, element2, voiceTimeMilliseconds, elements[el2].top, elements[el2].height, elements[el2].line, elements[el2].measureNumber, timeDivider, isTiedState, nextIsBar);\n\t\t\t\t\t\t\tisTiedState = ret.isTiedState;\n\t\t\t\t\t\t\tnextIsBar = ret.nextIsBar;\n\t\t\t\t\t\t\tvoiceTime += ret.duration;\n\t\t\t\t\t\t\tlastVoiceTimeMilliseconds = voiceTimeMilliseconds;\n\t\t\t\t\t\t\tvoiceTimeMilliseconds = Math.round(voiceTime * 1000);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (eventHash[\"event\" + lastVoiceTimeMilliseconds]) // This won't exist if it is the beginning of the next line. That's ok because we will just count the end of the last line as the end.\n\t\t\t\t\t\t\teventHash[\"event\" + lastVoiceTimeMilliseconds].endX = elements[endingRepeatElem].elem.x;\n\t\t\t\t\t\tnextIsBar = true;\n\t\t\t\t\t\tendingRepeatElem = -1;\n\t\t\t\t\t}\n\t\t\t\t\tif (startEnding)\n\t\t\t\t\t\tendingRepeatElem = elem;\n\t\t\t\t\tif (startRepeat)\n\t\t\t\t\t\tstartingRepeatElem = elem;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmaxVoiceTimeMilliseconds = Math.max(maxVoiceTimeMilliseconds, voiceTimeMilliseconds)\n\t\t}\n\t\t// now we have all the events, but if there are multiple voices then there may be events out of order or duplicated, so normalize it.\n\t\ttimingEvents = makeSortedArray(eventHash);\n\t\taddVerticalInfo(timingEvents);\n\t\taddEndPoints(this.lines, timingEvents)\n\t\ttimingEvents.push({ type: \"end\", milliseconds: maxVoiceTimeMilliseconds });\n\t\tthis.addUsefulCallbackInfo(timingEvents, bpm*warp);\n\t\treturn timingEvents;\n\t};\n\n\tthis.addUsefulCallbackInfo = function(timingEvents, bpm) {\n\t\tvar millisecondsPerMeasure = this.millisecondsPerMeasure(bpm);\n\t\tfor (var i = 0; i < timingEvents.length; i++) {\n\t\t\tvar ev = timingEvents[i];\n\t\t\tev.millisecondsPerMeasure = millisecondsPerMeasure;\n\t\t}\n\t};\n\n\tfunction skipTies(elements, index) {\n\t\twhile (index < elements.length && elements[index].left === null)\n\t\t\tindex++;\n\t\treturn elements[index];\n\t}\n\tfunction addEndPoints(lines, elements) {\n\t\tif (elements.length < 1)\n\t\t\treturn;\n\t\tfor (var i = 0; i < elements.length-1; i++) {\n\t\t\tvar el = elements[i];\n\t\t\tvar next = skipTies(elements, i+1);\n\t\t\tif (el.left !== null) {\n\t\t\t\t// If there is no left element that is because this is a tie so it should be skipped.\n\t\t\t\tvar endX = (next && el.top === next.top) ? next.left : lines[el.line].staffGroup.w;\n\t\t\t\t// If this is already set, it is because the notes aren't sequential here, like the next thing is a repeat bar line.\n\t\t\t\t// In that case, the right-most position is passed in. There could still be an intervening note in another voice, so always look for the closest position.\n\t\t\t\t// If there is a repeat that stays on the same line, the endX set above won't be right because the next note will be before. In that case, use the endX that was calculated.\n\t\t\t\tif  (el.endX !== undefined) {\n\t\t\t\t\tif (endX > el.left)\n\t\t\t\t\t\tel.endX = Math.min(el.endX, endX);\n\t\t\t\t} else\n\t\t\t\t\tel.endX = endX;\n\t\t\t}\n\t\t}\n\t\tvar lastEl = elements[elements.length-1];\n\t\tlastEl.endX = lines[lastEl.line].staffGroup.w;\n\t}\n\n\tthis.getBpm = function(tempo) {\n\t\tvar bpm;\n\t\tif (!tempo)\n\t\t\ttempo = this.metaText ? this.metaText.tempo : null;\n\t\tif (tempo) {\n\t\t\tbpm = tempo.bpm;\n\t\t\tvar beatLength = this.getBeatLength();\n\t\t\tvar statedBeatLength = tempo.duration && tempo.duration.length > 0 ? tempo.duration[0] : beatLength;\n\t\t\tbpm = bpm * statedBeatLength / beatLength;\n\t\t}\n\t\tif (!bpm) {\n\t\t\tbpm = 180;\n\t\t\t// Compensate for compound meter, where the beat isn't a beat.\n\t\t\tvar meter = this.getMeterFraction();\n\t\t\tif (meter && meter.num !== 3 && (meter.num % 3 === 0)) {\n\t\t\t\tbpm = 120;\n\t\t\t}\n\t\t}\n\t\treturn bpm;\n\t};\n\n\tthis.setTiming = function (bpm, measuresOfDelay) {\n\t\tmeasuresOfDelay = measuresOfDelay || 0;\n\t\tif (!this.engraver || !this.engraver.staffgroups) {\n\t\t\tconsole.log(\"setTiming cannot be called before the tune is drawn.\");\n\t\t\tthis.noteTimings = [];\n\t\t\treturn this.noteTimings;\n\t\t}\n\n\t\tvar tempo = this.metaText ? this.metaText.tempo : null;\n\t\tvar naturalBpm = this.getBpm(tempo);\n\t\tvar warp = 1;\n\t\tif (bpm) {\n\t\t\tif (tempo)\n\t\t\t\twarp = bpm / naturalBpm;\n\t\t} else\n\t\t\tbpm = naturalBpm;\n\n\t\t// Calculate the basic midi data. We only care about the qpm variable here.\n\t\t//this.setUpAudio({qpm: bpm});\n\n\t\tvar beatLength = this.getBeatLength();\n\t\tvar beatsPerSecond = bpm / 60;\n\n\t\tvar measureLength = this.getBarLength();\n\n\t\tvar startingDelay = measureLength / beatLength * measuresOfDelay / beatsPerSecond;\n\t\tif (startingDelay)\n\t\t\tstartingDelay -= this.getPickupLength() / beatLength / beatsPerSecond;\n\t\tvar timeDivider = beatLength * beatsPerSecond;\n\n\t\tthis.noteTimings = this.setupEvents(startingDelay, timeDivider, bpm, warp);\n\t\tif (this.noteTimings.length > 0) {\n\t\t\tthis.totalTime = this.noteTimings[this.noteTimings.length - 1].milliseconds / 1000;\n\t\t\tthis.totalBeats = this.totalTime * beatsPerSecond;\n\t\t} else {\n\t\t\tthis.totalTime = undefined;\n\t\t\tthis.totalBeats = undefined;\n\t\t}\n\t\treturn this.noteTimings;\n\t};\n\n\tthis.setUpAudio = function(options) {\n\t\tif (!options) options = {};\n\t\tvar seq = sequence(this, options);\n\t\treturn flatten(seq, options, this.formatting.percmap, this.formatting.midi);\n\t};\n\tthis.deline = function(options) {\n\t\treturn delineTune(this.lines, options);\n\t}\n\tthis.findSelectableElement = function(target) {\n\t\tif (this.engraver && this.engraver.selectables)\n\t\t\treturn this.engraver.findSelectableElement(target)\n\t\treturn null\n\t}\n\tthis.getSelectableArray = function() {\n\t\tif (this.engraver && this.engraver.selectables)\n\t\t\treturn this.engraver.selectables\n\t\treturn []\n\t}\n};\n\nmodule.exports = Tune;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL2RhdGEvYWJjX3R1bmUuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsa0JBQWtCLG1CQUFPLENBQUMsK0VBQXFCO0FBQy9DLGNBQWMsbUJBQU8sQ0FBQyx5RkFBMEI7QUFDaEQsZUFBZSxtQkFBTyxDQUFDLCtGQUE2QjtBQUNwRCxjQUFjLG1CQUFPLENBQUMsK0ZBQTZCO0FBQ25ELGlCQUFpQixtQkFBTyxDQUFDLHlFQUFlOztBQUV4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EseUJBQXlCLFdBQVc7QUFDcEMsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSxxQkFBcUI7O0FBRXJCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0Esb0JBQW9CLDJCQUEyQjtBQUMvQyxxQkFBcUIscUNBQXFDO0FBQzFEO0FBQ0E7QUFDQSx1QkFBdUIsbUJBQW1CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7O0FBRVo7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0IsdUJBQXVCO0FBQ3pDO0FBQ0E7QUFDQSxvQkFBb0IsdUJBQXVCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixxQkFBcUI7QUFDckI7O0FBRUE7QUFDQSxrQkFBa0IsdUJBQXVCO0FBQ3pDO0FBQ0E7QUFDQSxvQkFBb0IsdUJBQXVCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLHVCQUF1QjtBQUN6QztBQUNBO0FBQ0Esb0JBQW9CLHVCQUF1QjtBQUMzQztBQUNBLHFCQUFxQix5QkFBeUI7QUFDOUM7QUFDQSx1QkFBdUIsbUJBQW1CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLFFBQVE7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw0QkFBNEI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHdDQUF3QztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlEQUFpRDtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix5Q0FBeUM7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0JBQW9CLG1CQUFtQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHdCQUF3QjtBQUNoRDtBQUNBO0FBQ0EseUJBQXlCLGtHQUFrRztBQUMzSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isd0JBQXdCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHdCQUF3QjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixxREFBcUQ7QUFDM0U7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0IseUJBQXlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdUJBQXVCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0EscUJBQXFCLFNBQVM7O0FBRTlCO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy9kYXRhL2FiY190dW5lLmpzP2Y0OTQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gICAgYWJjX3R1bmUuanM6IGEgY29tcHV0ZXIgdXNhYmxlIGludGVybmFsIHN0cnVjdHVyZSByZXByZXNlbnRpbmcgb25lIHR1bmUuXG5cbnZhciBwYXJzZUNvbW1vbiA9IHJlcXVpcmUoJy4uL3BhcnNlL2FiY19jb21tb24nKTtcbnZhciBzcGFjaW5nID0gcmVxdWlyZSgnLi4vd3JpdGUvaGVscGVycy9zcGFjaW5nJyk7XG52YXIgc2VxdWVuY2UgPSByZXF1aXJlKCcuLi9zeW50aC9hYmNfbWlkaV9zZXF1ZW5jZXInKTtcbnZhciBmbGF0dGVuID0gcmVxdWlyZSgnLi4vc3ludGgvYWJjX21pZGlfZmxhdHRlbmVyJyk7XG52YXIgZGVsaW5lVHVuZSA9IHJlcXVpcmUoXCIuL2RlbGluZS10dW5lXCIpO1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIGRhdGEgZm9yIGEgc2luZ2xlIEFCQyB0dW5lLiBJdCBpcyBjcmVhdGVkIGFuZCBwb3B1bGF0ZWQgYnkgdGhlIHdpbmRvdy5BQkNKUy5wYXJzZS5QYXJzZSBjbGFzcy5cbiAqIEFsc28ga25vd24gYXMgdGhlIEFCQ0pTIEFic3RyYWN0IFN5bnRheCBUcmVlXG4gKiBAYWx0ZXJuYXRlQ2xhc3NOYW1lIEFCQ0pTLlR1bmVcbiAqL1xudmFyIFR1bmUgPSBmdW5jdGlvbigpIHtcblx0dGhpcy5yZXNldCA9IGZ1bmN0aW9uICgpIHtcblx0XHR0aGlzLnZlcnNpb24gPSBcIjEuMS4wXCI7XG5cdFx0dGhpcy5tZWRpYSA9IFwic2NyZWVuXCI7XG5cdFx0dGhpcy5tZXRhVGV4dCA9IHt9O1xuXHRcdHRoaXMubWV0YVRleHRJbmZvID0ge307XG5cdFx0dGhpcy5mb3JtYXR0aW5nID0ge307XG5cdFx0dGhpcy5saW5lcyA9IFtdO1xuXHRcdHRoaXMuc3RhZmZOdW0gPSAwO1xuXHRcdHRoaXMudm9pY2VOdW0gPSAwO1xuXHRcdHRoaXMubGluZU51bSA9IDA7XG5cdFx0dGhpcy5ydW5uaW5nRm9udHMgPSB7fTtcblx0XHRkZWxldGUgdGhpcy52aXN1YWxUcmFuc3Bvc2U7XG5cdH07XG5cdHRoaXMucmVzZXQoKTtcblxuXHRmdW5jdGlvbiBjb3B5KGRlc3QsIHNyYywgcHJvcCwgYXR0cnMpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJzLmxlbmd0aDsgaSsrKVxuXHRcdFx0ZGVzdFtwcm9wXVthdHRyc1tpXV0gPSBzcmNbcHJvcF1bYXR0cnNbaV1dO1xuXHR9XG5cblx0dGhpcy5jb3B5VG9wSW5mbyA9IGZ1bmN0aW9uKHNyYykge1xuXHRcdHZhciBhdHRycyA9IFsndGVtcG8nLCAndGl0bGUnLCAnaGVhZGVyJywgJ3JoeXRobScsICdvcmlnaW4nLCAnY29tcG9zZXInLCAnYXV0aG9yJywgJ3BhcnRPcmRlciddO1xuXHRcdGNvcHkodGhpcywgc3JjLCBcIm1ldGFUZXh0XCIsIGF0dHJzKTtcblx0XHRjb3B5KHRoaXMsIHNyYywgXCJtZXRhVGV4dEluZm9cIiwgYXR0cnMpO1xuXHR9O1xuXG5cdHRoaXMuY29weUJvdHRvbUluZm8gPSBmdW5jdGlvbihzcmMpIHtcblx0XHR2YXIgYXR0cnMgPSBbJ3VuYWxpZ25lZFdvcmRzJyxcblx0XHRcdCdib29rJyxcblx0XHRcdCdzb3VyY2UnLFxuXHRcdFx0J2Rpc2NvZ3JhcGh5Jyxcblx0XHRcdCdub3RlcycsXG5cdFx0XHQndHJhbnNjcmlwdGlvbicsXG5cdFx0XHQnaGlzdG9yeScsXG5cdFx0XHQnYWJjLWNvcHlyaWdodCcsXG5cdFx0XHQnYWJjLWNyZWF0b3InLFxuXHRcdFx0J2FiYy1lZGl0ZWQtYnknLFxuXHRcdFx0J2Zvb3RlciddXG5cdFx0Y29weSh0aGlzLCBzcmMsIFwibWV0YVRleHRcIiwgYXR0cnMpO1xuXHRcdGNvcHkodGhpcywgc3JjLCBcIm1ldGFUZXh0SW5mb1wiLCBhdHRycyk7XG5cdH07XG5cblx0Ly8gVGhlIHN0cnVjdHVyZSBjb25zaXN0cyBvZiBhIGhhc2ggd2l0aCB0aGUgZm9sbG93aW5nIHR3byBpdGVtczpcblx0Ly8gbWV0YVRleHQ6IGEgaGFzaCBvZiB7a2V5LCB2YWx1ZX0sIHdoZXJlIGtleSBpcyBvbmUgb2Y6IHRpdGxlLCBhdXRob3IsIHJoeXRobSwgc291cmNlLCB0cmFuc2NyaXB0aW9uLCB1bmFsaWduZWRXb3JkcywgZXRjLi4uXG5cdC8vIHRlbXBvOiB7IG5vdGVMZW5ndGg6IG51bWJlciAoZS5nLiAuMTI1KSwgYnBtOiBudW1iZXIgfVxuXHQvLyBsaW5lczogYW4gYXJyYXkgb2YgZWxlbWVudHMsIG9yIG9uZSBvZiB0aGUgZm9sbG93aW5nOlxuXHQvL1xuXHQvLyBTVEFGRjogYXJyYXkgb2YgZWxlbWVudHNcblx0Ly8gU1VCVElUTEU6IHN0cmluZ1xuXHQvL1xuXHQvLyBUT0RPOiBhY3R1YWxseSwgdGhlIHN0YXJ0IGFuZCBlbmQgY2hhciBzaG91bGQgbW9kaWZ5IGVhY2ggcGFydCBvZiB0aGUgbm90ZSB0eXBlXG5cdC8vIFRoZSBlbGVtZW50cyBhbGwgaGF2ZSBhIHR5cGUgZmllbGQgYW5kIGEgc3RhcnQgYW5kIGVuZCBjaGFyXG5cdC8vIGZpZWxkLiBUaGUgcmVzdCBvZiB0aGUgZmllbGRzIGRlcGVuZCBvbiB0aGUgdHlwZSBhbmQgYXJlIGxpc3RlZCBiZWxvdzpcblx0Ly8gUkVTVDogZHVyYXRpb249MSwyLDQsODsgY2hvcmQ6IHN0cmluZ1xuXHQvLyBOT1RFOiBhY2NpZGVudGFsPW5vbmUsZGJsX2ZsYXQsZmxhdCxuYXR1cmFsLHNoYXJwLGRibF9zaGFycFxuXHQvL1x0XHRwaXRjaDogXCJDXCIgaXMgMC4gVGhlIG51bWJlcnMgcmVmZXIgdG8gdGhlIHBpdGNoIGxldHRlci5cblx0Ly9cdFx0ZHVyYXRpb246IC41IChzaXh0ZWVudGgpLCAuNzUgKGRvdHRlZCBzaXh0ZWVudGgpLCAxIChlaWdodGgpLCAxLjUgKGRvdHRlZCBlaWdodGgpXG5cdC8vXHRcdFx0MiAocXVhcnRlciksIDMgKGRvdHRlZCBxdWFydGVyKSwgNCAoaGFsZiksIDYgKGRvdHRlZCBoYWxmKSA4ICh3aG9sZSlcblx0Ly9cdFx0Y2hvcmQ6IHsgbmFtZTpjaG9yZCwgcG9zaXRpb246IG9uZSBvZiAnZGVmYXVsdCcsICdhYm92ZScsICdiZWxvdycgfVxuXHQvL1x0XHRlbmRfYmVhbSA9IHRydWUgb3IgdW5kZWZpbmVkIGlmIHRoaXMgaXMgdGhlIGxhc3Qgbm90ZSBpbiBhIGJlYW0uXG5cdC8vXHRcdGx5cmljOiBhcnJheSBvZiB7IHN5bGxhYmxlOiB4eHgsIGRpdmlkZXI6IG9uZSBvZiBcIiAtX1wiIH1cblx0Ly9cdFx0c3RhcnRUaWUgPSB0cnVlfHVuZGVmaW5lZFxuXHQvL1x0XHRlbmRUaWUgPSB0cnVlfHVuZGVmaW5lZFxuXHQvL1x0XHRzdGFydFRyaXBsZXQgPSBudW0gPC0gdGhhdCBpcyB0aGUgbnVtYmVyIHRvIHByaW50XG5cdC8vXHRcdGVuZFRyaXBsZXQgPSB0cnVlfHVuZGVmaW5lZCAodGhlIGxhc3Qgbm90ZSBvZiB0aGUgdHJpcGxldClcblx0Ly8gVE9ETzogYWN0dWFsbHksIGRlY29yYXRpb24gc2hvdWxkIGJlIGFuIGFycmF5LlxuXHQvL1x0XHRkZWNvcmF0aW9uOiB1cGJvdywgZG93bmJvdywgYWNjZW50XG5cdC8vIEJBUjogdHlwZT1iYXJfdGhpbiwgYmFyX3RoaW5fdGhpY2ssIGJhcl90aGluX3RoaW4sIGJhcl90aGlja190aGluLCBiYXJfcmlnaHRfcmVwZWF0LCBiYXJfbGVmdF9yZXBlYXQsIGJhcl9kb3VibGVfcmVwZWF0XG5cdC8vXHRudW1iZXI6IDEgb3IgMjogaWYgaXQgaXMgdGhlIHN0YXJ0IG9mIGEgZmlyc3Qgb3Igc2Vjb25kIGVuZGluZ1xuXHQvLyBDTEVGOiB0eXBlPXRyZWJsZSxiYXNzXG5cdC8vIEtFWS1TSUc6XG5cdC8vXHRcdGFjY2lkZW50YWxzW106IHsgYWNjOnNoYXJwfGRibHNoYXJwfG5hdHVyYWx8ZmxhdHxkYmxmbGF0LCAgbm90ZTphfGJ8Y3xkfGV8ZnxnIH1cblx0Ly8gTUVURVI6IHR5cGU6IGNvbW1vbl90aW1lLGN1dF90aW1lLHNwZWNpZmllZFxuXHQvL1x0XHRpZiBzcGVjaWZpZWQsIHsgbnVtOiA5OSwgZGVuOiA5OSB9XG5cblx0dGhpcy5nZXRCZWF0TGVuZ3RoID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly8gVGhpcyByZXR1cm5zIGEgZnJhY3Rpb246IGZvciBpbnN0YW5jZSAxLzQgZm9yIGEgcXVhcnRlclxuXHRcdC8vIFRoZXJlIGFyZSB0d28gdHlwZXMgb2YgbWV0ZXJzOiBjb21wb3VuZCBhbmQgcmVndWxhci4gQ29tcG91bmQgbWV0ZXIgaGFzIDMgYmVhdHMgY291bnRlZCBhcyBvbmUuXG5cdFx0dmFyIG1ldGVyID0gdGhpcy5nZXRNZXRlckZyYWN0aW9uKCk7XG5cdFx0dmFyIG11bHRpcGxpZXIgPSAxO1xuXHRcdGlmIChtZXRlci5udW0gPT09IDYgfHwgbWV0ZXIubnVtID09PSA5IHx8IG1ldGVyLm51bSA9PT0gMTIpXG5cdFx0XHRtdWx0aXBsaWVyID0gMztcblx0XHRlbHNlIGlmIChtZXRlci5udW0gPT09IDMgJiYgbWV0ZXIuZGVuID09PSA4KVxuXHRcdFx0bXVsdGlwbGllciA9IDM7XG5cblx0XHRyZXR1cm4gbXVsdGlwbGllciAvIG1ldGVyLmRlbjtcblx0fTtcblxuXHRmdW5jdGlvbiBjb21wdXRlUGlja3VwTGVuZ3RoKGxpbmVzLCBiYXJMZW5ndGgpIHtcblx0XHR2YXIgcGlja3VwTGVuZ3RoID0gMDtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAobGluZXNbaV0uc3RhZmYpIHtcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBsaW5lc1tpXS5zdGFmZi5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdGZvciAodmFyIHYgPSAwOyB2IDwgbGluZXNbaV0uc3RhZmZbal0udm9pY2VzLmxlbmd0aDsgdisrKSB7XG5cdFx0XHRcdFx0XHR2YXIgdm9pY2UgPSBsaW5lc1tpXS5zdGFmZltqXS52b2ljZXNbdl07XG5cdFx0XHRcdFx0XHR2YXIgdHJpcGxldE11bHRpcGxpZXIgPSAxO1xuXHRcdFx0XHRcdFx0Zm9yICh2YXIgZWwgPSAwOyBlbCA8IHZvaWNlLmxlbmd0aDsgZWwrKykge1xuXHRcdFx0XHRcdFx0XHR2YXIgaXNTcGFjZXIgPSB2b2ljZVtlbF0ucmVzdCAmJiB2b2ljZVtlbF0ucmVzdC50eXBlID09PSBcInNwYWNlclwiO1xuXHRcdFx0XHRcdFx0XHRpZiAodm9pY2VbZWxdLnN0YXJ0VHJpcGxldClcblx0XHRcdFx0XHRcdFx0XHR0cmlwbGV0TXVsdGlwbGllciA9IHZvaWNlW2VsXS50cmlwbGV0TXVsdGlwbGllcjtcblx0XHRcdFx0XHRcdFx0aWYgKHZvaWNlW2VsXS5kdXJhdGlvbiAmJiAhaXNTcGFjZXIgJiYgdm9pY2VbZWxdLmVsX3R5cGUgIT09IFwidGVtcG9cIilcblx0XHRcdFx0XHRcdFx0XHRwaWNrdXBMZW5ndGggKz0gdm9pY2VbZWxdLmR1cmF0aW9uICogdHJpcGxldE11bHRpcGxpZXI7XG5cdFx0XHRcdFx0XHRcdGlmICh2b2ljZVtlbF0uZW5kVHJpcGxldClcblx0XHRcdFx0XHRcdFx0XHR0cmlwbGV0TXVsdGlwbGllciA9IDE7XG5cdFx0XHRcdFx0XHRcdGlmIChwaWNrdXBMZW5ndGggPj0gYmFyTGVuZ3RoKVxuXHRcdFx0XHRcdFx0XHRcdHBpY2t1cExlbmd0aCAtPSBiYXJMZW5ndGg7XG5cdFx0XHRcdFx0XHRcdGlmICh2b2ljZVtlbF0uZWxfdHlwZSA9PT0gJ2JhcicpXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHBpY2t1cExlbmd0aDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gcGlja3VwTGVuZ3RoO1xuXHR9XG5cdHRoaXMuZ2V0UGlja3VwTGVuZ3RoID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGJhckxlbmd0aCA9IHRoaXMuZ2V0QmFyTGVuZ3RoKCk7XG5cdFx0dmFyIHBpY2t1cExlbmd0aCA9IGNvbXB1dGVQaWNrdXBMZW5ndGgodGhpcy5saW5lcywgYmFyTGVuZ3RoKTtcblxuXHRcdC8vIElmIGNvbXB1dGVkIHBpY2t1cCBsZW5ndGggaXMgdmVyeSBjbG9zZSB0byAwIG9yIHRoZSBiYXIgbGVuZ3RoLCB3ZSBhc3N1bWVcblx0XHQvLyB0aGF0IHdlIGFjdHVhbGx5IGhhdmUgYSBmdWxsIGJhciBhbmQgaGVuY2Ugbm8gcGlja3VwLlxuXHRcdHJldHVybiAocGlja3VwTGVuZ3RoIDwgMWUtOCB8fCBiYXJMZW5ndGgtcGlja3VwTGVuZ3RoIDwgMWUtOCkgPyAwIDogcGlja3VwTGVuZ3RoO1xuXHR9O1xuXG5cdHRoaXMuZ2V0QmFyTGVuZ3RoID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG1ldGVyID0gdGhpcy5nZXRNZXRlckZyYWN0aW9uKCk7XG5cdFx0cmV0dXJuIG1ldGVyLm51bSAvIG1ldGVyLmRlbjtcblx0fTtcblxuXHR0aGlzLmdldFRvdGFsVGltZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnRvdGFsVGltZTtcblx0fTtcblxuXHR0aGlzLmdldFRvdGFsQmVhdHMgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy50b3RhbEJlYXRzO1xuXHR9O1xuXG5cdHRoaXMubWlsbGlzZWNvbmRzUGVyTWVhc3VyZSA9IGZ1bmN0aW9uKGJwbU92ZXJyaWRlKSB7XG5cdFx0dmFyIGJwbTtcblx0XHRpZiAoYnBtT3ZlcnJpZGUpIHtcblx0XHRcdGJwbSA9IGJwbU92ZXJyaWRlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgdGVtcG8gPSB0aGlzLm1ldGFUZXh0ID8gdGhpcy5tZXRhVGV4dC50ZW1wbyA6IG51bGw7XG5cdFx0XHRicG0gPSB0aGlzLmdldEJwbSh0ZW1wbyk7XG5cdFx0fVxuXHRcdGlmIChicG0gPD0gMClcblx0XHRcdGJwbSA9IDE7IC8vIEkgZG9uJ3QgdGhpbmsgdGhpcyBjYW4gaGFwcGVuLCBidXQgd2UgZG9uJ3Qgd2FudCBhIHBvc3NpYmlsaXR5IG9mIGRpdmlkaW5nIGJ5IHplcm8uXG5cblx0XHR2YXIgYmVhdHNQZXJNZWFzdXJlID0gdGhpcy5nZXRCZWF0c1Blck1lYXN1cmUoKTtcblxuXHRcdHZhciBtaW51dGVzUGVyTWVhc3VyZSA9IGJlYXRzUGVyTWVhc3VyZSAvIGJwbTtcblx0XHRyZXR1cm4gbWludXRlc1Blck1lYXN1cmUgKiA2MDAwMDtcblx0fTtcblxuXHR0aGlzLmdldEJlYXRzUGVyTWVhc3VyZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBiZWF0TGVuID0gdGhpcy5nZXRCZWF0TGVuZ3RoKCk7XG5cdFx0dmFyIGJhckxlbiA9IHRoaXMuZ2V0QmFyTGVuZ3RoKCk7XG5cdFx0cmV0dXJuIGJhckxlbiAvIGJlYXRMZW47XG5cdH07XG5cblx0dGhpcy5nZXRNZXRlciA9IGZ1bmN0aW9uKCkge1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGxpbmUgPSB0aGlzLmxpbmVzW2ldO1xuXHRcdFx0aWYgKGxpbmUuc3RhZmYpIHtcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBsaW5lLnN0YWZmLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdFx0dmFyIG1ldGVyID0gbGluZS5zdGFmZltqXS5tZXRlcjtcblx0XHRcdFx0XHRpZiAobWV0ZXIpIHtcblx0XHRcdFx0XHRcdHJldHVybiBtZXRlcjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHsgdHlwZTogXCJjb21tb25fdGltZVwiIH07XG5cdH07XG5cblx0dGhpcy5nZXRNZXRlckZyYWN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG1ldGVyID0gdGhpcy5nZXRNZXRlcigpO1xuXHRcdHZhciBudW0gPSA0O1xuXHRcdHZhciBkZW4gPSA0O1xuXHRcdGlmIChtZXRlcikge1xuXHRcdFx0aWYgKG1ldGVyLnR5cGUgPT09ICdzcGVjaWZpZWQnKSB7XG5cdFx0XHRcdG51bSA9IHBhcnNlSW50KG1ldGVyLnZhbHVlWzBdLm51bSwgMTApO1xuXHRcdFx0XHRkZW4gPSBwYXJzZUludChtZXRlci52YWx1ZVswXS5kZW4sMTApO1xuXHRcdFx0fSBlbHNlIGlmIChtZXRlci50eXBlID09PSAnY3V0X3RpbWUnKSB7XG5cdFx0XHRcdG51bSA9IDI7XG5cdFx0XHRcdGRlbiA9IDI7XG5cdFx0XHR9IGVsc2UgaWYgKG1ldGVyLnR5cGUgPT09ICdjb21tb25fdGltZScpIHtcblx0XHRcdFx0bnVtID0gNDtcblx0XHRcdFx0ZGVuID0gNDtcblx0XHRcdH1cblx0XHR9XG5cdFx0dGhpcy5tZXRlciA9IHsgbnVtOiBudW0sIGRlbjogZGVuIH07XG5cdFx0cmV0dXJuIHRoaXMubWV0ZXI7IC8vIFRPRE8tUEVSOiBpcyB0aGlzIHNhdmVkIHZhbHVlIHVzZWQgYW55d2hlcmU/IEEgZ2V0IGZ1bmN0aW9uIHNob3VsZG4ndCBjaGFuZ2Ugc3RhdGUuXG5cdH07XG5cblx0dGhpcy5nZXRLZXlTaWduYXR1cmUgPSBmdW5jdGlvbigpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBsaW5lID0gdGhpcy5saW5lc1tpXTtcblx0XHRcdGlmIChsaW5lLnN0YWZmKSB7XG5cdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgbGluZS5zdGFmZi5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdGlmIChsaW5lLnN0YWZmW2pdLmtleSlcblx0XHRcdFx0XHRcdHJldHVybiBsaW5lLnN0YWZmW2pdLmtleTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4geyAgfTtcblx0fTtcblxuXHR0aGlzLmdldEVsZW1lbnRGcm9tQ2hhciA9IGZ1bmN0aW9uKGNoYXIpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBsaW5lID0gdGhpcy5saW5lc1tpXTtcblx0XHRcdGlmIChsaW5lLnN0YWZmKSB7XG5cdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgbGluZS5zdGFmZi5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdHZhciBzdGFmZiA9IGxpbmUuc3RhZmZbal07XG5cdFx0XHRcdFx0Zm9yICh2YXIgayA9IDA7IGsgPCBzdGFmZi52b2ljZXMubGVuZ3RoOyBrKyspIHtcblx0XHRcdFx0XHRcdHZhciB2b2ljZSA9IHN0YWZmLnZvaWNlc1trXTtcblx0XHRcdFx0XHRcdGZvciAodmFyIGlpID0gMDsgaWkgPCB2b2ljZS5sZW5ndGg7IGlpKyspIHtcblx0XHRcdFx0XHRcdFx0dmFyIGVsZW0gPSB2b2ljZVtpaV07XG5cdFx0XHRcdFx0XHRcdGlmIChlbGVtLnN0YXJ0Q2hhciAmJiBlbGVtLmVuZENoYXIgJiZcblx0XHRcdFx0XHRcdFx0XHRlbGVtLnN0YXJ0Q2hhciA8PSBjaGFyICYmIGVsZW0uZW5kQ2hhciA+IGNoYXIpXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGVsZW07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBudWxsO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGFkZFZlcnRpY2FsSW5mbyh0aW1pbmdFdmVudHMpIHtcblx0XHQvLyBBZGQgdmVydGljYWwgaW5mbyB0byB0aGUgYmFyIGV2ZW50czogcHV0IHRoZSBuZXh0IGV2ZW50J3MgdG9wLCBhbmQgdGhlIGV2ZW50IGFmdGVyIHRoZSBuZXh0IG1lYXN1cmUncyB0b3AuXG5cdFx0dmFyIGxhc3RCYXJUb3A7XG5cdFx0dmFyIGxhc3RCYXJCb3R0b207XG5cdFx0dmFyIGxhc3RFdmVudFRvcDtcblx0XHR2YXIgbGFzdEV2ZW50Qm90dG9tO1xuXHRcdGZvciAodmFyIGUgPSB0aW1pbmdFdmVudHMubGVuZ3RoIC0gMTsgZSA+PSAwOyBlLS0pIHtcblx0XHRcdHZhciBldiA9IHRpbWluZ0V2ZW50c1tlXTtcblx0XHRcdGlmIChldi50eXBlID09PSAnYmFyJykge1xuXHRcdFx0XHRldi50b3AgPSBsYXN0RXZlbnRUb3A7XG5cdFx0XHRcdGV2Lm5leHRUb3AgPSBsYXN0QmFyVG9wO1xuXHRcdFx0XHRsYXN0QmFyVG9wID0gbGFzdEV2ZW50VG9wO1xuXG5cdFx0XHRcdGV2LmJvdHRvbSA9IGxhc3RFdmVudEJvdHRvbTtcblx0XHRcdFx0ZXYubmV4dEJvdHRvbSA9IGxhc3RCYXJCb3R0b207XG5cdFx0XHRcdGxhc3RCYXJCb3R0b20gPSBsYXN0RXZlbnRCb3R0b207XG5cdFx0XHR9IGVsc2UgaWYgKGV2LnR5cGUgPT09ICdldmVudCcpIHtcblx0XHRcdFx0bGFzdEV2ZW50VG9wID0gZXYudG9wO1xuXHRcdFx0XHRsYXN0RXZlbnRCb3R0b20gPSBldi50b3AgKyBldi5oZWlnaHQ7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gbWFrZVNvcnRlZEFycmF5KGhhc2gpIHtcblx0XHR2YXIgYXJyID0gW107XG5cdFx0Zm9yICh2YXIgayBpbiBoYXNoKSB7XG5cdFx0XHRpZiAoaGFzaC5oYXNPd25Qcm9wZXJ0eShrKSlcblx0XHRcdFx0YXJyLnB1c2goaGFzaFtrXSk7XG5cdFx0fVxuXHRcdGFyciA9IGFyci5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG5cdFx0XHR2YXIgZGlmZiA9IGEubWlsbGlzZWNvbmRzIC0gYi5taWxsaXNlY29uZHM7XG5cdFx0XHQvLyBpZiB0aGUgZXZlbnRzIGhhdmUgdGhlIHNhbWUgdGltZSwgbWFrZSBzdXJlIGEgYmFyIGNvbWVzIGJlZm9yZSBhIG5vdGVcblx0XHRcdGlmIChkaWZmICE9PSAwKSB7XG5cdFx0XHRcdHJldHVybiBkaWZmO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHJldHVybiBhLnR5cGUgPT09IFwiYmFyXCIgPyAtMSA6IDE7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGFycjtcblx0fVxuXG5cdHRoaXMuYWRkRWxlbWVudFRvRXZlbnRzID0gZnVuY3Rpb24oZXZlbnRIYXNoLCBlbGVtZW50LCB2b2ljZVRpbWVNaWxsaXNlY29uZHMsIHRvcCwgaGVpZ2h0LCBsaW5lLCBtZWFzdXJlTnVtYmVyLCB0aW1lRGl2aWRlciwgaXNUaWVkU3RhdGUsIG5leHRJc0Jhcikge1xuXHRcdGlmIChlbGVtZW50LmhpbnQpXG5cdFx0XHRyZXR1cm4geyBpc1RpZWRTdGF0ZTogdW5kZWZpbmVkLCBkdXJhdGlvbjogMCB9O1xuXHRcdHZhciByZWFsRHVyYXRpb24gPSBlbGVtZW50LmR1cmF0aW9uQ2xhc3MgPyBlbGVtZW50LmR1cmF0aW9uQ2xhc3MgOiBlbGVtZW50LmR1cmF0aW9uO1xuXHRcdGlmIChlbGVtZW50LmFiY2VsZW0ucmVzdCAmJiBlbGVtZW50LmFiY2VsZW0ucmVzdC50eXBlID09PSBcInNwYWNlclwiKVxuXHRcdFx0cmVhbER1cmF0aW9uID0gMDtcblx0XHRpZiAocmVhbER1cmF0aW9uID4gMCkge1xuXHRcdFx0dmFyIGVzID0gW107XG5cdFx0XHQvLyBJZiB0aGVyZSBpcyBhbiBpbnZpc2libGUgcmVzdCwgdGhlbiB0aGVyZSBhcmUgbm90IGVsZW1lbnRzLCBzbyBkb24ndCBwdXNoIGEgbnVsbCBvbmUuXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuZWxlbXNldC5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAoZWxlbWVudC5lbGVtc2V0W2ldICE9PSBudWxsKVxuXHRcdFx0XHRcdGVzLnB1c2goZWxlbWVudC5lbGVtc2V0W2ldKTtcblx0XHRcdH1cblx0XHRcdHZhciBpc1RpZWRUb05leHQgPSBlbGVtZW50LnN0YXJ0VGllO1xuXHRcdFx0aWYgKGlzVGllZFN0YXRlICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0ZXZlbnRIYXNoW1wiZXZlbnRcIiArIGlzVGllZFN0YXRlXS5lbGVtZW50cy5wdXNoKGVzKTsgLy8gQWRkIHRoZSB0aWVkIG5vdGUgdG8gdGhlIGZpcnN0IG5vdGUgdGhhdCBpdCBpcyB0aWVkIHRvXG5cdFx0XHRcdGlmIChuZXh0SXNCYXIpIHtcblx0XHRcdFx0XHRpZiAoIWV2ZW50SGFzaFtcImV2ZW50XCIgKyB2b2ljZVRpbWVNaWxsaXNlY29uZHNdKSB7XG5cdFx0XHRcdFx0XHRldmVudEhhc2hbXCJldmVudFwiICsgdm9pY2VUaW1lTWlsbGlzZWNvbmRzXSA9IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJldmVudFwiLFxuXHRcdFx0XHRcdFx0XHRtaWxsaXNlY29uZHM6IHZvaWNlVGltZU1pbGxpc2Vjb25kcyxcblx0XHRcdFx0XHRcdFx0bGluZTogbGluZSxcblx0XHRcdFx0XHRcdFx0bWVhc3VyZU51bWJlcjogbWVhc3VyZU51bWJlcixcblx0XHRcdFx0XHRcdFx0dG9wOiB0b3AsXG5cdFx0XHRcdFx0XHRcdGhlaWdodDogaGVpZ2h0LFxuXHRcdFx0XHRcdFx0XHRsZWZ0OiBudWxsLFxuXHRcdFx0XHRcdFx0XHR3aWR0aDogMCxcblx0XHRcdFx0XHRcdFx0ZWxlbWVudHM6IFtdLFxuXHRcdFx0XHRcdFx0XHRzdGFydENoYXI6IG51bGwsXG5cdFx0XHRcdFx0XHRcdGVuZENoYXI6IG51bGwsXG5cdFx0XHRcdFx0XHRcdHN0YXJ0Q2hhckFycmF5OiBbXSxcblx0XHRcdFx0XHRcdFx0ZW5kQ2hhckFycmF5OiBbXVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZXZlbnRIYXNoW1wiZXZlbnRcIiArIHZvaWNlVGltZU1pbGxpc2Vjb25kc10ubWVhc3VyZVN0YXJ0ID0gdHJ1ZTtcblx0XHRcdFx0XHRuZXh0SXNCYXIgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIWlzVGllZFRvTmV4dClcblx0XHRcdFx0XHRpc1RpZWRTdGF0ZSA9IHVuZGVmaW5lZDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIHRoZSBsYXN0IG5vdGUgd2Fzbid0IHRpZWQuXG5cdFx0XHRcdGlmICghZXZlbnRIYXNoW1wiZXZlbnRcIiArIHZvaWNlVGltZU1pbGxpc2Vjb25kc10pIHtcblx0XHRcdFx0XHRldmVudEhhc2hbXCJldmVudFwiICsgdm9pY2VUaW1lTWlsbGlzZWNvbmRzXSA9IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwiZXZlbnRcIixcblx0XHRcdFx0XHRcdG1pbGxpc2Vjb25kczogdm9pY2VUaW1lTWlsbGlzZWNvbmRzLFxuXHRcdFx0XHRcdFx0bGluZTogbGluZSxcblx0XHRcdFx0XHRcdG1lYXN1cmVOdW1iZXI6IG1lYXN1cmVOdW1iZXIsXG5cdFx0XHRcdFx0XHR0b3A6IHRvcCxcblx0XHRcdFx0XHRcdGhlaWdodDogaGVpZ2h0LFxuXHRcdFx0XHRcdFx0bGVmdDogZWxlbWVudC54LFxuXHRcdFx0XHRcdFx0d2lkdGg6IGVsZW1lbnQudyxcblx0XHRcdFx0XHRcdGVsZW1lbnRzOiBbZXNdLFxuXHRcdFx0XHRcdFx0c3RhcnRDaGFyOiBlbGVtZW50LmFiY2VsZW0uc3RhcnRDaGFyLFxuXHRcdFx0XHRcdFx0ZW5kQ2hhcjogZWxlbWVudC5hYmNlbGVtLmVuZENoYXIsXG5cdFx0XHRcdFx0XHRzdGFydENoYXJBcnJheTogW2VsZW1lbnQuYWJjZWxlbS5zdGFydENoYXJdLFxuXHRcdFx0XHRcdFx0ZW5kQ2hhckFycmF5OiBbZWxlbWVudC5hYmNlbGVtLmVuZENoYXJdLFxuXHRcdFx0XHRcdFx0bWlkaVBpdGNoZXM6IGVsZW1lbnQuYWJjZWxlbS5taWRpUGl0Y2hlcyA/IHBhcnNlQ29tbW9uLmNsb25lQXJyYXkoZWxlbWVudC5hYmNlbGVtLm1pZGlQaXRjaGVzKSA6IFtdXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRpZiAoZWxlbWVudC5hYmNlbGVtLm1pZGlHcmFjZU5vdGVQaXRjaGVzKVxuXHRcdFx0XHRcdFx0ZXZlbnRIYXNoW1wiZXZlbnRcIiArIHZvaWNlVGltZU1pbGxpc2Vjb25kc10ubWlkaUdyYWNlTm90ZVBpdGNoZXMgPSBwYXJzZUNvbW1vbi5jbG9uZUFycmF5KGVsZW1lbnQuYWJjZWxlbS5taWRpR3JhY2VOb3RlUGl0Y2hlcyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gSWYgdGhlcmUgaXMgbW9yZSB0aGFuIG9uZSB2b2ljZSB0aGVuIHR3byBub3RlcyBjYW4gZmFsbCBhdCB0aGUgc2FtZSB0aW1lLiBVc3VhbGx5IHRoZXkgd291bGQgYmUgbGluZWQgdXAgaW4gdGhlIHNhbWUgcGxhY2UsIGJ1dCBpZiBpdCBpcyBhIHdob2xlIHJlc3QsIHRoZW4gaXQgaXMgcGxhY2VkIGZ1bm55LiBJbiBhbnkgY2FzZSwgdGhlIGxlZnQgbW9zdCBlbGVtZW50IHdpbnMuXG5cdFx0XHRcdFx0aWYgKGV2ZW50SGFzaFtcImV2ZW50XCIgKyB2b2ljZVRpbWVNaWxsaXNlY29uZHNdLmxlZnQpXG5cdFx0XHRcdFx0XHRldmVudEhhc2hbXCJldmVudFwiICsgdm9pY2VUaW1lTWlsbGlzZWNvbmRzXS5sZWZ0ID0gTWF0aC5taW4oZXZlbnRIYXNoW1wiZXZlbnRcIiArIHZvaWNlVGltZU1pbGxpc2Vjb25kc10ubGVmdCwgZWxlbWVudC54KTtcblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRldmVudEhhc2hbXCJldmVudFwiICsgdm9pY2VUaW1lTWlsbGlzZWNvbmRzXS5sZWZ0ID0gZWxlbWVudC54O1xuXHRcdFx0XHRcdGV2ZW50SGFzaFtcImV2ZW50XCIgKyB2b2ljZVRpbWVNaWxsaXNlY29uZHNdLmVsZW1lbnRzLnB1c2goZXMpO1xuXHRcdFx0XHRcdGV2ZW50SGFzaFtcImV2ZW50XCIgKyB2b2ljZVRpbWVNaWxsaXNlY29uZHNdLnN0YXJ0Q2hhckFycmF5LnB1c2goZWxlbWVudC5hYmNlbGVtLnN0YXJ0Q2hhcik7XG5cdFx0XHRcdFx0ZXZlbnRIYXNoW1wiZXZlbnRcIiArIHZvaWNlVGltZU1pbGxpc2Vjb25kc10uZW5kQ2hhckFycmF5LnB1c2goZWxlbWVudC5hYmNlbGVtLmVuZENoYXIpO1xuXHRcdFx0XHRcdGlmIChldmVudEhhc2hbXCJldmVudFwiICsgdm9pY2VUaW1lTWlsbGlzZWNvbmRzXS5zdGFydENoYXIgPT09IG51bGwpXG5cdFx0XHRcdFx0XHRldmVudEhhc2hbXCJldmVudFwiICsgdm9pY2VUaW1lTWlsbGlzZWNvbmRzXS5zdGFydENoYXIgPWVsZW1lbnQuYWJjZWxlbS5zdGFydENoYXI7XG5cdFx0XHRcdFx0aWYgKGV2ZW50SGFzaFtcImV2ZW50XCIgKyB2b2ljZVRpbWVNaWxsaXNlY29uZHNdLmVuZENoYXIgPT09IG51bGwpXG5cdFx0XHRcdFx0XHRldmVudEhhc2hbXCJldmVudFwiICsgdm9pY2VUaW1lTWlsbGlzZWNvbmRzXS5lbmRDaGFyID1lbGVtZW50LmFiY2VsZW0uZW5kQ2hhcjtcblx0XHRcdFx0XHRpZiAoZWxlbWVudC5hYmNlbGVtLm1pZGlQaXRjaGVzICYmIGVsZW1lbnQuYWJjZWxlbS5taWRpUGl0Y2hlcy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdGlmICghZXZlbnRIYXNoW1wiZXZlbnRcIiArIHZvaWNlVGltZU1pbGxpc2Vjb25kc10ubWlkaVBpdGNoZXMpXG5cdFx0XHRcdFx0XHRcdGV2ZW50SGFzaFtcImV2ZW50XCIgKyB2b2ljZVRpbWVNaWxsaXNlY29uZHNdLm1pZGlQaXRjaGVzID0gW107XG5cdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuYWJjZWxlbS5taWRpUGl0Y2hlcy5sZW5ndGg7IGkrKylcblx0XHRcdFx0XHRcdFx0ZXZlbnRIYXNoW1wiZXZlbnRcIiArIHZvaWNlVGltZU1pbGxpc2Vjb25kc10ubWlkaVBpdGNoZXMucHVzaChlbGVtZW50LmFiY2VsZW0ubWlkaVBpdGNoZXNbaV0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoZWxlbWVudC5hYmNlbGVtLm1pZGlHcmFjZU5vdGVQaXRjaGVzICYmIGVsZW1lbnQuYWJjZWxlbS5taWRpR3JhY2VOb3RlUGl0Y2hlcy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdGlmICghZXZlbnRIYXNoW1wiZXZlbnRcIiArIHZvaWNlVGltZU1pbGxpc2Vjb25kc10ubWlkaUdyYWNlTm90ZVBpdGNoZXMpXG5cdFx0XHRcdFx0XHRcdGV2ZW50SGFzaFtcImV2ZW50XCIgKyB2b2ljZVRpbWVNaWxsaXNlY29uZHNdLm1pZGlHcmFjZU5vdGVQaXRjaGVzID0gW107XG5cdFx0XHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGVsZW1lbnQuYWJjZWxlbS5taWRpR3JhY2VOb3RlUGl0Y2hlcy5sZW5ndGg7IGorKylcblx0XHRcdFx0XHRcdFx0ZXZlbnRIYXNoW1wiZXZlbnRcIiArIHZvaWNlVGltZU1pbGxpc2Vjb25kc10ubWlkaUdyYWNlTm90ZVBpdGNoZXMucHVzaChlbGVtZW50LmFiY2VsZW0ubWlkaUdyYWNlTm90ZVBpdGNoZXNbal0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobmV4dElzQmFyKSB7XG5cdFx0XHRcdFx0ZXZlbnRIYXNoW1wiZXZlbnRcIiArIHZvaWNlVGltZU1pbGxpc2Vjb25kc10ubWVhc3VyZVN0YXJ0ID0gdHJ1ZTtcblx0XHRcdFx0XHRuZXh0SXNCYXIgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBUT0RPLVBFUjogVGhlcmUgZG9lc24ndCBzZWVtIHRvIGJlIGEgaGFybSBpbiBsZXR0aW5nIHRpZXMgYmUgdHdvIGRpZmZlcmVudCBub3RlcyBhbmQgaXQgZml4ZXMgYSBidWcgd2hlbiBhIHRpZSBnb2VzIHRvIGEgbmV3IGxpbmUuIElmIHRoZXJlIGFyZW4ndCBvdGhlciBwcm9ibGVtcyB3aXRoIHRoaXMgY2hhbmdlLCB0aGVuIHRoZSB2YXJpYWJsZSBjYW4gYmUgcmVtb3ZlZCBjb21wbGV0ZWx5LiBcblx0XHRcdFx0Ly8gaWYgKGlzVGllZFRvTmV4dClcblx0XHRcdFx0Ly8gXHRpc1RpZWRTdGF0ZSA9IHZvaWNlVGltZU1pbGxpc2Vjb25kcztcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHsgaXNUaWVkU3RhdGU6IGlzVGllZFN0YXRlLCBkdXJhdGlvbjogcmVhbER1cmF0aW9uIC8gdGltZURpdmlkZXIsIG5leHRJc0JhcjogbmV4dElzQmFyIHx8IGVsZW1lbnQudHlwZSA9PT0gJ2JhcicgfTtcblx0fTtcblxuXHR0aGlzLm1ha2VWb2ljZXNBcnJheSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vIEZpcnN0IG1ha2UgYSBuZXcgYXJyYXkgdGhhdCBpcyBhcnJhbmdlZCBieSB2b2ljZSBzbyB0aGF0IHRoZSByZXBlYXRzIHRoYXQgc3BhbiBkaWZmZXJlbnQgbGluZXMgYXJlIGhhbmRsZWQgY29ycmVjdGx5LlxuXHRcdHZhciB2b2ljZXNBcnIgPSBbXTtcblx0XHR2YXIgbWVhc3VyZU51bWJlciA9IFtdO1xuXHRcdHZhciB0ZW1wb3MgPSB7fTtcblx0XHRmb3IgKHZhciBsaW5lID0gMDsgbGluZSA8IHRoaXMuZW5ncmF2ZXIuc3RhZmZncm91cHMubGVuZ3RoOyBsaW5lKyspIHtcblx0XHRcdHZhciBncm91cCA9IHRoaXMuZW5ncmF2ZXIuc3RhZmZncm91cHNbbGluZV07XG5cdFx0XHRpZiAoZ3JvdXAgJiYgZ3JvdXAuc3RhZmZzICYmIGdyb3VwLnN0YWZmcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdHZhciBmaXJzdFN0YWZmID0gZ3JvdXAuc3RhZmZzWzBdO1xuXHRcdFx0XHR2YXIgbWlkZGxlQyA9IGZpcnN0U3RhZmYuYWJzb2x1dGVZO1xuXHRcdFx0XHR2YXIgdG9wID0gbWlkZGxlQyAtIGZpcnN0U3RhZmYudG9wICogc3BhY2luZy5TVEVQO1xuXHRcdFx0XHR2YXIgbGFzdFN0YWZmID0gZ3JvdXAuc3RhZmZzW2dyb3VwLnN0YWZmcy5sZW5ndGggLSAxXTtcblx0XHRcdFx0bWlkZGxlQyA9IGxhc3RTdGFmZi5hYnNvbHV0ZVk7XG5cdFx0XHRcdHZhciBib3R0b20gPSBtaWRkbGVDIC0gbGFzdFN0YWZmLmJvdHRvbSAqIHNwYWNpbmcuU1RFUDtcblx0XHRcdFx0dmFyIGhlaWdodCA9IGJvdHRvbSAtIHRvcDtcblxuXHRcdFx0XHR2YXIgdm9pY2VzID0gZ3JvdXAudm9pY2VzO1xuXHRcdFx0XHRmb3IgKHZhciB2ID0gMDsgdiA8IHZvaWNlcy5sZW5ndGg7IHYrKykge1xuXHRcdFx0XHRcdGlmICh2b2ljZXNbdl0uc3RhZmYgJiYgdm9pY2VzW3ZdLnN0YWZmLmlzVGFiU3RhZmYpXG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR2YXIgbm90ZUZvdW5kID0gZmFsc2U7XG5cdFx0XHRcdFx0aWYgKCF2b2ljZXNBcnJbdl0pXG5cdFx0XHRcdFx0XHR2b2ljZXNBcnJbdl0gPSBbXTtcblx0XHRcdFx0XHRpZiAobWVhc3VyZU51bWJlclt2XSA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdFx0bWVhc3VyZU51bWJlclt2XSA9IDA7XG5cdFx0XHRcdFx0dmFyIGVsZW1lbnRzID0gdm9pY2VzW3ZdLmNoaWxkcmVuO1xuXHRcdFx0XHRcdGZvciAodmFyIGVsZW0gPSAwOyBlbGVtIDwgZWxlbWVudHMubGVuZ3RoOyBlbGVtKyspIHtcblx0XHRcdFx0XHRcdGlmIChlbGVtZW50c1tlbGVtXS50eXBlID09PSBcInRlbXBvXCIpXG5cdFx0XHRcdFx0XHRcdHRlbXBvc1ttZWFzdXJlTnVtYmVyW3ZdXSA9IHRoaXMuZ2V0QnBtKGVsZW1lbnRzW2VsZW1dLmFiY2VsZW0pO1xuXHRcdFx0XHRcdFx0dm9pY2VzQXJyW3ZdLnB1c2goe3RvcDogdG9wLCBoZWlnaHQ6IGhlaWdodCwgbGluZTogZ3JvdXAubGluZSwgbWVhc3VyZU51bWJlcjogbWVhc3VyZU51bWJlclt2XSwgZWxlbTogZWxlbWVudHNbZWxlbV19KTtcblx0XHRcdFx0XHRcdGlmIChlbGVtZW50c1tlbGVtXS50eXBlID09PSAnYmFyJyAmJiBub3RlRm91bmQpIC8vIENvdW50IHRoZSBtZWFzdXJlcyBieSBjb3VudGluZyB0aGUgYmFyIGxpbmVzLCBidXQgc2tpcCBhIGJhciBsaW5lIHRoYXQgYXBwZWFycyBhdCB0aGUgbGVmdCBvZiB0aGUgbXVzaWMsIGJlZm9yZSBhbnkgbm90ZXMuXG5cdFx0XHRcdFx0XHRcdG1lYXN1cmVOdW1iZXJbdl0rKztcblx0XHRcdFx0XHRcdGlmIChlbGVtZW50c1tlbGVtXS50eXBlID09PSAnbm90ZScgfHwgZWxlbWVudHNbZWxlbV0udHlwZSA9PT0gJ3Jlc3QnKVxuXHRcdFx0XHRcdFx0XHRub3RlRm91bmQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHR0aGlzLnRlbXBvTG9jYXRpb25zID0gdGVtcG9zOyAvLyBUaGlzIHNob3VsZCBiZSBwYXNzZWQgYmFjaywgYnV0IHRoZSBmdW5jdGlvbiBpcyBhY2Nlc3NpYmxlIHB1YmxpY2x5IHNvIHRoYXQgd291bGQgYnJlYWsgdGhlIGludGVyZmFjZS5cblx0XHRyZXR1cm4gdm9pY2VzQXJyO1xuXHR9O1xuXG5cdHRoaXMuc2V0dXBFdmVudHMgPSBmdW5jdGlvbihzdGFydGluZ0RlbGF5LCB0aW1lRGl2aWRlciwgc3RhcnRpbmdCcG0sIHdhcnApIHtcblx0XHRpZiAoIXdhcnApIHdhcnAgPSAxO1xuXHRcdHZhciB0aW1pbmdFdmVudHMgPSBbXTtcblxuXHRcdHZhciBldmVudEhhc2ggPSB7fTtcblx0XHQvLyBUaGUgdGltZSBpcyB0aGUgbnVtYmVyIG9mIHNlY29uZHMgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBwaWVjZS5cblx0XHQvLyBUaGUgdW5pdHMgd2UgYXJlIHNjYW5uaW5nIGFyZSBpbiBub3RhdGlvbiB1bml0cyAoaS5lLiAwLjI1IGlzIGEgcXVhcnRlciBub3RlKVxuXHRcdHZhciB0aW1lID0gc3RhcnRpbmdEZWxheTtcblx0XHR2YXIgaXNUaWVkU3RhdGU7XG5cdFx0dmFyIG5leHRJc0JhciA9IHRydWU7XG5cdFx0dmFyIHZvaWNlcyA9IHRoaXMubWFrZVZvaWNlc0FycmF5KCk7XG5cdFx0dmFyIG1heFZvaWNlVGltZU1pbGxpc2Vjb25kcyA9IDA7XG5cdFx0Zm9yICh2YXIgdiA9IDA7IHYgPCB2b2ljZXMubGVuZ3RoOyB2KyspIHtcblx0XHRcdHZhciB2b2ljZVRpbWUgPSB0aW1lO1xuXHRcdFx0dmFyIHZvaWNlVGltZU1pbGxpc2Vjb25kcyA9IE1hdGgucm91bmQodm9pY2VUaW1lICogMTAwMCk7XG5cdFx0XHR2YXIgc3RhcnRpbmdSZXBlYXRFbGVtID0gMDtcblx0XHRcdHZhciBlbmRpbmdSZXBlYXRFbGVtID0gLTE7XG5cdFx0XHR2YXIgZWxlbWVudHMgPSB2b2ljZXNbdl07XG5cdFx0XHR2YXIgYnBtID0gc3RhcnRpbmdCcG07XG5cdFx0XHR0aW1lRGl2aWRlciA9IHRoaXMuZ2V0QmVhdExlbmd0aCgpICogYnBtIC8gNjA7XG5cdFx0XHR2YXIgdGVtcG9Eb25lID0gLTE7XG5cdFx0XHRmb3IgKHZhciBlbGVtID0gMDsgZWxlbSA8IGVsZW1lbnRzLmxlbmd0aDsgZWxlbSsrKSB7XG5cdFx0XHRcdHZhciB0aGlzTWVhc3VyZSA9IGVsZW1lbnRzW2VsZW1dLm1lYXN1cmVOdW1iZXI7XG5cdFx0XHRcdGlmICh0ZW1wb0RvbmUgIT09IHRoaXNNZWFzdXJlICYmIHRoaXMudGVtcG9Mb2NhdGlvbnNbdGhpc01lYXN1cmVdKSB7XG5cdFx0XHRcdFx0YnBtID0gdGhpcy50ZW1wb0xvY2F0aW9uc1t0aGlzTWVhc3VyZV07XG5cdFx0XHRcdFx0dGltZURpdmlkZXIgPSB3YXJwICogdGhpcy5nZXRCZWF0TGVuZ3RoKCkgKiBicG0gLyA2MDtcblx0XHRcdFx0XHR0ZW1wb0RvbmUgPSB0aGlzTWVhc3VyZTtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgZWxlbWVudCA9IGVsZW1lbnRzW2VsZW1dLmVsZW07XG5cdFx0XHRcdHZhciByZXQgPSB0aGlzLmFkZEVsZW1lbnRUb0V2ZW50cyhldmVudEhhc2gsIGVsZW1lbnQsIHZvaWNlVGltZU1pbGxpc2Vjb25kcywgZWxlbWVudHNbZWxlbV0udG9wLCBlbGVtZW50c1tlbGVtXS5oZWlnaHQsIGVsZW1lbnRzW2VsZW1dLmxpbmUsIGVsZW1lbnRzW2VsZW1dLm1lYXN1cmVOdW1iZXIsIHRpbWVEaXZpZGVyLCBpc1RpZWRTdGF0ZSwgbmV4dElzQmFyKTtcblx0XHRcdFx0aXNUaWVkU3RhdGUgPSByZXQuaXNUaWVkU3RhdGU7XG5cdFx0XHRcdG5leHRJc0JhciA9IHJldC5uZXh0SXNCYXI7XG5cdFx0XHRcdHZvaWNlVGltZSArPSByZXQuZHVyYXRpb247XG5cdFx0XHRcdHZhciBsYXN0SGFzaDtcblx0XHRcdFx0aWYgKGVsZW1lbnQuZHVyYXRpb24gPiAwICYmIGV2ZW50SGFzaFtcImV2ZW50XCIgKyB2b2ljZVRpbWVNaWxsaXNlY29uZHNdKSAvLyBUaGlzIHdvbid0IGV4aXN0IGlmIHRoaXMgaXMgdGhlIGVuZCBvZiBhIHRpZS5cblx0XHRcdFx0XHRsYXN0SGFzaCA9IFwiZXZlbnRcIiArIHZvaWNlVGltZU1pbGxpc2Vjb25kcztcblx0XHRcdFx0dm9pY2VUaW1lTWlsbGlzZWNvbmRzID0gTWF0aC5yb3VuZCh2b2ljZVRpbWUgKiAxMDAwKTtcblx0XHRcdFx0aWYgKGVsZW1lbnQudHlwZSA9PT0gJ2JhcicpIHtcblx0XHRcdFx0XHR2YXIgYmFyVHlwZSA9IGVsZW1lbnQuYWJjZWxlbS50eXBlO1xuXHRcdFx0XHRcdHZhciBlbmRSZXBlYXQgPSAoYmFyVHlwZSA9PT0gXCJiYXJfcmlnaHRfcmVwZWF0XCIgfHwgYmFyVHlwZSA9PT0gXCJiYXJfZGJsX3JlcGVhdFwiKTtcblx0XHRcdFx0XHR2YXIgc3RhcnRFbmRpbmcgPSAoZWxlbWVudC5hYmNlbGVtLnN0YXJ0RW5kaW5nID09PSAnMScpO1xuXHRcdFx0XHRcdHZhciBzdGFydFJlcGVhdCA9IChiYXJUeXBlID09PSBcImJhcl9sZWZ0X3JlcGVhdFwiIHx8IGJhclR5cGUgPT09IFwiYmFyX2RibF9yZXBlYXRcIiB8fCBiYXJUeXBlID09PSBcImJhcl9yaWdodF9yZXBlYXRcIik7XG5cdFx0XHRcdFx0aWYgKGVuZFJlcGVhdCkge1xuXHRcdFx0XHRcdFx0Ly8gRm9yY2UgdGhlIGVuZCBvZiB0aGUgcHJldmlvdXMgbm90ZSB0byB0aGUgcG9zaXRpb24gb2YgdGhlIG1lYXN1cmUgLSB0aGUgY3Vyc29yIHdvbid0IGdvIHBhc3QgdGhlIGVuZCByZXBlYXRcblx0XHRcdFx0XHRcdGlmIChlbGVtID4gMCkge1xuXHRcdFx0XHRcdFx0XHRldmVudEhhc2hbbGFzdEhhc2hdLmVuZFggPSBlbGVtZW50Lng7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChlbmRpbmdSZXBlYXRFbGVtID09PSAtMSlcblx0XHRcdFx0XHRcdFx0ZW5kaW5nUmVwZWF0RWxlbSA9IGVsZW07XG5cdFx0XHRcdFx0XHR2YXIgbGFzdFZvaWNlVGltZU1pbGxpc2Vjb25kcyA9IDA7XG5cdFx0XHRcdFx0XHR0ZW1wb0RvbmUgPSAtMTtcblx0XHRcdFx0XHRcdGZvciAodmFyIGVsMiA9IHN0YXJ0aW5nUmVwZWF0RWxlbTsgZWwyIDwgZW5kaW5nUmVwZWF0RWxlbTsgZWwyKyspIHtcblx0XHRcdFx0XHRcdFx0dGhpc01lYXN1cmUgPSBlbGVtZW50c1tlbDJdLm1lYXN1cmVOdW1iZXI7XG5cdFx0XHRcdFx0XHRcdGlmICh0ZW1wb0RvbmUgIT09IHRoaXNNZWFzdXJlICYmIHRoaXMudGVtcG9Mb2NhdGlvbnNbdGhpc01lYXN1cmVdKSB7XG5cdFx0XHRcdFx0XHRcdFx0YnBtID0gdGhpcy50ZW1wb0xvY2F0aW9uc1t0aGlzTWVhc3VyZV07XG5cdFx0XHRcdFx0XHRcdFx0dGltZURpdmlkZXIgPSB3YXJwICogdGhpcy5nZXRCZWF0TGVuZ3RoKCkgKiBicG0gLyA2MDtcblx0XHRcdFx0XHRcdFx0XHR0ZW1wb0RvbmUgPSB0aGlzTWVhc3VyZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR2YXIgZWxlbWVudDIgPSBlbGVtZW50c1tlbDJdLmVsZW07XG5cdFx0XHRcdFx0XHRcdHJldCA9IHRoaXMuYWRkRWxlbWVudFRvRXZlbnRzKGV2ZW50SGFzaCwgZWxlbWVudDIsIHZvaWNlVGltZU1pbGxpc2Vjb25kcywgZWxlbWVudHNbZWwyXS50b3AsIGVsZW1lbnRzW2VsMl0uaGVpZ2h0LCBlbGVtZW50c1tlbDJdLmxpbmUsIGVsZW1lbnRzW2VsMl0ubWVhc3VyZU51bWJlciwgdGltZURpdmlkZXIsIGlzVGllZFN0YXRlLCBuZXh0SXNCYXIpO1xuXHRcdFx0XHRcdFx0XHRpc1RpZWRTdGF0ZSA9IHJldC5pc1RpZWRTdGF0ZTtcblx0XHRcdFx0XHRcdFx0bmV4dElzQmFyID0gcmV0Lm5leHRJc0Jhcjtcblx0XHRcdFx0XHRcdFx0dm9pY2VUaW1lICs9IHJldC5kdXJhdGlvbjtcblx0XHRcdFx0XHRcdFx0bGFzdFZvaWNlVGltZU1pbGxpc2Vjb25kcyA9IHZvaWNlVGltZU1pbGxpc2Vjb25kcztcblx0XHRcdFx0XHRcdFx0dm9pY2VUaW1lTWlsbGlzZWNvbmRzID0gTWF0aC5yb3VuZCh2b2ljZVRpbWUgKiAxMDAwKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChldmVudEhhc2hbXCJldmVudFwiICsgbGFzdFZvaWNlVGltZU1pbGxpc2Vjb25kc10pIC8vIFRoaXMgd29uJ3QgZXhpc3QgaWYgaXQgaXMgdGhlIGJlZ2lubmluZyBvZiB0aGUgbmV4dCBsaW5lLiBUaGF0J3Mgb2sgYmVjYXVzZSB3ZSB3aWxsIGp1c3QgY291bnQgdGhlIGVuZCBvZiB0aGUgbGFzdCBsaW5lIGFzIHRoZSBlbmQuXG5cdFx0XHRcdFx0XHRcdGV2ZW50SGFzaFtcImV2ZW50XCIgKyBsYXN0Vm9pY2VUaW1lTWlsbGlzZWNvbmRzXS5lbmRYID0gZWxlbWVudHNbZW5kaW5nUmVwZWF0RWxlbV0uZWxlbS54O1xuXHRcdFx0XHRcdFx0bmV4dElzQmFyID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGVuZGluZ1JlcGVhdEVsZW0gPSAtMTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHN0YXJ0RW5kaW5nKVxuXHRcdFx0XHRcdFx0ZW5kaW5nUmVwZWF0RWxlbSA9IGVsZW07XG5cdFx0XHRcdFx0aWYgKHN0YXJ0UmVwZWF0KVxuXHRcdFx0XHRcdFx0c3RhcnRpbmdSZXBlYXRFbGVtID0gZWxlbTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0bWF4Vm9pY2VUaW1lTWlsbGlzZWNvbmRzID0gTWF0aC5tYXgobWF4Vm9pY2VUaW1lTWlsbGlzZWNvbmRzLCB2b2ljZVRpbWVNaWxsaXNlY29uZHMpXG5cdFx0fVxuXHRcdC8vIG5vdyB3ZSBoYXZlIGFsbCB0aGUgZXZlbnRzLCBidXQgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHZvaWNlcyB0aGVuIHRoZXJlIG1heSBiZSBldmVudHMgb3V0IG9mIG9yZGVyIG9yIGR1cGxpY2F0ZWQsIHNvIG5vcm1hbGl6ZSBpdC5cblx0XHR0aW1pbmdFdmVudHMgPSBtYWtlU29ydGVkQXJyYXkoZXZlbnRIYXNoKTtcblx0XHRhZGRWZXJ0aWNhbEluZm8odGltaW5nRXZlbnRzKTtcblx0XHRhZGRFbmRQb2ludHModGhpcy5saW5lcywgdGltaW5nRXZlbnRzKVxuXHRcdHRpbWluZ0V2ZW50cy5wdXNoKHsgdHlwZTogXCJlbmRcIiwgbWlsbGlzZWNvbmRzOiBtYXhWb2ljZVRpbWVNaWxsaXNlY29uZHMgfSk7XG5cdFx0dGhpcy5hZGRVc2VmdWxDYWxsYmFja0luZm8odGltaW5nRXZlbnRzLCBicG0qd2FycCk7XG5cdFx0cmV0dXJuIHRpbWluZ0V2ZW50cztcblx0fTtcblxuXHR0aGlzLmFkZFVzZWZ1bENhbGxiYWNrSW5mbyA9IGZ1bmN0aW9uKHRpbWluZ0V2ZW50cywgYnBtKSB7XG5cdFx0dmFyIG1pbGxpc2Vjb25kc1Blck1lYXN1cmUgPSB0aGlzLm1pbGxpc2Vjb25kc1Blck1lYXN1cmUoYnBtKTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRpbWluZ0V2ZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGV2ID0gdGltaW5nRXZlbnRzW2ldO1xuXHRcdFx0ZXYubWlsbGlzZWNvbmRzUGVyTWVhc3VyZSA9IG1pbGxpc2Vjb25kc1Blck1lYXN1cmU7XG5cdFx0fVxuXHR9O1xuXG5cdGZ1bmN0aW9uIHNraXBUaWVzKGVsZW1lbnRzLCBpbmRleCkge1xuXHRcdHdoaWxlIChpbmRleCA8IGVsZW1lbnRzLmxlbmd0aCAmJiBlbGVtZW50c1tpbmRleF0ubGVmdCA9PT0gbnVsbClcblx0XHRcdGluZGV4Kys7XG5cdFx0cmV0dXJuIGVsZW1lbnRzW2luZGV4XTtcblx0fVxuXHRmdW5jdGlvbiBhZGRFbmRQb2ludHMobGluZXMsIGVsZW1lbnRzKSB7XG5cdFx0aWYgKGVsZW1lbnRzLmxlbmd0aCA8IDEpXG5cdFx0XHRyZXR1cm47XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGgtMTsgaSsrKSB7XG5cdFx0XHR2YXIgZWwgPSBlbGVtZW50c1tpXTtcblx0XHRcdHZhciBuZXh0ID0gc2tpcFRpZXMoZWxlbWVudHMsIGkrMSk7XG5cdFx0XHRpZiAoZWwubGVmdCAhPT0gbnVsbCkge1xuXHRcdFx0XHQvLyBJZiB0aGVyZSBpcyBubyBsZWZ0IGVsZW1lbnQgdGhhdCBpcyBiZWNhdXNlIHRoaXMgaXMgYSB0aWUgc28gaXQgc2hvdWxkIGJlIHNraXBwZWQuXG5cdFx0XHRcdHZhciBlbmRYID0gKG5leHQgJiYgZWwudG9wID09PSBuZXh0LnRvcCkgPyBuZXh0LmxlZnQgOiBsaW5lc1tlbC5saW5lXS5zdGFmZkdyb3VwLnc7XG5cdFx0XHRcdC8vIElmIHRoaXMgaXMgYWxyZWFkeSBzZXQsIGl0IGlzIGJlY2F1c2UgdGhlIG5vdGVzIGFyZW4ndCBzZXF1ZW50aWFsIGhlcmUsIGxpa2UgdGhlIG5leHQgdGhpbmcgaXMgYSByZXBlYXQgYmFyIGxpbmUuXG5cdFx0XHRcdC8vIEluIHRoYXQgY2FzZSwgdGhlIHJpZ2h0LW1vc3QgcG9zaXRpb24gaXMgcGFzc2VkIGluLiBUaGVyZSBjb3VsZCBzdGlsbCBiZSBhbiBpbnRlcnZlbmluZyBub3RlIGluIGFub3RoZXIgdm9pY2UsIHNvIGFsd2F5cyBsb29rIGZvciB0aGUgY2xvc2VzdCBwb3NpdGlvbi5cblx0XHRcdFx0Ly8gSWYgdGhlcmUgaXMgYSByZXBlYXQgdGhhdCBzdGF5cyBvbiB0aGUgc2FtZSBsaW5lLCB0aGUgZW5kWCBzZXQgYWJvdmUgd29uJ3QgYmUgcmlnaHQgYmVjYXVzZSB0aGUgbmV4dCBub3RlIHdpbGwgYmUgYmVmb3JlLiBJbiB0aGF0IGNhc2UsIHVzZSB0aGUgZW5kWCB0aGF0IHdhcyBjYWxjdWxhdGVkLlxuXHRcdFx0XHRpZiAgKGVsLmVuZFggIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGlmIChlbmRYID4gZWwubGVmdClcblx0XHRcdFx0XHRcdGVsLmVuZFggPSBNYXRoLm1pbihlbC5lbmRYLCBlbmRYKTtcblx0XHRcdFx0fSBlbHNlXG5cdFx0XHRcdFx0ZWwuZW5kWCA9IGVuZFg7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHZhciBsYXN0RWwgPSBlbGVtZW50c1tlbGVtZW50cy5sZW5ndGgtMV07XG5cdFx0bGFzdEVsLmVuZFggPSBsaW5lc1tsYXN0RWwubGluZV0uc3RhZmZHcm91cC53O1xuXHR9XG5cblx0dGhpcy5nZXRCcG0gPSBmdW5jdGlvbih0ZW1wbykge1xuXHRcdHZhciBicG07XG5cdFx0aWYgKCF0ZW1wbylcblx0XHRcdHRlbXBvID0gdGhpcy5tZXRhVGV4dCA/IHRoaXMubWV0YVRleHQudGVtcG8gOiBudWxsO1xuXHRcdGlmICh0ZW1wbykge1xuXHRcdFx0YnBtID0gdGVtcG8uYnBtO1xuXHRcdFx0dmFyIGJlYXRMZW5ndGggPSB0aGlzLmdldEJlYXRMZW5ndGgoKTtcblx0XHRcdHZhciBzdGF0ZWRCZWF0TGVuZ3RoID0gdGVtcG8uZHVyYXRpb24gJiYgdGVtcG8uZHVyYXRpb24ubGVuZ3RoID4gMCA/IHRlbXBvLmR1cmF0aW9uWzBdIDogYmVhdExlbmd0aDtcblx0XHRcdGJwbSA9IGJwbSAqIHN0YXRlZEJlYXRMZW5ndGggLyBiZWF0TGVuZ3RoO1xuXHRcdH1cblx0XHRpZiAoIWJwbSkge1xuXHRcdFx0YnBtID0gMTgwO1xuXHRcdFx0Ly8gQ29tcGVuc2F0ZSBmb3IgY29tcG91bmQgbWV0ZXIsIHdoZXJlIHRoZSBiZWF0IGlzbid0IGEgYmVhdC5cblx0XHRcdHZhciBtZXRlciA9IHRoaXMuZ2V0TWV0ZXJGcmFjdGlvbigpO1xuXHRcdFx0aWYgKG1ldGVyICYmIG1ldGVyLm51bSAhPT0gMyAmJiAobWV0ZXIubnVtICUgMyA9PT0gMCkpIHtcblx0XHRcdFx0YnBtID0gMTIwO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gYnBtO1xuXHR9O1xuXG5cdHRoaXMuc2V0VGltaW5nID0gZnVuY3Rpb24gKGJwbSwgbWVhc3VyZXNPZkRlbGF5KSB7XG5cdFx0bWVhc3VyZXNPZkRlbGF5ID0gbWVhc3VyZXNPZkRlbGF5IHx8IDA7XG5cdFx0aWYgKCF0aGlzLmVuZ3JhdmVyIHx8ICF0aGlzLmVuZ3JhdmVyLnN0YWZmZ3JvdXBzKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcInNldFRpbWluZyBjYW5ub3QgYmUgY2FsbGVkIGJlZm9yZSB0aGUgdHVuZSBpcyBkcmF3bi5cIik7XG5cdFx0XHR0aGlzLm5vdGVUaW1pbmdzID0gW107XG5cdFx0XHRyZXR1cm4gdGhpcy5ub3RlVGltaW5ncztcblx0XHR9XG5cblx0XHR2YXIgdGVtcG8gPSB0aGlzLm1ldGFUZXh0ID8gdGhpcy5tZXRhVGV4dC50ZW1wbyA6IG51bGw7XG5cdFx0dmFyIG5hdHVyYWxCcG0gPSB0aGlzLmdldEJwbSh0ZW1wbyk7XG5cdFx0dmFyIHdhcnAgPSAxO1xuXHRcdGlmIChicG0pIHtcblx0XHRcdGlmICh0ZW1wbylcblx0XHRcdFx0d2FycCA9IGJwbSAvIG5hdHVyYWxCcG07XG5cdFx0fSBlbHNlXG5cdFx0XHRicG0gPSBuYXR1cmFsQnBtO1xuXG5cdFx0Ly8gQ2FsY3VsYXRlIHRoZSBiYXNpYyBtaWRpIGRhdGEuIFdlIG9ubHkgY2FyZSBhYm91dCB0aGUgcXBtIHZhcmlhYmxlIGhlcmUuXG5cdFx0Ly90aGlzLnNldFVwQXVkaW8oe3FwbTogYnBtfSk7XG5cblx0XHR2YXIgYmVhdExlbmd0aCA9IHRoaXMuZ2V0QmVhdExlbmd0aCgpO1xuXHRcdHZhciBiZWF0c1BlclNlY29uZCA9IGJwbSAvIDYwO1xuXG5cdFx0dmFyIG1lYXN1cmVMZW5ndGggPSB0aGlzLmdldEJhckxlbmd0aCgpO1xuXG5cdFx0dmFyIHN0YXJ0aW5nRGVsYXkgPSBtZWFzdXJlTGVuZ3RoIC8gYmVhdExlbmd0aCAqIG1lYXN1cmVzT2ZEZWxheSAvIGJlYXRzUGVyU2Vjb25kO1xuXHRcdGlmIChzdGFydGluZ0RlbGF5KVxuXHRcdFx0c3RhcnRpbmdEZWxheSAtPSB0aGlzLmdldFBpY2t1cExlbmd0aCgpIC8gYmVhdExlbmd0aCAvIGJlYXRzUGVyU2Vjb25kO1xuXHRcdHZhciB0aW1lRGl2aWRlciA9IGJlYXRMZW5ndGggKiBiZWF0c1BlclNlY29uZDtcblxuXHRcdHRoaXMubm90ZVRpbWluZ3MgPSB0aGlzLnNldHVwRXZlbnRzKHN0YXJ0aW5nRGVsYXksIHRpbWVEaXZpZGVyLCBicG0sIHdhcnApO1xuXHRcdGlmICh0aGlzLm5vdGVUaW1pbmdzLmxlbmd0aCA+IDApIHtcblx0XHRcdHRoaXMudG90YWxUaW1lID0gdGhpcy5ub3RlVGltaW5nc1t0aGlzLm5vdGVUaW1pbmdzLmxlbmd0aCAtIDFdLm1pbGxpc2Vjb25kcyAvIDEwMDA7XG5cdFx0XHR0aGlzLnRvdGFsQmVhdHMgPSB0aGlzLnRvdGFsVGltZSAqIGJlYXRzUGVyU2Vjb25kO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnRvdGFsVGltZSA9IHVuZGVmaW5lZDtcblx0XHRcdHRoaXMudG90YWxCZWF0cyA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMubm90ZVRpbWluZ3M7XG5cdH07XG5cblx0dGhpcy5zZXRVcEF1ZGlvID0gZnVuY3Rpb24ob3B0aW9ucykge1xuXHRcdGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuXHRcdHZhciBzZXEgPSBzZXF1ZW5jZSh0aGlzLCBvcHRpb25zKTtcblx0XHRyZXR1cm4gZmxhdHRlbihzZXEsIG9wdGlvbnMsIHRoaXMuZm9ybWF0dGluZy5wZXJjbWFwLCB0aGlzLmZvcm1hdHRpbmcubWlkaSk7XG5cdH07XG5cdHRoaXMuZGVsaW5lID0gZnVuY3Rpb24ob3B0aW9ucykge1xuXHRcdHJldHVybiBkZWxpbmVUdW5lKHRoaXMubGluZXMsIG9wdGlvbnMpO1xuXHR9XG5cdHRoaXMuZmluZFNlbGVjdGFibGVFbGVtZW50ID0gZnVuY3Rpb24odGFyZ2V0KSB7XG5cdFx0aWYgKHRoaXMuZW5ncmF2ZXIgJiYgdGhpcy5lbmdyYXZlci5zZWxlY3RhYmxlcylcblx0XHRcdHJldHVybiB0aGlzLmVuZ3JhdmVyLmZpbmRTZWxlY3RhYmxlRWxlbWVudCh0YXJnZXQpXG5cdFx0cmV0dXJuIG51bGxcblx0fVxuXHR0aGlzLmdldFNlbGVjdGFibGVBcnJheSA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLmVuZ3JhdmVyICYmIHRoaXMuZW5ncmF2ZXIuc2VsZWN0YWJsZXMpXG5cdFx0XHRyZXR1cm4gdGhpcy5lbmdyYXZlci5zZWxlY3RhYmxlc1xuXHRcdHJldHVybiBbXVxuXHR9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFR1bmU7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/data/abc_tune.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/data/deline-tune.js":
/*!****************************************************!*\
  !*** ./node_modules/abcjs/src/data/deline-tune.js ***!
  \****************************************************/
/***/ ((module) => {

eval("function delineTune(inputLines, options) {\n\tif (!options) options = {};\n\tvar lineBreaks = !!options.lineBreaks;\n\tvar outputLines = [];\n\tvar inMusicLine = false;\n\tvar currentMeter = [];\n\tvar currentKey = [];\n\tvar currentClef = [];\n\tvar currentVocalFont = [];\n\tvar currentGChordFont = [];\n\tvar currentTripletFont = [];\n\tvar currentAnnotationFont = [];\n\tfor (var i = 0; i < inputLines.length; i++) {\n\t\tvar inputLine = inputLines[i];\n\t\tif (inputLine.staff) {\n\t\t\tif (inMusicLine && !inputLine.vskip) {\n\t\t\t\tvar outputLine = outputLines[outputLines.length-1];\n\t\t\t\t//findMismatchKeys(inputLine, outputLine, [\"staff\", \"staffGroup\"], \"line\", i)\n\t\t\t\tfor (var s = 0; s < outputLine.staff.length; s++) {\n\t\t\t\t\tvar inputStaff = inputLine.staff[s];\n\t\t\t\t\tvar outputStaff = outputLine.staff[s];\n\t\t\t\t\tif (inputStaff) {\n\t\t\t\t\t\tif (!objEqual(inputStaff.meter, currentMeter[s])) {\n\t\t\t\t\t\t\t// The meter changed for this line, otherwise it wouldn't have been set\n\t\t\t\t\t\t\taddMeterToVoices(inputStaff.meter, inputStaff.voices)\n\t\t\t\t\t\t\tcurrentMeter[s] = inputStaff.meter;\n\t\t\t\t\t\t\tdelete inputStaff.meter;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!objEqual(inputStaff.key, currentKey[s])) {\n\t\t\t\t\t\t\taddKeyToVoices(inputStaff.key, inputStaff.voices);\n\t\t\t\t\t\t\tcurrentKey[s] = inputStaff.key;\n\t\t\t\t\t\t\tdelete inputStaff.key;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (inputStaff.title)\n\t\t\t\t\t\t\toutputStaff.abbrevTitle = inputStaff.title;\n\t\t\t\t\t\tif (!objEqual(inputStaff.clef, currentClef[s])) {\n\t\t\t\t\t\t\taddClefToVoices(inputStaff.clef, inputStaff.voices);\n\t\t\t\t\t\t\tcurrentClef[s] = inputStaff.clef;\n\t\t\t\t\t\t\tdelete inputStaff.clef;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!objEqual(inputStaff.vocalfont, currentVocalFont[s])) {\n\t\t\t\t\t\t\taddFontToVoices(inputStaff.vocalfont, inputStaff.voices, 'vocalfont')\n\t\t\t\t\t\t\tcurrentVocalFont[s] = inputStaff.vocalfont;\n\t\t\t\t\t\t\tdelete inputStaff.vocalfont;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!objEqual(inputStaff.gchordfont, currentGChordFont[s])) {\n\t\t\t\t\t\t\taddFontToVoices(inputStaff.gchordfont, inputStaff.voices, 'gchordfont')\n\t\t\t\t\t\t\tcurrentGChordFont[s] = inputStaff.gchordfont;\n\t\t\t\t\t\t\tdelete inputStaff.gchordfont;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!objEqual(inputStaff.tripletfont, currentTripletFont[s])) {\n\t\t\t\t\t\t\taddFontToVoices(inputStaff.tripletfont, inputStaff.voices, 'tripletfont')\n\t\t\t\t\t\t\tcurrentTripletFont[s] = inputStaff.tripletfont;\n\t\t\t\t\t\t\tdelete inputStaff.tripletfont;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!objEqual(inputStaff.annotationfont, currentAnnotationFont[s])) {\n\t\t\t\t\t\t\taddFontToVoices(inputStaff.annotationfont, inputStaff.voices, 'annotationfont')\n\t\t\t\t\t\t\tcurrentAnnotationFont[s] = inputStaff.annotationfont;\n\t\t\t\t\t\t\tdelete inputStaff.annotationfont;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//findMismatchKeys(inputStaff, outputStaff, [\"voices\", \"title\", \"abbrevTitle\", \"barNumber\", \"meter\", \"key\", \"clef\", \"vocalfont\", \"gchordfont\", \"tripletfont\", \"annotationfont\"], \"staff\", i + ' ' + s)\n\t\t\t\t\tif (inputStaff) {\n\t\t\t\t\t\tfor (var v = 0; v < outputStaff.voices.length; v++) {\n\t\t\t\t\t\t\tvar outputVoice = outputStaff.voices[v];\n\t\t\t\t\t\t\tvar inputVoice = inputStaff.voices[v];\n\t\t\t\t\t\t\tif (lineBreaks)\n\t\t\t\t\t\t\t\toutputVoice.push({el_type: \"break\"});\n\t\t\t\t\t\t\tif (inputVoice)\n\t\t\t\t\t\t\t\toutputStaff.voices[v] = outputVoice.concat(inputVoice)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (var ii = 0; ii < inputLine.staff.length; ii++) {\n\t\t\t\t\tcurrentKey[ii] = inputLine.staff[ii].key;\n\t\t\t\t\tcurrentMeter[ii] = inputLine.staff[ii].meter;\n\t\t\t\t\tcurrentClef[ii] = inputLine.staff[ii].clef;\n\t\t\t\t}\n\t\t\t\t// copy this because we are going to change it and we don't want to change the original.\n\t\t\t\toutputLines.push(cloneLine(inputLine));\n\t\t\t}\n\t\t\tinMusicLine = true;\n\t\t} else {\n\t\t\tinMusicLine = false;\n\t\t\toutputLines.push(inputLine);\n\t\t}\n\t}\n\treturn outputLines;\n}\n// function findMismatchKeys(input, output, ignore, context, context2) {\n// \tif (!input) {\n// \t\treturn;\n// \t}\n// \tvar outputKeys = Object.keys(output);\n// \tvar inputKeys = Object.keys(input);\n// \tfor (var ii = 0; ii < ignore.length; ii++) {\n// \t\tif (outputKeys.indexOf(ignore[ii]) >= 0) {\n// \t\t\toutputKeys.splice(outputKeys.indexOf(ignore[ii]), 1);\n// \t\t}\n// \t\tif (inputKeys.indexOf(ignore[ii]) >= 0) {\n// \t\t\tinputKeys.splice(inputKeys.indexOf(ignore[ii]), 1);\n// \t\t}\n// \t}\n// \tif (inputKeys.join(\",\") !== outputKeys.join(\",\")) {\n// \t\tconsole.log(\"keys mismatch \"+context + ' ' + context2, input, output);\n// \t}\n// \tfor (var k = 0; k < inputKeys.length; k++) {\n// \t\tvar key = inputKeys[k];\n// \t\tif (ignore.indexOf(key) < 0) {\n// \t\t\tvar inputValue = JSON.stringify(input[key], replacer);\n// \t\t\tvar outputValue = JSON.stringify(output[key], replacer);\n// \t\t\tif (inputValue !== outputValue)\n// \t\t\t\tconsole.log(\"value mismatch \"+context + ' ' + context2 + ' ' + key, inputValue, outputValue)\n// \t\t}\n// \t}\n// }\nfunction replacer(key, value) {\n\t// Filtering out properties\n\tif (key === 'abselem') {\n\t\treturn 'abselem';\n\t}\n\treturn value;\n}\n\nfunction addMeterToVoices(meter, voices) {\n\tmeter.el_type = \"meter\";\n\tmeter.startChar = -1;\n\tmeter.endChar = -1;\n\tfor (var i = 0; i < voices.length; i++) {\n\t\tvoices[i].unshift(meter);\n\t}\n}\n\nfunction addKeyToVoices(key, voices) {\n\tkey.el_type = \"key\";\n\tkey.startChar = -1;\n\tkey.endChar = -1;\n\tfor (var i = 0; i < voices.length; i++) {\n\t\tvoices[i].unshift(key);\n\t}\n}\n\nfunction addClefToVoices(clef, voices) {\n\tclef.el_type = \"clef\";\n\tclef.startChar = -1;\n\tclef.endChar = -1;\n\tfor (var i = 0; i < voices.length; i++) {\n\t\tvoices[i].unshift(clef);\n\t}\n}\n\nfunction addFontToVoices(font, voices, type) {\n\tfont.el_type = \"font\";\n\tfont.type = type;\n\tfont.startChar = -1;\n\tfont.endChar = -1;\n\tfor (var i = 0; i < voices.length; i++) {\n\t\tvoices[i].unshift(font);\n\t}\n}\n\nfunction objEqual(input, output) {\n\tif (!input)\n\t\treturn true; // the default is whatever the old output is.\n\tvar inputValue = JSON.stringify(input, replacer);\n\tvar outputValue = JSON.stringify(output, replacer);\n\treturn inputValue === outputValue;\n}\n\nfunction cloneLine(line) {\n\tvar output = {};\n\tvar keys = Object.keys(line);\n\tfor (var i = 0; i < keys.length; i++) {\n\t\tif (keys[i] !== \"staff\")\n\t\t\toutput[keys[i]] = line[keys[i]];\n\t\telse {\n\t\t\toutput.staff = [];\n\t\t\tfor (var j = 0; j < line.staff.length; j++) {\n\t\t\t\tvar staff = {};\n\t\t\t\tvar keys2 = Object.keys(line.staff[j]);\n\t\t\t\tfor (var k = 0; k < keys2.length; k++) {\n\t\t\t\t\tif (keys2[k] !== \"voices\")\n\t\t\t\t\t\tstaff[keys2[k]] = line.staff[j][keys2[k]];\n\t\t\t\t\telse {\n\t\t\t\t\t\tstaff.voices = [];\n\t\t\t\t\t\tfor (var v = 0; v < line.staff[j].voices.length; v++) {\n\t\t\t\t\t\t\tstaff.voices.push([].concat(line.staff[j].voices[v]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\toutput.staff.push(staff)\n\t\t\t}\n\t\t}\n\t}\n\treturn output;\n}\n\nmodule.exports = delineTune;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL2RhdGEvZGVsaW5lLXR1bmUuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHVCQUF1QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDZCQUE2QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLCtCQUErQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsaUJBQWlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wscUJBQXFCLDZCQUE2QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixvQkFBb0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isc0JBQXNCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixpQkFBaUI7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsdUJBQXVCO0FBQzFDO0FBQ0E7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlDQUFpQztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy9kYXRhL2RlbGluZS10dW5lLmpzP2E3OTQiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gZGVsaW5lVHVuZShpbnB1dExpbmVzLCBvcHRpb25zKSB7XG5cdGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuXHR2YXIgbGluZUJyZWFrcyA9ICEhb3B0aW9ucy5saW5lQnJlYWtzO1xuXHR2YXIgb3V0cHV0TGluZXMgPSBbXTtcblx0dmFyIGluTXVzaWNMaW5lID0gZmFsc2U7XG5cdHZhciBjdXJyZW50TWV0ZXIgPSBbXTtcblx0dmFyIGN1cnJlbnRLZXkgPSBbXTtcblx0dmFyIGN1cnJlbnRDbGVmID0gW107XG5cdHZhciBjdXJyZW50Vm9jYWxGb250ID0gW107XG5cdHZhciBjdXJyZW50R0Nob3JkRm9udCA9IFtdO1xuXHR2YXIgY3VycmVudFRyaXBsZXRGb250ID0gW107XG5cdHZhciBjdXJyZW50QW5ub3RhdGlvbkZvbnQgPSBbXTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dExpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGlucHV0TGluZSA9IGlucHV0TGluZXNbaV07XG5cdFx0aWYgKGlucHV0TGluZS5zdGFmZikge1xuXHRcdFx0aWYgKGluTXVzaWNMaW5lICYmICFpbnB1dExpbmUudnNraXApIHtcblx0XHRcdFx0dmFyIG91dHB1dExpbmUgPSBvdXRwdXRMaW5lc1tvdXRwdXRMaW5lcy5sZW5ndGgtMV07XG5cdFx0XHRcdC8vZmluZE1pc21hdGNoS2V5cyhpbnB1dExpbmUsIG91dHB1dExpbmUsIFtcInN0YWZmXCIsIFwic3RhZmZHcm91cFwiXSwgXCJsaW5lXCIsIGkpXG5cdFx0XHRcdGZvciAodmFyIHMgPSAwOyBzIDwgb3V0cHV0TGluZS5zdGFmZi5sZW5ndGg7IHMrKykge1xuXHRcdFx0XHRcdHZhciBpbnB1dFN0YWZmID0gaW5wdXRMaW5lLnN0YWZmW3NdO1xuXHRcdFx0XHRcdHZhciBvdXRwdXRTdGFmZiA9IG91dHB1dExpbmUuc3RhZmZbc107XG5cdFx0XHRcdFx0aWYgKGlucHV0U3RhZmYpIHtcblx0XHRcdFx0XHRcdGlmICghb2JqRXF1YWwoaW5wdXRTdGFmZi5tZXRlciwgY3VycmVudE1ldGVyW3NdKSkge1xuXHRcdFx0XHRcdFx0XHQvLyBUaGUgbWV0ZXIgY2hhbmdlZCBmb3IgdGhpcyBsaW5lLCBvdGhlcndpc2UgaXQgd291bGRuJ3QgaGF2ZSBiZWVuIHNldFxuXHRcdFx0XHRcdFx0XHRhZGRNZXRlclRvVm9pY2VzKGlucHV0U3RhZmYubWV0ZXIsIGlucHV0U3RhZmYudm9pY2VzKVxuXHRcdFx0XHRcdFx0XHRjdXJyZW50TWV0ZXJbc10gPSBpbnB1dFN0YWZmLm1ldGVyO1xuXHRcdFx0XHRcdFx0XHRkZWxldGUgaW5wdXRTdGFmZi5tZXRlcjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICghb2JqRXF1YWwoaW5wdXRTdGFmZi5rZXksIGN1cnJlbnRLZXlbc10pKSB7XG5cdFx0XHRcdFx0XHRcdGFkZEtleVRvVm9pY2VzKGlucHV0U3RhZmYua2V5LCBpbnB1dFN0YWZmLnZvaWNlcyk7XG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRLZXlbc10gPSBpbnB1dFN0YWZmLmtleTtcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIGlucHV0U3RhZmYua2V5O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKGlucHV0U3RhZmYudGl0bGUpXG5cdFx0XHRcdFx0XHRcdG91dHB1dFN0YWZmLmFiYnJldlRpdGxlID0gaW5wdXRTdGFmZi50aXRsZTtcblx0XHRcdFx0XHRcdGlmICghb2JqRXF1YWwoaW5wdXRTdGFmZi5jbGVmLCBjdXJyZW50Q2xlZltzXSkpIHtcblx0XHRcdFx0XHRcdFx0YWRkQ2xlZlRvVm9pY2VzKGlucHV0U3RhZmYuY2xlZiwgaW5wdXRTdGFmZi52b2ljZXMpO1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50Q2xlZltzXSA9IGlucHV0U3RhZmYuY2xlZjtcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIGlucHV0U3RhZmYuY2xlZjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICghb2JqRXF1YWwoaW5wdXRTdGFmZi52b2NhbGZvbnQsIGN1cnJlbnRWb2NhbEZvbnRbc10pKSB7XG5cdFx0XHRcdFx0XHRcdGFkZEZvbnRUb1ZvaWNlcyhpbnB1dFN0YWZmLnZvY2FsZm9udCwgaW5wdXRTdGFmZi52b2ljZXMsICd2b2NhbGZvbnQnKVxuXHRcdFx0XHRcdFx0XHRjdXJyZW50Vm9jYWxGb250W3NdID0gaW5wdXRTdGFmZi52b2NhbGZvbnQ7XG5cdFx0XHRcdFx0XHRcdGRlbGV0ZSBpbnB1dFN0YWZmLnZvY2FsZm9udDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICghb2JqRXF1YWwoaW5wdXRTdGFmZi5nY2hvcmRmb250LCBjdXJyZW50R0Nob3JkRm9udFtzXSkpIHtcblx0XHRcdFx0XHRcdFx0YWRkRm9udFRvVm9pY2VzKGlucHV0U3RhZmYuZ2Nob3JkZm9udCwgaW5wdXRTdGFmZi52b2ljZXMsICdnY2hvcmRmb250Jylcblx0XHRcdFx0XHRcdFx0Y3VycmVudEdDaG9yZEZvbnRbc10gPSBpbnB1dFN0YWZmLmdjaG9yZGZvbnQ7XG5cdFx0XHRcdFx0XHRcdGRlbGV0ZSBpbnB1dFN0YWZmLmdjaG9yZGZvbnQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIW9iakVxdWFsKGlucHV0U3RhZmYudHJpcGxldGZvbnQsIGN1cnJlbnRUcmlwbGV0Rm9udFtzXSkpIHtcblx0XHRcdFx0XHRcdFx0YWRkRm9udFRvVm9pY2VzKGlucHV0U3RhZmYudHJpcGxldGZvbnQsIGlucHV0U3RhZmYudm9pY2VzLCAndHJpcGxldGZvbnQnKVxuXHRcdFx0XHRcdFx0XHRjdXJyZW50VHJpcGxldEZvbnRbc10gPSBpbnB1dFN0YWZmLnRyaXBsZXRmb250O1xuXHRcdFx0XHRcdFx0XHRkZWxldGUgaW5wdXRTdGFmZi50cmlwbGV0Zm9udDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICghb2JqRXF1YWwoaW5wdXRTdGFmZi5hbm5vdGF0aW9uZm9udCwgY3VycmVudEFubm90YXRpb25Gb250W3NdKSkge1xuXHRcdFx0XHRcdFx0XHRhZGRGb250VG9Wb2ljZXMoaW5wdXRTdGFmZi5hbm5vdGF0aW9uZm9udCwgaW5wdXRTdGFmZi52b2ljZXMsICdhbm5vdGF0aW9uZm9udCcpXG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRBbm5vdGF0aW9uRm9udFtzXSA9IGlucHV0U3RhZmYuYW5ub3RhdGlvbmZvbnQ7XG5cdFx0XHRcdFx0XHRcdGRlbGV0ZSBpbnB1dFN0YWZmLmFubm90YXRpb25mb250O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvL2ZpbmRNaXNtYXRjaEtleXMoaW5wdXRTdGFmZiwgb3V0cHV0U3RhZmYsIFtcInZvaWNlc1wiLCBcInRpdGxlXCIsIFwiYWJicmV2VGl0bGVcIiwgXCJiYXJOdW1iZXJcIiwgXCJtZXRlclwiLCBcImtleVwiLCBcImNsZWZcIiwgXCJ2b2NhbGZvbnRcIiwgXCJnY2hvcmRmb250XCIsIFwidHJpcGxldGZvbnRcIiwgXCJhbm5vdGF0aW9uZm9udFwiXSwgXCJzdGFmZlwiLCBpICsgJyAnICsgcylcblx0XHRcdFx0XHRpZiAoaW5wdXRTdGFmZikge1xuXHRcdFx0XHRcdFx0Zm9yICh2YXIgdiA9IDA7IHYgPCBvdXRwdXRTdGFmZi52b2ljZXMubGVuZ3RoOyB2KyspIHtcblx0XHRcdFx0XHRcdFx0dmFyIG91dHB1dFZvaWNlID0gb3V0cHV0U3RhZmYudm9pY2VzW3ZdO1xuXHRcdFx0XHRcdFx0XHR2YXIgaW5wdXRWb2ljZSA9IGlucHV0U3RhZmYudm9pY2VzW3ZdO1xuXHRcdFx0XHRcdFx0XHRpZiAobGluZUJyZWFrcylcblx0XHRcdFx0XHRcdFx0XHRvdXRwdXRWb2ljZS5wdXNoKHtlbF90eXBlOiBcImJyZWFrXCJ9KTtcblx0XHRcdFx0XHRcdFx0aWYgKGlucHV0Vm9pY2UpXG5cdFx0XHRcdFx0XHRcdFx0b3V0cHV0U3RhZmYudm9pY2VzW3ZdID0gb3V0cHV0Vm9pY2UuY29uY2F0KGlucHV0Vm9pY2UpXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKHZhciBpaSA9IDA7IGlpIDwgaW5wdXRMaW5lLnN0YWZmLmxlbmd0aDsgaWkrKykge1xuXHRcdFx0XHRcdGN1cnJlbnRLZXlbaWldID0gaW5wdXRMaW5lLnN0YWZmW2lpXS5rZXk7XG5cdFx0XHRcdFx0Y3VycmVudE1ldGVyW2lpXSA9IGlucHV0TGluZS5zdGFmZltpaV0ubWV0ZXI7XG5cdFx0XHRcdFx0Y3VycmVudENsZWZbaWldID0gaW5wdXRMaW5lLnN0YWZmW2lpXS5jbGVmO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIGNvcHkgdGhpcyBiZWNhdXNlIHdlIGFyZSBnb2luZyB0byBjaGFuZ2UgaXQgYW5kIHdlIGRvbid0IHdhbnQgdG8gY2hhbmdlIHRoZSBvcmlnaW5hbC5cblx0XHRcdFx0b3V0cHV0TGluZXMucHVzaChjbG9uZUxpbmUoaW5wdXRMaW5lKSk7XG5cdFx0XHR9XG5cdFx0XHRpbk11c2ljTGluZSA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGluTXVzaWNMaW5lID0gZmFsc2U7XG5cdFx0XHRvdXRwdXRMaW5lcy5wdXNoKGlucHV0TGluZSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBvdXRwdXRMaW5lcztcbn1cbi8vIGZ1bmN0aW9uIGZpbmRNaXNtYXRjaEtleXMoaW5wdXQsIG91dHB1dCwgaWdub3JlLCBjb250ZXh0LCBjb250ZXh0Mikge1xuLy8gXHRpZiAoIWlucHV0KSB7XG4vLyBcdFx0cmV0dXJuO1xuLy8gXHR9XG4vLyBcdHZhciBvdXRwdXRLZXlzID0gT2JqZWN0LmtleXMob3V0cHV0KTtcbi8vIFx0dmFyIGlucHV0S2V5cyA9IE9iamVjdC5rZXlzKGlucHV0KTtcbi8vIFx0Zm9yICh2YXIgaWkgPSAwOyBpaSA8IGlnbm9yZS5sZW5ndGg7IGlpKyspIHtcbi8vIFx0XHRpZiAob3V0cHV0S2V5cy5pbmRleE9mKGlnbm9yZVtpaV0pID49IDApIHtcbi8vIFx0XHRcdG91dHB1dEtleXMuc3BsaWNlKG91dHB1dEtleXMuaW5kZXhPZihpZ25vcmVbaWldKSwgMSk7XG4vLyBcdFx0fVxuLy8gXHRcdGlmIChpbnB1dEtleXMuaW5kZXhPZihpZ25vcmVbaWldKSA+PSAwKSB7XG4vLyBcdFx0XHRpbnB1dEtleXMuc3BsaWNlKGlucHV0S2V5cy5pbmRleE9mKGlnbm9yZVtpaV0pLCAxKTtcbi8vIFx0XHR9XG4vLyBcdH1cbi8vIFx0aWYgKGlucHV0S2V5cy5qb2luKFwiLFwiKSAhPT0gb3V0cHV0S2V5cy5qb2luKFwiLFwiKSkge1xuLy8gXHRcdGNvbnNvbGUubG9nKFwia2V5cyBtaXNtYXRjaCBcIitjb250ZXh0ICsgJyAnICsgY29udGV4dDIsIGlucHV0LCBvdXRwdXQpO1xuLy8gXHR9XG4vLyBcdGZvciAodmFyIGsgPSAwOyBrIDwgaW5wdXRLZXlzLmxlbmd0aDsgaysrKSB7XG4vLyBcdFx0dmFyIGtleSA9IGlucHV0S2V5c1trXTtcbi8vIFx0XHRpZiAoaWdub3JlLmluZGV4T2Yoa2V5KSA8IDApIHtcbi8vIFx0XHRcdHZhciBpbnB1dFZhbHVlID0gSlNPTi5zdHJpbmdpZnkoaW5wdXRba2V5XSwgcmVwbGFjZXIpO1xuLy8gXHRcdFx0dmFyIG91dHB1dFZhbHVlID0gSlNPTi5zdHJpbmdpZnkob3V0cHV0W2tleV0sIHJlcGxhY2VyKTtcbi8vIFx0XHRcdGlmIChpbnB1dFZhbHVlICE9PSBvdXRwdXRWYWx1ZSlcbi8vIFx0XHRcdFx0Y29uc29sZS5sb2coXCJ2YWx1ZSBtaXNtYXRjaCBcIitjb250ZXh0ICsgJyAnICsgY29udGV4dDIgKyAnICcgKyBrZXksIGlucHV0VmFsdWUsIG91dHB1dFZhbHVlKVxuLy8gXHRcdH1cbi8vIFx0fVxuLy8gfVxuZnVuY3Rpb24gcmVwbGFjZXIoa2V5LCB2YWx1ZSkge1xuXHQvLyBGaWx0ZXJpbmcgb3V0IHByb3BlcnRpZXNcblx0aWYgKGtleSA9PT0gJ2Fic2VsZW0nKSB7XG5cdFx0cmV0dXJuICdhYnNlbGVtJztcblx0fVxuXHRyZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGFkZE1ldGVyVG9Wb2ljZXMobWV0ZXIsIHZvaWNlcykge1xuXHRtZXRlci5lbF90eXBlID0gXCJtZXRlclwiO1xuXHRtZXRlci5zdGFydENoYXIgPSAtMTtcblx0bWV0ZXIuZW5kQ2hhciA9IC0xO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHZvaWNlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZvaWNlc1tpXS51bnNoaWZ0KG1ldGVyKTtcblx0fVxufVxuXG5mdW5jdGlvbiBhZGRLZXlUb1ZvaWNlcyhrZXksIHZvaWNlcykge1xuXHRrZXkuZWxfdHlwZSA9IFwia2V5XCI7XG5cdGtleS5zdGFydENoYXIgPSAtMTtcblx0a2V5LmVuZENoYXIgPSAtMTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCB2b2ljZXMubGVuZ3RoOyBpKyspIHtcblx0XHR2b2ljZXNbaV0udW5zaGlmdChrZXkpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGFkZENsZWZUb1ZvaWNlcyhjbGVmLCB2b2ljZXMpIHtcblx0Y2xlZi5lbF90eXBlID0gXCJjbGVmXCI7XG5cdGNsZWYuc3RhcnRDaGFyID0gLTE7XG5cdGNsZWYuZW5kQ2hhciA9IC0xO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHZvaWNlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZvaWNlc1tpXS51bnNoaWZ0KGNsZWYpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGFkZEZvbnRUb1ZvaWNlcyhmb250LCB2b2ljZXMsIHR5cGUpIHtcblx0Zm9udC5lbF90eXBlID0gXCJmb250XCI7XG5cdGZvbnQudHlwZSA9IHR5cGU7XG5cdGZvbnQuc3RhcnRDaGFyID0gLTE7XG5cdGZvbnQuZW5kQ2hhciA9IC0xO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHZvaWNlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZvaWNlc1tpXS51bnNoaWZ0KGZvbnQpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIG9iakVxdWFsKGlucHV0LCBvdXRwdXQpIHtcblx0aWYgKCFpbnB1dClcblx0XHRyZXR1cm4gdHJ1ZTsgLy8gdGhlIGRlZmF1bHQgaXMgd2hhdGV2ZXIgdGhlIG9sZCBvdXRwdXQgaXMuXG5cdHZhciBpbnB1dFZhbHVlID0gSlNPTi5zdHJpbmdpZnkoaW5wdXQsIHJlcGxhY2VyKTtcblx0dmFyIG91dHB1dFZhbHVlID0gSlNPTi5zdHJpbmdpZnkob3V0cHV0LCByZXBsYWNlcik7XG5cdHJldHVybiBpbnB1dFZhbHVlID09PSBvdXRwdXRWYWx1ZTtcbn1cblxuZnVuY3Rpb24gY2xvbmVMaW5lKGxpbmUpIHtcblx0dmFyIG91dHB1dCA9IHt9O1xuXHR2YXIga2V5cyA9IE9iamVjdC5rZXlzKGxpbmUpO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcblx0XHRpZiAoa2V5c1tpXSAhPT0gXCJzdGFmZlwiKVxuXHRcdFx0b3V0cHV0W2tleXNbaV1dID0gbGluZVtrZXlzW2ldXTtcblx0XHRlbHNlIHtcblx0XHRcdG91dHB1dC5zdGFmZiA9IFtdO1xuXHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBsaW5lLnN0YWZmLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHZhciBzdGFmZiA9IHt9O1xuXHRcdFx0XHR2YXIga2V5czIgPSBPYmplY3Qua2V5cyhsaW5lLnN0YWZmW2pdKTtcblx0XHRcdFx0Zm9yICh2YXIgayA9IDA7IGsgPCBrZXlzMi5sZW5ndGg7IGsrKykge1xuXHRcdFx0XHRcdGlmIChrZXlzMltrXSAhPT0gXCJ2b2ljZXNcIilcblx0XHRcdFx0XHRcdHN0YWZmW2tleXMyW2tdXSA9IGxpbmUuc3RhZmZbal1ba2V5czJba11dO1xuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0c3RhZmYudm9pY2VzID0gW107XG5cdFx0XHRcdFx0XHRmb3IgKHZhciB2ID0gMDsgdiA8IGxpbmUuc3RhZmZbal0udm9pY2VzLmxlbmd0aDsgdisrKSB7XG5cdFx0XHRcdFx0XHRcdHN0YWZmLnZvaWNlcy5wdXNoKFtdLmNvbmNhdChsaW5lLnN0YWZmW2pdLnZvaWNlc1t2XSkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRvdXRwdXQuc3RhZmYucHVzaChzdGFmZilcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIG91dHB1dDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkZWxpbmVUdW5lO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/data/deline-tune.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/edit/abc_editarea.js":
/*!*****************************************************!*\
  !*** ./node_modules/abcjs/src/edit/abc_editarea.js ***!
  \*****************************************************/
/***/ ((module) => {

eval("// abc_editor.js\n\n// window.ABCJS.Editor is the interface class for the area that contains the ABC text. It is responsible for\n// holding the text of the tune and calling the parser and the rendering engines.\n//\n// EditArea is an example of using a textarea as the control that is shown to the user. As long as\n// the same interface is used, window.ABCJS.Editor can use a different type of object.\n//\n// EditArea:\n// - constructor(textareaid)\n//\t\tThis contains the id of a textarea control that will be used.\n// - addSelectionListener(listener)\n//\t\tA callback class that contains the entry point fireSelectionChanged()\n// - addChangeListener(listener)\n//\t\tA callback class that contains the entry point fireChanged()\n// - getSelection()\n//\t\treturns the object { start: , end: } with the current selection in characters\n// - setSelection(start, end)\n//\t\tstart and end are the character positions that should be selected.\n// - getString()\n//\t\treturns the ABC text that is currently displayed.\n// - setString(str)\n//\t\tsets the ABC text that is currently displayed, and resets the initialText variable\n// - getElem()\n//\t\treturns the textarea element\n// - string initialText\n//\t\tContains the starting text. This can be compared against the current text to see if anything changed.\n//\n\n// Polyfill for CustomEvent for old IE versions\ntry {\n\tif (typeof window.CustomEvent !== \"function\") {\n\t\tvar CustomEvent = function (event, params) {\n\t\t\tparams = params || {bubbles: false, cancelable: false, detail: undefined};\n\t\t\tvar evt = document.createEvent('CustomEvent');\n\t\t\tevt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n\t\t\treturn evt;\n\t\t};\n\t\tCustomEvent.prototype = window.Event.prototype;\n\t\twindow.CustomEvent = CustomEvent;\n\t}\n} catch (e) {\n\t// if we aren't in a browser, this code will crash, but it is not needed then either.\n}\n\nvar EditArea = function (textareaid) {\n\tthis.isEditArea = true\n\tif (typeof textareaid === \"string\") {\n\t\tthis.textarea = document.getElementById(textareaid);\n\t\tif (!this.textarea)\n\t\t\tthis.textarea = document.querySelector(textareaid)\n\t} else\n\t\tthis.textarea = textareaid;\n\tthis.initialText = this.textarea.value;\n\tthis.isDragging = false;\n}\n\nEditArea.prototype.addSelectionListener = function (listener) {\n\tthis.textarea.onmousemove = function (ev) {\n\t\tif (this.isDragging)\n\t\t\tlistener.fireSelectionChanged();\n\t};\n};\n\nEditArea.prototype.addChangeListener = function (listener) {\n\tthis.changelistener = listener;\n\tthis.textarea.onkeyup = function () {\n\t\tlistener.fireChanged();\n\t};\n\tthis.textarea.onmousedown = function () {\n\t\tthis.isDragging = true;\n\t\tlistener.fireSelectionChanged();\n\t};\n\tthis.textarea.onmouseup = function () {\n\t\tthis.isDragging = false;\n\t\tlistener.fireChanged();\n\t};\n\tthis.textarea.onchange = function () {\n\t\tlistener.fireChanged();\n\t};\n};\n\n//TODO won't work under IE?\nEditArea.prototype.getSelection = function () {\n\treturn {start: this.textarea.selectionStart, end: this.textarea.selectionEnd};\n};\n\nEditArea.prototype.setSelection = function (start, end) {\n\tif (this.textarea.setSelectionRange)\n\t\tthis.textarea.setSelectionRange(start, end);\n\telse if (this.textarea.createTextRange) {\n\t\t// For IE8\n\t\tvar e = this.textarea.createTextRange();\n\t\te.collapse(true);\n\t\te.moveEnd('character', end);\n\t\te.moveStart('character', start);\n\t\te.select();\n\t}\n\tthis.textarea.focus();\n};\n\nEditArea.prototype.getString = function () {\n\treturn this.textarea.value;\n};\n\nEditArea.prototype.setString = function (str) {\n\tthis.textarea.value = str;\n\tthis.initialText = this.getString();\n\tif (this.changelistener) {\n\t\tthis.changelistener.fireChanged();\n\t}\n};\n\nEditArea.prototype.getElem = function () {\n\treturn this.textarea;\n};\n\nmodule.exports = EditArea;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL2VkaXQvYWJjX2VkaXRhcmVhLmpzIiwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsZ0JBQWdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL2VkaXQvYWJjX2VkaXRhcmVhLmpzPzJhNzgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gYWJjX2VkaXRvci5qc1xuXG4vLyB3aW5kb3cuQUJDSlMuRWRpdG9yIGlzIHRoZSBpbnRlcmZhY2UgY2xhc3MgZm9yIHRoZSBhcmVhIHRoYXQgY29udGFpbnMgdGhlIEFCQyB0ZXh0LiBJdCBpcyByZXNwb25zaWJsZSBmb3Jcbi8vIGhvbGRpbmcgdGhlIHRleHQgb2YgdGhlIHR1bmUgYW5kIGNhbGxpbmcgdGhlIHBhcnNlciBhbmQgdGhlIHJlbmRlcmluZyBlbmdpbmVzLlxuLy9cbi8vIEVkaXRBcmVhIGlzIGFuIGV4YW1wbGUgb2YgdXNpbmcgYSB0ZXh0YXJlYSBhcyB0aGUgY29udHJvbCB0aGF0IGlzIHNob3duIHRvIHRoZSB1c2VyLiBBcyBsb25nIGFzXG4vLyB0aGUgc2FtZSBpbnRlcmZhY2UgaXMgdXNlZCwgd2luZG93LkFCQ0pTLkVkaXRvciBjYW4gdXNlIGEgZGlmZmVyZW50IHR5cGUgb2Ygb2JqZWN0LlxuLy9cbi8vIEVkaXRBcmVhOlxuLy8gLSBjb25zdHJ1Y3Rvcih0ZXh0YXJlYWlkKVxuLy9cdFx0VGhpcyBjb250YWlucyB0aGUgaWQgb2YgYSB0ZXh0YXJlYSBjb250cm9sIHRoYXQgd2lsbCBiZSB1c2VkLlxuLy8gLSBhZGRTZWxlY3Rpb25MaXN0ZW5lcihsaXN0ZW5lcilcbi8vXHRcdEEgY2FsbGJhY2sgY2xhc3MgdGhhdCBjb250YWlucyB0aGUgZW50cnkgcG9pbnQgZmlyZVNlbGVjdGlvbkNoYW5nZWQoKVxuLy8gLSBhZGRDaGFuZ2VMaXN0ZW5lcihsaXN0ZW5lcilcbi8vXHRcdEEgY2FsbGJhY2sgY2xhc3MgdGhhdCBjb250YWlucyB0aGUgZW50cnkgcG9pbnQgZmlyZUNoYW5nZWQoKVxuLy8gLSBnZXRTZWxlY3Rpb24oKVxuLy9cdFx0cmV0dXJucyB0aGUgb2JqZWN0IHsgc3RhcnQ6ICwgZW5kOiB9IHdpdGggdGhlIGN1cnJlbnQgc2VsZWN0aW9uIGluIGNoYXJhY3RlcnNcbi8vIC0gc2V0U2VsZWN0aW9uKHN0YXJ0LCBlbmQpXG4vL1x0XHRzdGFydCBhbmQgZW5kIGFyZSB0aGUgY2hhcmFjdGVyIHBvc2l0aW9ucyB0aGF0IHNob3VsZCBiZSBzZWxlY3RlZC5cbi8vIC0gZ2V0U3RyaW5nKClcbi8vXHRcdHJldHVybnMgdGhlIEFCQyB0ZXh0IHRoYXQgaXMgY3VycmVudGx5IGRpc3BsYXllZC5cbi8vIC0gc2V0U3RyaW5nKHN0cilcbi8vXHRcdHNldHMgdGhlIEFCQyB0ZXh0IHRoYXQgaXMgY3VycmVudGx5IGRpc3BsYXllZCwgYW5kIHJlc2V0cyB0aGUgaW5pdGlhbFRleHQgdmFyaWFibGVcbi8vIC0gZ2V0RWxlbSgpXG4vL1x0XHRyZXR1cm5zIHRoZSB0ZXh0YXJlYSBlbGVtZW50XG4vLyAtIHN0cmluZyBpbml0aWFsVGV4dFxuLy9cdFx0Q29udGFpbnMgdGhlIHN0YXJ0aW5nIHRleHQuIFRoaXMgY2FuIGJlIGNvbXBhcmVkIGFnYWluc3QgdGhlIGN1cnJlbnQgdGV4dCB0byBzZWUgaWYgYW55dGhpbmcgY2hhbmdlZC5cbi8vXG5cbi8vIFBvbHlmaWxsIGZvciBDdXN0b21FdmVudCBmb3Igb2xkIElFIHZlcnNpb25zXG50cnkge1xuXHRpZiAodHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCAhPT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0dmFyIEN1c3RvbUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50LCBwYXJhbXMpIHtcblx0XHRcdHBhcmFtcyA9IHBhcmFtcyB8fCB7YnViYmxlczogZmFsc2UsIGNhbmNlbGFibGU6IGZhbHNlLCBkZXRhaWw6IHVuZGVmaW5lZH07XG5cdFx0XHR2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG5cdFx0XHRldnQuaW5pdEN1c3RvbUV2ZW50KGV2ZW50LCBwYXJhbXMuYnViYmxlcywgcGFyYW1zLmNhbmNlbGFibGUsIHBhcmFtcy5kZXRhaWwpO1xuXHRcdFx0cmV0dXJuIGV2dDtcblx0XHR9O1xuXHRcdEN1c3RvbUV2ZW50LnByb3RvdHlwZSA9IHdpbmRvdy5FdmVudC5wcm90b3R5cGU7XG5cdFx0d2luZG93LkN1c3RvbUV2ZW50ID0gQ3VzdG9tRXZlbnQ7XG5cdH1cbn0gY2F0Y2ggKGUpIHtcblx0Ly8gaWYgd2UgYXJlbid0IGluIGEgYnJvd3NlciwgdGhpcyBjb2RlIHdpbGwgY3Jhc2gsIGJ1dCBpdCBpcyBub3QgbmVlZGVkIHRoZW4gZWl0aGVyLlxufVxuXG52YXIgRWRpdEFyZWEgPSBmdW5jdGlvbiAodGV4dGFyZWFpZCkge1xuXHR0aGlzLmlzRWRpdEFyZWEgPSB0cnVlXG5cdGlmICh0eXBlb2YgdGV4dGFyZWFpZCA9PT0gXCJzdHJpbmdcIikge1xuXHRcdHRoaXMudGV4dGFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0ZXh0YXJlYWlkKTtcblx0XHRpZiAoIXRoaXMudGV4dGFyZWEpXG5cdFx0XHR0aGlzLnRleHRhcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0ZXh0YXJlYWlkKVxuXHR9IGVsc2Vcblx0XHR0aGlzLnRleHRhcmVhID0gdGV4dGFyZWFpZDtcblx0dGhpcy5pbml0aWFsVGV4dCA9IHRoaXMudGV4dGFyZWEudmFsdWU7XG5cdHRoaXMuaXNEcmFnZ2luZyA9IGZhbHNlO1xufVxuXG5FZGl0QXJlYS5wcm90b3R5cGUuYWRkU2VsZWN0aW9uTGlzdGVuZXIgPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcblx0dGhpcy50ZXh0YXJlYS5vbm1vdXNlbW92ZSA9IGZ1bmN0aW9uIChldikge1xuXHRcdGlmICh0aGlzLmlzRHJhZ2dpbmcpXG5cdFx0XHRsaXN0ZW5lci5maXJlU2VsZWN0aW9uQ2hhbmdlZCgpO1xuXHR9O1xufTtcblxuRWRpdEFyZWEucHJvdG90eXBlLmFkZENoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG5cdHRoaXMuY2hhbmdlbGlzdGVuZXIgPSBsaXN0ZW5lcjtcblx0dGhpcy50ZXh0YXJlYS5vbmtleXVwID0gZnVuY3Rpb24gKCkge1xuXHRcdGxpc3RlbmVyLmZpcmVDaGFuZ2VkKCk7XG5cdH07XG5cdHRoaXMudGV4dGFyZWEub25tb3VzZWRvd24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0dGhpcy5pc0RyYWdnaW5nID0gdHJ1ZTtcblx0XHRsaXN0ZW5lci5maXJlU2VsZWN0aW9uQ2hhbmdlZCgpO1xuXHR9O1xuXHR0aGlzLnRleHRhcmVhLm9ubW91c2V1cCA9IGZ1bmN0aW9uICgpIHtcblx0XHR0aGlzLmlzRHJhZ2dpbmcgPSBmYWxzZTtcblx0XHRsaXN0ZW5lci5maXJlQ2hhbmdlZCgpO1xuXHR9O1xuXHR0aGlzLnRleHRhcmVhLm9uY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHRcdGxpc3RlbmVyLmZpcmVDaGFuZ2VkKCk7XG5cdH07XG59O1xuXG4vL1RPRE8gd29uJ3Qgd29yayB1bmRlciBJRT9cbkVkaXRBcmVhLnByb3RvdHlwZS5nZXRTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG5cdHJldHVybiB7c3RhcnQ6IHRoaXMudGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQsIGVuZDogdGhpcy50ZXh0YXJlYS5zZWxlY3Rpb25FbmR9O1xufTtcblxuRWRpdEFyZWEucHJvdG90eXBlLnNldFNlbGVjdGlvbiA9IGZ1bmN0aW9uIChzdGFydCwgZW5kKSB7XG5cdGlmICh0aGlzLnRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKVxuXHRcdHRoaXMudGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2Uoc3RhcnQsIGVuZCk7XG5cdGVsc2UgaWYgKHRoaXMudGV4dGFyZWEuY3JlYXRlVGV4dFJhbmdlKSB7XG5cdFx0Ly8gRm9yIElFOFxuXHRcdHZhciBlID0gdGhpcy50ZXh0YXJlYS5jcmVhdGVUZXh0UmFuZ2UoKTtcblx0XHRlLmNvbGxhcHNlKHRydWUpO1xuXHRcdGUubW92ZUVuZCgnY2hhcmFjdGVyJywgZW5kKTtcblx0XHRlLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgc3RhcnQpO1xuXHRcdGUuc2VsZWN0KCk7XG5cdH1cblx0dGhpcy50ZXh0YXJlYS5mb2N1cygpO1xufTtcblxuRWRpdEFyZWEucHJvdG90eXBlLmdldFN0cmluZyA9IGZ1bmN0aW9uICgpIHtcblx0cmV0dXJuIHRoaXMudGV4dGFyZWEudmFsdWU7XG59O1xuXG5FZGl0QXJlYS5wcm90b3R5cGUuc2V0U3RyaW5nID0gZnVuY3Rpb24gKHN0cikge1xuXHR0aGlzLnRleHRhcmVhLnZhbHVlID0gc3RyO1xuXHR0aGlzLmluaXRpYWxUZXh0ID0gdGhpcy5nZXRTdHJpbmcoKTtcblx0aWYgKHRoaXMuY2hhbmdlbGlzdGVuZXIpIHtcblx0XHR0aGlzLmNoYW5nZWxpc3RlbmVyLmZpcmVDaGFuZ2VkKCk7XG5cdH1cbn07XG5cbkVkaXRBcmVhLnByb3RvdHlwZS5nZXRFbGVtID0gZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gdGhpcy50ZXh0YXJlYTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRWRpdEFyZWE7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/edit/abc_editarea.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/edit/abc_editor.js":
/*!***************************************************!*\
  !*** ./node_modules/abcjs/src/edit/abc_editor.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// window.ABCJS.Editor:\n//\n// constructor(editarea, params)\n//\t\tif editarea is a string, then it is an HTML id of a textarea control.\n//\t\tOtherwise, it should be an instantiation of an object that expresses the EditArea interface.\n//\n//\t\tparams is a hash of:\n//\t\tcanvas_id: or paper_id: HTML id to draw in. If not present, then the drawing happens just below the editor.\n//\t\tgenerate_midi: if present, then midi is generated.\n//\t\tmidi_id: if present, the HTML id to place the midi control. Otherwise it is placed in the same div as the paper.\n//\t\tmidi_download_id: if present, the HTML id to place the midi download link. Otherwise it is placed in the same div as the paper.\n//\t\tgenerate_warnings: if present, then parser warnings are displayed on the page.\n//\t\twarnings_id: if present, the HTML id to place the warnings. Otherwise they are placed in the same div as the paper.\n//\t\tonchange: if present, the callback function to call whenever there has been a change.\n//\t\tgui: if present, the paper can send changes back to the editor (presumably because the user changed something directly.)\n//\t\tparser_options: options to send to the parser engine.\n//\t\tmidi_options: options to send to the midi engine.\n//\t\trender_options: options to send to the render engine.\n//\t\tindicate_changed: the dirty flag is set if this is true.\n//\n// - setReadOnly(bool)\n//\t\tadds or removes the class abc_textarea_readonly, and adds or removes the attribute readonly=yes\n// - setDirtyStyle(bool)\n//\t\tadds or removes the class abc_textarea_dirty\n// - modelChanged()\n//\t\tCalled when the model has been changed to trigger re-rendering\n// - parseABC()\n//\t\tCalled internally by fireChanged()\n//\t\treturns true if there has been a change since last call.\n// - updateSelection()\n//\t\tCalled when the user has changed the selection. This calls the engraver to show the selection.\n// - fireSelectionChanged()\n//\t\tCalled by the textarea object when the user has changed the selection.\n// - paramChanged(engraverparams)\n//\t\tCalled to signal that the engraver params have changed, so re-rendering should occur.\n// - fireChanged()\n//\t\tCalled by the textarea object when the user has changed something.\n// - setNotDirty()\n//\t\tCalled by the client app to reset the dirty flag\n// - isDirty()\n//\t\tReturns true or false, whether the textarea contains the same text that it started with.\n// - highlight(abcelem)\n//\t\tCalled by the engraver to highlight an area.\n// - pause(bool)\n//\t\tStops the automatic rendering when the user is typing.\n//\nvar parseCommon = __webpack_require__(/*! ../parse/abc_common */ \"(ssr)/./node_modules/abcjs/src/parse/abc_common.js\");\nvar SynthController = __webpack_require__(/*! ../synth/synth-controller */ \"(ssr)/./node_modules/abcjs/src/synth/synth-controller.js\");\nvar supportsAudio = __webpack_require__(/*! ../synth/supports-audio */ \"(ssr)/./node_modules/abcjs/src/synth/supports-audio.js\");\nvar renderAbc = __webpack_require__(/*! ../api/abc_tunebook_svg */ \"(ssr)/./node_modules/abcjs/src/api/abc_tunebook_svg.js\");\nvar EditArea = __webpack_require__(/*! ./abc_editarea */ \"(ssr)/./node_modules/abcjs/src/edit/abc_editarea.js\");\n\nfunction gatherAbcParams(params) {\n\t// There used to be a bunch of ways parameters can be passed in. This just simplifies it.\n\tvar abcjsParams = {};\n\tvar key;\n\tif (params.abcjsParams) {\n\t\tfor (key in params.abcjsParams) {\n\t\t\tif (params.abcjsParams.hasOwnProperty(key)) {\n\t\t\t\tabcjsParams[key] = params.abcjsParams[key];\n\t\t\t}\n\t\t}\n\t}\n\tif (params.midi_options) {\n\t\tfor (key in params.midi_options) {\n\t\t\tif (params.midi_options.hasOwnProperty(key)) {\n\t\t\t\tabcjsParams[key] = params.midi_options[key];\n\t\t\t}\n\t\t}\n\t}\n\tif (params.parser_options) {\n\t\tfor (key in params.parser_options) {\n\t\t\tif (params.parser_options.hasOwnProperty(key)) {\n\t\t\t\tabcjsParams[key] = params.parser_options[key];\n\t\t\t}\n\t\t}\n\t}\n\tif (params.render_options) {\n\t\tfor (key in params.render_options) {\n\t\t\tif (params.render_options.hasOwnProperty(key)) {\n\t\t\t\tabcjsParams[key] = params.render_options[key];\n\t\t\t}\n\t\t}\n\t}\n\t/*\n\tif (params.tablature_options) {\n\t\tabcjsParams['tablatures'] = params.tablature_options;\n\t}\n\t*/\n\tif (abcjsParams.tablature) {\n\t\tif (params.warnings_id) {\n\t\t\t// store for plugin error handling\n\t\t\tabcjsParams.tablature.warnings_id = params.warnings_id;\n\t\t}\n\t}\n\treturn abcjsParams;\n}\n\nvar Editor = function (editarea, params) {\n\t// Copy all the options that will be passed through\n\tthis.abcjsParams = gatherAbcParams(params);\n\n\tif (params.indicate_changed)\n\t\tthis.indicate_changed = true;\n\n\t// If a string is passed in then it could either be an element's ID or a selector\n\t// If an object is passed in then it could either be an EditArea or a textarea.\n\tif (typeof editarea === \"string\") {\n\t\t// EditArea handles both the ID and the selector\n\t\tthis.editarea = new EditArea(editarea);\n\t} else {\n\t\t// If an edit area was passed in, just use it\n\t\tif (editarea.isEditArea)\n\t\t\tthis.editarea = editarea;\n\t\telse\n\t\t\t// Hopefully we were passed in a textarea or equivalent.\n\t\t\tthis.editarea = new EditArea(editarea)\n\t}\n\tthis.editarea.addSelectionListener(this);\n\tthis.editarea.addChangeListener(this);\n\n\tif (params.canvas_id) {\n\t\tthis.div = params.canvas_id;\n\t} else if (params.paper_id) {\n\t\tthis.div = params.paper_id;\n\t} else {\n\t\tthis.div = document.createElement(\"DIV\");\n\t\tthis.editarea.getElem().parentNode.insertBefore(this.div, this.editarea.getElem());\n\t}\n\tif (typeof this.div === 'string')\n\t\tthis.div = document.getElementById(this.div);\n\n\tif (params.selectionChangeCallback) {\n\t\tthis.selectionChangeCallback = params.selectionChangeCallback;\n\t}\n\n\tthis.clientClickListener = this.abcjsParams.clickListener;\n\tthis.abcjsParams.clickListener = this.highlight.bind(this);\n\n\tif (params.synth) {\n\t\tif (supportsAudio()) {\n\t\t\tthis.synth = {\n\t\t\t\tel: params.synth.el,\n\t\t\t\tcursorControl: params.synth.cursorControl,\n\t\t\t\toptions: params.synth.options\n\t\t\t};\n\t\t}\n\t}\n\t// If the user wants midi, then store the elements that it will be written to. The element could either be passed in as an id,\n\t// an element, or nothing. If nothing is passed in, then just put the midi on top of the generated music.\n\tif (params.generate_midi) {\n\t\tthis.generate_midi = params.generate_midi;\n\t\tif (this.abcjsParams.generateDownload) {\n\t\t\tif (typeof params.midi_download_id === 'string')\n\t\t\t\tthis.downloadMidi = document.getElementById(params.midi_download_id);\n\t\t\telse if (params.midi_download_id) // assume, if the var is not a string it is an element. If not, it will crash soon enough.\n\t\t\t\tthis.downloadMidi = params.midi_download_id;\n\t\t}\n\t\tif (this.abcjsParams.generateInline !== false) { // The default for this is true, so undefined is also true.\n\t\t\tif (typeof params.midi_id === 'string')\n\t\t\t\tthis.inlineMidi = document.getElementById(params.midi_id);\n\t\t\telse if (params.midi_id) // assume, if the var is not a string it is an element. If not, it will crash soon enough.\n\t\t\t\tthis.inlineMidi = params.midi_id;\n\t\t}\n\t}\n\n\tif (params.warnings_id) {\n\t\tif (typeof (params.warnings_id) === \"string\")\n\t\t\tthis.warningsdiv = document.getElementById(params.warnings_id);\n\t\telse\n\t\t\tthis.warningsdiv = params.warnings_id;\n\t} else if (params.generate_warnings) {\n\t\tthis.warningsdiv = document.createElement(\"div\");\n\t\tthis.div.parentNode.insertBefore(this.warningsdiv, this.div);\n\t}\n\n\tthis.onchangeCallback = params.onchange;\n\tthis.redrawCallback = params.redrawCallback;\n\n\tthis.currentAbc = \"\";\n\tthis.tunes = [];\n\tthis.bReentry = false;\n\tthis.parseABC();\n\tthis.modelChanged();\n\n\tthis.addClassName = function (element, className) {\n\t\tvar hasClassName = function (element, className) {\n\t\t\tvar elementClassName = element.className;\n\t\t\treturn (elementClassName.length > 0 && (elementClassName === className ||\n\t\t\t\tnew RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\").test(elementClassName)));\n\t\t};\n\n\t\tif (!hasClassName(element, className))\n\t\t\telement.className += (element.className ? ' ' : '') + className;\n\t\treturn element;\n\t};\n\n\tthis.removeClassName = function (element, className) {\n\t\telement.className = parseCommon.strip(element.className.replace(\n\t\t\tnew RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\"), ' '));\n\t\treturn element;\n\t};\n\n\tthis.setReadOnly = function (readOnly) {\n\t\tvar readonlyClass = 'abc_textarea_readonly';\n\t\tvar el = this.editarea.getElem();\n\t\tif (readOnly) {\n\t\t\tel.setAttribute('readonly', 'yes');\n\t\t\tthis.addClassName(el, readonlyClass);\n\t\t} else {\n\t\t\tel.removeAttribute('readonly');\n\t\t\tthis.removeClassName(el, readonlyClass);\n\t\t}\n\t};\n};\n\nEditor.prototype.redrawMidi = function () {\n\tif (this.generate_midi && !this.midiPause) {\n\t\tvar event = new window.CustomEvent(\"generateMidi\", {\n\t\t\tdetail: {\n\t\t\t\ttunes: this.tunes,\n\t\t\t\tabcjsParams: this.abcjsParams,\n\t\t\t\tdownloadMidiEl: this.downloadMidi,\n\t\t\t\tinlineMidiEl: this.inlineMidi,\n\t\t\t\tengravingEl: this.div\n\t\t\t}\n\t\t});\n\t\twindow.dispatchEvent(event);\n\t}\n\tif (this.synth) {\n\t\tvar userAction = this.synth.synthControl; // Can't really tell if there was a user action before drawing, but we assume that if the synthControl was created already there was a user action.\n\t\tif (!this.synth.synthControl) {\n\t\t\tthis.synth.synthControl = new SynthController();\n\t\t\tthis.synth.synthControl.load(this.synth.el, this.synth.cursorControl, this.synth.options);\n\t\t}\n\t\tthis.synth.synthControl.setTune(this.tunes[0], userAction, this.synth.options);\n\t}\n};\n\nEditor.prototype.modelChanged = function () {\n\tif (this.bReentry)\n\t\treturn; // TODO is this likely? maybe, if we rewrite abc immediately w/ abc2abc\n\tthis.bReentry = true;\n\ttry {\n\t\tthis.timerId = null;\n\t\tif (this.redrawCallback)\n\t\t\tthis.redrawCallback(true)\n\t\tif (this.synth && this.synth.synthControl)\n\t\t\tthis.synth.synthControl.disable(true);\n\n\t\tthis.tunes = renderAbc(this.div, this.currentAbc, this.abcjsParams);\n\t\tif (this.tunes.length > 0) {\n\t\t\tthis.warnings = this.tunes[0].warnings;\n\t\t}\n\t\tthis.redrawMidi();\n\t\tif (this.redrawCallback)\n\t\t\tthis.redrawCallback(false)\n\t} catch (error) {\n\t\tconsole.error(\"ABCJS error: \", error);\n\t\tif (!this.warnings)\n\t\t\tthis.warnings = [];\n\t\tthis.warnings.push(error.message);\n\t}\n\n\tif (this.warningsdiv) {\n\t\tthis.warningsdiv.innerHTML = (this.warnings) ? this.warnings.join(\"<br />\") : \"No errors\";\n\t}\n\tthis.updateSelection();\n\tthis.bReentry = false;\n};\n\n// Call this to reparse in response to the client changing the parameters on the fly\nEditor.prototype.paramChanged = function (engraverParams) {\n\tif (engraverParams) {\n\t\tfor (var key in engraverParams) {\n\t\t\tif (engraverParams.hasOwnProperty(key)) {\n\t\t\t\tthis.abcjsParams[key] = engraverParams[key];\n\t\t\t}\n\t\t}\n\t}\n\tthis.currentAbc = \"\";\n\tthis.fireChanged();\n};\n\nEditor.prototype.getTunes = function () {\n\treturn this.tunes\n};\n\nEditor.prototype.synthParamChanged = function (options) {\n\tif (!this.synth)\n\t\treturn;\n\tthis.synth.options = {};\n\tif (options) {\n\t\tfor (var key in options) {\n\t\t\tif (options.hasOwnProperty(key)) {\n\t\t\t\tthis.synth.options[key] = options[key];\n\t\t\t}\n\t\t}\n\t}\n\tthis.currentAbc = \"\";\n\tthis.fireChanged();\n};\n\n// return true if the model has changed\nEditor.prototype.parseABC = function () {\n\tvar t = this.editarea.getString();\n\tif (t === this.currentAbc) {\n\t\tthis.updateSelection();\n\t\treturn false;\n\t}\n\n\tthis.currentAbc = t;\n\treturn true;\n};\n\nEditor.prototype.updateSelection = function () {\n\tvar selection = this.editarea.getSelection();\n\ttry {\n\t\tif (this.tunes.length > 0 && this.tunes[0].engraver)\n\t\t\tthis.tunes[0].engraver.rangeHighlight(selection.start, selection.end);\n\t} catch (e) {\n\t} // maybe printer isn't defined yet?\n\tif (this.selectionChangeCallback)\n\t\tthis.selectionChangeCallback(selection.start, selection.end);\n};\n\n// Called when the textarea's selection is in the process of changing (after mouse down, dragging, or keyboard arrows)\nEditor.prototype.fireSelectionChanged = function () {\n\tthis.updateSelection();\n};\n\nEditor.prototype.setDirtyStyle = function (isDirty) {\n\tif (this.indicate_changed === undefined)\n\t\treturn;\n\tvar addClassName = function (element, className) {\n\t\tvar hasClassName = function (element, className) {\n\t\t\tvar elementClassName = element.className;\n\t\t\treturn (elementClassName.length > 0 && (elementClassName === className ||\n\t\t\t\tnew RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\").test(elementClassName)));\n\t\t};\n\n\t\tif (!hasClassName(element, className))\n\t\t\telement.className += (element.className ? ' ' : '') + className;\n\t\treturn element;\n\t};\n\n\tvar removeClassName = function (element, className) {\n\t\telement.className = parseCommon.strip(element.className.replace(\n\t\t\tnew RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\"), ' '));\n\t\treturn element;\n\t};\n\n\tvar readonlyClass = 'abc_textarea_dirty';\n\tvar el = this.editarea.getElem();\n\tif (isDirty) {\n\t\taddClassName(el, readonlyClass);\n\t} else {\n\t\tremoveClassName(el, readonlyClass);\n\t}\n};\n\n// call when the textarea alerts us that the abc text is changed and needs re-parsing\nEditor.prototype.fireChanged = function () {\n\tif (this.bIsPaused)\n\t\treturn;\n\tif (this.parseABC()) {\n\t\tvar self = this;\n\t\tif (this.timerId)\t// If the user is still typing, cancel the update\n\t\t\tclearTimeout(this.timerId);\n\t\tthis.timerId = setTimeout(function () {\n\t\t\tself.modelChanged();\n\t\t}, 300);\t// Is this a good compromise between responsiveness and not redrawing too much?\n\t\tvar isDirty = this.isDirty();\n\t\tif (this.wasDirty !== isDirty) {\n\t\t\tthis.wasDirty = isDirty;\n\t\t\tthis.setDirtyStyle(isDirty);\n\t\t}\n\t\tif (this.onchangeCallback)\n\t\t\tthis.onchangeCallback(this);\n\t}\n};\n\nEditor.prototype.setNotDirty = function () {\n\tthis.editarea.initialText = this.editarea.getString();\n\tthis.wasDirty = false;\n\tthis.setDirtyStyle(false);\n};\n\nEditor.prototype.isDirty = function () {\n\tif (this.indicate_changed === undefined)\n\t\treturn false;\n\treturn this.editarea.initialText !== this.editarea.getString();\n};\n\nEditor.prototype.highlight = function (abcelem, tuneNumber, classes, analysis, drag, mouseEvent) {\n\t// TODO-PER: The marker appears to get off by one for each tune parsed. I'm not sure why, but adding the tuneNumber in corrects it for the time being.\n//\tvar offset = (tuneNumber !== undefined) ? this.startPos[tuneNumber] + tuneNumber : 0;\n\n\tthis.editarea.setSelection(abcelem.startChar, abcelem.endChar);\n\tif (this.selectionChangeCallback)\n\t\tthis.selectionChangeCallback(abcelem.startChar, abcelem.endChar);\n\tif (this.clientClickListener)\n\t\tthis.clientClickListener(abcelem, tuneNumber, classes, analysis, drag, mouseEvent);\n};\n\nEditor.prototype.pause = function (shouldPause) {\n\tthis.bIsPaused = shouldPause;\n\tif (!shouldPause)\n\t\tthis.fireChanged();\n};\n\nEditor.prototype.millisecondsPerMeasure = function () {\n\tif (!this.synth || !this.synth.synthControl || !this.synth.synthControl.visualObj)\n\t\treturn 0;\n\treturn this.synth.synthControl.visualObj.millisecondsPerMeasure();\n};\n\nEditor.prototype.pauseMidi = function (shouldPause) {\n\tthis.midiPause = shouldPause;\n\tif (!shouldPause)\n\t\tthis.redrawMidi();\n};\n\nmodule.exports = Editor;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL2VkaXQvYWJjX2VkaXRvci5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixtQkFBTyxDQUFDLCtFQUFxQjtBQUMvQyxzQkFBc0IsbUJBQU8sQ0FBQywyRkFBMkI7QUFDekQsb0JBQW9CLG1CQUFPLENBQUMsdUZBQXlCO0FBQ3JELGdCQUFnQixtQkFBTyxDQUFDLHVGQUF5QjtBQUNqRCxlQUFlLG1CQUFPLENBQUMsMkVBQWdCOztBQUV2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxRQUFRO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL2VkaXQvYWJjX2VkaXRvci5qcz9jZTIwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHdpbmRvdy5BQkNKUy5FZGl0b3I6XG4vL1xuLy8gY29uc3RydWN0b3IoZWRpdGFyZWEsIHBhcmFtcylcbi8vXHRcdGlmIGVkaXRhcmVhIGlzIGEgc3RyaW5nLCB0aGVuIGl0IGlzIGFuIEhUTUwgaWQgb2YgYSB0ZXh0YXJlYSBjb250cm9sLlxuLy9cdFx0T3RoZXJ3aXNlLCBpdCBzaG91bGQgYmUgYW4gaW5zdGFudGlhdGlvbiBvZiBhbiBvYmplY3QgdGhhdCBleHByZXNzZXMgdGhlIEVkaXRBcmVhIGludGVyZmFjZS5cbi8vXG4vL1x0XHRwYXJhbXMgaXMgYSBoYXNoIG9mOlxuLy9cdFx0Y2FudmFzX2lkOiBvciBwYXBlcl9pZDogSFRNTCBpZCB0byBkcmF3IGluLiBJZiBub3QgcHJlc2VudCwgdGhlbiB0aGUgZHJhd2luZyBoYXBwZW5zIGp1c3QgYmVsb3cgdGhlIGVkaXRvci5cbi8vXHRcdGdlbmVyYXRlX21pZGk6IGlmIHByZXNlbnQsIHRoZW4gbWlkaSBpcyBnZW5lcmF0ZWQuXG4vL1x0XHRtaWRpX2lkOiBpZiBwcmVzZW50LCB0aGUgSFRNTCBpZCB0byBwbGFjZSB0aGUgbWlkaSBjb250cm9sLiBPdGhlcndpc2UgaXQgaXMgcGxhY2VkIGluIHRoZSBzYW1lIGRpdiBhcyB0aGUgcGFwZXIuXG4vL1x0XHRtaWRpX2Rvd25sb2FkX2lkOiBpZiBwcmVzZW50LCB0aGUgSFRNTCBpZCB0byBwbGFjZSB0aGUgbWlkaSBkb3dubG9hZCBsaW5rLiBPdGhlcndpc2UgaXQgaXMgcGxhY2VkIGluIHRoZSBzYW1lIGRpdiBhcyB0aGUgcGFwZXIuXG4vL1x0XHRnZW5lcmF0ZV93YXJuaW5nczogaWYgcHJlc2VudCwgdGhlbiBwYXJzZXIgd2FybmluZ3MgYXJlIGRpc3BsYXllZCBvbiB0aGUgcGFnZS5cbi8vXHRcdHdhcm5pbmdzX2lkOiBpZiBwcmVzZW50LCB0aGUgSFRNTCBpZCB0byBwbGFjZSB0aGUgd2FybmluZ3MuIE90aGVyd2lzZSB0aGV5IGFyZSBwbGFjZWQgaW4gdGhlIHNhbWUgZGl2IGFzIHRoZSBwYXBlci5cbi8vXHRcdG9uY2hhbmdlOiBpZiBwcmVzZW50LCB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gdG8gY2FsbCB3aGVuZXZlciB0aGVyZSBoYXMgYmVlbiBhIGNoYW5nZS5cbi8vXHRcdGd1aTogaWYgcHJlc2VudCwgdGhlIHBhcGVyIGNhbiBzZW5kIGNoYW5nZXMgYmFjayB0byB0aGUgZWRpdG9yIChwcmVzdW1hYmx5IGJlY2F1c2UgdGhlIHVzZXIgY2hhbmdlZCBzb21ldGhpbmcgZGlyZWN0bHkuKVxuLy9cdFx0cGFyc2VyX29wdGlvbnM6IG9wdGlvbnMgdG8gc2VuZCB0byB0aGUgcGFyc2VyIGVuZ2luZS5cbi8vXHRcdG1pZGlfb3B0aW9uczogb3B0aW9ucyB0byBzZW5kIHRvIHRoZSBtaWRpIGVuZ2luZS5cbi8vXHRcdHJlbmRlcl9vcHRpb25zOiBvcHRpb25zIHRvIHNlbmQgdG8gdGhlIHJlbmRlciBlbmdpbmUuXG4vL1x0XHRpbmRpY2F0ZV9jaGFuZ2VkOiB0aGUgZGlydHkgZmxhZyBpcyBzZXQgaWYgdGhpcyBpcyB0cnVlLlxuLy9cbi8vIC0gc2V0UmVhZE9ubHkoYm9vbClcbi8vXHRcdGFkZHMgb3IgcmVtb3ZlcyB0aGUgY2xhc3MgYWJjX3RleHRhcmVhX3JlYWRvbmx5LCBhbmQgYWRkcyBvciByZW1vdmVzIHRoZSBhdHRyaWJ1dGUgcmVhZG9ubHk9eWVzXG4vLyAtIHNldERpcnR5U3R5bGUoYm9vbClcbi8vXHRcdGFkZHMgb3IgcmVtb3ZlcyB0aGUgY2xhc3MgYWJjX3RleHRhcmVhX2RpcnR5XG4vLyAtIG1vZGVsQ2hhbmdlZCgpXG4vL1x0XHRDYWxsZWQgd2hlbiB0aGUgbW9kZWwgaGFzIGJlZW4gY2hhbmdlZCB0byB0cmlnZ2VyIHJlLXJlbmRlcmluZ1xuLy8gLSBwYXJzZUFCQygpXG4vL1x0XHRDYWxsZWQgaW50ZXJuYWxseSBieSBmaXJlQ2hhbmdlZCgpXG4vL1x0XHRyZXR1cm5zIHRydWUgaWYgdGhlcmUgaGFzIGJlZW4gYSBjaGFuZ2Ugc2luY2UgbGFzdCBjYWxsLlxuLy8gLSB1cGRhdGVTZWxlY3Rpb24oKVxuLy9cdFx0Q2FsbGVkIHdoZW4gdGhlIHVzZXIgaGFzIGNoYW5nZWQgdGhlIHNlbGVjdGlvbi4gVGhpcyBjYWxscyB0aGUgZW5ncmF2ZXIgdG8gc2hvdyB0aGUgc2VsZWN0aW9uLlxuLy8gLSBmaXJlU2VsZWN0aW9uQ2hhbmdlZCgpXG4vL1x0XHRDYWxsZWQgYnkgdGhlIHRleHRhcmVhIG9iamVjdCB3aGVuIHRoZSB1c2VyIGhhcyBjaGFuZ2VkIHRoZSBzZWxlY3Rpb24uXG4vLyAtIHBhcmFtQ2hhbmdlZChlbmdyYXZlcnBhcmFtcylcbi8vXHRcdENhbGxlZCB0byBzaWduYWwgdGhhdCB0aGUgZW5ncmF2ZXIgcGFyYW1zIGhhdmUgY2hhbmdlZCwgc28gcmUtcmVuZGVyaW5nIHNob3VsZCBvY2N1ci5cbi8vIC0gZmlyZUNoYW5nZWQoKVxuLy9cdFx0Q2FsbGVkIGJ5IHRoZSB0ZXh0YXJlYSBvYmplY3Qgd2hlbiB0aGUgdXNlciBoYXMgY2hhbmdlZCBzb21ldGhpbmcuXG4vLyAtIHNldE5vdERpcnR5KClcbi8vXHRcdENhbGxlZCBieSB0aGUgY2xpZW50IGFwcCB0byByZXNldCB0aGUgZGlydHkgZmxhZ1xuLy8gLSBpc0RpcnR5KClcbi8vXHRcdFJldHVybnMgdHJ1ZSBvciBmYWxzZSwgd2hldGhlciB0aGUgdGV4dGFyZWEgY29udGFpbnMgdGhlIHNhbWUgdGV4dCB0aGF0IGl0IHN0YXJ0ZWQgd2l0aC5cbi8vIC0gaGlnaGxpZ2h0KGFiY2VsZW0pXG4vL1x0XHRDYWxsZWQgYnkgdGhlIGVuZ3JhdmVyIHRvIGhpZ2hsaWdodCBhbiBhcmVhLlxuLy8gLSBwYXVzZShib29sKVxuLy9cdFx0U3RvcHMgdGhlIGF1dG9tYXRpYyByZW5kZXJpbmcgd2hlbiB0aGUgdXNlciBpcyB0eXBpbmcuXG4vL1xudmFyIHBhcnNlQ29tbW9uID0gcmVxdWlyZSgnLi4vcGFyc2UvYWJjX2NvbW1vbicpO1xudmFyIFN5bnRoQ29udHJvbGxlciA9IHJlcXVpcmUoJy4uL3N5bnRoL3N5bnRoLWNvbnRyb2xsZXInKTtcbnZhciBzdXBwb3J0c0F1ZGlvID0gcmVxdWlyZSgnLi4vc3ludGgvc3VwcG9ydHMtYXVkaW8nKTtcbnZhciByZW5kZXJBYmMgPSByZXF1aXJlKCcuLi9hcGkvYWJjX3R1bmVib29rX3N2ZycpO1xudmFyIEVkaXRBcmVhID0gcmVxdWlyZSgnLi9hYmNfZWRpdGFyZWEnKTtcblxuZnVuY3Rpb24gZ2F0aGVyQWJjUGFyYW1zKHBhcmFtcykge1xuXHQvLyBUaGVyZSB1c2VkIHRvIGJlIGEgYnVuY2ggb2Ygd2F5cyBwYXJhbWV0ZXJzIGNhbiBiZSBwYXNzZWQgaW4uIFRoaXMganVzdCBzaW1wbGlmaWVzIGl0LlxuXHR2YXIgYWJjanNQYXJhbXMgPSB7fTtcblx0dmFyIGtleTtcblx0aWYgKHBhcmFtcy5hYmNqc1BhcmFtcykge1xuXHRcdGZvciAoa2V5IGluIHBhcmFtcy5hYmNqc1BhcmFtcykge1xuXHRcdFx0aWYgKHBhcmFtcy5hYmNqc1BhcmFtcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRcdGFiY2pzUGFyYW1zW2tleV0gPSBwYXJhbXMuYWJjanNQYXJhbXNba2V5XTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0aWYgKHBhcmFtcy5taWRpX29wdGlvbnMpIHtcblx0XHRmb3IgKGtleSBpbiBwYXJhbXMubWlkaV9vcHRpb25zKSB7XG5cdFx0XHRpZiAocGFyYW1zLm1pZGlfb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRcdGFiY2pzUGFyYW1zW2tleV0gPSBwYXJhbXMubWlkaV9vcHRpb25zW2tleV07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGlmIChwYXJhbXMucGFyc2VyX29wdGlvbnMpIHtcblx0XHRmb3IgKGtleSBpbiBwYXJhbXMucGFyc2VyX29wdGlvbnMpIHtcblx0XHRcdGlmIChwYXJhbXMucGFyc2VyX29wdGlvbnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0XHRhYmNqc1BhcmFtc1trZXldID0gcGFyYW1zLnBhcnNlcl9vcHRpb25zW2tleV07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGlmIChwYXJhbXMucmVuZGVyX29wdGlvbnMpIHtcblx0XHRmb3IgKGtleSBpbiBwYXJhbXMucmVuZGVyX29wdGlvbnMpIHtcblx0XHRcdGlmIChwYXJhbXMucmVuZGVyX29wdGlvbnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0XHRhYmNqc1BhcmFtc1trZXldID0gcGFyYW1zLnJlbmRlcl9vcHRpb25zW2tleV07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdC8qXG5cdGlmIChwYXJhbXMudGFibGF0dXJlX29wdGlvbnMpIHtcblx0XHRhYmNqc1BhcmFtc1sndGFibGF0dXJlcyddID0gcGFyYW1zLnRhYmxhdHVyZV9vcHRpb25zO1xuXHR9XG5cdCovXG5cdGlmIChhYmNqc1BhcmFtcy50YWJsYXR1cmUpIHtcblx0XHRpZiAocGFyYW1zLndhcm5pbmdzX2lkKSB7XG5cdFx0XHQvLyBzdG9yZSBmb3IgcGx1Z2luIGVycm9yIGhhbmRsaW5nXG5cdFx0XHRhYmNqc1BhcmFtcy50YWJsYXR1cmUud2FybmluZ3NfaWQgPSBwYXJhbXMud2FybmluZ3NfaWQ7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBhYmNqc1BhcmFtcztcbn1cblxudmFyIEVkaXRvciA9IGZ1bmN0aW9uIChlZGl0YXJlYSwgcGFyYW1zKSB7XG5cdC8vIENvcHkgYWxsIHRoZSBvcHRpb25zIHRoYXQgd2lsbCBiZSBwYXNzZWQgdGhyb3VnaFxuXHR0aGlzLmFiY2pzUGFyYW1zID0gZ2F0aGVyQWJjUGFyYW1zKHBhcmFtcyk7XG5cblx0aWYgKHBhcmFtcy5pbmRpY2F0ZV9jaGFuZ2VkKVxuXHRcdHRoaXMuaW5kaWNhdGVfY2hhbmdlZCA9IHRydWU7XG5cblx0Ly8gSWYgYSBzdHJpbmcgaXMgcGFzc2VkIGluIHRoZW4gaXQgY291bGQgZWl0aGVyIGJlIGFuIGVsZW1lbnQncyBJRCBvciBhIHNlbGVjdG9yXG5cdC8vIElmIGFuIG9iamVjdCBpcyBwYXNzZWQgaW4gdGhlbiBpdCBjb3VsZCBlaXRoZXIgYmUgYW4gRWRpdEFyZWEgb3IgYSB0ZXh0YXJlYS5cblx0aWYgKHR5cGVvZiBlZGl0YXJlYSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdC8vIEVkaXRBcmVhIGhhbmRsZXMgYm90aCB0aGUgSUQgYW5kIHRoZSBzZWxlY3RvclxuXHRcdHRoaXMuZWRpdGFyZWEgPSBuZXcgRWRpdEFyZWEoZWRpdGFyZWEpO1xuXHR9IGVsc2Uge1xuXHRcdC8vIElmIGFuIGVkaXQgYXJlYSB3YXMgcGFzc2VkIGluLCBqdXN0IHVzZSBpdFxuXHRcdGlmIChlZGl0YXJlYS5pc0VkaXRBcmVhKVxuXHRcdFx0dGhpcy5lZGl0YXJlYSA9IGVkaXRhcmVhO1xuXHRcdGVsc2Vcblx0XHRcdC8vIEhvcGVmdWxseSB3ZSB3ZXJlIHBhc3NlZCBpbiBhIHRleHRhcmVhIG9yIGVxdWl2YWxlbnQuXG5cdFx0XHR0aGlzLmVkaXRhcmVhID0gbmV3IEVkaXRBcmVhKGVkaXRhcmVhKVxuXHR9XG5cdHRoaXMuZWRpdGFyZWEuYWRkU2VsZWN0aW9uTGlzdGVuZXIodGhpcyk7XG5cdHRoaXMuZWRpdGFyZWEuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcyk7XG5cblx0aWYgKHBhcmFtcy5jYW52YXNfaWQpIHtcblx0XHR0aGlzLmRpdiA9IHBhcmFtcy5jYW52YXNfaWQ7XG5cdH0gZWxzZSBpZiAocGFyYW1zLnBhcGVyX2lkKSB7XG5cdFx0dGhpcy5kaXYgPSBwYXJhbXMucGFwZXJfaWQ7XG5cdH0gZWxzZSB7XG5cdFx0dGhpcy5kaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpO1xuXHRcdHRoaXMuZWRpdGFyZWEuZ2V0RWxlbSgpLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuZGl2LCB0aGlzLmVkaXRhcmVhLmdldEVsZW0oKSk7XG5cdH1cblx0aWYgKHR5cGVvZiB0aGlzLmRpdiA9PT0gJ3N0cmluZycpXG5cdFx0dGhpcy5kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmRpdik7XG5cblx0aWYgKHBhcmFtcy5zZWxlY3Rpb25DaGFuZ2VDYWxsYmFjaykge1xuXHRcdHRoaXMuc2VsZWN0aW9uQ2hhbmdlQ2FsbGJhY2sgPSBwYXJhbXMuc2VsZWN0aW9uQ2hhbmdlQ2FsbGJhY2s7XG5cdH1cblxuXHR0aGlzLmNsaWVudENsaWNrTGlzdGVuZXIgPSB0aGlzLmFiY2pzUGFyYW1zLmNsaWNrTGlzdGVuZXI7XG5cdHRoaXMuYWJjanNQYXJhbXMuY2xpY2tMaXN0ZW5lciA9IHRoaXMuaGlnaGxpZ2h0LmJpbmQodGhpcyk7XG5cblx0aWYgKHBhcmFtcy5zeW50aCkge1xuXHRcdGlmIChzdXBwb3J0c0F1ZGlvKCkpIHtcblx0XHRcdHRoaXMuc3ludGggPSB7XG5cdFx0XHRcdGVsOiBwYXJhbXMuc3ludGguZWwsXG5cdFx0XHRcdGN1cnNvckNvbnRyb2w6IHBhcmFtcy5zeW50aC5jdXJzb3JDb250cm9sLFxuXHRcdFx0XHRvcHRpb25zOiBwYXJhbXMuc3ludGgub3B0aW9uc1xuXHRcdFx0fTtcblx0XHR9XG5cdH1cblx0Ly8gSWYgdGhlIHVzZXIgd2FudHMgbWlkaSwgdGhlbiBzdG9yZSB0aGUgZWxlbWVudHMgdGhhdCBpdCB3aWxsIGJlIHdyaXR0ZW4gdG8uIFRoZSBlbGVtZW50IGNvdWxkIGVpdGhlciBiZSBwYXNzZWQgaW4gYXMgYW4gaWQsXG5cdC8vIGFuIGVsZW1lbnQsIG9yIG5vdGhpbmcuIElmIG5vdGhpbmcgaXMgcGFzc2VkIGluLCB0aGVuIGp1c3QgcHV0IHRoZSBtaWRpIG9uIHRvcCBvZiB0aGUgZ2VuZXJhdGVkIG11c2ljLlxuXHRpZiAocGFyYW1zLmdlbmVyYXRlX21pZGkpIHtcblx0XHR0aGlzLmdlbmVyYXRlX21pZGkgPSBwYXJhbXMuZ2VuZXJhdGVfbWlkaTtcblx0XHRpZiAodGhpcy5hYmNqc1BhcmFtcy5nZW5lcmF0ZURvd25sb2FkKSB7XG5cdFx0XHRpZiAodHlwZW9mIHBhcmFtcy5taWRpX2Rvd25sb2FkX2lkID09PSAnc3RyaW5nJylcblx0XHRcdFx0dGhpcy5kb3dubG9hZE1pZGkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJhbXMubWlkaV9kb3dubG9hZF9pZCk7XG5cdFx0XHRlbHNlIGlmIChwYXJhbXMubWlkaV9kb3dubG9hZF9pZCkgLy8gYXNzdW1lLCBpZiB0aGUgdmFyIGlzIG5vdCBhIHN0cmluZyBpdCBpcyBhbiBlbGVtZW50LiBJZiBub3QsIGl0IHdpbGwgY3Jhc2ggc29vbiBlbm91Z2guXG5cdFx0XHRcdHRoaXMuZG93bmxvYWRNaWRpID0gcGFyYW1zLm1pZGlfZG93bmxvYWRfaWQ7XG5cdFx0fVxuXHRcdGlmICh0aGlzLmFiY2pzUGFyYW1zLmdlbmVyYXRlSW5saW5lICE9PSBmYWxzZSkgeyAvLyBUaGUgZGVmYXVsdCBmb3IgdGhpcyBpcyB0cnVlLCBzbyB1bmRlZmluZWQgaXMgYWxzbyB0cnVlLlxuXHRcdFx0aWYgKHR5cGVvZiBwYXJhbXMubWlkaV9pZCA9PT0gJ3N0cmluZycpXG5cdFx0XHRcdHRoaXMuaW5saW5lTWlkaSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhcmFtcy5taWRpX2lkKTtcblx0XHRcdGVsc2UgaWYgKHBhcmFtcy5taWRpX2lkKSAvLyBhc3N1bWUsIGlmIHRoZSB2YXIgaXMgbm90IGEgc3RyaW5nIGl0IGlzIGFuIGVsZW1lbnQuIElmIG5vdCwgaXQgd2lsbCBjcmFzaCBzb29uIGVub3VnaC5cblx0XHRcdFx0dGhpcy5pbmxpbmVNaWRpID0gcGFyYW1zLm1pZGlfaWQ7XG5cdFx0fVxuXHR9XG5cblx0aWYgKHBhcmFtcy53YXJuaW5nc19pZCkge1xuXHRcdGlmICh0eXBlb2YgKHBhcmFtcy53YXJuaW5nc19pZCkgPT09IFwic3RyaW5nXCIpXG5cdFx0XHR0aGlzLndhcm5pbmdzZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGFyYW1zLndhcm5pbmdzX2lkKTtcblx0XHRlbHNlXG5cdFx0XHR0aGlzLndhcm5pbmdzZGl2ID0gcGFyYW1zLndhcm5pbmdzX2lkO1xuXHR9IGVsc2UgaWYgKHBhcmFtcy5nZW5lcmF0ZV93YXJuaW5ncykge1xuXHRcdHRoaXMud2FybmluZ3NkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdHRoaXMuZGl2LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMud2FybmluZ3NkaXYsIHRoaXMuZGl2KTtcblx0fVxuXG5cdHRoaXMub25jaGFuZ2VDYWxsYmFjayA9IHBhcmFtcy5vbmNoYW5nZTtcblx0dGhpcy5yZWRyYXdDYWxsYmFjayA9IHBhcmFtcy5yZWRyYXdDYWxsYmFjaztcblxuXHR0aGlzLmN1cnJlbnRBYmMgPSBcIlwiO1xuXHR0aGlzLnR1bmVzID0gW107XG5cdHRoaXMuYlJlZW50cnkgPSBmYWxzZTtcblx0dGhpcy5wYXJzZUFCQygpO1xuXHR0aGlzLm1vZGVsQ2hhbmdlZCgpO1xuXG5cdHRoaXMuYWRkQ2xhc3NOYW1lID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuXHRcdHZhciBoYXNDbGFzc05hbWUgPSBmdW5jdGlvbiAoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG5cdFx0XHR2YXIgZWxlbWVudENsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lO1xuXHRcdFx0cmV0dXJuIChlbGVtZW50Q2xhc3NOYW1lLmxlbmd0aCA+IDAgJiYgKGVsZW1lbnRDbGFzc05hbWUgPT09IGNsYXNzTmFtZSB8fFxuXHRcdFx0XHRuZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIgKyBjbGFzc05hbWUgKyBcIihcXFxcc3wkKVwiKS50ZXN0KGVsZW1lbnRDbGFzc05hbWUpKSk7XG5cdFx0fTtcblxuXHRcdGlmICghaGFzQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkpXG5cdFx0XHRlbGVtZW50LmNsYXNzTmFtZSArPSAoZWxlbWVudC5jbGFzc05hbWUgPyAnICcgOiAnJykgKyBjbGFzc05hbWU7XG5cdFx0cmV0dXJuIGVsZW1lbnQ7XG5cdH07XG5cblx0dGhpcy5yZW1vdmVDbGFzc05hbWUgPSBmdW5jdGlvbiAoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG5cdFx0ZWxlbWVudC5jbGFzc05hbWUgPSBwYXJzZUNvbW1vbi5zdHJpcChlbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKFxuXHRcdFx0bmV3IFJlZ0V4cChcIihefFxcXFxzKylcIiArIGNsYXNzTmFtZSArIFwiKFxcXFxzK3wkKVwiKSwgJyAnKSk7XG5cdFx0cmV0dXJuIGVsZW1lbnQ7XG5cdH07XG5cblx0dGhpcy5zZXRSZWFkT25seSA9IGZ1bmN0aW9uIChyZWFkT25seSkge1xuXHRcdHZhciByZWFkb25seUNsYXNzID0gJ2FiY190ZXh0YXJlYV9yZWFkb25seSc7XG5cdFx0dmFyIGVsID0gdGhpcy5lZGl0YXJlYS5nZXRFbGVtKCk7XG5cdFx0aWYgKHJlYWRPbmx5KSB7XG5cdFx0XHRlbC5zZXRBdHRyaWJ1dGUoJ3JlYWRvbmx5JywgJ3llcycpO1xuXHRcdFx0dGhpcy5hZGRDbGFzc05hbWUoZWwsIHJlYWRvbmx5Q2xhc3MpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbC5yZW1vdmVBdHRyaWJ1dGUoJ3JlYWRvbmx5Jyk7XG5cdFx0XHR0aGlzLnJlbW92ZUNsYXNzTmFtZShlbCwgcmVhZG9ubHlDbGFzcyk7XG5cdFx0fVxuXHR9O1xufTtcblxuRWRpdG9yLnByb3RvdHlwZS5yZWRyYXdNaWRpID0gZnVuY3Rpb24gKCkge1xuXHRpZiAodGhpcy5nZW5lcmF0ZV9taWRpICYmICF0aGlzLm1pZGlQYXVzZSkge1xuXHRcdHZhciBldmVudCA9IG5ldyB3aW5kb3cuQ3VzdG9tRXZlbnQoXCJnZW5lcmF0ZU1pZGlcIiwge1xuXHRcdFx0ZGV0YWlsOiB7XG5cdFx0XHRcdHR1bmVzOiB0aGlzLnR1bmVzLFxuXHRcdFx0XHRhYmNqc1BhcmFtczogdGhpcy5hYmNqc1BhcmFtcyxcblx0XHRcdFx0ZG93bmxvYWRNaWRpRWw6IHRoaXMuZG93bmxvYWRNaWRpLFxuXHRcdFx0XHRpbmxpbmVNaWRpRWw6IHRoaXMuaW5saW5lTWlkaSxcblx0XHRcdFx0ZW5ncmF2aW5nRWw6IHRoaXMuZGl2XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0d2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXHR9XG5cdGlmICh0aGlzLnN5bnRoKSB7XG5cdFx0dmFyIHVzZXJBY3Rpb24gPSB0aGlzLnN5bnRoLnN5bnRoQ29udHJvbDsgLy8gQ2FuJ3QgcmVhbGx5IHRlbGwgaWYgdGhlcmUgd2FzIGEgdXNlciBhY3Rpb24gYmVmb3JlIGRyYXdpbmcsIGJ1dCB3ZSBhc3N1bWUgdGhhdCBpZiB0aGUgc3ludGhDb250cm9sIHdhcyBjcmVhdGVkIGFscmVhZHkgdGhlcmUgd2FzIGEgdXNlciBhY3Rpb24uXG5cdFx0aWYgKCF0aGlzLnN5bnRoLnN5bnRoQ29udHJvbCkge1xuXHRcdFx0dGhpcy5zeW50aC5zeW50aENvbnRyb2wgPSBuZXcgU3ludGhDb250cm9sbGVyKCk7XG5cdFx0XHR0aGlzLnN5bnRoLnN5bnRoQ29udHJvbC5sb2FkKHRoaXMuc3ludGguZWwsIHRoaXMuc3ludGguY3Vyc29yQ29udHJvbCwgdGhpcy5zeW50aC5vcHRpb25zKTtcblx0XHR9XG5cdFx0dGhpcy5zeW50aC5zeW50aENvbnRyb2wuc2V0VHVuZSh0aGlzLnR1bmVzWzBdLCB1c2VyQWN0aW9uLCB0aGlzLnN5bnRoLm9wdGlvbnMpO1xuXHR9XG59O1xuXG5FZGl0b3IucHJvdG90eXBlLm1vZGVsQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcblx0aWYgKHRoaXMuYlJlZW50cnkpXG5cdFx0cmV0dXJuOyAvLyBUT0RPIGlzIHRoaXMgbGlrZWx5PyBtYXliZSwgaWYgd2UgcmV3cml0ZSBhYmMgaW1tZWRpYXRlbHkgdy8gYWJjMmFiY1xuXHR0aGlzLmJSZWVudHJ5ID0gdHJ1ZTtcblx0dHJ5IHtcblx0XHR0aGlzLnRpbWVySWQgPSBudWxsO1xuXHRcdGlmICh0aGlzLnJlZHJhd0NhbGxiYWNrKVxuXHRcdFx0dGhpcy5yZWRyYXdDYWxsYmFjayh0cnVlKVxuXHRcdGlmICh0aGlzLnN5bnRoICYmIHRoaXMuc3ludGguc3ludGhDb250cm9sKVxuXHRcdFx0dGhpcy5zeW50aC5zeW50aENvbnRyb2wuZGlzYWJsZSh0cnVlKTtcblxuXHRcdHRoaXMudHVuZXMgPSByZW5kZXJBYmModGhpcy5kaXYsIHRoaXMuY3VycmVudEFiYywgdGhpcy5hYmNqc1BhcmFtcyk7XG5cdFx0aWYgKHRoaXMudHVuZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0dGhpcy53YXJuaW5ncyA9IHRoaXMudHVuZXNbMF0ud2FybmluZ3M7XG5cdFx0fVxuXHRcdHRoaXMucmVkcmF3TWlkaSgpO1xuXHRcdGlmICh0aGlzLnJlZHJhd0NhbGxiYWNrKVxuXHRcdFx0dGhpcy5yZWRyYXdDYWxsYmFjayhmYWxzZSlcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRjb25zb2xlLmVycm9yKFwiQUJDSlMgZXJyb3I6IFwiLCBlcnJvcik7XG5cdFx0aWYgKCF0aGlzLndhcm5pbmdzKVxuXHRcdFx0dGhpcy53YXJuaW5ncyA9IFtdO1xuXHRcdHRoaXMud2FybmluZ3MucHVzaChlcnJvci5tZXNzYWdlKTtcblx0fVxuXG5cdGlmICh0aGlzLndhcm5pbmdzZGl2KSB7XG5cdFx0dGhpcy53YXJuaW5nc2Rpdi5pbm5lckhUTUwgPSAodGhpcy53YXJuaW5ncykgPyB0aGlzLndhcm5pbmdzLmpvaW4oXCI8YnIgLz5cIikgOiBcIk5vIGVycm9yc1wiO1xuXHR9XG5cdHRoaXMudXBkYXRlU2VsZWN0aW9uKCk7XG5cdHRoaXMuYlJlZW50cnkgPSBmYWxzZTtcbn07XG5cbi8vIENhbGwgdGhpcyB0byByZXBhcnNlIGluIHJlc3BvbnNlIHRvIHRoZSBjbGllbnQgY2hhbmdpbmcgdGhlIHBhcmFtZXRlcnMgb24gdGhlIGZseVxuRWRpdG9yLnByb3RvdHlwZS5wYXJhbUNoYW5nZWQgPSBmdW5jdGlvbiAoZW5ncmF2ZXJQYXJhbXMpIHtcblx0aWYgKGVuZ3JhdmVyUGFyYW1zKSB7XG5cdFx0Zm9yICh2YXIga2V5IGluIGVuZ3JhdmVyUGFyYW1zKSB7XG5cdFx0XHRpZiAoZW5ncmF2ZXJQYXJhbXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0XHR0aGlzLmFiY2pzUGFyYW1zW2tleV0gPSBlbmdyYXZlclBhcmFtc1trZXldO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHR0aGlzLmN1cnJlbnRBYmMgPSBcIlwiO1xuXHR0aGlzLmZpcmVDaGFuZ2VkKCk7XG59O1xuXG5FZGl0b3IucHJvdG90eXBlLmdldFR1bmVzID0gZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gdGhpcy50dW5lc1xufTtcblxuRWRpdG9yLnByb3RvdHlwZS5zeW50aFBhcmFtQ2hhbmdlZCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdGlmICghdGhpcy5zeW50aClcblx0XHRyZXR1cm47XG5cdHRoaXMuc3ludGgub3B0aW9ucyA9IHt9O1xuXHRpZiAob3B0aW9ucykge1xuXHRcdGZvciAodmFyIGtleSBpbiBvcHRpb25zKSB7XG5cdFx0XHRpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRcdHRoaXMuc3ludGgub3B0aW9uc1trZXldID0gb3B0aW9uc1trZXldO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHR0aGlzLmN1cnJlbnRBYmMgPSBcIlwiO1xuXHR0aGlzLmZpcmVDaGFuZ2VkKCk7XG59O1xuXG4vLyByZXR1cm4gdHJ1ZSBpZiB0aGUgbW9kZWwgaGFzIGNoYW5nZWRcbkVkaXRvci5wcm90b3R5cGUucGFyc2VBQkMgPSBmdW5jdGlvbiAoKSB7XG5cdHZhciB0ID0gdGhpcy5lZGl0YXJlYS5nZXRTdHJpbmcoKTtcblx0aWYgKHQgPT09IHRoaXMuY3VycmVudEFiYykge1xuXHRcdHRoaXMudXBkYXRlU2VsZWN0aW9uKCk7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0dGhpcy5jdXJyZW50QWJjID0gdDtcblx0cmV0dXJuIHRydWU7XG59O1xuXG5FZGl0b3IucHJvdG90eXBlLnVwZGF0ZVNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIHNlbGVjdGlvbiA9IHRoaXMuZWRpdGFyZWEuZ2V0U2VsZWN0aW9uKCk7XG5cdHRyeSB7XG5cdFx0aWYgKHRoaXMudHVuZXMubGVuZ3RoID4gMCAmJiB0aGlzLnR1bmVzWzBdLmVuZ3JhdmVyKVxuXHRcdFx0dGhpcy50dW5lc1swXS5lbmdyYXZlci5yYW5nZUhpZ2hsaWdodChzZWxlY3Rpb24uc3RhcnQsIHNlbGVjdGlvbi5lbmQpO1xuXHR9IGNhdGNoIChlKSB7XG5cdH0gLy8gbWF5YmUgcHJpbnRlciBpc24ndCBkZWZpbmVkIHlldD9cblx0aWYgKHRoaXMuc2VsZWN0aW9uQ2hhbmdlQ2FsbGJhY2spXG5cdFx0dGhpcy5zZWxlY3Rpb25DaGFuZ2VDYWxsYmFjayhzZWxlY3Rpb24uc3RhcnQsIHNlbGVjdGlvbi5lbmQpO1xufTtcblxuLy8gQ2FsbGVkIHdoZW4gdGhlIHRleHRhcmVhJ3Mgc2VsZWN0aW9uIGlzIGluIHRoZSBwcm9jZXNzIG9mIGNoYW5naW5nIChhZnRlciBtb3VzZSBkb3duLCBkcmFnZ2luZywgb3Iga2V5Ym9hcmQgYXJyb3dzKVxuRWRpdG9yLnByb3RvdHlwZS5maXJlU2VsZWN0aW9uQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcblx0dGhpcy51cGRhdGVTZWxlY3Rpb24oKTtcbn07XG5cbkVkaXRvci5wcm90b3R5cGUuc2V0RGlydHlTdHlsZSA9IGZ1bmN0aW9uIChpc0RpcnR5KSB7XG5cdGlmICh0aGlzLmluZGljYXRlX2NoYW5nZWQgPT09IHVuZGVmaW5lZClcblx0XHRyZXR1cm47XG5cdHZhciBhZGRDbGFzc05hbWUgPSBmdW5jdGlvbiAoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG5cdFx0dmFyIGhhc0NsYXNzTmFtZSA9IGZ1bmN0aW9uIChlbGVtZW50LCBjbGFzc05hbWUpIHtcblx0XHRcdHZhciBlbGVtZW50Q2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWU7XG5cdFx0XHRyZXR1cm4gKGVsZW1lbnRDbGFzc05hbWUubGVuZ3RoID4gMCAmJiAoZWxlbWVudENsYXNzTmFtZSA9PT0gY2xhc3NOYW1lIHx8XG5cdFx0XHRcdG5ldyBSZWdFeHAoXCIoXnxcXFxccylcIiArIGNsYXNzTmFtZSArIFwiKFxcXFxzfCQpXCIpLnRlc3QoZWxlbWVudENsYXNzTmFtZSkpKTtcblx0XHR9O1xuXG5cdFx0aWYgKCFoYXNDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSlcblx0XHRcdGVsZW1lbnQuY2xhc3NOYW1lICs9IChlbGVtZW50LmNsYXNzTmFtZSA/ICcgJyA6ICcnKSArIGNsYXNzTmFtZTtcblx0XHRyZXR1cm4gZWxlbWVudDtcblx0fTtcblxuXHR2YXIgcmVtb3ZlQ2xhc3NOYW1lID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuXHRcdGVsZW1lbnQuY2xhc3NOYW1lID0gcGFyc2VDb21tb24uc3RyaXAoZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZShcblx0XHRcdG5ldyBSZWdFeHAoXCIoXnxcXFxccyspXCIgKyBjbGFzc05hbWUgKyBcIihcXFxccyt8JClcIiksICcgJykpO1xuXHRcdHJldHVybiBlbGVtZW50O1xuXHR9O1xuXG5cdHZhciByZWFkb25seUNsYXNzID0gJ2FiY190ZXh0YXJlYV9kaXJ0eSc7XG5cdHZhciBlbCA9IHRoaXMuZWRpdGFyZWEuZ2V0RWxlbSgpO1xuXHRpZiAoaXNEaXJ0eSkge1xuXHRcdGFkZENsYXNzTmFtZShlbCwgcmVhZG9ubHlDbGFzcyk7XG5cdH0gZWxzZSB7XG5cdFx0cmVtb3ZlQ2xhc3NOYW1lKGVsLCByZWFkb25seUNsYXNzKTtcblx0fVxufTtcblxuLy8gY2FsbCB3aGVuIHRoZSB0ZXh0YXJlYSBhbGVydHMgdXMgdGhhdCB0aGUgYWJjIHRleHQgaXMgY2hhbmdlZCBhbmQgbmVlZHMgcmUtcGFyc2luZ1xuRWRpdG9yLnByb3RvdHlwZS5maXJlQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcblx0aWYgKHRoaXMuYklzUGF1c2VkKVxuXHRcdHJldHVybjtcblx0aWYgKHRoaXMucGFyc2VBQkMoKSkge1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRpZiAodGhpcy50aW1lcklkKVx0Ly8gSWYgdGhlIHVzZXIgaXMgc3RpbGwgdHlwaW5nLCBjYW5jZWwgdGhlIHVwZGF0ZVxuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMudGltZXJJZCk7XG5cdFx0dGhpcy50aW1lcklkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRzZWxmLm1vZGVsQ2hhbmdlZCgpO1xuXHRcdH0sIDMwMCk7XHQvLyBJcyB0aGlzIGEgZ29vZCBjb21wcm9taXNlIGJldHdlZW4gcmVzcG9uc2l2ZW5lc3MgYW5kIG5vdCByZWRyYXdpbmcgdG9vIG11Y2g/XG5cdFx0dmFyIGlzRGlydHkgPSB0aGlzLmlzRGlydHkoKTtcblx0XHRpZiAodGhpcy53YXNEaXJ0eSAhPT0gaXNEaXJ0eSkge1xuXHRcdFx0dGhpcy53YXNEaXJ0eSA9IGlzRGlydHk7XG5cdFx0XHR0aGlzLnNldERpcnR5U3R5bGUoaXNEaXJ0eSk7XG5cdFx0fVxuXHRcdGlmICh0aGlzLm9uY2hhbmdlQ2FsbGJhY2spXG5cdFx0XHR0aGlzLm9uY2hhbmdlQ2FsbGJhY2sodGhpcyk7XG5cdH1cbn07XG5cbkVkaXRvci5wcm90b3R5cGUuc2V0Tm90RGlydHkgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMuZWRpdGFyZWEuaW5pdGlhbFRleHQgPSB0aGlzLmVkaXRhcmVhLmdldFN0cmluZygpO1xuXHR0aGlzLndhc0RpcnR5ID0gZmFsc2U7XG5cdHRoaXMuc2V0RGlydHlTdHlsZShmYWxzZSk7XG59O1xuXG5FZGl0b3IucHJvdG90eXBlLmlzRGlydHkgPSBmdW5jdGlvbiAoKSB7XG5cdGlmICh0aGlzLmluZGljYXRlX2NoYW5nZWQgPT09IHVuZGVmaW5lZClcblx0XHRyZXR1cm4gZmFsc2U7XG5cdHJldHVybiB0aGlzLmVkaXRhcmVhLmluaXRpYWxUZXh0ICE9PSB0aGlzLmVkaXRhcmVhLmdldFN0cmluZygpO1xufTtcblxuRWRpdG9yLnByb3RvdHlwZS5oaWdobGlnaHQgPSBmdW5jdGlvbiAoYWJjZWxlbSwgdHVuZU51bWJlciwgY2xhc3NlcywgYW5hbHlzaXMsIGRyYWcsIG1vdXNlRXZlbnQpIHtcblx0Ly8gVE9ETy1QRVI6IFRoZSBtYXJrZXIgYXBwZWFycyB0byBnZXQgb2ZmIGJ5IG9uZSBmb3IgZWFjaCB0dW5lIHBhcnNlZC4gSSdtIG5vdCBzdXJlIHdoeSwgYnV0IGFkZGluZyB0aGUgdHVuZU51bWJlciBpbiBjb3JyZWN0cyBpdCBmb3IgdGhlIHRpbWUgYmVpbmcuXG4vL1x0dmFyIG9mZnNldCA9ICh0dW5lTnVtYmVyICE9PSB1bmRlZmluZWQpID8gdGhpcy5zdGFydFBvc1t0dW5lTnVtYmVyXSArIHR1bmVOdW1iZXIgOiAwO1xuXG5cdHRoaXMuZWRpdGFyZWEuc2V0U2VsZWN0aW9uKGFiY2VsZW0uc3RhcnRDaGFyLCBhYmNlbGVtLmVuZENoYXIpO1xuXHRpZiAodGhpcy5zZWxlY3Rpb25DaGFuZ2VDYWxsYmFjaylcblx0XHR0aGlzLnNlbGVjdGlvbkNoYW5nZUNhbGxiYWNrKGFiY2VsZW0uc3RhcnRDaGFyLCBhYmNlbGVtLmVuZENoYXIpO1xuXHRpZiAodGhpcy5jbGllbnRDbGlja0xpc3RlbmVyKVxuXHRcdHRoaXMuY2xpZW50Q2xpY2tMaXN0ZW5lcihhYmNlbGVtLCB0dW5lTnVtYmVyLCBjbGFzc2VzLCBhbmFseXNpcywgZHJhZywgbW91c2VFdmVudCk7XG59O1xuXG5FZGl0b3IucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKHNob3VsZFBhdXNlKSB7XG5cdHRoaXMuYklzUGF1c2VkID0gc2hvdWxkUGF1c2U7XG5cdGlmICghc2hvdWxkUGF1c2UpXG5cdFx0dGhpcy5maXJlQ2hhbmdlZCgpO1xufTtcblxuRWRpdG9yLnByb3RvdHlwZS5taWxsaXNlY29uZHNQZXJNZWFzdXJlID0gZnVuY3Rpb24gKCkge1xuXHRpZiAoIXRoaXMuc3ludGggfHwgIXRoaXMuc3ludGguc3ludGhDb250cm9sIHx8ICF0aGlzLnN5bnRoLnN5bnRoQ29udHJvbC52aXN1YWxPYmopXG5cdFx0cmV0dXJuIDA7XG5cdHJldHVybiB0aGlzLnN5bnRoLnN5bnRoQ29udHJvbC52aXN1YWxPYmoubWlsbGlzZWNvbmRzUGVyTWVhc3VyZSgpO1xufTtcblxuRWRpdG9yLnByb3RvdHlwZS5wYXVzZU1pZGkgPSBmdW5jdGlvbiAoc2hvdWxkUGF1c2UpIHtcblx0dGhpcy5taWRpUGF1c2UgPSBzaG91bGRQYXVzZTtcblx0aWYgKCFzaG91bGRQYXVzZSlcblx0XHR0aGlzLnJlZHJhd01pZGkoKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRWRpdG9yO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/edit/abc_editor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/midi/abc_midi_create.js":
/*!********************************************************!*\
  !*** ./node_modules/abcjs/src/midi/abc_midi_create.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_midi_create.js: Turn a linear series of events into a midi file.\n\nvar rendererFactory = __webpack_require__(/*! ../synth/abc_midi_renderer */ \"(ssr)/./node_modules/abcjs/src/synth/abc_midi_renderer.js\");\n\nvar create;\n\n(function() {\n\t\"use strict\";\n\n\tvar baseDuration = 480*4; // nice and divisible, equals 1 whole note\n\n\tcreate = function create(abcTune, options) {\n\t\tif (options === undefined) options = {};\n\t\tvar commands = abcTune.setUpAudio(options);\n\t\tvar midi = rendererFactory();\n\t\tvar title = abcTune.metaText ? abcTune.metaText.title : undefined;\n\t\tif (title && title.length > 128) title = title.substring(0, 124) + '...';\n\t\tvar key = abcTune.getKeySignature();\n\t\tvar time = abcTune.getMeterFraction();\n\n\t\t// MAE 7 July 2024 - Fix for */8 meter tempos\n\t\tvar tempo = commands.tempo;\n\n\t\tvar beatsPerSecond = tempo / 60;\n\n\t\t// Fix tempo for */8 meters\n\t\tif (time.den == 8){\n\n\t\t\t// Compute the tempo based on the actual milliseconds per measure, scaled by the number of eight notes and halved to get tempo in bpm.\n\t\t\tvar msPerMeasure = abcTune.millisecondsPerMeasure();\n\t\t\t\n\t\t\ttempo = (60000 / (msPerMeasure/time.num)) / 2;\n\t\t\t\n\t\t\tbeatsPerSecond = tempo/60;\n\n\t\t}\n\n\t\t//var beatLength = abcTune.getBeatLength();\n\t\tmidi.setGlobalInfo(tempo, title, key, time);\n\t\t\n\t\tfor (var i = 0; i < commands.tracks.length; i++) {\n\t\t\tmidi.startTrack();\n\t\t\tvar notePlacement = {};\n\t\t\tfor (var j = 0; j < commands.tracks[i].length; j++) {\n\t\t\t\tvar event = commands.tracks[i][j];\n\t\t\t\tswitch (event.cmd) {\n\t\t\t\t\tcase 'text':\n\t\t\t\t\t\tmidi.setText(event.type, event.text);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'program':\n\t\t\t\t\t\tvar pan = 0;\n\t\t\t\t\t\tif (options.pan && options.pan.length > i)\n\t\t\t\t\t\t\tpan = options.pan[i];\n\t\t\t\t\t\tif (event.instrument === 128) {\n\t\t\t\t\t\t\t// If we're using the percussion voice, change to Channel 10\n\t\t\t\t\t\t\tmidi.setChannel(9, pan);\n\t\t\t\t\t\t\tmidi.setInstrument(0);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmidi.setChannel(event.channel, pan);\n\t\t\t\t\t\t\tmidi.setInstrument(event.instrument);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'note':\n\t\t\t\t\t\tvar gapLengthInBeats = event.gap * beatsPerSecond;\n\t\t\t\t\t\tvar start = event.start;\n\t\t\t\t\t\t// The staccato and legato are indicated by event.gap.\n\t\t\t\t\t\t// event.gap is in seconds but the durations are in whole notes.\n\t\t\t\t\t\tvar end = start + event.duration - gapLengthInBeats;\n\t\t\t\t\t\tif (!notePlacement[start])\n\t\t\t\t\t\t\tnotePlacement[start] = [];\n\t\t\t\t\t\tnotePlacement[start].push({ pitch: event.pitch, volume: event.volume, cents: event.cents });\n\t\t\t\t\t\tif (!notePlacement[end])\n\t\t\t\t\t\t\tnotePlacement[end] = [];\n\t\t\t\t\t\tnotePlacement[end].push({ pitch: event.pitch, volume: 0 });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.log(\"MIDI create Unknown: \" + event.cmd);\n\t\t\t\t}\n\t\t\t}\n\t\t\taddNotes(midi, notePlacement, baseDuration);\n\t\t\tmidi.endTrack();\n\t\t}\n\n\t\treturn midi.getData();\n\t};\n\n\tfunction addNotes(midi, notePlacement, baseDuration) {\n\t\tvar times = Object.keys(notePlacement);\n\t\tfor (var h = 0; h < times.length; h++)\n\t\t\ttimes[h] = parseFloat(times[h]);\n\t\ttimes.sort(function(a,b) {\n\t\t\treturn a - b;\n\t\t});\n\t\tvar lastTime = 0;\n\t\tfor (var i = 0; i < times.length; i++) {\n\t\t\tvar events = notePlacement[times[i]];\n\t\t\tif (times[i] > lastTime) {\n\t\t\t\tvar distance = (times[i] - lastTime) * baseDuration;\n\t\t\t\tmidi.addRest(distance);\n\t\t\t\tlastTime = times[i];\n\t\t\t}\n\t\t\tfor (var j = 0; j < events.length; j++) {\n\t\t\t\tvar event = events[j];\n\t\t\t\tif (event.volume) {\n\t\t\t\t\tmidi.startNote(event.pitch, event.volume, event.cents);\n\t\t\t\t} else {\n\t\t\t\t\tmidi.endNote(event.pitch);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n})();\n\nmodule.exports = create;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL21pZGkvYWJjX21pZGlfY3JlYXRlLmpzIiwibWFwcGluZ3MiOiJBQUFBOztBQUVBLHNCQUFzQixtQkFBTyxDQUFDLDZGQUE0Qjs7QUFFMUQ7O0FBRUE7QUFDQTs7QUFFQSwyQkFBMkI7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNEJBQTRCO0FBQzlDO0FBQ0E7QUFDQSxtQkFBbUIsK0JBQStCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyw4REFBOEQ7QUFDaEc7QUFDQTtBQUNBLGdDQUFnQywrQkFBK0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG1CQUFtQjtBQUN0QztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL21pZGkvYWJjX21pZGlfY3JlYXRlLmpzPzExYjkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gICAgYWJjX21pZGlfY3JlYXRlLmpzOiBUdXJuIGEgbGluZWFyIHNlcmllcyBvZiBldmVudHMgaW50byBhIG1pZGkgZmlsZS5cblxudmFyIHJlbmRlcmVyRmFjdG9yeSA9IHJlcXVpcmUoJy4uL3N5bnRoL2FiY19taWRpX3JlbmRlcmVyJyk7XG5cbnZhciBjcmVhdGU7XG5cbihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIGJhc2VEdXJhdGlvbiA9IDQ4MCo0OyAvLyBuaWNlIGFuZCBkaXZpc2libGUsIGVxdWFscyAxIHdob2xlIG5vdGVcblxuXHRjcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoYWJjVHVuZSwgb3B0aW9ucykge1xuXHRcdGlmIChvcHRpb25zID09PSB1bmRlZmluZWQpIG9wdGlvbnMgPSB7fTtcblx0XHR2YXIgY29tbWFuZHMgPSBhYmNUdW5lLnNldFVwQXVkaW8ob3B0aW9ucyk7XG5cdFx0dmFyIG1pZGkgPSByZW5kZXJlckZhY3RvcnkoKTtcblx0XHR2YXIgdGl0bGUgPSBhYmNUdW5lLm1ldGFUZXh0ID8gYWJjVHVuZS5tZXRhVGV4dC50aXRsZSA6IHVuZGVmaW5lZDtcblx0XHRpZiAodGl0bGUgJiYgdGl0bGUubGVuZ3RoID4gMTI4KSB0aXRsZSA9IHRpdGxlLnN1YnN0cmluZygwLCAxMjQpICsgJy4uLic7XG5cdFx0dmFyIGtleSA9IGFiY1R1bmUuZ2V0S2V5U2lnbmF0dXJlKCk7XG5cdFx0dmFyIHRpbWUgPSBhYmNUdW5lLmdldE1ldGVyRnJhY3Rpb24oKTtcblxuXHRcdC8vIE1BRSA3IEp1bHkgMjAyNCAtIEZpeCBmb3IgKi84IG1ldGVyIHRlbXBvc1xuXHRcdHZhciB0ZW1wbyA9IGNvbW1hbmRzLnRlbXBvO1xuXG5cdFx0dmFyIGJlYXRzUGVyU2Vjb25kID0gdGVtcG8gLyA2MDtcblxuXHRcdC8vIEZpeCB0ZW1wbyBmb3IgKi84IG1ldGVyc1xuXHRcdGlmICh0aW1lLmRlbiA9PSA4KXtcblxuXHRcdFx0Ly8gQ29tcHV0ZSB0aGUgdGVtcG8gYmFzZWQgb24gdGhlIGFjdHVhbCBtaWxsaXNlY29uZHMgcGVyIG1lYXN1cmUsIHNjYWxlZCBieSB0aGUgbnVtYmVyIG9mIGVpZ2h0IG5vdGVzIGFuZCBoYWx2ZWQgdG8gZ2V0IHRlbXBvIGluIGJwbS5cblx0XHRcdHZhciBtc1Blck1lYXN1cmUgPSBhYmNUdW5lLm1pbGxpc2Vjb25kc1Blck1lYXN1cmUoKTtcblx0XHRcdFxuXHRcdFx0dGVtcG8gPSAoNjAwMDAgLyAobXNQZXJNZWFzdXJlL3RpbWUubnVtKSkgLyAyO1xuXHRcdFx0XG5cdFx0XHRiZWF0c1BlclNlY29uZCA9IHRlbXBvLzYwO1xuXG5cdFx0fVxuXG5cdFx0Ly92YXIgYmVhdExlbmd0aCA9IGFiY1R1bmUuZ2V0QmVhdExlbmd0aCgpO1xuXHRcdG1pZGkuc2V0R2xvYmFsSW5mbyh0ZW1wbywgdGl0bGUsIGtleSwgdGltZSk7XG5cdFx0XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjb21tYW5kcy50cmFja3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdG1pZGkuc3RhcnRUcmFjaygpO1xuXHRcdFx0dmFyIG5vdGVQbGFjZW1lbnQgPSB7fTtcblx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgY29tbWFuZHMudHJhY2tzW2ldLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHZhciBldmVudCA9IGNvbW1hbmRzLnRyYWNrc1tpXVtqXTtcblx0XHRcdFx0c3dpdGNoIChldmVudC5jbWQpIHtcblx0XHRcdFx0XHRjYXNlICd0ZXh0Jzpcblx0XHRcdFx0XHRcdG1pZGkuc2V0VGV4dChldmVudC50eXBlLCBldmVudC50ZXh0KTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3Byb2dyYW0nOlxuXHRcdFx0XHRcdFx0dmFyIHBhbiA9IDA7XG5cdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5wYW4gJiYgb3B0aW9ucy5wYW4ubGVuZ3RoID4gaSlcblx0XHRcdFx0XHRcdFx0cGFuID0gb3B0aW9ucy5wYW5baV07XG5cdFx0XHRcdFx0XHRpZiAoZXZlbnQuaW5zdHJ1bWVudCA9PT0gMTI4KSB7XG5cdFx0XHRcdFx0XHRcdC8vIElmIHdlJ3JlIHVzaW5nIHRoZSBwZXJjdXNzaW9uIHZvaWNlLCBjaGFuZ2UgdG8gQ2hhbm5lbCAxMFxuXHRcdFx0XHRcdFx0XHRtaWRpLnNldENoYW5uZWwoOSwgcGFuKTtcblx0XHRcdFx0XHRcdFx0bWlkaS5zZXRJbnN0cnVtZW50KDApO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0bWlkaS5zZXRDaGFubmVsKGV2ZW50LmNoYW5uZWwsIHBhbik7XG5cdFx0XHRcdFx0XHRcdG1pZGkuc2V0SW5zdHJ1bWVudChldmVudC5pbnN0cnVtZW50KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ25vdGUnOlxuXHRcdFx0XHRcdFx0dmFyIGdhcExlbmd0aEluQmVhdHMgPSBldmVudC5nYXAgKiBiZWF0c1BlclNlY29uZDtcblx0XHRcdFx0XHRcdHZhciBzdGFydCA9IGV2ZW50LnN0YXJ0O1xuXHRcdFx0XHRcdFx0Ly8gVGhlIHN0YWNjYXRvIGFuZCBsZWdhdG8gYXJlIGluZGljYXRlZCBieSBldmVudC5nYXAuXG5cdFx0XHRcdFx0XHQvLyBldmVudC5nYXAgaXMgaW4gc2Vjb25kcyBidXQgdGhlIGR1cmF0aW9ucyBhcmUgaW4gd2hvbGUgbm90ZXMuXG5cdFx0XHRcdFx0XHR2YXIgZW5kID0gc3RhcnQgKyBldmVudC5kdXJhdGlvbiAtIGdhcExlbmd0aEluQmVhdHM7XG5cdFx0XHRcdFx0XHRpZiAoIW5vdGVQbGFjZW1lbnRbc3RhcnRdKVxuXHRcdFx0XHRcdFx0XHRub3RlUGxhY2VtZW50W3N0YXJ0XSA9IFtdO1xuXHRcdFx0XHRcdFx0bm90ZVBsYWNlbWVudFtzdGFydF0ucHVzaCh7IHBpdGNoOiBldmVudC5waXRjaCwgdm9sdW1lOiBldmVudC52b2x1bWUsIGNlbnRzOiBldmVudC5jZW50cyB9KTtcblx0XHRcdFx0XHRcdGlmICghbm90ZVBsYWNlbWVudFtlbmRdKVxuXHRcdFx0XHRcdFx0XHRub3RlUGxhY2VtZW50W2VuZF0gPSBbXTtcblx0XHRcdFx0XHRcdG5vdGVQbGFjZW1lbnRbZW5kXS5wdXNoKHsgcGl0Y2g6IGV2ZW50LnBpdGNoLCB2b2x1bWU6IDAgfSk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJNSURJIGNyZWF0ZSBVbmtub3duOiBcIiArIGV2ZW50LmNtZCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGFkZE5vdGVzKG1pZGksIG5vdGVQbGFjZW1lbnQsIGJhc2VEdXJhdGlvbik7XG5cdFx0XHRtaWRpLmVuZFRyYWNrKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1pZGkuZ2V0RGF0YSgpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGFkZE5vdGVzKG1pZGksIG5vdGVQbGFjZW1lbnQsIGJhc2VEdXJhdGlvbikge1xuXHRcdHZhciB0aW1lcyA9IE9iamVjdC5rZXlzKG5vdGVQbGFjZW1lbnQpO1xuXHRcdGZvciAodmFyIGggPSAwOyBoIDwgdGltZXMubGVuZ3RoOyBoKyspXG5cdFx0XHR0aW1lc1toXSA9IHBhcnNlRmxvYXQodGltZXNbaF0pO1xuXHRcdHRpbWVzLnNvcnQoZnVuY3Rpb24oYSxiKSB7XG5cdFx0XHRyZXR1cm4gYSAtIGI7XG5cdFx0fSk7XG5cdFx0dmFyIGxhc3RUaW1lID0gMDtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRpbWVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZXZlbnRzID0gbm90ZVBsYWNlbWVudFt0aW1lc1tpXV07XG5cdFx0XHRpZiAodGltZXNbaV0gPiBsYXN0VGltZSkge1xuXHRcdFx0XHR2YXIgZGlzdGFuY2UgPSAodGltZXNbaV0gLSBsYXN0VGltZSkgKiBiYXNlRHVyYXRpb247XG5cdFx0XHRcdG1pZGkuYWRkUmVzdChkaXN0YW5jZSk7XG5cdFx0XHRcdGxhc3RUaW1lID0gdGltZXNbaV07XG5cdFx0XHR9XG5cdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGV2ZW50cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHR2YXIgZXZlbnQgPSBldmVudHNbal07XG5cdFx0XHRcdGlmIChldmVudC52b2x1bWUpIHtcblx0XHRcdFx0XHRtaWRpLnN0YXJ0Tm90ZShldmVudC5waXRjaCwgZXZlbnQudm9sdW1lLCBldmVudC5jZW50cyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bWlkaS5lbmROb3RlKGV2ZW50LnBpdGNoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG59KSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/midi/abc_midi_create.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/parse/abc_common.js":
/*!****************************************************!*\
  !*** ./node_modules/abcjs/src/parse/abc_common.js ***!
  \****************************************************/
/***/ ((module) => {

eval("//    abc_common.js: Some common utility functions.\n\nvar parseCommon = {};\n\nparseCommon.cloneArray = function(source) {\n\tvar destination = [];\n\tfor (var i = 0; i < source.length; i++) {\n\t\tdestination.push(Object.assign({},source[i]));\n\t}\n\treturn destination;\n};\n\nparseCommon.cloneHashOfHash = function(source) {\n\tvar destination = {};\n\tfor (var property in source)\n\t\tif (source.hasOwnProperty(property))\n\t\t\tdestination[property] = Object.assign({},source[property]);\n\treturn destination;\n};\n\nparseCommon.cloneHashOfArrayOfHash = function(source) {\n\tvar destination = {};\n\tfor (var property in source)\n\t\tif (source.hasOwnProperty(property))\n\t\t\tdestination[property] = parseCommon.cloneArray(source[property]);\n\treturn destination;\n};\n\nparseCommon.strip = function(str) {\n\treturn str.replace(/^\\s+/, '').replace(/\\s+$/, '');\n};\n\nparseCommon.startsWith = function(str, pattern) {\n\treturn str.indexOf(pattern) === 0;\n};\n\nparseCommon.endsWith = function(str, pattern) {\n\tvar d = str.length - pattern.length;\n\treturn d >= 0 && str.lastIndexOf(pattern) === d;\n};\n\nparseCommon.last = function(arr) {\n\tif (arr.length === 0)\n\t\treturn null;\n\treturn arr[arr.length-1];\n};\n\n\nmodule.exports = parseCommon;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL2FiY19jb21tb24uanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixtQkFBbUI7QUFDcEMsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvcGFyc2UvYWJjX2NvbW1vbi5qcz80MzA1Il0sInNvdXJjZXNDb250ZW50IjpbIi8vICAgIGFiY19jb21tb24uanM6IFNvbWUgY29tbW9uIHV0aWxpdHkgZnVuY3Rpb25zLlxuXG52YXIgcGFyc2VDb21tb24gPSB7fTtcblxucGFyc2VDb21tb24uY2xvbmVBcnJheSA9IGZ1bmN0aW9uKHNvdXJjZSkge1xuXHR2YXIgZGVzdGluYXRpb24gPSBbXTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcblx0XHRkZXN0aW5hdGlvbi5wdXNoKE9iamVjdC5hc3NpZ24oe30sc291cmNlW2ldKSk7XG5cdH1cblx0cmV0dXJuIGRlc3RpbmF0aW9uO1xufTtcblxucGFyc2VDb21tb24uY2xvbmVIYXNoT2ZIYXNoID0gZnVuY3Rpb24oc291cmNlKSB7XG5cdHZhciBkZXN0aW5hdGlvbiA9IHt9O1xuXHRmb3IgKHZhciBwcm9wZXJ0eSBpbiBzb3VyY2UpXG5cdFx0aWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpXG5cdFx0XHRkZXN0aW5hdGlvbltwcm9wZXJ0eV0gPSBPYmplY3QuYXNzaWduKHt9LHNvdXJjZVtwcm9wZXJ0eV0pO1xuXHRyZXR1cm4gZGVzdGluYXRpb247XG59O1xuXG5wYXJzZUNvbW1vbi5jbG9uZUhhc2hPZkFycmF5T2ZIYXNoID0gZnVuY3Rpb24oc291cmNlKSB7XG5cdHZhciBkZXN0aW5hdGlvbiA9IHt9O1xuXHRmb3IgKHZhciBwcm9wZXJ0eSBpbiBzb3VyY2UpXG5cdFx0aWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpXG5cdFx0XHRkZXN0aW5hdGlvbltwcm9wZXJ0eV0gPSBwYXJzZUNvbW1vbi5jbG9uZUFycmF5KHNvdXJjZVtwcm9wZXJ0eV0pO1xuXHRyZXR1cm4gZGVzdGluYXRpb247XG59O1xuXG5wYXJzZUNvbW1vbi5zdHJpcCA9IGZ1bmN0aW9uKHN0cikge1xuXHRyZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrLywgJycpLnJlcGxhY2UoL1xccyskLywgJycpO1xufTtcblxucGFyc2VDb21tb24uc3RhcnRzV2l0aCA9IGZ1bmN0aW9uKHN0ciwgcGF0dGVybikge1xuXHRyZXR1cm4gc3RyLmluZGV4T2YocGF0dGVybikgPT09IDA7XG59O1xuXG5wYXJzZUNvbW1vbi5lbmRzV2l0aCA9IGZ1bmN0aW9uKHN0ciwgcGF0dGVybikge1xuXHR2YXIgZCA9IHN0ci5sZW5ndGggLSBwYXR0ZXJuLmxlbmd0aDtcblx0cmV0dXJuIGQgPj0gMCAmJiBzdHIubGFzdEluZGV4T2YocGF0dGVybikgPT09IGQ7XG59O1xuXG5wYXJzZUNvbW1vbi5sYXN0ID0gZnVuY3Rpb24oYXJyKSB7XG5cdGlmIChhcnIubGVuZ3RoID09PSAwKVxuXHRcdHJldHVybiBudWxsO1xuXHRyZXR1cm4gYXJyW2Fyci5sZW5ndGgtMV07XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gcGFyc2VDb21tb247XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/parse/abc_common.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/parse/abc_parse.js":
/*!***************************************************!*\
  !*** ./node_modules/abcjs/src/parse/abc_parse.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_parse.js: parses a string representing ABC Music Notation into a usable internal structure.\n\nvar parseCommon = __webpack_require__(/*! ./abc_common */ \"(ssr)/./node_modules/abcjs/src/parse/abc_common.js\");\nvar parseDirective = __webpack_require__(/*! ./abc_parse_directive */ \"(ssr)/./node_modules/abcjs/src/parse/abc_parse_directive.js\");\nvar ParseHeader = __webpack_require__(/*! ./abc_parse_header */ \"(ssr)/./node_modules/abcjs/src/parse/abc_parse_header.js\");\nvar ParseMusic = __webpack_require__(/*! ./abc_parse_music */ \"(ssr)/./node_modules/abcjs/src/parse/abc_parse_music.js\");\nvar Tokenizer = __webpack_require__(/*! ./abc_tokenizer */ \"(ssr)/./node_modules/abcjs/src/parse/abc_tokenizer.js\");\nvar wrap = __webpack_require__(/*! ./wrap_lines */ \"(ssr)/./node_modules/abcjs/src/parse/wrap_lines.js\");\n\nvar Tune = __webpack_require__(/*! ../data/abc_tune */ \"(ssr)/./node_modules/abcjs/src/data/abc_tune.js\");\nvar TuneBuilder = __webpack_require__(/*! ../parse/tune-builder */ \"(ssr)/./node_modules/abcjs/src/parse/tune-builder.js\");\n\nvar Parse = function() {\n\t\"use strict\";\n\tvar tune = new Tune();\n\tvar tuneBuilder = new TuneBuilder(tune);\n\tvar tokenizer;\n\tvar wordsContinuation = '';\n\tvar symbolContinuation = '';\n\n\tthis.getTune = function() {\n\t\tvar t = {\n\t\t\tformatting: tune.formatting,\n\t\t\tlines: tune.lines,\n\t\t\tmedia: tune.media,\n\t\t\tmetaText: tune.metaText,\n\t\t\tmetaTextInfo: tune.metaTextInfo,\n\t\t\tversion: tune.version,\n\n\t\t\taddElementToEvents: tune.addElementToEvents,\n\t\t\taddUsefulCallbackInfo: tune.addUsefulCallbackInfo,\n\t\t\tgetTotalTime: tune.getTotalTime,\n\t\t\tgetTotalBeats: tune.getTotalBeats,\n\t\t\tgetBarLength: tune.getBarLength,\n\t\t\tgetBeatLength: tune.getBeatLength,\n\t\t\tgetBeatsPerMeasure: tune.getBeatsPerMeasure,\n\t\t\tgetBpm: tune.getBpm,\n\t\t\tgetMeter: tune.getMeter,\n\t\t\tgetMeterFraction: tune.getMeterFraction,\n\t\t\tgetPickupLength: tune.getPickupLength,\n\t\t\tgetKeySignature: tune.getKeySignature,\n\t\t\tgetElementFromChar: tune.getElementFromChar,\n\t\t\tmakeVoicesArray: tune.makeVoicesArray,\n\t\t\tmillisecondsPerMeasure: tune.millisecondsPerMeasure,\n\t\t\tsetupEvents: tune.setupEvents,\n\t\t\tsetTiming: tune.setTiming,\n\t\t\tsetUpAudio: tune.setUpAudio,\n\t\t\tdeline: tune.deline,\n\t\t\tfindSelectableElement: tune.findSelectableElement,\n\t\t\tgetSelectableArray: tune.getSelectableArray,\n\t\t};\n\t\tif (tune.lineBreaks)\n\t\t\tt.lineBreaks = tune.lineBreaks;\n\t\tif (tune.visualTranspose)\n\t\t\tt.visualTranspose = tune.visualTranspose;\n\t\treturn t;\n\t};\n\n\tfunction addPositioning(el, type, value) {\n\t\tif (!el.positioning) el.positioning = {};\n\t\tel.positioning[type] = value;\n\t}\n\n\tfunction addFont(el, type, value) {\n\t\tif (!el.fonts) el.fonts = {};\n\t\tel.fonts[type] = value;\n\t}\n\n\tvar multilineVars = {\n\t\treset: function() {\n\t\t\tfor (var property in this) {\n\t\t\t\tif (this.hasOwnProperty(property) && typeof this[property] !== \"function\") {\n\t\t\t\t\tdelete this[property];\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.iChar = 0;\n\t\t\tthis.key = {accidentals: [], root: 'none', acc: '', mode: '' };\n\t\t\tthis.meter = null; // if no meter is specified, free meter is assumed\n\t\t\tthis.origMeter = null;\t// this is for new voices that are created after we set the meter.\n\t\t\tthis.hasMainTitle = false;\n\t\t\tthis.default_length = 0.125;\n\t\t\tthis.clef = { type: 'treble', verticalPos: 0 };\n\t\t\tthis.octave = 0;\n\t\t\tthis.next_note_duration = 0;\n\t\t\tthis.start_new_line = true;\n\t\t\tthis.is_in_header = true;\n\t\t\tthis.partForNextLine = {};\n\t\t\tthis.tempoForNextLine = [];\n\t\t\tthis.havent_set_length = true;\n\t\t\tthis.voices = {};\n\t\t\tthis.staves = [];\n\t\t\tthis.macros = {};\n\t\t\tthis.currBarNumber = 1;\n\t\t\tthis.barCounter = {};\n\t\t\tthis.ignoredDecorations = [];\n\t\t\tthis.score_is_present = false;\t// Can't have original V: lines when there is the score directive\n\t\t\tthis.inEnding = false;\n\t\t\tthis.inTie = [];\n\t\t\tthis.inTieChord = {};\n\t\t\tthis.vocalPosition = \"auto\";\n\t\t\tthis.dynamicPosition = \"auto\";\n\t\t\tthis.chordPosition = \"auto\";\n\t\t\tthis.ornamentPosition = \"auto\";\n\t\t\tthis.volumePosition = \"auto\";\n\t\t\tthis.openSlurs = [];\n\t\t\tthis.freegchord = false;\n\t\t\tthis.endingHoldOver = {};\n\t\t},\n\t\tdifferentFont: function(type, defaultFonts) {\n\t\t\tif (this[type].decoration !== defaultFonts[type].decoration) return true;\n\t\t\tif (this[type].face !== defaultFonts[type].face) return true;\n\t\t\tif (this[type].size !== defaultFonts[type].size) return true;\n\t\t\tif (this[type].style !== defaultFonts[type].style) return true;\n\t\t\tif (this[type].weight !== defaultFonts[type].weight) return true;\n\t\t\treturn false;\n\t\t},\n\t\taddFormattingOptions: function(el, defaultFonts, elType) {\n\t\t\tif (elType === 'note') {\n\t\t\t\tif (this.vocalPosition !== 'auto') addPositioning(el, 'vocalPosition', this.vocalPosition);\n\t\t\t\tif (this.dynamicPosition !== 'auto') addPositioning(el, 'dynamicPosition', this.dynamicPosition);\n\t\t\t\tif (this.chordPosition !== 'auto') addPositioning(el, 'chordPosition', this.chordPosition);\n\t\t\t\tif (this.ornamentPosition !== 'auto') addPositioning(el, 'ornamentPosition', this.ornamentPosition);\n\t\t\t\tif (this.volumePosition !== 'auto') addPositioning(el, 'volumePosition', this.volumePosition);\n\t\t\t\tif (this.differentFont(\"annotationfont\", defaultFonts)) addFont(el, 'annotationfont', this.annotationfont);\n\t\t\t\tif (this.differentFont(\"gchordfont\", defaultFonts)) addFont(el, 'gchordfont', this.gchordfont);\n\t\t\t\tif (this.differentFont(\"vocalfont\", defaultFonts)) addFont(el, 'vocalfont', this.vocalfont);\n\t\t\t\tif (this.differentFont(\"tripletfont\", defaultFonts)) addFont(el, 'tripletfont', this.tripletfont);\n\t\t\t} else if (elType === 'bar') {\n\t\t\t\tif (this.dynamicPosition !== 'auto') addPositioning(el, 'dynamicPosition', this.dynamicPosition);\n\t\t\t\tif (this.chordPosition !== 'auto') addPositioning(el, 'chordPosition', this.chordPosition);\n\t\t\t\tif (this.ornamentPosition !== 'auto') addPositioning(el, 'ornamentPosition', this.ornamentPosition);\n\t\t\t\tif (this.volumePosition !== 'auto') addPositioning(el, 'volumePosition', this.volumePosition);\n\t\t\t\tif (this.differentFont(\"measurefont\", defaultFonts)) addFont(el, 'measurefont', this.measurefont);\n\t\t\t\tif (this.differentFont(\"repeatfont\", defaultFonts)) addFont(el, 'repeatfont', this.repeatfont);\n\t\t\t}\n\t\t},\n\t\tduplicateStartEndingHoldOvers: function() {\n\t\t\tthis.endingHoldOver = {\n\t\t\t\tinTie: [],\n\t\t\t\tinTieChord: {}\n\t\t\t};\n\t\t\tfor (var i = 0; i < this.inTie.length; i++) {\n\t\t\t\tthis.endingHoldOver.inTie.push([]);\n\t\t\t\tif (this.inTie[i]) { // if a voice is suppressed there might be a gap in the array.\n\t\t\t\t\tfor (var j = 0; j < this.inTie[i].length; j++) {\n\t\t\t\t\t\tthis.endingHoldOver.inTie[i].push(this.inTie[i][j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var key in this.inTieChord) {\n\t\t\t\tif (this.inTieChord.hasOwnProperty(key))\n\t\t\t\t\tthis.endingHoldOver.inTieChord[key] = this.inTieChord[key];\n\t\t\t}\n\t\t},\n\t\trestoreStartEndingHoldOvers: function() {\n\t\t\tif (!this.endingHoldOver.inTie)\n\t\t\t\treturn;\n\t\t\tthis.inTie = [];\n\t\t\tthis.inTieChord = {};\n\t\t\tfor (var i = 0; i < this.endingHoldOver.inTie.length; i++) {\n\t\t\t\tthis.inTie.push([]);\n\t\t\t\tfor (var j = 0; j < this.endingHoldOver.inTie[i].length; j++) {\n\t\t\t\t\tthis.inTie[i].push(this.endingHoldOver.inTie[i][j]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var key in this.endingHoldOver.inTieChord) {\n\t\t\t\tif (this.endingHoldOver.inTieChord.hasOwnProperty(key))\n\t\t\t\t\tthis.inTieChord[key] = this.endingHoldOver.inTieChord[key];\n\t\t\t}\n\t\t},\n\t};\n\n\tvar addWarning = function(str) {\n\t\tif (!multilineVars.warnings)\n\t\t\tmultilineVars.warnings = [];\n\t\tmultilineVars.warnings.push(str);\n\t};\n\n\tvar addWarningObject = function(warningObject) {\n\t\tif (!multilineVars.warningObjects)\n\t\t\tmultilineVars.warningObjects = [];\n\t\tmultilineVars.warningObjects.push(warningObject);\n\t};\n\n\tvar encode = function(str) {\n\t\tvar ret = str.replace(/\\x12/g, ' ');\n\t\tret = ret.replace(/&/g, '&amp;');\n\t\tret = ret.replace(/</g, '&lt;');\n\t\treturn ret.replace(/>/g, '&gt;');\n\t};\n\n\tvar warn = function(str, line, col_num) {\n\t\tif (!line) line = \" \";\n\t\tvar bad_char = line[col_num];\n\t\tif (bad_char === ' ' || !bad_char)\n\t\t\tbad_char = \"SPACE\";\n\t\tvar clean_line = encode(line.substring(col_num - 64, col_num)) + '<span style=\"text-decoration:underline;font-size:1.3em;font-weight:bold;\">' + bad_char + '</span>' + encode(line.substring(col_num + 1).substring(0,64));\n\t\taddWarning(\"Music Line:\" + tokenizer.lineIndex + \":\" + (col_num+1) + ': ' + str + \":  \" + clean_line);\n\t\taddWarningObject({message:str, line:line, startChar: multilineVars.iChar + col_num, column: col_num});\n\t};\n\n\tvar header;\n\tvar music;\n\n\tthis.getWarnings = function() {\n\t\treturn multilineVars.warnings;\n\t};\n\tthis.getWarningObjects = function() {\n\t\treturn multilineVars.warningObjects;\n\t};\n\n\tvar addWords = function(line, words) {\n\t\tif (words.indexOf('\\x12') >= 0) {\n\t\t\twordsContinuation += words\n\t\t\treturn\n\t\t}\n\t\twords = wordsContinuation + words\n\t\twordsContinuation = ''\n\n\t\tif (!line) { warn(\"Can't add words before the first line of music\", line, 0); return; }\n\t\twords = parseCommon.strip(words);\n\t\tif (words[words.length-1] !== '-')\n\t\t\twords = words + ' ';\t// Just makes it easier to parse below, since every word has a divider after it.\n\t\tvar word_list = [];\n\t\t// first make a list of words from the string we are passed. A word is divided on either a space or dash.\n\t\tvar last_divider = 0;\n\t\tvar replace = false;\n\t\tvar addWord = function(i) {\n\t\t\tvar word = parseCommon.strip(words.substring(last_divider, i));\n\t\t\tword = word.replace(/\\\\([-_*|~])/g, '$1')\n\t\t\tlast_divider = i+1;\n\t\t\tif (word.length > 0) {\n\t\t\t\tif (replace)\n\t\t\t\t\tword = word.replace(/~/g, ' ');\n\t\t\t\tvar div = words[i];\n\t\t\t\tif (div !== '_' && div !== '-')\n\t\t\t\t\tdiv = ' ';\n\t\t\t\tword_list.push({syllable: tokenizer.translateString(word), divider: div});\n\t\t\t\treplace = false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tvar escNext = false;\n\t\tfor (var i = 0; i < words.length; i++) {\n\t\t\tswitch (words[i]) {\n\t\t\t\tcase ' ':\n\t\t\t\tcase '\\x12':\n\t\t\t\t\taddWord(i);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '-':\n\t\t\t\t\tif (!escNext && !addWord(i) && word_list.length > 0) {\n\t\t\t\t\t\tparseCommon.last(word_list).divider = '-';\n\t\t\t\t\t\tword_list.push({skip: true, to: 'next'});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase '_':\n\t\t\t\t\tif (!escNext) {\n\t\t\t\t\t\taddWord(i);\n\t\t\t\t\t\tword_list.push({skip: true, to: 'slur'});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase '*':\n\t\t\t\t\tif (!escNext) {\n\t\t\t\t\t\taddWord(i);\n\t\t\t\t\t\tword_list.push({skip: true, to: 'next'});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase '|':\n\t\t\t\t\tif (!escNext) {\n\t\t\t\t\t\taddWord(i);\n\t\t\t\t\t\tword_list.push({skip: true, to: 'bar'});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase '~':\n\t\t\t\t\tif (!escNext) {\n\t\t\t\t\t\treplace = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tescNext = words[i] === '\\\\'\n\t\t}\n\n\t\tvar inSlur = false;\n\t\tline.forEach(function(el) {\n\t\t\tif (word_list.length !== 0) {\n\t\t\t\tif (word_list[0].skip) {\n\t\t\t\t\tswitch (word_list[0].to) {\n\t\t\t\t\t\tcase 'next': if (el.el_type === 'note' && el.pitches !== null && !inSlur) word_list.shift(); break;\n\t\t\t\t\t\tcase 'slur': if (el.el_type === 'note' && el.pitches !== null) word_list.shift(); break;\n\t\t\t\t\t\tcase 'bar': if (el.el_type === 'bar') word_list.shift(); break;\n\t\t\t\t\t}\n\t\t\t\t\tif (el.el_type !== 'bar') {\n\t\t\t\t\t\tif (el.lyric === undefined)\n\t\t\t\t\t\t\tel.lyric = [{syllable: \"\", divider: \" \"}];\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tel.lyric.push({syllable: \"\", divider: \" \"});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (el.el_type === 'note' && el.rest === undefined && !inSlur) {\n\t\t\t\t\t\tvar lyric = word_list.shift();\n\t\t\t\t\t\tif (lyric.syllable)\n\t\t\t\t\t\t\tlyric.syllable = lyric.syllable.replace(/ +/g,'\\xA0');\n\t\t\t\t\t\tif (el.lyric === undefined)\n\t\t\t\t\t\t\tel.lyric = [ lyric ];\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tel.lyric.push(lyric);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tvar addSymbols = function(line, words) {\n\t\tif (words.indexOf('\\x12') >= 0) {\n\t\t\tsymbolContinuation += words\n\t\t\treturn\n\t\t}\n\t\twords = symbolContinuation + words\n\t\tsymbolContinuation = ''\n\n\t\t// TODO-PER: Currently copied from w: line. This needs to be read as symbols instead.\n\t\tif (!line) { warn(\"Can't add symbols before the first line of music\", line, 0); return; }\n\t\twords = parseCommon.strip(words);\n\t\tif (words[words.length-1] !== '-')\n\t\t\twords = words + ' ';\t// Just makes it easier to parse below, since every word has a divider after it.\n\t\tvar word_list = [];\n\t\t// first make a list of words from the string we are passed. A word is divided on either a space or dash.\n\t\tvar last_divider = 0;\n\t\tvar replace = false;\n\t\tvar addWord = function(i) {\n\t\t\tvar word = parseCommon.strip(words.substring(last_divider, i));\n\t\t\tlast_divider = i+1;\n\t\t\tif (word.length > 0) {\n\t\t\t\tif (replace)\n\t\t\t\t\tword = word.replace(/~/g, ' ');\n\t\t\t\tvar div = words[i];\n\t\t\t\tif (div !== '_' && div !== '-')\n\t\t\t\t\tdiv = ' ';\n\t\t\t\tword_list.push({syllable: tokenizer.translateString(word), divider: div});\n\t\t\t\treplace = false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tfor (var i = 0; i < words.length; i++) {\n\t\t\tswitch (words[i]) {\n\t\t\t\tcase ' ':\n\t\t\t\tcase '\\x12':\n\t\t\t\t\taddWord(i);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '-':\n\t\t\t\t\tif (!addWord(i) && word_list.length > 0) {\n\t\t\t\t\t\tparseCommon.last(word_list).divider = '-';\n\t\t\t\t\t\tword_list.push({skip: true, to: 'next'});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase '_':\n\t\t\t\t\taddWord(i);\n\t\t\t\t\tword_list.push({skip: true, to: 'slur'});\n\t\t\t\t\tbreak;\n\t\t\t\tcase '*':\n\t\t\t\t\taddWord(i);\n\t\t\t\t\tword_list.push({skip: true, to: 'next'});\n\t\t\t\t\tbreak;\n\t\t\t\tcase '|':\n\t\t\t\t\taddWord(i);\n\t\t\t\t\tword_list.push({skip: true, to: 'bar'});\n\t\t\t\t\tbreak;\n\t\t\t\tcase '~':\n\t\t\t\t\treplace = true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tvar inSlur = false;\n\t\tline.forEach(function(el) {\n\t\t\tif (word_list.length !== 0) {\n\t\t\t\tif (word_list[0].skip) {\n\t\t\t\t\tswitch (word_list[0].to) {\n\t\t\t\t\t\tcase 'next': if (el.el_type === 'note' && el.pitches !== null && !inSlur) word_list.shift(); break;\n\t\t\t\t\t\tcase 'slur': if (el.el_type === 'note' && el.pitches !== null) word_list.shift(); break;\n\t\t\t\t\t\tcase 'bar': if (el.el_type === 'bar') word_list.shift(); break;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (el.el_type === 'note' && el.rest === undefined && !inSlur) {\n\t\t\t\t\t\tvar lyric = word_list.shift();\n\t\t\t\t\t\tif (el.lyric === undefined)\n\t\t\t\t\t\t\tel.lyric = [ lyric ];\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tel.lyric.push(lyric);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tvar parseLine = function(line) {\n\t\tif (parseCommon.startsWith(line, '%%')) {\n\t\t\tvar err = parseDirective.addDirective(line.substring(2));\n\t\t\tif (err) warn(err, line, 2);\n\t\t\treturn;\n\t\t}\n\n\t\tvar i = line.indexOf('%');\n\t\tif (i >= 0)\n\t\t\tline = line.substring(0, i);\n\t\tline = line.replace(/\\s+$/, '');\n\n\t\tif (line.length === 0)\n\t\t\treturn;\n\n\t\tif (wordsContinuation) {\n\t\t\taddWords(tuneBuilder.getCurrentVoice(), line.substring(2));\n\t\t\treturn\n\t\t}\n\t\tif (symbolContinuation) {\n\t\t\taddSymbols(tuneBuilder.getCurrentVoice(), line.substring(2));\n\t\t\treturn\n\t\t}\n\t\tif (line.length < 2 || line[1] !== ':' || music.lineContinuation) {\n\t\t\tmusic.parseMusic(line);\n\t\t\treturn\n\t\t}\n\n\t\tvar ret = header.parseHeader(line);\n\t\tif (ret.regular)\n\t\t\tmusic.parseMusic(line);\n\t\tif (ret.newline)\n\t\t\tmusic.startNewLine();\n\t\tif (ret.words)\n\t\t\taddWords(tuneBuilder.getCurrentVoice(), line.substring(2));\n\t\tif (ret.symbols)\n\t\t\taddSymbols(tuneBuilder.getCurrentVoice(), line.substring(2));\n\t};\n\n\tfunction appendLastMeasure(voice, nextVoice) {\n\t\tvoice.push({\n\t\t\tel_type: 'hint'\n\t\t});\n\t\tfor (var i = 0; i < nextVoice.length; i++) {\n\t\t\tvar element = nextVoice[i];\n\t\t\tvar hint = Object.assign({},element);\n\t\t\tvoice.push(hint);\n\t\t\tif (element.el_type === 'bar')\n\t\t\t\t\treturn;\n\t\t}\n\t}\n\n\tfunction addHintMeasure(staff, nextStaff) {\n\t\tfor (var i = 0; i < staff.length; i++) {\n\t\t\tvar stave = staff[i];\n\t\t\tvar nextStave = nextStaff[i];\n\t\t\tif (nextStave) { // Be sure there is the same number of staves on the next line.\n\t\t\t\tfor (var j = 0; j < nextStave.voices.length; j++) {\n\t\t\t\t\tvar nextVoice = nextStave.voices[j];\n\t\t\t\t\tvar voice = stave.voices[j];\n\t\t\t\t\tif (voice) { // Be sure there are the same number of voices on the previous line.\n\t\t\t\t\t\tappendLastMeasure(voice, nextVoice);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction addHintMeasures() {\n\t\tfor (var i = 0; i < tune.lines.length; i++) {\n\t\t\tvar line = tune.lines[i].staff;\n\t\t\tif (line) {\n\t\t\t\tvar j = i+1;\n\t\t\t\twhile (j < tune.lines.length && tune.lines[j].staff === undefined)\n\t\t\t\t\tj++;\n\t\t\t\tif (j < tune.lines.length) {\n\t\t\t\t\tvar nextLine = tune.lines[j].staff;\n\t\t\t\t\taddHintMeasure(line, nextLine);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.parse = function(strTune, switches, startPos) {\n\t\t// the switches are optional and cause a difference in the way the tune is parsed.\n\t\t// switches.header_only : stop parsing when the header is finished\n\t\t// switches.stop_on_warning : stop at the first warning encountered.\n\t\t// switches.print: format for the page instead of the browser.\n\t\t// switches.format: a hash of the desired formatting commands.\n\t\t// switches.hint_measures: put the next measure at the end of the current line.\n\t\t// switches.transpose: change the key signature, chords, and notes by a number of half-steps.\n\t\tif (!switches) switches = {};\n\t\tif (!startPos) startPos = 0;\n\t\ttune.reset();\n\n\t\t// Take care of whatever line endings come our way\n\t\t// Tack on newline temporarily to make the last line continuation work\n\t\tstrTune = strTune.replace(/\\r\\n?/g, '\\n') + '\\n';\n\n\t\t// get rid of latex commands. If a line starts with a backslash, then it is replaced by spaces to keep the character count the same.\n\t\tvar arr = strTune.split(\"\\n\\\\\");\n\t\tif (arr.length > 1) {\n\t\t\tfor (var i2 = 1; i2 < arr.length; i2++) {\n\t\t\t\twhile (arr[i2].length > 0 && arr[i2][0] !== \"\\n\") {\n\t\t\t\t\tarr[i2] = arr[i2].substr(1);\n\t\t\t\t\tarr[i2-1] += ' ';\n\t\t\t\t}\n\t\t\t}\n\t\t\tstrTune = arr.join(\"  \"); //. the split removed two characters, so this puts them back\n\t\t}\n\t\t// take care of line continuations right away, but keep the same number of characters\n\t\tstrTune = strTune.replace(/\\\\([ \\t]*)(%.*)*\\n/g, function(all, backslash, comment){\n\t\t\tvar padding = comment ? Array(comment.length +1).join(' ') : \"\";\n\t\t\treturn backslash + \"\\x12\" + padding + '\\n';\n\t\t});\n\t\tvar lines = strTune.split('\\n')\n\t\tif (parseCommon.last(lines).length === 0)\t// remove the blank line we added above.\n\t\t\tlines.pop();\n\t\ttokenizer = new Tokenizer(lines, multilineVars);\n\t\theader = new ParseHeader(tokenizer, warn, multilineVars, tune, tuneBuilder);\n\t\tmusic = new ParseMusic(tokenizer, warn, multilineVars, tune, tuneBuilder, header);\n\n\t\tif (switches.print)\n\t\t\ttune.media = 'print';\n\t\tmultilineVars.reset();\n\t\tmultilineVars.iChar = startPos;\n\t\tif (switches.visualTranspose) {\n\t\t\tmultilineVars.globalTranspose = parseInt(switches.visualTranspose);\n\t\t\tif (multilineVars.globalTranspose === 0)\n\t\t\t\tmultilineVars.globalTranspose = undefined;\n\t\t\telse\n\t\t\t\ttuneBuilder.setVisualTranspose(switches.visualTranspose);\n\t\t} else\n\t\t\tmultilineVars.globalTranspose = undefined;\n\t\tif (switches.lineBreaks) {\n\t\t\t// The line break numbers are 0-based and they reflect the last measure of the current line.\n\t\t\tmultilineVars.lineBreaks = switches.lineBreaks;\n\t\t\t//multilineVars.continueall = true;\n\t\t}\n\t\theader.reset(tokenizer, warn, multilineVars, tune);\n\n\t\ttry {\n\t\t\tif (switches.format) {\n\t\t\t\tparseDirective.globalFormatting(switches.format);\n\t\t\t}\n\t\t\tvar line = tokenizer.nextLine();\n\t\t\twhile (line) {\n\t\t\t\tif (switches.header_only && multilineVars.is_in_header === false)\n\t\t\t\t\tthrow \"normal_abort\";\n\t\t\t\tif (switches.stop_on_warning && multilineVars.warnings)\n\t\t\t\t\tthrow \"normal_abort\";\n\n\t\t\t\tvar wasInHeader = multilineVars.is_in_header;\n\t\t\t\tparseLine(line);\n\t\t\t\tif (wasInHeader && !multilineVars.is_in_header) {\n\t\t\t\t\ttuneBuilder.setRunningFont(\"annotationfont\", multilineVars.annotationfont);\n\t\t\t\t\ttuneBuilder.setRunningFont(\"gchordfont\", multilineVars.gchordfont);\n\t\t\t\t\ttuneBuilder.setRunningFont(\"tripletfont\", multilineVars.tripletfont);\n\t\t\t\t\ttuneBuilder.setRunningFont(\"vocalfont\", multilineVars.vocalfont);\n\t\t\t\t}\n\t\t\t\tline = tokenizer.nextLine();\n\t\t\t}\n\n\t\t\tif (wordsContinuation) {\n\t\t\t\taddWords(tuneBuilder.getCurrentVoice(), '');\n\t\t\t}\n\t\t\tif (symbolContinuation) {\n\t\t\t\taddSymbols(tuneBuilder.getCurrentVoice(), '');\n\t\t\t}\n\t\t\tmultilineVars.openSlurs = tuneBuilder.cleanUp(multilineVars.barsperstaff, multilineVars.staffnonote, multilineVars.openSlurs);\n\n\t\t} catch (err) {\n\t\t\tif (err !== \"normal_abort\")\n\t\t\t\tthrow err;\n\t\t}\n\n\t\tvar ph = 11*72;\n\t\tvar pl = 8.5*72;\n\t\tswitch (multilineVars.papersize) {\n\t\t\t//case \"letter\": ph = 11*72; pl = 8.5*72; break;\n\t\t\tcase \"legal\": ph = 14*72; pl = 8.5*72; break;\n\t\t\tcase \"A4\": ph = 11.7*72; pl = 8.3*72; break;\n\t\t}\n\t\tif (multilineVars.landscape) {\n\t\t\tvar x = ph;\n\t\t\tph = pl;\n\t\t\tpl = x;\n\t\t}\n\t\tif (!tune.formatting.pagewidth)\n\t\t\ttune.formatting.pagewidth = pl;\n\t\tif (!tune.formatting.pageheight)\n\t\t\ttune.formatting.pageheight = ph;\n\n\t\tif (switches.hint_measures) {\n\t\t\taddHintMeasures();\n\t\t}\n\n\t\twrap.wrapLines(tune, multilineVars.lineBreaks, multilineVars.barNumbers);\n\t};\n};\n\nmodule.exports = Parse;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL2FiY19wYXJzZS5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxrQkFBa0IsbUJBQU8sQ0FBQyx3RUFBYztBQUN4QyxxQkFBcUIsbUJBQU8sQ0FBQywwRkFBdUI7QUFDcEQsa0JBQWtCLG1CQUFPLENBQUMsb0ZBQW9CO0FBQzlDLGlCQUFpQixtQkFBTyxDQUFDLGtGQUFtQjtBQUM1QyxnQkFBZ0IsbUJBQU8sQ0FBQyw4RUFBaUI7QUFDekMsV0FBVyxtQkFBTyxDQUFDLHdFQUFjOztBQUVqQyxXQUFXLG1CQUFPLENBQUMseUVBQWtCO0FBQ3JDLGtCQUFrQixtQkFBTyxDQUFDLG1GQUF1Qjs7QUFFakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLHNCQUFzQjtBQUN0QiwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix1QkFBdUI7QUFDMUM7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCLDBCQUEwQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsc0NBQXNDO0FBQ3pEO0FBQ0Esb0JBQW9CLHlDQUF5QztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdDQUFnQztBQUNoQywrQkFBK0I7QUFDL0IsZ0NBQWdDO0FBQ2hDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyR0FBMkcsZ0JBQWdCLGlCQUFpQjtBQUM1STtBQUNBLG9CQUFvQixrRkFBa0Y7QUFDdEc7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZUFBZSxpRUFBaUU7QUFDaEY7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHdEQUF3RDtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsdUJBQXVCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsdUJBQXVCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsdUJBQXVCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0JBQXNCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtR0FBbUc7QUFDbkcsd0ZBQXdGO0FBQ3hGLCtEQUErRDtBQUMvRDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkJBQTJCO0FBQy9DO0FBQ0Esc0JBQXNCLDJCQUEyQjtBQUNqRDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxtRUFBbUU7QUFDbEY7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix3REFBd0Q7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix1QkFBdUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsdUJBQXVCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix1QkFBdUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHNCQUFzQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRztBQUNuRyx3RkFBd0Y7QUFDeEYsK0RBQStEO0FBQy9EO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGtCQUFrQixzQkFBc0I7QUFDeEM7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQixvQkFBb0IsNkJBQTZCO0FBQ2pEO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLHVCQUF1QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlCQUFpQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGFBQWE7QUFDN0MsNkJBQTZCLGFBQWE7QUFDMUMsNEJBQTRCLGFBQWE7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy9wYXJzZS9hYmNfcGFyc2UuanM/ZThhZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAgICBhYmNfcGFyc2UuanM6IHBhcnNlcyBhIHN0cmluZyByZXByZXNlbnRpbmcgQUJDIE11c2ljIE5vdGF0aW9uIGludG8gYSB1c2FibGUgaW50ZXJuYWwgc3RydWN0dXJlLlxuXG52YXIgcGFyc2VDb21tb24gPSByZXF1aXJlKCcuL2FiY19jb21tb24nKTtcbnZhciBwYXJzZURpcmVjdGl2ZSA9IHJlcXVpcmUoJy4vYWJjX3BhcnNlX2RpcmVjdGl2ZScpO1xudmFyIFBhcnNlSGVhZGVyID0gcmVxdWlyZSgnLi9hYmNfcGFyc2VfaGVhZGVyJyk7XG52YXIgUGFyc2VNdXNpYyA9IHJlcXVpcmUoJy4vYWJjX3BhcnNlX211c2ljJyk7XG52YXIgVG9rZW5pemVyID0gcmVxdWlyZSgnLi9hYmNfdG9rZW5pemVyJyk7XG52YXIgd3JhcCA9IHJlcXVpcmUoJy4vd3JhcF9saW5lcycpO1xuXG52YXIgVHVuZSA9IHJlcXVpcmUoJy4uL2RhdGEvYWJjX3R1bmUnKTtcbnZhciBUdW5lQnVpbGRlciA9IHJlcXVpcmUoJy4uL3BhcnNlL3R1bmUtYnVpbGRlcicpO1xuXG52YXIgUGFyc2UgPSBmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciB0dW5lID0gbmV3IFR1bmUoKTtcblx0dmFyIHR1bmVCdWlsZGVyID0gbmV3IFR1bmVCdWlsZGVyKHR1bmUpO1xuXHR2YXIgdG9rZW5pemVyO1xuXHR2YXIgd29yZHNDb250aW51YXRpb24gPSAnJztcblx0dmFyIHN5bWJvbENvbnRpbnVhdGlvbiA9ICcnO1xuXG5cdHRoaXMuZ2V0VHVuZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0ID0ge1xuXHRcdFx0Zm9ybWF0dGluZzogdHVuZS5mb3JtYXR0aW5nLFxuXHRcdFx0bGluZXM6IHR1bmUubGluZXMsXG5cdFx0XHRtZWRpYTogdHVuZS5tZWRpYSxcblx0XHRcdG1ldGFUZXh0OiB0dW5lLm1ldGFUZXh0LFxuXHRcdFx0bWV0YVRleHRJbmZvOiB0dW5lLm1ldGFUZXh0SW5mbyxcblx0XHRcdHZlcnNpb246IHR1bmUudmVyc2lvbixcblxuXHRcdFx0YWRkRWxlbWVudFRvRXZlbnRzOiB0dW5lLmFkZEVsZW1lbnRUb0V2ZW50cyxcblx0XHRcdGFkZFVzZWZ1bENhbGxiYWNrSW5mbzogdHVuZS5hZGRVc2VmdWxDYWxsYmFja0luZm8sXG5cdFx0XHRnZXRUb3RhbFRpbWU6IHR1bmUuZ2V0VG90YWxUaW1lLFxuXHRcdFx0Z2V0VG90YWxCZWF0czogdHVuZS5nZXRUb3RhbEJlYXRzLFxuXHRcdFx0Z2V0QmFyTGVuZ3RoOiB0dW5lLmdldEJhckxlbmd0aCxcblx0XHRcdGdldEJlYXRMZW5ndGg6IHR1bmUuZ2V0QmVhdExlbmd0aCxcblx0XHRcdGdldEJlYXRzUGVyTWVhc3VyZTogdHVuZS5nZXRCZWF0c1Blck1lYXN1cmUsXG5cdFx0XHRnZXRCcG06IHR1bmUuZ2V0QnBtLFxuXHRcdFx0Z2V0TWV0ZXI6IHR1bmUuZ2V0TWV0ZXIsXG5cdFx0XHRnZXRNZXRlckZyYWN0aW9uOiB0dW5lLmdldE1ldGVyRnJhY3Rpb24sXG5cdFx0XHRnZXRQaWNrdXBMZW5ndGg6IHR1bmUuZ2V0UGlja3VwTGVuZ3RoLFxuXHRcdFx0Z2V0S2V5U2lnbmF0dXJlOiB0dW5lLmdldEtleVNpZ25hdHVyZSxcblx0XHRcdGdldEVsZW1lbnRGcm9tQ2hhcjogdHVuZS5nZXRFbGVtZW50RnJvbUNoYXIsXG5cdFx0XHRtYWtlVm9pY2VzQXJyYXk6IHR1bmUubWFrZVZvaWNlc0FycmF5LFxuXHRcdFx0bWlsbGlzZWNvbmRzUGVyTWVhc3VyZTogdHVuZS5taWxsaXNlY29uZHNQZXJNZWFzdXJlLFxuXHRcdFx0c2V0dXBFdmVudHM6IHR1bmUuc2V0dXBFdmVudHMsXG5cdFx0XHRzZXRUaW1pbmc6IHR1bmUuc2V0VGltaW5nLFxuXHRcdFx0c2V0VXBBdWRpbzogdHVuZS5zZXRVcEF1ZGlvLFxuXHRcdFx0ZGVsaW5lOiB0dW5lLmRlbGluZSxcblx0XHRcdGZpbmRTZWxlY3RhYmxlRWxlbWVudDogdHVuZS5maW5kU2VsZWN0YWJsZUVsZW1lbnQsXG5cdFx0XHRnZXRTZWxlY3RhYmxlQXJyYXk6IHR1bmUuZ2V0U2VsZWN0YWJsZUFycmF5LFxuXHRcdH07XG5cdFx0aWYgKHR1bmUubGluZUJyZWFrcylcblx0XHRcdHQubGluZUJyZWFrcyA9IHR1bmUubGluZUJyZWFrcztcblx0XHRpZiAodHVuZS52aXN1YWxUcmFuc3Bvc2UpXG5cdFx0XHR0LnZpc3VhbFRyYW5zcG9zZSA9IHR1bmUudmlzdWFsVHJhbnNwb3NlO1xuXHRcdHJldHVybiB0O1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGFkZFBvc2l0aW9uaW5nKGVsLCB0eXBlLCB2YWx1ZSkge1xuXHRcdGlmICghZWwucG9zaXRpb25pbmcpIGVsLnBvc2l0aW9uaW5nID0ge307XG5cdFx0ZWwucG9zaXRpb25pbmdbdHlwZV0gPSB2YWx1ZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGFkZEZvbnQoZWwsIHR5cGUsIHZhbHVlKSB7XG5cdFx0aWYgKCFlbC5mb250cykgZWwuZm9udHMgPSB7fTtcblx0XHRlbC5mb250c1t0eXBlXSA9IHZhbHVlO1xuXHR9XG5cblx0dmFyIG11bHRpbGluZVZhcnMgPSB7XG5cdFx0cmVzZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0Zm9yICh2YXIgcHJvcGVydHkgaW4gdGhpcykge1xuXHRcdFx0XHRpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkgJiYgdHlwZW9mIHRoaXNbcHJvcGVydHldICE9PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHRkZWxldGUgdGhpc1twcm9wZXJ0eV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHRoaXMuaUNoYXIgPSAwO1xuXHRcdFx0dGhpcy5rZXkgPSB7YWNjaWRlbnRhbHM6IFtdLCByb290OiAnbm9uZScsIGFjYzogJycsIG1vZGU6ICcnIH07XG5cdFx0XHR0aGlzLm1ldGVyID0gbnVsbDsgLy8gaWYgbm8gbWV0ZXIgaXMgc3BlY2lmaWVkLCBmcmVlIG1ldGVyIGlzIGFzc3VtZWRcblx0XHRcdHRoaXMub3JpZ01ldGVyID0gbnVsbDtcdC8vIHRoaXMgaXMgZm9yIG5ldyB2b2ljZXMgdGhhdCBhcmUgY3JlYXRlZCBhZnRlciB3ZSBzZXQgdGhlIG1ldGVyLlxuXHRcdFx0dGhpcy5oYXNNYWluVGl0bGUgPSBmYWxzZTtcblx0XHRcdHRoaXMuZGVmYXVsdF9sZW5ndGggPSAwLjEyNTtcblx0XHRcdHRoaXMuY2xlZiA9IHsgdHlwZTogJ3RyZWJsZScsIHZlcnRpY2FsUG9zOiAwIH07XG5cdFx0XHR0aGlzLm9jdGF2ZSA9IDA7XG5cdFx0XHR0aGlzLm5leHRfbm90ZV9kdXJhdGlvbiA9IDA7XG5cdFx0XHR0aGlzLnN0YXJ0X25ld19saW5lID0gdHJ1ZTtcblx0XHRcdHRoaXMuaXNfaW5faGVhZGVyID0gdHJ1ZTtcblx0XHRcdHRoaXMucGFydEZvck5leHRMaW5lID0ge307XG5cdFx0XHR0aGlzLnRlbXBvRm9yTmV4dExpbmUgPSBbXTtcblx0XHRcdHRoaXMuaGF2ZW50X3NldF9sZW5ndGggPSB0cnVlO1xuXHRcdFx0dGhpcy52b2ljZXMgPSB7fTtcblx0XHRcdHRoaXMuc3RhdmVzID0gW107XG5cdFx0XHR0aGlzLm1hY3JvcyA9IHt9O1xuXHRcdFx0dGhpcy5jdXJyQmFyTnVtYmVyID0gMTtcblx0XHRcdHRoaXMuYmFyQ291bnRlciA9IHt9O1xuXHRcdFx0dGhpcy5pZ25vcmVkRGVjb3JhdGlvbnMgPSBbXTtcblx0XHRcdHRoaXMuc2NvcmVfaXNfcHJlc2VudCA9IGZhbHNlO1x0Ly8gQ2FuJ3QgaGF2ZSBvcmlnaW5hbCBWOiBsaW5lcyB3aGVuIHRoZXJlIGlzIHRoZSBzY29yZSBkaXJlY3RpdmVcblx0XHRcdHRoaXMuaW5FbmRpbmcgPSBmYWxzZTtcblx0XHRcdHRoaXMuaW5UaWUgPSBbXTtcblx0XHRcdHRoaXMuaW5UaWVDaG9yZCA9IHt9O1xuXHRcdFx0dGhpcy52b2NhbFBvc2l0aW9uID0gXCJhdXRvXCI7XG5cdFx0XHR0aGlzLmR5bmFtaWNQb3NpdGlvbiA9IFwiYXV0b1wiO1xuXHRcdFx0dGhpcy5jaG9yZFBvc2l0aW9uID0gXCJhdXRvXCI7XG5cdFx0XHR0aGlzLm9ybmFtZW50UG9zaXRpb24gPSBcImF1dG9cIjtcblx0XHRcdHRoaXMudm9sdW1lUG9zaXRpb24gPSBcImF1dG9cIjtcblx0XHRcdHRoaXMub3BlblNsdXJzID0gW107XG5cdFx0XHR0aGlzLmZyZWVnY2hvcmQgPSBmYWxzZTtcblx0XHRcdHRoaXMuZW5kaW5nSG9sZE92ZXIgPSB7fTtcblx0XHR9LFxuXHRcdGRpZmZlcmVudEZvbnQ6IGZ1bmN0aW9uKHR5cGUsIGRlZmF1bHRGb250cykge1xuXHRcdFx0aWYgKHRoaXNbdHlwZV0uZGVjb3JhdGlvbiAhPT0gZGVmYXVsdEZvbnRzW3R5cGVdLmRlY29yYXRpb24pIHJldHVybiB0cnVlO1xuXHRcdFx0aWYgKHRoaXNbdHlwZV0uZmFjZSAhPT0gZGVmYXVsdEZvbnRzW3R5cGVdLmZhY2UpIHJldHVybiB0cnVlO1xuXHRcdFx0aWYgKHRoaXNbdHlwZV0uc2l6ZSAhPT0gZGVmYXVsdEZvbnRzW3R5cGVdLnNpemUpIHJldHVybiB0cnVlO1xuXHRcdFx0aWYgKHRoaXNbdHlwZV0uc3R5bGUgIT09IGRlZmF1bHRGb250c1t0eXBlXS5zdHlsZSkgcmV0dXJuIHRydWU7XG5cdFx0XHRpZiAodGhpc1t0eXBlXS53ZWlnaHQgIT09IGRlZmF1bHRGb250c1t0eXBlXS53ZWlnaHQpIHJldHVybiB0cnVlO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0sXG5cdFx0YWRkRm9ybWF0dGluZ09wdGlvbnM6IGZ1bmN0aW9uKGVsLCBkZWZhdWx0Rm9udHMsIGVsVHlwZSkge1xuXHRcdFx0aWYgKGVsVHlwZSA9PT0gJ25vdGUnKSB7XG5cdFx0XHRcdGlmICh0aGlzLnZvY2FsUG9zaXRpb24gIT09ICdhdXRvJykgYWRkUG9zaXRpb25pbmcoZWwsICd2b2NhbFBvc2l0aW9uJywgdGhpcy52b2NhbFBvc2l0aW9uKTtcblx0XHRcdFx0aWYgKHRoaXMuZHluYW1pY1Bvc2l0aW9uICE9PSAnYXV0bycpIGFkZFBvc2l0aW9uaW5nKGVsLCAnZHluYW1pY1Bvc2l0aW9uJywgdGhpcy5keW5hbWljUG9zaXRpb24pO1xuXHRcdFx0XHRpZiAodGhpcy5jaG9yZFBvc2l0aW9uICE9PSAnYXV0bycpIGFkZFBvc2l0aW9uaW5nKGVsLCAnY2hvcmRQb3NpdGlvbicsIHRoaXMuY2hvcmRQb3NpdGlvbik7XG5cdFx0XHRcdGlmICh0aGlzLm9ybmFtZW50UG9zaXRpb24gIT09ICdhdXRvJykgYWRkUG9zaXRpb25pbmcoZWwsICdvcm5hbWVudFBvc2l0aW9uJywgdGhpcy5vcm5hbWVudFBvc2l0aW9uKTtcblx0XHRcdFx0aWYgKHRoaXMudm9sdW1lUG9zaXRpb24gIT09ICdhdXRvJykgYWRkUG9zaXRpb25pbmcoZWwsICd2b2x1bWVQb3NpdGlvbicsIHRoaXMudm9sdW1lUG9zaXRpb24pO1xuXHRcdFx0XHRpZiAodGhpcy5kaWZmZXJlbnRGb250KFwiYW5ub3RhdGlvbmZvbnRcIiwgZGVmYXVsdEZvbnRzKSkgYWRkRm9udChlbCwgJ2Fubm90YXRpb25mb250JywgdGhpcy5hbm5vdGF0aW9uZm9udCk7XG5cdFx0XHRcdGlmICh0aGlzLmRpZmZlcmVudEZvbnQoXCJnY2hvcmRmb250XCIsIGRlZmF1bHRGb250cykpIGFkZEZvbnQoZWwsICdnY2hvcmRmb250JywgdGhpcy5nY2hvcmRmb250KTtcblx0XHRcdFx0aWYgKHRoaXMuZGlmZmVyZW50Rm9udChcInZvY2FsZm9udFwiLCBkZWZhdWx0Rm9udHMpKSBhZGRGb250KGVsLCAndm9jYWxmb250JywgdGhpcy52b2NhbGZvbnQpO1xuXHRcdFx0XHRpZiAodGhpcy5kaWZmZXJlbnRGb250KFwidHJpcGxldGZvbnRcIiwgZGVmYXVsdEZvbnRzKSkgYWRkRm9udChlbCwgJ3RyaXBsZXRmb250JywgdGhpcy50cmlwbGV0Zm9udCk7XG5cdFx0XHR9IGVsc2UgaWYgKGVsVHlwZSA9PT0gJ2JhcicpIHtcblx0XHRcdFx0aWYgKHRoaXMuZHluYW1pY1Bvc2l0aW9uICE9PSAnYXV0bycpIGFkZFBvc2l0aW9uaW5nKGVsLCAnZHluYW1pY1Bvc2l0aW9uJywgdGhpcy5keW5hbWljUG9zaXRpb24pO1xuXHRcdFx0XHRpZiAodGhpcy5jaG9yZFBvc2l0aW9uICE9PSAnYXV0bycpIGFkZFBvc2l0aW9uaW5nKGVsLCAnY2hvcmRQb3NpdGlvbicsIHRoaXMuY2hvcmRQb3NpdGlvbik7XG5cdFx0XHRcdGlmICh0aGlzLm9ybmFtZW50UG9zaXRpb24gIT09ICdhdXRvJykgYWRkUG9zaXRpb25pbmcoZWwsICdvcm5hbWVudFBvc2l0aW9uJywgdGhpcy5vcm5hbWVudFBvc2l0aW9uKTtcblx0XHRcdFx0aWYgKHRoaXMudm9sdW1lUG9zaXRpb24gIT09ICdhdXRvJykgYWRkUG9zaXRpb25pbmcoZWwsICd2b2x1bWVQb3NpdGlvbicsIHRoaXMudm9sdW1lUG9zaXRpb24pO1xuXHRcdFx0XHRpZiAodGhpcy5kaWZmZXJlbnRGb250KFwibWVhc3VyZWZvbnRcIiwgZGVmYXVsdEZvbnRzKSkgYWRkRm9udChlbCwgJ21lYXN1cmVmb250JywgdGhpcy5tZWFzdXJlZm9udCk7XG5cdFx0XHRcdGlmICh0aGlzLmRpZmZlcmVudEZvbnQoXCJyZXBlYXRmb250XCIsIGRlZmF1bHRGb250cykpIGFkZEZvbnQoZWwsICdyZXBlYXRmb250JywgdGhpcy5yZXBlYXRmb250KTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdGR1cGxpY2F0ZVN0YXJ0RW5kaW5nSG9sZE92ZXJzOiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuZW5kaW5nSG9sZE92ZXIgPSB7XG5cdFx0XHRcdGluVGllOiBbXSxcblx0XHRcdFx0aW5UaWVDaG9yZDoge31cblx0XHRcdH07XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaW5UaWUubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dGhpcy5lbmRpbmdIb2xkT3Zlci5pblRpZS5wdXNoKFtdKTtcblx0XHRcdFx0aWYgKHRoaXMuaW5UaWVbaV0pIHsgLy8gaWYgYSB2b2ljZSBpcyBzdXBwcmVzc2VkIHRoZXJlIG1pZ2h0IGJlIGEgZ2FwIGluIHRoZSBhcnJheS5cblx0XHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuaW5UaWVbaV0ubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRcdHRoaXMuZW5kaW5nSG9sZE92ZXIuaW5UaWVbaV0ucHVzaCh0aGlzLmluVGllW2ldW2pdKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGZvciAodmFyIGtleSBpbiB0aGlzLmluVGllQ2hvcmQpIHtcblx0XHRcdFx0aWYgKHRoaXMuaW5UaWVDaG9yZC5oYXNPd25Qcm9wZXJ0eShrZXkpKVxuXHRcdFx0XHRcdHRoaXMuZW5kaW5nSG9sZE92ZXIuaW5UaWVDaG9yZFtrZXldID0gdGhpcy5pblRpZUNob3JkW2tleV07XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRyZXN0b3JlU3RhcnRFbmRpbmdIb2xkT3ZlcnM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCF0aGlzLmVuZGluZ0hvbGRPdmVyLmluVGllKVxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR0aGlzLmluVGllID0gW107XG5cdFx0XHR0aGlzLmluVGllQ2hvcmQgPSB7fTtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5lbmRpbmdIb2xkT3Zlci5pblRpZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR0aGlzLmluVGllLnB1c2goW10pO1xuXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuZW5kaW5nSG9sZE92ZXIuaW5UaWVbaV0ubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHR0aGlzLmluVGllW2ldLnB1c2godGhpcy5lbmRpbmdIb2xkT3Zlci5pblRpZVtpXVtqXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGZvciAodmFyIGtleSBpbiB0aGlzLmVuZGluZ0hvbGRPdmVyLmluVGllQ2hvcmQpIHtcblx0XHRcdFx0aWYgKHRoaXMuZW5kaW5nSG9sZE92ZXIuaW5UaWVDaG9yZC5oYXNPd25Qcm9wZXJ0eShrZXkpKVxuXHRcdFx0XHRcdHRoaXMuaW5UaWVDaG9yZFtrZXldID0gdGhpcy5lbmRpbmdIb2xkT3Zlci5pblRpZUNob3JkW2tleV07XG5cdFx0XHR9XG5cdFx0fSxcblx0fTtcblxuXHR2YXIgYWRkV2FybmluZyA9IGZ1bmN0aW9uKHN0cikge1xuXHRcdGlmICghbXVsdGlsaW5lVmFycy53YXJuaW5ncylcblx0XHRcdG11bHRpbGluZVZhcnMud2FybmluZ3MgPSBbXTtcblx0XHRtdWx0aWxpbmVWYXJzLndhcm5pbmdzLnB1c2goc3RyKTtcblx0fTtcblxuXHR2YXIgYWRkV2FybmluZ09iamVjdCA9IGZ1bmN0aW9uKHdhcm5pbmdPYmplY3QpIHtcblx0XHRpZiAoIW11bHRpbGluZVZhcnMud2FybmluZ09iamVjdHMpXG5cdFx0XHRtdWx0aWxpbmVWYXJzLndhcm5pbmdPYmplY3RzID0gW107XG5cdFx0bXVsdGlsaW5lVmFycy53YXJuaW5nT2JqZWN0cy5wdXNoKHdhcm5pbmdPYmplY3QpO1xuXHR9O1xuXG5cdHZhciBlbmNvZGUgPSBmdW5jdGlvbihzdHIpIHtcblx0XHR2YXIgcmV0ID0gc3RyLnJlcGxhY2UoL1xceDEyL2csICcgJyk7XG5cdFx0cmV0ID0gcmV0LnJlcGxhY2UoLyYvZywgJyZhbXA7Jyk7XG5cdFx0cmV0ID0gcmV0LnJlcGxhY2UoLzwvZywgJyZsdDsnKTtcblx0XHRyZXR1cm4gcmV0LnJlcGxhY2UoLz4vZywgJyZndDsnKTtcblx0fTtcblxuXHR2YXIgd2FybiA9IGZ1bmN0aW9uKHN0ciwgbGluZSwgY29sX251bSkge1xuXHRcdGlmICghbGluZSkgbGluZSA9IFwiIFwiO1xuXHRcdHZhciBiYWRfY2hhciA9IGxpbmVbY29sX251bV07XG5cdFx0aWYgKGJhZF9jaGFyID09PSAnICcgfHwgIWJhZF9jaGFyKVxuXHRcdFx0YmFkX2NoYXIgPSBcIlNQQUNFXCI7XG5cdFx0dmFyIGNsZWFuX2xpbmUgPSBlbmNvZGUobGluZS5zdWJzdHJpbmcoY29sX251bSAtIDY0LCBjb2xfbnVtKSkgKyAnPHNwYW4gc3R5bGU9XCJ0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO2ZvbnQtc2l6ZToxLjNlbTtmb250LXdlaWdodDpib2xkO1wiPicgKyBiYWRfY2hhciArICc8L3NwYW4+JyArIGVuY29kZShsaW5lLnN1YnN0cmluZyhjb2xfbnVtICsgMSkuc3Vic3RyaW5nKDAsNjQpKTtcblx0XHRhZGRXYXJuaW5nKFwiTXVzaWMgTGluZTpcIiArIHRva2VuaXplci5saW5lSW5kZXggKyBcIjpcIiArIChjb2xfbnVtKzEpICsgJzogJyArIHN0ciArIFwiOiAgXCIgKyBjbGVhbl9saW5lKTtcblx0XHRhZGRXYXJuaW5nT2JqZWN0KHttZXNzYWdlOnN0ciwgbGluZTpsaW5lLCBzdGFydENoYXI6IG11bHRpbGluZVZhcnMuaUNoYXIgKyBjb2xfbnVtLCBjb2x1bW46IGNvbF9udW19KTtcblx0fTtcblxuXHR2YXIgaGVhZGVyO1xuXHR2YXIgbXVzaWM7XG5cblx0dGhpcy5nZXRXYXJuaW5ncyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBtdWx0aWxpbmVWYXJzLndhcm5pbmdzO1xuXHR9O1xuXHR0aGlzLmdldFdhcm5pbmdPYmplY3RzID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIG11bHRpbGluZVZhcnMud2FybmluZ09iamVjdHM7XG5cdH07XG5cblx0dmFyIGFkZFdvcmRzID0gZnVuY3Rpb24obGluZSwgd29yZHMpIHtcblx0XHRpZiAod29yZHMuaW5kZXhPZignXFx4MTInKSA+PSAwKSB7XG5cdFx0XHR3b3Jkc0NvbnRpbnVhdGlvbiArPSB3b3Jkc1xuXHRcdFx0cmV0dXJuXG5cdFx0fVxuXHRcdHdvcmRzID0gd29yZHNDb250aW51YXRpb24gKyB3b3Jkc1xuXHRcdHdvcmRzQ29udGludWF0aW9uID0gJydcblxuXHRcdGlmICghbGluZSkgeyB3YXJuKFwiQ2FuJ3QgYWRkIHdvcmRzIGJlZm9yZSB0aGUgZmlyc3QgbGluZSBvZiBtdXNpY1wiLCBsaW5lLCAwKTsgcmV0dXJuOyB9XG5cdFx0d29yZHMgPSBwYXJzZUNvbW1vbi5zdHJpcCh3b3Jkcyk7XG5cdFx0aWYgKHdvcmRzW3dvcmRzLmxlbmd0aC0xXSAhPT0gJy0nKVxuXHRcdFx0d29yZHMgPSB3b3JkcyArICcgJztcdC8vIEp1c3QgbWFrZXMgaXQgZWFzaWVyIHRvIHBhcnNlIGJlbG93LCBzaW5jZSBldmVyeSB3b3JkIGhhcyBhIGRpdmlkZXIgYWZ0ZXIgaXQuXG5cdFx0dmFyIHdvcmRfbGlzdCA9IFtdO1xuXHRcdC8vIGZpcnN0IG1ha2UgYSBsaXN0IG9mIHdvcmRzIGZyb20gdGhlIHN0cmluZyB3ZSBhcmUgcGFzc2VkLiBBIHdvcmQgaXMgZGl2aWRlZCBvbiBlaXRoZXIgYSBzcGFjZSBvciBkYXNoLlxuXHRcdHZhciBsYXN0X2RpdmlkZXIgPSAwO1xuXHRcdHZhciByZXBsYWNlID0gZmFsc2U7XG5cdFx0dmFyIGFkZFdvcmQgPSBmdW5jdGlvbihpKSB7XG5cdFx0XHR2YXIgd29yZCA9IHBhcnNlQ29tbW9uLnN0cmlwKHdvcmRzLnN1YnN0cmluZyhsYXN0X2RpdmlkZXIsIGkpKTtcblx0XHRcdHdvcmQgPSB3b3JkLnJlcGxhY2UoL1xcXFwoWy1fKnx+XSkvZywgJyQxJylcblx0XHRcdGxhc3RfZGl2aWRlciA9IGkrMTtcblx0XHRcdGlmICh3b3JkLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0aWYgKHJlcGxhY2UpXG5cdFx0XHRcdFx0d29yZCA9IHdvcmQucmVwbGFjZSgvfi9nLCAnICcpO1xuXHRcdFx0XHR2YXIgZGl2ID0gd29yZHNbaV07XG5cdFx0XHRcdGlmIChkaXYgIT09ICdfJyAmJiBkaXYgIT09ICctJylcblx0XHRcdFx0XHRkaXYgPSAnICc7XG5cdFx0XHRcdHdvcmRfbGlzdC5wdXNoKHtzeWxsYWJsZTogdG9rZW5pemVyLnRyYW5zbGF0ZVN0cmluZyh3b3JkKSwgZGl2aWRlcjogZGl2fSk7XG5cdFx0XHRcdHJlcGxhY2UgPSBmYWxzZTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcblx0XHR2YXIgZXNjTmV4dCA9IGZhbHNlO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgd29yZHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHN3aXRjaCAod29yZHNbaV0pIHtcblx0XHRcdFx0Y2FzZSAnICc6XG5cdFx0XHRcdGNhc2UgJ1xceDEyJzpcblx0XHRcdFx0XHRhZGRXb3JkKGkpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICctJzpcblx0XHRcdFx0XHRpZiAoIWVzY05leHQgJiYgIWFkZFdvcmQoaSkgJiYgd29yZF9saXN0Lmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdHBhcnNlQ29tbW9uLmxhc3Qod29yZF9saXN0KS5kaXZpZGVyID0gJy0nO1xuXHRcdFx0XHRcdFx0d29yZF9saXN0LnB1c2goe3NraXA6IHRydWUsIHRvOiAnbmV4dCd9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ18nOlxuXHRcdFx0XHRcdGlmICghZXNjTmV4dCkge1xuXHRcdFx0XHRcdFx0YWRkV29yZChpKTtcblx0XHRcdFx0XHRcdHdvcmRfbGlzdC5wdXNoKHtza2lwOiB0cnVlLCB0bzogJ3NsdXInfSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICcqJzpcblx0XHRcdFx0XHRpZiAoIWVzY05leHQpIHtcblx0XHRcdFx0XHRcdGFkZFdvcmQoaSk7XG5cdFx0XHRcdFx0XHR3b3JkX2xpc3QucHVzaCh7c2tpcDogdHJ1ZSwgdG86ICduZXh0J30pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAnfCc6XG5cdFx0XHRcdFx0aWYgKCFlc2NOZXh0KSB7XG5cdFx0XHRcdFx0XHRhZGRXb3JkKGkpO1xuXHRcdFx0XHRcdFx0d29yZF9saXN0LnB1c2goe3NraXA6IHRydWUsIHRvOiAnYmFyJ30pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAnfic6XG5cdFx0XHRcdFx0aWYgKCFlc2NOZXh0KSB7XG5cdFx0XHRcdFx0XHRyZXBsYWNlID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRlc2NOZXh0ID0gd29yZHNbaV0gPT09ICdcXFxcJ1xuXHRcdH1cblxuXHRcdHZhciBpblNsdXIgPSBmYWxzZTtcblx0XHRsaW5lLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcblx0XHRcdGlmICh3b3JkX2xpc3QubGVuZ3RoICE9PSAwKSB7XG5cdFx0XHRcdGlmICh3b3JkX2xpc3RbMF0uc2tpcCkge1xuXHRcdFx0XHRcdHN3aXRjaCAod29yZF9saXN0WzBdLnRvKSB7XG5cdFx0XHRcdFx0XHRjYXNlICduZXh0JzogaWYgKGVsLmVsX3R5cGUgPT09ICdub3RlJyAmJiBlbC5waXRjaGVzICE9PSBudWxsICYmICFpblNsdXIpIHdvcmRfbGlzdC5zaGlmdCgpOyBicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgJ3NsdXInOiBpZiAoZWwuZWxfdHlwZSA9PT0gJ25vdGUnICYmIGVsLnBpdGNoZXMgIT09IG51bGwpIHdvcmRfbGlzdC5zaGlmdCgpOyBicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgJ2Jhcic6IGlmIChlbC5lbF90eXBlID09PSAnYmFyJykgd29yZF9saXN0LnNoaWZ0KCk7IGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoZWwuZWxfdHlwZSAhPT0gJ2JhcicpIHtcblx0XHRcdFx0XHRcdGlmIChlbC5seXJpYyA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdFx0XHRlbC5seXJpYyA9IFt7c3lsbGFibGU6IFwiXCIsIGRpdmlkZXI6IFwiIFwifV07XG5cdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdGVsLmx5cmljLnB1c2goe3N5bGxhYmxlOiBcIlwiLCBkaXZpZGVyOiBcIiBcIn0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoZWwuZWxfdHlwZSA9PT0gJ25vdGUnICYmIGVsLnJlc3QgPT09IHVuZGVmaW5lZCAmJiAhaW5TbHVyKSB7XG5cdFx0XHRcdFx0XHR2YXIgbHlyaWMgPSB3b3JkX2xpc3Quc2hpZnQoKTtcblx0XHRcdFx0XHRcdGlmIChseXJpYy5zeWxsYWJsZSlcblx0XHRcdFx0XHRcdFx0bHlyaWMuc3lsbGFibGUgPSBseXJpYy5zeWxsYWJsZS5yZXBsYWNlKC8gKy9nLCdcXHhBMCcpO1xuXHRcdFx0XHRcdFx0aWYgKGVsLmx5cmljID09PSB1bmRlZmluZWQpXG5cdFx0XHRcdFx0XHRcdGVsLmx5cmljID0gWyBseXJpYyBdO1xuXHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHRlbC5seXJpYy5wdXNoKGx5cmljKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fTtcblxuXHR2YXIgYWRkU3ltYm9scyA9IGZ1bmN0aW9uKGxpbmUsIHdvcmRzKSB7XG5cdFx0aWYgKHdvcmRzLmluZGV4T2YoJ1xceDEyJykgPj0gMCkge1xuXHRcdFx0c3ltYm9sQ29udGludWF0aW9uICs9IHdvcmRzXG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cdFx0d29yZHMgPSBzeW1ib2xDb250aW51YXRpb24gKyB3b3Jkc1xuXHRcdHN5bWJvbENvbnRpbnVhdGlvbiA9ICcnXG5cblx0XHQvLyBUT0RPLVBFUjogQ3VycmVudGx5IGNvcGllZCBmcm9tIHc6IGxpbmUuIFRoaXMgbmVlZHMgdG8gYmUgcmVhZCBhcyBzeW1ib2xzIGluc3RlYWQuXG5cdFx0aWYgKCFsaW5lKSB7IHdhcm4oXCJDYW4ndCBhZGQgc3ltYm9scyBiZWZvcmUgdGhlIGZpcnN0IGxpbmUgb2YgbXVzaWNcIiwgbGluZSwgMCk7IHJldHVybjsgfVxuXHRcdHdvcmRzID0gcGFyc2VDb21tb24uc3RyaXAod29yZHMpO1xuXHRcdGlmICh3b3Jkc1t3b3Jkcy5sZW5ndGgtMV0gIT09ICctJylcblx0XHRcdHdvcmRzID0gd29yZHMgKyAnICc7XHQvLyBKdXN0IG1ha2VzIGl0IGVhc2llciB0byBwYXJzZSBiZWxvdywgc2luY2UgZXZlcnkgd29yZCBoYXMgYSBkaXZpZGVyIGFmdGVyIGl0LlxuXHRcdHZhciB3b3JkX2xpc3QgPSBbXTtcblx0XHQvLyBmaXJzdCBtYWtlIGEgbGlzdCBvZiB3b3JkcyBmcm9tIHRoZSBzdHJpbmcgd2UgYXJlIHBhc3NlZC4gQSB3b3JkIGlzIGRpdmlkZWQgb24gZWl0aGVyIGEgc3BhY2Ugb3IgZGFzaC5cblx0XHR2YXIgbGFzdF9kaXZpZGVyID0gMDtcblx0XHR2YXIgcmVwbGFjZSA9IGZhbHNlO1xuXHRcdHZhciBhZGRXb3JkID0gZnVuY3Rpb24oaSkge1xuXHRcdFx0dmFyIHdvcmQgPSBwYXJzZUNvbW1vbi5zdHJpcCh3b3Jkcy5zdWJzdHJpbmcobGFzdF9kaXZpZGVyLCBpKSk7XG5cdFx0XHRsYXN0X2RpdmlkZXIgPSBpKzE7XG5cdFx0XHRpZiAod29yZC5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGlmIChyZXBsYWNlKVxuXHRcdFx0XHRcdHdvcmQgPSB3b3JkLnJlcGxhY2UoL34vZywgJyAnKTtcblx0XHRcdFx0dmFyIGRpdiA9IHdvcmRzW2ldO1xuXHRcdFx0XHRpZiAoZGl2ICE9PSAnXycgJiYgZGl2ICE9PSAnLScpXG5cdFx0XHRcdFx0ZGl2ID0gJyAnO1xuXHRcdFx0XHR3b3JkX2xpc3QucHVzaCh7c3lsbGFibGU6IHRva2VuaXplci50cmFuc2xhdGVTdHJpbmcod29yZCksIGRpdmlkZXI6IGRpdn0pO1xuXHRcdFx0XHRyZXBsYWNlID0gZmFsc2U7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH07XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB3b3Jkcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0c3dpdGNoICh3b3Jkc1tpXSkge1xuXHRcdFx0XHRjYXNlICcgJzpcblx0XHRcdFx0Y2FzZSAnXFx4MTInOlxuXHRcdFx0XHRcdGFkZFdvcmQoaSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJy0nOlxuXHRcdFx0XHRcdGlmICghYWRkV29yZChpKSAmJiB3b3JkX2xpc3QubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0cGFyc2VDb21tb24ubGFzdCh3b3JkX2xpc3QpLmRpdmlkZXIgPSAnLSc7XG5cdFx0XHRcdFx0XHR3b3JkX2xpc3QucHVzaCh7c2tpcDogdHJ1ZSwgdG86ICduZXh0J30pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAnXyc6XG5cdFx0XHRcdFx0YWRkV29yZChpKTtcblx0XHRcdFx0XHR3b3JkX2xpc3QucHVzaCh7c2tpcDogdHJ1ZSwgdG86ICdzbHVyJ30pO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICcqJzpcblx0XHRcdFx0XHRhZGRXb3JkKGkpO1xuXHRcdFx0XHRcdHdvcmRfbGlzdC5wdXNoKHtza2lwOiB0cnVlLCB0bzogJ25leHQnfSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ3wnOlxuXHRcdFx0XHRcdGFkZFdvcmQoaSk7XG5cdFx0XHRcdFx0d29yZF9saXN0LnB1c2goe3NraXA6IHRydWUsIHRvOiAnYmFyJ30pO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICd+Jzpcblx0XHRcdFx0XHRyZXBsYWNlID0gdHJ1ZTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2YXIgaW5TbHVyID0gZmFsc2U7XG5cdFx0bGluZS5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG5cdFx0XHRpZiAod29yZF9saXN0Lmxlbmd0aCAhPT0gMCkge1xuXHRcdFx0XHRpZiAod29yZF9saXN0WzBdLnNraXApIHtcblx0XHRcdFx0XHRzd2l0Y2ggKHdvcmRfbGlzdFswXS50bykge1xuXHRcdFx0XHRcdFx0Y2FzZSAnbmV4dCc6IGlmIChlbC5lbF90eXBlID09PSAnbm90ZScgJiYgZWwucGl0Y2hlcyAhPT0gbnVsbCAmJiAhaW5TbHVyKSB3b3JkX2xpc3Quc2hpZnQoKTsgYnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlICdzbHVyJzogaWYgKGVsLmVsX3R5cGUgPT09ICdub3RlJyAmJiBlbC5waXRjaGVzICE9PSBudWxsKSB3b3JkX2xpc3Quc2hpZnQoKTsgYnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlICdiYXInOiBpZiAoZWwuZWxfdHlwZSA9PT0gJ2JhcicpIHdvcmRfbGlzdC5zaGlmdCgpOyBicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYgKGVsLmVsX3R5cGUgPT09ICdub3RlJyAmJiBlbC5yZXN0ID09PSB1bmRlZmluZWQgJiYgIWluU2x1cikge1xuXHRcdFx0XHRcdFx0dmFyIGx5cmljID0gd29yZF9saXN0LnNoaWZ0KCk7XG5cdFx0XHRcdFx0XHRpZiAoZWwubHlyaWMgPT09IHVuZGVmaW5lZClcblx0XHRcdFx0XHRcdFx0ZWwubHlyaWMgPSBbIGx5cmljIF07XG5cdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdGVsLmx5cmljLnB1c2gobHlyaWMpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cdHZhciBwYXJzZUxpbmUgPSBmdW5jdGlvbihsaW5lKSB7XG5cdFx0aWYgKHBhcnNlQ29tbW9uLnN0YXJ0c1dpdGgobGluZSwgJyUlJykpIHtcblx0XHRcdHZhciBlcnIgPSBwYXJzZURpcmVjdGl2ZS5hZGREaXJlY3RpdmUobGluZS5zdWJzdHJpbmcoMikpO1xuXHRcdFx0aWYgKGVycikgd2FybihlcnIsIGxpbmUsIDIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHZhciBpID0gbGluZS5pbmRleE9mKCclJyk7XG5cdFx0aWYgKGkgPj0gMClcblx0XHRcdGxpbmUgPSBsaW5lLnN1YnN0cmluZygwLCBpKTtcblx0XHRsaW5lID0gbGluZS5yZXBsYWNlKC9cXHMrJC8sICcnKTtcblxuXHRcdGlmIChsaW5lLmxlbmd0aCA9PT0gMClcblx0XHRcdHJldHVybjtcblxuXHRcdGlmICh3b3Jkc0NvbnRpbnVhdGlvbikge1xuXHRcdFx0YWRkV29yZHModHVuZUJ1aWxkZXIuZ2V0Q3VycmVudFZvaWNlKCksIGxpbmUuc3Vic3RyaW5nKDIpKTtcblx0XHRcdHJldHVyblxuXHRcdH1cblx0XHRpZiAoc3ltYm9sQ29udGludWF0aW9uKSB7XG5cdFx0XHRhZGRTeW1ib2xzKHR1bmVCdWlsZGVyLmdldEN1cnJlbnRWb2ljZSgpLCBsaW5lLnN1YnN0cmluZygyKSk7XG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cdFx0aWYgKGxpbmUubGVuZ3RoIDwgMiB8fCBsaW5lWzFdICE9PSAnOicgfHwgbXVzaWMubGluZUNvbnRpbnVhdGlvbikge1xuXHRcdFx0bXVzaWMucGFyc2VNdXNpYyhsaW5lKTtcblx0XHRcdHJldHVyblxuXHRcdH1cblxuXHRcdHZhciByZXQgPSBoZWFkZXIucGFyc2VIZWFkZXIobGluZSk7XG5cdFx0aWYgKHJldC5yZWd1bGFyKVxuXHRcdFx0bXVzaWMucGFyc2VNdXNpYyhsaW5lKTtcblx0XHRpZiAocmV0Lm5ld2xpbmUpXG5cdFx0XHRtdXNpYy5zdGFydE5ld0xpbmUoKTtcblx0XHRpZiAocmV0LndvcmRzKVxuXHRcdFx0YWRkV29yZHModHVuZUJ1aWxkZXIuZ2V0Q3VycmVudFZvaWNlKCksIGxpbmUuc3Vic3RyaW5nKDIpKTtcblx0XHRpZiAocmV0LnN5bWJvbHMpXG5cdFx0XHRhZGRTeW1ib2xzKHR1bmVCdWlsZGVyLmdldEN1cnJlbnRWb2ljZSgpLCBsaW5lLnN1YnN0cmluZygyKSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gYXBwZW5kTGFzdE1lYXN1cmUodm9pY2UsIG5leHRWb2ljZSkge1xuXHRcdHZvaWNlLnB1c2goe1xuXHRcdFx0ZWxfdHlwZTogJ2hpbnQnXG5cdFx0fSk7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBuZXh0Vm9pY2UubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBlbGVtZW50ID0gbmV4dFZvaWNlW2ldO1xuXHRcdFx0dmFyIGhpbnQgPSBPYmplY3QuYXNzaWduKHt9LGVsZW1lbnQpO1xuXHRcdFx0dm9pY2UucHVzaChoaW50KTtcblx0XHRcdGlmIChlbGVtZW50LmVsX3R5cGUgPT09ICdiYXInKVxuXHRcdFx0XHRcdHJldHVybjtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBhZGRIaW50TWVhc3VyZShzdGFmZiwgbmV4dFN0YWZmKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdGFmZi5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIHN0YXZlID0gc3RhZmZbaV07XG5cdFx0XHR2YXIgbmV4dFN0YXZlID0gbmV4dFN0YWZmW2ldO1xuXHRcdFx0aWYgKG5leHRTdGF2ZSkgeyAvLyBCZSBzdXJlIHRoZXJlIGlzIHRoZSBzYW1lIG51bWJlciBvZiBzdGF2ZXMgb24gdGhlIG5leHQgbGluZS5cblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBuZXh0U3RhdmUudm9pY2VzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdFx0dmFyIG5leHRWb2ljZSA9IG5leHRTdGF2ZS52b2ljZXNbal07XG5cdFx0XHRcdFx0dmFyIHZvaWNlID0gc3RhdmUudm9pY2VzW2pdO1xuXHRcdFx0XHRcdGlmICh2b2ljZSkgeyAvLyBCZSBzdXJlIHRoZXJlIGFyZSB0aGUgc2FtZSBudW1iZXIgb2Ygdm9pY2VzIG9uIHRoZSBwcmV2aW91cyBsaW5lLlxuXHRcdFx0XHRcdFx0YXBwZW5kTGFzdE1lYXN1cmUodm9pY2UsIG5leHRWb2ljZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gYWRkSGludE1lYXN1cmVzKCkge1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdHVuZS5saW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGxpbmUgPSB0dW5lLmxpbmVzW2ldLnN0YWZmO1xuXHRcdFx0aWYgKGxpbmUpIHtcblx0XHRcdFx0dmFyIGogPSBpKzE7XG5cdFx0XHRcdHdoaWxlIChqIDwgdHVuZS5saW5lcy5sZW5ndGggJiYgdHVuZS5saW5lc1tqXS5zdGFmZiA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdGorKztcblx0XHRcdFx0aWYgKGogPCB0dW5lLmxpbmVzLmxlbmd0aCkge1xuXHRcdFx0XHRcdHZhciBuZXh0TGluZSA9IHR1bmUubGluZXNbal0uc3RhZmY7XG5cdFx0XHRcdFx0YWRkSGludE1lYXN1cmUobGluZSwgbmV4dExpbmUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0dGhpcy5wYXJzZSA9IGZ1bmN0aW9uKHN0clR1bmUsIHN3aXRjaGVzLCBzdGFydFBvcykge1xuXHRcdC8vIHRoZSBzd2l0Y2hlcyBhcmUgb3B0aW9uYWwgYW5kIGNhdXNlIGEgZGlmZmVyZW5jZSBpbiB0aGUgd2F5IHRoZSB0dW5lIGlzIHBhcnNlZC5cblx0XHQvLyBzd2l0Y2hlcy5oZWFkZXJfb25seSA6IHN0b3AgcGFyc2luZyB3aGVuIHRoZSBoZWFkZXIgaXMgZmluaXNoZWRcblx0XHQvLyBzd2l0Y2hlcy5zdG9wX29uX3dhcm5pbmcgOiBzdG9wIGF0IHRoZSBmaXJzdCB3YXJuaW5nIGVuY291bnRlcmVkLlxuXHRcdC8vIHN3aXRjaGVzLnByaW50OiBmb3JtYXQgZm9yIHRoZSBwYWdlIGluc3RlYWQgb2YgdGhlIGJyb3dzZXIuXG5cdFx0Ly8gc3dpdGNoZXMuZm9ybWF0OiBhIGhhc2ggb2YgdGhlIGRlc2lyZWQgZm9ybWF0dGluZyBjb21tYW5kcy5cblx0XHQvLyBzd2l0Y2hlcy5oaW50X21lYXN1cmVzOiBwdXQgdGhlIG5leHQgbWVhc3VyZSBhdCB0aGUgZW5kIG9mIHRoZSBjdXJyZW50IGxpbmUuXG5cdFx0Ly8gc3dpdGNoZXMudHJhbnNwb3NlOiBjaGFuZ2UgdGhlIGtleSBzaWduYXR1cmUsIGNob3JkcywgYW5kIG5vdGVzIGJ5IGEgbnVtYmVyIG9mIGhhbGYtc3RlcHMuXG5cdFx0aWYgKCFzd2l0Y2hlcykgc3dpdGNoZXMgPSB7fTtcblx0XHRpZiAoIXN0YXJ0UG9zKSBzdGFydFBvcyA9IDA7XG5cdFx0dHVuZS5yZXNldCgpO1xuXG5cdFx0Ly8gVGFrZSBjYXJlIG9mIHdoYXRldmVyIGxpbmUgZW5kaW5ncyBjb21lIG91ciB3YXlcblx0XHQvLyBUYWNrIG9uIG5ld2xpbmUgdGVtcG9yYXJpbHkgdG8gbWFrZSB0aGUgbGFzdCBsaW5lIGNvbnRpbnVhdGlvbiB3b3JrXG5cdFx0c3RyVHVuZSA9IHN0clR1bmUucmVwbGFjZSgvXFxyXFxuPy9nLCAnXFxuJykgKyAnXFxuJztcblxuXHRcdC8vIGdldCByaWQgb2YgbGF0ZXggY29tbWFuZHMuIElmIGEgbGluZSBzdGFydHMgd2l0aCBhIGJhY2tzbGFzaCwgdGhlbiBpdCBpcyByZXBsYWNlZCBieSBzcGFjZXMgdG8ga2VlcCB0aGUgY2hhcmFjdGVyIGNvdW50IHRoZSBzYW1lLlxuXHRcdHZhciBhcnIgPSBzdHJUdW5lLnNwbGl0KFwiXFxuXFxcXFwiKTtcblx0XHRpZiAoYXJyLmxlbmd0aCA+IDEpIHtcblx0XHRcdGZvciAodmFyIGkyID0gMTsgaTIgPCBhcnIubGVuZ3RoOyBpMisrKSB7XG5cdFx0XHRcdHdoaWxlIChhcnJbaTJdLmxlbmd0aCA+IDAgJiYgYXJyW2kyXVswXSAhPT0gXCJcXG5cIikge1xuXHRcdFx0XHRcdGFycltpMl0gPSBhcnJbaTJdLnN1YnN0cigxKTtcblx0XHRcdFx0XHRhcnJbaTItMV0gKz0gJyAnO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRzdHJUdW5lID0gYXJyLmpvaW4oXCIgIFwiKTsgLy8uIHRoZSBzcGxpdCByZW1vdmVkIHR3byBjaGFyYWN0ZXJzLCBzbyB0aGlzIHB1dHMgdGhlbSBiYWNrXG5cdFx0fVxuXHRcdC8vIHRha2UgY2FyZSBvZiBsaW5lIGNvbnRpbnVhdGlvbnMgcmlnaHQgYXdheSwgYnV0IGtlZXAgdGhlIHNhbWUgbnVtYmVyIG9mIGNoYXJhY3RlcnNcblx0XHRzdHJUdW5lID0gc3RyVHVuZS5yZXBsYWNlKC9cXFxcKFsgXFx0XSopKCUuKikqXFxuL2csIGZ1bmN0aW9uKGFsbCwgYmFja3NsYXNoLCBjb21tZW50KXtcblx0XHRcdHZhciBwYWRkaW5nID0gY29tbWVudCA/IEFycmF5KGNvbW1lbnQubGVuZ3RoICsxKS5qb2luKCcgJykgOiBcIlwiO1xuXHRcdFx0cmV0dXJuIGJhY2tzbGFzaCArIFwiXFx4MTJcIiArIHBhZGRpbmcgKyAnXFxuJztcblx0XHR9KTtcblx0XHR2YXIgbGluZXMgPSBzdHJUdW5lLnNwbGl0KCdcXG4nKVxuXHRcdGlmIChwYXJzZUNvbW1vbi5sYXN0KGxpbmVzKS5sZW5ndGggPT09IDApXHQvLyByZW1vdmUgdGhlIGJsYW5rIGxpbmUgd2UgYWRkZWQgYWJvdmUuXG5cdFx0XHRsaW5lcy5wb3AoKTtcblx0XHR0b2tlbml6ZXIgPSBuZXcgVG9rZW5pemVyKGxpbmVzLCBtdWx0aWxpbmVWYXJzKTtcblx0XHRoZWFkZXIgPSBuZXcgUGFyc2VIZWFkZXIodG9rZW5pemVyLCB3YXJuLCBtdWx0aWxpbmVWYXJzLCB0dW5lLCB0dW5lQnVpbGRlcik7XG5cdFx0bXVzaWMgPSBuZXcgUGFyc2VNdXNpYyh0b2tlbml6ZXIsIHdhcm4sIG11bHRpbGluZVZhcnMsIHR1bmUsIHR1bmVCdWlsZGVyLCBoZWFkZXIpO1xuXG5cdFx0aWYgKHN3aXRjaGVzLnByaW50KVxuXHRcdFx0dHVuZS5tZWRpYSA9ICdwcmludCc7XG5cdFx0bXVsdGlsaW5lVmFycy5yZXNldCgpO1xuXHRcdG11bHRpbGluZVZhcnMuaUNoYXIgPSBzdGFydFBvcztcblx0XHRpZiAoc3dpdGNoZXMudmlzdWFsVHJhbnNwb3NlKSB7XG5cdFx0XHRtdWx0aWxpbmVWYXJzLmdsb2JhbFRyYW5zcG9zZSA9IHBhcnNlSW50KHN3aXRjaGVzLnZpc3VhbFRyYW5zcG9zZSk7XG5cdFx0XHRpZiAobXVsdGlsaW5lVmFycy5nbG9iYWxUcmFuc3Bvc2UgPT09IDApXG5cdFx0XHRcdG11bHRpbGluZVZhcnMuZ2xvYmFsVHJhbnNwb3NlID0gdW5kZWZpbmVkO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHR0dW5lQnVpbGRlci5zZXRWaXN1YWxUcmFuc3Bvc2Uoc3dpdGNoZXMudmlzdWFsVHJhbnNwb3NlKTtcblx0XHR9IGVsc2Vcblx0XHRcdG11bHRpbGluZVZhcnMuZ2xvYmFsVHJhbnNwb3NlID0gdW5kZWZpbmVkO1xuXHRcdGlmIChzd2l0Y2hlcy5saW5lQnJlYWtzKSB7XG5cdFx0XHQvLyBUaGUgbGluZSBicmVhayBudW1iZXJzIGFyZSAwLWJhc2VkIGFuZCB0aGV5IHJlZmxlY3QgdGhlIGxhc3QgbWVhc3VyZSBvZiB0aGUgY3VycmVudCBsaW5lLlxuXHRcdFx0bXVsdGlsaW5lVmFycy5saW5lQnJlYWtzID0gc3dpdGNoZXMubGluZUJyZWFrcztcblx0XHRcdC8vbXVsdGlsaW5lVmFycy5jb250aW51ZWFsbCA9IHRydWU7XG5cdFx0fVxuXHRcdGhlYWRlci5yZXNldCh0b2tlbml6ZXIsIHdhcm4sIG11bHRpbGluZVZhcnMsIHR1bmUpO1xuXG5cdFx0dHJ5IHtcblx0XHRcdGlmIChzd2l0Y2hlcy5mb3JtYXQpIHtcblx0XHRcdFx0cGFyc2VEaXJlY3RpdmUuZ2xvYmFsRm9ybWF0dGluZyhzd2l0Y2hlcy5mb3JtYXQpO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGxpbmUgPSB0b2tlbml6ZXIubmV4dExpbmUoKTtcblx0XHRcdHdoaWxlIChsaW5lKSB7XG5cdFx0XHRcdGlmIChzd2l0Y2hlcy5oZWFkZXJfb25seSAmJiBtdWx0aWxpbmVWYXJzLmlzX2luX2hlYWRlciA9PT0gZmFsc2UpXG5cdFx0XHRcdFx0dGhyb3cgXCJub3JtYWxfYWJvcnRcIjtcblx0XHRcdFx0aWYgKHN3aXRjaGVzLnN0b3Bfb25fd2FybmluZyAmJiBtdWx0aWxpbmVWYXJzLndhcm5pbmdzKVxuXHRcdFx0XHRcdHRocm93IFwibm9ybWFsX2Fib3J0XCI7XG5cblx0XHRcdFx0dmFyIHdhc0luSGVhZGVyID0gbXVsdGlsaW5lVmFycy5pc19pbl9oZWFkZXI7XG5cdFx0XHRcdHBhcnNlTGluZShsaW5lKTtcblx0XHRcdFx0aWYgKHdhc0luSGVhZGVyICYmICFtdWx0aWxpbmVWYXJzLmlzX2luX2hlYWRlcikge1xuXHRcdFx0XHRcdHR1bmVCdWlsZGVyLnNldFJ1bm5pbmdGb250KFwiYW5ub3RhdGlvbmZvbnRcIiwgbXVsdGlsaW5lVmFycy5hbm5vdGF0aW9uZm9udCk7XG5cdFx0XHRcdFx0dHVuZUJ1aWxkZXIuc2V0UnVubmluZ0ZvbnQoXCJnY2hvcmRmb250XCIsIG11bHRpbGluZVZhcnMuZ2Nob3JkZm9udCk7XG5cdFx0XHRcdFx0dHVuZUJ1aWxkZXIuc2V0UnVubmluZ0ZvbnQoXCJ0cmlwbGV0Zm9udFwiLCBtdWx0aWxpbmVWYXJzLnRyaXBsZXRmb250KTtcblx0XHRcdFx0XHR0dW5lQnVpbGRlci5zZXRSdW5uaW5nRm9udChcInZvY2FsZm9udFwiLCBtdWx0aWxpbmVWYXJzLnZvY2FsZm9udCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bGluZSA9IHRva2VuaXplci5uZXh0TGluZSgpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAod29yZHNDb250aW51YXRpb24pIHtcblx0XHRcdFx0YWRkV29yZHModHVuZUJ1aWxkZXIuZ2V0Q3VycmVudFZvaWNlKCksICcnKTtcblx0XHRcdH1cblx0XHRcdGlmIChzeW1ib2xDb250aW51YXRpb24pIHtcblx0XHRcdFx0YWRkU3ltYm9scyh0dW5lQnVpbGRlci5nZXRDdXJyZW50Vm9pY2UoKSwgJycpO1xuXHRcdFx0fVxuXHRcdFx0bXVsdGlsaW5lVmFycy5vcGVuU2x1cnMgPSB0dW5lQnVpbGRlci5jbGVhblVwKG11bHRpbGluZVZhcnMuYmFyc3BlcnN0YWZmLCBtdWx0aWxpbmVWYXJzLnN0YWZmbm9ub3RlLCBtdWx0aWxpbmVWYXJzLm9wZW5TbHVycyk7XG5cblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGlmIChlcnIgIT09IFwibm9ybWFsX2Fib3J0XCIpXG5cdFx0XHRcdHRocm93IGVycjtcblx0XHR9XG5cblx0XHR2YXIgcGggPSAxMSo3Mjtcblx0XHR2YXIgcGwgPSA4LjUqNzI7XG5cdFx0c3dpdGNoIChtdWx0aWxpbmVWYXJzLnBhcGVyc2l6ZSkge1xuXHRcdFx0Ly9jYXNlIFwibGV0dGVyXCI6IHBoID0gMTEqNzI7IHBsID0gOC41KjcyOyBicmVhaztcblx0XHRcdGNhc2UgXCJsZWdhbFwiOiBwaCA9IDE0KjcyOyBwbCA9IDguNSo3MjsgYnJlYWs7XG5cdFx0XHRjYXNlIFwiQTRcIjogcGggPSAxMS43KjcyOyBwbCA9IDguMyo3MjsgYnJlYWs7XG5cdFx0fVxuXHRcdGlmIChtdWx0aWxpbmVWYXJzLmxhbmRzY2FwZSkge1xuXHRcdFx0dmFyIHggPSBwaDtcblx0XHRcdHBoID0gcGw7XG5cdFx0XHRwbCA9IHg7XG5cdFx0fVxuXHRcdGlmICghdHVuZS5mb3JtYXR0aW5nLnBhZ2V3aWR0aClcblx0XHRcdHR1bmUuZm9ybWF0dGluZy5wYWdld2lkdGggPSBwbDtcblx0XHRpZiAoIXR1bmUuZm9ybWF0dGluZy5wYWdlaGVpZ2h0KVxuXHRcdFx0dHVuZS5mb3JtYXR0aW5nLnBhZ2VoZWlnaHQgPSBwaDtcblxuXHRcdGlmIChzd2l0Y2hlcy5oaW50X21lYXN1cmVzKSB7XG5cdFx0XHRhZGRIaW50TWVhc3VyZXMoKTtcblx0XHR9XG5cblx0XHR3cmFwLndyYXBMaW5lcyh0dW5lLCBtdWx0aWxpbmVWYXJzLmxpbmVCcmVha3MsIG11bHRpbGluZVZhcnMuYmFyTnVtYmVycyk7XG5cdH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBhcnNlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/parse/abc_parse.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/parse/abc_parse_book.js":
/*!********************************************************!*\
  !*** ./node_modules/abcjs/src/parse/abc_parse_book.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_parse_book.js: parses a string representing ABC Music Notation into a usable internal structure.\n\nvar parseCommon = __webpack_require__(/*! ./abc_common */ \"(ssr)/./node_modules/abcjs/src/parse/abc_common.js\");\n\nvar bookParser = function(book) {\n\t\"use strict\";\n\n\tvar directives = \"\";\n\tvar initialWhiteSpace = book.match(/(\\s*)/)\n\tbook = parseCommon.strip(book);\n\tvar tuneStrings = book.split(\"\\nX:\");\n\t// Put back the X: that we lost when splitting the tunes.\n\tfor (var i = 1; i < tuneStrings.length; i++)\n\t\ttuneStrings[i] = \"X:\" + tuneStrings[i];\n\t// Keep track of the character position each tune starts with. If the string starts with white space, count that, too.\n\tvar pos = initialWhiteSpace ? initialWhiteSpace[0].length : 0;\n\tvar tunes = [];\n\ttuneStrings.forEach(function(tune) {\n\t\ttunes.push({ abc: tune, startPos: pos});\n\t\tpos += tune.length + 1; // We also lost a newline when splitting, so count that.\n\t});\n\tif (tunes.length > 1 && !parseCommon.startsWith(tunes[0].abc, 'X:')) {\t// If there is only one tune, the X: might be missing, otherwise assume the top of the file is \"intertune\"\n\t\t// There could be file-wide directives in this, if so, we need to insert it into each tune. We can probably get away with\n\t\t// just looking for file-wide directives here (before the first tune) and inserting them at the bottom of each tune, since\n\t\t// the tune is parsed all at once. The directives will be seen before the engraver begins processing.\n\t\tvar dir = tunes.shift();\n\t\tvar arrDir = dir.abc.split('\\n');\n\t\tarrDir.forEach(function(line) {\n\t\t\tif (parseCommon.startsWith(line, '%%'))\n\t\t\t\tdirectives += line + '\\n';\n\t\t});\n\t}\n\tvar header = directives;\n\n\t// Now, the tune ends at a blank line, so truncate it if needed. There may be \"intertune\" stuff.\n\ttunes.forEach(function(tune) {\n\t\tvar end = tune.abc.indexOf('\\n\\n');\n\t\tif (end > 0)\n\t\t\ttune.abc = tune.abc.substring(0, end);\n\t\ttune.pure = tune.abc;\n\t\ttune.abc = directives + tune.abc;\n\n\t\t// for the user's convenience, parse and store the title separately. The title is between the first T: and the next \\n\n\t\ttune.title = \"\";\n\t\tvar title = tune.pure.split(\"T:\");\n\t\tif (title.length > 1) {\n\t\t\ttitle = title[1].split(\"\\n\");\n\t\t\ttune.title = parseCommon.strip(title[0]);\n\t\t}\n\n\t\t// for the user's convenience, parse and store the id separately. The id is between the first X: and the next \\n\n\t\tvar id = tune.pure.substring(2, tune.pure.indexOf(\"\\n\"));\n\t\ttune.id = parseCommon.strip(id);\n\t});\n\n\treturn {\n\t\theader: header,\n\t\ttunes: tunes\n\t};\n};\n\nmodule.exports = bookParser;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL2FiY19wYXJzZV9ib29rLmpzIiwibWFwcGluZ3MiOiJBQUFBOztBQUVBLGtCQUFrQixtQkFBTyxDQUFDLHdFQUFjOztBQUV4QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsd0JBQXdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHlCQUF5QjtBQUN4QywwQkFBMEI7QUFDMUIsRUFBRTtBQUNGLHdFQUF3RTtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL2FiY19wYXJzZV9ib29rLmpzPzZiYWYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gICAgYWJjX3BhcnNlX2Jvb2suanM6IHBhcnNlcyBhIHN0cmluZyByZXByZXNlbnRpbmcgQUJDIE11c2ljIE5vdGF0aW9uIGludG8gYSB1c2FibGUgaW50ZXJuYWwgc3RydWN0dXJlLlxuXG52YXIgcGFyc2VDb21tb24gPSByZXF1aXJlKCcuL2FiY19jb21tb24nKTtcblxudmFyIGJvb2tQYXJzZXIgPSBmdW5jdGlvbihib29rKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBkaXJlY3RpdmVzID0gXCJcIjtcblx0dmFyIGluaXRpYWxXaGl0ZVNwYWNlID0gYm9vay5tYXRjaCgvKFxccyopLylcblx0Ym9vayA9IHBhcnNlQ29tbW9uLnN0cmlwKGJvb2spO1xuXHR2YXIgdHVuZVN0cmluZ3MgPSBib29rLnNwbGl0KFwiXFxuWDpcIik7XG5cdC8vIFB1dCBiYWNrIHRoZSBYOiB0aGF0IHdlIGxvc3Qgd2hlbiBzcGxpdHRpbmcgdGhlIHR1bmVzLlxuXHRmb3IgKHZhciBpID0gMTsgaSA8IHR1bmVTdHJpbmdzLmxlbmd0aDsgaSsrKVxuXHRcdHR1bmVTdHJpbmdzW2ldID0gXCJYOlwiICsgdHVuZVN0cmluZ3NbaV07XG5cdC8vIEtlZXAgdHJhY2sgb2YgdGhlIGNoYXJhY3RlciBwb3NpdGlvbiBlYWNoIHR1bmUgc3RhcnRzIHdpdGguIElmIHRoZSBzdHJpbmcgc3RhcnRzIHdpdGggd2hpdGUgc3BhY2UsIGNvdW50IHRoYXQsIHRvby5cblx0dmFyIHBvcyA9IGluaXRpYWxXaGl0ZVNwYWNlID8gaW5pdGlhbFdoaXRlU3BhY2VbMF0ubGVuZ3RoIDogMDtcblx0dmFyIHR1bmVzID0gW107XG5cdHR1bmVTdHJpbmdzLmZvckVhY2goZnVuY3Rpb24odHVuZSkge1xuXHRcdHR1bmVzLnB1c2goeyBhYmM6IHR1bmUsIHN0YXJ0UG9zOiBwb3N9KTtcblx0XHRwb3MgKz0gdHVuZS5sZW5ndGggKyAxOyAvLyBXZSBhbHNvIGxvc3QgYSBuZXdsaW5lIHdoZW4gc3BsaXR0aW5nLCBzbyBjb3VudCB0aGF0LlxuXHR9KTtcblx0aWYgKHR1bmVzLmxlbmd0aCA+IDEgJiYgIXBhcnNlQ29tbW9uLnN0YXJ0c1dpdGgodHVuZXNbMF0uYWJjLCAnWDonKSkge1x0Ly8gSWYgdGhlcmUgaXMgb25seSBvbmUgdHVuZSwgdGhlIFg6IG1pZ2h0IGJlIG1pc3NpbmcsIG90aGVyd2lzZSBhc3N1bWUgdGhlIHRvcCBvZiB0aGUgZmlsZSBpcyBcImludGVydHVuZVwiXG5cdFx0Ly8gVGhlcmUgY291bGQgYmUgZmlsZS13aWRlIGRpcmVjdGl2ZXMgaW4gdGhpcywgaWYgc28sIHdlIG5lZWQgdG8gaW5zZXJ0IGl0IGludG8gZWFjaCB0dW5lLiBXZSBjYW4gcHJvYmFibHkgZ2V0IGF3YXkgd2l0aFxuXHRcdC8vIGp1c3QgbG9va2luZyBmb3IgZmlsZS13aWRlIGRpcmVjdGl2ZXMgaGVyZSAoYmVmb3JlIHRoZSBmaXJzdCB0dW5lKSBhbmQgaW5zZXJ0aW5nIHRoZW0gYXQgdGhlIGJvdHRvbSBvZiBlYWNoIHR1bmUsIHNpbmNlXG5cdFx0Ly8gdGhlIHR1bmUgaXMgcGFyc2VkIGFsbCBhdCBvbmNlLiBUaGUgZGlyZWN0aXZlcyB3aWxsIGJlIHNlZW4gYmVmb3JlIHRoZSBlbmdyYXZlciBiZWdpbnMgcHJvY2Vzc2luZy5cblx0XHR2YXIgZGlyID0gdHVuZXMuc2hpZnQoKTtcblx0XHR2YXIgYXJyRGlyID0gZGlyLmFiYy5zcGxpdCgnXFxuJyk7XG5cdFx0YXJyRGlyLmZvckVhY2goZnVuY3Rpb24obGluZSkge1xuXHRcdFx0aWYgKHBhcnNlQ29tbW9uLnN0YXJ0c1dpdGgobGluZSwgJyUlJykpXG5cdFx0XHRcdGRpcmVjdGl2ZXMgKz0gbGluZSArICdcXG4nO1xuXHRcdH0pO1xuXHR9XG5cdHZhciBoZWFkZXIgPSBkaXJlY3RpdmVzO1xuXG5cdC8vIE5vdywgdGhlIHR1bmUgZW5kcyBhdCBhIGJsYW5rIGxpbmUsIHNvIHRydW5jYXRlIGl0IGlmIG5lZWRlZC4gVGhlcmUgbWF5IGJlIFwiaW50ZXJ0dW5lXCIgc3R1ZmYuXG5cdHR1bmVzLmZvckVhY2goZnVuY3Rpb24odHVuZSkge1xuXHRcdHZhciBlbmQgPSB0dW5lLmFiYy5pbmRleE9mKCdcXG5cXG4nKTtcblx0XHRpZiAoZW5kID4gMClcblx0XHRcdHR1bmUuYWJjID0gdHVuZS5hYmMuc3Vic3RyaW5nKDAsIGVuZCk7XG5cdFx0dHVuZS5wdXJlID0gdHVuZS5hYmM7XG5cdFx0dHVuZS5hYmMgPSBkaXJlY3RpdmVzICsgdHVuZS5hYmM7XG5cblx0XHQvLyBmb3IgdGhlIHVzZXIncyBjb252ZW5pZW5jZSwgcGFyc2UgYW5kIHN0b3JlIHRoZSB0aXRsZSBzZXBhcmF0ZWx5LiBUaGUgdGl0bGUgaXMgYmV0d2VlbiB0aGUgZmlyc3QgVDogYW5kIHRoZSBuZXh0IFxcblxuXHRcdHR1bmUudGl0bGUgPSBcIlwiO1xuXHRcdHZhciB0aXRsZSA9IHR1bmUucHVyZS5zcGxpdChcIlQ6XCIpO1xuXHRcdGlmICh0aXRsZS5sZW5ndGggPiAxKSB7XG5cdFx0XHR0aXRsZSA9IHRpdGxlWzFdLnNwbGl0KFwiXFxuXCIpO1xuXHRcdFx0dHVuZS50aXRsZSA9IHBhcnNlQ29tbW9uLnN0cmlwKHRpdGxlWzBdKTtcblx0XHR9XG5cblx0XHQvLyBmb3IgdGhlIHVzZXIncyBjb252ZW5pZW5jZSwgcGFyc2UgYW5kIHN0b3JlIHRoZSBpZCBzZXBhcmF0ZWx5LiBUaGUgaWQgaXMgYmV0d2VlbiB0aGUgZmlyc3QgWDogYW5kIHRoZSBuZXh0IFxcblxuXHRcdHZhciBpZCA9IHR1bmUucHVyZS5zdWJzdHJpbmcoMiwgdHVuZS5wdXJlLmluZGV4T2YoXCJcXG5cIikpO1xuXHRcdHR1bmUuaWQgPSBwYXJzZUNvbW1vbi5zdHJpcChpZCk7XG5cdH0pO1xuXG5cdHJldHVybiB7XG5cdFx0aGVhZGVyOiBoZWFkZXIsXG5cdFx0dHVuZXM6IHR1bmVzXG5cdH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGJvb2tQYXJzZXI7XG5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/parse/abc_parse_book.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/parse/abc_parse_directive.js":
/*!*************************************************************!*\
  !*** ./node_modules/abcjs/src/parse/abc_parse_directive.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var parseCommon = __webpack_require__(/*! ./abc_common */ \"(ssr)/./node_modules/abcjs/src/parse/abc_common.js\");\n\nvar parseDirective = {};\n\n(function() {\n\t\"use strict\";\n\tvar tokenizer;\n\tvar warn;\n\tvar multilineVars;\n\tvar tune;\n\tvar tuneBuilder;\n\tparseDirective.initialize = function(tokenizer_, warn_, multilineVars_, tune_, tuneBuilder_) {\n\t\ttokenizer = tokenizer_;\n\t\twarn = warn_;\n\t\tmultilineVars = multilineVars_;\n\t\ttune = tune_;\n\t\ttuneBuilder = tuneBuilder_;\n\t\tinitializeFonts();\n\t};\n\n\tfunction initializeFonts() {\n\t\tmultilineVars.annotationfont  = { face: \"Helvetica\", size: 12, weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\tmultilineVars.gchordfont  = { face: \"Helvetica\", size: 12, weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\tmultilineVars.historyfont  = { face: \"\\\"Times New Roman\\\"\", size: 16, weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\tmultilineVars.infofont  = { face: \"\\\"Times New Roman\\\"\", size: 14, weight: \"normal\", style: \"italic\", decoration: \"none\" };\n\t\tmultilineVars.measurefont  = { face: \"\\\"Times New Roman\\\"\", size: 14, weight: \"normal\", style: \"italic\", decoration: \"none\" };\n\t\tmultilineVars.partsfont  = { face: \"\\\"Times New Roman\\\"\", size: 15, weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\tmultilineVars.repeatfont  = { face: \"\\\"Times New Roman\\\"\", size: 13, weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\tmultilineVars.textfont  = { face: \"\\\"Times New Roman\\\"\", size: 16, weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\tmultilineVars.tripletfont = {face: \"Times\", size: 11, weight: \"normal\", style: \"italic\", decoration: \"none\"};\n\t\tmultilineVars.vocalfont  = { face: \"\\\"Times New Roman\\\"\", size: 13, weight: \"bold\", style: \"normal\", decoration: \"none\" };\n\t\tmultilineVars.wordsfont  = { face: \"\\\"Times New Roman\\\"\", size: 16, weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\n\t\t// These fonts are global for the entire tune.\n\t\ttune.formatting.composerfont  = { face: \"\\\"Times New Roman\\\"\", size: 14, weight: \"normal\", style: \"italic\", decoration: \"none\" };\n\t\ttune.formatting.subtitlefont  = { face: \"\\\"Times New Roman\\\"\", size: 16, weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\ttune.formatting.tempofont  = { face: \"\\\"Times New Roman\\\"\", size: 15, weight: \"bold\", style: \"normal\", decoration: \"none\" };\n\t\ttune.formatting.titlefont  = { face: \"\\\"Times New Roman\\\"\", size: 20, weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\ttune.formatting.footerfont  = { face: \"\\\"Times New Roman\\\"\", size: 12, weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\ttune.formatting.headerfont  = { face: \"\\\"Times New Roman\\\"\", size: 12, weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\ttune.formatting.voicefont  = { face: \"\\\"Times New Roman\\\"\", size: 13, weight: \"bold\", style: \"normal\", decoration: \"none\" };\n\t\ttune.formatting.tablabelfont  = { face: \"\\\"Trebuchet MS\\\"\", size: 16, weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\ttune.formatting.tabnumberfont = { face: \"\\\"Arial\\\"\", size: 11, weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\ttune.formatting.tabgracefont = { face: \"\\\"Arial\\\"\", size: 8, weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\n\t\t// these are the default fonts for these element types. In the printer, these fonts might change as the tune progresses.\n\t\ttune.formatting.annotationfont  = multilineVars.annotationfont;\n\t\ttune.formatting.gchordfont  = multilineVars.gchordfont;\n\t\ttune.formatting.historyfont  = multilineVars.historyfont;\n\t\ttune.formatting.infofont  = multilineVars.infofont;\n\t\ttune.formatting.measurefont  = multilineVars.measurefont;\n\t\ttune.formatting.partsfont  = multilineVars.partsfont;\n\t\ttune.formatting.repeatfont  = multilineVars.repeatfont;\n\t\ttune.formatting.textfont  = multilineVars.textfont;\n\t\ttune.formatting.tripletfont  = multilineVars.tripletfont;\n\t\ttune.formatting.vocalfont  = multilineVars.vocalfont;\n\t\ttune.formatting.wordsfont  = multilineVars.wordsfont;\n\t}\n\n\tvar fontTypeCanHaveBox = { gchordfont: true, measurefont: true, partsfont: true, annotationfont: true, composerfont: true, historyfont: true, infofont: true, subtitlefont: true, textfont: true, titlefont: true, voicefont: true  };\n\n\tvar fontTranslation = function(fontFace) {\n\t\t// This translates Postscript fonts for a web alternative.\n\t\t// Note that the postscript fonts contain italic and bold info in them, so what is returned is a hash.\n\n\t\tswitch (fontFace) {\n\t\t\tcase \"Arial-Italic\":\n\t\t\t\treturn { face: \"Arial\", weight: \"normal\", style: \"italic\", decoration: \"none\" };\n\t\t\tcase \"Arial-Bold\":\n\t\t\t\treturn { face: \"Arial\", weight: \"bold\", style: \"normal\", decoration: \"none\" };\n\t\t\tcase \"Bookman-Demi\":\n\t\t\t\treturn { face: \"Bookman,serif\", weight: \"bold\", style: \"normal\", decoration: \"none\" };\n\t\t\tcase \"Bookman-DemiItalic\":\n\t\t\t\treturn { face: \"Bookman,serif\", weight: \"bold\", style: \"italic\", decoration: \"none\" };\n\t\t\tcase \"Bookman-Light\":\n\t\t\t\treturn { face: \"Bookman,serif\", weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\t\tcase \"Bookman-LightItalic\":\n\t\t\t\treturn { face: \"Bookman,serif\", weight: \"normal\", style: \"italic\", decoration: \"none\" };\n\t\t\tcase \"Courier\":\n\t\t\t\treturn { face: \"\\\"Courier New\\\"\", weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\t\tcase \"Courier-Oblique\":\n\t\t\t\treturn { face: \"\\\"Courier New\\\"\", weight: \"normal\", style: \"italic\", decoration: \"none\" };\n\t\t\tcase \"Courier-Bold\":\n\t\t\t\treturn { face: \"\\\"Courier New\\\"\", weight: \"bold\", style: \"normal\", decoration: \"none\" };\n\t\t\tcase \"Courier-BoldOblique\":\n\t\t\t\treturn { face: \"\\\"Courier New\\\"\", weight: \"bold\", style: \"italic\", decoration: \"none\" };\n\t\t\tcase \"AvantGarde-Book\":\n\t\t\t\treturn { face: \"AvantGarde,Arial\", weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\t\tcase \"AvantGarde-BookOblique\":\n\t\t\t\treturn { face: \"AvantGarde,Arial\", weight: \"normal\", style: \"italic\", decoration: \"none\" };\n\t\t\tcase \"AvantGarde-Demi\":\n\t\t\tcase \"Avant-Garde-Demi\":\n\t\t\t\treturn { face: \"AvantGarde,Arial\", weight: \"bold\", style: \"normal\", decoration: \"none\" };\n\t\t\tcase \"AvantGarde-DemiOblique\":\n\t\t\t\treturn { face: \"AvantGarde,Arial\", weight: \"bold\", style: \"italic\", decoration: \"none\" };\n\t\t\tcase \"Helvetica-Oblique\":\n\t\t\t\treturn { face: \"Helvetica\", weight: \"normal\", style: \"italic\", decoration: \"none\" };\n\t\t\tcase \"Helvetica-Bold\":\n\t\t\t\treturn { face: \"Helvetica\", weight: \"bold\", style: \"normal\", decoration: \"none\" };\n\t\t\tcase \"Helvetica-BoldOblique\":\n\t\t\t\treturn { face: \"Helvetica\", weight: \"bold\", style: \"italic\", decoration: \"none\" };\n\t\t\tcase \"Helvetica-Narrow\":\n\t\t\t\treturn { face: \"\\\"Helvetica Narrow\\\",Helvetica\", weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\t\tcase \"Helvetica-Narrow-Oblique\":\n\t\t\t\treturn { face: \"\\\"Helvetica Narrow\\\",Helvetica\", weight: \"normal\", style: \"italic\", decoration: \"none\" };\n\t\t\tcase \"Helvetica-Narrow-Bold\":\n\t\t\t\treturn { face: \"\\\"Helvetica Narrow\\\",Helvetica\", weight: \"bold\", style: \"normal\", decoration: \"none\" };\n\t\t\tcase \"Helvetica-Narrow-BoldOblique\":\n\t\t\t\treturn { face: \"\\\"Helvetica Narrow\\\",Helvetica\", weight: \"bold\", style: \"italic\", decoration: \"none\" };\n\t\t\tcase \"Palatino-Roman\":\n\t\t\t\treturn { face: \"Palatino\", weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\t\tcase \"Palatino-Italic\":\n\t\t\t\treturn { face: \"Palatino\", weight: \"normal\", style: \"italic\", decoration: \"none\" };\n\t\t\tcase \"Palatino-Bold\":\n\t\t\t\treturn { face: \"Palatino\", weight: \"bold\", style: \"normal\", decoration: \"none\" };\n\t\t\tcase \"Palatino-BoldItalic\":\n\t\t\t\treturn { face: \"Palatino\", weight: \"bold\", style: \"italic\", decoration: \"none\" };\n\t\t\tcase \"NewCenturySchlbk-Roman\":\n\t\t\t\treturn { face: \"\\\"New Century\\\",serif\", weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\t\tcase \"NewCenturySchlbk-Italic\":\n\t\t\t\treturn { face: \"\\\"New Century\\\",serif\", weight: \"normal\", style: \"italic\", decoration: \"none\" };\n\t\t\tcase \"NewCenturySchlbk-Bold\":\n\t\t\t\treturn { face: \"\\\"New Century\\\",serif\", weight: \"bold\", style: \"normal\", decoration: \"none\" };\n\t\t\tcase \"NewCenturySchlbk-BoldItalic\":\n\t\t\t\treturn { face: \"\\\"New Century\\\",serif\", weight: \"bold\", style: \"italic\", decoration: \"none\" };\n\t\t\tcase \"Times\":\n\t\t\tcase \"Times-Roman\":\n\t\t\tcase \"Times-Narrow\":\n\t\t\tcase \"Times-Courier\":\n\t\t\tcase \"Times-New-Roman\":\n\t\t\t\treturn { face: \"\\\"Times New Roman\\\"\", weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\t\tcase \"Times-Italic\":\n\t\t\tcase \"Times-Italics\":\n\t\t\t\treturn { face: \"\\\"Times New Roman\\\"\", weight: \"normal\", style: \"italic\", decoration: \"none\" };\n\t\t\tcase \"Times-Bold\":\n\t\t\t\treturn { face: \"\\\"Times New Roman\\\"\", weight: \"bold\", style: \"normal\", decoration: \"none\" };\n\t\t\tcase \"Times-BoldItalic\":\n\t\t\t\treturn { face: \"\\\"Times New Roman\\\"\", weight: \"bold\", style: \"italic\", decoration: \"none\" };\n\t\t\tcase \"ZapfChancery-MediumItalic\":\n\t\t\t\treturn { face: \"\\\"Zapf Chancery\\\",cursive,serif\", weight: \"normal\", style: \"normal\", decoration: \"none\" };\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t};\n\n\tvar getFontParameter = function(tokens, currentSetting, str, position, cmd) {\n\t\t// Every font parameter has the following format:\n\t\t// <face> <utf8> <size> <modifiers> <box>\n\t\t// Where:\n\t\t// face: either a standard web font name, or a postscript font, enumerated in fontTranslation. This could also be an * or be missing if the face shouldn't change.\n\t\t// utf8: This is optional, and specifies utf8. That's all that is supported so the field is just silently ignored.\n\t\t// size: The size, in pixels. This may be omitted if the size is not changing.\n\t\t// modifiers: zero or more of \"bold\", \"italic\", \"underline\"\n\t\t// box: Only applies to the measure numbers, gchords, and the parts. If present, then a box is drawn around the characters.\n\t\t// If face is present, then all the modifiers are cleared. If face is absent, then the modifiers are illegal.\n\t\t// The face can be a single word, a set of words separated by hyphens, or a quoted string.\n\t\t//\n\t\t// So, in practicality, there are three types of font definitions: a number only, an asterisk and a number only, or the full definition (with an optional size).\n\t\tfunction processNumberOnly() {\n\t\t\tvar size = parseInt(tokens[0].token);\n\t\t\ttokens.shift();\n\t\t\tif (!currentSetting) {\n\t\t\t\twarn(\"Can't set just the size of the font since there is no default value.\", str, position);\n\t\t\t\treturn { face: \"\\\"Times New Roman\\\"\", weight: \"normal\", style: \"normal\", decoration: \"none\", size: size};\n\t\t\t}\n\t\t\tif (tokens.length === 0) {\n\t\t\t\treturn { face: currentSetting.face, weight: currentSetting.weight, style: currentSetting.style, decoration: currentSetting.decoration, size: size};\n\t\t\t}\n\t\t\tif (tokens.length === 1 && tokens[0].token === \"box\" && fontTypeCanHaveBox[cmd])\n\t\t\t\treturn { face: currentSetting.face, weight: currentSetting.weight, style: currentSetting.style, decoration: currentSetting.decoration, size: size, box: true};\n\t\t\twarn(\"Extra parameters in font definition.\", str, position);\n\t\t\treturn { face: currentSetting.face, weight: currentSetting.weight, style: currentSetting.style, decoration: currentSetting.decoration, size: size};\n\t\t}\n\n\t\t// format 1: asterisk and number only\n\t\tif (tokens[0].token === '*') {\n\t\t\ttokens.shift();\n\t\t\tif (tokens[0].type === 'number')\n\t\t\t\treturn processNumberOnly();\n\t\t\telse {\n\t\t\t\twarn(\"Expected font size number after *.\", str, position);\n\t\t\t}\n\t\t}\n\n\t\t// format 2: number only\n\t\tif (tokens[0].type === 'number') {\n\t\t\treturn processNumberOnly();\n\t\t}\n\n\t\t// format 3: whole definition\n\t\tvar face = [];\n\t\tvar size;\n\t\tvar weight = \"normal\";\n\t\tvar style = \"normal\";\n\t\tvar decoration = \"none\";\n\t\tvar box = false;\n\t\tvar state = 'face';\n\t\tvar hyphenLast = false;\n\t\twhile (tokens.length) {\n\t\t\tvar currToken = tokens.shift();\n\t\t\tvar word = currToken.token.toLowerCase();\n\t\t\tswitch (state) {\n\t\t\t\tcase 'face':\n\t\t\t\t\tif (hyphenLast || (word !== 'utf' && currToken.type !== 'number' && word !== \"bold\" && word !== \"italic\" && word !== \"underline\" && word !== \"box\")) {\n\t\t\t\t\t\tif (face.length > 0 && currToken.token === '-') {\n\t\t\t\t\t\t\thyphenLast = true;\n\t\t\t\t\t\t\tface[face.length-1] = face[face.length-1] + currToken.token;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (hyphenLast) {\n\t\t\t\t\t\t\t\thyphenLast = false;\n\t\t\t\t\t\t\t\tface[face.length-1] = face[face.length-1] + currToken.token;\n\t\t\t\t\t\t\t} else\n\t\t\t\t\t\t\t\tface.push(currToken.token);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (currToken.type === 'number') {\n\t\t\t\t\t\t\tif (size) {\n\t\t\t\t\t\t\t\twarn(\"Font size specified twice in font definition.\", str, position);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsize = currToken.token;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstate = 'modifier';\n\t\t\t\t\t\t} else if (word === \"bold\")\n\t\t\t\t\t\t\tweight = \"bold\";\n\t\t\t\t\t\telse if (word === \"italic\")\n\t\t\t\t\t\t\tstyle = \"italic\";\n\t\t\t\t\t\telse if (word === \"underline\")\n\t\t\t\t\t\t\tdecoration = \"underline\";\n\t\t\t\t\t\telse if (word === \"box\") {\n\t\t\t\t\t\t\tif (fontTypeCanHaveBox[cmd])\n\t\t\t\t\t\t\t\tbox = true;\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\twarn(\"This font style doesn't support \\\"box\\\"\", str, position);\n\t\t\t\t\t\t\tstate = \"finished\";\n\t\t\t\t\t\t} else if (word === \"utf\") {\n\t\t\t\t\t\t\tcurrToken = tokens.shift(); // this gets rid of the \"8\" after \"utf\"\n\t\t\t\t\t\t\tstate = \"size\";\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\twarn(\"Unknown parameter \" + currToken.token + \" in font definition.\", str, position);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"size\":\n\t\t\t\t\tif (currToken.type === 'number') {\n\t\t\t\t\t\tif (size) {\n\t\t\t\t\t\t\twarn(\"Font size specified twice in font definition.\", str, position);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsize = currToken.token;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\twarn(\"Expected font size in font definition.\", str, position);\n\t\t\t\t\t}\n\t\t\t\t\tstate = 'modifier';\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"modifier\":\n\t\t\t\t\tif (word === \"bold\")\n\t\t\t\t\t\tweight = \"bold\";\n\t\t\t\t\telse if (word === \"italic\")\n\t\t\t\t\t\tstyle = \"italic\";\n\t\t\t\t\telse if (word === \"underline\")\n\t\t\t\t\t\tdecoration = \"underline\";\n\t\t\t\t\telse if (word === \"box\") {\n\t\t\t\t\t\tif (fontTypeCanHaveBox[cmd])\n\t\t\t\t\t\t\tbox = true;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\twarn(\"This font style doesn't support \\\"box\\\"\", str, position);\n\t\t\t\t\t\tstate = \"finished\";\n\t\t\t\t\t} else\n\t\t\t\t\t\twarn(\"Unknown parameter \" + currToken.token + \" in font definition.\", str, position);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"finished\":\n\t\t\t\t\twarn(\"Extra characters found after \\\"box\\\" in font definition.\", str, position);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (size === undefined) {\n\t\t\tif (!currentSetting) {\n\t\t\t\twarn(\"Must specify the size of the font since there is no default value.\", str, position);\n\t\t\t\tsize = 12;\n\t\t\t} else\n\t\t\t\tsize = currentSetting.size;\n\t\t} else\n\t\t\tsize = parseFloat(size);\n\n\t\tface = face.join(' ');\n\t\tif (face === '') {\n\t\t\tif (!currentSetting) {\n\t\t\t\twarn(\"Must specify the name of the font since there is no default value.\", str, position);\n\t\t\t\tface = \"sans-serif\";\n\t\t\t} else\n\t\t\t\tface = currentSetting.face;\n\t\t}\n\t\tvar psFont = fontTranslation(face);\n\t\tvar font = {};\n\t\tif (psFont) {\n\t\t\tfont.face = psFont.face;\n\t\t\tfont.weight = psFont.weight;\n\t\t\tfont.style = psFont.style;\n\t\t\tfont.decoration = psFont.decoration;\n\t\t\tfont.size = size;\n\t\t\tif (box)\n\t\t\t\tfont.box = true;\n\t\t\treturn font;\n\t\t}\n\t\tfont.face = face;\n\t\tfont.weight = weight;\n\t\tfont.style = style;\n\t\tfont.decoration = decoration;\n\t\tfont.size = size;\n\t\tif (box)\n\t\t\tfont.box = true;\n\t\treturn font;\n\t};\n\n\tvar getChangingFont = function(cmd, tokens, str) {\n\t\tif (tokens.length === 0)\n\t\t\treturn \"Directive \\\"\" + cmd + \"\\\" requires a font as a parameter.\";\n\t\tmultilineVars[cmd] = getFontParameter(tokens, multilineVars[cmd], str, 0, cmd);\n\t\tif (multilineVars.is_in_header) // If the font appears in the header, then it becomes the default font.\n\t\t\ttune.formatting[cmd] = multilineVars[cmd];\n\t\treturn null;\n\t};\n\tvar getGlobalFont = function(cmd, tokens, str) {\n\t\tif (tokens.length === 0)\n\t\t\treturn \"Directive \\\"\" + cmd + \"\\\" requires a font as a parameter.\";\n\t\ttune.formatting[cmd] = getFontParameter(tokens, tune.formatting[cmd], str, 0, cmd);\n\t\treturn null;\n\t};\n\n\tvar setScale = function(cmd, tokens) {\n\t\tvar scratch = \"\";\n\t\ttokens.forEach(function(tok) {\n\t\t\tscratch += tok.token;\n\t\t});\n\t\tvar num = parseFloat(scratch);\n\t\tif (isNaN(num) || num === 0)\n\t\t\treturn \"Directive \\\"\" + cmd + \"\\\" requires a number as a parameter.\";\n\t\ttune.formatting.scale = num;\n\n\t};\n\t// starts at 35\n\tvar drumNames = [\n\t\t\"acoustic-bass-drum\",\n\t\t\"bass-drum-1\",\n\t\t\"side-stick\",\n\t\t\"acoustic-snare\",\n\t\t\"hand-clap\",\n\t\t\"electric-snare\",\n\t\t\"low-floor-tom\",\n\t\t\"closed-hi-hat\",\n\t\t\"high-floor-tom\",\n\t\t\"pedal-hi-hat\",\n\t\t\"low-tom\",\n\t\t\"open-hi-hat\",\n\t\t\"low-mid-tom\",\n\t\t\"hi-mid-tom\",\n\t\t\"crash-cymbal-1\",\n\t\t\"high-tom\",\n\t\t\"ride-cymbal-1\",\n\t\t\"chinese-cymbal\",\n\t\t\"ride-bell\",\n\t\t\"tambourine\",\n\t\t\"splash-cymbal\",\n\t\t\"cowbell\",\n\t\t\"crash-cymbal-2\",\n\t\t\"vibraslap\",\n\t\t\"ride-cymbal-2\",\n\t\t\"hi-bongo\",\n\t\t\"low-bongo\",\n\t\t\"mute-hi-conga\",\n\t\t\"open-hi-conga\",\n\t\t\"low-conga\",\n\t\t\"high-timbale\",\n\t\t\"low-timbale\",\n\t\t\"high-agogo\",\n\t\t\"low-agogo\",\n\t\t\"cabasa\",\n\t\t\"maracas\",\n\t\t\"short-whistle\",\n\t\t\"long-whistle\",\n\t\t\"short-guiro\",\n\t\t\"long-guiro\",\n\t\t\"claves\",\n\t\t\"hi-wood-block\",\n\t\t\"low-wood-block\",\n\t\t\"mute-cuica\",\n\t\t\"open-cuica\",\n\t\t\"mute-triangle\",\n\t\t\"open-triangle\",\n\t];\n\n\tvar interpretPercMap = function(restOfString) {\n\t\tvar tokens = restOfString.split(/\\s+/); // Allow multiple spaces.\n\t\tif (tokens.length !== 2 && tokens.length !== 3)\n\t\t\treturn { error: 'Expected parameters \"abc-note\", \"drum-sound\", and optionally \"note-head\"'};\n\t\tvar key = tokens[0];\n\t\t// The percussion sound can either be a MIDI number or a drum name. If it is not a number then check for a name.\n\t\tvar pitch = parseInt(tokens[1], 10);\n\t\tif ((isNaN(pitch) || pitch < 35 || pitch > 81) && tokens[1]) {\n\t\t\tpitch = drumNames.indexOf(tokens[1].toLowerCase()) + 35;\n\t\t}\n\t\tif ((isNaN(pitch) || pitch < 35 || pitch > 81))\n\t\t\treturn { error: 'Expected drum name, received \"' + tokens[1] + '\"' };\n\t\tvar value = { sound: pitch };\n\t\tif (tokens.length === 3)\n\t\t\tvalue.noteHead = tokens[2];\n\t\treturn { key: key, value: value };\n\t};\n\n\tvar getRequiredMeasurement = function(cmd, tokens) {\n\t\tvar points = tokenizer.getMeasurement(tokens);\n\t\tif (points.used === 0 || tokens.length !== 0)\n\t\t\treturn { error: \"Directive \\\"\" + cmd + \"\\\" requires a measurement as a parameter.\"};\n\t\treturn points.value;\n\t};\n\tvar oneParameterMeasurement = function(cmd, tokens) {\n\t\tvar points = tokenizer.getMeasurement(tokens);\n\t\tif (points.used === 0 || tokens.length !== 0)\n\t\t\treturn \"Directive \\\"\" + cmd + \"\\\" requires a measurement as a parameter.\";\n\t\ttune.formatting[cmd] = points.value;\n\t\treturn null;\n\t};\n\n\tvar addMultilineVar = function(key, cmd, tokens, min, max) {\n\t\tif (tokens.length !== 1 || tokens[0].type !== 'number')\n\t\t\treturn \"Directive \\\"\" + cmd + \"\\\" requires a number as a parameter.\";\n\t\tvar i = tokens[0].intt;\n\t\tif (min !== undefined && i < min)\n\t\t\treturn \"Directive \\\"\" + cmd + \"\\\" requires a number greater than or equal to \" + min + \" as a parameter.\";\n\t\tif (max !== undefined && i > max)\n\t\t\treturn \"Directive \\\"\" + cmd + \"\\\" requires a number less than or equal to \" + max + \" as a parameter.\";\n\t\tmultilineVars[key] = i;\n\t\treturn null;\n\t};\n\n\tvar addMultilineVarBool = function(key, cmd, tokens) {\n\t\tif (tokens.length === 1 && (tokens[0].token === 'true' || tokens[0].token === 'false')) {\n\t\t\tmultilineVars[key] = tokens[0].token === 'true';\n\t\t\treturn null;\n\t\t}\n\t\tvar str = addMultilineVar(key, cmd, tokens, 0, 1);\n\t\tif (str !== null) return str;\n\t\tmultilineVars[key] = (multilineVars[key] === 1);\n\t\treturn null;\n\t};\n\n\tvar addMultilineVarOneParamChoice = function(key, cmd, tokens, choices) {\n\t\tif (tokens.length !== 1)\n\t\t\treturn \"Directive \\\"\" + cmd + \"\\\" requires one of [ \" + choices.join(\", \") + \" ] as a parameter.\";\n\t\tvar choice = tokens[0].token;\n\t\tvar found = false;\n\t\tfor (var i = 0; !found && i < choices.length; i++) {\n\t\t\tif (choices[i] === choice)\n\t\t\t\tfound = true;\n\t\t}\n\t\tif (!found)\n\t\t\treturn \"Directive \\\"\" + cmd + \"\\\" requires one of [ \" + choices.join(\", \") + \" ] as a parameter.\";\n\t\tmultilineVars[key] = choice;\n\t\treturn null;\n\t};\n\n\tvar midiCmdParam0 = [\n\t\t\"nobarlines\",\n\t\t\"barlines\",\n\t\t\"beataccents\",\n\t\t\"nobeataccents\",\n\t\t\"droneon\",\n\t\t\"droneoff\",\n\t\t\"drumon\",\n\t\t\"drumoff\",\n\t\t\"fermatafixed\",\n\t\t\"fermataproportional\",\n\t\t\"gchordon\",\n\t\t\"gchordoff\",\n\t\t\"controlcombo\",\n\t\t\"temperamentnormal\",\n\t\t\"noportamento\"\n\t];\n\tvar midiCmdParam1String = [\n\t\t\"gchord\",\n\t\t\"ptstress\",\n\t\t\"beatstring\"\n\t];\n\tvar midiCmdParam1Integer = [\n\t\t\"bassvol\",\n\t\t\"chordvol\",\n\t\t\"c\",\n\t\t\"channel\",\n\t\t\"beatmod\",\n\t\t\"deltaloudness\",\n\t\t\"drumbars\",\n\t\t\"gracedivider\",\n\t\t\"makechordchannels\",\n\t\t\"randomchordattack\",\n\t\t\"chordattack\",\n\t\t\"stressmodel\",\n\t\t\"transpose\",\n\t\t\"rtranspose\",\n\t\t\"vol\",\n\t\t\"volinc\",\n\t\t\"gchordbars\"\t\n\t];\n\tvar midiCmdParam1Integer1OptionalInteger = [\n\t\t\"program\"\n\t];\n\tvar midiCmdParam2Integer = [\n\t\t\"ratio\",\n\t\t\"snt\",\n\t\t\"bendvelocity\",\n\t\t\"pitchbend\",\n\t\t\"control\",\n\t\t\"temperamentlinear\"\n\t];\n\tvar midiCmdParam4Integer = [\n\t\t\"beat\"\n\t];\n\tvar midiCmdParam5Integer = [\n\t\t\"drone\"\n\t];\n\tvar midiCmdParam1String1Integer = [\n\t\t\"portamento\"\n\t];\n\tvar midiCmdParamFraction = [\n\t\t\"expand\",\n\t\t\"grace\",\n\t\t\"trim\"\n\t];\n\tvar midiCmdParam1StringVariableIntegers = [\n\t\t\"drum\",\n\t\t\"chordname\"\n\t];\n  \tvar midiCmdParam1Integer1OptionalString = [\n  \t\t\"bassprog\", \"chordprog\"\n  \t];\n\n\n\tvar parseMidiCommand = function(midi, tune, restOfString) {\n\t\tvar midi_cmd = midi.shift().token;\n\t\tvar midi_params = [];\n\t\tif (midiCmdParam0.indexOf(midi_cmd) >= 0) {\n\t\t\t// NO PARAMETERS\n\t\t\tif (midi.length !== 0)\n\t\t\t\twarn(\"Unexpected parameter in MIDI \" + midi_cmd, restOfString, 0);\n\t\t} else if (midiCmdParam1String.indexOf(midi_cmd) >= 0) {\n\t\t\t// ONE STRING PARAMETER\n\t\t\tif (midi.length !== 1)\n\t\t\t\twarn(\"Expected one parameter in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse\n\t\t\t\tmidi_params.push(midi[0].token);\n\t\t} else if (midiCmdParam1Integer.indexOf(midi_cmd) >= 0) {\n\t\t\t// ONE INT PARAMETER\n\t\t\tif (midi.length !== 1)\n\t\t\t\twarn(\"Expected one parameter in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse if (midi[0].type !== \"number\")\n\t\t\t\twarn(\"Expected one integer parameter in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse\n\t\t\t\tmidi_params.push(midi[0].intt);\n\t\t} else if (midiCmdParam1Integer1OptionalInteger.indexOf(midi_cmd) >= 0) {\n\t\t\t// ONE INT PARAMETER, ONE OPTIONAL PARAMETER\n\t\t\tif (midi.length !== 1 && midi.length !== 2)\n\t\t\t\twarn(\"Expected one or two parameters in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse if (midi[0].type !== \"number\")\n\t\t\t\twarn(\"Expected integer parameter in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse if (midi.length === 2 && midi[1].type !== \"number\")\n\t\t\t\twarn(\"Expected integer parameter in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse {\n\t\t\t\tmidi_params.push(midi[0].intt);\n\t\t\t\tif (midi.length === 2)\n\t\t\t\t\tmidi_params.push(midi[1].intt);\n\t\t\t}\n\t\t} else if (midiCmdParam2Integer.indexOf(midi_cmd) >= 0) {\n\t\t\t// TWO INT PARAMETERS\n\t\t\tif (midi.length !== 2)\n\t\t\t\twarn(\"Expected two parameters in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse if (midi[0].type !== \"number\" || midi[1].type !== \"number\")\n\t\t\t\twarn(\"Expected two integer parameters in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse {\n\t\t\t\tmidi_params.push(midi[0].intt);\n\t\t\t\tmidi_params.push(midi[1].intt);\n\t\t\t}\n\t\t} else if (midiCmdParam1String1Integer.indexOf(midi_cmd) >= 0) {\n\t\t\t// ONE STRING PARAMETER, ONE INT PARAMETER\n\t\t\tif (midi.length !== 2)\n\t\t\t\twarn(\"Expected two parameters in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse if (midi[0].type !== \"alpha\" || midi[1].type !== \"number\")\n\t\t\t\twarn(\"Expected one string and one integer parameters in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse {\n\t\t\t\tmidi_params.push(midi[0].token);\n\t\t\t\tmidi_params.push(midi[1].intt);\n\t\t\t}\n\t\t} else if (midi_cmd === 'drummap') {\n\t\t\t// BUILD AN OBJECT OF ABC NOTE => MIDI NOTE\n\t\t\tif (midi.length === 2 && midi[0].type === 'alpha' && midi[1].type === 'number') {\n\t\t\t\tif (!tune.formatting) tune.formatting = {};\n\t\t\t\tif (!tune.formatting.midi) tune.formatting.midi = {};\n\t\t\t\tif (!tune.formatting.midi.drummap) tune.formatting.midi.drummap = {};\n\t\t\t\ttune.formatting.midi.drummap[midi[0].token] = midi[1].intt;\n\t\t\t\tmidi_params = tune.formatting.midi.drummap;\n\t\t\t} else if (midi.length === 3 && midi[0].type === 'punct' && midi[1].type === 'alpha' && midi[2].type === 'number') {\n\t\t\t\tif (!tune.formatting) tune.formatting = {};\n\t\t\t\tif (!tune.formatting.midi) tune.formatting.midi = {};\n\t\t\t\tif (!tune.formatting.midi.drummap) tune.formatting.midi.drummap = {};\n\t\t\t\ttune.formatting.midi.drummap[midi[0].token+midi[1].token] = midi[2].intt;\n\t\t\t\tmidi_params = tune.formatting.midi.drummap;\n\t\t\t} else {\n\t\t\t\twarn(\"Expected one note name and one integer parameter in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\t}\n\t\t} else if (midiCmdParamFraction.indexOf(midi_cmd) >= 0) {\n\t\t\t// ONE FRACTION PARAMETER\n\t\t\tif (midi.length !== 3)\n\t\t\t\twarn(\"Expected fraction parameter in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse if (midi[0].type !== \"number\" || midi[1].token !== \"/\" || midi[2].type !== \"number\")\n\t\t\t\twarn(\"Expected fraction parameter in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse {\n\t\t\t\tmidi_params.push(midi[0].intt);\n\t\t\t\tmidi_params.push(midi[2].intt);\n\t\t\t}\n\t\t} else if (midiCmdParam4Integer.indexOf(midi_cmd) >= 0) {\n\t\t\t// FOUR INT PARAMETERS\n\t\t\tif (midi.length !== 4)\n\t\t\t\twarn(\"Expected four parameters in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse if (midi[0].type !== \"number\" || midi[1].type !== \"number\" || midi[2].type !== \"number\" || midi[3].type !== \"number\")\n\t\t\t\twarn(\"Expected four integer parameters in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse {\n\t\t\t\tmidi_params.push(midi[0].intt);\n\t\t\t\tmidi_params.push(midi[1].intt);\n\t\t\t\tmidi_params.push(midi[2].intt);\n\t\t\t\tmidi_params.push(midi[3].intt);\n\t\t\t}\n\t\t} else if (midiCmdParam5Integer.indexOf(midi_cmd) >= 0) {\n\t\t\t// FIVE INT PARAMETERS\n\t\t\tif (midi.length !== 5)\n\t\t\t\twarn(\"Expected five parameters in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse if (midi[0].type !== \"number\" || midi[1].type !== \"number\" || midi[2].type !== \"number\" || midi[3].type !== \"number\" || midi[4].type !== \"number\")\n\t\t\t\twarn(\"Expected five integer parameters in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse {\n\t\t\t\tmidi_params.push(midi[0].intt);\n\t\t\t\tmidi_params.push(midi[1].intt);\n\t\t\t\tmidi_params.push(midi[2].intt);\n\t\t\t\tmidi_params.push(midi[3].intt);\n\t\t\t\tmidi_params.push(midi[4].intt);\n\t\t\t}\n\t\t} else if (midiCmdParam1Integer1OptionalInteger.indexOf(midi_cmd) >= 0) {\n\t\t\t// ONE INT PARAMETER, ONE OPTIONAL OCTAVE PARAMETER\n\t\t\tif (midi.length !== 1 || midi.length !== 4)\n\t\t\t\twarn(\"Expected one or two parameters in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse if (midi[0].type !== \"number\")\n\t\t\t\twarn(\"Expected integer parameter in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse if (midi.length === 4) {\n\t\t\t\tif (midi[1].token !== \"octave\")\n\t\t\t\t\twarn(\"Expected octave parameter in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\t\tif (midi[2].token !== \"=\")\n\t\t\t\t\twarn(\"Expected octave parameter in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\t\tif (midi[3].type !== \"number\")\n\t\t\t\t\twarn(\"Expected integer parameter for octave in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\t} else {\n\t\t\t\tmidi_params.push(midi[0].intt);\n\t\t\t\tif (midi.length === 4)\n\t\t\t\t\tmidi_params.push(midi[3].intt);\n\t\t\t}\n\t\t} else if (midiCmdParam1StringVariableIntegers.indexOf(midi_cmd) >= 0) {\n\t\t\t// ONE STRING, VARIABLE INT PARAMETERS\n\t\t\tif (midi.length < 2)\n\t\t\t\twarn(\"Expected string parameter and at least one integer parameter in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse if (midi[0].type !== \"alpha\")\n\t\t\t\twarn(\"Expected string parameter and at least one integer parameter in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse {\n\t\t\t\tvar p = midi.shift();\n\t\t\t\tmidi_params.push(p.token);\n\t\t\t\twhile (midi.length > 0) {\n\t\t\t\t\tp = midi.shift();\n\t\t\t\t\tif (p.type !== \"number\")\n\t\t\t\t\t\twarn(\"Expected integer parameter in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\t\t\tmidi_params.push(p.intt);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t    else if (midiCmdParam1Integer1OptionalString.indexOf(midi_cmd) >= 0){\n\n\t      // ONE INT PARAMETER, ONE OPTIONAL string\n\t    \tif (midi.length !== 1 && midi.length !== 2) \n\t\t\t\twarn(\"Expected one or two parameters in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse if (midi[0].type !== \"number\") \n\t\t\t\twarn(\"Expected integer parameter in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse if (midi.length === 2 && midi[1].type !== \"alpha\") \n\t\t\t\twarn(\"Expected alpha parameter in MIDI \" + midi_cmd, restOfString, 0);\n\t\t\telse {\n\t        \tmidi_params.push(midi[0].intt);\n\n\t        // Currently only bassprog and chordprog with optional octave shifts use this path\n\t        if (midi.length === 2){\n\t          var cmd = midi[1].token;\n\t          if (cmd.indexOf(\"octave=\") != -1){\n\t            cmd = cmd.replace(\"octave=\",\"\");\n\t            cmd = parseInt(cmd);\n\t            if (!isNaN(cmd)){\n\t              // Limit range from -1 to 3 octaves\n\t              if (cmd < -1){\n\t\t\t\t\twarn(\"Expected octave= in MIDI \" + midi_cmd + ' to be >= -1 (recv:'+cmd+')');\n\t                cmd = -1;\n\t              }\n\t              if (cmd > 3){\n\t\t\t\t\twarn(\"Expected octave= in MIDI \" + midi_cmd + ' to be <= 3 (recv:'+cmd+')');\n\t                cmd = 3;\n\t              }\n\t              midi_params.push(cmd);\n\t            } else\n\t            warn(\"Expected octave value in MIDI\" + midi_cmd);\n\t          }\n\t          else{\n\t            warn(\"Expected octave= in MIDI\" + midi_cmd);\n\t          }\n\t        }\n\t      }\n\t    }\n\n\t\tif (tuneBuilder.hasBeginMusic())\n\t\t\ttuneBuilder.appendElement('midi', -1, -1, { cmd: midi_cmd, params: midi_params });\n\t\telse {\n\t\t\tif (tune.formatting['midi'] === undefined)\n\t\t\t\ttune.formatting['midi'] = {};\n\t\t\ttune.formatting['midi'][midi_cmd] = midi_params;\n\t\t}\n\t};\n\n\tparseDirective.parseFontChangeLine = function(textstr) {\n\t\t// We don't want to match two dollar signs, so change those temporarily\n\t\ttextstr = textstr.replace(/\\$\\$/g,\"\\x03\")\n\t\tvar textParts = textstr.split('$');\n\t\tif (textParts.length > 1 && multilineVars.setfont) {\n\t\t\tvar textarr = [ ];\n\t\t\tif (textParts[0] !== '') // did the original string start with `$`?\n\t\t\t\ttextarr.push({ text: textParts[0] })\n\t\t\tfor (var i = 1; i < textParts.length; i++) {\n\t\t\t\tif (textParts[i][0] === '0')\n\t\t\t\t\ttextarr.push({ text: textParts[i].substring(1).replace(/\\x03/g,\"$$\") });\n\t\t\t\telse {\n\t\t\t\t\tvar whichFont = parseInt(textParts[i][0],10)\n\t\t\t\t\tif (multilineVars.setfont[whichFont])\n\t\t\t\t\t\ttextarr.push({font: multilineVars.setfont[whichFont], text: textParts[i].substring(1).replace(/\\x03/g,\"$$\") });\n\t\t\t\t\telse\n\t\t\t\t\t\ttextarr[textarr.length-1].text += '$' + textParts[i].replace(/\\x03/g,\"$$\");\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\t\t\treturn textarr;\n\t\t}\n\t\treturn textstr.replace(/\\x03/g,\"$$\");\n\t};\n\n\tvar positionChoices = [ 'auto', 'above', 'below', 'hidden' ];\n\tparseDirective.addDirective = function(str) {\n\t\tvar tokens = tokenizer.tokenize(str, 0, str.length);\t// 3 or more % in a row, or just spaces after %% is just a comment\n\t\tif (tokens.length === 0 || tokens[0].type !== 'alpha') return null;\n\t\tvar restOfString = str.substring(str.indexOf(tokens[0].token)+tokens[0].token.length);\n\t\trestOfString = tokenizer.stripComment(restOfString);\n\t\tvar cmd = tokens.shift().token.toLowerCase();\n\t\tvar scratch = \"\";\n\t\tvar line;\n\t\tswitch (cmd)\n\t\t{\n\t\t\t// The following directives were added to abc_parser_lint, but haven't been implemented here.\n\t\t\t// Most of them are direct translations from the directives that will be parsed in. See abcm2ps's format.txt for info on each of these.\n\t\t\t//\t\t\t\t\talignbars: { type: \"number\", optional: true },\n\t\t\t//\t\t\t\t\taligncomposer: { type: \"string\", Enum: [ 'left', 'center','right' ], optional: true },\n\t\t\t//\t\t\t\t\tbstemdown: { type: \"boolean\", optional: true },\n\t\t\t//\t\t\t\t\tcontinueall: { type: \"boolean\", optional: true },\n\t\t\t//\t\t\t\t\tdynalign: { type: \"boolean\", optional: true },\n\t\t\t//\t\t\t\t\texprabove: { type: \"boolean\", optional: true },\n\t\t\t//\t\t\t\t\texprbelow: { type: \"boolean\", optional: true },\n\t\t\t//\t\t\t\t\tgchordbox: { type: \"boolean\", optional: true },\n\t\t\t//\t\t\t\t\tgracespacebefore: { type: \"number\", optional: true },\n\t\t\t//\t\t\t\t\tgracespaceinside: { type: \"number\", optional: true },\n\t\t\t//\t\t\t\t\tgracespaceafter: { type: \"number\", optional: true },\n\t\t\t//\t\t\t\t\tinfospace: { type: \"number\", optional: true },\n\t\t\t//\t\t\t\t\tlineskipfac: { type: \"number\", optional: true },\n\t\t\t//\t\t\t\t\tmaxshrink: { type: \"number\", optional: true },\n\t\t\t//\t\t\t\t\tmaxstaffsep: { type: \"number\", optional: true },\n\t\t\t//\t\t\t\t\tmaxsysstaffsep: { type: \"number\", optional: true },\n\t\t\t//\t\t\t\t\tnotespacingfactor: { type: \"number\", optional: true },\n\t\t\t//\t\t\t\t\tparskipfac: { type: \"number\", optional: true },\n\t\t\t//\t\t\t\t\tslurheight: { type: \"number\", optional: true },\n\t\t\t//\t\t\t\t\tsplittune: { type: \"boolean\", optional: true },\n\t\t\t//\t\t\t\t\tsquarebreve: { type: \"boolean\", optional: true },\n\t\t\t//\t\t\t\t\tstemheight: { type: \"number\", optional: true },\n\t\t\t//\t\t\t\t\tstraightflags: { type: \"boolean\", optional: true },\n\t\t\t//\t\t\t\t\tstretchstaff: { type: \"boolean\", optional: true },\n\t\t\t//\t\t\t\t\ttitleformat: { type: \"string\", optional: true },\n\t\t\tcase \"bagpipes\":tune.formatting.bagpipes = true;break;\n\t\t\tcase \"flatbeams\":tune.formatting.flatbeams = true;break;\n\t\t\tcase \"jazzchords\":tune.formatting.jazzchords = true;break;\n\t\t\tcase \"accentAbove\":tune.formatting.accentAbove = true;break;\n\t\t\tcase \"germanAlphabet\":tune.formatting.germanAlphabet = true;break;\n\t\t\tcase \"landscape\":multilineVars.landscape = true;break;\n\t\t\tcase \"papersize\":multilineVars.papersize = restOfString;break;\n\t\t\tcase \"graceslurs\":\n\t\t\t\tif (tokens.length !== 1)\n\t\t\t\t\treturn \"Directive graceslurs requires one parameter: 0 or 1\";\n\t\t\t\tif (tokens[0].token === '0' || tokens[0].token === 'false')\n\t\t\t\t\ttune.formatting.graceSlurs = false;\n\t\t\t\telse if (tokens[0].token === '1' || tokens[0].token === 'true')\n\t\t\t\t\ttune.formatting.graceSlurs = true;\n\t\t\t\telse\n\t\t\t\t\treturn \"Directive graceslurs requires one parameter: 0 or 1 (received \" + tokens[0].token + ')';\n\t\t\t\tbreak;\n\t\t\tcase \"lineThickness\":\n\t\t\t\tvar lt = parseStretchLast(tokens);\n\t\t\t\tif (lt.value !== undefined)\n\t\t\t\t\ttune.formatting.lineThickness = lt.value;\n\t\t\t\tif (lt.error)\n\t\t\t\t\treturn lt.error;\n\t\t\t\tbreak;\n\t\t\tcase \"stretchlast\":\n\t\t\t\tvar sl = parseStretchLast(tokens);\n\t\t\t\tif (sl.value !== undefined)\n\t\t\t\t\ttune.formatting.stretchlast = sl.value;\n\t\t\t\tif (sl.error)\n\t\t\t\t\treturn sl.error;\n\t\t\t\tbreak;\n\t\t\tcase \"titlecaps\":multilineVars.titlecaps = true;break;\n\t\t\tcase \"titleleft\":tune.formatting.titleleft = true;break;\n\t\t\tcase \"measurebox\":tune.formatting.measurebox = true;break;\n\n\t\t\tcase \"vocal\": return addMultilineVarOneParamChoice(\"vocalPosition\", cmd, tokens, positionChoices);\n\t\t\tcase \"dynamic\": return addMultilineVarOneParamChoice(\"dynamicPosition\", cmd, tokens, positionChoices);\n\t\t\tcase \"gchord\": return addMultilineVarOneParamChoice(\"chordPosition\", cmd, tokens, positionChoices);\n\t\t\tcase \"ornament\": return addMultilineVarOneParamChoice(\"ornamentPosition\", cmd, tokens, positionChoices);\n\t\t\tcase \"volume\": return addMultilineVarOneParamChoice(\"volumePosition\", cmd, tokens, positionChoices);\n\n\t\t\tcase \"botmargin\":\n\t\t\tcase \"botspace\":\n\t\t\tcase \"composerspace\":\n\t\t\tcase \"indent\":\n\t\t\tcase \"leftmargin\":\n\t\t\tcase \"linesep\":\n\t\t\tcase \"musicspace\":\n\t\t\tcase \"partsspace\":\n\t\t\tcase \"pageheight\":\n\t\t\tcase \"pagewidth\":\n\t\t\tcase \"rightmargin\":\n\t\t\tcase \"stafftopmargin\":\n\t\t\tcase \"staffsep\":\n\t\t\tcase \"staffwidth\":\n\t\t\tcase \"subtitlespace\":\n\t\t\tcase \"sysstaffsep\":\n\t\t\tcase \"systemsep\":\n\t\t\tcase \"textspace\":\n\t\t\tcase \"titlespace\":\n\t\t\tcase \"topmargin\":\n\t\t\tcase \"topspace\":\n\t\t\tcase \"vocalspace\":\n\t\t\tcase \"wordsspace\":\n\t\t\t\treturn oneParameterMeasurement(cmd, tokens);\n\t\t\tcase \"voicescale\":\n\t\t\t\tif (tokens.length !== 1 || tokens[0].type !== 'number')\n\t\t\t\t\treturn \"voicescale requires one float as a parameter\";\n\t\t\t\tvar voiceScale = tokens.shift();\n\t\t\t\tif (multilineVars.currentVoice) {\n\t\t\t\t\tmultilineVars.currentVoice.scale = voiceScale.floatt;\n\t\t\t\t\ttuneBuilder.changeVoiceScale(multilineVars.currentVoice.scale);\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\tcase \"voicecolor\":\n\t\t\t\tif (tokens.length !== 1) // this could either be of type alpha or quote, but it's ok if it is a number\n\t\t\t\t\treturn \"voicecolor requires one string as a parameter\";\n\t\t\t\tvar voiceColor = tokens.shift();\n\t\t\t\tif (multilineVars.currentVoice) {\n\t\t\t\t\tmultilineVars.currentVoice.color = voiceColor.token;\n\t\t\t\t\ttuneBuilder.changeVoiceColor(multilineVars.currentVoice.color);\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\tcase \"vskip\":\n\t\t\t\tvar vskip = Math.round(getRequiredMeasurement(cmd, tokens));\n\t\t\t\tif (vskip.error)\n\t\t\t\t\treturn vskip.error;\n\t\t\t\ttuneBuilder.addSpacing(vskip);\n\t\t\t\treturn null;\n\t\t\tcase \"scale\":\n\t\t\t\tsetScale(cmd, tokens);\n\t\t\t\tbreak;\n\t\t\tcase \"sep\":\n\t\t\t\tif (tokens.length === 0)\n\t\t\t\t\ttuneBuilder.addSeparator(14,14,85, { startChar: multilineVars.iChar, endChar: multilineVars.iChar+5}); // If no parameters are given, then there is a default size.\n\t\t\t\telse {\n\t\t\t\t\tvar points = tokenizer.getMeasurement(tokens);\n\t\t\t\t\tif (points.used === 0)\n\t\t\t\t\t\treturn \"Directive \\\"\" + cmd + \"\\\" requires 3 numbers: space above, space below, length of line\";\n\t\t\t\t\tvar spaceAbove = points.value;\n\n\t\t\t\t\tpoints = tokenizer.getMeasurement(tokens);\n\t\t\t\t\tif (points.used === 0)\n\t\t\t\t\t\treturn \"Directive \\\"\" + cmd + \"\\\" requires 3 numbers: space above, space below, length of line\";\n\t\t\t\t\tvar spaceBelow = points.value;\n\n\t\t\t\t\tpoints = tokenizer.getMeasurement(tokens);\n\t\t\t\t\tif (points.used === 0 || tokens.length !== 0)\n\t\t\t\t\t\treturn \"Directive \\\"\" + cmd + \"\\\" requires 3 numbers: space above, space below, length of line\";\n\t\t\t\t\tvar lenLine = points.value;\n\t\t\t\t\ttuneBuilder.addSeparator(spaceAbove, spaceBelow, lenLine, { startChar: multilineVars.iChar, endChar: multilineVars.iChar+restOfString.length});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"barsperstaff\":\n\t\t\t\tscratch = addMultilineVar('barsperstaff', cmd, tokens);\n\t\t\t\tif (scratch !== null) return scratch;\n\t\t\t\tbreak;\n\t\t\tcase \"staffnonote\":\n\t\t\t\t// The sense of the boolean is opposite here. \"0\" means true.\n\t\t\t\tif (tokens.length !== 1)\n\t\t\t\t\treturn \"Directive staffnonote requires one parameter: 0 or 1\";\n\t\t\t\tif (tokens[0].token === '0')\n\t\t\t\t\tmultilineVars.staffnonote = true;\n\t\t\t\telse if (tokens[0].token === '1')\n\t\t\t\t\tmultilineVars.staffnonote = false;\n\t\t\t\telse\n\t\t\t\t\treturn \"Directive staffnonote requires one parameter: 0 or 1 (received \" + tokens[0].token + ')';\n\t\t\t\tbreak;\n\t\t\tcase \"printtempo\":\n\t\t\t\tscratch = addMultilineVarBool('printTempo', cmd, tokens);\n\t\t\t\tif (scratch !== null) return scratch;\n\t\t\t\tbreak;\n\t\t\tcase \"partsbox\":\n\t\t\t\tscratch = addMultilineVarBool('partsBox', cmd, tokens);\n\t\t\t\tif (scratch !== null) return scratch;\n\t\t\t\tmultilineVars.partsfont.box = multilineVars.partsBox;\n\t\t\t\tbreak;\n\t\t\tcase \"freegchord\":\n\t\t\t\tscratch = addMultilineVarBool('freegchord', cmd, tokens);\n\t\t\t\tif (scratch !== null) return scratch;\n\t\t\t\tbreak;\n\t\t\tcase \"measurenb\":\n\t\t\tcase \"barnumbers\":\n\t\t\t\tscratch = addMultilineVar('barNumbers', cmd, tokens);\n\t\t\t\tif (scratch !== null) return scratch;\n\t\t\t\tbreak;\n\t\t\tcase \"setbarnb\":\n\t\t\t\tif (tokens.length !== 1 || tokens[0].type !== 'number') {\n\t\t\t\t\treturn 'Directive setbarnb requires a number as a parameter.';\n\t\t\t\t}\n\t\t\t\tmultilineVars.currBarNumber = tuneBuilder.setBarNumberImmediate(tokens[0].intt);\n\t\t\t\tbreak;\n\t\t\tcase \"keywarn\":\n\t\t\t\tif (tokens.length !== 1 || tokens[0].type !== 'number' || (tokens[0].intt !== 1 && tokens[0].intt !== 0)) {\n\t\t\t\t\treturn 'Directive ' + cmd + ' requires 0 or 1 as a parameter.';\n\t\t\t\t}\n\t\t\t\tmultilineVars[cmd] = tokens[0].intt === 1\n\t\t\t\tbreak;\n\t\t\tcase \"begintext\":\n\t\t\t\tvar textBlock = '';\n\t\t\t\tline = tokenizer.nextLine();\n\t\t\t\twhile(line && line.indexOf('%%endtext') !== 0) {\n\t\t          // MAE 9 May 2025 - for text blocks with just white space\n\t\t          if (parseCommon.startsWith(line, \"%%\")){\n\n\t\t            var theLine = line.substring(2);\n\t\t            theLine = theLine.trim() + \"\\n\";\n\t\t            textBlock += theLine;\n\n\t\t          }\n\t\t          else{\n\t\t            textBlock += line.trim() + \"\\n\";\n\t\t          }\n\t\t\t\t\tline = tokenizer.nextLine();\n\t\t\t\t}\n\t\t\t\ttuneBuilder.addText(textBlock, { startChar: multilineVars.iChar, endChar: multilineVars.iChar+textBlock.length+7});\n\t\t\t\tbreak;\n\t\t\tcase \"continueall\":\n\t\t\t\tmultilineVars.continueall = true;\n\t\t\t\tbreak;\n\t\t\tcase \"beginps\":\n\t\t\t\tline = tokenizer.nextLine();\n\t\t\t\twhile(line && line.indexOf('%%endps') !== 0) {\n\t\t\t\t\ttokenizer.nextLine();\n\t\t\t\t}\n\t\t\t\twarn(\"Postscript ignored\", str, 0);\n\t\t\t\tbreak;\n\t\t\tcase \"deco\":\n\t\t\t\tif (restOfString.length > 0)\n\t\t\t\t\tmultilineVars.ignoredDecorations.push(restOfString.substring(0, restOfString.indexOf(' ')));\n\t\t\t\twarn(\"Decoration redefinition ignored\", str, 0);\n\t\t\t\tbreak;\n\t\t\tcase \"text\":\n\t\t\t\tvar textstr = tokenizer.translateString(restOfString);\n\t\t\t\ttuneBuilder.addText(parseDirective.parseFontChangeLine(textstr), { startChar: multilineVars.iChar, endChar: multilineVars.iChar+restOfString.length+7});\n\t\t\t\tbreak;\n\t\t\tcase \"center\":\n\t\t\t\tvar centerstr = tokenizer.translateString(restOfString);\n\t\t\t\ttuneBuilder.addCentered(parseDirective.parseFontChangeLine(centerstr));\n\t\t\t\tbreak;\n\t\t\tcase \"font\":\n\t\t\t\t// don't need to do anything for this; it is a useless directive\n\t\t\t\tbreak;\n\t\t\tcase \"setfont\":\n\t\t\t\tvar sfTokens = tokenizer.tokenize(restOfString, 0, restOfString.length);\n//\t\t\t\tvar sfDone = false;\n\t\t\t\tif (sfTokens.length >= 4) {\n\t\t\t\t\tif (sfTokens[0].token === '-' && sfTokens[1].type === 'number') {\n\t\t\t\t\t\tvar sfNum = parseInt(sfTokens[1].token);\n\t\t\t\t\t\tif (sfNum >= 1 && sfNum <= 9) {\n\t\t\t\t\t\t\tif (!multilineVars.setfont)\n\t\t\t\t\t\t\t\tmultilineVars.setfont = [];\n\t\t\t\t\t\t\tsfTokens.shift();\n\t\t\t\t\t\t\tsfTokens.shift();\n\t\t\t\t\t\t\tmultilineVars.setfont[sfNum] = getFontParameter(sfTokens, multilineVars.setfont[sfNum], str, 0, 'setfont');\n//\t\t\t\t\t\t\tvar sfSize = sfTokens.pop();\n//\t\t\t\t\t\t\tif (sfSize.type === 'number') {\n//\t\t\t\t\t\t\t\tsfSize = parseInt(sfSize.token);\n//\t\t\t\t\t\t\t\tvar sfFontName = '';\n//\t\t\t\t\t\t\t\tfor (var sfi = 2; sfi < sfTokens.length; sfi++)\n//\t\t\t\t\t\t\t\t\tsfFontName += sfTokens[sfi].token;\n//\t\t\t\t\t\t\t\tmultilineVars.setfont[sfNum] = { face: sfFontName, size: sfSize };\n//\t\t\t\t\t\t\t\tsfDone = true;\n//\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n//\t\t\t\tif (!sfDone)\n//\t\t\t\t\treturn \"Bad parameters: \" + cmd;\n\t\t\t\tbreak;\n\t\t\tcase \"gchordfont\":\n\t\t\tcase \"partsfont\":\n\t\t\tcase \"tripletfont\":\n\t\t\tcase \"vocalfont\":\n\t\t\tcase \"textfont\":\n\t\t\tcase \"annotationfont\":\n\t\t\tcase \"historyfont\":\n\t\t\tcase \"infofont\":\n\t\t\tcase \"measurefont\":\n\t\t\tcase \"repeatfont\":\n\t\t\tcase \"wordsfont\":\n\t\t\t\treturn getChangingFont(cmd, tokens, str);\n\t\t\tcase \"composerfont\":\n\t\t\tcase \"subtitlefont\":\n\t\t\tcase \"tempofont\":\n\t\t\tcase \"titlefont\":\n\t\t\tcase \"voicefont\":\n\t\t\tcase \"footerfont\":\n\t\t\tcase \"headerfont\":\n\t\t\t\treturn getGlobalFont(cmd, tokens, str);\n\t\t\tcase \"barlabelfont\":\n\t\t\tcase \"barnumberfont\":\n\t\t\tcase \"barnumfont\":\n\t\t\t\treturn getChangingFont(\"measurefont\", tokens, str);\n\t\t\tcase \"staves\":\n\t\t\tcase \"score\":\n\t\t\t\tmultilineVars.score_is_present = true;\n\t\t\t\tvar addVoice = function(id, newStaff, bracket, brace, continueBar) {\n\t\t\t\t\tif (newStaff || multilineVars.staves.length === 0) {\n\t\t\t\t\t\tmultilineVars.staves.push({index: multilineVars.staves.length, numVoices: 0});\n\t\t\t\t\t}\n\t\t\t\t\tvar staff = parseCommon.last(multilineVars.staves);\n\t\t\t\t\tif (bracket !== undefined && staff.bracket === undefined) staff.bracket = bracket;\n\t\t\t\t\tif (brace !== undefined && staff.brace === undefined) staff.brace = brace;\n\t\t\t\t\tif (continueBar) staff.connectBarLines = 'end';\n\t\t\t\t\tif (multilineVars.voices[id] === undefined) {\n\t\t\t\t\t\tmultilineVars.voices[id] = {staffNum: staff.index, index: staff.numVoices};\n\t\t\t\t\t\tstaff.numVoices++;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tvar openParen = false;\n\t\t\t\tvar openBracket = false;\n\t\t\t\tvar openBrace = false;\n\t\t\t\tvar justOpenParen = false;\n\t\t\t\tvar justOpenBracket = false;\n\t\t\t\tvar justOpenBrace = false;\n\t\t\t\tvar continueBar = false;\n\t\t\t\tvar lastVoice;\n\t\t\t\tvar addContinueBar = function() {\n\t\t\t\t\tcontinueBar = true;\n\t\t\t\t\tif (lastVoice) {\n\t\t\t\t\t\tvar ty = 'start';\n\t\t\t\t\t\tif (lastVoice.staffNum > 0) {\n\t\t\t\t\t\t\tif (multilineVars.staves[lastVoice.staffNum-1].connectBarLines === 'start' ||\n\t\t\t\t\t\t\t\tmultilineVars.staves[lastVoice.staffNum-1].connectBarLines === 'continue')\n\t\t\t\t\t\t\t\tty = 'continue';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmultilineVars.staves[lastVoice.staffNum].connectBarLines = ty;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\twhile (tokens.length) {\n\t\t\t\t\tvar t = tokens.shift();\n\t\t\t\t\tswitch (t.token) {\n\t\t\t\t\t\tcase '(':\n\t\t\t\t\t\t\tif (openParen) warn(\"Can't nest parenthesis in %%score\", str, t.start);\n\t\t\t\t\t\t\telse {openParen = true;justOpenParen = true;}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase ')':\n\t\t\t\t\t\t\tif (!openParen || justOpenParen) warn(\"Unexpected close parenthesis in %%score\", str, t.start);\n\t\t\t\t\t\t\telse openParen = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase '[':\n\t\t\t\t\t\t\tif (openBracket) warn(\"Can't nest brackets in %%score\", str, t.start);\n\t\t\t\t\t\t\telse {openBracket = true;justOpenBracket = true;}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase ']':\n\t\t\t\t\t\t\tif (!openBracket || justOpenBracket) warn(\"Unexpected close bracket in %%score\", str, t.start);\n\t\t\t\t\t\t\telse {openBracket = false;multilineVars.staves[lastVoice.staffNum].bracket = 'end';}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase '{':\n\t\t\t\t\t\t\tif (openBrace ) warn(\"Can't nest braces in %%score\", str, t.start);\n\t\t\t\t\t\t\telse {openBrace = true;justOpenBrace = true;}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase '}':\n\t\t\t\t\t\t\tif (!openBrace || justOpenBrace) warn(\"Unexpected close brace in %%score\", str, t.start);\n\t\t\t\t\t\t\telse {openBrace = false;multilineVars.staves[lastVoice.staffNum].brace = 'end';}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase '|':\n\t\t\t\t\t\t\taddContinueBar();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tvar vc = \"\";\n\t\t\t\t\t\t\twhile (t.type === 'alpha' || t.type === 'number') {\n\t\t\t\t\t\t\t\tvc += t.token;\n\t\t\t\t\t\t\t\tif (t.continueId)\n\t\t\t\t\t\t\t\t\tt = tokens.shift();\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar newStaff = !openParen || justOpenParen;\n\t\t\t\t\t\t\tvar bracket = justOpenBracket ? 'start' : openBracket ? 'continue' : undefined;\n\t\t\t\t\t\t\tvar brace = justOpenBrace ? 'start' : openBrace ? 'continue' : undefined;\n\t\t\t\t\t\t\taddVoice(vc, newStaff, bracket, brace, continueBar);\n\t\t\t\t\t\t\tjustOpenParen = false;\n\t\t\t\t\t\t\tjustOpenBracket = false;\n\t\t\t\t\t\t\tjustOpenBrace = false;\n\t\t\t\t\t\t\tcontinueBar = false;\n\t\t\t\t\t\t\tlastVoice = multilineVars.voices[vc];\n\t\t\t\t\t\t\tif (cmd === 'staves')\n\t\t\t\t\t\t\t\taddContinueBar();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"maxstaves\":\n\t\t\t\tvar nStaves = tokenizer.getInt(restOfString)\n\t\t\t\tif (nStaves.digits === 0)\n\t\t\t\t\twarn(\"Expected number of staves in maxstaves\")\n\t\t\t\telse{\n\t\t\t\t\tif (nStaves.value > 0){\n\t\t\t\t\t\ttune.formatting.maxStaves = nStaves.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"newpage\":\n\t\t\t\tvar pgNum = tokenizer.getInt(restOfString);\n\t\t\t\ttuneBuilder.addNewPage(pgNum.digits === 0 ? -1 : pgNum.value);\n\t\t\t\tbreak;\n\n\t\t\tcase \"abc\":\n\t\t\t\tvar arr = restOfString.split(' ');\n\t\t\t\tswitch (arr[0]) {\n\t\t\t\t\tcase \"-copyright\":\n\t\t\t\t\tcase \"-creator\":\n\t\t\t\t\tcase \"-edited-by\":\n\t\t\t\t\tcase \"-version\":\n\t\t\t\t\tcase \"-charset\":\n\t\t\t\t\t\tvar subCmd = arr.shift();\n\t\t\t\t\t\ttuneBuilder.addMetaText(cmd+subCmd, arr.join(' '), { startChar: multilineVars.iChar, endChar: multilineVars.iChar+restOfString.length+5});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn \"Unknown directive: \" + cmd+arr[0];\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"header\":\n\t\t\tcase \"footer\":\n\t\t\t\tvar footerStr = tokenizer.getMeat(restOfString, 0, restOfString.length);\n\t\t\t\tfooterStr = restOfString.substring(footerStr.start, footerStr.end);\n\t\t\t\tif (footerStr[0] === '\"' && footerStr[footerStr.length-1] === '\"' )\n\t\t\t\t\tfooterStr = footerStr.substring(1, footerStr.length-1);\n\t\t\t\tvar footerArr = footerStr.split('\\t');\n\t\t\t\tvar footer = {};\n\t\t\t\tif (footerArr.length === 1)\n\t\t\t\t\tfooter = { left: \"\", center: footerArr[0], right: \"\" };\n\t\t\t\telse if (footerArr.length === 2)\n\t\t\t\t\tfooter = { left: footerArr[0], center: footerArr[1], right: \"\" };\n\t\t\t\telse\n\t\t\t\t\tfooter = { left: footerArr[0], center: footerArr[1], right: footerArr[2] };\n\t\t\t\tif (footerArr.length > 3)\n\t\t\t\t\twarn(\"Too many tabs in \" + cmd + \": \" + footerArr.length + \" found.\", restOfString, 0);\n\n\t\t\t\ttuneBuilder.addMetaTextObj(cmd, footer, { startChar: multilineVars.iChar, endChar: multilineVars.iChar+str.length});\n\t\t\t\tbreak;\n\n\t\t\tcase \"midi\":\n\t\t\t\tvar midi = tokenizer.tokenize(restOfString, 0, restOfString.length, true);\n\t\t\t\tif (midi.length > 0 && midi[0].token === '=')\n\t\t\t\t\tmidi.shift();\n\t\t\t\tif (midi.length === 0)\n\t\t\t\t\twarn(\"Expected midi command\", restOfString, 0);\n\t\t\t\telse\n\t\t\t\t\tparseMidiCommand(midi, tune, restOfString);\n\t\t\t\tbreak;\n\t\t\tcase \"percmap\":\n\t\t\t\tvar percmap = interpretPercMap(restOfString);\n\t\t\t\tif (percmap.error)\n\t\t\t\t\twarn(percmap.error, str, 8);\n\t\t\t\telse {\n\t\t\t\t\tif (!tune.formatting.percmap)\n\t\t\t\t\t\ttune.formatting.percmap = {};\n\t\t\t\t\ttune.formatting.percmap[percmap.key] = percmap.value;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"visualtranspose\":\n\t\t\t\tvar halfSteps = tokenizer.getInt(restOfString)\n\t\t\t\tif (halfSteps.digits === 0)\n\t\t\t\t\twarn(\"Expected number of half steps in visualTranspose\")\n\t\t\t\telse\n\t\t\t\t\tmultilineVars.globalTranspose = halfSteps.value\n\t\t\t\tbreak;\n\n\t\t\tcase \"map\":\n\t\t\tcase \"playtempo\":\n\t\t\tcase \"auquality\":\n\t\t\tcase \"continuous\":\n\t\t\tcase \"nobarcheck\":\n\t\t\t\t// TODO-PER: Actually handle the parameters of these\n\t\t\t\ttune.formatting[cmd] = restOfString;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn \"Unknown directive: \" + cmd;\n\t\t}\n\t\treturn null;\n\t};\n\tparseDirective.globalFormatting = function(formatHash) {\n\t\tfor (var cmd in formatHash) {\n\t\t\tif (formatHash.hasOwnProperty(cmd)) {\n\t\t\t\tvar value = ''+formatHash[cmd];\n\t\t\t\tvar tokens = tokenizer.tokenize(value, 0, value.length);\n\t\t\t\tvar scratch;\n\t\t\t\tswitch (cmd) {\n\t\t\t\t\tcase \"titlefont\":\n\t\t\t\t\tcase \"gchordfont\":\n\t\t\t\t\tcase \"composerfont\":\n\t\t\t\t\tcase \"footerfont\":\n\t\t\t\t\tcase \"headerfont\":\n\t\t\t\t\tcase \"historyfont\":\n\t\t\t\t\tcase \"infofont\":\n\t\t\t\t\tcase \"measurefont\":\n\t\t\t\t\tcase \"partsfont\":\n\t\t\t\t\tcase \"repeatfont\":\n\t\t\t\t\tcase \"subtitlefont\":\n\t\t\t\t\tcase \"tempofont\":\n\t\t\t\t\tcase \"textfont\":\n\t\t\t\t\tcase \"voicefont\":\n\t\t\t\t\tcase \"tripletfont\":\n\t\t\t\t\tcase \"vocalfont\":\n\t\t\t\t\tcase \"wordsfont\":\n\t\t\t\t\tcase \"annotationfont\":\n\t\t\t\t\tcase \"tablabelfont\":\n\t\t\t\t\tcase \"tabnumberfont\":\n\t\t\t\t\tcase \"tabgracefont\":\n\t\t\t\t\t\tgetChangingFont(cmd, tokens, value);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"scale\":\n\t\t\t\t\t\tsetScale(cmd, tokens);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"partsbox\":\n\t\t\t\t\t\tscratch = addMultilineVarBool('partsBox', cmd, tokens);\n\t\t\t\t\t\tif (scratch !== null) warn(scratch);\n\t\t\t\t\t\tmultilineVars.partsfont.box = multilineVars.partsBox;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"freegchord\":\n\t\t\t\t\t\tscratch = addMultilineVarBool('freegchord', cmd, tokens);\n\t\t\t\t\t\tif (scratch !== null) warn(scratch);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"fontboxpadding\":\n\t\t\t\t\t\tif (tokens.length !== 1 || tokens[0].type !== 'number')\n\t\t\t\t\t\t\twarn(\"Directive \\\"\" + cmd + \"\\\" requires a number as a parameter.\");\n\t\t\t\t\t\ttune.formatting.fontboxpadding = tokens[0].floatt;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"stafftopmargin\":\n\t\t\t\t\t\tif (tokens.length !== 1 || tokens[0].type !== 'number')\n\t\t\t\t\t\t\twarn(\"Directive \\\"\" + cmd + \"\\\" requires a number as a parameter.\");\n\t\t\t\t\t\ttune.formatting.stafftopmargin = tokens[0].floatt;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"stretchlast\":\n\t\t\t\t\t\tvar sl = parseStretchLast(tokens);\n\t\t\t\t\t\tif (sl.value !== undefined)\n\t\t\t\t\t\t\ttune.formatting.stretchlast = sl.value;\n\t\t\t\t\t\tif (sl.error)\n\t\t\t\t\t\t\treturn sl.error;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twarn(\"Formatting directive unrecognized: \", cmd, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction parseStretchLast(tokens) {\n\t\tif (tokens.length === 0)\n\t\t\treturn { value: 1 }; // if there is no value then the presence of this is the same as \"true\"\n\t\telse if (tokens.length === 1) {\n\t\t\tif (tokens[0].type === \"number\") {\n\t\t\t\tif (tokens[0].floatt >= 0 || tokens[0].floatt <= 1)\n\t\t\t\t\treturn {value: tokens[0].floatt};\n\t\t\t} else if (tokens[0].token === 'false') {\n\t\t\t\treturn { value: 0 };\n\t\t\t} else if (tokens[0].token === 'true') {\n\t\t\t\treturn {value: 1};\n\t\t\t}\n\t\t}\n\t\treturn { error: \"Directive stretchlast requires zero or one parameter: false, true, or number between 0 and 1 (received \" + tokens[0].token + ')' };\n\t}\n})();\n\nmodule.exports = parseDirective;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL2FiY19wYXJzZV9kaXJlY3RpdmUuanMiLCJtYXBwaW5ncyI6IkFBQUEsa0JBQWtCLG1CQUFPLENBQUMsd0VBQWM7O0FBRXhDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9DQUFvQztBQUNwQyxnQ0FBZ0M7QUFDaEMsaUNBQWlDO0FBQ2pDLDhCQUE4QjtBQUM5QixpQ0FBaUM7QUFDakMsK0JBQStCO0FBQy9CLGdDQUFnQztBQUNoQyw4QkFBOEI7QUFDOUIsK0JBQStCO0FBQy9CLCtCQUErQjtBQUMvQiwrQkFBK0I7O0FBRS9CO0FBQ0Esb0NBQW9DO0FBQ3BDLG9DQUFvQztBQUNwQyxpQ0FBaUM7QUFDakMsaUNBQWlDO0FBQ2pDLGtDQUFrQztBQUNsQyxrQ0FBa0M7QUFDbEMsaUNBQWlDO0FBQ2pDLG9DQUFvQztBQUNwQyxvQ0FBb0M7QUFDcEMsbUNBQW1DOztBQUVuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw0QkFBNEI7O0FBRTVCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxZQUFZO0FBQ1o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsbUNBQW1DO0FBQ25DO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1osZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsOEJBQThCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0NBQStDLG9DQUFvQztBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsb0JBQW9CO0FBQ3ZDLG1CQUFtQixzQkFBc0I7QUFDekM7QUFDQSxvQkFBb0IsdURBQXVEO0FBQzNFO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwrRkFBK0Y7QUFDbkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGdDQUFnQztBQUN2RCwyQkFBMkIsb0VBQW9FO0FBQy9GLHVCQUF1QixpQ0FBaUM7QUFDeEQseUJBQXlCLGlDQUFpQztBQUMxRCxzQkFBc0IsaUNBQWlDO0FBQ3ZELHVCQUF1QixpQ0FBaUM7QUFDeEQsdUJBQXVCLGlDQUFpQztBQUN4RCx1QkFBdUIsaUNBQWlDO0FBQ3hELDhCQUE4QixnQ0FBZ0M7QUFDOUQsOEJBQThCLGdDQUFnQztBQUM5RCw2QkFBNkIsZ0NBQWdDO0FBQzdELHVCQUF1QixnQ0FBZ0M7QUFDdkQseUJBQXlCLGdDQUFnQztBQUN6RCx1QkFBdUIsZ0NBQWdDO0FBQ3ZELHlCQUF5QixnQ0FBZ0M7QUFDekQsNEJBQTRCLGdDQUFnQztBQUM1RCwrQkFBK0IsZ0NBQWdDO0FBQy9ELHdCQUF3QixnQ0FBZ0M7QUFDeEQsd0JBQXdCLGdDQUFnQztBQUN4RCx1QkFBdUIsaUNBQWlDO0FBQ3hELHlCQUF5QixpQ0FBaUM7QUFDMUQsd0JBQXdCLGdDQUFnQztBQUN4RCwyQkFBMkIsaUNBQWlDO0FBQzVELDBCQUEwQixpQ0FBaUM7QUFDM0QseUJBQXlCLGdDQUFnQztBQUN6RCxtREFBbUQ7QUFDbkQscURBQXFEO0FBQ3JELHVEQUF1RDtBQUN2RCx5REFBeUQ7QUFDekQsK0RBQStEO0FBQy9ELG1EQUFtRDtBQUNuRCwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1EO0FBQ25ELHFEQUFxRDtBQUNyRCx1REFBdUQ7O0FBRXZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQywrREFBK0QsR0FBRztBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLGlGQUFpRjtBQUNsSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsZ0ZBQWdGO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxtRkFBbUY7QUFDMUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsdUJBQXVCO0FBQ25EO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGlEQUFpRDtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxpQkFBaUI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLG1CQUFtQjtBQUNoQztBQUNBO0FBQ0E7QUFDQSxhQUFhLG9CQUFvQjtBQUNqQztBQUNBLGFBQWE7QUFDYjtBQUNBLGFBQWEsaUJBQWlCO0FBQzlCO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYSxrQkFBa0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELG1GQUFtRjtBQUM5STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7O0FBRUEsOENBQThDLHdFQUF3RTtBQUN0SDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFlBQVksWUFBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsS0FBSztBQUNMLGFBQWE7QUFDYixLQUFLO0FBQ0wsWUFBWTtBQUNaO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL2FiY19wYXJzZV9kaXJlY3RpdmUuanM/NmVmNCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcGFyc2VDb21tb24gPSByZXF1aXJlKCcuL2FiY19jb21tb24nKTtcblxudmFyIHBhcnNlRGlyZWN0aXZlID0ge307XG5cbihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciB0b2tlbml6ZXI7XG5cdHZhciB3YXJuO1xuXHR2YXIgbXVsdGlsaW5lVmFycztcblx0dmFyIHR1bmU7XG5cdHZhciB0dW5lQnVpbGRlcjtcblx0cGFyc2VEaXJlY3RpdmUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHRva2VuaXplcl8sIHdhcm5fLCBtdWx0aWxpbmVWYXJzXywgdHVuZV8sIHR1bmVCdWlsZGVyXykge1xuXHRcdHRva2VuaXplciA9IHRva2VuaXplcl87XG5cdFx0d2FybiA9IHdhcm5fO1xuXHRcdG11bHRpbGluZVZhcnMgPSBtdWx0aWxpbmVWYXJzXztcblx0XHR0dW5lID0gdHVuZV87XG5cdFx0dHVuZUJ1aWxkZXIgPSB0dW5lQnVpbGRlcl87XG5cdFx0aW5pdGlhbGl6ZUZvbnRzKCk7XG5cdH07XG5cblx0ZnVuY3Rpb24gaW5pdGlhbGl6ZUZvbnRzKCkge1xuXHRcdG11bHRpbGluZVZhcnMuYW5ub3RhdGlvbmZvbnQgID0geyBmYWNlOiBcIkhlbHZldGljYVwiLCBzaXplOiAxMiwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJub3JtYWxcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRtdWx0aWxpbmVWYXJzLmdjaG9yZGZvbnQgID0geyBmYWNlOiBcIkhlbHZldGljYVwiLCBzaXplOiAxMiwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJub3JtYWxcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRtdWx0aWxpbmVWYXJzLmhpc3Rvcnlmb250ICA9IHsgZmFjZTogXCJcXFwiVGltZXMgTmV3IFJvbWFuXFxcIlwiLCBzaXplOiAxNiwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJub3JtYWxcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRtdWx0aWxpbmVWYXJzLmluZm9mb250ICA9IHsgZmFjZTogXCJcXFwiVGltZXMgTmV3IFJvbWFuXFxcIlwiLCBzaXplOiAxNCwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJpdGFsaWNcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRtdWx0aWxpbmVWYXJzLm1lYXN1cmVmb250ICA9IHsgZmFjZTogXCJcXFwiVGltZXMgTmV3IFJvbWFuXFxcIlwiLCBzaXplOiAxNCwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJpdGFsaWNcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRtdWx0aWxpbmVWYXJzLnBhcnRzZm9udCAgPSB7IGZhY2U6IFwiXFxcIlRpbWVzIE5ldyBSb21hblxcXCJcIiwgc2l6ZTogMTUsIHdlaWdodDogXCJub3JtYWxcIiwgc3R5bGU6IFwibm9ybWFsXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0bXVsdGlsaW5lVmFycy5yZXBlYXRmb250ICA9IHsgZmFjZTogXCJcXFwiVGltZXMgTmV3IFJvbWFuXFxcIlwiLCBzaXplOiAxMywgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJub3JtYWxcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRtdWx0aWxpbmVWYXJzLnRleHRmb250ICA9IHsgZmFjZTogXCJcXFwiVGltZXMgTmV3IFJvbWFuXFxcIlwiLCBzaXplOiAxNiwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJub3JtYWxcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRtdWx0aWxpbmVWYXJzLnRyaXBsZXRmb250ID0ge2ZhY2U6IFwiVGltZXNcIiwgc2l6ZTogMTEsIHdlaWdodDogXCJub3JtYWxcIiwgc3R5bGU6IFwiaXRhbGljXCIsIGRlY29yYXRpb246IFwibm9uZVwifTtcblx0XHRtdWx0aWxpbmVWYXJzLnZvY2FsZm9udCAgPSB7IGZhY2U6IFwiXFxcIlRpbWVzIE5ldyBSb21hblxcXCJcIiwgc2l6ZTogMTMsIHdlaWdodDogXCJib2xkXCIsIHN0eWxlOiBcIm5vcm1hbFwiLCBkZWNvcmF0aW9uOiBcIm5vbmVcIiB9O1xuXHRcdG11bHRpbGluZVZhcnMud29yZHNmb250ICA9IHsgZmFjZTogXCJcXFwiVGltZXMgTmV3IFJvbWFuXFxcIlwiLCBzaXplOiAxNiwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJub3JtYWxcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblxuXHRcdC8vIFRoZXNlIGZvbnRzIGFyZSBnbG9iYWwgZm9yIHRoZSBlbnRpcmUgdHVuZS5cblx0XHR0dW5lLmZvcm1hdHRpbmcuY29tcG9zZXJmb250ICA9IHsgZmFjZTogXCJcXFwiVGltZXMgTmV3IFJvbWFuXFxcIlwiLCBzaXplOiAxNCwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJpdGFsaWNcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHR0dW5lLmZvcm1hdHRpbmcuc3VidGl0bGVmb250ICA9IHsgZmFjZTogXCJcXFwiVGltZXMgTmV3IFJvbWFuXFxcIlwiLCBzaXplOiAxNiwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJub3JtYWxcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHR0dW5lLmZvcm1hdHRpbmcudGVtcG9mb250ICA9IHsgZmFjZTogXCJcXFwiVGltZXMgTmV3IFJvbWFuXFxcIlwiLCBzaXplOiAxNSwgd2VpZ2h0OiBcImJvbGRcIiwgc3R5bGU6IFwibm9ybWFsXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0dHVuZS5mb3JtYXR0aW5nLnRpdGxlZm9udCAgPSB7IGZhY2U6IFwiXFxcIlRpbWVzIE5ldyBSb21hblxcXCJcIiwgc2l6ZTogMjAsIHdlaWdodDogXCJub3JtYWxcIiwgc3R5bGU6IFwibm9ybWFsXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0dHVuZS5mb3JtYXR0aW5nLmZvb3RlcmZvbnQgID0geyBmYWNlOiBcIlxcXCJUaW1lcyBOZXcgUm9tYW5cXFwiXCIsIHNpemU6IDEyLCB3ZWlnaHQ6IFwibm9ybWFsXCIsIHN0eWxlOiBcIm5vcm1hbFwiLCBkZWNvcmF0aW9uOiBcIm5vbmVcIiB9O1xuXHRcdHR1bmUuZm9ybWF0dGluZy5oZWFkZXJmb250ICA9IHsgZmFjZTogXCJcXFwiVGltZXMgTmV3IFJvbWFuXFxcIlwiLCBzaXplOiAxMiwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJub3JtYWxcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHR0dW5lLmZvcm1hdHRpbmcudm9pY2Vmb250ICA9IHsgZmFjZTogXCJcXFwiVGltZXMgTmV3IFJvbWFuXFxcIlwiLCBzaXplOiAxMywgd2VpZ2h0OiBcImJvbGRcIiwgc3R5bGU6IFwibm9ybWFsXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0dHVuZS5mb3JtYXR0aW5nLnRhYmxhYmVsZm9udCAgPSB7IGZhY2U6IFwiXFxcIlRyZWJ1Y2hldCBNU1xcXCJcIiwgc2l6ZTogMTYsIHdlaWdodDogXCJub3JtYWxcIiwgc3R5bGU6IFwibm9ybWFsXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0dHVuZS5mb3JtYXR0aW5nLnRhYm51bWJlcmZvbnQgPSB7IGZhY2U6IFwiXFxcIkFyaWFsXFxcIlwiLCBzaXplOiAxMSwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJub3JtYWxcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHR0dW5lLmZvcm1hdHRpbmcudGFiZ3JhY2Vmb250ID0geyBmYWNlOiBcIlxcXCJBcmlhbFxcXCJcIiwgc2l6ZTogOCwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJub3JtYWxcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblxuXHRcdC8vIHRoZXNlIGFyZSB0aGUgZGVmYXVsdCBmb250cyBmb3IgdGhlc2UgZWxlbWVudCB0eXBlcy4gSW4gdGhlIHByaW50ZXIsIHRoZXNlIGZvbnRzIG1pZ2h0IGNoYW5nZSBhcyB0aGUgdHVuZSBwcm9ncmVzc2VzLlxuXHRcdHR1bmUuZm9ybWF0dGluZy5hbm5vdGF0aW9uZm9udCAgPSBtdWx0aWxpbmVWYXJzLmFubm90YXRpb25mb250O1xuXHRcdHR1bmUuZm9ybWF0dGluZy5nY2hvcmRmb250ICA9IG11bHRpbGluZVZhcnMuZ2Nob3JkZm9udDtcblx0XHR0dW5lLmZvcm1hdHRpbmcuaGlzdG9yeWZvbnQgID0gbXVsdGlsaW5lVmFycy5oaXN0b3J5Zm9udDtcblx0XHR0dW5lLmZvcm1hdHRpbmcuaW5mb2ZvbnQgID0gbXVsdGlsaW5lVmFycy5pbmZvZm9udDtcblx0XHR0dW5lLmZvcm1hdHRpbmcubWVhc3VyZWZvbnQgID0gbXVsdGlsaW5lVmFycy5tZWFzdXJlZm9udDtcblx0XHR0dW5lLmZvcm1hdHRpbmcucGFydHNmb250ICA9IG11bHRpbGluZVZhcnMucGFydHNmb250O1xuXHRcdHR1bmUuZm9ybWF0dGluZy5yZXBlYXRmb250ICA9IG11bHRpbGluZVZhcnMucmVwZWF0Zm9udDtcblx0XHR0dW5lLmZvcm1hdHRpbmcudGV4dGZvbnQgID0gbXVsdGlsaW5lVmFycy50ZXh0Zm9udDtcblx0XHR0dW5lLmZvcm1hdHRpbmcudHJpcGxldGZvbnQgID0gbXVsdGlsaW5lVmFycy50cmlwbGV0Zm9udDtcblx0XHR0dW5lLmZvcm1hdHRpbmcudm9jYWxmb250ICA9IG11bHRpbGluZVZhcnMudm9jYWxmb250O1xuXHRcdHR1bmUuZm9ybWF0dGluZy53b3Jkc2ZvbnQgID0gbXVsdGlsaW5lVmFycy53b3Jkc2ZvbnQ7XG5cdH1cblxuXHR2YXIgZm9udFR5cGVDYW5IYXZlQm94ID0geyBnY2hvcmRmb250OiB0cnVlLCBtZWFzdXJlZm9udDogdHJ1ZSwgcGFydHNmb250OiB0cnVlLCBhbm5vdGF0aW9uZm9udDogdHJ1ZSwgY29tcG9zZXJmb250OiB0cnVlLCBoaXN0b3J5Zm9udDogdHJ1ZSwgaW5mb2ZvbnQ6IHRydWUsIHN1YnRpdGxlZm9udDogdHJ1ZSwgdGV4dGZvbnQ6IHRydWUsIHRpdGxlZm9udDogdHJ1ZSwgdm9pY2Vmb250OiB0cnVlICB9O1xuXG5cdHZhciBmb250VHJhbnNsYXRpb24gPSBmdW5jdGlvbihmb250RmFjZSkge1xuXHRcdC8vIFRoaXMgdHJhbnNsYXRlcyBQb3N0c2NyaXB0IGZvbnRzIGZvciBhIHdlYiBhbHRlcm5hdGl2ZS5cblx0XHQvLyBOb3RlIHRoYXQgdGhlIHBvc3RzY3JpcHQgZm9udHMgY29udGFpbiBpdGFsaWMgYW5kIGJvbGQgaW5mbyBpbiB0aGVtLCBzbyB3aGF0IGlzIHJldHVybmVkIGlzIGEgaGFzaC5cblxuXHRcdHN3aXRjaCAoZm9udEZhY2UpIHtcblx0XHRcdGNhc2UgXCJBcmlhbC1JdGFsaWNcIjpcblx0XHRcdFx0cmV0dXJuIHsgZmFjZTogXCJBcmlhbFwiLCB3ZWlnaHQ6IFwibm9ybWFsXCIsIHN0eWxlOiBcIml0YWxpY1wiLCBkZWNvcmF0aW9uOiBcIm5vbmVcIiB9O1xuXHRcdFx0Y2FzZSBcIkFyaWFsLUJvbGRcIjpcblx0XHRcdFx0cmV0dXJuIHsgZmFjZTogXCJBcmlhbFwiLCB3ZWlnaHQ6IFwiYm9sZFwiLCBzdHlsZTogXCJub3JtYWxcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRcdGNhc2UgXCJCb29rbWFuLURlbWlcIjpcblx0XHRcdFx0cmV0dXJuIHsgZmFjZTogXCJCb29rbWFuLHNlcmlmXCIsIHdlaWdodDogXCJib2xkXCIsIHN0eWxlOiBcIm5vcm1hbFwiLCBkZWNvcmF0aW9uOiBcIm5vbmVcIiB9O1xuXHRcdFx0Y2FzZSBcIkJvb2ttYW4tRGVtaUl0YWxpY1wiOlxuXHRcdFx0XHRyZXR1cm4geyBmYWNlOiBcIkJvb2ttYW4sc2VyaWZcIiwgd2VpZ2h0OiBcImJvbGRcIiwgc3R5bGU6IFwiaXRhbGljXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0XHRjYXNlIFwiQm9va21hbi1MaWdodFwiOlxuXHRcdFx0XHRyZXR1cm4geyBmYWNlOiBcIkJvb2ttYW4sc2VyaWZcIiwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJub3JtYWxcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRcdGNhc2UgXCJCb29rbWFuLUxpZ2h0SXRhbGljXCI6XG5cdFx0XHRcdHJldHVybiB7IGZhY2U6IFwiQm9va21hbixzZXJpZlwiLCB3ZWlnaHQ6IFwibm9ybWFsXCIsIHN0eWxlOiBcIml0YWxpY1wiLCBkZWNvcmF0aW9uOiBcIm5vbmVcIiB9O1xuXHRcdFx0Y2FzZSBcIkNvdXJpZXJcIjpcblx0XHRcdFx0cmV0dXJuIHsgZmFjZTogXCJcXFwiQ291cmllciBOZXdcXFwiXCIsIHdlaWdodDogXCJub3JtYWxcIiwgc3R5bGU6IFwibm9ybWFsXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0XHRjYXNlIFwiQ291cmllci1PYmxpcXVlXCI6XG5cdFx0XHRcdHJldHVybiB7IGZhY2U6IFwiXFxcIkNvdXJpZXIgTmV3XFxcIlwiLCB3ZWlnaHQ6IFwibm9ybWFsXCIsIHN0eWxlOiBcIml0YWxpY1wiLCBkZWNvcmF0aW9uOiBcIm5vbmVcIiB9O1xuXHRcdFx0Y2FzZSBcIkNvdXJpZXItQm9sZFwiOlxuXHRcdFx0XHRyZXR1cm4geyBmYWNlOiBcIlxcXCJDb3VyaWVyIE5ld1xcXCJcIiwgd2VpZ2h0OiBcImJvbGRcIiwgc3R5bGU6IFwibm9ybWFsXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0XHRjYXNlIFwiQ291cmllci1Cb2xkT2JsaXF1ZVwiOlxuXHRcdFx0XHRyZXR1cm4geyBmYWNlOiBcIlxcXCJDb3VyaWVyIE5ld1xcXCJcIiwgd2VpZ2h0OiBcImJvbGRcIiwgc3R5bGU6IFwiaXRhbGljXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0XHRjYXNlIFwiQXZhbnRHYXJkZS1Cb29rXCI6XG5cdFx0XHRcdHJldHVybiB7IGZhY2U6IFwiQXZhbnRHYXJkZSxBcmlhbFwiLCB3ZWlnaHQ6IFwibm9ybWFsXCIsIHN0eWxlOiBcIm5vcm1hbFwiLCBkZWNvcmF0aW9uOiBcIm5vbmVcIiB9O1xuXHRcdFx0Y2FzZSBcIkF2YW50R2FyZGUtQm9va09ibGlxdWVcIjpcblx0XHRcdFx0cmV0dXJuIHsgZmFjZTogXCJBdmFudEdhcmRlLEFyaWFsXCIsIHdlaWdodDogXCJub3JtYWxcIiwgc3R5bGU6IFwiaXRhbGljXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0XHRjYXNlIFwiQXZhbnRHYXJkZS1EZW1pXCI6XG5cdFx0XHRjYXNlIFwiQXZhbnQtR2FyZGUtRGVtaVwiOlxuXHRcdFx0XHRyZXR1cm4geyBmYWNlOiBcIkF2YW50R2FyZGUsQXJpYWxcIiwgd2VpZ2h0OiBcImJvbGRcIiwgc3R5bGU6IFwibm9ybWFsXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0XHRjYXNlIFwiQXZhbnRHYXJkZS1EZW1pT2JsaXF1ZVwiOlxuXHRcdFx0XHRyZXR1cm4geyBmYWNlOiBcIkF2YW50R2FyZGUsQXJpYWxcIiwgd2VpZ2h0OiBcImJvbGRcIiwgc3R5bGU6IFwiaXRhbGljXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0XHRjYXNlIFwiSGVsdmV0aWNhLU9ibGlxdWVcIjpcblx0XHRcdFx0cmV0dXJuIHsgZmFjZTogXCJIZWx2ZXRpY2FcIiwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJpdGFsaWNcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRcdGNhc2UgXCJIZWx2ZXRpY2EtQm9sZFwiOlxuXHRcdFx0XHRyZXR1cm4geyBmYWNlOiBcIkhlbHZldGljYVwiLCB3ZWlnaHQ6IFwiYm9sZFwiLCBzdHlsZTogXCJub3JtYWxcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRcdGNhc2UgXCJIZWx2ZXRpY2EtQm9sZE9ibGlxdWVcIjpcblx0XHRcdFx0cmV0dXJuIHsgZmFjZTogXCJIZWx2ZXRpY2FcIiwgd2VpZ2h0OiBcImJvbGRcIiwgc3R5bGU6IFwiaXRhbGljXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0XHRjYXNlIFwiSGVsdmV0aWNhLU5hcnJvd1wiOlxuXHRcdFx0XHRyZXR1cm4geyBmYWNlOiBcIlxcXCJIZWx2ZXRpY2EgTmFycm93XFxcIixIZWx2ZXRpY2FcIiwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJub3JtYWxcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRcdGNhc2UgXCJIZWx2ZXRpY2EtTmFycm93LU9ibGlxdWVcIjpcblx0XHRcdFx0cmV0dXJuIHsgZmFjZTogXCJcXFwiSGVsdmV0aWNhIE5hcnJvd1xcXCIsSGVsdmV0aWNhXCIsIHdlaWdodDogXCJub3JtYWxcIiwgc3R5bGU6IFwiaXRhbGljXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0XHRjYXNlIFwiSGVsdmV0aWNhLU5hcnJvdy1Cb2xkXCI6XG5cdFx0XHRcdHJldHVybiB7IGZhY2U6IFwiXFxcIkhlbHZldGljYSBOYXJyb3dcXFwiLEhlbHZldGljYVwiLCB3ZWlnaHQ6IFwiYm9sZFwiLCBzdHlsZTogXCJub3JtYWxcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRcdGNhc2UgXCJIZWx2ZXRpY2EtTmFycm93LUJvbGRPYmxpcXVlXCI6XG5cdFx0XHRcdHJldHVybiB7IGZhY2U6IFwiXFxcIkhlbHZldGljYSBOYXJyb3dcXFwiLEhlbHZldGljYVwiLCB3ZWlnaHQ6IFwiYm9sZFwiLCBzdHlsZTogXCJpdGFsaWNcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRcdGNhc2UgXCJQYWxhdGluby1Sb21hblwiOlxuXHRcdFx0XHRyZXR1cm4geyBmYWNlOiBcIlBhbGF0aW5vXCIsIHdlaWdodDogXCJub3JtYWxcIiwgc3R5bGU6IFwibm9ybWFsXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0XHRjYXNlIFwiUGFsYXRpbm8tSXRhbGljXCI6XG5cdFx0XHRcdHJldHVybiB7IGZhY2U6IFwiUGFsYXRpbm9cIiwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJpdGFsaWNcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRcdGNhc2UgXCJQYWxhdGluby1Cb2xkXCI6XG5cdFx0XHRcdHJldHVybiB7IGZhY2U6IFwiUGFsYXRpbm9cIiwgd2VpZ2h0OiBcImJvbGRcIiwgc3R5bGU6IFwibm9ybWFsXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0XHRjYXNlIFwiUGFsYXRpbm8tQm9sZEl0YWxpY1wiOlxuXHRcdFx0XHRyZXR1cm4geyBmYWNlOiBcIlBhbGF0aW5vXCIsIHdlaWdodDogXCJib2xkXCIsIHN0eWxlOiBcIml0YWxpY1wiLCBkZWNvcmF0aW9uOiBcIm5vbmVcIiB9O1xuXHRcdFx0Y2FzZSBcIk5ld0NlbnR1cnlTY2hsYmstUm9tYW5cIjpcblx0XHRcdFx0cmV0dXJuIHsgZmFjZTogXCJcXFwiTmV3IENlbnR1cnlcXFwiLHNlcmlmXCIsIHdlaWdodDogXCJub3JtYWxcIiwgc3R5bGU6IFwibm9ybWFsXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0XHRjYXNlIFwiTmV3Q2VudHVyeVNjaGxiay1JdGFsaWNcIjpcblx0XHRcdFx0cmV0dXJuIHsgZmFjZTogXCJcXFwiTmV3IENlbnR1cnlcXFwiLHNlcmlmXCIsIHdlaWdodDogXCJub3JtYWxcIiwgc3R5bGU6IFwiaXRhbGljXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0XHRjYXNlIFwiTmV3Q2VudHVyeVNjaGxiay1Cb2xkXCI6XG5cdFx0XHRcdHJldHVybiB7IGZhY2U6IFwiXFxcIk5ldyBDZW50dXJ5XFxcIixzZXJpZlwiLCB3ZWlnaHQ6IFwiYm9sZFwiLCBzdHlsZTogXCJub3JtYWxcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRcdGNhc2UgXCJOZXdDZW50dXJ5U2NobGJrLUJvbGRJdGFsaWNcIjpcblx0XHRcdFx0cmV0dXJuIHsgZmFjZTogXCJcXFwiTmV3IENlbnR1cnlcXFwiLHNlcmlmXCIsIHdlaWdodDogXCJib2xkXCIsIHN0eWxlOiBcIml0YWxpY1wiLCBkZWNvcmF0aW9uOiBcIm5vbmVcIiB9O1xuXHRcdFx0Y2FzZSBcIlRpbWVzXCI6XG5cdFx0XHRjYXNlIFwiVGltZXMtUm9tYW5cIjpcblx0XHRcdGNhc2UgXCJUaW1lcy1OYXJyb3dcIjpcblx0XHRcdGNhc2UgXCJUaW1lcy1Db3VyaWVyXCI6XG5cdFx0XHRjYXNlIFwiVGltZXMtTmV3LVJvbWFuXCI6XG5cdFx0XHRcdHJldHVybiB7IGZhY2U6IFwiXFxcIlRpbWVzIE5ldyBSb21hblxcXCJcIiwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJub3JtYWxcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRcdGNhc2UgXCJUaW1lcy1JdGFsaWNcIjpcblx0XHRcdGNhc2UgXCJUaW1lcy1JdGFsaWNzXCI6XG5cdFx0XHRcdHJldHVybiB7IGZhY2U6IFwiXFxcIlRpbWVzIE5ldyBSb21hblxcXCJcIiwgd2VpZ2h0OiBcIm5vcm1hbFwiLCBzdHlsZTogXCJpdGFsaWNcIiwgZGVjb3JhdGlvbjogXCJub25lXCIgfTtcblx0XHRcdGNhc2UgXCJUaW1lcy1Cb2xkXCI6XG5cdFx0XHRcdHJldHVybiB7IGZhY2U6IFwiXFxcIlRpbWVzIE5ldyBSb21hblxcXCJcIiwgd2VpZ2h0OiBcImJvbGRcIiwgc3R5bGU6IFwibm9ybWFsXCIsIGRlY29yYXRpb246IFwibm9uZVwiIH07XG5cdFx0XHRjYXNlIFwiVGltZXMtQm9sZEl0YWxpY1wiOlxuXHRcdFx0XHRyZXR1cm4geyBmYWNlOiBcIlxcXCJUaW1lcyBOZXcgUm9tYW5cXFwiXCIsIHdlaWdodDogXCJib2xkXCIsIHN0eWxlOiBcIml0YWxpY1wiLCBkZWNvcmF0aW9uOiBcIm5vbmVcIiB9O1xuXHRcdFx0Y2FzZSBcIlphcGZDaGFuY2VyeS1NZWRpdW1JdGFsaWNcIjpcblx0XHRcdFx0cmV0dXJuIHsgZmFjZTogXCJcXFwiWmFwZiBDaGFuY2VyeVxcXCIsY3Vyc2l2ZSxzZXJpZlwiLCB3ZWlnaHQ6IFwibm9ybWFsXCIsIHN0eWxlOiBcIm5vcm1hbFwiLCBkZWNvcmF0aW9uOiBcIm5vbmVcIiB9O1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBnZXRGb250UGFyYW1ldGVyID0gZnVuY3Rpb24odG9rZW5zLCBjdXJyZW50U2V0dGluZywgc3RyLCBwb3NpdGlvbiwgY21kKSB7XG5cdFx0Ly8gRXZlcnkgZm9udCBwYXJhbWV0ZXIgaGFzIHRoZSBmb2xsb3dpbmcgZm9ybWF0OlxuXHRcdC8vIDxmYWNlPiA8dXRmOD4gPHNpemU+IDxtb2RpZmllcnM+IDxib3g+XG5cdFx0Ly8gV2hlcmU6XG5cdFx0Ly8gZmFjZTogZWl0aGVyIGEgc3RhbmRhcmQgd2ViIGZvbnQgbmFtZSwgb3IgYSBwb3N0c2NyaXB0IGZvbnQsIGVudW1lcmF0ZWQgaW4gZm9udFRyYW5zbGF0aW9uLiBUaGlzIGNvdWxkIGFsc28gYmUgYW4gKiBvciBiZSBtaXNzaW5nIGlmIHRoZSBmYWNlIHNob3VsZG4ndCBjaGFuZ2UuXG5cdFx0Ly8gdXRmODogVGhpcyBpcyBvcHRpb25hbCwgYW5kIHNwZWNpZmllcyB1dGY4LiBUaGF0J3MgYWxsIHRoYXQgaXMgc3VwcG9ydGVkIHNvIHRoZSBmaWVsZCBpcyBqdXN0IHNpbGVudGx5IGlnbm9yZWQuXG5cdFx0Ly8gc2l6ZTogVGhlIHNpemUsIGluIHBpeGVscy4gVGhpcyBtYXkgYmUgb21pdHRlZCBpZiB0aGUgc2l6ZSBpcyBub3QgY2hhbmdpbmcuXG5cdFx0Ly8gbW9kaWZpZXJzOiB6ZXJvIG9yIG1vcmUgb2YgXCJib2xkXCIsIFwiaXRhbGljXCIsIFwidW5kZXJsaW5lXCJcblx0XHQvLyBib3g6IE9ubHkgYXBwbGllcyB0byB0aGUgbWVhc3VyZSBudW1iZXJzLCBnY2hvcmRzLCBhbmQgdGhlIHBhcnRzLiBJZiBwcmVzZW50LCB0aGVuIGEgYm94IGlzIGRyYXduIGFyb3VuZCB0aGUgY2hhcmFjdGVycy5cblx0XHQvLyBJZiBmYWNlIGlzIHByZXNlbnQsIHRoZW4gYWxsIHRoZSBtb2RpZmllcnMgYXJlIGNsZWFyZWQuIElmIGZhY2UgaXMgYWJzZW50LCB0aGVuIHRoZSBtb2RpZmllcnMgYXJlIGlsbGVnYWwuXG5cdFx0Ly8gVGhlIGZhY2UgY2FuIGJlIGEgc2luZ2xlIHdvcmQsIGEgc2V0IG9mIHdvcmRzIHNlcGFyYXRlZCBieSBoeXBoZW5zLCBvciBhIHF1b3RlZCBzdHJpbmcuXG5cdFx0Ly9cblx0XHQvLyBTbywgaW4gcHJhY3RpY2FsaXR5LCB0aGVyZSBhcmUgdGhyZWUgdHlwZXMgb2YgZm9udCBkZWZpbml0aW9uczogYSBudW1iZXIgb25seSwgYW4gYXN0ZXJpc2sgYW5kIGEgbnVtYmVyIG9ubHksIG9yIHRoZSBmdWxsIGRlZmluaXRpb24gKHdpdGggYW4gb3B0aW9uYWwgc2l6ZSkuXG5cdFx0ZnVuY3Rpb24gcHJvY2Vzc051bWJlck9ubHkoKSB7XG5cdFx0XHR2YXIgc2l6ZSA9IHBhcnNlSW50KHRva2Vuc1swXS50b2tlbik7XG5cdFx0XHR0b2tlbnMuc2hpZnQoKTtcblx0XHRcdGlmICghY3VycmVudFNldHRpbmcpIHtcblx0XHRcdFx0d2FybihcIkNhbid0IHNldCBqdXN0IHRoZSBzaXplIG9mIHRoZSBmb250IHNpbmNlIHRoZXJlIGlzIG5vIGRlZmF1bHQgdmFsdWUuXCIsIHN0ciwgcG9zaXRpb24pO1xuXHRcdFx0XHRyZXR1cm4geyBmYWNlOiBcIlxcXCJUaW1lcyBOZXcgUm9tYW5cXFwiXCIsIHdlaWdodDogXCJub3JtYWxcIiwgc3R5bGU6IFwibm9ybWFsXCIsIGRlY29yYXRpb246IFwibm9uZVwiLCBzaXplOiBzaXplfTtcblx0XHRcdH1cblx0XHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdHJldHVybiB7IGZhY2U6IGN1cnJlbnRTZXR0aW5nLmZhY2UsIHdlaWdodDogY3VycmVudFNldHRpbmcud2VpZ2h0LCBzdHlsZTogY3VycmVudFNldHRpbmcuc3R5bGUsIGRlY29yYXRpb246IGN1cnJlbnRTZXR0aW5nLmRlY29yYXRpb24sIHNpemU6IHNpemV9O1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDEgJiYgdG9rZW5zWzBdLnRva2VuID09PSBcImJveFwiICYmIGZvbnRUeXBlQ2FuSGF2ZUJveFtjbWRdKVxuXHRcdFx0XHRyZXR1cm4geyBmYWNlOiBjdXJyZW50U2V0dGluZy5mYWNlLCB3ZWlnaHQ6IGN1cnJlbnRTZXR0aW5nLndlaWdodCwgc3R5bGU6IGN1cnJlbnRTZXR0aW5nLnN0eWxlLCBkZWNvcmF0aW9uOiBjdXJyZW50U2V0dGluZy5kZWNvcmF0aW9uLCBzaXplOiBzaXplLCBib3g6IHRydWV9O1xuXHRcdFx0d2FybihcIkV4dHJhIHBhcmFtZXRlcnMgaW4gZm9udCBkZWZpbml0aW9uLlwiLCBzdHIsIHBvc2l0aW9uKTtcblx0XHRcdHJldHVybiB7IGZhY2U6IGN1cnJlbnRTZXR0aW5nLmZhY2UsIHdlaWdodDogY3VycmVudFNldHRpbmcud2VpZ2h0LCBzdHlsZTogY3VycmVudFNldHRpbmcuc3R5bGUsIGRlY29yYXRpb246IGN1cnJlbnRTZXR0aW5nLmRlY29yYXRpb24sIHNpemU6IHNpemV9O1xuXHRcdH1cblxuXHRcdC8vIGZvcm1hdCAxOiBhc3RlcmlzayBhbmQgbnVtYmVyIG9ubHlcblx0XHRpZiAodG9rZW5zWzBdLnRva2VuID09PSAnKicpIHtcblx0XHRcdHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0aWYgKHRva2Vuc1swXS50eXBlID09PSAnbnVtYmVyJylcblx0XHRcdFx0cmV0dXJuIHByb2Nlc3NOdW1iZXJPbmx5KCk7XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0d2FybihcIkV4cGVjdGVkIGZvbnQgc2l6ZSBudW1iZXIgYWZ0ZXIgKi5cIiwgc3RyLCBwb3NpdGlvbik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gZm9ybWF0IDI6IG51bWJlciBvbmx5XG5cdFx0aWYgKHRva2Vuc1swXS50eXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0cmV0dXJuIHByb2Nlc3NOdW1iZXJPbmx5KCk7XG5cdFx0fVxuXG5cdFx0Ly8gZm9ybWF0IDM6IHdob2xlIGRlZmluaXRpb25cblx0XHR2YXIgZmFjZSA9IFtdO1xuXHRcdHZhciBzaXplO1xuXHRcdHZhciB3ZWlnaHQgPSBcIm5vcm1hbFwiO1xuXHRcdHZhciBzdHlsZSA9IFwibm9ybWFsXCI7XG5cdFx0dmFyIGRlY29yYXRpb24gPSBcIm5vbmVcIjtcblx0XHR2YXIgYm94ID0gZmFsc2U7XG5cdFx0dmFyIHN0YXRlID0gJ2ZhY2UnO1xuXHRcdHZhciBoeXBoZW5MYXN0ID0gZmFsc2U7XG5cdFx0d2hpbGUgKHRva2Vucy5sZW5ndGgpIHtcblx0XHRcdHZhciBjdXJyVG9rZW4gPSB0b2tlbnMuc2hpZnQoKTtcblx0XHRcdHZhciB3b3JkID0gY3VyclRva2VuLnRva2VuLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRzd2l0Y2ggKHN0YXRlKSB7XG5cdFx0XHRcdGNhc2UgJ2ZhY2UnOlxuXHRcdFx0XHRcdGlmIChoeXBoZW5MYXN0IHx8ICh3b3JkICE9PSAndXRmJyAmJiBjdXJyVG9rZW4udHlwZSAhPT0gJ251bWJlcicgJiYgd29yZCAhPT0gXCJib2xkXCIgJiYgd29yZCAhPT0gXCJpdGFsaWNcIiAmJiB3b3JkICE9PSBcInVuZGVybGluZVwiICYmIHdvcmQgIT09IFwiYm94XCIpKSB7XG5cdFx0XHRcdFx0XHRpZiAoZmFjZS5sZW5ndGggPiAwICYmIGN1cnJUb2tlbi50b2tlbiA9PT0gJy0nKSB7XG5cdFx0XHRcdFx0XHRcdGh5cGhlbkxhc3QgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRmYWNlW2ZhY2UubGVuZ3RoLTFdID0gZmFjZVtmYWNlLmxlbmd0aC0xXSArIGN1cnJUb2tlbi50b2tlbjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRpZiAoaHlwaGVuTGFzdCkge1xuXHRcdFx0XHRcdFx0XHRcdGh5cGhlbkxhc3QgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRmYWNlW2ZhY2UubGVuZ3RoLTFdID0gZmFjZVtmYWNlLmxlbmd0aC0xXSArIGN1cnJUb2tlbi50b2tlbjtcblx0XHRcdFx0XHRcdFx0fSBlbHNlXG5cdFx0XHRcdFx0XHRcdFx0ZmFjZS5wdXNoKGN1cnJUb2tlbi50b2tlbik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGlmIChjdXJyVG9rZW4udHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHNpemUpIHtcblx0XHRcdFx0XHRcdFx0XHR3YXJuKFwiRm9udCBzaXplIHNwZWNpZmllZCB0d2ljZSBpbiBmb250IGRlZmluaXRpb24uXCIsIHN0ciwgcG9zaXRpb24pO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHNpemUgPSBjdXJyVG9rZW4udG9rZW47XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0c3RhdGUgPSAnbW9kaWZpZXInO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICh3b3JkID09PSBcImJvbGRcIilcblx0XHRcdFx0XHRcdFx0d2VpZ2h0ID0gXCJib2xkXCI7XG5cdFx0XHRcdFx0XHRlbHNlIGlmICh3b3JkID09PSBcIml0YWxpY1wiKVxuXHRcdFx0XHRcdFx0XHRzdHlsZSA9IFwiaXRhbGljXCI7XG5cdFx0XHRcdFx0XHRlbHNlIGlmICh3b3JkID09PSBcInVuZGVybGluZVwiKVxuXHRcdFx0XHRcdFx0XHRkZWNvcmF0aW9uID0gXCJ1bmRlcmxpbmVcIjtcblx0XHRcdFx0XHRcdGVsc2UgaWYgKHdvcmQgPT09IFwiYm94XCIpIHtcblx0XHRcdFx0XHRcdFx0aWYgKGZvbnRUeXBlQ2FuSGF2ZUJveFtjbWRdKVxuXHRcdFx0XHRcdFx0XHRcdGJveCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdFx0XHR3YXJuKFwiVGhpcyBmb250IHN0eWxlIGRvZXNuJ3Qgc3VwcG9ydCBcXFwiYm94XFxcIlwiLCBzdHIsIHBvc2l0aW9uKTtcblx0XHRcdFx0XHRcdFx0c3RhdGUgPSBcImZpbmlzaGVkXCI7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHdvcmQgPT09IFwidXRmXCIpIHtcblx0XHRcdFx0XHRcdFx0Y3VyclRva2VuID0gdG9rZW5zLnNoaWZ0KCk7IC8vIHRoaXMgZ2V0cyByaWQgb2YgdGhlIFwiOFwiIGFmdGVyIFwidXRmXCJcblx0XHRcdFx0XHRcdFx0c3RhdGUgPSBcInNpemVcIjtcblx0XHRcdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdFx0XHR3YXJuKFwiVW5rbm93biBwYXJhbWV0ZXIgXCIgKyBjdXJyVG9rZW4udG9rZW4gKyBcIiBpbiBmb250IGRlZmluaXRpb24uXCIsIHN0ciwgcG9zaXRpb24pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcInNpemVcIjpcblx0XHRcdFx0XHRpZiAoY3VyclRva2VuLnR5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdFx0XHRpZiAoc2l6ZSkge1xuXHRcdFx0XHRcdFx0XHR3YXJuKFwiRm9udCBzaXplIHNwZWNpZmllZCB0d2ljZSBpbiBmb250IGRlZmluaXRpb24uXCIsIHN0ciwgcG9zaXRpb24pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0c2l6ZSA9IGN1cnJUb2tlbi50b2tlbjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0d2FybihcIkV4cGVjdGVkIGZvbnQgc2l6ZSBpbiBmb250IGRlZmluaXRpb24uXCIsIHN0ciwgcG9zaXRpb24pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzdGF0ZSA9ICdtb2RpZmllcic7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJtb2RpZmllclwiOlxuXHRcdFx0XHRcdGlmICh3b3JkID09PSBcImJvbGRcIilcblx0XHRcdFx0XHRcdHdlaWdodCA9IFwiYm9sZFwiO1xuXHRcdFx0XHRcdGVsc2UgaWYgKHdvcmQgPT09IFwiaXRhbGljXCIpXG5cdFx0XHRcdFx0XHRzdHlsZSA9IFwiaXRhbGljXCI7XG5cdFx0XHRcdFx0ZWxzZSBpZiAod29yZCA9PT0gXCJ1bmRlcmxpbmVcIilcblx0XHRcdFx0XHRcdGRlY29yYXRpb24gPSBcInVuZGVybGluZVwiO1xuXHRcdFx0XHRcdGVsc2UgaWYgKHdvcmQgPT09IFwiYm94XCIpIHtcblx0XHRcdFx0XHRcdGlmIChmb250VHlwZUNhbkhhdmVCb3hbY21kXSlcblx0XHRcdFx0XHRcdFx0Ym94ID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdFx0d2FybihcIlRoaXMgZm9udCBzdHlsZSBkb2Vzbid0IHN1cHBvcnQgXFxcImJveFxcXCJcIiwgc3RyLCBwb3NpdGlvbik7XG5cdFx0XHRcdFx0XHRzdGF0ZSA9IFwiZmluaXNoZWRcIjtcblx0XHRcdFx0XHR9IGVsc2Vcblx0XHRcdFx0XHRcdHdhcm4oXCJVbmtub3duIHBhcmFtZXRlciBcIiArIGN1cnJUb2tlbi50b2tlbiArIFwiIGluIGZvbnQgZGVmaW5pdGlvbi5cIiwgc3RyLCBwb3NpdGlvbik7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJmaW5pc2hlZFwiOlxuXHRcdFx0XHRcdHdhcm4oXCJFeHRyYSBjaGFyYWN0ZXJzIGZvdW5kIGFmdGVyIFxcXCJib3hcXFwiIGluIGZvbnQgZGVmaW5pdGlvbi5cIiwgc3RyLCBwb3NpdGlvbik7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHNpemUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0aWYgKCFjdXJyZW50U2V0dGluZykge1xuXHRcdFx0XHR3YXJuKFwiTXVzdCBzcGVjaWZ5IHRoZSBzaXplIG9mIHRoZSBmb250IHNpbmNlIHRoZXJlIGlzIG5vIGRlZmF1bHQgdmFsdWUuXCIsIHN0ciwgcG9zaXRpb24pO1xuXHRcdFx0XHRzaXplID0gMTI7XG5cdFx0XHR9IGVsc2Vcblx0XHRcdFx0c2l6ZSA9IGN1cnJlbnRTZXR0aW5nLnNpemU7XG5cdFx0fSBlbHNlXG5cdFx0XHRzaXplID0gcGFyc2VGbG9hdChzaXplKTtcblxuXHRcdGZhY2UgPSBmYWNlLmpvaW4oJyAnKTtcblx0XHRpZiAoZmFjZSA9PT0gJycpIHtcblx0XHRcdGlmICghY3VycmVudFNldHRpbmcpIHtcblx0XHRcdFx0d2FybihcIk11c3Qgc3BlY2lmeSB0aGUgbmFtZSBvZiB0aGUgZm9udCBzaW5jZSB0aGVyZSBpcyBubyBkZWZhdWx0IHZhbHVlLlwiLCBzdHIsIHBvc2l0aW9uKTtcblx0XHRcdFx0ZmFjZSA9IFwic2Fucy1zZXJpZlwiO1xuXHRcdFx0fSBlbHNlXG5cdFx0XHRcdGZhY2UgPSBjdXJyZW50U2V0dGluZy5mYWNlO1xuXHRcdH1cblx0XHR2YXIgcHNGb250ID0gZm9udFRyYW5zbGF0aW9uKGZhY2UpO1xuXHRcdHZhciBmb250ID0ge307XG5cdFx0aWYgKHBzRm9udCkge1xuXHRcdFx0Zm9udC5mYWNlID0gcHNGb250LmZhY2U7XG5cdFx0XHRmb250LndlaWdodCA9IHBzRm9udC53ZWlnaHQ7XG5cdFx0XHRmb250LnN0eWxlID0gcHNGb250LnN0eWxlO1xuXHRcdFx0Zm9udC5kZWNvcmF0aW9uID0gcHNGb250LmRlY29yYXRpb247XG5cdFx0XHRmb250LnNpemUgPSBzaXplO1xuXHRcdFx0aWYgKGJveClcblx0XHRcdFx0Zm9udC5ib3ggPSB0cnVlO1xuXHRcdFx0cmV0dXJuIGZvbnQ7XG5cdFx0fVxuXHRcdGZvbnQuZmFjZSA9IGZhY2U7XG5cdFx0Zm9udC53ZWlnaHQgPSB3ZWlnaHQ7XG5cdFx0Zm9udC5zdHlsZSA9IHN0eWxlO1xuXHRcdGZvbnQuZGVjb3JhdGlvbiA9IGRlY29yYXRpb247XG5cdFx0Zm9udC5zaXplID0gc2l6ZTtcblx0XHRpZiAoYm94KVxuXHRcdFx0Zm9udC5ib3ggPSB0cnVlO1xuXHRcdHJldHVybiBmb250O1xuXHR9O1xuXG5cdHZhciBnZXRDaGFuZ2luZ0ZvbnQgPSBmdW5jdGlvbihjbWQsIHRva2Vucywgc3RyKSB7XG5cdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDApXG5cdFx0XHRyZXR1cm4gXCJEaXJlY3RpdmUgXFxcIlwiICsgY21kICsgXCJcXFwiIHJlcXVpcmVzIGEgZm9udCBhcyBhIHBhcmFtZXRlci5cIjtcblx0XHRtdWx0aWxpbmVWYXJzW2NtZF0gPSBnZXRGb250UGFyYW1ldGVyKHRva2VucywgbXVsdGlsaW5lVmFyc1tjbWRdLCBzdHIsIDAsIGNtZCk7XG5cdFx0aWYgKG11bHRpbGluZVZhcnMuaXNfaW5faGVhZGVyKSAvLyBJZiB0aGUgZm9udCBhcHBlYXJzIGluIHRoZSBoZWFkZXIsIHRoZW4gaXQgYmVjb21lcyB0aGUgZGVmYXVsdCBmb250LlxuXHRcdFx0dHVuZS5mb3JtYXR0aW5nW2NtZF0gPSBtdWx0aWxpbmVWYXJzW2NtZF07XG5cdFx0cmV0dXJuIG51bGw7XG5cdH07XG5cdHZhciBnZXRHbG9iYWxGb250ID0gZnVuY3Rpb24oY21kLCB0b2tlbnMsIHN0cikge1xuXHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwKVxuXHRcdFx0cmV0dXJuIFwiRGlyZWN0aXZlIFxcXCJcIiArIGNtZCArIFwiXFxcIiByZXF1aXJlcyBhIGZvbnQgYXMgYSBwYXJhbWV0ZXIuXCI7XG5cdFx0dHVuZS5mb3JtYXR0aW5nW2NtZF0gPSBnZXRGb250UGFyYW1ldGVyKHRva2VucywgdHVuZS5mb3JtYXR0aW5nW2NtZF0sIHN0ciwgMCwgY21kKTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fTtcblxuXHR2YXIgc2V0U2NhbGUgPSBmdW5jdGlvbihjbWQsIHRva2Vucykge1xuXHRcdHZhciBzY3JhdGNoID0gXCJcIjtcblx0XHR0b2tlbnMuZm9yRWFjaChmdW5jdGlvbih0b2spIHtcblx0XHRcdHNjcmF0Y2ggKz0gdG9rLnRva2VuO1xuXHRcdH0pO1xuXHRcdHZhciBudW0gPSBwYXJzZUZsb2F0KHNjcmF0Y2gpO1xuXHRcdGlmIChpc05hTihudW0pIHx8IG51bSA9PT0gMClcblx0XHRcdHJldHVybiBcIkRpcmVjdGl2ZSBcXFwiXCIgKyBjbWQgKyBcIlxcXCIgcmVxdWlyZXMgYSBudW1iZXIgYXMgYSBwYXJhbWV0ZXIuXCI7XG5cdFx0dHVuZS5mb3JtYXR0aW5nLnNjYWxlID0gbnVtO1xuXG5cdH07XG5cdC8vIHN0YXJ0cyBhdCAzNVxuXHR2YXIgZHJ1bU5hbWVzID0gW1xuXHRcdFwiYWNvdXN0aWMtYmFzcy1kcnVtXCIsXG5cdFx0XCJiYXNzLWRydW0tMVwiLFxuXHRcdFwic2lkZS1zdGlja1wiLFxuXHRcdFwiYWNvdXN0aWMtc25hcmVcIixcblx0XHRcImhhbmQtY2xhcFwiLFxuXHRcdFwiZWxlY3RyaWMtc25hcmVcIixcblx0XHRcImxvdy1mbG9vci10b21cIixcblx0XHRcImNsb3NlZC1oaS1oYXRcIixcblx0XHRcImhpZ2gtZmxvb3ItdG9tXCIsXG5cdFx0XCJwZWRhbC1oaS1oYXRcIixcblx0XHRcImxvdy10b21cIixcblx0XHRcIm9wZW4taGktaGF0XCIsXG5cdFx0XCJsb3ctbWlkLXRvbVwiLFxuXHRcdFwiaGktbWlkLXRvbVwiLFxuXHRcdFwiY3Jhc2gtY3ltYmFsLTFcIixcblx0XHRcImhpZ2gtdG9tXCIsXG5cdFx0XCJyaWRlLWN5bWJhbC0xXCIsXG5cdFx0XCJjaGluZXNlLWN5bWJhbFwiLFxuXHRcdFwicmlkZS1iZWxsXCIsXG5cdFx0XCJ0YW1ib3VyaW5lXCIsXG5cdFx0XCJzcGxhc2gtY3ltYmFsXCIsXG5cdFx0XCJjb3diZWxsXCIsXG5cdFx0XCJjcmFzaC1jeW1iYWwtMlwiLFxuXHRcdFwidmlicmFzbGFwXCIsXG5cdFx0XCJyaWRlLWN5bWJhbC0yXCIsXG5cdFx0XCJoaS1ib25nb1wiLFxuXHRcdFwibG93LWJvbmdvXCIsXG5cdFx0XCJtdXRlLWhpLWNvbmdhXCIsXG5cdFx0XCJvcGVuLWhpLWNvbmdhXCIsXG5cdFx0XCJsb3ctY29uZ2FcIixcblx0XHRcImhpZ2gtdGltYmFsZVwiLFxuXHRcdFwibG93LXRpbWJhbGVcIixcblx0XHRcImhpZ2gtYWdvZ29cIixcblx0XHRcImxvdy1hZ29nb1wiLFxuXHRcdFwiY2FiYXNhXCIsXG5cdFx0XCJtYXJhY2FzXCIsXG5cdFx0XCJzaG9ydC13aGlzdGxlXCIsXG5cdFx0XCJsb25nLXdoaXN0bGVcIixcblx0XHRcInNob3J0LWd1aXJvXCIsXG5cdFx0XCJsb25nLWd1aXJvXCIsXG5cdFx0XCJjbGF2ZXNcIixcblx0XHRcImhpLXdvb2QtYmxvY2tcIixcblx0XHRcImxvdy13b29kLWJsb2NrXCIsXG5cdFx0XCJtdXRlLWN1aWNhXCIsXG5cdFx0XCJvcGVuLWN1aWNhXCIsXG5cdFx0XCJtdXRlLXRyaWFuZ2xlXCIsXG5cdFx0XCJvcGVuLXRyaWFuZ2xlXCIsXG5cdF07XG5cblx0dmFyIGludGVycHJldFBlcmNNYXAgPSBmdW5jdGlvbihyZXN0T2ZTdHJpbmcpIHtcblx0XHR2YXIgdG9rZW5zID0gcmVzdE9mU3RyaW5nLnNwbGl0KC9cXHMrLyk7IC8vIEFsbG93IG11bHRpcGxlIHNwYWNlcy5cblx0XHRpZiAodG9rZW5zLmxlbmd0aCAhPT0gMiAmJiB0b2tlbnMubGVuZ3RoICE9PSAzKVxuXHRcdFx0cmV0dXJuIHsgZXJyb3I6ICdFeHBlY3RlZCBwYXJhbWV0ZXJzIFwiYWJjLW5vdGVcIiwgXCJkcnVtLXNvdW5kXCIsIGFuZCBvcHRpb25hbGx5IFwibm90ZS1oZWFkXCInfTtcblx0XHR2YXIga2V5ID0gdG9rZW5zWzBdO1xuXHRcdC8vIFRoZSBwZXJjdXNzaW9uIHNvdW5kIGNhbiBlaXRoZXIgYmUgYSBNSURJIG51bWJlciBvciBhIGRydW0gbmFtZS4gSWYgaXQgaXMgbm90IGEgbnVtYmVyIHRoZW4gY2hlY2sgZm9yIGEgbmFtZS5cblx0XHR2YXIgcGl0Y2ggPSBwYXJzZUludCh0b2tlbnNbMV0sIDEwKTtcblx0XHRpZiAoKGlzTmFOKHBpdGNoKSB8fCBwaXRjaCA8IDM1IHx8IHBpdGNoID4gODEpICYmIHRva2Vuc1sxXSkge1xuXHRcdFx0cGl0Y2ggPSBkcnVtTmFtZXMuaW5kZXhPZih0b2tlbnNbMV0udG9Mb3dlckNhc2UoKSkgKyAzNTtcblx0XHR9XG5cdFx0aWYgKChpc05hTihwaXRjaCkgfHwgcGl0Y2ggPCAzNSB8fCBwaXRjaCA+IDgxKSlcblx0XHRcdHJldHVybiB7IGVycm9yOiAnRXhwZWN0ZWQgZHJ1bSBuYW1lLCByZWNlaXZlZCBcIicgKyB0b2tlbnNbMV0gKyAnXCInIH07XG5cdFx0dmFyIHZhbHVlID0geyBzb3VuZDogcGl0Y2ggfTtcblx0XHRpZiAodG9rZW5zLmxlbmd0aCA9PT0gMylcblx0XHRcdHZhbHVlLm5vdGVIZWFkID0gdG9rZW5zWzJdO1xuXHRcdHJldHVybiB7IGtleToga2V5LCB2YWx1ZTogdmFsdWUgfTtcblx0fTtcblxuXHR2YXIgZ2V0UmVxdWlyZWRNZWFzdXJlbWVudCA9IGZ1bmN0aW9uKGNtZCwgdG9rZW5zKSB7XG5cdFx0dmFyIHBvaW50cyA9IHRva2VuaXplci5nZXRNZWFzdXJlbWVudCh0b2tlbnMpO1xuXHRcdGlmIChwb2ludHMudXNlZCA9PT0gMCB8fCB0b2tlbnMubGVuZ3RoICE9PSAwKVxuXHRcdFx0cmV0dXJuIHsgZXJyb3I6IFwiRGlyZWN0aXZlIFxcXCJcIiArIGNtZCArIFwiXFxcIiByZXF1aXJlcyBhIG1lYXN1cmVtZW50IGFzIGEgcGFyYW1ldGVyLlwifTtcblx0XHRyZXR1cm4gcG9pbnRzLnZhbHVlO1xuXHR9O1xuXHR2YXIgb25lUGFyYW1ldGVyTWVhc3VyZW1lbnQgPSBmdW5jdGlvbihjbWQsIHRva2Vucykge1xuXHRcdHZhciBwb2ludHMgPSB0b2tlbml6ZXIuZ2V0TWVhc3VyZW1lbnQodG9rZW5zKTtcblx0XHRpZiAocG9pbnRzLnVzZWQgPT09IDAgfHwgdG9rZW5zLmxlbmd0aCAhPT0gMClcblx0XHRcdHJldHVybiBcIkRpcmVjdGl2ZSBcXFwiXCIgKyBjbWQgKyBcIlxcXCIgcmVxdWlyZXMgYSBtZWFzdXJlbWVudCBhcyBhIHBhcmFtZXRlci5cIjtcblx0XHR0dW5lLmZvcm1hdHRpbmdbY21kXSA9IHBvaW50cy52YWx1ZTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fTtcblxuXHR2YXIgYWRkTXVsdGlsaW5lVmFyID0gZnVuY3Rpb24oa2V5LCBjbWQsIHRva2VucywgbWluLCBtYXgpIHtcblx0XHRpZiAodG9rZW5zLmxlbmd0aCAhPT0gMSB8fCB0b2tlbnNbMF0udHlwZSAhPT0gJ251bWJlcicpXG5cdFx0XHRyZXR1cm4gXCJEaXJlY3RpdmUgXFxcIlwiICsgY21kICsgXCJcXFwiIHJlcXVpcmVzIGEgbnVtYmVyIGFzIGEgcGFyYW1ldGVyLlwiO1xuXHRcdHZhciBpID0gdG9rZW5zWzBdLmludHQ7XG5cdFx0aWYgKG1pbiAhPT0gdW5kZWZpbmVkICYmIGkgPCBtaW4pXG5cdFx0XHRyZXR1cm4gXCJEaXJlY3RpdmUgXFxcIlwiICsgY21kICsgXCJcXFwiIHJlcXVpcmVzIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBcIiArIG1pbiArIFwiIGFzIGEgcGFyYW1ldGVyLlwiO1xuXHRcdGlmIChtYXggIT09IHVuZGVmaW5lZCAmJiBpID4gbWF4KVxuXHRcdFx0cmV0dXJuIFwiRGlyZWN0aXZlIFxcXCJcIiArIGNtZCArIFwiXFxcIiByZXF1aXJlcyBhIG51bWJlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gXCIgKyBtYXggKyBcIiBhcyBhIHBhcmFtZXRlci5cIjtcblx0XHRtdWx0aWxpbmVWYXJzW2tleV0gPSBpO1xuXHRcdHJldHVybiBudWxsO1xuXHR9O1xuXG5cdHZhciBhZGRNdWx0aWxpbmVWYXJCb29sID0gZnVuY3Rpb24oa2V5LCBjbWQsIHRva2Vucykge1xuXHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAxICYmICh0b2tlbnNbMF0udG9rZW4gPT09ICd0cnVlJyB8fCB0b2tlbnNbMF0udG9rZW4gPT09ICdmYWxzZScpKSB7XG5cdFx0XHRtdWx0aWxpbmVWYXJzW2tleV0gPSB0b2tlbnNbMF0udG9rZW4gPT09ICd0cnVlJztcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0XHR2YXIgc3RyID0gYWRkTXVsdGlsaW5lVmFyKGtleSwgY21kLCB0b2tlbnMsIDAsIDEpO1xuXHRcdGlmIChzdHIgIT09IG51bGwpIHJldHVybiBzdHI7XG5cdFx0bXVsdGlsaW5lVmFyc1trZXldID0gKG11bHRpbGluZVZhcnNba2V5XSA9PT0gMSk7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH07XG5cblx0dmFyIGFkZE11bHRpbGluZVZhck9uZVBhcmFtQ2hvaWNlID0gZnVuY3Rpb24oa2V5LCBjbWQsIHRva2VucywgY2hvaWNlcykge1xuXHRcdGlmICh0b2tlbnMubGVuZ3RoICE9PSAxKVxuXHRcdFx0cmV0dXJuIFwiRGlyZWN0aXZlIFxcXCJcIiArIGNtZCArIFwiXFxcIiByZXF1aXJlcyBvbmUgb2YgWyBcIiArIGNob2ljZXMuam9pbihcIiwgXCIpICsgXCIgXSBhcyBhIHBhcmFtZXRlci5cIjtcblx0XHR2YXIgY2hvaWNlID0gdG9rZW5zWzBdLnRva2VuO1xuXHRcdHZhciBmb3VuZCA9IGZhbHNlO1xuXHRcdGZvciAodmFyIGkgPSAwOyAhZm91bmQgJiYgaSA8IGNob2ljZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmIChjaG9pY2VzW2ldID09PSBjaG9pY2UpXG5cdFx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHR9XG5cdFx0aWYgKCFmb3VuZClcblx0XHRcdHJldHVybiBcIkRpcmVjdGl2ZSBcXFwiXCIgKyBjbWQgKyBcIlxcXCIgcmVxdWlyZXMgb25lIG9mIFsgXCIgKyBjaG9pY2VzLmpvaW4oXCIsIFwiKSArIFwiIF0gYXMgYSBwYXJhbWV0ZXIuXCI7XG5cdFx0bXVsdGlsaW5lVmFyc1trZXldID0gY2hvaWNlO1xuXHRcdHJldHVybiBudWxsO1xuXHR9O1xuXG5cdHZhciBtaWRpQ21kUGFyYW0wID0gW1xuXHRcdFwibm9iYXJsaW5lc1wiLFxuXHRcdFwiYmFybGluZXNcIixcblx0XHRcImJlYXRhY2NlbnRzXCIsXG5cdFx0XCJub2JlYXRhY2NlbnRzXCIsXG5cdFx0XCJkcm9uZW9uXCIsXG5cdFx0XCJkcm9uZW9mZlwiLFxuXHRcdFwiZHJ1bW9uXCIsXG5cdFx0XCJkcnVtb2ZmXCIsXG5cdFx0XCJmZXJtYXRhZml4ZWRcIixcblx0XHRcImZlcm1hdGFwcm9wb3J0aW9uYWxcIixcblx0XHRcImdjaG9yZG9uXCIsXG5cdFx0XCJnY2hvcmRvZmZcIixcblx0XHRcImNvbnRyb2xjb21ib1wiLFxuXHRcdFwidGVtcGVyYW1lbnRub3JtYWxcIixcblx0XHRcIm5vcG9ydGFtZW50b1wiXG5cdF07XG5cdHZhciBtaWRpQ21kUGFyYW0xU3RyaW5nID0gW1xuXHRcdFwiZ2Nob3JkXCIsXG5cdFx0XCJwdHN0cmVzc1wiLFxuXHRcdFwiYmVhdHN0cmluZ1wiXG5cdF07XG5cdHZhciBtaWRpQ21kUGFyYW0xSW50ZWdlciA9IFtcblx0XHRcImJhc3N2b2xcIixcblx0XHRcImNob3Jkdm9sXCIsXG5cdFx0XCJjXCIsXG5cdFx0XCJjaGFubmVsXCIsXG5cdFx0XCJiZWF0bW9kXCIsXG5cdFx0XCJkZWx0YWxvdWRuZXNzXCIsXG5cdFx0XCJkcnVtYmFyc1wiLFxuXHRcdFwiZ3JhY2VkaXZpZGVyXCIsXG5cdFx0XCJtYWtlY2hvcmRjaGFubmVsc1wiLFxuXHRcdFwicmFuZG9tY2hvcmRhdHRhY2tcIixcblx0XHRcImNob3JkYXR0YWNrXCIsXG5cdFx0XCJzdHJlc3Ntb2RlbFwiLFxuXHRcdFwidHJhbnNwb3NlXCIsXG5cdFx0XCJydHJhbnNwb3NlXCIsXG5cdFx0XCJ2b2xcIixcblx0XHRcInZvbGluY1wiLFxuXHRcdFwiZ2Nob3JkYmFyc1wiXHRcblx0XTtcblx0dmFyIG1pZGlDbWRQYXJhbTFJbnRlZ2VyMU9wdGlvbmFsSW50ZWdlciA9IFtcblx0XHRcInByb2dyYW1cIlxuXHRdO1xuXHR2YXIgbWlkaUNtZFBhcmFtMkludGVnZXIgPSBbXG5cdFx0XCJyYXRpb1wiLFxuXHRcdFwic250XCIsXG5cdFx0XCJiZW5kdmVsb2NpdHlcIixcblx0XHRcInBpdGNoYmVuZFwiLFxuXHRcdFwiY29udHJvbFwiLFxuXHRcdFwidGVtcGVyYW1lbnRsaW5lYXJcIlxuXHRdO1xuXHR2YXIgbWlkaUNtZFBhcmFtNEludGVnZXIgPSBbXG5cdFx0XCJiZWF0XCJcblx0XTtcblx0dmFyIG1pZGlDbWRQYXJhbTVJbnRlZ2VyID0gW1xuXHRcdFwiZHJvbmVcIlxuXHRdO1xuXHR2YXIgbWlkaUNtZFBhcmFtMVN0cmluZzFJbnRlZ2VyID0gW1xuXHRcdFwicG9ydGFtZW50b1wiXG5cdF07XG5cdHZhciBtaWRpQ21kUGFyYW1GcmFjdGlvbiA9IFtcblx0XHRcImV4cGFuZFwiLFxuXHRcdFwiZ3JhY2VcIixcblx0XHRcInRyaW1cIlxuXHRdO1xuXHR2YXIgbWlkaUNtZFBhcmFtMVN0cmluZ1ZhcmlhYmxlSW50ZWdlcnMgPSBbXG5cdFx0XCJkcnVtXCIsXG5cdFx0XCJjaG9yZG5hbWVcIlxuXHRdO1xuICBcdHZhciBtaWRpQ21kUGFyYW0xSW50ZWdlcjFPcHRpb25hbFN0cmluZyA9IFtcbiAgXHRcdFwiYmFzc3Byb2dcIiwgXCJjaG9yZHByb2dcIlxuICBcdF07XG5cblxuXHR2YXIgcGFyc2VNaWRpQ29tbWFuZCA9IGZ1bmN0aW9uKG1pZGksIHR1bmUsIHJlc3RPZlN0cmluZykge1xuXHRcdHZhciBtaWRpX2NtZCA9IG1pZGkuc2hpZnQoKS50b2tlbjtcblx0XHR2YXIgbWlkaV9wYXJhbXMgPSBbXTtcblx0XHRpZiAobWlkaUNtZFBhcmFtMC5pbmRleE9mKG1pZGlfY21kKSA+PSAwKSB7XG5cdFx0XHQvLyBOTyBQQVJBTUVURVJTXG5cdFx0XHRpZiAobWlkaS5sZW5ndGggIT09IDApXG5cdFx0XHRcdHdhcm4oXCJVbmV4cGVjdGVkIHBhcmFtZXRlciBpbiBNSURJIFwiICsgbWlkaV9jbWQsIHJlc3RPZlN0cmluZywgMCk7XG5cdFx0fSBlbHNlIGlmIChtaWRpQ21kUGFyYW0xU3RyaW5nLmluZGV4T2YobWlkaV9jbWQpID49IDApIHtcblx0XHRcdC8vIE9ORSBTVFJJTkcgUEFSQU1FVEVSXG5cdFx0XHRpZiAobWlkaS5sZW5ndGggIT09IDEpXG5cdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCBvbmUgcGFyYW1ldGVyIGluIE1JREkgXCIgKyBtaWRpX2NtZCwgcmVzdE9mU3RyaW5nLCAwKTtcblx0XHRcdGVsc2Vcblx0XHRcdFx0bWlkaV9wYXJhbXMucHVzaChtaWRpWzBdLnRva2VuKTtcblx0XHR9IGVsc2UgaWYgKG1pZGlDbWRQYXJhbTFJbnRlZ2VyLmluZGV4T2YobWlkaV9jbWQpID49IDApIHtcblx0XHRcdC8vIE9ORSBJTlQgUEFSQU1FVEVSXG5cdFx0XHRpZiAobWlkaS5sZW5ndGggIT09IDEpXG5cdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCBvbmUgcGFyYW1ldGVyIGluIE1JREkgXCIgKyBtaWRpX2NtZCwgcmVzdE9mU3RyaW5nLCAwKTtcblx0XHRcdGVsc2UgaWYgKG1pZGlbMF0udHlwZSAhPT0gXCJudW1iZXJcIilcblx0XHRcdFx0d2FybihcIkV4cGVjdGVkIG9uZSBpbnRlZ2VyIHBhcmFtZXRlciBpbiBNSURJIFwiICsgbWlkaV9jbWQsIHJlc3RPZlN0cmluZywgMCk7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdG1pZGlfcGFyYW1zLnB1c2gobWlkaVswXS5pbnR0KTtcblx0XHR9IGVsc2UgaWYgKG1pZGlDbWRQYXJhbTFJbnRlZ2VyMU9wdGlvbmFsSW50ZWdlci5pbmRleE9mKG1pZGlfY21kKSA+PSAwKSB7XG5cdFx0XHQvLyBPTkUgSU5UIFBBUkFNRVRFUiwgT05FIE9QVElPTkFMIFBBUkFNRVRFUlxuXHRcdFx0aWYgKG1pZGkubGVuZ3RoICE9PSAxICYmIG1pZGkubGVuZ3RoICE9PSAyKVxuXHRcdFx0XHR3YXJuKFwiRXhwZWN0ZWQgb25lIG9yIHR3byBwYXJhbWV0ZXJzIGluIE1JREkgXCIgKyBtaWRpX2NtZCwgcmVzdE9mU3RyaW5nLCAwKTtcblx0XHRcdGVsc2UgaWYgKG1pZGlbMF0udHlwZSAhPT0gXCJudW1iZXJcIilcblx0XHRcdFx0d2FybihcIkV4cGVjdGVkIGludGVnZXIgcGFyYW1ldGVyIGluIE1JREkgXCIgKyBtaWRpX2NtZCwgcmVzdE9mU3RyaW5nLCAwKTtcblx0XHRcdGVsc2UgaWYgKG1pZGkubGVuZ3RoID09PSAyICYmIG1pZGlbMV0udHlwZSAhPT0gXCJudW1iZXJcIilcblx0XHRcdFx0d2FybihcIkV4cGVjdGVkIGludGVnZXIgcGFyYW1ldGVyIGluIE1JREkgXCIgKyBtaWRpX2NtZCwgcmVzdE9mU3RyaW5nLCAwKTtcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRtaWRpX3BhcmFtcy5wdXNoKG1pZGlbMF0uaW50dCk7XG5cdFx0XHRcdGlmIChtaWRpLmxlbmd0aCA9PT0gMilcblx0XHRcdFx0XHRtaWRpX3BhcmFtcy5wdXNoKG1pZGlbMV0uaW50dCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChtaWRpQ21kUGFyYW0ySW50ZWdlci5pbmRleE9mKG1pZGlfY21kKSA+PSAwKSB7XG5cdFx0XHQvLyBUV08gSU5UIFBBUkFNRVRFUlNcblx0XHRcdGlmIChtaWRpLmxlbmd0aCAhPT0gMilcblx0XHRcdFx0d2FybihcIkV4cGVjdGVkIHR3byBwYXJhbWV0ZXJzIGluIE1JREkgXCIgKyBtaWRpX2NtZCwgcmVzdE9mU3RyaW5nLCAwKTtcblx0XHRcdGVsc2UgaWYgKG1pZGlbMF0udHlwZSAhPT0gXCJudW1iZXJcIiB8fCBtaWRpWzFdLnR5cGUgIT09IFwibnVtYmVyXCIpXG5cdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCB0d28gaW50ZWdlciBwYXJhbWV0ZXJzIGluIE1JREkgXCIgKyBtaWRpX2NtZCwgcmVzdE9mU3RyaW5nLCAwKTtcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRtaWRpX3BhcmFtcy5wdXNoKG1pZGlbMF0uaW50dCk7XG5cdFx0XHRcdG1pZGlfcGFyYW1zLnB1c2gobWlkaVsxXS5pbnR0KTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKG1pZGlDbWRQYXJhbTFTdHJpbmcxSW50ZWdlci5pbmRleE9mKG1pZGlfY21kKSA+PSAwKSB7XG5cdFx0XHQvLyBPTkUgU1RSSU5HIFBBUkFNRVRFUiwgT05FIElOVCBQQVJBTUVURVJcblx0XHRcdGlmIChtaWRpLmxlbmd0aCAhPT0gMilcblx0XHRcdFx0d2FybihcIkV4cGVjdGVkIHR3byBwYXJhbWV0ZXJzIGluIE1JREkgXCIgKyBtaWRpX2NtZCwgcmVzdE9mU3RyaW5nLCAwKTtcblx0XHRcdGVsc2UgaWYgKG1pZGlbMF0udHlwZSAhPT0gXCJhbHBoYVwiIHx8IG1pZGlbMV0udHlwZSAhPT0gXCJudW1iZXJcIilcblx0XHRcdFx0d2FybihcIkV4cGVjdGVkIG9uZSBzdHJpbmcgYW5kIG9uZSBpbnRlZ2VyIHBhcmFtZXRlcnMgaW4gTUlESSBcIiArIG1pZGlfY21kLCByZXN0T2ZTdHJpbmcsIDApO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdG1pZGlfcGFyYW1zLnB1c2gobWlkaVswXS50b2tlbik7XG5cdFx0XHRcdG1pZGlfcGFyYW1zLnB1c2gobWlkaVsxXS5pbnR0KTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKG1pZGlfY21kID09PSAnZHJ1bW1hcCcpIHtcblx0XHRcdC8vIEJVSUxEIEFOIE9CSkVDVCBPRiBBQkMgTk9URSA9PiBNSURJIE5PVEVcblx0XHRcdGlmIChtaWRpLmxlbmd0aCA9PT0gMiAmJiBtaWRpWzBdLnR5cGUgPT09ICdhbHBoYScgJiYgbWlkaVsxXS50eXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRpZiAoIXR1bmUuZm9ybWF0dGluZykgdHVuZS5mb3JtYXR0aW5nID0ge307XG5cdFx0XHRcdGlmICghdHVuZS5mb3JtYXR0aW5nLm1pZGkpIHR1bmUuZm9ybWF0dGluZy5taWRpID0ge307XG5cdFx0XHRcdGlmICghdHVuZS5mb3JtYXR0aW5nLm1pZGkuZHJ1bW1hcCkgdHVuZS5mb3JtYXR0aW5nLm1pZGkuZHJ1bW1hcCA9IHt9O1xuXHRcdFx0XHR0dW5lLmZvcm1hdHRpbmcubWlkaS5kcnVtbWFwW21pZGlbMF0udG9rZW5dID0gbWlkaVsxXS5pbnR0O1xuXHRcdFx0XHRtaWRpX3BhcmFtcyA9IHR1bmUuZm9ybWF0dGluZy5taWRpLmRydW1tYXA7XG5cdFx0XHR9IGVsc2UgaWYgKG1pZGkubGVuZ3RoID09PSAzICYmIG1pZGlbMF0udHlwZSA9PT0gJ3B1bmN0JyAmJiBtaWRpWzFdLnR5cGUgPT09ICdhbHBoYScgJiYgbWlkaVsyXS50eXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRpZiAoIXR1bmUuZm9ybWF0dGluZykgdHVuZS5mb3JtYXR0aW5nID0ge307XG5cdFx0XHRcdGlmICghdHVuZS5mb3JtYXR0aW5nLm1pZGkpIHR1bmUuZm9ybWF0dGluZy5taWRpID0ge307XG5cdFx0XHRcdGlmICghdHVuZS5mb3JtYXR0aW5nLm1pZGkuZHJ1bW1hcCkgdHVuZS5mb3JtYXR0aW5nLm1pZGkuZHJ1bW1hcCA9IHt9O1xuXHRcdFx0XHR0dW5lLmZvcm1hdHRpbmcubWlkaS5kcnVtbWFwW21pZGlbMF0udG9rZW4rbWlkaVsxXS50b2tlbl0gPSBtaWRpWzJdLmludHQ7XG5cdFx0XHRcdG1pZGlfcGFyYW1zID0gdHVuZS5mb3JtYXR0aW5nLm1pZGkuZHJ1bW1hcDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCBvbmUgbm90ZSBuYW1lIGFuZCBvbmUgaW50ZWdlciBwYXJhbWV0ZXIgaW4gTUlESSBcIiArIG1pZGlfY21kLCByZXN0T2ZTdHJpbmcsIDApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAobWlkaUNtZFBhcmFtRnJhY3Rpb24uaW5kZXhPZihtaWRpX2NtZCkgPj0gMCkge1xuXHRcdFx0Ly8gT05FIEZSQUNUSU9OIFBBUkFNRVRFUlxuXHRcdFx0aWYgKG1pZGkubGVuZ3RoICE9PSAzKVxuXHRcdFx0XHR3YXJuKFwiRXhwZWN0ZWQgZnJhY3Rpb24gcGFyYW1ldGVyIGluIE1JREkgXCIgKyBtaWRpX2NtZCwgcmVzdE9mU3RyaW5nLCAwKTtcblx0XHRcdGVsc2UgaWYgKG1pZGlbMF0udHlwZSAhPT0gXCJudW1iZXJcIiB8fCBtaWRpWzFdLnRva2VuICE9PSBcIi9cIiB8fCBtaWRpWzJdLnR5cGUgIT09IFwibnVtYmVyXCIpXG5cdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCBmcmFjdGlvbiBwYXJhbWV0ZXIgaW4gTUlESSBcIiArIG1pZGlfY21kLCByZXN0T2ZTdHJpbmcsIDApO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdG1pZGlfcGFyYW1zLnB1c2gobWlkaVswXS5pbnR0KTtcblx0XHRcdFx0bWlkaV9wYXJhbXMucHVzaChtaWRpWzJdLmludHQpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAobWlkaUNtZFBhcmFtNEludGVnZXIuaW5kZXhPZihtaWRpX2NtZCkgPj0gMCkge1xuXHRcdFx0Ly8gRk9VUiBJTlQgUEFSQU1FVEVSU1xuXHRcdFx0aWYgKG1pZGkubGVuZ3RoICE9PSA0KVxuXHRcdFx0XHR3YXJuKFwiRXhwZWN0ZWQgZm91ciBwYXJhbWV0ZXJzIGluIE1JREkgXCIgKyBtaWRpX2NtZCwgcmVzdE9mU3RyaW5nLCAwKTtcblx0XHRcdGVsc2UgaWYgKG1pZGlbMF0udHlwZSAhPT0gXCJudW1iZXJcIiB8fCBtaWRpWzFdLnR5cGUgIT09IFwibnVtYmVyXCIgfHwgbWlkaVsyXS50eXBlICE9PSBcIm51bWJlclwiIHx8IG1pZGlbM10udHlwZSAhPT0gXCJudW1iZXJcIilcblx0XHRcdFx0d2FybihcIkV4cGVjdGVkIGZvdXIgaW50ZWdlciBwYXJhbWV0ZXJzIGluIE1JREkgXCIgKyBtaWRpX2NtZCwgcmVzdE9mU3RyaW5nLCAwKTtcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRtaWRpX3BhcmFtcy5wdXNoKG1pZGlbMF0uaW50dCk7XG5cdFx0XHRcdG1pZGlfcGFyYW1zLnB1c2gobWlkaVsxXS5pbnR0KTtcblx0XHRcdFx0bWlkaV9wYXJhbXMucHVzaChtaWRpWzJdLmludHQpO1xuXHRcdFx0XHRtaWRpX3BhcmFtcy5wdXNoKG1pZGlbM10uaW50dCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChtaWRpQ21kUGFyYW01SW50ZWdlci5pbmRleE9mKG1pZGlfY21kKSA+PSAwKSB7XG5cdFx0XHQvLyBGSVZFIElOVCBQQVJBTUVURVJTXG5cdFx0XHRpZiAobWlkaS5sZW5ndGggIT09IDUpXG5cdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCBmaXZlIHBhcmFtZXRlcnMgaW4gTUlESSBcIiArIG1pZGlfY21kLCByZXN0T2ZTdHJpbmcsIDApO1xuXHRcdFx0ZWxzZSBpZiAobWlkaVswXS50eXBlICE9PSBcIm51bWJlclwiIHx8IG1pZGlbMV0udHlwZSAhPT0gXCJudW1iZXJcIiB8fCBtaWRpWzJdLnR5cGUgIT09IFwibnVtYmVyXCIgfHwgbWlkaVszXS50eXBlICE9PSBcIm51bWJlclwiIHx8IG1pZGlbNF0udHlwZSAhPT0gXCJudW1iZXJcIilcblx0XHRcdFx0d2FybihcIkV4cGVjdGVkIGZpdmUgaW50ZWdlciBwYXJhbWV0ZXJzIGluIE1JREkgXCIgKyBtaWRpX2NtZCwgcmVzdE9mU3RyaW5nLCAwKTtcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRtaWRpX3BhcmFtcy5wdXNoKG1pZGlbMF0uaW50dCk7XG5cdFx0XHRcdG1pZGlfcGFyYW1zLnB1c2gobWlkaVsxXS5pbnR0KTtcblx0XHRcdFx0bWlkaV9wYXJhbXMucHVzaChtaWRpWzJdLmludHQpO1xuXHRcdFx0XHRtaWRpX3BhcmFtcy5wdXNoKG1pZGlbM10uaW50dCk7XG5cdFx0XHRcdG1pZGlfcGFyYW1zLnB1c2gobWlkaVs0XS5pbnR0KTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKG1pZGlDbWRQYXJhbTFJbnRlZ2VyMU9wdGlvbmFsSW50ZWdlci5pbmRleE9mKG1pZGlfY21kKSA+PSAwKSB7XG5cdFx0XHQvLyBPTkUgSU5UIFBBUkFNRVRFUiwgT05FIE9QVElPTkFMIE9DVEFWRSBQQVJBTUVURVJcblx0XHRcdGlmIChtaWRpLmxlbmd0aCAhPT0gMSB8fCBtaWRpLmxlbmd0aCAhPT0gNClcblx0XHRcdFx0d2FybihcIkV4cGVjdGVkIG9uZSBvciB0d28gcGFyYW1ldGVycyBpbiBNSURJIFwiICsgbWlkaV9jbWQsIHJlc3RPZlN0cmluZywgMCk7XG5cdFx0XHRlbHNlIGlmIChtaWRpWzBdLnR5cGUgIT09IFwibnVtYmVyXCIpXG5cdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCBpbnRlZ2VyIHBhcmFtZXRlciBpbiBNSURJIFwiICsgbWlkaV9jbWQsIHJlc3RPZlN0cmluZywgMCk7XG5cdFx0XHRlbHNlIGlmIChtaWRpLmxlbmd0aCA9PT0gNCkge1xuXHRcdFx0XHRpZiAobWlkaVsxXS50b2tlbiAhPT0gXCJvY3RhdmVcIilcblx0XHRcdFx0XHR3YXJuKFwiRXhwZWN0ZWQgb2N0YXZlIHBhcmFtZXRlciBpbiBNSURJIFwiICsgbWlkaV9jbWQsIHJlc3RPZlN0cmluZywgMCk7XG5cdFx0XHRcdGlmIChtaWRpWzJdLnRva2VuICE9PSBcIj1cIilcblx0XHRcdFx0XHR3YXJuKFwiRXhwZWN0ZWQgb2N0YXZlIHBhcmFtZXRlciBpbiBNSURJIFwiICsgbWlkaV9jbWQsIHJlc3RPZlN0cmluZywgMCk7XG5cdFx0XHRcdGlmIChtaWRpWzNdLnR5cGUgIT09IFwibnVtYmVyXCIpXG5cdFx0XHRcdFx0d2FybihcIkV4cGVjdGVkIGludGVnZXIgcGFyYW1ldGVyIGZvciBvY3RhdmUgaW4gTUlESSBcIiArIG1pZGlfY21kLCByZXN0T2ZTdHJpbmcsIDApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bWlkaV9wYXJhbXMucHVzaChtaWRpWzBdLmludHQpO1xuXHRcdFx0XHRpZiAobWlkaS5sZW5ndGggPT09IDQpXG5cdFx0XHRcdFx0bWlkaV9wYXJhbXMucHVzaChtaWRpWzNdLmludHQpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAobWlkaUNtZFBhcmFtMVN0cmluZ1ZhcmlhYmxlSW50ZWdlcnMuaW5kZXhPZihtaWRpX2NtZCkgPj0gMCkge1xuXHRcdFx0Ly8gT05FIFNUUklORywgVkFSSUFCTEUgSU5UIFBBUkFNRVRFUlNcblx0XHRcdGlmIChtaWRpLmxlbmd0aCA8IDIpXG5cdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCBzdHJpbmcgcGFyYW1ldGVyIGFuZCBhdCBsZWFzdCBvbmUgaW50ZWdlciBwYXJhbWV0ZXIgaW4gTUlESSBcIiArIG1pZGlfY21kLCByZXN0T2ZTdHJpbmcsIDApO1xuXHRcdFx0ZWxzZSBpZiAobWlkaVswXS50eXBlICE9PSBcImFscGhhXCIpXG5cdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCBzdHJpbmcgcGFyYW1ldGVyIGFuZCBhdCBsZWFzdCBvbmUgaW50ZWdlciBwYXJhbWV0ZXIgaW4gTUlESSBcIiArIG1pZGlfY21kLCByZXN0T2ZTdHJpbmcsIDApO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHZhciBwID0gbWlkaS5zaGlmdCgpO1xuXHRcdFx0XHRtaWRpX3BhcmFtcy5wdXNoKHAudG9rZW4pO1xuXHRcdFx0XHR3aGlsZSAobWlkaS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0cCA9IG1pZGkuc2hpZnQoKTtcblx0XHRcdFx0XHRpZiAocC50eXBlICE9PSBcIm51bWJlclwiKVxuXHRcdFx0XHRcdFx0d2FybihcIkV4cGVjdGVkIGludGVnZXIgcGFyYW1ldGVyIGluIE1JREkgXCIgKyBtaWRpX2NtZCwgcmVzdE9mU3RyaW5nLCAwKTtcblx0XHRcdFx0XHRtaWRpX3BhcmFtcy5wdXNoKHAuaW50dCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdCAgICBlbHNlIGlmIChtaWRpQ21kUGFyYW0xSW50ZWdlcjFPcHRpb25hbFN0cmluZy5pbmRleE9mKG1pZGlfY21kKSA+PSAwKXtcblxuXHQgICAgICAvLyBPTkUgSU5UIFBBUkFNRVRFUiwgT05FIE9QVElPTkFMIHN0cmluZ1xuXHQgICAgXHRpZiAobWlkaS5sZW5ndGggIT09IDEgJiYgbWlkaS5sZW5ndGggIT09IDIpIFxuXHRcdFx0XHR3YXJuKFwiRXhwZWN0ZWQgb25lIG9yIHR3byBwYXJhbWV0ZXJzIGluIE1JREkgXCIgKyBtaWRpX2NtZCwgcmVzdE9mU3RyaW5nLCAwKTtcblx0XHRcdGVsc2UgaWYgKG1pZGlbMF0udHlwZSAhPT0gXCJudW1iZXJcIikgXG5cdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCBpbnRlZ2VyIHBhcmFtZXRlciBpbiBNSURJIFwiICsgbWlkaV9jbWQsIHJlc3RPZlN0cmluZywgMCk7XG5cdFx0XHRlbHNlIGlmIChtaWRpLmxlbmd0aCA9PT0gMiAmJiBtaWRpWzFdLnR5cGUgIT09IFwiYWxwaGFcIikgXG5cdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCBhbHBoYSBwYXJhbWV0ZXIgaW4gTUlESSBcIiArIG1pZGlfY21kLCByZXN0T2ZTdHJpbmcsIDApO1xuXHRcdFx0ZWxzZSB7XG5cdCAgICAgICAgXHRtaWRpX3BhcmFtcy5wdXNoKG1pZGlbMF0uaW50dCk7XG5cblx0ICAgICAgICAvLyBDdXJyZW50bHkgb25seSBiYXNzcHJvZyBhbmQgY2hvcmRwcm9nIHdpdGggb3B0aW9uYWwgb2N0YXZlIHNoaWZ0cyB1c2UgdGhpcyBwYXRoXG5cdCAgICAgICAgaWYgKG1pZGkubGVuZ3RoID09PSAyKXtcblx0ICAgICAgICAgIHZhciBjbWQgPSBtaWRpWzFdLnRva2VuO1xuXHQgICAgICAgICAgaWYgKGNtZC5pbmRleE9mKFwib2N0YXZlPVwiKSAhPSAtMSl7XG5cdCAgICAgICAgICAgIGNtZCA9IGNtZC5yZXBsYWNlKFwib2N0YXZlPVwiLFwiXCIpO1xuXHQgICAgICAgICAgICBjbWQgPSBwYXJzZUludChjbWQpO1xuXHQgICAgICAgICAgICBpZiAoIWlzTmFOKGNtZCkpe1xuXHQgICAgICAgICAgICAgIC8vIExpbWl0IHJhbmdlIGZyb20gLTEgdG8gMyBvY3RhdmVzXG5cdCAgICAgICAgICAgICAgaWYgKGNtZCA8IC0xKXtcblx0XHRcdFx0XHR3YXJuKFwiRXhwZWN0ZWQgb2N0YXZlPSBpbiBNSURJIFwiICsgbWlkaV9jbWQgKyAnIHRvIGJlID49IC0xIChyZWN2OicrY21kKycpJyk7XG5cdCAgICAgICAgICAgICAgICBjbWQgPSAtMTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgaWYgKGNtZCA+IDMpe1xuXHRcdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCBvY3RhdmU9IGluIE1JREkgXCIgKyBtaWRpX2NtZCArICcgdG8gYmUgPD0gMyAocmVjdjonK2NtZCsnKScpO1xuXHQgICAgICAgICAgICAgICAgY21kID0gMztcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgbWlkaV9wYXJhbXMucHVzaChjbWQpO1xuXHQgICAgICAgICAgICB9IGVsc2Vcblx0ICAgICAgICAgICAgd2FybihcIkV4cGVjdGVkIG9jdGF2ZSB2YWx1ZSBpbiBNSURJXCIgKyBtaWRpX2NtZCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBlbHNle1xuXHQgICAgICAgICAgICB3YXJuKFwiRXhwZWN0ZWQgb2N0YXZlPSBpbiBNSURJXCIgKyBtaWRpX2NtZCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cblx0XHRpZiAodHVuZUJ1aWxkZXIuaGFzQmVnaW5NdXNpYygpKVxuXHRcdFx0dHVuZUJ1aWxkZXIuYXBwZW5kRWxlbWVudCgnbWlkaScsIC0xLCAtMSwgeyBjbWQ6IG1pZGlfY21kLCBwYXJhbXM6IG1pZGlfcGFyYW1zIH0pO1xuXHRcdGVsc2Uge1xuXHRcdFx0aWYgKHR1bmUuZm9ybWF0dGluZ1snbWlkaSddID09PSB1bmRlZmluZWQpXG5cdFx0XHRcdHR1bmUuZm9ybWF0dGluZ1snbWlkaSddID0ge307XG5cdFx0XHR0dW5lLmZvcm1hdHRpbmdbJ21pZGknXVttaWRpX2NtZF0gPSBtaWRpX3BhcmFtcztcblx0XHR9XG5cdH07XG5cblx0cGFyc2VEaXJlY3RpdmUucGFyc2VGb250Q2hhbmdlTGluZSA9IGZ1bmN0aW9uKHRleHRzdHIpIHtcblx0XHQvLyBXZSBkb24ndCB3YW50IHRvIG1hdGNoIHR3byBkb2xsYXIgc2lnbnMsIHNvIGNoYW5nZSB0aG9zZSB0ZW1wb3JhcmlseVxuXHRcdHRleHRzdHIgPSB0ZXh0c3RyLnJlcGxhY2UoL1xcJFxcJC9nLFwiXFx4MDNcIilcblx0XHR2YXIgdGV4dFBhcnRzID0gdGV4dHN0ci5zcGxpdCgnJCcpO1xuXHRcdGlmICh0ZXh0UGFydHMubGVuZ3RoID4gMSAmJiBtdWx0aWxpbmVWYXJzLnNldGZvbnQpIHtcblx0XHRcdHZhciB0ZXh0YXJyID0gWyBdO1xuXHRcdFx0aWYgKHRleHRQYXJ0c1swXSAhPT0gJycpIC8vIGRpZCB0aGUgb3JpZ2luYWwgc3RyaW5nIHN0YXJ0IHdpdGggYCRgP1xuXHRcdFx0XHR0ZXh0YXJyLnB1c2goeyB0ZXh0OiB0ZXh0UGFydHNbMF0gfSlcblx0XHRcdGZvciAodmFyIGkgPSAxOyBpIDwgdGV4dFBhcnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmICh0ZXh0UGFydHNbaV1bMF0gPT09ICcwJylcblx0XHRcdFx0XHR0ZXh0YXJyLnB1c2goeyB0ZXh0OiB0ZXh0UGFydHNbaV0uc3Vic3RyaW5nKDEpLnJlcGxhY2UoL1xceDAzL2csXCIkJFwiKSB9KTtcblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0dmFyIHdoaWNoRm9udCA9IHBhcnNlSW50KHRleHRQYXJ0c1tpXVswXSwxMClcblx0XHRcdFx0XHRpZiAobXVsdGlsaW5lVmFycy5zZXRmb250W3doaWNoRm9udF0pXG5cdFx0XHRcdFx0XHR0ZXh0YXJyLnB1c2goe2ZvbnQ6IG11bHRpbGluZVZhcnMuc2V0Zm9udFt3aGljaEZvbnRdLCB0ZXh0OiB0ZXh0UGFydHNbaV0uc3Vic3RyaW5nKDEpLnJlcGxhY2UoL1xceDAzL2csXCIkJFwiKSB9KTtcblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHR0ZXh0YXJyW3RleHRhcnIubGVuZ3RoLTFdLnRleHQgKz0gJyQnICsgdGV4dFBhcnRzW2ldLnJlcGxhY2UoL1xceDAzL2csXCIkJFwiKTtcblx0XHRcdFx0fVx0XHRcdFx0XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGV4dGFycjtcblx0XHR9XG5cdFx0cmV0dXJuIHRleHRzdHIucmVwbGFjZSgvXFx4MDMvZyxcIiQkXCIpO1xuXHR9O1xuXG5cdHZhciBwb3NpdGlvbkNob2ljZXMgPSBbICdhdXRvJywgJ2Fib3ZlJywgJ2JlbG93JywgJ2hpZGRlbicgXTtcblx0cGFyc2VEaXJlY3RpdmUuYWRkRGlyZWN0aXZlID0gZnVuY3Rpb24oc3RyKSB7XG5cdFx0dmFyIHRva2VucyA9IHRva2VuaXplci50b2tlbml6ZShzdHIsIDAsIHN0ci5sZW5ndGgpO1x0Ly8gMyBvciBtb3JlICUgaW4gYSByb3csIG9yIGp1c3Qgc3BhY2VzIGFmdGVyICUlIGlzIGp1c3QgYSBjb21tZW50XG5cdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDAgfHwgdG9rZW5zWzBdLnR5cGUgIT09ICdhbHBoYScpIHJldHVybiBudWxsO1xuXHRcdHZhciByZXN0T2ZTdHJpbmcgPSBzdHIuc3Vic3RyaW5nKHN0ci5pbmRleE9mKHRva2Vuc1swXS50b2tlbikrdG9rZW5zWzBdLnRva2VuLmxlbmd0aCk7XG5cdFx0cmVzdE9mU3RyaW5nID0gdG9rZW5pemVyLnN0cmlwQ29tbWVudChyZXN0T2ZTdHJpbmcpO1xuXHRcdHZhciBjbWQgPSB0b2tlbnMuc2hpZnQoKS50b2tlbi50b0xvd2VyQ2FzZSgpO1xuXHRcdHZhciBzY3JhdGNoID0gXCJcIjtcblx0XHR2YXIgbGluZTtcblx0XHRzd2l0Y2ggKGNtZClcblx0XHR7XG5cdFx0XHQvLyBUaGUgZm9sbG93aW5nIGRpcmVjdGl2ZXMgd2VyZSBhZGRlZCB0byBhYmNfcGFyc2VyX2xpbnQsIGJ1dCBoYXZlbid0IGJlZW4gaW1wbGVtZW50ZWQgaGVyZS5cblx0XHRcdC8vIE1vc3Qgb2YgdGhlbSBhcmUgZGlyZWN0IHRyYW5zbGF0aW9ucyBmcm9tIHRoZSBkaXJlY3RpdmVzIHRoYXQgd2lsbCBiZSBwYXJzZWQgaW4uIFNlZSBhYmNtMnBzJ3MgZm9ybWF0LnR4dCBmb3IgaW5mbyBvbiBlYWNoIG9mIHRoZXNlLlxuXHRcdFx0Ly9cdFx0XHRcdFx0YWxpZ25iYXJzOiB7IHR5cGU6IFwibnVtYmVyXCIsIG9wdGlvbmFsOiB0cnVlIH0sXG5cdFx0XHQvL1x0XHRcdFx0XHRhbGlnbmNvbXBvc2VyOiB7IHR5cGU6IFwic3RyaW5nXCIsIEVudW06IFsgJ2xlZnQnLCAnY2VudGVyJywncmlnaHQnIF0sIG9wdGlvbmFsOiB0cnVlIH0sXG5cdFx0XHQvL1x0XHRcdFx0XHRic3RlbWRvd246IHsgdHlwZTogXCJib29sZWFuXCIsIG9wdGlvbmFsOiB0cnVlIH0sXG5cdFx0XHQvL1x0XHRcdFx0XHRjb250aW51ZWFsbDogeyB0eXBlOiBcImJvb2xlYW5cIiwgb3B0aW9uYWw6IHRydWUgfSxcblx0XHRcdC8vXHRcdFx0XHRcdGR5bmFsaWduOiB7IHR5cGU6IFwiYm9vbGVhblwiLCBvcHRpb25hbDogdHJ1ZSB9LFxuXHRcdFx0Ly9cdFx0XHRcdFx0ZXhwcmFib3ZlOiB7IHR5cGU6IFwiYm9vbGVhblwiLCBvcHRpb25hbDogdHJ1ZSB9LFxuXHRcdFx0Ly9cdFx0XHRcdFx0ZXhwcmJlbG93OiB7IHR5cGU6IFwiYm9vbGVhblwiLCBvcHRpb25hbDogdHJ1ZSB9LFxuXHRcdFx0Ly9cdFx0XHRcdFx0Z2Nob3JkYm94OiB7IHR5cGU6IFwiYm9vbGVhblwiLCBvcHRpb25hbDogdHJ1ZSB9LFxuXHRcdFx0Ly9cdFx0XHRcdFx0Z3JhY2VzcGFjZWJlZm9yZTogeyB0eXBlOiBcIm51bWJlclwiLCBvcHRpb25hbDogdHJ1ZSB9LFxuXHRcdFx0Ly9cdFx0XHRcdFx0Z3JhY2VzcGFjZWluc2lkZTogeyB0eXBlOiBcIm51bWJlclwiLCBvcHRpb25hbDogdHJ1ZSB9LFxuXHRcdFx0Ly9cdFx0XHRcdFx0Z3JhY2VzcGFjZWFmdGVyOiB7IHR5cGU6IFwibnVtYmVyXCIsIG9wdGlvbmFsOiB0cnVlIH0sXG5cdFx0XHQvL1x0XHRcdFx0XHRpbmZvc3BhY2U6IHsgdHlwZTogXCJudW1iZXJcIiwgb3B0aW9uYWw6IHRydWUgfSxcblx0XHRcdC8vXHRcdFx0XHRcdGxpbmVza2lwZmFjOiB7IHR5cGU6IFwibnVtYmVyXCIsIG9wdGlvbmFsOiB0cnVlIH0sXG5cdFx0XHQvL1x0XHRcdFx0XHRtYXhzaHJpbms6IHsgdHlwZTogXCJudW1iZXJcIiwgb3B0aW9uYWw6IHRydWUgfSxcblx0XHRcdC8vXHRcdFx0XHRcdG1heHN0YWZmc2VwOiB7IHR5cGU6IFwibnVtYmVyXCIsIG9wdGlvbmFsOiB0cnVlIH0sXG5cdFx0XHQvL1x0XHRcdFx0XHRtYXhzeXNzdGFmZnNlcDogeyB0eXBlOiBcIm51bWJlclwiLCBvcHRpb25hbDogdHJ1ZSB9LFxuXHRcdFx0Ly9cdFx0XHRcdFx0bm90ZXNwYWNpbmdmYWN0b3I6IHsgdHlwZTogXCJudW1iZXJcIiwgb3B0aW9uYWw6IHRydWUgfSxcblx0XHRcdC8vXHRcdFx0XHRcdHBhcnNraXBmYWM6IHsgdHlwZTogXCJudW1iZXJcIiwgb3B0aW9uYWw6IHRydWUgfSxcblx0XHRcdC8vXHRcdFx0XHRcdHNsdXJoZWlnaHQ6IHsgdHlwZTogXCJudW1iZXJcIiwgb3B0aW9uYWw6IHRydWUgfSxcblx0XHRcdC8vXHRcdFx0XHRcdHNwbGl0dHVuZTogeyB0eXBlOiBcImJvb2xlYW5cIiwgb3B0aW9uYWw6IHRydWUgfSxcblx0XHRcdC8vXHRcdFx0XHRcdHNxdWFyZWJyZXZlOiB7IHR5cGU6IFwiYm9vbGVhblwiLCBvcHRpb25hbDogdHJ1ZSB9LFxuXHRcdFx0Ly9cdFx0XHRcdFx0c3RlbWhlaWdodDogeyB0eXBlOiBcIm51bWJlclwiLCBvcHRpb25hbDogdHJ1ZSB9LFxuXHRcdFx0Ly9cdFx0XHRcdFx0c3RyYWlnaHRmbGFnczogeyB0eXBlOiBcImJvb2xlYW5cIiwgb3B0aW9uYWw6IHRydWUgfSxcblx0XHRcdC8vXHRcdFx0XHRcdHN0cmV0Y2hzdGFmZjogeyB0eXBlOiBcImJvb2xlYW5cIiwgb3B0aW9uYWw6IHRydWUgfSxcblx0XHRcdC8vXHRcdFx0XHRcdHRpdGxlZm9ybWF0OiB7IHR5cGU6IFwic3RyaW5nXCIsIG9wdGlvbmFsOiB0cnVlIH0sXG5cdFx0XHRjYXNlIFwiYmFncGlwZXNcIjp0dW5lLmZvcm1hdHRpbmcuYmFncGlwZXMgPSB0cnVlO2JyZWFrO1xuXHRcdFx0Y2FzZSBcImZsYXRiZWFtc1wiOnR1bmUuZm9ybWF0dGluZy5mbGF0YmVhbXMgPSB0cnVlO2JyZWFrO1xuXHRcdFx0Y2FzZSBcImphenpjaG9yZHNcIjp0dW5lLmZvcm1hdHRpbmcuamF6emNob3JkcyA9IHRydWU7YnJlYWs7XG5cdFx0XHRjYXNlIFwiYWNjZW50QWJvdmVcIjp0dW5lLmZvcm1hdHRpbmcuYWNjZW50QWJvdmUgPSB0cnVlO2JyZWFrO1xuXHRcdFx0Y2FzZSBcImdlcm1hbkFscGhhYmV0XCI6dHVuZS5mb3JtYXR0aW5nLmdlcm1hbkFscGhhYmV0ID0gdHJ1ZTticmVhaztcblx0XHRcdGNhc2UgXCJsYW5kc2NhcGVcIjptdWx0aWxpbmVWYXJzLmxhbmRzY2FwZSA9IHRydWU7YnJlYWs7XG5cdFx0XHRjYXNlIFwicGFwZXJzaXplXCI6bXVsdGlsaW5lVmFycy5wYXBlcnNpemUgPSByZXN0T2ZTdHJpbmc7YnJlYWs7XG5cdFx0XHRjYXNlIFwiZ3JhY2VzbHVyc1wiOlxuXHRcdFx0XHRpZiAodG9rZW5zLmxlbmd0aCAhPT0gMSlcblx0XHRcdFx0XHRyZXR1cm4gXCJEaXJlY3RpdmUgZ3JhY2VzbHVycyByZXF1aXJlcyBvbmUgcGFyYW1ldGVyOiAwIG9yIDFcIjtcblx0XHRcdFx0aWYgKHRva2Vuc1swXS50b2tlbiA9PT0gJzAnIHx8IHRva2Vuc1swXS50b2tlbiA9PT0gJ2ZhbHNlJylcblx0XHRcdFx0XHR0dW5lLmZvcm1hdHRpbmcuZ3JhY2VTbHVycyA9IGZhbHNlO1xuXHRcdFx0XHRlbHNlIGlmICh0b2tlbnNbMF0udG9rZW4gPT09ICcxJyB8fCB0b2tlbnNbMF0udG9rZW4gPT09ICd0cnVlJylcblx0XHRcdFx0XHR0dW5lLmZvcm1hdHRpbmcuZ3JhY2VTbHVycyA9IHRydWU7XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRyZXR1cm4gXCJEaXJlY3RpdmUgZ3JhY2VzbHVycyByZXF1aXJlcyBvbmUgcGFyYW1ldGVyOiAwIG9yIDEgKHJlY2VpdmVkIFwiICsgdG9rZW5zWzBdLnRva2VuICsgJyknO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJsaW5lVGhpY2tuZXNzXCI6XG5cdFx0XHRcdHZhciBsdCA9IHBhcnNlU3RyZXRjaExhc3QodG9rZW5zKTtcblx0XHRcdFx0aWYgKGx0LnZhbHVlICE9PSB1bmRlZmluZWQpXG5cdFx0XHRcdFx0dHVuZS5mb3JtYXR0aW5nLmxpbmVUaGlja25lc3MgPSBsdC52YWx1ZTtcblx0XHRcdFx0aWYgKGx0LmVycm9yKVxuXHRcdFx0XHRcdHJldHVybiBsdC5lcnJvcjtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwic3RyZXRjaGxhc3RcIjpcblx0XHRcdFx0dmFyIHNsID0gcGFyc2VTdHJldGNoTGFzdCh0b2tlbnMpO1xuXHRcdFx0XHRpZiAoc2wudmFsdWUgIT09IHVuZGVmaW5lZClcblx0XHRcdFx0XHR0dW5lLmZvcm1hdHRpbmcuc3RyZXRjaGxhc3QgPSBzbC52YWx1ZTtcblx0XHRcdFx0aWYgKHNsLmVycm9yKVxuXHRcdFx0XHRcdHJldHVybiBzbC5lcnJvcjtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwidGl0bGVjYXBzXCI6bXVsdGlsaW5lVmFycy50aXRsZWNhcHMgPSB0cnVlO2JyZWFrO1xuXHRcdFx0Y2FzZSBcInRpdGxlbGVmdFwiOnR1bmUuZm9ybWF0dGluZy50aXRsZWxlZnQgPSB0cnVlO2JyZWFrO1xuXHRcdFx0Y2FzZSBcIm1lYXN1cmVib3hcIjp0dW5lLmZvcm1hdHRpbmcubWVhc3VyZWJveCA9IHRydWU7YnJlYWs7XG5cblx0XHRcdGNhc2UgXCJ2b2NhbFwiOiByZXR1cm4gYWRkTXVsdGlsaW5lVmFyT25lUGFyYW1DaG9pY2UoXCJ2b2NhbFBvc2l0aW9uXCIsIGNtZCwgdG9rZW5zLCBwb3NpdGlvbkNob2ljZXMpO1xuXHRcdFx0Y2FzZSBcImR5bmFtaWNcIjogcmV0dXJuIGFkZE11bHRpbGluZVZhck9uZVBhcmFtQ2hvaWNlKFwiZHluYW1pY1Bvc2l0aW9uXCIsIGNtZCwgdG9rZW5zLCBwb3NpdGlvbkNob2ljZXMpO1xuXHRcdFx0Y2FzZSBcImdjaG9yZFwiOiByZXR1cm4gYWRkTXVsdGlsaW5lVmFyT25lUGFyYW1DaG9pY2UoXCJjaG9yZFBvc2l0aW9uXCIsIGNtZCwgdG9rZW5zLCBwb3NpdGlvbkNob2ljZXMpO1xuXHRcdFx0Y2FzZSBcIm9ybmFtZW50XCI6IHJldHVybiBhZGRNdWx0aWxpbmVWYXJPbmVQYXJhbUNob2ljZShcIm9ybmFtZW50UG9zaXRpb25cIiwgY21kLCB0b2tlbnMsIHBvc2l0aW9uQ2hvaWNlcyk7XG5cdFx0XHRjYXNlIFwidm9sdW1lXCI6IHJldHVybiBhZGRNdWx0aWxpbmVWYXJPbmVQYXJhbUNob2ljZShcInZvbHVtZVBvc2l0aW9uXCIsIGNtZCwgdG9rZW5zLCBwb3NpdGlvbkNob2ljZXMpO1xuXG5cdFx0XHRjYXNlIFwiYm90bWFyZ2luXCI6XG5cdFx0XHRjYXNlIFwiYm90c3BhY2VcIjpcblx0XHRcdGNhc2UgXCJjb21wb3NlcnNwYWNlXCI6XG5cdFx0XHRjYXNlIFwiaW5kZW50XCI6XG5cdFx0XHRjYXNlIFwibGVmdG1hcmdpblwiOlxuXHRcdFx0Y2FzZSBcImxpbmVzZXBcIjpcblx0XHRcdGNhc2UgXCJtdXNpY3NwYWNlXCI6XG5cdFx0XHRjYXNlIFwicGFydHNzcGFjZVwiOlxuXHRcdFx0Y2FzZSBcInBhZ2VoZWlnaHRcIjpcblx0XHRcdGNhc2UgXCJwYWdld2lkdGhcIjpcblx0XHRcdGNhc2UgXCJyaWdodG1hcmdpblwiOlxuXHRcdFx0Y2FzZSBcInN0YWZmdG9wbWFyZ2luXCI6XG5cdFx0XHRjYXNlIFwic3RhZmZzZXBcIjpcblx0XHRcdGNhc2UgXCJzdGFmZndpZHRoXCI6XG5cdFx0XHRjYXNlIFwic3VidGl0bGVzcGFjZVwiOlxuXHRcdFx0Y2FzZSBcInN5c3N0YWZmc2VwXCI6XG5cdFx0XHRjYXNlIFwic3lzdGVtc2VwXCI6XG5cdFx0XHRjYXNlIFwidGV4dHNwYWNlXCI6XG5cdFx0XHRjYXNlIFwidGl0bGVzcGFjZVwiOlxuXHRcdFx0Y2FzZSBcInRvcG1hcmdpblwiOlxuXHRcdFx0Y2FzZSBcInRvcHNwYWNlXCI6XG5cdFx0XHRjYXNlIFwidm9jYWxzcGFjZVwiOlxuXHRcdFx0Y2FzZSBcIndvcmRzc3BhY2VcIjpcblx0XHRcdFx0cmV0dXJuIG9uZVBhcmFtZXRlck1lYXN1cmVtZW50KGNtZCwgdG9rZW5zKTtcblx0XHRcdGNhc2UgXCJ2b2ljZXNjYWxlXCI6XG5cdFx0XHRcdGlmICh0b2tlbnMubGVuZ3RoICE9PSAxIHx8IHRva2Vuc1swXS50eXBlICE9PSAnbnVtYmVyJylcblx0XHRcdFx0XHRyZXR1cm4gXCJ2b2ljZXNjYWxlIHJlcXVpcmVzIG9uZSBmbG9hdCBhcyBhIHBhcmFtZXRlclwiO1xuXHRcdFx0XHR2YXIgdm9pY2VTY2FsZSA9IHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRpZiAobXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2UpIHtcblx0XHRcdFx0XHRtdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZS5zY2FsZSA9IHZvaWNlU2NhbGUuZmxvYXR0O1xuXHRcdFx0XHRcdHR1bmVCdWlsZGVyLmNoYW5nZVZvaWNlU2NhbGUobXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2Uuc2NhbGUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0Y2FzZSBcInZvaWNlY29sb3JcIjpcblx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggIT09IDEpIC8vIHRoaXMgY291bGQgZWl0aGVyIGJlIG9mIHR5cGUgYWxwaGEgb3IgcXVvdGUsIGJ1dCBpdCdzIG9rIGlmIGl0IGlzIGEgbnVtYmVyXG5cdFx0XHRcdFx0cmV0dXJuIFwidm9pY2Vjb2xvciByZXF1aXJlcyBvbmUgc3RyaW5nIGFzIGEgcGFyYW1ldGVyXCI7XG5cdFx0XHRcdHZhciB2b2ljZUNvbG9yID0gdG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdGlmIChtdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZSkge1xuXHRcdFx0XHRcdG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLmNvbG9yID0gdm9pY2VDb2xvci50b2tlbjtcblx0XHRcdFx0XHR0dW5lQnVpbGRlci5jaGFuZ2VWb2ljZUNvbG9yKG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLmNvbG9yKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdGNhc2UgXCJ2c2tpcFwiOlxuXHRcdFx0XHR2YXIgdnNraXAgPSBNYXRoLnJvdW5kKGdldFJlcXVpcmVkTWVhc3VyZW1lbnQoY21kLCB0b2tlbnMpKTtcblx0XHRcdFx0aWYgKHZza2lwLmVycm9yKVxuXHRcdFx0XHRcdHJldHVybiB2c2tpcC5lcnJvcjtcblx0XHRcdFx0dHVuZUJ1aWxkZXIuYWRkU3BhY2luZyh2c2tpcCk7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0Y2FzZSBcInNjYWxlXCI6XG5cdFx0XHRcdHNldFNjYWxlKGNtZCwgdG9rZW5zKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwic2VwXCI6XG5cdFx0XHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwKVxuXHRcdFx0XHRcdHR1bmVCdWlsZGVyLmFkZFNlcGFyYXRvcigxNCwxNCw4NSwgeyBzdGFydENoYXI6IG11bHRpbGluZVZhcnMuaUNoYXIsIGVuZENoYXI6IG11bHRpbGluZVZhcnMuaUNoYXIrNX0pOyAvLyBJZiBubyBwYXJhbWV0ZXJzIGFyZSBnaXZlbiwgdGhlbiB0aGVyZSBpcyBhIGRlZmF1bHQgc2l6ZS5cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0dmFyIHBvaW50cyA9IHRva2VuaXplci5nZXRNZWFzdXJlbWVudCh0b2tlbnMpO1xuXHRcdFx0XHRcdGlmIChwb2ludHMudXNlZCA9PT0gMClcblx0XHRcdFx0XHRcdHJldHVybiBcIkRpcmVjdGl2ZSBcXFwiXCIgKyBjbWQgKyBcIlxcXCIgcmVxdWlyZXMgMyBudW1iZXJzOiBzcGFjZSBhYm92ZSwgc3BhY2UgYmVsb3csIGxlbmd0aCBvZiBsaW5lXCI7XG5cdFx0XHRcdFx0dmFyIHNwYWNlQWJvdmUgPSBwb2ludHMudmFsdWU7XG5cblx0XHRcdFx0XHRwb2ludHMgPSB0b2tlbml6ZXIuZ2V0TWVhc3VyZW1lbnQodG9rZW5zKTtcblx0XHRcdFx0XHRpZiAocG9pbnRzLnVzZWQgPT09IDApXG5cdFx0XHRcdFx0XHRyZXR1cm4gXCJEaXJlY3RpdmUgXFxcIlwiICsgY21kICsgXCJcXFwiIHJlcXVpcmVzIDMgbnVtYmVyczogc3BhY2UgYWJvdmUsIHNwYWNlIGJlbG93LCBsZW5ndGggb2YgbGluZVwiO1xuXHRcdFx0XHRcdHZhciBzcGFjZUJlbG93ID0gcG9pbnRzLnZhbHVlO1xuXG5cdFx0XHRcdFx0cG9pbnRzID0gdG9rZW5pemVyLmdldE1lYXN1cmVtZW50KHRva2Vucyk7XG5cdFx0XHRcdFx0aWYgKHBvaW50cy51c2VkID09PSAwIHx8IHRva2Vucy5sZW5ndGggIT09IDApXG5cdFx0XHRcdFx0XHRyZXR1cm4gXCJEaXJlY3RpdmUgXFxcIlwiICsgY21kICsgXCJcXFwiIHJlcXVpcmVzIDMgbnVtYmVyczogc3BhY2UgYWJvdmUsIHNwYWNlIGJlbG93LCBsZW5ndGggb2YgbGluZVwiO1xuXHRcdFx0XHRcdHZhciBsZW5MaW5lID0gcG9pbnRzLnZhbHVlO1xuXHRcdFx0XHRcdHR1bmVCdWlsZGVyLmFkZFNlcGFyYXRvcihzcGFjZUFib3ZlLCBzcGFjZUJlbG93LCBsZW5MaW5lLCB7IHN0YXJ0Q2hhcjogbXVsdGlsaW5lVmFycy5pQ2hhciwgZW5kQ2hhcjogbXVsdGlsaW5lVmFycy5pQ2hhcityZXN0T2ZTdHJpbmcubGVuZ3RofSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiYmFyc3BlcnN0YWZmXCI6XG5cdFx0XHRcdHNjcmF0Y2ggPSBhZGRNdWx0aWxpbmVWYXIoJ2JhcnNwZXJzdGFmZicsIGNtZCwgdG9rZW5zKTtcblx0XHRcdFx0aWYgKHNjcmF0Y2ggIT09IG51bGwpIHJldHVybiBzY3JhdGNoO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJzdGFmZm5vbm90ZVwiOlxuXHRcdFx0XHQvLyBUaGUgc2Vuc2Ugb2YgdGhlIGJvb2xlYW4gaXMgb3Bwb3NpdGUgaGVyZS4gXCIwXCIgbWVhbnMgdHJ1ZS5cblx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggIT09IDEpXG5cdFx0XHRcdFx0cmV0dXJuIFwiRGlyZWN0aXZlIHN0YWZmbm9ub3RlIHJlcXVpcmVzIG9uZSBwYXJhbWV0ZXI6IDAgb3IgMVwiO1xuXHRcdFx0XHRpZiAodG9rZW5zWzBdLnRva2VuID09PSAnMCcpXG5cdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5zdGFmZm5vbm90ZSA9IHRydWU7XG5cdFx0XHRcdGVsc2UgaWYgKHRva2Vuc1swXS50b2tlbiA9PT0gJzEnKVxuXHRcdFx0XHRcdG11bHRpbGluZVZhcnMuc3RhZmZub25vdGUgPSBmYWxzZTtcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHJldHVybiBcIkRpcmVjdGl2ZSBzdGFmZm5vbm90ZSByZXF1aXJlcyBvbmUgcGFyYW1ldGVyOiAwIG9yIDEgKHJlY2VpdmVkIFwiICsgdG9rZW5zWzBdLnRva2VuICsgJyknO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJwcmludHRlbXBvXCI6XG5cdFx0XHRcdHNjcmF0Y2ggPSBhZGRNdWx0aWxpbmVWYXJCb29sKCdwcmludFRlbXBvJywgY21kLCB0b2tlbnMpO1xuXHRcdFx0XHRpZiAoc2NyYXRjaCAhPT0gbnVsbCkgcmV0dXJuIHNjcmF0Y2g7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcInBhcnRzYm94XCI6XG5cdFx0XHRcdHNjcmF0Y2ggPSBhZGRNdWx0aWxpbmVWYXJCb29sKCdwYXJ0c0JveCcsIGNtZCwgdG9rZW5zKTtcblx0XHRcdFx0aWYgKHNjcmF0Y2ggIT09IG51bGwpIHJldHVybiBzY3JhdGNoO1xuXHRcdFx0XHRtdWx0aWxpbmVWYXJzLnBhcnRzZm9udC5ib3ggPSBtdWx0aWxpbmVWYXJzLnBhcnRzQm94O1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJmcmVlZ2Nob3JkXCI6XG5cdFx0XHRcdHNjcmF0Y2ggPSBhZGRNdWx0aWxpbmVWYXJCb29sKCdmcmVlZ2Nob3JkJywgY21kLCB0b2tlbnMpO1xuXHRcdFx0XHRpZiAoc2NyYXRjaCAhPT0gbnVsbCkgcmV0dXJuIHNjcmF0Y2g7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcIm1lYXN1cmVuYlwiOlxuXHRcdFx0Y2FzZSBcImJhcm51bWJlcnNcIjpcblx0XHRcdFx0c2NyYXRjaCA9IGFkZE11bHRpbGluZVZhcignYmFyTnVtYmVycycsIGNtZCwgdG9rZW5zKTtcblx0XHRcdFx0aWYgKHNjcmF0Y2ggIT09IG51bGwpIHJldHVybiBzY3JhdGNoO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJzZXRiYXJuYlwiOlxuXHRcdFx0XHRpZiAodG9rZW5zLmxlbmd0aCAhPT0gMSB8fCB0b2tlbnNbMF0udHlwZSAhPT0gJ251bWJlcicpIHtcblx0XHRcdFx0XHRyZXR1cm4gJ0RpcmVjdGl2ZSBzZXRiYXJuYiByZXF1aXJlcyBhIG51bWJlciBhcyBhIHBhcmFtZXRlci4nO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG11bHRpbGluZVZhcnMuY3VyckJhck51bWJlciA9IHR1bmVCdWlsZGVyLnNldEJhck51bWJlckltbWVkaWF0ZSh0b2tlbnNbMF0uaW50dCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImtleXdhcm5cIjpcblx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggIT09IDEgfHwgdG9rZW5zWzBdLnR5cGUgIT09ICdudW1iZXInIHx8ICh0b2tlbnNbMF0uaW50dCAhPT0gMSAmJiB0b2tlbnNbMF0uaW50dCAhPT0gMCkpIHtcblx0XHRcdFx0XHRyZXR1cm4gJ0RpcmVjdGl2ZSAnICsgY21kICsgJyByZXF1aXJlcyAwIG9yIDEgYXMgYSBwYXJhbWV0ZXIuJztcblx0XHRcdFx0fVxuXHRcdFx0XHRtdWx0aWxpbmVWYXJzW2NtZF0gPSB0b2tlbnNbMF0uaW50dCA9PT0gMVxuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJiZWdpbnRleHRcIjpcblx0XHRcdFx0dmFyIHRleHRCbG9jayA9ICcnO1xuXHRcdFx0XHRsaW5lID0gdG9rZW5pemVyLm5leHRMaW5lKCk7XG5cdFx0XHRcdHdoaWxlKGxpbmUgJiYgbGluZS5pbmRleE9mKCclJWVuZHRleHQnKSAhPT0gMCkge1xuXHRcdCAgICAgICAgICAvLyBNQUUgOSBNYXkgMjAyNSAtIGZvciB0ZXh0IGJsb2NrcyB3aXRoIGp1c3Qgd2hpdGUgc3BhY2Vcblx0XHQgICAgICAgICAgaWYgKHBhcnNlQ29tbW9uLnN0YXJ0c1dpdGgobGluZSwgXCIlJVwiKSl7XG5cblx0XHQgICAgICAgICAgICB2YXIgdGhlTGluZSA9IGxpbmUuc3Vic3RyaW5nKDIpO1xuXHRcdCAgICAgICAgICAgIHRoZUxpbmUgPSB0aGVMaW5lLnRyaW0oKSArIFwiXFxuXCI7XG5cdFx0ICAgICAgICAgICAgdGV4dEJsb2NrICs9IHRoZUxpbmU7XG5cblx0XHQgICAgICAgICAgfVxuXHRcdCAgICAgICAgICBlbHNle1xuXHRcdCAgICAgICAgICAgIHRleHRCbG9jayArPSBsaW5lLnRyaW0oKSArIFwiXFxuXCI7XG5cdFx0ICAgICAgICAgIH1cblx0XHRcdFx0XHRsaW5lID0gdG9rZW5pemVyLm5leHRMaW5lKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dHVuZUJ1aWxkZXIuYWRkVGV4dCh0ZXh0QmxvY2ssIHsgc3RhcnRDaGFyOiBtdWx0aWxpbmVWYXJzLmlDaGFyLCBlbmRDaGFyOiBtdWx0aWxpbmVWYXJzLmlDaGFyK3RleHRCbG9jay5sZW5ndGgrN30pO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJjb250aW51ZWFsbFwiOlxuXHRcdFx0XHRtdWx0aWxpbmVWYXJzLmNvbnRpbnVlYWxsID0gdHJ1ZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiYmVnaW5wc1wiOlxuXHRcdFx0XHRsaW5lID0gdG9rZW5pemVyLm5leHRMaW5lKCk7XG5cdFx0XHRcdHdoaWxlKGxpbmUgJiYgbGluZS5pbmRleE9mKCclJWVuZHBzJykgIT09IDApIHtcblx0XHRcdFx0XHR0b2tlbml6ZXIubmV4dExpbmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR3YXJuKFwiUG9zdHNjcmlwdCBpZ25vcmVkXCIsIHN0ciwgMCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImRlY29cIjpcblx0XHRcdFx0aWYgKHJlc3RPZlN0cmluZy5sZW5ndGggPiAwKVxuXHRcdFx0XHRcdG11bHRpbGluZVZhcnMuaWdub3JlZERlY29yYXRpb25zLnB1c2gocmVzdE9mU3RyaW5nLnN1YnN0cmluZygwLCByZXN0T2ZTdHJpbmcuaW5kZXhPZignICcpKSk7XG5cdFx0XHRcdHdhcm4oXCJEZWNvcmF0aW9uIHJlZGVmaW5pdGlvbiBpZ25vcmVkXCIsIHN0ciwgMCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcInRleHRcIjpcblx0XHRcdFx0dmFyIHRleHRzdHIgPSB0b2tlbml6ZXIudHJhbnNsYXRlU3RyaW5nKHJlc3RPZlN0cmluZyk7XG5cdFx0XHRcdHR1bmVCdWlsZGVyLmFkZFRleHQocGFyc2VEaXJlY3RpdmUucGFyc2VGb250Q2hhbmdlTGluZSh0ZXh0c3RyKSwgeyBzdGFydENoYXI6IG11bHRpbGluZVZhcnMuaUNoYXIsIGVuZENoYXI6IG11bHRpbGluZVZhcnMuaUNoYXIrcmVzdE9mU3RyaW5nLmxlbmd0aCs3fSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImNlbnRlclwiOlxuXHRcdFx0XHR2YXIgY2VudGVyc3RyID0gdG9rZW5pemVyLnRyYW5zbGF0ZVN0cmluZyhyZXN0T2ZTdHJpbmcpO1xuXHRcdFx0XHR0dW5lQnVpbGRlci5hZGRDZW50ZXJlZChwYXJzZURpcmVjdGl2ZS5wYXJzZUZvbnRDaGFuZ2VMaW5lKGNlbnRlcnN0cikpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJmb250XCI6XG5cdFx0XHRcdC8vIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmcgZm9yIHRoaXM7IGl0IGlzIGEgdXNlbGVzcyBkaXJlY3RpdmVcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwic2V0Zm9udFwiOlxuXHRcdFx0XHR2YXIgc2ZUb2tlbnMgPSB0b2tlbml6ZXIudG9rZW5pemUocmVzdE9mU3RyaW5nLCAwLCByZXN0T2ZTdHJpbmcubGVuZ3RoKTtcbi8vXHRcdFx0XHR2YXIgc2ZEb25lID0gZmFsc2U7XG5cdFx0XHRcdGlmIChzZlRva2Vucy5sZW5ndGggPj0gNCkge1xuXHRcdFx0XHRcdGlmIChzZlRva2Vuc1swXS50b2tlbiA9PT0gJy0nICYmIHNmVG9rZW5zWzFdLnR5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdFx0XHR2YXIgc2ZOdW0gPSBwYXJzZUludChzZlRva2Vuc1sxXS50b2tlbik7XG5cdFx0XHRcdFx0XHRpZiAoc2ZOdW0gPj0gMSAmJiBzZk51bSA8PSA5KSB7XG5cdFx0XHRcdFx0XHRcdGlmICghbXVsdGlsaW5lVmFycy5zZXRmb250KVxuXHRcdFx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMuc2V0Zm9udCA9IFtdO1xuXHRcdFx0XHRcdFx0XHRzZlRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRcdFx0XHRzZlRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRcdFx0XHRtdWx0aWxpbmVWYXJzLnNldGZvbnRbc2ZOdW1dID0gZ2V0Rm9udFBhcmFtZXRlcihzZlRva2VucywgbXVsdGlsaW5lVmFycy5zZXRmb250W3NmTnVtXSwgc3RyLCAwLCAnc2V0Zm9udCcpO1xuLy9cdFx0XHRcdFx0XHRcdHZhciBzZlNpemUgPSBzZlRva2Vucy5wb3AoKTtcbi8vXHRcdFx0XHRcdFx0XHRpZiAoc2ZTaXplLnR5cGUgPT09ICdudW1iZXInKSB7XG4vL1x0XHRcdFx0XHRcdFx0XHRzZlNpemUgPSBwYXJzZUludChzZlNpemUudG9rZW4pO1xuLy9cdFx0XHRcdFx0XHRcdFx0dmFyIHNmRm9udE5hbWUgPSAnJztcbi8vXHRcdFx0XHRcdFx0XHRcdGZvciAodmFyIHNmaSA9IDI7IHNmaSA8IHNmVG9rZW5zLmxlbmd0aDsgc2ZpKyspXG4vL1x0XHRcdFx0XHRcdFx0XHRcdHNmRm9udE5hbWUgKz0gc2ZUb2tlbnNbc2ZpXS50b2tlbjtcbi8vXHRcdFx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMuc2V0Zm9udFtzZk51bV0gPSB7IGZhY2U6IHNmRm9udE5hbWUsIHNpemU6IHNmU2l6ZSB9O1xuLy9cdFx0XHRcdFx0XHRcdFx0c2ZEb25lID0gdHJ1ZTtcbi8vXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG4vL1x0XHRcdFx0aWYgKCFzZkRvbmUpXG4vL1x0XHRcdFx0XHRyZXR1cm4gXCJCYWQgcGFyYW1ldGVyczogXCIgKyBjbWQ7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImdjaG9yZGZvbnRcIjpcblx0XHRcdGNhc2UgXCJwYXJ0c2ZvbnRcIjpcblx0XHRcdGNhc2UgXCJ0cmlwbGV0Zm9udFwiOlxuXHRcdFx0Y2FzZSBcInZvY2FsZm9udFwiOlxuXHRcdFx0Y2FzZSBcInRleHRmb250XCI6XG5cdFx0XHRjYXNlIFwiYW5ub3RhdGlvbmZvbnRcIjpcblx0XHRcdGNhc2UgXCJoaXN0b3J5Zm9udFwiOlxuXHRcdFx0Y2FzZSBcImluZm9mb250XCI6XG5cdFx0XHRjYXNlIFwibWVhc3VyZWZvbnRcIjpcblx0XHRcdGNhc2UgXCJyZXBlYXRmb250XCI6XG5cdFx0XHRjYXNlIFwid29yZHNmb250XCI6XG5cdFx0XHRcdHJldHVybiBnZXRDaGFuZ2luZ0ZvbnQoY21kLCB0b2tlbnMsIHN0cik7XG5cdFx0XHRjYXNlIFwiY29tcG9zZXJmb250XCI6XG5cdFx0XHRjYXNlIFwic3VidGl0bGVmb250XCI6XG5cdFx0XHRjYXNlIFwidGVtcG9mb250XCI6XG5cdFx0XHRjYXNlIFwidGl0bGVmb250XCI6XG5cdFx0XHRjYXNlIFwidm9pY2Vmb250XCI6XG5cdFx0XHRjYXNlIFwiZm9vdGVyZm9udFwiOlxuXHRcdFx0Y2FzZSBcImhlYWRlcmZvbnRcIjpcblx0XHRcdFx0cmV0dXJuIGdldEdsb2JhbEZvbnQoY21kLCB0b2tlbnMsIHN0cik7XG5cdFx0XHRjYXNlIFwiYmFybGFiZWxmb250XCI6XG5cdFx0XHRjYXNlIFwiYmFybnVtYmVyZm9udFwiOlxuXHRcdFx0Y2FzZSBcImJhcm51bWZvbnRcIjpcblx0XHRcdFx0cmV0dXJuIGdldENoYW5naW5nRm9udChcIm1lYXN1cmVmb250XCIsIHRva2Vucywgc3RyKTtcblx0XHRcdGNhc2UgXCJzdGF2ZXNcIjpcblx0XHRcdGNhc2UgXCJzY29yZVwiOlxuXHRcdFx0XHRtdWx0aWxpbmVWYXJzLnNjb3JlX2lzX3ByZXNlbnQgPSB0cnVlO1xuXHRcdFx0XHR2YXIgYWRkVm9pY2UgPSBmdW5jdGlvbihpZCwgbmV3U3RhZmYsIGJyYWNrZXQsIGJyYWNlLCBjb250aW51ZUJhcikge1xuXHRcdFx0XHRcdGlmIChuZXdTdGFmZiB8fCBtdWx0aWxpbmVWYXJzLnN0YXZlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMuc3RhdmVzLnB1c2goe2luZGV4OiBtdWx0aWxpbmVWYXJzLnN0YXZlcy5sZW5ndGgsIG51bVZvaWNlczogMH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR2YXIgc3RhZmYgPSBwYXJzZUNvbW1vbi5sYXN0KG11bHRpbGluZVZhcnMuc3RhdmVzKTtcblx0XHRcdFx0XHRpZiAoYnJhY2tldCAhPT0gdW5kZWZpbmVkICYmIHN0YWZmLmJyYWNrZXQgPT09IHVuZGVmaW5lZCkgc3RhZmYuYnJhY2tldCA9IGJyYWNrZXQ7XG5cdFx0XHRcdFx0aWYgKGJyYWNlICE9PSB1bmRlZmluZWQgJiYgc3RhZmYuYnJhY2UgPT09IHVuZGVmaW5lZCkgc3RhZmYuYnJhY2UgPSBicmFjZTtcblx0XHRcdFx0XHRpZiAoY29udGludWVCYXIpIHN0YWZmLmNvbm5lY3RCYXJMaW5lcyA9ICdlbmQnO1xuXHRcdFx0XHRcdGlmIChtdWx0aWxpbmVWYXJzLnZvaWNlc1tpZF0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy52b2ljZXNbaWRdID0ge3N0YWZmTnVtOiBzdGFmZi5pbmRleCwgaW5kZXg6IHN0YWZmLm51bVZvaWNlc307XG5cdFx0XHRcdFx0XHRzdGFmZi5udW1Wb2ljZXMrKztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0dmFyIG9wZW5QYXJlbiA9IGZhbHNlO1xuXHRcdFx0XHR2YXIgb3BlbkJyYWNrZXQgPSBmYWxzZTtcblx0XHRcdFx0dmFyIG9wZW5CcmFjZSA9IGZhbHNlO1xuXHRcdFx0XHR2YXIganVzdE9wZW5QYXJlbiA9IGZhbHNlO1xuXHRcdFx0XHR2YXIganVzdE9wZW5CcmFja2V0ID0gZmFsc2U7XG5cdFx0XHRcdHZhciBqdXN0T3BlbkJyYWNlID0gZmFsc2U7XG5cdFx0XHRcdHZhciBjb250aW51ZUJhciA9IGZhbHNlO1xuXHRcdFx0XHR2YXIgbGFzdFZvaWNlO1xuXHRcdFx0XHR2YXIgYWRkQ29udGludWVCYXIgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRjb250aW51ZUJhciA9IHRydWU7XG5cdFx0XHRcdFx0aWYgKGxhc3RWb2ljZSkge1xuXHRcdFx0XHRcdFx0dmFyIHR5ID0gJ3N0YXJ0Jztcblx0XHRcdFx0XHRcdGlmIChsYXN0Vm9pY2Uuc3RhZmZOdW0gPiAwKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChtdWx0aWxpbmVWYXJzLnN0YXZlc1tsYXN0Vm9pY2Uuc3RhZmZOdW0tMV0uY29ubmVjdEJhckxpbmVzID09PSAnc3RhcnQnIHx8XG5cdFx0XHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5zdGF2ZXNbbGFzdFZvaWNlLnN0YWZmTnVtLTFdLmNvbm5lY3RCYXJMaW5lcyA9PT0gJ2NvbnRpbnVlJylcblx0XHRcdFx0XHRcdFx0XHR0eSA9ICdjb250aW51ZSc7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRtdWx0aWxpbmVWYXJzLnN0YXZlc1tsYXN0Vm9pY2Uuc3RhZmZOdW1dLmNvbm5lY3RCYXJMaW5lcyA9IHR5O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdFx0d2hpbGUgKHRva2Vucy5sZW5ndGgpIHtcblx0XHRcdFx0XHR2YXIgdCA9IHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRcdHN3aXRjaCAodC50b2tlbikge1xuXHRcdFx0XHRcdFx0Y2FzZSAnKCc6XG5cdFx0XHRcdFx0XHRcdGlmIChvcGVuUGFyZW4pIHdhcm4oXCJDYW4ndCBuZXN0IHBhcmVudGhlc2lzIGluICUlc2NvcmVcIiwgc3RyLCB0LnN0YXJ0KTtcblx0XHRcdFx0XHRcdFx0ZWxzZSB7b3BlblBhcmVuID0gdHJ1ZTtqdXN0T3BlblBhcmVuID0gdHJ1ZTt9XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSAnKSc6XG5cdFx0XHRcdFx0XHRcdGlmICghb3BlblBhcmVuIHx8IGp1c3RPcGVuUGFyZW4pIHdhcm4oXCJVbmV4cGVjdGVkIGNsb3NlIHBhcmVudGhlc2lzIGluICUlc2NvcmVcIiwgc3RyLCB0LnN0YXJ0KTtcblx0XHRcdFx0XHRcdFx0ZWxzZSBvcGVuUGFyZW4gPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlICdbJzpcblx0XHRcdFx0XHRcdFx0aWYgKG9wZW5CcmFja2V0KSB3YXJuKFwiQ2FuJ3QgbmVzdCBicmFja2V0cyBpbiAlJXNjb3JlXCIsIHN0ciwgdC5zdGFydCk7XG5cdFx0XHRcdFx0XHRcdGVsc2Uge29wZW5CcmFja2V0ID0gdHJ1ZTtqdXN0T3BlbkJyYWNrZXQgPSB0cnVlO31cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlICddJzpcblx0XHRcdFx0XHRcdFx0aWYgKCFvcGVuQnJhY2tldCB8fCBqdXN0T3BlbkJyYWNrZXQpIHdhcm4oXCJVbmV4cGVjdGVkIGNsb3NlIGJyYWNrZXQgaW4gJSVzY29yZVwiLCBzdHIsIHQuc3RhcnQpO1xuXHRcdFx0XHRcdFx0XHRlbHNlIHtvcGVuQnJhY2tldCA9IGZhbHNlO211bHRpbGluZVZhcnMuc3RhdmVzW2xhc3RWb2ljZS5zdGFmZk51bV0uYnJhY2tldCA9ICdlbmQnO31cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlICd7Jzpcblx0XHRcdFx0XHRcdFx0aWYgKG9wZW5CcmFjZSApIHdhcm4oXCJDYW4ndCBuZXN0IGJyYWNlcyBpbiAlJXNjb3JlXCIsIHN0ciwgdC5zdGFydCk7XG5cdFx0XHRcdFx0XHRcdGVsc2Uge29wZW5CcmFjZSA9IHRydWU7anVzdE9wZW5CcmFjZSA9IHRydWU7fVxuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgJ30nOlxuXHRcdFx0XHRcdFx0XHRpZiAoIW9wZW5CcmFjZSB8fCBqdXN0T3BlbkJyYWNlKSB3YXJuKFwiVW5leHBlY3RlZCBjbG9zZSBicmFjZSBpbiAlJXNjb3JlXCIsIHN0ciwgdC5zdGFydCk7XG5cdFx0XHRcdFx0XHRcdGVsc2Uge29wZW5CcmFjZSA9IGZhbHNlO211bHRpbGluZVZhcnMuc3RhdmVzW2xhc3RWb2ljZS5zdGFmZk51bV0uYnJhY2UgPSAnZW5kJzt9XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSAnfCc6XG5cdFx0XHRcdFx0XHRcdGFkZENvbnRpbnVlQmFyKCk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0dmFyIHZjID0gXCJcIjtcblx0XHRcdFx0XHRcdFx0d2hpbGUgKHQudHlwZSA9PT0gJ2FscGhhJyB8fCB0LnR5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmMgKz0gdC50b2tlbjtcblx0XHRcdFx0XHRcdFx0XHRpZiAodC5jb250aW51ZUlkKVxuXHRcdFx0XHRcdFx0XHRcdFx0dCA9IHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHZhciBuZXdTdGFmZiA9ICFvcGVuUGFyZW4gfHwganVzdE9wZW5QYXJlbjtcblx0XHRcdFx0XHRcdFx0dmFyIGJyYWNrZXQgPSBqdXN0T3BlbkJyYWNrZXQgPyAnc3RhcnQnIDogb3BlbkJyYWNrZXQgPyAnY29udGludWUnIDogdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHR2YXIgYnJhY2UgPSBqdXN0T3BlbkJyYWNlID8gJ3N0YXJ0JyA6IG9wZW5CcmFjZSA/ICdjb250aW51ZScgOiB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHRcdGFkZFZvaWNlKHZjLCBuZXdTdGFmZiwgYnJhY2tldCwgYnJhY2UsIGNvbnRpbnVlQmFyKTtcblx0XHRcdFx0XHRcdFx0anVzdE9wZW5QYXJlbiA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRqdXN0T3BlbkJyYWNrZXQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0anVzdE9wZW5CcmFjZSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZUJhciA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRsYXN0Vm9pY2UgPSBtdWx0aWxpbmVWYXJzLnZvaWNlc1t2Y107XG5cdFx0XHRcdFx0XHRcdGlmIChjbWQgPT09ICdzdGF2ZXMnKVxuXHRcdFx0XHRcdFx0XHRcdGFkZENvbnRpbnVlQmFyKCk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSBcIm1heHN0YXZlc1wiOlxuXHRcdFx0XHR2YXIgblN0YXZlcyA9IHRva2VuaXplci5nZXRJbnQocmVzdE9mU3RyaW5nKVxuXHRcdFx0XHRpZiAoblN0YXZlcy5kaWdpdHMgPT09IDApXG5cdFx0XHRcdFx0d2FybihcIkV4cGVjdGVkIG51bWJlciBvZiBzdGF2ZXMgaW4gbWF4c3RhdmVzXCIpXG5cdFx0XHRcdGVsc2V7XG5cdFx0XHRcdFx0aWYgKG5TdGF2ZXMudmFsdWUgPiAwKXtcblx0XHRcdFx0XHRcdHR1bmUuZm9ybWF0dGluZy5tYXhTdGF2ZXMgPSBuU3RhdmVzLnZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSBcIm5ld3BhZ2VcIjpcblx0XHRcdFx0dmFyIHBnTnVtID0gdG9rZW5pemVyLmdldEludChyZXN0T2ZTdHJpbmcpO1xuXHRcdFx0XHR0dW5lQnVpbGRlci5hZGROZXdQYWdlKHBnTnVtLmRpZ2l0cyA9PT0gMCA/IC0xIDogcGdOdW0udmFsdWUpO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSBcImFiY1wiOlxuXHRcdFx0XHR2YXIgYXJyID0gcmVzdE9mU3RyaW5nLnNwbGl0KCcgJyk7XG5cdFx0XHRcdHN3aXRjaCAoYXJyWzBdKSB7XG5cdFx0XHRcdFx0Y2FzZSBcIi1jb3B5cmlnaHRcIjpcblx0XHRcdFx0XHRjYXNlIFwiLWNyZWF0b3JcIjpcblx0XHRcdFx0XHRjYXNlIFwiLWVkaXRlZC1ieVwiOlxuXHRcdFx0XHRcdGNhc2UgXCItdmVyc2lvblwiOlxuXHRcdFx0XHRcdGNhc2UgXCItY2hhcnNldFwiOlxuXHRcdFx0XHRcdFx0dmFyIHN1YkNtZCA9IGFyci5zaGlmdCgpO1xuXHRcdFx0XHRcdFx0dHVuZUJ1aWxkZXIuYWRkTWV0YVRleHQoY21kK3N1YkNtZCwgYXJyLmpvaW4oJyAnKSwgeyBzdGFydENoYXI6IG11bHRpbGluZVZhcnMuaUNoYXIsIGVuZENoYXI6IG11bHRpbGluZVZhcnMuaUNoYXIrcmVzdE9mU3RyaW5nLmxlbmd0aCs1fSk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0cmV0dXJuIFwiVW5rbm93biBkaXJlY3RpdmU6IFwiICsgY21kK2FyclswXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJoZWFkZXJcIjpcblx0XHRcdGNhc2UgXCJmb290ZXJcIjpcblx0XHRcdFx0dmFyIGZvb3RlclN0ciA9IHRva2VuaXplci5nZXRNZWF0KHJlc3RPZlN0cmluZywgMCwgcmVzdE9mU3RyaW5nLmxlbmd0aCk7XG5cdFx0XHRcdGZvb3RlclN0ciA9IHJlc3RPZlN0cmluZy5zdWJzdHJpbmcoZm9vdGVyU3RyLnN0YXJ0LCBmb290ZXJTdHIuZW5kKTtcblx0XHRcdFx0aWYgKGZvb3RlclN0clswXSA9PT0gJ1wiJyAmJiBmb290ZXJTdHJbZm9vdGVyU3RyLmxlbmd0aC0xXSA9PT0gJ1wiJyApXG5cdFx0XHRcdFx0Zm9vdGVyU3RyID0gZm9vdGVyU3RyLnN1YnN0cmluZygxLCBmb290ZXJTdHIubGVuZ3RoLTEpO1xuXHRcdFx0XHR2YXIgZm9vdGVyQXJyID0gZm9vdGVyU3RyLnNwbGl0KCdcXHQnKTtcblx0XHRcdFx0dmFyIGZvb3RlciA9IHt9O1xuXHRcdFx0XHRpZiAoZm9vdGVyQXJyLmxlbmd0aCA9PT0gMSlcblx0XHRcdFx0XHRmb290ZXIgPSB7IGxlZnQ6IFwiXCIsIGNlbnRlcjogZm9vdGVyQXJyWzBdLCByaWdodDogXCJcIiB9O1xuXHRcdFx0XHRlbHNlIGlmIChmb290ZXJBcnIubGVuZ3RoID09PSAyKVxuXHRcdFx0XHRcdGZvb3RlciA9IHsgbGVmdDogZm9vdGVyQXJyWzBdLCBjZW50ZXI6IGZvb3RlckFyclsxXSwgcmlnaHQ6IFwiXCIgfTtcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdGZvb3RlciA9IHsgbGVmdDogZm9vdGVyQXJyWzBdLCBjZW50ZXI6IGZvb3RlckFyclsxXSwgcmlnaHQ6IGZvb3RlckFyclsyXSB9O1xuXHRcdFx0XHRpZiAoZm9vdGVyQXJyLmxlbmd0aCA+IDMpXG5cdFx0XHRcdFx0d2FybihcIlRvbyBtYW55IHRhYnMgaW4gXCIgKyBjbWQgKyBcIjogXCIgKyBmb290ZXJBcnIubGVuZ3RoICsgXCIgZm91bmQuXCIsIHJlc3RPZlN0cmluZywgMCk7XG5cblx0XHRcdFx0dHVuZUJ1aWxkZXIuYWRkTWV0YVRleHRPYmooY21kLCBmb290ZXIsIHsgc3RhcnRDaGFyOiBtdWx0aWxpbmVWYXJzLmlDaGFyLCBlbmRDaGFyOiBtdWx0aWxpbmVWYXJzLmlDaGFyK3N0ci5sZW5ndGh9KTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgXCJtaWRpXCI6XG5cdFx0XHRcdHZhciBtaWRpID0gdG9rZW5pemVyLnRva2VuaXplKHJlc3RPZlN0cmluZywgMCwgcmVzdE9mU3RyaW5nLmxlbmd0aCwgdHJ1ZSk7XG5cdFx0XHRcdGlmIChtaWRpLmxlbmd0aCA+IDAgJiYgbWlkaVswXS50b2tlbiA9PT0gJz0nKVxuXHRcdFx0XHRcdG1pZGkuc2hpZnQoKTtcblx0XHRcdFx0aWYgKG1pZGkubGVuZ3RoID09PSAwKVxuXHRcdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCBtaWRpIGNvbW1hbmRcIiwgcmVzdE9mU3RyaW5nLCAwKTtcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHBhcnNlTWlkaUNvbW1hbmQobWlkaSwgdHVuZSwgcmVzdE9mU3RyaW5nKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwicGVyY21hcFwiOlxuXHRcdFx0XHR2YXIgcGVyY21hcCA9IGludGVycHJldFBlcmNNYXAocmVzdE9mU3RyaW5nKTtcblx0XHRcdFx0aWYgKHBlcmNtYXAuZXJyb3IpXG5cdFx0XHRcdFx0d2FybihwZXJjbWFwLmVycm9yLCBzdHIsIDgpO1xuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRpZiAoIXR1bmUuZm9ybWF0dGluZy5wZXJjbWFwKVxuXHRcdFx0XHRcdFx0dHVuZS5mb3JtYXR0aW5nLnBlcmNtYXAgPSB7fTtcblx0XHRcdFx0XHR0dW5lLmZvcm1hdHRpbmcucGVyY21hcFtwZXJjbWFwLmtleV0gPSBwZXJjbWFwLnZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIFwidmlzdWFsdHJhbnNwb3NlXCI6XG5cdFx0XHRcdHZhciBoYWxmU3RlcHMgPSB0b2tlbml6ZXIuZ2V0SW50KHJlc3RPZlN0cmluZylcblx0XHRcdFx0aWYgKGhhbGZTdGVwcy5kaWdpdHMgPT09IDApXG5cdFx0XHRcdFx0d2FybihcIkV4cGVjdGVkIG51bWJlciBvZiBoYWxmIHN0ZXBzIGluIHZpc3VhbFRyYW5zcG9zZVwiKVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5nbG9iYWxUcmFuc3Bvc2UgPSBoYWxmU3RlcHMudmFsdWVcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgXCJtYXBcIjpcblx0XHRcdGNhc2UgXCJwbGF5dGVtcG9cIjpcblx0XHRcdGNhc2UgXCJhdXF1YWxpdHlcIjpcblx0XHRcdGNhc2UgXCJjb250aW51b3VzXCI6XG5cdFx0XHRjYXNlIFwibm9iYXJjaGVja1wiOlxuXHRcdFx0XHQvLyBUT0RPLVBFUjogQWN0dWFsbHkgaGFuZGxlIHRoZSBwYXJhbWV0ZXJzIG9mIHRoZXNlXG5cdFx0XHRcdHR1bmUuZm9ybWF0dGluZ1tjbWRdID0gcmVzdE9mU3RyaW5nO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHJldHVybiBcIlVua25vd24gZGlyZWN0aXZlOiBcIiArIGNtZDtcblx0XHR9XG5cdFx0cmV0dXJuIG51bGw7XG5cdH07XG5cdHBhcnNlRGlyZWN0aXZlLmdsb2JhbEZvcm1hdHRpbmcgPSBmdW5jdGlvbihmb3JtYXRIYXNoKSB7XG5cdFx0Zm9yICh2YXIgY21kIGluIGZvcm1hdEhhc2gpIHtcblx0XHRcdGlmIChmb3JtYXRIYXNoLmhhc093blByb3BlcnR5KGNtZCkpIHtcblx0XHRcdFx0dmFyIHZhbHVlID0gJycrZm9ybWF0SGFzaFtjbWRdO1xuXHRcdFx0XHR2YXIgdG9rZW5zID0gdG9rZW5pemVyLnRva2VuaXplKHZhbHVlLCAwLCB2YWx1ZS5sZW5ndGgpO1xuXHRcdFx0XHR2YXIgc2NyYXRjaDtcblx0XHRcdFx0c3dpdGNoIChjbWQpIHtcblx0XHRcdFx0XHRjYXNlIFwidGl0bGVmb250XCI6XG5cdFx0XHRcdFx0Y2FzZSBcImdjaG9yZGZvbnRcIjpcblx0XHRcdFx0XHRjYXNlIFwiY29tcG9zZXJmb250XCI6XG5cdFx0XHRcdFx0Y2FzZSBcImZvb3RlcmZvbnRcIjpcblx0XHRcdFx0XHRjYXNlIFwiaGVhZGVyZm9udFwiOlxuXHRcdFx0XHRcdGNhc2UgXCJoaXN0b3J5Zm9udFwiOlxuXHRcdFx0XHRcdGNhc2UgXCJpbmZvZm9udFwiOlxuXHRcdFx0XHRcdGNhc2UgXCJtZWFzdXJlZm9udFwiOlxuXHRcdFx0XHRcdGNhc2UgXCJwYXJ0c2ZvbnRcIjpcblx0XHRcdFx0XHRjYXNlIFwicmVwZWF0Zm9udFwiOlxuXHRcdFx0XHRcdGNhc2UgXCJzdWJ0aXRsZWZvbnRcIjpcblx0XHRcdFx0XHRjYXNlIFwidGVtcG9mb250XCI6XG5cdFx0XHRcdFx0Y2FzZSBcInRleHRmb250XCI6XG5cdFx0XHRcdFx0Y2FzZSBcInZvaWNlZm9udFwiOlxuXHRcdFx0XHRcdGNhc2UgXCJ0cmlwbGV0Zm9udFwiOlxuXHRcdFx0XHRcdGNhc2UgXCJ2b2NhbGZvbnRcIjpcblx0XHRcdFx0XHRjYXNlIFwid29yZHNmb250XCI6XG5cdFx0XHRcdFx0Y2FzZSBcImFubm90YXRpb25mb250XCI6XG5cdFx0XHRcdFx0Y2FzZSBcInRhYmxhYmVsZm9udFwiOlxuXHRcdFx0XHRcdGNhc2UgXCJ0YWJudW1iZXJmb250XCI6XG5cdFx0XHRcdFx0Y2FzZSBcInRhYmdyYWNlZm9udFwiOlxuXHRcdFx0XHRcdFx0Z2V0Q2hhbmdpbmdGb250KGNtZCwgdG9rZW5zLCB2YWx1ZSk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwic2NhbGVcIjpcblx0XHRcdFx0XHRcdHNldFNjYWxlKGNtZCwgdG9rZW5zKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJwYXJ0c2JveFwiOlxuXHRcdFx0XHRcdFx0c2NyYXRjaCA9IGFkZE11bHRpbGluZVZhckJvb2woJ3BhcnRzQm94JywgY21kLCB0b2tlbnMpO1xuXHRcdFx0XHRcdFx0aWYgKHNjcmF0Y2ggIT09IG51bGwpIHdhcm4oc2NyYXRjaCk7XG5cdFx0XHRcdFx0XHRtdWx0aWxpbmVWYXJzLnBhcnRzZm9udC5ib3ggPSBtdWx0aWxpbmVWYXJzLnBhcnRzQm94O1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcImZyZWVnY2hvcmRcIjpcblx0XHRcdFx0XHRcdHNjcmF0Y2ggPSBhZGRNdWx0aWxpbmVWYXJCb29sKCdmcmVlZ2Nob3JkJywgY21kLCB0b2tlbnMpO1xuXHRcdFx0XHRcdFx0aWYgKHNjcmF0Y2ggIT09IG51bGwpIHdhcm4oc2NyYXRjaCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwiZm9udGJveHBhZGRpbmdcIjpcblx0XHRcdFx0XHRcdGlmICh0b2tlbnMubGVuZ3RoICE9PSAxIHx8IHRva2Vuc1swXS50eXBlICE9PSAnbnVtYmVyJylcblx0XHRcdFx0XHRcdFx0d2FybihcIkRpcmVjdGl2ZSBcXFwiXCIgKyBjbWQgKyBcIlxcXCIgcmVxdWlyZXMgYSBudW1iZXIgYXMgYSBwYXJhbWV0ZXIuXCIpO1xuXHRcdFx0XHRcdFx0dHVuZS5mb3JtYXR0aW5nLmZvbnRib3hwYWRkaW5nID0gdG9rZW5zWzBdLmZsb2F0dDtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJzdGFmZnRvcG1hcmdpblwiOlxuXHRcdFx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggIT09IDEgfHwgdG9rZW5zWzBdLnR5cGUgIT09ICdudW1iZXInKVxuXHRcdFx0XHRcdFx0XHR3YXJuKFwiRGlyZWN0aXZlIFxcXCJcIiArIGNtZCArIFwiXFxcIiByZXF1aXJlcyBhIG51bWJlciBhcyBhIHBhcmFtZXRlci5cIik7XG5cdFx0XHRcdFx0XHR0dW5lLmZvcm1hdHRpbmcuc3RhZmZ0b3BtYXJnaW4gPSB0b2tlbnNbMF0uZmxvYXR0O1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInN0cmV0Y2hsYXN0XCI6XG5cdFx0XHRcdFx0XHR2YXIgc2wgPSBwYXJzZVN0cmV0Y2hMYXN0KHRva2Vucyk7XG5cdFx0XHRcdFx0XHRpZiAoc2wudmFsdWUgIT09IHVuZGVmaW5lZClcblx0XHRcdFx0XHRcdFx0dHVuZS5mb3JtYXR0aW5nLnN0cmV0Y2hsYXN0ID0gc2wudmFsdWU7XG5cdFx0XHRcdFx0XHRpZiAoc2wuZXJyb3IpXG5cdFx0XHRcdFx0XHRcdHJldHVybiBzbC5lcnJvcjtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHR3YXJuKFwiRm9ybWF0dGluZyBkaXJlY3RpdmUgdW5yZWNvZ25pemVkOiBcIiwgY21kLCAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHRmdW5jdGlvbiBwYXJzZVN0cmV0Y2hMYXN0KHRva2Vucykge1xuXHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwKVxuXHRcdFx0cmV0dXJuIHsgdmFsdWU6IDEgfTsgLy8gaWYgdGhlcmUgaXMgbm8gdmFsdWUgdGhlbiB0aGUgcHJlc2VuY2Ugb2YgdGhpcyBpcyB0aGUgc2FtZSBhcyBcInRydWVcIlxuXHRcdGVsc2UgaWYgKHRva2Vucy5sZW5ndGggPT09IDEpIHtcblx0XHRcdGlmICh0b2tlbnNbMF0udHlwZSA9PT0gXCJudW1iZXJcIikge1xuXHRcdFx0XHRpZiAodG9rZW5zWzBdLmZsb2F0dCA+PSAwIHx8IHRva2Vuc1swXS5mbG9hdHQgPD0gMSlcblx0XHRcdFx0XHRyZXR1cm4ge3ZhbHVlOiB0b2tlbnNbMF0uZmxvYXR0fTtcblx0XHRcdH0gZWxzZSBpZiAodG9rZW5zWzBdLnRva2VuID09PSAnZmFsc2UnKSB7XG5cdFx0XHRcdHJldHVybiB7IHZhbHVlOiAwIH07XG5cdFx0XHR9IGVsc2UgaWYgKHRva2Vuc1swXS50b2tlbiA9PT0gJ3RydWUnKSB7XG5cdFx0XHRcdHJldHVybiB7dmFsdWU6IDF9O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4geyBlcnJvcjogXCJEaXJlY3RpdmUgc3RyZXRjaGxhc3QgcmVxdWlyZXMgemVybyBvciBvbmUgcGFyYW1ldGVyOiBmYWxzZSwgdHJ1ZSwgb3IgbnVtYmVyIGJldHdlZW4gMCBhbmQgMSAocmVjZWl2ZWQgXCIgKyB0b2tlbnNbMF0udG9rZW4gKyAnKScgfTtcblx0fVxufSkoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBwYXJzZURpcmVjdGl2ZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/parse/abc_parse_directive.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/parse/abc_parse_header.js":
/*!**********************************************************!*\
  !*** ./node_modules/abcjs/src/parse/abc_parse_header.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_parse_header.js: parses a the header fields from a string representing ABC Music Notation into a usable internal structure.\n\nvar parseCommon = __webpack_require__(/*! ./abc_common */ \"(ssr)/./node_modules/abcjs/src/parse/abc_common.js\");\nvar parseDirective = __webpack_require__(/*! ./abc_parse_directive */ \"(ssr)/./node_modules/abcjs/src/parse/abc_parse_directive.js\");\nvar parseKeyVoice = __webpack_require__(/*! ./abc_parse_key_voice */ \"(ssr)/./node_modules/abcjs/src/parse/abc_parse_key_voice.js\");\n\nvar ParseHeader = function(tokenizer, warn, multilineVars, tune, tuneBuilder) {\n\tthis.reset = function(tokenizer, warn, multilineVars, tune) {\n\t\tparseKeyVoice.initialize(tokenizer, warn, multilineVars, tune, tuneBuilder);\n\t\tparseDirective.initialize(tokenizer, warn, multilineVars, tune, tuneBuilder);\n\t};\n\tthis.reset(tokenizer, warn, multilineVars, tune);\n\n\tthis.setTitle = function(title, origSize) {\n\t\tif (multilineVars.hasMainTitle)\n\t\t\ttuneBuilder.addSubtitle(title, { startChar: multilineVars.iChar, endChar: multilineVars.iChar+origSize+2});\t// display secondary title\n\t\telse\n\t\t{\n\t\t\ttuneBuilder.addMetaText(\"title\", title, { startChar: multilineVars.iChar, endChar: multilineVars.iChar+origSize+2});\n\t\t\tmultilineVars.hasMainTitle = true;\n\t\t}\n\t};\n\n\tthis.setMeter = function(line) {\n\t\tline = tokenizer.stripComment(line);\n\t\tif (line === 'C') {\n\t\t\tif (multilineVars.havent_set_length === true) {\n\t\t\t\tmultilineVars.default_length = 0.125;\n\t\t\t\tmultilineVars.havent_set_length = false;\n\t\t\t}\n\t\t\treturn {type: 'common_time'};\n\t\t} else if (line === 'C|') {\n\t\t\tif (multilineVars.havent_set_length === true) {\n\t\t\t\tmultilineVars.default_length = 0.125;\n\t\t\t\tmultilineVars.havent_set_length = false;\n\t\t\t}\n\t\t\treturn {type: 'cut_time'};\n\t\t} else if (line === 'o') {\n\t\t\tif (multilineVars.havent_set_length === true) {\n\t\t\t\tmultilineVars.default_length = 0.125;\n\t\t\t\tmultilineVars.havent_set_length = false;\n\t\t\t}\n\t\t\treturn {type: 'tempus_perfectum'};\n\t\t} else if (line === 'c') {\n\t\t\tif (multilineVars.havent_set_length === true) {\n\t\t\t\tmultilineVars.default_length = 0.125;\n\t\t\t\tmultilineVars.havent_set_length = false;\n\t\t\t}\n\t\t\treturn {type: 'tempus_imperfectum'};\n\t\t} else if (line === 'o.') {\n\t\t\tif (multilineVars.havent_set_length === true) {\n\t\t\t\tmultilineVars.default_length = 0.125;\n\t\t\t\tmultilineVars.havent_set_length = false;\n\t\t\t}\n\t\t\treturn {type: 'tempus_perfectum_prolatio'};\n\t\t} else if (line === 'c.') {\n\t\t\tif (multilineVars.havent_set_length === true) {\n\t\t\t\tmultilineVars.default_length = 0.125;\n\t\t\t\tmultilineVars.havent_set_length = false;\n\t\t\t}\n\t\t\treturn {type: 'tempus_imperfectum_prolatio'};\n\t\t} else if (line.length === 0 || line.toLowerCase() === 'none') {\n\t\t\tif (multilineVars.havent_set_length === true) {\n\t\t\t\tmultilineVars.default_length = 0.125;\n\t\t\t\tmultilineVars.havent_set_length = false;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar tokens = tokenizer.tokenize(line, 0, line.length);\n\t\t\t// the form is [open_paren] decimal [ plus|dot decimal ]... [close_paren] slash decimal [plus same_as_before]\n\t\t\ttry {\n\t\t\t\tvar parseNum = function() {\n\t\t\t\t\t// handles this much: [open_paren] decimal [ plus|dot decimal ]... [close_paren]\n\t\t\t\t\tvar ret = {value: 0, num: \"\"};\n\n\t\t\t\t\tvar tok = tokens.shift();\n\t\t\t\t\tif (tok.token === '(')\n\t\t\t\t\t\ttok = tokens.shift();\n\t\t\t\t\twhile (1) {\n\t\t\t\t\t\tif (tok.type !== 'number') throw \"Expected top number of meter\";\n\t\t\t\t\t\tret.value += parseInt(tok.token);\n\t\t\t\t\t\tret.num += tok.token;\n\t\t\t\t\t\tif (tokens.length === 0 || tokens[0].token === '/') return ret;\n\t\t\t\t\t\ttok = tokens.shift();\n\t\t\t\t\t\tif (tok.token === ')') {\n\t\t\t\t\t\t\tif (tokens.length === 0 || tokens[0].token === '/') return ret;\n\t\t\t\t\t\t\tthrow \"Unexpected paren in meter\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (tok.token !== '.' && tok.token !== '+') throw \"Expected top number of meter\";\n\t\t\t\t\t\tret.num += tok.token;\n\t\t\t\t\t\tif (tokens.length === 0) throw \"Expected top number of meter\";\n\t\t\t\t\t\ttok = tokens.shift();\n\t\t\t\t\t}\n\t\t\t\t\treturn ret;\t// just to suppress warning\n\t\t\t\t};\n\n\t\t\t\tvar parseFraction = function() {\n\t\t\t\t\t// handles this much: parseNum slash decimal\n\t\t\t\t\tvar ret = parseNum();\n\t\t\t\t\tif (tokens.length === 0) return ret;\n\t\t\t\t\tvar tok = tokens.shift();\n\t\t\t\t\tif (tok.token !== '/') throw \"Expected slash in meter\";\n\t\t\t\t\ttok = tokens.shift();\n\t\t\t\t\tif (tok.type !== 'number') throw \"Expected bottom number of meter\";\n\t\t\t\t\tret.den = tok.token;\n\t\t\t\t\tret.value = ret.value / parseInt(ret.den);\n\t\t\t\t\treturn ret;\n\t\t\t\t};\n\n\t\t\t\tif (tokens.length === 0) throw \"Expected meter definition in M: line\";\n\t\t\t\tvar meter = {type: 'specified', value: [ ]};\n\t\t\t\tvar totalLength = 0;\n\t\t\t\twhile (1) {\n\t\t\t\t\tvar ret = parseFraction();\n\t\t\t\t\ttotalLength += ret.value;\n\t\t\t\t\tvar mv = { num: ret.num };\n\t\t\t\t\tif (ret.den !== undefined)\n\t\t\t\t\t\tmv.den = ret.den;\n\t\t\t\t\tmeter.value.push(mv);\n\t\t\t\t\tif (tokens.length === 0) break;\n\t\t\t\t\t//var tok = tokens.shift();\n\t\t\t\t\t//if (tok.token !== '+') throw \"Extra characters in M: line\";\n\t\t\t\t}\n\n\t\t\t\tif (multilineVars.havent_set_length === true) {\n\t\t\t\t\tmultilineVars.default_length = totalLength < 0.75 ? 0.0625 : 0.125;\n\t\t\t\t\tmultilineVars.havent_set_length = false;\n\t\t\t\t}\n\t\t\t\treturn meter;\n\t\t\t} catch (e) {\n\t\t\t\twarn(e, line, 0);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.calcTempo = function(relTempo) {\n\t\tvar dur = 1/4;\n\t\tif (multilineVars.meter && multilineVars.meter.type === 'specified') {\n\t\t\tdur = 1 / parseInt(multilineVars.meter.value[0].den);\n\t\t} else if (multilineVars.origMeter && multilineVars.origMeter.type === 'specified') {\n\t\t\tdur = 1 / parseInt(multilineVars.origMeter.value[0].den);\n\t\t}\n\t\t//var dur = multilineVars.default_length ? multilineVars.default_length : 1;\n\t\tfor (var i = 0; i < relTempo.duration; i++)\n\t\t\trelTempo.duration[i] = dur * relTempo.duration[i];\n\t\treturn relTempo;\n\t};\n\n\tthis.resolveTempo = function() {\n\t\tif (multilineVars.tempo) {\t// If there's a tempo waiting to be resolved\n\t\t\tthis.calcTempo(multilineVars.tempo);\n\t\t\ttune.metaText.tempo = multilineVars.tempo;\n\t\t\tdelete multilineVars.tempo;\n\t\t}\n\t};\n\n\tthis.addUserDefinition = function(line, start, end) {\n\t\tvar equals = line.indexOf('=', start);\n\t\tif (equals === -1) {\n\t\t\twarn(\"Need an = in a macro definition\", line, start);\n\t\t\treturn;\n\t\t}\n\n\t\tvar before = parseCommon.strip(line.substring(start, equals));\n\t\tvar after = parseCommon.strip(line.substring(equals+1));\n\n\t\tif (before.length !== 1) {\n\t\t\twarn(\"Macro definitions can only be one character\", line, start);\n\t\t\treturn;\n\t\t}\n\t\tvar legalChars = \"HIJKLMNOPQRSTUVWXYhijklmnopqrstuvw~\";\n\t\tif (legalChars.indexOf(before) === -1) {\n\t\t\twarn(\"Macro definitions must be H-Y, h-w, or tilde\", line, start);\n\t\t\treturn;\n\t\t}\n\t\tif (after.length === 0) {\n\t\t\twarn(\"Missing macro definition\", line, start);\n\t\t\treturn;\n\t\t}\n\t\tif (multilineVars.macros === undefined)\n\t\t\tmultilineVars.macros = {};\n\t\tmultilineVars.macros[before] = after;\n\t};\n\n\tthis.setDefaultLength = function(line, start, end) {\n\t\tvar len = line.substring(start, end).replace(/ /g, \"\");\n\t\tvar len_arr = len.split('/');\n\t\tif (len_arr.length === 2) {\n\t\t\tvar n = parseInt(len_arr[0]);\n\t\t\tvar d = parseInt(len_arr[1]);\n\t\t\tif (d > 0) {\n\t\t\t\tmultilineVars.default_length = n / d;\t// a whole note is 1\n\t\t\t\tmultilineVars.havent_set_length = false;\n\t\t\t}\n\t\t} else if (len_arr.length === 1 && len_arr[0] === '1') {\n\t\t\tmultilineVars.default_length = 1;\n\t\t\tmultilineVars.havent_set_length = false;\n\t\t}\n\t};\n\n\n\tvar tempoString = {\n\n\t\tlarghissimo: 20,\n\t\tadagissimo: 24,\n\t\tsostenuto: 28,\n\t\tgrave: 32,\n\t\tlargo: 40,\n\t\tlento: 50,\n\t\tlarghetto: 60,\n\t\tadagio: 68,\n\t\tadagietto: 74,\n\t\tandante: 80,\n\t\tandantino: 88,\n\t\t\"marcia moderato\": 84,\n\t\t\"andante moderato\": 100,\n\t\tmoderato: 112,\n\t\tallegretto: 116,\n\t\t\"allegro moderato\": 120,\n\t\tallegro: 126,\n\t\tanimato: 132,\n\t\tagitato: 140,\n\t\tveloce: 148,\n\t\t\"mosso vivo\": 156,\n\t\tvivace: 164,\n\t\tvivacissimo: 172,\n\t\tallegrissimo: 176,\n\t\tpresto: 184,\n\t\tprestissimo: 210,\n\t};\n\n\tthis.setTempo = function(line, start, end, iChar) {\n\t\t//Q - tempo; can be used to specify the notes per minute, e.g. If\n\t\t//the meter denominator is a 4 note then Q:120 or Q:C=120\n\t\t//is 120 quarter notes per minute. Similarly  Q:C3=40 would be 40\n\t\t//dotted half notes per minute. An absolute tempo may also be\n\t\t//set, e.g. Q:1/8=120 is 120 eighth notes per minute,\n\t\t//irrespective of the meter's denominator.\n\t\t//\n\t\t// This is either a number, \"C=number\", \"Cnumber=number\", or fraction [fraction...]=number\n\t\t// It depends on the M: field, which may either not be present, or may appear after this.\n\t\t// If M: is not present, an eighth note is used.\n\t\t// That means that this field can't be calculated until the end, if it is the first three types, since we don't know if we'll see an M: field.\n\t\t// So, if it is the fourth type, set it here, otherwise, save the info in the multilineVars.\n\t\t// The temporary variables we keep are the duration and the bpm. In the first two forms, the duration is 1.\n\t\t// In addition, a quoted string may both precede and follow. If a quoted string is present, then the duration part is optional.\n\t\ttry {\n\t\t\tvar tokens = tokenizer.tokenize(line, start, end);\n\n\t\t\tif (tokens.length === 0) throw \"Missing parameter in Q: field\";\n\n\t\t\tvar tempo = { startChar: iChar+start-2, endChar: iChar+end };\n\t\t\tvar delaySet = true;\n\t\t\tvar token = tokens.shift();\n\t\t\tif (token.type === 'quote') {\n\t\t\t\ttempo.preString = token.token;\n\t\t\t\ttoken = tokens.shift();\n\t\t\t\tif (tokens.length === 0) {\t// It's ok to just get a string for the tempo\n\t\t\t\t\t// If the string is a well-known tempo, put in the bpm\n\t\t\t\t\tif (tempoString[tempo.preString.toLowerCase()]) {\n\t\t\t\t\t\ttempo.bpm = tempoString[tempo.preString.toLowerCase()];\n\t\t\t\t\t\ttempo.suppressBpm = true;\n\t\t\t\t\t}\n\t\t\t\t\treturn {type: 'immediate', tempo: tempo};\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (token.type === 'alpha' && token.token === 'C')\t { // either type 2 or type 3\n\t\t\t\tif (tokens.length === 0) throw \"Missing tempo after C in Q: field\";\n\t\t\t\ttoken = tokens.shift();\n\t\t\t\tif (token.type === 'punct' && token.token === '=') {\n\t\t\t\t\t// This is a type 2 format. The duration is an implied 1\n\t\t\t\t\tif (tokens.length === 0) throw \"Missing tempo after = in Q: field\";\n\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\tif (token.type !== 'number') throw \"Expected number after = in Q: field\";\n\t\t\t\t\ttempo.duration = [1];\n\t\t\t\t\ttempo.bpm = parseInt(token.token);\n\t\t\t\t} else if (token.type === 'number') {\n\t\t\t\t\t// This is a type 3 format.\n\t\t\t\t\ttempo.duration = [parseInt(token.token)];\n\t\t\t\t\tif (tokens.length === 0) throw \"Missing = after duration in Q: field\";\n\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\tif (token.type !== 'punct' || token.token !== '=') throw \"Expected = after duration in Q: field\";\n\t\t\t\t\tif (tokens.length === 0) throw \"Missing tempo after = in Q: field\";\n\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\tif (token.type !== 'number') throw \"Expected number after = in Q: field\";\n\t\t\t\t\ttempo.bpm = parseInt(token.token);\n\t\t\t\t} else throw \"Expected number or equal after C in Q: field\";\n\n\t\t\t} else if (token.type === 'number') {\t// either type 1 or type 4\n\t\t\t\tvar num = parseInt(token.token);\n\t\t\t\tif (tokens.length === 0 || tokens[0].type === 'quote') {\n\t\t\t\t\t// This is type 1\n\t\t\t\t\ttempo.duration = [1];\n\t\t\t\t\ttempo.bpm = num;\n\t\t\t\t} else {\t// This is type 4\n\t\t\t\t\tdelaySet = false;\n\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\tif (token.type !== 'punct' && token.token !== '/') throw \"Expected fraction in Q: field\";\n\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\tif (token.type !== 'number') throw \"Expected fraction in Q: field\";\n\t\t\t\t\tvar den = parseInt(token.token);\n\t\t\t\t\ttempo.duration = [num/den];\n\t\t\t\t\t// We got the first fraction, keep getting more as long as we find them.\n\t\t\t\t\twhile (tokens.length > 0  && tokens[0].token !== '=' && tokens[0].type !== 'quote') {\n\t\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\t\tif (token.type !== 'number') throw \"Expected fraction in Q: field\";\n\t\t\t\t\t\tnum = parseInt(token.token);\n\t\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\t\tif (token.type !== 'punct' && token.token !== '/') throw \"Expected fraction in Q: field\";\n\t\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\t\tif (token.type !== 'number') throw \"Expected fraction in Q: field\";\n\t\t\t\t\t\tden = parseInt(token.token);\n\t\t\t\t\t\ttempo.duration.push(num/den);\n\t\t\t\t\t}\n\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\tif (token.type !== 'punct' && token.token !== '=') throw \"Expected = in Q: field\";\n\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\tif (token.type !== 'number') throw \"Expected tempo in Q: field\";\n\t\t\t\t\ttempo.bpm = parseInt(token.token);\n\t\t\t\t}\n\t\t\t} else throw \"Unknown value in Q: field\";\n\t\t\tif (tokens.length !== 0) {\n\t\t\t\ttoken = tokens.shift();\n\t\t\t\tif (token.type === 'quote') {\n\t\t\t\t\ttempo.postString = token.token;\n\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t}\n\t\t\t\tif (tokens.length !== 0) throw \"Unexpected string at end of Q: field\";\n\t\t\t}\n\t\t\tif (multilineVars.printTempo === false)\n\t\t\t\ttempo.suppress = true;\n\t\t\treturn {type: delaySet?'delaySet':'immediate', tempo: tempo};\n\t\t} catch (msg) {\n\t\t\twarn(msg, line, start);\n\t\t\treturn {type: 'none'};\n\t\t}\n\t};\n\n\tthis.letter_to_inline_header = function(line, i, startLine)\n\t{\n\t\tvar needsNewLine = false\n\t\tvar ws = tokenizer.eatWhiteSpace(line, i);\n\t\ti +=ws;\n\t\tif (line.length >= i+5 && line[i] === '[' && line[i+2] === ':') {\n\t\t\tvar e = line.indexOf(']', i);\n\t\t\tvar startChar = multilineVars.iChar + i;\n\t\t\tvar endChar = multilineVars.iChar + e + 1;\n\t\t\tswitch(line.substring(i, i+3))\n\t\t\t{\n\t\t\t\tcase \"[I:\":\n\t\t\t\t\tvar err = parseDirective.addDirective(line.substring(i+3, e));\n\t\t\t\t\tif (err) warn(err, line, i);\n\t\t\t\t\treturn [ e-i+1+ws ];\n\t\t\t\tcase \"[M:\":\n\t\t\t\t\tvar meter = this.setMeter(line.substring(i+3, e));\n\t\t\t\t\tif (tuneBuilder.hasBeginMusic() && meter)\n\t\t\t\t\t\ttuneBuilder.appendStartingElement('meter', startChar, endChar, meter);\n\t\t\t\t\telse\n\t\t\t\t\t\tmultilineVars.meter = meter;\n\t\t\t\t\treturn [ e-i+1+ws ];\n\t\t\t\tcase \"[K:\":\n\t\t\t\t\tvar result = parseKeyVoice.parseKey(line.substring(i+3, e), true);\n\t\t\t\t\tif (result.foundClef && tuneBuilder.hasBeginMusic())\n\t\t\t\t\t\ttuneBuilder.appendStartingElement('clef', startChar, endChar, multilineVars.clef);\n\t\t\t\t\tif (result.foundKey && tuneBuilder.hasBeginMusic())\n\t\t\t\t\t\ttuneBuilder.appendStartingElement('key', startChar, endChar, parseKeyVoice.fixKey(multilineVars.clef, multilineVars.key));\n\t\t\t\t\treturn [ e-i+1+ws ];\n\t\t\t\tcase \"[P:\":\n\t\t\t\t\tvar part = parseDirective.parseFontChangeLine(line.substring(i+3, e))\n\t\t\t\t\tif (startLine || tune.lines.length <= tune.lineNum)\n\t\t\t\t\t\tmultilineVars.partForNextLine = { title: part, startChar: startChar, endChar: endChar };\n\t\t\t\t\telse\n\t\t\t\t\t\ttuneBuilder.appendElement('part', startChar, endChar, {title: part});\n\t\t\t\t\treturn [ e-i+1+ws ];\n\t\t\t\tcase \"[L:\":\n\t\t\t\t\tthis.setDefaultLength(line, i+3, e);\n\t\t\t\t\treturn [ e-i+1+ws ];\n\t\t\t\tcase \"[Q:\":\n\t\t\t\t\tif (e > 0) {\n\t\t\t\t\t\tvar tempo = this.setTempo(line, i+3, e, multilineVars.iChar);\n\t\t\t\t\t\tif (tempo.type === 'delaySet') {\n\t\t\t\t\t\t\tif (tuneBuilder.hasBeginMusic())\n\t\t\t\t\t\t\t\ttuneBuilder.appendElement('tempo', startChar, endChar, this.calcTempo(tempo.tempo));\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tmultilineVars.tempoForNextLine = ['tempo', startChar, endChar, this.calcTempo(tempo.tempo)]\n\t\t\t\t\t\t} else if (tempo.type === 'immediate') {\n\t\t\t\t\t\t\tif (!startLine && tuneBuilder.hasBeginMusic())\n\t\t\t\t\t\t\t\ttuneBuilder.appendElement('tempo', startChar, endChar, tempo.tempo);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tmultilineVars.tempoForNextLine = ['tempo', startChar, endChar, tempo.tempo]\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn [ e-i+1+ws, line[i+1], line.substring(i+3, e)];\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"[V:\":\n\t\t\t\t\tif (e > 0) {\n\t\t\t\t\t\tneedsNewLine = parseKeyVoice.parseVoice(line, i+3, e);\n\t\t\t\t\t\t//startNewLine();\n\t\t\t\t\t\treturn [ e-i+1+ws, line[i+1], line.substring(i+3, e), needsNewLine];\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"[r:\":\n\t\t\t\t\treturn [ e-i+1+ws ];\n\n\t\t\t\tdefault:\n\t\t\t\t\t// TODO: complain about unhandled header\n\t\t\t}\n\t\t}\n\t\treturn [ 0 ];\n\t};\n\n\tthis.letter_to_body_header = function(line, i)\n\t{\n\t\tvar needsNewLine = false\n\t\tif (line.length >= i+3) {\n\t\t\tswitch(line.substring(i, i+2))\n\t\t\t{\n\t\t\t\tcase \"I:\":\n\t\t\t\t\tvar err = parseDirective.addDirective(line.substring(i+2));\n\t\t\t\t\tif (err) warn(err, line, i);\n\t\t\t\t\treturn [ line.length ];\n\t\t\t\tcase \"M:\":\n\t\t\t\t\tvar meter = this.setMeter(line.substring(i+2));\n\t\t\t\t\tif (tuneBuilder.hasBeginMusic() && meter)\n\t\t\t\t\t\ttuneBuilder.appendStartingElement('meter', multilineVars.iChar + i, multilineVars.iChar + line.length, meter);\n\t\t\t\t\treturn [ line.length ];\n\t\t\t\tcase \"K:\":\n\t\t\t\t\tvar result = parseKeyVoice.parseKey(line.substring(i+2), tuneBuilder.hasBeginMusic());\n\t\t\t\t\tif (result.foundClef && tuneBuilder.hasBeginMusic() && multilineVars.keywarn !== false)\n\t\t\t\t\t\ttuneBuilder.appendStartingElement('clef', multilineVars.iChar + i, multilineVars.iChar + line.length, multilineVars.clef);\n\t\t\t\t\tif (result.foundKey && tuneBuilder.hasBeginMusic() && multilineVars.keywarn !== false)\n\t\t\t\t\t\ttuneBuilder.appendStartingElement('key', multilineVars.iChar + i, multilineVars.iChar + line.length, parseKeyVoice.fixKey(multilineVars.clef, multilineVars.key));\n\t\t\t\t\treturn [ line.length ];\n\t\t\t\tcase \"P:\":\n\t\t\t\t\tif (tuneBuilder.hasBeginMusic())\n\t\t\t\t\t\ttuneBuilder.appendElement('part', multilineVars.iChar + i, multilineVars.iChar + line.length, {title: line.substring(i+2)});\n\t\t\t\t\treturn [ line.length ];\n\t\t\t\tcase \"L:\":\n\t\t\t\t\tthis.setDefaultLength(line, i+2, line.length);\n\t\t\t\t\treturn [ line.length ];\n\t\t\t\tcase \"Q:\":\n\t\t\t\t\tvar e = line.indexOf('\\x12', i+2);\n\t\t\t\t\tif (e === -1) e = line.length;\n\t\t\t\t\tvar tempo = this.setTempo(line, i+2, e, multilineVars.iChar);\n\t\t\t\t\tif (tempo.type === 'delaySet') tuneBuilder.appendElement('tempo', multilineVars.iChar + i, multilineVars.iChar + line.length, this.calcTempo(tempo.tempo));\n\t\t\t\t\telse if (tempo.type === 'immediate') tuneBuilder.appendElement('tempo', multilineVars.iChar + i, multilineVars.iChar + line.length, tempo.tempo);\n\t\t\t\treturn [ e, line[i], parseCommon.strip(line.substring(i+2))];\n\t\t\t\tcase \"V:\":\n\t\t\t\t\tneedsNewLine = parseKeyVoice.parseVoice(line, i+2, line.length);\n//\t\t\t\t\t\tstartNewLine();\n\t\t\t\t\treturn [ line.length, line[i], parseCommon.strip(line.substring(i+2)), needsNewLine];\n\t\t\t\tdefault:\n\t\t\t\t\t// TODO: complain about unhandled header\n\t\t\t}\n\t\t}\n\t\treturn [ 0 ];\n\t};\n\n\tvar metaTextHeaders = {\n\t\tA: 'author',\n\t\tB: 'book',\n\t\tC: 'composer',\n\t\tD: 'discography',\n\t\tF: 'url',\n\t\tG: 'group',\n\t\tI: 'instruction',\n\t\tN: 'notes',\n\t\tO: 'origin',\n\t\tR: 'rhythm',\n\t\tS: 'source',\n\t\tW: 'unalignedWords',\n\t\tZ: 'transcription'\n\t};\n\n\tthis.parseHeader = function(line) {\n\t\tvar field = metaTextHeaders[line[0]];\n\t\tvar origSize = line.length-2\n\t\tvar restOfLine = tokenizer.translateString(tokenizer.stripComment(line.substring(2)))\n\t\tif (field === 'unalignedWords' || field === 'notes') {\n\t\t\t// These fields can be multi-line\n\t\t\ttuneBuilder.addMetaTextArray(field, parseDirective.parseFontChangeLine(restOfLine), { startChar: multilineVars.iChar, endChar: multilineVars.iChar+line.length});\n\t\t} else if (field !== undefined) {\n\t\t\t// these fields are single line\n\t\t\ttuneBuilder.addMetaText(field, parseDirective.parseFontChangeLine(restOfLine), { startChar: multilineVars.iChar, endChar: multilineVars.iChar+line.length});\n\t\t} else {\n\t\t\tvar startChar = multilineVars.iChar;\n\t\t\tvar endChar = startChar + line.length;\n\t\t\tswitch(line[0])\n\t\t\t{\n\t\t\t\tcase  'H':\n\t\t\t\t\t// History is a little different because once it starts it continues until another header field is encountered\n\t\t\t\t\ttuneBuilder.addMetaTextArray(\"history\", parseDirective.parseFontChangeLine(restOfLine), { startChar: multilineVars.iChar, endChar: multilineVars.iChar+line.length});\n\t\t\t\t\tline = tokenizer.peekLine()\n\t\t\t\t\twhile (line && line[1] !== ':') {\n\t\t\t\t\t\ttokenizer.nextLine()\n\t\t\t\t\t\ttuneBuilder.addMetaTextArray(\"history\", parseDirective.parseFontChangeLine(tokenizer.translateString(tokenizer.stripComment(line))), { startChar: multilineVars.iChar, endChar: multilineVars.iChar+line.length});\n\t\t\t\t\t\tline = tokenizer.peekLine()\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase  'K':\n\t\t\t\t\t// since the key is the last thing that can happen in the header, we can resolve the tempo now\n\t\t\t\t\tthis.resolveTempo();\n\t\t\t\t\tvar result = parseKeyVoice.parseKey(line.substring(2), false);\n\t\t\t\t\tif (!multilineVars.is_in_header && tuneBuilder.hasBeginMusic() && multilineVars.keywarn !== false) {\n\t\t\t\t\t\tif (result.foundClef)\n\t\t\t\t\t\t\ttuneBuilder.appendStartingElement('clef', startChar, endChar, multilineVars.clef);\n\t\t\t\t\t\tif (result.foundKey)\n\t\t\t\t\t\t\ttuneBuilder.appendStartingElement('key', startChar, endChar, parseKeyVoice.fixKey(multilineVars.clef, multilineVars.key));\n\t\t\t\t\t}\n\t\t\t\t\tmultilineVars.is_in_header = false;\t// The first key signifies the end of the header.\n\t\t\t\t\tbreak;\n\t\t\t\tcase  'L':\n\t\t\t\t\tthis.setDefaultLength(line, 2, line.length);\n\t\t\t\t\tbreak;\n\t\t\t\tcase  'M':\n\t\t\t\t\tmultilineVars.origMeter = multilineVars.meter = this.setMeter(line.substring(2));\n\t\t\t\t\tbreak;\n\t\t\t\tcase  'P':\n\t\t\t\t\t// TODO-PER: There is more to do with parts, but the writer doesn't care.\n\t\t\t\t\tif (multilineVars.is_in_header)\n\t\t\t\t\t\ttuneBuilder.addMetaText(\"partOrder\", parseDirective.parseFontChangeLine(restOfLine), { startChar: multilineVars.iChar, endChar: multilineVars.iChar+line.length});\n\t\t\t\t\telse\n\t\t\t\t\t\tmultilineVars.partForNextLine = { title: restOfLine, startChar: startChar, endChar: endChar};\n\t\t\t\t\tbreak;\n\t\t\t\tcase  'Q':\n\t\t\t\t\tvar tempo = this.setTempo(line, 2, line.length, multilineVars.iChar);\n\t\t\t\t\tif (tempo.type === 'delaySet') multilineVars.tempo = tempo.tempo;\n\t\t\t\t\telse if (tempo.type === 'immediate') {\n\t\t\t\t\t\tif (!tune.metaText.tempo)\n\t\t\t\t\t\t\ttune.metaText.tempo = tempo.tempo;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tmultilineVars.tempoForNextLine = ['tempo', startChar, endChar, tempo.tempo]\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase  'T':\n\t\t\t\t\tif (multilineVars.titlecaps)\n\t\t\t\t\t\trestOfLine = restOfLine.toUpperCase();\t\t\n\t\t\t\t\tthis.setTitle(parseDirective.parseFontChangeLine(tokenizer.theReverser(restOfLine)), origSize);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'U':\n\t\t\t\t\tthis.addUserDefinition(line, 2, line.length);\n\t\t\t\t\tbreak;\n\t\t\t\tcase  'V':\n\t\t\t\t\tparseKeyVoice.parseVoice(line, 2, line.length);\n\t\t\t\t\tif (!multilineVars.is_in_header)\n\t\t\t\t\t\treturn {newline: true};\n\t\t\t\t\tbreak;\n\t\t\t\tcase  's':\n\t\t\t\t\treturn {symbols: true};\n\t\t\t\tcase  'w':\n\t\t\t\t\treturn {words: true};\n\t\t\t\tcase 'X':\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'E':\n\t\t\t\tcase 'm':\n\t\t\t\t\twarn(\"Ignored header\", line, 0);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\treturn {regular: true};\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t};\n};\n\nmodule.exports = ParseHeader;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL2FiY19wYXJzZV9oZWFkZXIuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsa0JBQWtCLG1CQUFPLENBQUMsd0VBQWM7QUFDeEMscUJBQXFCLG1CQUFPLENBQUMsMEZBQXVCO0FBQ3BELG9CQUFvQixtQkFBTyxDQUFDLDBGQUF1Qjs7QUFFbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQ0FBb0Msd0VBQXdFLEdBQUc7QUFDL0c7QUFDQTtBQUNBLDZDQUE2Qyx3RUFBd0U7QUFDckg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCOztBQUVoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdUJBQXVCO0FBQ3pDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSx5REFBeUQ7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU4sS0FBSyxvQ0FBb0M7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sT0FBTztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLElBQUk7QUFDSjtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQSw2REFBNkQsWUFBWTtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUdBQXFHLDJCQUEyQjtBQUNoSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlGQUF5Rix5RUFBeUU7QUFDbEssSUFBSTtBQUNKO0FBQ0Esb0ZBQW9GLHlFQUF5RTtBQUM3SixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0ZBQStGLHlFQUF5RTtBQUN4SztBQUNBO0FBQ0E7QUFDQSw2SUFBNkkseUVBQXlFO0FBQ3ROO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkZBQTZGLHlFQUF5RTtBQUN0SztBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvcGFyc2UvYWJjX3BhcnNlX2hlYWRlci5qcz81ZjY1Il0sInNvdXJjZXNDb250ZW50IjpbIi8vICAgIGFiY19wYXJzZV9oZWFkZXIuanM6IHBhcnNlcyBhIHRoZSBoZWFkZXIgZmllbGRzIGZyb20gYSBzdHJpbmcgcmVwcmVzZW50aW5nIEFCQyBNdXNpYyBOb3RhdGlvbiBpbnRvIGEgdXNhYmxlIGludGVybmFsIHN0cnVjdHVyZS5cblxudmFyIHBhcnNlQ29tbW9uID0gcmVxdWlyZSgnLi9hYmNfY29tbW9uJyk7XG52YXIgcGFyc2VEaXJlY3RpdmUgPSByZXF1aXJlKCcuL2FiY19wYXJzZV9kaXJlY3RpdmUnKTtcbnZhciBwYXJzZUtleVZvaWNlID0gcmVxdWlyZSgnLi9hYmNfcGFyc2Vfa2V5X3ZvaWNlJyk7XG5cbnZhciBQYXJzZUhlYWRlciA9IGZ1bmN0aW9uKHRva2VuaXplciwgd2FybiwgbXVsdGlsaW5lVmFycywgdHVuZSwgdHVuZUJ1aWxkZXIpIHtcblx0dGhpcy5yZXNldCA9IGZ1bmN0aW9uKHRva2VuaXplciwgd2FybiwgbXVsdGlsaW5lVmFycywgdHVuZSkge1xuXHRcdHBhcnNlS2V5Vm9pY2UuaW5pdGlhbGl6ZSh0b2tlbml6ZXIsIHdhcm4sIG11bHRpbGluZVZhcnMsIHR1bmUsIHR1bmVCdWlsZGVyKTtcblx0XHRwYXJzZURpcmVjdGl2ZS5pbml0aWFsaXplKHRva2VuaXplciwgd2FybiwgbXVsdGlsaW5lVmFycywgdHVuZSwgdHVuZUJ1aWxkZXIpO1xuXHR9O1xuXHR0aGlzLnJlc2V0KHRva2VuaXplciwgd2FybiwgbXVsdGlsaW5lVmFycywgdHVuZSk7XG5cblx0dGhpcy5zZXRUaXRsZSA9IGZ1bmN0aW9uKHRpdGxlLCBvcmlnU2l6ZSkge1xuXHRcdGlmIChtdWx0aWxpbmVWYXJzLmhhc01haW5UaXRsZSlcblx0XHRcdHR1bmVCdWlsZGVyLmFkZFN1YnRpdGxlKHRpdGxlLCB7IHN0YXJ0Q2hhcjogbXVsdGlsaW5lVmFycy5pQ2hhciwgZW5kQ2hhcjogbXVsdGlsaW5lVmFycy5pQ2hhcitvcmlnU2l6ZSsyfSk7XHQvLyBkaXNwbGF5IHNlY29uZGFyeSB0aXRsZVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0dW5lQnVpbGRlci5hZGRNZXRhVGV4dChcInRpdGxlXCIsIHRpdGxlLCB7IHN0YXJ0Q2hhcjogbXVsdGlsaW5lVmFycy5pQ2hhciwgZW5kQ2hhcjogbXVsdGlsaW5lVmFycy5pQ2hhcitvcmlnU2l6ZSsyfSk7XG5cdFx0XHRtdWx0aWxpbmVWYXJzLmhhc01haW5UaXRsZSA9IHRydWU7XG5cdFx0fVxuXHR9O1xuXG5cdHRoaXMuc2V0TWV0ZXIgPSBmdW5jdGlvbihsaW5lKSB7XG5cdFx0bGluZSA9IHRva2VuaXplci5zdHJpcENvbW1lbnQobGluZSk7XG5cdFx0aWYgKGxpbmUgPT09ICdDJykge1xuXHRcdFx0aWYgKG11bHRpbGluZVZhcnMuaGF2ZW50X3NldF9sZW5ndGggPT09IHRydWUpIHtcblx0XHRcdFx0bXVsdGlsaW5lVmFycy5kZWZhdWx0X2xlbmd0aCA9IDAuMTI1O1xuXHRcdFx0XHRtdWx0aWxpbmVWYXJzLmhhdmVudF9zZXRfbGVuZ3RoID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4ge3R5cGU6ICdjb21tb25fdGltZSd9O1xuXHRcdH0gZWxzZSBpZiAobGluZSA9PT0gJ0N8Jykge1xuXHRcdFx0aWYgKG11bHRpbGluZVZhcnMuaGF2ZW50X3NldF9sZW5ndGggPT09IHRydWUpIHtcblx0XHRcdFx0bXVsdGlsaW5lVmFycy5kZWZhdWx0X2xlbmd0aCA9IDAuMTI1O1xuXHRcdFx0XHRtdWx0aWxpbmVWYXJzLmhhdmVudF9zZXRfbGVuZ3RoID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4ge3R5cGU6ICdjdXRfdGltZSd9O1xuXHRcdH0gZWxzZSBpZiAobGluZSA9PT0gJ28nKSB7XG5cdFx0XHRpZiAobXVsdGlsaW5lVmFycy5oYXZlbnRfc2V0X2xlbmd0aCA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRtdWx0aWxpbmVWYXJzLmRlZmF1bHRfbGVuZ3RoID0gMC4xMjU7XG5cdFx0XHRcdG11bHRpbGluZVZhcnMuaGF2ZW50X3NldF9sZW5ndGggPSBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB7dHlwZTogJ3RlbXB1c19wZXJmZWN0dW0nfTtcblx0XHR9IGVsc2UgaWYgKGxpbmUgPT09ICdjJykge1xuXHRcdFx0aWYgKG11bHRpbGluZVZhcnMuaGF2ZW50X3NldF9sZW5ndGggPT09IHRydWUpIHtcblx0XHRcdFx0bXVsdGlsaW5lVmFycy5kZWZhdWx0X2xlbmd0aCA9IDAuMTI1O1xuXHRcdFx0XHRtdWx0aWxpbmVWYXJzLmhhdmVudF9zZXRfbGVuZ3RoID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4ge3R5cGU6ICd0ZW1wdXNfaW1wZXJmZWN0dW0nfTtcblx0XHR9IGVsc2UgaWYgKGxpbmUgPT09ICdvLicpIHtcblx0XHRcdGlmIChtdWx0aWxpbmVWYXJzLmhhdmVudF9zZXRfbGVuZ3RoID09PSB0cnVlKSB7XG5cdFx0XHRcdG11bHRpbGluZVZhcnMuZGVmYXVsdF9sZW5ndGggPSAwLjEyNTtcblx0XHRcdFx0bXVsdGlsaW5lVmFycy5oYXZlbnRfc2V0X2xlbmd0aCA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHt0eXBlOiAndGVtcHVzX3BlcmZlY3R1bV9wcm9sYXRpbyd9O1xuXHRcdH0gZWxzZSBpZiAobGluZSA9PT0gJ2MuJykge1xuXHRcdFx0aWYgKG11bHRpbGluZVZhcnMuaGF2ZW50X3NldF9sZW5ndGggPT09IHRydWUpIHtcblx0XHRcdFx0bXVsdGlsaW5lVmFycy5kZWZhdWx0X2xlbmd0aCA9IDAuMTI1O1xuXHRcdFx0XHRtdWx0aWxpbmVWYXJzLmhhdmVudF9zZXRfbGVuZ3RoID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4ge3R5cGU6ICd0ZW1wdXNfaW1wZXJmZWN0dW1fcHJvbGF0aW8nfTtcblx0XHR9IGVsc2UgaWYgKGxpbmUubGVuZ3RoID09PSAwIHx8IGxpbmUudG9Mb3dlckNhc2UoKSA9PT0gJ25vbmUnKSB7XG5cdFx0XHRpZiAobXVsdGlsaW5lVmFycy5oYXZlbnRfc2V0X2xlbmd0aCA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRtdWx0aWxpbmVWYXJzLmRlZmF1bHRfbGVuZ3RoID0gMC4xMjU7XG5cdFx0XHRcdG11bHRpbGluZVZhcnMuaGF2ZW50X3NldF9sZW5ndGggPSBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dmFyIHRva2VucyA9IHRva2VuaXplci50b2tlbml6ZShsaW5lLCAwLCBsaW5lLmxlbmd0aCk7XG5cdFx0XHQvLyB0aGUgZm9ybSBpcyBbb3Blbl9wYXJlbl0gZGVjaW1hbCBbIHBsdXN8ZG90IGRlY2ltYWwgXS4uLiBbY2xvc2VfcGFyZW5dIHNsYXNoIGRlY2ltYWwgW3BsdXMgc2FtZV9hc19iZWZvcmVdXG5cdFx0XHR0cnkge1xuXHRcdFx0XHR2YXIgcGFyc2VOdW0gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQvLyBoYW5kbGVzIHRoaXMgbXVjaDogW29wZW5fcGFyZW5dIGRlY2ltYWwgWyBwbHVzfGRvdCBkZWNpbWFsIF0uLi4gW2Nsb3NlX3BhcmVuXVxuXHRcdFx0XHRcdHZhciByZXQgPSB7dmFsdWU6IDAsIG51bTogXCJcIn07XG5cblx0XHRcdFx0XHR2YXIgdG9rID0gdG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0aWYgKHRvay50b2tlbiA9PT0gJygnKVxuXHRcdFx0XHRcdFx0dG9rID0gdG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0d2hpbGUgKDEpIHtcblx0XHRcdFx0XHRcdGlmICh0b2sudHlwZSAhPT0gJ251bWJlcicpIHRocm93IFwiRXhwZWN0ZWQgdG9wIG51bWJlciBvZiBtZXRlclwiO1xuXHRcdFx0XHRcdFx0cmV0LnZhbHVlICs9IHBhcnNlSW50KHRvay50b2tlbik7XG5cdFx0XHRcdFx0XHRyZXQubnVtICs9IHRvay50b2tlbjtcblx0XHRcdFx0XHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwIHx8IHRva2Vuc1swXS50b2tlbiA9PT0gJy8nKSByZXR1cm4gcmV0O1xuXHRcdFx0XHRcdFx0dG9rID0gdG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0XHRpZiAodG9rLnRva2VuID09PSAnKScpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDAgfHwgdG9rZW5zWzBdLnRva2VuID09PSAnLycpIHJldHVybiByZXQ7XG5cdFx0XHRcdFx0XHRcdHRocm93IFwiVW5leHBlY3RlZCBwYXJlbiBpbiBtZXRlclwiO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKHRvay50b2tlbiAhPT0gJy4nICYmIHRvay50b2tlbiAhPT0gJysnKSB0aHJvdyBcIkV4cGVjdGVkIHRvcCBudW1iZXIgb2YgbWV0ZXJcIjtcblx0XHRcdFx0XHRcdHJldC5udW0gKz0gdG9rLnRva2VuO1xuXHRcdFx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDApIHRocm93IFwiRXhwZWN0ZWQgdG9wIG51bWJlciBvZiBtZXRlclwiO1xuXHRcdFx0XHRcdFx0dG9rID0gdG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiByZXQ7XHQvLyBqdXN0IHRvIHN1cHByZXNzIHdhcm5pbmdcblx0XHRcdFx0fTtcblxuXHRcdFx0XHR2YXIgcGFyc2VGcmFjdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdC8vIGhhbmRsZXMgdGhpcyBtdWNoOiBwYXJzZU51bSBzbGFzaCBkZWNpbWFsXG5cdFx0XHRcdFx0dmFyIHJldCA9IHBhcnNlTnVtKCk7XG5cdFx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDApIHJldHVybiByZXQ7XG5cdFx0XHRcdFx0dmFyIHRvayA9IHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRcdGlmICh0b2sudG9rZW4gIT09ICcvJykgdGhyb3cgXCJFeHBlY3RlZCBzbGFzaCBpbiBtZXRlclwiO1xuXHRcdFx0XHRcdHRvayA9IHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRcdGlmICh0b2sudHlwZSAhPT0gJ251bWJlcicpIHRocm93IFwiRXhwZWN0ZWQgYm90dG9tIG51bWJlciBvZiBtZXRlclwiO1xuXHRcdFx0XHRcdHJldC5kZW4gPSB0b2sudG9rZW47XG5cdFx0XHRcdFx0cmV0LnZhbHVlID0gcmV0LnZhbHVlIC8gcGFyc2VJbnQocmV0LmRlbik7XG5cdFx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRpZiAodG9rZW5zLmxlbmd0aCA9PT0gMCkgdGhyb3cgXCJFeHBlY3RlZCBtZXRlciBkZWZpbml0aW9uIGluIE06IGxpbmVcIjtcblx0XHRcdFx0dmFyIG1ldGVyID0ge3R5cGU6ICdzcGVjaWZpZWQnLCB2YWx1ZTogWyBdfTtcblx0XHRcdFx0dmFyIHRvdGFsTGVuZ3RoID0gMDtcblx0XHRcdFx0d2hpbGUgKDEpIHtcblx0XHRcdFx0XHR2YXIgcmV0ID0gcGFyc2VGcmFjdGlvbigpO1xuXHRcdFx0XHRcdHRvdGFsTGVuZ3RoICs9IHJldC52YWx1ZTtcblx0XHRcdFx0XHR2YXIgbXYgPSB7IG51bTogcmV0Lm51bSB9O1xuXHRcdFx0XHRcdGlmIChyZXQuZGVuICE9PSB1bmRlZmluZWQpXG5cdFx0XHRcdFx0XHRtdi5kZW4gPSByZXQuZGVuO1xuXHRcdFx0XHRcdG1ldGVyLnZhbHVlLnB1c2gobXYpO1xuXHRcdFx0XHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSBicmVhaztcblx0XHRcdFx0XHQvL3ZhciB0b2sgPSB0b2tlbnMuc2hpZnQoKTtcblx0XHRcdFx0XHQvL2lmICh0b2sudG9rZW4gIT09ICcrJykgdGhyb3cgXCJFeHRyYSBjaGFyYWN0ZXJzIGluIE06IGxpbmVcIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChtdWx0aWxpbmVWYXJzLmhhdmVudF9zZXRfbGVuZ3RoID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5kZWZhdWx0X2xlbmd0aCA9IHRvdGFsTGVuZ3RoIDwgMC43NSA/IDAuMDYyNSA6IDAuMTI1O1xuXHRcdFx0XHRcdG11bHRpbGluZVZhcnMuaGF2ZW50X3NldF9sZW5ndGggPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbWV0ZXI7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdHdhcm4oZSwgbGluZSwgMCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBudWxsO1xuXHR9O1xuXG5cdHRoaXMuY2FsY1RlbXBvID0gZnVuY3Rpb24ocmVsVGVtcG8pIHtcblx0XHR2YXIgZHVyID0gMS80O1xuXHRcdGlmIChtdWx0aWxpbmVWYXJzLm1ldGVyICYmIG11bHRpbGluZVZhcnMubWV0ZXIudHlwZSA9PT0gJ3NwZWNpZmllZCcpIHtcblx0XHRcdGR1ciA9IDEgLyBwYXJzZUludChtdWx0aWxpbmVWYXJzLm1ldGVyLnZhbHVlWzBdLmRlbik7XG5cdFx0fSBlbHNlIGlmIChtdWx0aWxpbmVWYXJzLm9yaWdNZXRlciAmJiBtdWx0aWxpbmVWYXJzLm9yaWdNZXRlci50eXBlID09PSAnc3BlY2lmaWVkJykge1xuXHRcdFx0ZHVyID0gMSAvIHBhcnNlSW50KG11bHRpbGluZVZhcnMub3JpZ01ldGVyLnZhbHVlWzBdLmRlbik7XG5cdFx0fVxuXHRcdC8vdmFyIGR1ciA9IG11bHRpbGluZVZhcnMuZGVmYXVsdF9sZW5ndGggPyBtdWx0aWxpbmVWYXJzLmRlZmF1bHRfbGVuZ3RoIDogMTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHJlbFRlbXBvLmR1cmF0aW9uOyBpKyspXG5cdFx0XHRyZWxUZW1wby5kdXJhdGlvbltpXSA9IGR1ciAqIHJlbFRlbXBvLmR1cmF0aW9uW2ldO1xuXHRcdHJldHVybiByZWxUZW1wbztcblx0fTtcblxuXHR0aGlzLnJlc29sdmVUZW1wbyA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmIChtdWx0aWxpbmVWYXJzLnRlbXBvKSB7XHQvLyBJZiB0aGVyZSdzIGEgdGVtcG8gd2FpdGluZyB0byBiZSByZXNvbHZlZFxuXHRcdFx0dGhpcy5jYWxjVGVtcG8obXVsdGlsaW5lVmFycy50ZW1wbyk7XG5cdFx0XHR0dW5lLm1ldGFUZXh0LnRlbXBvID0gbXVsdGlsaW5lVmFycy50ZW1wbztcblx0XHRcdGRlbGV0ZSBtdWx0aWxpbmVWYXJzLnRlbXBvO1xuXHRcdH1cblx0fTtcblxuXHR0aGlzLmFkZFVzZXJEZWZpbml0aW9uID0gZnVuY3Rpb24obGluZSwgc3RhcnQsIGVuZCkge1xuXHRcdHZhciBlcXVhbHMgPSBsaW5lLmluZGV4T2YoJz0nLCBzdGFydCk7XG5cdFx0aWYgKGVxdWFscyA9PT0gLTEpIHtcblx0XHRcdHdhcm4oXCJOZWVkIGFuID0gaW4gYSBtYWNybyBkZWZpbml0aW9uXCIsIGxpbmUsIHN0YXJ0KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIgYmVmb3JlID0gcGFyc2VDb21tb24uc3RyaXAobGluZS5zdWJzdHJpbmcoc3RhcnQsIGVxdWFscykpO1xuXHRcdHZhciBhZnRlciA9IHBhcnNlQ29tbW9uLnN0cmlwKGxpbmUuc3Vic3RyaW5nKGVxdWFscysxKSk7XG5cblx0XHRpZiAoYmVmb3JlLmxlbmd0aCAhPT0gMSkge1xuXHRcdFx0d2FybihcIk1hY3JvIGRlZmluaXRpb25zIGNhbiBvbmx5IGJlIG9uZSBjaGFyYWN0ZXJcIiwgbGluZSwgc3RhcnQpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR2YXIgbGVnYWxDaGFycyA9IFwiSElKS0xNTk9QUVJTVFVWV1hZaGlqa2xtbm9wcXJzdHV2d35cIjtcblx0XHRpZiAobGVnYWxDaGFycy5pbmRleE9mKGJlZm9yZSkgPT09IC0xKSB7XG5cdFx0XHR3YXJuKFwiTWFjcm8gZGVmaW5pdGlvbnMgbXVzdCBiZSBILVksIGgtdywgb3IgdGlsZGVcIiwgbGluZSwgc3RhcnQpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAoYWZ0ZXIubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR3YXJuKFwiTWlzc2luZyBtYWNybyBkZWZpbml0aW9uXCIsIGxpbmUsIHN0YXJ0KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKG11bHRpbGluZVZhcnMubWFjcm9zID09PSB1bmRlZmluZWQpXG5cdFx0XHRtdWx0aWxpbmVWYXJzLm1hY3JvcyA9IHt9O1xuXHRcdG11bHRpbGluZVZhcnMubWFjcm9zW2JlZm9yZV0gPSBhZnRlcjtcblx0fTtcblxuXHR0aGlzLnNldERlZmF1bHRMZW5ndGggPSBmdW5jdGlvbihsaW5lLCBzdGFydCwgZW5kKSB7XG5cdFx0dmFyIGxlbiA9IGxpbmUuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpLnJlcGxhY2UoLyAvZywgXCJcIik7XG5cdFx0dmFyIGxlbl9hcnIgPSBsZW4uc3BsaXQoJy8nKTtcblx0XHRpZiAobGVuX2Fyci5sZW5ndGggPT09IDIpIHtcblx0XHRcdHZhciBuID0gcGFyc2VJbnQobGVuX2FyclswXSk7XG5cdFx0XHR2YXIgZCA9IHBhcnNlSW50KGxlbl9hcnJbMV0pO1xuXHRcdFx0aWYgKGQgPiAwKSB7XG5cdFx0XHRcdG11bHRpbGluZVZhcnMuZGVmYXVsdF9sZW5ndGggPSBuIC8gZDtcdC8vIGEgd2hvbGUgbm90ZSBpcyAxXG5cdFx0XHRcdG11bHRpbGluZVZhcnMuaGF2ZW50X3NldF9sZW5ndGggPSBmYWxzZTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGxlbl9hcnIubGVuZ3RoID09PSAxICYmIGxlbl9hcnJbMF0gPT09ICcxJykge1xuXHRcdFx0bXVsdGlsaW5lVmFycy5kZWZhdWx0X2xlbmd0aCA9IDE7XG5cdFx0XHRtdWx0aWxpbmVWYXJzLmhhdmVudF9zZXRfbGVuZ3RoID0gZmFsc2U7XG5cdFx0fVxuXHR9O1xuXG5cblx0dmFyIHRlbXBvU3RyaW5nID0ge1xuXG5cdFx0bGFyZ2hpc3NpbW86IDIwLFxuXHRcdGFkYWdpc3NpbW86IDI0LFxuXHRcdHNvc3RlbnV0bzogMjgsXG5cdFx0Z3JhdmU6IDMyLFxuXHRcdGxhcmdvOiA0MCxcblx0XHRsZW50bzogNTAsXG5cdFx0bGFyZ2hldHRvOiA2MCxcblx0XHRhZGFnaW86IDY4LFxuXHRcdGFkYWdpZXR0bzogNzQsXG5cdFx0YW5kYW50ZTogODAsXG5cdFx0YW5kYW50aW5vOiA4OCxcblx0XHRcIm1hcmNpYSBtb2RlcmF0b1wiOiA4NCxcblx0XHRcImFuZGFudGUgbW9kZXJhdG9cIjogMTAwLFxuXHRcdG1vZGVyYXRvOiAxMTIsXG5cdFx0YWxsZWdyZXR0bzogMTE2LFxuXHRcdFwiYWxsZWdybyBtb2RlcmF0b1wiOiAxMjAsXG5cdFx0YWxsZWdybzogMTI2LFxuXHRcdGFuaW1hdG86IDEzMixcblx0XHRhZ2l0YXRvOiAxNDAsXG5cdFx0dmVsb2NlOiAxNDgsXG5cdFx0XCJtb3NzbyB2aXZvXCI6IDE1Nixcblx0XHR2aXZhY2U6IDE2NCxcblx0XHR2aXZhY2lzc2ltbzogMTcyLFxuXHRcdGFsbGVncmlzc2ltbzogMTc2LFxuXHRcdHByZXN0bzogMTg0LFxuXHRcdHByZXN0aXNzaW1vOiAyMTAsXG5cdH07XG5cblx0dGhpcy5zZXRUZW1wbyA9IGZ1bmN0aW9uKGxpbmUsIHN0YXJ0LCBlbmQsIGlDaGFyKSB7XG5cdFx0Ly9RIC0gdGVtcG87IGNhbiBiZSB1c2VkIHRvIHNwZWNpZnkgdGhlIG5vdGVzIHBlciBtaW51dGUsIGUuZy4gSWZcblx0XHQvL3RoZSBtZXRlciBkZW5vbWluYXRvciBpcyBhIDQgbm90ZSB0aGVuIFE6MTIwIG9yIFE6Qz0xMjBcblx0XHQvL2lzIDEyMCBxdWFydGVyIG5vdGVzIHBlciBtaW51dGUuIFNpbWlsYXJseSAgUTpDMz00MCB3b3VsZCBiZSA0MFxuXHRcdC8vZG90dGVkIGhhbGYgbm90ZXMgcGVyIG1pbnV0ZS4gQW4gYWJzb2x1dGUgdGVtcG8gbWF5IGFsc28gYmVcblx0XHQvL3NldCwgZS5nLiBROjEvOD0xMjAgaXMgMTIwIGVpZ2h0aCBub3RlcyBwZXIgbWludXRlLFxuXHRcdC8vaXJyZXNwZWN0aXZlIG9mIHRoZSBtZXRlcidzIGRlbm9taW5hdG9yLlxuXHRcdC8vXG5cdFx0Ly8gVGhpcyBpcyBlaXRoZXIgYSBudW1iZXIsIFwiQz1udW1iZXJcIiwgXCJDbnVtYmVyPW51bWJlclwiLCBvciBmcmFjdGlvbiBbZnJhY3Rpb24uLi5dPW51bWJlclxuXHRcdC8vIEl0IGRlcGVuZHMgb24gdGhlIE06IGZpZWxkLCB3aGljaCBtYXkgZWl0aGVyIG5vdCBiZSBwcmVzZW50LCBvciBtYXkgYXBwZWFyIGFmdGVyIHRoaXMuXG5cdFx0Ly8gSWYgTTogaXMgbm90IHByZXNlbnQsIGFuIGVpZ2h0aCBub3RlIGlzIHVzZWQuXG5cdFx0Ly8gVGhhdCBtZWFucyB0aGF0IHRoaXMgZmllbGQgY2FuJ3QgYmUgY2FsY3VsYXRlZCB1bnRpbCB0aGUgZW5kLCBpZiBpdCBpcyB0aGUgZmlyc3QgdGhyZWUgdHlwZXMsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgd2UnbGwgc2VlIGFuIE06IGZpZWxkLlxuXHRcdC8vIFNvLCBpZiBpdCBpcyB0aGUgZm91cnRoIHR5cGUsIHNldCBpdCBoZXJlLCBvdGhlcndpc2UsIHNhdmUgdGhlIGluZm8gaW4gdGhlIG11bHRpbGluZVZhcnMuXG5cdFx0Ly8gVGhlIHRlbXBvcmFyeSB2YXJpYWJsZXMgd2Uga2VlcCBhcmUgdGhlIGR1cmF0aW9uIGFuZCB0aGUgYnBtLiBJbiB0aGUgZmlyc3QgdHdvIGZvcm1zLCB0aGUgZHVyYXRpb24gaXMgMS5cblx0XHQvLyBJbiBhZGRpdGlvbiwgYSBxdW90ZWQgc3RyaW5nIG1heSBib3RoIHByZWNlZGUgYW5kIGZvbGxvdy4gSWYgYSBxdW90ZWQgc3RyaW5nIGlzIHByZXNlbnQsIHRoZW4gdGhlIGR1cmF0aW9uIHBhcnQgaXMgb3B0aW9uYWwuXG5cdFx0dHJ5IHtcblx0XHRcdHZhciB0b2tlbnMgPSB0b2tlbml6ZXIudG9rZW5pemUobGluZSwgc3RhcnQsIGVuZCk7XG5cblx0XHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSB0aHJvdyBcIk1pc3NpbmcgcGFyYW1ldGVyIGluIFE6IGZpZWxkXCI7XG5cblx0XHRcdHZhciB0ZW1wbyA9IHsgc3RhcnRDaGFyOiBpQ2hhcitzdGFydC0yLCBlbmRDaGFyOiBpQ2hhcitlbmQgfTtcblx0XHRcdHZhciBkZWxheVNldCA9IHRydWU7XG5cdFx0XHR2YXIgdG9rZW4gPSB0b2tlbnMuc2hpZnQoKTtcblx0XHRcdGlmICh0b2tlbi50eXBlID09PSAncXVvdGUnKSB7XG5cdFx0XHRcdHRlbXBvLnByZVN0cmluZyA9IHRva2VuLnRva2VuO1xuXHRcdFx0XHR0b2tlbiA9IHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRpZiAodG9rZW5zLmxlbmd0aCA9PT0gMCkge1x0Ly8gSXQncyBvayB0byBqdXN0IGdldCBhIHN0cmluZyBmb3IgdGhlIHRlbXBvXG5cdFx0XHRcdFx0Ly8gSWYgdGhlIHN0cmluZyBpcyBhIHdlbGwta25vd24gdGVtcG8sIHB1dCBpbiB0aGUgYnBtXG5cdFx0XHRcdFx0aWYgKHRlbXBvU3RyaW5nW3RlbXBvLnByZVN0cmluZy50b0xvd2VyQ2FzZSgpXSkge1xuXHRcdFx0XHRcdFx0dGVtcG8uYnBtID0gdGVtcG9TdHJpbmdbdGVtcG8ucHJlU3RyaW5nLnRvTG93ZXJDYXNlKCldO1xuXHRcdFx0XHRcdFx0dGVtcG8uc3VwcHJlc3NCcG0gPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4ge3R5cGU6ICdpbW1lZGlhdGUnLCB0ZW1wbzogdGVtcG99O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAodG9rZW4udHlwZSA9PT0gJ2FscGhhJyAmJiB0b2tlbi50b2tlbiA9PT0gJ0MnKVx0IHsgLy8gZWl0aGVyIHR5cGUgMiBvciB0eXBlIDNcblx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDApIHRocm93IFwiTWlzc2luZyB0ZW1wbyBhZnRlciBDIGluIFE6IGZpZWxkXCI7XG5cdFx0XHRcdHRva2VuID0gdG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdGlmICh0b2tlbi50eXBlID09PSAncHVuY3QnICYmIHRva2VuLnRva2VuID09PSAnPScpIHtcblx0XHRcdFx0XHQvLyBUaGlzIGlzIGEgdHlwZSAyIGZvcm1hdC4gVGhlIGR1cmF0aW9uIGlzIGFuIGltcGxpZWQgMVxuXHRcdFx0XHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSB0aHJvdyBcIk1pc3NpbmcgdGVtcG8gYWZ0ZXIgPSBpbiBROiBmaWVsZFwiO1xuXHRcdFx0XHRcdHRva2VuID0gdG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0aWYgKHRva2VuLnR5cGUgIT09ICdudW1iZXInKSB0aHJvdyBcIkV4cGVjdGVkIG51bWJlciBhZnRlciA9IGluIFE6IGZpZWxkXCI7XG5cdFx0XHRcdFx0dGVtcG8uZHVyYXRpb24gPSBbMV07XG5cdFx0XHRcdFx0dGVtcG8uYnBtID0gcGFyc2VJbnQodG9rZW4udG9rZW4pO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHRva2VuLnR5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdFx0Ly8gVGhpcyBpcyBhIHR5cGUgMyBmb3JtYXQuXG5cdFx0XHRcdFx0dGVtcG8uZHVyYXRpb24gPSBbcGFyc2VJbnQodG9rZW4udG9rZW4pXTtcblx0XHRcdFx0XHRpZiAodG9rZW5zLmxlbmd0aCA9PT0gMCkgdGhyb3cgXCJNaXNzaW5nID0gYWZ0ZXIgZHVyYXRpb24gaW4gUTogZmllbGRcIjtcblx0XHRcdFx0XHR0b2tlbiA9IHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRcdGlmICh0b2tlbi50eXBlICE9PSAncHVuY3QnIHx8IHRva2VuLnRva2VuICE9PSAnPScpIHRocm93IFwiRXhwZWN0ZWQgPSBhZnRlciBkdXJhdGlvbiBpbiBROiBmaWVsZFwiO1xuXHRcdFx0XHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSB0aHJvdyBcIk1pc3NpbmcgdGVtcG8gYWZ0ZXIgPSBpbiBROiBmaWVsZFwiO1xuXHRcdFx0XHRcdHRva2VuID0gdG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0aWYgKHRva2VuLnR5cGUgIT09ICdudW1iZXInKSB0aHJvdyBcIkV4cGVjdGVkIG51bWJlciBhZnRlciA9IGluIFE6IGZpZWxkXCI7XG5cdFx0XHRcdFx0dGVtcG8uYnBtID0gcGFyc2VJbnQodG9rZW4udG9rZW4pO1xuXHRcdFx0XHR9IGVsc2UgdGhyb3cgXCJFeHBlY3RlZCBudW1iZXIgb3IgZXF1YWwgYWZ0ZXIgQyBpbiBROiBmaWVsZFwiO1xuXG5cdFx0XHR9IGVsc2UgaWYgKHRva2VuLnR5cGUgPT09ICdudW1iZXInKSB7XHQvLyBlaXRoZXIgdHlwZSAxIG9yIHR5cGUgNFxuXHRcdFx0XHR2YXIgbnVtID0gcGFyc2VJbnQodG9rZW4udG9rZW4pO1xuXHRcdFx0XHRpZiAodG9rZW5zLmxlbmd0aCA9PT0gMCB8fCB0b2tlbnNbMF0udHlwZSA9PT0gJ3F1b3RlJykge1xuXHRcdFx0XHRcdC8vIFRoaXMgaXMgdHlwZSAxXG5cdFx0XHRcdFx0dGVtcG8uZHVyYXRpb24gPSBbMV07XG5cdFx0XHRcdFx0dGVtcG8uYnBtID0gbnVtO1xuXHRcdFx0XHR9IGVsc2Uge1x0Ly8gVGhpcyBpcyB0eXBlIDRcblx0XHRcdFx0XHRkZWxheVNldCA9IGZhbHNlO1xuXHRcdFx0XHRcdHRva2VuID0gdG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0aWYgKHRva2VuLnR5cGUgIT09ICdwdW5jdCcgJiYgdG9rZW4udG9rZW4gIT09ICcvJykgdGhyb3cgXCJFeHBlY3RlZCBmcmFjdGlvbiBpbiBROiBmaWVsZFwiO1xuXHRcdFx0XHRcdHRva2VuID0gdG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0aWYgKHRva2VuLnR5cGUgIT09ICdudW1iZXInKSB0aHJvdyBcIkV4cGVjdGVkIGZyYWN0aW9uIGluIFE6IGZpZWxkXCI7XG5cdFx0XHRcdFx0dmFyIGRlbiA9IHBhcnNlSW50KHRva2VuLnRva2VuKTtcblx0XHRcdFx0XHR0ZW1wby5kdXJhdGlvbiA9IFtudW0vZGVuXTtcblx0XHRcdFx0XHQvLyBXZSBnb3QgdGhlIGZpcnN0IGZyYWN0aW9uLCBrZWVwIGdldHRpbmcgbW9yZSBhcyBsb25nIGFzIHdlIGZpbmQgdGhlbS5cblx0XHRcdFx0XHR3aGlsZSAodG9rZW5zLmxlbmd0aCA+IDAgICYmIHRva2Vuc1swXS50b2tlbiAhPT0gJz0nICYmIHRva2Vuc1swXS50eXBlICE9PSAncXVvdGUnKSB7XG5cdFx0XHRcdFx0XHR0b2tlbiA9IHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRcdFx0aWYgKHRva2VuLnR5cGUgIT09ICdudW1iZXInKSB0aHJvdyBcIkV4cGVjdGVkIGZyYWN0aW9uIGluIFE6IGZpZWxkXCI7XG5cdFx0XHRcdFx0XHRudW0gPSBwYXJzZUludCh0b2tlbi50b2tlbik7XG5cdFx0XHRcdFx0XHR0b2tlbiA9IHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRcdFx0aWYgKHRva2VuLnR5cGUgIT09ICdwdW5jdCcgJiYgdG9rZW4udG9rZW4gIT09ICcvJykgdGhyb3cgXCJFeHBlY3RlZCBmcmFjdGlvbiBpbiBROiBmaWVsZFwiO1xuXHRcdFx0XHRcdFx0dG9rZW4gPSB0b2tlbnMuc2hpZnQoKTtcblx0XHRcdFx0XHRcdGlmICh0b2tlbi50eXBlICE9PSAnbnVtYmVyJykgdGhyb3cgXCJFeHBlY3RlZCBmcmFjdGlvbiBpbiBROiBmaWVsZFwiO1xuXHRcdFx0XHRcdFx0ZGVuID0gcGFyc2VJbnQodG9rZW4udG9rZW4pO1xuXHRcdFx0XHRcdFx0dGVtcG8uZHVyYXRpb24ucHVzaChudW0vZGVuKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dG9rZW4gPSB0b2tlbnMuc2hpZnQoKTtcblx0XHRcdFx0XHRpZiAodG9rZW4udHlwZSAhPT0gJ3B1bmN0JyAmJiB0b2tlbi50b2tlbiAhPT0gJz0nKSB0aHJvdyBcIkV4cGVjdGVkID0gaW4gUTogZmllbGRcIjtcblx0XHRcdFx0XHR0b2tlbiA9IHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRcdGlmICh0b2tlbi50eXBlICE9PSAnbnVtYmVyJykgdGhyb3cgXCJFeHBlY3RlZCB0ZW1wbyBpbiBROiBmaWVsZFwiO1xuXHRcdFx0XHRcdHRlbXBvLmJwbSA9IHBhcnNlSW50KHRva2VuLnRva2VuKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHRocm93IFwiVW5rbm93biB2YWx1ZSBpbiBROiBmaWVsZFwiO1xuXHRcdFx0aWYgKHRva2Vucy5sZW5ndGggIT09IDApIHtcblx0XHRcdFx0dG9rZW4gPSB0b2tlbnMuc2hpZnQoKTtcblx0XHRcdFx0aWYgKHRva2VuLnR5cGUgPT09ICdxdW90ZScpIHtcblx0XHRcdFx0XHR0ZW1wby5wb3N0U3RyaW5nID0gdG9rZW4udG9rZW47XG5cdFx0XHRcdFx0dG9rZW4gPSB0b2tlbnMuc2hpZnQoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodG9rZW5zLmxlbmd0aCAhPT0gMCkgdGhyb3cgXCJVbmV4cGVjdGVkIHN0cmluZyBhdCBlbmQgb2YgUTogZmllbGRcIjtcblx0XHRcdH1cblx0XHRcdGlmIChtdWx0aWxpbmVWYXJzLnByaW50VGVtcG8gPT09IGZhbHNlKVxuXHRcdFx0XHR0ZW1wby5zdXBwcmVzcyA9IHRydWU7XG5cdFx0XHRyZXR1cm4ge3R5cGU6IGRlbGF5U2V0PydkZWxheVNldCc6J2ltbWVkaWF0ZScsIHRlbXBvOiB0ZW1wb307XG5cdFx0fSBjYXRjaCAobXNnKSB7XG5cdFx0XHR3YXJuKG1zZywgbGluZSwgc3RhcnQpO1xuXHRcdFx0cmV0dXJuIHt0eXBlOiAnbm9uZSd9O1xuXHRcdH1cblx0fTtcblxuXHR0aGlzLmxldHRlcl90b19pbmxpbmVfaGVhZGVyID0gZnVuY3Rpb24obGluZSwgaSwgc3RhcnRMaW5lKVxuXHR7XG5cdFx0dmFyIG5lZWRzTmV3TGluZSA9IGZhbHNlXG5cdFx0dmFyIHdzID0gdG9rZW5pemVyLmVhdFdoaXRlU3BhY2UobGluZSwgaSk7XG5cdFx0aSArPXdzO1xuXHRcdGlmIChsaW5lLmxlbmd0aCA+PSBpKzUgJiYgbGluZVtpXSA9PT0gJ1snICYmIGxpbmVbaSsyXSA9PT0gJzonKSB7XG5cdFx0XHR2YXIgZSA9IGxpbmUuaW5kZXhPZignXScsIGkpO1xuXHRcdFx0dmFyIHN0YXJ0Q2hhciA9IG11bHRpbGluZVZhcnMuaUNoYXIgKyBpO1xuXHRcdFx0dmFyIGVuZENoYXIgPSBtdWx0aWxpbmVWYXJzLmlDaGFyICsgZSArIDE7XG5cdFx0XHRzd2l0Y2gobGluZS5zdWJzdHJpbmcoaSwgaSszKSlcblx0XHRcdHtcblx0XHRcdFx0Y2FzZSBcIltJOlwiOlxuXHRcdFx0XHRcdHZhciBlcnIgPSBwYXJzZURpcmVjdGl2ZS5hZGREaXJlY3RpdmUobGluZS5zdWJzdHJpbmcoaSszLCBlKSk7XG5cdFx0XHRcdFx0aWYgKGVycikgd2FybihlcnIsIGxpbmUsIGkpO1xuXHRcdFx0XHRcdHJldHVybiBbIGUtaSsxK3dzIF07XG5cdFx0XHRcdGNhc2UgXCJbTTpcIjpcblx0XHRcdFx0XHR2YXIgbWV0ZXIgPSB0aGlzLnNldE1ldGVyKGxpbmUuc3Vic3RyaW5nKGkrMywgZSkpO1xuXHRcdFx0XHRcdGlmICh0dW5lQnVpbGRlci5oYXNCZWdpbk11c2ljKCkgJiYgbWV0ZXIpXG5cdFx0XHRcdFx0XHR0dW5lQnVpbGRlci5hcHBlbmRTdGFydGluZ0VsZW1lbnQoJ21ldGVyJywgc3RhcnRDaGFyLCBlbmRDaGFyLCBtZXRlcik7XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5tZXRlciA9IG1ldGVyO1xuXHRcdFx0XHRcdHJldHVybiBbIGUtaSsxK3dzIF07XG5cdFx0XHRcdGNhc2UgXCJbSzpcIjpcblx0XHRcdFx0XHR2YXIgcmVzdWx0ID0gcGFyc2VLZXlWb2ljZS5wYXJzZUtleShsaW5lLnN1YnN0cmluZyhpKzMsIGUpLCB0cnVlKTtcblx0XHRcdFx0XHRpZiAocmVzdWx0LmZvdW5kQ2xlZiAmJiB0dW5lQnVpbGRlci5oYXNCZWdpbk11c2ljKCkpXG5cdFx0XHRcdFx0XHR0dW5lQnVpbGRlci5hcHBlbmRTdGFydGluZ0VsZW1lbnQoJ2NsZWYnLCBzdGFydENoYXIsIGVuZENoYXIsIG11bHRpbGluZVZhcnMuY2xlZik7XG5cdFx0XHRcdFx0aWYgKHJlc3VsdC5mb3VuZEtleSAmJiB0dW5lQnVpbGRlci5oYXNCZWdpbk11c2ljKCkpXG5cdFx0XHRcdFx0XHR0dW5lQnVpbGRlci5hcHBlbmRTdGFydGluZ0VsZW1lbnQoJ2tleScsIHN0YXJ0Q2hhciwgZW5kQ2hhciwgcGFyc2VLZXlWb2ljZS5maXhLZXkobXVsdGlsaW5lVmFycy5jbGVmLCBtdWx0aWxpbmVWYXJzLmtleSkpO1xuXHRcdFx0XHRcdHJldHVybiBbIGUtaSsxK3dzIF07XG5cdFx0XHRcdGNhc2UgXCJbUDpcIjpcblx0XHRcdFx0XHR2YXIgcGFydCA9IHBhcnNlRGlyZWN0aXZlLnBhcnNlRm9udENoYW5nZUxpbmUobGluZS5zdWJzdHJpbmcoaSszLCBlKSlcblx0XHRcdFx0XHRpZiAoc3RhcnRMaW5lIHx8IHR1bmUubGluZXMubGVuZ3RoIDw9IHR1bmUubGluZU51bSlcblx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMucGFydEZvck5leHRMaW5lID0geyB0aXRsZTogcGFydCwgc3RhcnRDaGFyOiBzdGFydENoYXIsIGVuZENoYXI6IGVuZENoYXIgfTtcblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHR0dW5lQnVpbGRlci5hcHBlbmRFbGVtZW50KCdwYXJ0Jywgc3RhcnRDaGFyLCBlbmRDaGFyLCB7dGl0bGU6IHBhcnR9KTtcblx0XHRcdFx0XHRyZXR1cm4gWyBlLWkrMSt3cyBdO1xuXHRcdFx0XHRjYXNlIFwiW0w6XCI6XG5cdFx0XHRcdFx0dGhpcy5zZXREZWZhdWx0TGVuZ3RoKGxpbmUsIGkrMywgZSk7XG5cdFx0XHRcdFx0cmV0dXJuIFsgZS1pKzErd3MgXTtcblx0XHRcdFx0Y2FzZSBcIltROlwiOlxuXHRcdFx0XHRcdGlmIChlID4gMCkge1xuXHRcdFx0XHRcdFx0dmFyIHRlbXBvID0gdGhpcy5zZXRUZW1wbyhsaW5lLCBpKzMsIGUsIG11bHRpbGluZVZhcnMuaUNoYXIpO1xuXHRcdFx0XHRcdFx0aWYgKHRlbXBvLnR5cGUgPT09ICdkZWxheVNldCcpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHR1bmVCdWlsZGVyLmhhc0JlZ2luTXVzaWMoKSlcblx0XHRcdFx0XHRcdFx0XHR0dW5lQnVpbGRlci5hcHBlbmRFbGVtZW50KCd0ZW1wbycsIHN0YXJ0Q2hhciwgZW5kQ2hhciwgdGhpcy5jYWxjVGVtcG8odGVtcG8udGVtcG8pKTtcblx0XHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMudGVtcG9Gb3JOZXh0TGluZSA9IFsndGVtcG8nLCBzdGFydENoYXIsIGVuZENoYXIsIHRoaXMuY2FsY1RlbXBvKHRlbXBvLnRlbXBvKV1cblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAodGVtcG8udHlwZSA9PT0gJ2ltbWVkaWF0ZScpIHtcblx0XHRcdFx0XHRcdFx0aWYgKCFzdGFydExpbmUgJiYgdHVuZUJ1aWxkZXIuaGFzQmVnaW5NdXNpYygpKVxuXHRcdFx0XHRcdFx0XHRcdHR1bmVCdWlsZGVyLmFwcGVuZEVsZW1lbnQoJ3RlbXBvJywgc3RhcnRDaGFyLCBlbmRDaGFyLCB0ZW1wby50ZW1wbyk7XG5cdFx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdFx0XHRtdWx0aWxpbmVWYXJzLnRlbXBvRm9yTmV4dExpbmUgPSBbJ3RlbXBvJywgc3RhcnRDaGFyLCBlbmRDaGFyLCB0ZW1wby50ZW1wb11cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiBbIGUtaSsxK3dzLCBsaW5lW2krMV0sIGxpbmUuc3Vic3RyaW5nKGkrMywgZSldO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcIltWOlwiOlxuXHRcdFx0XHRcdGlmIChlID4gMCkge1xuXHRcdFx0XHRcdFx0bmVlZHNOZXdMaW5lID0gcGFyc2VLZXlWb2ljZS5wYXJzZVZvaWNlKGxpbmUsIGkrMywgZSk7XG5cdFx0XHRcdFx0XHQvL3N0YXJ0TmV3TGluZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIFsgZS1pKzErd3MsIGxpbmVbaSsxXSwgbGluZS5zdWJzdHJpbmcoaSszLCBlKSwgbmVlZHNOZXdMaW5lXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJbcjpcIjpcblx0XHRcdFx0XHRyZXR1cm4gWyBlLWkrMSt3cyBdO1xuXG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0Ly8gVE9ETzogY29tcGxhaW4gYWJvdXQgdW5oYW5kbGVkIGhlYWRlclxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gWyAwIF07XG5cdH07XG5cblx0dGhpcy5sZXR0ZXJfdG9fYm9keV9oZWFkZXIgPSBmdW5jdGlvbihsaW5lLCBpKVxuXHR7XG5cdFx0dmFyIG5lZWRzTmV3TGluZSA9IGZhbHNlXG5cdFx0aWYgKGxpbmUubGVuZ3RoID49IGkrMykge1xuXHRcdFx0c3dpdGNoKGxpbmUuc3Vic3RyaW5nKGksIGkrMikpXG5cdFx0XHR7XG5cdFx0XHRcdGNhc2UgXCJJOlwiOlxuXHRcdFx0XHRcdHZhciBlcnIgPSBwYXJzZURpcmVjdGl2ZS5hZGREaXJlY3RpdmUobGluZS5zdWJzdHJpbmcoaSsyKSk7XG5cdFx0XHRcdFx0aWYgKGVycikgd2FybihlcnIsIGxpbmUsIGkpO1xuXHRcdFx0XHRcdHJldHVybiBbIGxpbmUubGVuZ3RoIF07XG5cdFx0XHRcdGNhc2UgXCJNOlwiOlxuXHRcdFx0XHRcdHZhciBtZXRlciA9IHRoaXMuc2V0TWV0ZXIobGluZS5zdWJzdHJpbmcoaSsyKSk7XG5cdFx0XHRcdFx0aWYgKHR1bmVCdWlsZGVyLmhhc0JlZ2luTXVzaWMoKSAmJiBtZXRlcilcblx0XHRcdFx0XHRcdHR1bmVCdWlsZGVyLmFwcGVuZFN0YXJ0aW5nRWxlbWVudCgnbWV0ZXInLCBtdWx0aWxpbmVWYXJzLmlDaGFyICsgaSwgbXVsdGlsaW5lVmFycy5pQ2hhciArIGxpbmUubGVuZ3RoLCBtZXRlcik7XG5cdFx0XHRcdFx0cmV0dXJuIFsgbGluZS5sZW5ndGggXTtcblx0XHRcdFx0Y2FzZSBcIks6XCI6XG5cdFx0XHRcdFx0dmFyIHJlc3VsdCA9IHBhcnNlS2V5Vm9pY2UucGFyc2VLZXkobGluZS5zdWJzdHJpbmcoaSsyKSwgdHVuZUJ1aWxkZXIuaGFzQmVnaW5NdXNpYygpKTtcblx0XHRcdFx0XHRpZiAocmVzdWx0LmZvdW5kQ2xlZiAmJiB0dW5lQnVpbGRlci5oYXNCZWdpbk11c2ljKCkgJiYgbXVsdGlsaW5lVmFycy5rZXl3YXJuICE9PSBmYWxzZSlcblx0XHRcdFx0XHRcdHR1bmVCdWlsZGVyLmFwcGVuZFN0YXJ0aW5nRWxlbWVudCgnY2xlZicsIG11bHRpbGluZVZhcnMuaUNoYXIgKyBpLCBtdWx0aWxpbmVWYXJzLmlDaGFyICsgbGluZS5sZW5ndGgsIG11bHRpbGluZVZhcnMuY2xlZik7XG5cdFx0XHRcdFx0aWYgKHJlc3VsdC5mb3VuZEtleSAmJiB0dW5lQnVpbGRlci5oYXNCZWdpbk11c2ljKCkgJiYgbXVsdGlsaW5lVmFycy5rZXl3YXJuICE9PSBmYWxzZSlcblx0XHRcdFx0XHRcdHR1bmVCdWlsZGVyLmFwcGVuZFN0YXJ0aW5nRWxlbWVudCgna2V5JywgbXVsdGlsaW5lVmFycy5pQ2hhciArIGksIG11bHRpbGluZVZhcnMuaUNoYXIgKyBsaW5lLmxlbmd0aCwgcGFyc2VLZXlWb2ljZS5maXhLZXkobXVsdGlsaW5lVmFycy5jbGVmLCBtdWx0aWxpbmVWYXJzLmtleSkpO1xuXHRcdFx0XHRcdHJldHVybiBbIGxpbmUubGVuZ3RoIF07XG5cdFx0XHRcdGNhc2UgXCJQOlwiOlxuXHRcdFx0XHRcdGlmICh0dW5lQnVpbGRlci5oYXNCZWdpbk11c2ljKCkpXG5cdFx0XHRcdFx0XHR0dW5lQnVpbGRlci5hcHBlbmRFbGVtZW50KCdwYXJ0JywgbXVsdGlsaW5lVmFycy5pQ2hhciArIGksIG11bHRpbGluZVZhcnMuaUNoYXIgKyBsaW5lLmxlbmd0aCwge3RpdGxlOiBsaW5lLnN1YnN0cmluZyhpKzIpfSk7XG5cdFx0XHRcdFx0cmV0dXJuIFsgbGluZS5sZW5ndGggXTtcblx0XHRcdFx0Y2FzZSBcIkw6XCI6XG5cdFx0XHRcdFx0dGhpcy5zZXREZWZhdWx0TGVuZ3RoKGxpbmUsIGkrMiwgbGluZS5sZW5ndGgpO1xuXHRcdFx0XHRcdHJldHVybiBbIGxpbmUubGVuZ3RoIF07XG5cdFx0XHRcdGNhc2UgXCJROlwiOlxuXHRcdFx0XHRcdHZhciBlID0gbGluZS5pbmRleE9mKCdcXHgxMicsIGkrMik7XG5cdFx0XHRcdFx0aWYgKGUgPT09IC0xKSBlID0gbGluZS5sZW5ndGg7XG5cdFx0XHRcdFx0dmFyIHRlbXBvID0gdGhpcy5zZXRUZW1wbyhsaW5lLCBpKzIsIGUsIG11bHRpbGluZVZhcnMuaUNoYXIpO1xuXHRcdFx0XHRcdGlmICh0ZW1wby50eXBlID09PSAnZGVsYXlTZXQnKSB0dW5lQnVpbGRlci5hcHBlbmRFbGVtZW50KCd0ZW1wbycsIG11bHRpbGluZVZhcnMuaUNoYXIgKyBpLCBtdWx0aWxpbmVWYXJzLmlDaGFyICsgbGluZS5sZW5ndGgsIHRoaXMuY2FsY1RlbXBvKHRlbXBvLnRlbXBvKSk7XG5cdFx0XHRcdFx0ZWxzZSBpZiAodGVtcG8udHlwZSA9PT0gJ2ltbWVkaWF0ZScpIHR1bmVCdWlsZGVyLmFwcGVuZEVsZW1lbnQoJ3RlbXBvJywgbXVsdGlsaW5lVmFycy5pQ2hhciArIGksIG11bHRpbGluZVZhcnMuaUNoYXIgKyBsaW5lLmxlbmd0aCwgdGVtcG8udGVtcG8pO1xuXHRcdFx0XHRyZXR1cm4gWyBlLCBsaW5lW2ldLCBwYXJzZUNvbW1vbi5zdHJpcChsaW5lLnN1YnN0cmluZyhpKzIpKV07XG5cdFx0XHRcdGNhc2UgXCJWOlwiOlxuXHRcdFx0XHRcdG5lZWRzTmV3TGluZSA9IHBhcnNlS2V5Vm9pY2UucGFyc2VWb2ljZShsaW5lLCBpKzIsIGxpbmUubGVuZ3RoKTtcbi8vXHRcdFx0XHRcdFx0c3RhcnROZXdMaW5lKCk7XG5cdFx0XHRcdFx0cmV0dXJuIFsgbGluZS5sZW5ndGgsIGxpbmVbaV0sIHBhcnNlQ29tbW9uLnN0cmlwKGxpbmUuc3Vic3RyaW5nKGkrMikpLCBuZWVkc05ld0xpbmVdO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdC8vIFRPRE86IGNvbXBsYWluIGFib3V0IHVuaGFuZGxlZCBoZWFkZXJcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIFsgMCBdO1xuXHR9O1xuXG5cdHZhciBtZXRhVGV4dEhlYWRlcnMgPSB7XG5cdFx0QTogJ2F1dGhvcicsXG5cdFx0QjogJ2Jvb2snLFxuXHRcdEM6ICdjb21wb3NlcicsXG5cdFx0RDogJ2Rpc2NvZ3JhcGh5Jyxcblx0XHRGOiAndXJsJyxcblx0XHRHOiAnZ3JvdXAnLFxuXHRcdEk6ICdpbnN0cnVjdGlvbicsXG5cdFx0TjogJ25vdGVzJyxcblx0XHRPOiAnb3JpZ2luJyxcblx0XHRSOiAncmh5dGhtJyxcblx0XHRTOiAnc291cmNlJyxcblx0XHRXOiAndW5hbGlnbmVkV29yZHMnLFxuXHRcdFo6ICd0cmFuc2NyaXB0aW9uJ1xuXHR9O1xuXG5cdHRoaXMucGFyc2VIZWFkZXIgPSBmdW5jdGlvbihsaW5lKSB7XG5cdFx0dmFyIGZpZWxkID0gbWV0YVRleHRIZWFkZXJzW2xpbmVbMF1dO1xuXHRcdHZhciBvcmlnU2l6ZSA9IGxpbmUubGVuZ3RoLTJcblx0XHR2YXIgcmVzdE9mTGluZSA9IHRva2VuaXplci50cmFuc2xhdGVTdHJpbmcodG9rZW5pemVyLnN0cmlwQ29tbWVudChsaW5lLnN1YnN0cmluZygyKSkpXG5cdFx0aWYgKGZpZWxkID09PSAndW5hbGlnbmVkV29yZHMnIHx8IGZpZWxkID09PSAnbm90ZXMnKSB7XG5cdFx0XHQvLyBUaGVzZSBmaWVsZHMgY2FuIGJlIG11bHRpLWxpbmVcblx0XHRcdHR1bmVCdWlsZGVyLmFkZE1ldGFUZXh0QXJyYXkoZmllbGQsIHBhcnNlRGlyZWN0aXZlLnBhcnNlRm9udENoYW5nZUxpbmUocmVzdE9mTGluZSksIHsgc3RhcnRDaGFyOiBtdWx0aWxpbmVWYXJzLmlDaGFyLCBlbmRDaGFyOiBtdWx0aWxpbmVWYXJzLmlDaGFyK2xpbmUubGVuZ3RofSk7XG5cdFx0fSBlbHNlIGlmIChmaWVsZCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHQvLyB0aGVzZSBmaWVsZHMgYXJlIHNpbmdsZSBsaW5lXG5cdFx0XHR0dW5lQnVpbGRlci5hZGRNZXRhVGV4dChmaWVsZCwgcGFyc2VEaXJlY3RpdmUucGFyc2VGb250Q2hhbmdlTGluZShyZXN0T2ZMaW5lKSwgeyBzdGFydENoYXI6IG11bHRpbGluZVZhcnMuaUNoYXIsIGVuZENoYXI6IG11bHRpbGluZVZhcnMuaUNoYXIrbGluZS5sZW5ndGh9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIHN0YXJ0Q2hhciA9IG11bHRpbGluZVZhcnMuaUNoYXI7XG5cdFx0XHR2YXIgZW5kQ2hhciA9IHN0YXJ0Q2hhciArIGxpbmUubGVuZ3RoO1xuXHRcdFx0c3dpdGNoKGxpbmVbMF0pXG5cdFx0XHR7XG5cdFx0XHRcdGNhc2UgICdIJzpcblx0XHRcdFx0XHQvLyBIaXN0b3J5IGlzIGEgbGl0dGxlIGRpZmZlcmVudCBiZWNhdXNlIG9uY2UgaXQgc3RhcnRzIGl0IGNvbnRpbnVlcyB1bnRpbCBhbm90aGVyIGhlYWRlciBmaWVsZCBpcyBlbmNvdW50ZXJlZFxuXHRcdFx0XHRcdHR1bmVCdWlsZGVyLmFkZE1ldGFUZXh0QXJyYXkoXCJoaXN0b3J5XCIsIHBhcnNlRGlyZWN0aXZlLnBhcnNlRm9udENoYW5nZUxpbmUocmVzdE9mTGluZSksIHsgc3RhcnRDaGFyOiBtdWx0aWxpbmVWYXJzLmlDaGFyLCBlbmRDaGFyOiBtdWx0aWxpbmVWYXJzLmlDaGFyK2xpbmUubGVuZ3RofSk7XG5cdFx0XHRcdFx0bGluZSA9IHRva2VuaXplci5wZWVrTGluZSgpXG5cdFx0XHRcdFx0d2hpbGUgKGxpbmUgJiYgbGluZVsxXSAhPT0gJzonKSB7XG5cdFx0XHRcdFx0XHR0b2tlbml6ZXIubmV4dExpbmUoKVxuXHRcdFx0XHRcdFx0dHVuZUJ1aWxkZXIuYWRkTWV0YVRleHRBcnJheShcImhpc3RvcnlcIiwgcGFyc2VEaXJlY3RpdmUucGFyc2VGb250Q2hhbmdlTGluZSh0b2tlbml6ZXIudHJhbnNsYXRlU3RyaW5nKHRva2VuaXplci5zdHJpcENvbW1lbnQobGluZSkpKSwgeyBzdGFydENoYXI6IG11bHRpbGluZVZhcnMuaUNoYXIsIGVuZENoYXI6IG11bHRpbGluZVZhcnMuaUNoYXIrbGluZS5sZW5ndGh9KTtcblx0XHRcdFx0XHRcdGxpbmUgPSB0b2tlbml6ZXIucGVla0xpbmUoKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAgJ0snOlxuXHRcdFx0XHRcdC8vIHNpbmNlIHRoZSBrZXkgaXMgdGhlIGxhc3QgdGhpbmcgdGhhdCBjYW4gaGFwcGVuIGluIHRoZSBoZWFkZXIsIHdlIGNhbiByZXNvbHZlIHRoZSB0ZW1wbyBub3dcblx0XHRcdFx0XHR0aGlzLnJlc29sdmVUZW1wbygpO1xuXHRcdFx0XHRcdHZhciByZXN1bHQgPSBwYXJzZUtleVZvaWNlLnBhcnNlS2V5KGxpbmUuc3Vic3RyaW5nKDIpLCBmYWxzZSk7XG5cdFx0XHRcdFx0aWYgKCFtdWx0aWxpbmVWYXJzLmlzX2luX2hlYWRlciAmJiB0dW5lQnVpbGRlci5oYXNCZWdpbk11c2ljKCkgJiYgbXVsdGlsaW5lVmFycy5rZXl3YXJuICE9PSBmYWxzZSkge1xuXHRcdFx0XHRcdFx0aWYgKHJlc3VsdC5mb3VuZENsZWYpXG5cdFx0XHRcdFx0XHRcdHR1bmVCdWlsZGVyLmFwcGVuZFN0YXJ0aW5nRWxlbWVudCgnY2xlZicsIHN0YXJ0Q2hhciwgZW5kQ2hhciwgbXVsdGlsaW5lVmFycy5jbGVmKTtcblx0XHRcdFx0XHRcdGlmIChyZXN1bHQuZm91bmRLZXkpXG5cdFx0XHRcdFx0XHRcdHR1bmVCdWlsZGVyLmFwcGVuZFN0YXJ0aW5nRWxlbWVudCgna2V5Jywgc3RhcnRDaGFyLCBlbmRDaGFyLCBwYXJzZUtleVZvaWNlLmZpeEtleShtdWx0aWxpbmVWYXJzLmNsZWYsIG11bHRpbGluZVZhcnMua2V5KSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG11bHRpbGluZVZhcnMuaXNfaW5faGVhZGVyID0gZmFsc2U7XHQvLyBUaGUgZmlyc3Qga2V5IHNpZ25pZmllcyB0aGUgZW5kIG9mIHRoZSBoZWFkZXIuXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgICdMJzpcblx0XHRcdFx0XHR0aGlzLnNldERlZmF1bHRMZW5ndGgobGluZSwgMiwgbGluZS5sZW5ndGgpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICAnTSc6XG5cdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5vcmlnTWV0ZXIgPSBtdWx0aWxpbmVWYXJzLm1ldGVyID0gdGhpcy5zZXRNZXRlcihsaW5lLnN1YnN0cmluZygyKSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgICdQJzpcblx0XHRcdFx0XHQvLyBUT0RPLVBFUjogVGhlcmUgaXMgbW9yZSB0byBkbyB3aXRoIHBhcnRzLCBidXQgdGhlIHdyaXRlciBkb2Vzbid0IGNhcmUuXG5cdFx0XHRcdFx0aWYgKG11bHRpbGluZVZhcnMuaXNfaW5faGVhZGVyKVxuXHRcdFx0XHRcdFx0dHVuZUJ1aWxkZXIuYWRkTWV0YVRleHQoXCJwYXJ0T3JkZXJcIiwgcGFyc2VEaXJlY3RpdmUucGFyc2VGb250Q2hhbmdlTGluZShyZXN0T2ZMaW5lKSwgeyBzdGFydENoYXI6IG11bHRpbGluZVZhcnMuaUNoYXIsIGVuZENoYXI6IG11bHRpbGluZVZhcnMuaUNoYXIrbGluZS5sZW5ndGh9KTtcblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRtdWx0aWxpbmVWYXJzLnBhcnRGb3JOZXh0TGluZSA9IHsgdGl0bGU6IHJlc3RPZkxpbmUsIHN0YXJ0Q2hhcjogc3RhcnRDaGFyLCBlbmRDaGFyOiBlbmRDaGFyfTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAgJ1EnOlxuXHRcdFx0XHRcdHZhciB0ZW1wbyA9IHRoaXMuc2V0VGVtcG8obGluZSwgMiwgbGluZS5sZW5ndGgsIG11bHRpbGluZVZhcnMuaUNoYXIpO1xuXHRcdFx0XHRcdGlmICh0ZW1wby50eXBlID09PSAnZGVsYXlTZXQnKSBtdWx0aWxpbmVWYXJzLnRlbXBvID0gdGVtcG8udGVtcG87XG5cdFx0XHRcdFx0ZWxzZSBpZiAodGVtcG8udHlwZSA9PT0gJ2ltbWVkaWF0ZScpIHtcblx0XHRcdFx0XHRcdGlmICghdHVuZS5tZXRhVGV4dC50ZW1wbylcblx0XHRcdFx0XHRcdFx0dHVuZS5tZXRhVGV4dC50ZW1wbyA9IHRlbXBvLnRlbXBvO1xuXHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHRtdWx0aWxpbmVWYXJzLnRlbXBvRm9yTmV4dExpbmUgPSBbJ3RlbXBvJywgc3RhcnRDaGFyLCBlbmRDaGFyLCB0ZW1wby50ZW1wb11cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgICdUJzpcblx0XHRcdFx0XHRpZiAobXVsdGlsaW5lVmFycy50aXRsZWNhcHMpXG5cdFx0XHRcdFx0XHRyZXN0T2ZMaW5lID0gcmVzdE9mTGluZS50b1VwcGVyQ2FzZSgpO1x0XHRcblx0XHRcdFx0XHR0aGlzLnNldFRpdGxlKHBhcnNlRGlyZWN0aXZlLnBhcnNlRm9udENoYW5nZUxpbmUodG9rZW5pemVyLnRoZVJldmVyc2VyKHJlc3RPZkxpbmUpKSwgb3JpZ1NpemUpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdVJzpcblx0XHRcdFx0XHR0aGlzLmFkZFVzZXJEZWZpbml0aW9uKGxpbmUsIDIsIGxpbmUubGVuZ3RoKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAgJ1YnOlxuXHRcdFx0XHRcdHBhcnNlS2V5Vm9pY2UucGFyc2VWb2ljZShsaW5lLCAyLCBsaW5lLmxlbmd0aCk7XG5cdFx0XHRcdFx0aWYgKCFtdWx0aWxpbmVWYXJzLmlzX2luX2hlYWRlcilcblx0XHRcdFx0XHRcdHJldHVybiB7bmV3bGluZTogdHJ1ZX07XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgICdzJzpcblx0XHRcdFx0XHRyZXR1cm4ge3N5bWJvbHM6IHRydWV9O1xuXHRcdFx0XHRjYXNlICAndyc6XG5cdFx0XHRcdFx0cmV0dXJuIHt3b3JkczogdHJ1ZX07XG5cdFx0XHRcdGNhc2UgJ1gnOlxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdFJzpcblx0XHRcdFx0Y2FzZSAnbSc6XG5cdFx0XHRcdFx0d2FybihcIklnbm9yZWQgaGVhZGVyXCIsIGxpbmUsIDApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdHJldHVybiB7cmVndWxhcjogdHJ1ZX07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB7fTtcblx0fTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUGFyc2VIZWFkZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/parse/abc_parse_header.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/parse/abc_parse_key_voice.js":
/*!*************************************************************!*\
  !*** ./node_modules/abcjs/src/parse/abc_parse_key_voice.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var parseDirective = __webpack_require__(/*! ./abc_parse_directive */ \"(ssr)/./node_modules/abcjs/src/parse/abc_parse_directive.js\");\nvar transpose = __webpack_require__(/*! ./abc_transpose */ \"(ssr)/./node_modules/abcjs/src/parse/abc_transpose.js\");\n\nvar parseKeyVoice = {};\n\n(function() {\n\tvar tokenizer;\n\tvar warn;\n\tvar multilineVars;\n\tvar tune;\n\tvar tuneBuilder;\n\tparseKeyVoice.initialize = function(tokenizer_, warn_, multilineVars_, tune_, tuneBuilder_) {\n\t\ttokenizer = tokenizer_;\n\t\twarn = warn_;\n\t\tmultilineVars = multilineVars_;\n\t\ttune = tune_;\n\t\ttuneBuilder = tuneBuilder_;\n\t};\n\n\tparseKeyVoice.standardKey = function(keyName, root, acc, localTranspose) {\n\t\treturn transpose.keySignature(multilineVars, keyName, root, acc, localTranspose);\n\t};\n\n\tvar clefLines = {\n\t\t'treble': { clef: 'treble', pitch: 4, mid: 0 },\n\t\t'treble+8': { clef: 'treble+8', pitch: 4, mid: 0 },\n\t\t'treble-8': { clef: 'treble-8', pitch: 4, mid: 0 },\n\t\t'treble^8': { clef: 'treble+8', pitch: 4, mid: 0 },\n\t\t'treble_8': { clef: 'treble-8', pitch: 4, mid: 0 },\n\t\t'treble1': { clef: 'treble', pitch: 2, mid: 2 },\n\t\t'treble2': { clef: 'treble', pitch: 4, mid: 0 },\n\t\t'treble3': { clef: 'treble', pitch: 6, mid: -2 },\n\t\t'treble4': { clef: 'treble', pitch: 8, mid: -4 },\n\t\t'treble5': { clef: 'treble', pitch: 10, mid: -6 },\n\t\t'perc': { clef: 'perc', pitch: 6, mid: 0 },\n\t\t'none': { clef: 'none', mid: 0 },\n\t\t'bass': { clef: 'bass', pitch: 8, mid: -12 },\n\t\t'bass+8': { clef: 'bass+8', pitch: 8, mid: -12 },\n\t\t'bass-8': { clef: 'bass-8', pitch: 8, mid: -12 },\n\t\t'bass^8': { clef: 'bass+8', pitch: 8, mid: -12 },\n\t\t'bass_8': { clef: 'bass-8', pitch: 8, mid: -12 },\n\t\t'bass+16': { clef: 'bass', pitch: 8, mid: -12 },\n\t\t'bass-16': { clef: 'bass', pitch: 8, mid: -12 },\n\t\t'bass^16': { clef: 'bass', pitch: 8, mid: -12 },\n\t\t'bass_16': { clef: 'bass', pitch: 8, mid: -12 },\n\t\t'bass1': { clef: 'bass', pitch: 2, mid: -6 },\n\t\t'bass2': { clef: 'bass', pitch: 4, mid: -8 },\n\t\t'bass3': { clef: 'bass', pitch: 6, mid: -10 },\n\t\t'bass4': { clef: 'bass', pitch: 8, mid: -12 },\n\t\t'bass5': { clef: 'bass', pitch: 10, mid: -14 },\n\t\t'tenor': { clef: 'alto', pitch: 8, mid: -8 },\n\t\t'tenor1': { clef: 'alto', pitch: 2, mid: -2 },\n\t\t'tenor2': { clef: 'alto', pitch: 4, mid: -4 },\n\t\t'tenor3': { clef: 'alto', pitch: 6, mid: -6 },\n\t\t'tenor4': { clef: 'alto', pitch: 8, mid: -8 },\n\t\t'tenor5': { clef: 'alto', pitch: 10, mid: -10 },\n\t\t'alto': { clef: 'alto', pitch: 6, mid: -6 },\n\t\t'alto1': { clef: 'alto', pitch: 2, mid: -2 },\n\t\t'alto2': { clef: 'alto', pitch: 4, mid: -4 },\n\t\t'alto3': { clef: 'alto', pitch: 6, mid: -6 },\n\t\t'alto4': { clef: 'alto', pitch: 8, mid: -8 },\n\t\t'alto5': { clef: 'alto', pitch: 10, mid: -10 },\n\t\t'alto+8': { clef: 'alto+8', pitch: 6, mid: -6 },\n\t\t'alto-8': { clef: 'alto-8', pitch: 6, mid: -6 },\n\t\t'alto^8': { clef: 'alto+8', pitch: 6, mid: -6 },\n\t\t'alto_8': { clef: 'alto-8', pitch: 6, mid: -6 }\n\t};\n\n\tvar calcMiddle = function(clef, oct) {\n\t\tvar value = clefLines[clef];\n\t\tvar mid = value ? value.mid : 0;\n\t\treturn mid+oct;\n\t};\n\n\tparseKeyVoice.fixClef = function(clef) {\n\t\tvar value = clefLines[clef.type];\n\t\tif (value) {\n\t\t\tclef.clefPos = value.pitch;\n\t\t\tclef.type = value.clef;\n\t\t}\n\t};\n\n\tparseKeyVoice.deepCopyKey = function(key) {\n\t\tvar ret = { accidentals: [], root: key.root, acc: key.acc, mode: key.mode };\n\t\tkey.accidentals.forEach(function(k) {\n\t\tret.accidentals.push(Object.assign({},k));\n\t\t});\n\t\treturn ret;\n\t};\n\n\tvar pitches = {A: 5, B: 6, C: 0, D: 1, E: 2, F: 3, G: 4, a: 12, b: 13, c: 7, d: 8, e: 9, f: 10, g: 11};\n\n\tparseKeyVoice.addPosToKey = function(clef, key) {\n\t\t// Shift the key signature from the treble positions to whatever position is needed for the clef.\n\t\t// This may put the key signature unnaturally high or low, so if it does, then shift it.\n\t\tvar mid = clef.verticalPos;\n\t\tkey.accidentals.forEach(function(acc) {\n\t\t\tvar pitch = pitches[acc.note];\n\t\t\tpitch = pitch - mid;\n\t\t\tacc.verticalPos = pitch;\n\t\t});\n\t\tif (key.impliedNaturals)\n\t\t\tkey.impliedNaturals.forEach(function(acc) {\n\t\t\t\tvar pitch = pitches[acc.note];\n\t\t\t\tpitch = pitch - mid;\n\t\t\t\tacc.verticalPos = pitch;\n\t\t\t});\n\n\t\tif (mid < -10) {\n\t\t\tkey.accidentals.forEach(function(acc) {\n\t\t\t\tacc.verticalPos -= 7;\n\t\t\t\tif (acc.verticalPos >= 11 || (acc.verticalPos === 10 && acc.acc === 'flat'))\n\t\t\t\t\tacc.verticalPos -= 7;\n\t\t\t\tif (acc.note === 'A' && acc.acc === 'sharp' )\n\t\t\t\t\tacc.verticalPos -=7;\n\t\t\t\tif ((acc.note === 'G' || acc.note === 'F') && acc.acc === 'flat' )\n\t\t\t\t\tacc.verticalPos -=7;\n\t\t\t});\n\t\t\tif (key.impliedNaturals)\n\t\t\t\tkey.impliedNaturals.forEach(function(acc) {\n\t\t\t\t\tacc.verticalPos -= 7;\n\t\t\t\t\tif (acc.verticalPos >= 11 || (acc.verticalPos === 10 && acc.acc === 'flat'))\n\t\t\t\t\t\tacc.verticalPos -= 7;\n\t\t\t\t\tif (acc.note === 'A' && acc.acc === 'sharp' )\n\t\t\t\t\t\tacc.verticalPos -=7;\n\t\t\t\t\tif ((acc.note === 'G' || acc.note === 'F') && acc.acc === 'flat' )\n\t\t\t\t\t\tacc.verticalPos -=7;\n\t\t\t\t});\n\t\t} else if (mid < -4) {\n\t\t\tkey.accidentals.forEach(function(acc) {\n\t\t\t\tacc.verticalPos -= 7;\n\t\t\t\tif (mid === -8 && (acc.note === 'f' || acc.note === 'g') && acc.acc === 'sharp' )\n\t\t\t\t\tacc.verticalPos -=7;\n\t\t\t});\n\t\t\tif (key.impliedNaturals)\n\t\t\t\tkey.impliedNaturals.forEach(function(acc) {\n\t\t\t\t\tacc.verticalPos -= 7;\n\t\t\t\t\tif (mid === -8 && (acc.note === 'f' || acc.note === 'g') && acc.acc === 'sharp' )\n\t\t\t\t\t\tacc.verticalPos -=7;\n\t\t\t\t});\n\t\t} else if (mid >= 7) {\n\t\t\tkey.accidentals.forEach(function(acc) {\n\t\t\t\tacc.verticalPos += 7;\n\t\t\t});\n\t\t\tif (key.impliedNaturals)\n\t\t\t\tkey.impliedNaturals.forEach(function(acc) {\n\t\t\t\t\tacc.verticalPos += 7;\n\t\t\t\t});\n\t\t}\n\t};\n\n\tparseKeyVoice.fixKey = function(clef, key) {\n\t\tvar fixedKey = Object.assign({},key);\n\t\tparseKeyVoice.addPosToKey(clef, fixedKey);\n\t\treturn fixedKey;\n\t};\n\n\tvar parseMiddle = function(str) {\n\t\tvar i = 0;\n\t\tvar p = str[i++];\n\t\tif (p === '^' || p === '_')\n\t\t\tp = str[i++];\n\t  var mid = pitches[p];\n\t\tif (mid === undefined)\n\t\t\tmid = 6; // If a legal middle note wasn't received, just ignore it.\n\t\tfor ( ; i < str.length; i++) {\n\t\t\tif (str[i] === ',') mid -= 7;\n\t\t\telse if (str[i] === \"'\") mid += 7;\n\t\t\telse break;\n\t\t}\n\t\treturn { mid: mid - 6, str: str.substring(i) };\t// We get the note in the middle of the staff. We want the note that appears as the first ledger line below the staff.\n\t};\n\n\tvar normalizeAccidentals = function(accs) {\n\t\tfor (var i = 0; i < accs.length; i++) {\n\t\t\tif (accs[i].note === 'b')\n\t\t\t\taccs[i].note = 'B';\n\t\t\telse if (accs[i].note === 'a')\n\t\t\t\taccs[i].note = 'A';\n\t\t\telse if (accs[i].note === 'F')\n\t\t\t\taccs[i].note = 'f';\n\t\t\telse if (accs[i].note === 'E')\n\t\t\t\taccs[i].note = 'e';\n\t\t\telse if (accs[i].note === 'D')\n\t\t\t\taccs[i].note = 'd';\n\t\t\telse if (accs[i].note === 'C')\n\t\t\t\taccs[i].note = 'c';\n\t\t\telse if (accs[i].note === 'G' && accs[i].acc === 'sharp')\n\t\t\t\taccs[i].note = 'g';\n\t\t\telse if (accs[i].note === 'g' && accs[i].acc === 'flat')\n\t\t\t\taccs[i].note = 'G';\n\t\t}\n\t};\n\n\tparseKeyVoice.parseKey = function(str, isInline)\t// (and clef)\n\t{\n\t\t// returns:\n\t\t//\t\t{ foundClef: true, foundKey: true }\n\t\t// Side effects:\n\t\t//\t\tcalls warn() when there is a syntax error\n\t\t//\t\tsets these members of multilineVars:\n\t\t//\t\t\tclef\n\t\t//\t\t\tkey\n\t\t//\t\t\tstyle\n\t\t//\n\t\t// The format is:\n\t\t// K: [key] [modifiers*]\n\t\t// modifiers are any of the following in any order:\n\t\t//  [clef] [middle=pitch] [transpose=[-]number] [stafflines=number] [staffscale=number][style=style]\n\t\t// key is none|HP|Hp|specified_key\n\t\t// clef is [clef=] [clef type] [line number] [+8|-8]\n\t\t// specified_key is pitch[#|b][mode(first three chars are significant)][accidentals*]\n\t\tif (str.length === 0) {\n\t\t\t// an empty K: field is the same as K:none\n\t\t\tstr = 'none';\n\t\t}\n\t\tvar tokens = tokenizer.tokenize(str, 0, str.length);\n\t\tvar ret = {};\n\n\t\t// Be sure that a key was passed in\n\t\tif (tokens.length === 0) {\n\t\t\twarn(\"Must pass in key signature.\", str, 0);\n\t\t\treturn ret;\n\t\t}\n\n\t\t// first the key\n\t\tswitch (tokens[0].token) {\n\t\t\tcase 'HP':\n\t\t\t\tparseDirective.addDirective(\"bagpipes\");\n\t\t\t\tmultilineVars.key = { root: \"HP\", accidentals: [], acc: \"\", mode: \"\" };\n\t\t\t\tret.foundKey = true;\n\t\t\t\ttokens.shift();\n\t\t\t\tbreak;\n\t\t\tcase 'Hp':\n\t\t\t\tparseDirective.addDirective(\"bagpipes\");\n\t\t\t\tmultilineVars.key = { root: \"Hp\", accidentals: [{acc: 'natural', note: 'g'}, {acc: 'sharp', note: 'f'}, {acc: 'sharp', note: 'c'}], acc: \"\", mode: \"\" };\n\t\t\t\tret.foundKey = true;\n\t\t\t\ttokens.shift();\n\t\t\t\tbreak;\n\t\t\tcase 'none':\n\t\t\t\t// we got the none key - that's the same as C to us\n\t\t\t\tmultilineVars.key = { root: \"none\", accidentals: [], acc: \"\", mode: \"\" };\n\t\t\t\tret.foundKey = true;\n\t\t\t\ttokens.shift();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tvar retPitch = tokenizer.getKeyPitch(tokens[0].token);\n\t\t\t\tif (retPitch.len > 0) {\n\t\t\t\t\tret.foundKey = true;\n\t\t\t\t\tvar acc = \"\";\n\t\t\t\t\tvar mode = \"\";\n\t\t\t\t\t// The accidental and mode might be attached to the pitch, so we might want to just remove the first character.\n\t\t\t\t\tif (tokens[0].token.length > 1)\n\t\t\t\t\t\ttokens[0].token = tokens[0].token.substring(1);\n\t\t\t\t\telse\n\t\t\t\t\t\ttokens.shift();\n\t\t\t\t\tvar key = retPitch.token;\n\t\t\t\t\t// We got a pitch to start with, so we might also have an accidental and a mode\n\t\t\t\t\tif (tokens.length > 0) {\n\t\t\t\t\t\tvar retAcc = tokenizer.getSharpFlat(tokens[0].token);\n\t\t\t\t\t\tif (retAcc.len > 0) {\n\t\t\t\t\t\t\tif (tokens[0].token.length > 1)\n\t\t\t\t\t\t\t\ttokens[0].token = tokens[0].token.substring(1);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\ttokens.shift();\n\t\t\t\t\t\t\tkey += retAcc.token;\n\t\t\t\t\t\t\tacc = retAcc.token;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (tokens.length > 0) {\n\t\t\t\t\t\t\tvar retMode = tokenizer.getMode(tokens[0].token);\n\t\t\t\t\t\t\tif (retMode.len > 0) {\n\t\t\t\t\t\t\t\ttokens.shift();\n\t\t\t\t\t\t\t\tkey += retMode.token;\n\t\t\t\t\t\t\t\tmode = retMode.token;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Be sure that the key specified is in the list: not all keys are physically possible, like Cbmin.\n\t\t\t\t\t\tif (parseKeyVoice.standardKey(key, retPitch.token, acc, 0) === undefined) {\n\t\t\t\t\t\t\twarn(\"Unsupported key signature: \" + key, str, 0);\n\t\t\t\t\t\t\treturn ret;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// We need to do a deep copy because we are going to modify it\n\t\t\t\t\tvar oldKey = parseKeyVoice.deepCopyKey(multilineVars.key);\n\t\t\t\t\t//TODO-PER: HACK! To get the local transpose to work, the transposition is done for each line. This caused the global transposition variable to be factored in twice, so, instead of rewriting that right now, I'm just subtracting one of them here.\n\t\t\t\t\tvar keyCompensate = !isInline && multilineVars.globalTranspose ? -multilineVars.globalTranspose : 0;\n\t\t\t\t\t//console.log(\"parse\", JSON.stringify(multilineVars), isInline)\n\t\t\t\t\tvar savedOrigKey;\n\t\t\t\t\tif (isInline)\n\t\t\t\t\t\tsavedOrigKey = multilineVars.globalTransposeOrigKeySig\n\t\t\t\t\tmultilineVars.key = parseKeyVoice.deepCopyKey(parseKeyVoice.standardKey(key, retPitch.token, acc, keyCompensate));\n\t\t\t\t\tif (isInline)\n\t\t\t\t\t\tmultilineVars.globalTransposeOrigKeySig = savedOrigKey\n\t\t\t\t\tmultilineVars.key.mode = mode;\n\t\t\t\t\tif (oldKey && multilineVars.keywarn !== false) {\n\t\t\t\t\t\t// Add natural in all places that the old key had an accidental.\n\t\t\t\t\t\tvar kk;\n\t\t\t\t\t\tfor (var k = 0; k < multilineVars.key.accidentals.length; k++) {\n\t\t\t\t\t\t\tfor (kk = 0; kk < oldKey.accidentals.length; kk++) {\n\t\t\t\t\t\t\t\tif (oldKey.accidentals[kk].note && multilineVars.key.accidentals[k].note.toLowerCase() === oldKey.accidentals[kk].note.toLowerCase())\n\t\t\t\t\t\t\t\t\toldKey.accidentals[kk].note = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (kk = 0; kk < oldKey.accidentals.length; kk++) {\n\t\t\t\t\t\t\tif (oldKey.accidentals[kk].note) {\n\t\t\t\t\t\t\t\tif (!multilineVars.key.impliedNaturals)\n\t\t\t\t\t\t\t\t\tmultilineVars.key.impliedNaturals = [];\n\t\t\t\t\t\t\t\tmultilineVars.key.impliedNaturals.push({ acc: 'natural', note: oldKey.accidentals[kk].note });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// There are two special cases of deprecated syntax. Ignore them if they occur\n\t\tif (tokens.length === 0) return ret;\n\t\tif (tokens[0].token === 'exp') tokens.shift();\n\t\tif (tokens.length === 0) return ret;\n\t\tif (tokens[0].token === 'oct') tokens.shift();\n\n\t\t// now see if there are extra accidentals\n\t\tif (tokens.length === 0) return ret;\n\t\tvar accs = tokenizer.getKeyAccidentals2(tokens);\n\t\tif (accs.warn)\n\t\t\twarn(accs.warn, str, 0);\n\t\t// If we have extra accidentals, first replace ones that are of the same pitch before adding them to the end.\n\t\tif (accs.accs) {\n\t\t\tif (!ret.foundKey) {\t\t// if there are only extra accidentals, make sure this is set.\n\t\t\t\tret.foundKey = true;\n\t\t\t\tmultilineVars.key = { root: \"none\", acc: \"\", mode: \"\", accidentals: [] };\n\t\t\t}\n\t\t\tnormalizeAccidentals(accs.accs);\n\t\t\tfor (var i = 0; i < accs.accs.length; i++) {\n\t\t\t\tvar found = false;\n\t\t\t\tfor (var j = 0; j < multilineVars.key.accidentals.length && !found; j++) {\n\t\t\t\t\tif (multilineVars.key.accidentals[j].note === accs.accs[i].note) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tif (multilineVars.key.accidentals[j].acc !== accs.accs[i].acc) {\n\t\t\t\t\t\t\t// If the accidental is different, then replace it. If it is the same, then the declaration was redundant, so just ignore it.\n\t\t\t\t\t\t\tmultilineVars.key.accidentals[j].acc = accs.accs[i].acc;\n\t\t\t\t\t\t\tif (!multilineVars.key.explicitAccidentals)\n\t\t\t\t\t\t\t\tmultilineVars.key.explicitAccidentals = [];\n\t\t\t\t\t\t\tmultilineVars.key.explicitAccidentals.push(accs.accs[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!found) {\n\t\t\t\t\tif (!multilineVars.key.explicitAccidentals)\n\t\t\t\t\t\tmultilineVars.key.explicitAccidentals = [];\n\t\t\t\t\tmultilineVars.key.explicitAccidentals.push(accs.accs[i]);\n\t\t\t\t\tmultilineVars.key.accidentals.push(accs.accs[i]);\n\t\t\t\t\tif (multilineVars.key.impliedNaturals) {\n\t\t\t\t\t\tfor (var kkk = 0; kkk < multilineVars.key.impliedNaturals.length; kkk++) {\n\t\t\t\t\t\t\tif (multilineVars.key.impliedNaturals[kkk].note === accs.accs[i].note)\n\t\t\t\t\t\t\t\tmultilineVars.key.impliedNaturals.splice(kkk, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Now see if any optional parameters are present. They have the form \"key=value\", except that \"clef=\" is optional\n\t\tvar token;\n\t\twhile (tokens.length > 0) {\n\t\t\tswitch (tokens[0].token) {\n\t\t\t\tcase \"m\":\n\t\t\t\tcase \"middle\":\n\t\t\t\t\ttokens.shift();\n\t\t\t\t\tif (tokens.length === 0) { warn(\"Expected = after middle\", str, 0); return ret; }\n\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\tif (token.token !== \"=\") { warn(\"Expected = after middle\", str, token.start); break; }\n\t\t\t\t\tif (tokens.length === 0) { warn(\"Expected parameter after middle=\", str, 0); return ret; }\n\t\t\t\t\tvar pitch = tokenizer.getPitchFromTokens(tokens);\n\t\t\t\t\tif (pitch.warn)\n\t\t\t\t\t\twarn(pitch.warn, str, 0);\n\t\t\t\t\tif (pitch.position)\n\t\t\t\t\t\tmultilineVars.clef.verticalPos = pitch.position - 6;\t// we get the position from the middle line, but want to offset it to the first ledger line.\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"transpose\":\n\t\t\t\t\ttokens.shift();\n\t\t\t\t\tif (tokens.length === 0) { warn(\"Expected = after transpose\", str, 0); return ret; }\n\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\tif (token.token !== \"=\") { warn(\"Expected = after transpose\", str, token.start); break; }\n\t\t\t\t\tif (tokens.length === 0) { warn(\"Expected parameter after transpose=\", str, 0); return ret; }\n\t\t\t\t\tif (tokens[0].type !== 'number') { warn(\"Expected number after transpose\", str, tokens[0].start); break; }\n\t\t\t\t\tmultilineVars.clef.transpose = tokens[0].intt;\n\t\t\t\t\ttokens.shift();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"stafflines\":\n\t\t\t\t\ttokens.shift();\n\t\t\t\t\tif (tokens.length === 0) { warn(\"Expected = after stafflines\", str, 0); return ret; }\n\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\tif (token.token !== \"=\") { warn(\"Expected = after stafflines\", str, token.start); break; }\n\t\t\t\t\tif (tokens.length === 0) { warn(\"Expected parameter after stafflines=\", str, 0); return ret; }\n\t\t\t\t\tif (tokens[0].type !== 'number') { warn(\"Expected number after stafflines\", str, tokens[0].start); break; }\n\t\t\t\t\tmultilineVars.clef.stafflines = tokens[0].intt;\n\t\t\t\t\ttokens.shift();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"staffscale\":\n\t\t\t\t\ttokens.shift();\n\t\t\t\t\tif (tokens.length === 0) { warn(\"Expected = after staffscale\", str, 0); return ret; }\n\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\tif (token.token !== \"=\") { warn(\"Expected = after staffscale\", str, token.start); break; }\n\t\t\t\t\tif (tokens.length === 0) { warn(\"Expected parameter after staffscale=\", str, 0); return ret; }\n\t\t\t\t\tif (tokens[0].type !== 'number') { warn(\"Expected number after staffscale\", str, tokens[0].start); break; }\n\t\t\t\t\tmultilineVars.clef.staffscale = tokens[0].floatt;\n\t\t\t\t\ttokens.shift();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"octave\":\n\t\t\t\t\ttokens.shift();\n\t\t\t\t\tif (tokens.length === 0) { warn(\"Expected = after octave\", str, 0); return ret; }\n\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\tif (token.token !== \"=\") { warn(\"Expected = after octave\", str, token.start); break; }\n\t\t\t\t\tif (tokens.length === 0) { warn(\"Expected parameter after octave=\", str, 0); return ret; }\n\t\t\t\t\tif (tokens[0].type !== 'number') { warn(\"Expected number after octave\", str, tokens[0].start); break; }\n\t\t\t\t\tmultilineVars.octave = tokens[0].intt;\n\t\t\t\t\ttokens.shift();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"style\":\n\t\t\t\t\ttokens.shift();\n\t\t\t\t\tif (tokens.length === 0) { warn(\"Expected = after style\", str, 0); return ret; }\n\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\tif (token.token !== \"=\") { warn(\"Expected = after style\", str, token.start); break; }\n\t\t\t\t\tif (tokens.length === 0) { warn(\"Expected parameter after style=\", str, 0); return ret; }\n\t\t\t\t\tswitch (tokens[0].token) {\n\t\t\t\t\t\tcase \"normal\":\n\t\t\t\t\t\tcase \"harmonic\":\n\t\t\t\t\t\tcase \"rhythm\":\n\t\t\t\t\t\tcase \"x\":\n\t\t\t\t\t\tcase \"triangle\":\n\t\t\t\t\t\t\tmultilineVars.style = tokens[0].token;\n\t\t\t\t\t\t\ttokens.shift();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\twarn(\"error parsing style element: \" + tokens[0].token, str, tokens[0].start);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"clef\":\n\t\t\t\t\ttokens.shift();\n\t\t\t\t\tif (tokens.length === 0) { warn(\"Expected = after clef\", str, 0); return ret; }\n\t\t\t\t\ttoken = tokens.shift();\n\t\t\t\t\tif (token.token !== \"=\") { warn(\"Expected = after clef\", str, token.start); break; }\n\t\t\t\t\tif (tokens.length === 0) { warn(\"Expected parameter after clef=\", str, 0); return ret; }\n\t\t\t\t\t//break; yes, we want to fall through. That allows \"clef=\" to be optional.\n\t\t\t\tcase \"treble\":\n\t\t\t\tcase \"bass\":\n\t\t\t\tcase \"alto\":\n\t\t\t\tcase \"tenor\":\n\t\t\t\tcase \"perc\":\n\t\t\t\tcase \"none\":\n\t\t\t\t\t// clef is [clef=] [clef type] [line number] [+8|-8]\n\t\t\t\t\tvar clef = tokens.shift();\n\t\t\t\t\tswitch (clef.token) {\n\t\t\t\t\t\tcase 'treble':\n\t\t\t\t\t\tcase 'tenor':\n\t\t\t\t\t\tcase 'alto':\n\t\t\t\t\t\tcase 'bass':\n\t\t\t\t\t\tcase 'perc':\n\t\t\t\t\t\tcase 'none':\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'C': clef.token = 'alto'; break;\n\t\t\t\t\t\tcase 'F': clef.token = 'bass'; break;\n\t\t\t\t\t\tcase 'G': clef.token = 'treble'; break;\n\t\t\t\t\t\tcase 'c': clef.token = 'alto'; break;\n\t\t\t\t\t\tcase 'f': clef.token = 'bass'; break;\n\t\t\t\t\t\tcase 'g': clef.token = 'treble'; break;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\twarn(\"Expected clef name. Found \" + clef.token, str, clef.start);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (tokens.length > 0 && tokens[0].type === 'number') {\n\t\t\t\t\t\tclef.token += tokens[0].token;\n\t\t\t\t\t\ttokens.shift();\n\t\t\t\t\t}\n\t\t\t\t\tif (tokens.length > 1 && (tokens[0].token === '-' || tokens[0].token === '+' || tokens[0].token === '^' || tokens[0].token === '_') && tokens[1].token === '8') {\n\t\t\t\t\t\tclef.token += tokens[0].token + tokens[1].token;\n\t\t\t\t\t\ttokens.shift();\n\t\t\t\t\t\ttokens.shift();\n\t\t\t\t\t}\n\t\t\t\t\tmultilineVars.clef = {type: clef.token, verticalPos: calcMiddle(clef.token, 0)};\n\t\t\t\t\tif (multilineVars.currentVoice && multilineVars.currentVoice.transpose !== undefined)\n\t\t\t\t\t\tmultilineVars.clef.transpose = multilineVars.currentVoice.transpose;\n\t\t\t\t\tret.foundClef = true;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\twarn(\"Unknown parameter: \" + tokens[0].token, str, tokens[0].start);\n\t\t\t\t\ttokens.shift();\n\t\t\t}\n\t\t}\n\t\treturn ret;\n\t};\n\n\tvar setCurrentVoice = function(id) {\n\t\tvar currentVoice = multilineVars.voices[id]\n\t\tif (multilineVars.currentVoice) {\n\t\t\tif (multilineVars.currentVoice.index === currentVoice.index && multilineVars.currentVoice.staffNum === currentVoice.staffNum)\n\t\t\t\treturn // there was no change so don't reset it.\n\t\t}\n\t\tmultilineVars.currentVoice = currentVoice;\n\t\treturn tuneBuilder.setCurrentVoice(currentVoice.staffNum, currentVoice.index, id);\n\t};\n\n\tparseKeyVoice.parseVoice = function(line, i, e) {\n\t\t//First truncate the string to the first non-space character after V: through either the\n\t\t//end of the line or a % character. Then remove trailing spaces, too.\n\t\tvar ret = tokenizer.getMeat(line, i, e);\n\t\tvar start = ret.start;\n\t\tvar end = ret.end;\n\t\t//The first thing on the line is the ID. It can be any non-space string and terminates at the\n\t\t//first space.\n\t\tvar id = tokenizer.getToken(line, start, end);\n\t\tif (id.length === 0) {\n\t\t\twarn(\"Expected a voice id\", line, start);\n\t\t\treturn;\n\t\t}\n\t\tvar isNew = false;\n\t\tif (multilineVars.voices[id] === undefined) {\n\t\t\tmultilineVars.voices[id] = {};\n\t\t\tisNew = true;\n\t\t\tif (multilineVars.score_is_present)\n\t\t\t\twarn(\"Can't have an unknown V: id when the %score directive is present\", line, start);\n\t\t}\n\t\tstart += id.length;\n\t\tstart += tokenizer.eatWhiteSpace(line, start);\n\n\t\tvar staffInfo = {startStaff: isNew};\n\t\tvar addNextTokenToStaffInfo = function(name) {\n\t\t\tvar attr = tokenizer.getVoiceToken(line, start, end);\n\t\t\tif (attr.warn !== undefined)\n\t\t\t\twarn(\"Expected value for \" + name + \" in voice: \" + attr.warn, line, start);\n\t\t\telse if (attr.err !== undefined)\n\t\t\t\twarn(\"Expected value for \" + name + \" in voice: \" + attr.err, line, start);\n\t\t\telse if (attr.token.length === 0 && line[start] !== '\"')\n\t\t\t\twarn(\"Expected value for \" + name + \" in voice\", line, start);\n\t\t\telse\n\t\t\t\tstaffInfo[name] = attr.token;\n\t\t\tstart += attr.len;\n\t\t};\n\t\tvar addNextTokenToVoiceInfo = function(id, name, type) {\n\t\t\tvar attr = tokenizer.getVoiceToken(line, start, end);\n\t\t\tif (attr.warn !== undefined)\n\t\t\t\twarn(\"Expected value for \" + name + \" in voice: \" + attr.warn, line, start);\n\t\t\telse if (attr.err !== undefined)\n\t\t\t\twarn(\"Expected value for \" + name + \" in voice: \" + attr.err, line, start);\n\t\t\telse if (attr.token.length === 0 && line[start] !== '\"')\n\t\t\t\twarn(\"Expected value for \" + name + \" in voice\", line, start);\n\t\t\telse {\n\t\t\t\tif (type === 'number')\n\t\t\t\t\tattr.token = parseFloat(attr.token);\n\t\t\t\tmultilineVars.voices[id][name] = attr.token;\n\t\t\t}\n\t\t\tstart += attr.len;\n\t\t};\n\t\tvar getNextToken = function(name, type) {\n\t\t\tvar attr = tokenizer.getVoiceToken(line, start, end);\n\t\t\tif (attr.warn !== undefined)\n\t\t\t\twarn(\"Expected value for \" + name + \" in voice: \" + attr.warn, line, start);\n\t\t\telse if (attr.err !== undefined)\n\t\t\t\twarn(\"Expected value for \" + name + \" in voice: \" + attr.err, line, start);\n\t\t\telse if (attr.token.length === 0 && line[start] !== '\"')\n\t\t\t\twarn(\"Expected value for \" + name + \" in voice\", line, start);\n\t\t\telse {\n\t\t\t\tif (type === 'number')\n\t\t\t\t\tattr.token = parseFloat(attr.token);\n\t\t\t\treturn attr.token;\n\t\t\t}\n\t\t\tstart += attr.len;\n\t\t};\n\t\tvar addNextNoteTokenToVoiceInfo = function(id, name) {\n\t\t\tvar noteToTransposition = {\n\t\t\t\t\"_B\": 2,\n\t\t\t\t\"_E\": 9,\n\t\t\t\t\"_b\": -10,\n\t\t\t\t\"_e\": -3\n\t\t\t};\n\t\t\tvar attr = tokenizer.getVoiceToken(line, start, end);\n\t\t\tif (attr.warn !== undefined)\n\t\t\t\twarn(\"Expected one of (_B, _E, _b, _e) for \" + name + \" in voice: \" + attr.warn, line, start);\n\t\t\telse if (attr.token.length === 0 && line[start] !== '\"')\n\t\t\t\twarn(\"Expected one of (_B, _E, _b, _e) for \" + name + \" in voice\", line, start);\n\t\t\telse {\n\t\t\t\tvar t = noteToTransposition[attr.token];\n\t\t\t\tif (!t)\n\t\t\t\t\twarn(\"Expected one of (_B, _E, _b, _e) for \" + name + \" in voice\", line, start);\n\t\t\t\telse\n\t\t\t\t\tmultilineVars.voices[id][name] = t;\n\t\t\t}\n\t\t\tstart += attr.len;\n\t\t};\n\n\t\t//Then the following items can occur in any order:\n\t\twhile (start < end) {\n\t\t\tvar token = tokenizer.getVoiceToken(line, start, end);\n\t\t\tstart += token.len;\n\n\t\t\tif (token.warn) {\n\t\t\t\twarn(\"Error parsing voice: \" + token.warn, line, start);\n\t\t\t} else {\n\t\t\t\tvar attr = null;\n\t\t\t\tswitch (token.token) {\n\t\t\t\t\tcase 'clef':\n\t\t\t\t\tcase 'cl':\n\t\t\t\t\t\taddNextTokenToStaffInfo('clef');\n\t\t\t\t\t\t// TODO-PER: check for a legal clef; do octavizing\n\t\t\t\t\t\tvar oct = 0;\n\t//\t\t\t\t\t\t\tfor (var ii = 0; ii < staffInfo.clef.length; ii++) {\n\t//\t\t\t\t\t\t\t\tif (staffInfo.clef[ii] === ',') oct -= 7;\n\t//\t\t\t\t\t\t\t\telse if (staffInfo.clef[ii] === \"'\") oct += 7;\n\t//\t\t\t\t\t\t\t}\n\t\t\t\t\t\tif (staffInfo.clef !== undefined) {\n\t\t\t\t\t\t  staffInfo.clef = staffInfo.clef.replace(/[',]/g, \"\"); //'//comment for emacs formatting of regexp\n\t\t\t\t\t\t\tif (staffInfo.clef.indexOf('+16') !== -1) {\n\t\t\t\t\t\t\t\toct += 14;\n\t\t\t\t\t\t\t\tstaffInfo.clef = staffInfo.clef.replace('+16', '');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstaffInfo.verticalPos = calcMiddle(staffInfo.clef, oct);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'treble':\n\t\t\t\t\tcase 'bass':\n\t\t\t\t\tcase 'tenor':\n\t\t\t\t\tcase 'alto':\n\t\t\t\t\tcase 'perc':\n\t\t\t\t\tcase 'none':\n\t\t\t\t\tcase 'treble\\'':\n\t\t\t\t\tcase 'bass\\'':\n\t\t\t\t\tcase 'tenor\\'':\n\t\t\t\t\tcase 'alto\\'':\n\t\t\t\t\tcase 'none\\'':\n\t\t\t\t\tcase 'treble\\'\\'':\n\t\t\t\t\tcase 'bass\\'\\'':\n\t\t\t\t\tcase 'tenor\\'\\'':\n\t\t\t\t\tcase 'alto\\'\\'':\n\t\t\t\t\tcase 'none\\'\\'':\n\t\t\t\t\tcase 'treble,':\n\t\t\t\t\tcase 'bass,':\n\t\t\t\t\tcase 'tenor,':\n\t\t\t\t\tcase 'alto,':\n\t\t\t\t\tcase 'none,':\n\t\t\t\t\tcase 'treble,,':\n\t\t\t\t\tcase 'bass,,':\n\t\t\t\t\tcase 'tenor,,':\n\t\t\t\t\tcase 'alto,,':\n\t\t\t\t\tcase 'none,,':\n// MAE 26 May 2025 Start of additional clefs\n\t\t\t\t\tcase 'treble+8':\n\t\t\t\t\tcase 'treble-8':\n\t\t\t\t\tcase 'treble^8':\n\t\t\t\t\tcase 'treble_8':\n\t\t\t\t\tcase 'treble1':\n\t\t\t\t\tcase 'treble2':\n\t\t\t\t\tcase 'treble3':\n\t\t\t\t\tcase 'treble4':\n\t\t\t\t\tcase 'treble5':\n\t\t\t\t\tcase 'bass+8':\n\t\t\t\t\tcase 'bass-8':\n\t\t\t\t\tcase 'bass^8':\n\t\t\t\t\tcase 'bass_8':\n\t\t\t\t\tcase 'bass+16':\n\t\t\t\t\tcase 'bass-16':\n\t\t\t\t\tcase 'bass^16':\n\t\t\t\t\tcase 'bass_16':\n\t\t\t\t\tcase 'bass1':\n\t\t\t\t\tcase 'bass2':\n\t\t\t\t\tcase 'bass3':\n\t\t\t\t\tcase 'bass4':\n\t\t\t\t\tcase 'bass5':\n\t\t\t\t\tcase 'tenor1':\n\t\t\t\t\tcase 'tenor2':\n\t\t\t\t\tcase 'tenor3':\n\t\t\t\t\tcase 'tenor4':\n\t\t\t\t\tcase 'tenor5':\n\t\t\t\t\tcase 'alto1':\n\t\t\t\t\tcase 'alto2':\n\t\t\t\t\tcase 'alto3':\n\t\t\t\t\tcase 'alto4':\n\t\t\t\t\tcase 'alto5':\n\t\t\t\t\tcase 'alto+8':\n\t\t\t\t\tcase 'alto-8':\n\t\t\t\t\tcase 'alto^8':\n\t\t\t\t\tcase 'alto_8':\n// MAE 26 May 2025 End of additional clefs\n\n\t\t\t\t\t\t// TODO-PER: handle the octave indicators on the clef by changing the middle property\n\t\t\t\t\t\tvar oct2 = 0;\n\t\t\t\t\t\tstaffInfo.clef = token.token.replace(/[',]/g, \"\"); //'//comment for emacs formatting of regexp\n\t\t\t\t\t\tstaffInfo.verticalPos = calcMiddle(staffInfo.clef, oct2);\n\t\t\t\t\t\tmultilineVars.voices[id].clef = token.token;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'staves':\n\t\t\t\t\tcase 'stave':\n\t\t\t\t\tcase 'stv':\n\t\t\t\t\t\taddNextTokenToStaffInfo('staves');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'brace':\n\t\t\t\t\tcase 'brc':\n\t\t\t\t\t\taddNextTokenToStaffInfo('brace');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'bracket':\n\t\t\t\t\tcase 'brk':\n\t\t\t\t\t\taddNextTokenToStaffInfo('bracket');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'name':\n\t\t\t\t\tcase 'nm':\n\t\t\t\t\t\taddNextTokenToStaffInfo('name');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'subname':\n\t\t\t\t\tcase 'sname':\n\t\t\t\t\tcase 'snm':\n\t\t\t\t\t\taddNextTokenToStaffInfo('subname');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'merge':\n\t\t\t\t\t\tstaffInfo.startStaff = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'stem':\n\t\t\t\t\tcase 'stems':\n\t\t\t\t\t\tattr = tokenizer.getVoiceToken(line, start, end);\n\t\t\t\t\t\tif (attr.warn !== undefined)\n\t\t\t\t\t\t\twarn(\"Expected value for stems in voice: \" + attr.warn, line, start);\n\t\t\t\t\t\telse if (attr.err !== undefined)\n\t\t\t\t\t\t\twarn(\"Expected value for stems in voice: \" + attr.err, line, start);\n\t\t\t\t\t\telse if (attr.token === 'up' || attr.token === 'down')\n\t\t\t\t\t\t\tmultilineVars.voices[id].stem = attr.token;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\twarn(\"Expected up or down for voice stem\", line, start);\n\t\t\t\t\t\tstart += attr.len;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'up':\n\t\t\t\t\tcase 'down':\n\t\t\t\t\t\tmultilineVars.voices[id].stem = token.token;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'middle':\n\t\t\t\t\tcase 'm':\n\t\t\t\t\t\taddNextTokenToStaffInfo('verticalPos');\n\t\t\t\t\t\tstaffInfo.verticalPos = parseMiddle(staffInfo.verticalPos).mid;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'gchords':\n\t\t\t\t\tcase 'gch':\n\t\t\t\t\t\tmultilineVars.voices[id].suppressChords = true;\n\t\t\t\t\t\t// gchords can stand on its own, or it could be gchords=0.\n\t\t\t\t\t\tattr = tokenizer.getVoiceToken(line, start, end);\n\t\t\t\t\t\tif (attr.token === \"0\")\n\t\t\t\t\t\t\tstart = start + attr.len;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'space':\n\t\t\t\t\tcase 'spc':\n\t\t\t\t\t\taddNextTokenToStaffInfo('spacing');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'scale':\n\t\t\t\t\t\taddNextTokenToVoiceInfo(id, 'scale', 'number');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'score':\n\t\t\t\t\t\taddNextNoteTokenToVoiceInfo(id, 'scoreTranspose');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'transpose':\n\t\t\t\t\t\taddNextTokenToVoiceInfo(id, 'transpose', 'number');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'stafflines':\n\t\t\t\t\t\taddNextTokenToVoiceInfo(id, 'stafflines', 'number');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'staffscale':\n\t\t\t\t\t\t// TODO-PER: This is passed to the engraver, but the engraver ignores it.\n\t\t\t\t\t\taddNextTokenToVoiceInfo(id, 'staffscale', 'number');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'octave':\n\t\t\t\t\t\taddNextTokenToVoiceInfo(id, 'octave', 'number');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'volume':\n\t\t\t\t\t\t// TODO-PER: This is accepted, but not implemented, yet.\n\t\t\t\t\t\taddNextTokenToVoiceInfo(id, 'volume', 'number');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'cue':\n\t\t\t\t\t\t// TODO-PER: This is accepted, but not implemented, yet.\n\t\t\t\t\t\tvar cue = getNextToken('cue', 'string');\n\t\t\t\t\t\tif (cue === 'on')\n\t\t\t\t\t\t\tmultilineVars.voices[id].scale = 0.6;\n\t\t\t\t\t\telse multilineVars.voices[id].scale = 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"style\":\n\t\t\t\t\t\tattr = tokenizer.getVoiceToken(line, start, end);\n\t\t\t\t\t\tif (attr.warn !== undefined)\n\t\t\t\t\t\t\twarn(\"Expected value for style in voice: \" + attr.warn, line, start);\n\t\t\t\t\t\telse if (attr.err !== undefined)\n\t\t\t\t\t\t\twarn(\"Expected value for style in voice: \" + attr.err, line, start);\n\t\t\t\t\t\telse if (attr.token === 'normal' || attr.token === 'harmonic' || attr.token === 'rhythm' || attr.token === 'x' || attr.token === 'triangle')\n\t\t\t\t\t\t\tmultilineVars.voices[id].style = attr.token;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\twarn(\"Expected one of [normal, harmonic, rhythm, x, triangle] for voice style\", line, start);\n\t\t\t\t\t\tstart += attr.len;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t// default:\n\t\t\t\t\t// Use this to find V: usages that aren't handled.\n\t\t\t\t\t// \tconsole.log(\"parse voice\", token, tune.metaText.title);\n\t\t\t\t}\n\t\t\t}\n\t\t\tstart += tokenizer.eatWhiteSpace(line, start);\n\t\t}\n\n\t\t// now we've filled up staffInfo, figure out what to do with this voice\n\t\t// TODO-PER: It is unclear from the standard and the examples what to do with brace, bracket, and staves, so they are ignored for now.\n\t\tif (staffInfo.startStaff || multilineVars.staves.length === 0) {\n\t\t\tmultilineVars.staves.push({index: multilineVars.staves.length, meter: multilineVars.origMeter});\n\t\t\tif (!multilineVars.score_is_present)\n\t\t\t\tmultilineVars.staves[multilineVars.staves.length-1].numVoices = 0;\n\t\t}\n\t\tif (multilineVars.voices[id].staffNum === undefined) {\n\t\t\t// store where to write this for quick access later.\n\t\t\tmultilineVars.voices[id].staffNum = multilineVars.staves.length-1;\n\t\t\tvar vi = 0;\n\t\t\tfor(var v in multilineVars.voices) {\n\t\t\t\tif(multilineVars.voices.hasOwnProperty(v)) {\n\t\t\t\t\tif (multilineVars.voices[v].staffNum === multilineVars.voices[id].staffNum)\n\t\t\t\t\t\tvi++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmultilineVars.voices[id].index = vi-1;\n\t\t}\n\t\tvar s = multilineVars.staves[multilineVars.voices[id].staffNum];\n\t\tif (!multilineVars.score_is_present)\n\t\t\ts.numVoices++;\n\t\tif (staffInfo.clef) s.clef = {type: staffInfo.clef, verticalPos: staffInfo.verticalPos};\n\t\tif (staffInfo.spacing) s.spacing_below_offset = staffInfo.spacing;\n\t\tif (staffInfo.verticalPos) s.verticalPos = staffInfo.verticalPos;\n\n\t\tif (staffInfo.name) {if (s.name) s.name.push(staffInfo.name); else s.name = [ staffInfo.name ];}\n\t\tif (staffInfo.subname) {if (s.subname) s.subname.push(staffInfo.subname); else s.subname = [ staffInfo.subname ];}\n\n\t\treturn setCurrentVoice(id);\n\t};\n\n})();\n\nmodule.exports = parseKeyVoice;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL2FiY19wYXJzZV9rZXlfdm9pY2UuanMiLCJtYXBwaW5ncyI6IkFBQUEscUJBQXFCLG1CQUFPLENBQUMsMEZBQXVCO0FBQ3BELGdCQUFnQixtQkFBTyxDQUFDLDhFQUFpQjs7QUFFekM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYyxrQ0FBa0M7QUFDaEQsZ0JBQWdCLG9DQUFvQztBQUNwRCxnQkFBZ0Isb0NBQW9DO0FBQ3BELGdCQUFnQixvQ0FBb0M7QUFDcEQsZ0JBQWdCLG9DQUFvQztBQUNwRCxlQUFlLGtDQUFrQztBQUNqRCxlQUFlLGtDQUFrQztBQUNqRCxlQUFlLG1DQUFtQztBQUNsRCxlQUFlLG1DQUFtQztBQUNsRCxlQUFlLG9DQUFvQztBQUNuRCxZQUFZLGdDQUFnQztBQUM1QyxZQUFZLHNCQUFzQjtBQUNsQyxZQUFZLGtDQUFrQztBQUM5QyxjQUFjLG9DQUFvQztBQUNsRCxjQUFjLG9DQUFvQztBQUNsRCxjQUFjLG9DQUFvQztBQUNsRCxjQUFjLG9DQUFvQztBQUNsRCxlQUFlLGtDQUFrQztBQUNqRCxlQUFlLGtDQUFrQztBQUNqRCxlQUFlLGtDQUFrQztBQUNqRCxlQUFlLGtDQUFrQztBQUNqRCxhQUFhLGlDQUFpQztBQUM5QyxhQUFhLGlDQUFpQztBQUM5QyxhQUFhLGtDQUFrQztBQUMvQyxhQUFhLGtDQUFrQztBQUMvQyxhQUFhLG1DQUFtQztBQUNoRCxhQUFhLGlDQUFpQztBQUM5QyxjQUFjLGlDQUFpQztBQUMvQyxjQUFjLGlDQUFpQztBQUMvQyxjQUFjLGlDQUFpQztBQUMvQyxjQUFjLGlDQUFpQztBQUMvQyxjQUFjLG1DQUFtQztBQUNqRCxZQUFZLGlDQUFpQztBQUM3QyxhQUFhLGlDQUFpQztBQUM5QyxhQUFhLGlDQUFpQztBQUM5QyxhQUFhLGlDQUFpQztBQUM5QyxhQUFhLGlDQUFpQztBQUM5QyxhQUFhLG1DQUFtQztBQUNoRCxjQUFjLG1DQUFtQztBQUNqRCxjQUFjLG1DQUFtQztBQUNqRCxjQUFjLG1DQUFtQztBQUNqRCxjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGNBQWM7QUFDZDtBQUNBLHVDQUF1QztBQUN2QyxHQUFHO0FBQ0g7QUFDQTs7QUFFQSxnQkFBZ0I7O0FBRWhCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1osVUFBVSxnQkFBZ0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHVDQUF1QztBQUNsRDs7QUFFQTtBQUNBLGtCQUFrQixpQkFBaUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwyQkFBMkIsMEJBQTBCLEdBQUcsd0JBQXdCLEdBQUcsd0JBQXdCO0FBQ3JJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMENBQTBDO0FBQ2hFLG9CQUFvQixnQ0FBZ0M7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZ0NBQWdDO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxtREFBbUQ7QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBLG1CQUFtQixzQkFBc0I7QUFDekM7QUFDQSxvQkFBb0Isb0RBQW9EO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0RBQWdEO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHlDQUF5QztBQUN6RTtBQUNBLGdDQUFnQyxtREFBbUQ7QUFDbkYsZ0NBQWdDLGtEQUFrRDtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsNENBQTRDO0FBQzVFO0FBQ0EsZ0NBQWdDLHNEQUFzRDtBQUN0RixnQ0FBZ0MscURBQXFEO0FBQ3JGLHdDQUF3QywrREFBK0Q7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw2Q0FBNkM7QUFDN0U7QUFDQSxnQ0FBZ0MsdURBQXVEO0FBQ3ZGLGdDQUFnQyxzREFBc0Q7QUFDdEYsd0NBQXdDLGdFQUFnRTtBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDZDQUE2QztBQUM3RTtBQUNBLGdDQUFnQyx1REFBdUQ7QUFDdkYsZ0NBQWdDLHNEQUFzRDtBQUN0Rix3Q0FBd0MsZ0VBQWdFO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MseUNBQXlDO0FBQ3pFO0FBQ0EsZ0NBQWdDLG1EQUFtRDtBQUNuRixnQ0FBZ0Msa0RBQWtEO0FBQ2xGLHdDQUF3Qyw0REFBNEQ7QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyx3Q0FBd0M7QUFDeEU7QUFDQSxnQ0FBZ0Msa0RBQWtEO0FBQ2xGLGdDQUFnQyxpREFBaUQ7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsdUNBQXVDO0FBQ3ZFO0FBQ0EsZ0NBQWdDLGlEQUFpRDtBQUNqRixnQ0FBZ0MsZ0RBQWdEO0FBQ2hGLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQyxxQ0FBcUM7QUFDckMsdUNBQXVDO0FBQ3ZDLHFDQUFxQztBQUNyQyxxQ0FBcUM7QUFDckMsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0EsMkJBQTJCLDRCQUE0QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RDtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx5REFBeUQ7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixtRUFBbUU7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7O0FBRUEsdUJBQXVCLHlDQUF5QztBQUNoRSwwQkFBMEIsa0RBQWtEOztBQUU1RTtBQUNBOztBQUVBLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvcGFyc2UvYWJjX3BhcnNlX2tleV92b2ljZS5qcz82YmEwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBwYXJzZURpcmVjdGl2ZSA9IHJlcXVpcmUoJy4vYWJjX3BhcnNlX2RpcmVjdGl2ZScpO1xudmFyIHRyYW5zcG9zZSA9IHJlcXVpcmUoJy4vYWJjX3RyYW5zcG9zZScpO1xuXG52YXIgcGFyc2VLZXlWb2ljZSA9IHt9O1xuXG4oZnVuY3Rpb24oKSB7XG5cdHZhciB0b2tlbml6ZXI7XG5cdHZhciB3YXJuO1xuXHR2YXIgbXVsdGlsaW5lVmFycztcblx0dmFyIHR1bmU7XG5cdHZhciB0dW5lQnVpbGRlcjtcblx0cGFyc2VLZXlWb2ljZS5pbml0aWFsaXplID0gZnVuY3Rpb24odG9rZW5pemVyXywgd2Fybl8sIG11bHRpbGluZVZhcnNfLCB0dW5lXywgdHVuZUJ1aWxkZXJfKSB7XG5cdFx0dG9rZW5pemVyID0gdG9rZW5pemVyXztcblx0XHR3YXJuID0gd2Fybl87XG5cdFx0bXVsdGlsaW5lVmFycyA9IG11bHRpbGluZVZhcnNfO1xuXHRcdHR1bmUgPSB0dW5lXztcblx0XHR0dW5lQnVpbGRlciA9IHR1bmVCdWlsZGVyXztcblx0fTtcblxuXHRwYXJzZUtleVZvaWNlLnN0YW5kYXJkS2V5ID0gZnVuY3Rpb24oa2V5TmFtZSwgcm9vdCwgYWNjLCBsb2NhbFRyYW5zcG9zZSkge1xuXHRcdHJldHVybiB0cmFuc3Bvc2Uua2V5U2lnbmF0dXJlKG11bHRpbGluZVZhcnMsIGtleU5hbWUsIHJvb3QsIGFjYywgbG9jYWxUcmFuc3Bvc2UpO1xuXHR9O1xuXG5cdHZhciBjbGVmTGluZXMgPSB7XG5cdFx0J3RyZWJsZSc6IHsgY2xlZjogJ3RyZWJsZScsIHBpdGNoOiA0LCBtaWQ6IDAgfSxcblx0XHQndHJlYmxlKzgnOiB7IGNsZWY6ICd0cmVibGUrOCcsIHBpdGNoOiA0LCBtaWQ6IDAgfSxcblx0XHQndHJlYmxlLTgnOiB7IGNsZWY6ICd0cmVibGUtOCcsIHBpdGNoOiA0LCBtaWQ6IDAgfSxcblx0XHQndHJlYmxlXjgnOiB7IGNsZWY6ICd0cmVibGUrOCcsIHBpdGNoOiA0LCBtaWQ6IDAgfSxcblx0XHQndHJlYmxlXzgnOiB7IGNsZWY6ICd0cmVibGUtOCcsIHBpdGNoOiA0LCBtaWQ6IDAgfSxcblx0XHQndHJlYmxlMSc6IHsgY2xlZjogJ3RyZWJsZScsIHBpdGNoOiAyLCBtaWQ6IDIgfSxcblx0XHQndHJlYmxlMic6IHsgY2xlZjogJ3RyZWJsZScsIHBpdGNoOiA0LCBtaWQ6IDAgfSxcblx0XHQndHJlYmxlMyc6IHsgY2xlZjogJ3RyZWJsZScsIHBpdGNoOiA2LCBtaWQ6IC0yIH0sXG5cdFx0J3RyZWJsZTQnOiB7IGNsZWY6ICd0cmVibGUnLCBwaXRjaDogOCwgbWlkOiAtNCB9LFxuXHRcdCd0cmVibGU1JzogeyBjbGVmOiAndHJlYmxlJywgcGl0Y2g6IDEwLCBtaWQ6IC02IH0sXG5cdFx0J3BlcmMnOiB7IGNsZWY6ICdwZXJjJywgcGl0Y2g6IDYsIG1pZDogMCB9LFxuXHRcdCdub25lJzogeyBjbGVmOiAnbm9uZScsIG1pZDogMCB9LFxuXHRcdCdiYXNzJzogeyBjbGVmOiAnYmFzcycsIHBpdGNoOiA4LCBtaWQ6IC0xMiB9LFxuXHRcdCdiYXNzKzgnOiB7IGNsZWY6ICdiYXNzKzgnLCBwaXRjaDogOCwgbWlkOiAtMTIgfSxcblx0XHQnYmFzcy04JzogeyBjbGVmOiAnYmFzcy04JywgcGl0Y2g6IDgsIG1pZDogLTEyIH0sXG5cdFx0J2Jhc3NeOCc6IHsgY2xlZjogJ2Jhc3MrOCcsIHBpdGNoOiA4LCBtaWQ6IC0xMiB9LFxuXHRcdCdiYXNzXzgnOiB7IGNsZWY6ICdiYXNzLTgnLCBwaXRjaDogOCwgbWlkOiAtMTIgfSxcblx0XHQnYmFzcysxNic6IHsgY2xlZjogJ2Jhc3MnLCBwaXRjaDogOCwgbWlkOiAtMTIgfSxcblx0XHQnYmFzcy0xNic6IHsgY2xlZjogJ2Jhc3MnLCBwaXRjaDogOCwgbWlkOiAtMTIgfSxcblx0XHQnYmFzc14xNic6IHsgY2xlZjogJ2Jhc3MnLCBwaXRjaDogOCwgbWlkOiAtMTIgfSxcblx0XHQnYmFzc18xNic6IHsgY2xlZjogJ2Jhc3MnLCBwaXRjaDogOCwgbWlkOiAtMTIgfSxcblx0XHQnYmFzczEnOiB7IGNsZWY6ICdiYXNzJywgcGl0Y2g6IDIsIG1pZDogLTYgfSxcblx0XHQnYmFzczInOiB7IGNsZWY6ICdiYXNzJywgcGl0Y2g6IDQsIG1pZDogLTggfSxcblx0XHQnYmFzczMnOiB7IGNsZWY6ICdiYXNzJywgcGl0Y2g6IDYsIG1pZDogLTEwIH0sXG5cdFx0J2Jhc3M0JzogeyBjbGVmOiAnYmFzcycsIHBpdGNoOiA4LCBtaWQ6IC0xMiB9LFxuXHRcdCdiYXNzNSc6IHsgY2xlZjogJ2Jhc3MnLCBwaXRjaDogMTAsIG1pZDogLTE0IH0sXG5cdFx0J3Rlbm9yJzogeyBjbGVmOiAnYWx0bycsIHBpdGNoOiA4LCBtaWQ6IC04IH0sXG5cdFx0J3Rlbm9yMSc6IHsgY2xlZjogJ2FsdG8nLCBwaXRjaDogMiwgbWlkOiAtMiB9LFxuXHRcdCd0ZW5vcjInOiB7IGNsZWY6ICdhbHRvJywgcGl0Y2g6IDQsIG1pZDogLTQgfSxcblx0XHQndGVub3IzJzogeyBjbGVmOiAnYWx0bycsIHBpdGNoOiA2LCBtaWQ6IC02IH0sXG5cdFx0J3Rlbm9yNCc6IHsgY2xlZjogJ2FsdG8nLCBwaXRjaDogOCwgbWlkOiAtOCB9LFxuXHRcdCd0ZW5vcjUnOiB7IGNsZWY6ICdhbHRvJywgcGl0Y2g6IDEwLCBtaWQ6IC0xMCB9LFxuXHRcdCdhbHRvJzogeyBjbGVmOiAnYWx0bycsIHBpdGNoOiA2LCBtaWQ6IC02IH0sXG5cdFx0J2FsdG8xJzogeyBjbGVmOiAnYWx0bycsIHBpdGNoOiAyLCBtaWQ6IC0yIH0sXG5cdFx0J2FsdG8yJzogeyBjbGVmOiAnYWx0bycsIHBpdGNoOiA0LCBtaWQ6IC00IH0sXG5cdFx0J2FsdG8zJzogeyBjbGVmOiAnYWx0bycsIHBpdGNoOiA2LCBtaWQ6IC02IH0sXG5cdFx0J2FsdG80JzogeyBjbGVmOiAnYWx0bycsIHBpdGNoOiA4LCBtaWQ6IC04IH0sXG5cdFx0J2FsdG81JzogeyBjbGVmOiAnYWx0bycsIHBpdGNoOiAxMCwgbWlkOiAtMTAgfSxcblx0XHQnYWx0bys4JzogeyBjbGVmOiAnYWx0bys4JywgcGl0Y2g6IDYsIG1pZDogLTYgfSxcblx0XHQnYWx0by04JzogeyBjbGVmOiAnYWx0by04JywgcGl0Y2g6IDYsIG1pZDogLTYgfSxcblx0XHQnYWx0b144JzogeyBjbGVmOiAnYWx0bys4JywgcGl0Y2g6IDYsIG1pZDogLTYgfSxcblx0XHQnYWx0b184JzogeyBjbGVmOiAnYWx0by04JywgcGl0Y2g6IDYsIG1pZDogLTYgfVxuXHR9O1xuXG5cdHZhciBjYWxjTWlkZGxlID0gZnVuY3Rpb24oY2xlZiwgb2N0KSB7XG5cdFx0dmFyIHZhbHVlID0gY2xlZkxpbmVzW2NsZWZdO1xuXHRcdHZhciBtaWQgPSB2YWx1ZSA/IHZhbHVlLm1pZCA6IDA7XG5cdFx0cmV0dXJuIG1pZCtvY3Q7XG5cdH07XG5cblx0cGFyc2VLZXlWb2ljZS5maXhDbGVmID0gZnVuY3Rpb24oY2xlZikge1xuXHRcdHZhciB2YWx1ZSA9IGNsZWZMaW5lc1tjbGVmLnR5cGVdO1xuXHRcdGlmICh2YWx1ZSkge1xuXHRcdFx0Y2xlZi5jbGVmUG9zID0gdmFsdWUucGl0Y2g7XG5cdFx0XHRjbGVmLnR5cGUgPSB2YWx1ZS5jbGVmO1xuXHRcdH1cblx0fTtcblxuXHRwYXJzZUtleVZvaWNlLmRlZXBDb3B5S2V5ID0gZnVuY3Rpb24oa2V5KSB7XG5cdFx0dmFyIHJldCA9IHsgYWNjaWRlbnRhbHM6IFtdLCByb290OiBrZXkucm9vdCwgYWNjOiBrZXkuYWNjLCBtb2RlOiBrZXkubW9kZSB9O1xuXHRcdGtleS5hY2NpZGVudGFscy5mb3JFYWNoKGZ1bmN0aW9uKGspIHtcblx0XHRyZXQuYWNjaWRlbnRhbHMucHVzaChPYmplY3QuYXNzaWduKHt9LGspKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gcmV0O1xuXHR9O1xuXG5cdHZhciBwaXRjaGVzID0ge0E6IDUsIEI6IDYsIEM6IDAsIEQ6IDEsIEU6IDIsIEY6IDMsIEc6IDQsIGE6IDEyLCBiOiAxMywgYzogNywgZDogOCwgZTogOSwgZjogMTAsIGc6IDExfTtcblxuXHRwYXJzZUtleVZvaWNlLmFkZFBvc1RvS2V5ID0gZnVuY3Rpb24oY2xlZiwga2V5KSB7XG5cdFx0Ly8gU2hpZnQgdGhlIGtleSBzaWduYXR1cmUgZnJvbSB0aGUgdHJlYmxlIHBvc2l0aW9ucyB0byB3aGF0ZXZlciBwb3NpdGlvbiBpcyBuZWVkZWQgZm9yIHRoZSBjbGVmLlxuXHRcdC8vIFRoaXMgbWF5IHB1dCB0aGUga2V5IHNpZ25hdHVyZSB1bm5hdHVyYWxseSBoaWdoIG9yIGxvdywgc28gaWYgaXQgZG9lcywgdGhlbiBzaGlmdCBpdC5cblx0XHR2YXIgbWlkID0gY2xlZi52ZXJ0aWNhbFBvcztcblx0XHRrZXkuYWNjaWRlbnRhbHMuZm9yRWFjaChmdW5jdGlvbihhY2MpIHtcblx0XHRcdHZhciBwaXRjaCA9IHBpdGNoZXNbYWNjLm5vdGVdO1xuXHRcdFx0cGl0Y2ggPSBwaXRjaCAtIG1pZDtcblx0XHRcdGFjYy52ZXJ0aWNhbFBvcyA9IHBpdGNoO1xuXHRcdH0pO1xuXHRcdGlmIChrZXkuaW1wbGllZE5hdHVyYWxzKVxuXHRcdFx0a2V5LmltcGxpZWROYXR1cmFscy5mb3JFYWNoKGZ1bmN0aW9uKGFjYykge1xuXHRcdFx0XHR2YXIgcGl0Y2ggPSBwaXRjaGVzW2FjYy5ub3RlXTtcblx0XHRcdFx0cGl0Y2ggPSBwaXRjaCAtIG1pZDtcblx0XHRcdFx0YWNjLnZlcnRpY2FsUG9zID0gcGl0Y2g7XG5cdFx0XHR9KTtcblxuXHRcdGlmIChtaWQgPCAtMTApIHtcblx0XHRcdGtleS5hY2NpZGVudGFscy5mb3JFYWNoKGZ1bmN0aW9uKGFjYykge1xuXHRcdFx0XHRhY2MudmVydGljYWxQb3MgLT0gNztcblx0XHRcdFx0aWYgKGFjYy52ZXJ0aWNhbFBvcyA+PSAxMSB8fCAoYWNjLnZlcnRpY2FsUG9zID09PSAxMCAmJiBhY2MuYWNjID09PSAnZmxhdCcpKVxuXHRcdFx0XHRcdGFjYy52ZXJ0aWNhbFBvcyAtPSA3O1xuXHRcdFx0XHRpZiAoYWNjLm5vdGUgPT09ICdBJyAmJiBhY2MuYWNjID09PSAnc2hhcnAnIClcblx0XHRcdFx0XHRhY2MudmVydGljYWxQb3MgLT03O1xuXHRcdFx0XHRpZiAoKGFjYy5ub3RlID09PSAnRycgfHwgYWNjLm5vdGUgPT09ICdGJykgJiYgYWNjLmFjYyA9PT0gJ2ZsYXQnIClcblx0XHRcdFx0XHRhY2MudmVydGljYWxQb3MgLT03O1xuXHRcdFx0fSk7XG5cdFx0XHRpZiAoa2V5LmltcGxpZWROYXR1cmFscylcblx0XHRcdFx0a2V5LmltcGxpZWROYXR1cmFscy5mb3JFYWNoKGZ1bmN0aW9uKGFjYykge1xuXHRcdFx0XHRcdGFjYy52ZXJ0aWNhbFBvcyAtPSA3O1xuXHRcdFx0XHRcdGlmIChhY2MudmVydGljYWxQb3MgPj0gMTEgfHwgKGFjYy52ZXJ0aWNhbFBvcyA9PT0gMTAgJiYgYWNjLmFjYyA9PT0gJ2ZsYXQnKSlcblx0XHRcdFx0XHRcdGFjYy52ZXJ0aWNhbFBvcyAtPSA3O1xuXHRcdFx0XHRcdGlmIChhY2Mubm90ZSA9PT0gJ0EnICYmIGFjYy5hY2MgPT09ICdzaGFycCcgKVxuXHRcdFx0XHRcdFx0YWNjLnZlcnRpY2FsUG9zIC09Nztcblx0XHRcdFx0XHRpZiAoKGFjYy5ub3RlID09PSAnRycgfHwgYWNjLm5vdGUgPT09ICdGJykgJiYgYWNjLmFjYyA9PT0gJ2ZsYXQnIClcblx0XHRcdFx0XHRcdGFjYy52ZXJ0aWNhbFBvcyAtPTc7XG5cdFx0XHRcdH0pO1xuXHRcdH0gZWxzZSBpZiAobWlkIDwgLTQpIHtcblx0XHRcdGtleS5hY2NpZGVudGFscy5mb3JFYWNoKGZ1bmN0aW9uKGFjYykge1xuXHRcdFx0XHRhY2MudmVydGljYWxQb3MgLT0gNztcblx0XHRcdFx0aWYgKG1pZCA9PT0gLTggJiYgKGFjYy5ub3RlID09PSAnZicgfHwgYWNjLm5vdGUgPT09ICdnJykgJiYgYWNjLmFjYyA9PT0gJ3NoYXJwJyApXG5cdFx0XHRcdFx0YWNjLnZlcnRpY2FsUG9zIC09Nztcblx0XHRcdH0pO1xuXHRcdFx0aWYgKGtleS5pbXBsaWVkTmF0dXJhbHMpXG5cdFx0XHRcdGtleS5pbXBsaWVkTmF0dXJhbHMuZm9yRWFjaChmdW5jdGlvbihhY2MpIHtcblx0XHRcdFx0XHRhY2MudmVydGljYWxQb3MgLT0gNztcblx0XHRcdFx0XHRpZiAobWlkID09PSAtOCAmJiAoYWNjLm5vdGUgPT09ICdmJyB8fCBhY2Mubm90ZSA9PT0gJ2cnKSAmJiBhY2MuYWNjID09PSAnc2hhcnAnIClcblx0XHRcdFx0XHRcdGFjYy52ZXJ0aWNhbFBvcyAtPTc7XG5cdFx0XHRcdH0pO1xuXHRcdH0gZWxzZSBpZiAobWlkID49IDcpIHtcblx0XHRcdGtleS5hY2NpZGVudGFscy5mb3JFYWNoKGZ1bmN0aW9uKGFjYykge1xuXHRcdFx0XHRhY2MudmVydGljYWxQb3MgKz0gNztcblx0XHRcdH0pO1xuXHRcdFx0aWYgKGtleS5pbXBsaWVkTmF0dXJhbHMpXG5cdFx0XHRcdGtleS5pbXBsaWVkTmF0dXJhbHMuZm9yRWFjaChmdW5jdGlvbihhY2MpIHtcblx0XHRcdFx0XHRhY2MudmVydGljYWxQb3MgKz0gNztcblx0XHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdHBhcnNlS2V5Vm9pY2UuZml4S2V5ID0gZnVuY3Rpb24oY2xlZiwga2V5KSB7XG5cdFx0dmFyIGZpeGVkS2V5ID0gT2JqZWN0LmFzc2lnbih7fSxrZXkpO1xuXHRcdHBhcnNlS2V5Vm9pY2UuYWRkUG9zVG9LZXkoY2xlZiwgZml4ZWRLZXkpO1xuXHRcdHJldHVybiBmaXhlZEtleTtcblx0fTtcblxuXHR2YXIgcGFyc2VNaWRkbGUgPSBmdW5jdGlvbihzdHIpIHtcblx0XHR2YXIgaSA9IDA7XG5cdFx0dmFyIHAgPSBzdHJbaSsrXTtcblx0XHRpZiAocCA9PT0gJ14nIHx8IHAgPT09ICdfJylcblx0XHRcdHAgPSBzdHJbaSsrXTtcblx0ICB2YXIgbWlkID0gcGl0Y2hlc1twXTtcblx0XHRpZiAobWlkID09PSB1bmRlZmluZWQpXG5cdFx0XHRtaWQgPSA2OyAvLyBJZiBhIGxlZ2FsIG1pZGRsZSBub3RlIHdhc24ndCByZWNlaXZlZCwganVzdCBpZ25vcmUgaXQuXG5cdFx0Zm9yICggOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAoc3RyW2ldID09PSAnLCcpIG1pZCAtPSA3O1xuXHRcdFx0ZWxzZSBpZiAoc3RyW2ldID09PSBcIidcIikgbWlkICs9IDc7XG5cdFx0XHRlbHNlIGJyZWFrO1xuXHRcdH1cblx0XHRyZXR1cm4geyBtaWQ6IG1pZCAtIDYsIHN0cjogc3RyLnN1YnN0cmluZyhpKSB9O1x0Ly8gV2UgZ2V0IHRoZSBub3RlIGluIHRoZSBtaWRkbGUgb2YgdGhlIHN0YWZmLiBXZSB3YW50IHRoZSBub3RlIHRoYXQgYXBwZWFycyBhcyB0aGUgZmlyc3QgbGVkZ2VyIGxpbmUgYmVsb3cgdGhlIHN0YWZmLlxuXHR9O1xuXG5cdHZhciBub3JtYWxpemVBY2NpZGVudGFscyA9IGZ1bmN0aW9uKGFjY3MpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFjY3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmIChhY2NzW2ldLm5vdGUgPT09ICdiJylcblx0XHRcdFx0YWNjc1tpXS5ub3RlID0gJ0InO1xuXHRcdFx0ZWxzZSBpZiAoYWNjc1tpXS5ub3RlID09PSAnYScpXG5cdFx0XHRcdGFjY3NbaV0ubm90ZSA9ICdBJztcblx0XHRcdGVsc2UgaWYgKGFjY3NbaV0ubm90ZSA9PT0gJ0YnKVxuXHRcdFx0XHRhY2NzW2ldLm5vdGUgPSAnZic7XG5cdFx0XHRlbHNlIGlmIChhY2NzW2ldLm5vdGUgPT09ICdFJylcblx0XHRcdFx0YWNjc1tpXS5ub3RlID0gJ2UnO1xuXHRcdFx0ZWxzZSBpZiAoYWNjc1tpXS5ub3RlID09PSAnRCcpXG5cdFx0XHRcdGFjY3NbaV0ubm90ZSA9ICdkJztcblx0XHRcdGVsc2UgaWYgKGFjY3NbaV0ubm90ZSA9PT0gJ0MnKVxuXHRcdFx0XHRhY2NzW2ldLm5vdGUgPSAnYyc7XG5cdFx0XHRlbHNlIGlmIChhY2NzW2ldLm5vdGUgPT09ICdHJyAmJiBhY2NzW2ldLmFjYyA9PT0gJ3NoYXJwJylcblx0XHRcdFx0YWNjc1tpXS5ub3RlID0gJ2cnO1xuXHRcdFx0ZWxzZSBpZiAoYWNjc1tpXS5ub3RlID09PSAnZycgJiYgYWNjc1tpXS5hY2MgPT09ICdmbGF0Jylcblx0XHRcdFx0YWNjc1tpXS5ub3RlID0gJ0cnO1xuXHRcdH1cblx0fTtcblxuXHRwYXJzZUtleVZvaWNlLnBhcnNlS2V5ID0gZnVuY3Rpb24oc3RyLCBpc0lubGluZSlcdC8vIChhbmQgY2xlZilcblx0e1xuXHRcdC8vIHJldHVybnM6XG5cdFx0Ly9cdFx0eyBmb3VuZENsZWY6IHRydWUsIGZvdW5kS2V5OiB0cnVlIH1cblx0XHQvLyBTaWRlIGVmZmVjdHM6XG5cdFx0Ly9cdFx0Y2FsbHMgd2FybigpIHdoZW4gdGhlcmUgaXMgYSBzeW50YXggZXJyb3Jcblx0XHQvL1x0XHRzZXRzIHRoZXNlIG1lbWJlcnMgb2YgbXVsdGlsaW5lVmFyczpcblx0XHQvL1x0XHRcdGNsZWZcblx0XHQvL1x0XHRcdGtleVxuXHRcdC8vXHRcdFx0c3R5bGVcblx0XHQvL1xuXHRcdC8vIFRoZSBmb3JtYXQgaXM6XG5cdFx0Ly8gSzogW+KfqGtleeKfqV0gW+KfqG1vZGlmaWVyc+KfqSpdXG5cdFx0Ly8gbW9kaWZpZXJzIGFyZSBhbnkgb2YgdGhlIGZvbGxvd2luZyBpbiBhbnkgb3JkZXI6XG5cdFx0Ly8gIFvin6hjbGVm4p+pXSBbbWlkZGxlPeKfqHBpdGNo4p+pXSBbdHJhbnNwb3NlPVstXeKfqG51bWJlcuKfqV0gW3N0YWZmbGluZXM94p+obnVtYmVy4p+pXSBbc3RhZmZzY2FsZT3in6hudW1iZXLin6ldW3N0eWxlPeKfqHN0eWxl4p+pXVxuXHRcdC8vIGtleSBpcyBub25lfEhQfEhwfOKfqHNwZWNpZmllZF9rZXnin6lcblx0XHQvLyBjbGVmIGlzIFtjbGVmPV0gW+KfqGNsZWYgdHlwZeKfqV0gW+KfqGxpbmUgbnVtYmVy4p+pXSBbKzh8LThdXG5cdFx0Ly8gc3BlY2lmaWVkX2tleSBpcyDin6hwaXRjaOKfqVsjfGJdW21vZGUoZmlyc3QgdGhyZWUgY2hhcnMgYXJlIHNpZ25pZmljYW50KV1bYWNjaWRlbnRhbHMqXVxuXHRcdGlmIChzdHIubGVuZ3RoID09PSAwKSB7XG5cdFx0XHQvLyBhbiBlbXB0eSBLOiBmaWVsZCBpcyB0aGUgc2FtZSBhcyBLOm5vbmVcblx0XHRcdHN0ciA9ICdub25lJztcblx0XHR9XG5cdFx0dmFyIHRva2VucyA9IHRva2VuaXplci50b2tlbml6ZShzdHIsIDAsIHN0ci5sZW5ndGgpO1xuXHRcdHZhciByZXQgPSB7fTtcblxuXHRcdC8vIEJlIHN1cmUgdGhhdCBhIGtleSB3YXMgcGFzc2VkIGluXG5cdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDApIHtcblx0XHRcdHdhcm4oXCJNdXN0IHBhc3MgaW4ga2V5IHNpZ25hdHVyZS5cIiwgc3RyLCAwKTtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXG5cdFx0Ly8gZmlyc3QgdGhlIGtleVxuXHRcdHN3aXRjaCAodG9rZW5zWzBdLnRva2VuKSB7XG5cdFx0XHRjYXNlICdIUCc6XG5cdFx0XHRcdHBhcnNlRGlyZWN0aXZlLmFkZERpcmVjdGl2ZShcImJhZ3BpcGVzXCIpO1xuXHRcdFx0XHRtdWx0aWxpbmVWYXJzLmtleSA9IHsgcm9vdDogXCJIUFwiLCBhY2NpZGVudGFsczogW10sIGFjYzogXCJcIiwgbW9kZTogXCJcIiB9O1xuXHRcdFx0XHRyZXQuZm91bmRLZXkgPSB0cnVlO1xuXHRcdFx0XHR0b2tlbnMuc2hpZnQoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdIcCc6XG5cdFx0XHRcdHBhcnNlRGlyZWN0aXZlLmFkZERpcmVjdGl2ZShcImJhZ3BpcGVzXCIpO1xuXHRcdFx0XHRtdWx0aWxpbmVWYXJzLmtleSA9IHsgcm9vdDogXCJIcFwiLCBhY2NpZGVudGFsczogW3thY2M6ICduYXR1cmFsJywgbm90ZTogJ2cnfSwge2FjYzogJ3NoYXJwJywgbm90ZTogJ2YnfSwge2FjYzogJ3NoYXJwJywgbm90ZTogJ2MnfV0sIGFjYzogXCJcIiwgbW9kZTogXCJcIiB9O1xuXHRcdFx0XHRyZXQuZm91bmRLZXkgPSB0cnVlO1xuXHRcdFx0XHR0b2tlbnMuc2hpZnQoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdub25lJzpcblx0XHRcdFx0Ly8gd2UgZ290IHRoZSBub25lIGtleSAtIHRoYXQncyB0aGUgc2FtZSBhcyBDIHRvIHVzXG5cdFx0XHRcdG11bHRpbGluZVZhcnMua2V5ID0geyByb290OiBcIm5vbmVcIiwgYWNjaWRlbnRhbHM6IFtdLCBhY2M6IFwiXCIsIG1vZGU6IFwiXCIgfTtcblx0XHRcdFx0cmV0LmZvdW5kS2V5ID0gdHJ1ZTtcblx0XHRcdFx0dG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0dmFyIHJldFBpdGNoID0gdG9rZW5pemVyLmdldEtleVBpdGNoKHRva2Vuc1swXS50b2tlbik7XG5cdFx0XHRcdGlmIChyZXRQaXRjaC5sZW4gPiAwKSB7XG5cdFx0XHRcdFx0cmV0LmZvdW5kS2V5ID0gdHJ1ZTtcblx0XHRcdFx0XHR2YXIgYWNjID0gXCJcIjtcblx0XHRcdFx0XHR2YXIgbW9kZSA9IFwiXCI7XG5cdFx0XHRcdFx0Ly8gVGhlIGFjY2lkZW50YWwgYW5kIG1vZGUgbWlnaHQgYmUgYXR0YWNoZWQgdG8gdGhlIHBpdGNoLCBzbyB3ZSBtaWdodCB3YW50IHRvIGp1c3QgcmVtb3ZlIHRoZSBmaXJzdCBjaGFyYWN0ZXIuXG5cdFx0XHRcdFx0aWYgKHRva2Vuc1swXS50b2tlbi5sZW5ndGggPiAxKVxuXHRcdFx0XHRcdFx0dG9rZW5zWzBdLnRva2VuID0gdG9rZW5zWzBdLnRva2VuLnN1YnN0cmluZygxKTtcblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHR0b2tlbnMuc2hpZnQoKTtcblx0XHRcdFx0XHR2YXIga2V5ID0gcmV0UGl0Y2gudG9rZW47XG5cdFx0XHRcdFx0Ly8gV2UgZ290IGEgcGl0Y2ggdG8gc3RhcnQgd2l0aCwgc28gd2UgbWlnaHQgYWxzbyBoYXZlIGFuIGFjY2lkZW50YWwgYW5kIGEgbW9kZVxuXHRcdFx0XHRcdGlmICh0b2tlbnMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0dmFyIHJldEFjYyA9IHRva2VuaXplci5nZXRTaGFycEZsYXQodG9rZW5zWzBdLnRva2VuKTtcblx0XHRcdFx0XHRcdGlmIChyZXRBY2MubGVuID4gMCkge1xuXHRcdFx0XHRcdFx0XHRpZiAodG9rZW5zWzBdLnRva2VuLmxlbmd0aCA+IDEpXG5cdFx0XHRcdFx0XHRcdFx0dG9rZW5zWzBdLnRva2VuID0gdG9rZW5zWzBdLnRva2VuLnN1YnN0cmluZygxKTtcblx0XHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHRcdHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRcdFx0XHRrZXkgKz0gcmV0QWNjLnRva2VuO1xuXHRcdFx0XHRcdFx0XHRhY2MgPSByZXRBY2MudG9rZW47XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAodG9rZW5zLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdFx0dmFyIHJldE1vZGUgPSB0b2tlbml6ZXIuZ2V0TW9kZSh0b2tlbnNbMF0udG9rZW4pO1xuXHRcdFx0XHRcdFx0XHRpZiAocmV0TW9kZS5sZW4gPiAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0dG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0XHRcdFx0a2V5ICs9IHJldE1vZGUudG9rZW47XG5cdFx0XHRcdFx0XHRcdFx0bW9kZSA9IHJldE1vZGUudG9rZW47XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC8vIEJlIHN1cmUgdGhhdCB0aGUga2V5IHNwZWNpZmllZCBpcyBpbiB0aGUgbGlzdDogbm90IGFsbCBrZXlzIGFyZSBwaHlzaWNhbGx5IHBvc3NpYmxlLCBsaWtlIENibWluLlxuXHRcdFx0XHRcdFx0aWYgKHBhcnNlS2V5Vm9pY2Uuc3RhbmRhcmRLZXkoa2V5LCByZXRQaXRjaC50b2tlbiwgYWNjLCAwKSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRcdHdhcm4oXCJVbnN1cHBvcnRlZCBrZXkgc2lnbmF0dXJlOiBcIiArIGtleSwgc3RyLCAwKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gV2UgbmVlZCB0byBkbyBhIGRlZXAgY29weSBiZWNhdXNlIHdlIGFyZSBnb2luZyB0byBtb2RpZnkgaXRcblx0XHRcdFx0XHR2YXIgb2xkS2V5ID0gcGFyc2VLZXlWb2ljZS5kZWVwQ29weUtleShtdWx0aWxpbmVWYXJzLmtleSk7XG5cdFx0XHRcdFx0Ly9UT0RPLVBFUjogSEFDSyEgVG8gZ2V0IHRoZSBsb2NhbCB0cmFuc3Bvc2UgdG8gd29yaywgdGhlIHRyYW5zcG9zaXRpb24gaXMgZG9uZSBmb3IgZWFjaCBsaW5lLiBUaGlzIGNhdXNlZCB0aGUgZ2xvYmFsIHRyYW5zcG9zaXRpb24gdmFyaWFibGUgdG8gYmUgZmFjdG9yZWQgaW4gdHdpY2UsIHNvLCBpbnN0ZWFkIG9mIHJld3JpdGluZyB0aGF0IHJpZ2h0IG5vdywgSSdtIGp1c3Qgc3VidHJhY3Rpbmcgb25lIG9mIHRoZW0gaGVyZS5cblx0XHRcdFx0XHR2YXIga2V5Q29tcGVuc2F0ZSA9ICFpc0lubGluZSAmJiBtdWx0aWxpbmVWYXJzLmdsb2JhbFRyYW5zcG9zZSA/IC1tdWx0aWxpbmVWYXJzLmdsb2JhbFRyYW5zcG9zZSA6IDA7XG5cdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyhcInBhcnNlXCIsIEpTT04uc3RyaW5naWZ5KG11bHRpbGluZVZhcnMpLCBpc0lubGluZSlcblx0XHRcdFx0XHR2YXIgc2F2ZWRPcmlnS2V5O1xuXHRcdFx0XHRcdGlmIChpc0lubGluZSlcblx0XHRcdFx0XHRcdHNhdmVkT3JpZ0tleSA9IG11bHRpbGluZVZhcnMuZ2xvYmFsVHJhbnNwb3NlT3JpZ0tleVNpZ1xuXHRcdFx0XHRcdG11bHRpbGluZVZhcnMua2V5ID0gcGFyc2VLZXlWb2ljZS5kZWVwQ29weUtleShwYXJzZUtleVZvaWNlLnN0YW5kYXJkS2V5KGtleSwgcmV0UGl0Y2gudG9rZW4sIGFjYywga2V5Q29tcGVuc2F0ZSkpO1xuXHRcdFx0XHRcdGlmIChpc0lubGluZSlcblx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMuZ2xvYmFsVHJhbnNwb3NlT3JpZ0tleVNpZyA9IHNhdmVkT3JpZ0tleVxuXHRcdFx0XHRcdG11bHRpbGluZVZhcnMua2V5Lm1vZGUgPSBtb2RlO1xuXHRcdFx0XHRcdGlmIChvbGRLZXkgJiYgbXVsdGlsaW5lVmFycy5rZXl3YXJuICE9PSBmYWxzZSkge1xuXHRcdFx0XHRcdFx0Ly8gQWRkIG5hdHVyYWwgaW4gYWxsIHBsYWNlcyB0aGF0IHRoZSBvbGQga2V5IGhhZCBhbiBhY2NpZGVudGFsLlxuXHRcdFx0XHRcdFx0dmFyIGtrO1xuXHRcdFx0XHRcdFx0Zm9yICh2YXIgayA9IDA7IGsgPCBtdWx0aWxpbmVWYXJzLmtleS5hY2NpZGVudGFscy5sZW5ndGg7IGsrKykge1xuXHRcdFx0XHRcdFx0XHRmb3IgKGtrID0gMDsga2sgPCBvbGRLZXkuYWNjaWRlbnRhbHMubGVuZ3RoOyBraysrKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKG9sZEtleS5hY2NpZGVudGFsc1tra10ubm90ZSAmJiBtdWx0aWxpbmVWYXJzLmtleS5hY2NpZGVudGFsc1trXS5ub3RlLnRvTG93ZXJDYXNlKCkgPT09IG9sZEtleS5hY2NpZGVudGFsc1tra10ubm90ZS50b0xvd2VyQ2FzZSgpKVxuXHRcdFx0XHRcdFx0XHRcdFx0b2xkS2V5LmFjY2lkZW50YWxzW2trXS5ub3RlID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Zm9yIChrayA9IDA7IGtrIDwgb2xkS2V5LmFjY2lkZW50YWxzLmxlbmd0aDsga2srKykge1xuXHRcdFx0XHRcdFx0XHRpZiAob2xkS2V5LmFjY2lkZW50YWxzW2trXS5ub3RlKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFtdWx0aWxpbmVWYXJzLmtleS5pbXBsaWVkTmF0dXJhbHMpXG5cdFx0XHRcdFx0XHRcdFx0XHRtdWx0aWxpbmVWYXJzLmtleS5pbXBsaWVkTmF0dXJhbHMgPSBbXTtcblx0XHRcdFx0XHRcdFx0XHRtdWx0aWxpbmVWYXJzLmtleS5pbXBsaWVkTmF0dXJhbHMucHVzaCh7IGFjYzogJ25hdHVyYWwnLCBub3RlOiBvbGRLZXkuYWNjaWRlbnRhbHNba2tdLm5vdGUgfSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0Ly8gVGhlcmUgYXJlIHR3byBzcGVjaWFsIGNhc2VzIG9mIGRlcHJlY2F0ZWQgc3ludGF4LiBJZ25vcmUgdGhlbSBpZiB0aGV5IG9jY3VyXG5cdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDApIHJldHVybiByZXQ7XG5cdFx0aWYgKHRva2Vuc1swXS50b2tlbiA9PT0gJ2V4cCcpIHRva2Vucy5zaGlmdCgpO1xuXHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSByZXR1cm4gcmV0O1xuXHRcdGlmICh0b2tlbnNbMF0udG9rZW4gPT09ICdvY3QnKSB0b2tlbnMuc2hpZnQoKTtcblxuXHRcdC8vIG5vdyBzZWUgaWYgdGhlcmUgYXJlIGV4dHJhIGFjY2lkZW50YWxzXG5cdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDApIHJldHVybiByZXQ7XG5cdFx0dmFyIGFjY3MgPSB0b2tlbml6ZXIuZ2V0S2V5QWNjaWRlbnRhbHMyKHRva2Vucyk7XG5cdFx0aWYgKGFjY3Mud2Fybilcblx0XHRcdHdhcm4oYWNjcy53YXJuLCBzdHIsIDApO1xuXHRcdC8vIElmIHdlIGhhdmUgZXh0cmEgYWNjaWRlbnRhbHMsIGZpcnN0IHJlcGxhY2Ugb25lcyB0aGF0IGFyZSBvZiB0aGUgc2FtZSBwaXRjaCBiZWZvcmUgYWRkaW5nIHRoZW0gdG8gdGhlIGVuZC5cblx0XHRpZiAoYWNjcy5hY2NzKSB7XG5cdFx0XHRpZiAoIXJldC5mb3VuZEtleSkge1x0XHQvLyBpZiB0aGVyZSBhcmUgb25seSBleHRyYSBhY2NpZGVudGFscywgbWFrZSBzdXJlIHRoaXMgaXMgc2V0LlxuXHRcdFx0XHRyZXQuZm91bmRLZXkgPSB0cnVlO1xuXHRcdFx0XHRtdWx0aWxpbmVWYXJzLmtleSA9IHsgcm9vdDogXCJub25lXCIsIGFjYzogXCJcIiwgbW9kZTogXCJcIiwgYWNjaWRlbnRhbHM6IFtdIH07XG5cdFx0XHR9XG5cdFx0XHRub3JtYWxpemVBY2NpZGVudGFscyhhY2NzLmFjY3MpO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhY2NzLmFjY3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIGZvdW5kID0gZmFsc2U7XG5cdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgbXVsdGlsaW5lVmFycy5rZXkuYWNjaWRlbnRhbHMubGVuZ3RoICYmICFmb3VuZDsgaisrKSB7XG5cdFx0XHRcdFx0aWYgKG11bHRpbGluZVZhcnMua2V5LmFjY2lkZW50YWxzW2pdLm5vdGUgPT09IGFjY3MuYWNjc1tpXS5ub3RlKSB7XG5cdFx0XHRcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRpZiAobXVsdGlsaW5lVmFycy5rZXkuYWNjaWRlbnRhbHNbal0uYWNjICE9PSBhY2NzLmFjY3NbaV0uYWNjKSB7XG5cdFx0XHRcdFx0XHRcdC8vIElmIHRoZSBhY2NpZGVudGFsIGlzIGRpZmZlcmVudCwgdGhlbiByZXBsYWNlIGl0LiBJZiBpdCBpcyB0aGUgc2FtZSwgdGhlbiB0aGUgZGVjbGFyYXRpb24gd2FzIHJlZHVuZGFudCwgc28ganVzdCBpZ25vcmUgaXQuXG5cdFx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMua2V5LmFjY2lkZW50YWxzW2pdLmFjYyA9IGFjY3MuYWNjc1tpXS5hY2M7XG5cdFx0XHRcdFx0XHRcdGlmICghbXVsdGlsaW5lVmFycy5rZXkuZXhwbGljaXRBY2NpZGVudGFscylcblx0XHRcdFx0XHRcdFx0XHRtdWx0aWxpbmVWYXJzLmtleS5leHBsaWNpdEFjY2lkZW50YWxzID0gW107XG5cdFx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMua2V5LmV4cGxpY2l0QWNjaWRlbnRhbHMucHVzaChhY2NzLmFjY3NbaV0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIWZvdW5kKSB7XG5cdFx0XHRcdFx0aWYgKCFtdWx0aWxpbmVWYXJzLmtleS5leHBsaWNpdEFjY2lkZW50YWxzKVxuXHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5rZXkuZXhwbGljaXRBY2NpZGVudGFscyA9IFtdO1xuXHRcdFx0XHRcdG11bHRpbGluZVZhcnMua2V5LmV4cGxpY2l0QWNjaWRlbnRhbHMucHVzaChhY2NzLmFjY3NbaV0pO1xuXHRcdFx0XHRcdG11bHRpbGluZVZhcnMua2V5LmFjY2lkZW50YWxzLnB1c2goYWNjcy5hY2NzW2ldKTtcblx0XHRcdFx0XHRpZiAobXVsdGlsaW5lVmFycy5rZXkuaW1wbGllZE5hdHVyYWxzKSB7XG5cdFx0XHRcdFx0XHRmb3IgKHZhciBra2sgPSAwOyBra2sgPCBtdWx0aWxpbmVWYXJzLmtleS5pbXBsaWVkTmF0dXJhbHMubGVuZ3RoOyBra2srKykge1xuXHRcdFx0XHRcdFx0XHRpZiAobXVsdGlsaW5lVmFycy5rZXkuaW1wbGllZE5hdHVyYWxzW2tra10ubm90ZSA9PT0gYWNjcy5hY2NzW2ldLm5vdGUpXG5cdFx0XHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5rZXkuaW1wbGllZE5hdHVyYWxzLnNwbGljZShra2ssIDEpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIE5vdyBzZWUgaWYgYW55IG9wdGlvbmFsIHBhcmFtZXRlcnMgYXJlIHByZXNlbnQuIFRoZXkgaGF2ZSB0aGUgZm9ybSBcImtleT12YWx1ZVwiLCBleGNlcHQgdGhhdCBcImNsZWY9XCIgaXMgb3B0aW9uYWxcblx0XHR2YXIgdG9rZW47XG5cdFx0d2hpbGUgKHRva2Vucy5sZW5ndGggPiAwKSB7XG5cdFx0XHRzd2l0Y2ggKHRva2Vuc1swXS50b2tlbikge1xuXHRcdFx0XHRjYXNlIFwibVwiOlxuXHRcdFx0XHRjYXNlIFwibWlkZGxlXCI6XG5cdFx0XHRcdFx0dG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDApIHsgd2FybihcIkV4cGVjdGVkID0gYWZ0ZXIgbWlkZGxlXCIsIHN0ciwgMCk7IHJldHVybiByZXQ7IH1cblx0XHRcdFx0XHR0b2tlbiA9IHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRcdGlmICh0b2tlbi50b2tlbiAhPT0gXCI9XCIpIHsgd2FybihcIkV4cGVjdGVkID0gYWZ0ZXIgbWlkZGxlXCIsIHN0ciwgdG9rZW4uc3RhcnQpOyBicmVhazsgfVxuXHRcdFx0XHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSB7IHdhcm4oXCJFeHBlY3RlZCBwYXJhbWV0ZXIgYWZ0ZXIgbWlkZGxlPVwiLCBzdHIsIDApOyByZXR1cm4gcmV0OyB9XG5cdFx0XHRcdFx0dmFyIHBpdGNoID0gdG9rZW5pemVyLmdldFBpdGNoRnJvbVRva2Vucyh0b2tlbnMpO1xuXHRcdFx0XHRcdGlmIChwaXRjaC53YXJuKVxuXHRcdFx0XHRcdFx0d2FybihwaXRjaC53YXJuLCBzdHIsIDApO1xuXHRcdFx0XHRcdGlmIChwaXRjaC5wb3NpdGlvbilcblx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMuY2xlZi52ZXJ0aWNhbFBvcyA9IHBpdGNoLnBvc2l0aW9uIC0gNjtcdC8vIHdlIGdldCB0aGUgcG9zaXRpb24gZnJvbSB0aGUgbWlkZGxlIGxpbmUsIGJ1dCB3YW50IHRvIG9mZnNldCBpdCB0byB0aGUgZmlyc3QgbGVkZ2VyIGxpbmUuXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJ0cmFuc3Bvc2VcIjpcblx0XHRcdFx0XHR0b2tlbnMuc2hpZnQoKTtcblx0XHRcdFx0XHRpZiAodG9rZW5zLmxlbmd0aCA9PT0gMCkgeyB3YXJuKFwiRXhwZWN0ZWQgPSBhZnRlciB0cmFuc3Bvc2VcIiwgc3RyLCAwKTsgcmV0dXJuIHJldDsgfVxuXHRcdFx0XHRcdHRva2VuID0gdG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0aWYgKHRva2VuLnRva2VuICE9PSBcIj1cIikgeyB3YXJuKFwiRXhwZWN0ZWQgPSBhZnRlciB0cmFuc3Bvc2VcIiwgc3RyLCB0b2tlbi5zdGFydCk7IGJyZWFrOyB9XG5cdFx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDApIHsgd2FybihcIkV4cGVjdGVkIHBhcmFtZXRlciBhZnRlciB0cmFuc3Bvc2U9XCIsIHN0ciwgMCk7IHJldHVybiByZXQ7IH1cblx0XHRcdFx0XHRpZiAodG9rZW5zWzBdLnR5cGUgIT09ICdudW1iZXInKSB7IHdhcm4oXCJFeHBlY3RlZCBudW1iZXIgYWZ0ZXIgdHJhbnNwb3NlXCIsIHN0ciwgdG9rZW5zWzBdLnN0YXJ0KTsgYnJlYWs7IH1cblx0XHRcdFx0XHRtdWx0aWxpbmVWYXJzLmNsZWYudHJhbnNwb3NlID0gdG9rZW5zWzBdLmludHQ7XG5cdFx0XHRcdFx0dG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJzdGFmZmxpbmVzXCI6XG5cdFx0XHRcdFx0dG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDApIHsgd2FybihcIkV4cGVjdGVkID0gYWZ0ZXIgc3RhZmZsaW5lc1wiLCBzdHIsIDApOyByZXR1cm4gcmV0OyB9XG5cdFx0XHRcdFx0dG9rZW4gPSB0b2tlbnMuc2hpZnQoKTtcblx0XHRcdFx0XHRpZiAodG9rZW4udG9rZW4gIT09IFwiPVwiKSB7IHdhcm4oXCJFeHBlY3RlZCA9IGFmdGVyIHN0YWZmbGluZXNcIiwgc3RyLCB0b2tlbi5zdGFydCk7IGJyZWFrOyB9XG5cdFx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDApIHsgd2FybihcIkV4cGVjdGVkIHBhcmFtZXRlciBhZnRlciBzdGFmZmxpbmVzPVwiLCBzdHIsIDApOyByZXR1cm4gcmV0OyB9XG5cdFx0XHRcdFx0aWYgKHRva2Vuc1swXS50eXBlICE9PSAnbnVtYmVyJykgeyB3YXJuKFwiRXhwZWN0ZWQgbnVtYmVyIGFmdGVyIHN0YWZmbGluZXNcIiwgc3RyLCB0b2tlbnNbMF0uc3RhcnQpOyBicmVhazsgfVxuXHRcdFx0XHRcdG11bHRpbGluZVZhcnMuY2xlZi5zdGFmZmxpbmVzID0gdG9rZW5zWzBdLmludHQ7XG5cdFx0XHRcdFx0dG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJzdGFmZnNjYWxlXCI6XG5cdFx0XHRcdFx0dG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDApIHsgd2FybihcIkV4cGVjdGVkID0gYWZ0ZXIgc3RhZmZzY2FsZVwiLCBzdHIsIDApOyByZXR1cm4gcmV0OyB9XG5cdFx0XHRcdFx0dG9rZW4gPSB0b2tlbnMuc2hpZnQoKTtcblx0XHRcdFx0XHRpZiAodG9rZW4udG9rZW4gIT09IFwiPVwiKSB7IHdhcm4oXCJFeHBlY3RlZCA9IGFmdGVyIHN0YWZmc2NhbGVcIiwgc3RyLCB0b2tlbi5zdGFydCk7IGJyZWFrOyB9XG5cdFx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDApIHsgd2FybihcIkV4cGVjdGVkIHBhcmFtZXRlciBhZnRlciBzdGFmZnNjYWxlPVwiLCBzdHIsIDApOyByZXR1cm4gcmV0OyB9XG5cdFx0XHRcdFx0aWYgKHRva2Vuc1swXS50eXBlICE9PSAnbnVtYmVyJykgeyB3YXJuKFwiRXhwZWN0ZWQgbnVtYmVyIGFmdGVyIHN0YWZmc2NhbGVcIiwgc3RyLCB0b2tlbnNbMF0uc3RhcnQpOyBicmVhazsgfVxuXHRcdFx0XHRcdG11bHRpbGluZVZhcnMuY2xlZi5zdGFmZnNjYWxlID0gdG9rZW5zWzBdLmZsb2F0dDtcblx0XHRcdFx0XHR0b2tlbnMuc2hpZnQoKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcIm9jdGF2ZVwiOlxuXHRcdFx0XHRcdHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSB7IHdhcm4oXCJFeHBlY3RlZCA9IGFmdGVyIG9jdGF2ZVwiLCBzdHIsIDApOyByZXR1cm4gcmV0OyB9XG5cdFx0XHRcdFx0dG9rZW4gPSB0b2tlbnMuc2hpZnQoKTtcblx0XHRcdFx0XHRpZiAodG9rZW4udG9rZW4gIT09IFwiPVwiKSB7IHdhcm4oXCJFeHBlY3RlZCA9IGFmdGVyIG9jdGF2ZVwiLCBzdHIsIHRva2VuLnN0YXJ0KTsgYnJlYWs7IH1cblx0XHRcdFx0XHRpZiAodG9rZW5zLmxlbmd0aCA9PT0gMCkgeyB3YXJuKFwiRXhwZWN0ZWQgcGFyYW1ldGVyIGFmdGVyIG9jdGF2ZT1cIiwgc3RyLCAwKTsgcmV0dXJuIHJldDsgfVxuXHRcdFx0XHRcdGlmICh0b2tlbnNbMF0udHlwZSAhPT0gJ251bWJlcicpIHsgd2FybihcIkV4cGVjdGVkIG51bWJlciBhZnRlciBvY3RhdmVcIiwgc3RyLCB0b2tlbnNbMF0uc3RhcnQpOyBicmVhazsgfVxuXHRcdFx0XHRcdG11bHRpbGluZVZhcnMub2N0YXZlID0gdG9rZW5zWzBdLmludHQ7XG5cdFx0XHRcdFx0dG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJzdHlsZVwiOlxuXHRcdFx0XHRcdHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSB7IHdhcm4oXCJFeHBlY3RlZCA9IGFmdGVyIHN0eWxlXCIsIHN0ciwgMCk7IHJldHVybiByZXQ7IH1cblx0XHRcdFx0XHR0b2tlbiA9IHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRcdGlmICh0b2tlbi50b2tlbiAhPT0gXCI9XCIpIHsgd2FybihcIkV4cGVjdGVkID0gYWZ0ZXIgc3R5bGVcIiwgc3RyLCB0b2tlbi5zdGFydCk7IGJyZWFrOyB9XG5cdFx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDApIHsgd2FybihcIkV4cGVjdGVkIHBhcmFtZXRlciBhZnRlciBzdHlsZT1cIiwgc3RyLCAwKTsgcmV0dXJuIHJldDsgfVxuXHRcdFx0XHRcdHN3aXRjaCAodG9rZW5zWzBdLnRva2VuKSB7XG5cdFx0XHRcdFx0XHRjYXNlIFwibm9ybWFsXCI6XG5cdFx0XHRcdFx0XHRjYXNlIFwiaGFybW9uaWNcIjpcblx0XHRcdFx0XHRcdGNhc2UgXCJyaHl0aG1cIjpcblx0XHRcdFx0XHRcdGNhc2UgXCJ4XCI6XG5cdFx0XHRcdFx0XHRjYXNlIFwidHJpYW5nbGVcIjpcblx0XHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5zdHlsZSA9IHRva2Vuc1swXS50b2tlbjtcblx0XHRcdFx0XHRcdFx0dG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0d2FybihcImVycm9yIHBhcnNpbmcgc3R5bGUgZWxlbWVudDogXCIgKyB0b2tlbnNbMF0udG9rZW4sIHN0ciwgdG9rZW5zWzBdLnN0YXJ0KTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwiY2xlZlwiOlxuXHRcdFx0XHRcdHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSB7IHdhcm4oXCJFeHBlY3RlZCA9IGFmdGVyIGNsZWZcIiwgc3RyLCAwKTsgcmV0dXJuIHJldDsgfVxuXHRcdFx0XHRcdHRva2VuID0gdG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0aWYgKHRva2VuLnRva2VuICE9PSBcIj1cIikgeyB3YXJuKFwiRXhwZWN0ZWQgPSBhZnRlciBjbGVmXCIsIHN0ciwgdG9rZW4uc3RhcnQpOyBicmVhazsgfVxuXHRcdFx0XHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSB7IHdhcm4oXCJFeHBlY3RlZCBwYXJhbWV0ZXIgYWZ0ZXIgY2xlZj1cIiwgc3RyLCAwKTsgcmV0dXJuIHJldDsgfVxuXHRcdFx0XHRcdC8vYnJlYWs7IHllcywgd2Ugd2FudCB0byBmYWxsIHRocm91Z2guIFRoYXQgYWxsb3dzIFwiY2xlZj1cIiB0byBiZSBvcHRpb25hbC5cblx0XHRcdFx0Y2FzZSBcInRyZWJsZVwiOlxuXHRcdFx0XHRjYXNlIFwiYmFzc1wiOlxuXHRcdFx0XHRjYXNlIFwiYWx0b1wiOlxuXHRcdFx0XHRjYXNlIFwidGVub3JcIjpcblx0XHRcdFx0Y2FzZSBcInBlcmNcIjpcblx0XHRcdFx0Y2FzZSBcIm5vbmVcIjpcblx0XHRcdFx0XHQvLyBjbGVmIGlzIFtjbGVmPV0gW+KfqGNsZWYgdHlwZeKfqV0gW+KfqGxpbmUgbnVtYmVy4p+pXSBbKzh8LThdXG5cdFx0XHRcdFx0dmFyIGNsZWYgPSB0b2tlbnMuc2hpZnQoKTtcblx0XHRcdFx0XHRzd2l0Y2ggKGNsZWYudG9rZW4pIHtcblx0XHRcdFx0XHRcdGNhc2UgJ3RyZWJsZSc6XG5cdFx0XHRcdFx0XHRjYXNlICd0ZW5vcic6XG5cdFx0XHRcdFx0XHRjYXNlICdhbHRvJzpcblx0XHRcdFx0XHRcdGNhc2UgJ2Jhc3MnOlxuXHRcdFx0XHRcdFx0Y2FzZSAncGVyYyc6XG5cdFx0XHRcdFx0XHRjYXNlICdub25lJzpcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlICdDJzogY2xlZi50b2tlbiA9ICdhbHRvJzsgYnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlICdGJzogY2xlZi50b2tlbiA9ICdiYXNzJzsgYnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlICdHJzogY2xlZi50b2tlbiA9ICd0cmVibGUnOyBicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgJ2MnOiBjbGVmLnRva2VuID0gJ2FsdG8nOyBicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgJ2YnOiBjbGVmLnRva2VuID0gJ2Jhc3MnOyBicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgJ2cnOiBjbGVmLnRva2VuID0gJ3RyZWJsZSc7IGJyZWFrO1xuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0d2FybihcIkV4cGVjdGVkIGNsZWYgbmFtZS4gRm91bmQgXCIgKyBjbGVmLnRva2VuLCBzdHIsIGNsZWYuc3RhcnQpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggPiAwICYmIHRva2Vuc1swXS50eXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRcdFx0Y2xlZi50b2tlbiArPSB0b2tlbnNbMF0udG9rZW47XG5cdFx0XHRcdFx0XHR0b2tlbnMuc2hpZnQoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggPiAxICYmICh0b2tlbnNbMF0udG9rZW4gPT09ICctJyB8fCB0b2tlbnNbMF0udG9rZW4gPT09ICcrJyB8fCB0b2tlbnNbMF0udG9rZW4gPT09ICdeJyB8fCB0b2tlbnNbMF0udG9rZW4gPT09ICdfJykgJiYgdG9rZW5zWzFdLnRva2VuID09PSAnOCcpIHtcblx0XHRcdFx0XHRcdGNsZWYudG9rZW4gKz0gdG9rZW5zWzBdLnRva2VuICsgdG9rZW5zWzFdLnRva2VuO1xuXHRcdFx0XHRcdFx0dG9rZW5zLnNoaWZ0KCk7XG5cdFx0XHRcdFx0XHR0b2tlbnMuc2hpZnQoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5jbGVmID0ge3R5cGU6IGNsZWYudG9rZW4sIHZlcnRpY2FsUG9zOiBjYWxjTWlkZGxlKGNsZWYudG9rZW4sIDApfTtcblx0XHRcdFx0XHRpZiAobXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2UgJiYgbXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2UudHJhbnNwb3NlICE9PSB1bmRlZmluZWQpXG5cdFx0XHRcdFx0XHRtdWx0aWxpbmVWYXJzLmNsZWYudHJhbnNwb3NlID0gbXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2UudHJhbnNwb3NlO1xuXHRcdFx0XHRcdHJldC5mb3VuZENsZWYgPSB0cnVlO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdHdhcm4oXCJVbmtub3duIHBhcmFtZXRlcjogXCIgKyB0b2tlbnNbMF0udG9rZW4sIHN0ciwgdG9rZW5zWzBdLnN0YXJ0KTtcblx0XHRcdFx0XHR0b2tlbnMuc2hpZnQoKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHJldDtcblx0fTtcblxuXHR2YXIgc2V0Q3VycmVudFZvaWNlID0gZnVuY3Rpb24oaWQpIHtcblx0XHR2YXIgY3VycmVudFZvaWNlID0gbXVsdGlsaW5lVmFycy52b2ljZXNbaWRdXG5cdFx0aWYgKG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlKSB7XG5cdFx0XHRpZiAobXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2UuaW5kZXggPT09IGN1cnJlbnRWb2ljZS5pbmRleCAmJiBtdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZS5zdGFmZk51bSA9PT0gY3VycmVudFZvaWNlLnN0YWZmTnVtKVxuXHRcdFx0XHRyZXR1cm4gLy8gdGhlcmUgd2FzIG5vIGNoYW5nZSBzbyBkb24ndCByZXNldCBpdC5cblx0XHR9XG5cdFx0bXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2UgPSBjdXJyZW50Vm9pY2U7XG5cdFx0cmV0dXJuIHR1bmVCdWlsZGVyLnNldEN1cnJlbnRWb2ljZShjdXJyZW50Vm9pY2Uuc3RhZmZOdW0sIGN1cnJlbnRWb2ljZS5pbmRleCwgaWQpO1xuXHR9O1xuXG5cdHBhcnNlS2V5Vm9pY2UucGFyc2VWb2ljZSA9IGZ1bmN0aW9uKGxpbmUsIGksIGUpIHtcblx0XHQvL0ZpcnN0IHRydW5jYXRlIHRoZSBzdHJpbmcgdG8gdGhlIGZpcnN0IG5vbi1zcGFjZSBjaGFyYWN0ZXIgYWZ0ZXIgVjogdGhyb3VnaCBlaXRoZXIgdGhlXG5cdFx0Ly9lbmQgb2YgdGhlIGxpbmUgb3IgYSAlIGNoYXJhY3Rlci4gVGhlbiByZW1vdmUgdHJhaWxpbmcgc3BhY2VzLCB0b28uXG5cdFx0dmFyIHJldCA9IHRva2VuaXplci5nZXRNZWF0KGxpbmUsIGksIGUpO1xuXHRcdHZhciBzdGFydCA9IHJldC5zdGFydDtcblx0XHR2YXIgZW5kID0gcmV0LmVuZDtcblx0XHQvL1RoZSBmaXJzdCB0aGluZyBvbiB0aGUgbGluZSBpcyB0aGUgSUQuIEl0IGNhbiBiZSBhbnkgbm9uLXNwYWNlIHN0cmluZyBhbmQgdGVybWluYXRlcyBhdCB0aGVcblx0XHQvL2ZpcnN0IHNwYWNlLlxuXHRcdHZhciBpZCA9IHRva2VuaXplci5nZXRUb2tlbihsaW5lLCBzdGFydCwgZW5kKTtcblx0XHRpZiAoaWQubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR3YXJuKFwiRXhwZWN0ZWQgYSB2b2ljZSBpZFwiLCBsaW5lLCBzdGFydCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHZhciBpc05ldyA9IGZhbHNlO1xuXHRcdGlmIChtdWx0aWxpbmVWYXJzLnZvaWNlc1tpZF0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0bXVsdGlsaW5lVmFycy52b2ljZXNbaWRdID0ge307XG5cdFx0XHRpc05ldyA9IHRydWU7XG5cdFx0XHRpZiAobXVsdGlsaW5lVmFycy5zY29yZV9pc19wcmVzZW50KVxuXHRcdFx0XHR3YXJuKFwiQ2FuJ3QgaGF2ZSBhbiB1bmtub3duIFY6IGlkIHdoZW4gdGhlICVzY29yZSBkaXJlY3RpdmUgaXMgcHJlc2VudFwiLCBsaW5lLCBzdGFydCk7XG5cdFx0fVxuXHRcdHN0YXJ0ICs9IGlkLmxlbmd0aDtcblx0XHRzdGFydCArPSB0b2tlbml6ZXIuZWF0V2hpdGVTcGFjZShsaW5lLCBzdGFydCk7XG5cblx0XHR2YXIgc3RhZmZJbmZvID0ge3N0YXJ0U3RhZmY6IGlzTmV3fTtcblx0XHR2YXIgYWRkTmV4dFRva2VuVG9TdGFmZkluZm8gPSBmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHR2YXIgYXR0ciA9IHRva2VuaXplci5nZXRWb2ljZVRva2VuKGxpbmUsIHN0YXJ0LCBlbmQpO1xuXHRcdFx0aWYgKGF0dHIud2FybiAhPT0gdW5kZWZpbmVkKVxuXHRcdFx0XHR3YXJuKFwiRXhwZWN0ZWQgdmFsdWUgZm9yIFwiICsgbmFtZSArIFwiIGluIHZvaWNlOiBcIiArIGF0dHIud2FybiwgbGluZSwgc3RhcnQpO1xuXHRcdFx0ZWxzZSBpZiAoYXR0ci5lcnIgIT09IHVuZGVmaW5lZClcblx0XHRcdFx0d2FybihcIkV4cGVjdGVkIHZhbHVlIGZvciBcIiArIG5hbWUgKyBcIiBpbiB2b2ljZTogXCIgKyBhdHRyLmVyciwgbGluZSwgc3RhcnQpO1xuXHRcdFx0ZWxzZSBpZiAoYXR0ci50b2tlbi5sZW5ndGggPT09IDAgJiYgbGluZVtzdGFydF0gIT09ICdcIicpXG5cdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCB2YWx1ZSBmb3IgXCIgKyBuYW1lICsgXCIgaW4gdm9pY2VcIiwgbGluZSwgc3RhcnQpO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHRzdGFmZkluZm9bbmFtZV0gPSBhdHRyLnRva2VuO1xuXHRcdFx0c3RhcnQgKz0gYXR0ci5sZW47XG5cdFx0fTtcblx0XHR2YXIgYWRkTmV4dFRva2VuVG9Wb2ljZUluZm8gPSBmdW5jdGlvbihpZCwgbmFtZSwgdHlwZSkge1xuXHRcdFx0dmFyIGF0dHIgPSB0b2tlbml6ZXIuZ2V0Vm9pY2VUb2tlbihsaW5lLCBzdGFydCwgZW5kKTtcblx0XHRcdGlmIChhdHRyLndhcm4gIT09IHVuZGVmaW5lZClcblx0XHRcdFx0d2FybihcIkV4cGVjdGVkIHZhbHVlIGZvciBcIiArIG5hbWUgKyBcIiBpbiB2b2ljZTogXCIgKyBhdHRyLndhcm4sIGxpbmUsIHN0YXJ0KTtcblx0XHRcdGVsc2UgaWYgKGF0dHIuZXJyICE9PSB1bmRlZmluZWQpXG5cdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCB2YWx1ZSBmb3IgXCIgKyBuYW1lICsgXCIgaW4gdm9pY2U6IFwiICsgYXR0ci5lcnIsIGxpbmUsIHN0YXJ0KTtcblx0XHRcdGVsc2UgaWYgKGF0dHIudG9rZW4ubGVuZ3RoID09PSAwICYmIGxpbmVbc3RhcnRdICE9PSAnXCInKVxuXHRcdFx0XHR3YXJuKFwiRXhwZWN0ZWQgdmFsdWUgZm9yIFwiICsgbmFtZSArIFwiIGluIHZvaWNlXCIsIGxpbmUsIHN0YXJ0KTtcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRpZiAodHlwZSA9PT0gJ251bWJlcicpXG5cdFx0XHRcdFx0YXR0ci50b2tlbiA9IHBhcnNlRmxvYXQoYXR0ci50b2tlbik7XG5cdFx0XHRcdG11bHRpbGluZVZhcnMudm9pY2VzW2lkXVtuYW1lXSA9IGF0dHIudG9rZW47XG5cdFx0XHR9XG5cdFx0XHRzdGFydCArPSBhdHRyLmxlbjtcblx0XHR9O1xuXHRcdHZhciBnZXROZXh0VG9rZW4gPSBmdW5jdGlvbihuYW1lLCB0eXBlKSB7XG5cdFx0XHR2YXIgYXR0ciA9IHRva2VuaXplci5nZXRWb2ljZVRva2VuKGxpbmUsIHN0YXJ0LCBlbmQpO1xuXHRcdFx0aWYgKGF0dHIud2FybiAhPT0gdW5kZWZpbmVkKVxuXHRcdFx0XHR3YXJuKFwiRXhwZWN0ZWQgdmFsdWUgZm9yIFwiICsgbmFtZSArIFwiIGluIHZvaWNlOiBcIiArIGF0dHIud2FybiwgbGluZSwgc3RhcnQpO1xuXHRcdFx0ZWxzZSBpZiAoYXR0ci5lcnIgIT09IHVuZGVmaW5lZClcblx0XHRcdFx0d2FybihcIkV4cGVjdGVkIHZhbHVlIGZvciBcIiArIG5hbWUgKyBcIiBpbiB2b2ljZTogXCIgKyBhdHRyLmVyciwgbGluZSwgc3RhcnQpO1xuXHRcdFx0ZWxzZSBpZiAoYXR0ci50b2tlbi5sZW5ndGggPT09IDAgJiYgbGluZVtzdGFydF0gIT09ICdcIicpXG5cdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCB2YWx1ZSBmb3IgXCIgKyBuYW1lICsgXCIgaW4gdm9pY2VcIiwgbGluZSwgc3RhcnQpO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGlmICh0eXBlID09PSAnbnVtYmVyJylcblx0XHRcdFx0XHRhdHRyLnRva2VuID0gcGFyc2VGbG9hdChhdHRyLnRva2VuKTtcblx0XHRcdFx0cmV0dXJuIGF0dHIudG9rZW47XG5cdFx0XHR9XG5cdFx0XHRzdGFydCArPSBhdHRyLmxlbjtcblx0XHR9O1xuXHRcdHZhciBhZGROZXh0Tm90ZVRva2VuVG9Wb2ljZUluZm8gPSBmdW5jdGlvbihpZCwgbmFtZSkge1xuXHRcdFx0dmFyIG5vdGVUb1RyYW5zcG9zaXRpb24gPSB7XG5cdFx0XHRcdFwiX0JcIjogMixcblx0XHRcdFx0XCJfRVwiOiA5LFxuXHRcdFx0XHRcIl9iXCI6IC0xMCxcblx0XHRcdFx0XCJfZVwiOiAtM1xuXHRcdFx0fTtcblx0XHRcdHZhciBhdHRyID0gdG9rZW5pemVyLmdldFZvaWNlVG9rZW4obGluZSwgc3RhcnQsIGVuZCk7XG5cdFx0XHRpZiAoYXR0ci53YXJuICE9PSB1bmRlZmluZWQpXG5cdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCBvbmUgb2YgKF9CLCBfRSwgX2IsIF9lKSBmb3IgXCIgKyBuYW1lICsgXCIgaW4gdm9pY2U6IFwiICsgYXR0ci53YXJuLCBsaW5lLCBzdGFydCk7XG5cdFx0XHRlbHNlIGlmIChhdHRyLnRva2VuLmxlbmd0aCA9PT0gMCAmJiBsaW5lW3N0YXJ0XSAhPT0gJ1wiJylcblx0XHRcdFx0d2FybihcIkV4cGVjdGVkIG9uZSBvZiAoX0IsIF9FLCBfYiwgX2UpIGZvciBcIiArIG5hbWUgKyBcIiBpbiB2b2ljZVwiLCBsaW5lLCBzdGFydCk7XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dmFyIHQgPSBub3RlVG9UcmFuc3Bvc2l0aW9uW2F0dHIudG9rZW5dO1xuXHRcdFx0XHRpZiAoIXQpXG5cdFx0XHRcdFx0d2FybihcIkV4cGVjdGVkIG9uZSBvZiAoX0IsIF9FLCBfYiwgX2UpIGZvciBcIiArIG5hbWUgKyBcIiBpbiB2b2ljZVwiLCBsaW5lLCBzdGFydCk7XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRtdWx0aWxpbmVWYXJzLnZvaWNlc1tpZF1bbmFtZV0gPSB0O1xuXHRcdFx0fVxuXHRcdFx0c3RhcnQgKz0gYXR0ci5sZW47XG5cdFx0fTtcblxuXHRcdC8vVGhlbiB0aGUgZm9sbG93aW5nIGl0ZW1zIGNhbiBvY2N1ciBpbiBhbnkgb3JkZXI6XG5cdFx0d2hpbGUgKHN0YXJ0IDwgZW5kKSB7XG5cdFx0XHR2YXIgdG9rZW4gPSB0b2tlbml6ZXIuZ2V0Vm9pY2VUb2tlbihsaW5lLCBzdGFydCwgZW5kKTtcblx0XHRcdHN0YXJ0ICs9IHRva2VuLmxlbjtcblxuXHRcdFx0aWYgKHRva2VuLndhcm4pIHtcblx0XHRcdFx0d2FybihcIkVycm9yIHBhcnNpbmcgdm9pY2U6IFwiICsgdG9rZW4ud2FybiwgbGluZSwgc3RhcnQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFyIGF0dHIgPSBudWxsO1xuXHRcdFx0XHRzd2l0Y2ggKHRva2VuLnRva2VuKSB7XG5cdFx0XHRcdFx0Y2FzZSAnY2xlZic6XG5cdFx0XHRcdFx0Y2FzZSAnY2wnOlxuXHRcdFx0XHRcdFx0YWRkTmV4dFRva2VuVG9TdGFmZkluZm8oJ2NsZWYnKTtcblx0XHRcdFx0XHRcdC8vIFRPRE8tUEVSOiBjaGVjayBmb3IgYSBsZWdhbCBjbGVmOyBkbyBvY3Rhdml6aW5nXG5cdFx0XHRcdFx0XHR2YXIgb2N0ID0gMDtcblx0Ly9cdFx0XHRcdFx0XHRcdGZvciAodmFyIGlpID0gMDsgaWkgPCBzdGFmZkluZm8uY2xlZi5sZW5ndGg7IGlpKyspIHtcblx0Ly9cdFx0XHRcdFx0XHRcdFx0aWYgKHN0YWZmSW5mby5jbGVmW2lpXSA9PT0gJywnKSBvY3QgLT0gNztcblx0Ly9cdFx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoc3RhZmZJbmZvLmNsZWZbaWldID09PSBcIidcIikgb2N0ICs9IDc7XG5cdC8vXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoc3RhZmZJbmZvLmNsZWYgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0ICBzdGFmZkluZm8uY2xlZiA9IHN0YWZmSW5mby5jbGVmLnJlcGxhY2UoL1snLF0vZywgXCJcIik7IC8vJy8vY29tbWVudCBmb3IgZW1hY3MgZm9ybWF0dGluZyBvZiByZWdleHBcblx0XHRcdFx0XHRcdFx0aWYgKHN0YWZmSW5mby5jbGVmLmluZGV4T2YoJysxNicpICE9PSAtMSkge1xuXHRcdFx0XHRcdFx0XHRcdG9jdCArPSAxNDtcblx0XHRcdFx0XHRcdFx0XHRzdGFmZkluZm8uY2xlZiA9IHN0YWZmSW5mby5jbGVmLnJlcGxhY2UoJysxNicsICcnKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRzdGFmZkluZm8udmVydGljYWxQb3MgPSBjYWxjTWlkZGxlKHN0YWZmSW5mby5jbGVmLCBvY3QpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAndHJlYmxlJzpcblx0XHRcdFx0XHRjYXNlICdiYXNzJzpcblx0XHRcdFx0XHRjYXNlICd0ZW5vcic6XG5cdFx0XHRcdFx0Y2FzZSAnYWx0byc6XG5cdFx0XHRcdFx0Y2FzZSAncGVyYyc6XG5cdFx0XHRcdFx0Y2FzZSAnbm9uZSc6XG5cdFx0XHRcdFx0Y2FzZSAndHJlYmxlXFwnJzpcblx0XHRcdFx0XHRjYXNlICdiYXNzXFwnJzpcblx0XHRcdFx0XHRjYXNlICd0ZW5vclxcJyc6XG5cdFx0XHRcdFx0Y2FzZSAnYWx0b1xcJyc6XG5cdFx0XHRcdFx0Y2FzZSAnbm9uZVxcJyc6XG5cdFx0XHRcdFx0Y2FzZSAndHJlYmxlXFwnXFwnJzpcblx0XHRcdFx0XHRjYXNlICdiYXNzXFwnXFwnJzpcblx0XHRcdFx0XHRjYXNlICd0ZW5vclxcJ1xcJyc6XG5cdFx0XHRcdFx0Y2FzZSAnYWx0b1xcJ1xcJyc6XG5cdFx0XHRcdFx0Y2FzZSAnbm9uZVxcJ1xcJyc6XG5cdFx0XHRcdFx0Y2FzZSAndHJlYmxlLCc6XG5cdFx0XHRcdFx0Y2FzZSAnYmFzcywnOlxuXHRcdFx0XHRcdGNhc2UgJ3Rlbm9yLCc6XG5cdFx0XHRcdFx0Y2FzZSAnYWx0bywnOlxuXHRcdFx0XHRcdGNhc2UgJ25vbmUsJzpcblx0XHRcdFx0XHRjYXNlICd0cmVibGUsLCc6XG5cdFx0XHRcdFx0Y2FzZSAnYmFzcywsJzpcblx0XHRcdFx0XHRjYXNlICd0ZW5vciwsJzpcblx0XHRcdFx0XHRjYXNlICdhbHRvLCwnOlxuXHRcdFx0XHRcdGNhc2UgJ25vbmUsLCc6XG4vLyBNQUUgMjYgTWF5IDIwMjUgU3RhcnQgb2YgYWRkaXRpb25hbCBjbGVmc1xuXHRcdFx0XHRcdGNhc2UgJ3RyZWJsZSs4Jzpcblx0XHRcdFx0XHRjYXNlICd0cmVibGUtOCc6XG5cdFx0XHRcdFx0Y2FzZSAndHJlYmxlXjgnOlxuXHRcdFx0XHRcdGNhc2UgJ3RyZWJsZV84Jzpcblx0XHRcdFx0XHRjYXNlICd0cmVibGUxJzpcblx0XHRcdFx0XHRjYXNlICd0cmVibGUyJzpcblx0XHRcdFx0XHRjYXNlICd0cmVibGUzJzpcblx0XHRcdFx0XHRjYXNlICd0cmVibGU0Jzpcblx0XHRcdFx0XHRjYXNlICd0cmVibGU1Jzpcblx0XHRcdFx0XHRjYXNlICdiYXNzKzgnOlxuXHRcdFx0XHRcdGNhc2UgJ2Jhc3MtOCc6XG5cdFx0XHRcdFx0Y2FzZSAnYmFzc144Jzpcblx0XHRcdFx0XHRjYXNlICdiYXNzXzgnOlxuXHRcdFx0XHRcdGNhc2UgJ2Jhc3MrMTYnOlxuXHRcdFx0XHRcdGNhc2UgJ2Jhc3MtMTYnOlxuXHRcdFx0XHRcdGNhc2UgJ2Jhc3NeMTYnOlxuXHRcdFx0XHRcdGNhc2UgJ2Jhc3NfMTYnOlxuXHRcdFx0XHRcdGNhc2UgJ2Jhc3MxJzpcblx0XHRcdFx0XHRjYXNlICdiYXNzMic6XG5cdFx0XHRcdFx0Y2FzZSAnYmFzczMnOlxuXHRcdFx0XHRcdGNhc2UgJ2Jhc3M0Jzpcblx0XHRcdFx0XHRjYXNlICdiYXNzNSc6XG5cdFx0XHRcdFx0Y2FzZSAndGVub3IxJzpcblx0XHRcdFx0XHRjYXNlICd0ZW5vcjInOlxuXHRcdFx0XHRcdGNhc2UgJ3Rlbm9yMyc6XG5cdFx0XHRcdFx0Y2FzZSAndGVub3I0Jzpcblx0XHRcdFx0XHRjYXNlICd0ZW5vcjUnOlxuXHRcdFx0XHRcdGNhc2UgJ2FsdG8xJzpcblx0XHRcdFx0XHRjYXNlICdhbHRvMic6XG5cdFx0XHRcdFx0Y2FzZSAnYWx0bzMnOlxuXHRcdFx0XHRcdGNhc2UgJ2FsdG80Jzpcblx0XHRcdFx0XHRjYXNlICdhbHRvNSc6XG5cdFx0XHRcdFx0Y2FzZSAnYWx0bys4Jzpcblx0XHRcdFx0XHRjYXNlICdhbHRvLTgnOlxuXHRcdFx0XHRcdGNhc2UgJ2FsdG9eOCc6XG5cdFx0XHRcdFx0Y2FzZSAnYWx0b184Jzpcbi8vIE1BRSAyNiBNYXkgMjAyNSBFbmQgb2YgYWRkaXRpb25hbCBjbGVmc1xuXG5cdFx0XHRcdFx0XHQvLyBUT0RPLVBFUjogaGFuZGxlIHRoZSBvY3RhdmUgaW5kaWNhdG9ycyBvbiB0aGUgY2xlZiBieSBjaGFuZ2luZyB0aGUgbWlkZGxlIHByb3BlcnR5XG5cdFx0XHRcdFx0XHR2YXIgb2N0MiA9IDA7XG5cdFx0XHRcdFx0XHRzdGFmZkluZm8uY2xlZiA9IHRva2VuLnRva2VuLnJlcGxhY2UoL1snLF0vZywgXCJcIik7IC8vJy8vY29tbWVudCBmb3IgZW1hY3MgZm9ybWF0dGluZyBvZiByZWdleHBcblx0XHRcdFx0XHRcdHN0YWZmSW5mby52ZXJ0aWNhbFBvcyA9IGNhbGNNaWRkbGUoc3RhZmZJbmZvLmNsZWYsIG9jdDIpO1xuXHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy52b2ljZXNbaWRdLmNsZWYgPSB0b2tlbi50b2tlbjtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3N0YXZlcyc6XG5cdFx0XHRcdFx0Y2FzZSAnc3RhdmUnOlxuXHRcdFx0XHRcdGNhc2UgJ3N0dic6XG5cdFx0XHRcdFx0XHRhZGROZXh0VG9rZW5Ub1N0YWZmSW5mbygnc3RhdmVzJyk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdicmFjZSc6XG5cdFx0XHRcdFx0Y2FzZSAnYnJjJzpcblx0XHRcdFx0XHRcdGFkZE5leHRUb2tlblRvU3RhZmZJbmZvKCdicmFjZScpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnYnJhY2tldCc6XG5cdFx0XHRcdFx0Y2FzZSAnYnJrJzpcblx0XHRcdFx0XHRcdGFkZE5leHRUb2tlblRvU3RhZmZJbmZvKCdicmFja2V0Jyk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICduYW1lJzpcblx0XHRcdFx0XHRjYXNlICdubSc6XG5cdFx0XHRcdFx0XHRhZGROZXh0VG9rZW5Ub1N0YWZmSW5mbygnbmFtZScpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnc3VibmFtZSc6XG5cdFx0XHRcdFx0Y2FzZSAnc25hbWUnOlxuXHRcdFx0XHRcdGNhc2UgJ3NubSc6XG5cdFx0XHRcdFx0XHRhZGROZXh0VG9rZW5Ub1N0YWZmSW5mbygnc3VibmFtZScpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnbWVyZ2UnOlxuXHRcdFx0XHRcdFx0c3RhZmZJbmZvLnN0YXJ0U3RhZmYgPSBmYWxzZTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3N0ZW0nOlxuXHRcdFx0XHRcdGNhc2UgJ3N0ZW1zJzpcblx0XHRcdFx0XHRcdGF0dHIgPSB0b2tlbml6ZXIuZ2V0Vm9pY2VUb2tlbihsaW5lLCBzdGFydCwgZW5kKTtcblx0XHRcdFx0XHRcdGlmIChhdHRyLndhcm4gIT09IHVuZGVmaW5lZClcblx0XHRcdFx0XHRcdFx0d2FybihcIkV4cGVjdGVkIHZhbHVlIGZvciBzdGVtcyBpbiB2b2ljZTogXCIgKyBhdHRyLndhcm4sIGxpbmUsIHN0YXJ0KTtcblx0XHRcdFx0XHRcdGVsc2UgaWYgKGF0dHIuZXJyICE9PSB1bmRlZmluZWQpXG5cdFx0XHRcdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCB2YWx1ZSBmb3Igc3RlbXMgaW4gdm9pY2U6IFwiICsgYXR0ci5lcnIsIGxpbmUsIHN0YXJ0KTtcblx0XHRcdFx0XHRcdGVsc2UgaWYgKGF0dHIudG9rZW4gPT09ICd1cCcgfHwgYXR0ci50b2tlbiA9PT0gJ2Rvd24nKVxuXHRcdFx0XHRcdFx0XHRtdWx0aWxpbmVWYXJzLnZvaWNlc1tpZF0uc3RlbSA9IGF0dHIudG9rZW47XG5cdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCB1cCBvciBkb3duIGZvciB2b2ljZSBzdGVtXCIsIGxpbmUsIHN0YXJ0KTtcblx0XHRcdFx0XHRcdHN0YXJ0ICs9IGF0dHIubGVuO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAndXAnOlxuXHRcdFx0XHRcdGNhc2UgJ2Rvd24nOlxuXHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy52b2ljZXNbaWRdLnN0ZW0gPSB0b2tlbi50b2tlbjtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ21pZGRsZSc6XG5cdFx0XHRcdFx0Y2FzZSAnbSc6XG5cdFx0XHRcdFx0XHRhZGROZXh0VG9rZW5Ub1N0YWZmSW5mbygndmVydGljYWxQb3MnKTtcblx0XHRcdFx0XHRcdHN0YWZmSW5mby52ZXJ0aWNhbFBvcyA9IHBhcnNlTWlkZGxlKHN0YWZmSW5mby52ZXJ0aWNhbFBvcykubWlkO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZ2Nob3Jkcyc6XG5cdFx0XHRcdFx0Y2FzZSAnZ2NoJzpcblx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMudm9pY2VzW2lkXS5zdXBwcmVzc0Nob3JkcyA9IHRydWU7XG5cdFx0XHRcdFx0XHQvLyBnY2hvcmRzIGNhbiBzdGFuZCBvbiBpdHMgb3duLCBvciBpdCBjb3VsZCBiZSBnY2hvcmRzPTAuXG5cdFx0XHRcdFx0XHRhdHRyID0gdG9rZW5pemVyLmdldFZvaWNlVG9rZW4obGluZSwgc3RhcnQsIGVuZCk7XG5cdFx0XHRcdFx0XHRpZiAoYXR0ci50b2tlbiA9PT0gXCIwXCIpXG5cdFx0XHRcdFx0XHRcdHN0YXJ0ID0gc3RhcnQgKyBhdHRyLmxlbjtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3NwYWNlJzpcblx0XHRcdFx0XHRjYXNlICdzcGMnOlxuXHRcdFx0XHRcdFx0YWRkTmV4dFRva2VuVG9TdGFmZkluZm8oJ3NwYWNpbmcnKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3NjYWxlJzpcblx0XHRcdFx0XHRcdGFkZE5leHRUb2tlblRvVm9pY2VJbmZvKGlkLCAnc2NhbGUnLCAnbnVtYmVyJyk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdzY29yZSc6XG5cdFx0XHRcdFx0XHRhZGROZXh0Tm90ZVRva2VuVG9Wb2ljZUluZm8oaWQsICdzY29yZVRyYW5zcG9zZScpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAndHJhbnNwb3NlJzpcblx0XHRcdFx0XHRcdGFkZE5leHRUb2tlblRvVm9pY2VJbmZvKGlkLCAndHJhbnNwb3NlJywgJ251bWJlcicpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnc3RhZmZsaW5lcyc6XG5cdFx0XHRcdFx0XHRhZGROZXh0VG9rZW5Ub1ZvaWNlSW5mbyhpZCwgJ3N0YWZmbGluZXMnLCAnbnVtYmVyJyk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdzdGFmZnNjYWxlJzpcblx0XHRcdFx0XHRcdC8vIFRPRE8tUEVSOiBUaGlzIGlzIHBhc3NlZCB0byB0aGUgZW5ncmF2ZXIsIGJ1dCB0aGUgZW5ncmF2ZXIgaWdub3JlcyBpdC5cblx0XHRcdFx0XHRcdGFkZE5leHRUb2tlblRvVm9pY2VJbmZvKGlkLCAnc3RhZmZzY2FsZScsICdudW1iZXInKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ29jdGF2ZSc6XG5cdFx0XHRcdFx0XHRhZGROZXh0VG9rZW5Ub1ZvaWNlSW5mbyhpZCwgJ29jdGF2ZScsICdudW1iZXInKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3ZvbHVtZSc6XG5cdFx0XHRcdFx0XHQvLyBUT0RPLVBFUjogVGhpcyBpcyBhY2NlcHRlZCwgYnV0IG5vdCBpbXBsZW1lbnRlZCwgeWV0LlxuXHRcdFx0XHRcdFx0YWRkTmV4dFRva2VuVG9Wb2ljZUluZm8oaWQsICd2b2x1bWUnLCAnbnVtYmVyJyk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdjdWUnOlxuXHRcdFx0XHRcdFx0Ly8gVE9ETy1QRVI6IFRoaXMgaXMgYWNjZXB0ZWQsIGJ1dCBub3QgaW1wbGVtZW50ZWQsIHlldC5cblx0XHRcdFx0XHRcdHZhciBjdWUgPSBnZXROZXh0VG9rZW4oJ2N1ZScsICdzdHJpbmcnKTtcblx0XHRcdFx0XHRcdGlmIChjdWUgPT09ICdvbicpXG5cdFx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMudm9pY2VzW2lkXS5zY2FsZSA9IDAuNjtcblx0XHRcdFx0XHRcdGVsc2UgbXVsdGlsaW5lVmFycy52b2ljZXNbaWRdLnNjYWxlID0gMTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJzdHlsZVwiOlxuXHRcdFx0XHRcdFx0YXR0ciA9IHRva2VuaXplci5nZXRWb2ljZVRva2VuKGxpbmUsIHN0YXJ0LCBlbmQpO1xuXHRcdFx0XHRcdFx0aWYgKGF0dHIud2FybiAhPT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdFx0XHR3YXJuKFwiRXhwZWN0ZWQgdmFsdWUgZm9yIHN0eWxlIGluIHZvaWNlOiBcIiArIGF0dHIud2FybiwgbGluZSwgc3RhcnQpO1xuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoYXR0ci5lcnIgIT09IHVuZGVmaW5lZClcblx0XHRcdFx0XHRcdFx0d2FybihcIkV4cGVjdGVkIHZhbHVlIGZvciBzdHlsZSBpbiB2b2ljZTogXCIgKyBhdHRyLmVyciwgbGluZSwgc3RhcnQpO1xuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoYXR0ci50b2tlbiA9PT0gJ25vcm1hbCcgfHwgYXR0ci50b2tlbiA9PT0gJ2hhcm1vbmljJyB8fCBhdHRyLnRva2VuID09PSAncmh5dGhtJyB8fCBhdHRyLnRva2VuID09PSAneCcgfHwgYXR0ci50b2tlbiA9PT0gJ3RyaWFuZ2xlJylcblx0XHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy52b2ljZXNbaWRdLnN0eWxlID0gYXR0ci50b2tlbjtcblx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdFx0d2FybihcIkV4cGVjdGVkIG9uZSBvZiBbbm9ybWFsLCBoYXJtb25pYywgcmh5dGhtLCB4LCB0cmlhbmdsZV0gZm9yIHZvaWNlIHN0eWxlXCIsIGxpbmUsIHN0YXJ0KTtcblx0XHRcdFx0XHRcdHN0YXJ0ICs9IGF0dHIubGVuO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Ly8gZGVmYXVsdDpcblx0XHRcdFx0XHQvLyBVc2UgdGhpcyB0byBmaW5kIFY6IHVzYWdlcyB0aGF0IGFyZW4ndCBoYW5kbGVkLlxuXHRcdFx0XHRcdC8vIFx0Y29uc29sZS5sb2coXCJwYXJzZSB2b2ljZVwiLCB0b2tlbiwgdHVuZS5tZXRhVGV4dC50aXRsZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHN0YXJ0ICs9IHRva2VuaXplci5lYXRXaGl0ZVNwYWNlKGxpbmUsIHN0YXJ0KTtcblx0XHR9XG5cblx0XHQvLyBub3cgd2UndmUgZmlsbGVkIHVwIHN0YWZmSW5mbywgZmlndXJlIG91dCB3aGF0IHRvIGRvIHdpdGggdGhpcyB2b2ljZVxuXHRcdC8vIFRPRE8tUEVSOiBJdCBpcyB1bmNsZWFyIGZyb20gdGhlIHN0YW5kYXJkIGFuZCB0aGUgZXhhbXBsZXMgd2hhdCB0byBkbyB3aXRoIGJyYWNlLCBicmFja2V0LCBhbmQgc3RhdmVzLCBzbyB0aGV5IGFyZSBpZ25vcmVkIGZvciBub3cuXG5cdFx0aWYgKHN0YWZmSW5mby5zdGFydFN0YWZmIHx8IG11bHRpbGluZVZhcnMuc3RhdmVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0bXVsdGlsaW5lVmFycy5zdGF2ZXMucHVzaCh7aW5kZXg6IG11bHRpbGluZVZhcnMuc3RhdmVzLmxlbmd0aCwgbWV0ZXI6IG11bHRpbGluZVZhcnMub3JpZ01ldGVyfSk7XG5cdFx0XHRpZiAoIW11bHRpbGluZVZhcnMuc2NvcmVfaXNfcHJlc2VudClcblx0XHRcdFx0bXVsdGlsaW5lVmFycy5zdGF2ZXNbbXVsdGlsaW5lVmFycy5zdGF2ZXMubGVuZ3RoLTFdLm51bVZvaWNlcyA9IDA7XG5cdFx0fVxuXHRcdGlmIChtdWx0aWxpbmVWYXJzLnZvaWNlc1tpZF0uc3RhZmZOdW0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Ly8gc3RvcmUgd2hlcmUgdG8gd3JpdGUgdGhpcyBmb3IgcXVpY2sgYWNjZXNzIGxhdGVyLlxuXHRcdFx0bXVsdGlsaW5lVmFycy52b2ljZXNbaWRdLnN0YWZmTnVtID0gbXVsdGlsaW5lVmFycy5zdGF2ZXMubGVuZ3RoLTE7XG5cdFx0XHR2YXIgdmkgPSAwO1xuXHRcdFx0Zm9yKHZhciB2IGluIG11bHRpbGluZVZhcnMudm9pY2VzKSB7XG5cdFx0XHRcdGlmKG11bHRpbGluZVZhcnMudm9pY2VzLmhhc093blByb3BlcnR5KHYpKSB7XG5cdFx0XHRcdFx0aWYgKG11bHRpbGluZVZhcnMudm9pY2VzW3ZdLnN0YWZmTnVtID09PSBtdWx0aWxpbmVWYXJzLnZvaWNlc1tpZF0uc3RhZmZOdW0pXG5cdFx0XHRcdFx0XHR2aSsrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRtdWx0aWxpbmVWYXJzLnZvaWNlc1tpZF0uaW5kZXggPSB2aS0xO1xuXHRcdH1cblx0XHR2YXIgcyA9IG11bHRpbGluZVZhcnMuc3RhdmVzW211bHRpbGluZVZhcnMudm9pY2VzW2lkXS5zdGFmZk51bV07XG5cdFx0aWYgKCFtdWx0aWxpbmVWYXJzLnNjb3JlX2lzX3ByZXNlbnQpXG5cdFx0XHRzLm51bVZvaWNlcysrO1xuXHRcdGlmIChzdGFmZkluZm8uY2xlZikgcy5jbGVmID0ge3R5cGU6IHN0YWZmSW5mby5jbGVmLCB2ZXJ0aWNhbFBvczogc3RhZmZJbmZvLnZlcnRpY2FsUG9zfTtcblx0XHRpZiAoc3RhZmZJbmZvLnNwYWNpbmcpIHMuc3BhY2luZ19iZWxvd19vZmZzZXQgPSBzdGFmZkluZm8uc3BhY2luZztcblx0XHRpZiAoc3RhZmZJbmZvLnZlcnRpY2FsUG9zKSBzLnZlcnRpY2FsUG9zID0gc3RhZmZJbmZvLnZlcnRpY2FsUG9zO1xuXG5cdFx0aWYgKHN0YWZmSW5mby5uYW1lKSB7aWYgKHMubmFtZSkgcy5uYW1lLnB1c2goc3RhZmZJbmZvLm5hbWUpOyBlbHNlIHMubmFtZSA9IFsgc3RhZmZJbmZvLm5hbWUgXTt9XG5cdFx0aWYgKHN0YWZmSW5mby5zdWJuYW1lKSB7aWYgKHMuc3VibmFtZSkgcy5zdWJuYW1lLnB1c2goc3RhZmZJbmZvLnN1Ym5hbWUpOyBlbHNlIHMuc3VibmFtZSA9IFsgc3RhZmZJbmZvLnN1Ym5hbWUgXTt9XG5cblx0XHRyZXR1cm4gc2V0Q3VycmVudFZvaWNlKGlkKTtcblx0fTtcblxufSkoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBwYXJzZUtleVZvaWNlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/parse/abc_parse_key_voice.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/parse/abc_parse_music.js":
/*!*********************************************************!*\
  !*** ./node_modules/abcjs/src/parse/abc_parse_music.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var parseKeyVoice = __webpack_require__(/*! ./abc_parse_key_voice */ \"(ssr)/./node_modules/abcjs/src/parse/abc_parse_key_voice.js\");\nvar transpose = __webpack_require__(/*! ./abc_transpose */ \"(ssr)/./node_modules/abcjs/src/parse/abc_transpose.js\");\n\nvar tokenizer;\nvar warn;\nvar multilineVars;\nvar tune;\nvar tuneBuilder;\nvar header;\n\nvar {\n  legalAccents,\n  volumeDecorations,\n  dynamicDecorations,\n  accentPseudonyms,\n  accentDynamicPseudonyms,\n  nonDecorations,\n  durations,\n  pitches,\n  rests,\n  accMap,\n  tripletQ\n} = __webpack_require__(/*! ./abc_parse_settings */ \"(ssr)/./node_modules/abcjs/src/parse/abc_parse_settings.js\")\n\nvar MusicParser = function(_tokenizer, _warn, _multilineVars, _tune, _tuneBuilder, _header) {\n\ttokenizer = _tokenizer;\n\twarn = _warn;\n\tmultilineVars = _multilineVars;\n\ttune = _tune;\n\ttuneBuilder = _tuneBuilder;\n\theader = _header;\n\tthis.lineContinuation = false;\n}\n\n//\n// Parse line of music\n//\n// This is a stream of <(bar-marking|header|note-group)...> in any order, with optional spaces between each element\n// core-note is <open-slur, accidental, pitch:required, octave, duration, close-slur&|tie> with no spaces within that\n// chord is <open-bracket:required, core-note:required... close-bracket:required duration> with no spaces within that\n// grace-notes is <open-brace:required, (open-slur|core-note:required|close-slur)..., close-brace:required> spaces are allowed\n// note-group is <grace-notes, chord symbols&|decorations..., grace-notes, slur&|triplet, chord|core-note, end-slur|tie> spaces are allowed between items\n// bar-marking is <ampersand> or <chord symbols&|decorations..., bar:required> spaces allowed\n// header is <open-bracket:required, K|M|L|V:required, colon:required, field:required, close-bracket:required> spaces can occur between the colon, in the field, and before the close bracket\n// header can also be the only thing on a line. This is true even if it is a continuation line. In this case the brackets are not required.\n// a space is a back-tick, a space, or a tab. If it is a back-tick, then there is no end-beam.\n\n// Line preprocessing: anything after a % is ignored (the double %% should have been taken care of before this)\n// Then, all leading and trailing spaces are ignored.\n// If there was a line continuation, the \\n was replaced by a \\r and the \\ was replaced by a space. This allows the construct\n// of having a header mid-line conceptually, but actually be at the start of the line. This is equivolent to putting the header in [ ].\n\n// TODO-PER: How to handle ! for line break?\n// TODO-PER: dots before bar, dots before slur\n// TODO-PER: U: redefinable symbols.\n\n// Ambiguous symbols:\n// \"[\" can be the start of a chord, the start of a header element or part of a bar line.\n// --- if it is immediately followed by \"|\", it is a bar line\n// --- if it is immediately followed by K: L: M: V: it is a header (note: there are other headers mentioned in the standard, but I'm not sure how they would be used.)\n// --- otherwise it is the beginning of a chord\n// \"(\" can be the start of a slur or a triplet\n// --- if it is followed by a number from 2-9, then it is a triplet\n// --- otherwise it is a slur\n// \"]\"\n// --- if there is a chord open, then this is the close\n// --- if it is after a [|, then it is an invisible bar line\n// --- otherwise, it is par of a bar\n// \".\" can be a bar modifier or a slur modifier, or a decoration\n// --- if it comes immediately before a bar, it is a bar modifier\n// --- if it comes immediately before a slur, it is a slur modifier\n// --- otherwise it is a decoration for the next note.\n// number:\n// --- if it is after a bar, with no space, it is an ending marker\n// --- if it is after a ( with no space, it is a triplet count\n// --- if it is after a pitch or octave or slash, then it is a duration\n\n// Unambiguous symbols (except inside quoted strings):\n// vertical-bar, colon: part of a bar\n// ABCDEFGabcdefg: pitch\n// xyzZ: rest\n// comma, prime: octave\n// close-paren: end-slur\n// hyphen: tie\n// tilde, v, u, bang, plus, THLMPSO: decoration\n// carat, underscore, equal: accidental\n// ampersand: time reset\n// open-curly, close-curly: grace notes\n// double-quote: chord symbol\n// less-than, greater-than, slash: duration\n// back-tick, space, tab: space\n\nvar isInTie = function(multilineVars, overlayLevel, el) {\n\tif (multilineVars.inTie[overlayLevel] === undefined)\n\t\treturn false;\n\t// If this is single voice music then the voice index isn't set, so we use the first voice.\n\tvar voiceIndex = multilineVars.currentVoice ? multilineVars.currentVoice.staffNum * 100 + multilineVars.currentVoice.index : 0;\n\tif (multilineVars.inTie[overlayLevel][voiceIndex]) {\n\t\tif (el.pitches !== undefined || el.rest.type !== 'spacer')\n\t\t\treturn true;\n\t}\n\treturn false;\n};\n\nvar el = { };\nMusicParser.prototype.parseMusic = function(line) {\n\theader.resolveTempo();\n\t//multilineVars.havent_set_length = false;\t// To late to set this now.\n\tmultilineVars.is_in_header = false;\t// We should have gotten a key header by now, but just in case, this is definitely out of the header.\n\tvar i = 0;\n\tvar startOfLine = multilineVars.iChar;\n\t// see if there is nothing but a comment on this line. If so, just ignore it. A full line comment is optional white space followed by %\n\twhile (tokenizer.isWhiteSpace(line[i]) && i < line.length)\n\t\ti++;\n\tif (i === line.length || line[i] === '%')\n\t\treturn;\n\n\t// Start with the standard staff, clef and key symbols on each line\n\tvar delayStartNewLine = multilineVars.start_new_line;\n\tif (multilineVars.continueall === undefined)\n\t\tmultilineVars.start_new_line = true;\n\telse\n\t\tmultilineVars.start_new_line = false;\n\tvar tripletNotesLeft = 0;\n\n\t// See if the line starts with a header field\n\tvar retHeader = header.letter_to_body_header(line, i);\n\tif (retHeader[0] > 0) {\n\t\ti += retHeader[0];\n\t\t// fixes bug on this: c[V:2]d\n\t\tif (retHeader[1] === 'V')\n\t\t\tthis.startNewLine();\n\t\t\t// delayStartNewLine = true;\n\t\t// TODO-PER: Handle inline headers\n\t}\n\n\tvar overlayLevel = 0;\n\twhile (i < line.length)\n\t{\n\t\tvar startI = i;\n\t\tif (line[i] === '%')\n\t\t\tbreak;\n\n\t\tvar retInlineHeader = header.letter_to_inline_header(line, i, delayStartNewLine);\n\t\tif (retInlineHeader[0] > 0) {\n\t\t\ti += retInlineHeader[0];\n\t\t\t//console.log(\"inline header\", retInlineHeader)\n\t\t\tif (retInlineHeader[1] === 'V')\n\t\t\t\tdelayStartNewLine = true; // fixes bug on this: c[V:2]d\n\t\t\t// TODO-PER: Handle inline headers\n\t\t\t//multilineVars.start_new_line = false;\n\t\t} else {\n\t\t\t// Wait until here to actually start the line because we know we're past the inline statements.\n\t\t\tif (!tuneBuilder.hasBeginMusic() || (delayStartNewLine && !this.lineContinuation)) {\n\t\t\t\tthis.startNewLine();\n\t\t\t\tdelayStartNewLine = false;\n\t\t\t}\n\n\t\t\t// We need to decide if the following characters are a bar-marking or a note-group.\n\t\t\t// Unfortunately, that is ambiguous. Both can contain chord symbols and decorations.\n\t\t\t// If there is a grace note either before or after the chord symbols and decorations, then it is definitely a note-group.\n\t\t\t// If there is a bar marker, it is definitely a bar-marking.\n\t\t\t// If there is either a core-note or chord, it is definitely a note-group.\n\t\t\t// So, loop while we find grace-notes, chords-symbols, or decorations. [It is an error to have more than one grace-note group in a row; the others can be multiple]\n\t\t\t// Then, if there is a grace-note, we know where to go.\n\t\t\t// Else see if we have a chord, core-note, slur, triplet, or bar.\n\n\t\t\tvar ret;\n\t\t\twhile (1) {\n\t\t\t\tret = tokenizer.eatWhiteSpace(line, i);\n\t\t\t\tif (ret > 0) {\n\t\t\t\t\ti += ret;\n\t\t\t\t}\n\t\t\t\tif (i > 0 && line[i-1] === '\\x12') {\n\t\t\t\t\t// there is one case where a line continuation isn't the same as being on the same line, and that is if the next character after it is a header.\n\t\t\t\t\tret = header.letter_to_body_header(line, i);\n\t\t\t\t\tif (ret[0] > 0) {\n\t\t\t\t\t\tif (ret[1] === 'V')\n\t\t\t\t\t\t\tthis.startNewLine(); // fixes bug on this: c\\\\nV:2]\\\\nd\n\t\t\t\t\t\t// TODO: insert header here\n\t\t\t\t\t\ti = ret[0];\n\t\t\t\t\t\tmultilineVars.start_new_line = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// gather all the grace notes, chord symbols and decorations\n\t\t\t\tret = letter_to_spacer(line, i);\n\t\t\t\tif (ret[0] > 0) {\n\t\t\t\t\ti += ret[0];\n\t\t\t\t}\n\n\t\t\t\tret = letter_to_chord(line, i);\n\t\t\t\tif (ret[0] > 0) {\n\t\t\t\t\t// There could be more than one chord here if they have different positions.\n\t\t\t\t\t// If two chords have the same position, then connect them with newline.\n\t\t\t\t\tif (!el.chord)\n\t\t\t\t\t\tel.chord = [];\n\t\t\t\t\tvar chordName = tokenizer.translateString(ret[1]);\n\t\t\t\t\tchordName = chordName.replace(/;/g, \"\\n\");\n\t\t\t\t\tvar addedChord = false;\n\t\t\t\t\tfor (var ci = 0; ci < el.chord.length; ci++) {\n\t\t\t\t\t\tif (el.chord[ci].position === ret[2]) {\n\t\t\t\t\t\t\taddedChord = true;\n\t\t\t\t\t\t\tel.chord[ci].name += \"\\n\" + chordName;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (addedChord === false) {\n\t\t\t\t\t\tif (ret[2] === null && ret[3])\n\t\t\t\t\t\t\tel.chord.push({name: chordName, rel_position: ret[3]});\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tel.chord.push({name: chordName, position: ret[2]});\n\t\t\t\t\t}\n\n\t\t\t\t\ti += ret[0];\n\t\t\t\t\tvar ii = tokenizer.skipWhiteSpace(line.substring(i));\n\t\t\t\t\tif (ii > 0)\n\t\t\t\t\t\tel.force_end_beam_last = true;\n\t\t\t\t\ti += ii;\n\t\t\t\t} else {\n\t\t\t\t\tif (nonDecorations.indexOf(line[i]) === -1)\n\t\t\t\t\t\tret = letter_to_accent(line, i);\n\t\t\t\t\telse ret = [ 0 ];\n\t\t\t\t\tif (ret[0] > 0) {\n\t\t\t\t\t\tif (ret[1] === null) {\n\t\t\t\t\t\t\tif (i + 1 < line.length)\n\t\t\t\t\t\t\t\tthis.startNewLine();\t// There was a ! in the middle of the line. Start a new line if there is anything after it.\n\t\t\t\t\t\t} else if (ret[1].length > 0) {\n\t\t\t\t\t\t\tif (ret[1].indexOf(\"style=\") === 0) {\n\t\t\t\t\t\t\t\tel.style = ret[1].substr(6);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (el.decoration === undefined)\n\t\t\t\t\t\t\t\t\tel.decoration = [];\n\t\t\t\t\t\t\t\tif (ret[1] === 'beambr1')\n\t\t\t\t\t\t\t\t\tel.beambr = 1;\n\t\t\t\t\t\t\t\telse if (ret[1] === \"beambr2\")\n\t\t\t\t\t\t\t\t\tel.beambr = 2;\n\t\t\t\t\t\t\t\telse el.decoration.push(ret[1]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\ti += ret[0];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tret = letter_to_grace(line, i);\n\t\t\t\t\t\t// TODO-PER: Be sure there aren't already grace notes defined. That is an error.\n\t\t\t\t\t\tif (ret[0] > 0) {\n\t\t\t\t\t\t\tel.gracenotes = ret[1];\n\t\t\t\t\t\t\ti += ret[0];\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tret = letter_to_bar(line, i);\n\t\t\tif (ret[0] > 0) {\n\t\t\t\t// This is definitely a bar\n\t\t\t\toverlayLevel = 0;\n\t\t\t\tif (el.gracenotes !== undefined) {\n\t\t\t\t\t// Attach the grace note to an invisible note\n\t\t\t\t\tel.rest = { type: 'spacer' };\n\t\t\t\t\tel.duration = 0.125; // TODO-PER: I don't think the duration of this matters much, but figure out if it does.\n\t\t\t\t\tmultilineVars.addFormattingOptions(el, tune.formatting, 'note');\n\t\t\t\t\ttuneBuilder.appendElement('note', startOfLine+i, startOfLine+i+ret[0], el);\n\t\t\t\t\tmultilineVars.measureNotEmpty = true;\n\t\t\t\t\tel = {};\n\t\t\t\t}\n\t\t\t\tvar bar = {type: ret[1]};\n\t\t\t\tif (bar.type.length === 0)\n\t\t\t\t\twarn(\"Unknown bar type\", line, i);\n\t\t\t\telse {\n\t\t\t\t\tif (multilineVars.inEnding && bar.type !== 'bar_thin') {\n\t\t\t\t\t\tbar.endEnding = true;\n\t\t\t\t\t\tmultilineVars.inEnding = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (ret[2]) {\n\t\t\t\t\t\tbar.startEnding = ret[2];\n\t\t\t\t\t\tif (multilineVars.inEnding)\n\t\t\t\t\t\t\tbar.endEnding = true;\n\t\t\t\t\t\tmultilineVars.inEnding = true;\n\t\t\t\t\t\tif (ret[1] === \"bar_right_repeat\") {\n\t\t\t\t\t\t\t// restore the tie and slur state from the start repeat\n\t\t\t\t\t\t\tmultilineVars.restoreStartEndingHoldOvers();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// save inTie, inTieChord\n\t\t\t\t\t\t\tmultilineVars.duplicateStartEndingHoldOvers();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (el.decoration !== undefined)\n\t\t\t\t\t\tbar.decoration = el.decoration;\n\t\t\t\t\tif (el.chord !== undefined)\n\t\t\t\t\t\tbar.chord = el.chord;\n\t\t\t\t\tif (bar.startEnding && multilineVars.barFirstEndingNum === undefined)\n\t\t\t\t\t\tmultilineVars.barFirstEndingNum = multilineVars.currBarNumber;\n\t\t\t\t\telse if (bar.startEnding && bar.endEnding && multilineVars.barFirstEndingNum)\n\t\t\t\t\t\tmultilineVars.currBarNumber = multilineVars.barFirstEndingNum;\n\t\t\t\t\telse if (bar.endEnding)\n\t\t\t\t\t\tmultilineVars.barFirstEndingNum = undefined;\n\t\t\t\t\tif (bar.type !== 'bar_invisible' && multilineVars.measureNotEmpty) {\n\t\t\t\t\t\tif (isFirstVoice()) {\n\t\t\t\t\t\t\tmultilineVars.currBarNumber++;\n\t\t\t\t\t\t\tif (multilineVars.barNumbers && multilineVars.currBarNumber % multilineVars.barNumbers === 0)\n\t\t\t\t\t\t\t\tbar.barNumber = multilineVars.currBarNumber;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tmultilineVars.addFormattingOptions(el, tune.formatting, 'bar');\n\t\t\t\t\ttuneBuilder.appendElement('bar', startOfLine+startI, startOfLine+i+ret[0], bar);\n\t\t\t\t\tmultilineVars.measureNotEmpty = false;\n\t\t\t\t\tel = {};\n\t\t\t\t}\n\t\t\t\ti += ret[0];\n\t\t\t} else if (line[i] === '&') {\t// backtrack to beginning of measure\n\t\t\t\tret = letter_to_overlay(line, i);\n\t\t\t\tif (ret[0] > 0) {\n\t\t\t\t\ttuneBuilder.appendElement('overlay', startOfLine, startOfLine+1, {});\n\t\t\t\t\ti += 1;\n\t\t\t\t\toverlayLevel++;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t// This is definitely a note group\n\t\t\t\t//\n\t\t\t\t// Look for as many open slurs and triplets as there are. (Note: only the first triplet is valid.)\n\t\t\t\tret = letter_to_open_slurs_and_triplets(line, i);\n\t\t\t\tif (ret.consumed > 0) {\n\t\t\t\t\tif (ret.startSlur !== undefined)\n\t\t\t\t\t\tel.startSlur = ret.startSlur;\n\t\t\t\t\tif (ret.dottedSlur)\n\t\t\t\t\t\tel.dottedSlur = true;\n\t\t\t\t\tif (ret.triplet !== undefined) {\n\t\t\t\t\t\tif (tripletNotesLeft > 0)\n\t\t\t\t\t\t\twarn(\"Can't nest triplets\", line, i);\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tel.startTriplet = ret.triplet;\n\t\t\t\t\t\t\tel.tripletMultiplier = ret.tripletQ / ret.triplet;\n\t\t\t\t\t\t\tel.tripletR = ret.num_notes;\n\t\t\t\t\t\t\ttripletNotesLeft = ret.num_notes === undefined ? ret.triplet : ret.num_notes;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ti += ret.consumed;\n\t\t\t\t}\n\n\t\t\t\t// handle chords.\n\t\t\t\tif (line[i] === '[') {\n\t\t\t\t\tvar chordStartChar = i;\n\t\t\t\t\ti++;\n\t\t\t\t\tvar chordDuration = null;\n\t\t\t\t\tvar rememberEndBeam = false;\n\n\t\t\t\t\tvar done = false;\n\t\t\t\t\twhile (!done) {\n\t\t\t\t\t\tvar accent = letter_to_accent(line, i);\n\t\t\t\t\t\tif (accent[0] > 0) {\n\t\t\t\t\t\t\ti += accent[0];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar chordNote = getCoreNote(line, i, {}, false);\n\t\t\t\t\t\tif (chordNote !== null && chordNote.pitch !== undefined) {\n\t\t\t\t\t\t\tif (accent[0] > 0) { // If we found a decoration above, it modifies the entire chord. \"style\" is handled below.\n\t\t\t\t\t\t\t\tif (accent[1].indexOf(\"style=\") !== 0) {\n\t\t\t\t\t\t\t\t\tif (el.decoration === undefined)\n\t\t\t\t\t\t\t\t\t\tel.decoration = [];\n\t\t\t\t\t\t\t\t\tel.decoration.push(accent[1]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (chordNote.end_beam) {\n\t\t\t\t\t\t\t\tel.end_beam = true;\n\t\t\t\t\t\t\t\tdelete chordNote.end_beam;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (el.pitches === undefined) {\n\t\t\t\t\t\t\t\tel.duration = chordNote.duration;\n\t\t\t\t\t\t\t\tel.pitches = [ chordNote ];\n\t\t\t\t\t\t\t} else\t// Just ignore the note lengths of all but the first note. The standard isn't clear here, but this seems less confusing.\n\t\t\t\t\t\t\t\tel.pitches.push(chordNote);\n\t\t\t\t\t\t\tdelete chordNote.duration;\n\t\t\t\t\t\t\tif (accent[0] > 0) { // If we found a style above, it modifies the individual pitch, not the entire chord.\n\t\t\t\t\t\t\t\tif (accent[1].indexOf(\"style=\") === 0) {\n\t\t\t\t\t\t\t\t\tel.pitches[el.pitches.length-1].style = accent[1].substr(6);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (multilineVars.inTieChord[el.pitches.length]) {\n\t\t\t\t\t\t\t\tchordNote.endTie = true;\n\t\t\t\t\t\t\t\tmultilineVars.inTieChord[el.pitches.length] = undefined;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (chordNote.startTie)\n\t\t\t\t\t\t\t\tmultilineVars.inTieChord[el.pitches.length] = true;\n\n\t\t\t\t\t\t\ti  = chordNote.endChar;\n\t\t\t\t\t\t\tdelete chordNote.endChar;\n\t\t\t\t\t\t} else if (line[i] === ' ') {\n\t\t\t\t\t\t\t// Spaces are not allowed in chords, but we can recover from it by ignoring it.\n\t\t\t\t\t\t\twarn(\"Spaces are not allowed in chords\", line, i);\n\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (i < line.length && line[i] === ']') {\n\t\t\t\t\t\t\t\t// consume the close bracket\n\t\t\t\t\t\t\t\ti++;\n\n\t\t\t\t\t\t\t\tif (multilineVars.next_note_duration !== 0) {\n\t\t\t\t\t\t\t\t\tel.duration = el.duration * multilineVars.next_note_duration;\n\t\t\t\t\t\t\t\t\tmultilineVars.next_note_duration = 0;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (isInTie(multilineVars,  overlayLevel, el)) {\n\t\t\t\t\t\t\t\t\tel.pitches.forEach(function(pitch) { pitch.endTie = true; });\n\t\t\t\t\t\t\t\t\tsetIsInTie(multilineVars,  overlayLevel, false);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (tripletNotesLeft > 0 && !(el.rest && el.rest.type === \"spacer\")) {\n\t\t\t\t\t\t\t\t\ttripletNotesLeft--;\n\t\t\t\t\t\t\t\t\tif (tripletNotesLeft === 0) {\n\t\t\t\t\t\t\t\t\t\tel.endTriplet = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar postChordDone = false;\n\t\t\t\t\t\t\t\twhile (i < line.length && !postChordDone) {\n\t\t\t\t\t\t\t\t\tswitch (line[i]) {\n\t\t\t\t\t\t\t\t\t\tcase ' ':\n\t\t\t\t\t\t\t\t\t\tcase '\\t':\n\t\t\t\t\t\t\t\t\t\t\taddEndBeam(el);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase ')':\n\t\t\t\t\t\t\t\t\t\t\tif (el.endSlur === undefined) el.endSlur = 1; else el.endSlur++;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '-':\n\t\t\t\t\t\t\t\t\t\t\tel.pitches.forEach(function(pitch) { pitch.startTie = {}; });\n\t\t\t\t\t\t\t\t\t\t\tsetIsInTie(multilineVars,  overlayLevel, true);\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '>':\n\t\t\t\t\t\t\t\t\t\tcase '<':\n\t\t\t\t\t\t\t\t\t\t\tvar br2 = getBrokenRhythm(line, i);\n\t\t\t\t\t\t\t\t\t\t\ti += br2[0] - 1;\t// index gets incremented below, so we'll let that happen\n\t\t\t\t\t\t\t\t\t\t\tmultilineVars.next_note_duration = br2[2];\n\t\t\t\t\t\t\t\t\t\t\tif (chordDuration)\n\t\t\t\t\t\t\t\t\t\t\t\tchordDuration = chordDuration * br2[1];\n\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t\tchordDuration = br2[1];\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '1':\n\t\t\t\t\t\t\t\t\t\tcase '2':\n\t\t\t\t\t\t\t\t\t\tcase '3':\n\t\t\t\t\t\t\t\t\t\tcase '4':\n\t\t\t\t\t\t\t\t\t\tcase '5':\n\t\t\t\t\t\t\t\t\t\tcase '6':\n\t\t\t\t\t\t\t\t\t\tcase '7':\n\t\t\t\t\t\t\t\t\t\tcase '8':\n\t\t\t\t\t\t\t\t\t\tcase '9':\n\t\t\t\t\t\t\t\t\t\tcase '/':\n\t\t\t\t\t\t\t\t\t\t\tvar fraction = tokenizer.getFraction(line, i);\n\t\t\t\t\t\t\t\t\t\t\tchordDuration = fraction.value;\n\t\t\t\t\t\t\t\t\t\t\ti = fraction.index;\n\t\t\t\t\t\t\t\t\t\t\tvar ch = line[i]\n\t\t\t\t\t\t\t\t\t\t\tif (ch === ' ')\n\t\t\t\t\t\t\t\t\t\t\t\trememberEndBeam = true;\n\t\t\t\t\t\t\t\t\t\t\tif (ch === '-' || ch === ')' || ch === ' ' || ch === '<' || ch === '>')\n\t\t\t\t\t\t\t\t\t\t\t\ti--; // Subtracting one because one is automatically added below\n\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t\tpostChordDone = true;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '0':\n\t\t\t\t\t\t\t\t\t\t\tchordDuration = 0;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\tpostChordDone = true;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (!postChordDone) {\n\t\t\t\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else\n\t\t\t\t\t\t\t\twarn(\"Expected ']' to end the chords\", line, i);\n\n\t\t\t\t\t\t\tif (el.pitches !== undefined) {\n\t\t\t\t\t\t\t\tif (chordDuration !== null) {\n\t\t\t\t\t\t\t\t\tel.duration = el.duration * chordDuration;\n\t\t\t\t\t\t\t\t\tif (rememberEndBeam)\n\t\t\t\t\t\t\t\t\t\taddEndBeam(el);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tmultilineVars.addFormattingOptions(el, tune.formatting, 'note');\n\t\t\t\t\t\t\t\ttuneBuilder.appendElement('note', startOfLine+startI, startOfLine+i, el);\n\t\t\t\t\t\t\t\tmultilineVars.measureNotEmpty = true;\n\t\t\t\t\t\t\t\tel = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdone = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\t// Single pitch\n\t\t\t\t\tvar el2 = {};\n\t\t\t\t\tvar core = getCoreNote(line, i, el2, true);\n\t\t\t\t\tif (el2.endTie !== undefined) setIsInTie(multilineVars,  overlayLevel, true);\n\t\t\t\t\tif (core !== null) {\n\t\t\t\t\t\tif (core.pitch !== undefined) {\n\t\t\t\t\t\t\tel.pitches = [ { } ];\n\t\t\t\t\t\t\t// TODO-PER: straighten this out so there is not so much copying: getCoreNote shouldn't change e'\n\t\t\t\t\t\t\tif (core.accidental !== undefined) el.pitches[0].accidental = core.accidental;\n\t\t\t\t\t\t\tel.pitches[0].pitch = core.pitch;\n\t\t\t\t\t\t\tel.pitches[0].name = core.name;\n\t\t\t\t\t\t\tif (core.midipitch || core.midipitch === 0)\n\t\t\t\t\t\t\t\tel.pitches[0].midipitch = core.midipitch;\n\t\t\t\t\t\t\tif (core.endSlur !== undefined) el.pitches[0].endSlur = core.endSlur;\n\t\t\t\t\t\t\tif (core.endTie !== undefined) el.pitches[0].endTie = core.endTie;\n\t\t\t\t\t\t\tif (core.startSlur !== undefined) el.pitches[0].startSlur = core.startSlur;\n\t\t\t\t\t\t\tif (el.startSlur !== undefined) el.pitches[0].startSlur = el.startSlur;\n\t\t\t\t\t\t\tif (el.dottedSlur !== undefined) el.pitches[0].dottedSlur = true;\n\t\t\t\t\t\t\tif (core.startTie !== undefined) el.pitches[0].startTie = core.startTie;\n\t\t\t\t\t\t\tif (el.startTie !== undefined) el.pitches[0].startTie = el.startTie;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tel.rest = core.rest;\n\t\t\t\t\t\t\tif (core.rest.type === 'multimeasure' && isFirstVoice())\n\t\t\t\t\t\t\t\tmultilineVars.currBarNumber += core.rest.text - 1 // The minus one is because the measure with the rest is already counted once normally.\n\t\t\t\t\t\t\tif (core.endSlur !== undefined) el.endSlur = core.endSlur;\n\t\t\t\t\t\t\tif (core.endTie !== undefined) el.rest.endTie = core.endTie;\n\t\t\t\t\t\t\tif (core.startSlur !== undefined) el.startSlur = core.startSlur;\n\t\t\t\t\t\t\tif (core.startTie !== undefined) el.rest.startTie = core.startTie;\n\t\t\t\t\t\t\tif (el.startTie !== undefined) el.rest.startTie = el.startTie;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (core.chord !== undefined) el.chord = core.chord;\n\t\t\t\t\t\tif (core.duration !== undefined) el.duration = core.duration;\n\t\t\t\t\t\tif (core.decoration !== undefined) el.decoration = core.decoration;\n\t\t\t\t\t\tif (core.graceNotes !== undefined) el.graceNotes = core.graceNotes;\n\t\t\t\t\t\tdelete el.startSlur;\n\t\t\t\t\t\tdelete el.dottedSlur;\n\t\t\t\t\t\tif (isInTie(multilineVars,  overlayLevel, el)) {\n\t\t\t\t\t\t\tif (el.pitches !== undefined) {\n\t\t\t\t\t\t\t\tel.pitches[0].endTie = true;\n\t\t\t\t\t\t\t} else if (el.rest.type !== 'spacer') {\n\t\t\t\t\t\t\t\tel.rest.endTie = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetIsInTie(multilineVars,  overlayLevel, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (core.startTie || el.startTie)\n\t\t\t\t\t\t\tsetIsInTie(multilineVars,  overlayLevel, true);\n\t\t\t\t\t\ti  = core.endChar;\n\n\t\t\t\t\t\tif (tripletNotesLeft > 0 && !(core.rest && core.rest.type === \"spacer\")) {\n\t\t\t\t\t\t\ttripletNotesLeft--;\n\t\t\t\t\t\t\tif (tripletNotesLeft === 0) {\n\t\t\t\t\t\t\t\tel.endTriplet = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (core.end_beam)\n\t\t\t\t\t\t\taddEndBeam(el);\n\n\t\t\t\t\t\t// If there is a whole rest, then it should be the duration of the measure, not it's own duration. We need to special case it.\n\t\t\t\t\t\t// If the time signature length is greater than 4/4, though, then a whole rest has no special treatment.\n\t\t\t\t\t\tif (el.rest && el.rest.type === 'rest' && el.duration === 1 && durationOfMeasure(multilineVars) <= 1) {\n\t\t\t\t\t\t\tel.rest.type = 'whole';\n\n\t\t\t\t\t\t\tel.duration = durationOfMeasure(multilineVars);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Create a warning if this is not a displayable duration.\n\t\t\t\t\t\t// The first item on a line is a regular note value, each item after that represents a dot placed after the previous note.\n\t\t\t\t\t\t// Only durations less than a whole note are tested because whole note durations have some tricky rules.\n\n\t\t\t\t\t\tif (el.duration < 1 && durations.indexOf(el.duration) === -1 && el.duration !== 0) {\n\t\t\t\t\t\t\tif (!el.rest || el.rest.type !== 'spacer')\n\t\t\t\t\t\t\t\twarn(\"Duration not representable: \" + line.substring(startI, i), line, i);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmultilineVars.addFormattingOptions(el, tune.formatting, 'note');\n\t\t\t\t\t\tvar succeeded = tuneBuilder.appendElement('note', startOfLine+startI, startOfLine+i, el);\n\t\t\t\t\t\tif (!succeeded) {\n\t\t\t\t\t\t\tthis.startNewLine()\n\t\t\t\t\t\t\ttuneBuilder.appendElement('note', startOfLine+startI, startOfLine+i, el);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmultilineVars.measureNotEmpty = true;\n\t\t\t\t\t\tel = {};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (i === startI) {\t// don't know what this is, so ignore it.\n\t\t\t\t\tif (line[i] !== ' ' && line[i] !== '`')\n\t\t\t\t\t\twarn(\"Unknown character ignored\", line, i);\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tthis.lineContinuation = line.indexOf('\\x12') >= 0 || (retHeader[0] > 0)\n\tif (!this.lineContinuation) { el = { } }\n};\n\nvar setIsInTie =function(multilineVars, overlayLevel, value) {\n\t// If this is single voice music then the voice index isn't set, so we use the first voice.\n\tvar voiceIndex = multilineVars.currentVoice ? multilineVars.currentVoice.staffNum * 100 + multilineVars.currentVoice.index : 0;\n\tif (multilineVars.inTie[overlayLevel] === undefined)\n\t\tmultilineVars.inTie[overlayLevel] = [];\n\tmultilineVars.inTie[overlayLevel][voiceIndex] = value;\n};\n\nvar letter_to_chord = function(line, i) {\n\tif (line[i] === '\"')\n\t{\n\t\tvar chord = tokenizer.getBrackettedSubstring(line, i, 5);\n\t\tif (!chord[2])\n\t\t\twarn(\"Missing the closing quote while parsing the chord symbol\", line , i);\n\t\t// If it starts with ^, then the chord appears above.\n\t\t// If it starts with _ then the chord appears below.\n\t\t// (note that the 2.0 draft standard defines them as not chords, but annotations and also defines @.)\n\t\tif (chord[0] > 0 && chord[1].length > 0 && chord[1][0] === '^') {\n\t\t\tchord[1] = chord[1].substring(1);\n\t\t\tchord[2] = 'above';\n\t\t} else if (chord[0] > 0 && chord[1].length > 0 && chord[1][0] === '_') {\n\t\t\tchord[1] = chord[1].substring(1);\n\t\t\tchord[2] = 'below';\n\t\t} else if (chord[0] > 0 && chord[1].length > 0 && chord[1][0] === '<') {\n\t\t\tchord[1] = chord[1].substring(1);\n\t\t\tchord[2] = 'left';\n\t\t} else if (chord[0] > 0 && chord[1].length > 0 && chord[1][0] === '>') {\n\t\t\tchord[1] = chord[1].substring(1);\n\t\t\tchord[2] = 'right';\n\t\t} else if (chord[0] > 0 && chord[1].length > 0 && chord[1][0] === '@') {\n\t\t      // @-15,5.7\t\t\n\t\t      chord[1] = chord[1].substring(1);\n\t\t      var x = tokenizer.getFloat(chord[1]);\n\t\t      if (x.digits === 0){\n\t\t\twarn(\"Missing first position in absolutely positioned annotation.\", line, i);\n\t\t\tchord[1] = chord[1].replace(\"@\",\"\");\n\t\t\tchord[2] = 'above';\n\t\t\treturn chord;\n\t\t      }\n\t\t      chord[1] = chord[1].substring(x.digits);\n\t\t      if (chord[1][0] !== ','){\n\t\t\twarn(\"Missing comma absolutely positioned annotation.\", line, i);\n\t\t\tchord[1] = chord[1].replace(\"@\",\"\");\n\t\t\tchord[2] = 'above';\n\t\t\treturn chord;\n\t\t      }\n\t\t      chord[1] = chord[1].substring(1);\n\t\t      var y = tokenizer.getFloat(chord[1]);\n\t\t      if (y.digits === 0){\n\t\t\twarn(\"Missing second position in absolutely positioned annotation.\", line, i);\n\t\t\tchord[1] = chord[1].replace(\"@\",\"\");\n\t\t\tchord[2] = 'above';\n\t\t\treturn chord;\n\t\t      }\n\t\t      chord[1] = chord[1].substring(y.digits);\n\t\t      var ws = tokenizer.skipWhiteSpace(chord[1]);\n\t\t      chord[1] = chord[1].substring(ws);\n\t\t      chord[2] = null;\n\t\t      chord[3] = {\n\t\t\tx: x.value,\n\t\t\ty: y.value\n\t\t      };\t\n\t\t} else {\n\t\t\tif (multilineVars.freegchord !== true) {\n\t\t\t\tchord[1] = chord[1].replace(/([ABCDEFG0-9])b/g, \"$1\");\n\t\t\t\tchord[1] = chord[1].replace(/([ABCDEFG0-9])#/g, \"$1\");\n\t\t\t\tchord[1] = chord[1].replace(/^([ABCDEFG])([]?)o([^A-Za-z])/g, \"$1$2$3\");\n\t\t\t\tchord[1] = chord[1].replace(/^([ABCDEFG])([]?)o$/g, \"$1$2\");\n\t\t\t\tchord[1] = chord[1].replace(/^([ABCDEFG])([]?)0([^A-Za-z])/g, \"$1$2$3\");\n\t\t\t\tchord[1] = chord[1].replace(/^([ABCDEFG])([]?)\\^([^A-Za-z])/g, \"$1$2$3\");\n\t\t\t}\n\t\t\tchord[2] = 'default';\n\t\t\tchord[1] = transpose.chordName(multilineVars, chord[1]);\n\t\t}\n\t\treturn chord;\n\t}\n\treturn [0, \"\"];\n};\n\nvar letter_to_grace =  function(line, i) {\n\t// Grace notes are an array of: startslur, note, endslur, space; where note is accidental, pitch, duration\n\tif (line[i] === '{') {\n\t\t// fetch the gracenotes string and consume that into the array\n\t\tvar gra = tokenizer.getBrackettedSubstring(line, i, 1, '}');\n\t\tif (!gra[2])\n\t\t\twarn(\"Missing the closing '}' while parsing grace note\", line, i);\n\t\t// If there is a slur after the grace construction, then move it to the last note inside the grace construction\n\t\tif (line[i+gra[0]] === ')') {\n\t\t\tgra[0]++;\n\t\t\tgra[1] += ')';\n\t\t}\n\n\t\tvar gracenotes = [];\n\t\tvar ii = 0;\n\t\tvar inTie = false;\n\t\twhile (ii < gra[1].length) {\n\t\t\tvar acciaccatura = false;\n\t\t\tif (gra[1][ii] === '/') {\n\t\t\t\tacciaccatura = true;\n\t\t\t\tii++;\n\t\t\t}\n\t\t\tvar note = getCoreNote(gra[1], ii, {}, false);\n\t\t\tif (note !== null) {\n\t\t\t\t// The grace note durations should not be affected by the default length: they should be based on 1/16, so if that isn't the default, then multiply here.\n\t\t\t\tnote.duration = note.duration / (multilineVars.default_length * 8);\n\t\t\t\tif (acciaccatura)\n\t\t\t\t\tnote.acciaccatura = true;\n\t\t\t\tif (note.rest) {\n\t\t\t\t\t// don't allow rests inside gracenotes\n\t\t\t\t\twarn(\"Rests not allowed as grace notes '\" + gra[1][ii] + \"' while parsing grace note\", line, i);\n\t\t\t\t} else\n\t\t\t\t\tgracenotes.push(note);\n\n\t\t\t\tif (inTie) {\n\t\t\t\t\tnote.endTie = true;\n\t\t\t\t\tinTie = false;\n\t\t\t\t}\n\t\t\t\tif (note.startTie)\n\t\t\t\t\tinTie = true;\n\n\t\t\t\tii  = note.endChar;\n\t\t\t\tdelete note.endChar;\n\n\t\t\t\tif (note.end_beam) {\n\t\t\t\t\tnote.endBeam = true;\n\t\t\t\t\tdelete note.end_beam;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// We shouldn't get anything but notes or a space here, so report an error\n\t\t\t\tif (gra[1][ii] === ' ') {\n\t\t\t\t\tif (gracenotes.length > 0)\n\t\t\t\t\t\tgracenotes[gracenotes.length-1].endBeam = true;\n\t\t\t\t} else\n\t\t\t\t\twarn(\"Unknown character '\" + gra[1][ii] + \"' while parsing grace note\", line, i);\n\t\t\t\tii++;\n\t\t\t}\n\t\t}\n\t\tif (gracenotes.length)\n\t\t\treturn [gra[0], gracenotes];\n\t}\n\treturn [ 0 ];\n};\n\nfunction letter_to_overlay(line, i) {\n\tif (line[i] === '&') {\n\t\tvar start = i;\n\t\twhile (line[i] && line[i] !== ':' && line[i] !== '|')\n\t\t\ti++;\n\t\treturn [ i-start, line.substring(start+1, i) ];\n\t}\n\treturn [ 0 ];\n}\n\nfunction durationOfMeasure(multilineVars) {\n\t// TODO-PER: This could be more complicated if one of the unusual measures is used.\n\tvar meter = multilineVars.origMeter;\n\tif (!meter || meter.type !== 'specified')\n\t\treturn 1;\n\tif (!meter.value || meter.value.length === 0)\n\t\treturn 1;\n\treturn parseInt(meter.value[0].num, 10) / parseInt(meter.value[0].den, 10);\n}\n\n\n\n\nvar letter_to_accent = function(line, i) {\n\tvar macro = multilineVars.macros[line[i]];\n\n\tif (macro !== undefined) {\n\t\tif (macro[0] === '!' || macro[0] === '+')\n\t\t\tmacro = macro.substring(1);\n\t\tif (macro[macro.length-1] === '!' || macro[macro.length-1] === '+')\n\t\t\tmacro = macro.substring(0, macro.length-1);\n\t\tif (legalAccents.includes(macro))\n\t\t\treturn [ 1, macro ];\n\t\telse if (volumeDecorations.includes(macro)) {\n\t\t\tif (multilineVars.volumePosition === 'hidden')\n\t\t\t\tmacro = \"\";\n\t\t\treturn [1, macro];\n\t\t} else if (dynamicDecorations.includes(macro)) {\n\t\t\tif (multilineVars.dynamicPosition === 'hidden')\n\t\t\t\tmacro = \"\";\n\t\t\treturn [1, macro];\n\t\t} else {\n\t\t\tif (!multilineVars.ignoredDecorations.includes(macro))\n\t\t\t\twarn(\"Unknown macro: \" + macro, line, i);\n\t\t\treturn [1, '' ];\n\t\t}\n\t}\n\tswitch (line[i])\n\t{\n\t\tcase '.':\n\t\t\tif (line[i+1] === '(' || line[i+1] === '-') // a dot then open paren is a dotted slur; likewise dot dash is dotted tie.\n\t\t\t\tbreak;\n\t\t\treturn [1, 'staccato'];\n\t\tcase 'u':return [1, 'upbow'];\n\t\tcase 'v':return [1, 'downbow'];\n\t\tcase '~':return [1, 'irishroll'];\n\t\tcase '!':\n\t\tcase '+':\n\t\t\tvar ret = tokenizer.getBrackettedSubstring(line, i, 5);\n\t\t\t// Be sure that the accent is recognizable.\n\t\t\tif (ret[1].length > 1 && (ret[1][0] === '^' || ret[1][0] ==='_'))\n\t\t\t\tret[1] = ret[1].substring(1);\t// TODO-PER: The test files have indicators forcing the ornament to the top or bottom, but that isn't in the standard. We'll just ignore them.\n\t\t\tif (legalAccents.includes(ret[1]))\n\t\t\t\treturn ret;\n\t\t\tif (volumeDecorations.includes(ret[1])) {\n\t\t\t\tif (multilineVars.volumePosition === 'hidden' )\n\t\t\t\t\tret[1] = '';\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t\tif (dynamicDecorations.includes(ret[1])) {\n\t\t\t\tif (multilineVars.dynamicPosition === 'hidden' )\n\t\t\t\t\tret[1] = '';\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\tvar ind = accentPseudonyms.findIndex(function (acc) { return ret[1] === acc[0]})\n\t\t\tif (ind >= 0) {\n\t\t\t\tret[1] = accentPseudonyms[ind][1];\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\tind = accentDynamicPseudonyms.findIndex(function (acc) { return ret[1] === acc[0]})\n\t\t\tif (ind >= 0) {\n\t\t\t\tret[1] = accentDynamicPseudonyms[ind][1];\n\t\t\t\tif (multilineVars.dynamicPosition === 'hidden' )\n\t\t\t\t\tret[1] = '';\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\t// We didn't find the accent in the list, so consume the space, but don't return an accent.\n\t\t\t// Although it is possible that ! was used as a line break, so accept that.\n\t\t\tif (line[i] === '!' && (ret[0] === 1 || line[i+ret[0]-1] !== '!'))\n\t\t\t\treturn [1, null ];\n\t\t\twarn(\"Unknown decoration: \" + ret[1], line, i);\n\t\t\tret[1] = \"\";\n\t\t\treturn ret;\n\t\tcase 'H':return [1, 'fermata'];\n\t\tcase 'J':return [1, 'slide'];\n\t\tcase 'L':return [1, 'accent'];\n\t\tcase 'M':return [1, 'mordent'];\n\t\tcase 'O':return[1, 'coda'];\n\t\tcase 'P':return[1, 'pralltriller'];\n\t\tcase 'R':return [1, 'roll'];\n\t\tcase 'S':return [1, 'segno'];\n\t\tcase 'T':return [1, 'trill'];\n\t\tcase 't':return [1, 'trillh'];\n\t\t\n\t}\n\treturn [0, 0];\n};\n\nvar letter_to_spacer = function(line, i) {\n\tvar start = i;\n\twhile (tokenizer.isWhiteSpace(line[i]))\n\t\ti++;\n\treturn [ i-start ];\n};\n\n// returns the class of the bar line\n// the number of the repeat\n// and the number of characters used up\n// if 0 is returned, then the next element was not a bar line\nvar letter_to_bar = function(line, curr_pos) {\n\tvar ret = tokenizer.getBarLine(line, curr_pos);\n\tif (ret.len === 0)\n\t\treturn [0,\"\"];\n\tif (ret.warn) {\n\t\twarn(ret.warn, line, curr_pos);\n\t\treturn [ret.len,\"\"];\n\t}\n\n\t// Now see if this is a repeated ending\n\t// A repeated ending is all of the characters 1,2,3,4,5,6,7,8,9,0,-, and comma\n\t// It can also optionally start with '[', which is ignored.\n\t// Also, it can have white space before the '['.\n\tfor (var ws = 0; ws < line.length; ws++)\n\t\tif (line[curr_pos + ret.len + ws] !== ' ')\n\t\t\tbreak;\n\tvar orig_bar_len = ret.len;\n\tif (line[curr_pos+ret.len+ws] === '[') {\n\t\tret.len += ws + 1;\n\t}\n\n\t// It can also be a quoted string. It is unclear whether that construct requires '[', but it seems like it would. otherwise it would be confused with a regular chord.\n\tif (line[curr_pos+ret.len] === '\"' && line[curr_pos+ret.len-1] === '[') {\n\t\tvar ending = tokenizer.getBrackettedSubstring(line, curr_pos+ret.len, 5);\n\t\treturn [ret.len+ending[0], ret.token, ending[1]];\n\t}\n\tvar retRep = tokenizer.getTokenOf(line.substring(curr_pos+ret.len), \"1234567890-,\");\n\tif (retRep.len === 0 || retRep.token[0] === '-')\n\t\treturn [orig_bar_len, ret.token];\n\n\treturn [ret.len+retRep.len, ret.token, retRep.token];\n};\n\nvar letter_to_open_slurs_and_triplets =  function(line, i) {\n\t// consume spaces, and look for all the open parens. If there is a number after the open paren,\n\t// that is a triplet. Otherwise that is a slur. Collect all the slurs and the first triplet.\n\tvar ret = {};\n\tvar start = i;\n\tif (line[i] === '.' && line[i+1] === '(') {\n\t\tret.dottedSlur = true;\n\t\ti++;\n\t}\n\twhile (line[i] === '(' || tokenizer.isWhiteSpace(line[i])) {\n\t\tif (line[i] === '(') {\n\t\t\tif (i+1 < line.length && (line[i+1] >= '2' && line[i+1] <= '9')) {\n\t\t\t\tif (ret.triplet !== undefined)\n\t\t\t\t\twarn(\"Can't nest triplets\", line, i);\n\t\t\t\telse {\n\t\t\t\t\tret.triplet = line[i+1] - '0';\n\t\t\t\t\tret.tripletQ = tripletQ[ret.triplet];\n\t\t\t\t\tret.num_notes = ret.triplet;\n\t\t\t\t\tif (i+2 < line.length && line[i+2] === ':') {\n\t\t\t\t\t\t// We are expecting \"(p:q:r\" or \"(p:q\" or \"(p::r\"\n\t\t\t\t\t\t// That is: \"put p notes into the time of q for the next r notes\"\n\t\t\t\t\t\t// if r is missing, then it is equal to p.\n\t\t\t\t\t\t// if q is missing, it is determined from this table:\n\t\t\t\t\t\t// (2 notes in the time of 3\n\t\t\t\t\t\t// (3 notes in the time of 2\n\t\t\t\t\t\t// (4 notes in the time of 3\n\t\t\t\t\t\t// (5 notes in the time of n | if time sig is (6/8, 9/8, 12/8), n=3, else n=2\n\t\t\t\t\t\t// (6 notes in the time of 2\n\t\t\t\t\t\t// (7 notes in the time of n\n\t\t\t\t\t\t// (8 notes in the time of 3\n\t\t\t\t\t\t// (9 notes in the time of n\n\t\t\t\t\t\tif (i+3 < line.length && line[i+3] === ':') {\n\t\t\t\t\t\t\t// The second number, 'q', is not present.\n\t\t\t\t\t\t\tif (i+4 < line.length && (line[i+4] >= '1' && line[i+4] <= '9')) {\n\t\t\t\t\t\t\t\tret.num_notes = line[i+4] - '0';\n\t\t\t\t\t\t\t\ti += 3;\n\t\t\t\t\t\t\t} else\n\t\t\t\t\t\t\t\twarn(\"expected number after the two colons after the triplet to mark the duration\", line, i);\n\t\t\t\t\t\t} else if (i+3 < line.length && (line[i+3] >= '1' && line[i+3] <= '9')) {\n\t\t\t\t\t\t\tret.tripletQ = line[i+3] - '0';\n\t\t\t\t\t\t\tif (i+4 < line.length && line[i+4] === ':') {\n\t\t\t\t\t\t\t\tif (i+5 < line.length && (line[i+5] >= '1' && line[i+5] <= '9')) {\n\t\t\t\t\t\t\t\t\tret.num_notes = line[i+5] - '0';\n\t\t\t\t\t\t\t\t\ti += 4;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ti += 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\twarn(\"expected number after the triplet to mark the duration\", line, i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (ret.startSlur === undefined)\n\t\t\t\t\tret.startSlur = 1;\n\t\t\t\telse\n\t\t\t\t\tret.startSlur++;\n\t\t\t}\n\t\t}\n\t\ti++;\n\t}\n\tret.consumed = i-start;\n\treturn ret;\n};\n\nMusicParser.prototype.startNewLine = function() {\n\tvar params = { startChar: -1, endChar: -1};\n\tif (multilineVars.partForNextLine.title)\n\t\tparams.part = multilineVars.partForNextLine;\n\tparams.clef = multilineVars.currentVoice && multilineVars.staves[multilineVars.currentVoice.staffNum].clef !== undefined ? Object.assign({},multilineVars.staves[multilineVars.currentVoice.staffNum].clef) : Object.assign({},multilineVars.clef);\n\tvar scoreTranspose = multilineVars.currentVoice ? multilineVars.currentVoice.scoreTranspose : 0;\n\tparams.key = parseKeyVoice.standardKey(multilineVars.key.root+multilineVars.key.acc+multilineVars.key.mode, multilineVars.key.root, multilineVars.key.acc, scoreTranspose);\n\tparams.key.mode = multilineVars.key.mode;\n\tif (multilineVars.key.impliedNaturals)\n\t\tparams.key.impliedNaturals = multilineVars.key.impliedNaturals;\n\tif (multilineVars.key.explicitAccidentals) {\n\t\tfor (var i = 0; i < multilineVars.key.explicitAccidentals.length; i++) {\n\t\t\tvar found = false;\n\t\t\tfor (var j = 0; j < params.key.accidentals.length; j++) {\n\t\t\t\tif (params.key.accidentals[j].note === multilineVars.key.explicitAccidentals[i].note) {\n\t\t\t\t\t// If the note is already in the list, override it with the new value\n\t\t\t\t\tparams.key.accidentals[j].acc = multilineVars.key.explicitAccidentals[i].acc;\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!found)\n\t\t\t\tparams.key.accidentals.push(multilineVars.key.explicitAccidentals[i]);\n\t\t}\n\t}\n\tmultilineVars.targetKey = params.key;\n\tif (params.key.explicitAccidentals)\n\t\tdelete params.key.explicitAccidentals;\n\tparseKeyVoice.addPosToKey(params.clef, params.key);\n\tif (multilineVars.meter !== null) {\n\t\tif (multilineVars.currentVoice) {\n\t\t\tmultilineVars.staves.forEach(function(st) {\n\t\t\t\tst.meter = multilineVars.meter;\n\t\t\t});\n\t\t\tparams.meter = multilineVars.staves[multilineVars.currentVoice.staffNum].meter;\n\t\t\tmultilineVars.staves[multilineVars.currentVoice.staffNum].meter = null;\n\t\t} else\n\t\t\tparams.meter = multilineVars.meter;\n\t\tmultilineVars.meter = null;\n\t} else if (multilineVars.currentVoice && multilineVars.staves[multilineVars.currentVoice.staffNum].meter) {\n\t\t// Make sure that each voice gets the meter marking.\n\t\tparams.meter = multilineVars.staves[multilineVars.currentVoice.staffNum].meter;\n\t\tmultilineVars.staves[multilineVars.currentVoice.staffNum].meter = null;\n\t}\n\tif (multilineVars.currentVoice && multilineVars.currentVoice.name)\n\t\tparams.name = multilineVars.currentVoice.name;\n\tif (multilineVars.vocalfont)\n\t\tparams.vocalfont = multilineVars.vocalfont;\n\tif (multilineVars.tripletfont)\n\t\tparams.tripletfont = multilineVars.tripletfont;\n\tif (multilineVars.gchordfont)\n\t\tparams.gchordfont = multilineVars.gchordfont;\n\tif (multilineVars.style)\n\t\tparams.style = multilineVars.style;\n\tif (multilineVars.currentVoice) {\n\t\tvar staff = multilineVars.staves[multilineVars.currentVoice.staffNum];\n\t\tif (staff.brace) params.brace = staff.brace;\n\t\tif (staff.bracket) params.bracket = staff.bracket;\n\t\tif (staff.connectBarLines) params.connectBarLines = staff.connectBarLines;\n\t\tif (staff.name) params.name = staff.name[multilineVars.currentVoice.index];\n\t\tif (staff.subname) params.subname = staff.subname[multilineVars.currentVoice.index];\n\t\tif (multilineVars.currentVoice.stem)\n\t\t\tparams.stem = multilineVars.currentVoice.stem;\n\t\tif (multilineVars.currentVoice.stafflines)\n\t\t\tparams.stafflines = multilineVars.currentVoice.stafflines;\n\t\tif (multilineVars.currentVoice.staffscale)\n\t\t\tparams.staffscale = multilineVars.currentVoice.staffscale;\n\t\tif (multilineVars.currentVoice.scale)\n\t\t\tparams.scale = multilineVars.currentVoice.scale;\n\t\tif (multilineVars.currentVoice.color)\n\t\t\tparams.color = multilineVars.currentVoice.color;\n\t\tif (multilineVars.currentVoice.style)\n\t\t\tparams.style = multilineVars.currentVoice.style;\n\t\tif (multilineVars.currentVoice.transpose)\n\t\t\tparams.clef.transpose = multilineVars.currentVoice.transpose;\n\t\tparams.currentVoice = multilineVars.currentVoice\n\t\tvar voices = Object.keys(multilineVars.voices)\n\t\tfor (var mv = 0; mv < voices.length; mv++) {\n\t\t\tif (params.currentVoice.staffNum === multilineVars.voices[voices[mv]].staffNum && params.currentVoice.index === multilineVars.voices[voices[mv]].index)\n\t\t\t\tparams.currentVoiceName = voices[mv]\n\t\t}\n\t}\n\tif (multilineVars.barNumbers === 0 && isFirstVoice() && multilineVars.currBarNumber !== 1)\n\t\tparams.barNumber = multilineVars.currBarNumber;\n\ttuneBuilder.startNewLine(params);\n\tif (multilineVars.key.impliedNaturals)\n\t\tdelete multilineVars.key.impliedNaturals;\n\n\tmultilineVars.partForNextLine = {};\n\tif (multilineVars.tempoForNextLine.length === 4)\n\t\ttuneBuilder.appendElement(multilineVars.tempoForNextLine[0],multilineVars.tempoForNextLine[1],multilineVars.tempoForNextLine[2],multilineVars.tempoForNextLine[3]);\n\tmultilineVars.tempoForNextLine = [];\n}\n\n// TODO-PER: make this a method in el.\nvar addEndBeam = function(el) {\n\tif (el.duration !== undefined && el.duration < 0.25)\n\t\tel.end_beam = true;\n\treturn el;\n};\n\nvar getCoreNote = function(line, index, el, canHaveBrokenRhythm) {\n\t//var el = { startChar: index };\n\tvar isComplete = function(state) {\n\t\treturn (state === 'octave' || state === 'duration' || state === 'Zduration' || state === 'broken_rhythm' || state === 'end_slur');\n\t};\n\tvar dottedTie;\n\tif (line[index] === '.' && line[index+1] === '-') {\n\t\tdottedTie = true;\n\t\tindex++;\n\t}\n\tvar state = 'startSlur';\n\tvar durationSetByPreviousNote = false;\n\twhile (1) {\n\t\tswitch(line[index]) {\n\t\t\tcase '(':\n\t\t\t\tif (state === 'startSlur') {\n\t\t\t\t\tif (el.startSlur === undefined) el.startSlur = 1; else el.startSlur++;\n\t\t\t\t} else if (isComplete(state)) {el.endChar = index;return el;}\n\t\t\t\telse return null;\n\t\t\t\tbreak;\n\t\t\tcase ')':\n\t\t\t\tif (isComplete(state)) {\n\t\t\t\t\tif (el.endSlur === undefined) el.endSlur = 1; else el.endSlur++;\n\t\t\t\t} else return null;\n\t\t\t\tbreak;\n\t\t\tcase '^':\n\t\t\t\tif (state === 'startSlur') {el.accidental = 'sharp';state = 'sharp2';}\n\t\t\t\telse if (state === 'sharp2') {el.accidental = 'dblsharp';state = 'pitch';}\n\t\t\t\telse if (isComplete(state)) {el.endChar = index;return el;}\n\t\t\t\telse return null;\n\t\t\t\tbreak;\n\t\t\tcase '_':\n\t\t\t\tif (state === 'startSlur') {el.accidental = 'flat';state = 'flat2';}\n\t\t\t\telse if (state === 'flat2') {el.accidental = 'dblflat';state = 'pitch';}\n\t\t\t\telse if (isComplete(state)) {el.endChar = index;return el;}\n\t\t\t\telse return null;\n\t\t\t\tbreak;\n\t\t\tcase '=':\n\t\t\t\tif (state === 'startSlur') {el.accidental = 'natural';state = 'pitch';}\n\t\t\t\telse if (isComplete(state)) {el.endChar = index;return el;}\n\t\t\t\telse return null;\n\t\t\t\tbreak;\n\t\t\tcase 'A':\n\t\t\tcase 'B':\n\t\t\tcase 'C':\n\t\t\tcase 'D':\n\t\t\tcase 'E':\n\t\t\tcase 'F':\n\t\t\tcase 'G':\n\t\t\tcase 'a':\n\t\t\tcase 'b':\n\t\t\tcase 'c':\n\t\t\tcase 'd':\n\t\t\tcase 'e':\n\t\t\tcase 'f':\n\t\t\tcase 'g':\n\t\t\t\tif (state === 'startSlur' || state === 'sharp2' || state === 'flat2' || state === 'pitch') {\n\t\t\t\t\tel.pitch = pitches[line[index]];\n\t\t\t\t\tel.pitch += 7 * (multilineVars.currentVoice && multilineVars.currentVoice.octave !== undefined ? multilineVars.currentVoice.octave : multilineVars.octave);\n\t\t\t\t\tel.name = line[index];\n\t\t\t\t\tif (el.accidental)\n\t\t\t\t\t\tel.name = accMap[el.accidental] + el.name;\n\t\t\t\t\ttranspose.note(multilineVars, el);\n\t\t\t\t\tstate = 'octave';\n\t\t\t\t\t// At this point we have a valid note. The rest is optional. Set the duration in case we don't get one below\n\t\t\t\t\tif (canHaveBrokenRhythm && multilineVars.next_note_duration !== 0) {\n\t\t\t\t\t\tel.duration = multilineVars.default_length * multilineVars.next_note_duration;\n\t\t\t\t\t\tmultilineVars.next_note_duration = 0;\n\t\t\t\t\t\tdurationSetByPreviousNote = true;\n\t\t\t\t\t} else\n\t\t\t\t\t\tel.duration = multilineVars.default_length;\n\t\t\t\t\t// If the clef is percussion, there is probably some translation of the pitch to a particular drum kit item.\n\t\t\t\t\tif ((multilineVars.clef && multilineVars.clef.type === \"perc\") ||\n\t\t\t\t\t\t(multilineVars.currentVoice && multilineVars.currentVoice.clef === \"perc\")) {\n\t\t\t\t\t\tvar key = line[index];\n\t\t\t\t\t\tif (el.accidental) {\n\t\t\t\t\t\t\tkey = accMap[el.accidental] + key;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (tune.formatting && tune.formatting.midi && tune.formatting.midi.drummap)\n\t\t\t\t\t\tel.midipitch = tune.formatting.midi.drummap[key];\n\t\t\t\t\t}\n\t\t\t\t} else if (isComplete(state)) {el.endChar = index;return el;}\n\t\t\t\telse return null;\n\t\t\t\tbreak;\n\t\t\tcase ',':\n\t\t\t\tif (state === 'octave') {el.pitch -= 7; el.name += ','; }\n\t\t\t\telse if (isComplete(state)) {el.endChar = index;return el;}\n\t\t\t\telse return null;\n\t\t\t\tbreak;\n\t\t\tcase '\\'':\n\t\t\t\tif (state === 'octave') {el.pitch += 7; el.name += \"'\";  }\n\t\t\t\telse if (isComplete(state)) {el.endChar = index;return el;}\n\t\t\t\telse return null;\n\t\t\t\tbreak;\n\t\t\tcase 'x':\n\t\t\tcase 'X':\n\t\t\tcase 'y':\n\t\t\tcase 'z':\n\t\t\tcase 'Z':\n\t\t\t\tif (state === 'startSlur') {\n\t\t\t\t\tel.rest = { type: rests[line[index]] };\n\t\t\t\t\t// There shouldn't be some of the properties that notes have. If some sneak in due to bad syntax in the abc file,\n\t\t\t\t\t// just nix them here.\n\t\t\t\t\tdelete el.accidental;\n\t\t\t\t\tdelete el.startSlur;\n\t\t\t\t\tdelete el.startTie;\n\t\t\t\t\tdelete el.endSlur;\n\t\t\t\t\tdelete el.endTie;\n\t\t\t\t\tdelete el.end_beam;\n\t\t\t\t\tdelete el.grace_notes;\n\t\t\t\t\t// At this point we have a valid note. The rest is optional. Set the duration in case we don't get one below\n\t\t\t\t\tif (el.rest.type.indexOf('multimeasure') >= 0) {\n\t\t\t\t\t\tel.duration = tune.getBarLength();\n\t\t\t\t\t\tel.rest.text = 1;\n\t\t\t\t\t\tstate = 'Zduration';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (canHaveBrokenRhythm && multilineVars.next_note_duration !== 0) {\n\t\t\t\t\t\t\tel.duration = multilineVars.default_length * multilineVars.next_note_duration;\n\t\t\t\t\t\t\tmultilineVars.next_note_duration = 0;\n\t\t\t\t\t\t\tdurationSetByPreviousNote = true;\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tel.duration = multilineVars.default_length;\n\t\t\t\t\t\tstate = 'duration';\n\t\t\t\t\t}\n\t\t\t\t} else if (isComplete(state)) {el.endChar = index;return el;}\n\t\t\t\telse return null;\n\t\t\t\tbreak;\n\t\t\tcase '1':\n\t\t\tcase '2':\n\t\t\tcase '3':\n\t\t\tcase '4':\n\t\t\tcase '5':\n\t\t\tcase '6':\n\t\t\tcase '7':\n\t\t\tcase '8':\n\t\t\tcase '9':\n\t\t\tcase '0':\n\t\t\tcase '/':\n\t\t\t\tif (state === 'octave' || state === 'duration') {\n\t\t\t\t\tvar fraction = tokenizer.getFraction(line, index);\n\t\t\t\t\t//if (!durationSetByPreviousNote)\n\t\t\t\t\tel.duration = el.duration * fraction.value;\n\t\t\t\t\t// TODO-PER: We can test the returned duration here and give a warning if it isn't the one expected.\n\t\t\t\t\tel.endChar = fraction.index;\n\t\t\t\t\twhile (fraction.index < line.length && (tokenizer.isWhiteSpace(line[fraction.index]) || line[fraction.index] === '-')) {\n\t\t\t\t\t\tif (line[fraction.index] === '-')\n\t\t\t\t\t\t\tel.startTie = {};\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tel = addEndBeam(el);\n\t\t\t\t\t\tfraction.index++;\n\t\t\t\t\t}\n\t\t\t\t\tindex = fraction.index-1;\n\t\t\t\t\tstate = 'broken_rhythm';\n\t\t\t\t} else if (state === 'sharp2') {\n\t\t\t\t\tel.accidental = 'quartersharp';state = 'pitch';\n\t\t\t\t} else if (state === 'flat2') {\n\t\t\t\t\tel.accidental = 'quarterflat';state = 'pitch';\n\t\t\t\t} else if (state === 'Zduration') {\n\t\t\t\t\tvar num = tokenizer.getNumber(line, index);\n\t\t\t\t\tel.duration = num.num * tune.getBarLength();\n\t\t\t\t\tel.rest.text = num.num;\n\t\t\t\t\tel.endChar = num.index;\n\t\t\t\t\treturn el;\n\t\t\t\t} else return null;\n\t\t\t\tbreak;\n\t\t\tcase '-':\n\t\t\t\tif (state === 'startSlur') {\n\t\t\t\t\t// This is the first character, so it must have been meant for the previous note. Correct that here.\n\t\t\t\t\ttuneBuilder.addTieToLastNote(dottedTie);\n\t\t\t\t\tel.endTie = true;\n\t\t\t\t} else if (state === 'octave' || state === 'duration' || state === 'end_slur') {\n\t\t\t\t\tel.startTie = {};\n\t\t\t\t\tif (!durationSetByPreviousNote && canHaveBrokenRhythm)\n\t\t\t\t\t\tstate = 'broken_rhythm';\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Peek ahead to the next character. If it is a space, then we have an end beam.\n\t\t\t\t\t\tif (tokenizer.isWhiteSpace(line[index + 1]))\n\t\t\t\t\t\t\taddEndBeam(el);\n\t\t\t\t\t\tel.endChar = index+1;\n\t\t\t\t\t\treturn el;\n\t\t\t\t\t}\n\t\t\t\t} else if (state === 'broken_rhythm') {el.endChar = index;return el;}\n\t\t\t\telse return null;\n\t\t\t\tbreak;\n\t\t\tcase ' ':\n\t\t\tcase '\\t':\n\t\t\t\tif (isComplete(state)) {\n\t\t\t\t\tel.end_beam = true;\n\t\t\t\t\t// look ahead to see if there is a tie\n\t\t\t\t\tdottedTie = false;\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (line[index] === '.' && line[index+1] === '-') {\n\t\t\t\t\t\t\tdottedTie = true;\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (line[index] === '-') {\n\t\t\t\t\t\t\tel.startTie = {};\n\t\t\t\t\t\t\tif (dottedTie)\n\t\t\t\t\t\t\t\tel.startTie.style = \"dotted\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t} while (index < line.length &&\n\t\t\t\t\t\t(tokenizer.isWhiteSpace(line[index]) || line[index] === '-') ||\n\t\t\t\t\t\t(line[index] === '.' && line[index+1] === '-'));\n\t\t\t\t\tel.endChar = index;\n\t\t\t\t\tif (!durationSetByPreviousNote && canHaveBrokenRhythm && (line[index] === '<' || line[index] === '>')) {\t// TODO-PER: Don't need the test for < and >, but that makes the endChar work out for the regression test.\n\t\t\t\t\t\tindex--;\n\t\t\t\t\t\tstate = 'broken_rhythm';\n\t\t\t\t\t} else\n\t\t\t\t\t\treturn el;\n\t\t\t\t}\n\t\t\t\telse return null;\n\t\t\t\tbreak;\n\t\t\tcase '>':\n\t\t\tcase '<':\n\t\t\t\tif (isComplete(state)) {\n\t\t\t\t\tif (canHaveBrokenRhythm) {\n\t\t\t\t\t\tvar br2 = getBrokenRhythm(line, index);\n\t\t\t\t\t\tindex += br2[0] - 1;\t// index gets incremented below, so we'll let that happen\n\t\t\t\t\t\tmultilineVars.next_note_duration = br2[2];\n\t\t\t\t\t\tel.duration = br2[1]*el.duration;\n\t\t\t\t\t\tstate = 'end_slur';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.endChar = index;\n\t\t\t\t\t\treturn el;\n\t\t\t\t\t}\n\t\t\t\t} else\n\t\t\t\t\treturn null;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif (isComplete(state)) {\n\t\t\t\t\tel.endChar = index;\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t}\n\t\tindex++;\n\t\tif (index === line.length) {\n\t\t\tif (isComplete(state)) {el.endChar = index;return el;}\n\t\t\telse return null;\n\t\t}\n\t}\n\treturn null;\n};\n\nvar getBrokenRhythm = function(line, index) {\n\tswitch (line[index]) {\n\t\tcase '>':\n\t\t\tif (index < line.length - 2 && line[index + 1] === '>' && line[index + 2] === '>')\t// triple >>>\n\t\t\t\treturn [3, 1.875, 0.125];\n\t\t\telse if (index < line.length - 1 && line[index + 1] === '>')\t// double >>\n\t\t\t\treturn [2, 1.75, 0.25];\n\t\t\telse\n\t\t\t\treturn [1, 1.5, 0.5];\n\t\tcase '<':\n\t\t\tif (index < line.length - 2 && line[index + 1] === '<' && line[index + 2] === '<')\t// triple <<<\n\t\t\t\treturn [3, 0.125, 1.875];\n\t\t\telse if (index < line.length - 1 && line[index + 1] === '<')\t// double <<\n\t\t\t\treturn [2, 0.25, 1.75];\n\t\t\telse\n\t\t\t\treturn [1, 0.5, 1.5];\n\t}\n\treturn null;\n};\n\nfunction isFirstVoice() {\n\treturn multilineVars.currentVoice === undefined || (multilineVars.currentVoice.staffNum ===  0 && multilineVars.currentVoice.index ===  0);\n}\n\nmodule.exports = MusicParser;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL2FiY19wYXJzZV9tdXNpYy5qcyIsIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0IsbUJBQU8sQ0FBQywwRkFBdUI7QUFDbkQsZ0JBQWdCLG1CQUFPLENBQUMsOEVBQWlCOztBQUV6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxFQUFFLG1CQUFPLENBQUMsd0ZBQXNCOztBQUVsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUMscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMklBQTJJO0FBQzNJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBLHNCQUFzQixzQkFBc0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0NBQXNDO0FBQzVEO0FBQ0Esc0JBQXNCLGtDQUFrQztBQUN4RDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QixRQUFRO0FBQ1I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQiwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyw0QkFBNEI7QUFDakM7QUFDQTtBQUNBLHdFQUF3RTtBQUN4RTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDZDQUE2QztBQUM3QztBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4Q0FBOEMsc0JBQXNCO0FBQ3BFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQ7QUFDekQ7QUFDQTtBQUNBLGdEQUFnRCxzQkFBc0I7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtFQUFrRTtBQUNsRSxtQkFBbUI7QUFDbkI7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRkFBMEY7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHlEQUF5RCx5QkFBeUI7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNERBQTRELHlCQUF5QjtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLDRJQUE0SSxtRkFBbUY7QUFDL047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGtEQUFrRDtBQUNwRTtBQUNBLG1CQUFtQixtQ0FBbUM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixvQkFBb0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQ7QUFDdkQsTUFBTSw2QkFBNkIsbUJBQW1CO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1EO0FBQ25ELE1BQU07QUFDTjtBQUNBO0FBQ0EsZ0NBQWdDLHdCQUF3QjtBQUN4RCxrQ0FBa0MsMkJBQTJCO0FBQzdELGlDQUFpQyxtQkFBbUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHVCQUF1QjtBQUN2RCxpQ0FBaUMsMEJBQTBCO0FBQzNELGlDQUFpQyxtQkFBbUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDBCQUEwQjtBQUMxRCxpQ0FBaUMsbUJBQW1CO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sNkJBQTZCLG1CQUFtQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsZUFBZTtBQUM1QyxpQ0FBaUMsbUJBQW1CO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixlQUFlO0FBQzVDLGlDQUFpQyxtQkFBbUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLE1BQU0sNkJBQTZCLG1CQUFtQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixvQ0FBb0M7QUFDcEMsTUFBTTtBQUNOLG1DQUFtQztBQUNuQyxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHFDQUFxQyxtQkFBbUI7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsOEdBQThHO0FBQzlHO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixtQkFBbUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvcGFyc2UvYWJjX3BhcnNlX211c2ljLmpzPzUyMmIiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHBhcnNlS2V5Vm9pY2UgPSByZXF1aXJlKCcuL2FiY19wYXJzZV9rZXlfdm9pY2UnKTtcbnZhciB0cmFuc3Bvc2UgPSByZXF1aXJlKCcuL2FiY190cmFuc3Bvc2UnKTtcblxudmFyIHRva2VuaXplcjtcbnZhciB3YXJuO1xudmFyIG11bHRpbGluZVZhcnM7XG52YXIgdHVuZTtcbnZhciB0dW5lQnVpbGRlcjtcbnZhciBoZWFkZXI7XG5cbnZhciB7XG4gIGxlZ2FsQWNjZW50cyxcbiAgdm9sdW1lRGVjb3JhdGlvbnMsXG4gIGR5bmFtaWNEZWNvcmF0aW9ucyxcbiAgYWNjZW50UHNldWRvbnltcyxcbiAgYWNjZW50RHluYW1pY1BzZXVkb255bXMsXG4gIG5vbkRlY29yYXRpb25zLFxuICBkdXJhdGlvbnMsXG4gIHBpdGNoZXMsXG4gIHJlc3RzLFxuICBhY2NNYXAsXG4gIHRyaXBsZXRRXG59ID0gcmVxdWlyZSgnLi9hYmNfcGFyc2Vfc2V0dGluZ3MnKVxuXG52YXIgTXVzaWNQYXJzZXIgPSBmdW5jdGlvbihfdG9rZW5pemVyLCBfd2FybiwgX211bHRpbGluZVZhcnMsIF90dW5lLCBfdHVuZUJ1aWxkZXIsIF9oZWFkZXIpIHtcblx0dG9rZW5pemVyID0gX3Rva2VuaXplcjtcblx0d2FybiA9IF93YXJuO1xuXHRtdWx0aWxpbmVWYXJzID0gX211bHRpbGluZVZhcnM7XG5cdHR1bmUgPSBfdHVuZTtcblx0dHVuZUJ1aWxkZXIgPSBfdHVuZUJ1aWxkZXI7XG5cdGhlYWRlciA9IF9oZWFkZXI7XG5cdHRoaXMubGluZUNvbnRpbnVhdGlvbiA9IGZhbHNlO1xufVxuXG4vL1xuLy8gUGFyc2UgbGluZSBvZiBtdXNpY1xuLy9cbi8vIFRoaXMgaXMgYSBzdHJlYW0gb2YgPChiYXItbWFya2luZ3xoZWFkZXJ8bm90ZS1ncm91cCkuLi4+IGluIGFueSBvcmRlciwgd2l0aCBvcHRpb25hbCBzcGFjZXMgYmV0d2VlbiBlYWNoIGVsZW1lbnRcbi8vIGNvcmUtbm90ZSBpcyA8b3Blbi1zbHVyLCBhY2NpZGVudGFsLCBwaXRjaDpyZXF1aXJlZCwgb2N0YXZlLCBkdXJhdGlvbiwgY2xvc2Utc2x1ciZ8dGllPiB3aXRoIG5vIHNwYWNlcyB3aXRoaW4gdGhhdFxuLy8gY2hvcmQgaXMgPG9wZW4tYnJhY2tldDpyZXF1aXJlZCwgY29yZS1ub3RlOnJlcXVpcmVkLi4uIGNsb3NlLWJyYWNrZXQ6cmVxdWlyZWQgZHVyYXRpb24+IHdpdGggbm8gc3BhY2VzIHdpdGhpbiB0aGF0XG4vLyBncmFjZS1ub3RlcyBpcyA8b3Blbi1icmFjZTpyZXF1aXJlZCwgKG9wZW4tc2x1cnxjb3JlLW5vdGU6cmVxdWlyZWR8Y2xvc2Utc2x1cikuLi4sIGNsb3NlLWJyYWNlOnJlcXVpcmVkPiBzcGFjZXMgYXJlIGFsbG93ZWRcbi8vIG5vdGUtZ3JvdXAgaXMgPGdyYWNlLW5vdGVzLCBjaG9yZCBzeW1ib2xzJnxkZWNvcmF0aW9ucy4uLiwgZ3JhY2Utbm90ZXMsIHNsdXImfHRyaXBsZXQsIGNob3JkfGNvcmUtbm90ZSwgZW5kLXNsdXJ8dGllPiBzcGFjZXMgYXJlIGFsbG93ZWQgYmV0d2VlbiBpdGVtc1xuLy8gYmFyLW1hcmtpbmcgaXMgPGFtcGVyc2FuZD4gb3IgPGNob3JkIHN5bWJvbHMmfGRlY29yYXRpb25zLi4uLCBiYXI6cmVxdWlyZWQ+IHNwYWNlcyBhbGxvd2VkXG4vLyBoZWFkZXIgaXMgPG9wZW4tYnJhY2tldDpyZXF1aXJlZCwgS3xNfEx8VjpyZXF1aXJlZCwgY29sb246cmVxdWlyZWQsIGZpZWxkOnJlcXVpcmVkLCBjbG9zZS1icmFja2V0OnJlcXVpcmVkPiBzcGFjZXMgY2FuIG9jY3VyIGJldHdlZW4gdGhlIGNvbG9uLCBpbiB0aGUgZmllbGQsIGFuZCBiZWZvcmUgdGhlIGNsb3NlIGJyYWNrZXRcbi8vIGhlYWRlciBjYW4gYWxzbyBiZSB0aGUgb25seSB0aGluZyBvbiBhIGxpbmUuIFRoaXMgaXMgdHJ1ZSBldmVuIGlmIGl0IGlzIGEgY29udGludWF0aW9uIGxpbmUuIEluIHRoaXMgY2FzZSB0aGUgYnJhY2tldHMgYXJlIG5vdCByZXF1aXJlZC5cbi8vIGEgc3BhY2UgaXMgYSBiYWNrLXRpY2ssIGEgc3BhY2UsIG9yIGEgdGFiLiBJZiBpdCBpcyBhIGJhY2stdGljaywgdGhlbiB0aGVyZSBpcyBubyBlbmQtYmVhbS5cblxuLy8gTGluZSBwcmVwcm9jZXNzaW5nOiBhbnl0aGluZyBhZnRlciBhICUgaXMgaWdub3JlZCAodGhlIGRvdWJsZSAlJSBzaG91bGQgaGF2ZSBiZWVuIHRha2VuIGNhcmUgb2YgYmVmb3JlIHRoaXMpXG4vLyBUaGVuLCBhbGwgbGVhZGluZyBhbmQgdHJhaWxpbmcgc3BhY2VzIGFyZSBpZ25vcmVkLlxuLy8gSWYgdGhlcmUgd2FzIGEgbGluZSBjb250aW51YXRpb24sIHRoZSBcXG4gd2FzIHJlcGxhY2VkIGJ5IGEgXFxyIGFuZCB0aGUgXFwgd2FzIHJlcGxhY2VkIGJ5IGEgc3BhY2UuIFRoaXMgYWxsb3dzIHRoZSBjb25zdHJ1Y3Rcbi8vIG9mIGhhdmluZyBhIGhlYWRlciBtaWQtbGluZSBjb25jZXB0dWFsbHksIGJ1dCBhY3R1YWxseSBiZSBhdCB0aGUgc3RhcnQgb2YgdGhlIGxpbmUuIFRoaXMgaXMgZXF1aXZvbGVudCB0byBwdXR0aW5nIHRoZSBoZWFkZXIgaW4gWyBdLlxuXG4vLyBUT0RPLVBFUjogSG93IHRvIGhhbmRsZSAhIGZvciBsaW5lIGJyZWFrP1xuLy8gVE9ETy1QRVI6IGRvdHMgYmVmb3JlIGJhciwgZG90cyBiZWZvcmUgc2x1clxuLy8gVE9ETy1QRVI6IFU6IHJlZGVmaW5hYmxlIHN5bWJvbHMuXG5cbi8vIEFtYmlndW91cyBzeW1ib2xzOlxuLy8gXCJbXCIgY2FuIGJlIHRoZSBzdGFydCBvZiBhIGNob3JkLCB0aGUgc3RhcnQgb2YgYSBoZWFkZXIgZWxlbWVudCBvciBwYXJ0IG9mIGEgYmFyIGxpbmUuXG4vLyAtLS0gaWYgaXQgaXMgaW1tZWRpYXRlbHkgZm9sbG93ZWQgYnkgXCJ8XCIsIGl0IGlzIGEgYmFyIGxpbmVcbi8vIC0tLSBpZiBpdCBpcyBpbW1lZGlhdGVseSBmb2xsb3dlZCBieSBLOiBMOiBNOiBWOiBpdCBpcyBhIGhlYWRlciAobm90ZTogdGhlcmUgYXJlIG90aGVyIGhlYWRlcnMgbWVudGlvbmVkIGluIHRoZSBzdGFuZGFyZCwgYnV0IEknbSBub3Qgc3VyZSBob3cgdGhleSB3b3VsZCBiZSB1c2VkLilcbi8vIC0tLSBvdGhlcndpc2UgaXQgaXMgdGhlIGJlZ2lubmluZyBvZiBhIGNob3JkXG4vLyBcIihcIiBjYW4gYmUgdGhlIHN0YXJ0IG9mIGEgc2x1ciBvciBhIHRyaXBsZXRcbi8vIC0tLSBpZiBpdCBpcyBmb2xsb3dlZCBieSBhIG51bWJlciBmcm9tIDItOSwgdGhlbiBpdCBpcyBhIHRyaXBsZXRcbi8vIC0tLSBvdGhlcndpc2UgaXQgaXMgYSBzbHVyXG4vLyBcIl1cIlxuLy8gLS0tIGlmIHRoZXJlIGlzIGEgY2hvcmQgb3BlbiwgdGhlbiB0aGlzIGlzIHRoZSBjbG9zZVxuLy8gLS0tIGlmIGl0IGlzIGFmdGVyIGEgW3wsIHRoZW4gaXQgaXMgYW4gaW52aXNpYmxlIGJhciBsaW5lXG4vLyAtLS0gb3RoZXJ3aXNlLCBpdCBpcyBwYXIgb2YgYSBiYXJcbi8vIFwiLlwiIGNhbiBiZSBhIGJhciBtb2RpZmllciBvciBhIHNsdXIgbW9kaWZpZXIsIG9yIGEgZGVjb3JhdGlvblxuLy8gLS0tIGlmIGl0IGNvbWVzIGltbWVkaWF0ZWx5IGJlZm9yZSBhIGJhciwgaXQgaXMgYSBiYXIgbW9kaWZpZXJcbi8vIC0tLSBpZiBpdCBjb21lcyBpbW1lZGlhdGVseSBiZWZvcmUgYSBzbHVyLCBpdCBpcyBhIHNsdXIgbW9kaWZpZXJcbi8vIC0tLSBvdGhlcndpc2UgaXQgaXMgYSBkZWNvcmF0aW9uIGZvciB0aGUgbmV4dCBub3RlLlxuLy8gbnVtYmVyOlxuLy8gLS0tIGlmIGl0IGlzIGFmdGVyIGEgYmFyLCB3aXRoIG5vIHNwYWNlLCBpdCBpcyBhbiBlbmRpbmcgbWFya2VyXG4vLyAtLS0gaWYgaXQgaXMgYWZ0ZXIgYSAoIHdpdGggbm8gc3BhY2UsIGl0IGlzIGEgdHJpcGxldCBjb3VudFxuLy8gLS0tIGlmIGl0IGlzIGFmdGVyIGEgcGl0Y2ggb3Igb2N0YXZlIG9yIHNsYXNoLCB0aGVuIGl0IGlzIGEgZHVyYXRpb25cblxuLy8gVW5hbWJpZ3VvdXMgc3ltYm9scyAoZXhjZXB0IGluc2lkZSBxdW90ZWQgc3RyaW5ncyk6XG4vLyB2ZXJ0aWNhbC1iYXIsIGNvbG9uOiBwYXJ0IG9mIGEgYmFyXG4vLyBBQkNERUZHYWJjZGVmZzogcGl0Y2hcbi8vIHh5elo6IHJlc3Rcbi8vIGNvbW1hLCBwcmltZTogb2N0YXZlXG4vLyBjbG9zZS1wYXJlbjogZW5kLXNsdXJcbi8vIGh5cGhlbjogdGllXG4vLyB0aWxkZSwgdiwgdSwgYmFuZywgcGx1cywgVEhMTVBTTzogZGVjb3JhdGlvblxuLy8gY2FyYXQsIHVuZGVyc2NvcmUsIGVxdWFsOiBhY2NpZGVudGFsXG4vLyBhbXBlcnNhbmQ6IHRpbWUgcmVzZXRcbi8vIG9wZW4tY3VybHksIGNsb3NlLWN1cmx5OiBncmFjZSBub3Rlc1xuLy8gZG91YmxlLXF1b3RlOiBjaG9yZCBzeW1ib2xcbi8vIGxlc3MtdGhhbiwgZ3JlYXRlci10aGFuLCBzbGFzaDogZHVyYXRpb25cbi8vIGJhY2stdGljaywgc3BhY2UsIHRhYjogc3BhY2VcblxudmFyIGlzSW5UaWUgPSBmdW5jdGlvbihtdWx0aWxpbmVWYXJzLCBvdmVybGF5TGV2ZWwsIGVsKSB7XG5cdGlmIChtdWx0aWxpbmVWYXJzLmluVGllW292ZXJsYXlMZXZlbF0gPT09IHVuZGVmaW5lZClcblx0XHRyZXR1cm4gZmFsc2U7XG5cdC8vIElmIHRoaXMgaXMgc2luZ2xlIHZvaWNlIG11c2ljIHRoZW4gdGhlIHZvaWNlIGluZGV4IGlzbid0IHNldCwgc28gd2UgdXNlIHRoZSBmaXJzdCB2b2ljZS5cblx0dmFyIHZvaWNlSW5kZXggPSBtdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZSA/IG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLnN0YWZmTnVtICogMTAwICsgbXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2UuaW5kZXggOiAwO1xuXHRpZiAobXVsdGlsaW5lVmFycy5pblRpZVtvdmVybGF5TGV2ZWxdW3ZvaWNlSW5kZXhdKSB7XG5cdFx0aWYgKGVsLnBpdGNoZXMgIT09IHVuZGVmaW5lZCB8fCBlbC5yZXN0LnR5cGUgIT09ICdzcGFjZXInKVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0cmV0dXJuIGZhbHNlO1xufTtcblxudmFyIGVsID0geyB9O1xuTXVzaWNQYXJzZXIucHJvdG90eXBlLnBhcnNlTXVzaWMgPSBmdW5jdGlvbihsaW5lKSB7XG5cdGhlYWRlci5yZXNvbHZlVGVtcG8oKTtcblx0Ly9tdWx0aWxpbmVWYXJzLmhhdmVudF9zZXRfbGVuZ3RoID0gZmFsc2U7XHQvLyBUbyBsYXRlIHRvIHNldCB0aGlzIG5vdy5cblx0bXVsdGlsaW5lVmFycy5pc19pbl9oZWFkZXIgPSBmYWxzZTtcdC8vIFdlIHNob3VsZCBoYXZlIGdvdHRlbiBhIGtleSBoZWFkZXIgYnkgbm93LCBidXQganVzdCBpbiBjYXNlLCB0aGlzIGlzIGRlZmluaXRlbHkgb3V0IG9mIHRoZSBoZWFkZXIuXG5cdHZhciBpID0gMDtcblx0dmFyIHN0YXJ0T2ZMaW5lID0gbXVsdGlsaW5lVmFycy5pQ2hhcjtcblx0Ly8gc2VlIGlmIHRoZXJlIGlzIG5vdGhpbmcgYnV0IGEgY29tbWVudCBvbiB0aGlzIGxpbmUuIElmIHNvLCBqdXN0IGlnbm9yZSBpdC4gQSBmdWxsIGxpbmUgY29tbWVudCBpcyBvcHRpb25hbCB3aGl0ZSBzcGFjZSBmb2xsb3dlZCBieSAlXG5cdHdoaWxlICh0b2tlbml6ZXIuaXNXaGl0ZVNwYWNlKGxpbmVbaV0pICYmIGkgPCBsaW5lLmxlbmd0aClcblx0XHRpKys7XG5cdGlmIChpID09PSBsaW5lLmxlbmd0aCB8fCBsaW5lW2ldID09PSAnJScpXG5cdFx0cmV0dXJuO1xuXG5cdC8vIFN0YXJ0IHdpdGggdGhlIHN0YW5kYXJkIHN0YWZmLCBjbGVmIGFuZCBrZXkgc3ltYm9scyBvbiBlYWNoIGxpbmVcblx0dmFyIGRlbGF5U3RhcnROZXdMaW5lID0gbXVsdGlsaW5lVmFycy5zdGFydF9uZXdfbGluZTtcblx0aWYgKG11bHRpbGluZVZhcnMuY29udGludWVhbGwgPT09IHVuZGVmaW5lZClcblx0XHRtdWx0aWxpbmVWYXJzLnN0YXJ0X25ld19saW5lID0gdHJ1ZTtcblx0ZWxzZVxuXHRcdG11bHRpbGluZVZhcnMuc3RhcnRfbmV3X2xpbmUgPSBmYWxzZTtcblx0dmFyIHRyaXBsZXROb3Rlc0xlZnQgPSAwO1xuXG5cdC8vIFNlZSBpZiB0aGUgbGluZSBzdGFydHMgd2l0aCBhIGhlYWRlciBmaWVsZFxuXHR2YXIgcmV0SGVhZGVyID0gaGVhZGVyLmxldHRlcl90b19ib2R5X2hlYWRlcihsaW5lLCBpKTtcblx0aWYgKHJldEhlYWRlclswXSA+IDApIHtcblx0XHRpICs9IHJldEhlYWRlclswXTtcblx0XHQvLyBmaXhlcyBidWcgb24gdGhpczogY1tWOjJdZFxuXHRcdGlmIChyZXRIZWFkZXJbMV0gPT09ICdWJylcblx0XHRcdHRoaXMuc3RhcnROZXdMaW5lKCk7XG5cdFx0XHQvLyBkZWxheVN0YXJ0TmV3TGluZSA9IHRydWU7XG5cdFx0Ly8gVE9ETy1QRVI6IEhhbmRsZSBpbmxpbmUgaGVhZGVyc1xuXHR9XG5cblx0dmFyIG92ZXJsYXlMZXZlbCA9IDA7XG5cdHdoaWxlIChpIDwgbGluZS5sZW5ndGgpXG5cdHtcblx0XHR2YXIgc3RhcnRJID0gaTtcblx0XHRpZiAobGluZVtpXSA9PT0gJyUnKVxuXHRcdFx0YnJlYWs7XG5cblx0XHR2YXIgcmV0SW5saW5lSGVhZGVyID0gaGVhZGVyLmxldHRlcl90b19pbmxpbmVfaGVhZGVyKGxpbmUsIGksIGRlbGF5U3RhcnROZXdMaW5lKTtcblx0XHRpZiAocmV0SW5saW5lSGVhZGVyWzBdID4gMCkge1xuXHRcdFx0aSArPSByZXRJbmxpbmVIZWFkZXJbMF07XG5cdFx0XHQvL2NvbnNvbGUubG9nKFwiaW5saW5lIGhlYWRlclwiLCByZXRJbmxpbmVIZWFkZXIpXG5cdFx0XHRpZiAocmV0SW5saW5lSGVhZGVyWzFdID09PSAnVicpXG5cdFx0XHRcdGRlbGF5U3RhcnROZXdMaW5lID0gdHJ1ZTsgLy8gZml4ZXMgYnVnIG9uIHRoaXM6IGNbVjoyXWRcblx0XHRcdC8vIFRPRE8tUEVSOiBIYW5kbGUgaW5saW5lIGhlYWRlcnNcblx0XHRcdC8vbXVsdGlsaW5lVmFycy5zdGFydF9uZXdfbGluZSA9IGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBXYWl0IHVudGlsIGhlcmUgdG8gYWN0dWFsbHkgc3RhcnQgdGhlIGxpbmUgYmVjYXVzZSB3ZSBrbm93IHdlJ3JlIHBhc3QgdGhlIGlubGluZSBzdGF0ZW1lbnRzLlxuXHRcdFx0aWYgKCF0dW5lQnVpbGRlci5oYXNCZWdpbk11c2ljKCkgfHwgKGRlbGF5U3RhcnROZXdMaW5lICYmICF0aGlzLmxpbmVDb250aW51YXRpb24pKSB7XG5cdFx0XHRcdHRoaXMuc3RhcnROZXdMaW5lKCk7XG5cdFx0XHRcdGRlbGF5U3RhcnROZXdMaW5lID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFdlIG5lZWQgdG8gZGVjaWRlIGlmIHRoZSBmb2xsb3dpbmcgY2hhcmFjdGVycyBhcmUgYSBiYXItbWFya2luZyBvciBhIG5vdGUtZ3JvdXAuXG5cdFx0XHQvLyBVbmZvcnR1bmF0ZWx5LCB0aGF0IGlzIGFtYmlndW91cy4gQm90aCBjYW4gY29udGFpbiBjaG9yZCBzeW1ib2xzIGFuZCBkZWNvcmF0aW9ucy5cblx0XHRcdC8vIElmIHRoZXJlIGlzIGEgZ3JhY2Ugbm90ZSBlaXRoZXIgYmVmb3JlIG9yIGFmdGVyIHRoZSBjaG9yZCBzeW1ib2xzIGFuZCBkZWNvcmF0aW9ucywgdGhlbiBpdCBpcyBkZWZpbml0ZWx5IGEgbm90ZS1ncm91cC5cblx0XHRcdC8vIElmIHRoZXJlIGlzIGEgYmFyIG1hcmtlciwgaXQgaXMgZGVmaW5pdGVseSBhIGJhci1tYXJraW5nLlxuXHRcdFx0Ly8gSWYgdGhlcmUgaXMgZWl0aGVyIGEgY29yZS1ub3RlIG9yIGNob3JkLCBpdCBpcyBkZWZpbml0ZWx5IGEgbm90ZS1ncm91cC5cblx0XHRcdC8vIFNvLCBsb29wIHdoaWxlIHdlIGZpbmQgZ3JhY2Utbm90ZXMsIGNob3Jkcy1zeW1ib2xzLCBvciBkZWNvcmF0aW9ucy4gW0l0IGlzIGFuIGVycm9yIHRvIGhhdmUgbW9yZSB0aGFuIG9uZSBncmFjZS1ub3RlIGdyb3VwIGluIGEgcm93OyB0aGUgb3RoZXJzIGNhbiBiZSBtdWx0aXBsZV1cblx0XHRcdC8vIFRoZW4sIGlmIHRoZXJlIGlzIGEgZ3JhY2Utbm90ZSwgd2Uga25vdyB3aGVyZSB0byBnby5cblx0XHRcdC8vIEVsc2Ugc2VlIGlmIHdlIGhhdmUgYSBjaG9yZCwgY29yZS1ub3RlLCBzbHVyLCB0cmlwbGV0LCBvciBiYXIuXG5cblx0XHRcdHZhciByZXQ7XG5cdFx0XHR3aGlsZSAoMSkge1xuXHRcdFx0XHRyZXQgPSB0b2tlbml6ZXIuZWF0V2hpdGVTcGFjZShsaW5lLCBpKTtcblx0XHRcdFx0aWYgKHJldCA+IDApIHtcblx0XHRcdFx0XHRpICs9IHJldDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoaSA+IDAgJiYgbGluZVtpLTFdID09PSAnXFx4MTInKSB7XG5cdFx0XHRcdFx0Ly8gdGhlcmUgaXMgb25lIGNhc2Ugd2hlcmUgYSBsaW5lIGNvbnRpbnVhdGlvbiBpc24ndCB0aGUgc2FtZSBhcyBiZWluZyBvbiB0aGUgc2FtZSBsaW5lLCBhbmQgdGhhdCBpcyBpZiB0aGUgbmV4dCBjaGFyYWN0ZXIgYWZ0ZXIgaXQgaXMgYSBoZWFkZXIuXG5cdFx0XHRcdFx0cmV0ID0gaGVhZGVyLmxldHRlcl90b19ib2R5X2hlYWRlcihsaW5lLCBpKTtcblx0XHRcdFx0XHRpZiAocmV0WzBdID4gMCkge1xuXHRcdFx0XHRcdFx0aWYgKHJldFsxXSA9PT0gJ1YnKVxuXHRcdFx0XHRcdFx0XHR0aGlzLnN0YXJ0TmV3TGluZSgpOyAvLyBmaXhlcyBidWcgb24gdGhpczogY1xcXFxuVjoyXVxcXFxuZFxuXHRcdFx0XHRcdFx0Ly8gVE9ETzogaW5zZXJ0IGhlYWRlciBoZXJlXG5cdFx0XHRcdFx0XHRpID0gcmV0WzBdO1xuXHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5zdGFydF9uZXdfbGluZSA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBnYXRoZXIgYWxsIHRoZSBncmFjZSBub3RlcywgY2hvcmQgc3ltYm9scyBhbmQgZGVjb3JhdGlvbnNcblx0XHRcdFx0cmV0ID0gbGV0dGVyX3RvX3NwYWNlcihsaW5lLCBpKTtcblx0XHRcdFx0aWYgKHJldFswXSA+IDApIHtcblx0XHRcdFx0XHRpICs9IHJldFswXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldCA9IGxldHRlcl90b19jaG9yZChsaW5lLCBpKTtcblx0XHRcdFx0aWYgKHJldFswXSA+IDApIHtcblx0XHRcdFx0XHQvLyBUaGVyZSBjb3VsZCBiZSBtb3JlIHRoYW4gb25lIGNob3JkIGhlcmUgaWYgdGhleSBoYXZlIGRpZmZlcmVudCBwb3NpdGlvbnMuXG5cdFx0XHRcdFx0Ly8gSWYgdHdvIGNob3JkcyBoYXZlIHRoZSBzYW1lIHBvc2l0aW9uLCB0aGVuIGNvbm5lY3QgdGhlbSB3aXRoIG5ld2xpbmUuXG5cdFx0XHRcdFx0aWYgKCFlbC5jaG9yZClcblx0XHRcdFx0XHRcdGVsLmNob3JkID0gW107XG5cdFx0XHRcdFx0dmFyIGNob3JkTmFtZSA9IHRva2VuaXplci50cmFuc2xhdGVTdHJpbmcocmV0WzFdKTtcblx0XHRcdFx0XHRjaG9yZE5hbWUgPSBjaG9yZE5hbWUucmVwbGFjZSgvOy9nLCBcIlxcblwiKTtcblx0XHRcdFx0XHR2YXIgYWRkZWRDaG9yZCA9IGZhbHNlO1xuXHRcdFx0XHRcdGZvciAodmFyIGNpID0gMDsgY2kgPCBlbC5jaG9yZC5sZW5ndGg7IGNpKyspIHtcblx0XHRcdFx0XHRcdGlmIChlbC5jaG9yZFtjaV0ucG9zaXRpb24gPT09IHJldFsyXSkge1xuXHRcdFx0XHRcdFx0XHRhZGRlZENob3JkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0ZWwuY2hvcmRbY2ldLm5hbWUgKz0gXCJcXG5cIiArIGNob3JkTmFtZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGFkZGVkQ2hvcmQgPT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0XHRpZiAocmV0WzJdID09PSBudWxsICYmIHJldFszXSlcblx0XHRcdFx0XHRcdFx0ZWwuY2hvcmQucHVzaCh7bmFtZTogY2hvcmROYW1lLCByZWxfcG9zaXRpb246IHJldFszXX0pO1xuXHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHRlbC5jaG9yZC5wdXNoKHtuYW1lOiBjaG9yZE5hbWUsIHBvc2l0aW9uOiByZXRbMl19KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpICs9IHJldFswXTtcblx0XHRcdFx0XHR2YXIgaWkgPSB0b2tlbml6ZXIuc2tpcFdoaXRlU3BhY2UobGluZS5zdWJzdHJpbmcoaSkpO1xuXHRcdFx0XHRcdGlmIChpaSA+IDApXG5cdFx0XHRcdFx0XHRlbC5mb3JjZV9lbmRfYmVhbV9sYXN0ID0gdHJ1ZTtcblx0XHRcdFx0XHRpICs9IGlpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmIChub25EZWNvcmF0aW9ucy5pbmRleE9mKGxpbmVbaV0pID09PSAtMSlcblx0XHRcdFx0XHRcdHJldCA9IGxldHRlcl90b19hY2NlbnQobGluZSwgaSk7XG5cdFx0XHRcdFx0ZWxzZSByZXQgPSBbIDAgXTtcblx0XHRcdFx0XHRpZiAocmV0WzBdID4gMCkge1xuXHRcdFx0XHRcdFx0aWYgKHJldFsxXSA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0XHRpZiAoaSArIDEgPCBsaW5lLmxlbmd0aClcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnN0YXJ0TmV3TGluZSgpO1x0Ly8gVGhlcmUgd2FzIGEgISBpbiB0aGUgbWlkZGxlIG9mIHRoZSBsaW5lLiBTdGFydCBhIG5ldyBsaW5lIGlmIHRoZXJlIGlzIGFueXRoaW5nIGFmdGVyIGl0LlxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChyZXRbMV0ubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0XHRpZiAocmV0WzFdLmluZGV4T2YoXCJzdHlsZT1cIikgPT09IDApIHtcblx0XHRcdFx0XHRcdFx0XHRlbC5zdHlsZSA9IHJldFsxXS5zdWJzdHIoNik7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGVsLmRlY29yYXRpb24gPT09IHVuZGVmaW5lZClcblx0XHRcdFx0XHRcdFx0XHRcdGVsLmRlY29yYXRpb24gPSBbXTtcblx0XHRcdFx0XHRcdFx0XHRpZiAocmV0WzFdID09PSAnYmVhbWJyMScpXG5cdFx0XHRcdFx0XHRcdFx0XHRlbC5iZWFtYnIgPSAxO1xuXHRcdFx0XHRcdFx0XHRcdGVsc2UgaWYgKHJldFsxXSA9PT0gXCJiZWFtYnIyXCIpXG5cdFx0XHRcdFx0XHRcdFx0XHRlbC5iZWFtYnIgPSAyO1xuXHRcdFx0XHRcdFx0XHRcdGVsc2UgZWwuZGVjb3JhdGlvbi5wdXNoKHJldFsxXSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGkgKz0gcmV0WzBdO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXQgPSBsZXR0ZXJfdG9fZ3JhY2UobGluZSwgaSk7XG5cdFx0XHRcdFx0XHQvLyBUT0RPLVBFUjogQmUgc3VyZSB0aGVyZSBhcmVuJ3QgYWxyZWFkeSBncmFjZSBub3RlcyBkZWZpbmVkLiBUaGF0IGlzIGFuIGVycm9yLlxuXHRcdFx0XHRcdFx0aWYgKHJldFswXSA+IDApIHtcblx0XHRcdFx0XHRcdFx0ZWwuZ3JhY2Vub3RlcyA9IHJldFsxXTtcblx0XHRcdFx0XHRcdFx0aSArPSByZXRbMF07XG5cdFx0XHRcdFx0XHR9IGVsc2Vcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldCA9IGxldHRlcl90b19iYXIobGluZSwgaSk7XG5cdFx0XHRpZiAocmV0WzBdID4gMCkge1xuXHRcdFx0XHQvLyBUaGlzIGlzIGRlZmluaXRlbHkgYSBiYXJcblx0XHRcdFx0b3ZlcmxheUxldmVsID0gMDtcblx0XHRcdFx0aWYgKGVsLmdyYWNlbm90ZXMgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdC8vIEF0dGFjaCB0aGUgZ3JhY2Ugbm90ZSB0byBhbiBpbnZpc2libGUgbm90ZVxuXHRcdFx0XHRcdGVsLnJlc3QgPSB7IHR5cGU6ICdzcGFjZXInIH07XG5cdFx0XHRcdFx0ZWwuZHVyYXRpb24gPSAwLjEyNTsgLy8gVE9ETy1QRVI6IEkgZG9uJ3QgdGhpbmsgdGhlIGR1cmF0aW9uIG9mIHRoaXMgbWF0dGVycyBtdWNoLCBidXQgZmlndXJlIG91dCBpZiBpdCBkb2VzLlxuXHRcdFx0XHRcdG11bHRpbGluZVZhcnMuYWRkRm9ybWF0dGluZ09wdGlvbnMoZWwsIHR1bmUuZm9ybWF0dGluZywgJ25vdGUnKTtcblx0XHRcdFx0XHR0dW5lQnVpbGRlci5hcHBlbmRFbGVtZW50KCdub3RlJywgc3RhcnRPZkxpbmUraSwgc3RhcnRPZkxpbmUraStyZXRbMF0sIGVsKTtcblx0XHRcdFx0XHRtdWx0aWxpbmVWYXJzLm1lYXN1cmVOb3RFbXB0eSA9IHRydWU7XG5cdFx0XHRcdFx0ZWwgPSB7fTtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgYmFyID0ge3R5cGU6IHJldFsxXX07XG5cdFx0XHRcdGlmIChiYXIudHlwZS5sZW5ndGggPT09IDApXG5cdFx0XHRcdFx0d2FybihcIlVua25vd24gYmFyIHR5cGVcIiwgbGluZSwgaSk7XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGlmIChtdWx0aWxpbmVWYXJzLmluRW5kaW5nICYmIGJhci50eXBlICE9PSAnYmFyX3RoaW4nKSB7XG5cdFx0XHRcdFx0XHRiYXIuZW5kRW5kaW5nID0gdHJ1ZTtcblx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMuaW5FbmRpbmcgPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHJldFsyXSkge1xuXHRcdFx0XHRcdFx0YmFyLnN0YXJ0RW5kaW5nID0gcmV0WzJdO1xuXHRcdFx0XHRcdFx0aWYgKG11bHRpbGluZVZhcnMuaW5FbmRpbmcpXG5cdFx0XHRcdFx0XHRcdGJhci5lbmRFbmRpbmcgPSB0cnVlO1xuXHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5pbkVuZGluZyA9IHRydWU7XG5cdFx0XHRcdFx0XHRpZiAocmV0WzFdID09PSBcImJhcl9yaWdodF9yZXBlYXRcIikge1xuXHRcdFx0XHRcdFx0XHQvLyByZXN0b3JlIHRoZSB0aWUgYW5kIHNsdXIgc3RhdGUgZnJvbSB0aGUgc3RhcnQgcmVwZWF0XG5cdFx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMucmVzdG9yZVN0YXJ0RW5kaW5nSG9sZE92ZXJzKCk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBzYXZlIGluVGllLCBpblRpZUNob3JkXG5cdFx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMuZHVwbGljYXRlU3RhcnRFbmRpbmdIb2xkT3ZlcnMoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGVsLmRlY29yYXRpb24gIT09IHVuZGVmaW5lZClcblx0XHRcdFx0XHRcdGJhci5kZWNvcmF0aW9uID0gZWwuZGVjb3JhdGlvbjtcblx0XHRcdFx0XHRpZiAoZWwuY2hvcmQgIT09IHVuZGVmaW5lZClcblx0XHRcdFx0XHRcdGJhci5jaG9yZCA9IGVsLmNob3JkO1xuXHRcdFx0XHRcdGlmIChiYXIuc3RhcnRFbmRpbmcgJiYgbXVsdGlsaW5lVmFycy5iYXJGaXJzdEVuZGluZ051bSA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5iYXJGaXJzdEVuZGluZ051bSA9IG11bHRpbGluZVZhcnMuY3VyckJhck51bWJlcjtcblx0XHRcdFx0XHRlbHNlIGlmIChiYXIuc3RhcnRFbmRpbmcgJiYgYmFyLmVuZEVuZGluZyAmJiBtdWx0aWxpbmVWYXJzLmJhckZpcnN0RW5kaW5nTnVtKVxuXHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5jdXJyQmFyTnVtYmVyID0gbXVsdGlsaW5lVmFycy5iYXJGaXJzdEVuZGluZ051bTtcblx0XHRcdFx0XHRlbHNlIGlmIChiYXIuZW5kRW5kaW5nKVxuXHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5iYXJGaXJzdEVuZGluZ051bSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRpZiAoYmFyLnR5cGUgIT09ICdiYXJfaW52aXNpYmxlJyAmJiBtdWx0aWxpbmVWYXJzLm1lYXN1cmVOb3RFbXB0eSkge1xuXHRcdFx0XHRcdFx0aWYgKGlzRmlyc3RWb2ljZSgpKSB7XG5cdFx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMuY3VyckJhck51bWJlcisrO1xuXHRcdFx0XHRcdFx0XHRpZiAobXVsdGlsaW5lVmFycy5iYXJOdW1iZXJzICYmIG11bHRpbGluZVZhcnMuY3VyckJhck51bWJlciAlIG11bHRpbGluZVZhcnMuYmFyTnVtYmVycyA9PT0gMClcblx0XHRcdFx0XHRcdFx0XHRiYXIuYmFyTnVtYmVyID0gbXVsdGlsaW5lVmFycy5jdXJyQmFyTnVtYmVyO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRtdWx0aWxpbmVWYXJzLmFkZEZvcm1hdHRpbmdPcHRpb25zKGVsLCB0dW5lLmZvcm1hdHRpbmcsICdiYXInKTtcblx0XHRcdFx0XHR0dW5lQnVpbGRlci5hcHBlbmRFbGVtZW50KCdiYXInLCBzdGFydE9mTGluZStzdGFydEksIHN0YXJ0T2ZMaW5lK2krcmV0WzBdLCBiYXIpO1xuXHRcdFx0XHRcdG11bHRpbGluZVZhcnMubWVhc3VyZU5vdEVtcHR5ID0gZmFsc2U7XG5cdFx0XHRcdFx0ZWwgPSB7fTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpICs9IHJldFswXTtcblx0XHRcdH0gZWxzZSBpZiAobGluZVtpXSA9PT0gJyYnKSB7XHQvLyBiYWNrdHJhY2sgdG8gYmVnaW5uaW5nIG9mIG1lYXN1cmVcblx0XHRcdFx0cmV0ID0gbGV0dGVyX3RvX292ZXJsYXkobGluZSwgaSk7XG5cdFx0XHRcdGlmIChyZXRbMF0gPiAwKSB7XG5cdFx0XHRcdFx0dHVuZUJ1aWxkZXIuYXBwZW5kRWxlbWVudCgnb3ZlcmxheScsIHN0YXJ0T2ZMaW5lLCBzdGFydE9mTGluZSsxLCB7fSk7XG5cdFx0XHRcdFx0aSArPSAxO1xuXHRcdFx0XHRcdG92ZXJsYXlMZXZlbCsrO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIFRoaXMgaXMgZGVmaW5pdGVseSBhIG5vdGUgZ3JvdXBcblx0XHRcdFx0Ly9cblx0XHRcdFx0Ly8gTG9vayBmb3IgYXMgbWFueSBvcGVuIHNsdXJzIGFuZCB0cmlwbGV0cyBhcyB0aGVyZSBhcmUuIChOb3RlOiBvbmx5IHRoZSBmaXJzdCB0cmlwbGV0IGlzIHZhbGlkLilcblx0XHRcdFx0cmV0ID0gbGV0dGVyX3RvX29wZW5fc2x1cnNfYW5kX3RyaXBsZXRzKGxpbmUsIGkpO1xuXHRcdFx0XHRpZiAocmV0LmNvbnN1bWVkID4gMCkge1xuXHRcdFx0XHRcdGlmIChyZXQuc3RhcnRTbHVyICE9PSB1bmRlZmluZWQpXG5cdFx0XHRcdFx0XHRlbC5zdGFydFNsdXIgPSByZXQuc3RhcnRTbHVyO1xuXHRcdFx0XHRcdGlmIChyZXQuZG90dGVkU2x1cilcblx0XHRcdFx0XHRcdGVsLmRvdHRlZFNsdXIgPSB0cnVlO1xuXHRcdFx0XHRcdGlmIChyZXQudHJpcGxldCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRpZiAodHJpcGxldE5vdGVzTGVmdCA+IDApXG5cdFx0XHRcdFx0XHRcdHdhcm4oXCJDYW4ndCBuZXN0IHRyaXBsZXRzXCIsIGxpbmUsIGkpO1xuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGVsLnN0YXJ0VHJpcGxldCA9IHJldC50cmlwbGV0O1xuXHRcdFx0XHRcdFx0XHRlbC50cmlwbGV0TXVsdGlwbGllciA9IHJldC50cmlwbGV0USAvIHJldC50cmlwbGV0O1xuXHRcdFx0XHRcdFx0XHRlbC50cmlwbGV0UiA9IHJldC5udW1fbm90ZXM7XG5cdFx0XHRcdFx0XHRcdHRyaXBsZXROb3Rlc0xlZnQgPSByZXQubnVtX25vdGVzID09PSB1bmRlZmluZWQgPyByZXQudHJpcGxldCA6IHJldC5udW1fbm90ZXM7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGkgKz0gcmV0LmNvbnN1bWVkO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gaGFuZGxlIGNob3Jkcy5cblx0XHRcdFx0aWYgKGxpbmVbaV0gPT09ICdbJykge1xuXHRcdFx0XHRcdHZhciBjaG9yZFN0YXJ0Q2hhciA9IGk7XG5cdFx0XHRcdFx0aSsrO1xuXHRcdFx0XHRcdHZhciBjaG9yZER1cmF0aW9uID0gbnVsbDtcblx0XHRcdFx0XHR2YXIgcmVtZW1iZXJFbmRCZWFtID0gZmFsc2U7XG5cblx0XHRcdFx0XHR2YXIgZG9uZSA9IGZhbHNlO1xuXHRcdFx0XHRcdHdoaWxlICghZG9uZSkge1xuXHRcdFx0XHRcdFx0dmFyIGFjY2VudCA9IGxldHRlcl90b19hY2NlbnQobGluZSwgaSk7XG5cdFx0XHRcdFx0XHRpZiAoYWNjZW50WzBdID4gMCkge1xuXHRcdFx0XHRcdFx0XHRpICs9IGFjY2VudFswXTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIGNob3JkTm90ZSA9IGdldENvcmVOb3RlKGxpbmUsIGksIHt9LCBmYWxzZSk7XG5cdFx0XHRcdFx0XHRpZiAoY2hvcmROb3RlICE9PSBudWxsICYmIGNob3JkTm90ZS5waXRjaCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChhY2NlbnRbMF0gPiAwKSB7IC8vIElmIHdlIGZvdW5kIGEgZGVjb3JhdGlvbiBhYm92ZSwgaXQgbW9kaWZpZXMgdGhlIGVudGlyZSBjaG9yZC4gXCJzdHlsZVwiIGlzIGhhbmRsZWQgYmVsb3cuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGFjY2VudFsxXS5pbmRleE9mKFwic3R5bGU9XCIpICE9PSAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoZWwuZGVjb3JhdGlvbiA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbC5kZWNvcmF0aW9uID0gW107XG5cdFx0XHRcdFx0XHRcdFx0XHRlbC5kZWNvcmF0aW9uLnB1c2goYWNjZW50WzFdKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYgKGNob3JkTm90ZS5lbmRfYmVhbSkge1xuXHRcdFx0XHRcdFx0XHRcdGVsLmVuZF9iZWFtID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRkZWxldGUgY2hvcmROb3RlLmVuZF9iZWFtO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmIChlbC5waXRjaGVzID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRlbC5kdXJhdGlvbiA9IGNob3JkTm90ZS5kdXJhdGlvbjtcblx0XHRcdFx0XHRcdFx0XHRlbC5waXRjaGVzID0gWyBjaG9yZE5vdGUgXTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlXHQvLyBKdXN0IGlnbm9yZSB0aGUgbm90ZSBsZW5ndGhzIG9mIGFsbCBidXQgdGhlIGZpcnN0IG5vdGUuIFRoZSBzdGFuZGFyZCBpc24ndCBjbGVhciBoZXJlLCBidXQgdGhpcyBzZWVtcyBsZXNzIGNvbmZ1c2luZy5cblx0XHRcdFx0XHRcdFx0XHRlbC5waXRjaGVzLnB1c2goY2hvcmROb3RlKTtcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIGNob3JkTm90ZS5kdXJhdGlvbjtcblx0XHRcdFx0XHRcdFx0aWYgKGFjY2VudFswXSA+IDApIHsgLy8gSWYgd2UgZm91bmQgYSBzdHlsZSBhYm92ZSwgaXQgbW9kaWZpZXMgdGhlIGluZGl2aWR1YWwgcGl0Y2gsIG5vdCB0aGUgZW50aXJlIGNob3JkLlxuXHRcdFx0XHRcdFx0XHRcdGlmIChhY2NlbnRbMV0uaW5kZXhPZihcInN0eWxlPVwiKSA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZWwucGl0Y2hlc1tlbC5waXRjaGVzLmxlbmd0aC0xXS5zdHlsZSA9IGFjY2VudFsxXS5zdWJzdHIoNik7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0aWYgKG11bHRpbGluZVZhcnMuaW5UaWVDaG9yZFtlbC5waXRjaGVzLmxlbmd0aF0pIHtcblx0XHRcdFx0XHRcdFx0XHRjaG9yZE5vdGUuZW5kVGllID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRtdWx0aWxpbmVWYXJzLmluVGllQ2hvcmRbZWwucGl0Y2hlcy5sZW5ndGhdID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmIChjaG9yZE5vdGUuc3RhcnRUaWUpXG5cdFx0XHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5pblRpZUNob3JkW2VsLnBpdGNoZXMubGVuZ3RoXSA9IHRydWU7XG5cblx0XHRcdFx0XHRcdFx0aSAgPSBjaG9yZE5vdGUuZW5kQ2hhcjtcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIGNob3JkTm90ZS5lbmRDaGFyO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChsaW5lW2ldID09PSAnICcpIHtcblx0XHRcdFx0XHRcdFx0Ly8gU3BhY2VzIGFyZSBub3QgYWxsb3dlZCBpbiBjaG9yZHMsIGJ1dCB3ZSBjYW4gcmVjb3ZlciBmcm9tIGl0IGJ5IGlnbm9yaW5nIGl0LlxuXHRcdFx0XHRcdFx0XHR3YXJuKFwiU3BhY2VzIGFyZSBub3QgYWxsb3dlZCBpbiBjaG9yZHNcIiwgbGluZSwgaSk7XG5cdFx0XHRcdFx0XHRcdGkrKztcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGlmIChpIDwgbGluZS5sZW5ndGggJiYgbGluZVtpXSA9PT0gJ10nKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gY29uc3VtZSB0aGUgY2xvc2UgYnJhY2tldFxuXHRcdFx0XHRcdFx0XHRcdGkrKztcblxuXHRcdFx0XHRcdFx0XHRcdGlmIChtdWx0aWxpbmVWYXJzLm5leHRfbm90ZV9kdXJhdGlvbiAhPT0gMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZWwuZHVyYXRpb24gPSBlbC5kdXJhdGlvbiAqIG11bHRpbGluZVZhcnMubmV4dF9ub3RlX2R1cmF0aW9uO1xuXHRcdFx0XHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5uZXh0X25vdGVfZHVyYXRpb24gPSAwO1xuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdGlmIChpc0luVGllKG11bHRpbGluZVZhcnMsICBvdmVybGF5TGV2ZWwsIGVsKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZWwucGl0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uKHBpdGNoKSB7IHBpdGNoLmVuZFRpZSA9IHRydWU7IH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0c2V0SXNJblRpZShtdWx0aWxpbmVWYXJzLCAgb3ZlcmxheUxldmVsLCBmYWxzZSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRyaXBsZXROb3Rlc0xlZnQgPiAwICYmICEoZWwucmVzdCAmJiBlbC5yZXN0LnR5cGUgPT09IFwic3BhY2VyXCIpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0cmlwbGV0Tm90ZXNMZWZ0LS07XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAodHJpcGxldE5vdGVzTGVmdCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbC5lbmRUcmlwbGV0ID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHR2YXIgcG9zdENob3JkRG9uZSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdHdoaWxlIChpIDwgbGluZS5sZW5ndGggJiYgIXBvc3RDaG9yZERvbmUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHN3aXRjaCAobGluZVtpXSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlICcgJzpcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSAnXFx0Jzpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhZGRFbmRCZWFtKGVsKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSAnKSc6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVsLmVuZFNsdXIgPT09IHVuZGVmaW5lZCkgZWwuZW5kU2x1ciA9IDE7IGVsc2UgZWwuZW5kU2x1cisrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlICctJzpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbC5waXRjaGVzLmZvckVhY2goZnVuY3Rpb24ocGl0Y2gpIHsgcGl0Y2guc3RhcnRUaWUgPSB7fTsgfSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0SXNJblRpZShtdWx0aWxpbmVWYXJzLCAgb3ZlcmxheUxldmVsLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSAnPic6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgJzwnOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBicjIgPSBnZXRCcm9rZW5SaHl0aG0obGluZSwgaSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aSArPSBicjJbMF0gLSAxO1x0Ly8gaW5kZXggZ2V0cyBpbmNyZW1lbnRlZCBiZWxvdywgc28gd2UnbGwgbGV0IHRoYXQgaGFwcGVuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5uZXh0X25vdGVfZHVyYXRpb24gPSBicjJbMl07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNob3JkRHVyYXRpb24pXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjaG9yZER1cmF0aW9uID0gY2hvcmREdXJhdGlvbiAqIGJyMlsxXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjaG9yZER1cmF0aW9uID0gYnIyWzFdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlICcxJzpcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSAnMic6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgJzMnOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlICc0Jzpcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSAnNSc6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgJzYnOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlICc3Jzpcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSAnOCc6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgJzknOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlICcvJzpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgZnJhY3Rpb24gPSB0b2tlbml6ZXIuZ2V0RnJhY3Rpb24obGluZSwgaSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2hvcmREdXJhdGlvbiA9IGZyYWN0aW9uLnZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGkgPSBmcmFjdGlvbi5pbmRleDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgY2ggPSBsaW5lW2ldXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNoID09PSAnICcpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZW1lbWJlckVuZEJlYW0gPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChjaCA9PT0gJy0nIHx8IGNoID09PSAnKScgfHwgY2ggPT09ICcgJyB8fCBjaCA9PT0gJzwnIHx8IGNoID09PSAnPicpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpLS07IC8vIFN1YnRyYWN0aW5nIG9uZSBiZWNhdXNlIG9uZSBpcyBhdXRvbWF0aWNhbGx5IGFkZGVkIGJlbG93XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cG9zdENob3JkRG9uZSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgJzAnOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNob3JkRHVyYXRpb24gPSAwO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHBvc3RDaG9yZERvbmUgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFwb3N0Q2hvcmREb25lKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGkrKztcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdFx0XHRcdHdhcm4oXCJFeHBlY3RlZCAnXScgdG8gZW5kIHRoZSBjaG9yZHNcIiwgbGluZSwgaSk7XG5cblx0XHRcdFx0XHRcdFx0aWYgKGVsLnBpdGNoZXMgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChjaG9yZER1cmF0aW9uICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRlbC5kdXJhdGlvbiA9IGVsLmR1cmF0aW9uICogY2hvcmREdXJhdGlvbjtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChyZW1lbWJlckVuZEJlYW0pXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFkZEVuZEJlYW0oZWwpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMuYWRkRm9ybWF0dGluZ09wdGlvbnMoZWwsIHR1bmUuZm9ybWF0dGluZywgJ25vdGUnKTtcblx0XHRcdFx0XHRcdFx0XHR0dW5lQnVpbGRlci5hcHBlbmRFbGVtZW50KCdub3RlJywgc3RhcnRPZkxpbmUrc3RhcnRJLCBzdGFydE9mTGluZStpLCBlbCk7XG5cdFx0XHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5tZWFzdXJlTm90RW1wdHkgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdGVsID0ge307XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZG9uZSA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gU2luZ2xlIHBpdGNoXG5cdFx0XHRcdFx0dmFyIGVsMiA9IHt9O1xuXHRcdFx0XHRcdHZhciBjb3JlID0gZ2V0Q29yZU5vdGUobGluZSwgaSwgZWwyLCB0cnVlKTtcblx0XHRcdFx0XHRpZiAoZWwyLmVuZFRpZSAhPT0gdW5kZWZpbmVkKSBzZXRJc0luVGllKG11bHRpbGluZVZhcnMsICBvdmVybGF5TGV2ZWwsIHRydWUpO1xuXHRcdFx0XHRcdGlmIChjb3JlICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0XHRpZiAoY29yZS5waXRjaCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRcdGVsLnBpdGNoZXMgPSBbIHsgfSBdO1xuXHRcdFx0XHRcdFx0XHQvLyBUT0RPLVBFUjogc3RyYWlnaHRlbiB0aGlzIG91dCBzbyB0aGVyZSBpcyBub3Qgc28gbXVjaCBjb3B5aW5nOiBnZXRDb3JlTm90ZSBzaG91bGRuJ3QgY2hhbmdlIGUnXG5cdFx0XHRcdFx0XHRcdGlmIChjb3JlLmFjY2lkZW50YWwgIT09IHVuZGVmaW5lZCkgZWwucGl0Y2hlc1swXS5hY2NpZGVudGFsID0gY29yZS5hY2NpZGVudGFsO1xuXHRcdFx0XHRcdFx0XHRlbC5waXRjaGVzWzBdLnBpdGNoID0gY29yZS5waXRjaDtcblx0XHRcdFx0XHRcdFx0ZWwucGl0Y2hlc1swXS5uYW1lID0gY29yZS5uYW1lO1xuXHRcdFx0XHRcdFx0XHRpZiAoY29yZS5taWRpcGl0Y2ggfHwgY29yZS5taWRpcGl0Y2ggPT09IDApXG5cdFx0XHRcdFx0XHRcdFx0ZWwucGl0Y2hlc1swXS5taWRpcGl0Y2ggPSBjb3JlLm1pZGlwaXRjaDtcblx0XHRcdFx0XHRcdFx0aWYgKGNvcmUuZW5kU2x1ciAhPT0gdW5kZWZpbmVkKSBlbC5waXRjaGVzWzBdLmVuZFNsdXIgPSBjb3JlLmVuZFNsdXI7XG5cdFx0XHRcdFx0XHRcdGlmIChjb3JlLmVuZFRpZSAhPT0gdW5kZWZpbmVkKSBlbC5waXRjaGVzWzBdLmVuZFRpZSA9IGNvcmUuZW5kVGllO1xuXHRcdFx0XHRcdFx0XHRpZiAoY29yZS5zdGFydFNsdXIgIT09IHVuZGVmaW5lZCkgZWwucGl0Y2hlc1swXS5zdGFydFNsdXIgPSBjb3JlLnN0YXJ0U2x1cjtcblx0XHRcdFx0XHRcdFx0aWYgKGVsLnN0YXJ0U2x1ciAhPT0gdW5kZWZpbmVkKSBlbC5waXRjaGVzWzBdLnN0YXJ0U2x1ciA9IGVsLnN0YXJ0U2x1cjtcblx0XHRcdFx0XHRcdFx0aWYgKGVsLmRvdHRlZFNsdXIgIT09IHVuZGVmaW5lZCkgZWwucGl0Y2hlc1swXS5kb3R0ZWRTbHVyID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0aWYgKGNvcmUuc3RhcnRUaWUgIT09IHVuZGVmaW5lZCkgZWwucGl0Y2hlc1swXS5zdGFydFRpZSA9IGNvcmUuc3RhcnRUaWU7XG5cdFx0XHRcdFx0XHRcdGlmIChlbC5zdGFydFRpZSAhPT0gdW5kZWZpbmVkKSBlbC5waXRjaGVzWzBdLnN0YXJ0VGllID0gZWwuc3RhcnRUaWU7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRlbC5yZXN0ID0gY29yZS5yZXN0O1xuXHRcdFx0XHRcdFx0XHRpZiAoY29yZS5yZXN0LnR5cGUgPT09ICdtdWx0aW1lYXN1cmUnICYmIGlzRmlyc3RWb2ljZSgpKVxuXHRcdFx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMuY3VyckJhck51bWJlciArPSBjb3JlLnJlc3QudGV4dCAtIDEgLy8gVGhlIG1pbnVzIG9uZSBpcyBiZWNhdXNlIHRoZSBtZWFzdXJlIHdpdGggdGhlIHJlc3QgaXMgYWxyZWFkeSBjb3VudGVkIG9uY2Ugbm9ybWFsbHkuXG5cdFx0XHRcdFx0XHRcdGlmIChjb3JlLmVuZFNsdXIgIT09IHVuZGVmaW5lZCkgZWwuZW5kU2x1ciA9IGNvcmUuZW5kU2x1cjtcblx0XHRcdFx0XHRcdFx0aWYgKGNvcmUuZW5kVGllICE9PSB1bmRlZmluZWQpIGVsLnJlc3QuZW5kVGllID0gY29yZS5lbmRUaWU7XG5cdFx0XHRcdFx0XHRcdGlmIChjb3JlLnN0YXJ0U2x1ciAhPT0gdW5kZWZpbmVkKSBlbC5zdGFydFNsdXIgPSBjb3JlLnN0YXJ0U2x1cjtcblx0XHRcdFx0XHRcdFx0aWYgKGNvcmUuc3RhcnRUaWUgIT09IHVuZGVmaW5lZCkgZWwucmVzdC5zdGFydFRpZSA9IGNvcmUuc3RhcnRUaWU7XG5cdFx0XHRcdFx0XHRcdGlmIChlbC5zdGFydFRpZSAhPT0gdW5kZWZpbmVkKSBlbC5yZXN0LnN0YXJ0VGllID0gZWwuc3RhcnRUaWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChjb3JlLmNob3JkICE9PSB1bmRlZmluZWQpIGVsLmNob3JkID0gY29yZS5jaG9yZDtcblx0XHRcdFx0XHRcdGlmIChjb3JlLmR1cmF0aW9uICE9PSB1bmRlZmluZWQpIGVsLmR1cmF0aW9uID0gY29yZS5kdXJhdGlvbjtcblx0XHRcdFx0XHRcdGlmIChjb3JlLmRlY29yYXRpb24gIT09IHVuZGVmaW5lZCkgZWwuZGVjb3JhdGlvbiA9IGNvcmUuZGVjb3JhdGlvbjtcblx0XHRcdFx0XHRcdGlmIChjb3JlLmdyYWNlTm90ZXMgIT09IHVuZGVmaW5lZCkgZWwuZ3JhY2VOb3RlcyA9IGNvcmUuZ3JhY2VOb3Rlcztcblx0XHRcdFx0XHRcdGRlbGV0ZSBlbC5zdGFydFNsdXI7XG5cdFx0XHRcdFx0XHRkZWxldGUgZWwuZG90dGVkU2x1cjtcblx0XHRcdFx0XHRcdGlmIChpc0luVGllKG11bHRpbGluZVZhcnMsICBvdmVybGF5TGV2ZWwsIGVsKSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoZWwucGl0Y2hlcyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0ZWwucGl0Y2hlc1swXS5lbmRUaWUgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGVsLnJlc3QudHlwZSAhPT0gJ3NwYWNlcicpIHtcblx0XHRcdFx0XHRcdFx0XHRlbC5yZXN0LmVuZFRpZSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0c2V0SXNJblRpZShtdWx0aWxpbmVWYXJzLCAgb3ZlcmxheUxldmVsLCBmYWxzZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoY29yZS5zdGFydFRpZSB8fCBlbC5zdGFydFRpZSlcblx0XHRcdFx0XHRcdFx0c2V0SXNJblRpZShtdWx0aWxpbmVWYXJzLCAgb3ZlcmxheUxldmVsLCB0cnVlKTtcblx0XHRcdFx0XHRcdGkgID0gY29yZS5lbmRDaGFyO1xuXG5cdFx0XHRcdFx0XHRpZiAodHJpcGxldE5vdGVzTGVmdCA+IDAgJiYgIShjb3JlLnJlc3QgJiYgY29yZS5yZXN0LnR5cGUgPT09IFwic3BhY2VyXCIpKSB7XG5cdFx0XHRcdFx0XHRcdHRyaXBsZXROb3Rlc0xlZnQtLTtcblx0XHRcdFx0XHRcdFx0aWYgKHRyaXBsZXROb3Rlc0xlZnQgPT09IDApIHtcblx0XHRcdFx0XHRcdFx0XHRlbC5lbmRUcmlwbGV0ID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoY29yZS5lbmRfYmVhbSlcblx0XHRcdFx0XHRcdFx0YWRkRW5kQmVhbShlbCk7XG5cblx0XHRcdFx0XHRcdC8vIElmIHRoZXJlIGlzIGEgd2hvbGUgcmVzdCwgdGhlbiBpdCBzaG91bGQgYmUgdGhlIGR1cmF0aW9uIG9mIHRoZSBtZWFzdXJlLCBub3QgaXQncyBvd24gZHVyYXRpb24uIFdlIG5lZWQgdG8gc3BlY2lhbCBjYXNlIGl0LlxuXHRcdFx0XHRcdFx0Ly8gSWYgdGhlIHRpbWUgc2lnbmF0dXJlIGxlbmd0aCBpcyBncmVhdGVyIHRoYW4gNC80LCB0aG91Z2gsIHRoZW4gYSB3aG9sZSByZXN0IGhhcyBubyBzcGVjaWFsIHRyZWF0bWVudC5cblx0XHRcdFx0XHRcdGlmIChlbC5yZXN0ICYmIGVsLnJlc3QudHlwZSA9PT0gJ3Jlc3QnICYmIGVsLmR1cmF0aW9uID09PSAxICYmIGR1cmF0aW9uT2ZNZWFzdXJlKG11bHRpbGluZVZhcnMpIDw9IDEpIHtcblx0XHRcdFx0XHRcdFx0ZWwucmVzdC50eXBlID0gJ3dob2xlJztcblxuXHRcdFx0XHRcdFx0XHRlbC5kdXJhdGlvbiA9IGR1cmF0aW9uT2ZNZWFzdXJlKG11bHRpbGluZVZhcnMpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBDcmVhdGUgYSB3YXJuaW5nIGlmIHRoaXMgaXMgbm90IGEgZGlzcGxheWFibGUgZHVyYXRpb24uXG5cdFx0XHRcdFx0XHQvLyBUaGUgZmlyc3QgaXRlbSBvbiBhIGxpbmUgaXMgYSByZWd1bGFyIG5vdGUgdmFsdWUsIGVhY2ggaXRlbSBhZnRlciB0aGF0IHJlcHJlc2VudHMgYSBkb3QgcGxhY2VkIGFmdGVyIHRoZSBwcmV2aW91cyBub3RlLlxuXHRcdFx0XHRcdFx0Ly8gT25seSBkdXJhdGlvbnMgbGVzcyB0aGFuIGEgd2hvbGUgbm90ZSBhcmUgdGVzdGVkIGJlY2F1c2Ugd2hvbGUgbm90ZSBkdXJhdGlvbnMgaGF2ZSBzb21lIHRyaWNreSBydWxlcy5cblxuXHRcdFx0XHRcdFx0aWYgKGVsLmR1cmF0aW9uIDwgMSAmJiBkdXJhdGlvbnMuaW5kZXhPZihlbC5kdXJhdGlvbikgPT09IC0xICYmIGVsLmR1cmF0aW9uICE9PSAwKSB7XG5cdFx0XHRcdFx0XHRcdGlmICghZWwucmVzdCB8fCBlbC5yZXN0LnR5cGUgIT09ICdzcGFjZXInKVxuXHRcdFx0XHRcdFx0XHRcdHdhcm4oXCJEdXJhdGlvbiBub3QgcmVwcmVzZW50YWJsZTogXCIgKyBsaW5lLnN1YnN0cmluZyhzdGFydEksIGkpLCBsaW5lLCBpKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5hZGRGb3JtYXR0aW5nT3B0aW9ucyhlbCwgdHVuZS5mb3JtYXR0aW5nLCAnbm90ZScpO1xuXHRcdFx0XHRcdFx0dmFyIHN1Y2NlZWRlZCA9IHR1bmVCdWlsZGVyLmFwcGVuZEVsZW1lbnQoJ25vdGUnLCBzdGFydE9mTGluZStzdGFydEksIHN0YXJ0T2ZMaW5lK2ksIGVsKTtcblx0XHRcdFx0XHRcdGlmICghc3VjY2VlZGVkKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc3RhcnROZXdMaW5lKClcblx0XHRcdFx0XHRcdFx0dHVuZUJ1aWxkZXIuYXBwZW5kRWxlbWVudCgnbm90ZScsIHN0YXJ0T2ZMaW5lK3N0YXJ0SSwgc3RhcnRPZkxpbmUraSwgZWwpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5tZWFzdXJlTm90RW1wdHkgPSB0cnVlO1xuXHRcdFx0XHRcdFx0ZWwgPSB7fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoaSA9PT0gc3RhcnRJKSB7XHQvLyBkb24ndCBrbm93IHdoYXQgdGhpcyBpcywgc28gaWdub3JlIGl0LlxuXHRcdFx0XHRcdGlmIChsaW5lW2ldICE9PSAnICcgJiYgbGluZVtpXSAhPT0gJ2AnKVxuXHRcdFx0XHRcdFx0d2FybihcIlVua25vd24gY2hhcmFjdGVyIGlnbm9yZWRcIiwgbGluZSwgaSk7XG5cdFx0XHRcdFx0aSsrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHRoaXMubGluZUNvbnRpbnVhdGlvbiA9IGxpbmUuaW5kZXhPZignXFx4MTInKSA+PSAwIHx8IChyZXRIZWFkZXJbMF0gPiAwKVxuXHRpZiAoIXRoaXMubGluZUNvbnRpbnVhdGlvbikgeyBlbCA9IHsgfSB9XG59O1xuXG52YXIgc2V0SXNJblRpZSA9ZnVuY3Rpb24obXVsdGlsaW5lVmFycywgb3ZlcmxheUxldmVsLCB2YWx1ZSkge1xuXHQvLyBJZiB0aGlzIGlzIHNpbmdsZSB2b2ljZSBtdXNpYyB0aGVuIHRoZSB2b2ljZSBpbmRleCBpc24ndCBzZXQsIHNvIHdlIHVzZSB0aGUgZmlyc3Qgdm9pY2UuXG5cdHZhciB2b2ljZUluZGV4ID0gbXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2UgPyBtdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZS5zdGFmZk51bSAqIDEwMCArIG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLmluZGV4IDogMDtcblx0aWYgKG11bHRpbGluZVZhcnMuaW5UaWVbb3ZlcmxheUxldmVsXSA9PT0gdW5kZWZpbmVkKVxuXHRcdG11bHRpbGluZVZhcnMuaW5UaWVbb3ZlcmxheUxldmVsXSA9IFtdO1xuXHRtdWx0aWxpbmVWYXJzLmluVGllW292ZXJsYXlMZXZlbF1bdm9pY2VJbmRleF0gPSB2YWx1ZTtcbn07XG5cbnZhciBsZXR0ZXJfdG9fY2hvcmQgPSBmdW5jdGlvbihsaW5lLCBpKSB7XG5cdGlmIChsaW5lW2ldID09PSAnXCInKVxuXHR7XG5cdFx0dmFyIGNob3JkID0gdG9rZW5pemVyLmdldEJyYWNrZXR0ZWRTdWJzdHJpbmcobGluZSwgaSwgNSk7XG5cdFx0aWYgKCFjaG9yZFsyXSlcblx0XHRcdHdhcm4oXCJNaXNzaW5nIHRoZSBjbG9zaW5nIHF1b3RlIHdoaWxlIHBhcnNpbmcgdGhlIGNob3JkIHN5bWJvbFwiLCBsaW5lICwgaSk7XG5cdFx0Ly8gSWYgaXQgc3RhcnRzIHdpdGggXiwgdGhlbiB0aGUgY2hvcmQgYXBwZWFycyBhYm92ZS5cblx0XHQvLyBJZiBpdCBzdGFydHMgd2l0aCBfIHRoZW4gdGhlIGNob3JkIGFwcGVhcnMgYmVsb3cuXG5cdFx0Ly8gKG5vdGUgdGhhdCB0aGUgMi4wIGRyYWZ0IHN0YW5kYXJkIGRlZmluZXMgdGhlbSBhcyBub3QgY2hvcmRzLCBidXQgYW5ub3RhdGlvbnMgYW5kIGFsc28gZGVmaW5lcyBALilcblx0XHRpZiAoY2hvcmRbMF0gPiAwICYmIGNob3JkWzFdLmxlbmd0aCA+IDAgJiYgY2hvcmRbMV1bMF0gPT09ICdeJykge1xuXHRcdFx0Y2hvcmRbMV0gPSBjaG9yZFsxXS5zdWJzdHJpbmcoMSk7XG5cdFx0XHRjaG9yZFsyXSA9ICdhYm92ZSc7XG5cdFx0fSBlbHNlIGlmIChjaG9yZFswXSA+IDAgJiYgY2hvcmRbMV0ubGVuZ3RoID4gMCAmJiBjaG9yZFsxXVswXSA9PT0gJ18nKSB7XG5cdFx0XHRjaG9yZFsxXSA9IGNob3JkWzFdLnN1YnN0cmluZygxKTtcblx0XHRcdGNob3JkWzJdID0gJ2JlbG93Jztcblx0XHR9IGVsc2UgaWYgKGNob3JkWzBdID4gMCAmJiBjaG9yZFsxXS5sZW5ndGggPiAwICYmIGNob3JkWzFdWzBdID09PSAnPCcpIHtcblx0XHRcdGNob3JkWzFdID0gY2hvcmRbMV0uc3Vic3RyaW5nKDEpO1xuXHRcdFx0Y2hvcmRbMl0gPSAnbGVmdCc7XG5cdFx0fSBlbHNlIGlmIChjaG9yZFswXSA+IDAgJiYgY2hvcmRbMV0ubGVuZ3RoID4gMCAmJiBjaG9yZFsxXVswXSA9PT0gJz4nKSB7XG5cdFx0XHRjaG9yZFsxXSA9IGNob3JkWzFdLnN1YnN0cmluZygxKTtcblx0XHRcdGNob3JkWzJdID0gJ3JpZ2h0Jztcblx0XHR9IGVsc2UgaWYgKGNob3JkWzBdID4gMCAmJiBjaG9yZFsxXS5sZW5ndGggPiAwICYmIGNob3JkWzFdWzBdID09PSAnQCcpIHtcblx0XHQgICAgICAvLyBALTE1LDUuN1x0XHRcblx0XHQgICAgICBjaG9yZFsxXSA9IGNob3JkWzFdLnN1YnN0cmluZygxKTtcblx0XHQgICAgICB2YXIgeCA9IHRva2VuaXplci5nZXRGbG9hdChjaG9yZFsxXSk7XG5cdFx0ICAgICAgaWYgKHguZGlnaXRzID09PSAwKXtcblx0XHRcdHdhcm4oXCJNaXNzaW5nIGZpcnN0IHBvc2l0aW9uIGluIGFic29sdXRlbHkgcG9zaXRpb25lZCBhbm5vdGF0aW9uLlwiLCBsaW5lLCBpKTtcblx0XHRcdGNob3JkWzFdID0gY2hvcmRbMV0ucmVwbGFjZShcIkBcIixcIlwiKTtcblx0XHRcdGNob3JkWzJdID0gJ2Fib3ZlJztcblx0XHRcdHJldHVybiBjaG9yZDtcblx0XHQgICAgICB9XG5cdFx0ICAgICAgY2hvcmRbMV0gPSBjaG9yZFsxXS5zdWJzdHJpbmcoeC5kaWdpdHMpO1xuXHRcdCAgICAgIGlmIChjaG9yZFsxXVswXSAhPT0gJywnKXtcblx0XHRcdHdhcm4oXCJNaXNzaW5nIGNvbW1hIGFic29sdXRlbHkgcG9zaXRpb25lZCBhbm5vdGF0aW9uLlwiLCBsaW5lLCBpKTtcblx0XHRcdGNob3JkWzFdID0gY2hvcmRbMV0ucmVwbGFjZShcIkBcIixcIlwiKTtcblx0XHRcdGNob3JkWzJdID0gJ2Fib3ZlJztcblx0XHRcdHJldHVybiBjaG9yZDtcblx0XHQgICAgICB9XG5cdFx0ICAgICAgY2hvcmRbMV0gPSBjaG9yZFsxXS5zdWJzdHJpbmcoMSk7XG5cdFx0ICAgICAgdmFyIHkgPSB0b2tlbml6ZXIuZ2V0RmxvYXQoY2hvcmRbMV0pO1xuXHRcdCAgICAgIGlmICh5LmRpZ2l0cyA9PT0gMCl7XG5cdFx0XHR3YXJuKFwiTWlzc2luZyBzZWNvbmQgcG9zaXRpb24gaW4gYWJzb2x1dGVseSBwb3NpdGlvbmVkIGFubm90YXRpb24uXCIsIGxpbmUsIGkpO1xuXHRcdFx0Y2hvcmRbMV0gPSBjaG9yZFsxXS5yZXBsYWNlKFwiQFwiLFwiXCIpO1xuXHRcdFx0Y2hvcmRbMl0gPSAnYWJvdmUnO1xuXHRcdFx0cmV0dXJuIGNob3JkO1xuXHRcdCAgICAgIH1cblx0XHQgICAgICBjaG9yZFsxXSA9IGNob3JkWzFdLnN1YnN0cmluZyh5LmRpZ2l0cyk7XG5cdFx0ICAgICAgdmFyIHdzID0gdG9rZW5pemVyLnNraXBXaGl0ZVNwYWNlKGNob3JkWzFdKTtcblx0XHQgICAgICBjaG9yZFsxXSA9IGNob3JkWzFdLnN1YnN0cmluZyh3cyk7XG5cdFx0ICAgICAgY2hvcmRbMl0gPSBudWxsO1xuXHRcdCAgICAgIGNob3JkWzNdID0ge1xuXHRcdFx0eDogeC52YWx1ZSxcblx0XHRcdHk6IHkudmFsdWVcblx0XHQgICAgICB9O1x0XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmIChtdWx0aWxpbmVWYXJzLmZyZWVnY2hvcmQgIT09IHRydWUpIHtcblx0XHRcdFx0Y2hvcmRbMV0gPSBjaG9yZFsxXS5yZXBsYWNlKC8oW0FCQ0RFRkcwLTldKWIvZywgXCIkMeKZrVwiKTtcblx0XHRcdFx0Y2hvcmRbMV0gPSBjaG9yZFsxXS5yZXBsYWNlKC8oW0FCQ0RFRkcwLTldKSMvZywgXCIkMeKZr1wiKTtcblx0XHRcdFx0Y2hvcmRbMV0gPSBjaG9yZFsxXS5yZXBsYWNlKC9eKFtBQkNERUZHXSkoW+KZr+KZrV0/KW8oW15BLVphLXpdKS9nLCBcIiQxJDLCsCQzXCIpO1xuXHRcdFx0XHRjaG9yZFsxXSA9IGNob3JkWzFdLnJlcGxhY2UoL14oW0FCQ0RFRkddKShb4pmv4pmtXT8pbyQvZywgXCIkMSQywrBcIik7XG5cdFx0XHRcdGNob3JkWzFdID0gY2hvcmRbMV0ucmVwbGFjZSgvXihbQUJDREVGR10pKFvima/ima1dPykwKFteQS1aYS16XSkvZywgXCIkMSQyw7gkM1wiKTtcblx0XHRcdFx0Y2hvcmRbMV0gPSBjaG9yZFsxXS5yZXBsYWNlKC9eKFtBQkNERUZHXSkoW+KZr+KZrV0/KVxcXihbXkEtWmEtel0pL2csIFwiJDEkMuKIhiQzXCIpO1xuXHRcdFx0fVxuXHRcdFx0Y2hvcmRbMl0gPSAnZGVmYXVsdCc7XG5cdFx0XHRjaG9yZFsxXSA9IHRyYW5zcG9zZS5jaG9yZE5hbWUobXVsdGlsaW5lVmFycywgY2hvcmRbMV0pO1xuXHRcdH1cblx0XHRyZXR1cm4gY2hvcmQ7XG5cdH1cblx0cmV0dXJuIFswLCBcIlwiXTtcbn07XG5cbnZhciBsZXR0ZXJfdG9fZ3JhY2UgPSAgZnVuY3Rpb24obGluZSwgaSkge1xuXHQvLyBHcmFjZSBub3RlcyBhcmUgYW4gYXJyYXkgb2Y6IHN0YXJ0c2x1ciwgbm90ZSwgZW5kc2x1ciwgc3BhY2U7IHdoZXJlIG5vdGUgaXMgYWNjaWRlbnRhbCwgcGl0Y2gsIGR1cmF0aW9uXG5cdGlmIChsaW5lW2ldID09PSAneycpIHtcblx0XHQvLyBmZXRjaCB0aGUgZ3JhY2Vub3RlcyBzdHJpbmcgYW5kIGNvbnN1bWUgdGhhdCBpbnRvIHRoZSBhcnJheVxuXHRcdHZhciBncmEgPSB0b2tlbml6ZXIuZ2V0QnJhY2tldHRlZFN1YnN0cmluZyhsaW5lLCBpLCAxLCAnfScpO1xuXHRcdGlmICghZ3JhWzJdKVxuXHRcdFx0d2FybihcIk1pc3NpbmcgdGhlIGNsb3NpbmcgJ30nIHdoaWxlIHBhcnNpbmcgZ3JhY2Ugbm90ZVwiLCBsaW5lLCBpKTtcblx0XHQvLyBJZiB0aGVyZSBpcyBhIHNsdXIgYWZ0ZXIgdGhlIGdyYWNlIGNvbnN0cnVjdGlvbiwgdGhlbiBtb3ZlIGl0IHRvIHRoZSBsYXN0IG5vdGUgaW5zaWRlIHRoZSBncmFjZSBjb25zdHJ1Y3Rpb25cblx0XHRpZiAobGluZVtpK2dyYVswXV0gPT09ICcpJykge1xuXHRcdFx0Z3JhWzBdKys7XG5cdFx0XHRncmFbMV0gKz0gJyknO1xuXHRcdH1cblxuXHRcdHZhciBncmFjZW5vdGVzID0gW107XG5cdFx0dmFyIGlpID0gMDtcblx0XHR2YXIgaW5UaWUgPSBmYWxzZTtcblx0XHR3aGlsZSAoaWkgPCBncmFbMV0ubGVuZ3RoKSB7XG5cdFx0XHR2YXIgYWNjaWFjY2F0dXJhID0gZmFsc2U7XG5cdFx0XHRpZiAoZ3JhWzFdW2lpXSA9PT0gJy8nKSB7XG5cdFx0XHRcdGFjY2lhY2NhdHVyYSA9IHRydWU7XG5cdFx0XHRcdGlpKys7XG5cdFx0XHR9XG5cdFx0XHR2YXIgbm90ZSA9IGdldENvcmVOb3RlKGdyYVsxXSwgaWksIHt9LCBmYWxzZSk7XG5cdFx0XHRpZiAobm90ZSAhPT0gbnVsbCkge1xuXHRcdFx0XHQvLyBUaGUgZ3JhY2Ugbm90ZSBkdXJhdGlvbnMgc2hvdWxkIG5vdCBiZSBhZmZlY3RlZCBieSB0aGUgZGVmYXVsdCBsZW5ndGg6IHRoZXkgc2hvdWxkIGJlIGJhc2VkIG9uIDEvMTYsIHNvIGlmIHRoYXQgaXNuJ3QgdGhlIGRlZmF1bHQsIHRoZW4gbXVsdGlwbHkgaGVyZS5cblx0XHRcdFx0bm90ZS5kdXJhdGlvbiA9IG5vdGUuZHVyYXRpb24gLyAobXVsdGlsaW5lVmFycy5kZWZhdWx0X2xlbmd0aCAqIDgpO1xuXHRcdFx0XHRpZiAoYWNjaWFjY2F0dXJhKVxuXHRcdFx0XHRcdG5vdGUuYWNjaWFjY2F0dXJhID0gdHJ1ZTtcblx0XHRcdFx0aWYgKG5vdGUucmVzdCkge1xuXHRcdFx0XHRcdC8vIGRvbid0IGFsbG93IHJlc3RzIGluc2lkZSBncmFjZW5vdGVzXG5cdFx0XHRcdFx0d2FybihcIlJlc3RzIG5vdCBhbGxvd2VkIGFzIGdyYWNlIG5vdGVzICdcIiArIGdyYVsxXVtpaV0gKyBcIicgd2hpbGUgcGFyc2luZyBncmFjZSBub3RlXCIsIGxpbmUsIGkpO1xuXHRcdFx0XHR9IGVsc2Vcblx0XHRcdFx0XHRncmFjZW5vdGVzLnB1c2gobm90ZSk7XG5cblx0XHRcdFx0aWYgKGluVGllKSB7XG5cdFx0XHRcdFx0bm90ZS5lbmRUaWUgPSB0cnVlO1xuXHRcdFx0XHRcdGluVGllID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG5vdGUuc3RhcnRUaWUpXG5cdFx0XHRcdFx0aW5UaWUgPSB0cnVlO1xuXG5cdFx0XHRcdGlpICA9IG5vdGUuZW5kQ2hhcjtcblx0XHRcdFx0ZGVsZXRlIG5vdGUuZW5kQ2hhcjtcblxuXHRcdFx0XHRpZiAobm90ZS5lbmRfYmVhbSkge1xuXHRcdFx0XHRcdG5vdGUuZW5kQmVhbSA9IHRydWU7XG5cdFx0XHRcdFx0ZGVsZXRlIG5vdGUuZW5kX2JlYW07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHQvLyBXZSBzaG91bGRuJ3QgZ2V0IGFueXRoaW5nIGJ1dCBub3RlcyBvciBhIHNwYWNlIGhlcmUsIHNvIHJlcG9ydCBhbiBlcnJvclxuXHRcdFx0XHRpZiAoZ3JhWzFdW2lpXSA9PT0gJyAnKSB7XG5cdFx0XHRcdFx0aWYgKGdyYWNlbm90ZXMubGVuZ3RoID4gMClcblx0XHRcdFx0XHRcdGdyYWNlbm90ZXNbZ3JhY2Vub3Rlcy5sZW5ndGgtMV0uZW5kQmVhbSA9IHRydWU7XG5cdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdHdhcm4oXCJVbmtub3duIGNoYXJhY3RlciAnXCIgKyBncmFbMV1baWldICsgXCInIHdoaWxlIHBhcnNpbmcgZ3JhY2Ugbm90ZVwiLCBsaW5lLCBpKTtcblx0XHRcdFx0aWkrKztcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKGdyYWNlbm90ZXMubGVuZ3RoKVxuXHRcdFx0cmV0dXJuIFtncmFbMF0sIGdyYWNlbm90ZXNdO1xuXHR9XG5cdHJldHVybiBbIDAgXTtcbn07XG5cbmZ1bmN0aW9uIGxldHRlcl90b19vdmVybGF5KGxpbmUsIGkpIHtcblx0aWYgKGxpbmVbaV0gPT09ICcmJykge1xuXHRcdHZhciBzdGFydCA9IGk7XG5cdFx0d2hpbGUgKGxpbmVbaV0gJiYgbGluZVtpXSAhPT0gJzonICYmIGxpbmVbaV0gIT09ICd8Jylcblx0XHRcdGkrKztcblx0XHRyZXR1cm4gWyBpLXN0YXJ0LCBsaW5lLnN1YnN0cmluZyhzdGFydCsxLCBpKSBdO1xuXHR9XG5cdHJldHVybiBbIDAgXTtcbn1cblxuZnVuY3Rpb24gZHVyYXRpb25PZk1lYXN1cmUobXVsdGlsaW5lVmFycykge1xuXHQvLyBUT0RPLVBFUjogVGhpcyBjb3VsZCBiZSBtb3JlIGNvbXBsaWNhdGVkIGlmIG9uZSBvZiB0aGUgdW51c3VhbCBtZWFzdXJlcyBpcyB1c2VkLlxuXHR2YXIgbWV0ZXIgPSBtdWx0aWxpbmVWYXJzLm9yaWdNZXRlcjtcblx0aWYgKCFtZXRlciB8fCBtZXRlci50eXBlICE9PSAnc3BlY2lmaWVkJylcblx0XHRyZXR1cm4gMTtcblx0aWYgKCFtZXRlci52YWx1ZSB8fCBtZXRlci52YWx1ZS5sZW5ndGggPT09IDApXG5cdFx0cmV0dXJuIDE7XG5cdHJldHVybiBwYXJzZUludChtZXRlci52YWx1ZVswXS5udW0sIDEwKSAvIHBhcnNlSW50KG1ldGVyLnZhbHVlWzBdLmRlbiwgMTApO1xufVxuXG5cblxuXG52YXIgbGV0dGVyX3RvX2FjY2VudCA9IGZ1bmN0aW9uKGxpbmUsIGkpIHtcblx0dmFyIG1hY3JvID0gbXVsdGlsaW5lVmFycy5tYWNyb3NbbGluZVtpXV07XG5cblx0aWYgKG1hY3JvICE9PSB1bmRlZmluZWQpIHtcblx0XHRpZiAobWFjcm9bMF0gPT09ICchJyB8fCBtYWNyb1swXSA9PT0gJysnKVxuXHRcdFx0bWFjcm8gPSBtYWNyby5zdWJzdHJpbmcoMSk7XG5cdFx0aWYgKG1hY3JvW21hY3JvLmxlbmd0aC0xXSA9PT0gJyEnIHx8IG1hY3JvW21hY3JvLmxlbmd0aC0xXSA9PT0gJysnKVxuXHRcdFx0bWFjcm8gPSBtYWNyby5zdWJzdHJpbmcoMCwgbWFjcm8ubGVuZ3RoLTEpO1xuXHRcdGlmIChsZWdhbEFjY2VudHMuaW5jbHVkZXMobWFjcm8pKVxuXHRcdFx0cmV0dXJuIFsgMSwgbWFjcm8gXTtcblx0XHRlbHNlIGlmICh2b2x1bWVEZWNvcmF0aW9ucy5pbmNsdWRlcyhtYWNybykpIHtcblx0XHRcdGlmIChtdWx0aWxpbmVWYXJzLnZvbHVtZVBvc2l0aW9uID09PSAnaGlkZGVuJylcblx0XHRcdFx0bWFjcm8gPSBcIlwiO1xuXHRcdFx0cmV0dXJuIFsxLCBtYWNyb107XG5cdFx0fSBlbHNlIGlmIChkeW5hbWljRGVjb3JhdGlvbnMuaW5jbHVkZXMobWFjcm8pKSB7XG5cdFx0XHRpZiAobXVsdGlsaW5lVmFycy5keW5hbWljUG9zaXRpb24gPT09ICdoaWRkZW4nKVxuXHRcdFx0XHRtYWNybyA9IFwiXCI7XG5cdFx0XHRyZXR1cm4gWzEsIG1hY3JvXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCFtdWx0aWxpbmVWYXJzLmlnbm9yZWREZWNvcmF0aW9ucy5pbmNsdWRlcyhtYWNybykpXG5cdFx0XHRcdHdhcm4oXCJVbmtub3duIG1hY3JvOiBcIiArIG1hY3JvLCBsaW5lLCBpKTtcblx0XHRcdHJldHVybiBbMSwgJycgXTtcblx0XHR9XG5cdH1cblx0c3dpdGNoIChsaW5lW2ldKVxuXHR7XG5cdFx0Y2FzZSAnLic6XG5cdFx0XHRpZiAobGluZVtpKzFdID09PSAnKCcgfHwgbGluZVtpKzFdID09PSAnLScpIC8vIGEgZG90IHRoZW4gb3BlbiBwYXJlbiBpcyBhIGRvdHRlZCBzbHVyOyBsaWtld2lzZSBkb3QgZGFzaCBpcyBkb3R0ZWQgdGllLlxuXHRcdFx0XHRicmVhaztcblx0XHRcdHJldHVybiBbMSwgJ3N0YWNjYXRvJ107XG5cdFx0Y2FzZSAndSc6cmV0dXJuIFsxLCAndXBib3cnXTtcblx0XHRjYXNlICd2JzpyZXR1cm4gWzEsICdkb3duYm93J107XG5cdFx0Y2FzZSAnfic6cmV0dXJuIFsxLCAnaXJpc2hyb2xsJ107XG5cdFx0Y2FzZSAnISc6XG5cdFx0Y2FzZSAnKyc6XG5cdFx0XHR2YXIgcmV0ID0gdG9rZW5pemVyLmdldEJyYWNrZXR0ZWRTdWJzdHJpbmcobGluZSwgaSwgNSk7XG5cdFx0XHQvLyBCZSBzdXJlIHRoYXQgdGhlIGFjY2VudCBpcyByZWNvZ25pemFibGUuXG5cdFx0XHRpZiAocmV0WzFdLmxlbmd0aCA+IDEgJiYgKHJldFsxXVswXSA9PT0gJ14nIHx8IHJldFsxXVswXSA9PT0nXycpKVxuXHRcdFx0XHRyZXRbMV0gPSByZXRbMV0uc3Vic3RyaW5nKDEpO1x0Ly8gVE9ETy1QRVI6IFRoZSB0ZXN0IGZpbGVzIGhhdmUgaW5kaWNhdG9ycyBmb3JjaW5nIHRoZSBvcm5hbWVudCB0byB0aGUgdG9wIG9yIGJvdHRvbSwgYnV0IHRoYXQgaXNuJ3QgaW4gdGhlIHN0YW5kYXJkLiBXZSdsbCBqdXN0IGlnbm9yZSB0aGVtLlxuXHRcdFx0aWYgKGxlZ2FsQWNjZW50cy5pbmNsdWRlcyhyZXRbMV0pKVxuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0aWYgKHZvbHVtZURlY29yYXRpb25zLmluY2x1ZGVzKHJldFsxXSkpIHtcblx0XHRcdFx0aWYgKG11bHRpbGluZVZhcnMudm9sdW1lUG9zaXRpb24gPT09ICdoaWRkZW4nIClcblx0XHRcdFx0XHRyZXRbMV0gPSAnJztcblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblx0XHRcdGlmIChkeW5hbWljRGVjb3JhdGlvbnMuaW5jbHVkZXMocmV0WzFdKSkge1xuXHRcdFx0XHRpZiAobXVsdGlsaW5lVmFycy5keW5hbWljUG9zaXRpb24gPT09ICdoaWRkZW4nIClcblx0XHRcdFx0XHRyZXRbMV0gPSAnJztcblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGluZCA9IGFjY2VudFBzZXVkb255bXMuZmluZEluZGV4KGZ1bmN0aW9uIChhY2MpIHsgcmV0dXJuIHJldFsxXSA9PT0gYWNjWzBdfSlcblx0XHRcdGlmIChpbmQgPj0gMCkge1xuXHRcdFx0XHRyZXRbMV0gPSBhY2NlbnRQc2V1ZG9ueW1zW2luZF1bMV07XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdGluZCA9IGFjY2VudER5bmFtaWNQc2V1ZG9ueW1zLmZpbmRJbmRleChmdW5jdGlvbiAoYWNjKSB7IHJldHVybiByZXRbMV0gPT09IGFjY1swXX0pXG5cdFx0XHRpZiAoaW5kID49IDApIHtcblx0XHRcdFx0cmV0WzFdID0gYWNjZW50RHluYW1pY1BzZXVkb255bXNbaW5kXVsxXTtcblx0XHRcdFx0aWYgKG11bHRpbGluZVZhcnMuZHluYW1pY1Bvc2l0aW9uID09PSAnaGlkZGVuJyApXG5cdFx0XHRcdFx0cmV0WzFdID0gJyc7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFdlIGRpZG4ndCBmaW5kIHRoZSBhY2NlbnQgaW4gdGhlIGxpc3QsIHNvIGNvbnN1bWUgdGhlIHNwYWNlLCBidXQgZG9uJ3QgcmV0dXJuIGFuIGFjY2VudC5cblx0XHRcdC8vIEFsdGhvdWdoIGl0IGlzIHBvc3NpYmxlIHRoYXQgISB3YXMgdXNlZCBhcyBhIGxpbmUgYnJlYWssIHNvIGFjY2VwdCB0aGF0LlxuXHRcdFx0aWYgKGxpbmVbaV0gPT09ICchJyAmJiAocmV0WzBdID09PSAxIHx8IGxpbmVbaStyZXRbMF0tMV0gIT09ICchJykpXG5cdFx0XHRcdHJldHVybiBbMSwgbnVsbCBdO1xuXHRcdFx0d2FybihcIlVua25vd24gZGVjb3JhdGlvbjogXCIgKyByZXRbMV0sIGxpbmUsIGkpO1xuXHRcdFx0cmV0WzFdID0gXCJcIjtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0Y2FzZSAnSCc6cmV0dXJuIFsxLCAnZmVybWF0YSddO1xuXHRcdGNhc2UgJ0onOnJldHVybiBbMSwgJ3NsaWRlJ107XG5cdFx0Y2FzZSAnTCc6cmV0dXJuIFsxLCAnYWNjZW50J107XG5cdFx0Y2FzZSAnTSc6cmV0dXJuIFsxLCAnbW9yZGVudCddO1xuXHRcdGNhc2UgJ08nOnJldHVyblsxLCAnY29kYSddO1xuXHRcdGNhc2UgJ1AnOnJldHVyblsxLCAncHJhbGx0cmlsbGVyJ107XG5cdFx0Y2FzZSAnUic6cmV0dXJuIFsxLCAncm9sbCddO1xuXHRcdGNhc2UgJ1MnOnJldHVybiBbMSwgJ3NlZ25vJ107XG5cdFx0Y2FzZSAnVCc6cmV0dXJuIFsxLCAndHJpbGwnXTtcblx0XHRjYXNlICd0JzpyZXR1cm4gWzEsICd0cmlsbGgnXTtcblx0XHRcblx0fVxuXHRyZXR1cm4gWzAsIDBdO1xufTtcblxudmFyIGxldHRlcl90b19zcGFjZXIgPSBmdW5jdGlvbihsaW5lLCBpKSB7XG5cdHZhciBzdGFydCA9IGk7XG5cdHdoaWxlICh0b2tlbml6ZXIuaXNXaGl0ZVNwYWNlKGxpbmVbaV0pKVxuXHRcdGkrKztcblx0cmV0dXJuIFsgaS1zdGFydCBdO1xufTtcblxuLy8gcmV0dXJucyB0aGUgY2xhc3Mgb2YgdGhlIGJhciBsaW5lXG4vLyB0aGUgbnVtYmVyIG9mIHRoZSByZXBlYXRcbi8vIGFuZCB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgdXNlZCB1cFxuLy8gaWYgMCBpcyByZXR1cm5lZCwgdGhlbiB0aGUgbmV4dCBlbGVtZW50IHdhcyBub3QgYSBiYXIgbGluZVxudmFyIGxldHRlcl90b19iYXIgPSBmdW5jdGlvbihsaW5lLCBjdXJyX3Bvcykge1xuXHR2YXIgcmV0ID0gdG9rZW5pemVyLmdldEJhckxpbmUobGluZSwgY3Vycl9wb3MpO1xuXHRpZiAocmV0LmxlbiA9PT0gMClcblx0XHRyZXR1cm4gWzAsXCJcIl07XG5cdGlmIChyZXQud2Fybikge1xuXHRcdHdhcm4ocmV0Lndhcm4sIGxpbmUsIGN1cnJfcG9zKTtcblx0XHRyZXR1cm4gW3JldC5sZW4sXCJcIl07XG5cdH1cblxuXHQvLyBOb3cgc2VlIGlmIHRoaXMgaXMgYSByZXBlYXRlZCBlbmRpbmdcblx0Ly8gQSByZXBlYXRlZCBlbmRpbmcgaXMgYWxsIG9mIHRoZSBjaGFyYWN0ZXJzIDEsMiwzLDQsNSw2LDcsOCw5LDAsLSwgYW5kIGNvbW1hXG5cdC8vIEl0IGNhbiBhbHNvIG9wdGlvbmFsbHkgc3RhcnQgd2l0aCAnWycsIHdoaWNoIGlzIGlnbm9yZWQuXG5cdC8vIEFsc28sIGl0IGNhbiBoYXZlIHdoaXRlIHNwYWNlIGJlZm9yZSB0aGUgJ1snLlxuXHRmb3IgKHZhciB3cyA9IDA7IHdzIDwgbGluZS5sZW5ndGg7IHdzKyspXG5cdFx0aWYgKGxpbmVbY3Vycl9wb3MgKyByZXQubGVuICsgd3NdICE9PSAnICcpXG5cdFx0XHRicmVhaztcblx0dmFyIG9yaWdfYmFyX2xlbiA9IHJldC5sZW47XG5cdGlmIChsaW5lW2N1cnJfcG9zK3JldC5sZW4rd3NdID09PSAnWycpIHtcblx0XHRyZXQubGVuICs9IHdzICsgMTtcblx0fVxuXG5cdC8vIEl0IGNhbiBhbHNvIGJlIGEgcXVvdGVkIHN0cmluZy4gSXQgaXMgdW5jbGVhciB3aGV0aGVyIHRoYXQgY29uc3RydWN0IHJlcXVpcmVzICdbJywgYnV0IGl0IHNlZW1zIGxpa2UgaXQgd291bGQuIG90aGVyd2lzZSBpdCB3b3VsZCBiZSBjb25mdXNlZCB3aXRoIGEgcmVndWxhciBjaG9yZC5cblx0aWYgKGxpbmVbY3Vycl9wb3MrcmV0Lmxlbl0gPT09ICdcIicgJiYgbGluZVtjdXJyX3BvcytyZXQubGVuLTFdID09PSAnWycpIHtcblx0XHR2YXIgZW5kaW5nID0gdG9rZW5pemVyLmdldEJyYWNrZXR0ZWRTdWJzdHJpbmcobGluZSwgY3Vycl9wb3MrcmV0LmxlbiwgNSk7XG5cdFx0cmV0dXJuIFtyZXQubGVuK2VuZGluZ1swXSwgcmV0LnRva2VuLCBlbmRpbmdbMV1dO1xuXHR9XG5cdHZhciByZXRSZXAgPSB0b2tlbml6ZXIuZ2V0VG9rZW5PZihsaW5lLnN1YnN0cmluZyhjdXJyX3BvcytyZXQubGVuKSwgXCIxMjM0NTY3ODkwLSxcIik7XG5cdGlmIChyZXRSZXAubGVuID09PSAwIHx8IHJldFJlcC50b2tlblswXSA9PT0gJy0nKVxuXHRcdHJldHVybiBbb3JpZ19iYXJfbGVuLCByZXQudG9rZW5dO1xuXG5cdHJldHVybiBbcmV0LmxlbityZXRSZXAubGVuLCByZXQudG9rZW4sIHJldFJlcC50b2tlbl07XG59O1xuXG52YXIgbGV0dGVyX3RvX29wZW5fc2x1cnNfYW5kX3RyaXBsZXRzID0gIGZ1bmN0aW9uKGxpbmUsIGkpIHtcblx0Ly8gY29uc3VtZSBzcGFjZXMsIGFuZCBsb29rIGZvciBhbGwgdGhlIG9wZW4gcGFyZW5zLiBJZiB0aGVyZSBpcyBhIG51bWJlciBhZnRlciB0aGUgb3BlbiBwYXJlbixcblx0Ly8gdGhhdCBpcyBhIHRyaXBsZXQuIE90aGVyd2lzZSB0aGF0IGlzIGEgc2x1ci4gQ29sbGVjdCBhbGwgdGhlIHNsdXJzIGFuZCB0aGUgZmlyc3QgdHJpcGxldC5cblx0dmFyIHJldCA9IHt9O1xuXHR2YXIgc3RhcnQgPSBpO1xuXHRpZiAobGluZVtpXSA9PT0gJy4nICYmIGxpbmVbaSsxXSA9PT0gJygnKSB7XG5cdFx0cmV0LmRvdHRlZFNsdXIgPSB0cnVlO1xuXHRcdGkrKztcblx0fVxuXHR3aGlsZSAobGluZVtpXSA9PT0gJygnIHx8IHRva2VuaXplci5pc1doaXRlU3BhY2UobGluZVtpXSkpIHtcblx0XHRpZiAobGluZVtpXSA9PT0gJygnKSB7XG5cdFx0XHRpZiAoaSsxIDwgbGluZS5sZW5ndGggJiYgKGxpbmVbaSsxXSA+PSAnMicgJiYgbGluZVtpKzFdIDw9ICc5JykpIHtcblx0XHRcdFx0aWYgKHJldC50cmlwbGV0ICE9PSB1bmRlZmluZWQpXG5cdFx0XHRcdFx0d2FybihcIkNhbid0IG5lc3QgdHJpcGxldHNcIiwgbGluZSwgaSk7XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdHJldC50cmlwbGV0ID0gbGluZVtpKzFdIC0gJzAnO1xuXHRcdFx0XHRcdHJldC50cmlwbGV0USA9IHRyaXBsZXRRW3JldC50cmlwbGV0XTtcblx0XHRcdFx0XHRyZXQubnVtX25vdGVzID0gcmV0LnRyaXBsZXQ7XG5cdFx0XHRcdFx0aWYgKGkrMiA8IGxpbmUubGVuZ3RoICYmIGxpbmVbaSsyXSA9PT0gJzonKSB7XG5cdFx0XHRcdFx0XHQvLyBXZSBhcmUgZXhwZWN0aW5nIFwiKHA6cTpyXCIgb3IgXCIocDpxXCIgb3IgXCIocDo6clwiXG5cdFx0XHRcdFx0XHQvLyBUaGF0IGlzOiBcInB1dCBwIG5vdGVzIGludG8gdGhlIHRpbWUgb2YgcSBmb3IgdGhlIG5leHQgciBub3Rlc1wiXG5cdFx0XHRcdFx0XHQvLyBpZiByIGlzIG1pc3NpbmcsIHRoZW4gaXQgaXMgZXF1YWwgdG8gcC5cblx0XHRcdFx0XHRcdC8vIGlmIHEgaXMgbWlzc2luZywgaXQgaXMgZGV0ZXJtaW5lZCBmcm9tIHRoaXMgdGFibGU6XG5cdFx0XHRcdFx0XHQvLyAoMiBub3RlcyBpbiB0aGUgdGltZSBvZiAzXG5cdFx0XHRcdFx0XHQvLyAoMyBub3RlcyBpbiB0aGUgdGltZSBvZiAyXG5cdFx0XHRcdFx0XHQvLyAoNCBub3RlcyBpbiB0aGUgdGltZSBvZiAzXG5cdFx0XHRcdFx0XHQvLyAoNSBub3RlcyBpbiB0aGUgdGltZSBvZiBuIHwgaWYgdGltZSBzaWcgaXMgKDYvOCwgOS84LCAxMi84KSwgbj0zLCBlbHNlIG49MlxuXHRcdFx0XHRcdFx0Ly8gKDYgbm90ZXMgaW4gdGhlIHRpbWUgb2YgMlxuXHRcdFx0XHRcdFx0Ly8gKDcgbm90ZXMgaW4gdGhlIHRpbWUgb2YgblxuXHRcdFx0XHRcdFx0Ly8gKDggbm90ZXMgaW4gdGhlIHRpbWUgb2YgM1xuXHRcdFx0XHRcdFx0Ly8gKDkgbm90ZXMgaW4gdGhlIHRpbWUgb2YgblxuXHRcdFx0XHRcdFx0aWYgKGkrMyA8IGxpbmUubGVuZ3RoICYmIGxpbmVbaSszXSA9PT0gJzonKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFRoZSBzZWNvbmQgbnVtYmVyLCAncScsIGlzIG5vdCBwcmVzZW50LlxuXHRcdFx0XHRcdFx0XHRpZiAoaSs0IDwgbGluZS5sZW5ndGggJiYgKGxpbmVbaSs0XSA+PSAnMScgJiYgbGluZVtpKzRdIDw9ICc5JykpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXQubnVtX25vdGVzID0gbGluZVtpKzRdIC0gJzAnO1xuXHRcdFx0XHRcdFx0XHRcdGkgKz0gMztcblx0XHRcdFx0XHRcdFx0fSBlbHNlXG5cdFx0XHRcdFx0XHRcdFx0d2FybihcImV4cGVjdGVkIG51bWJlciBhZnRlciB0aGUgdHdvIGNvbG9ucyBhZnRlciB0aGUgdHJpcGxldCB0byBtYXJrIHRoZSBkdXJhdGlvblwiLCBsaW5lLCBpKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoaSszIDwgbGluZS5sZW5ndGggJiYgKGxpbmVbaSszXSA+PSAnMScgJiYgbGluZVtpKzNdIDw9ICc5JykpIHtcblx0XHRcdFx0XHRcdFx0cmV0LnRyaXBsZXRRID0gbGluZVtpKzNdIC0gJzAnO1xuXHRcdFx0XHRcdFx0XHRpZiAoaSs0IDwgbGluZS5sZW5ndGggJiYgbGluZVtpKzRdID09PSAnOicpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoaSs1IDwgbGluZS5sZW5ndGggJiYgKGxpbmVbaSs1XSA+PSAnMScgJiYgbGluZVtpKzVdIDw9ICc5JykpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldC5udW1fbm90ZXMgPSBsaW5lW2krNV0gLSAnMCc7XG5cdFx0XHRcdFx0XHRcdFx0XHRpICs9IDQ7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGkgKz0gMjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlXG5cdFx0XHRcdFx0XHRcdHdhcm4oXCJleHBlY3RlZCBudW1iZXIgYWZ0ZXIgdGhlIHRyaXBsZXQgdG8gbWFyayB0aGUgZHVyYXRpb25cIiwgbGluZSwgaSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGkrKztcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRpZiAocmV0LnN0YXJ0U2x1ciA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdHJldC5zdGFydFNsdXIgPSAxO1xuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0cmV0LnN0YXJ0U2x1cisrO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpKys7XG5cdH1cblx0cmV0LmNvbnN1bWVkID0gaS1zdGFydDtcblx0cmV0dXJuIHJldDtcbn07XG5cbk11c2ljUGFyc2VyLnByb3RvdHlwZS5zdGFydE5ld0xpbmUgPSBmdW5jdGlvbigpIHtcblx0dmFyIHBhcmFtcyA9IHsgc3RhcnRDaGFyOiAtMSwgZW5kQ2hhcjogLTF9O1xuXHRpZiAobXVsdGlsaW5lVmFycy5wYXJ0Rm9yTmV4dExpbmUudGl0bGUpXG5cdFx0cGFyYW1zLnBhcnQgPSBtdWx0aWxpbmVWYXJzLnBhcnRGb3JOZXh0TGluZTtcblx0cGFyYW1zLmNsZWYgPSBtdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZSAmJiBtdWx0aWxpbmVWYXJzLnN0YXZlc1ttdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZS5zdGFmZk51bV0uY2xlZiAhPT0gdW5kZWZpbmVkID8gT2JqZWN0LmFzc2lnbih7fSxtdWx0aWxpbmVWYXJzLnN0YXZlc1ttdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZS5zdGFmZk51bV0uY2xlZikgOiBPYmplY3QuYXNzaWduKHt9LG11bHRpbGluZVZhcnMuY2xlZik7XG5cdHZhciBzY29yZVRyYW5zcG9zZSA9IG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlID8gbXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2Uuc2NvcmVUcmFuc3Bvc2UgOiAwO1xuXHRwYXJhbXMua2V5ID0gcGFyc2VLZXlWb2ljZS5zdGFuZGFyZEtleShtdWx0aWxpbmVWYXJzLmtleS5yb290K211bHRpbGluZVZhcnMua2V5LmFjYyttdWx0aWxpbmVWYXJzLmtleS5tb2RlLCBtdWx0aWxpbmVWYXJzLmtleS5yb290LCBtdWx0aWxpbmVWYXJzLmtleS5hY2MsIHNjb3JlVHJhbnNwb3NlKTtcblx0cGFyYW1zLmtleS5tb2RlID0gbXVsdGlsaW5lVmFycy5rZXkubW9kZTtcblx0aWYgKG11bHRpbGluZVZhcnMua2V5LmltcGxpZWROYXR1cmFscylcblx0XHRwYXJhbXMua2V5LmltcGxpZWROYXR1cmFscyA9IG11bHRpbGluZVZhcnMua2V5LmltcGxpZWROYXR1cmFscztcblx0aWYgKG11bHRpbGluZVZhcnMua2V5LmV4cGxpY2l0QWNjaWRlbnRhbHMpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG11bHRpbGluZVZhcnMua2V5LmV4cGxpY2l0QWNjaWRlbnRhbHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBmb3VuZCA9IGZhbHNlO1xuXHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBwYXJhbXMua2V5LmFjY2lkZW50YWxzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGlmIChwYXJhbXMua2V5LmFjY2lkZW50YWxzW2pdLm5vdGUgPT09IG11bHRpbGluZVZhcnMua2V5LmV4cGxpY2l0QWNjaWRlbnRhbHNbaV0ubm90ZSkge1xuXHRcdFx0XHRcdC8vIElmIHRoZSBub3RlIGlzIGFscmVhZHkgaW4gdGhlIGxpc3QsIG92ZXJyaWRlIGl0IHdpdGggdGhlIG5ldyB2YWx1ZVxuXHRcdFx0XHRcdHBhcmFtcy5rZXkuYWNjaWRlbnRhbHNbal0uYWNjID0gbXVsdGlsaW5lVmFycy5rZXkuZXhwbGljaXRBY2NpZGVudGFsc1tpXS5hY2M7XG5cdFx0XHRcdFx0Zm91bmQgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWZvdW5kKVxuXHRcdFx0XHRwYXJhbXMua2V5LmFjY2lkZW50YWxzLnB1c2gobXVsdGlsaW5lVmFycy5rZXkuZXhwbGljaXRBY2NpZGVudGFsc1tpXSk7XG5cdFx0fVxuXHR9XG5cdG11bHRpbGluZVZhcnMudGFyZ2V0S2V5ID0gcGFyYW1zLmtleTtcblx0aWYgKHBhcmFtcy5rZXkuZXhwbGljaXRBY2NpZGVudGFscylcblx0XHRkZWxldGUgcGFyYW1zLmtleS5leHBsaWNpdEFjY2lkZW50YWxzO1xuXHRwYXJzZUtleVZvaWNlLmFkZFBvc1RvS2V5KHBhcmFtcy5jbGVmLCBwYXJhbXMua2V5KTtcblx0aWYgKG11bHRpbGluZVZhcnMubWV0ZXIgIT09IG51bGwpIHtcblx0XHRpZiAobXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2UpIHtcblx0XHRcdG11bHRpbGluZVZhcnMuc3RhdmVzLmZvckVhY2goZnVuY3Rpb24oc3QpIHtcblx0XHRcdFx0c3QubWV0ZXIgPSBtdWx0aWxpbmVWYXJzLm1ldGVyO1xuXHRcdFx0fSk7XG5cdFx0XHRwYXJhbXMubWV0ZXIgPSBtdWx0aWxpbmVWYXJzLnN0YXZlc1ttdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZS5zdGFmZk51bV0ubWV0ZXI7XG5cdFx0XHRtdWx0aWxpbmVWYXJzLnN0YXZlc1ttdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZS5zdGFmZk51bV0ubWV0ZXIgPSBudWxsO1xuXHRcdH0gZWxzZVxuXHRcdFx0cGFyYW1zLm1ldGVyID0gbXVsdGlsaW5lVmFycy5tZXRlcjtcblx0XHRtdWx0aWxpbmVWYXJzLm1ldGVyID0gbnVsbDtcblx0fSBlbHNlIGlmIChtdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZSAmJiBtdWx0aWxpbmVWYXJzLnN0YXZlc1ttdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZS5zdGFmZk51bV0ubWV0ZXIpIHtcblx0XHQvLyBNYWtlIHN1cmUgdGhhdCBlYWNoIHZvaWNlIGdldHMgdGhlIG1ldGVyIG1hcmtpbmcuXG5cdFx0cGFyYW1zLm1ldGVyID0gbXVsdGlsaW5lVmFycy5zdGF2ZXNbbXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2Uuc3RhZmZOdW1dLm1ldGVyO1xuXHRcdG11bHRpbGluZVZhcnMuc3RhdmVzW211bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLnN0YWZmTnVtXS5tZXRlciA9IG51bGw7XG5cdH1cblx0aWYgKG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlICYmIG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLm5hbWUpXG5cdFx0cGFyYW1zLm5hbWUgPSBtdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZS5uYW1lO1xuXHRpZiAobXVsdGlsaW5lVmFycy52b2NhbGZvbnQpXG5cdFx0cGFyYW1zLnZvY2FsZm9udCA9IG11bHRpbGluZVZhcnMudm9jYWxmb250O1xuXHRpZiAobXVsdGlsaW5lVmFycy50cmlwbGV0Zm9udClcblx0XHRwYXJhbXMudHJpcGxldGZvbnQgPSBtdWx0aWxpbmVWYXJzLnRyaXBsZXRmb250O1xuXHRpZiAobXVsdGlsaW5lVmFycy5nY2hvcmRmb250KVxuXHRcdHBhcmFtcy5nY2hvcmRmb250ID0gbXVsdGlsaW5lVmFycy5nY2hvcmRmb250O1xuXHRpZiAobXVsdGlsaW5lVmFycy5zdHlsZSlcblx0XHRwYXJhbXMuc3R5bGUgPSBtdWx0aWxpbmVWYXJzLnN0eWxlO1xuXHRpZiAobXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2UpIHtcblx0XHR2YXIgc3RhZmYgPSBtdWx0aWxpbmVWYXJzLnN0YXZlc1ttdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZS5zdGFmZk51bV07XG5cdFx0aWYgKHN0YWZmLmJyYWNlKSBwYXJhbXMuYnJhY2UgPSBzdGFmZi5icmFjZTtcblx0XHRpZiAoc3RhZmYuYnJhY2tldCkgcGFyYW1zLmJyYWNrZXQgPSBzdGFmZi5icmFja2V0O1xuXHRcdGlmIChzdGFmZi5jb25uZWN0QmFyTGluZXMpIHBhcmFtcy5jb25uZWN0QmFyTGluZXMgPSBzdGFmZi5jb25uZWN0QmFyTGluZXM7XG5cdFx0aWYgKHN0YWZmLm5hbWUpIHBhcmFtcy5uYW1lID0gc3RhZmYubmFtZVttdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZS5pbmRleF07XG5cdFx0aWYgKHN0YWZmLnN1Ym5hbWUpIHBhcmFtcy5zdWJuYW1lID0gc3RhZmYuc3VibmFtZVttdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZS5pbmRleF07XG5cdFx0aWYgKG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLnN0ZW0pXG5cdFx0XHRwYXJhbXMuc3RlbSA9IG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLnN0ZW07XG5cdFx0aWYgKG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLnN0YWZmbGluZXMpXG5cdFx0XHRwYXJhbXMuc3RhZmZsaW5lcyA9IG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLnN0YWZmbGluZXM7XG5cdFx0aWYgKG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLnN0YWZmc2NhbGUpXG5cdFx0XHRwYXJhbXMuc3RhZmZzY2FsZSA9IG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLnN0YWZmc2NhbGU7XG5cdFx0aWYgKG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLnNjYWxlKVxuXHRcdFx0cGFyYW1zLnNjYWxlID0gbXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2Uuc2NhbGU7XG5cdFx0aWYgKG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLmNvbG9yKVxuXHRcdFx0cGFyYW1zLmNvbG9yID0gbXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2UuY29sb3I7XG5cdFx0aWYgKG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLnN0eWxlKVxuXHRcdFx0cGFyYW1zLnN0eWxlID0gbXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2Uuc3R5bGU7XG5cdFx0aWYgKG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLnRyYW5zcG9zZSlcblx0XHRcdHBhcmFtcy5jbGVmLnRyYW5zcG9zZSA9IG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLnRyYW5zcG9zZTtcblx0XHRwYXJhbXMuY3VycmVudFZvaWNlID0gbXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2Vcblx0XHR2YXIgdm9pY2VzID0gT2JqZWN0LmtleXMobXVsdGlsaW5lVmFycy52b2ljZXMpXG5cdFx0Zm9yICh2YXIgbXYgPSAwOyBtdiA8IHZvaWNlcy5sZW5ndGg7IG12KyspIHtcblx0XHRcdGlmIChwYXJhbXMuY3VycmVudFZvaWNlLnN0YWZmTnVtID09PSBtdWx0aWxpbmVWYXJzLnZvaWNlc1t2b2ljZXNbbXZdXS5zdGFmZk51bSAmJiBwYXJhbXMuY3VycmVudFZvaWNlLmluZGV4ID09PSBtdWx0aWxpbmVWYXJzLnZvaWNlc1t2b2ljZXNbbXZdXS5pbmRleClcblx0XHRcdFx0cGFyYW1zLmN1cnJlbnRWb2ljZU5hbWUgPSB2b2ljZXNbbXZdXG5cdFx0fVxuXHR9XG5cdGlmIChtdWx0aWxpbmVWYXJzLmJhck51bWJlcnMgPT09IDAgJiYgaXNGaXJzdFZvaWNlKCkgJiYgbXVsdGlsaW5lVmFycy5jdXJyQmFyTnVtYmVyICE9PSAxKVxuXHRcdHBhcmFtcy5iYXJOdW1iZXIgPSBtdWx0aWxpbmVWYXJzLmN1cnJCYXJOdW1iZXI7XG5cdHR1bmVCdWlsZGVyLnN0YXJ0TmV3TGluZShwYXJhbXMpO1xuXHRpZiAobXVsdGlsaW5lVmFycy5rZXkuaW1wbGllZE5hdHVyYWxzKVxuXHRcdGRlbGV0ZSBtdWx0aWxpbmVWYXJzLmtleS5pbXBsaWVkTmF0dXJhbHM7XG5cblx0bXVsdGlsaW5lVmFycy5wYXJ0Rm9yTmV4dExpbmUgPSB7fTtcblx0aWYgKG11bHRpbGluZVZhcnMudGVtcG9Gb3JOZXh0TGluZS5sZW5ndGggPT09IDQpXG5cdFx0dHVuZUJ1aWxkZXIuYXBwZW5kRWxlbWVudChtdWx0aWxpbmVWYXJzLnRlbXBvRm9yTmV4dExpbmVbMF0sbXVsdGlsaW5lVmFycy50ZW1wb0Zvck5leHRMaW5lWzFdLG11bHRpbGluZVZhcnMudGVtcG9Gb3JOZXh0TGluZVsyXSxtdWx0aWxpbmVWYXJzLnRlbXBvRm9yTmV4dExpbmVbM10pO1xuXHRtdWx0aWxpbmVWYXJzLnRlbXBvRm9yTmV4dExpbmUgPSBbXTtcbn1cblxuLy8gVE9ETy1QRVI6IG1ha2UgdGhpcyBhIG1ldGhvZCBpbiBlbC5cbnZhciBhZGRFbmRCZWFtID0gZnVuY3Rpb24oZWwpIHtcblx0aWYgKGVsLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgJiYgZWwuZHVyYXRpb24gPCAwLjI1KVxuXHRcdGVsLmVuZF9iZWFtID0gdHJ1ZTtcblx0cmV0dXJuIGVsO1xufTtcblxudmFyIGdldENvcmVOb3RlID0gZnVuY3Rpb24obGluZSwgaW5kZXgsIGVsLCBjYW5IYXZlQnJva2VuUmh5dGhtKSB7XG5cdC8vdmFyIGVsID0geyBzdGFydENoYXI6IGluZGV4IH07XG5cdHZhciBpc0NvbXBsZXRlID0gZnVuY3Rpb24oc3RhdGUpIHtcblx0XHRyZXR1cm4gKHN0YXRlID09PSAnb2N0YXZlJyB8fCBzdGF0ZSA9PT0gJ2R1cmF0aW9uJyB8fCBzdGF0ZSA9PT0gJ1pkdXJhdGlvbicgfHwgc3RhdGUgPT09ICdicm9rZW5fcmh5dGhtJyB8fCBzdGF0ZSA9PT0gJ2VuZF9zbHVyJyk7XG5cdH07XG5cdHZhciBkb3R0ZWRUaWU7XG5cdGlmIChsaW5lW2luZGV4XSA9PT0gJy4nICYmIGxpbmVbaW5kZXgrMV0gPT09ICctJykge1xuXHRcdGRvdHRlZFRpZSA9IHRydWU7XG5cdFx0aW5kZXgrKztcblx0fVxuXHR2YXIgc3RhdGUgPSAnc3RhcnRTbHVyJztcblx0dmFyIGR1cmF0aW9uU2V0QnlQcmV2aW91c05vdGUgPSBmYWxzZTtcblx0d2hpbGUgKDEpIHtcblx0XHRzd2l0Y2gobGluZVtpbmRleF0pIHtcblx0XHRcdGNhc2UgJygnOlxuXHRcdFx0XHRpZiAoc3RhdGUgPT09ICdzdGFydFNsdXInKSB7XG5cdFx0XHRcdFx0aWYgKGVsLnN0YXJ0U2x1ciA9PT0gdW5kZWZpbmVkKSBlbC5zdGFydFNsdXIgPSAxOyBlbHNlIGVsLnN0YXJ0U2x1cisrO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGlzQ29tcGxldGUoc3RhdGUpKSB7ZWwuZW5kQ2hhciA9IGluZGV4O3JldHVybiBlbDt9XG5cdFx0XHRcdGVsc2UgcmV0dXJuIG51bGw7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnKSc6XG5cdFx0XHRcdGlmIChpc0NvbXBsZXRlKHN0YXRlKSkge1xuXHRcdFx0XHRcdGlmIChlbC5lbmRTbHVyID09PSB1bmRlZmluZWQpIGVsLmVuZFNsdXIgPSAxOyBlbHNlIGVsLmVuZFNsdXIrKztcblx0XHRcdFx0fSBlbHNlIHJldHVybiBudWxsO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ14nOlxuXHRcdFx0XHRpZiAoc3RhdGUgPT09ICdzdGFydFNsdXInKSB7ZWwuYWNjaWRlbnRhbCA9ICdzaGFycCc7c3RhdGUgPSAnc2hhcnAyJzt9XG5cdFx0XHRcdGVsc2UgaWYgKHN0YXRlID09PSAnc2hhcnAyJykge2VsLmFjY2lkZW50YWwgPSAnZGJsc2hhcnAnO3N0YXRlID0gJ3BpdGNoJzt9XG5cdFx0XHRcdGVsc2UgaWYgKGlzQ29tcGxldGUoc3RhdGUpKSB7ZWwuZW5kQ2hhciA9IGluZGV4O3JldHVybiBlbDt9XG5cdFx0XHRcdGVsc2UgcmV0dXJuIG51bGw7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnXyc6XG5cdFx0XHRcdGlmIChzdGF0ZSA9PT0gJ3N0YXJ0U2x1cicpIHtlbC5hY2NpZGVudGFsID0gJ2ZsYXQnO3N0YXRlID0gJ2ZsYXQyJzt9XG5cdFx0XHRcdGVsc2UgaWYgKHN0YXRlID09PSAnZmxhdDInKSB7ZWwuYWNjaWRlbnRhbCA9ICdkYmxmbGF0JztzdGF0ZSA9ICdwaXRjaCc7fVxuXHRcdFx0XHRlbHNlIGlmIChpc0NvbXBsZXRlKHN0YXRlKSkge2VsLmVuZENoYXIgPSBpbmRleDtyZXR1cm4gZWw7fVxuXHRcdFx0XHRlbHNlIHJldHVybiBudWxsO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJz0nOlxuXHRcdFx0XHRpZiAoc3RhdGUgPT09ICdzdGFydFNsdXInKSB7ZWwuYWNjaWRlbnRhbCA9ICduYXR1cmFsJztzdGF0ZSA9ICdwaXRjaCc7fVxuXHRcdFx0XHRlbHNlIGlmIChpc0NvbXBsZXRlKHN0YXRlKSkge2VsLmVuZENoYXIgPSBpbmRleDtyZXR1cm4gZWw7fVxuXHRcdFx0XHRlbHNlIHJldHVybiBudWxsO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ0EnOlxuXHRcdFx0Y2FzZSAnQic6XG5cdFx0XHRjYXNlICdDJzpcblx0XHRcdGNhc2UgJ0QnOlxuXHRcdFx0Y2FzZSAnRSc6XG5cdFx0XHRjYXNlICdGJzpcblx0XHRcdGNhc2UgJ0cnOlxuXHRcdFx0Y2FzZSAnYSc6XG5cdFx0XHRjYXNlICdiJzpcblx0XHRcdGNhc2UgJ2MnOlxuXHRcdFx0Y2FzZSAnZCc6XG5cdFx0XHRjYXNlICdlJzpcblx0XHRcdGNhc2UgJ2YnOlxuXHRcdFx0Y2FzZSAnZyc6XG5cdFx0XHRcdGlmIChzdGF0ZSA9PT0gJ3N0YXJ0U2x1cicgfHwgc3RhdGUgPT09ICdzaGFycDInIHx8IHN0YXRlID09PSAnZmxhdDInIHx8IHN0YXRlID09PSAncGl0Y2gnKSB7XG5cdFx0XHRcdFx0ZWwucGl0Y2ggPSBwaXRjaGVzW2xpbmVbaW5kZXhdXTtcblx0XHRcdFx0XHRlbC5waXRjaCArPSA3ICogKG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlICYmIG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLm9jdGF2ZSAhPT0gdW5kZWZpbmVkID8gbXVsdGlsaW5lVmFycy5jdXJyZW50Vm9pY2Uub2N0YXZlIDogbXVsdGlsaW5lVmFycy5vY3RhdmUpO1xuXHRcdFx0XHRcdGVsLm5hbWUgPSBsaW5lW2luZGV4XTtcblx0XHRcdFx0XHRpZiAoZWwuYWNjaWRlbnRhbClcblx0XHRcdFx0XHRcdGVsLm5hbWUgPSBhY2NNYXBbZWwuYWNjaWRlbnRhbF0gKyBlbC5uYW1lO1xuXHRcdFx0XHRcdHRyYW5zcG9zZS5ub3RlKG11bHRpbGluZVZhcnMsIGVsKTtcblx0XHRcdFx0XHRzdGF0ZSA9ICdvY3RhdmUnO1xuXHRcdFx0XHRcdC8vIEF0IHRoaXMgcG9pbnQgd2UgaGF2ZSBhIHZhbGlkIG5vdGUuIFRoZSByZXN0IGlzIG9wdGlvbmFsLiBTZXQgdGhlIGR1cmF0aW9uIGluIGNhc2Ugd2UgZG9uJ3QgZ2V0IG9uZSBiZWxvd1xuXHRcdFx0XHRcdGlmIChjYW5IYXZlQnJva2VuUmh5dGhtICYmIG11bHRpbGluZVZhcnMubmV4dF9ub3RlX2R1cmF0aW9uICE9PSAwKSB7XG5cdFx0XHRcdFx0XHRlbC5kdXJhdGlvbiA9IG11bHRpbGluZVZhcnMuZGVmYXVsdF9sZW5ndGggKiBtdWx0aWxpbmVWYXJzLm5leHRfbm90ZV9kdXJhdGlvbjtcblx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMubmV4dF9ub3RlX2R1cmF0aW9uID0gMDtcblx0XHRcdFx0XHRcdGR1cmF0aW9uU2V0QnlQcmV2aW91c05vdGUgPSB0cnVlO1xuXHRcdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdFx0ZWwuZHVyYXRpb24gPSBtdWx0aWxpbmVWYXJzLmRlZmF1bHRfbGVuZ3RoO1xuXHRcdFx0XHRcdC8vIElmIHRoZSBjbGVmIGlzIHBlcmN1c3Npb24sIHRoZXJlIGlzIHByb2JhYmx5IHNvbWUgdHJhbnNsYXRpb24gb2YgdGhlIHBpdGNoIHRvIGEgcGFydGljdWxhciBkcnVtIGtpdCBpdGVtLlxuXHRcdFx0XHRcdGlmICgobXVsdGlsaW5lVmFycy5jbGVmICYmIG11bHRpbGluZVZhcnMuY2xlZi50eXBlID09PSBcInBlcmNcIikgfHxcblx0XHRcdFx0XHRcdChtdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZSAmJiBtdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZS5jbGVmID09PSBcInBlcmNcIikpIHtcblx0XHRcdFx0XHRcdHZhciBrZXkgPSBsaW5lW2luZGV4XTtcblx0XHRcdFx0XHRcdGlmIChlbC5hY2NpZGVudGFsKSB7XG5cdFx0XHRcdFx0XHRcdGtleSA9IGFjY01hcFtlbC5hY2NpZGVudGFsXSArIGtleTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICh0dW5lLmZvcm1hdHRpbmcgJiYgdHVuZS5mb3JtYXR0aW5nLm1pZGkgJiYgdHVuZS5mb3JtYXR0aW5nLm1pZGkuZHJ1bW1hcClcblx0XHRcdFx0XHRcdGVsLm1pZGlwaXRjaCA9IHR1bmUuZm9ybWF0dGluZy5taWRpLmRydW1tYXBba2V5XTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZiAoaXNDb21wbGV0ZShzdGF0ZSkpIHtlbC5lbmRDaGFyID0gaW5kZXg7cmV0dXJuIGVsO31cblx0XHRcdFx0ZWxzZSByZXR1cm4gbnVsbDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICcsJzpcblx0XHRcdFx0aWYgKHN0YXRlID09PSAnb2N0YXZlJykge2VsLnBpdGNoIC09IDc7IGVsLm5hbWUgKz0gJywnOyB9XG5cdFx0XHRcdGVsc2UgaWYgKGlzQ29tcGxldGUoc3RhdGUpKSB7ZWwuZW5kQ2hhciA9IGluZGV4O3JldHVybiBlbDt9XG5cdFx0XHRcdGVsc2UgcmV0dXJuIG51bGw7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnXFwnJzpcblx0XHRcdFx0aWYgKHN0YXRlID09PSAnb2N0YXZlJykge2VsLnBpdGNoICs9IDc7IGVsLm5hbWUgKz0gXCInXCI7ICB9XG5cdFx0XHRcdGVsc2UgaWYgKGlzQ29tcGxldGUoc3RhdGUpKSB7ZWwuZW5kQ2hhciA9IGluZGV4O3JldHVybiBlbDt9XG5cdFx0XHRcdGVsc2UgcmV0dXJuIG51bGw7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAneCc6XG5cdFx0XHRjYXNlICdYJzpcblx0XHRcdGNhc2UgJ3knOlxuXHRcdFx0Y2FzZSAneic6XG5cdFx0XHRjYXNlICdaJzpcblx0XHRcdFx0aWYgKHN0YXRlID09PSAnc3RhcnRTbHVyJykge1xuXHRcdFx0XHRcdGVsLnJlc3QgPSB7IHR5cGU6IHJlc3RzW2xpbmVbaW5kZXhdXSB9O1xuXHRcdFx0XHRcdC8vIFRoZXJlIHNob3VsZG4ndCBiZSBzb21lIG9mIHRoZSBwcm9wZXJ0aWVzIHRoYXQgbm90ZXMgaGF2ZS4gSWYgc29tZSBzbmVhayBpbiBkdWUgdG8gYmFkIHN5bnRheCBpbiB0aGUgYWJjIGZpbGUsXG5cdFx0XHRcdFx0Ly8ganVzdCBuaXggdGhlbSBoZXJlLlxuXHRcdFx0XHRcdGRlbGV0ZSBlbC5hY2NpZGVudGFsO1xuXHRcdFx0XHRcdGRlbGV0ZSBlbC5zdGFydFNsdXI7XG5cdFx0XHRcdFx0ZGVsZXRlIGVsLnN0YXJ0VGllO1xuXHRcdFx0XHRcdGRlbGV0ZSBlbC5lbmRTbHVyO1xuXHRcdFx0XHRcdGRlbGV0ZSBlbC5lbmRUaWU7XG5cdFx0XHRcdFx0ZGVsZXRlIGVsLmVuZF9iZWFtO1xuXHRcdFx0XHRcdGRlbGV0ZSBlbC5ncmFjZV9ub3Rlcztcblx0XHRcdFx0XHQvLyBBdCB0aGlzIHBvaW50IHdlIGhhdmUgYSB2YWxpZCBub3RlLiBUaGUgcmVzdCBpcyBvcHRpb25hbC4gU2V0IHRoZSBkdXJhdGlvbiBpbiBjYXNlIHdlIGRvbid0IGdldCBvbmUgYmVsb3dcblx0XHRcdFx0XHRpZiAoZWwucmVzdC50eXBlLmluZGV4T2YoJ211bHRpbWVhc3VyZScpID49IDApIHtcblx0XHRcdFx0XHRcdGVsLmR1cmF0aW9uID0gdHVuZS5nZXRCYXJMZW5ndGgoKTtcblx0XHRcdFx0XHRcdGVsLnJlc3QudGV4dCA9IDE7XG5cdFx0XHRcdFx0XHRzdGF0ZSA9ICdaZHVyYXRpb24nO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRpZiAoY2FuSGF2ZUJyb2tlblJoeXRobSAmJiBtdWx0aWxpbmVWYXJzLm5leHRfbm90ZV9kdXJhdGlvbiAhPT0gMCkge1xuXHRcdFx0XHRcdFx0XHRlbC5kdXJhdGlvbiA9IG11bHRpbGluZVZhcnMuZGVmYXVsdF9sZW5ndGggKiBtdWx0aWxpbmVWYXJzLm5leHRfbm90ZV9kdXJhdGlvbjtcblx0XHRcdFx0XHRcdFx0bXVsdGlsaW5lVmFycy5uZXh0X25vdGVfZHVyYXRpb24gPSAwO1xuXHRcdFx0XHRcdFx0XHRkdXJhdGlvblNldEJ5UHJldmlvdXNOb3RlID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdFx0XHRlbC5kdXJhdGlvbiA9IG11bHRpbGluZVZhcnMuZGVmYXVsdF9sZW5ndGg7XG5cdFx0XHRcdFx0XHRzdGF0ZSA9ICdkdXJhdGlvbic7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKGlzQ29tcGxldGUoc3RhdGUpKSB7ZWwuZW5kQ2hhciA9IGluZGV4O3JldHVybiBlbDt9XG5cdFx0XHRcdGVsc2UgcmV0dXJuIG51bGw7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnMSc6XG5cdFx0XHRjYXNlICcyJzpcblx0XHRcdGNhc2UgJzMnOlxuXHRcdFx0Y2FzZSAnNCc6XG5cdFx0XHRjYXNlICc1Jzpcblx0XHRcdGNhc2UgJzYnOlxuXHRcdFx0Y2FzZSAnNyc6XG5cdFx0XHRjYXNlICc4Jzpcblx0XHRcdGNhc2UgJzknOlxuXHRcdFx0Y2FzZSAnMCc6XG5cdFx0XHRjYXNlICcvJzpcblx0XHRcdFx0aWYgKHN0YXRlID09PSAnb2N0YXZlJyB8fCBzdGF0ZSA9PT0gJ2R1cmF0aW9uJykge1xuXHRcdFx0XHRcdHZhciBmcmFjdGlvbiA9IHRva2VuaXplci5nZXRGcmFjdGlvbihsaW5lLCBpbmRleCk7XG5cdFx0XHRcdFx0Ly9pZiAoIWR1cmF0aW9uU2V0QnlQcmV2aW91c05vdGUpXG5cdFx0XHRcdFx0ZWwuZHVyYXRpb24gPSBlbC5kdXJhdGlvbiAqIGZyYWN0aW9uLnZhbHVlO1xuXHRcdFx0XHRcdC8vIFRPRE8tUEVSOiBXZSBjYW4gdGVzdCB0aGUgcmV0dXJuZWQgZHVyYXRpb24gaGVyZSBhbmQgZ2l2ZSBhIHdhcm5pbmcgaWYgaXQgaXNuJ3QgdGhlIG9uZSBleHBlY3RlZC5cblx0XHRcdFx0XHRlbC5lbmRDaGFyID0gZnJhY3Rpb24uaW5kZXg7XG5cdFx0XHRcdFx0d2hpbGUgKGZyYWN0aW9uLmluZGV4IDwgbGluZS5sZW5ndGggJiYgKHRva2VuaXplci5pc1doaXRlU3BhY2UobGluZVtmcmFjdGlvbi5pbmRleF0pIHx8IGxpbmVbZnJhY3Rpb24uaW5kZXhdID09PSAnLScpKSB7XG5cdFx0XHRcdFx0XHRpZiAobGluZVtmcmFjdGlvbi5pbmRleF0gPT09ICctJylcblx0XHRcdFx0XHRcdFx0ZWwuc3RhcnRUaWUgPSB7fTtcblx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdFx0ZWwgPSBhZGRFbmRCZWFtKGVsKTtcblx0XHRcdFx0XHRcdGZyYWN0aW9uLmluZGV4Kys7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGluZGV4ID0gZnJhY3Rpb24uaW5kZXgtMTtcblx0XHRcdFx0XHRzdGF0ZSA9ICdicm9rZW5fcmh5dGhtJztcblx0XHRcdFx0fSBlbHNlIGlmIChzdGF0ZSA9PT0gJ3NoYXJwMicpIHtcblx0XHRcdFx0XHRlbC5hY2NpZGVudGFsID0gJ3F1YXJ0ZXJzaGFycCc7c3RhdGUgPSAncGl0Y2gnO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHN0YXRlID09PSAnZmxhdDInKSB7XG5cdFx0XHRcdFx0ZWwuYWNjaWRlbnRhbCA9ICdxdWFydGVyZmxhdCc7c3RhdGUgPSAncGl0Y2gnO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHN0YXRlID09PSAnWmR1cmF0aW9uJykge1xuXHRcdFx0XHRcdHZhciBudW0gPSB0b2tlbml6ZXIuZ2V0TnVtYmVyKGxpbmUsIGluZGV4KTtcblx0XHRcdFx0XHRlbC5kdXJhdGlvbiA9IG51bS5udW0gKiB0dW5lLmdldEJhckxlbmd0aCgpO1xuXHRcdFx0XHRcdGVsLnJlc3QudGV4dCA9IG51bS5udW07XG5cdFx0XHRcdFx0ZWwuZW5kQ2hhciA9IG51bS5pbmRleDtcblx0XHRcdFx0XHRyZXR1cm4gZWw7XG5cdFx0XHRcdH0gZWxzZSByZXR1cm4gbnVsbDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICctJzpcblx0XHRcdFx0aWYgKHN0YXRlID09PSAnc3RhcnRTbHVyJykge1xuXHRcdFx0XHRcdC8vIFRoaXMgaXMgdGhlIGZpcnN0IGNoYXJhY3Rlciwgc28gaXQgbXVzdCBoYXZlIGJlZW4gbWVhbnQgZm9yIHRoZSBwcmV2aW91cyBub3RlLiBDb3JyZWN0IHRoYXQgaGVyZS5cblx0XHRcdFx0XHR0dW5lQnVpbGRlci5hZGRUaWVUb0xhc3ROb3RlKGRvdHRlZFRpZSk7XG5cdFx0XHRcdFx0ZWwuZW5kVGllID0gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIGlmIChzdGF0ZSA9PT0gJ29jdGF2ZScgfHwgc3RhdGUgPT09ICdkdXJhdGlvbicgfHwgc3RhdGUgPT09ICdlbmRfc2x1cicpIHtcblx0XHRcdFx0XHRlbC5zdGFydFRpZSA9IHt9O1xuXHRcdFx0XHRcdGlmICghZHVyYXRpb25TZXRCeVByZXZpb3VzTm90ZSAmJiBjYW5IYXZlQnJva2VuUmh5dGhtKVxuXHRcdFx0XHRcdFx0c3RhdGUgPSAnYnJva2VuX3JoeXRobSc7XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBQZWVrIGFoZWFkIHRvIHRoZSBuZXh0IGNoYXJhY3Rlci4gSWYgaXQgaXMgYSBzcGFjZSwgdGhlbiB3ZSBoYXZlIGFuIGVuZCBiZWFtLlxuXHRcdFx0XHRcdFx0aWYgKHRva2VuaXplci5pc1doaXRlU3BhY2UobGluZVtpbmRleCArIDFdKSlcblx0XHRcdFx0XHRcdFx0YWRkRW5kQmVhbShlbCk7XG5cdFx0XHRcdFx0XHRlbC5lbmRDaGFyID0gaW5kZXgrMTtcblx0XHRcdFx0XHRcdHJldHVybiBlbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZiAoc3RhdGUgPT09ICdicm9rZW5fcmh5dGhtJykge2VsLmVuZENoYXIgPSBpbmRleDtyZXR1cm4gZWw7fVxuXHRcdFx0XHRlbHNlIHJldHVybiBudWxsO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJyAnOlxuXHRcdFx0Y2FzZSAnXFx0Jzpcblx0XHRcdFx0aWYgKGlzQ29tcGxldGUoc3RhdGUpKSB7XG5cdFx0XHRcdFx0ZWwuZW5kX2JlYW0gPSB0cnVlO1xuXHRcdFx0XHRcdC8vIGxvb2sgYWhlYWQgdG8gc2VlIGlmIHRoZXJlIGlzIGEgdGllXG5cdFx0XHRcdFx0ZG90dGVkVGllID0gZmFsc2U7XG5cdFx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdFx0aWYgKGxpbmVbaW5kZXhdID09PSAnLicgJiYgbGluZVtpbmRleCsxXSA9PT0gJy0nKSB7XG5cdFx0XHRcdFx0XHRcdGRvdHRlZFRpZSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAobGluZVtpbmRleF0gPT09ICctJykge1xuXHRcdFx0XHRcdFx0XHRlbC5zdGFydFRpZSA9IHt9O1xuXHRcdFx0XHRcdFx0XHRpZiAoZG90dGVkVGllKVxuXHRcdFx0XHRcdFx0XHRcdGVsLnN0YXJ0VGllLnN0eWxlID0gXCJkb3R0ZWRcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdFx0fSB3aGlsZSAoaW5kZXggPCBsaW5lLmxlbmd0aCAmJlxuXHRcdFx0XHRcdFx0KHRva2VuaXplci5pc1doaXRlU3BhY2UobGluZVtpbmRleF0pIHx8IGxpbmVbaW5kZXhdID09PSAnLScpIHx8XG5cdFx0XHRcdFx0XHQobGluZVtpbmRleF0gPT09ICcuJyAmJiBsaW5lW2luZGV4KzFdID09PSAnLScpKTtcblx0XHRcdFx0XHRlbC5lbmRDaGFyID0gaW5kZXg7XG5cdFx0XHRcdFx0aWYgKCFkdXJhdGlvblNldEJ5UHJldmlvdXNOb3RlICYmIGNhbkhhdmVCcm9rZW5SaHl0aG0gJiYgKGxpbmVbaW5kZXhdID09PSAnPCcgfHwgbGluZVtpbmRleF0gPT09ICc+JykpIHtcdC8vIFRPRE8tUEVSOiBEb24ndCBuZWVkIHRoZSB0ZXN0IGZvciA8IGFuZCA+LCBidXQgdGhhdCBtYWtlcyB0aGUgZW5kQ2hhciB3b3JrIG91dCBmb3IgdGhlIHJlZ3Jlc3Npb24gdGVzdC5cblx0XHRcdFx0XHRcdGluZGV4LS07XG5cdFx0XHRcdFx0XHRzdGF0ZSA9ICdicm9rZW5fcmh5dGhtJztcblx0XHRcdFx0XHR9IGVsc2Vcblx0XHRcdFx0XHRcdHJldHVybiBlbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHJldHVybiBudWxsO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJz4nOlxuXHRcdFx0Y2FzZSAnPCc6XG5cdFx0XHRcdGlmIChpc0NvbXBsZXRlKHN0YXRlKSkge1xuXHRcdFx0XHRcdGlmIChjYW5IYXZlQnJva2VuUmh5dGhtKSB7XG5cdFx0XHRcdFx0XHR2YXIgYnIyID0gZ2V0QnJva2VuUmh5dGhtKGxpbmUsIGluZGV4KTtcblx0XHRcdFx0XHRcdGluZGV4ICs9IGJyMlswXSAtIDE7XHQvLyBpbmRleCBnZXRzIGluY3JlbWVudGVkIGJlbG93LCBzbyB3ZSdsbCBsZXQgdGhhdCBoYXBwZW5cblx0XHRcdFx0XHRcdG11bHRpbGluZVZhcnMubmV4dF9ub3RlX2R1cmF0aW9uID0gYnIyWzJdO1xuXHRcdFx0XHRcdFx0ZWwuZHVyYXRpb24gPSBicjJbMV0qZWwuZHVyYXRpb247XG5cdFx0XHRcdFx0XHRzdGF0ZSA9ICdlbmRfc2x1cic7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGVsLmVuZENoYXIgPSBpbmRleDtcblx0XHRcdFx0XHRcdHJldHVybiBlbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGlmIChpc0NvbXBsZXRlKHN0YXRlKSkge1xuXHRcdFx0XHRcdGVsLmVuZENoYXIgPSBpbmRleDtcblx0XHRcdFx0XHRyZXR1cm4gZWw7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdGluZGV4Kys7XG5cdFx0aWYgKGluZGV4ID09PSBsaW5lLmxlbmd0aCkge1xuXHRcdFx0aWYgKGlzQ29tcGxldGUoc3RhdGUpKSB7ZWwuZW5kQ2hhciA9IGluZGV4O3JldHVybiBlbDt9XG5cdFx0XHRlbHNlIHJldHVybiBudWxsO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gbnVsbDtcbn07XG5cbnZhciBnZXRCcm9rZW5SaHl0aG0gPSBmdW5jdGlvbihsaW5lLCBpbmRleCkge1xuXHRzd2l0Y2ggKGxpbmVbaW5kZXhdKSB7XG5cdFx0Y2FzZSAnPic6XG5cdFx0XHRpZiAoaW5kZXggPCBsaW5lLmxlbmd0aCAtIDIgJiYgbGluZVtpbmRleCArIDFdID09PSAnPicgJiYgbGluZVtpbmRleCArIDJdID09PSAnPicpXHQvLyB0cmlwbGUgPj4+XG5cdFx0XHRcdHJldHVybiBbMywgMS44NzUsIDAuMTI1XTtcblx0XHRcdGVsc2UgaWYgKGluZGV4IDwgbGluZS5sZW5ndGggLSAxICYmIGxpbmVbaW5kZXggKyAxXSA9PT0gJz4nKVx0Ly8gZG91YmxlID4+XG5cdFx0XHRcdHJldHVybiBbMiwgMS43NSwgMC4yNV07XG5cdFx0XHRlbHNlXG5cdFx0XHRcdHJldHVybiBbMSwgMS41LCAwLjVdO1xuXHRcdGNhc2UgJzwnOlxuXHRcdFx0aWYgKGluZGV4IDwgbGluZS5sZW5ndGggLSAyICYmIGxpbmVbaW5kZXggKyAxXSA9PT0gJzwnICYmIGxpbmVbaW5kZXggKyAyXSA9PT0gJzwnKVx0Ly8gdHJpcGxlIDw8PFxuXHRcdFx0XHRyZXR1cm4gWzMsIDAuMTI1LCAxLjg3NV07XG5cdFx0XHRlbHNlIGlmIChpbmRleCA8IGxpbmUubGVuZ3RoIC0gMSAmJiBsaW5lW2luZGV4ICsgMV0gPT09ICc8JylcdC8vIGRvdWJsZSA8PFxuXHRcdFx0XHRyZXR1cm4gWzIsIDAuMjUsIDEuNzVdO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHRyZXR1cm4gWzEsIDAuNSwgMS41XTtcblx0fVxuXHRyZXR1cm4gbnVsbDtcbn07XG5cbmZ1bmN0aW9uIGlzRmlyc3RWb2ljZSgpIHtcblx0cmV0dXJuIG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlID09PSB1bmRlZmluZWQgfHwgKG11bHRpbGluZVZhcnMuY3VycmVudFZvaWNlLnN0YWZmTnVtID09PSAgMCAmJiBtdWx0aWxpbmVWYXJzLmN1cnJlbnRWb2ljZS5pbmRleCA9PT0gIDApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE11c2ljUGFyc2VyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/parse/abc_parse_music.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/parse/abc_parse_settings.js":
/*!************************************************************!*\
  !*** ./node_modules/abcjs/src/parse/abc_parse_settings.js ***!
  \************************************************************/
/***/ ((module) => {

eval("module.exports.legalAccents = [\n  'trill',\n  'trillh',\n  'lowermordent',\n  'uppermordent',\n  'mordent',\n  'pralltriller',\n  'accent',\n  'fermata',\n  'invertedfermata',\n  'tenuto',\n  '0',\n  '1',\n  '2',\n  '3',\n  '4',\n  '5',\n  '+',\n  'wedge',\n  'open',\n  'thumb',\n  'snap',\n  'turn',\n  'roll',\n  'breath',\n  'shortphrase',\n  'mediumphrase',\n  'longphrase',\n  'segno',\n  'coda',\n  'D.S.',\n  'D.C.',\n  'fine',\n  'beambr1',\n  'beambr2',\n  'slide',\n  'marcato',\n  'upbow',\n  'downbow',\n  '/',\n  '//',\n  '///',\n  '////',\n  'trem1',\n  'trem2',\n  'trem3',\n  'trem4',\n  'turnx',\n  'invertedturn',\n  'invertedturnx',\n  'trill(',\n  'trill)',\n  'arpeggio',\n  'xstem',\n  'mark',\n  'umarcato',\n  'style=normal',\n  'style=harmonic',\n  'style=rhythm',\n  'style=x',\n  'style=triangle',\n  'D.C.alcoda',\n  'D.C.alfine',\n  'D.S.alcoda',\n  'D.S.alfine',\n  'editorial',\n  'courtesy'\n];\n\nmodule.exports.volumeDecorations = [\n  'p',\n  'pp',\n  'f',\n  'ff',\n  'mf',\n  'mp',\n  'ppp',\n  'pppp',\n  'fff',\n  'ffff',\n  'sfz'\n];\n\nmodule.exports.dynamicDecorations = [\n  'crescendo(',\n  'crescendo)',\n  'diminuendo(',\n  'diminuendo)',\n  'glissando(',\n  'glissando)',\n  '~(',\n  '~)'\n];\n\nmodule.exports.accentPseudonyms = [\n  ['<', 'accent'],\n  ['>', 'accent'],\n  ['tr', 'trill'],\n  ['plus', '+'],\n  ['emphasis', 'accent'],\n  ['^', 'umarcato'],\n  ['marcato', 'umarcato']\n];\n\nmodule.exports.accentDynamicPseudonyms = [\n  ['<(', 'crescendo('],\n  ['<)', 'crescendo)'],\n  ['>(', 'diminuendo('],\n  ['>)', 'diminuendo)']\n];\n\nmodule.exports.nonDecorations = 'ABCDEFGabcdefgxyzZ[]|^_{'; // use this to prescreen so we don't have to look for a decoration at every note.\n\nmodule.exports.durations = [\n  0.5, 0.75, 0.875, 0.9375, 0.96875, 0.984375, 0.25, 0.375, 0.4375, 0.46875,\n  0.484375, 0.4921875, 0.125, 0.1875, 0.21875, 0.234375, 0.2421875, 0.24609375,\n  0.0625, 0.09375, 0.109375, 0.1171875, 0.12109375, 0.123046875, 0.03125,\n  0.046875, 0.0546875, 0.05859375, 0.060546875, 0.0615234375, 0.015625,\n  0.0234375, 0.02734375, 0.029296875, 0.0302734375, 0.03076171875\n];\n\nmodule.exports.pitches = {\n  A: 5,\n  B: 6,\n  C: 0,\n  D: 1,\n  E: 2,\n  F: 3,\n  G: 4,\n  a: 12,\n  b: 13,\n  c: 7,\n  d: 8,\n  e: 9,\n  f: 10,\n  g: 11\n};\n\nmodule.exports.rests = {\n  x: 'invisible',\n  X: 'invisible-multimeasure',\n  y: 'spacer',\n  z: 'rest',\n  Z: 'multimeasure'\n};\n\nmodule.exports.accMap = {\n  dblflat: '__',\n  flat: '_',\n  natural: '=',\n  sharp: '^',\n  dblsharp: '^^',\n  quarterflat: '_/',\n  quartersharp: '^/'\n};\n\nmodule.exports.tripletQ = {\n  2: 3,\n  3: 2,\n  4: 3,\n  5: 2, // TODO-PER: not handling 6/8 rhythm yet\n  6: 2,\n  7: 2, // TODO-PER: not handling 6/8 rhythm yet\n  8: 3,\n  9: 2 // TODO-PER: not handling 6/8 rhythm yet\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL2FiY19wYXJzZV9zZXR0aW5ncy5qcyIsIm1hcHBpbmdzIjoiQUFBQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDZCQUE2Qiw0QkFBNEIsR0FBRzs7QUFFNUQsd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy9wYXJzZS9hYmNfcGFyc2Vfc2V0dGluZ3MuanM/M2IwZiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cy5sZWdhbEFjY2VudHMgPSBbXG4gICd0cmlsbCcsXG4gICd0cmlsbGgnLFxuICAnbG93ZXJtb3JkZW50JyxcbiAgJ3VwcGVybW9yZGVudCcsXG4gICdtb3JkZW50JyxcbiAgJ3ByYWxsdHJpbGxlcicsXG4gICdhY2NlbnQnLFxuICAnZmVybWF0YScsXG4gICdpbnZlcnRlZGZlcm1hdGEnLFxuICAndGVudXRvJyxcbiAgJzAnLFxuICAnMScsXG4gICcyJyxcbiAgJzMnLFxuICAnNCcsXG4gICc1JyxcbiAgJysnLFxuICAnd2VkZ2UnLFxuICAnb3BlbicsXG4gICd0aHVtYicsXG4gICdzbmFwJyxcbiAgJ3R1cm4nLFxuICAncm9sbCcsXG4gICdicmVhdGgnLFxuICAnc2hvcnRwaHJhc2UnLFxuICAnbWVkaXVtcGhyYXNlJyxcbiAgJ2xvbmdwaHJhc2UnLFxuICAnc2Vnbm8nLFxuICAnY29kYScsXG4gICdELlMuJyxcbiAgJ0QuQy4nLFxuICAnZmluZScsXG4gICdiZWFtYnIxJyxcbiAgJ2JlYW1icjInLFxuICAnc2xpZGUnLFxuICAnbWFyY2F0bycsXG4gICd1cGJvdycsXG4gICdkb3duYm93JyxcbiAgJy8nLFxuICAnLy8nLFxuICAnLy8vJyxcbiAgJy8vLy8nLFxuICAndHJlbTEnLFxuICAndHJlbTInLFxuICAndHJlbTMnLFxuICAndHJlbTQnLFxuICAndHVybngnLFxuICAnaW52ZXJ0ZWR0dXJuJyxcbiAgJ2ludmVydGVkdHVybngnLFxuICAndHJpbGwoJyxcbiAgJ3RyaWxsKScsXG4gICdhcnBlZ2dpbycsXG4gICd4c3RlbScsXG4gICdtYXJrJyxcbiAgJ3VtYXJjYXRvJyxcbiAgJ3N0eWxlPW5vcm1hbCcsXG4gICdzdHlsZT1oYXJtb25pYycsXG4gICdzdHlsZT1yaHl0aG0nLFxuICAnc3R5bGU9eCcsXG4gICdzdHlsZT10cmlhbmdsZScsXG4gICdELkMuYWxjb2RhJyxcbiAgJ0QuQy5hbGZpbmUnLFxuICAnRC5TLmFsY29kYScsXG4gICdELlMuYWxmaW5lJyxcbiAgJ2VkaXRvcmlhbCcsXG4gICdjb3VydGVzeSdcbl07XG5cbm1vZHVsZS5leHBvcnRzLnZvbHVtZURlY29yYXRpb25zID0gW1xuICAncCcsXG4gICdwcCcsXG4gICdmJyxcbiAgJ2ZmJyxcbiAgJ21mJyxcbiAgJ21wJyxcbiAgJ3BwcCcsXG4gICdwcHBwJyxcbiAgJ2ZmZicsXG4gICdmZmZmJyxcbiAgJ3Nmeidcbl07XG5cbm1vZHVsZS5leHBvcnRzLmR5bmFtaWNEZWNvcmF0aW9ucyA9IFtcbiAgJ2NyZXNjZW5kbygnLFxuICAnY3Jlc2NlbmRvKScsXG4gICdkaW1pbnVlbmRvKCcsXG4gICdkaW1pbnVlbmRvKScsXG4gICdnbGlzc2FuZG8oJyxcbiAgJ2dsaXNzYW5kbyknLFxuICAnfignLFxuICAnfiknXG5dO1xuXG5tb2R1bGUuZXhwb3J0cy5hY2NlbnRQc2V1ZG9ueW1zID0gW1xuICBbJzwnLCAnYWNjZW50J10sXG4gIFsnPicsICdhY2NlbnQnXSxcbiAgWyd0cicsICd0cmlsbCddLFxuICBbJ3BsdXMnLCAnKyddLFxuICBbJ2VtcGhhc2lzJywgJ2FjY2VudCddLFxuICBbJ14nLCAndW1hcmNhdG8nXSxcbiAgWydtYXJjYXRvJywgJ3VtYXJjYXRvJ11cbl07XG5cbm1vZHVsZS5leHBvcnRzLmFjY2VudER5bmFtaWNQc2V1ZG9ueW1zID0gW1xuICBbJzwoJywgJ2NyZXNjZW5kbygnXSxcbiAgWyc8KScsICdjcmVzY2VuZG8pJ10sXG4gIFsnPignLCAnZGltaW51ZW5kbygnXSxcbiAgWyc+KScsICdkaW1pbnVlbmRvKSddXG5dO1xuXG5tb2R1bGUuZXhwb3J0cy5ub25EZWNvcmF0aW9ucyA9ICdBQkNERUZHYWJjZGVmZ3h5elpbXXxeX3snOyAvLyB1c2UgdGhpcyB0byBwcmVzY3JlZW4gc28gd2UgZG9uJ3QgaGF2ZSB0byBsb29rIGZvciBhIGRlY29yYXRpb24gYXQgZXZlcnkgbm90ZS5cblxubW9kdWxlLmV4cG9ydHMuZHVyYXRpb25zID0gW1xuICAwLjUsIDAuNzUsIDAuODc1LCAwLjkzNzUsIDAuOTY4NzUsIDAuOTg0Mzc1LCAwLjI1LCAwLjM3NSwgMC40Mzc1LCAwLjQ2ODc1LFxuICAwLjQ4NDM3NSwgMC40OTIxODc1LCAwLjEyNSwgMC4xODc1LCAwLjIxODc1LCAwLjIzNDM3NSwgMC4yNDIxODc1LCAwLjI0NjA5Mzc1LFxuICAwLjA2MjUsIDAuMDkzNzUsIDAuMTA5Mzc1LCAwLjExNzE4NzUsIDAuMTIxMDkzNzUsIDAuMTIzMDQ2ODc1LCAwLjAzMTI1LFxuICAwLjA0Njg3NSwgMC4wNTQ2ODc1LCAwLjA1ODU5Mzc1LCAwLjA2MDU0Njg3NSwgMC4wNjE1MjM0Mzc1LCAwLjAxNTYyNSxcbiAgMC4wMjM0Mzc1LCAwLjAyNzM0Mzc1LCAwLjAyOTI5Njg3NSwgMC4wMzAyNzM0Mzc1LCAwLjAzMDc2MTcxODc1XG5dO1xuXG5tb2R1bGUuZXhwb3J0cy5waXRjaGVzID0ge1xuICBBOiA1LFxuICBCOiA2LFxuICBDOiAwLFxuICBEOiAxLFxuICBFOiAyLFxuICBGOiAzLFxuICBHOiA0LFxuICBhOiAxMixcbiAgYjogMTMsXG4gIGM6IDcsXG4gIGQ6IDgsXG4gIGU6IDksXG4gIGY6IDEwLFxuICBnOiAxMVxufTtcblxubW9kdWxlLmV4cG9ydHMucmVzdHMgPSB7XG4gIHg6ICdpbnZpc2libGUnLFxuICBYOiAnaW52aXNpYmxlLW11bHRpbWVhc3VyZScsXG4gIHk6ICdzcGFjZXInLFxuICB6OiAncmVzdCcsXG4gIFo6ICdtdWx0aW1lYXN1cmUnXG59O1xuXG5tb2R1bGUuZXhwb3J0cy5hY2NNYXAgPSB7XG4gIGRibGZsYXQ6ICdfXycsXG4gIGZsYXQ6ICdfJyxcbiAgbmF0dXJhbDogJz0nLFxuICBzaGFycDogJ14nLFxuICBkYmxzaGFycDogJ15eJyxcbiAgcXVhcnRlcmZsYXQ6ICdfLycsXG4gIHF1YXJ0ZXJzaGFycDogJ14vJ1xufTtcblxubW9kdWxlLmV4cG9ydHMudHJpcGxldFEgPSB7XG4gIDI6IDMsXG4gIDM6IDIsXG4gIDQ6IDMsXG4gIDU6IDIsIC8vIFRPRE8tUEVSOiBub3QgaGFuZGxpbmcgNi84IHJoeXRobSB5ZXRcbiAgNjogMixcbiAgNzogMiwgLy8gVE9ETy1QRVI6IG5vdCBoYW5kbGluZyA2Lzggcmh5dGhtIHlldFxuICA4OiAzLFxuICA5OiAyIC8vIFRPRE8tUEVSOiBub3QgaGFuZGxpbmcgNi84IHJoeXRobSB5ZXRcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/parse/abc_parse_settings.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/parse/abc_tokenizer.js":
/*!*******************************************************!*\
  !*** ./node_modules/abcjs/src/parse/abc_tokenizer.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_tokenizer.js: tokenizes an ABC Music Notation string to support abc_parse.\n\nvar parseCommon = __webpack_require__(/*! ./abc_common */ \"(ssr)/./node_modules/abcjs/src/parse/abc_common.js\");\n\n// this is a series of functions that get a particular element out of the passed stream.\n// the return is the number of characters consumed, so 0 means that the element wasn't found.\n// also returned is the element found. This may be a different length because spaces may be consumed that aren't part of the string.\n// The return structure for most calls is { len: num_chars_consumed, token: str }\nvar Tokenizer = function(lines, multilineVars) {\n\tthis.lineIndex = 0\n\tthis.lines = lines\n\tthis.multilineVars = multilineVars;\n\n\tthis.skipWhiteSpace = function(str) {\n\t\tfor (var i = 0; i < str.length; i++) {\n\t\t  if (!this.isWhiteSpace(str[i]))\n\t\t\t\treturn i;\n\t\t}\n\t\treturn str.length;\t// It must have been all white space\n\t};\n\tvar finished = function(str, i) {\n\t\treturn i >= str.length;\n\t};\n\tthis.eatWhiteSpace = function(line, index) {\n\t\tfor (var i = index; i < line.length; i++) {\n\t\t  if (!this.isWhiteSpace(line[i]))\n\t\t\t\treturn i-index;\n\t\t}\n\t\treturn i-index;\n\t};\n\n\t// This just gets the basic pitch letter, ignoring leading spaces, and normalizing it to a capital\n\tthis.getKeyPitch = function(str) {\n\t\tvar i = this.skipWhiteSpace(str);\n\t\tif (finished(str, i))\n\t\t\treturn {len: 0};\n\t\tswitch (str[i]) {\n\t\t\tcase 'A':return {len: i+1, token: 'A'};\n\t\t\tcase 'B':return {len: i+1, token: 'B'};\n\t\t\tcase 'C':return {len: i+1, token: 'C'};\n\t\t\tcase 'D':return {len: i+1, token: 'D'};\n\t\t\tcase 'E':return {len: i+1, token: 'E'};\n\t\t\tcase 'F':return {len: i+1, token: 'F'};\n\t\t\tcase 'G':return {len: i+1, token: 'G'};\n//\t\t\tcase 'a':return {len: i+1, token: 'A'};\n//\t\t\tcase 'b':return {len: i+1, token: 'B'};\n//\t\t\tcase 'c':return {len: i+1, token: 'C'};\n//\t\t\tcase 'd':return {len: i+1, token: 'D'};\n//\t\t\tcase 'e':return {len: i+1, token: 'E'};\n//\t\t\tcase 'f':return {len: i+1, token: 'F'};\n//\t\t\tcase 'g':return {len: i+1, token: 'G'};\n\t\t}\n\t\treturn {len: 0};\n\t};\n\n\t// This just gets the basic accidental, ignoring leading spaces, and only the ones that appear in a key\n\tthis.getSharpFlat = function(str) {\n\t\tif (str === 'bass')\n\t\t\treturn {len: 0};\n\t\tswitch (str[0]) {\n\t\t\tcase '#':return {len: 1, token: '#'};\n\t\t\tcase 'b':return {len: 1, token: 'b'};\n\t\t}\n\t\treturn {len: 0};\n\t};\n\n\tthis.getMode = function(str) {\n\t\tvar skipAlpha = function(str, start) {\n\t\t\t// This returns the index of the next non-alphabetic char, or the entire length of the string if not found.\n\t\t  while (start < str.length && ((str[start] >= 'a' && str[start] <= 'z') || (str[start] >= 'A' && str[start] <= 'Z')))\n\t\t\t\tstart++;\n\t\t\treturn start;\n\t\t};\n\n\t\tvar i = this.skipWhiteSpace(str);\n\t\tif (finished(str, i))\n\t\t\treturn {len: 0};\n\t\tvar firstThree = str.substring(i,i+3).toLowerCase();\n\t\tif (firstThree.length > 1 && firstThree[1] === ' ' || firstThree[1] === '^' || firstThree[1] === '_' || firstThree[1] === '=') firstThree = firstThree[0];\t// This will handle the case of 'm'\n\t\tswitch (firstThree) {\n\t\t\tcase 'mix':return {len: skipAlpha(str, i), token: 'Mix'};\n\t\t\tcase 'dor':return {len: skipAlpha(str, i), token: 'Dor'};\n\t\t\tcase 'phr':return {len: skipAlpha(str, i), token: 'Phr'};\n\t\t\tcase 'lyd':return {len: skipAlpha(str, i), token: 'Lyd'};\n\t\t\tcase 'loc':return {len: skipAlpha(str, i), token: 'Loc'};\n\t\t\tcase 'aeo':return {len: skipAlpha(str, i), token: 'm'};\n\t\t\tcase 'maj':return {len: skipAlpha(str, i), token: ''};\n\t\t\tcase 'ion':return {len: skipAlpha(str, i), token: ''};\n\t\t\tcase 'min':return {len: skipAlpha(str, i), token: 'm'};\n\t\t\tcase 'm':return {len: skipAlpha(str, i), token: 'm'};\n\t\t}\n\t\treturn {len: 0};\n\t};\n\n\tthis.getClef = function(str, bExplicitOnly) {\n\t\tvar strOrig = str;\n\t\tvar i = this.skipWhiteSpace(str);\n\t\tif (finished(str, i))\n\t\t\treturn {len: 0};\n\t\t// The word 'clef' is optional, but if it appears, a clef MUST appear\n\t\tvar needsClef = false;\n\t\tvar strClef = str.substring(i);\n\t\tif (parseCommon.startsWith(strClef, 'clef=')) {\n\t\t\tneedsClef = true;\n\t\t\tstrClef = strClef.substring(5);\n\t\t\ti += 5;\n\t\t}\n\t\tif (strClef.length === 0 && needsClef)\n\t\t\treturn {len: i+5, warn: \"No clef specified: \" + strOrig};\n\n\t\tvar j = this.skipWhiteSpace(strClef);\n\t\tif (finished(strClef, j))\n\t\t\treturn {len: 0};\n\t\tif (j > 0) {\n\t\t\ti += j;\n\t\t\tstrClef = strClef.substring(j);\n\t\t}\n\t\tvar name = null;\n\t\tif (parseCommon.startsWith(strClef, 'treble'))\n\t\t\tname = 'treble';\n\t\telse if (parseCommon.startsWith(strClef, 'bass3'))\n\t\t\tname = 'bass3';\n\t\telse if (parseCommon.startsWith(strClef, 'bass'))\n\t\t\tname = 'bass';\n\t\telse if (parseCommon.startsWith(strClef, 'tenor'))\n\t\t\tname = 'tenor';\n\t\telse if (parseCommon.startsWith(strClef, 'alto2'))\n\t\t\tname = 'alto2';\n\t\telse if (parseCommon.startsWith(strClef, 'alto1'))\n\t\t\tname = 'alto1';\n\t\telse if (parseCommon.startsWith(strClef, 'alto'))\n\t\t\tname = 'alto';\n\t\telse if (!bExplicitOnly && (needsClef && parseCommon.startsWith(strClef, 'none')))\n\t\t\tname = 'none';\n\t\telse if (parseCommon.startsWith(strClef, 'perc'))\n\t\t\tname = 'perc';\n\t\telse if (!bExplicitOnly && (needsClef && parseCommon.startsWith(strClef, 'C')))\n\t\t\tname = 'tenor';\n\t\telse if (!bExplicitOnly && (needsClef && parseCommon.startsWith(strClef, 'F')))\n\t\t\tname = 'bass';\n\t\telse if (!bExplicitOnly && (needsClef && parseCommon.startsWith(strClef, 'G')))\n\t\t\tname = 'treble';\n\t\telse\n\t\t\treturn {len: i+5, warn: \"Unknown clef specified: \" + strOrig};\n\n\t\tstrClef = strClef.substring(name.length);\n\t\tj = this.isMatch(strClef, '+8');\n\t\tif (j > 0)\n\t\t\tname += \"+8\";\n\t\telse {\n\t\t\tj = this.isMatch(strClef, '-8');\n\t\t\tif (j > 0)\n\t\t\t\tname += \"-8\";\n\t\t}\n\t\treturn {len: i+name.length, token: name, explicit: needsClef};\n\t};\n\n\t// This returns one of the legal bar lines\n\t// This is called alot and there is no obvious tokenable items, so this is broken apart.\n\tthis.getBarLine = function(line, i) {\n\t\tswitch (line[i]) {\n\t\t\tcase ']':\n\t\t\t\t++i;\n\t\t\t\tswitch (line[i]) {\n\t\t\t\t\tcase '|': return {len: 2, token: \"bar_thick_thin\"};\n\t\t\t\t\tcase '[':\n\t\t\t\t\t\t++i;\n\t\t\t\t\t\tif ((line[i] >= '1' && line[i] <= '9') || line[i] === '\"')\n\t\t\t\t\t\t\treturn {len: 2, token: \"bar_invisible\"};\n\t\t\t\t\t\treturn {len: 1, warn: \"Unknown bar symbol\"};\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn {len: 1, token: \"bar_invisible\"};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ':':\n\t\t\t\t++i;\n\t\t\t\tswitch (line[i]) {\n\t\t\t\t\tcase ':': return {len: 2, token: \"bar_dbl_repeat\"};\n\t\t\t\t\tcase '|':\t// :|\n\t\t\t\t\t\t++i;\n\t\t\t\t\t\tswitch (line[i]) {\n\t\t\t\t\t\t\tcase ']':\t// :|]\n\t\t\t\t\t\t\t\t++i;\n\t\t\t\t\t\t\t\tswitch (line[i]) {\n\t\t\t\t\t\t\t\t\tcase '|':\t// :|]|\n\t\t\t\t\t\t\t\t\t\t++i;\n\t\t\t\t\t\t\t\t\t\tif (line[i] === ':')  return {len: 5, token: \"bar_dbl_repeat\"};\n\t\t\t\t\t\t\t\t\t\treturn {len: 3, token: \"bar_right_repeat\"};\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\treturn {len: 3, token: \"bar_right_repeat\"};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '|':\t// :||\n\t\t\t\t\t\t\t\t++i;\n\t\t\t\t\t\t\t\tif (line[i] === ':')  return {len: 4, token: \"bar_dbl_repeat\"};\n\t\t\t\t\t\t\t\treturn {len: 3, token: \"bar_right_repeat\"};\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\treturn {len: 2, token: \"bar_right_repeat\"};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn {len: 1, warn: \"Unknown bar symbol\"};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase '[':\t// [\n\t\t\t\t++i;\n\t\t\t\tif (line[i] === '|') {\t// [|\n\t\t\t\t\t++i;\n\t\t\t\t\tswitch (line[i]) {\n\t\t\t\t\t\tcase ':': return {len: 3, token: \"bar_left_repeat\"};\n\t\t\t\t\t\tcase ']': return {len: 3, token: \"bar_invisible\"};\n\t\t\t\t\t\tdefault: return {len: 2, token: \"bar_thick_thin\"};\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ((line[i] >= '1' && line[i] <= '9') || line[i] === '\"')\n\t\t\t\t\t\treturn {len: 1, token: \"bar_invisible\"};\n\t\t\t\t\treturn {len: 0};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase '|':\t// |\n\t\t\t\t++i;\n\t\t\t\tswitch (line[i]) {\n\t\t\t\t\tcase ']': return {len: 2, token: \"bar_thin_thick\"};\n\t\t\t\t\tcase '|': // ||\n\t\t\t\t\t\t++i;\n\t\t\t\t\t\tif (line[i] === ':') return {len: 3, token: \"bar_left_repeat\"};\n\t\t\t\t\t\treturn {len: 2, token: \"bar_thin_thin\"};\n\t\t\t\t\tcase ':':\t// |:\n\t\t\t\t\t\tvar colons = 0;\n\t\t\t\t\t\twhile (line[i+colons] === ':') colons++;\n\t\t\t\t\t\treturn { len: 1+colons, token: \"bar_left_repeat\"};\n\t\t\t\t\tdefault: return {len: 1, token: \"bar_thin\"};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\treturn {len: 0};\n\t};\n\n\t// this returns all the characters in the string that match one of the characters in the legalChars string\n\tthis.getTokenOf = function(str, legalChars) {\n\t\tfor (var i = 0; i < str.length; i++) {\n\t\t\tif (legalChars.indexOf(str[i]) < 0)\n\t\t\t\treturn {len: i, token: str.substring(0, i)};\n\t\t}\n\t\treturn {len: i, token: str};\n\t};\n\n\tthis.getToken = function(str, start, end) {\n\t\t// This returns the next set of chars that doesn't contain spaces\n\t\tvar i = start;\n\t\twhile (i < end && !this.isWhiteSpace(str[i]))\n\t\t\ti++;\n\t\treturn str.substring(start, i);\n\t};\n\n\t// This just sees if the next token is the word passed in, with possible leading spaces\n\tthis.isMatch = function(str, match) {\n\t\tvar i = this.skipWhiteSpace(str);\n\t\tif (finished(str, i))\n\t\t\treturn 0;\n\t\tif (parseCommon.startsWith(str.substring(i), match))\n\t\t\treturn i+match.length;\n\t\treturn 0;\n\t};\n\n\tthis.getPitchFromTokens = function(tokens) {\n\t\tvar ret = { };\n\t\tvar pitches = {A: 5, B: 6, C: 0, D: 1, E: 2, F: 3, G: 4, a: 12, b: 13, c: 7, d: 8, e: 9, f: 10, g: 11};\n\t\tret.position = pitches[tokens[0].token];\n\t\tif (ret.position === undefined)\n\t\t\treturn { warn: \"Pitch expected. Found: \" + tokens[0].token };\n\t\ttokens.shift();\n\t\twhile (tokens.length) {\n\t\t\tswitch (tokens[0].token) {\n\t\t\t\tcase ',': ret.position -= 7; tokens.shift(); break;\n\t\t\t\tcase '\\'': ret.position += 7; tokens.shift(); break;\n\t\t\t\tdefault: return ret;\n\t\t\t}\n\t\t}\n\t\treturn ret;\n\t};\n\n\tthis.getKeyAccidentals2 = function(tokens) {\n\t\tvar accs;\n\t\t// find and strip off all accidentals in the token list\n\t\twhile (tokens.length > 0) {\n\t\t\tvar acc;\n\t\t\tif (tokens[0].token === '^') {\n\t\t\t\tacc = 'sharp';\n\t\t\t\ttokens.shift();\n\t\t\t\tif (tokens.length === 0) return {accs: accs, warn: 'Expected note name after ' + acc};\n\t\t\t\tswitch (tokens[0].token) {\n\t\t\t\t\tcase '^': acc = 'dblsharp'; tokens.shift(); break;\n\t\t\t\t\tcase '/': acc = 'quartersharp'; tokens.shift(); break;\n\t\t\t\t}\n\t\t\t} else if (tokens[0].token === '=') {\n\t\t\t\tacc = 'natural';\n\t\t\t\ttokens.shift();\n\t\t\t} else if (tokens[0].token === '_') {\n\t\t\t\tacc = 'flat';\n\t\t\t\ttokens.shift();\n\t\t\t\tif (tokens.length === 0) return {accs: accs, warn: 'Expected note name after ' + acc};\n\t\t\t\tswitch (tokens[0].token) {\n\t\t\t\t\tcase '_': acc = 'dblflat'; tokens.shift(); break;\n\t\t\t\t\tcase '/': acc = 'quarterflat'; tokens.shift(); break;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Not an accidental, we'll assume that a later parse will recognize it.\n\t\t\t\treturn { accs: accs };\n\t\t\t}\n\t\t\tif (tokens.length === 0) return {accs: accs, warn: 'Expected note name after ' + acc};\n\t\t\tswitch (tokens[0].token[0])\n\t\t\t{\n\t\t\t\tcase 'a':\n\t\t\t\tcase 'b':\n\t\t\t\tcase 'c':\n\t\t\t\tcase 'd':\n\t\t\t\tcase 'e':\n\t\t\t\tcase 'f':\n\t\t\t\tcase 'g':\n\t\t\t\tcase 'A':\n\t\t\t\tcase 'B':\n\t\t\t\tcase 'C':\n\t\t\t\tcase 'D':\n\t\t\t\tcase 'E':\n\t\t\t\tcase 'F':\n\t\t\t\tcase 'G':\n\t\t\t\t\tif (accs === undefined)\n\t\t\t\t\t\taccs = [];\n\t\t\t\t\taccs.push({ acc: acc, note: tokens[0].token[0] });\n\t\t\t\t\tif (tokens[0].token.length === 1)\n\t\t\t\t\t\ttokens.shift();\n\t\t\t\t\telse\n\t\t\t\t\t\ttokens[0].token = tokens[0].token.substring(1);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\treturn {accs: accs, warn: 'Expected note name after ' + acc + ' Found: ' + tokens[0].token };\n\t\t\t}\n\t\t}\n\t\treturn { accs: accs };\n\t};\n\n\t// This gets an accidental marking for the key signature. It has the accidental then the pitch letter.\n\tthis.getKeyAccidental = function(str) {\n\t\tvar accTranslation = {\n\t\t\t'^': 'sharp',\n\t\t\t'^^': 'dblsharp',\n\t\t\t'=': 'natural',\n\t\t\t'_': 'flat',\n\t\t\t'__': 'dblflat',\n\t\t\t'_/': 'quarterflat',\n\t\t\t'^/': 'quartersharp'\n\t\t};\n\t\tvar i = this.skipWhiteSpace(str);\n\t\tif (finished(str, i))\n\t\t\treturn {len: 0};\n\t\tvar acc = null;\n\t\tswitch (str[i])\n\t\t{\n\t\t\tcase '^':\n\t\t\tcase '_':\n\t\t\tcase '=':\n\t\t\t\tacc = str[i];\n\t\t\t\tbreak;\n\t\t\tdefault:return {len: 0};\n\t\t}\n\t\ti++;\n\t\tif (finished(str, i))\n\t\t\treturn {len: 1, warn: 'Expected note name after accidental'};\n\t\tswitch (str[i])\n\t\t{\n\t\t\tcase 'a':\n\t\t\tcase 'b':\n\t\t\tcase 'c':\n\t\t\tcase 'd':\n\t\t\tcase 'e':\n\t\t\tcase 'f':\n\t\t\tcase 'g':\n\t\t\tcase 'A':\n\t\t\tcase 'B':\n\t\t\tcase 'C':\n\t\t\tcase 'D':\n\t\t\tcase 'E':\n\t\t\tcase 'F':\n\t\t\tcase 'G':\n\t\t\t\treturn {len: i+1, token: {acc: accTranslation[acc], note: str[i]}};\n\t\t\tcase '^':\n\t\t\tcase '_':\n\t\t\tcase '/':\n\t\t\t\tacc += str[i];\n\t\t\t\ti++;\n\t\t\t\tif (finished(str, i))\n\t\t\t\t\treturn {len: 2, warn: 'Expected note name after accidental'};\n\t\t\t\tswitch (str[i])\n\t\t\t\t{\n\t\t\t\t\tcase 'a':\n\t\t\t\t\tcase 'b':\n\t\t\t\t\tcase 'c':\n\t\t\t\t\tcase 'd':\n\t\t\t\t\tcase 'e':\n\t\t\t\t\tcase 'f':\n\t\t\t\t\tcase 'g':\n\t\t\t\t\tcase 'A':\n\t\t\t\t\tcase 'B':\n\t\t\t\t\tcase 'C':\n\t\t\t\t\tcase 'D':\n\t\t\t\t\tcase 'E':\n\t\t\t\t\tcase 'F':\n\t\t\t\t\tcase 'G':\n\t\t\t\t\t\treturn {len: i+1, token: {acc: accTranslation[acc], note: str[i]}};\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn {len: 2, warn: 'Expected note name after accidental'};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn {len: 1, warn: 'Expected note name after accidental'};\n\t\t}\n\t};\n\n\tthis.isWhiteSpace = function(ch) {\n\t\treturn ch === ' ' || ch === '\\t' || ch === '\\x12';\n\t};\n\n\tthis.getMeat = function(line, start, end) {\n\t\t// This removes any comments starting with '%' and trims the ends of the string so that there are no leading or trailing spaces.\n\t\t// it returns just the start and end characters that contain the meat.\n\t\tvar comment = line.indexOf('%', start);\n\t\tif (comment >= 0 && comment < end)\n\t\t\tend = comment;\n\t\twhile (start < end && (line[start] === ' ' || line[start] === '\\t' || line[start] === '\\x12'))\n\t\t\tstart++;\n\t\twhile (start < end && (line[end-1] === ' ' || line[end-1] === '\\t' || line[end-1] === '\\x12'))\n\t\t\tend--;\n\t\treturn {start: start, end: end};\n\t};\n\n\tvar isLetter = function(ch) {\n\t\treturn (ch >= 'A' && ch <= 'Z') || (ch >= 'a' && ch <= 'z');\n\t};\n\n\tvar isNumber = function(ch) {\n\t\treturn (ch >= '0' && ch <= '9');\n\t};\n\n\tthis.tokenize = function(line, start, end, alphaUntilWhiteSpace) {\n\t\t// this returns all the tokens inside the passed string. A token is a punctuation mark, a string of digits, a string of letters.\n\t\t//  Quoted strings are one token.\n\t\t//  If there is a minus sign next to a number, then it is included in the number.\n\t\t// If there is a period immediately after a number, with a number immediately following, then a float is returned.\n\t\t// The type of token is returned: quote, alpha, number, punct\n\t\t// If alphaUntilWhiteSpace is true, then the behavior of the alpha token changes.\n\n\t\tvar ret = this.getMeat(line, start, end);\n\t\tstart = ret.start;\n\t\tend = ret.end;\n\t\tvar tokens = [];\n\t\tvar i;\n\t\twhile (start < end) {\n\t\t\tif (line[start] === '\"') {\n\t\t\t\ti = start+1;\n\t\t\t\twhile (i < end && line[i] !== '\"') i++;\n\t\t\t\ttokens.push({ type: 'quote', token: line.substring(start+1, i), start: start+1, end: i});\n\t\t\t\ti++;\n\t\t\t} else if (isLetter(line[start])) {\n\t\t\t\ti = start+1;\n\t\t\t\tif (alphaUntilWhiteSpace)\n\t\t\t\t\twhile (i < end && !this.isWhiteSpace(line[i])) i++;\n\t\t\t\telse\n\t\t\t\t\twhile (i < end && isLetter(line[i])) i++;\n\t\t\t\ttokens.push({ type: 'alpha', token: line.substring(start, i), continueId: isNumber(line[i]), start: start, end: i});\n\t\t\t\tstart = i + 1;\n\t\t\t} else if (line[start] === '.' && isNumber(line[i+1])) {\n\t\t\t\ti = start+1;\n\t\t\t\tvar int2 = null;\n\t\t\t\tvar float2 = null;\n\t\t\t\twhile (i < end && isNumber(line[i])) i++;\n\n\t\t\t\tfloat2 = parseFloat(line.substring(start, i));\n\t\t\t\ttokens.push({ type: 'number', token: line.substring(start, i), intt: int2, floatt: float2, continueId: isLetter(line[i]), start: start, end: i});\n\t\t\t\tstart = i + 1;\n\t\t\t} else if (isNumber(line[start]) || (line[start] === '-' && isNumber(line[i+1]))) {\n\t\t\t\ti = start+1;\n\t\t\t\tvar intt = null;\n\t\t\t\tvar floatt = null;\n\t\t\t\twhile (i < end && isNumber(line[i])) i++;\n\t\t\t\tif (line[i] === '.' && isNumber(line[i+1])) {\n\t\t\t\t\ti++;\n\t\t\t\t\twhile (i < end && isNumber(line[i])) i++;\n\t\t\t\t} else\n\t\t\t\t\tintt = parseInt(line.substring(start, i));\n\n\t\t\t\tfloatt = parseFloat(line.substring(start, i));\n\t\t\t\ttokens.push({ type: 'number', token: line.substring(start, i), intt: intt, floatt: floatt, continueId: isLetter(line[i]), start: start, end: i});\n\t\t\t\tstart = i + 1;\n\t\t\t} else if (line[start] === ' ' || line[start] === '\\t') {\n\t\t\t\ti = start+1;\n\t\t\t} else {\n\t\t\t\ttokens.push({ type: 'punct', token: line[start], start: start, end: start+1});\n\t\t\t\ti = start+1;\n\t\t\t}\n\t\t\tstart = i;\n\t\t}\n\t\treturn tokens;\n\t};\n\n\tthis.getVoiceToken = function(line, start, end) {\n\t\t// This finds the next token. A token is delimited by a space or an equal sign. If it starts with a quote, then the portion between the quotes is returned.\n\t\tvar i = start;\n\t\twhile (i < end && this.isWhiteSpace(line[i]) || line[i] === '=')\n\t\t\ti++;\n\n\t\tif (line[i] === '\"') {\n\t\t\tvar close = line.indexOf('\"', i+1);\n\t\t\tif (close === -1 || close >= end)\n\t\t\t\treturn {len: 1, err: \"Missing close quote\"};\n\t\t\treturn {len: close-start+1, token: this.translateString(line.substring(i+1, close))};\n\t\t} else {\n\t\t\tvar ii = i;\n\t\t\twhile (ii < end && !this.isWhiteSpace(line[ii]) && line[ii] !== '=')\n\t\t\t\tii++;\n\t\t\treturn {len: ii-start+1, token: line.substring(i, ii)};\n\t\t}\n\t};\n\n\tvar charMap = {\n\t\t\"`a\": '', \"'a\": \"\", \"^a\": \"\", \"~a\": \"\", \"\\\"a\": \"\", \"oa\": \"\", \"aa\": \"\", \"=a\": \"\", \"ua\": \"\", \";a\": \"\",\n\t\t\"`e\": '', \"'e\": \"\", \"^e\": \"\", \"\\\"e\": \"\", \"=e\": \"\", \"ue\": \"\", \";e\": \"\", \".e\": \"\",\n\t\t\"`i\": '', \"'i\": \"\", \"^i\": \"\", \"\\\"i\": \"\", \"=i\": \"\", \"ui\": \"\", \";i\": \"\",\n\t\t\"`o\": '', \"'o\": \"\", \"^o\": \"\", \"~o\": \"\", \"\\\"o\": \"\", \"=o\": \"\", \"uo\": \"\", \"/o\": \"\",\n\t\t\"`u\": '', \"'u\": \"\", \"^u\": \"\", \"~u\": \"\", \"\\\"u\": \"\", \"ou\": \"\", \"=u\": \"\", \"uu\": \"\", \";u\": \"\",\n\t\t\"`A\": '', \"'A\": \"\", \"^A\": \"\", \"~A\": \"\", \"\\\"A\": \"\", \"oA\": \"\", \"AA\": \"\", \"=A\": \"\", \"uA\": \"\", \";A\": \"\",\n\t\t\"`E\": '', \"'E\": \"\", \"^E\": \"\", \"\\\"E\": \"\", \"=E\": \"\", \"uE\": \"\", \";E\": \"\", \".E\": \"\",\n\t\t\"`I\": '', \"'I\": \"\", \"^I\": \"\", \"~I\": \"\", \"\\\"I\": \"\", \"=I\": \"\", \"uI\": \"\", \";I\": \"\", \".I\": \"\",\n\t\t\"`O\": '', \"'O\": \"\", \"^O\": \"\", \"~O\": \"\", \"\\\"O\": \"\", \"=O\": \"\", \"uO\": \"\", \"/O\": \"\",\n\t\t\"`U\": '', \"'U\": \"\", \"^U\": \"\", \"~U\": \"\", \"\\\"U\": \"\", \"oU\": \"\", \"=U\": \"\", \"uU\": \"\", \";U\": \"\",\n\t\t\"ae\": \"\", \"AE\": \"\", \"oe\": \"\", \"OE\": \"\", \"ss\": \"\",\n\t\t\"'c\": \"\", \"^c\": \"\", \"uc\": \"\", \"cc\": \"\", \".c\": \"\", \"cC\": \"\", \"'C\": \"\", \"^C\": \"\", \"uC\": \"\", \".C\": \"\",\n\t\t\"~N\": \"\", \"~n\": \"\",\n\t\t\"=s\": \"\", \"vs\": \"\",\n\t\t\"DH\": \"\", \"dh\": \"\",\n\t\t\"HO\": \"\", \"Ho\": \"\", \"HU\": \"\", \"Hu\": \"\",\n\t\t\"'Y\": \"\", \"'y\": \"\", \"^Y\": \"\", \"^y\": \"\", \"\\\"Y\": \"\", \"\\\"y\": \"\",\n\t\t\"vS\": \"\", \"vZ\": \"\", \"vz\": ''\n\n// More chars:                                                                    \n\t};\n\tvar charMap1 = {\n\t\t\"#\": \"\",\n\t\t\"b\": \"\",\n\t\t\"=\": \"\"\n\t};\n\tvar charMap2 = {\n\t\t\"201\": \"\",\n\t\t\"202\": \"\",\n\t\t\"203\": \"\",\n\t\t\"241\": \"\",\n\t\t\"242\": \"\", \"252\": \"a\", \"262\": \"2\", \"272\": \"o\", \"302\": \"\", \"312\": \"\", \"322\": \"\", \"332\": \"\", \"342\": \"\", \"352\": \"\", \"362\": \"\", \"372\": \"\",\n\t\t\"243\": \"\", \"253\": \"\", \"263\": \"3\", \"273\": \"\", \"303\": \"\", \"313\": \"\", \"323\": \"\", \"333\": \"\", \"343\": \"\", \"353\": \"\", \"363\": \"\", \"373\": \"\",\n\t\t\"244\": \"\", \"254\": \"\", \"264\": \"  \", \"274\": \"14\", \"304\": \"\", \"314\": \"\", \"324\": \"\", \"334\": \"\", \"344\": \"\", \"354\": \"\", \"364\": \"\", \"374\": \"\",\n\t\t\"245\": \"\", \"255\": \"-\", \"265\": \"\", \"275\": \"12\", \"305\": \"\", \"315\": \"\", \"325\": \"\", \"335\": \"\",  \"345\": \"\", \"355\": \"\", \"365\": \"\", \"375\": \"\",\n\t\t\"246\": \"\", \"256\": \"\", \"266\": \"\", \"276\": \"34\", \"306\": \"\", \"316\": \"\", \"326\": \"\", \"336\": \"\", \"346\": \"\", \"356\": \"\", \"366\": \"\", \"376\": \"\",\n\t\t\"247\": \"\", \"257\": \" \", \"267\": \"\", \"277\": \"\", \"307\": \"\", \"317\": \"\", \"327\": \"\", \"337\": \"\", \"347\": \"\", \"357\": \"\", \"367\": \"\", \"377\": \"\",\n\t\t\"250\": \" \", \"260\": \"\", \"270\": \" \", \"300\": \"\", \"310\": \"\", \"320\": \"\", \"330\": \"\", \"340\": \"\", \"350\": \"\", \"360\": \"\", \"370\": \"\",\n\t\t\"251\": \"\", \"261\": \"\", \"271\": \"1\", \"301\": \"\", \"311\": \"\", \"321\": \"\", \"331\": \"\", \"341\": \"\", \"351\": \"\", \"361\": \"\", \"371\": \"\" };\n\tthis.translateString = function(str) {\n\t\tvar arr = str.split('\\\\');\n\t\tif (arr.length === 1) return str;\n\t\tvar out = null;\n\t\tarr.forEach(function(s) {\n\t\t\tif (out === null)\n\t\t\t\tout = s;\n\t\t\telse {\n\t\t\t\tvar c = charMap[s.substring(0, 2)];\n\t\t\t\tif (c !== undefined)\n\t\t\t\t\tout += c + s.substring(2);\n\t\t\t\telse {\n\t\t\t\t\tc = charMap2[s.substring(0, 3)];\n\t\t\t\t\tif (c !== undefined)\n\t\t\t\t\t\tout += c + s.substring(3);\n\t\t\t\t\telse {\n\t\t\t\t\t\tc = charMap1[s.substring(0, 1)];\n\t\t\t\t\t\tif (c !== undefined)\n\t\t\t\t\t\t\tout += c + s.substring(1);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tout += \"\\\\\" + s;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn out;\n\t};\n\tthis.getNumber = function(line, index) {\n\t\tvar num = 0;\n\t\twhile (index < line.length) {\n\t\t\tswitch (line[index]) {\n\t\t\t\tcase '0':num = num*10;index++;break;\n\t\t\t\tcase '1':num = num*10+1;index++;break;\n\t\t\t\tcase '2':num = num*10+2;index++;break;\n\t\t\t\tcase '3':num = num*10+3;index++;break;\n\t\t\t\tcase '4':num = num*10+4;index++;break;\n\t\t\t\tcase '5':num = num*10+5;index++;break;\n\t\t\t\tcase '6':num = num*10+6;index++;break;\n\t\t\t\tcase '7':num = num*10+7;index++;break;\n\t\t\t\tcase '8':num = num*10+8;index++;break;\n\t\t\t\tcase '9':num = num*10+9;index++;break;\n\t\t\t\tdefault:\n\t\t\t\t\treturn {num: num, index: index};\n\t\t\t}\n\t\t}\n\t\treturn {num: num, index: index};\n\t};\n\n\tthis.getFraction = function(line, index) {\n\t\tvar num = 1;\n\t\tvar den = 1;\n\t\tif (line[index] !== '/') {\n\t\t\tvar ret = this.getNumber(line, index);\n\t\t\tnum = ret.num;\n\t\t\tindex = ret.index;\n\t\t}\n\t\tif (line[index] === '/') {\n\t\t\tindex++;\n\t\t\tif (line[index] === '/') {\n\t\t\t\tvar div = 0.5;\n\t\t\t\twhile (line[index++] === '/')\n\t\t\t\t\tdiv = div /2;\n\t\t\t\treturn {value: num * div, index: index-1};\n\t\t\t} else {\n\t\t\t\tvar iSave = index;\n\t\t\t\tvar ret2 = this.getNumber(line, index);\n\t\t\t\tif (ret2.num === 0 && iSave === index)\t// If we didn't use any characters, it is an implied 2\n\t\t\t\t\tret2.num = 2;\n\t\t\t\tif (ret2.num !== 0)\n\t\t\t\t\tden = ret2.num;\n\t\t\t\tindex = ret2.index;\n\t\t\t}\n\t\t}\n\n\t\treturn {value: num/den, index: index};\n\t};\n\n//\n// MAE 10 Jan 2023 - For better handling of tunes that have tune numbers in front of them.\n//\n// Previous version would take:\n// 21. Woman of the House, The\n// and return:\n// The 21. Woman of the House\n// \n// This fix results in:\n// 21. The Woman of the House\n//\n// Also added additional checks and handlers for lower case \", the\" and \", a\" since I found several tune collections with those tune name constructs\n//\n// Find an optional title number at the start of a tune title\nfunction getTitleNumber(str){\n\n  const regex = /^(\\d+)\\./;\n\n  // Use the exec method to search for the pattern in the string\n  const match = regex.exec(str);\n\n  // Check if a match is found\n  if (match) {\n\n\t// The matched number is captured in the first group (index 1)\n\tconst foundNumber = match[1];\n\treturn foundNumber;\n\n  } else {\n\n\t// Return null if no match is found\n\treturn null;\n\t\n  }\n\n}\n\nvar thePatterns = [\n\t{ match: /,\\s*The$/, replace: \"The \" },\n\t{ match: /,\\s*the$/, replace: \"the \" },\n\t{ match: /,\\s*A$/, replace: \"A \" },\n\t{ match: /,\\s*a$/, replace: \"a \" },\n\t{ match: /,\\s*An$/, replace: \"An \" },\n\t{ match: /,\\s*an$/, replace: \"an \" },\n\t{ match: /,\\s*Da$/, replace: \"Da \" },\n\t{ match: /,\\s*La$/, replace: \"La \" },\n\t{ match: /,\\s*Le$/, replace: \"Le \" },\n\t{ match: /,\\s*Les$/, replace: \"Les \" },\n\t{ match: /,\\s*Ye$/, replace: \"Ye \" },\n]\n\nthis.theReverser = function (str) {\n\n    for (var i = 0; i < thePatterns.length; i++) {\n\t\tvar thisPattern = thePatterns[i]\n\t\tvar match = str.match(thisPattern.match)\n\t\tif (match) {\n\t\t\tvar theTitleNumber = getTitleNumber(str);\n\t\t\tif (theTitleNumber){\n\t\t\n\t\t\t  //console.log(\"theReverser The titlenumber:\"+theTitleNumber); \n\t\t\n\t\t\t  str = str.replace(theTitleNumber+\".\",\"\");\n\t\t\t  str = str.trim();\n\t\t\t}\n\t\t\tvar len = match[0].length\n\t\t\tvar result = thisPattern.replace + str.substring(0, str.length - len);\n\t\t\n\t\t\tif (theTitleNumber){\n\t\t\t  result = theTitleNumber+\". \"+result;\n\t\t\t}\n\t\t\t\n\t\t\treturn result;\n\n\t\t}\n\t}\n\n    return str;\n\n  };\n\n\tthis.stripComment = function(str) {\n\t\tvar i = str.indexOf('%');\n\t\tif (i >= 0)\n\t\t\treturn parseCommon.strip(str.substring(0, i));\n\t\treturn parseCommon.strip(str);\n\t};\n\n\tthis.getInt = function(str) {\n\t\t// This parses the beginning of the string for a number and returns { value: num, digits: num }\n\t\t// If digits is 0, then the string didn't point to a number.\n\t\tvar x = parseInt(str);\n\t\tif (isNaN(x))\n\t\t\treturn {digits: 0};\n\t\tvar s = \"\" + x;\n\t\tvar i = str.indexOf(s);\t// This is to account for leading spaces\n\t\treturn {value: x, digits: i+s.length};\n\t};\n\n\tthis.getFloat = function(str) {\n\t\t// This parses the beginning of the string for a number and returns { value: num, digits: num }\n\t\t// If digits is 0, then the string didn't point to a number.\n\t\tvar x = parseFloat(str);\n\t\tif (isNaN(x))\n\t\t\treturn {digits: 0};\n\t\tvar s = \"\" + x;\n\t\tvar i = str.indexOf(s);\t// This is to account for leading spaces\n\t\treturn {value: x, digits: i+s.length};\n\t};\n\n\tthis.getMeasurement = function(tokens) {\n\t\tif (tokens.length === 0) return { used: 0 };\n\t\tvar used = 1;\n\t\tvar num = '';\n\t\tif (tokens[0].token === '-') {\n\t\t\ttokens.shift();\n\t\t\tnum = '-';\n\t\t\tused++;\n\t\t}\n\t\telse if (tokens[0].type !== 'number') return { used: 0 };\n\t\tnum += tokens.shift().token;\n\t\tif (tokens.length === 0) return { used: 1, value: parseInt(num) };\n\t\tvar x = tokens.shift();\n\t\tif (x.token === '.') {\n\t\t\tused++;\n\t\t\tif (tokens.length === 0) return { used: used, value: parseInt(num) };\n\t\t\tif (tokens[0].type === 'number') {\n\t\t\t\tx = tokens.shift();\n\t\t\t\tnum = num + '.' + x.token;\n\t\t\t\tused++;\n\t\t\t\tif (tokens.length === 0) return { used: used, value: parseFloat(num) };\n\t\t\t}\n\t\t\tx = tokens.shift();\n\t\t}\n\t\tswitch (x.token) {\n\t\t\tcase 'pt': return { used: used+1, value: parseFloat(num) };\n\t\t\tcase 'px': return { used: used+1, value: parseFloat(num) };\n\t\t\tcase 'cm': return { used: used+1, value: parseFloat(num)/2.54*72 };\n\t\t\tcase 'in': return { used: used+1, value: parseFloat(num)*72 };\n\t\t\tdefault: tokens.unshift(x); return { used: used, value: parseFloat(num) };\n\t\t}\n\t};\n\tvar substInChord = function(str) {\n\t\tstr = str.replace(/\\\\n/g, \"\\n\");\n\t\tstr = str.replace(/\\\\\"/g, '\"');\n\t\treturn str;\n\t};\n\tthis.getBrackettedSubstring = function(line, i, maxErrorChars, _matchChar)\n\t{\n\t\t// This extracts the sub string by looking at the first character and searching for that\n\t\t// character later in the line (or search for the optional _matchChar).\n\t\t// For instance, if the first character is a quote it will look for\n\t\t// the end quote. If the end of the line is reached, then only up to the default number\n\t\t// of characters are returned, so that a missing end quote won't eat up the entire line.\n\t\t// It returns the substring and the number of characters consumed.\n\t\t// The number of characters consumed is normally two more than the size of the substring,\n\t\t// but in the error case it might not be.\n\t\tvar matchChar = _matchChar || line[i];\n\t\tvar pos = i+1;\n\t\tvar esc = false;\n\t\twhile ((pos < line.length) && (esc || line[pos] !== matchChar)) {\n\t\t\tesc = line[pos] === '\\\\';\n\t\t\t++pos;\n\t\t}\n\t\tif (line[pos] === matchChar)\n\t\t\treturn [pos-i+1,substInChord(line.substring(i+1, pos)), true];\n\t\telse\t// we hit the end of line, so we'll just pick an arbitrary num of chars so the line doesn't disappear.\n\t\t{\n\t\t\tpos = i+maxErrorChars;\n\t\t\tif (pos > line.length-1)\n\t\t\t\tpos = line.length-1;\n\t\t\treturn [pos-i+1, substInChord(line.substring(i+1, pos)), false];\n\t\t}\n\t};\n};\n\nTokenizer.prototype.peekLine = function() {\n\treturn this.lines[this.lineIndex]\n}\n\nTokenizer.prototype.nextLine = function() {\n\tif (this.lineIndex > 0) {\n\t\tthis.multilineVars.iChar += this.lines[this.lineIndex-1].length + 1;\n\t}\n\tif (this.lineIndex < this.lines.length) {\n\t\tvar result = this.lines[this.lineIndex]\n\t\tthis.lineIndex++\n\t\treturn result\n\t}\n\treturn null\n}\n\nmodule.exports = Tokenizer;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL2FiY190b2tlbml6ZXIuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsa0JBQWtCLG1CQUFPLENBQUMsd0VBQWM7O0FBRXhDO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsaUJBQWlCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxvQkFBb0I7QUFDcEIsb0JBQW9CO0FBQ3BCLG9CQUFvQjtBQUNwQixvQkFBb0I7QUFDcEIsb0JBQW9CO0FBQ3BCLG9CQUFvQjtBQUNwQixvQkFBb0I7QUFDcEIsc0JBQXNCO0FBQ3RCLHNCQUFzQjtBQUN0QixzQkFBc0I7QUFDdEIsc0JBQXNCO0FBQ3RCLHNCQUFzQjtBQUN0QixzQkFBc0I7QUFDdEIsc0JBQXNCO0FBQ3RCO0FBQ0EsVUFBVTtBQUNWOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLG9CQUFvQjtBQUNwQixvQkFBb0I7QUFDcEI7QUFDQSxVQUFVO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLDZKQUE2SjtBQUM3SjtBQUNBLHNCQUFzQjtBQUN0QixzQkFBc0I7QUFDdEIsc0JBQXNCO0FBQ3RCLHNCQUFzQjtBQUN0QixzQkFBc0I7QUFDdEIsc0JBQXNCO0FBQ3RCLHNCQUFzQjtBQUN0QixzQkFBc0I7QUFDdEIsc0JBQXNCO0FBQ3RCLG9CQUFvQjtBQUNwQjtBQUNBLFVBQVU7QUFDVjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVzs7QUFFWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLGNBQWM7QUFDZDtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEMsa0JBQWtCO0FBQ2xCO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDLGdCQUFnQjtBQUNoQjtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBLHdCQUF3QjtBQUN4Qix3QkFBd0I7QUFDeEIsdUJBQXVCO0FBQ3ZCO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsY0FBYztBQUNkLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkMsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0IsZ0JBQWdCO0FBQ2xDO0FBQ0EsWUFBWTtBQUNaO0FBQ0EsVUFBVTtBQUNWOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGdCQUFnQjtBQUNqRCxrQ0FBa0MsZ0JBQWdCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBLGlDQUFpQyxnQkFBZ0I7QUFDakQscUNBQXFDLGdCQUFnQjtBQUNyRDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQSxnQ0FBZ0MsZ0JBQWdCO0FBQ2hELG9DQUFvQyxnQkFBZ0I7QUFDcEQ7QUFDQSxLQUFLO0FBQ0w7QUFDQSxhQUFhO0FBQ2I7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG9DQUFvQztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0JBQWtCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsa0JBQWtCO0FBQ2hDO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix5RUFBeUU7QUFDM0Y7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvR0FBb0c7QUFDdEg7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0IsaUlBQWlJO0FBQ25KO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0Esa0JBQWtCLGlJQUFpSTtBQUNuSjtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTCxrQkFBa0IsOERBQThEO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWixXQUFXO0FBQ1gsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0Esd0dBQXdHO0FBQ3hHLHVFQUF1RTtBQUN2RSx1RUFBdUU7QUFDdkU7QUFDQSw2RkFBNkY7QUFDN0Ysd0dBQXdHO0FBQ3hHLHVFQUF1RTtBQUN2RSxrRkFBa0Y7QUFDbEY7QUFDQSw2RkFBNkY7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixRQUFRO0FBQ2xDLDRCQUE0QixRQUFRO0FBQ3BDLDRCQUE0QixRQUFRO0FBQ3BDLDRCQUE0QixRQUFRO0FBQ3BDLDRCQUE0QixRQUFRO0FBQ3BDLDRCQUE0QixRQUFRO0FBQ3BDLDRCQUE0QixRQUFRO0FBQ3BDLDRCQUE0QixRQUFRO0FBQ3BDLDRCQUE0QixRQUFRO0FBQ3BDLDRCQUE0QixRQUFRO0FBQ3BDO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFVBQVU7QUFDVjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsR0FBRyxvQ0FBb0M7QUFDdkMsR0FBRyxvQ0FBb0M7QUFDdkMsR0FBRyxnQ0FBZ0M7QUFDbkMsR0FBRyxnQ0FBZ0M7QUFDbkMsR0FBRyxrQ0FBa0M7QUFDckMsR0FBRyxrQ0FBa0M7QUFDckMsR0FBRyxrQ0FBa0M7QUFDckMsR0FBRyxrQ0FBa0M7QUFDckMsR0FBRyxrQ0FBa0M7QUFDckMsR0FBRyxvQ0FBb0M7QUFDdkMsR0FBRyxrQ0FBa0M7QUFDckM7O0FBRUE7O0FBRUEsb0JBQW9CLHdCQUF3QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHdFQUF3RTtBQUN4RTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSwwQkFBMEI7QUFDMUIsVUFBVTtBQUNWOztBQUVBO0FBQ0Esd0VBQXdFO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLDBCQUEwQjtBQUMxQixVQUFVO0FBQ1Y7O0FBRUE7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCLHVCQUF1QjtBQUN2Qix1QkFBdUI7QUFDdkIsdUJBQXVCO0FBQ3ZCLCtCQUErQixTQUFTO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvcGFyc2UvYWJjX3Rva2VuaXplci5qcz80NDRjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vICAgIGFiY190b2tlbml6ZXIuanM6IHRva2VuaXplcyBhbiBBQkMgTXVzaWMgTm90YXRpb24gc3RyaW5nIHRvIHN1cHBvcnQgYWJjX3BhcnNlLlxuXG52YXIgcGFyc2VDb21tb24gPSByZXF1aXJlKCcuL2FiY19jb21tb24nKTtcblxuLy8gdGhpcyBpcyBhIHNlcmllcyBvZiBmdW5jdGlvbnMgdGhhdCBnZXQgYSBwYXJ0aWN1bGFyIGVsZW1lbnQgb3V0IG9mIHRoZSBwYXNzZWQgc3RyZWFtLlxuLy8gdGhlIHJldHVybiBpcyB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgY29uc3VtZWQsIHNvIDAgbWVhbnMgdGhhdCB0aGUgZWxlbWVudCB3YXNuJ3QgZm91bmQuXG4vLyBhbHNvIHJldHVybmVkIGlzIHRoZSBlbGVtZW50IGZvdW5kLiBUaGlzIG1heSBiZSBhIGRpZmZlcmVudCBsZW5ndGggYmVjYXVzZSBzcGFjZXMgbWF5IGJlIGNvbnN1bWVkIHRoYXQgYXJlbid0IHBhcnQgb2YgdGhlIHN0cmluZy5cbi8vIFRoZSByZXR1cm4gc3RydWN0dXJlIGZvciBtb3N0IGNhbGxzIGlzIHsgbGVuOiBudW1fY2hhcnNfY29uc3VtZWQsIHRva2VuOiBzdHIgfVxudmFyIFRva2VuaXplciA9IGZ1bmN0aW9uKGxpbmVzLCBtdWx0aWxpbmVWYXJzKSB7XG5cdHRoaXMubGluZUluZGV4ID0gMFxuXHR0aGlzLmxpbmVzID0gbGluZXNcblx0dGhpcy5tdWx0aWxpbmVWYXJzID0gbXVsdGlsaW5lVmFycztcblxuXHR0aGlzLnNraXBXaGl0ZVNwYWNlID0gZnVuY3Rpb24oc3RyKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcblx0XHQgIGlmICghdGhpcy5pc1doaXRlU3BhY2Uoc3RyW2ldKSlcblx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0fVxuXHRcdHJldHVybiBzdHIubGVuZ3RoO1x0Ly8gSXQgbXVzdCBoYXZlIGJlZW4gYWxsIHdoaXRlIHNwYWNlXG5cdH07XG5cdHZhciBmaW5pc2hlZCA9IGZ1bmN0aW9uKHN0ciwgaSkge1xuXHRcdHJldHVybiBpID49IHN0ci5sZW5ndGg7XG5cdH07XG5cdHRoaXMuZWF0V2hpdGVTcGFjZSA9IGZ1bmN0aW9uKGxpbmUsIGluZGV4KSB7XG5cdFx0Zm9yICh2YXIgaSA9IGluZGV4OyBpIDwgbGluZS5sZW5ndGg7IGkrKykge1xuXHRcdCAgaWYgKCF0aGlzLmlzV2hpdGVTcGFjZShsaW5lW2ldKSlcblx0XHRcdFx0cmV0dXJuIGktaW5kZXg7XG5cdFx0fVxuXHRcdHJldHVybiBpLWluZGV4O1xuXHR9O1xuXG5cdC8vIFRoaXMganVzdCBnZXRzIHRoZSBiYXNpYyBwaXRjaCBsZXR0ZXIsIGlnbm9yaW5nIGxlYWRpbmcgc3BhY2VzLCBhbmQgbm9ybWFsaXppbmcgaXQgdG8gYSBjYXBpdGFsXG5cdHRoaXMuZ2V0S2V5UGl0Y2ggPSBmdW5jdGlvbihzdHIpIHtcblx0XHR2YXIgaSA9IHRoaXMuc2tpcFdoaXRlU3BhY2Uoc3RyKTtcblx0XHRpZiAoZmluaXNoZWQoc3RyLCBpKSlcblx0XHRcdHJldHVybiB7bGVuOiAwfTtcblx0XHRzd2l0Y2ggKHN0cltpXSkge1xuXHRcdFx0Y2FzZSAnQSc6cmV0dXJuIHtsZW46IGkrMSwgdG9rZW46ICdBJ307XG5cdFx0XHRjYXNlICdCJzpyZXR1cm4ge2xlbjogaSsxLCB0b2tlbjogJ0InfTtcblx0XHRcdGNhc2UgJ0MnOnJldHVybiB7bGVuOiBpKzEsIHRva2VuOiAnQyd9O1xuXHRcdFx0Y2FzZSAnRCc6cmV0dXJuIHtsZW46IGkrMSwgdG9rZW46ICdEJ307XG5cdFx0XHRjYXNlICdFJzpyZXR1cm4ge2xlbjogaSsxLCB0b2tlbjogJ0UnfTtcblx0XHRcdGNhc2UgJ0YnOnJldHVybiB7bGVuOiBpKzEsIHRva2VuOiAnRid9O1xuXHRcdFx0Y2FzZSAnRyc6cmV0dXJuIHtsZW46IGkrMSwgdG9rZW46ICdHJ307XG4vL1x0XHRcdGNhc2UgJ2EnOnJldHVybiB7bGVuOiBpKzEsIHRva2VuOiAnQSd9O1xuLy9cdFx0XHRjYXNlICdiJzpyZXR1cm4ge2xlbjogaSsxLCB0b2tlbjogJ0InfTtcbi8vXHRcdFx0Y2FzZSAnYyc6cmV0dXJuIHtsZW46IGkrMSwgdG9rZW46ICdDJ307XG4vL1x0XHRcdGNhc2UgJ2QnOnJldHVybiB7bGVuOiBpKzEsIHRva2VuOiAnRCd9O1xuLy9cdFx0XHRjYXNlICdlJzpyZXR1cm4ge2xlbjogaSsxLCB0b2tlbjogJ0UnfTtcbi8vXHRcdFx0Y2FzZSAnZic6cmV0dXJuIHtsZW46IGkrMSwgdG9rZW46ICdGJ307XG4vL1x0XHRcdGNhc2UgJ2cnOnJldHVybiB7bGVuOiBpKzEsIHRva2VuOiAnRyd9O1xuXHRcdH1cblx0XHRyZXR1cm4ge2xlbjogMH07XG5cdH07XG5cblx0Ly8gVGhpcyBqdXN0IGdldHMgdGhlIGJhc2ljIGFjY2lkZW50YWwsIGlnbm9yaW5nIGxlYWRpbmcgc3BhY2VzLCBhbmQgb25seSB0aGUgb25lcyB0aGF0IGFwcGVhciBpbiBhIGtleVxuXHR0aGlzLmdldFNoYXJwRmxhdCA9IGZ1bmN0aW9uKHN0cikge1xuXHRcdGlmIChzdHIgPT09ICdiYXNzJylcblx0XHRcdHJldHVybiB7bGVuOiAwfTtcblx0XHRzd2l0Y2ggKHN0clswXSkge1xuXHRcdFx0Y2FzZSAnIyc6cmV0dXJuIHtsZW46IDEsIHRva2VuOiAnIyd9O1xuXHRcdFx0Y2FzZSAnYic6cmV0dXJuIHtsZW46IDEsIHRva2VuOiAnYid9O1xuXHRcdH1cblx0XHRyZXR1cm4ge2xlbjogMH07XG5cdH07XG5cblx0dGhpcy5nZXRNb2RlID0gZnVuY3Rpb24oc3RyKSB7XG5cdFx0dmFyIHNraXBBbHBoYSA9IGZ1bmN0aW9uKHN0ciwgc3RhcnQpIHtcblx0XHRcdC8vIFRoaXMgcmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG5leHQgbm9uLWFscGhhYmV0aWMgY2hhciwgb3IgdGhlIGVudGlyZSBsZW5ndGggb2YgdGhlIHN0cmluZyBpZiBub3QgZm91bmQuXG5cdFx0ICB3aGlsZSAoc3RhcnQgPCBzdHIubGVuZ3RoICYmICgoc3RyW3N0YXJ0XSA+PSAnYScgJiYgc3RyW3N0YXJ0XSA8PSAneicpIHx8IChzdHJbc3RhcnRdID49ICdBJyAmJiBzdHJbc3RhcnRdIDw9ICdaJykpKVxuXHRcdFx0XHRzdGFydCsrO1xuXHRcdFx0cmV0dXJuIHN0YXJ0O1xuXHRcdH07XG5cblx0XHR2YXIgaSA9IHRoaXMuc2tpcFdoaXRlU3BhY2Uoc3RyKTtcblx0XHRpZiAoZmluaXNoZWQoc3RyLCBpKSlcblx0XHRcdHJldHVybiB7bGVuOiAwfTtcblx0XHR2YXIgZmlyc3RUaHJlZSA9IHN0ci5zdWJzdHJpbmcoaSxpKzMpLnRvTG93ZXJDYXNlKCk7XG5cdFx0aWYgKGZpcnN0VGhyZWUubGVuZ3RoID4gMSAmJiBmaXJzdFRocmVlWzFdID09PSAnICcgfHwgZmlyc3RUaHJlZVsxXSA9PT0gJ14nIHx8IGZpcnN0VGhyZWVbMV0gPT09ICdfJyB8fCBmaXJzdFRocmVlWzFdID09PSAnPScpIGZpcnN0VGhyZWUgPSBmaXJzdFRocmVlWzBdO1x0Ly8gVGhpcyB3aWxsIGhhbmRsZSB0aGUgY2FzZSBvZiAnbSdcblx0XHRzd2l0Y2ggKGZpcnN0VGhyZWUpIHtcblx0XHRcdGNhc2UgJ21peCc6cmV0dXJuIHtsZW46IHNraXBBbHBoYShzdHIsIGkpLCB0b2tlbjogJ01peCd9O1xuXHRcdFx0Y2FzZSAnZG9yJzpyZXR1cm4ge2xlbjogc2tpcEFscGhhKHN0ciwgaSksIHRva2VuOiAnRG9yJ307XG5cdFx0XHRjYXNlICdwaHInOnJldHVybiB7bGVuOiBza2lwQWxwaGEoc3RyLCBpKSwgdG9rZW46ICdQaHInfTtcblx0XHRcdGNhc2UgJ2x5ZCc6cmV0dXJuIHtsZW46IHNraXBBbHBoYShzdHIsIGkpLCB0b2tlbjogJ0x5ZCd9O1xuXHRcdFx0Y2FzZSAnbG9jJzpyZXR1cm4ge2xlbjogc2tpcEFscGhhKHN0ciwgaSksIHRva2VuOiAnTG9jJ307XG5cdFx0XHRjYXNlICdhZW8nOnJldHVybiB7bGVuOiBza2lwQWxwaGEoc3RyLCBpKSwgdG9rZW46ICdtJ307XG5cdFx0XHRjYXNlICdtYWonOnJldHVybiB7bGVuOiBza2lwQWxwaGEoc3RyLCBpKSwgdG9rZW46ICcnfTtcblx0XHRcdGNhc2UgJ2lvbic6cmV0dXJuIHtsZW46IHNraXBBbHBoYShzdHIsIGkpLCB0b2tlbjogJyd9O1xuXHRcdFx0Y2FzZSAnbWluJzpyZXR1cm4ge2xlbjogc2tpcEFscGhhKHN0ciwgaSksIHRva2VuOiAnbSd9O1xuXHRcdFx0Y2FzZSAnbSc6cmV0dXJuIHtsZW46IHNraXBBbHBoYShzdHIsIGkpLCB0b2tlbjogJ20nfTtcblx0XHR9XG5cdFx0cmV0dXJuIHtsZW46IDB9O1xuXHR9O1xuXG5cdHRoaXMuZ2V0Q2xlZiA9IGZ1bmN0aW9uKHN0ciwgYkV4cGxpY2l0T25seSkge1xuXHRcdHZhciBzdHJPcmlnID0gc3RyO1xuXHRcdHZhciBpID0gdGhpcy5za2lwV2hpdGVTcGFjZShzdHIpO1xuXHRcdGlmIChmaW5pc2hlZChzdHIsIGkpKVxuXHRcdFx0cmV0dXJuIHtsZW46IDB9O1xuXHRcdC8vIFRoZSB3b3JkICdjbGVmJyBpcyBvcHRpb25hbCwgYnV0IGlmIGl0IGFwcGVhcnMsIGEgY2xlZiBNVVNUIGFwcGVhclxuXHRcdHZhciBuZWVkc0NsZWYgPSBmYWxzZTtcblx0XHR2YXIgc3RyQ2xlZiA9IHN0ci5zdWJzdHJpbmcoaSk7XG5cdFx0aWYgKHBhcnNlQ29tbW9uLnN0YXJ0c1dpdGgoc3RyQ2xlZiwgJ2NsZWY9JykpIHtcblx0XHRcdG5lZWRzQ2xlZiA9IHRydWU7XG5cdFx0XHRzdHJDbGVmID0gc3RyQ2xlZi5zdWJzdHJpbmcoNSk7XG5cdFx0XHRpICs9IDU7XG5cdFx0fVxuXHRcdGlmIChzdHJDbGVmLmxlbmd0aCA9PT0gMCAmJiBuZWVkc0NsZWYpXG5cdFx0XHRyZXR1cm4ge2xlbjogaSs1LCB3YXJuOiBcIk5vIGNsZWYgc3BlY2lmaWVkOiBcIiArIHN0ck9yaWd9O1xuXG5cdFx0dmFyIGogPSB0aGlzLnNraXBXaGl0ZVNwYWNlKHN0ckNsZWYpO1xuXHRcdGlmIChmaW5pc2hlZChzdHJDbGVmLCBqKSlcblx0XHRcdHJldHVybiB7bGVuOiAwfTtcblx0XHRpZiAoaiA+IDApIHtcblx0XHRcdGkgKz0gajtcblx0XHRcdHN0ckNsZWYgPSBzdHJDbGVmLnN1YnN0cmluZyhqKTtcblx0XHR9XG5cdFx0dmFyIG5hbWUgPSBudWxsO1xuXHRcdGlmIChwYXJzZUNvbW1vbi5zdGFydHNXaXRoKHN0ckNsZWYsICd0cmVibGUnKSlcblx0XHRcdG5hbWUgPSAndHJlYmxlJztcblx0XHRlbHNlIGlmIChwYXJzZUNvbW1vbi5zdGFydHNXaXRoKHN0ckNsZWYsICdiYXNzMycpKVxuXHRcdFx0bmFtZSA9ICdiYXNzMyc7XG5cdFx0ZWxzZSBpZiAocGFyc2VDb21tb24uc3RhcnRzV2l0aChzdHJDbGVmLCAnYmFzcycpKVxuXHRcdFx0bmFtZSA9ICdiYXNzJztcblx0XHRlbHNlIGlmIChwYXJzZUNvbW1vbi5zdGFydHNXaXRoKHN0ckNsZWYsICd0ZW5vcicpKVxuXHRcdFx0bmFtZSA9ICd0ZW5vcic7XG5cdFx0ZWxzZSBpZiAocGFyc2VDb21tb24uc3RhcnRzV2l0aChzdHJDbGVmLCAnYWx0bzInKSlcblx0XHRcdG5hbWUgPSAnYWx0bzInO1xuXHRcdGVsc2UgaWYgKHBhcnNlQ29tbW9uLnN0YXJ0c1dpdGgoc3RyQ2xlZiwgJ2FsdG8xJykpXG5cdFx0XHRuYW1lID0gJ2FsdG8xJztcblx0XHRlbHNlIGlmIChwYXJzZUNvbW1vbi5zdGFydHNXaXRoKHN0ckNsZWYsICdhbHRvJykpXG5cdFx0XHRuYW1lID0gJ2FsdG8nO1xuXHRcdGVsc2UgaWYgKCFiRXhwbGljaXRPbmx5ICYmIChuZWVkc0NsZWYgJiYgcGFyc2VDb21tb24uc3RhcnRzV2l0aChzdHJDbGVmLCAnbm9uZScpKSlcblx0XHRcdG5hbWUgPSAnbm9uZSc7XG5cdFx0ZWxzZSBpZiAocGFyc2VDb21tb24uc3RhcnRzV2l0aChzdHJDbGVmLCAncGVyYycpKVxuXHRcdFx0bmFtZSA9ICdwZXJjJztcblx0XHRlbHNlIGlmICghYkV4cGxpY2l0T25seSAmJiAobmVlZHNDbGVmICYmIHBhcnNlQ29tbW9uLnN0YXJ0c1dpdGgoc3RyQ2xlZiwgJ0MnKSkpXG5cdFx0XHRuYW1lID0gJ3Rlbm9yJztcblx0XHRlbHNlIGlmICghYkV4cGxpY2l0T25seSAmJiAobmVlZHNDbGVmICYmIHBhcnNlQ29tbW9uLnN0YXJ0c1dpdGgoc3RyQ2xlZiwgJ0YnKSkpXG5cdFx0XHRuYW1lID0gJ2Jhc3MnO1xuXHRcdGVsc2UgaWYgKCFiRXhwbGljaXRPbmx5ICYmIChuZWVkc0NsZWYgJiYgcGFyc2VDb21tb24uc3RhcnRzV2l0aChzdHJDbGVmLCAnRycpKSlcblx0XHRcdG5hbWUgPSAndHJlYmxlJztcblx0XHRlbHNlXG5cdFx0XHRyZXR1cm4ge2xlbjogaSs1LCB3YXJuOiBcIlVua25vd24gY2xlZiBzcGVjaWZpZWQ6IFwiICsgc3RyT3JpZ307XG5cblx0XHRzdHJDbGVmID0gc3RyQ2xlZi5zdWJzdHJpbmcobmFtZS5sZW5ndGgpO1xuXHRcdGogPSB0aGlzLmlzTWF0Y2goc3RyQ2xlZiwgJys4Jyk7XG5cdFx0aWYgKGogPiAwKVxuXHRcdFx0bmFtZSArPSBcIis4XCI7XG5cdFx0ZWxzZSB7XG5cdFx0XHRqID0gdGhpcy5pc01hdGNoKHN0ckNsZWYsICctOCcpO1xuXHRcdFx0aWYgKGogPiAwKVxuXHRcdFx0XHRuYW1lICs9IFwiLThcIjtcblx0XHR9XG5cdFx0cmV0dXJuIHtsZW46IGkrbmFtZS5sZW5ndGgsIHRva2VuOiBuYW1lLCBleHBsaWNpdDogbmVlZHNDbGVmfTtcblx0fTtcblxuXHQvLyBUaGlzIHJldHVybnMgb25lIG9mIHRoZSBsZWdhbCBiYXIgbGluZXNcblx0Ly8gVGhpcyBpcyBjYWxsZWQgYWxvdCBhbmQgdGhlcmUgaXMgbm8gb2J2aW91cyB0b2tlbmFibGUgaXRlbXMsIHNvIHRoaXMgaXMgYnJva2VuIGFwYXJ0LlxuXHR0aGlzLmdldEJhckxpbmUgPSBmdW5jdGlvbihsaW5lLCBpKSB7XG5cdFx0c3dpdGNoIChsaW5lW2ldKSB7XG5cdFx0XHRjYXNlICddJzpcblx0XHRcdFx0KytpO1xuXHRcdFx0XHRzd2l0Y2ggKGxpbmVbaV0pIHtcblx0XHRcdFx0XHRjYXNlICd8JzogcmV0dXJuIHtsZW46IDIsIHRva2VuOiBcImJhcl90aGlja190aGluXCJ9O1xuXHRcdFx0XHRcdGNhc2UgJ1snOlxuXHRcdFx0XHRcdFx0KytpO1xuXHRcdFx0XHRcdFx0aWYgKChsaW5lW2ldID49ICcxJyAmJiBsaW5lW2ldIDw9ICc5JykgfHwgbGluZVtpXSA9PT0gJ1wiJylcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHtsZW46IDIsIHRva2VuOiBcImJhcl9pbnZpc2libGVcIn07XG5cdFx0XHRcdFx0XHRyZXR1cm4ge2xlbjogMSwgd2FybjogXCJVbmtub3duIGJhciBzeW1ib2xcIn07XG5cdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdHJldHVybiB7bGVuOiAxLCB0b2tlbjogXCJiYXJfaW52aXNpYmxlXCJ9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnOic6XG5cdFx0XHRcdCsraTtcblx0XHRcdFx0c3dpdGNoIChsaW5lW2ldKSB7XG5cdFx0XHRcdFx0Y2FzZSAnOic6IHJldHVybiB7bGVuOiAyLCB0b2tlbjogXCJiYXJfZGJsX3JlcGVhdFwifTtcblx0XHRcdFx0XHRjYXNlICd8JzpcdC8vIDp8XG5cdFx0XHRcdFx0XHQrK2k7XG5cdFx0XHRcdFx0XHRzd2l0Y2ggKGxpbmVbaV0pIHtcblx0XHRcdFx0XHRcdFx0Y2FzZSAnXSc6XHQvLyA6fF1cblx0XHRcdFx0XHRcdFx0XHQrK2k7XG5cdFx0XHRcdFx0XHRcdFx0c3dpdGNoIChsaW5lW2ldKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjYXNlICd8JzpcdC8vIDp8XXxcblx0XHRcdFx0XHRcdFx0XHRcdFx0KytpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAobGluZVtpXSA9PT0gJzonKSAgcmV0dXJuIHtsZW46IDUsIHRva2VuOiBcImJhcl9kYmxfcmVwZWF0XCJ9O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4ge2xlbjogMywgdG9rZW46IFwiYmFyX3JpZ2h0X3JlcGVhdFwifTtcblx0XHRcdFx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB7bGVuOiAzLCB0b2tlbjogXCJiYXJfcmlnaHRfcmVwZWF0XCJ9O1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0Y2FzZSAnfCc6XHQvLyA6fHxcblx0XHRcdFx0XHRcdFx0XHQrK2k7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGxpbmVbaV0gPT09ICc6JykgIHJldHVybiB7bGVuOiA0LCB0b2tlbjogXCJiYXJfZGJsX3JlcGVhdFwifTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4ge2xlbjogMywgdG9rZW46IFwiYmFyX3JpZ2h0X3JlcGVhdFwifTtcblx0XHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4ge2xlbjogMiwgdG9rZW46IFwiYmFyX3JpZ2h0X3JlcGVhdFwifTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRyZXR1cm4ge2xlbjogMSwgd2FybjogXCJVbmtub3duIGJhciBzeW1ib2xcIn07XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdbJzpcdC8vIFtcblx0XHRcdFx0KytpO1xuXHRcdFx0XHRpZiAobGluZVtpXSA9PT0gJ3wnKSB7XHQvLyBbfFxuXHRcdFx0XHRcdCsraTtcblx0XHRcdFx0XHRzd2l0Y2ggKGxpbmVbaV0pIHtcblx0XHRcdFx0XHRcdGNhc2UgJzonOiByZXR1cm4ge2xlbjogMywgdG9rZW46IFwiYmFyX2xlZnRfcmVwZWF0XCJ9O1xuXHRcdFx0XHRcdFx0Y2FzZSAnXSc6IHJldHVybiB7bGVuOiAzLCB0b2tlbjogXCJiYXJfaW52aXNpYmxlXCJ9O1xuXHRcdFx0XHRcdFx0ZGVmYXVsdDogcmV0dXJuIHtsZW46IDIsIHRva2VuOiBcImJhcl90aGlja190aGluXCJ9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoKGxpbmVbaV0gPj0gJzEnICYmIGxpbmVbaV0gPD0gJzknKSB8fCBsaW5lW2ldID09PSAnXCInKVxuXHRcdFx0XHRcdFx0cmV0dXJuIHtsZW46IDEsIHRva2VuOiBcImJhcl9pbnZpc2libGVcIn07XG5cdFx0XHRcdFx0cmV0dXJuIHtsZW46IDB9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnfCc6XHQvLyB8XG5cdFx0XHRcdCsraTtcblx0XHRcdFx0c3dpdGNoIChsaW5lW2ldKSB7XG5cdFx0XHRcdFx0Y2FzZSAnXSc6IHJldHVybiB7bGVuOiAyLCB0b2tlbjogXCJiYXJfdGhpbl90aGlja1wifTtcblx0XHRcdFx0XHRjYXNlICd8JzogLy8gfHxcblx0XHRcdFx0XHRcdCsraTtcblx0XHRcdFx0XHRcdGlmIChsaW5lW2ldID09PSAnOicpIHJldHVybiB7bGVuOiAzLCB0b2tlbjogXCJiYXJfbGVmdF9yZXBlYXRcIn07XG5cdFx0XHRcdFx0XHRyZXR1cm4ge2xlbjogMiwgdG9rZW46IFwiYmFyX3RoaW5fdGhpblwifTtcblx0XHRcdFx0XHRjYXNlICc6JzpcdC8vIHw6XG5cdFx0XHRcdFx0XHR2YXIgY29sb25zID0gMDtcblx0XHRcdFx0XHRcdHdoaWxlIChsaW5lW2krY29sb25zXSA9PT0gJzonKSBjb2xvbnMrKztcblx0XHRcdFx0XHRcdHJldHVybiB7IGxlbjogMStjb2xvbnMsIHRva2VuOiBcImJhcl9sZWZ0X3JlcGVhdFwifTtcblx0XHRcdFx0XHRkZWZhdWx0OiByZXR1cm4ge2xlbjogMSwgdG9rZW46IFwiYmFyX3RoaW5cIn07XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHRcdHJldHVybiB7bGVuOiAwfTtcblx0fTtcblxuXHQvLyB0aGlzIHJldHVybnMgYWxsIHRoZSBjaGFyYWN0ZXJzIGluIHRoZSBzdHJpbmcgdGhhdCBtYXRjaCBvbmUgb2YgdGhlIGNoYXJhY3RlcnMgaW4gdGhlIGxlZ2FsQ2hhcnMgc3RyaW5nXG5cdHRoaXMuZ2V0VG9rZW5PZiA9IGZ1bmN0aW9uKHN0ciwgbGVnYWxDaGFycykge1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAobGVnYWxDaGFycy5pbmRleE9mKHN0cltpXSkgPCAwKVxuXHRcdFx0XHRyZXR1cm4ge2xlbjogaSwgdG9rZW46IHN0ci5zdWJzdHJpbmcoMCwgaSl9O1xuXHRcdH1cblx0XHRyZXR1cm4ge2xlbjogaSwgdG9rZW46IHN0cn07XG5cdH07XG5cblx0dGhpcy5nZXRUb2tlbiA9IGZ1bmN0aW9uKHN0ciwgc3RhcnQsIGVuZCkge1xuXHRcdC8vIFRoaXMgcmV0dXJucyB0aGUgbmV4dCBzZXQgb2YgY2hhcnMgdGhhdCBkb2Vzbid0IGNvbnRhaW4gc3BhY2VzXG5cdFx0dmFyIGkgPSBzdGFydDtcblx0XHR3aGlsZSAoaSA8IGVuZCAmJiAhdGhpcy5pc1doaXRlU3BhY2Uoc3RyW2ldKSlcblx0XHRcdGkrKztcblx0XHRyZXR1cm4gc3RyLnN1YnN0cmluZyhzdGFydCwgaSk7XG5cdH07XG5cblx0Ly8gVGhpcyBqdXN0IHNlZXMgaWYgdGhlIG5leHQgdG9rZW4gaXMgdGhlIHdvcmQgcGFzc2VkIGluLCB3aXRoIHBvc3NpYmxlIGxlYWRpbmcgc3BhY2VzXG5cdHRoaXMuaXNNYXRjaCA9IGZ1bmN0aW9uKHN0ciwgbWF0Y2gpIHtcblx0XHR2YXIgaSA9IHRoaXMuc2tpcFdoaXRlU3BhY2Uoc3RyKTtcblx0XHRpZiAoZmluaXNoZWQoc3RyLCBpKSlcblx0XHRcdHJldHVybiAwO1xuXHRcdGlmIChwYXJzZUNvbW1vbi5zdGFydHNXaXRoKHN0ci5zdWJzdHJpbmcoaSksIG1hdGNoKSlcblx0XHRcdHJldHVybiBpK21hdGNoLmxlbmd0aDtcblx0XHRyZXR1cm4gMDtcblx0fTtcblxuXHR0aGlzLmdldFBpdGNoRnJvbVRva2VucyA9IGZ1bmN0aW9uKHRva2Vucykge1xuXHRcdHZhciByZXQgPSB7IH07XG5cdFx0dmFyIHBpdGNoZXMgPSB7QTogNSwgQjogNiwgQzogMCwgRDogMSwgRTogMiwgRjogMywgRzogNCwgYTogMTIsIGI6IDEzLCBjOiA3LCBkOiA4LCBlOiA5LCBmOiAxMCwgZzogMTF9O1xuXHRcdHJldC5wb3NpdGlvbiA9IHBpdGNoZXNbdG9rZW5zWzBdLnRva2VuXTtcblx0XHRpZiAocmV0LnBvc2l0aW9uID09PSB1bmRlZmluZWQpXG5cdFx0XHRyZXR1cm4geyB3YXJuOiBcIlBpdGNoIGV4cGVjdGVkLiBGb3VuZDogXCIgKyB0b2tlbnNbMF0udG9rZW4gfTtcblx0XHR0b2tlbnMuc2hpZnQoKTtcblx0XHR3aGlsZSAodG9rZW5zLmxlbmd0aCkge1xuXHRcdFx0c3dpdGNoICh0b2tlbnNbMF0udG9rZW4pIHtcblx0XHRcdFx0Y2FzZSAnLCc6IHJldC5wb3NpdGlvbiAtPSA3OyB0b2tlbnMuc2hpZnQoKTsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgJ1xcJyc6IHJldC5wb3NpdGlvbiArPSA3OyB0b2tlbnMuc2hpZnQoKTsgYnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6IHJldHVybiByZXQ7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiByZXQ7XG5cdH07XG5cblx0dGhpcy5nZXRLZXlBY2NpZGVudGFsczIgPSBmdW5jdGlvbih0b2tlbnMpIHtcblx0XHR2YXIgYWNjcztcblx0XHQvLyBmaW5kIGFuZCBzdHJpcCBvZmYgYWxsIGFjY2lkZW50YWxzIGluIHRoZSB0b2tlbiBsaXN0XG5cdFx0d2hpbGUgKHRva2Vucy5sZW5ndGggPiAwKSB7XG5cdFx0XHR2YXIgYWNjO1xuXHRcdFx0aWYgKHRva2Vuc1swXS50b2tlbiA9PT0gJ14nKSB7XG5cdFx0XHRcdGFjYyA9ICdzaGFycCc7XG5cdFx0XHRcdHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRpZiAodG9rZW5zLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHthY2NzOiBhY2NzLCB3YXJuOiAnRXhwZWN0ZWQgbm90ZSBuYW1lIGFmdGVyICcgKyBhY2N9O1xuXHRcdFx0XHRzd2l0Y2ggKHRva2Vuc1swXS50b2tlbikge1xuXHRcdFx0XHRcdGNhc2UgJ14nOiBhY2MgPSAnZGJsc2hhcnAnOyB0b2tlbnMuc2hpZnQoKTsgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnLyc6IGFjYyA9ICdxdWFydGVyc2hhcnAnOyB0b2tlbnMuc2hpZnQoKTsgYnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodG9rZW5zWzBdLnRva2VuID09PSAnPScpIHtcblx0XHRcdFx0YWNjID0gJ25hdHVyYWwnO1xuXHRcdFx0XHR0b2tlbnMuc2hpZnQoKTtcblx0XHRcdH0gZWxzZSBpZiAodG9rZW5zWzBdLnRva2VuID09PSAnXycpIHtcblx0XHRcdFx0YWNjID0gJ2ZsYXQnO1xuXHRcdFx0XHR0b2tlbnMuc2hpZnQoKTtcblx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDApIHJldHVybiB7YWNjczogYWNjcywgd2FybjogJ0V4cGVjdGVkIG5vdGUgbmFtZSBhZnRlciAnICsgYWNjfTtcblx0XHRcdFx0c3dpdGNoICh0b2tlbnNbMF0udG9rZW4pIHtcblx0XHRcdFx0XHRjYXNlICdfJzogYWNjID0gJ2RibGZsYXQnOyB0b2tlbnMuc2hpZnQoKTsgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnLyc6IGFjYyA9ICdxdWFydGVyZmxhdCc7IHRva2Vucy5zaGlmdCgpOyBicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gTm90IGFuIGFjY2lkZW50YWwsIHdlJ2xsIGFzc3VtZSB0aGF0IGEgbGF0ZXIgcGFyc2Ugd2lsbCByZWNvZ25pemUgaXQuXG5cdFx0XHRcdHJldHVybiB7IGFjY3M6IGFjY3MgfTtcblx0XHRcdH1cblx0XHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSByZXR1cm4ge2FjY3M6IGFjY3MsIHdhcm46ICdFeHBlY3RlZCBub3RlIG5hbWUgYWZ0ZXIgJyArIGFjY307XG5cdFx0XHRzd2l0Y2ggKHRva2Vuc1swXS50b2tlblswXSlcblx0XHRcdHtcblx0XHRcdFx0Y2FzZSAnYSc6XG5cdFx0XHRcdGNhc2UgJ2InOlxuXHRcdFx0XHRjYXNlICdjJzpcblx0XHRcdFx0Y2FzZSAnZCc6XG5cdFx0XHRcdGNhc2UgJ2UnOlxuXHRcdFx0XHRjYXNlICdmJzpcblx0XHRcdFx0Y2FzZSAnZyc6XG5cdFx0XHRcdGNhc2UgJ0EnOlxuXHRcdFx0XHRjYXNlICdCJzpcblx0XHRcdFx0Y2FzZSAnQyc6XG5cdFx0XHRcdGNhc2UgJ0QnOlxuXHRcdFx0XHRjYXNlICdFJzpcblx0XHRcdFx0Y2FzZSAnRic6XG5cdFx0XHRcdGNhc2UgJ0cnOlxuXHRcdFx0XHRcdGlmIChhY2NzID09PSB1bmRlZmluZWQpXG5cdFx0XHRcdFx0XHRhY2NzID0gW107XG5cdFx0XHRcdFx0YWNjcy5wdXNoKHsgYWNjOiBhY2MsIG5vdGU6IHRva2Vuc1swXS50b2tlblswXSB9KTtcblx0XHRcdFx0XHRpZiAodG9rZW5zWzBdLnRva2VuLmxlbmd0aCA9PT0gMSlcblx0XHRcdFx0XHRcdHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdHRva2Vuc1swXS50b2tlbiA9IHRva2Vuc1swXS50b2tlbi5zdWJzdHJpbmcoMSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0cmV0dXJuIHthY2NzOiBhY2NzLCB3YXJuOiAnRXhwZWN0ZWQgbm90ZSBuYW1lIGFmdGVyICcgKyBhY2MgKyAnIEZvdW5kOiAnICsgdG9rZW5zWzBdLnRva2VuIH07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB7IGFjY3M6IGFjY3MgfTtcblx0fTtcblxuXHQvLyBUaGlzIGdldHMgYW4gYWNjaWRlbnRhbCBtYXJraW5nIGZvciB0aGUga2V5IHNpZ25hdHVyZS4gSXQgaGFzIHRoZSBhY2NpZGVudGFsIHRoZW4gdGhlIHBpdGNoIGxldHRlci5cblx0dGhpcy5nZXRLZXlBY2NpZGVudGFsID0gZnVuY3Rpb24oc3RyKSB7XG5cdFx0dmFyIGFjY1RyYW5zbGF0aW9uID0ge1xuXHRcdFx0J14nOiAnc2hhcnAnLFxuXHRcdFx0J15eJzogJ2RibHNoYXJwJyxcblx0XHRcdCc9JzogJ25hdHVyYWwnLFxuXHRcdFx0J18nOiAnZmxhdCcsXG5cdFx0XHQnX18nOiAnZGJsZmxhdCcsXG5cdFx0XHQnXy8nOiAncXVhcnRlcmZsYXQnLFxuXHRcdFx0J14vJzogJ3F1YXJ0ZXJzaGFycCdcblx0XHR9O1xuXHRcdHZhciBpID0gdGhpcy5za2lwV2hpdGVTcGFjZShzdHIpO1xuXHRcdGlmIChmaW5pc2hlZChzdHIsIGkpKVxuXHRcdFx0cmV0dXJuIHtsZW46IDB9O1xuXHRcdHZhciBhY2MgPSBudWxsO1xuXHRcdHN3aXRjaCAoc3RyW2ldKVxuXHRcdHtcblx0XHRcdGNhc2UgJ14nOlxuXHRcdFx0Y2FzZSAnXyc6XG5cdFx0XHRjYXNlICc9Jzpcblx0XHRcdFx0YWNjID0gc3RyW2ldO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6cmV0dXJuIHtsZW46IDB9O1xuXHRcdH1cblx0XHRpKys7XG5cdFx0aWYgKGZpbmlzaGVkKHN0ciwgaSkpXG5cdFx0XHRyZXR1cm4ge2xlbjogMSwgd2FybjogJ0V4cGVjdGVkIG5vdGUgbmFtZSBhZnRlciBhY2NpZGVudGFsJ307XG5cdFx0c3dpdGNoIChzdHJbaV0pXG5cdFx0e1xuXHRcdFx0Y2FzZSAnYSc6XG5cdFx0XHRjYXNlICdiJzpcblx0XHRcdGNhc2UgJ2MnOlxuXHRcdFx0Y2FzZSAnZCc6XG5cdFx0XHRjYXNlICdlJzpcblx0XHRcdGNhc2UgJ2YnOlxuXHRcdFx0Y2FzZSAnZyc6XG5cdFx0XHRjYXNlICdBJzpcblx0XHRcdGNhc2UgJ0InOlxuXHRcdFx0Y2FzZSAnQyc6XG5cdFx0XHRjYXNlICdEJzpcblx0XHRcdGNhc2UgJ0UnOlxuXHRcdFx0Y2FzZSAnRic6XG5cdFx0XHRjYXNlICdHJzpcblx0XHRcdFx0cmV0dXJuIHtsZW46IGkrMSwgdG9rZW46IHthY2M6IGFjY1RyYW5zbGF0aW9uW2FjY10sIG5vdGU6IHN0cltpXX19O1xuXHRcdFx0Y2FzZSAnXic6XG5cdFx0XHRjYXNlICdfJzpcblx0XHRcdGNhc2UgJy8nOlxuXHRcdFx0XHRhY2MgKz0gc3RyW2ldO1xuXHRcdFx0XHRpKys7XG5cdFx0XHRcdGlmIChmaW5pc2hlZChzdHIsIGkpKVxuXHRcdFx0XHRcdHJldHVybiB7bGVuOiAyLCB3YXJuOiAnRXhwZWN0ZWQgbm90ZSBuYW1lIGFmdGVyIGFjY2lkZW50YWwnfTtcblx0XHRcdFx0c3dpdGNoIChzdHJbaV0pXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjYXNlICdhJzpcblx0XHRcdFx0XHRjYXNlICdiJzpcblx0XHRcdFx0XHRjYXNlICdjJzpcblx0XHRcdFx0XHRjYXNlICdkJzpcblx0XHRcdFx0XHRjYXNlICdlJzpcblx0XHRcdFx0XHRjYXNlICdmJzpcblx0XHRcdFx0XHRjYXNlICdnJzpcblx0XHRcdFx0XHRjYXNlICdBJzpcblx0XHRcdFx0XHRjYXNlICdCJzpcblx0XHRcdFx0XHRjYXNlICdDJzpcblx0XHRcdFx0XHRjYXNlICdEJzpcblx0XHRcdFx0XHRjYXNlICdFJzpcblx0XHRcdFx0XHRjYXNlICdGJzpcblx0XHRcdFx0XHRjYXNlICdHJzpcblx0XHRcdFx0XHRcdHJldHVybiB7bGVuOiBpKzEsIHRva2VuOiB7YWNjOiBhY2NUcmFuc2xhdGlvblthY2NdLCBub3RlOiBzdHJbaV19fTtcblx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0cmV0dXJuIHtsZW46IDIsIHdhcm46ICdFeHBlY3RlZCBub3RlIG5hbWUgYWZ0ZXIgYWNjaWRlbnRhbCd9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0cmV0dXJuIHtsZW46IDEsIHdhcm46ICdFeHBlY3RlZCBub3RlIG5hbWUgYWZ0ZXIgYWNjaWRlbnRhbCd9O1xuXHRcdH1cblx0fTtcblxuXHR0aGlzLmlzV2hpdGVTcGFjZSA9IGZ1bmN0aW9uKGNoKSB7XG5cdFx0cmV0dXJuIGNoID09PSAnICcgfHwgY2ggPT09ICdcXHQnIHx8IGNoID09PSAnXFx4MTInO1xuXHR9O1xuXG5cdHRoaXMuZ2V0TWVhdCA9IGZ1bmN0aW9uKGxpbmUsIHN0YXJ0LCBlbmQpIHtcblx0XHQvLyBUaGlzIHJlbW92ZXMgYW55IGNvbW1lbnRzIHN0YXJ0aW5nIHdpdGggJyUnIGFuZCB0cmltcyB0aGUgZW5kcyBvZiB0aGUgc3RyaW5nIHNvIHRoYXQgdGhlcmUgYXJlIG5vIGxlYWRpbmcgb3IgdHJhaWxpbmcgc3BhY2VzLlxuXHRcdC8vIGl0IHJldHVybnMganVzdCB0aGUgc3RhcnQgYW5kIGVuZCBjaGFyYWN0ZXJzIHRoYXQgY29udGFpbiB0aGUgbWVhdC5cblx0XHR2YXIgY29tbWVudCA9IGxpbmUuaW5kZXhPZignJScsIHN0YXJ0KTtcblx0XHRpZiAoY29tbWVudCA+PSAwICYmIGNvbW1lbnQgPCBlbmQpXG5cdFx0XHRlbmQgPSBjb21tZW50O1xuXHRcdHdoaWxlIChzdGFydCA8IGVuZCAmJiAobGluZVtzdGFydF0gPT09ICcgJyB8fCBsaW5lW3N0YXJ0XSA9PT0gJ1xcdCcgfHwgbGluZVtzdGFydF0gPT09ICdcXHgxMicpKVxuXHRcdFx0c3RhcnQrKztcblx0XHR3aGlsZSAoc3RhcnQgPCBlbmQgJiYgKGxpbmVbZW5kLTFdID09PSAnICcgfHwgbGluZVtlbmQtMV0gPT09ICdcXHQnIHx8IGxpbmVbZW5kLTFdID09PSAnXFx4MTInKSlcblx0XHRcdGVuZC0tO1xuXHRcdHJldHVybiB7c3RhcnQ6IHN0YXJ0LCBlbmQ6IGVuZH07XG5cdH07XG5cblx0dmFyIGlzTGV0dGVyID0gZnVuY3Rpb24oY2gpIHtcblx0XHRyZXR1cm4gKGNoID49ICdBJyAmJiBjaCA8PSAnWicpIHx8IChjaCA+PSAnYScgJiYgY2ggPD0gJ3onKTtcblx0fTtcblxuXHR2YXIgaXNOdW1iZXIgPSBmdW5jdGlvbihjaCkge1xuXHRcdHJldHVybiAoY2ggPj0gJzAnICYmIGNoIDw9ICc5Jyk7XG5cdH07XG5cblx0dGhpcy50b2tlbml6ZSA9IGZ1bmN0aW9uKGxpbmUsIHN0YXJ0LCBlbmQsIGFscGhhVW50aWxXaGl0ZVNwYWNlKSB7XG5cdFx0Ly8gdGhpcyByZXR1cm5zIGFsbCB0aGUgdG9rZW5zIGluc2lkZSB0aGUgcGFzc2VkIHN0cmluZy4gQSB0b2tlbiBpcyBhIHB1bmN0dWF0aW9uIG1hcmssIGEgc3RyaW5nIG9mIGRpZ2l0cywgYSBzdHJpbmcgb2YgbGV0dGVycy5cblx0XHQvLyAgUXVvdGVkIHN0cmluZ3MgYXJlIG9uZSB0b2tlbi5cblx0XHQvLyAgSWYgdGhlcmUgaXMgYSBtaW51cyBzaWduIG5leHQgdG8gYSBudW1iZXIsIHRoZW4gaXQgaXMgaW5jbHVkZWQgaW4gdGhlIG51bWJlci5cblx0XHQvLyBJZiB0aGVyZSBpcyBhIHBlcmlvZCBpbW1lZGlhdGVseSBhZnRlciBhIG51bWJlciwgd2l0aCBhIG51bWJlciBpbW1lZGlhdGVseSBmb2xsb3dpbmcsIHRoZW4gYSBmbG9hdCBpcyByZXR1cm5lZC5cblx0XHQvLyBUaGUgdHlwZSBvZiB0b2tlbiBpcyByZXR1cm5lZDogcXVvdGUsIGFscGhhLCBudW1iZXIsIHB1bmN0XG5cdFx0Ly8gSWYgYWxwaGFVbnRpbFdoaXRlU3BhY2UgaXMgdHJ1ZSwgdGhlbiB0aGUgYmVoYXZpb3Igb2YgdGhlIGFscGhhIHRva2VuIGNoYW5nZXMuXG5cblx0XHR2YXIgcmV0ID0gdGhpcy5nZXRNZWF0KGxpbmUsIHN0YXJ0LCBlbmQpO1xuXHRcdHN0YXJ0ID0gcmV0LnN0YXJ0O1xuXHRcdGVuZCA9IHJldC5lbmQ7XG5cdFx0dmFyIHRva2VucyA9IFtdO1xuXHRcdHZhciBpO1xuXHRcdHdoaWxlIChzdGFydCA8IGVuZCkge1xuXHRcdFx0aWYgKGxpbmVbc3RhcnRdID09PSAnXCInKSB7XG5cdFx0XHRcdGkgPSBzdGFydCsxO1xuXHRcdFx0XHR3aGlsZSAoaSA8IGVuZCAmJiBsaW5lW2ldICE9PSAnXCInKSBpKys7XG5cdFx0XHRcdHRva2Vucy5wdXNoKHsgdHlwZTogJ3F1b3RlJywgdG9rZW46IGxpbmUuc3Vic3RyaW5nKHN0YXJ0KzEsIGkpLCBzdGFydDogc3RhcnQrMSwgZW5kOiBpfSk7XG5cdFx0XHRcdGkrKztcblx0XHRcdH0gZWxzZSBpZiAoaXNMZXR0ZXIobGluZVtzdGFydF0pKSB7XG5cdFx0XHRcdGkgPSBzdGFydCsxO1xuXHRcdFx0XHRpZiAoYWxwaGFVbnRpbFdoaXRlU3BhY2UpXG5cdFx0XHRcdFx0d2hpbGUgKGkgPCBlbmQgJiYgIXRoaXMuaXNXaGl0ZVNwYWNlKGxpbmVbaV0pKSBpKys7XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR3aGlsZSAoaSA8IGVuZCAmJiBpc0xldHRlcihsaW5lW2ldKSkgaSsrO1xuXHRcdFx0XHR0b2tlbnMucHVzaCh7IHR5cGU6ICdhbHBoYScsIHRva2VuOiBsaW5lLnN1YnN0cmluZyhzdGFydCwgaSksIGNvbnRpbnVlSWQ6IGlzTnVtYmVyKGxpbmVbaV0pLCBzdGFydDogc3RhcnQsIGVuZDogaX0pO1xuXHRcdFx0XHRzdGFydCA9IGkgKyAxO1xuXHRcdFx0fSBlbHNlIGlmIChsaW5lW3N0YXJ0XSA9PT0gJy4nICYmIGlzTnVtYmVyKGxpbmVbaSsxXSkpIHtcblx0XHRcdFx0aSA9IHN0YXJ0KzE7XG5cdFx0XHRcdHZhciBpbnQyID0gbnVsbDtcblx0XHRcdFx0dmFyIGZsb2F0MiA9IG51bGw7XG5cdFx0XHRcdHdoaWxlIChpIDwgZW5kICYmIGlzTnVtYmVyKGxpbmVbaV0pKSBpKys7XG5cblx0XHRcdFx0ZmxvYXQyID0gcGFyc2VGbG9hdChsaW5lLnN1YnN0cmluZyhzdGFydCwgaSkpO1xuXHRcdFx0XHR0b2tlbnMucHVzaCh7IHR5cGU6ICdudW1iZXInLCB0b2tlbjogbGluZS5zdWJzdHJpbmcoc3RhcnQsIGkpLCBpbnR0OiBpbnQyLCBmbG9hdHQ6IGZsb2F0MiwgY29udGludWVJZDogaXNMZXR0ZXIobGluZVtpXSksIHN0YXJ0OiBzdGFydCwgZW5kOiBpfSk7XG5cdFx0XHRcdHN0YXJ0ID0gaSArIDE7XG5cdFx0XHR9IGVsc2UgaWYgKGlzTnVtYmVyKGxpbmVbc3RhcnRdKSB8fCAobGluZVtzdGFydF0gPT09ICctJyAmJiBpc051bWJlcihsaW5lW2krMV0pKSkge1xuXHRcdFx0XHRpID0gc3RhcnQrMTtcblx0XHRcdFx0dmFyIGludHQgPSBudWxsO1xuXHRcdFx0XHR2YXIgZmxvYXR0ID0gbnVsbDtcblx0XHRcdFx0d2hpbGUgKGkgPCBlbmQgJiYgaXNOdW1iZXIobGluZVtpXSkpIGkrKztcblx0XHRcdFx0aWYgKGxpbmVbaV0gPT09ICcuJyAmJiBpc051bWJlcihsaW5lW2krMV0pKSB7XG5cdFx0XHRcdFx0aSsrO1xuXHRcdFx0XHRcdHdoaWxlIChpIDwgZW5kICYmIGlzTnVtYmVyKGxpbmVbaV0pKSBpKys7XG5cdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdGludHQgPSBwYXJzZUludChsaW5lLnN1YnN0cmluZyhzdGFydCwgaSkpO1xuXG5cdFx0XHRcdGZsb2F0dCA9IHBhcnNlRmxvYXQobGluZS5zdWJzdHJpbmcoc3RhcnQsIGkpKTtcblx0XHRcdFx0dG9rZW5zLnB1c2goeyB0eXBlOiAnbnVtYmVyJywgdG9rZW46IGxpbmUuc3Vic3RyaW5nKHN0YXJ0LCBpKSwgaW50dDogaW50dCwgZmxvYXR0OiBmbG9hdHQsIGNvbnRpbnVlSWQ6IGlzTGV0dGVyKGxpbmVbaV0pLCBzdGFydDogc3RhcnQsIGVuZDogaX0pO1xuXHRcdFx0XHRzdGFydCA9IGkgKyAxO1xuXHRcdFx0fSBlbHNlIGlmIChsaW5lW3N0YXJ0XSA9PT0gJyAnIHx8IGxpbmVbc3RhcnRdID09PSAnXFx0Jykge1xuXHRcdFx0XHRpID0gc3RhcnQrMTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRva2Vucy5wdXNoKHsgdHlwZTogJ3B1bmN0JywgdG9rZW46IGxpbmVbc3RhcnRdLCBzdGFydDogc3RhcnQsIGVuZDogc3RhcnQrMX0pO1xuXHRcdFx0XHRpID0gc3RhcnQrMTtcblx0XHRcdH1cblx0XHRcdHN0YXJ0ID0gaTtcblx0XHR9XG5cdFx0cmV0dXJuIHRva2Vucztcblx0fTtcblxuXHR0aGlzLmdldFZvaWNlVG9rZW4gPSBmdW5jdGlvbihsaW5lLCBzdGFydCwgZW5kKSB7XG5cdFx0Ly8gVGhpcyBmaW5kcyB0aGUgbmV4dCB0b2tlbi4gQSB0b2tlbiBpcyBkZWxpbWl0ZWQgYnkgYSBzcGFjZSBvciBhbiBlcXVhbCBzaWduLiBJZiBpdCBzdGFydHMgd2l0aCBhIHF1b3RlLCB0aGVuIHRoZSBwb3J0aW9uIGJldHdlZW4gdGhlIHF1b3RlcyBpcyByZXR1cm5lZC5cblx0XHR2YXIgaSA9IHN0YXJ0O1xuXHRcdHdoaWxlIChpIDwgZW5kICYmIHRoaXMuaXNXaGl0ZVNwYWNlKGxpbmVbaV0pIHx8IGxpbmVbaV0gPT09ICc9Jylcblx0XHRcdGkrKztcblxuXHRcdGlmIChsaW5lW2ldID09PSAnXCInKSB7XG5cdFx0XHR2YXIgY2xvc2UgPSBsaW5lLmluZGV4T2YoJ1wiJywgaSsxKTtcblx0XHRcdGlmIChjbG9zZSA9PT0gLTEgfHwgY2xvc2UgPj0gZW5kKVxuXHRcdFx0XHRyZXR1cm4ge2xlbjogMSwgZXJyOiBcIk1pc3NpbmcgY2xvc2UgcXVvdGVcIn07XG5cdFx0XHRyZXR1cm4ge2xlbjogY2xvc2Utc3RhcnQrMSwgdG9rZW46IHRoaXMudHJhbnNsYXRlU3RyaW5nKGxpbmUuc3Vic3RyaW5nKGkrMSwgY2xvc2UpKX07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBpaSA9IGk7XG5cdFx0XHR3aGlsZSAoaWkgPCBlbmQgJiYgIXRoaXMuaXNXaGl0ZVNwYWNlKGxpbmVbaWldKSAmJiBsaW5lW2lpXSAhPT0gJz0nKVxuXHRcdFx0XHRpaSsrO1xuXHRcdFx0cmV0dXJuIHtsZW46IGlpLXN0YXJ0KzEsIHRva2VuOiBsaW5lLnN1YnN0cmluZyhpLCBpaSl9O1xuXHRcdH1cblx0fTtcblxuXHR2YXIgY2hhck1hcCA9IHtcblx0XHRcImBhXCI6ICfDoCcsIFwiJ2FcIjogXCLDoVwiLCBcIl5hXCI6IFwiw6JcIiwgXCJ+YVwiOiBcIsOjXCIsIFwiXFxcImFcIjogXCLDpFwiLCBcIm9hXCI6IFwiw6VcIiwgXCJhYVwiOiBcIsOlXCIsIFwiPWFcIjogXCLEgVwiLCBcInVhXCI6IFwixINcIiwgXCI7YVwiOiBcIsSFXCIsXG5cdFx0XCJgZVwiOiAnw6gnLCBcIidlXCI6IFwiw6lcIiwgXCJeZVwiOiBcIsOqXCIsIFwiXFxcImVcIjogXCLDq1wiLCBcIj1lXCI6IFwixJNcIiwgXCJ1ZVwiOiBcIsSVXCIsIFwiO2VcIjogXCLEmVwiLCBcIi5lXCI6IFwixJdcIixcblx0XHRcImBpXCI6ICfDrCcsIFwiJ2lcIjogXCLDrVwiLCBcIl5pXCI6IFwiw65cIiwgXCJcXFwiaVwiOiBcIsOvXCIsIFwiPWlcIjogXCLEq1wiLCBcInVpXCI6IFwixK1cIiwgXCI7aVwiOiBcIsSvXCIsXG5cdFx0XCJgb1wiOiAnw7InLCBcIidvXCI6IFwiw7NcIiwgXCJeb1wiOiBcIsO0XCIsIFwifm9cIjogXCLDtVwiLCBcIlxcXCJvXCI6IFwiw7ZcIiwgXCI9b1wiOiBcIsWNXCIsIFwidW9cIjogXCLFj1wiLCBcIi9vXCI6IFwiw7hcIixcblx0XHRcImB1XCI6ICfDuScsIFwiJ3VcIjogXCLDulwiLCBcIl51XCI6IFwiw7tcIiwgXCJ+dVwiOiBcIsWpXCIsIFwiXFxcInVcIjogXCLDvFwiLCBcIm91XCI6IFwixa9cIiwgXCI9dVwiOiBcIsWrXCIsIFwidXVcIjogXCLFrVwiLCBcIjt1XCI6IFwixbNcIixcblx0XHRcImBBXCI6ICfDgCcsIFwiJ0FcIjogXCLDgVwiLCBcIl5BXCI6IFwiw4JcIiwgXCJ+QVwiOiBcIsODXCIsIFwiXFxcIkFcIjogXCLDhFwiLCBcIm9BXCI6IFwiw4VcIiwgXCJBQVwiOiBcIsOFXCIsIFwiPUFcIjogXCLEgFwiLCBcInVBXCI6IFwixIJcIiwgXCI7QVwiOiBcIsSEXCIsXG5cdFx0XCJgRVwiOiAnw4gnLCBcIidFXCI6IFwiw4lcIiwgXCJeRVwiOiBcIsOKXCIsIFwiXFxcIkVcIjogXCLDi1wiLCBcIj1FXCI6IFwixJJcIiwgXCJ1RVwiOiBcIsSUXCIsIFwiO0VcIjogXCLEmFwiLCBcIi5FXCI6IFwixJZcIixcblx0XHRcImBJXCI6ICfDjCcsIFwiJ0lcIjogXCLDjVwiLCBcIl5JXCI6IFwiw45cIiwgXCJ+SVwiOiBcIsSoXCIsIFwiXFxcIklcIjogXCLDj1wiLCBcIj1JXCI6IFwixKpcIiwgXCJ1SVwiOiBcIsSsXCIsIFwiO0lcIjogXCLErlwiLCBcIi5JXCI6IFwixLBcIixcblx0XHRcImBPXCI6ICfDkicsIFwiJ09cIjogXCLDk1wiLCBcIl5PXCI6IFwiw5RcIiwgXCJ+T1wiOiBcIsOVXCIsIFwiXFxcIk9cIjogXCLDllwiLCBcIj1PXCI6IFwixYxcIiwgXCJ1T1wiOiBcIsWOXCIsIFwiL09cIjogXCLDmFwiLFxuXHRcdFwiYFVcIjogJ8OZJywgXCInVVwiOiBcIsOaXCIsIFwiXlVcIjogXCLDm1wiLCBcIn5VXCI6IFwixahcIiwgXCJcXFwiVVwiOiBcIsOcXCIsIFwib1VcIjogXCLFrlwiLCBcIj1VXCI6IFwixapcIiwgXCJ1VVwiOiBcIsWsXCIsIFwiO1VcIjogXCLFslwiLFxuXHRcdFwiYWVcIjogXCLDplwiLCBcIkFFXCI6IFwiw4ZcIiwgXCJvZVwiOiBcIsWTXCIsIFwiT0VcIjogXCLFklwiLCBcInNzXCI6IFwiw59cIixcblx0XHRcIidjXCI6IFwixIdcIiwgXCJeY1wiOiBcIsSJXCIsIFwidWNcIjogXCLEjVwiLCBcImNjXCI6IFwiw6dcIiwgXCIuY1wiOiBcIsSLXCIsIFwiY0NcIjogXCLDh1wiLCBcIidDXCI6IFwixIZcIiwgXCJeQ1wiOiBcIsSIXCIsIFwidUNcIjogXCLEjFwiLCBcIi5DXCI6IFwixIpcIixcblx0XHRcIn5OXCI6IFwiw5FcIiwgXCJ+blwiOiBcIsOxXCIsXG5cdFx0XCI9c1wiOiBcIsWhXCIsIFwidnNcIjogXCLFoVwiLFxuXHRcdFwiREhcIjogXCLDkFwiLCBcImRoXCI6IFwiw7BcIixcblx0XHRcIkhPXCI6IFwixZBcIiwgXCJIb1wiOiBcIsWRXCIsIFwiSFVcIjogXCLFsFwiLCBcIkh1XCI6IFwixbFcIixcblx0XHRcIidZXCI6IFwiw51cIiwgXCIneVwiOiBcIsO9XCIsIFwiXllcIjogXCLFtlwiLCBcIl55XCI6IFwixbdcIiwgXCJcXFwiWVwiOiBcIsW4XCIsIFwiXFxcInlcIjogXCLDv1wiLFxuXHRcdFwidlNcIjogXCLFoFwiLCBcInZaXCI6IFwixb1cIiwgXCJ2elwiOiAnxb4nXG5cbi8vIE1vcmUgY2hhcnM6IMSyIMSzIMSOIMSPIMSQIMSRIMScIMSdIMSeIMSfIMSgIMShIMSiIMSjIMSkIMSlIMSmIMSnIMS0IMS1IMS2IMS3IMS4IMS5IMS6IMS7IMS8IMS9IMS+IMS/IMWAIMWBIMWCIMWDIMWEIMWFIMWGIMWHIMWIIMWJIMWKIMWLIMWUIMWVIMWWIMWXIMWYIMWZIMWaIMWbIMWcIMWdIMWeIMWfIMWgIMWiIMWjIMWkIMWlIMWmIMWnIMW0IMW1IMW5IMW6IMW7IMW8IMW9XG5cdH07XG5cdHZhciBjaGFyTWFwMSA9IHtcblx0XHRcIiNcIjogXCLima9cIixcblx0XHRcImJcIjogXCLima1cIixcblx0XHRcIj1cIjogXCLima5cIlxuXHR9O1xuXHR2YXIgY2hhck1hcDIgPSB7XG5cdFx0XCIyMDFcIjogXCLima9cIixcblx0XHRcIjIwMlwiOiBcIuKZrVwiLFxuXHRcdFwiMjAzXCI6IFwi4pmuXCIsXG5cdFx0XCIyNDFcIjogXCLCoVwiLFxuXHRcdFwiMjQyXCI6IFwiwqJcIiwgXCIyNTJcIjogXCJhXCIsIFwiMjYyXCI6IFwiMlwiLCBcIjI3MlwiOiBcIm9cIiwgXCIzMDJcIjogXCLDglwiLCBcIjMxMlwiOiBcIsOKXCIsIFwiMzIyXCI6IFwiw5JcIiwgXCIzMzJcIjogXCLDmlwiLCBcIjM0MlwiOiBcIsOiXCIsIFwiMzUyXCI6IFwiw6pcIiwgXCIzNjJcIjogXCLDslwiLCBcIjM3MlwiOiBcIsO6XCIsXG5cdFx0XCIyNDNcIjogXCLCo1wiLCBcIjI1M1wiOiBcIsKrXCIsIFwiMjYzXCI6IFwiM1wiLCBcIjI3M1wiOiBcIsK7XCIsIFwiMzAzXCI6IFwiw4NcIiwgXCIzMTNcIjogXCLDi1wiLCBcIjMyM1wiOiBcIsOTXCIsIFwiMzMzXCI6IFwiw5tcIiwgXCIzNDNcIjogXCLDo1wiLCBcIjM1M1wiOiBcIsOrXCIsIFwiMzYzXCI6IFwiw7NcIiwgXCIzNzNcIjogXCLDu1wiLFxuXHRcdFwiMjQ0XCI6IFwiwqRcIiwgXCIyNTRcIjogXCLCrFwiLCBcIjI2NFwiOiBcIiAgzIFcIiwgXCIyNzRcIjogXCIx4oGENFwiLCBcIjMwNFwiOiBcIsOEXCIsIFwiMzE0XCI6IFwiw4xcIiwgXCIzMjRcIjogXCLDlFwiLCBcIjMzNFwiOiBcIsOcXCIsIFwiMzQ0XCI6IFwiw6RcIiwgXCIzNTRcIjogXCLDrFwiLCBcIjM2NFwiOiBcIsO0XCIsIFwiMzc0XCI6IFwiw7xcIixcblx0XHRcIjI0NVwiOiBcIsKlXCIsIFwiMjU1XCI6IFwiLVwiLCBcIjI2NVwiOiBcIs68XCIsIFwiMjc1XCI6IFwiMeKBhDJcIiwgXCIzMDVcIjogXCLDhVwiLCBcIjMxNVwiOiBcIsONXCIsIFwiMzI1XCI6IFwiw5VcIiwgXCIzMzVcIjogXCLDnVwiLCAgXCIzNDVcIjogXCLDpVwiLCBcIjM1NVwiOiBcIsOtXCIsIFwiMzY1XCI6IFwiw7VcIiwgXCIzNzVcIjogXCLDvVwiLFxuXHRcdFwiMjQ2XCI6IFwiwqZcIiwgXCIyNTZcIjogXCLCrlwiLCBcIjI2NlwiOiBcIsK2XCIsIFwiMjc2XCI6IFwiM+KBhDRcIiwgXCIzMDZcIjogXCLDhlwiLCBcIjMxNlwiOiBcIsOOXCIsIFwiMzI2XCI6IFwiw5ZcIiwgXCIzMzZcIjogXCLDnlwiLCBcIjM0NlwiOiBcIsOmXCIsIFwiMzU2XCI6IFwiw65cIiwgXCIzNjZcIjogXCLDtlwiLCBcIjM3NlwiOiBcIsO+XCIsXG5cdFx0XCIyNDdcIjogXCLCp1wiLCBcIjI1N1wiOiBcIiDMhFwiLCBcIjI2N1wiOiBcIsK3XCIsIFwiMjc3XCI6IFwiwr9cIiwgXCIzMDdcIjogXCLDh1wiLCBcIjMxN1wiOiBcIsOPXCIsIFwiMzI3XCI6IFwiw5dcIiwgXCIzMzdcIjogXCLDn1wiLCBcIjM0N1wiOiBcIsOnXCIsIFwiMzU3XCI6IFwiw69cIiwgXCIzNjdcIjogXCLDt1wiLCBcIjM3N1wiOiBcIsO/XCIsXG5cdFx0XCIyNTBcIjogXCIgzIhcIiwgXCIyNjBcIjogXCLCsFwiLCBcIjI3MFwiOiBcIiDMp1wiLCBcIjMwMFwiOiBcIsOAXCIsIFwiMzEwXCI6IFwiw4hcIiwgXCIzMjBcIjogXCLDkFwiLCBcIjMzMFwiOiBcIsOYXCIsIFwiMzQwXCI6IFwiw6BcIiwgXCIzNTBcIjogXCLDqFwiLCBcIjM2MFwiOiBcIsOwXCIsIFwiMzcwXCI6IFwiw7hcIixcblx0XHRcIjI1MVwiOiBcIsKpXCIsIFwiMjYxXCI6IFwiwrFcIiwgXCIyNzFcIjogXCIxXCIsIFwiMzAxXCI6IFwiw4FcIiwgXCIzMTFcIjogXCLDiVwiLCBcIjMyMVwiOiBcIsORXCIsIFwiMzMxXCI6IFwiw5lcIiwgXCIzNDFcIjogXCLDoVwiLCBcIjM1MVwiOiBcIsOpXCIsIFwiMzYxXCI6IFwiw7FcIiwgXCIzNzFcIjogXCLDuVwiIH07XG5cdHRoaXMudHJhbnNsYXRlU3RyaW5nID0gZnVuY3Rpb24oc3RyKSB7XG5cdFx0dmFyIGFyciA9IHN0ci5zcGxpdCgnXFxcXCcpO1xuXHRcdGlmIChhcnIubGVuZ3RoID09PSAxKSByZXR1cm4gc3RyO1xuXHRcdHZhciBvdXQgPSBudWxsO1xuXHRcdGFyci5mb3JFYWNoKGZ1bmN0aW9uKHMpIHtcblx0XHRcdGlmIChvdXQgPT09IG51bGwpXG5cdFx0XHRcdG91dCA9IHM7XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dmFyIGMgPSBjaGFyTWFwW3Muc3Vic3RyaW5nKDAsIDIpXTtcblx0XHRcdFx0aWYgKGMgIT09IHVuZGVmaW5lZClcblx0XHRcdFx0XHRvdXQgKz0gYyArIHMuc3Vic3RyaW5nKDIpO1xuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRjID0gY2hhck1hcDJbcy5zdWJzdHJpbmcoMCwgMyldO1xuXHRcdFx0XHRcdGlmIChjICE9PSB1bmRlZmluZWQpXG5cdFx0XHRcdFx0XHRvdXQgKz0gYyArIHMuc3Vic3RyaW5nKDMpO1xuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0YyA9IGNoYXJNYXAxW3Muc3Vic3RyaW5nKDAsIDEpXTtcblx0XHRcdFx0XHRcdGlmIChjICE9PSB1bmRlZmluZWQpXG5cdFx0XHRcdFx0XHRcdG91dCArPSBjICsgcy5zdWJzdHJpbmcoMSk7XG5cdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdG91dCArPSBcIlxcXFxcIiArIHM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIG91dDtcblx0fTtcblx0dGhpcy5nZXROdW1iZXIgPSBmdW5jdGlvbihsaW5lLCBpbmRleCkge1xuXHRcdHZhciBudW0gPSAwO1xuXHRcdHdoaWxlIChpbmRleCA8IGxpbmUubGVuZ3RoKSB7XG5cdFx0XHRzd2l0Y2ggKGxpbmVbaW5kZXhdKSB7XG5cdFx0XHRcdGNhc2UgJzAnOm51bSA9IG51bSoxMDtpbmRleCsrO2JyZWFrO1xuXHRcdFx0XHRjYXNlICcxJzpudW0gPSBudW0qMTArMTtpbmRleCsrO2JyZWFrO1xuXHRcdFx0XHRjYXNlICcyJzpudW0gPSBudW0qMTArMjtpbmRleCsrO2JyZWFrO1xuXHRcdFx0XHRjYXNlICczJzpudW0gPSBudW0qMTArMztpbmRleCsrO2JyZWFrO1xuXHRcdFx0XHRjYXNlICc0JzpudW0gPSBudW0qMTArNDtpbmRleCsrO2JyZWFrO1xuXHRcdFx0XHRjYXNlICc1JzpudW0gPSBudW0qMTArNTtpbmRleCsrO2JyZWFrO1xuXHRcdFx0XHRjYXNlICc2JzpudW0gPSBudW0qMTArNjtpbmRleCsrO2JyZWFrO1xuXHRcdFx0XHRjYXNlICc3JzpudW0gPSBudW0qMTArNztpbmRleCsrO2JyZWFrO1xuXHRcdFx0XHRjYXNlICc4JzpudW0gPSBudW0qMTArODtpbmRleCsrO2JyZWFrO1xuXHRcdFx0XHRjYXNlICc5JzpudW0gPSBudW0qMTArOTtpbmRleCsrO2JyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdHJldHVybiB7bnVtOiBudW0sIGluZGV4OiBpbmRleH07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB7bnVtOiBudW0sIGluZGV4OiBpbmRleH07XG5cdH07XG5cblx0dGhpcy5nZXRGcmFjdGlvbiA9IGZ1bmN0aW9uKGxpbmUsIGluZGV4KSB7XG5cdFx0dmFyIG51bSA9IDE7XG5cdFx0dmFyIGRlbiA9IDE7XG5cdFx0aWYgKGxpbmVbaW5kZXhdICE9PSAnLycpIHtcblx0XHRcdHZhciByZXQgPSB0aGlzLmdldE51bWJlcihsaW5lLCBpbmRleCk7XG5cdFx0XHRudW0gPSByZXQubnVtO1xuXHRcdFx0aW5kZXggPSByZXQuaW5kZXg7XG5cdFx0fVxuXHRcdGlmIChsaW5lW2luZGV4XSA9PT0gJy8nKSB7XG5cdFx0XHRpbmRleCsrO1xuXHRcdFx0aWYgKGxpbmVbaW5kZXhdID09PSAnLycpIHtcblx0XHRcdFx0dmFyIGRpdiA9IDAuNTtcblx0XHRcdFx0d2hpbGUgKGxpbmVbaW5kZXgrK10gPT09ICcvJylcblx0XHRcdFx0XHRkaXYgPSBkaXYgLzI7XG5cdFx0XHRcdHJldHVybiB7dmFsdWU6IG51bSAqIGRpdiwgaW5kZXg6IGluZGV4LTF9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFyIGlTYXZlID0gaW5kZXg7XG5cdFx0XHRcdHZhciByZXQyID0gdGhpcy5nZXROdW1iZXIobGluZSwgaW5kZXgpO1xuXHRcdFx0XHRpZiAocmV0Mi5udW0gPT09IDAgJiYgaVNhdmUgPT09IGluZGV4KVx0Ly8gSWYgd2UgZGlkbid0IHVzZSBhbnkgY2hhcmFjdGVycywgaXQgaXMgYW4gaW1wbGllZCAyXG5cdFx0XHRcdFx0cmV0Mi5udW0gPSAyO1xuXHRcdFx0XHRpZiAocmV0Mi5udW0gIT09IDApXG5cdFx0XHRcdFx0ZGVuID0gcmV0Mi5udW07XG5cdFx0XHRcdGluZGV4ID0gcmV0Mi5pbmRleDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4ge3ZhbHVlOiBudW0vZGVuLCBpbmRleDogaW5kZXh9O1xuXHR9O1xuXG4vL1xuLy8gTUFFIDEwIEphbiAyMDIzIC0gRm9yIGJldHRlciBoYW5kbGluZyBvZiB0dW5lcyB0aGF0IGhhdmUgdHVuZSBudW1iZXJzIGluIGZyb250IG9mIHRoZW0uXG4vL1xuLy8gUHJldmlvdXMgdmVyc2lvbiB3b3VsZCB0YWtlOlxuLy8gMjEuIFdvbWFuIG9mIHRoZSBIb3VzZSwgVGhlXG4vLyBhbmQgcmV0dXJuOlxuLy8gVGhlIDIxLiBXb21hbiBvZiB0aGUgSG91c2Vcbi8vIFxuLy8gVGhpcyBmaXggcmVzdWx0cyBpbjpcbi8vIDIxLiBUaGUgV29tYW4gb2YgdGhlIEhvdXNlXG4vL1xuLy8gQWxzbyBhZGRlZCBhZGRpdGlvbmFsIGNoZWNrcyBhbmQgaGFuZGxlcnMgZm9yIGxvd2VyIGNhc2UgXCIsIHRoZVwiIGFuZCBcIiwgYVwiIHNpbmNlIEkgZm91bmQgc2V2ZXJhbCB0dW5lIGNvbGxlY3Rpb25zIHdpdGggdGhvc2UgdHVuZSBuYW1lIGNvbnN0cnVjdHNcbi8vXG4vLyBGaW5kIGFuIG9wdGlvbmFsIHRpdGxlIG51bWJlciBhdCB0aGUgc3RhcnQgb2YgYSB0dW5lIHRpdGxlXG5mdW5jdGlvbiBnZXRUaXRsZU51bWJlcihzdHIpe1xuXG4gIGNvbnN0IHJlZ2V4ID0gL14oXFxkKylcXC4vO1xuXG4gIC8vIFVzZSB0aGUgZXhlYyBtZXRob2QgdG8gc2VhcmNoIGZvciB0aGUgcGF0dGVybiBpbiB0aGUgc3RyaW5nXG4gIGNvbnN0IG1hdGNoID0gcmVnZXguZXhlYyhzdHIpO1xuXG4gIC8vIENoZWNrIGlmIGEgbWF0Y2ggaXMgZm91bmRcbiAgaWYgKG1hdGNoKSB7XG5cblx0Ly8gVGhlIG1hdGNoZWQgbnVtYmVyIGlzIGNhcHR1cmVkIGluIHRoZSBmaXJzdCBncm91cCAoaW5kZXggMSlcblx0Y29uc3QgZm91bmROdW1iZXIgPSBtYXRjaFsxXTtcblx0cmV0dXJuIGZvdW5kTnVtYmVyO1xuXG4gIH0gZWxzZSB7XG5cblx0Ly8gUmV0dXJuIG51bGwgaWYgbm8gbWF0Y2ggaXMgZm91bmRcblx0cmV0dXJuIG51bGw7XG5cdFxuICB9XG5cbn1cblxudmFyIHRoZVBhdHRlcm5zID0gW1xuXHR7IG1hdGNoOiAvLFxccypUaGUkLywgcmVwbGFjZTogXCJUaGUgXCIgfSxcblx0eyBtYXRjaDogLyxcXHMqdGhlJC8sIHJlcGxhY2U6IFwidGhlIFwiIH0sXG5cdHsgbWF0Y2g6IC8sXFxzKkEkLywgcmVwbGFjZTogXCJBIFwiIH0sXG5cdHsgbWF0Y2g6IC8sXFxzKmEkLywgcmVwbGFjZTogXCJhIFwiIH0sXG5cdHsgbWF0Y2g6IC8sXFxzKkFuJC8sIHJlcGxhY2U6IFwiQW4gXCIgfSxcblx0eyBtYXRjaDogLyxcXHMqYW4kLywgcmVwbGFjZTogXCJhbiBcIiB9LFxuXHR7IG1hdGNoOiAvLFxccypEYSQvLCByZXBsYWNlOiBcIkRhIFwiIH0sXG5cdHsgbWF0Y2g6IC8sXFxzKkxhJC8sIHJlcGxhY2U6IFwiTGEgXCIgfSxcblx0eyBtYXRjaDogLyxcXHMqTGUkLywgcmVwbGFjZTogXCJMZSBcIiB9LFxuXHR7IG1hdGNoOiAvLFxccypMZXMkLywgcmVwbGFjZTogXCJMZXMgXCIgfSxcblx0eyBtYXRjaDogLyxcXHMqWWUkLywgcmVwbGFjZTogXCJZZSBcIiB9LFxuXVxuXG50aGlzLnRoZVJldmVyc2VyID0gZnVuY3Rpb24gKHN0cikge1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGVQYXR0ZXJucy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciB0aGlzUGF0dGVybiA9IHRoZVBhdHRlcm5zW2ldXG5cdFx0dmFyIG1hdGNoID0gc3RyLm1hdGNoKHRoaXNQYXR0ZXJuLm1hdGNoKVxuXHRcdGlmIChtYXRjaCkge1xuXHRcdFx0dmFyIHRoZVRpdGxlTnVtYmVyID0gZ2V0VGl0bGVOdW1iZXIoc3RyKTtcblx0XHRcdGlmICh0aGVUaXRsZU51bWJlcil7XG5cdFx0XG5cdFx0XHQgIC8vY29uc29sZS5sb2coXCJ0aGVSZXZlcnNlciBUaGUgdGl0bGVudW1iZXI6XCIrdGhlVGl0bGVOdW1iZXIpOyBcblx0XHRcblx0XHRcdCAgc3RyID0gc3RyLnJlcGxhY2UodGhlVGl0bGVOdW1iZXIrXCIuXCIsXCJcIik7XG5cdFx0XHQgIHN0ciA9IHN0ci50cmltKCk7XG5cdFx0XHR9XG5cdFx0XHR2YXIgbGVuID0gbWF0Y2hbMF0ubGVuZ3RoXG5cdFx0XHR2YXIgcmVzdWx0ID0gdGhpc1BhdHRlcm4ucmVwbGFjZSArIHN0ci5zdWJzdHJpbmcoMCwgc3RyLmxlbmd0aCAtIGxlbik7XG5cdFx0XG5cdFx0XHRpZiAodGhlVGl0bGVOdW1iZXIpe1xuXHRcdFx0ICByZXN1bHQgPSB0aGVUaXRsZU51bWJlcitcIi4gXCIrcmVzdWx0O1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXG5cdFx0fVxuXHR9XG5cbiAgICByZXR1cm4gc3RyO1xuXG4gIH07XG5cblx0dGhpcy5zdHJpcENvbW1lbnQgPSBmdW5jdGlvbihzdHIpIHtcblx0XHR2YXIgaSA9IHN0ci5pbmRleE9mKCclJyk7XG5cdFx0aWYgKGkgPj0gMClcblx0XHRcdHJldHVybiBwYXJzZUNvbW1vbi5zdHJpcChzdHIuc3Vic3RyaW5nKDAsIGkpKTtcblx0XHRyZXR1cm4gcGFyc2VDb21tb24uc3RyaXAoc3RyKTtcblx0fTtcblxuXHR0aGlzLmdldEludCA9IGZ1bmN0aW9uKHN0cikge1xuXHRcdC8vIFRoaXMgcGFyc2VzIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN0cmluZyBmb3IgYSBudW1iZXIgYW5kIHJldHVybnMgeyB2YWx1ZTogbnVtLCBkaWdpdHM6IG51bSB9XG5cdFx0Ly8gSWYgZGlnaXRzIGlzIDAsIHRoZW4gdGhlIHN0cmluZyBkaWRuJ3QgcG9pbnQgdG8gYSBudW1iZXIuXG5cdFx0dmFyIHggPSBwYXJzZUludChzdHIpO1xuXHRcdGlmIChpc05hTih4KSlcblx0XHRcdHJldHVybiB7ZGlnaXRzOiAwfTtcblx0XHR2YXIgcyA9IFwiXCIgKyB4O1xuXHRcdHZhciBpID0gc3RyLmluZGV4T2Yocyk7XHQvLyBUaGlzIGlzIHRvIGFjY291bnQgZm9yIGxlYWRpbmcgc3BhY2VzXG5cdFx0cmV0dXJuIHt2YWx1ZTogeCwgZGlnaXRzOiBpK3MubGVuZ3RofTtcblx0fTtcblxuXHR0aGlzLmdldEZsb2F0ID0gZnVuY3Rpb24oc3RyKSB7XG5cdFx0Ly8gVGhpcyBwYXJzZXMgdGhlIGJlZ2lubmluZyBvZiB0aGUgc3RyaW5nIGZvciBhIG51bWJlciBhbmQgcmV0dXJucyB7IHZhbHVlOiBudW0sIGRpZ2l0czogbnVtIH1cblx0XHQvLyBJZiBkaWdpdHMgaXMgMCwgdGhlbiB0aGUgc3RyaW5nIGRpZG4ndCBwb2ludCB0byBhIG51bWJlci5cblx0XHR2YXIgeCA9IHBhcnNlRmxvYXQoc3RyKTtcblx0XHRpZiAoaXNOYU4oeCkpXG5cdFx0XHRyZXR1cm4ge2RpZ2l0czogMH07XG5cdFx0dmFyIHMgPSBcIlwiICsgeDtcblx0XHR2YXIgaSA9IHN0ci5pbmRleE9mKHMpO1x0Ly8gVGhpcyBpcyB0byBhY2NvdW50IGZvciBsZWFkaW5nIHNwYWNlc1xuXHRcdHJldHVybiB7dmFsdWU6IHgsIGRpZ2l0czogaStzLmxlbmd0aH07XG5cdH07XG5cblx0dGhpcy5nZXRNZWFzdXJlbWVudCA9IGZ1bmN0aW9uKHRva2Vucykge1xuXHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSByZXR1cm4geyB1c2VkOiAwIH07XG5cdFx0dmFyIHVzZWQgPSAxO1xuXHRcdHZhciBudW0gPSAnJztcblx0XHRpZiAodG9rZW5zWzBdLnRva2VuID09PSAnLScpIHtcblx0XHRcdHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0bnVtID0gJy0nO1xuXHRcdFx0dXNlZCsrO1xuXHRcdH1cblx0XHRlbHNlIGlmICh0b2tlbnNbMF0udHlwZSAhPT0gJ251bWJlcicpIHJldHVybiB7IHVzZWQ6IDAgfTtcblx0XHRudW0gKz0gdG9rZW5zLnNoaWZ0KCkudG9rZW47XG5cdFx0aWYgKHRva2Vucy5sZW5ndGggPT09IDApIHJldHVybiB7IHVzZWQ6IDEsIHZhbHVlOiBwYXJzZUludChudW0pIH07XG5cdFx0dmFyIHggPSB0b2tlbnMuc2hpZnQoKTtcblx0XHRpZiAoeC50b2tlbiA9PT0gJy4nKSB7XG5cdFx0XHR1c2VkKys7XG5cdFx0XHRpZiAodG9rZW5zLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHsgdXNlZDogdXNlZCwgdmFsdWU6IHBhcnNlSW50KG51bSkgfTtcblx0XHRcdGlmICh0b2tlbnNbMF0udHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0eCA9IHRva2Vucy5zaGlmdCgpO1xuXHRcdFx0XHRudW0gPSBudW0gKyAnLicgKyB4LnRva2VuO1xuXHRcdFx0XHR1c2VkKys7XG5cdFx0XHRcdGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSByZXR1cm4geyB1c2VkOiB1c2VkLCB2YWx1ZTogcGFyc2VGbG9hdChudW0pIH07XG5cdFx0XHR9XG5cdFx0XHR4ID0gdG9rZW5zLnNoaWZ0KCk7XG5cdFx0fVxuXHRcdHN3aXRjaCAoeC50b2tlbikge1xuXHRcdFx0Y2FzZSAncHQnOiByZXR1cm4geyB1c2VkOiB1c2VkKzEsIHZhbHVlOiBwYXJzZUZsb2F0KG51bSkgfTtcblx0XHRcdGNhc2UgJ3B4JzogcmV0dXJuIHsgdXNlZDogdXNlZCsxLCB2YWx1ZTogcGFyc2VGbG9hdChudW0pIH07XG5cdFx0XHRjYXNlICdjbSc6IHJldHVybiB7IHVzZWQ6IHVzZWQrMSwgdmFsdWU6IHBhcnNlRmxvYXQobnVtKS8yLjU0KjcyIH07XG5cdFx0XHRjYXNlICdpbic6IHJldHVybiB7IHVzZWQ6IHVzZWQrMSwgdmFsdWU6IHBhcnNlRmxvYXQobnVtKSo3MiB9O1xuXHRcdFx0ZGVmYXVsdDogdG9rZW5zLnVuc2hpZnQoeCk7IHJldHVybiB7IHVzZWQ6IHVzZWQsIHZhbHVlOiBwYXJzZUZsb2F0KG51bSkgfTtcblx0XHR9XG5cdH07XG5cdHZhciBzdWJzdEluQ2hvcmQgPSBmdW5jdGlvbihzdHIpIHtcblx0XHRzdHIgPSBzdHIucmVwbGFjZSgvXFxcXG4vZywgXCJcXG5cIik7XG5cdFx0c3RyID0gc3RyLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKTtcblx0XHRyZXR1cm4gc3RyO1xuXHR9O1xuXHR0aGlzLmdldEJyYWNrZXR0ZWRTdWJzdHJpbmcgPSBmdW5jdGlvbihsaW5lLCBpLCBtYXhFcnJvckNoYXJzLCBfbWF0Y2hDaGFyKVxuXHR7XG5cdFx0Ly8gVGhpcyBleHRyYWN0cyB0aGUgc3ViIHN0cmluZyBieSBsb29raW5nIGF0IHRoZSBmaXJzdCBjaGFyYWN0ZXIgYW5kIHNlYXJjaGluZyBmb3IgdGhhdFxuXHRcdC8vIGNoYXJhY3RlciBsYXRlciBpbiB0aGUgbGluZSAob3Igc2VhcmNoIGZvciB0aGUgb3B0aW9uYWwgX21hdGNoQ2hhcikuXG5cdFx0Ly8gRm9yIGluc3RhbmNlLCBpZiB0aGUgZmlyc3QgY2hhcmFjdGVyIGlzIGEgcXVvdGUgaXQgd2lsbCBsb29rIGZvclxuXHRcdC8vIHRoZSBlbmQgcXVvdGUuIElmIHRoZSBlbmQgb2YgdGhlIGxpbmUgaXMgcmVhY2hlZCwgdGhlbiBvbmx5IHVwIHRvIHRoZSBkZWZhdWx0IG51bWJlclxuXHRcdC8vIG9mIGNoYXJhY3RlcnMgYXJlIHJldHVybmVkLCBzbyB0aGF0IGEgbWlzc2luZyBlbmQgcXVvdGUgd29uJ3QgZWF0IHVwIHRoZSBlbnRpcmUgbGluZS5cblx0XHQvLyBJdCByZXR1cm5zIHRoZSBzdWJzdHJpbmcgYW5kIHRoZSBudW1iZXIgb2YgY2hhcmFjdGVycyBjb25zdW1lZC5cblx0XHQvLyBUaGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgY29uc3VtZWQgaXMgbm9ybWFsbHkgdHdvIG1vcmUgdGhhbiB0aGUgc2l6ZSBvZiB0aGUgc3Vic3RyaW5nLFxuXHRcdC8vIGJ1dCBpbiB0aGUgZXJyb3IgY2FzZSBpdCBtaWdodCBub3QgYmUuXG5cdFx0dmFyIG1hdGNoQ2hhciA9IF9tYXRjaENoYXIgfHwgbGluZVtpXTtcblx0XHR2YXIgcG9zID0gaSsxO1xuXHRcdHZhciBlc2MgPSBmYWxzZTtcblx0XHR3aGlsZSAoKHBvcyA8IGxpbmUubGVuZ3RoKSAmJiAoZXNjIHx8IGxpbmVbcG9zXSAhPT0gbWF0Y2hDaGFyKSkge1xuXHRcdFx0ZXNjID0gbGluZVtwb3NdID09PSAnXFxcXCc7XG5cdFx0XHQrK3Bvcztcblx0XHR9XG5cdFx0aWYgKGxpbmVbcG9zXSA9PT0gbWF0Y2hDaGFyKVxuXHRcdFx0cmV0dXJuIFtwb3MtaSsxLHN1YnN0SW5DaG9yZChsaW5lLnN1YnN0cmluZyhpKzEsIHBvcykpLCB0cnVlXTtcblx0XHRlbHNlXHQvLyB3ZSBoaXQgdGhlIGVuZCBvZiBsaW5lLCBzbyB3ZSdsbCBqdXN0IHBpY2sgYW4gYXJiaXRyYXJ5IG51bSBvZiBjaGFycyBzbyB0aGUgbGluZSBkb2Vzbid0IGRpc2FwcGVhci5cblx0XHR7XG5cdFx0XHRwb3MgPSBpK21heEVycm9yQ2hhcnM7XG5cdFx0XHRpZiAocG9zID4gbGluZS5sZW5ndGgtMSlcblx0XHRcdFx0cG9zID0gbGluZS5sZW5ndGgtMTtcblx0XHRcdHJldHVybiBbcG9zLWkrMSwgc3Vic3RJbkNob3JkKGxpbmUuc3Vic3RyaW5nKGkrMSwgcG9zKSksIGZhbHNlXTtcblx0XHR9XG5cdH07XG59O1xuXG5Ub2tlbml6ZXIucHJvdG90eXBlLnBlZWtMaW5lID0gZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzLmxpbmVzW3RoaXMubGluZUluZGV4XVxufVxuXG5Ub2tlbml6ZXIucHJvdG90eXBlLm5leHRMaW5lID0gZnVuY3Rpb24oKSB7XG5cdGlmICh0aGlzLmxpbmVJbmRleCA+IDApIHtcblx0XHR0aGlzLm11bHRpbGluZVZhcnMuaUNoYXIgKz0gdGhpcy5saW5lc1t0aGlzLmxpbmVJbmRleC0xXS5sZW5ndGggKyAxO1xuXHR9XG5cdGlmICh0aGlzLmxpbmVJbmRleCA8IHRoaXMubGluZXMubGVuZ3RoKSB7XG5cdFx0dmFyIHJlc3VsdCA9IHRoaXMubGluZXNbdGhpcy5saW5lSW5kZXhdXG5cdFx0dGhpcy5saW5lSW5kZXgrK1xuXHRcdHJldHVybiByZXN1bHRcblx0fVxuXHRyZXR1cm4gbnVsbFxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFRva2VuaXplcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/parse/abc_tokenizer.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/parse/abc_transpose.js":
/*!*******************************************************!*\
  !*** ./node_modules/abcjs/src/parse/abc_transpose.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_transpose.js: Handles the automatic transposition of key signatures, chord symbols, and notes.\n\nvar allNotes = __webpack_require__(/*! ./all-notes */ \"(ssr)/./node_modules/abcjs/src/parse/all-notes.js\");\nvar transposeChordName = __webpack_require__(/*! ../parse/transpose-chord */ \"(ssr)/./node_modules/abcjs/src/parse/transpose-chord.js\")\nvar keyAccidentals = __webpack_require__(/*! ../const/key-accidentals */ \"(ssr)/./node_modules/abcjs/src/const/key-accidentals.js\");\nvar transpose = {};\n\nvar keyIndex = {\n\t'C': 0,\n\t'C#': 1,\n\t'Db': 1,\n\t'D': 2,\n\t'D#': 3,\n\t'Eb': 3,\n\t'E': 4,\n\t'F': 5,\n\t'F#': 6,\n\t'Gb': 6,\n\t'G': 7,\n\t'G#': 8,\n\t'Ab': 8,\n\t'A': 9,\n\t'A#': 10,\n\t'Bb': 10,\n\t'B': 11\n};\nvar newKey = ['C', 'Db', 'D', 'Eb', 'E', 'F', 'F#', 'G', 'Ab', 'A', 'Bb', 'B'];\nvar newKeyMinor = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'Bb', 'B'];\n\ntranspose.keySignature = function(multilineVars, keyName, root, acc, localTranspose) {\n\tif (multilineVars.clef.type === \"perc\" || multilineVars.clef.type === \"none\")\n\t\treturn { accidentals: keyAccidentals(keyName), root: root, acc: acc };\n\tif (!localTranspose) localTranspose = 0;\n\tmultilineVars.localTransposeVerticalMovement = 0;\n\tmultilineVars.localTransposePreferFlats = false;\n\tvar k = keyAccidentals(keyName);\n\tif (!k) return multilineVars.key; // If the key isn't in the list, it is non-standard. We won't attempt to transpose it.\n\tmultilineVars.localTranspose = (multilineVars.globalTranspose ? multilineVars.globalTranspose : 0) + localTranspose;\n\n\tif (!multilineVars.localTranspose)\n\t\treturn { accidentals: k, root: root, acc: acc };\n\tmultilineVars.globalTransposeOrigKeySig = k;\n\tif (multilineVars.localTranspose % 12 === 0) {\n\t\tmultilineVars.localTransposeVerticalMovement = (multilineVars.localTranspose / 12) * 7;\n\t\treturn { accidentals: k, root: root, acc: acc };\n\t}\n\n\tvar baseKey = keyName[0];\n\tif (keyName[1] === 'b' || keyName[1] === '#') {\n\t\tbaseKey += keyName[1];\n\t\tkeyName = keyName.substr(2);\n\t} else\n\t\tkeyName = keyName.substr(1);\n\tvar thisKeyIndex = keyIndex[baseKey]\n\tvar recognized = thisKeyIndex !== undefined\n\tif (!recognized) {\n\t\t// Either the key sig is \"none\" or we don't recognize it. Either way we don't change it, and we assume key of C for the purposes of this calculation.\n\t\tthisKeyIndex = 0\n\t\tbaseKey = \"C\"\n\t\tkeyName = \"\"\n\t}\n\tvar index = thisKeyIndex + multilineVars.localTranspose;\n\twhile (index < 0) index += 12;\n\tif (index > 11) index = index % 12;\n\tvar newKeyName = (keyName[0] === 'm' ? newKeyMinor[index] : newKey[index]);\n\tvar transposedKey = newKeyName + keyName;\n\tvar newKeySig = keyAccidentals(transposedKey);\n\tif (newKeySig.length === 0 || newKeySig[0].acc === 'flat') // key of C and all keys with flats should have chords with flats\n\t\tmultilineVars.localTransposePreferFlats = true;\n\tvar distance = transposedKey.charCodeAt(0) - baseKey.charCodeAt(0);\n\tif (multilineVars.localTranspose > 0) {\n\t\tif (distance < 0)\n\t\t\tdistance += 7;\n\t\telse if (distance === 0) {\n\t\t\t// There's a funny thing that happens when the key changes only an accidental's distance, for instance, from Ab to A.\n\t\t\t// If the distance is positive (we are raising pitch), and the change is higher (that is, Ab -> A), then raise an octave.\n\t\t\t// This test is easier because we know the keys are not equal (or we wouldn't get this far), so if the base key is a flat key, then\n\t\t\t// the transposed key must be higher. Likewise, if the transposed key is sharp, then the base key must be lower. And one\n\t\t\t// of those two things must be true because they are not both natural.\n\t\t\tif (baseKey[1] === '#' ||  transposedKey[1] === 'b')\n\t\t\t\tdistance += 7;\n\t\t}\n\t} else if (multilineVars.localTranspose < 0) {\n\t\tif (distance > 0)\n\t\t\tdistance -= 7;\n\t\telse if (distance === 0) {\n\t\t\t// There's a funny thing that happens when the key changes only an accidental's distance, for instance, from Ab to A.\n\t\t\t// If the distance is negative (we are dropping pitch), and the change is lower (that is, A -> Ab), then drop an octave.\n\t\t\tif (baseKey[1] === 'b' ||  transposedKey[1] === '#')\n\t\t\t\tdistance -= 7;\n\t\t}\n\t}\n\n\tif (multilineVars.localTranspose > 0)\n\t\tmultilineVars.localTransposeVerticalMovement = distance + Math.floor(multilineVars.localTranspose / 12) * 7;\n\telse\n\t\tmultilineVars.localTransposeVerticalMovement = distance + Math.ceil(multilineVars.localTranspose / 12) * 7;\n\tif (recognized)\n\t\treturn { accidentals: newKeySig, root: newKeyName[0], acc: newKeyName.length > 1 ? newKeyName[1] : \"\" };\n\telse\n\t\treturn { accidentals: [], root: root, acc: acc };\n};\n\ntranspose.chordName = function(multilineVars, chord) {\n\treturn transposeChordName(chord, multilineVars.localTranspose, multilineVars.localTransposePreferFlats, multilineVars.freegchord)\n};\n\nvar pitchToLetter = [ 'c', 'd', 'e', 'f', 'g', 'a', 'b' ];\nfunction accidentalChange(origPitch, newPitch, accidental, origKeySig, newKeySig) {\n\tvar origPitchLetter = pitchToLetter[(origPitch + 49) % 7]; // Make sure it is a positive pitch before normalizing.\n\tvar origAccidental = 0;\n\tfor (var i = 0; i < origKeySig.length; i++) {\n\t\tif (origKeySig[i].note.toLowerCase() === origPitchLetter)\n\t\t\torigAccidental = accidentals[origKeySig[i].acc];\n\t}\n\n\tvar currentAccidental = accidentals[accidental];\n\tvar delta = currentAccidental - origAccidental;\n\n\tvar newPitchLetter = pitchToLetter[(newPitch + 49) % 7]; // Make sure it is a positive pitch before normalizing.\n\tvar newAccidental = 0;\n\tfor (var j = 0; j < newKeySig.accidentals.length; j++) {\n\t\tif (newKeySig.accidentals[j].note.toLowerCase() === newPitchLetter)\n\t\t\tnewAccidental = accidentals[newKeySig.accidentals[j].acc];\n\t}\n\tvar calcAccidental = delta + newAccidental;\n\tif (calcAccidental < -2) {\n\t\tnewPitch--;\n\t\tcalcAccidental += (newPitchLetter === 'c' || newPitchLetter === 'f') ? 1 : 2;\n\t}\n\tif (calcAccidental > 2) {\n\t\tnewPitch++;\n\t\tcalcAccidental -= (newPitchLetter === 'b' || newPitchLetter === 'e') ? 1 : 2;\n\t}\n\treturn [newPitch, calcAccidental];\n}\n\nvar accidentals = {\n\tdblflat: -2,\n\tflat: -1,\n\tnatural: 0,\n\tsharp: 1,\n\tdblsharp: 2\n};\nvar accidentals2 = {\n\t\"-2\": \"dblflat\",\n\t\"-1\": \"flat\",\n\t\"0\": \"natural\",\n\t\"1\": \"sharp\",\n\t\"2\": \"dblsharp\"\n};\nvar accidentals3 = {\n\t\"-2\": \"__\",\n\t\"-1\": \"_\",\n\t\"0\": \"=\",\n\t\"1\": \"^\",\n\t\"2\": \"^^\"\n};\n//var count = 0\ntranspose.note = function(multilineVars, el) {\n\t// the \"el\" that is passed in has el.name, el.accidental, and el.pitch. \"pitch\" is the vertical position (0=middle C)\n\t// localTranspose is the number of half steps\n\t// localTransposeVerticalMovement is the vertical distance to move.\n\t//console.log(count++,multilineVars.localTranspose, el)\n\tif (!multilineVars.localTranspose || multilineVars.clef.type === \"perc\")\n\t\treturn;\n\tvar origPitch = el.pitch;\n\tif (multilineVars.localTransposeVerticalMovement) {\n\t\tel.pitch = el.pitch + multilineVars.localTransposeVerticalMovement;\n\t\tif (el.name) {\n\t\t\tvar actual = el.accidental ? el.name.substring(1) : el.name\n\t\t\tvar acc = el.accidental ? el.name[0] : ''\n\t\t\tvar p = allNotes.pitchIndex(actual)\n\t\t\tel.name = acc + allNotes.noteName(p+multilineVars.localTransposeVerticalMovement)\n\t\t}\n\t}\n\n\tif (el.accidental) {\n\t\tvar ret = accidentalChange(origPitch, el.pitch, el.accidental, multilineVars.globalTransposeOrigKeySig, multilineVars.targetKey);\n\t\tel.pitch = ret[0];\n\t\tel.accidental = accidentals2[ret[1]];\n\t\tif (el.name) {\n\t\t\tel.name = accidentals3[ret[1]] + el.name.replace(/[_^=]/g,'');\n\t\t}\n\t}\n\n};\n\nmodule.exports = transpose;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL2FiY190cmFuc3Bvc2UuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsZUFBZSxtQkFBTyxDQUFDLHNFQUFhO0FBQ3BDLHlCQUF5QixtQkFBTyxDQUFDLHlGQUEwQjtBQUMzRCxxQkFBcUIsbUJBQU8sQ0FBQyx5RkFBMEI7QUFDdkQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7O0FBRUE7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDREQUE0RDtBQUM1RDtBQUNBLGlCQUFpQix1QkFBdUI7QUFDeEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsMERBQTBEO0FBQzFEO0FBQ0EsaUJBQWlCLGtDQUFrQztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL2FiY190cmFuc3Bvc2UuanM/ZmI3ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAgICBhYmNfdHJhbnNwb3NlLmpzOiBIYW5kbGVzIHRoZSBhdXRvbWF0aWMgdHJhbnNwb3NpdGlvbiBvZiBrZXkgc2lnbmF0dXJlcywgY2hvcmQgc3ltYm9scywgYW5kIG5vdGVzLlxuXG52YXIgYWxsTm90ZXMgPSByZXF1aXJlKFwiLi9hbGwtbm90ZXNcIik7XG52YXIgdHJhbnNwb3NlQ2hvcmROYW1lID0gcmVxdWlyZShcIi4uL3BhcnNlL3RyYW5zcG9zZS1jaG9yZFwiKVxudmFyIGtleUFjY2lkZW50YWxzID0gcmVxdWlyZSgnLi4vY29uc3Qva2V5LWFjY2lkZW50YWxzJyk7XG52YXIgdHJhbnNwb3NlID0ge307XG5cbnZhciBrZXlJbmRleCA9IHtcblx0J0MnOiAwLFxuXHQnQyMnOiAxLFxuXHQnRGInOiAxLFxuXHQnRCc6IDIsXG5cdCdEIyc6IDMsXG5cdCdFYic6IDMsXG5cdCdFJzogNCxcblx0J0YnOiA1LFxuXHQnRiMnOiA2LFxuXHQnR2InOiA2LFxuXHQnRyc6IDcsXG5cdCdHIyc6IDgsXG5cdCdBYic6IDgsXG5cdCdBJzogOSxcblx0J0EjJzogMTAsXG5cdCdCYic6IDEwLFxuXHQnQic6IDExXG59O1xudmFyIG5ld0tleSA9IFsnQycsICdEYicsICdEJywgJ0ViJywgJ0UnLCAnRicsICdGIycsICdHJywgJ0FiJywgJ0EnLCAnQmInLCAnQiddO1xudmFyIG5ld0tleU1pbm9yID0gWydDJywgJ0MjJywgJ0QnLCAnRCMnLCAnRScsICdGJywgJ0YjJywgJ0cnLCAnRyMnLCAnQScsICdCYicsICdCJ107XG5cbnRyYW5zcG9zZS5rZXlTaWduYXR1cmUgPSBmdW5jdGlvbihtdWx0aWxpbmVWYXJzLCBrZXlOYW1lLCByb290LCBhY2MsIGxvY2FsVHJhbnNwb3NlKSB7XG5cdGlmIChtdWx0aWxpbmVWYXJzLmNsZWYudHlwZSA9PT0gXCJwZXJjXCIgfHwgbXVsdGlsaW5lVmFycy5jbGVmLnR5cGUgPT09IFwibm9uZVwiKVxuXHRcdHJldHVybiB7IGFjY2lkZW50YWxzOiBrZXlBY2NpZGVudGFscyhrZXlOYW1lKSwgcm9vdDogcm9vdCwgYWNjOiBhY2MgfTtcblx0aWYgKCFsb2NhbFRyYW5zcG9zZSkgbG9jYWxUcmFuc3Bvc2UgPSAwO1xuXHRtdWx0aWxpbmVWYXJzLmxvY2FsVHJhbnNwb3NlVmVydGljYWxNb3ZlbWVudCA9IDA7XG5cdG11bHRpbGluZVZhcnMubG9jYWxUcmFuc3Bvc2VQcmVmZXJGbGF0cyA9IGZhbHNlO1xuXHR2YXIgayA9IGtleUFjY2lkZW50YWxzKGtleU5hbWUpO1xuXHRpZiAoIWspIHJldHVybiBtdWx0aWxpbmVWYXJzLmtleTsgLy8gSWYgdGhlIGtleSBpc24ndCBpbiB0aGUgbGlzdCwgaXQgaXMgbm9uLXN0YW5kYXJkLiBXZSB3b24ndCBhdHRlbXB0IHRvIHRyYW5zcG9zZSBpdC5cblx0bXVsdGlsaW5lVmFycy5sb2NhbFRyYW5zcG9zZSA9IChtdWx0aWxpbmVWYXJzLmdsb2JhbFRyYW5zcG9zZSA/IG11bHRpbGluZVZhcnMuZ2xvYmFsVHJhbnNwb3NlIDogMCkgKyBsb2NhbFRyYW5zcG9zZTtcblxuXHRpZiAoIW11bHRpbGluZVZhcnMubG9jYWxUcmFuc3Bvc2UpXG5cdFx0cmV0dXJuIHsgYWNjaWRlbnRhbHM6IGssIHJvb3Q6IHJvb3QsIGFjYzogYWNjIH07XG5cdG11bHRpbGluZVZhcnMuZ2xvYmFsVHJhbnNwb3NlT3JpZ0tleVNpZyA9IGs7XG5cdGlmIChtdWx0aWxpbmVWYXJzLmxvY2FsVHJhbnNwb3NlICUgMTIgPT09IDApIHtcblx0XHRtdWx0aWxpbmVWYXJzLmxvY2FsVHJhbnNwb3NlVmVydGljYWxNb3ZlbWVudCA9IChtdWx0aWxpbmVWYXJzLmxvY2FsVHJhbnNwb3NlIC8gMTIpICogNztcblx0XHRyZXR1cm4geyBhY2NpZGVudGFsczogaywgcm9vdDogcm9vdCwgYWNjOiBhY2MgfTtcblx0fVxuXG5cdHZhciBiYXNlS2V5ID0ga2V5TmFtZVswXTtcblx0aWYgKGtleU5hbWVbMV0gPT09ICdiJyB8fCBrZXlOYW1lWzFdID09PSAnIycpIHtcblx0XHRiYXNlS2V5ICs9IGtleU5hbWVbMV07XG5cdFx0a2V5TmFtZSA9IGtleU5hbWUuc3Vic3RyKDIpO1xuXHR9IGVsc2Vcblx0XHRrZXlOYW1lID0ga2V5TmFtZS5zdWJzdHIoMSk7XG5cdHZhciB0aGlzS2V5SW5kZXggPSBrZXlJbmRleFtiYXNlS2V5XVxuXHR2YXIgcmVjb2duaXplZCA9IHRoaXNLZXlJbmRleCAhPT0gdW5kZWZpbmVkXG5cdGlmICghcmVjb2duaXplZCkge1xuXHRcdC8vIEVpdGhlciB0aGUga2V5IHNpZyBpcyBcIm5vbmVcIiBvciB3ZSBkb24ndCByZWNvZ25pemUgaXQuIEVpdGhlciB3YXkgd2UgZG9uJ3QgY2hhbmdlIGl0LCBhbmQgd2UgYXNzdW1lIGtleSBvZiBDIGZvciB0aGUgcHVycG9zZXMgb2YgdGhpcyBjYWxjdWxhdGlvbi5cblx0XHR0aGlzS2V5SW5kZXggPSAwXG5cdFx0YmFzZUtleSA9IFwiQ1wiXG5cdFx0a2V5TmFtZSA9IFwiXCJcblx0fVxuXHR2YXIgaW5kZXggPSB0aGlzS2V5SW5kZXggKyBtdWx0aWxpbmVWYXJzLmxvY2FsVHJhbnNwb3NlO1xuXHR3aGlsZSAoaW5kZXggPCAwKSBpbmRleCArPSAxMjtcblx0aWYgKGluZGV4ID4gMTEpIGluZGV4ID0gaW5kZXggJSAxMjtcblx0dmFyIG5ld0tleU5hbWUgPSAoa2V5TmFtZVswXSA9PT0gJ20nID8gbmV3S2V5TWlub3JbaW5kZXhdIDogbmV3S2V5W2luZGV4XSk7XG5cdHZhciB0cmFuc3Bvc2VkS2V5ID0gbmV3S2V5TmFtZSArIGtleU5hbWU7XG5cdHZhciBuZXdLZXlTaWcgPSBrZXlBY2NpZGVudGFscyh0cmFuc3Bvc2VkS2V5KTtcblx0aWYgKG5ld0tleVNpZy5sZW5ndGggPT09IDAgfHwgbmV3S2V5U2lnWzBdLmFjYyA9PT0gJ2ZsYXQnKSAvLyBrZXkgb2YgQyBhbmQgYWxsIGtleXMgd2l0aCBmbGF0cyBzaG91bGQgaGF2ZSBjaG9yZHMgd2l0aCBmbGF0c1xuXHRcdG11bHRpbGluZVZhcnMubG9jYWxUcmFuc3Bvc2VQcmVmZXJGbGF0cyA9IHRydWU7XG5cdHZhciBkaXN0YW5jZSA9IHRyYW5zcG9zZWRLZXkuY2hhckNvZGVBdCgwKSAtIGJhc2VLZXkuY2hhckNvZGVBdCgwKTtcblx0aWYgKG11bHRpbGluZVZhcnMubG9jYWxUcmFuc3Bvc2UgPiAwKSB7XG5cdFx0aWYgKGRpc3RhbmNlIDwgMClcblx0XHRcdGRpc3RhbmNlICs9IDc7XG5cdFx0ZWxzZSBpZiAoZGlzdGFuY2UgPT09IDApIHtcblx0XHRcdC8vIFRoZXJlJ3MgYSBmdW5ueSB0aGluZyB0aGF0IGhhcHBlbnMgd2hlbiB0aGUga2V5IGNoYW5nZXMgb25seSBhbiBhY2NpZGVudGFsJ3MgZGlzdGFuY2UsIGZvciBpbnN0YW5jZSwgZnJvbSBBYiB0byBBLlxuXHRcdFx0Ly8gSWYgdGhlIGRpc3RhbmNlIGlzIHBvc2l0aXZlICh3ZSBhcmUgcmFpc2luZyBwaXRjaCksIGFuZCB0aGUgY2hhbmdlIGlzIGhpZ2hlciAodGhhdCBpcywgQWIgLT4gQSksIHRoZW4gcmFpc2UgYW4gb2N0YXZlLlxuXHRcdFx0Ly8gVGhpcyB0ZXN0IGlzIGVhc2llciBiZWNhdXNlIHdlIGtub3cgdGhlIGtleXMgYXJlIG5vdCBlcXVhbCAob3Igd2Ugd291bGRuJ3QgZ2V0IHRoaXMgZmFyKSwgc28gaWYgdGhlIGJhc2Uga2V5IGlzIGEgZmxhdCBrZXksIHRoZW5cblx0XHRcdC8vIHRoZSB0cmFuc3Bvc2VkIGtleSBtdXN0IGJlIGhpZ2hlci4gTGlrZXdpc2UsIGlmIHRoZSB0cmFuc3Bvc2VkIGtleSBpcyBzaGFycCwgdGhlbiB0aGUgYmFzZSBrZXkgbXVzdCBiZSBsb3dlci4gQW5kIG9uZVxuXHRcdFx0Ly8gb2YgdGhvc2UgdHdvIHRoaW5ncyBtdXN0IGJlIHRydWUgYmVjYXVzZSB0aGV5IGFyZSBub3QgYm90aCBuYXR1cmFsLlxuXHRcdFx0aWYgKGJhc2VLZXlbMV0gPT09ICcjJyB8fCAgdHJhbnNwb3NlZEtleVsxXSA9PT0gJ2InKVxuXHRcdFx0XHRkaXN0YW5jZSArPSA3O1xuXHRcdH1cblx0fSBlbHNlIGlmIChtdWx0aWxpbmVWYXJzLmxvY2FsVHJhbnNwb3NlIDwgMCkge1xuXHRcdGlmIChkaXN0YW5jZSA+IDApXG5cdFx0XHRkaXN0YW5jZSAtPSA3O1xuXHRcdGVsc2UgaWYgKGRpc3RhbmNlID09PSAwKSB7XG5cdFx0XHQvLyBUaGVyZSdzIGEgZnVubnkgdGhpbmcgdGhhdCBoYXBwZW5zIHdoZW4gdGhlIGtleSBjaGFuZ2VzIG9ubHkgYW4gYWNjaWRlbnRhbCdzIGRpc3RhbmNlLCBmb3IgaW5zdGFuY2UsIGZyb20gQWIgdG8gQS5cblx0XHRcdC8vIElmIHRoZSBkaXN0YW5jZSBpcyBuZWdhdGl2ZSAod2UgYXJlIGRyb3BwaW5nIHBpdGNoKSwgYW5kIHRoZSBjaGFuZ2UgaXMgbG93ZXIgKHRoYXQgaXMsIEEgLT4gQWIpLCB0aGVuIGRyb3AgYW4gb2N0YXZlLlxuXHRcdFx0aWYgKGJhc2VLZXlbMV0gPT09ICdiJyB8fCAgdHJhbnNwb3NlZEtleVsxXSA9PT0gJyMnKVxuXHRcdFx0XHRkaXN0YW5jZSAtPSA3O1xuXHRcdH1cblx0fVxuXG5cdGlmIChtdWx0aWxpbmVWYXJzLmxvY2FsVHJhbnNwb3NlID4gMClcblx0XHRtdWx0aWxpbmVWYXJzLmxvY2FsVHJhbnNwb3NlVmVydGljYWxNb3ZlbWVudCA9IGRpc3RhbmNlICsgTWF0aC5mbG9vcihtdWx0aWxpbmVWYXJzLmxvY2FsVHJhbnNwb3NlIC8gMTIpICogNztcblx0ZWxzZVxuXHRcdG11bHRpbGluZVZhcnMubG9jYWxUcmFuc3Bvc2VWZXJ0aWNhbE1vdmVtZW50ID0gZGlzdGFuY2UgKyBNYXRoLmNlaWwobXVsdGlsaW5lVmFycy5sb2NhbFRyYW5zcG9zZSAvIDEyKSAqIDc7XG5cdGlmIChyZWNvZ25pemVkKVxuXHRcdHJldHVybiB7IGFjY2lkZW50YWxzOiBuZXdLZXlTaWcsIHJvb3Q6IG5ld0tleU5hbWVbMF0sIGFjYzogbmV3S2V5TmFtZS5sZW5ndGggPiAxID8gbmV3S2V5TmFtZVsxXSA6IFwiXCIgfTtcblx0ZWxzZVxuXHRcdHJldHVybiB7IGFjY2lkZW50YWxzOiBbXSwgcm9vdDogcm9vdCwgYWNjOiBhY2MgfTtcbn07XG5cbnRyYW5zcG9zZS5jaG9yZE5hbWUgPSBmdW5jdGlvbihtdWx0aWxpbmVWYXJzLCBjaG9yZCkge1xuXHRyZXR1cm4gdHJhbnNwb3NlQ2hvcmROYW1lKGNob3JkLCBtdWx0aWxpbmVWYXJzLmxvY2FsVHJhbnNwb3NlLCBtdWx0aWxpbmVWYXJzLmxvY2FsVHJhbnNwb3NlUHJlZmVyRmxhdHMsIG11bHRpbGluZVZhcnMuZnJlZWdjaG9yZClcbn07XG5cbnZhciBwaXRjaFRvTGV0dGVyID0gWyAnYycsICdkJywgJ2UnLCAnZicsICdnJywgJ2EnLCAnYicgXTtcbmZ1bmN0aW9uIGFjY2lkZW50YWxDaGFuZ2Uob3JpZ1BpdGNoLCBuZXdQaXRjaCwgYWNjaWRlbnRhbCwgb3JpZ0tleVNpZywgbmV3S2V5U2lnKSB7XG5cdHZhciBvcmlnUGl0Y2hMZXR0ZXIgPSBwaXRjaFRvTGV0dGVyWyhvcmlnUGl0Y2ggKyA0OSkgJSA3XTsgLy8gTWFrZSBzdXJlIGl0IGlzIGEgcG9zaXRpdmUgcGl0Y2ggYmVmb3JlIG5vcm1hbGl6aW5nLlxuXHR2YXIgb3JpZ0FjY2lkZW50YWwgPSAwO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IG9yaWdLZXlTaWcubGVuZ3RoOyBpKyspIHtcblx0XHRpZiAob3JpZ0tleVNpZ1tpXS5ub3RlLnRvTG93ZXJDYXNlKCkgPT09IG9yaWdQaXRjaExldHRlcilcblx0XHRcdG9yaWdBY2NpZGVudGFsID0gYWNjaWRlbnRhbHNbb3JpZ0tleVNpZ1tpXS5hY2NdO1xuXHR9XG5cblx0dmFyIGN1cnJlbnRBY2NpZGVudGFsID0gYWNjaWRlbnRhbHNbYWNjaWRlbnRhbF07XG5cdHZhciBkZWx0YSA9IGN1cnJlbnRBY2NpZGVudGFsIC0gb3JpZ0FjY2lkZW50YWw7XG5cblx0dmFyIG5ld1BpdGNoTGV0dGVyID0gcGl0Y2hUb0xldHRlclsobmV3UGl0Y2ggKyA0OSkgJSA3XTsgLy8gTWFrZSBzdXJlIGl0IGlzIGEgcG9zaXRpdmUgcGl0Y2ggYmVmb3JlIG5vcm1hbGl6aW5nLlxuXHR2YXIgbmV3QWNjaWRlbnRhbCA9IDA7XG5cdGZvciAodmFyIGogPSAwOyBqIDwgbmV3S2V5U2lnLmFjY2lkZW50YWxzLmxlbmd0aDsgaisrKSB7XG5cdFx0aWYgKG5ld0tleVNpZy5hY2NpZGVudGFsc1tqXS5ub3RlLnRvTG93ZXJDYXNlKCkgPT09IG5ld1BpdGNoTGV0dGVyKVxuXHRcdFx0bmV3QWNjaWRlbnRhbCA9IGFjY2lkZW50YWxzW25ld0tleVNpZy5hY2NpZGVudGFsc1tqXS5hY2NdO1xuXHR9XG5cdHZhciBjYWxjQWNjaWRlbnRhbCA9IGRlbHRhICsgbmV3QWNjaWRlbnRhbDtcblx0aWYgKGNhbGNBY2NpZGVudGFsIDwgLTIpIHtcblx0XHRuZXdQaXRjaC0tO1xuXHRcdGNhbGNBY2NpZGVudGFsICs9IChuZXdQaXRjaExldHRlciA9PT0gJ2MnIHx8IG5ld1BpdGNoTGV0dGVyID09PSAnZicpID8gMSA6IDI7XG5cdH1cblx0aWYgKGNhbGNBY2NpZGVudGFsID4gMikge1xuXHRcdG5ld1BpdGNoKys7XG5cdFx0Y2FsY0FjY2lkZW50YWwgLT0gKG5ld1BpdGNoTGV0dGVyID09PSAnYicgfHwgbmV3UGl0Y2hMZXR0ZXIgPT09ICdlJykgPyAxIDogMjtcblx0fVxuXHRyZXR1cm4gW25ld1BpdGNoLCBjYWxjQWNjaWRlbnRhbF07XG59XG5cbnZhciBhY2NpZGVudGFscyA9IHtcblx0ZGJsZmxhdDogLTIsXG5cdGZsYXQ6IC0xLFxuXHRuYXR1cmFsOiAwLFxuXHRzaGFycDogMSxcblx0ZGJsc2hhcnA6IDJcbn07XG52YXIgYWNjaWRlbnRhbHMyID0ge1xuXHRcIi0yXCI6IFwiZGJsZmxhdFwiLFxuXHRcIi0xXCI6IFwiZmxhdFwiLFxuXHRcIjBcIjogXCJuYXR1cmFsXCIsXG5cdFwiMVwiOiBcInNoYXJwXCIsXG5cdFwiMlwiOiBcImRibHNoYXJwXCJcbn07XG52YXIgYWNjaWRlbnRhbHMzID0ge1xuXHRcIi0yXCI6IFwiX19cIixcblx0XCItMVwiOiBcIl9cIixcblx0XCIwXCI6IFwiPVwiLFxuXHRcIjFcIjogXCJeXCIsXG5cdFwiMlwiOiBcIl5eXCJcbn07XG4vL3ZhciBjb3VudCA9IDBcbnRyYW5zcG9zZS5ub3RlID0gZnVuY3Rpb24obXVsdGlsaW5lVmFycywgZWwpIHtcblx0Ly8gdGhlIFwiZWxcIiB0aGF0IGlzIHBhc3NlZCBpbiBoYXMgZWwubmFtZSwgZWwuYWNjaWRlbnRhbCwgYW5kIGVsLnBpdGNoLiBcInBpdGNoXCIgaXMgdGhlIHZlcnRpY2FsIHBvc2l0aW9uICgwPW1pZGRsZSBDKVxuXHQvLyBsb2NhbFRyYW5zcG9zZSBpcyB0aGUgbnVtYmVyIG9mIGhhbGYgc3RlcHNcblx0Ly8gbG9jYWxUcmFuc3Bvc2VWZXJ0aWNhbE1vdmVtZW50IGlzIHRoZSB2ZXJ0aWNhbCBkaXN0YW5jZSB0byBtb3ZlLlxuXHQvL2NvbnNvbGUubG9nKGNvdW50KyssbXVsdGlsaW5lVmFycy5sb2NhbFRyYW5zcG9zZSwgZWwpXG5cdGlmICghbXVsdGlsaW5lVmFycy5sb2NhbFRyYW5zcG9zZSB8fCBtdWx0aWxpbmVWYXJzLmNsZWYudHlwZSA9PT0gXCJwZXJjXCIpXG5cdFx0cmV0dXJuO1xuXHR2YXIgb3JpZ1BpdGNoID0gZWwucGl0Y2g7XG5cdGlmIChtdWx0aWxpbmVWYXJzLmxvY2FsVHJhbnNwb3NlVmVydGljYWxNb3ZlbWVudCkge1xuXHRcdGVsLnBpdGNoID0gZWwucGl0Y2ggKyBtdWx0aWxpbmVWYXJzLmxvY2FsVHJhbnNwb3NlVmVydGljYWxNb3ZlbWVudDtcblx0XHRpZiAoZWwubmFtZSkge1xuXHRcdFx0dmFyIGFjdHVhbCA9IGVsLmFjY2lkZW50YWwgPyBlbC5uYW1lLnN1YnN0cmluZygxKSA6IGVsLm5hbWVcblx0XHRcdHZhciBhY2MgPSBlbC5hY2NpZGVudGFsID8gZWwubmFtZVswXSA6ICcnXG5cdFx0XHR2YXIgcCA9IGFsbE5vdGVzLnBpdGNoSW5kZXgoYWN0dWFsKVxuXHRcdFx0ZWwubmFtZSA9IGFjYyArIGFsbE5vdGVzLm5vdGVOYW1lKHArbXVsdGlsaW5lVmFycy5sb2NhbFRyYW5zcG9zZVZlcnRpY2FsTW92ZW1lbnQpXG5cdFx0fVxuXHR9XG5cblx0aWYgKGVsLmFjY2lkZW50YWwpIHtcblx0XHR2YXIgcmV0ID0gYWNjaWRlbnRhbENoYW5nZShvcmlnUGl0Y2gsIGVsLnBpdGNoLCBlbC5hY2NpZGVudGFsLCBtdWx0aWxpbmVWYXJzLmdsb2JhbFRyYW5zcG9zZU9yaWdLZXlTaWcsIG11bHRpbGluZVZhcnMudGFyZ2V0S2V5KTtcblx0XHRlbC5waXRjaCA9IHJldFswXTtcblx0XHRlbC5hY2NpZGVudGFsID0gYWNjaWRlbnRhbHMyW3JldFsxXV07XG5cdFx0aWYgKGVsLm5hbWUpIHtcblx0XHRcdGVsLm5hbWUgPSBhY2NpZGVudGFsczNbcmV0WzFdXSArIGVsLm5hbWUucmVwbGFjZSgvW19ePV0vZywnJyk7XG5cdFx0fVxuXHR9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gdHJhbnNwb3NlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/parse/abc_transpose.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/parse/all-notes.js":
/*!***************************************************!*\
  !*** ./node_modules/abcjs/src/parse/all-notes.js ***!
  \***************************************************/
/***/ ((module) => {

eval("var allNotes = {};\n\nconst allPitches = [\n\t'C,,,', 'D,,,', 'E,,,', 'F,,,', 'G,,,', 'A,,,', 'B,,,',\n\t'C,,', 'D,,', 'E,,', 'F,,', 'G,,', 'A,,', 'B,,',\n\t'C,', 'D,', 'E,', 'F,', 'G,', 'A,', 'B,',\n\t'C', 'D', 'E', 'F', 'G', 'A', 'B',\n\t'c', 'd', 'e', 'f', 'g', 'a', 'b',\n\t\"c'\", \"d'\", \"e'\", \"f'\", \"g'\", \"a'\", \"b'\",\n\t\"c''\", \"d''\", \"e''\", \"f''\", \"g''\", \"a''\", \"b''\",\n\t\"c'''\", \"d'''\", \"e'''\", \"f'''\", \"g'''\", \"a'''\", \"b'''\",\n];\n\nallNotes.pitchIndex = function(noteName) {\n\treturn allPitches.indexOf(noteName)\n}\n\nallNotes.noteName = function(pitchIndex) {\n\treturn allPitches[pitchIndex]\n}\n\nmodule.exports = allNotes;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL2FsbC1ub3Rlcy5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL2FsbC1ub3Rlcy5qcz80ZWMxIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBhbGxOb3RlcyA9IHt9O1xuXG5jb25zdCBhbGxQaXRjaGVzID0gW1xuXHQnQywsLCcsICdELCwsJywgJ0UsLCwnLCAnRiwsLCcsICdHLCwsJywgJ0EsLCwnLCAnQiwsLCcsXG5cdCdDLCwnLCAnRCwsJywgJ0UsLCcsICdGLCwnLCAnRywsJywgJ0EsLCcsICdCLCwnLFxuXHQnQywnLCAnRCwnLCAnRSwnLCAnRiwnLCAnRywnLCAnQSwnLCAnQiwnLFxuXHQnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0EnLCAnQicsXG5cdCdjJywgJ2QnLCAnZScsICdmJywgJ2cnLCAnYScsICdiJyxcblx0XCJjJ1wiLCBcImQnXCIsIFwiZSdcIiwgXCJmJ1wiLCBcImcnXCIsIFwiYSdcIiwgXCJiJ1wiLFxuXHRcImMnJ1wiLCBcImQnJ1wiLCBcImUnJ1wiLCBcImYnJ1wiLCBcImcnJ1wiLCBcImEnJ1wiLCBcImInJ1wiLFxuXHRcImMnJydcIiwgXCJkJycnXCIsIFwiZScnJ1wiLCBcImYnJydcIiwgXCJnJycnXCIsIFwiYScnJ1wiLCBcImInJydcIixcbl07XG5cbmFsbE5vdGVzLnBpdGNoSW5kZXggPSBmdW5jdGlvbihub3RlTmFtZSkge1xuXHRyZXR1cm4gYWxsUGl0Y2hlcy5pbmRleE9mKG5vdGVOYW1lKVxufVxuXG5hbGxOb3Rlcy5ub3RlTmFtZSA9IGZ1bmN0aW9uKHBpdGNoSW5kZXgpIHtcblx0cmV0dXJuIGFsbFBpdGNoZXNbcGl0Y2hJbmRleF1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhbGxOb3RlcztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/parse/all-notes.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/parse/transpose-chord.js":
/*!*********************************************************!*\
  !*** ./node_modules/abcjs/src/parse/transpose-chord.js ***!
  \*********************************************************/
/***/ ((module) => {

eval("var sharpChords = ['C', 'C', 'D', \"D\", 'E', 'F', \"F\", 'G', 'G', 'A', 'A', 'B'];\nvar flatChords = ['C', 'D', 'D', 'E', 'E', 'F', 'G', 'G', 'A', 'A', 'B', 'B'];\nvar sharpChordsFree = ['C', 'C#', 'D', \"D#\", 'E', 'F', \"F#\", 'G', 'G#', 'A', 'A#', 'B'];\nvar flatChordsFree = ['C', 'Db', 'D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bb', 'B'];\n\nfunction transposeChordName(chord, steps, preferFlats, freeGCchord) {\n\tif (!steps || (steps % 12 === 0)) // The chords are the same if it is an exact octave change.\n\t\treturn chord;\n\n\t// There are two things in the chord that might need to be transposed:\n\t// The chord will start with a letter from A-G, and might have one accidental after it.\n\t// That accidental might be an actual sharp or flat char, or it might be a pound sign or lower case \"b\".\n\t// Then there is a bunch of stuff that isn't transposed and should just be copied. That is stuff like \"7\" and more complicated chords.\n\t// But there is one other exception: right after a slash there will be a bass note and possibly an accidental. That should also be transposed.\n\n\twhile (steps < 0) steps += 12;\n\tif (steps > 11) steps = steps % 12;\n\n\t// (chord name w/accidental) (a bunch of stuff) (/) (bass note) (anything else)\n\tvar match = chord.match(/^([A-G][b#]?)([^\\/]+)?\\/?([A-G][b#]?)?(.+)?/)\n\tif (!match)\n\t\treturn chord; // We don't recognize the format of the chord, so skip it.\n\tvar name = match[1]\n\tvar extra1 = match[2]\n\tvar bass = match[3]\n\tvar extra2 = match[4]\n\tvar index = sharpChords.indexOf(name)\n\tif (index < 0)\n\t\tindex = flatChords.indexOf(name)\n\tif (index < 0)\n\t\tindex = sharpChordsFree.indexOf(name)\n\tif (index < 0)\n\t\tindex = flatChordsFree.indexOf(name)\n\tif (index < 0)\n\t\treturn chord; // This should never happen, but if we can't find the chord just bail.\t\n\n\tindex += steps\n\tindex = index % 12\n\n\tif (preferFlats) {\n\t\tif (freeGCchord) chord = flatChordsFree[index]\n\t\telse chord = flatChords[index]\n\t} else {\n\t\tif (freeGCchord) chord = sharpChordsFree[index]\n\t\telse chord = sharpChords[index]\n\t}\n\n\tvar isDim = extra1 && (extra1.indexOf('dim') >= 0 || extra1.indexOf('') >= 0)\n\t//console.log(isDim, chord, extra1)\n\t// We never want A#dim or D#dim\n\tif (isDim && chord === 'A#') chord = 'Bb'\n\tif (isDim && chord === 'D#') chord = 'Eb'\n\tif (isDim && chord === 'A') chord = 'B'\n\tif (isDim && chord === 'D') chord = 'E'\n\n\tif (extra1)\n\t\tchord += extra1\n\n\tif (bass) {\n\t\tvar index = sharpChords.indexOf(bass)\n\t\tif (index < 0)\n\t\t\tindex = flatChords.indexOf(bass)\n\t\tif (index < 0)\n\t\t\tindex = sharpChordsFree.indexOf(bass)\n\t\tif (index < 0)\n\t\t\tindex = flatChordsFree.indexOf(bass)\n\t\tchord += '/'\n\t\tif (index >= 0) {\n\t\t\tindex += steps\n\t\t\tindex = index % 12\n\t\t\tif (preferFlats) {\n\t\t\t\tif (freeGCchord) chord += flatChordsFree[index]\n\t\t\t\telse chord += flatChords[index]\n\t\t\t} else {\n\t\t\t\tif (freeGCchord) chord += sharpChordsFree[index]\n\t\t\t\telse chord += sharpChords[index]\n\t\t\t}\n\t\t} else\n\t\t\tchord += bass; // Don't know what to do so do nothing\n\t}\n\n\tif (extra2)\n\t\tchord += extra2\n\n\treturn chord;\n}\n\nmodule.exports = transposeChordName\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL3RyYW5zcG9zZS1jaG9yZC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7O0FBRWhCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osa0JBQWtCO0FBQ2xCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy9wYXJzZS90cmFuc3Bvc2UtY2hvcmQuanM/ZDhlYyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgc2hhcnBDaG9yZHMgPSBbJ0MnLCAnQ+KZrycsICdEJywgXCJE4pmvXCIsICdFJywgJ0YnLCBcIkbima9cIiwgJ0cnLCAnR+KZrycsICdBJywgJ0Hima8nLCAnQiddO1xudmFyIGZsYXRDaG9yZHMgPSBbJ0MnLCAnROKZrScsICdEJywgJ0Xima0nLCAnRScsICdGJywgJ0fima0nLCAnRycsICdB4pmtJywgJ0EnLCAnQuKZrScsICdCJ107XG52YXIgc2hhcnBDaG9yZHNGcmVlID0gWydDJywgJ0MjJywgJ0QnLCBcIkQjXCIsICdFJywgJ0YnLCBcIkYjXCIsICdHJywgJ0cjJywgJ0EnLCAnQSMnLCAnQiddO1xudmFyIGZsYXRDaG9yZHNGcmVlID0gWydDJywgJ0RiJywgJ0QnLCAnRWInLCAnRScsICdGJywgJ0diJywgJ0cnLCAnQWInLCAnQScsICdCYicsICdCJ107XG5cbmZ1bmN0aW9uIHRyYW5zcG9zZUNob3JkTmFtZShjaG9yZCwgc3RlcHMsIHByZWZlckZsYXRzLCBmcmVlR0NjaG9yZCkge1xuXHRpZiAoIXN0ZXBzIHx8IChzdGVwcyAlIDEyID09PSAwKSkgLy8gVGhlIGNob3JkcyBhcmUgdGhlIHNhbWUgaWYgaXQgaXMgYW4gZXhhY3Qgb2N0YXZlIGNoYW5nZS5cblx0XHRyZXR1cm4gY2hvcmQ7XG5cblx0Ly8gVGhlcmUgYXJlIHR3byB0aGluZ3MgaW4gdGhlIGNob3JkIHRoYXQgbWlnaHQgbmVlZCB0byBiZSB0cmFuc3Bvc2VkOlxuXHQvLyBUaGUgY2hvcmQgd2lsbCBzdGFydCB3aXRoIGEgbGV0dGVyIGZyb20gQS1HLCBhbmQgbWlnaHQgaGF2ZSBvbmUgYWNjaWRlbnRhbCBhZnRlciBpdC5cblx0Ly8gVGhhdCBhY2NpZGVudGFsIG1pZ2h0IGJlIGFuIGFjdHVhbCBzaGFycCBvciBmbGF0IGNoYXIsIG9yIGl0IG1pZ2h0IGJlIGEgcG91bmQgc2lnbiBvciBsb3dlciBjYXNlIFwiYlwiLlxuXHQvLyBUaGVuIHRoZXJlIGlzIGEgYnVuY2ggb2Ygc3R1ZmYgdGhhdCBpc24ndCB0cmFuc3Bvc2VkIGFuZCBzaG91bGQganVzdCBiZSBjb3BpZWQuIFRoYXQgaXMgc3R1ZmYgbGlrZSBcIjdcIiBhbmQgbW9yZSBjb21wbGljYXRlZCBjaG9yZHMuXG5cdC8vIEJ1dCB0aGVyZSBpcyBvbmUgb3RoZXIgZXhjZXB0aW9uOiByaWdodCBhZnRlciBhIHNsYXNoIHRoZXJlIHdpbGwgYmUgYSBiYXNzIG5vdGUgYW5kIHBvc3NpYmx5IGFuIGFjY2lkZW50YWwuIFRoYXQgc2hvdWxkIGFsc28gYmUgdHJhbnNwb3NlZC5cblxuXHR3aGlsZSAoc3RlcHMgPCAwKSBzdGVwcyArPSAxMjtcblx0aWYgKHN0ZXBzID4gMTEpIHN0ZXBzID0gc3RlcHMgJSAxMjtcblxuXHQvLyAoY2hvcmQgbmFtZSB3L2FjY2lkZW50YWwpIChhIGJ1bmNoIG9mIHN0dWZmKSAoLykgKGJhc3Mgbm90ZSkgKGFueXRoaW5nIGVsc2UpXG5cdHZhciBtYXRjaCA9IGNob3JkLm1hdGNoKC9eKFtBLUddW2Ij4pmt4pmvXT8pKFteXFwvXSspP1xcLz8oW0EtR11bYiPima3ima9dPyk/KC4rKT8vKVxuXHRpZiAoIW1hdGNoKVxuXHRcdHJldHVybiBjaG9yZDsgLy8gV2UgZG9uJ3QgcmVjb2duaXplIHRoZSBmb3JtYXQgb2YgdGhlIGNob3JkLCBzbyBza2lwIGl0LlxuXHR2YXIgbmFtZSA9IG1hdGNoWzFdXG5cdHZhciBleHRyYTEgPSBtYXRjaFsyXVxuXHR2YXIgYmFzcyA9IG1hdGNoWzNdXG5cdHZhciBleHRyYTIgPSBtYXRjaFs0XVxuXHR2YXIgaW5kZXggPSBzaGFycENob3Jkcy5pbmRleE9mKG5hbWUpXG5cdGlmIChpbmRleCA8IDApXG5cdFx0aW5kZXggPSBmbGF0Q2hvcmRzLmluZGV4T2YobmFtZSlcblx0aWYgKGluZGV4IDwgMClcblx0XHRpbmRleCA9IHNoYXJwQ2hvcmRzRnJlZS5pbmRleE9mKG5hbWUpXG5cdGlmIChpbmRleCA8IDApXG5cdFx0aW5kZXggPSBmbGF0Q2hvcmRzRnJlZS5pbmRleE9mKG5hbWUpXG5cdGlmIChpbmRleCA8IDApXG5cdFx0cmV0dXJuIGNob3JkOyAvLyBUaGlzIHNob3VsZCBuZXZlciBoYXBwZW4sIGJ1dCBpZiB3ZSBjYW4ndCBmaW5kIHRoZSBjaG9yZCBqdXN0IGJhaWwuXHRcblxuXHRpbmRleCArPSBzdGVwc1xuXHRpbmRleCA9IGluZGV4ICUgMTJcblxuXHRpZiAocHJlZmVyRmxhdHMpIHtcblx0XHRpZiAoZnJlZUdDY2hvcmQpIGNob3JkID0gZmxhdENob3Jkc0ZyZWVbaW5kZXhdXG5cdFx0ZWxzZSBjaG9yZCA9IGZsYXRDaG9yZHNbaW5kZXhdXG5cdH0gZWxzZSB7XG5cdFx0aWYgKGZyZWVHQ2Nob3JkKSBjaG9yZCA9IHNoYXJwQ2hvcmRzRnJlZVtpbmRleF1cblx0XHRlbHNlIGNob3JkID0gc2hhcnBDaG9yZHNbaW5kZXhdXG5cdH1cblxuXHR2YXIgaXNEaW0gPSBleHRyYTEgJiYgKGV4dHJhMS5pbmRleE9mKCdkaW0nKSA+PSAwIHx8IGV4dHJhMS5pbmRleE9mKCfCsCcpID49IDApXG5cdC8vY29uc29sZS5sb2coaXNEaW0sIGNob3JkLCBleHRyYTEpXG5cdC8vIFdlIG5ldmVyIHdhbnQgQSNkaW0gb3IgRCNkaW1cblx0aWYgKGlzRGltICYmIGNob3JkID09PSAnQSMnKSBjaG9yZCA9ICdCYidcblx0aWYgKGlzRGltICYmIGNob3JkID09PSAnRCMnKSBjaG9yZCA9ICdFYidcblx0aWYgKGlzRGltICYmIGNob3JkID09PSAnQeKZrycpIGNob3JkID0gJ0Lima0nXG5cdGlmIChpc0RpbSAmJiBjaG9yZCA9PT0gJ0Tima8nKSBjaG9yZCA9ICdF4pmtJ1xuXG5cdGlmIChleHRyYTEpXG5cdFx0Y2hvcmQgKz0gZXh0cmExXG5cblx0aWYgKGJhc3MpIHtcblx0XHR2YXIgaW5kZXggPSBzaGFycENob3Jkcy5pbmRleE9mKGJhc3MpXG5cdFx0aWYgKGluZGV4IDwgMClcblx0XHRcdGluZGV4ID0gZmxhdENob3Jkcy5pbmRleE9mKGJhc3MpXG5cdFx0aWYgKGluZGV4IDwgMClcblx0XHRcdGluZGV4ID0gc2hhcnBDaG9yZHNGcmVlLmluZGV4T2YoYmFzcylcblx0XHRpZiAoaW5kZXggPCAwKVxuXHRcdFx0aW5kZXggPSBmbGF0Q2hvcmRzRnJlZS5pbmRleE9mKGJhc3MpXG5cdFx0Y2hvcmQgKz0gJy8nXG5cdFx0aWYgKGluZGV4ID49IDApIHtcblx0XHRcdGluZGV4ICs9IHN0ZXBzXG5cdFx0XHRpbmRleCA9IGluZGV4ICUgMTJcblx0XHRcdGlmIChwcmVmZXJGbGF0cykge1xuXHRcdFx0XHRpZiAoZnJlZUdDY2hvcmQpIGNob3JkICs9IGZsYXRDaG9yZHNGcmVlW2luZGV4XVxuXHRcdFx0XHRlbHNlIGNob3JkICs9IGZsYXRDaG9yZHNbaW5kZXhdXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoZnJlZUdDY2hvcmQpIGNob3JkICs9IHNoYXJwQ2hvcmRzRnJlZVtpbmRleF1cblx0XHRcdFx0ZWxzZSBjaG9yZCArPSBzaGFycENob3Jkc1tpbmRleF1cblx0XHRcdH1cblx0XHR9IGVsc2Vcblx0XHRcdGNob3JkICs9IGJhc3M7IC8vIERvbid0IGtub3cgd2hhdCB0byBkbyBzbyBkbyBub3RoaW5nXG5cdH1cblxuXHRpZiAoZXh0cmEyKVxuXHRcdGNob3JkICs9IGV4dHJhMlxuXG5cdHJldHVybiBjaG9yZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0cmFuc3Bvc2VDaG9yZE5hbWVcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/parse/transpose-chord.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/parse/tune-builder.js":
/*!******************************************************!*\
  !*** ./node_modules/abcjs/src/parse/tune-builder.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var parseKeyVoice = __webpack_require__(/*! ../parse/abc_parse_key_voice */ \"(ssr)/./node_modules/abcjs/src/parse/abc_parse_key_voice.js\");\n//var parseCommon = require('../parse/abc_common');\n//var parseDirective = require('./abc_parse_directive');\n\nvar TuneBuilder = function (tune) {\n\tvar self = this;\n\tvar voiceDefs = {}\n\tvar currentVoiceName = ''\n\ttune.reset();\n\n\tthis.setVisualTranspose = function (visualTranspose) {\n\t\tif (visualTranspose!==undefined)\n\t\t\ttune.visualTranspose = visualTranspose;\n\t};\n\n\tthis.cleanUp = function (barsperstaff, staffnonote, currSlur) {\n\t\tcloseLine(tune);\t// Close the last line.\n\t\tdelete tune.runningFonts;\n\n\t\tsimplifyMetaText(tune)\n\t\t//addRichTextToAnnotationsAndLyrics(tune)\n\n\t\t// If the tempo was created with a string like \"Allegro\", then the duration of a beat needs to be set at the last moment, when it is most likely known.\n\t\tif (tune.metaText.tempo && tune.metaText.tempo.bpm && !tune.metaText.tempo.duration)\n\t\t\ttune.metaText.tempo.duration = [tune.getBeatLength()];\n\n\t\t// Remove any blank lines\n\t\tvar anyDeleted = false;\n\t\tvar i, s, v;\n\t\tfor (i = 0; i < tune.lines.length; i++) {\n\t\t\tif (tune.lines[i].staff !== undefined) {\n\t\t\t\tvar hasAny = false;\n\t\t\t\tfor (s = 0; s < tune.lines[i].staff.length; s++) {\n\t\t\t\t\tif (tune.lines[i].staff[s] === undefined) {\n\t\t\t\t\t\tanyDeleted = true;\n\t\t\t\t\t\ttune.lines[i].staff[s] = null;\n\t\t\t\t\t\t//tune.lines[i].staff[s] = { voices: []};\t// TODO-PER: There was a part missing in the abc music. How should we recover?\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (v = 0; v < tune.lines[i].staff[s].voices.length; v++) {\n\t\t\t\t\t\t\tif (tune.lines[i].staff[s].voices[v] === undefined)\n\t\t\t\t\t\t\t\ttune.lines[i].staff[s].voices[v] = [];\t// TODO-PER: There was a part missing in the abc music. How should we recover?\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tif (containsNotes(tune.lines[i].staff[s].voices[v])) hasAny = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!hasAny) {\n\t\t\t\t\ttune.lines[i] = null;\n\t\t\t\t\tanyDeleted = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (anyDeleted) {\n\t\t\ttune.lines = tune.lines.filter(function (line) { return !!line });\n\t\t\ttune.lines.forEach(function (line) {\n\t\t\t\tif (line.staff)\n\t\t\t\t\tline.staff = line.staff.filter(function (line) { return !!line });\n\t\t\t});\n\t\t}\n\n\t\t// if we exceeded the number of bars allowed on a line, then force a new line\n\t\tif (barsperstaff) {\n\t\t\twhile (wrapMusicLines(tune.lines, barsperstaff)) {\n\t\t\t\t// This will keep wrapping until the end of the piece.\n\t\t\t}\n\t\t}\n\n\t\t// If we were passed staffnonote, then we want to get rid of all staffs that contain only rests.\n\t\tif (staffnonote) {\n\t\t\tanyDeleted = false;\n\t\t\tfor (i = 0; i < tune.lines.length; i++) {\n\t\t\t\tif (tune.lines[i].staff !== undefined) {\n\t\t\t\t\tfor (s = 0; s < tune.lines[i].staff.length; s++) {\n\t\t\t\t\t\tvar keepThis = false;\n\t\t\t\t\t\tfor (v = 0; v < tune.lines[i].staff[s].voices.length; v++) {\n\t\t\t\t\t\t\tif (containsNotesStrict(tune.lines[i].staff[s].voices[v])) {\n\t\t\t\t\t\t\t\tkeepThis = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!keepThis) {\n\t\t\t\t\t\t\tanyDeleted = true;\n\t\t\t\t\t\t\ttune.lines[i].staff[s] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (anyDeleted) {\n\t\t\t\ttune.lines.forEach(function (line) {\n\t\t\t\t\tif (line.staff)\n\t\t\t\t\t\tline.staff = line.staff.filter(function (staff) { return !!staff });\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfixTitles(tune.lines);\n\n\t\t// Remove the temporary working variables\n\t\tfor (i = 0; i < tune.lines.length; i++) {\n\t\t\tif (tune.lines[i].staff) {\n\t\t\t\tfor (s = 0; s < tune.lines[i].staff.length; s++)\n\t\t\t\t\tdelete tune.lines[i].staff[s].workingClef;\n\t\t\t}\n\t\t}\n\n\t\t// If there are overlays, create new voices for them.\n\t\twhile (resolveOverlays(tune)) {\n\t\t\t// keep resolving overlays as long as any are found.\n\t\t}\n\n\t\tfor (var i = 0; i < tune.lines.length; i++) {\n\t\t\tvar staff = tune.lines[i].staff;\n\t\t\tif (staff) {\n\t\t\t\tfor (tune.staffNum = 0; tune.staffNum < staff.length; tune.staffNum++) {\n\t\t\t\t\tif (staff[tune.staffNum].clef)\n\t\t\t\t\t\tparseKeyVoice.fixClef(staff[tune.staffNum].clef);\n\t\t\t\t\tfor (tune.voiceNum = 0; tune.voiceNum < staff[tune.staffNum].voices.length; tune.voiceNum++) {\n\t\t\t\t\t\tvar voice = staff[tune.staffNum].voices[tune.voiceNum];\n\t\t\t\t\t\tcleanUpSlursInLine(voice, tune.staffNum, tune.voiceNum, currSlur);\n\t\t\t\t\t\tfor (var j = 0; j < voice.length; j++) {\n\t\t\t\t\t\t\tif (voice[j].el_type === 'clef')\n\t\t\t\t\t\t\t\tparseKeyVoice.fixClef(voice[j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (voice.length > 0 && voice[voice.length - 1].barNumber) {\n\t\t\t\t\t\t\t// Don't hang a bar number on the last bar line: it should go on the next line.\n\t\t\t\t\t\t\tvar nextLine = getNextMusicLine(tune.lines, i);\n\t\t\t\t\t\t\tif (nextLine)\n\t\t\t\t\t\t\t\tnextLine.staff[0].barNumber = voice[voice.length - 1].barNumber;\n\t\t\t\t\t\t\tdelete voice[voice.length - 1].barNumber;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Remove temporary variables that the outside doesn't need to know about\n\t\tdelete tune.staffNum;\n\t\tdelete tune.voiceNum;\n\t\tdelete tune.lineNum;\n\t\tdelete tune.potentialStartBeam;\n\t\tdelete tune.potentialEndBeam;\n\t\tdelete tune.vskipPending;\n\n\t\treturn currSlur;\n\t};\n\n\tthis.addTieToLastNote = function (dottedTie) {\n\t\t// TODO-PER: if this is a chord, which note?\n\t\tvar el = getLastNote(tune);\n\t\tif (el && el.pitches && el.pitches.length > 0) {\n\t\t\tel.pitches[0].startTie = {};\n\t\t\tif (dottedTie)\n\t\t\t\tel.pitches[0].startTie.style = 'dotted';\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\tthis.appendElement = function (type, startChar, endChar, hashParams) {\n\t\thashParams.el_type = type;\n\t\tif (startChar !== null)\n\t\t\thashParams.startChar = startChar;\n\t\tif (endChar !== null)\n\t\t\thashParams.endChar = endChar;\n\t\tif (type === 'note') { // && (hashParams.rest !== undefined || hashParams.end_beam === undefined)) {\n\t\t\t// Now, add the startBeam and endBeam where it is needed.\n\t\t\t// end_beam is already set on the places where there is a forced end_beam. We'll remove that here after using that info.\n\t\t\t// this.potentialStartBeam either points to null or the start beam.\n\t\t\t// this.potentialEndBeam either points to null or the start beam.\n\t\t\t// If we have a beam break (note is longer than a quarter, or an end_beam is on this element), then set the beam if we have one.\n\t\t\t// reset the variables for the next notes.\n\t\t\tvar dur = getDuration(hashParams);\n\t\t\tif (dur >= 0.25) {\t// The beam ends on the note before this.\n\t\t\t\tendBeamLast(tune);\n\t\t\t} else if (hashParams.force_end_beam_last && tune.potentialStartBeam !== undefined) {\n\t\t\t\tendBeamLast(tune);\n\t\t\t} else if (hashParams.end_beam && tune.potentialStartBeam !== undefined) {\t// the beam is forced to end on this note, probably because of a space in the ABC\n\t\t\t\tif (hashParams.rest === undefined)\n\t\t\t\t\tendBeamHere(hashParams, tune);\n\t\t\t\telse\n\t\t\t\t\tendBeamLast(tune);\n\t\t\t} else if (hashParams.rest === undefined) {\t// this a short note and we aren't about to end the beam\n\t\t\t\tif (tune.potentialStartBeam === undefined) {\t// We aren't collecting notes for a beam, so start here.\n\t\t\t\t\tif (!hashParams.end_beam) {\n\t\t\t\t\t\ttune.potentialStartBeam = hashParams;\n\t\t\t\t\t\tdelete tune.potentialEndBeam;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttune.potentialEndBeam = hashParams;\t// Continue the beaming, look for the end next note.\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//  end_beam goes on rests and notes which precede rests _except_ when a rest (or set of adjacent rests) has normal notes on both sides (no spaces)\n\t\t\t//\t\t\tif (hashParams.rest !== undefined)\n\t\t\t//\t\t\t{\n\t\t\t//\t\t\t\thashParams.end_beam = true;\n\t\t\t//\t\t\t\tvar el2 = getLastNote(tune);\n\t\t\t//\t\t\t\tif (el2) el2.end_beam = true;\n\t\t\t//\t\t\t\t// TODO-PER: implement exception mentioned in the comment.\n\t\t\t//\t\t\t}\n\t\t} else {\t// It's not a note, so there definitely isn't beaming after it.\n\t\t\tendBeamLast(tune);\n\t\t}\n\t\tdelete hashParams.end_beam;\t// We don't want this temporary variable hanging around.\n\t\tdelete hashParams.force_end_beam_last;\t// We don't want this temporary variable hanging around.\n\t\tif (hashParams.rest && hashParams.rest.type === 'invisible') {\n\t\t\tdelete hashParams.decoration // the decorations on invisible rests should be invisible, too.\n\t\t}\n\t\tif (tune.lines.length <= tune.lineNum || tune.lines[tune.lineNum].staff.length <= tune.staffNum) {\n\t\t\t//console.log(\"pushNote IGNORED\", tune.lines[tune.lineNum])\n\t\t\t// TODO-PER: This prevents a crash, but it drops the element. Need to figure out how to start a new line, or delay adding this.\n\t\t\treturn false;\n\t\t}\n\n\t\tpushNote(self, tune, hashParams, voiceDefs, currentVoiceName);\n\t\treturn true\n\t};\n\n\tthis.appendStartingElement = function (type, startChar, endChar, hashParams2) {\n\t\t//console.log('appendStartingElement', hashParams2)\n\t\t// If we're in the middle of beaming, then end the beam.\n\t\tcloseLine(tune);\n\n\t\t// We only ever want implied naturals the first time.\n\t\tvar impliedNaturals;\n\t\tif (type === 'key') {\n\t\t\timpliedNaturals = hashParams2.impliedNaturals;\n\t\t\tdelete hashParams2.impliedNaturals;\n\t\t\tdelete hashParams2.explicitAccidentals;\n\t\t}\n\n\t\t// Clone the object because it will be sticking around for the next line and we don't want the extra fields in it.\n\t\tvar hashParams = Object.assign({}, hashParams2);\n\n\t\t// be sure that we are on a music type line before doing the following.\n\t\tif (!tune.lines[tune.lineNum]) return\n\t\tvar staff = tune.lines[tune.lineNum].staff\n\t\tif (!staff) return\n\n\t\t// If tune is the first item in tune staff, then we might have to initialize the staff, first.\n\t\tif (staff.length <= tune.staffNum) {\n\t\t\tstaff[tune.staffNum] = {};\n\t\t\tstaff[tune.staffNum].clef = Object.assign({}, staff[0].clef);\n\t\t\tstaff[tune.staffNum].key = Object.assign({}, staff[0].key);\n\t\t\tif (staff[0].meter)\n\t\t\t\tstaff[tune.staffNum].meter = Object.assign({}, staff[0].meter);\n\t\t\tstaff[tune.staffNum].workingClef = Object.assign({}, staff[0].workingClef);\n\t\t\tstaff[tune.staffNum].voices = [[]];\n\t\t}\n\t\t// If tune is a clef type, then we replace the working clef on the line. This is kept separate from\n\t\t// the clef in case there is an inline clef field. We need to know what the current position for\n\t\t// the note is.\n\t\tif (type === 'clef') {\n\t\t\tstaff[tune.staffNum].workingClef = hashParams;\n\t\t}\n\n\t\t// These elements should not be added twice, so if the element exists on tune line without a note or bar before it, just replace the staff version.\n\t\tvar voice = staff[tune.staffNum].voices[tune.voiceNum];\n\t\tfor (var i = 0; i < voice.length; i++) {\n\t\t\tif (voice[i].el_type === 'note' || voice[i].el_type === 'bar') {\n\t\t\t\thashParams.el_type = type;\n\t\t\t\thashParams.startChar = startChar;\n\t\t\t\thashParams.endChar = endChar;\n\t\t\t\tif (impliedNaturals)\n\t\t\t\t\thashParams.accidentals = impliedNaturals.concat(hashParams.accidentals);\n\t\t\t\tvoice.push(hashParams);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (voice[i].el_type === type) {\n\t\t\t\thashParams.el_type = type;\n\t\t\t\thashParams.startChar = startChar;\n\t\t\t\thashParams.endChar = endChar;\n\t\t\t\tif (impliedNaturals)\n\t\t\t\t\thashParams.accidentals = impliedNaturals.concat(hashParams.accidentals);\n\t\t\t\tvoice[i] = hashParams;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t// We didn't see either that type or a note, so replace the element to the staff.\n\t\tstaff[tune.staffNum][type] = hashParams2;\n\t};\n\n\tthis.addSubtitle = function (str, info) {\n\t\tpushLine(tune, { subtitle: { text: str, startChar: info.startChar, endChar: info.endChar } });\n\t};\n\n\tthis.addSpacing = function (num) {\n\t\ttune.vskipPending = num;\n\t};\n\n\tthis.addNewPage = function (num) {\n\t\tpushLine(tune, { newpage: num });\n\t};\n\n\tthis.addSeparator = function (spaceAbove, spaceBelow, lineLength, info) {\n\t\tpushLine(tune, { separator: { spaceAbove: Math.round(spaceAbove), spaceBelow: Math.round(spaceBelow), lineLength: Math.round(lineLength), startChar: info.startChar, endChar: info.endChar } });\n\t};\n\n\tthis.addText = function (str, info) {\n\t\tpushLine(tune, { text: { text: str, startChar: info.startChar, endChar: info.endChar } });\n\t};\n\n\tthis.addCentered = function (str) {\n\t\tpushLine(tune, { text: [{ text: str, center: true }] });\n\t};\n\n\t//\tanyVoiceContainsNotes: function(line) {\n\t//\t\tfor (var i = 0; i < line.staff.voices.length; i++) {\n\t//\t\t\tif (containsNotes(line.staff.voices[i]))\n\t//\t\t\t\treturn true;\n\t//\t\t}\n\t//\t\treturn false;\n\t//\t},\n\tthis.changeVoiceScale = function (scale) {\n\t\tself.appendElement('scale', null, null, { size: scale });\n\t};\n\tthis.changeVoiceColor = function (color) {\n\t\tself.appendElement('color', null, null, { color: color });\n\t};\n\n\tthis.startNewLine = function (params) {\n\t\t//console.log(\"startNewLine\", tune.lineNum, params, voiceDefs)\n\t\t// If the pointed to line doesn't exist, just create that. If the line does exist, but doesn't have any music on it, just use it.\n\t\t// If it does exist and has music, then increment the line number. If the new element doesn't exist, create it.\n\t\tcloseLine(tune);\t// Close the previous line.\n\t\tif (params.currentVoiceName) {\n\t\t\tcurrentVoiceName = params.currentVoiceName\n\t\t\tvoiceDefs[params.currentVoiceName] = params\n\t\t}\n\n\t\tif (tune.lines[tune.lineNum] === undefined) createLine(self, tune, params);\n\t\telse if (tune.lines[tune.lineNum].staff === undefined) {\n\t\t\ttune.lineNum++;\n\t\t\tthis.startNewLine(params);\n\t\t} else if (tune.lines[tune.lineNum].staff[tune.staffNum] === undefined) createStaff(self, tune, params);\n\t\telse if (tune.lines[tune.lineNum].staff[tune.staffNum].voices[tune.voiceNum] === undefined) createVoice(self, tune, params);\n\t\telse if (!containsNotes(tune.lines[tune.lineNum].staff[tune.staffNum].voices[tune.voiceNum])) {\n\t\t\t// We don't need a new line but we might need to update parts of it.\n\t\t\tif (params.part)\n\t\t\t\tself.appendElement('part', params.part.startChar, params.part.endChar, { title: params.part.title });\n\t\t} else {\n\t\t\ttune.lineNum++;\n\t\t\tthis.startNewLine(params);\n\t\t}\n\t};\n\n\tthis.setRunningFont = function (type, font) {\n\t\t// This is called at tune start to set the current default fonts so we know whether to record a change.\n\t\ttune.runningFonts[type] = font;\n\t};\n\n\tthis.setBarNumberImmediate = function (barNumber) {\n\t\t// If tune is called right at the beginning of a line, then correct the measure number that is already written.\n\t\t// If tune is called at the beginning of a measure, then correct the measure number that was just created.\n\t\t// If tune is called in the middle of a measure, then subtract one from it, because it will be incremented before applied.\n\t\tvar currentVoice = this.getCurrentVoice();\n\t\tif (currentVoice && currentVoice.length > 0) {\n\t\t\tvar lastElement = currentVoice[currentVoice.length - 1];\n\t\t\tif (lastElement.el_type === 'bar') {\n\t\t\t\tif (lastElement.barNumber !== undefined) // the measure number might not be written for tune bar, don't override that.\n\t\t\t\t\tlastElement.barNumber = barNumber;\n\t\t\t} else\n\t\t\t\treturn barNumber - 1;\n\t\t}\n\t\treturn barNumber;\n\t};\n\n\tthis.hasBeginMusic = function () {\n\t\t// return true if there exists at least one line that contains \"staff\"\n\t\tfor (var i = 0; i < tune.lines.length; i++) {\n\t\t\tif (tune.lines[i].staff)\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\tthis.isFirstLine = function (index) {\n\t\tfor (var i = index - 1; i >= 0; i--) {\n\t\t\tif (tune.lines[i].staff !== undefined) return false;\n\t\t}\n\t\treturn true;\n\t};\n\n\tthis.getCurrentVoice = function () {\n\t\t//console.log(\"getCurrentVoice\", tune.lineNum)\n\t\tvar currLine = getPrevMusicLine(tune.lines, tune.lineNum)\n\t\tif (!currLine)\n\t\t\treturn null;\n\t\tvar currStaff = currLine.staff[tune.staffNum];\n\t\tif (!currStaff)\n\t\t\treturn null;\n\t\tif (currStaff.voices[tune.voiceNum] !== undefined)\n\t\t\treturn currStaff.voices[tune.voiceNum];\n\t\telse return null;\n\t};\n\n\tthis.setCurrentVoice = function (staffNum, voiceNum, name) {\n\t\t//console.log(\"setCurrentVoice\", tune.lineNum, staffNum, voiceNum, name, voiceDefs)\n\t\ttune.staffNum = staffNum;\n\t\ttune.voiceNum = voiceNum;\n\t\tcurrentVoiceName = name\n\t\tfor (var i = 0; i < tune.lines.length; i++) {\n\t\t\tif (tune.lines[i].staff) {\n\t\t\t\tif (tune.lines[i].staff[staffNum] === undefined || tune.lines[i].staff[staffNum].voices[voiceNum] === undefined ||\n\t\t\t\t\t!containsNotes(tune.lines[i].staff[staffNum].voices[voiceNum])) {\n\t\t\t\t\t//console.log(\"cv2\", i, tune.lines[i].staff[staffNum])\n\t\t\t\t\ttune.lineNum = i;\n\t\t\t\t\tif (!tune.lines[i].staff[staffNum] || !!tune.lines[i].staff[staffNum].voices[voiceNum]) return true\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//console.log(\"cv3\", i, tune.lineNum, tune.lines[tune.lineNum])\n\t\ttune.lineNum = i;\n\t\treturn false\n\t};\n\n\tthis.addMetaText = function (key, value, info) {\n\t\tif (tune.metaText[key] === undefined) {\n\t\t\ttune.metaText[key] = value;\n\t\t\ttune.metaTextInfo[key] = info;\n\t\t} else {\n\t\t\tif (typeof tune.metaText[key] === 'string' && typeof value === 'string')\n\t\t\t\ttune.metaText[key] += \"\\n\" + value;\n\t\t\telse {\n\t\t\t\tif (tune.metaText[key] === 'string')\n\t\t\t\t\ttune.metaText[key] = [{ text: tune.metaText[key] }]\n\t\t\t\tif (typeof value === 'string')\n\t\t\t\t\tvalue = [{ text: value }]\n\t\t\t\ttune.metaText[key] = tune.metaText[key].concat(value)\n\t\t\t}\n\t\t\ttune.metaTextInfo[key].endChar = info.endChar;\n\t\t}\n\t};\n\n\tthis.addMetaTextArray = function (key, value, info) {\n\t\tif (tune.metaText[key] === undefined) {\n\t\t\ttune.metaText[key] = [value];\n\t\t\ttune.metaTextInfo[key] = info;\n\t\t} else {\n\t\t\ttune.metaText[key].push(value);\n\t\t\ttune.metaTextInfo[key].endChar = info.endChar;\n\t\t}\n\t};\n\tthis.addMetaTextObj = function (key, value, info) {\n\t\ttune.metaText[key] = value;\n\t\ttune.metaTextInfo[key] = info;\n\t};\n};\n\nfunction isArrayOfStrings(arr) {\n\tif (!arr) return false\n\tif (typeof arr === \"string\") return false\n\t//var str = ''\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tif (typeof arr[i] !== 'string')\n\t\t\treturn false\n\t}\n\treturn true\n}\n\nfunction simplifyMetaText(tune) {\n\tif (isArrayOfStrings(tune.metaText.notes))\n\t\ttune.metaText.notes = tune.metaText.notes.join(\"\\n\")\n\tif (isArrayOfStrings(tune.metaText.history))\n\t\ttune.metaText.history = tune.metaText.history.join(\"\\n\")\n}\n\n// function addRichTextToAnnotationsAndLyrics(tune) {\n// \tvar lines = tune.lines\n// \tfor (var i = 0; i < lines.length; i++) {\n// \t\tif (lines[i].staff !== undefined) {\n// \t\t\tfor (var s = 0; s < lines[i].staff.length; s++) {\n// \t\t\t\tfor (var v = 0; v < lines[i].staff[s].voices.length; v++) {\n// \t\t\t\t\tvar voice = lines[i].staff[s].voices[v];\n// \t\t\t\t\tfor (var n = 0; n < voice.length; n++) {\n// \t\t\t\t\t\tvar element = voice[n]\n// \t\t\t\t\t\tif (element.chord) {\n// \t\t\t\t\t\t\tfor (var c = 0; c < element.chord.length; c++) {\n// \t\t\t\t\t\t\t\telement.chord[c].name = parseDirective.parseFontChangeLine(element.chord[c].name)\n// \t\t\t\t\t\t\t\tconsole.log(element.chord[c].name)\n// \t\t\t\t\t\t\t}\n// \t\t\t\t\t\t}\n// \t\t\t\t\t\tif (element.lyric) {\n// \t\t\t\t\t\t\tfor (var l = 0; l < element.lyric.length; l++) {\n// \t\t\t\t\t\t\t\telement.lyric[l].syllable = parseDirective.parseFontChangeLine(element.lyric[l].syllable)\n// \t\t\t\t\t\t\t\tconsole.log(element.lyric[l].syllable)\n// \t\t\t\t\t\t\t}\n// \t\t\t\t\t\t}\n// \t\t\t\t\t}\n// \t\t\t\t}\n// \t\t\t}\n// \t\t}\n// \t}\n\n// }\n\nfunction resolveOverlays(tune) {\n\tvar madeChanges = false;\n\tvar durationsPerLines = [];\n\tfor (var i = 0; i < tune.lines.length; i++) {\n\t\tvar line = tune.lines[i];\n\t\tif (line.staff) {\n\t\t\tfor (var j = 0; j < line.staff.length; j++) {\n\t\t\t\tvar staff = line.staff[j];\n\t\t\t\tvar overlayVoice = [];\n\t\t\t\tfor (var k = 0; k < staff.voices.length; k++) {\n\t\t\t\t\tvar voice = staff.voices[k];\n\t\t\t\t\toverlayVoice.push({ hasOverlay: false, voice: [], snip: [] });\n\t\t\t\t\tdurationsPerLines[i] = 0;\n\t\t\t\t\tvar durationThisBar = 0;\n\t\t\t\t\tvar inOverlay = false;\n\t\t\t\t\tvar overlayDuration = 0;\n\t\t\t\t\tvar snipStart = -1;\n\t\t\t\t\tfor (var kk = 0; kk < voice.length; kk++) {\n\t\t\t\t\t\tvar event = voice[kk];\n\t\t\t\t\t\tif (event.el_type === \"overlay\" && !inOverlay) {\n\t\t\t\t\t\t\tmadeChanges = true;\n\t\t\t\t\t\t\tinOverlay = true;\n\t\t\t\t\t\t\tsnipStart = kk;\n\t\t\t\t\t\t\toverlayVoice[k].hasOverlay = true;\n\t\t\t\t\t\t\tif (overlayDuration === 0)\n\t\t\t\t\t\t\t\toverlayDuration = durationsPerLines[i];\n\t\t\t\t\t\t\t// If this isn't the first line, we also need invisible rests on the previous lines.\n\t\t\t\t\t\t\t// So, if the next voice doesn't appear in a previous line, create it\n\t\t\t\t\t\t\tfor (var ii = 0; ii < i; ii++) {\n\t\t\t\t\t\t\t\tif (durationsPerLines[ii] && tune.lines[ii].staff && staff.voices.length >= tune.lines[ii].staff[0].voices.length) {\n\t\t\t\t\t\t\t\t\ttune.lines[ii].staff[0].voices.push([{\n\t\t\t\t\t\t\t\t\t\tel_type: \"note\",\n\t\t\t\t\t\t\t\t\t\tduration: durationsPerLines[ii],\n\t\t\t\t\t\t\t\t\t\trest: { type: \"invisible\" },\n\t\t\t\t\t\t\t\t\t\tstartChar: event.startChar,\n\t\t\t\t\t\t\t\t\t\tendChar: event.endChar\n\t\t\t\t\t\t\t\t\t}]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (event.el_type === \"bar\") {\n\t\t\t\t\t\t\tif (inOverlay) {\n\t\t\t\t\t\t\t\t// delete the overlay events from this array without messing up this loop.\n\t\t\t\t\t\t\t\tinOverlay = false;\n\t\t\t\t\t\t\t\toverlayVoice[k].snip.push({ start: snipStart, len: kk - snipStart });\n\t\t\t\t\t\t\t\toverlayVoice[k].voice.push(event); // Also end the overlay with the barline.\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// This keeps the voices lined up: if the overlay isn't in the first measure then we need a bunch of invisible rests.\n\t\t\t\t\t\t\t\tif (durationThisBar > 0)\n\t\t\t\t\t\t\t\t\toverlayVoice[k].voice.push({ el_type: \"note\", duration: durationThisBar, rest: { type: \"invisible\" }, startChar: event.startChar, endChar: event.endChar });\n\t\t\t\t\t\t\t\toverlayVoice[k].voice.push(event);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdurationThisBar = 0;\n\t\t\t\t\t\t} else if (event.el_type === \"note\") {\n\t\t\t\t\t\t\tif (inOverlay) {\n\t\t\t\t\t\t\t\toverlayVoice[k].voice.push(event);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdurationThisBar += event.duration;\n\t\t\t\t\t\t\t\tdurationsPerLines[i] += event.duration;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (event.el_type === \"scale\" || event.el_type === \"stem\" || event.el_type === \"overlay\" || event.el_type === \"style\" || event.el_type === \"transpose\" || event.el_type === \"color\") {\n\t\t\t\t\t\t\t// These types of events are duplicated on the overlay layer.\n\t\t\t\t\t\t\toverlayVoice[k].voice.push(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (overlayVoice[k].hasOverlay && overlayVoice[k].snip.length === 0) {\n\t\t\t\t\t\t// there was no closing bar, so we didn't set the snip amount.\n\t\t\t\t\t\toverlayVoice[k].snip.push({ start: snipStart, len: voice.length - snipStart });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (k = 0; k < overlayVoice.length; k++) {\n\t\t\t\t\tvar ov = overlayVoice[k];\n\t\t\t\t\tif (ov.hasOverlay) {\n\t\t\t\t\t\tov.voice.splice(0, 0, { el_type: \"stem\", direction: \"down\" })\n\t\t\t\t\t\tstaff.voices.push(ov.voice);\n\t\t\t\t\t\tfor (var kkk = ov.snip.length - 1; kkk >= 0; kkk--) {\n\t\t\t\t\t\t\tvar snip = ov.snip[kkk];\n\t\t\t\t\t\t\tstaff.voices[k].splice(snip.start, snip.len);\n\t\t\t\t\t\t\tstaff.voices[k].splice(snip.start + 1, 0, { el_type: \"stem\", direction: \"auto\" });\n\t\t\t\t\t\t\tvar indexOfLastBar = findLastBar(staff.voices[k], snip.start);\n\t\t\t\t\t\t\tstaff.voices[k].splice(indexOfLastBar, 0, { el_type: \"stem\", direction: \"up\" });\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// remove ending marks from the overlay voice so they are not repeated\n\t\t\t\t\t\tfor (kkk = 0; kkk < staff.voices[staff.voices.length - 1].length; kkk++) {\n\t\t\t\t\t\t\tstaff.voices[staff.voices.length - 1][kkk] = Object.assign({}, staff.voices[staff.voices.length - 1][kkk]);\n\t\t\t\t\t\t\tvar el = staff.voices[staff.voices.length - 1][kkk];\n\t\t\t\t\t\t\tif (el.el_type === 'bar' && el.startEnding) {\n\t\t\t\t\t\t\t\tdelete el.startEnding;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (el.el_type === 'bar' && el.endEnding)\n\t\t\t\t\t\t\t\tdelete el.endEnding;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn madeChanges;\n};\n\nfunction findLastBar(voice, start) {\n\tfor (var i = start - 1; i > 0 && voice[i].el_type !== \"bar\"; i--) {\n\n\t}\n\treturn i;\n}\n\nfunction fixTitles(lines) {\n\t// We might have name and subname defined. We now know what line everything is on, so we can determine which to use.\n\tvar firstMusicLine = true;\n\tfor (var i = 0; i < lines.length; i++) {\n\t\tvar line = lines[i];\n\t\tif (line.staff) {\n\t\t\tfor (var j = 0; j < line.staff.length; j++) {\n\t\t\t\tvar staff = line.staff[j];\n\t\t\t\tif (staff.title) {\n\t\t\t\t\tvar hasATitle = false;\n\t\t\t\t\tfor (var k = 0; k < staff.title.length; k++) {\n\t\t\t\t\t\tif (staff.title[k]) {\n\t\t\t\t\t\t\tstaff.title[k] = (firstMusicLine) ? staff.title[k].name : staff.title[k].subname;\n\t\t\t\t\t\t\tif (staff.title[k])\n\t\t\t\t\t\t\t\thasATitle = true;\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tstaff.title[k] = '';\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tstaff.title[k] = '';\n\t\t\t\t\t}\n\t\t\t\t\tif (!hasATitle)\n\t\t\t\t\t\tdelete staff.title;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfirstMusicLine = false;\n\t\t}\n\t}\n}\n\nfunction cleanUpSlursInLine(line, staffNum, voiceNum, currSlur) {\n\tif (!currSlur[staffNum])\n\t\tcurrSlur[staffNum] = [];\n\tif (!currSlur[staffNum][voiceNum])\n\t\tcurrSlur[staffNum][voiceNum] = [];\n\tvar x;\n\t//\t\t\tvar lyr = null;\t// TODO-PER: debugging.\n\n\tvar addEndSlur = function (obj, num, chordPos) {\n\t\tif (currSlur[staffNum][voiceNum][chordPos] === undefined) {\n\t\t\t// There isn't an exact match for note position, but we'll take any other open slur.\n\t\t\tfor (x = 0; x < currSlur[staffNum][voiceNum].length; x++) {\n\t\t\t\tif (currSlur[staffNum][voiceNum][x] !== undefined) {\n\t\t\t\t\tchordPos = x;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (currSlur[staffNum][voiceNum][chordPos] === undefined) {\n\t\t\t\tvar offNum = chordPos * 100 + 1;\n\t\t\t\tobj.endSlur.forEach(function (x) { if (offNum === x) --offNum; });\n\t\t\t\tcurrSlur[staffNum][voiceNum][chordPos] = [offNum];\n\t\t\t}\n\t\t}\n\t\tvar slurNum;\n\t\tfor (var i = 0; i < num; i++) {\n\t\t\tslurNum = currSlur[staffNum][voiceNum][chordPos].pop();\n\t\t\tobj.endSlur.push(slurNum);\n\t\t\t//\t\t\t\t\tlyr.syllable += '<' + slurNum;\t// TODO-PER: debugging\n\t\t}\n\t\tif (currSlur[staffNum][voiceNum][chordPos].length === 0)\n\t\t\tdelete currSlur[staffNum][voiceNum][chordPos];\n\t\treturn slurNum;\n\t};\n\n\tvar addStartSlur = function (obj, num, chordPos, usedNums) {\n\t\tobj.startSlur = [];\n\t\tif (currSlur[staffNum][voiceNum][chordPos] === undefined) {\n\t\t\tcurrSlur[staffNum][voiceNum][chordPos] = [];\n\t\t}\n\t\tvar nextNum = chordPos * 100 + 1;\n\t\tfor (var i = 0; i < num; i++) {\n\t\t\tif (usedNums) {\n\t\t\t\tusedNums.forEach(function (x) { if (nextNum === x) ++nextNum; });\n\t\t\t\tusedNums.forEach(function (x) { if (nextNum === x) ++nextNum; });\n\t\t\t\tusedNums.forEach(function (x) { if (nextNum === x) ++nextNum; });\n\t\t\t}\n\t\t\tcurrSlur[staffNum][voiceNum][chordPos].forEach(function (x) { if (nextNum === x) ++nextNum; });\n\t\t\tcurrSlur[staffNum][voiceNum][chordPos].forEach(function (x) { if (nextNum === x) ++nextNum; });\n\n\t\t\tcurrSlur[staffNum][voiceNum][chordPos].push(nextNum);\n\t\t\tobj.startSlur.push({ label: nextNum });\n\t\t\tif (obj.dottedSlur) {\n\t\t\t\tobj.startSlur[obj.startSlur.length - 1].style = 'dotted';\n\t\t\t\tdelete obj.dottedSlur;\n\t\t\t}\n\t\t\t//\t\t\t\t\tlyr.syllable += ' ' + nextNum + '>';\t// TODO-PER:debugging\n\t\t\tnextNum++;\n\t\t}\n\t};\n\n\tfor (var i = 0; i < line.length; i++) {\n\t\tvar el = line[i];\n\t\t//\t\t\t\tif (el.lyric === undefined)\t// TODO-PER: debugging\n\t\t//\t\t\t\t\tel.lyric = [{ divider: '-' }];\t// TODO-PER: debugging\n\t\t//\t\t\t\tlyr = el.lyric[0];\t// TODO-PER: debugging\n\t\t//\t\t\t\tlyr.syllable = '';\t// TODO-PER: debugging\n\t\tif (el.el_type === 'note') {\n\t\t\tif (el.gracenotes) {\n\t\t\t\tfor (var g = 0; g < el.gracenotes.length; g++) {\n\t\t\t\t\tif (el.gracenotes[g].endSlur) {\n\t\t\t\t\t\tvar gg = el.gracenotes[g].endSlur;\n\t\t\t\t\t\tel.gracenotes[g].endSlur = [];\n\t\t\t\t\t\tfor (var ggg = 0; ggg < gg; ggg++)\n\t\t\t\t\t\t\taddEndSlur(el.gracenotes[g], 1, 20);\n\t\t\t\t\t}\n\t\t\t\t\tif (el.gracenotes[g].startSlur) {\n\t\t\t\t\t\tx = el.gracenotes[g].startSlur;\n\t\t\t\t\t\taddStartSlur(el.gracenotes[g], x, 20);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (el.endSlur) {\n\t\t\t\tx = el.endSlur;\n\t\t\t\tel.endSlur = [];\n\t\t\t\taddEndSlur(el, x, 0);\n\t\t\t}\n\t\t\tif (el.startSlur) {\n\t\t\t\tx = el.startSlur;\n\t\t\t\taddStartSlur(el, x, 0);\n\t\t\t}\n\t\t\tif (el.pitches) {\n\t\t\t\tvar usedNums = [];\n\t\t\t\tfor (var p = 0; p < el.pitches.length; p++) {\n\t\t\t\t\tif (el.pitches[p].endSlur) {\n\t\t\t\t\t\tvar k = el.pitches[p].endSlur;\n\t\t\t\t\t\tel.pitches[p].endSlur = [];\n\t\t\t\t\t\tfor (var j = 0; j < k; j++) {\n\t\t\t\t\t\t\tvar slurNum = addEndSlur(el.pitches[p], 1, p + 1);\n\t\t\t\t\t\t\tusedNums.push(slurNum);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (p = 0; p < el.pitches.length; p++) {\n\t\t\t\t\tif (el.pitches[p].startSlur) {\n\t\t\t\t\t\tx = el.pitches[p].startSlur;\n\t\t\t\t\t\taddStartSlur(el.pitches[p], x, p + 1, usedNums);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Correct for the weird gracenote case where ({g}a) should match.\n\t\t\t\t// The end slur was already assigned to the note, and needs to be moved to the first note of the graces.\n\t\t\t\tif (el.gracenotes && el.pitches[0].endSlur && el.pitches[0].endSlur[0] === 100 && el.pitches[0].startSlur) {\n\t\t\t\t\tif (el.gracenotes[0].endSlur)\n\t\t\t\t\t\tel.gracenotes[0].endSlur.push(el.pitches[0].startSlur[0].label);\n\t\t\t\t\telse\n\t\t\t\t\t\tel.gracenotes[0].endSlur = [el.pitches[0].startSlur[0].label];\n\t\t\t\t\tif (el.pitches[0].endSlur.length === 1)\n\t\t\t\t\t\tdelete el.pitches[0].endSlur;\n\t\t\t\t\telse if (el.pitches[0].endSlur[0] === 100)\n\t\t\t\t\t\tel.pitches[0].endSlur.shift();\n\t\t\t\t\telse if (el.pitches[0].endSlur[el.pitches[0].endSlur.length - 1] === 100)\n\t\t\t\t\t\tel.pitches[0].endSlur.pop();\n\t\t\t\t\tif (currSlur[staffNum][voiceNum][1].length === 1)\n\t\t\t\t\t\tdelete currSlur[staffNum][voiceNum][1];\n\t\t\t\t\telse\n\t\t\t\t\t\tcurrSlur[staffNum][voiceNum][1].pop();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction wrapMusicLines(lines, barsperstaff) {\n\tfor (var i = 0; i < lines.length; i++) {\n\t\tif (lines[i].staff !== undefined) {\n\t\t\tfor (var s = 0; s < lines[i].staff.length; s++) {\n\t\t\t\tvar permanentItems = [];\n\t\t\t\tfor (var v = 0; v < lines[i].staff[s].voices.length; v++) {\n\t\t\t\t\tvar voice = lines[i].staff[s].voices[v];\n\t\t\t\t\tvar barNumThisLine = 0;\n\t\t\t\t\tfor (var n = 0; n < voice.length; n++) {\n\t\t\t\t\t\tif (voice[n].el_type === 'bar') {\n\t\t\t\t\t\t\tbarNumThisLine++;\n\t\t\t\t\t\t\tif (barNumThisLine >= barsperstaff) {\n\t\t\t\t\t\t\t\t// push everything else to the next line, if there is anything else,\n\t\t\t\t\t\t\t\t// and there is a next line. If there isn't a next line, create one.\n\t\t\t\t\t\t\t\tif (n < voice.length - 1) {\n\t\t\t\t\t\t\t\t\tvar nextLine = getNextMusicLine(lines, i);\n\t\t\t\t\t\t\t\t\tif (!nextLine) {\n\t\t\t\t\t\t\t\t\t\tvar cp = JSON.parse(JSON.stringify(lines[i]));\n\t\t\t\t\t\t\t\t\t\tlines.push(Object.assign({}, cp));\n\t\t\t\t\t\t\t\t\t\tnextLine = lines[lines.length - 1];\n\t\t\t\t\t\t\t\t\t\tfor (var ss = 0; ss < nextLine.staff.length; ss++) {\n\t\t\t\t\t\t\t\t\t\t\tfor (var vv = 0; vv < nextLine.staff[ss].voices.length; vv++)\n\t\t\t\t\t\t\t\t\t\t\t\tnextLine.staff[ss].voices[vv] = [];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvar startElement = n + 1;\n\t\t\t\t\t\t\t\t\tvar section = lines[i].staff[s].voices[v].slice(startElement);\n\t\t\t\t\t\t\t\t\tlines[i].staff[s].voices[v] = lines[i].staff[s].voices[v].slice(0, startElement);\n\t\t\t\t\t\t\t\t\tnextLine.staff[s].voices[v] = permanentItems.concat(section.concat(nextLine.staff[s].voices[v]));\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (!voice[n].duration) {\n\t\t\t\t\t\t\tpermanentItems.push(voice[n]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction getPrevMusicLine(lines, currentLine) {\n\tif (lines.length <= currentLine)\n\t\treturn null\n\t// If the current line doesn't have music, search backwards until one is found.\n\twhile (currentLine >= 0) {\n\t\tif (lines[currentLine].staff)\n\t\t\treturn lines[currentLine];\n\t\tcurrentLine--;\n\t}\n\treturn null;\n}\n\nfunction getNextMusicLine(lines, currentLine) {\n\tcurrentLine++;\n\twhile (lines.length > currentLine) {\n\t\tif (lines[currentLine].staff)\n\t\t\treturn lines[currentLine];\n\t\tcurrentLine++;\n\t}\n\treturn null;\n}\n\nfunction getLastNote(tune) {\n\tif (!tune.lines[tune.lineNum]) return null\n\tif (!tune.lines[tune.lineNum].staff) return null\n\tif (!tune.lines[tune.lineNum].staff[tune.staffNum]) return null\n\tvar voice = tune.lines[tune.lineNum].staff[tune.staffNum].voices[tune.voiceNum]\n\tif (!voice) return null\n\tfor (var i = voice.length - 1; i >= 0; i--) {\n\t\tvar el = voice[i];\n\t\tif (el.el_type === 'note') {\n\t\t\treturn el;\n\t\t}\n\t}\n\treturn null;\n};\n\nfunction getDuration(el) {\n\tif (el.duration) return el.duration;\n\treturn 0;\n};\n\nfunction closeLine(tune) {\n\tif (tune.potentialStartBeam && tune.potentialEndBeam) {\n\t\ttune.potentialStartBeam.startBeam = true;\n\t\ttune.potentialEndBeam.endBeam = true;\n\t}\n\tdelete tune.potentialStartBeam;\n\tdelete tune.potentialEndBeam;\n};\n\nfunction containsNotes(voice) {\n\tfor (var i = 0; i < voice.length; i++) {\n\t\tif (voice[i].el_type === 'note' || voice[i].el_type === 'bar')\n\t\t\treturn true;\n\t}\n\treturn false;\n};\n\nfunction containsNotesStrict(voice) {\n\tfor (var i = 0; i < voice.length; i++) {\n\t\tif (voice[i].el_type === 'note' && (voice[i].rest === undefined || voice[i].chord !== undefined))\n\t\t\treturn true;\n\t}\n\treturn false;\n};\n\nfunction pushLine(tune, hash) {\n\tif (tune.vskipPending) {\n\t\thash.vskip = tune.vskipPending;\n\t\tdelete tune.vskipPending;\n\t}\n\ttune.lines.push(hash);\n};\n\nfunction pushNote(self, tune, hp, voiceDefs, currentVoiceName) {\n\t//console.log(\"pushNote\", tune.lineNum, tune.staffNum, hp.pitches ? JSON.stringify(hp.pitches) : hp.pitches)\n\tvar currStaff = tune.lines[tune.lineNum].staff[tune.staffNum];\n\n\tif (hp.pitches !== undefined) {\n\t\tvar mid = currStaff.workingClef.verticalPos;\n\t\thp.pitches.forEach(function (p) { p.verticalPos = p.pitch - mid; });\n\t}\n\tif (hp.gracenotes !== undefined) {\n\t\tvar mid2 = currStaff.workingClef.verticalPos;\n\t\thp.gracenotes.forEach(function (p) { p.verticalPos = p.pitch - mid2; });\n\t}\n\tif (currStaff.voices.length <= tune.voiceNum) {\n\t\t//console.log(\"should create?\", currentVoiceName, voiceDefs)\n\t\tif (!voiceDefs[currentVoiceName])\n\t\t\tvoiceDefs[currentVoiceName] = {}\n\t\tcreateVoice(self, tune, voiceDefs[currentVoiceName])\n\t}\n\tcurrStaff.voices[tune.voiceNum].push(hp);\n}\n\nfunction endBeamHere(hashParams, tune) {\n\ttune.potentialStartBeam.startBeam = true;\n\thashParams.endBeam = true;\n\tdelete tune.potentialStartBeam;\n\tdelete tune.potentialEndBeam;\n}\nfunction endBeamLast(tune) {\n\tif (tune.potentialStartBeam !== undefined && tune.potentialEndBeam !== undefined) {\t// Do we have a set of notes to beam?\n\t\ttune.potentialStartBeam.startBeam = true;\n\t\ttune.potentialEndBeam.endBeam = true;\n\t}\n\tdelete tune.potentialStartBeam;\n\tdelete tune.potentialEndBeam;\n}\n\nfunction setLineFont(tune, type, font) {\n\t// If we haven't encountered the font type yet then we are using the default font so it doesn't\n\t// need to be noted. If we have encountered it, then only record it if it is different from the last time.\n\tif (tune.runningFonts[type]) {\n\t\tvar isDifferent = false;\n\t\tvar keys = Object.keys(font);\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tif (tune.runningFonts[type][keys[i]] !== font[keys[i]])\n\t\t\t\tisDifferent = true;\n\t\t}\n\t\tif (isDifferent) {\n\t\t\ttune.lines[tune.lineNum].staff[tune.staffNum][type] = font;\n\t\t}\n\t}\n\ttune.runningFonts[type] = font;\n}\n\nfunction createVoice(self, tune, params) {\n\t//console.log(\"createVoice\", params)\n\tvar thisStaff = tune.lines[tune.lineNum].staff[tune.staffNum];\n\tthisStaff.voices[tune.voiceNum] = [];\n\tif (!thisStaff.title)\n\t\tthisStaff.title = [];\n\tthisStaff.title[tune.voiceNum] = { name: params.name, subname: params.subname };\n\tif (params.style)\n\t\tself.appendElement('style', null, null, { head: params.style });\n\tif (params.stem)\n\t\tself.appendElement('stem', null, null, { direction: params.stem });\n\telse if (tune.voiceNum > 0) {\n\t\tif (thisStaff.voices[0] !== undefined) {\n\t\t\tvar found = false;\n\t\t\tfor (var i = 0; i < thisStaff.voices[0].length; i++) {\n\t\t\t\tif (thisStaff.voices[0].el_type === 'stem')\n\t\t\t\t\tfound = true;\n\t\t\t}\n\t\t\tif (!found) {\n\t\t\t\tvar stem = { el_type: 'stem', direction: 'up' };\n\t\t\t\tthisStaff.voices[0].splice(0, 0, stem);\n\t\t\t}\n\t\t}\n\t\tself.appendElement('stem', null, null, { direction: 'down' });\n\t}\n\tif (params.scale)\n\t\tself.appendElement('scale', null, null, { size: params.scale });\n\tif (params.color)\n\t\tself.appendElement('color', null, null, { color: params.color });\n}\n\nfunction createStaff(self, tune, params) {\n\tif (params.key && params.key.impliedNaturals) {\n\t\tparams.key.accidentals = params.key.accidentals.concat(params.key.impliedNaturals);\n\t\tdelete params.key.impliedNaturals;\n\t}\n\n\ttune.lines[tune.lineNum].staff[tune.staffNum] = { voices: [], clef: params.clef, key: params.key, workingClef: params.clef };\n\tvar staff = tune.lines[tune.lineNum].staff[tune.staffNum]\n\tif (params.stafflines !== undefined) {\n\t\tstaff.clef.stafflines = params.stafflines;\n\t\tstaff.workingClef.stafflines = params.stafflines;\n\t}\n\tif (params.staffscale) {\n\t\tstaff.staffscale = params.staffscale;\n\t}\n\tif (params.annotationfont) setLineFont(tune, \"annotationfont\", params.annotationfont);\n\tif (params.gchordfont) setLineFont(tune, \"gchordfont\", params.gchordfont);\n\tif (params.tripletfont) setLineFont(tune, \"tripletfont\", params.tripletfont);\n\tif (params.vocalfont) setLineFont(tune, \"vocalfont\", params.vocalfont);\n\tif (params.bracket) staff.bracket = params.bracket;\n\tif (params.brace) staff.brace = params.brace;\n\tif (params.connectBarLines) staff.connectBarLines = params.connectBarLines;\n\tif (params.barNumber) staff.barNumber = params.barNumber;\n\tcreateVoice(self, tune, params);\n\t// Some stuff just happens for the first voice\n\tif (params.part)\n\t\tself.appendElement('part', params.part.startChar, params.part.endChar, { title: params.part.title });\n\tif (params.meter !== undefined) staff.meter = params.meter;\n\tif (tune.vskipPending) {\n\t\ttune.lines[tune.lineNum].vskip = tune.vskipPending;\n\t\tdelete tune.vskipPending;\n\t}\n}\n\nfunction createLine(self, tune, params) {\n\ttune.lines[tune.lineNum] = { staff: [] };\n\tcreateStaff(self, tune, params);\n}\n\nmodule.exports = TuneBuilder;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL3R1bmUtYnVpbGRlci5qcyIsIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0IsbUJBQU8sQ0FBQyxpR0FBOEI7QUFDMUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUJBQW1CO0FBQ25COztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsdUJBQXVCO0FBQ3JDO0FBQ0E7QUFDQSxnQkFBZ0IsZ0NBQWdDO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxhQUFhO0FBQ2hELE9BQU87QUFDUCxrQkFBa0IsMENBQTBDO0FBQzVEO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxlQUFlO0FBQ25FO0FBQ0E7QUFDQSxzREFBc0QsZUFBZTtBQUNyRSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsdUJBQXVCO0FBQ3RDO0FBQ0EsaUJBQWlCLGdDQUFnQztBQUNqRDtBQUNBLGtCQUFrQiwwQ0FBMEM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxnQkFBZ0I7QUFDeEUsS0FBSztBQUNMO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxjQUFjLHVCQUF1QjtBQUNyQztBQUNBLGdCQUFnQixnQ0FBZ0M7QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQix1QkFBdUI7QUFDekM7QUFDQTtBQUNBLDRCQUE0Qiw4QkFBOEI7QUFDMUQ7QUFDQTtBQUNBLDZCQUE2QixvREFBb0Q7QUFDakY7QUFDQTtBQUNBLHNCQUFzQixrQkFBa0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSyx5RUFBeUU7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLDBDQUEwQztBQUMvQyxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04seUNBQXlDO0FBQ3pDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksT0FBTztBQUNYO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUIseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUNBQW1DOztBQUVuQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0MsOENBQThDO0FBQzlDO0FBQ0EsaURBQWlEO0FBQ2pELHNEQUFzRDtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUJBQW1CLFlBQVksK0RBQStEO0FBQzlGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1CQUFtQixjQUFjO0FBQ2pDOztBQUVBO0FBQ0EsbUJBQW1CLGFBQWEsZ0tBQWdLO0FBQ2hNOztBQUVBO0FBQ0EsbUJBQW1CLFFBQVEsK0RBQStEO0FBQzFGOztBQUVBO0FBQ0EsbUJBQW1CLFNBQVMseUJBQXlCLEdBQUc7QUFDeEQ7O0FBRUE7QUFDQSxxQkFBcUIsOEJBQThCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsNENBQTRDLGFBQWE7QUFDekQ7QUFDQTtBQUNBLDRDQUE0QyxjQUFjO0FBQzFEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFLDBCQUEwQjtBQUN2RyxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQix1QkFBdUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDBCQUEwQixRQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVCQUF1QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDBCQUEwQjtBQUN2RDtBQUNBLGdCQUFnQixhQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGdCQUFnQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QztBQUNBLHNCQUFzQiwyQkFBMkI7QUFDakQsdUJBQXVCLHFDQUFxQztBQUM1RDtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBLDBCQUEwQiwwQkFBMEI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwwQkFBMEI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix1QkFBdUI7QUFDeEM7QUFDQTtBQUNBLG1CQUFtQix1QkFBdUI7QUFDMUM7QUFDQTtBQUNBLG9CQUFvQix5QkFBeUI7QUFDN0M7QUFDQSx5QkFBeUIsd0NBQXdDO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsbUJBQW1CO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsdUNBQXVDO0FBQzNFLDJDQUEyQztBQUMzQyxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHNDQUFzQyxvREFBb0QsbUJBQW1CLHNEQUFzRDtBQUNuSztBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGlEQUFpRDtBQUNuRjtBQUNBO0FBQ0EsZ0JBQWdCLHlCQUF5QjtBQUN6QztBQUNBO0FBQ0EsOEJBQThCLG9DQUFvQztBQUNsRTtBQUNBLHlDQUF5QyxVQUFVO0FBQ25EO0FBQ0E7QUFDQSxtREFBbUQsb0NBQW9DO0FBQ3ZGO0FBQ0EsbURBQW1ELGtDQUFrQztBQUNyRjtBQUNBO0FBQ0Esb0JBQW9CLG9EQUFvRDtBQUN4RSxvRUFBb0U7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QixxQ0FBcUM7O0FBRTlEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQSxtQkFBbUIsdUJBQXVCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix3QkFBd0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjs7QUFFdEI7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5Q0FBeUM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsNkJBQTZCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFNBQVM7QUFDM0I7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixTQUFTO0FBQzNCO0FBQ0Esb0NBQW9DLCtCQUErQjtBQUNuRSxvQ0FBb0MsK0JBQStCO0FBQ25FLG9DQUFvQywrQkFBK0I7QUFDbkU7QUFDQSxpRUFBaUUsK0JBQStCO0FBQ2hHLGlFQUFpRSwrQkFBK0I7O0FBRWhHO0FBQ0Esd0JBQXdCLGdCQUFnQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBO0FBQ0E7O0FBRUEsaUJBQWlCLGlCQUFpQjtBQUNsQztBQUNBO0FBQ0EsdUJBQXVCLGNBQWMsR0FBRztBQUN4QywyQkFBMkI7QUFDM0IsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQSxvQkFBb0IsMEJBQTBCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixVQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVCQUF1QjtBQUMzQztBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsT0FBTztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHVCQUF1QjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELEVBQUU7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLGtCQUFrQjtBQUNuQztBQUNBLG1CQUFtQiwyQkFBMkI7QUFDOUM7QUFDQSxvQkFBb0IscUNBQXFDO0FBQ3pEO0FBQ0E7QUFDQSxxQkFBcUIsa0JBQWtCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBLDJCQUEyQiw0QkFBNEI7QUFDdkQsNEJBQTRCLHVDQUF1QztBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLFFBQVE7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9DQUFvQyxnQ0FBZ0M7QUFDcEU7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLGlDQUFpQztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRkFBcUY7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpQkFBaUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBLDRDQUE0QyxvQkFBb0I7QUFDaEU7QUFDQSwyQ0FBMkMsd0JBQXdCO0FBQ25FO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnQ0FBZ0M7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLG1CQUFtQjtBQUM5RDtBQUNBO0FBQ0EsNENBQTRDLG9CQUFvQjtBQUNoRTtBQUNBLDRDQUE0QyxxQkFBcUI7QUFDakU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsMEJBQTBCO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL3R1bmUtYnVpbGRlci5qcz9jMjMyIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBwYXJzZUtleVZvaWNlID0gcmVxdWlyZSgnLi4vcGFyc2UvYWJjX3BhcnNlX2tleV92b2ljZScpO1xuLy92YXIgcGFyc2VDb21tb24gPSByZXF1aXJlKCcuLi9wYXJzZS9hYmNfY29tbW9uJyk7XG4vL3ZhciBwYXJzZURpcmVjdGl2ZSA9IHJlcXVpcmUoJy4vYWJjX3BhcnNlX2RpcmVjdGl2ZScpO1xuXG52YXIgVHVuZUJ1aWxkZXIgPSBmdW5jdGlvbiAodHVuZSkge1xuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdHZhciB2b2ljZURlZnMgPSB7fVxuXHR2YXIgY3VycmVudFZvaWNlTmFtZSA9ICcnXG5cdHR1bmUucmVzZXQoKTtcblxuXHR0aGlzLnNldFZpc3VhbFRyYW5zcG9zZSA9IGZ1bmN0aW9uICh2aXN1YWxUcmFuc3Bvc2UpIHtcblx0XHRpZiAodmlzdWFsVHJhbnNwb3NlIT09dW5kZWZpbmVkKVxuXHRcdFx0dHVuZS52aXN1YWxUcmFuc3Bvc2UgPSB2aXN1YWxUcmFuc3Bvc2U7XG5cdH07XG5cblx0dGhpcy5jbGVhblVwID0gZnVuY3Rpb24gKGJhcnNwZXJzdGFmZiwgc3RhZmZub25vdGUsIGN1cnJTbHVyKSB7XG5cdFx0Y2xvc2VMaW5lKHR1bmUpO1x0Ly8gQ2xvc2UgdGhlIGxhc3QgbGluZS5cblx0XHRkZWxldGUgdHVuZS5ydW5uaW5nRm9udHM7XG5cblx0XHRzaW1wbGlmeU1ldGFUZXh0KHR1bmUpXG5cdFx0Ly9hZGRSaWNoVGV4dFRvQW5ub3RhdGlvbnNBbmRMeXJpY3ModHVuZSlcblxuXHRcdC8vIElmIHRoZSB0ZW1wbyB3YXMgY3JlYXRlZCB3aXRoIGEgc3RyaW5nIGxpa2UgXCJBbGxlZ3JvXCIsIHRoZW4gdGhlIGR1cmF0aW9uIG9mIGEgYmVhdCBuZWVkcyB0byBiZSBzZXQgYXQgdGhlIGxhc3QgbW9tZW50LCB3aGVuIGl0IGlzIG1vc3QgbGlrZWx5IGtub3duLlxuXHRcdGlmICh0dW5lLm1ldGFUZXh0LnRlbXBvICYmIHR1bmUubWV0YVRleHQudGVtcG8uYnBtICYmICF0dW5lLm1ldGFUZXh0LnRlbXBvLmR1cmF0aW9uKVxuXHRcdFx0dHVuZS5tZXRhVGV4dC50ZW1wby5kdXJhdGlvbiA9IFt0dW5lLmdldEJlYXRMZW5ndGgoKV07XG5cblx0XHQvLyBSZW1vdmUgYW55IGJsYW5rIGxpbmVzXG5cdFx0dmFyIGFueURlbGV0ZWQgPSBmYWxzZTtcblx0XHR2YXIgaSwgcywgdjtcblx0XHRmb3IgKGkgPSAwOyBpIDwgdHVuZS5saW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKHR1bmUubGluZXNbaV0uc3RhZmYgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHR2YXIgaGFzQW55ID0gZmFsc2U7XG5cdFx0XHRcdGZvciAocyA9IDA7IHMgPCB0dW5lLmxpbmVzW2ldLnN0YWZmLmxlbmd0aDsgcysrKSB7XG5cdFx0XHRcdFx0aWYgKHR1bmUubGluZXNbaV0uc3RhZmZbc10gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0YW55RGVsZXRlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHR0dW5lLmxpbmVzW2ldLnN0YWZmW3NdID0gbnVsbDtcblx0XHRcdFx0XHRcdC8vdHVuZS5saW5lc1tpXS5zdGFmZltzXSA9IHsgdm9pY2VzOiBbXX07XHQvLyBUT0RPLVBFUjogVGhlcmUgd2FzIGEgcGFydCBtaXNzaW5nIGluIHRoZSBhYmMgbXVzaWMuIEhvdyBzaG91bGQgd2UgcmVjb3Zlcj9cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Zm9yICh2ID0gMDsgdiA8IHR1bmUubGluZXNbaV0uc3RhZmZbc10udm9pY2VzLmxlbmd0aDsgdisrKSB7XG5cdFx0XHRcdFx0XHRcdGlmICh0dW5lLmxpbmVzW2ldLnN0YWZmW3NdLnZvaWNlc1t2XSA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdFx0XHRcdHR1bmUubGluZXNbaV0uc3RhZmZbc10udm9pY2VzW3ZdID0gW107XHQvLyBUT0RPLVBFUjogVGhlcmUgd2FzIGEgcGFydCBtaXNzaW5nIGluIHRoZSBhYmMgbXVzaWMuIEhvdyBzaG91bGQgd2UgcmVjb3Zlcj9cblx0XHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHRcdGlmIChjb250YWluc05vdGVzKHR1bmUubGluZXNbaV0uc3RhZmZbc10udm9pY2VzW3ZdKSkgaGFzQW55ID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCFoYXNBbnkpIHtcblx0XHRcdFx0XHR0dW5lLmxpbmVzW2ldID0gbnVsbDtcblx0XHRcdFx0XHRhbnlEZWxldGVkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoYW55RGVsZXRlZCkge1xuXHRcdFx0dHVuZS5saW5lcyA9IHR1bmUubGluZXMuZmlsdGVyKGZ1bmN0aW9uIChsaW5lKSB7IHJldHVybiAhIWxpbmUgfSk7XG5cdFx0XHR0dW5lLmxpbmVzLmZvckVhY2goZnVuY3Rpb24gKGxpbmUpIHtcblx0XHRcdFx0aWYgKGxpbmUuc3RhZmYpXG5cdFx0XHRcdFx0bGluZS5zdGFmZiA9IGxpbmUuc3RhZmYuZmlsdGVyKGZ1bmN0aW9uIChsaW5lKSB7IHJldHVybiAhIWxpbmUgfSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvLyBpZiB3ZSBleGNlZWRlZCB0aGUgbnVtYmVyIG9mIGJhcnMgYWxsb3dlZCBvbiBhIGxpbmUsIHRoZW4gZm9yY2UgYSBuZXcgbGluZVxuXHRcdGlmIChiYXJzcGVyc3RhZmYpIHtcblx0XHRcdHdoaWxlICh3cmFwTXVzaWNMaW5lcyh0dW5lLmxpbmVzLCBiYXJzcGVyc3RhZmYpKSB7XG5cdFx0XHRcdC8vIFRoaXMgd2lsbCBrZWVwIHdyYXBwaW5nIHVudGlsIHRoZSBlbmQgb2YgdGhlIHBpZWNlLlxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIElmIHdlIHdlcmUgcGFzc2VkIHN0YWZmbm9ub3RlLCB0aGVuIHdlIHdhbnQgdG8gZ2V0IHJpZCBvZiBhbGwgc3RhZmZzIHRoYXQgY29udGFpbiBvbmx5IHJlc3RzLlxuXHRcdGlmIChzdGFmZm5vbm90ZSkge1xuXHRcdFx0YW55RGVsZXRlZCA9IGZhbHNlO1xuXHRcdFx0Zm9yIChpID0gMDsgaSA8IHR1bmUubGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKHR1bmUubGluZXNbaV0uc3RhZmYgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGZvciAocyA9IDA7IHMgPCB0dW5lLmxpbmVzW2ldLnN0YWZmLmxlbmd0aDsgcysrKSB7XG5cdFx0XHRcdFx0XHR2YXIga2VlcFRoaXMgPSBmYWxzZTtcblx0XHRcdFx0XHRcdGZvciAodiA9IDA7IHYgPCB0dW5lLmxpbmVzW2ldLnN0YWZmW3NdLnZvaWNlcy5sZW5ndGg7IHYrKykge1xuXHRcdFx0XHRcdFx0XHRpZiAoY29udGFpbnNOb3Rlc1N0cmljdCh0dW5lLmxpbmVzW2ldLnN0YWZmW3NdLnZvaWNlc1t2XSkpIHtcblx0XHRcdFx0XHRcdFx0XHRrZWVwVGhpcyA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICgha2VlcFRoaXMpIHtcblx0XHRcdFx0XHRcdFx0YW55RGVsZXRlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdHR1bmUubGluZXNbaV0uc3RhZmZbc10gPSBudWxsO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKGFueURlbGV0ZWQpIHtcblx0XHRcdFx0dHVuZS5saW5lcy5mb3JFYWNoKGZ1bmN0aW9uIChsaW5lKSB7XG5cdFx0XHRcdFx0aWYgKGxpbmUuc3RhZmYpXG5cdFx0XHRcdFx0XHRsaW5lLnN0YWZmID0gbGluZS5zdGFmZi5maWx0ZXIoZnVuY3Rpb24gKHN0YWZmKSB7IHJldHVybiAhIXN0YWZmIH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmaXhUaXRsZXModHVuZS5saW5lcyk7XG5cblx0XHQvLyBSZW1vdmUgdGhlIHRlbXBvcmFyeSB3b3JraW5nIHZhcmlhYmxlc1xuXHRcdGZvciAoaSA9IDA7IGkgPCB0dW5lLmxpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAodHVuZS5saW5lc1tpXS5zdGFmZikge1xuXHRcdFx0XHRmb3IgKHMgPSAwOyBzIDwgdHVuZS5saW5lc1tpXS5zdGFmZi5sZW5ndGg7IHMrKylcblx0XHRcdFx0XHRkZWxldGUgdHVuZS5saW5lc1tpXS5zdGFmZltzXS53b3JraW5nQ2xlZjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBJZiB0aGVyZSBhcmUgb3ZlcmxheXMsIGNyZWF0ZSBuZXcgdm9pY2VzIGZvciB0aGVtLlxuXHRcdHdoaWxlIChyZXNvbHZlT3ZlcmxheXModHVuZSkpIHtcblx0XHRcdC8vIGtlZXAgcmVzb2x2aW5nIG92ZXJsYXlzIGFzIGxvbmcgYXMgYW55IGFyZSBmb3VuZC5cblx0XHR9XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHR1bmUubGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBzdGFmZiA9IHR1bmUubGluZXNbaV0uc3RhZmY7XG5cdFx0XHRpZiAoc3RhZmYpIHtcblx0XHRcdFx0Zm9yICh0dW5lLnN0YWZmTnVtID0gMDsgdHVuZS5zdGFmZk51bSA8IHN0YWZmLmxlbmd0aDsgdHVuZS5zdGFmZk51bSsrKSB7XG5cdFx0XHRcdFx0aWYgKHN0YWZmW3R1bmUuc3RhZmZOdW1dLmNsZWYpXG5cdFx0XHRcdFx0XHRwYXJzZUtleVZvaWNlLmZpeENsZWYoc3RhZmZbdHVuZS5zdGFmZk51bV0uY2xlZik7XG5cdFx0XHRcdFx0Zm9yICh0dW5lLnZvaWNlTnVtID0gMDsgdHVuZS52b2ljZU51bSA8IHN0YWZmW3R1bmUuc3RhZmZOdW1dLnZvaWNlcy5sZW5ndGg7IHR1bmUudm9pY2VOdW0rKykge1xuXHRcdFx0XHRcdFx0dmFyIHZvaWNlID0gc3RhZmZbdHVuZS5zdGFmZk51bV0udm9pY2VzW3R1bmUudm9pY2VOdW1dO1xuXHRcdFx0XHRcdFx0Y2xlYW5VcFNsdXJzSW5MaW5lKHZvaWNlLCB0dW5lLnN0YWZmTnVtLCB0dW5lLnZvaWNlTnVtLCBjdXJyU2x1cik7XG5cdFx0XHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHZvaWNlLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdFx0XHRcdGlmICh2b2ljZVtqXS5lbF90eXBlID09PSAnY2xlZicpXG5cdFx0XHRcdFx0XHRcdFx0cGFyc2VLZXlWb2ljZS5maXhDbGVmKHZvaWNlW2pdKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICh2b2ljZS5sZW5ndGggPiAwICYmIHZvaWNlW3ZvaWNlLmxlbmd0aCAtIDFdLmJhck51bWJlcikge1xuXHRcdFx0XHRcdFx0XHQvLyBEb24ndCBoYW5nIGEgYmFyIG51bWJlciBvbiB0aGUgbGFzdCBiYXIgbGluZTogaXQgc2hvdWxkIGdvIG9uIHRoZSBuZXh0IGxpbmUuXG5cdFx0XHRcdFx0XHRcdHZhciBuZXh0TGluZSA9IGdldE5leHRNdXNpY0xpbmUodHVuZS5saW5lcywgaSk7XG5cdFx0XHRcdFx0XHRcdGlmIChuZXh0TGluZSlcblx0XHRcdFx0XHRcdFx0XHRuZXh0TGluZS5zdGFmZlswXS5iYXJOdW1iZXIgPSB2b2ljZVt2b2ljZS5sZW5ndGggLSAxXS5iYXJOdW1iZXI7XG5cdFx0XHRcdFx0XHRcdGRlbGV0ZSB2b2ljZVt2b2ljZS5sZW5ndGggLSAxXS5iYXJOdW1iZXI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUmVtb3ZlIHRlbXBvcmFyeSB2YXJpYWJsZXMgdGhhdCB0aGUgb3V0c2lkZSBkb2Vzbid0IG5lZWQgdG8ga25vdyBhYm91dFxuXHRcdGRlbGV0ZSB0dW5lLnN0YWZmTnVtO1xuXHRcdGRlbGV0ZSB0dW5lLnZvaWNlTnVtO1xuXHRcdGRlbGV0ZSB0dW5lLmxpbmVOdW07XG5cdFx0ZGVsZXRlIHR1bmUucG90ZW50aWFsU3RhcnRCZWFtO1xuXHRcdGRlbGV0ZSB0dW5lLnBvdGVudGlhbEVuZEJlYW07XG5cdFx0ZGVsZXRlIHR1bmUudnNraXBQZW5kaW5nO1xuXG5cdFx0cmV0dXJuIGN1cnJTbHVyO1xuXHR9O1xuXG5cdHRoaXMuYWRkVGllVG9MYXN0Tm90ZSA9IGZ1bmN0aW9uIChkb3R0ZWRUaWUpIHtcblx0XHQvLyBUT0RPLVBFUjogaWYgdGhpcyBpcyBhIGNob3JkLCB3aGljaCBub3RlP1xuXHRcdHZhciBlbCA9IGdldExhc3ROb3RlKHR1bmUpO1xuXHRcdGlmIChlbCAmJiBlbC5waXRjaGVzICYmIGVsLnBpdGNoZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0ZWwucGl0Y2hlc1swXS5zdGFydFRpZSA9IHt9O1xuXHRcdFx0aWYgKGRvdHRlZFRpZSlcblx0XHRcdFx0ZWwucGl0Y2hlc1swXS5zdGFydFRpZS5zdHlsZSA9ICdkb3R0ZWQnO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fTtcblxuXHR0aGlzLmFwcGVuZEVsZW1lbnQgPSBmdW5jdGlvbiAodHlwZSwgc3RhcnRDaGFyLCBlbmRDaGFyLCBoYXNoUGFyYW1zKSB7XG5cdFx0aGFzaFBhcmFtcy5lbF90eXBlID0gdHlwZTtcblx0XHRpZiAoc3RhcnRDaGFyICE9PSBudWxsKVxuXHRcdFx0aGFzaFBhcmFtcy5zdGFydENoYXIgPSBzdGFydENoYXI7XG5cdFx0aWYgKGVuZENoYXIgIT09IG51bGwpXG5cdFx0XHRoYXNoUGFyYW1zLmVuZENoYXIgPSBlbmRDaGFyO1xuXHRcdGlmICh0eXBlID09PSAnbm90ZScpIHsgLy8gJiYgKGhhc2hQYXJhbXMucmVzdCAhPT0gdW5kZWZpbmVkIHx8IGhhc2hQYXJhbXMuZW5kX2JlYW0gPT09IHVuZGVmaW5lZCkpIHtcblx0XHRcdC8vIE5vdywgYWRkIHRoZSBzdGFydEJlYW0gYW5kIGVuZEJlYW0gd2hlcmUgaXQgaXMgbmVlZGVkLlxuXHRcdFx0Ly8gZW5kX2JlYW0gaXMgYWxyZWFkeSBzZXQgb24gdGhlIHBsYWNlcyB3aGVyZSB0aGVyZSBpcyBhIGZvcmNlZCBlbmRfYmVhbS4gV2UnbGwgcmVtb3ZlIHRoYXQgaGVyZSBhZnRlciB1c2luZyB0aGF0IGluZm8uXG5cdFx0XHQvLyB0aGlzLnBvdGVudGlhbFN0YXJ0QmVhbSBlaXRoZXIgcG9pbnRzIHRvIG51bGwgb3IgdGhlIHN0YXJ0IGJlYW0uXG5cdFx0XHQvLyB0aGlzLnBvdGVudGlhbEVuZEJlYW0gZWl0aGVyIHBvaW50cyB0byBudWxsIG9yIHRoZSBzdGFydCBiZWFtLlxuXHRcdFx0Ly8gSWYgd2UgaGF2ZSBhIGJlYW0gYnJlYWsgKG5vdGUgaXMgbG9uZ2VyIHRoYW4gYSBxdWFydGVyLCBvciBhbiBlbmRfYmVhbSBpcyBvbiB0aGlzIGVsZW1lbnQpLCB0aGVuIHNldCB0aGUgYmVhbSBpZiB3ZSBoYXZlIG9uZS5cblx0XHRcdC8vIHJlc2V0IHRoZSB2YXJpYWJsZXMgZm9yIHRoZSBuZXh0IG5vdGVzLlxuXHRcdFx0dmFyIGR1ciA9IGdldER1cmF0aW9uKGhhc2hQYXJhbXMpO1xuXHRcdFx0aWYgKGR1ciA+PSAwLjI1KSB7XHQvLyBUaGUgYmVhbSBlbmRzIG9uIHRoZSBub3RlIGJlZm9yZSB0aGlzLlxuXHRcdFx0XHRlbmRCZWFtTGFzdCh0dW5lKTtcblx0XHRcdH0gZWxzZSBpZiAoaGFzaFBhcmFtcy5mb3JjZV9lbmRfYmVhbV9sYXN0ICYmIHR1bmUucG90ZW50aWFsU3RhcnRCZWFtICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0ZW5kQmVhbUxhc3QodHVuZSk7XG5cdFx0XHR9IGVsc2UgaWYgKGhhc2hQYXJhbXMuZW5kX2JlYW0gJiYgdHVuZS5wb3RlbnRpYWxTdGFydEJlYW0gIT09IHVuZGVmaW5lZCkge1x0Ly8gdGhlIGJlYW0gaXMgZm9yY2VkIHRvIGVuZCBvbiB0aGlzIG5vdGUsIHByb2JhYmx5IGJlY2F1c2Ugb2YgYSBzcGFjZSBpbiB0aGUgQUJDXG5cdFx0XHRcdGlmIChoYXNoUGFyYW1zLnJlc3QgPT09IHVuZGVmaW5lZClcblx0XHRcdFx0XHRlbmRCZWFtSGVyZShoYXNoUGFyYW1zLCB0dW5lKTtcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdGVuZEJlYW1MYXN0KHR1bmUpO1xuXHRcdFx0fSBlbHNlIGlmIChoYXNoUGFyYW1zLnJlc3QgPT09IHVuZGVmaW5lZCkge1x0Ly8gdGhpcyBhIHNob3J0IG5vdGUgYW5kIHdlIGFyZW4ndCBhYm91dCB0byBlbmQgdGhlIGJlYW1cblx0XHRcdFx0aWYgKHR1bmUucG90ZW50aWFsU3RhcnRCZWFtID09PSB1bmRlZmluZWQpIHtcdC8vIFdlIGFyZW4ndCBjb2xsZWN0aW5nIG5vdGVzIGZvciBhIGJlYW0sIHNvIHN0YXJ0IGhlcmUuXG5cdFx0XHRcdFx0aWYgKCFoYXNoUGFyYW1zLmVuZF9iZWFtKSB7XG5cdFx0XHRcdFx0XHR0dW5lLnBvdGVudGlhbFN0YXJ0QmVhbSA9IGhhc2hQYXJhbXM7XG5cdFx0XHRcdFx0XHRkZWxldGUgdHVuZS5wb3RlbnRpYWxFbmRCZWFtO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0dW5lLnBvdGVudGlhbEVuZEJlYW0gPSBoYXNoUGFyYW1zO1x0Ly8gQ29udGludWUgdGhlIGJlYW1pbmcsIGxvb2sgZm9yIHRoZSBlbmQgbmV4dCBub3RlLlxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vICBlbmRfYmVhbSBnb2VzIG9uIHJlc3RzIGFuZCBub3RlcyB3aGljaCBwcmVjZWRlIHJlc3RzIF9leGNlcHRfIHdoZW4gYSByZXN0IChvciBzZXQgb2YgYWRqYWNlbnQgcmVzdHMpIGhhcyBub3JtYWwgbm90ZXMgb24gYm90aCBzaWRlcyAobm8gc3BhY2VzKVxuXHRcdFx0Ly9cdFx0XHRpZiAoaGFzaFBhcmFtcy5yZXN0ICE9PSB1bmRlZmluZWQpXG5cdFx0XHQvL1x0XHRcdHtcblx0XHRcdC8vXHRcdFx0XHRoYXNoUGFyYW1zLmVuZF9iZWFtID0gdHJ1ZTtcblx0XHRcdC8vXHRcdFx0XHR2YXIgZWwyID0gZ2V0TGFzdE5vdGUodHVuZSk7XG5cdFx0XHQvL1x0XHRcdFx0aWYgKGVsMikgZWwyLmVuZF9iZWFtID0gdHJ1ZTtcblx0XHRcdC8vXHRcdFx0XHQvLyBUT0RPLVBFUjogaW1wbGVtZW50IGV4Y2VwdGlvbiBtZW50aW9uZWQgaW4gdGhlIGNvbW1lbnQuXG5cdFx0XHQvL1x0XHRcdH1cblx0XHR9IGVsc2Uge1x0Ly8gSXQncyBub3QgYSBub3RlLCBzbyB0aGVyZSBkZWZpbml0ZWx5IGlzbid0IGJlYW1pbmcgYWZ0ZXIgaXQuXG5cdFx0XHRlbmRCZWFtTGFzdCh0dW5lKTtcblx0XHR9XG5cdFx0ZGVsZXRlIGhhc2hQYXJhbXMuZW5kX2JlYW07XHQvLyBXZSBkb24ndCB3YW50IHRoaXMgdGVtcG9yYXJ5IHZhcmlhYmxlIGhhbmdpbmcgYXJvdW5kLlxuXHRcdGRlbGV0ZSBoYXNoUGFyYW1zLmZvcmNlX2VuZF9iZWFtX2xhc3Q7XHQvLyBXZSBkb24ndCB3YW50IHRoaXMgdGVtcG9yYXJ5IHZhcmlhYmxlIGhhbmdpbmcgYXJvdW5kLlxuXHRcdGlmIChoYXNoUGFyYW1zLnJlc3QgJiYgaGFzaFBhcmFtcy5yZXN0LnR5cGUgPT09ICdpbnZpc2libGUnKSB7XG5cdFx0XHRkZWxldGUgaGFzaFBhcmFtcy5kZWNvcmF0aW9uIC8vIHRoZSBkZWNvcmF0aW9ucyBvbiBpbnZpc2libGUgcmVzdHMgc2hvdWxkIGJlIGludmlzaWJsZSwgdG9vLlxuXHRcdH1cblx0XHRpZiAodHVuZS5saW5lcy5sZW5ndGggPD0gdHVuZS5saW5lTnVtIHx8IHR1bmUubGluZXNbdHVuZS5saW5lTnVtXS5zdGFmZi5sZW5ndGggPD0gdHVuZS5zdGFmZk51bSkge1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhcInB1c2hOb3RlIElHTk9SRURcIiwgdHVuZS5saW5lc1t0dW5lLmxpbmVOdW1dKVxuXHRcdFx0Ly8gVE9ETy1QRVI6IFRoaXMgcHJldmVudHMgYSBjcmFzaCwgYnV0IGl0IGRyb3BzIHRoZSBlbGVtZW50LiBOZWVkIHRvIGZpZ3VyZSBvdXQgaG93IHRvIHN0YXJ0IGEgbmV3IGxpbmUsIG9yIGRlbGF5IGFkZGluZyB0aGlzLlxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHB1c2hOb3RlKHNlbGYsIHR1bmUsIGhhc2hQYXJhbXMsIHZvaWNlRGVmcywgY3VycmVudFZvaWNlTmFtZSk7XG5cdFx0cmV0dXJuIHRydWVcblx0fTtcblxuXHR0aGlzLmFwcGVuZFN0YXJ0aW5nRWxlbWVudCA9IGZ1bmN0aW9uICh0eXBlLCBzdGFydENoYXIsIGVuZENoYXIsIGhhc2hQYXJhbXMyKSB7XG5cdFx0Ly9jb25zb2xlLmxvZygnYXBwZW5kU3RhcnRpbmdFbGVtZW50JywgaGFzaFBhcmFtczIpXG5cdFx0Ly8gSWYgd2UncmUgaW4gdGhlIG1pZGRsZSBvZiBiZWFtaW5nLCB0aGVuIGVuZCB0aGUgYmVhbS5cblx0XHRjbG9zZUxpbmUodHVuZSk7XG5cblx0XHQvLyBXZSBvbmx5IGV2ZXIgd2FudCBpbXBsaWVkIG5hdHVyYWxzIHRoZSBmaXJzdCB0aW1lLlxuXHRcdHZhciBpbXBsaWVkTmF0dXJhbHM7XG5cdFx0aWYgKHR5cGUgPT09ICdrZXknKSB7XG5cdFx0XHRpbXBsaWVkTmF0dXJhbHMgPSBoYXNoUGFyYW1zMi5pbXBsaWVkTmF0dXJhbHM7XG5cdFx0XHRkZWxldGUgaGFzaFBhcmFtczIuaW1wbGllZE5hdHVyYWxzO1xuXHRcdFx0ZGVsZXRlIGhhc2hQYXJhbXMyLmV4cGxpY2l0QWNjaWRlbnRhbHM7XG5cdFx0fVxuXG5cdFx0Ly8gQ2xvbmUgdGhlIG9iamVjdCBiZWNhdXNlIGl0IHdpbGwgYmUgc3RpY2tpbmcgYXJvdW5kIGZvciB0aGUgbmV4dCBsaW5lIGFuZCB3ZSBkb24ndCB3YW50IHRoZSBleHRyYSBmaWVsZHMgaW4gaXQuXG5cdFx0dmFyIGhhc2hQYXJhbXMgPSBPYmplY3QuYXNzaWduKHt9LCBoYXNoUGFyYW1zMik7XG5cblx0XHQvLyBiZSBzdXJlIHRoYXQgd2UgYXJlIG9uIGEgbXVzaWMgdHlwZSBsaW5lIGJlZm9yZSBkb2luZyB0aGUgZm9sbG93aW5nLlxuXHRcdGlmICghdHVuZS5saW5lc1t0dW5lLmxpbmVOdW1dKSByZXR1cm5cblx0XHR2YXIgc3RhZmYgPSB0dW5lLmxpbmVzW3R1bmUubGluZU51bV0uc3RhZmZcblx0XHRpZiAoIXN0YWZmKSByZXR1cm5cblxuXHRcdC8vIElmIHR1bmUgaXMgdGhlIGZpcnN0IGl0ZW0gaW4gdHVuZSBzdGFmZiwgdGhlbiB3ZSBtaWdodCBoYXZlIHRvIGluaXRpYWxpemUgdGhlIHN0YWZmLCBmaXJzdC5cblx0XHRpZiAoc3RhZmYubGVuZ3RoIDw9IHR1bmUuc3RhZmZOdW0pIHtcblx0XHRcdHN0YWZmW3R1bmUuc3RhZmZOdW1dID0ge307XG5cdFx0XHRzdGFmZlt0dW5lLnN0YWZmTnVtXS5jbGVmID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhZmZbMF0uY2xlZik7XG5cdFx0XHRzdGFmZlt0dW5lLnN0YWZmTnVtXS5rZXkgPSBPYmplY3QuYXNzaWduKHt9LCBzdGFmZlswXS5rZXkpO1xuXHRcdFx0aWYgKHN0YWZmWzBdLm1ldGVyKVxuXHRcdFx0XHRzdGFmZlt0dW5lLnN0YWZmTnVtXS5tZXRlciA9IE9iamVjdC5hc3NpZ24oe30sIHN0YWZmWzBdLm1ldGVyKTtcblx0XHRcdHN0YWZmW3R1bmUuc3RhZmZOdW1dLndvcmtpbmdDbGVmID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhZmZbMF0ud29ya2luZ0NsZWYpO1xuXHRcdFx0c3RhZmZbdHVuZS5zdGFmZk51bV0udm9pY2VzID0gW1tdXTtcblx0XHR9XG5cdFx0Ly8gSWYgdHVuZSBpcyBhIGNsZWYgdHlwZSwgdGhlbiB3ZSByZXBsYWNlIHRoZSB3b3JraW5nIGNsZWYgb24gdGhlIGxpbmUuIFRoaXMgaXMga2VwdCBzZXBhcmF0ZSBmcm9tXG5cdFx0Ly8gdGhlIGNsZWYgaW4gY2FzZSB0aGVyZSBpcyBhbiBpbmxpbmUgY2xlZiBmaWVsZC4gV2UgbmVlZCB0byBrbm93IHdoYXQgdGhlIGN1cnJlbnQgcG9zaXRpb24gZm9yXG5cdFx0Ly8gdGhlIG5vdGUgaXMuXG5cdFx0aWYgKHR5cGUgPT09ICdjbGVmJykge1xuXHRcdFx0c3RhZmZbdHVuZS5zdGFmZk51bV0ud29ya2luZ0NsZWYgPSBoYXNoUGFyYW1zO1xuXHRcdH1cblxuXHRcdC8vIFRoZXNlIGVsZW1lbnRzIHNob3VsZCBub3QgYmUgYWRkZWQgdHdpY2UsIHNvIGlmIHRoZSBlbGVtZW50IGV4aXN0cyBvbiB0dW5lIGxpbmUgd2l0aG91dCBhIG5vdGUgb3IgYmFyIGJlZm9yZSBpdCwganVzdCByZXBsYWNlIHRoZSBzdGFmZiB2ZXJzaW9uLlxuXHRcdHZhciB2b2ljZSA9IHN0YWZmW3R1bmUuc3RhZmZOdW1dLnZvaWNlc1t0dW5lLnZvaWNlTnVtXTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHZvaWNlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAodm9pY2VbaV0uZWxfdHlwZSA9PT0gJ25vdGUnIHx8IHZvaWNlW2ldLmVsX3R5cGUgPT09ICdiYXInKSB7XG5cdFx0XHRcdGhhc2hQYXJhbXMuZWxfdHlwZSA9IHR5cGU7XG5cdFx0XHRcdGhhc2hQYXJhbXMuc3RhcnRDaGFyID0gc3RhcnRDaGFyO1xuXHRcdFx0XHRoYXNoUGFyYW1zLmVuZENoYXIgPSBlbmRDaGFyO1xuXHRcdFx0XHRpZiAoaW1wbGllZE5hdHVyYWxzKVxuXHRcdFx0XHRcdGhhc2hQYXJhbXMuYWNjaWRlbnRhbHMgPSBpbXBsaWVkTmF0dXJhbHMuY29uY2F0KGhhc2hQYXJhbXMuYWNjaWRlbnRhbHMpO1xuXHRcdFx0XHR2b2ljZS5wdXNoKGhhc2hQYXJhbXMpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRpZiAodm9pY2VbaV0uZWxfdHlwZSA9PT0gdHlwZSkge1xuXHRcdFx0XHRoYXNoUGFyYW1zLmVsX3R5cGUgPSB0eXBlO1xuXHRcdFx0XHRoYXNoUGFyYW1zLnN0YXJ0Q2hhciA9IHN0YXJ0Q2hhcjtcblx0XHRcdFx0aGFzaFBhcmFtcy5lbmRDaGFyID0gZW5kQ2hhcjtcblx0XHRcdFx0aWYgKGltcGxpZWROYXR1cmFscylcblx0XHRcdFx0XHRoYXNoUGFyYW1zLmFjY2lkZW50YWxzID0gaW1wbGllZE5hdHVyYWxzLmNvbmNhdChoYXNoUGFyYW1zLmFjY2lkZW50YWxzKTtcblx0XHRcdFx0dm9pY2VbaV0gPSBoYXNoUGFyYW1zO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vIFdlIGRpZG4ndCBzZWUgZWl0aGVyIHRoYXQgdHlwZSBvciBhIG5vdGUsIHNvIHJlcGxhY2UgdGhlIGVsZW1lbnQgdG8gdGhlIHN0YWZmLlxuXHRcdHN0YWZmW3R1bmUuc3RhZmZOdW1dW3R5cGVdID0gaGFzaFBhcmFtczI7XG5cdH07XG5cblx0dGhpcy5hZGRTdWJ0aXRsZSA9IGZ1bmN0aW9uIChzdHIsIGluZm8pIHtcblx0XHRwdXNoTGluZSh0dW5lLCB7IHN1YnRpdGxlOiB7IHRleHQ6IHN0ciwgc3RhcnRDaGFyOiBpbmZvLnN0YXJ0Q2hhciwgZW5kQ2hhcjogaW5mby5lbmRDaGFyIH0gfSk7XG5cdH07XG5cblx0dGhpcy5hZGRTcGFjaW5nID0gZnVuY3Rpb24gKG51bSkge1xuXHRcdHR1bmUudnNraXBQZW5kaW5nID0gbnVtO1xuXHR9O1xuXG5cdHRoaXMuYWRkTmV3UGFnZSA9IGZ1bmN0aW9uIChudW0pIHtcblx0XHRwdXNoTGluZSh0dW5lLCB7IG5ld3BhZ2U6IG51bSB9KTtcblx0fTtcblxuXHR0aGlzLmFkZFNlcGFyYXRvciA9IGZ1bmN0aW9uIChzcGFjZUFib3ZlLCBzcGFjZUJlbG93LCBsaW5lTGVuZ3RoLCBpbmZvKSB7XG5cdFx0cHVzaExpbmUodHVuZSwgeyBzZXBhcmF0b3I6IHsgc3BhY2VBYm92ZTogTWF0aC5yb3VuZChzcGFjZUFib3ZlKSwgc3BhY2VCZWxvdzogTWF0aC5yb3VuZChzcGFjZUJlbG93KSwgbGluZUxlbmd0aDogTWF0aC5yb3VuZChsaW5lTGVuZ3RoKSwgc3RhcnRDaGFyOiBpbmZvLnN0YXJ0Q2hhciwgZW5kQ2hhcjogaW5mby5lbmRDaGFyIH0gfSk7XG5cdH07XG5cblx0dGhpcy5hZGRUZXh0ID0gZnVuY3Rpb24gKHN0ciwgaW5mbykge1xuXHRcdHB1c2hMaW5lKHR1bmUsIHsgdGV4dDogeyB0ZXh0OiBzdHIsIHN0YXJ0Q2hhcjogaW5mby5zdGFydENoYXIsIGVuZENoYXI6IGluZm8uZW5kQ2hhciB9IH0pO1xuXHR9O1xuXG5cdHRoaXMuYWRkQ2VudGVyZWQgPSBmdW5jdGlvbiAoc3RyKSB7XG5cdFx0cHVzaExpbmUodHVuZSwgeyB0ZXh0OiBbeyB0ZXh0OiBzdHIsIGNlbnRlcjogdHJ1ZSB9XSB9KTtcblx0fTtcblxuXHQvL1x0YW55Vm9pY2VDb250YWluc05vdGVzOiBmdW5jdGlvbihsaW5lKSB7XG5cdC8vXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbGluZS5zdGFmZi52b2ljZXMubGVuZ3RoOyBpKyspIHtcblx0Ly9cdFx0XHRpZiAoY29udGFpbnNOb3RlcyhsaW5lLnN0YWZmLnZvaWNlc1tpXSkpXG5cdC8vXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0Ly9cdFx0fVxuXHQvL1x0XHRyZXR1cm4gZmFsc2U7XG5cdC8vXHR9LFxuXHR0aGlzLmNoYW5nZVZvaWNlU2NhbGUgPSBmdW5jdGlvbiAoc2NhbGUpIHtcblx0XHRzZWxmLmFwcGVuZEVsZW1lbnQoJ3NjYWxlJywgbnVsbCwgbnVsbCwgeyBzaXplOiBzY2FsZSB9KTtcblx0fTtcblx0dGhpcy5jaGFuZ2VWb2ljZUNvbG9yID0gZnVuY3Rpb24gKGNvbG9yKSB7XG5cdFx0c2VsZi5hcHBlbmRFbGVtZW50KCdjb2xvcicsIG51bGwsIG51bGwsIHsgY29sb3I6IGNvbG9yIH0pO1xuXHR9O1xuXG5cdHRoaXMuc3RhcnROZXdMaW5lID0gZnVuY3Rpb24gKHBhcmFtcykge1xuXHRcdC8vY29uc29sZS5sb2coXCJzdGFydE5ld0xpbmVcIiwgdHVuZS5saW5lTnVtLCBwYXJhbXMsIHZvaWNlRGVmcylcblx0XHQvLyBJZiB0aGUgcG9pbnRlZCB0byBsaW5lIGRvZXNuJ3QgZXhpc3QsIGp1c3QgY3JlYXRlIHRoYXQuIElmIHRoZSBsaW5lIGRvZXMgZXhpc3QsIGJ1dCBkb2Vzbid0IGhhdmUgYW55IG11c2ljIG9uIGl0LCBqdXN0IHVzZSBpdC5cblx0XHQvLyBJZiBpdCBkb2VzIGV4aXN0IGFuZCBoYXMgbXVzaWMsIHRoZW4gaW5jcmVtZW50IHRoZSBsaW5lIG51bWJlci4gSWYgdGhlIG5ldyBlbGVtZW50IGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBpdC5cblx0XHRjbG9zZUxpbmUodHVuZSk7XHQvLyBDbG9zZSB0aGUgcHJldmlvdXMgbGluZS5cblx0XHRpZiAocGFyYW1zLmN1cnJlbnRWb2ljZU5hbWUpIHtcblx0XHRcdGN1cnJlbnRWb2ljZU5hbWUgPSBwYXJhbXMuY3VycmVudFZvaWNlTmFtZVxuXHRcdFx0dm9pY2VEZWZzW3BhcmFtcy5jdXJyZW50Vm9pY2VOYW1lXSA9IHBhcmFtc1xuXHRcdH1cblxuXHRcdGlmICh0dW5lLmxpbmVzW3R1bmUubGluZU51bV0gPT09IHVuZGVmaW5lZCkgY3JlYXRlTGluZShzZWxmLCB0dW5lLCBwYXJhbXMpO1xuXHRcdGVsc2UgaWYgKHR1bmUubGluZXNbdHVuZS5saW5lTnVtXS5zdGFmZiA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHR0dW5lLmxpbmVOdW0rKztcblx0XHRcdHRoaXMuc3RhcnROZXdMaW5lKHBhcmFtcyk7XG5cdFx0fSBlbHNlIGlmICh0dW5lLmxpbmVzW3R1bmUubGluZU51bV0uc3RhZmZbdHVuZS5zdGFmZk51bV0gPT09IHVuZGVmaW5lZCkgY3JlYXRlU3RhZmYoc2VsZiwgdHVuZSwgcGFyYW1zKTtcblx0XHRlbHNlIGlmICh0dW5lLmxpbmVzW3R1bmUubGluZU51bV0uc3RhZmZbdHVuZS5zdGFmZk51bV0udm9pY2VzW3R1bmUudm9pY2VOdW1dID09PSB1bmRlZmluZWQpIGNyZWF0ZVZvaWNlKHNlbGYsIHR1bmUsIHBhcmFtcyk7XG5cdFx0ZWxzZSBpZiAoIWNvbnRhaW5zTm90ZXModHVuZS5saW5lc1t0dW5lLmxpbmVOdW1dLnN0YWZmW3R1bmUuc3RhZmZOdW1dLnZvaWNlc1t0dW5lLnZvaWNlTnVtXSkpIHtcblx0XHRcdC8vIFdlIGRvbid0IG5lZWQgYSBuZXcgbGluZSBidXQgd2UgbWlnaHQgbmVlZCB0byB1cGRhdGUgcGFydHMgb2YgaXQuXG5cdFx0XHRpZiAocGFyYW1zLnBhcnQpXG5cdFx0XHRcdHNlbGYuYXBwZW5kRWxlbWVudCgncGFydCcsIHBhcmFtcy5wYXJ0LnN0YXJ0Q2hhciwgcGFyYW1zLnBhcnQuZW5kQ2hhciwgeyB0aXRsZTogcGFyYW1zLnBhcnQudGl0bGUgfSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHR1bmUubGluZU51bSsrO1xuXHRcdFx0dGhpcy5zdGFydE5ld0xpbmUocGFyYW1zKTtcblx0XHR9XG5cdH07XG5cblx0dGhpcy5zZXRSdW5uaW5nRm9udCA9IGZ1bmN0aW9uICh0eXBlLCBmb250KSB7XG5cdFx0Ly8gVGhpcyBpcyBjYWxsZWQgYXQgdHVuZSBzdGFydCB0byBzZXQgdGhlIGN1cnJlbnQgZGVmYXVsdCBmb250cyBzbyB3ZSBrbm93IHdoZXRoZXIgdG8gcmVjb3JkIGEgY2hhbmdlLlxuXHRcdHR1bmUucnVubmluZ0ZvbnRzW3R5cGVdID0gZm9udDtcblx0fTtcblxuXHR0aGlzLnNldEJhck51bWJlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIChiYXJOdW1iZXIpIHtcblx0XHQvLyBJZiB0dW5lIGlzIGNhbGxlZCByaWdodCBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgbGluZSwgdGhlbiBjb3JyZWN0IHRoZSBtZWFzdXJlIG51bWJlciB0aGF0IGlzIGFscmVhZHkgd3JpdHRlbi5cblx0XHQvLyBJZiB0dW5lIGlzIGNhbGxlZCBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgbWVhc3VyZSwgdGhlbiBjb3JyZWN0IHRoZSBtZWFzdXJlIG51bWJlciB0aGF0IHdhcyBqdXN0IGNyZWF0ZWQuXG5cdFx0Ly8gSWYgdHVuZSBpcyBjYWxsZWQgaW4gdGhlIG1pZGRsZSBvZiBhIG1lYXN1cmUsIHRoZW4gc3VidHJhY3Qgb25lIGZyb20gaXQsIGJlY2F1c2UgaXQgd2lsbCBiZSBpbmNyZW1lbnRlZCBiZWZvcmUgYXBwbGllZC5cblx0XHR2YXIgY3VycmVudFZvaWNlID0gdGhpcy5nZXRDdXJyZW50Vm9pY2UoKTtcblx0XHRpZiAoY3VycmVudFZvaWNlICYmIGN1cnJlbnRWb2ljZS5sZW5ndGggPiAwKSB7XG5cdFx0XHR2YXIgbGFzdEVsZW1lbnQgPSBjdXJyZW50Vm9pY2VbY3VycmVudFZvaWNlLmxlbmd0aCAtIDFdO1xuXHRcdFx0aWYgKGxhc3RFbGVtZW50LmVsX3R5cGUgPT09ICdiYXInKSB7XG5cdFx0XHRcdGlmIChsYXN0RWxlbWVudC5iYXJOdW1iZXIgIT09IHVuZGVmaW5lZCkgLy8gdGhlIG1lYXN1cmUgbnVtYmVyIG1pZ2h0IG5vdCBiZSB3cml0dGVuIGZvciB0dW5lIGJhciwgZG9uJ3Qgb3ZlcnJpZGUgdGhhdC5cblx0XHRcdFx0XHRsYXN0RWxlbWVudC5iYXJOdW1iZXIgPSBiYXJOdW1iZXI7XG5cdFx0XHR9IGVsc2Vcblx0XHRcdFx0cmV0dXJuIGJhck51bWJlciAtIDE7XG5cdFx0fVxuXHRcdHJldHVybiBiYXJOdW1iZXI7XG5cdH07XG5cblx0dGhpcy5oYXNCZWdpbk11c2ljID0gZnVuY3Rpb24gKCkge1xuXHRcdC8vIHJldHVybiB0cnVlIGlmIHRoZXJlIGV4aXN0cyBhdCBsZWFzdCBvbmUgbGluZSB0aGF0IGNvbnRhaW5zIFwic3RhZmZcIlxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdHVuZS5saW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKHR1bmUubGluZXNbaV0uc3RhZmYpXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH07XG5cblx0dGhpcy5pc0ZpcnN0TGluZSA9IGZ1bmN0aW9uIChpbmRleCkge1xuXHRcdGZvciAodmFyIGkgPSBpbmRleCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRpZiAodHVuZS5saW5lc1tpXS5zdGFmZiAhPT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9O1xuXG5cdHRoaXMuZ2V0Q3VycmVudFZvaWNlID0gZnVuY3Rpb24gKCkge1xuXHRcdC8vY29uc29sZS5sb2coXCJnZXRDdXJyZW50Vm9pY2VcIiwgdHVuZS5saW5lTnVtKVxuXHRcdHZhciBjdXJyTGluZSA9IGdldFByZXZNdXNpY0xpbmUodHVuZS5saW5lcywgdHVuZS5saW5lTnVtKVxuXHRcdGlmICghY3VyckxpbmUpXG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR2YXIgY3VyclN0YWZmID0gY3VyckxpbmUuc3RhZmZbdHVuZS5zdGFmZk51bV07XG5cdFx0aWYgKCFjdXJyU3RhZmYpXG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRpZiAoY3VyclN0YWZmLnZvaWNlc1t0dW5lLnZvaWNlTnVtXSAhPT0gdW5kZWZpbmVkKVxuXHRcdFx0cmV0dXJuIGN1cnJTdGFmZi52b2ljZXNbdHVuZS52b2ljZU51bV07XG5cdFx0ZWxzZSByZXR1cm4gbnVsbDtcblx0fTtcblxuXHR0aGlzLnNldEN1cnJlbnRWb2ljZSA9IGZ1bmN0aW9uIChzdGFmZk51bSwgdm9pY2VOdW0sIG5hbWUpIHtcblx0XHQvL2NvbnNvbGUubG9nKFwic2V0Q3VycmVudFZvaWNlXCIsIHR1bmUubGluZU51bSwgc3RhZmZOdW0sIHZvaWNlTnVtLCBuYW1lLCB2b2ljZURlZnMpXG5cdFx0dHVuZS5zdGFmZk51bSA9IHN0YWZmTnVtO1xuXHRcdHR1bmUudm9pY2VOdW0gPSB2b2ljZU51bTtcblx0XHRjdXJyZW50Vm9pY2VOYW1lID0gbmFtZVxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdHVuZS5saW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKHR1bmUubGluZXNbaV0uc3RhZmYpIHtcblx0XHRcdFx0aWYgKHR1bmUubGluZXNbaV0uc3RhZmZbc3RhZmZOdW1dID09PSB1bmRlZmluZWQgfHwgdHVuZS5saW5lc1tpXS5zdGFmZltzdGFmZk51bV0udm9pY2VzW3ZvaWNlTnVtXSA9PT0gdW5kZWZpbmVkIHx8XG5cdFx0XHRcdFx0IWNvbnRhaW5zTm90ZXModHVuZS5saW5lc1tpXS5zdGFmZltzdGFmZk51bV0udm9pY2VzW3ZvaWNlTnVtXSkpIHtcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKFwiY3YyXCIsIGksIHR1bmUubGluZXNbaV0uc3RhZmZbc3RhZmZOdW1dKVxuXHRcdFx0XHRcdHR1bmUubGluZU51bSA9IGk7XG5cdFx0XHRcdFx0aWYgKCF0dW5lLmxpbmVzW2ldLnN0YWZmW3N0YWZmTnVtXSB8fCAhIXR1bmUubGluZXNbaV0uc3RhZmZbc3RhZmZOdW1dLnZvaWNlc1t2b2ljZU51bV0pIHJldHVybiB0cnVlXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vY29uc29sZS5sb2coXCJjdjNcIiwgaSwgdHVuZS5saW5lTnVtLCB0dW5lLmxpbmVzW3R1bmUubGluZU51bV0pXG5cdFx0dHVuZS5saW5lTnVtID0gaTtcblx0XHRyZXR1cm4gZmFsc2Vcblx0fTtcblxuXHR0aGlzLmFkZE1ldGFUZXh0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUsIGluZm8pIHtcblx0XHRpZiAodHVuZS5tZXRhVGV4dFtrZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHR1bmUubWV0YVRleHRba2V5XSA9IHZhbHVlO1xuXHRcdFx0dHVuZS5tZXRhVGV4dEluZm9ba2V5XSA9IGluZm87XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICh0eXBlb2YgdHVuZS5tZXRhVGV4dFtrZXldID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKVxuXHRcdFx0XHR0dW5lLm1ldGFUZXh0W2tleV0gKz0gXCJcXG5cIiArIHZhbHVlO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGlmICh0dW5lLm1ldGFUZXh0W2tleV0gPT09ICdzdHJpbmcnKVxuXHRcdFx0XHRcdHR1bmUubWV0YVRleHRba2V5XSA9IFt7IHRleHQ6IHR1bmUubWV0YVRleHRba2V5XSB9XVxuXHRcdFx0XHRpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJylcblx0XHRcdFx0XHR2YWx1ZSA9IFt7IHRleHQ6IHZhbHVlIH1dXG5cdFx0XHRcdHR1bmUubWV0YVRleHRba2V5XSA9IHR1bmUubWV0YVRleHRba2V5XS5jb25jYXQodmFsdWUpXG5cdFx0XHR9XG5cdFx0XHR0dW5lLm1ldGFUZXh0SW5mb1trZXldLmVuZENoYXIgPSBpbmZvLmVuZENoYXI7XG5cdFx0fVxuXHR9O1xuXG5cdHRoaXMuYWRkTWV0YVRleHRBcnJheSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlLCBpbmZvKSB7XG5cdFx0aWYgKHR1bmUubWV0YVRleHRba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHR0dW5lLm1ldGFUZXh0W2tleV0gPSBbdmFsdWVdO1xuXHRcdFx0dHVuZS5tZXRhVGV4dEluZm9ba2V5XSA9IGluZm87XG5cdFx0fSBlbHNlIHtcblx0XHRcdHR1bmUubWV0YVRleHRba2V5XS5wdXNoKHZhbHVlKTtcblx0XHRcdHR1bmUubWV0YVRleHRJbmZvW2tleV0uZW5kQ2hhciA9IGluZm8uZW5kQ2hhcjtcblx0XHR9XG5cdH07XG5cdHRoaXMuYWRkTWV0YVRleHRPYmogPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgaW5mbykge1xuXHRcdHR1bmUubWV0YVRleHRba2V5XSA9IHZhbHVlO1xuXHRcdHR1bmUubWV0YVRleHRJbmZvW2tleV0gPSBpbmZvO1xuXHR9O1xufTtcblxuZnVuY3Rpb24gaXNBcnJheU9mU3RyaW5ncyhhcnIpIHtcblx0aWYgKCFhcnIpIHJldHVybiBmYWxzZVxuXHRpZiAodHlwZW9mIGFyciA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGZhbHNlXG5cdC8vdmFyIHN0ciA9ICcnXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG5cdFx0aWYgKHR5cGVvZiBhcnJbaV0gIT09ICdzdHJpbmcnKVxuXHRcdFx0cmV0dXJuIGZhbHNlXG5cdH1cblx0cmV0dXJuIHRydWVcbn1cblxuZnVuY3Rpb24gc2ltcGxpZnlNZXRhVGV4dCh0dW5lKSB7XG5cdGlmIChpc0FycmF5T2ZTdHJpbmdzKHR1bmUubWV0YVRleHQubm90ZXMpKVxuXHRcdHR1bmUubWV0YVRleHQubm90ZXMgPSB0dW5lLm1ldGFUZXh0Lm5vdGVzLmpvaW4oXCJcXG5cIilcblx0aWYgKGlzQXJyYXlPZlN0cmluZ3ModHVuZS5tZXRhVGV4dC5oaXN0b3J5KSlcblx0XHR0dW5lLm1ldGFUZXh0Lmhpc3RvcnkgPSB0dW5lLm1ldGFUZXh0Lmhpc3Rvcnkuam9pbihcIlxcblwiKVxufVxuXG4vLyBmdW5jdGlvbiBhZGRSaWNoVGV4dFRvQW5ub3RhdGlvbnNBbmRMeXJpY3ModHVuZSkge1xuLy8gXHR2YXIgbGluZXMgPSB0dW5lLmxpbmVzXG4vLyBcdGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbi8vIFx0XHRpZiAobGluZXNbaV0uc3RhZmYgIT09IHVuZGVmaW5lZCkge1xuLy8gXHRcdFx0Zm9yICh2YXIgcyA9IDA7IHMgPCBsaW5lc1tpXS5zdGFmZi5sZW5ndGg7IHMrKykge1xuLy8gXHRcdFx0XHRmb3IgKHZhciB2ID0gMDsgdiA8IGxpbmVzW2ldLnN0YWZmW3NdLnZvaWNlcy5sZW5ndGg7IHYrKykge1xuLy8gXHRcdFx0XHRcdHZhciB2b2ljZSA9IGxpbmVzW2ldLnN0YWZmW3NdLnZvaWNlc1t2XTtcbi8vIFx0XHRcdFx0XHRmb3IgKHZhciBuID0gMDsgbiA8IHZvaWNlLmxlbmd0aDsgbisrKSB7XG4vLyBcdFx0XHRcdFx0XHR2YXIgZWxlbWVudCA9IHZvaWNlW25dXG4vLyBcdFx0XHRcdFx0XHRpZiAoZWxlbWVudC5jaG9yZCkge1xuLy8gXHRcdFx0XHRcdFx0XHRmb3IgKHZhciBjID0gMDsgYyA8IGVsZW1lbnQuY2hvcmQubGVuZ3RoOyBjKyspIHtcbi8vIFx0XHRcdFx0XHRcdFx0XHRlbGVtZW50LmNob3JkW2NdLm5hbWUgPSBwYXJzZURpcmVjdGl2ZS5wYXJzZUZvbnRDaGFuZ2VMaW5lKGVsZW1lbnQuY2hvcmRbY10ubmFtZSlcbi8vIFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhlbGVtZW50LmNob3JkW2NdLm5hbWUpXG4vLyBcdFx0XHRcdFx0XHRcdH1cbi8vIFx0XHRcdFx0XHRcdH1cbi8vIFx0XHRcdFx0XHRcdGlmIChlbGVtZW50Lmx5cmljKSB7XG4vLyBcdFx0XHRcdFx0XHRcdGZvciAodmFyIGwgPSAwOyBsIDwgZWxlbWVudC5seXJpYy5sZW5ndGg7IGwrKykge1xuLy8gXHRcdFx0XHRcdFx0XHRcdGVsZW1lbnQubHlyaWNbbF0uc3lsbGFibGUgPSBwYXJzZURpcmVjdGl2ZS5wYXJzZUZvbnRDaGFuZ2VMaW5lKGVsZW1lbnQubHlyaWNbbF0uc3lsbGFibGUpXG4vLyBcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZWxlbWVudC5seXJpY1tsXS5zeWxsYWJsZSlcbi8vIFx0XHRcdFx0XHRcdFx0fVxuLy8gXHRcdFx0XHRcdFx0fVxuLy8gXHRcdFx0XHRcdH1cbi8vIFx0XHRcdFx0fVxuLy8gXHRcdFx0fVxuLy8gXHRcdH1cbi8vIFx0fVxuXG4vLyB9XG5cbmZ1bmN0aW9uIHJlc29sdmVPdmVybGF5cyh0dW5lKSB7XG5cdHZhciBtYWRlQ2hhbmdlcyA9IGZhbHNlO1xuXHR2YXIgZHVyYXRpb25zUGVyTGluZXMgPSBbXTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0dW5lLmxpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGxpbmUgPSB0dW5lLmxpbmVzW2ldO1xuXHRcdGlmIChsaW5lLnN0YWZmKSB7XG5cdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGxpbmUuc3RhZmYubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0dmFyIHN0YWZmID0gbGluZS5zdGFmZltqXTtcblx0XHRcdFx0dmFyIG92ZXJsYXlWb2ljZSA9IFtdO1xuXHRcdFx0XHRmb3IgKHZhciBrID0gMDsgayA8IHN0YWZmLnZvaWNlcy5sZW5ndGg7IGsrKykge1xuXHRcdFx0XHRcdHZhciB2b2ljZSA9IHN0YWZmLnZvaWNlc1trXTtcblx0XHRcdFx0XHRvdmVybGF5Vm9pY2UucHVzaCh7IGhhc092ZXJsYXk6IGZhbHNlLCB2b2ljZTogW10sIHNuaXA6IFtdIH0pO1xuXHRcdFx0XHRcdGR1cmF0aW9uc1BlckxpbmVzW2ldID0gMDtcblx0XHRcdFx0XHR2YXIgZHVyYXRpb25UaGlzQmFyID0gMDtcblx0XHRcdFx0XHR2YXIgaW5PdmVybGF5ID0gZmFsc2U7XG5cdFx0XHRcdFx0dmFyIG92ZXJsYXlEdXJhdGlvbiA9IDA7XG5cdFx0XHRcdFx0dmFyIHNuaXBTdGFydCA9IC0xO1xuXHRcdFx0XHRcdGZvciAodmFyIGtrID0gMDsga2sgPCB2b2ljZS5sZW5ndGg7IGtrKyspIHtcblx0XHRcdFx0XHRcdHZhciBldmVudCA9IHZvaWNlW2trXTtcblx0XHRcdFx0XHRcdGlmIChldmVudC5lbF90eXBlID09PSBcIm92ZXJsYXlcIiAmJiAhaW5PdmVybGF5KSB7XG5cdFx0XHRcdFx0XHRcdG1hZGVDaGFuZ2VzID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0aW5PdmVybGF5ID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0c25pcFN0YXJ0ID0ga2s7XG5cdFx0XHRcdFx0XHRcdG92ZXJsYXlWb2ljZVtrXS5oYXNPdmVybGF5ID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0aWYgKG92ZXJsYXlEdXJhdGlvbiA9PT0gMClcblx0XHRcdFx0XHRcdFx0XHRvdmVybGF5RHVyYXRpb24gPSBkdXJhdGlvbnNQZXJMaW5lc1tpXTtcblx0XHRcdFx0XHRcdFx0Ly8gSWYgdGhpcyBpc24ndCB0aGUgZmlyc3QgbGluZSwgd2UgYWxzbyBuZWVkIGludmlzaWJsZSByZXN0cyBvbiB0aGUgcHJldmlvdXMgbGluZXMuXG5cdFx0XHRcdFx0XHRcdC8vIFNvLCBpZiB0aGUgbmV4dCB2b2ljZSBkb2Vzbid0IGFwcGVhciBpbiBhIHByZXZpb3VzIGxpbmUsIGNyZWF0ZSBpdFxuXHRcdFx0XHRcdFx0XHRmb3IgKHZhciBpaSA9IDA7IGlpIDwgaTsgaWkrKykge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChkdXJhdGlvbnNQZXJMaW5lc1tpaV0gJiYgdHVuZS5saW5lc1tpaV0uc3RhZmYgJiYgc3RhZmYudm9pY2VzLmxlbmd0aCA+PSB0dW5lLmxpbmVzW2lpXS5zdGFmZlswXS52b2ljZXMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0dW5lLmxpbmVzW2lpXS5zdGFmZlswXS52b2ljZXMucHVzaChbe1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbF90eXBlOiBcIm5vdGVcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZHVyYXRpb246IGR1cmF0aW9uc1BlckxpbmVzW2lpXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzdDogeyB0eXBlOiBcImludmlzaWJsZVwiIH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHN0YXJ0Q2hhcjogZXZlbnQuc3RhcnRDaGFyLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbmRDaGFyOiBldmVudC5lbmRDaGFyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGV2ZW50LmVsX3R5cGUgPT09IFwiYmFyXCIpIHtcblx0XHRcdFx0XHRcdFx0aWYgKGluT3ZlcmxheSkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIGRlbGV0ZSB0aGUgb3ZlcmxheSBldmVudHMgZnJvbSB0aGlzIGFycmF5IHdpdGhvdXQgbWVzc2luZyB1cCB0aGlzIGxvb3AuXG5cdFx0XHRcdFx0XHRcdFx0aW5PdmVybGF5ID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0b3ZlcmxheVZvaWNlW2tdLnNuaXAucHVzaCh7IHN0YXJ0OiBzbmlwU3RhcnQsIGxlbjoga2sgLSBzbmlwU3RhcnQgfSk7XG5cdFx0XHRcdFx0XHRcdFx0b3ZlcmxheVZvaWNlW2tdLnZvaWNlLnB1c2goZXZlbnQpOyAvLyBBbHNvIGVuZCB0aGUgb3ZlcmxheSB3aXRoIHRoZSBiYXJsaW5lLlxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdC8vIFRoaXMga2VlcHMgdGhlIHZvaWNlcyBsaW5lZCB1cDogaWYgdGhlIG92ZXJsYXkgaXNuJ3QgaW4gdGhlIGZpcnN0IG1lYXN1cmUgdGhlbiB3ZSBuZWVkIGEgYnVuY2ggb2YgaW52aXNpYmxlIHJlc3RzLlxuXHRcdFx0XHRcdFx0XHRcdGlmIChkdXJhdGlvblRoaXNCYXIgPiAwKVxuXHRcdFx0XHRcdFx0XHRcdFx0b3ZlcmxheVZvaWNlW2tdLnZvaWNlLnB1c2goeyBlbF90eXBlOiBcIm5vdGVcIiwgZHVyYXRpb246IGR1cmF0aW9uVGhpc0JhciwgcmVzdDogeyB0eXBlOiBcImludmlzaWJsZVwiIH0sIHN0YXJ0Q2hhcjogZXZlbnQuc3RhcnRDaGFyLCBlbmRDaGFyOiBldmVudC5lbmRDaGFyIH0pO1xuXHRcdFx0XHRcdFx0XHRcdG92ZXJsYXlWb2ljZVtrXS52b2ljZS5wdXNoKGV2ZW50KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRkdXJhdGlvblRoaXNCYXIgPSAwO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChldmVudC5lbF90eXBlID09PSBcIm5vdGVcIikge1xuXHRcdFx0XHRcdFx0XHRpZiAoaW5PdmVybGF5KSB7XG5cdFx0XHRcdFx0XHRcdFx0b3ZlcmxheVZvaWNlW2tdLnZvaWNlLnB1c2goZXZlbnQpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGR1cmF0aW9uVGhpc0JhciArPSBldmVudC5kdXJhdGlvbjtcblx0XHRcdFx0XHRcdFx0XHRkdXJhdGlvbnNQZXJMaW5lc1tpXSArPSBldmVudC5kdXJhdGlvbjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChldmVudC5lbF90eXBlID09PSBcInNjYWxlXCIgfHwgZXZlbnQuZWxfdHlwZSA9PT0gXCJzdGVtXCIgfHwgZXZlbnQuZWxfdHlwZSA9PT0gXCJvdmVybGF5XCIgfHwgZXZlbnQuZWxfdHlwZSA9PT0gXCJzdHlsZVwiIHx8IGV2ZW50LmVsX3R5cGUgPT09IFwidHJhbnNwb3NlXCIgfHwgZXZlbnQuZWxfdHlwZSA9PT0gXCJjb2xvclwiKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFRoZXNlIHR5cGVzIG9mIGV2ZW50cyBhcmUgZHVwbGljYXRlZCBvbiB0aGUgb3ZlcmxheSBsYXllci5cblx0XHRcdFx0XHRcdFx0b3ZlcmxheVZvaWNlW2tdLnZvaWNlLnB1c2goZXZlbnQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAob3ZlcmxheVZvaWNlW2tdLmhhc092ZXJsYXkgJiYgb3ZlcmxheVZvaWNlW2tdLnNuaXAubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHQvLyB0aGVyZSB3YXMgbm8gY2xvc2luZyBiYXIsIHNvIHdlIGRpZG4ndCBzZXQgdGhlIHNuaXAgYW1vdW50LlxuXHRcdFx0XHRcdFx0b3ZlcmxheVZvaWNlW2tdLnNuaXAucHVzaCh7IHN0YXJ0OiBzbmlwU3RhcnQsIGxlbjogdm9pY2UubGVuZ3RoIC0gc25pcFN0YXJ0IH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRmb3IgKGsgPSAwOyBrIDwgb3ZlcmxheVZvaWNlLmxlbmd0aDsgaysrKSB7XG5cdFx0XHRcdFx0dmFyIG92ID0gb3ZlcmxheVZvaWNlW2tdO1xuXHRcdFx0XHRcdGlmIChvdi5oYXNPdmVybGF5KSB7XG5cdFx0XHRcdFx0XHRvdi52b2ljZS5zcGxpY2UoMCwgMCwgeyBlbF90eXBlOiBcInN0ZW1cIiwgZGlyZWN0aW9uOiBcImRvd25cIiB9KVxuXHRcdFx0XHRcdFx0c3RhZmYudm9pY2VzLnB1c2gob3Yudm9pY2UpO1xuXHRcdFx0XHRcdFx0Zm9yICh2YXIga2trID0gb3Yuc25pcC5sZW5ndGggLSAxOyBra2sgPj0gMDsga2trLS0pIHtcblx0XHRcdFx0XHRcdFx0dmFyIHNuaXAgPSBvdi5zbmlwW2tra107XG5cdFx0XHRcdFx0XHRcdHN0YWZmLnZvaWNlc1trXS5zcGxpY2Uoc25pcC5zdGFydCwgc25pcC5sZW4pO1xuXHRcdFx0XHRcdFx0XHRzdGFmZi52b2ljZXNba10uc3BsaWNlKHNuaXAuc3RhcnQgKyAxLCAwLCB7IGVsX3R5cGU6IFwic3RlbVwiLCBkaXJlY3Rpb246IFwiYXV0b1wiIH0pO1xuXHRcdFx0XHRcdFx0XHR2YXIgaW5kZXhPZkxhc3RCYXIgPSBmaW5kTGFzdEJhcihzdGFmZi52b2ljZXNba10sIHNuaXAuc3RhcnQpO1xuXHRcdFx0XHRcdFx0XHRzdGFmZi52b2ljZXNba10uc3BsaWNlKGluZGV4T2ZMYXN0QmFyLCAwLCB7IGVsX3R5cGU6IFwic3RlbVwiLCBkaXJlY3Rpb246IFwidXBcIiB9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC8vIHJlbW92ZSBlbmRpbmcgbWFya3MgZnJvbSB0aGUgb3ZlcmxheSB2b2ljZSBzbyB0aGV5IGFyZSBub3QgcmVwZWF0ZWRcblx0XHRcdFx0XHRcdGZvciAoa2trID0gMDsga2trIDwgc3RhZmYudm9pY2VzW3N0YWZmLnZvaWNlcy5sZW5ndGggLSAxXS5sZW5ndGg7IGtraysrKSB7XG5cdFx0XHRcdFx0XHRcdHN0YWZmLnZvaWNlc1tzdGFmZi52b2ljZXMubGVuZ3RoIC0gMV1ba2trXSA9IE9iamVjdC5hc3NpZ24oe30sIHN0YWZmLnZvaWNlc1tzdGFmZi52b2ljZXMubGVuZ3RoIC0gMV1ba2trXSk7XG5cdFx0XHRcdFx0XHRcdHZhciBlbCA9IHN0YWZmLnZvaWNlc1tzdGFmZi52b2ljZXMubGVuZ3RoIC0gMV1ba2trXTtcblx0XHRcdFx0XHRcdFx0aWYgKGVsLmVsX3R5cGUgPT09ICdiYXInICYmIGVsLnN0YXJ0RW5kaW5nKSB7XG5cdFx0XHRcdFx0XHRcdFx0ZGVsZXRlIGVsLnN0YXJ0RW5kaW5nO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmIChlbC5lbF90eXBlID09PSAnYmFyJyAmJiBlbC5lbmRFbmRpbmcpXG5cdFx0XHRcdFx0XHRcdFx0ZGVsZXRlIGVsLmVuZEVuZGluZztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIG1hZGVDaGFuZ2VzO1xufTtcblxuZnVuY3Rpb24gZmluZExhc3RCYXIodm9pY2UsIHN0YXJ0KSB7XG5cdGZvciAodmFyIGkgPSBzdGFydCAtIDE7IGkgPiAwICYmIHZvaWNlW2ldLmVsX3R5cGUgIT09IFwiYmFyXCI7IGktLSkge1xuXG5cdH1cblx0cmV0dXJuIGk7XG59XG5cbmZ1bmN0aW9uIGZpeFRpdGxlcyhsaW5lcykge1xuXHQvLyBXZSBtaWdodCBoYXZlIG5hbWUgYW5kIHN1Ym5hbWUgZGVmaW5lZC4gV2Ugbm93IGtub3cgd2hhdCBsaW5lIGV2ZXJ5dGhpbmcgaXMgb24sIHNvIHdlIGNhbiBkZXRlcm1pbmUgd2hpY2ggdG8gdXNlLlxuXHR2YXIgZmlyc3RNdXNpY0xpbmUgPSB0cnVlO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGxpbmUgPSBsaW5lc1tpXTtcblx0XHRpZiAobGluZS5zdGFmZikge1xuXHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBsaW5lLnN0YWZmLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHZhciBzdGFmZiA9IGxpbmUuc3RhZmZbal07XG5cdFx0XHRcdGlmIChzdGFmZi50aXRsZSkge1xuXHRcdFx0XHRcdHZhciBoYXNBVGl0bGUgPSBmYWxzZTtcblx0XHRcdFx0XHRmb3IgKHZhciBrID0gMDsgayA8IHN0YWZmLnRpdGxlLmxlbmd0aDsgaysrKSB7XG5cdFx0XHRcdFx0XHRpZiAoc3RhZmYudGl0bGVba10pIHtcblx0XHRcdFx0XHRcdFx0c3RhZmYudGl0bGVba10gPSAoZmlyc3RNdXNpY0xpbmUpID8gc3RhZmYudGl0bGVba10ubmFtZSA6IHN0YWZmLnRpdGxlW2tdLnN1Ym5hbWU7XG5cdFx0XHRcdFx0XHRcdGlmIChzdGFmZi50aXRsZVtrXSlcblx0XHRcdFx0XHRcdFx0XHRoYXNBVGl0bGUgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdFx0c3RhZmYudGl0bGVba10gPSAnJztcblx0XHRcdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdFx0XHRzdGFmZi50aXRsZVtrXSA9ICcnO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIWhhc0FUaXRsZSlcblx0XHRcdFx0XHRcdGRlbGV0ZSBzdGFmZi50aXRsZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Zmlyc3RNdXNpY0xpbmUgPSBmYWxzZTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gY2xlYW5VcFNsdXJzSW5MaW5lKGxpbmUsIHN0YWZmTnVtLCB2b2ljZU51bSwgY3VyclNsdXIpIHtcblx0aWYgKCFjdXJyU2x1cltzdGFmZk51bV0pXG5cdFx0Y3VyclNsdXJbc3RhZmZOdW1dID0gW107XG5cdGlmICghY3VyclNsdXJbc3RhZmZOdW1dW3ZvaWNlTnVtXSlcblx0XHRjdXJyU2x1cltzdGFmZk51bV1bdm9pY2VOdW1dID0gW107XG5cdHZhciB4O1xuXHQvL1x0XHRcdHZhciBseXIgPSBudWxsO1x0Ly8gVE9ETy1QRVI6IGRlYnVnZ2luZy5cblxuXHR2YXIgYWRkRW5kU2x1ciA9IGZ1bmN0aW9uIChvYmosIG51bSwgY2hvcmRQb3MpIHtcblx0XHRpZiAoY3VyclNsdXJbc3RhZmZOdW1dW3ZvaWNlTnVtXVtjaG9yZFBvc10gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Ly8gVGhlcmUgaXNuJ3QgYW4gZXhhY3QgbWF0Y2ggZm9yIG5vdGUgcG9zaXRpb24sIGJ1dCB3ZSdsbCB0YWtlIGFueSBvdGhlciBvcGVuIHNsdXIuXG5cdFx0XHRmb3IgKHggPSAwOyB4IDwgY3VyclNsdXJbc3RhZmZOdW1dW3ZvaWNlTnVtXS5sZW5ndGg7IHgrKykge1xuXHRcdFx0XHRpZiAoY3VyclNsdXJbc3RhZmZOdW1dW3ZvaWNlTnVtXVt4XSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0Y2hvcmRQb3MgPSB4O1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoY3VyclNsdXJbc3RhZmZOdW1dW3ZvaWNlTnVtXVtjaG9yZFBvc10gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHR2YXIgb2ZmTnVtID0gY2hvcmRQb3MgKiAxMDAgKyAxO1xuXHRcdFx0XHRvYmouZW5kU2x1ci5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7IGlmIChvZmZOdW0gPT09IHgpIC0tb2ZmTnVtOyB9KTtcblx0XHRcdFx0Y3VyclNsdXJbc3RhZmZOdW1dW3ZvaWNlTnVtXVtjaG9yZFBvc10gPSBbb2ZmTnVtXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0dmFyIHNsdXJOdW07XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBudW07IGkrKykge1xuXHRcdFx0c2x1ck51bSA9IGN1cnJTbHVyW3N0YWZmTnVtXVt2b2ljZU51bV1bY2hvcmRQb3NdLnBvcCgpO1xuXHRcdFx0b2JqLmVuZFNsdXIucHVzaChzbHVyTnVtKTtcblx0XHRcdC8vXHRcdFx0XHRcdGx5ci5zeWxsYWJsZSArPSAnPCcgKyBzbHVyTnVtO1x0Ly8gVE9ETy1QRVI6IGRlYnVnZ2luZ1xuXHRcdH1cblx0XHRpZiAoY3VyclNsdXJbc3RhZmZOdW1dW3ZvaWNlTnVtXVtjaG9yZFBvc10ubGVuZ3RoID09PSAwKVxuXHRcdFx0ZGVsZXRlIGN1cnJTbHVyW3N0YWZmTnVtXVt2b2ljZU51bV1bY2hvcmRQb3NdO1xuXHRcdHJldHVybiBzbHVyTnVtO1xuXHR9O1xuXG5cdHZhciBhZGRTdGFydFNsdXIgPSBmdW5jdGlvbiAob2JqLCBudW0sIGNob3JkUG9zLCB1c2VkTnVtcykge1xuXHRcdG9iai5zdGFydFNsdXIgPSBbXTtcblx0XHRpZiAoY3VyclNsdXJbc3RhZmZOdW1dW3ZvaWNlTnVtXVtjaG9yZFBvc10gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Y3VyclNsdXJbc3RhZmZOdW1dW3ZvaWNlTnVtXVtjaG9yZFBvc10gPSBbXTtcblx0XHR9XG5cdFx0dmFyIG5leHROdW0gPSBjaG9yZFBvcyAqIDEwMCArIDE7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBudW07IGkrKykge1xuXHRcdFx0aWYgKHVzZWROdW1zKSB7XG5cdFx0XHRcdHVzZWROdW1zLmZvckVhY2goZnVuY3Rpb24gKHgpIHsgaWYgKG5leHROdW0gPT09IHgpICsrbmV4dE51bTsgfSk7XG5cdFx0XHRcdHVzZWROdW1zLmZvckVhY2goZnVuY3Rpb24gKHgpIHsgaWYgKG5leHROdW0gPT09IHgpICsrbmV4dE51bTsgfSk7XG5cdFx0XHRcdHVzZWROdW1zLmZvckVhY2goZnVuY3Rpb24gKHgpIHsgaWYgKG5leHROdW0gPT09IHgpICsrbmV4dE51bTsgfSk7XG5cdFx0XHR9XG5cdFx0XHRjdXJyU2x1cltzdGFmZk51bV1bdm9pY2VOdW1dW2Nob3JkUG9zXS5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7IGlmIChuZXh0TnVtID09PSB4KSArK25leHROdW07IH0pO1xuXHRcdFx0Y3VyclNsdXJbc3RhZmZOdW1dW3ZvaWNlTnVtXVtjaG9yZFBvc10uZm9yRWFjaChmdW5jdGlvbiAoeCkgeyBpZiAobmV4dE51bSA9PT0geCkgKytuZXh0TnVtOyB9KTtcblxuXHRcdFx0Y3VyclNsdXJbc3RhZmZOdW1dW3ZvaWNlTnVtXVtjaG9yZFBvc10ucHVzaChuZXh0TnVtKTtcblx0XHRcdG9iai5zdGFydFNsdXIucHVzaCh7IGxhYmVsOiBuZXh0TnVtIH0pO1xuXHRcdFx0aWYgKG9iai5kb3R0ZWRTbHVyKSB7XG5cdFx0XHRcdG9iai5zdGFydFNsdXJbb2JqLnN0YXJ0U2x1ci5sZW5ndGggLSAxXS5zdHlsZSA9ICdkb3R0ZWQnO1xuXHRcdFx0XHRkZWxldGUgb2JqLmRvdHRlZFNsdXI7XG5cdFx0XHR9XG5cdFx0XHQvL1x0XHRcdFx0XHRseXIuc3lsbGFibGUgKz0gJyAnICsgbmV4dE51bSArICc+JztcdC8vIFRPRE8tUEVSOmRlYnVnZ2luZ1xuXHRcdFx0bmV4dE51bSsrO1xuXHRcdH1cblx0fTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxpbmUubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgZWwgPSBsaW5lW2ldO1xuXHRcdC8vXHRcdFx0XHRpZiAoZWwubHlyaWMgPT09IHVuZGVmaW5lZClcdC8vIFRPRE8tUEVSOiBkZWJ1Z2dpbmdcblx0XHQvL1x0XHRcdFx0XHRlbC5seXJpYyA9IFt7IGRpdmlkZXI6ICctJyB9XTtcdC8vIFRPRE8tUEVSOiBkZWJ1Z2dpbmdcblx0XHQvL1x0XHRcdFx0bHlyID0gZWwubHlyaWNbMF07XHQvLyBUT0RPLVBFUjogZGVidWdnaW5nXG5cdFx0Ly9cdFx0XHRcdGx5ci5zeWxsYWJsZSA9ICcnO1x0Ly8gVE9ETy1QRVI6IGRlYnVnZ2luZ1xuXHRcdGlmIChlbC5lbF90eXBlID09PSAnbm90ZScpIHtcblx0XHRcdGlmIChlbC5ncmFjZW5vdGVzKSB7XG5cdFx0XHRcdGZvciAodmFyIGcgPSAwOyBnIDwgZWwuZ3JhY2Vub3Rlcy5sZW5ndGg7IGcrKykge1xuXHRcdFx0XHRcdGlmIChlbC5ncmFjZW5vdGVzW2ddLmVuZFNsdXIpIHtcblx0XHRcdFx0XHRcdHZhciBnZyA9IGVsLmdyYWNlbm90ZXNbZ10uZW5kU2x1cjtcblx0XHRcdFx0XHRcdGVsLmdyYWNlbm90ZXNbZ10uZW5kU2x1ciA9IFtdO1xuXHRcdFx0XHRcdFx0Zm9yICh2YXIgZ2dnID0gMDsgZ2dnIDwgZ2c7IGdnZysrKVxuXHRcdFx0XHRcdFx0XHRhZGRFbmRTbHVyKGVsLmdyYWNlbm90ZXNbZ10sIDEsIDIwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGVsLmdyYWNlbm90ZXNbZ10uc3RhcnRTbHVyKSB7XG5cdFx0XHRcdFx0XHR4ID0gZWwuZ3JhY2Vub3Rlc1tnXS5zdGFydFNsdXI7XG5cdFx0XHRcdFx0XHRhZGRTdGFydFNsdXIoZWwuZ3JhY2Vub3Rlc1tnXSwgeCwgMjApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKGVsLmVuZFNsdXIpIHtcblx0XHRcdFx0eCA9IGVsLmVuZFNsdXI7XG5cdFx0XHRcdGVsLmVuZFNsdXIgPSBbXTtcblx0XHRcdFx0YWRkRW5kU2x1cihlbCwgeCwgMCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZWwuc3RhcnRTbHVyKSB7XG5cdFx0XHRcdHggPSBlbC5zdGFydFNsdXI7XG5cdFx0XHRcdGFkZFN0YXJ0U2x1cihlbCwgeCwgMCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZWwucGl0Y2hlcykge1xuXHRcdFx0XHR2YXIgdXNlZE51bXMgPSBbXTtcblx0XHRcdFx0Zm9yICh2YXIgcCA9IDA7IHAgPCBlbC5waXRjaGVzLmxlbmd0aDsgcCsrKSB7XG5cdFx0XHRcdFx0aWYgKGVsLnBpdGNoZXNbcF0uZW5kU2x1cikge1xuXHRcdFx0XHRcdFx0dmFyIGsgPSBlbC5waXRjaGVzW3BdLmVuZFNsdXI7XG5cdFx0XHRcdFx0XHRlbC5waXRjaGVzW3BdLmVuZFNsdXIgPSBbXTtcblx0XHRcdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgazsgaisrKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBzbHVyTnVtID0gYWRkRW5kU2x1cihlbC5waXRjaGVzW3BdLCAxLCBwICsgMSk7XG5cdFx0XHRcdFx0XHRcdHVzZWROdW1zLnB1c2goc2x1ck51bSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGZvciAocCA9IDA7IHAgPCBlbC5waXRjaGVzLmxlbmd0aDsgcCsrKSB7XG5cdFx0XHRcdFx0aWYgKGVsLnBpdGNoZXNbcF0uc3RhcnRTbHVyKSB7XG5cdFx0XHRcdFx0XHR4ID0gZWwucGl0Y2hlc1twXS5zdGFydFNsdXI7XG5cdFx0XHRcdFx0XHRhZGRTdGFydFNsdXIoZWwucGl0Y2hlc1twXSwgeCwgcCArIDEsIHVzZWROdW1zKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gQ29ycmVjdCBmb3IgdGhlIHdlaXJkIGdyYWNlbm90ZSBjYXNlIHdoZXJlICh7Z31hKSBzaG91bGQgbWF0Y2guXG5cdFx0XHRcdC8vIFRoZSBlbmQgc2x1ciB3YXMgYWxyZWFkeSBhc3NpZ25lZCB0byB0aGUgbm90ZSwgYW5kIG5lZWRzIHRvIGJlIG1vdmVkIHRvIHRoZSBmaXJzdCBub3RlIG9mIHRoZSBncmFjZXMuXG5cdFx0XHRcdGlmIChlbC5ncmFjZW5vdGVzICYmIGVsLnBpdGNoZXNbMF0uZW5kU2x1ciAmJiBlbC5waXRjaGVzWzBdLmVuZFNsdXJbMF0gPT09IDEwMCAmJiBlbC5waXRjaGVzWzBdLnN0YXJ0U2x1cikge1xuXHRcdFx0XHRcdGlmIChlbC5ncmFjZW5vdGVzWzBdLmVuZFNsdXIpXG5cdFx0XHRcdFx0XHRlbC5ncmFjZW5vdGVzWzBdLmVuZFNsdXIucHVzaChlbC5waXRjaGVzWzBdLnN0YXJ0U2x1clswXS5sYWJlbCk7XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0ZWwuZ3JhY2Vub3Rlc1swXS5lbmRTbHVyID0gW2VsLnBpdGNoZXNbMF0uc3RhcnRTbHVyWzBdLmxhYmVsXTtcblx0XHRcdFx0XHRpZiAoZWwucGl0Y2hlc1swXS5lbmRTbHVyLmxlbmd0aCA9PT0gMSlcblx0XHRcdFx0XHRcdGRlbGV0ZSBlbC5waXRjaGVzWzBdLmVuZFNsdXI7XG5cdFx0XHRcdFx0ZWxzZSBpZiAoZWwucGl0Y2hlc1swXS5lbmRTbHVyWzBdID09PSAxMDApXG5cdFx0XHRcdFx0XHRlbC5waXRjaGVzWzBdLmVuZFNsdXIuc2hpZnQoKTtcblx0XHRcdFx0XHRlbHNlIGlmIChlbC5waXRjaGVzWzBdLmVuZFNsdXJbZWwucGl0Y2hlc1swXS5lbmRTbHVyLmxlbmd0aCAtIDFdID09PSAxMDApXG5cdFx0XHRcdFx0XHRlbC5waXRjaGVzWzBdLmVuZFNsdXIucG9wKCk7XG5cdFx0XHRcdFx0aWYgKGN1cnJTbHVyW3N0YWZmTnVtXVt2b2ljZU51bV1bMV0ubGVuZ3RoID09PSAxKVxuXHRcdFx0XHRcdFx0ZGVsZXRlIGN1cnJTbHVyW3N0YWZmTnVtXVt2b2ljZU51bV1bMV07XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0Y3VyclNsdXJbc3RhZmZOdW1dW3ZvaWNlTnVtXVsxXS5wb3AoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiB3cmFwTXVzaWNMaW5lcyhsaW5lcywgYmFyc3BlcnN0YWZmKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRpZiAobGluZXNbaV0uc3RhZmYgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Zm9yICh2YXIgcyA9IDA7IHMgPCBsaW5lc1tpXS5zdGFmZi5sZW5ndGg7IHMrKykge1xuXHRcdFx0XHR2YXIgcGVybWFuZW50SXRlbXMgPSBbXTtcblx0XHRcdFx0Zm9yICh2YXIgdiA9IDA7IHYgPCBsaW5lc1tpXS5zdGFmZltzXS52b2ljZXMubGVuZ3RoOyB2KyspIHtcblx0XHRcdFx0XHR2YXIgdm9pY2UgPSBsaW5lc1tpXS5zdGFmZltzXS52b2ljZXNbdl07XG5cdFx0XHRcdFx0dmFyIGJhck51bVRoaXNMaW5lID0gMDtcblx0XHRcdFx0XHRmb3IgKHZhciBuID0gMDsgbiA8IHZvaWNlLmxlbmd0aDsgbisrKSB7XG5cdFx0XHRcdFx0XHRpZiAodm9pY2Vbbl0uZWxfdHlwZSA9PT0gJ2JhcicpIHtcblx0XHRcdFx0XHRcdFx0YmFyTnVtVGhpc0xpbmUrKztcblx0XHRcdFx0XHRcdFx0aWYgKGJhck51bVRoaXNMaW5lID49IGJhcnNwZXJzdGFmZikge1xuXHRcdFx0XHRcdFx0XHRcdC8vIHB1c2ggZXZlcnl0aGluZyBlbHNlIHRvIHRoZSBuZXh0IGxpbmUsIGlmIHRoZXJlIGlzIGFueXRoaW5nIGVsc2UsXG5cdFx0XHRcdFx0XHRcdFx0Ly8gYW5kIHRoZXJlIGlzIGEgbmV4dCBsaW5lLiBJZiB0aGVyZSBpc24ndCBhIG5leHQgbGluZSwgY3JlYXRlIG9uZS5cblx0XHRcdFx0XHRcdFx0XHRpZiAobiA8IHZvaWNlLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBuZXh0TGluZSA9IGdldE5leHRNdXNpY0xpbmUobGluZXMsIGkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFuZXh0TGluZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgY3AgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGxpbmVzW2ldKSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxpbmVzLnB1c2goT2JqZWN0LmFzc2lnbih7fSwgY3ApKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bmV4dExpbmUgPSBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9yICh2YXIgc3MgPSAwOyBzcyA8IG5leHRMaW5lLnN0YWZmLmxlbmd0aDsgc3MrKykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZvciAodmFyIHZ2ID0gMDsgdnYgPCBuZXh0TGluZS5zdGFmZltzc10udm9pY2VzLmxlbmd0aDsgdnYrKylcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5leHRMaW5lLnN0YWZmW3NzXS52b2ljZXNbdnZdID0gW107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdHZhciBzdGFydEVsZW1lbnQgPSBuICsgMTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBzZWN0aW9uID0gbGluZXNbaV0uc3RhZmZbc10udm9pY2VzW3ZdLnNsaWNlKHN0YXJ0RWxlbWVudCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRsaW5lc1tpXS5zdGFmZltzXS52b2ljZXNbdl0gPSBsaW5lc1tpXS5zdGFmZltzXS52b2ljZXNbdl0uc2xpY2UoMCwgc3RhcnRFbGVtZW50KTtcblx0XHRcdFx0XHRcdFx0XHRcdG5leHRMaW5lLnN0YWZmW3NdLnZvaWNlc1t2XSA9IHBlcm1hbmVudEl0ZW1zLmNvbmNhdChzZWN0aW9uLmNvbmNhdChuZXh0TGluZS5zdGFmZltzXS52b2ljZXNbdl0pKTtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICghdm9pY2Vbbl0uZHVyYXRpb24pIHtcblx0XHRcdFx0XHRcdFx0cGVybWFuZW50SXRlbXMucHVzaCh2b2ljZVtuXSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2V0UHJldk11c2ljTGluZShsaW5lcywgY3VycmVudExpbmUpIHtcblx0aWYgKGxpbmVzLmxlbmd0aCA8PSBjdXJyZW50TGluZSlcblx0XHRyZXR1cm4gbnVsbFxuXHQvLyBJZiB0aGUgY3VycmVudCBsaW5lIGRvZXNuJ3QgaGF2ZSBtdXNpYywgc2VhcmNoIGJhY2t3YXJkcyB1bnRpbCBvbmUgaXMgZm91bmQuXG5cdHdoaWxlIChjdXJyZW50TGluZSA+PSAwKSB7XG5cdFx0aWYgKGxpbmVzW2N1cnJlbnRMaW5lXS5zdGFmZilcblx0XHRcdHJldHVybiBsaW5lc1tjdXJyZW50TGluZV07XG5cdFx0Y3VycmVudExpbmUtLTtcblx0fVxuXHRyZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gZ2V0TmV4dE11c2ljTGluZShsaW5lcywgY3VycmVudExpbmUpIHtcblx0Y3VycmVudExpbmUrKztcblx0d2hpbGUgKGxpbmVzLmxlbmd0aCA+IGN1cnJlbnRMaW5lKSB7XG5cdFx0aWYgKGxpbmVzW2N1cnJlbnRMaW5lXS5zdGFmZilcblx0XHRcdHJldHVybiBsaW5lc1tjdXJyZW50TGluZV07XG5cdFx0Y3VycmVudExpbmUrKztcblx0fVxuXHRyZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gZ2V0TGFzdE5vdGUodHVuZSkge1xuXHRpZiAoIXR1bmUubGluZXNbdHVuZS5saW5lTnVtXSkgcmV0dXJuIG51bGxcblx0aWYgKCF0dW5lLmxpbmVzW3R1bmUubGluZU51bV0uc3RhZmYpIHJldHVybiBudWxsXG5cdGlmICghdHVuZS5saW5lc1t0dW5lLmxpbmVOdW1dLnN0YWZmW3R1bmUuc3RhZmZOdW1dKSByZXR1cm4gbnVsbFxuXHR2YXIgdm9pY2UgPSB0dW5lLmxpbmVzW3R1bmUubGluZU51bV0uc3RhZmZbdHVuZS5zdGFmZk51bV0udm9pY2VzW3R1bmUudm9pY2VOdW1dXG5cdGlmICghdm9pY2UpIHJldHVybiBudWxsXG5cdGZvciAodmFyIGkgPSB2b2ljZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdHZhciBlbCA9IHZvaWNlW2ldO1xuXHRcdGlmIChlbC5lbF90eXBlID09PSAnbm90ZScpIHtcblx0XHRcdHJldHVybiBlbDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIG51bGw7XG59O1xuXG5mdW5jdGlvbiBnZXREdXJhdGlvbihlbCkge1xuXHRpZiAoZWwuZHVyYXRpb24pIHJldHVybiBlbC5kdXJhdGlvbjtcblx0cmV0dXJuIDA7XG59O1xuXG5mdW5jdGlvbiBjbG9zZUxpbmUodHVuZSkge1xuXHRpZiAodHVuZS5wb3RlbnRpYWxTdGFydEJlYW0gJiYgdHVuZS5wb3RlbnRpYWxFbmRCZWFtKSB7XG5cdFx0dHVuZS5wb3RlbnRpYWxTdGFydEJlYW0uc3RhcnRCZWFtID0gdHJ1ZTtcblx0XHR0dW5lLnBvdGVudGlhbEVuZEJlYW0uZW5kQmVhbSA9IHRydWU7XG5cdH1cblx0ZGVsZXRlIHR1bmUucG90ZW50aWFsU3RhcnRCZWFtO1xuXHRkZWxldGUgdHVuZS5wb3RlbnRpYWxFbmRCZWFtO1xufTtcblxuZnVuY3Rpb24gY29udGFpbnNOb3Rlcyh2b2ljZSkge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHZvaWNlLmxlbmd0aDsgaSsrKSB7XG5cdFx0aWYgKHZvaWNlW2ldLmVsX3R5cGUgPT09ICdub3RlJyB8fCB2b2ljZVtpXS5lbF90eXBlID09PSAnYmFyJylcblx0XHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdHJldHVybiBmYWxzZTtcbn07XG5cbmZ1bmN0aW9uIGNvbnRhaW5zTm90ZXNTdHJpY3Qodm9pY2UpIHtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCB2b2ljZS5sZW5ndGg7IGkrKykge1xuXHRcdGlmICh2b2ljZVtpXS5lbF90eXBlID09PSAnbm90ZScgJiYgKHZvaWNlW2ldLnJlc3QgPT09IHVuZGVmaW5lZCB8fCB2b2ljZVtpXS5jaG9yZCAhPT0gdW5kZWZpbmVkKSlcblx0XHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdHJldHVybiBmYWxzZTtcbn07XG5cbmZ1bmN0aW9uIHB1c2hMaW5lKHR1bmUsIGhhc2gpIHtcblx0aWYgKHR1bmUudnNraXBQZW5kaW5nKSB7XG5cdFx0aGFzaC52c2tpcCA9IHR1bmUudnNraXBQZW5kaW5nO1xuXHRcdGRlbGV0ZSB0dW5lLnZza2lwUGVuZGluZztcblx0fVxuXHR0dW5lLmxpbmVzLnB1c2goaGFzaCk7XG59O1xuXG5mdW5jdGlvbiBwdXNoTm90ZShzZWxmLCB0dW5lLCBocCwgdm9pY2VEZWZzLCBjdXJyZW50Vm9pY2VOYW1lKSB7XG5cdC8vY29uc29sZS5sb2coXCJwdXNoTm90ZVwiLCB0dW5lLmxpbmVOdW0sIHR1bmUuc3RhZmZOdW0sIGhwLnBpdGNoZXMgPyBKU09OLnN0cmluZ2lmeShocC5waXRjaGVzKSA6IGhwLnBpdGNoZXMpXG5cdHZhciBjdXJyU3RhZmYgPSB0dW5lLmxpbmVzW3R1bmUubGluZU51bV0uc3RhZmZbdHVuZS5zdGFmZk51bV07XG5cblx0aWYgKGhwLnBpdGNoZXMgIT09IHVuZGVmaW5lZCkge1xuXHRcdHZhciBtaWQgPSBjdXJyU3RhZmYud29ya2luZ0NsZWYudmVydGljYWxQb3M7XG5cdFx0aHAucGl0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7IHAudmVydGljYWxQb3MgPSBwLnBpdGNoIC0gbWlkOyB9KTtcblx0fVxuXHRpZiAoaHAuZ3JhY2Vub3RlcyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0dmFyIG1pZDIgPSBjdXJyU3RhZmYud29ya2luZ0NsZWYudmVydGljYWxQb3M7XG5cdFx0aHAuZ3JhY2Vub3Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7IHAudmVydGljYWxQb3MgPSBwLnBpdGNoIC0gbWlkMjsgfSk7XG5cdH1cblx0aWYgKGN1cnJTdGFmZi52b2ljZXMubGVuZ3RoIDw9IHR1bmUudm9pY2VOdW0pIHtcblx0XHQvL2NvbnNvbGUubG9nKFwic2hvdWxkIGNyZWF0ZT9cIiwgY3VycmVudFZvaWNlTmFtZSwgdm9pY2VEZWZzKVxuXHRcdGlmICghdm9pY2VEZWZzW2N1cnJlbnRWb2ljZU5hbWVdKVxuXHRcdFx0dm9pY2VEZWZzW2N1cnJlbnRWb2ljZU5hbWVdID0ge31cblx0XHRjcmVhdGVWb2ljZShzZWxmLCB0dW5lLCB2b2ljZURlZnNbY3VycmVudFZvaWNlTmFtZV0pXG5cdH1cblx0Y3VyclN0YWZmLnZvaWNlc1t0dW5lLnZvaWNlTnVtXS5wdXNoKGhwKTtcbn1cblxuZnVuY3Rpb24gZW5kQmVhbUhlcmUoaGFzaFBhcmFtcywgdHVuZSkge1xuXHR0dW5lLnBvdGVudGlhbFN0YXJ0QmVhbS5zdGFydEJlYW0gPSB0cnVlO1xuXHRoYXNoUGFyYW1zLmVuZEJlYW0gPSB0cnVlO1xuXHRkZWxldGUgdHVuZS5wb3RlbnRpYWxTdGFydEJlYW07XG5cdGRlbGV0ZSB0dW5lLnBvdGVudGlhbEVuZEJlYW07XG59XG5mdW5jdGlvbiBlbmRCZWFtTGFzdCh0dW5lKSB7XG5cdGlmICh0dW5lLnBvdGVudGlhbFN0YXJ0QmVhbSAhPT0gdW5kZWZpbmVkICYmIHR1bmUucG90ZW50aWFsRW5kQmVhbSAhPT0gdW5kZWZpbmVkKSB7XHQvLyBEbyB3ZSBoYXZlIGEgc2V0IG9mIG5vdGVzIHRvIGJlYW0/XG5cdFx0dHVuZS5wb3RlbnRpYWxTdGFydEJlYW0uc3RhcnRCZWFtID0gdHJ1ZTtcblx0XHR0dW5lLnBvdGVudGlhbEVuZEJlYW0uZW5kQmVhbSA9IHRydWU7XG5cdH1cblx0ZGVsZXRlIHR1bmUucG90ZW50aWFsU3RhcnRCZWFtO1xuXHRkZWxldGUgdHVuZS5wb3RlbnRpYWxFbmRCZWFtO1xufVxuXG5mdW5jdGlvbiBzZXRMaW5lRm9udCh0dW5lLCB0eXBlLCBmb250KSB7XG5cdC8vIElmIHdlIGhhdmVuJ3QgZW5jb3VudGVyZWQgdGhlIGZvbnQgdHlwZSB5ZXQgdGhlbiB3ZSBhcmUgdXNpbmcgdGhlIGRlZmF1bHQgZm9udCBzbyBpdCBkb2Vzbid0XG5cdC8vIG5lZWQgdG8gYmUgbm90ZWQuIElmIHdlIGhhdmUgZW5jb3VudGVyZWQgaXQsIHRoZW4gb25seSByZWNvcmQgaXQgaWYgaXQgaXMgZGlmZmVyZW50IGZyb20gdGhlIGxhc3QgdGltZS5cblx0aWYgKHR1bmUucnVubmluZ0ZvbnRzW3R5cGVdKSB7XG5cdFx0dmFyIGlzRGlmZmVyZW50ID0gZmFsc2U7XG5cdFx0dmFyIGtleXMgPSBPYmplY3Qua2V5cyhmb250KTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmICh0dW5lLnJ1bm5pbmdGb250c1t0eXBlXVtrZXlzW2ldXSAhPT0gZm9udFtrZXlzW2ldXSlcblx0XHRcdFx0aXNEaWZmZXJlbnQgPSB0cnVlO1xuXHRcdH1cblx0XHRpZiAoaXNEaWZmZXJlbnQpIHtcblx0XHRcdHR1bmUubGluZXNbdHVuZS5saW5lTnVtXS5zdGFmZlt0dW5lLnN0YWZmTnVtXVt0eXBlXSA9IGZvbnQ7XG5cdFx0fVxuXHR9XG5cdHR1bmUucnVubmluZ0ZvbnRzW3R5cGVdID0gZm9udDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVm9pY2Uoc2VsZiwgdHVuZSwgcGFyYW1zKSB7XG5cdC8vY29uc29sZS5sb2coXCJjcmVhdGVWb2ljZVwiLCBwYXJhbXMpXG5cdHZhciB0aGlzU3RhZmYgPSB0dW5lLmxpbmVzW3R1bmUubGluZU51bV0uc3RhZmZbdHVuZS5zdGFmZk51bV07XG5cdHRoaXNTdGFmZi52b2ljZXNbdHVuZS52b2ljZU51bV0gPSBbXTtcblx0aWYgKCF0aGlzU3RhZmYudGl0bGUpXG5cdFx0dGhpc1N0YWZmLnRpdGxlID0gW107XG5cdHRoaXNTdGFmZi50aXRsZVt0dW5lLnZvaWNlTnVtXSA9IHsgbmFtZTogcGFyYW1zLm5hbWUsIHN1Ym5hbWU6IHBhcmFtcy5zdWJuYW1lIH07XG5cdGlmIChwYXJhbXMuc3R5bGUpXG5cdFx0c2VsZi5hcHBlbmRFbGVtZW50KCdzdHlsZScsIG51bGwsIG51bGwsIHsgaGVhZDogcGFyYW1zLnN0eWxlIH0pO1xuXHRpZiAocGFyYW1zLnN0ZW0pXG5cdFx0c2VsZi5hcHBlbmRFbGVtZW50KCdzdGVtJywgbnVsbCwgbnVsbCwgeyBkaXJlY3Rpb246IHBhcmFtcy5zdGVtIH0pO1xuXHRlbHNlIGlmICh0dW5lLnZvaWNlTnVtID4gMCkge1xuXHRcdGlmICh0aGlzU3RhZmYudm9pY2VzWzBdICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdHZhciBmb3VuZCA9IGZhbHNlO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzU3RhZmYudm9pY2VzWzBdLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmICh0aGlzU3RhZmYudm9pY2VzWzBdLmVsX3R5cGUgPT09ICdzdGVtJylcblx0XHRcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWZvdW5kKSB7XG5cdFx0XHRcdHZhciBzdGVtID0geyBlbF90eXBlOiAnc3RlbScsIGRpcmVjdGlvbjogJ3VwJyB9O1xuXHRcdFx0XHR0aGlzU3RhZmYudm9pY2VzWzBdLnNwbGljZSgwLCAwLCBzdGVtKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0c2VsZi5hcHBlbmRFbGVtZW50KCdzdGVtJywgbnVsbCwgbnVsbCwgeyBkaXJlY3Rpb246ICdkb3duJyB9KTtcblx0fVxuXHRpZiAocGFyYW1zLnNjYWxlKVxuXHRcdHNlbGYuYXBwZW5kRWxlbWVudCgnc2NhbGUnLCBudWxsLCBudWxsLCB7IHNpemU6IHBhcmFtcy5zY2FsZSB9KTtcblx0aWYgKHBhcmFtcy5jb2xvcilcblx0XHRzZWxmLmFwcGVuZEVsZW1lbnQoJ2NvbG9yJywgbnVsbCwgbnVsbCwgeyBjb2xvcjogcGFyYW1zLmNvbG9yIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTdGFmZihzZWxmLCB0dW5lLCBwYXJhbXMpIHtcblx0aWYgKHBhcmFtcy5rZXkgJiYgcGFyYW1zLmtleS5pbXBsaWVkTmF0dXJhbHMpIHtcblx0XHRwYXJhbXMua2V5LmFjY2lkZW50YWxzID0gcGFyYW1zLmtleS5hY2NpZGVudGFscy5jb25jYXQocGFyYW1zLmtleS5pbXBsaWVkTmF0dXJhbHMpO1xuXHRcdGRlbGV0ZSBwYXJhbXMua2V5LmltcGxpZWROYXR1cmFscztcblx0fVxuXG5cdHR1bmUubGluZXNbdHVuZS5saW5lTnVtXS5zdGFmZlt0dW5lLnN0YWZmTnVtXSA9IHsgdm9pY2VzOiBbXSwgY2xlZjogcGFyYW1zLmNsZWYsIGtleTogcGFyYW1zLmtleSwgd29ya2luZ0NsZWY6IHBhcmFtcy5jbGVmIH07XG5cdHZhciBzdGFmZiA9IHR1bmUubGluZXNbdHVuZS5saW5lTnVtXS5zdGFmZlt0dW5lLnN0YWZmTnVtXVxuXHRpZiAocGFyYW1zLnN0YWZmbGluZXMgIT09IHVuZGVmaW5lZCkge1xuXHRcdHN0YWZmLmNsZWYuc3RhZmZsaW5lcyA9IHBhcmFtcy5zdGFmZmxpbmVzO1xuXHRcdHN0YWZmLndvcmtpbmdDbGVmLnN0YWZmbGluZXMgPSBwYXJhbXMuc3RhZmZsaW5lcztcblx0fVxuXHRpZiAocGFyYW1zLnN0YWZmc2NhbGUpIHtcblx0XHRzdGFmZi5zdGFmZnNjYWxlID0gcGFyYW1zLnN0YWZmc2NhbGU7XG5cdH1cblx0aWYgKHBhcmFtcy5hbm5vdGF0aW9uZm9udCkgc2V0TGluZUZvbnQodHVuZSwgXCJhbm5vdGF0aW9uZm9udFwiLCBwYXJhbXMuYW5ub3RhdGlvbmZvbnQpO1xuXHRpZiAocGFyYW1zLmdjaG9yZGZvbnQpIHNldExpbmVGb250KHR1bmUsIFwiZ2Nob3JkZm9udFwiLCBwYXJhbXMuZ2Nob3JkZm9udCk7XG5cdGlmIChwYXJhbXMudHJpcGxldGZvbnQpIHNldExpbmVGb250KHR1bmUsIFwidHJpcGxldGZvbnRcIiwgcGFyYW1zLnRyaXBsZXRmb250KTtcblx0aWYgKHBhcmFtcy52b2NhbGZvbnQpIHNldExpbmVGb250KHR1bmUsIFwidm9jYWxmb250XCIsIHBhcmFtcy52b2NhbGZvbnQpO1xuXHRpZiAocGFyYW1zLmJyYWNrZXQpIHN0YWZmLmJyYWNrZXQgPSBwYXJhbXMuYnJhY2tldDtcblx0aWYgKHBhcmFtcy5icmFjZSkgc3RhZmYuYnJhY2UgPSBwYXJhbXMuYnJhY2U7XG5cdGlmIChwYXJhbXMuY29ubmVjdEJhckxpbmVzKSBzdGFmZi5jb25uZWN0QmFyTGluZXMgPSBwYXJhbXMuY29ubmVjdEJhckxpbmVzO1xuXHRpZiAocGFyYW1zLmJhck51bWJlcikgc3RhZmYuYmFyTnVtYmVyID0gcGFyYW1zLmJhck51bWJlcjtcblx0Y3JlYXRlVm9pY2Uoc2VsZiwgdHVuZSwgcGFyYW1zKTtcblx0Ly8gU29tZSBzdHVmZiBqdXN0IGhhcHBlbnMgZm9yIHRoZSBmaXJzdCB2b2ljZVxuXHRpZiAocGFyYW1zLnBhcnQpXG5cdFx0c2VsZi5hcHBlbmRFbGVtZW50KCdwYXJ0JywgcGFyYW1zLnBhcnQuc3RhcnRDaGFyLCBwYXJhbXMucGFydC5lbmRDaGFyLCB7IHRpdGxlOiBwYXJhbXMucGFydC50aXRsZSB9KTtcblx0aWYgKHBhcmFtcy5tZXRlciAhPT0gdW5kZWZpbmVkKSBzdGFmZi5tZXRlciA9IHBhcmFtcy5tZXRlcjtcblx0aWYgKHR1bmUudnNraXBQZW5kaW5nKSB7XG5cdFx0dHVuZS5saW5lc1t0dW5lLmxpbmVOdW1dLnZza2lwID0gdHVuZS52c2tpcFBlbmRpbmc7XG5cdFx0ZGVsZXRlIHR1bmUudnNraXBQZW5kaW5nO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxpbmUoc2VsZiwgdHVuZSwgcGFyYW1zKSB7XG5cdHR1bmUubGluZXNbdHVuZS5saW5lTnVtXSA9IHsgc3RhZmY6IFtdIH07XG5cdGNyZWF0ZVN0YWZmKHNlbGYsIHR1bmUsIHBhcmFtcyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVHVuZUJ1aWxkZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/parse/tune-builder.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/parse/wrap_lines.js":
/*!****************************************************!*\
  !*** ./node_modules/abcjs/src/parse/wrap_lines.js ***!
  \****************************************************/
/***/ ((module) => {

eval("//    wrap_lines.js: does line wrap on an already parsed tune.\n\nfunction wrapLines(tune, lineBreaks, barNumbers) {\n\tif (!lineBreaks || tune.lines.length === 0)\n\t\treturn;\n\n\t// tune.lines contains nested arrays: there is an array of lines (that's the part this function rewrites),\n\t// there is an array of staffs per line (for instance, piano will have 2, orchestra will have many)\n\t// there is an array of voices per staff (for instance, 4-part harmony might have bass and tenor on a single staff)\n\tvar lines = tune.deline({lineBreaks: false});\n\tvar linesBreakElements = findLineBreaks(lines, lineBreaks);\n\t//console.log(JSON.stringify(linesBreakElements))\n\ttune.lines = addLineBreaks(lines, linesBreakElements, barNumbers);\n\ttune.lineBreaks = linesBreakElements;\n}\n\nfunction addLineBreaks(lines, linesBreakElements, barNumbers) {\n\t// linesBreakElements is an array of all of the elements that break for a new line\n\t// The objects in the array look like:\n\t// {\"ogLine\":0,\"line\":0,\"staff\":0,\"voice\":0,\"start\":0, \"end\":21}\n\t// ogLine is the original line that it came from,\n\t// line is the target line.\n\t// then copy all the elements from start to end for the staff and voice specified.\n\t// If the item doesn't contain \"staff\" then it is a non music line and should just be copied.\n\tvar outputLines = [];\n\tvar lastKeySig = []; // This is per staff - if the key changed then this will be populated.\n\tvar lastStem = [];\n\tvar currentBarNumber = 1;\n\tfor (var i = 0; i < linesBreakElements.length; i++) {\n\t\tvar action = linesBreakElements[i];\n\t\tif (lines[action.ogLine].staff) {\n\t\t\tvar inputStaff = lines[action.ogLine].staff[action.staff];\n\t\t\tif (!outputLines[action.line]) {\n\t\t\t\toutputLines[action.line] = {staff: []}\n\t\t\t}\n\t\t\tif (!outputLines[action.line].staff[action.staff]) {\n\t\t\t\toutputLines[action.line].staff[action.staff] = {voices: []};\n\t\t\t\tif (barNumbers !== undefined && action.staff === 0 && action.line > 0) {\n\t\t\t\t\toutputLines[action.line].staff[action.staff].barNumber = currentBarNumber;\n\t\t\t\t}\n\t\t\t\tvar keys = Object.keys(inputStaff)\n\t\t\t\tfor (var k = 0; k < keys.length; k++) {\n\t\t\t\t\tvar skip = keys[k] === \"voices\";\n\t\t\t\t\tif (keys[k] === \"meter\" && action.line !== 0)\n\t\t\t\t\t\tskip = true;\n\t\t\t\t\tif (!skip)\n\t\t\t\t\t\toutputLines[action.line].staff[action.staff][keys[k]] = inputStaff[keys[k]];\n\t\t\t\t}\n\t\t\t\tif (lastKeySig[action.staff])\n\t\t\t\t\toutputLines[action.line].staff[action.staff].key = lastKeySig[action.staff];\n\n\t\t\t}\n\t\t\tif (!outputLines[action.line].staff[action.staff].voices[action.voice]) {\n\t\t\t\toutputLines[action.line].staff[action.staff].voices[action.voice] = [];\n\t\t\t}\n\t\t\toutputLines[action.line].staff[action.staff].voices[action.voice] =\n\t\t\t\tlines[action.ogLine].staff[action.staff].voices[action.voice].slice(action.start, action.end+1);\n\t\t\tif (lastStem[action.staff*10+action.voice])\n\t\t\t\toutputLines[action.line].staff[action.staff].voices[action.voice].unshift({el_type: \"stem\", direction: lastStem[action.staff*10+action.voice].direction})\n\t\t\tvar currVoice = outputLines[action.line].staff[action.staff].voices[action.voice];\n\t\t\tfor (var kk = currVoice.length-1; kk >= 0; kk--) {\n\t\t\t\tif (currVoice[kk].el_type === \"key\") {\n\t\t\t\t\tlastKeySig[action.staff] = {\n\t\t\t\t\t\troot: currVoice[kk].root,\n\t\t\t\t\t\tacc: currVoice[kk].acc,\n\t\t\t\t\t\tmode: currVoice[kk].mode,\n\t\t\t\t\t\taccidentals: currVoice[kk].accidentals.filter(function (acc) { return acc.acc !== 'natural' })\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (kk = currVoice.length-1; kk >= 0; kk--) {\n\t\t\t\tif (currVoice[kk].el_type === \"stem\") {\n\t\t\t\t\tlastStem[action.staff*10+action.voice] = {\n\t\t\t\t\t\tdirection: currVoice[kk].direction,\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (barNumbers !== undefined && action.staff === 0 && action.voice === 0) {\n\t\t\t\tfor (kk = 0; kk < currVoice.length; kk++) {\n\t\t\t\t\tif (currVoice[kk].el_type === 'bar') {\n\t\t\t\t\t\tcurrentBarNumber++\n\t\t\t\t\t\tif (kk === currVoice.length-1)\n\t\t\t\t\t\t\tdelete currVoice[kk].barNumber\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tcurrVoice[kk].barNumber = currentBarNumber\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\toutputLines[action.line] = lines[action.ogLine];\n\t\t}\n\t}\n\t// There could be some missing info - if the tune passed in was incomplete or had different lengths for different voices or was missing a voice altogether - just fill in the gaps.\n\tfor (var ii = 0; ii < outputLines.length; ii++) {\n\t\tif (outputLines[ii].staff) {\n\t\t\toutputLines[ii].staff = outputLines[ii].staff.filter(function (el) {\n\t\t\t\treturn el != null;\n\t\t\t});\n\t\t}\n\t}\n\treturn outputLines;\n}\n\n\nfunction findLineBreaks(lines, lineBreakArray) {\n\t// lineBreakArray is an array of all of the sections of the tune - often there will just be one\n\t// section unless there is a subtitle or other non-music lines. Each of the elements of\n\t// Each element of lineBreakArray is an array of the zero-based last measure of the line.\n\tvar lineBreakIndexes = [];\n\tvar lbai = 0;\n\tvar lineCounter = 0;\n\tvar outputLine = 0;\n\tfor (var i = 0; i < lines.length; i++) {\n\t\tvar line = lines[i];\n\t\tif (line.staff) {\n\t\t\tvar lineStart = lineCounter;\n\t\t\tvar lineBreaks = lineBreakArray[lbai];\n\t\t\tlbai++;\n\t\t\tfor (var j = 0; j < line.staff.length; j++) {\n\t\t\t\tvar staff = line.staff[j];\n\t\t\t\tfor (var k = 0; k < staff.voices.length; k++) {\n\t\t\t\t\toutputLine = lineStart;\n\t\t\t\t\tvar measureNumber = 0;\n\t\t\t\t\tvar lbi = 0;\n\t\t\t\t\tvar voice = staff.voices[k];\n\t\t\t\t\tvar start = 0;\n\t\t\t\t\tfor (var e = 0; e < voice.length; e++) {\n\t\t\t\t\t\tvar el = voice[e];\n\n\t\t\t\t\t\tif (el.el_type === 'bar') {\n\t\t\t\t\t\t\tif (lineBreaks[lbi] === measureNumber) {\n\t\t\t\t\t\t\t\tlineBreakIndexes.push({ ogLine: i, line: outputLine, staff: j, voice: k, start: start, end: e})\n\t\t\t\t\t\t\t\tstart = e + 1;\n\t\t\t\t\t\t\t\toutputLine++;\n\t\t\t\t\t\t\t\tlineCounter = Math.max(lineCounter, outputLine)\n\t\t\t\t\t\t\t\tlbi++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmeasureNumber++;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlineBreakIndexes.push({ ogLine: i, line: outputLine, staff: j, voice: k, start: start, end: voice.length})\n\t\t\t\t\toutputLine++;\n\t\t\t\t\tlineCounter = Math.max(lineCounter, outputLine)\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tlineBreakIndexes.push({ ogLine: i, line: outputLine })\n\t\t\toutputLine++;\n\t\t\tlineCounter = Math.max(lineCounter, outputLine)\n\t\t}\n\t}\n\treturn lineBreakIndexes;\n}\n\n\nfunction freeFormLineBreaks(widths, lineBreakPoint) {\n\tvar lineBreaks = [];\n\tvar totals = [];\n\tvar totalThisLine = 0;\n\t// run through each measure and see if the accumulation is less than the ideal.\n\t// if it passes the ideal, then see whether the last or this one is closer to the ideal.\n\tfor (var i = 0; i < widths.length; i++) {\n\t\tvar width = widths[i];\n\t\tvar attemptedWidth = totalThisLine + width;\n\t\tif (attemptedWidth < lineBreakPoint)\n\t\t\ttotalThisLine = attemptedWidth;\n\t\telse {\n\t\t\t// This just passed the ideal, so see whether the previous or the current number of measures is closer.\n\t\t\tvar oldDistance = lineBreakPoint - totalThisLine;\n\t\t\tvar newDistance = attemptedWidth - lineBreakPoint;\n\t\t\tif (oldDistance < newDistance && totalThisLine > 0) {\n\t\t\t\tlineBreaks.push(i - 1);\n\t\t\t\ttotals.push(Math.round(totalThisLine - width));\n\t\t\t\ttotalThisLine = width;\n\t\t\t} else {\n\t\t\t\tif (i < widths.length-1) {\n\t\t\t\t\tlineBreaks.push(i);\n\t\t\t\t\ttotals.push(Math.round(totalThisLine));\n\t\t\t\t\ttotalThisLine = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\ttotals.push(Math.round(totalThisLine));\n\treturn { lineBreaks: lineBreaks, totals: totals };\n}\n\nfunction clone(arr) {\n\tvar newArr = [];\n\tfor (var i = 0; i < arr.length; i++)\n\t\tnewArr.push(arr[i]);\n\treturn newArr;\n}\n\nfunction oneTry(measureWidths, idealWidths, accumulator, lineAccumulator, lineWidths, lastVariance, highestVariance, currLine, lineBreaks, startIndex, otherTries) {\n\tfor (var i = startIndex; i < measureWidths.length; i++) {\n\t\tvar measureWidth = measureWidths[i];\n\t\taccumulator += measureWidth;\n\t\tlineAccumulator += measureWidth;\n\t\tvar thisVariance = Math.abs(accumulator - idealWidths[currLine]);\n\t\tvar varianceIsClose = Math.abs(thisVariance - lastVariance) < idealWidths[0] / 10; // see if the difference is less than 10%, if so, run the test both ways.\n\t\tif (varianceIsClose) {\n\t\t\tif (thisVariance < lastVariance) {\n\t\t\t\t// Also attempt one less measure on the current line - sometimes that works out better.\n\t\t\t\tvar newWidths = clone(lineWidths);\n\t\t\t\tvar newBreaks = clone(lineBreaks);\n\t\t\t\tnewBreaks.push(i-1);\n\t\t\t\tnewWidths.push(lineAccumulator - measureWidth);\n\t\t\t\totherTries.push({\n\t\t\t\t\taccumulator: accumulator,\n\t\t\t\t\tlineAccumulator: measureWidth,\n\t\t\t\t\tlineWidths: newWidths,\n\t\t\t\t\tlastVariance: Math.abs(accumulator - idealWidths[currLine+1]),\n\t\t\t\t\thighestVariance: Math.max(highestVariance, lastVariance),\n\t\t\t\t\tcurrLine: currLine+1,\n\t\t\t\t\tlineBreaks: newBreaks,\n\t\t\t\t\tstartIndex: i+1});\n\t\t\t} else if (thisVariance > lastVariance && i < measureWidths.length-1) {\n\t\t\t\t// Also attempt one extra measure on this line.\n\t\t\t\tnewWidths = clone(lineWidths);\n\t\t\t\tnewBreaks = clone(lineBreaks);\n\t\t\t\t// newBreaks[newBreaks.length-1] = i;\n\t\t\t\t// newWidths[newWidths.length-1] = lineAccumulator;\n\t\t\t\totherTries.push({\n\t\t\t\t\taccumulator: accumulator,\n\t\t\t\t\tlineAccumulator: lineAccumulator,\n\t\t\t\t\tlineWidths: newWidths,\n\t\t\t\t\tlastVariance: thisVariance,\n\t\t\t\t\thighestVariance: Math.max(highestVariance, thisVariance),\n\t\t\t\t\tcurrLine: currLine,\n\t\t\t\t\tlineBreaks: newBreaks,\n\t\t\t\t\tstartIndex: i+1});\n\t\t\t}\n\t\t}\n\t\tif (thisVariance > lastVariance) {\n\t\t\tlineBreaks.push(i - 1);\n\t\t\tcurrLine++;\n\t\t\thighestVariance = Math.max(highestVariance, lastVariance);\n\t\t\tlastVariance = Math.abs(accumulator - idealWidths[currLine]);\n\t\t\tlineWidths.push(lineAccumulator - measureWidth);\n\t\t\tlineAccumulator = measureWidth;\n\t\t} else {\n\t\t\tlastVariance = thisVariance;\n\t\t}\n\t}\n\tlineWidths.push(lineAccumulator);\n}\n\nfunction optimizeLineWidths(widths, lineBreakPoint, lineBreaks, explanation) {\n\t//\tfigure out how many lines\n\tvar numLines = Math.ceil(widths.total / lineBreakPoint); // + 1 TODO-PER: this used to be plus one - not sure why\n\n\t//\tget the ideal width for a line (cumulative width / num lines) - approx the same as lineBreakPoint except for rounding\n\tvar idealWidth = Math.floor(widths.total / numLines);\n\n\t//\tget each ideal line width (1*ideal, 2*ideal, 3*ideal, etc)\n\tvar idealWidths = [];\n\tfor (var i = 0; i < numLines; i++)\n\t\tidealWidths.push(idealWidth*(i+1));\n\n\t//\tfrom first measure, step through accum. Widths until the abs of the ideal is greater than the last one.\n\t// This can sometimes look funny in edge cases, so when the length is within 10%, try one more or one less to see which is better.\n\t// This is better than trying all the possibilities because that would get to be a huge number for even a medium size piece.\n\t// This method seems to never generate more than about 16 tries and it is usually 4 or less.\n\tvar otherTries = [];\n\totherTries.push({\n\t\taccumulator: 0,\n\t\tlineAccumulator: 0,\n\t\tlineWidths: [],\n\t\tlastVariance: 999999,\n\t\thighestVariance: 0,\n\t\tcurrLine: 0,\n\t\tlineBreaks: [], // These are the zero-based last measure on each line\n\t\tstartIndex: 0});\n\tvar index = 0;\n\twhile (index < otherTries.length) {\n\t\toneTry(widths.measureWidths,\n\t\t\tidealWidths,\n\t\t\totherTries[index].accumulator,\n\t\t\totherTries[index].lineAccumulator,\n\t\t\totherTries[index].lineWidths,\n\t\t\totherTries[index].lastVariance,\n\t\t\totherTries[index].highestVariance,\n\t\t\totherTries[index].currLine,\n\t\t\totherTries[index].lineBreaks,\n\t\t\totherTries[index].startIndex,\n\t\t\totherTries);\n\t\tindex++;\n\t}\n\tfor (i = 0; i < otherTries.length; i++) {\n\t\tvar otherTry = otherTries[i];\n\t\totherTry.variances = [];\n\t\totherTry.aveVariance = 0;\n\t\tfor (var j = 0; j < otherTry.lineWidths.length; j++) {\n\t\t\tvar lineWidth = otherTry.lineWidths[j];\n\t\t\totherTry.variances.push(lineWidth - idealWidths[0]);\n\t\t\totherTry.aveVariance += Math.abs(lineWidth - idealWidths[0]);\n\t\t}\n\t\totherTry.aveVariance =  otherTry.aveVariance / otherTry.lineWidths.length;\n\t\texplanation.attempts.push({ type: \"optimizeLineWidths\", lineBreaks: otherTry.lineBreaks, variances: otherTry.variances, aveVariance: otherTry.aveVariance, widths: widths.measureWidths });\n\t}\n\tvar smallest = 9999999;\n\tvar smallestIndex = -1;\n\tfor (i = 0; i < otherTries.length; i++) {\n\t\totherTry = otherTries[i];\n\t\tif (otherTry.aveVariance < smallest) {\n\t\t\tsmallest = otherTry.aveVariance;\n\t\t\tsmallestIndex = i;\n\t\t}\n\t}\n\treturn { failed: false, lineBreaks: otherTries[smallestIndex].lineBreaks, variance: otherTries[smallestIndex].highestVariance };\n}\n\nfunction fixedMeasureLineBreaks(widths, lineBreakPoint, preferredMeasuresPerLine) {\n\tvar lineBreaks = [];\n\tvar totals = [];\n\tvar thisWidth = 0;\n\tvar failed = false;\n\tfor (var i = 0; i < widths.length; i++) {\n\t\tthisWidth += widths[i];\n\t\tif (thisWidth > lineBreakPoint) {\n\t\t\tfailed = true;\n\t\t}\n\t\tif (i % preferredMeasuresPerLine === (preferredMeasuresPerLine-1)) {\n\t\t\tif (i !== widths.length-1) // Don't bother putting a line break for the last line - it's already a break.\n\t\t\t\tlineBreaks.push(i);\n\t\t\ttotals.push(Math.round(thisWidth));\n\t\t\tthisWidth = 0;\n\t\t}\n\t}\n\treturn { failed: failed, totals: totals, lineBreaks: lineBreaks };\n}\n\nfunction getRevisedTuneParams(lineBreaks, staffWidth, params) {\n\n\tvar revisedParams = {\n\t\tlineBreaks: lineBreaks,\n\t\tstaffwidth: staffWidth\n\t};\n\tfor (var key in params) {\n\t\tif (params.hasOwnProperty(key) && key !== 'wrap' && key !== 'staffwidth') {\n\t\t\trevisedParams[key] = params[key];\n\t\t}\n\t}\n\n\treturn { revisedParams: revisedParams };\n}\n\nfunction calcLineWraps(tune, widths, params) {\n\t// For calculating how much can go on the line, it depends on the width of the line. It is a convenience to just divide it here\n\t// by the minimum spacing instead of multiplying the min spacing later.\n\t// The scaling works differently: this is done by changing the scaling of the outer SVG, so the scaling needs to be compensated\n\t// for here, because the actual width will be different from the calculated numbers.\n\n\t// If the desired width is less than the margin, just punt and return the original tune\n\t//console.log(widths)\n\tif (widths.length === 0 || params.staffwidth < widths[0].left) {\n\t\treturn {\n\t\t\treParse: false,\n\t\t\texplanation: \"Staff width is narrower than the margin\",\n\t\t\trevisedParams: params\n\t\t};\n\t}\n\tvar scale = params.scale ? Math.max(params.scale, 0.1) : 1;\n\tvar minSpacing = params.wrap.minSpacing ? Math.max(parseFloat(params.wrap.minSpacing), 1) : 1;\n\tvar minSpacingLimit = params.wrap.minSpacingLimit ? Math.max(parseFloat(params.wrap.minSpacingLimit), 1) : minSpacing - 0.1;\n\tvar maxSpacing = params.wrap.maxSpacing ? Math.max(parseFloat(params.wrap.maxSpacing), 1) : undefined;\n\tif (params.wrap.lastLineLimit && !maxSpacing)\n\t\tmaxSpacing = Math.max(parseFloat(params.wrap.lastLineLimit), 1);\n\t// var targetHeight = params.wrap.targetHeight ? Math.max(parseInt(params.wrap.targetHeight, 10), 100) : undefined;\n\tvar preferredMeasuresPerLine = params.wrap.preferredMeasuresPerLine ? Math.max(parseInt(params.wrap.preferredMeasuresPerLine, 10), 0) : undefined;\n\n\tvar accumulatedLineBreaks = [];\n\tvar explanations = [];\n\tfor (var s = 0; s < widths.length; s++) {\n\t\tvar section = widths[s];\n\t\tvar usableWidth = params.staffwidth - section.left;\n\t\tvar lineBreakPoint = usableWidth / minSpacing / scale;\n\t\tvar minLineSize = usableWidth / maxSpacing / scale;\n\t\tvar allowableVariance = usableWidth / minSpacingLimit / scale;\n\t\tvar explanation = {\n\t\t\twidths: section,\n\t\t\tlineBreakPoint: lineBreakPoint,\n\t\t\tminLineSize: minLineSize,\n\t\t\tattempts: [],\n\t\t\tstaffWidth: params.staffwidth,\n\t\t\tminWidth: Math.round(allowableVariance)\n\t\t};\n\n\t\t// If there is a preferred number of measures per line, test that first. If none of the lines is too long, then we're finished.\n\t\tvar lineBreaks = null;\n\t\tif (preferredMeasuresPerLine) {\n\t\t\tvar f = fixedMeasureLineBreaks(section.measureWidths, lineBreakPoint, preferredMeasuresPerLine);\n\t\t\texplanation.attempts.push({\n\t\t\t\ttype: \"Fixed Measures Per Line\",\n\t\t\t\tpreferredMeasuresPerLine: preferredMeasuresPerLine,\n\t\t\t\tlineBreaks: f.lineBreaks,\n\t\t\t\tfailed: f.failed,\n\t\t\t\ttotals: f.totals\n\t\t\t});\n\t\t\tif (!f.failed)\n\t\t\t\tlineBreaks = f.lineBreaks;\n\t\t}\n\n\t\t// If we don't have lineBreaks yet, use the free form method of line breaks.\n\t\t// This will be called either if Preferred Measures is not used, or if the music is just weird - like a single measure is way too crowded.\n\t\tif (!lineBreaks) {\n\t\t\tvar ff = freeFormLineBreaks(section.measureWidths, lineBreakPoint);\n\t\t\texplanation.attempts.push({type: \"Free Form\", lineBreaks: ff.lineBreaks, totals: ff.totals});\n\t\t\tlineBreaks = ff.lineBreaks;\n\n\t\t\t// We now have an acceptable number of lines, but the measures may not be optimally distributed. See if there is a better distribution.\n\t\t\tif (lineBreaks.length > 0 && section.measureWidths.length < 25) {\n\t\t\t\t// Only do this if everything doesn't fit on one line.\n\t\t\t\t// This is an intensive operation and it is optional so just do it for shorter music.\n\t\t\t\tff = optimizeLineWidths(section, lineBreakPoint, lineBreaks, explanation);\n\t\t\t\texplanation.attempts.push({\n\t\t\t\t\ttype: \"Optimize\",\n\t\t\t\t\tfailed: ff.failed,\n\t\t\t\t\treason: ff.reason,\n\t\t\t\t\tlineBreaks: ff.lineBreaks,\n\t\t\t\t\ttotals: ff.totals\n\t\t\t\t});\n\t\t\t\tif (!ff.failed)\n\t\t\t\t\tlineBreaks = ff.lineBreaks;\n\t\t\t}\n\t\t}\n\t\taccumulatedLineBreaks.push(lineBreaks);\n\t\texplanations.push(explanation);\n\t}\n\t// If the vertical space exceeds targetHeight, remove a line and try again. If that is too crowded, then don't use it.\n\tvar staffWidth = params.staffwidth;\n\tvar ret = getRevisedTuneParams(accumulatedLineBreaks, staffWidth, params);\n\tret.explanation = explanations;\n\tret.reParse = true;\n\treturn ret;\n}\n\nmodule.exports = { wrapLines: wrapLines, calcLineWraps: calcLineWraps };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3BhcnNlL3dyYXBfbGluZXMuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixrQkFBa0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0EsaUJBQWlCLCtCQUErQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0Esb0RBQW9EO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlCQUFpQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0VBQStFLDZFQUE2RTtBQUM1SjtBQUNBLHFDQUFxQyxTQUFTO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsOEJBQThCO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLFNBQVM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix1QkFBdUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHlCQUF5QjtBQUMzQztBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsdUJBQXVCO0FBQzFDO0FBQ0Esb0JBQW9CLHlCQUF5QjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGtCQUFrQjtBQUN2Qzs7QUFFQTtBQUNBO0FBQ0EsZ0NBQWdDLHNFQUFzRTtBQUN0RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDZCQUE2QixpRkFBaUY7QUFDOUc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osMkJBQTJCLDZCQUE2QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLGdCQUFnQjtBQUNqQztBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQkFBMEIsMEJBQTBCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUZBQXFGO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDBEQUEwRDs7QUFFMUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLGNBQWM7QUFDL0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx1QkFBdUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGdDQUFnQztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDZKQUE2SjtBQUMzTDtBQUNBO0FBQ0E7QUFDQSxhQUFhLHVCQUF1QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsVUFBVTtBQUNWOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsZ0VBQWdFO0FBQzlGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvcGFyc2Uvd3JhcF9saW5lcy5qcz9iZWFlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vICAgIHdyYXBfbGluZXMuanM6IGRvZXMgbGluZSB3cmFwIG9uIGFuIGFscmVhZHkgcGFyc2VkIHR1bmUuXG5cbmZ1bmN0aW9uIHdyYXBMaW5lcyh0dW5lLCBsaW5lQnJlYWtzLCBiYXJOdW1iZXJzKSB7XG5cdGlmICghbGluZUJyZWFrcyB8fCB0dW5lLmxpbmVzLmxlbmd0aCA9PT0gMClcblx0XHRyZXR1cm47XG5cblx0Ly8gdHVuZS5saW5lcyBjb250YWlucyBuZXN0ZWQgYXJyYXlzOiB0aGVyZSBpcyBhbiBhcnJheSBvZiBsaW5lcyAodGhhdCdzIHRoZSBwYXJ0IHRoaXMgZnVuY3Rpb24gcmV3cml0ZXMpLFxuXHQvLyB0aGVyZSBpcyBhbiBhcnJheSBvZiBzdGFmZnMgcGVyIGxpbmUgKGZvciBpbnN0YW5jZSwgcGlhbm8gd2lsbCBoYXZlIDIsIG9yY2hlc3RyYSB3aWxsIGhhdmUgbWFueSlcblx0Ly8gdGhlcmUgaXMgYW4gYXJyYXkgb2Ygdm9pY2VzIHBlciBzdGFmZiAoZm9yIGluc3RhbmNlLCA0LXBhcnQgaGFybW9ueSBtaWdodCBoYXZlIGJhc3MgYW5kIHRlbm9yIG9uIGEgc2luZ2xlIHN0YWZmKVxuXHR2YXIgbGluZXMgPSB0dW5lLmRlbGluZSh7bGluZUJyZWFrczogZmFsc2V9KTtcblx0dmFyIGxpbmVzQnJlYWtFbGVtZW50cyA9IGZpbmRMaW5lQnJlYWtzKGxpbmVzLCBsaW5lQnJlYWtzKTtcblx0Ly9jb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShsaW5lc0JyZWFrRWxlbWVudHMpKVxuXHR0dW5lLmxpbmVzID0gYWRkTGluZUJyZWFrcyhsaW5lcywgbGluZXNCcmVha0VsZW1lbnRzLCBiYXJOdW1iZXJzKTtcblx0dHVuZS5saW5lQnJlYWtzID0gbGluZXNCcmVha0VsZW1lbnRzO1xufVxuXG5mdW5jdGlvbiBhZGRMaW5lQnJlYWtzKGxpbmVzLCBsaW5lc0JyZWFrRWxlbWVudHMsIGJhck51bWJlcnMpIHtcblx0Ly8gbGluZXNCcmVha0VsZW1lbnRzIGlzIGFuIGFycmF5IG9mIGFsbCBvZiB0aGUgZWxlbWVudHMgdGhhdCBicmVhayBmb3IgYSBuZXcgbGluZVxuXHQvLyBUaGUgb2JqZWN0cyBpbiB0aGUgYXJyYXkgbG9vayBsaWtlOlxuXHQvLyB7XCJvZ0xpbmVcIjowLFwibGluZVwiOjAsXCJzdGFmZlwiOjAsXCJ2b2ljZVwiOjAsXCJzdGFydFwiOjAsIFwiZW5kXCI6MjF9XG5cdC8vIG9nTGluZSBpcyB0aGUgb3JpZ2luYWwgbGluZSB0aGF0IGl0IGNhbWUgZnJvbSxcblx0Ly8gbGluZSBpcyB0aGUgdGFyZ2V0IGxpbmUuXG5cdC8vIHRoZW4gY29weSBhbGwgdGhlIGVsZW1lbnRzIGZyb20gc3RhcnQgdG8gZW5kIGZvciB0aGUgc3RhZmYgYW5kIHZvaWNlIHNwZWNpZmllZC5cblx0Ly8gSWYgdGhlIGl0ZW0gZG9lc24ndCBjb250YWluIFwic3RhZmZcIiB0aGVuIGl0IGlzIGEgbm9uIG11c2ljIGxpbmUgYW5kIHNob3VsZCBqdXN0IGJlIGNvcGllZC5cblx0dmFyIG91dHB1dExpbmVzID0gW107XG5cdHZhciBsYXN0S2V5U2lnID0gW107IC8vIFRoaXMgaXMgcGVyIHN0YWZmIC0gaWYgdGhlIGtleSBjaGFuZ2VkIHRoZW4gdGhpcyB3aWxsIGJlIHBvcHVsYXRlZC5cblx0dmFyIGxhc3RTdGVtID0gW107XG5cdHZhciBjdXJyZW50QmFyTnVtYmVyID0gMTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lc0JyZWFrRWxlbWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgYWN0aW9uID0gbGluZXNCcmVha0VsZW1lbnRzW2ldO1xuXHRcdGlmIChsaW5lc1thY3Rpb24ub2dMaW5lXS5zdGFmZikge1xuXHRcdFx0dmFyIGlucHV0U3RhZmYgPSBsaW5lc1thY3Rpb24ub2dMaW5lXS5zdGFmZlthY3Rpb24uc3RhZmZdO1xuXHRcdFx0aWYgKCFvdXRwdXRMaW5lc1thY3Rpb24ubGluZV0pIHtcblx0XHRcdFx0b3V0cHV0TGluZXNbYWN0aW9uLmxpbmVdID0ge3N0YWZmOiBbXX1cblx0XHRcdH1cblx0XHRcdGlmICghb3V0cHV0TGluZXNbYWN0aW9uLmxpbmVdLnN0YWZmW2FjdGlvbi5zdGFmZl0pIHtcblx0XHRcdFx0b3V0cHV0TGluZXNbYWN0aW9uLmxpbmVdLnN0YWZmW2FjdGlvbi5zdGFmZl0gPSB7dm9pY2VzOiBbXX07XG5cdFx0XHRcdGlmIChiYXJOdW1iZXJzICE9PSB1bmRlZmluZWQgJiYgYWN0aW9uLnN0YWZmID09PSAwICYmIGFjdGlvbi5saW5lID4gMCkge1xuXHRcdFx0XHRcdG91dHB1dExpbmVzW2FjdGlvbi5saW5lXS5zdGFmZlthY3Rpb24uc3RhZmZdLmJhck51bWJlciA9IGN1cnJlbnRCYXJOdW1iZXI7XG5cdFx0XHRcdH1cblx0XHRcdFx0dmFyIGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dFN0YWZmKVxuXHRcdFx0XHRmb3IgKHZhciBrID0gMDsgayA8IGtleXMubGVuZ3RoOyBrKyspIHtcblx0XHRcdFx0XHR2YXIgc2tpcCA9IGtleXNba10gPT09IFwidm9pY2VzXCI7XG5cdFx0XHRcdFx0aWYgKGtleXNba10gPT09IFwibWV0ZXJcIiAmJiBhY3Rpb24ubGluZSAhPT0gMClcblx0XHRcdFx0XHRcdHNraXAgPSB0cnVlO1xuXHRcdFx0XHRcdGlmICghc2tpcClcblx0XHRcdFx0XHRcdG91dHB1dExpbmVzW2FjdGlvbi5saW5lXS5zdGFmZlthY3Rpb24uc3RhZmZdW2tleXNba11dID0gaW5wdXRTdGFmZltrZXlzW2tdXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobGFzdEtleVNpZ1thY3Rpb24uc3RhZmZdKVxuXHRcdFx0XHRcdG91dHB1dExpbmVzW2FjdGlvbi5saW5lXS5zdGFmZlthY3Rpb24uc3RhZmZdLmtleSA9IGxhc3RLZXlTaWdbYWN0aW9uLnN0YWZmXTtcblxuXHRcdFx0fVxuXHRcdFx0aWYgKCFvdXRwdXRMaW5lc1thY3Rpb24ubGluZV0uc3RhZmZbYWN0aW9uLnN0YWZmXS52b2ljZXNbYWN0aW9uLnZvaWNlXSkge1xuXHRcdFx0XHRvdXRwdXRMaW5lc1thY3Rpb24ubGluZV0uc3RhZmZbYWN0aW9uLnN0YWZmXS52b2ljZXNbYWN0aW9uLnZvaWNlXSA9IFtdO1xuXHRcdFx0fVxuXHRcdFx0b3V0cHV0TGluZXNbYWN0aW9uLmxpbmVdLnN0YWZmW2FjdGlvbi5zdGFmZl0udm9pY2VzW2FjdGlvbi52b2ljZV0gPVxuXHRcdFx0XHRsaW5lc1thY3Rpb24ub2dMaW5lXS5zdGFmZlthY3Rpb24uc3RhZmZdLnZvaWNlc1thY3Rpb24udm9pY2VdLnNsaWNlKGFjdGlvbi5zdGFydCwgYWN0aW9uLmVuZCsxKTtcblx0XHRcdGlmIChsYXN0U3RlbVthY3Rpb24uc3RhZmYqMTArYWN0aW9uLnZvaWNlXSlcblx0XHRcdFx0b3V0cHV0TGluZXNbYWN0aW9uLmxpbmVdLnN0YWZmW2FjdGlvbi5zdGFmZl0udm9pY2VzW2FjdGlvbi52b2ljZV0udW5zaGlmdCh7ZWxfdHlwZTogXCJzdGVtXCIsIGRpcmVjdGlvbjogbGFzdFN0ZW1bYWN0aW9uLnN0YWZmKjEwK2FjdGlvbi52b2ljZV0uZGlyZWN0aW9ufSlcblx0XHRcdHZhciBjdXJyVm9pY2UgPSBvdXRwdXRMaW5lc1thY3Rpb24ubGluZV0uc3RhZmZbYWN0aW9uLnN0YWZmXS52b2ljZXNbYWN0aW9uLnZvaWNlXTtcblx0XHRcdGZvciAodmFyIGtrID0gY3VyclZvaWNlLmxlbmd0aC0xOyBrayA+PSAwOyBray0tKSB7XG5cdFx0XHRcdGlmIChjdXJyVm9pY2Vba2tdLmVsX3R5cGUgPT09IFwia2V5XCIpIHtcblx0XHRcdFx0XHRsYXN0S2V5U2lnW2FjdGlvbi5zdGFmZl0gPSB7XG5cdFx0XHRcdFx0XHRyb290OiBjdXJyVm9pY2Vba2tdLnJvb3QsXG5cdFx0XHRcdFx0XHRhY2M6IGN1cnJWb2ljZVtra10uYWNjLFxuXHRcdFx0XHRcdFx0bW9kZTogY3VyclZvaWNlW2trXS5tb2RlLFxuXHRcdFx0XHRcdFx0YWNjaWRlbnRhbHM6IGN1cnJWb2ljZVtra10uYWNjaWRlbnRhbHMuZmlsdGVyKGZ1bmN0aW9uIChhY2MpIHsgcmV0dXJuIGFjYy5hY2MgIT09ICduYXR1cmFsJyB9KVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGZvciAoa2sgPSBjdXJyVm9pY2UubGVuZ3RoLTE7IGtrID49IDA7IGtrLS0pIHtcblx0XHRcdFx0aWYgKGN1cnJWb2ljZVtra10uZWxfdHlwZSA9PT0gXCJzdGVtXCIpIHtcblx0XHRcdFx0XHRsYXN0U3RlbVthY3Rpb24uc3RhZmYqMTArYWN0aW9uLnZvaWNlXSA9IHtcblx0XHRcdFx0XHRcdGRpcmVjdGlvbjogY3VyclZvaWNlW2trXS5kaXJlY3Rpb24sXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKGJhck51bWJlcnMgIT09IHVuZGVmaW5lZCAmJiBhY3Rpb24uc3RhZmYgPT09IDAgJiYgYWN0aW9uLnZvaWNlID09PSAwKSB7XG5cdFx0XHRcdGZvciAoa2sgPSAwOyBrayA8IGN1cnJWb2ljZS5sZW5ndGg7IGtrKyspIHtcblx0XHRcdFx0XHRpZiAoY3VyclZvaWNlW2trXS5lbF90eXBlID09PSAnYmFyJykge1xuXHRcdFx0XHRcdFx0Y3VycmVudEJhck51bWJlcisrXG5cdFx0XHRcdFx0XHRpZiAoa2sgPT09IGN1cnJWb2ljZS5sZW5ndGgtMSlcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIGN1cnJWb2ljZVtra10uYmFyTnVtYmVyXG5cdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdGN1cnJWb2ljZVtra10uYmFyTnVtYmVyID0gY3VycmVudEJhck51bWJlclxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRvdXRwdXRMaW5lc1thY3Rpb24ubGluZV0gPSBsaW5lc1thY3Rpb24ub2dMaW5lXTtcblx0XHR9XG5cdH1cblx0Ly8gVGhlcmUgY291bGQgYmUgc29tZSBtaXNzaW5nIGluZm8gLSBpZiB0aGUgdHVuZSBwYXNzZWQgaW4gd2FzIGluY29tcGxldGUgb3IgaGFkIGRpZmZlcmVudCBsZW5ndGhzIGZvciBkaWZmZXJlbnQgdm9pY2VzIG9yIHdhcyBtaXNzaW5nIGEgdm9pY2UgYWx0b2dldGhlciAtIGp1c3QgZmlsbCBpbiB0aGUgZ2Fwcy5cblx0Zm9yICh2YXIgaWkgPSAwOyBpaSA8IG91dHB1dExpbmVzLmxlbmd0aDsgaWkrKykge1xuXHRcdGlmIChvdXRwdXRMaW5lc1tpaV0uc3RhZmYpIHtcblx0XHRcdG91dHB1dExpbmVzW2lpXS5zdGFmZiA9IG91dHB1dExpbmVzW2lpXS5zdGFmZi5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7XG5cdFx0XHRcdHJldHVybiBlbCAhPSBudWxsO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBvdXRwdXRMaW5lcztcbn1cblxuXG5mdW5jdGlvbiBmaW5kTGluZUJyZWFrcyhsaW5lcywgbGluZUJyZWFrQXJyYXkpIHtcblx0Ly8gbGluZUJyZWFrQXJyYXkgaXMgYW4gYXJyYXkgb2YgYWxsIG9mIHRoZSBzZWN0aW9ucyBvZiB0aGUgdHVuZSAtIG9mdGVuIHRoZXJlIHdpbGwganVzdCBiZSBvbmVcblx0Ly8gc2VjdGlvbiB1bmxlc3MgdGhlcmUgaXMgYSBzdWJ0aXRsZSBvciBvdGhlciBub24tbXVzaWMgbGluZXMuIEVhY2ggb2YgdGhlIGVsZW1lbnRzIG9mXG5cdC8vIEVhY2ggZWxlbWVudCBvZiBsaW5lQnJlYWtBcnJheSBpcyBhbiBhcnJheSBvZiB0aGUgemVyby1iYXNlZCBsYXN0IG1lYXN1cmUgb2YgdGhlIGxpbmUuXG5cdHZhciBsaW5lQnJlYWtJbmRleGVzID0gW107XG5cdHZhciBsYmFpID0gMDtcblx0dmFyIGxpbmVDb3VudGVyID0gMDtcblx0dmFyIG91dHB1dExpbmUgPSAwO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGxpbmUgPSBsaW5lc1tpXTtcblx0XHRpZiAobGluZS5zdGFmZikge1xuXHRcdFx0dmFyIGxpbmVTdGFydCA9IGxpbmVDb3VudGVyO1xuXHRcdFx0dmFyIGxpbmVCcmVha3MgPSBsaW5lQnJlYWtBcnJheVtsYmFpXTtcblx0XHRcdGxiYWkrKztcblx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgbGluZS5zdGFmZi5sZW5ndGg7IGorKykge1xuXHRcdFx0XHR2YXIgc3RhZmYgPSBsaW5lLnN0YWZmW2pdO1xuXHRcdFx0XHRmb3IgKHZhciBrID0gMDsgayA8IHN0YWZmLnZvaWNlcy5sZW5ndGg7IGsrKykge1xuXHRcdFx0XHRcdG91dHB1dExpbmUgPSBsaW5lU3RhcnQ7XG5cdFx0XHRcdFx0dmFyIG1lYXN1cmVOdW1iZXIgPSAwO1xuXHRcdFx0XHRcdHZhciBsYmkgPSAwO1xuXHRcdFx0XHRcdHZhciB2b2ljZSA9IHN0YWZmLnZvaWNlc1trXTtcblx0XHRcdFx0XHR2YXIgc3RhcnQgPSAwO1xuXHRcdFx0XHRcdGZvciAodmFyIGUgPSAwOyBlIDwgdm9pY2UubGVuZ3RoOyBlKyspIHtcblx0XHRcdFx0XHRcdHZhciBlbCA9IHZvaWNlW2VdO1xuXG5cdFx0XHRcdFx0XHRpZiAoZWwuZWxfdHlwZSA9PT0gJ2JhcicpIHtcblx0XHRcdFx0XHRcdFx0aWYgKGxpbmVCcmVha3NbbGJpXSA9PT0gbWVhc3VyZU51bWJlcikge1xuXHRcdFx0XHRcdFx0XHRcdGxpbmVCcmVha0luZGV4ZXMucHVzaCh7IG9nTGluZTogaSwgbGluZTogb3V0cHV0TGluZSwgc3RhZmY6IGosIHZvaWNlOiBrLCBzdGFydDogc3RhcnQsIGVuZDogZX0pXG5cdFx0XHRcdFx0XHRcdFx0c3RhcnQgPSBlICsgMTtcblx0XHRcdFx0XHRcdFx0XHRvdXRwdXRMaW5lKys7XG5cdFx0XHRcdFx0XHRcdFx0bGluZUNvdW50ZXIgPSBNYXRoLm1heChsaW5lQ291bnRlciwgb3V0cHV0TGluZSlcblx0XHRcdFx0XHRcdFx0XHRsYmkrKztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRtZWFzdXJlTnVtYmVyKys7XG5cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bGluZUJyZWFrSW5kZXhlcy5wdXNoKHsgb2dMaW5lOiBpLCBsaW5lOiBvdXRwdXRMaW5lLCBzdGFmZjogaiwgdm9pY2U6IGssIHN0YXJ0OiBzdGFydCwgZW5kOiB2b2ljZS5sZW5ndGh9KVxuXHRcdFx0XHRcdG91dHB1dExpbmUrKztcblx0XHRcdFx0XHRsaW5lQ291bnRlciA9IE1hdGgubWF4KGxpbmVDb3VudGVyLCBvdXRwdXRMaW5lKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGxpbmVCcmVha0luZGV4ZXMucHVzaCh7IG9nTGluZTogaSwgbGluZTogb3V0cHV0TGluZSB9KVxuXHRcdFx0b3V0cHV0TGluZSsrO1xuXHRcdFx0bGluZUNvdW50ZXIgPSBNYXRoLm1heChsaW5lQ291bnRlciwgb3V0cHV0TGluZSlcblx0XHR9XG5cdH1cblx0cmV0dXJuIGxpbmVCcmVha0luZGV4ZXM7XG59XG5cblxuZnVuY3Rpb24gZnJlZUZvcm1MaW5lQnJlYWtzKHdpZHRocywgbGluZUJyZWFrUG9pbnQpIHtcblx0dmFyIGxpbmVCcmVha3MgPSBbXTtcblx0dmFyIHRvdGFscyA9IFtdO1xuXHR2YXIgdG90YWxUaGlzTGluZSA9IDA7XG5cdC8vIHJ1biB0aHJvdWdoIGVhY2ggbWVhc3VyZSBhbmQgc2VlIGlmIHRoZSBhY2N1bXVsYXRpb24gaXMgbGVzcyB0aGFuIHRoZSBpZGVhbC5cblx0Ly8gaWYgaXQgcGFzc2VzIHRoZSBpZGVhbCwgdGhlbiBzZWUgd2hldGhlciB0aGUgbGFzdCBvciB0aGlzIG9uZSBpcyBjbG9zZXIgdG8gdGhlIGlkZWFsLlxuXHRmb3IgKHZhciBpID0gMDsgaSA8IHdpZHRocy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciB3aWR0aCA9IHdpZHRoc1tpXTtcblx0XHR2YXIgYXR0ZW1wdGVkV2lkdGggPSB0b3RhbFRoaXNMaW5lICsgd2lkdGg7XG5cdFx0aWYgKGF0dGVtcHRlZFdpZHRoIDwgbGluZUJyZWFrUG9pbnQpXG5cdFx0XHR0b3RhbFRoaXNMaW5lID0gYXR0ZW1wdGVkV2lkdGg7XG5cdFx0ZWxzZSB7XG5cdFx0XHQvLyBUaGlzIGp1c3QgcGFzc2VkIHRoZSBpZGVhbCwgc28gc2VlIHdoZXRoZXIgdGhlIHByZXZpb3VzIG9yIHRoZSBjdXJyZW50IG51bWJlciBvZiBtZWFzdXJlcyBpcyBjbG9zZXIuXG5cdFx0XHR2YXIgb2xkRGlzdGFuY2UgPSBsaW5lQnJlYWtQb2ludCAtIHRvdGFsVGhpc0xpbmU7XG5cdFx0XHR2YXIgbmV3RGlzdGFuY2UgPSBhdHRlbXB0ZWRXaWR0aCAtIGxpbmVCcmVha1BvaW50O1xuXHRcdFx0aWYgKG9sZERpc3RhbmNlIDwgbmV3RGlzdGFuY2UgJiYgdG90YWxUaGlzTGluZSA+IDApIHtcblx0XHRcdFx0bGluZUJyZWFrcy5wdXNoKGkgLSAxKTtcblx0XHRcdFx0dG90YWxzLnB1c2goTWF0aC5yb3VuZCh0b3RhbFRoaXNMaW5lIC0gd2lkdGgpKTtcblx0XHRcdFx0dG90YWxUaGlzTGluZSA9IHdpZHRoO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKGkgPCB3aWR0aHMubGVuZ3RoLTEpIHtcblx0XHRcdFx0XHRsaW5lQnJlYWtzLnB1c2goaSk7XG5cdFx0XHRcdFx0dG90YWxzLnB1c2goTWF0aC5yb3VuZCh0b3RhbFRoaXNMaW5lKSk7XG5cdFx0XHRcdFx0dG90YWxUaGlzTGluZSA9IDA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblx0dG90YWxzLnB1c2goTWF0aC5yb3VuZCh0b3RhbFRoaXNMaW5lKSk7XG5cdHJldHVybiB7IGxpbmVCcmVha3M6IGxpbmVCcmVha3MsIHRvdGFsczogdG90YWxzIH07XG59XG5cbmZ1bmN0aW9uIGNsb25lKGFycikge1xuXHR2YXIgbmV3QXJyID0gW107XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKVxuXHRcdG5ld0Fyci5wdXNoKGFycltpXSk7XG5cdHJldHVybiBuZXdBcnI7XG59XG5cbmZ1bmN0aW9uIG9uZVRyeShtZWFzdXJlV2lkdGhzLCBpZGVhbFdpZHRocywgYWNjdW11bGF0b3IsIGxpbmVBY2N1bXVsYXRvciwgbGluZVdpZHRocywgbGFzdFZhcmlhbmNlLCBoaWdoZXN0VmFyaWFuY2UsIGN1cnJMaW5lLCBsaW5lQnJlYWtzLCBzdGFydEluZGV4LCBvdGhlclRyaWVzKSB7XG5cdGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpIDwgbWVhc3VyZVdpZHRocy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBtZWFzdXJlV2lkdGggPSBtZWFzdXJlV2lkdGhzW2ldO1xuXHRcdGFjY3VtdWxhdG9yICs9IG1lYXN1cmVXaWR0aDtcblx0XHRsaW5lQWNjdW11bGF0b3IgKz0gbWVhc3VyZVdpZHRoO1xuXHRcdHZhciB0aGlzVmFyaWFuY2UgPSBNYXRoLmFicyhhY2N1bXVsYXRvciAtIGlkZWFsV2lkdGhzW2N1cnJMaW5lXSk7XG5cdFx0dmFyIHZhcmlhbmNlSXNDbG9zZSA9IE1hdGguYWJzKHRoaXNWYXJpYW5jZSAtIGxhc3RWYXJpYW5jZSkgPCBpZGVhbFdpZHRoc1swXSAvIDEwOyAvLyBzZWUgaWYgdGhlIGRpZmZlcmVuY2UgaXMgbGVzcyB0aGFuIDEwJSwgaWYgc28sIHJ1biB0aGUgdGVzdCBib3RoIHdheXMuXG5cdFx0aWYgKHZhcmlhbmNlSXNDbG9zZSkge1xuXHRcdFx0aWYgKHRoaXNWYXJpYW5jZSA8IGxhc3RWYXJpYW5jZSkge1xuXHRcdFx0XHQvLyBBbHNvIGF0dGVtcHQgb25lIGxlc3MgbWVhc3VyZSBvbiB0aGUgY3VycmVudCBsaW5lIC0gc29tZXRpbWVzIHRoYXQgd29ya3Mgb3V0IGJldHRlci5cblx0XHRcdFx0dmFyIG5ld1dpZHRocyA9IGNsb25lKGxpbmVXaWR0aHMpO1xuXHRcdFx0XHR2YXIgbmV3QnJlYWtzID0gY2xvbmUobGluZUJyZWFrcyk7XG5cdFx0XHRcdG5ld0JyZWFrcy5wdXNoKGktMSk7XG5cdFx0XHRcdG5ld1dpZHRocy5wdXNoKGxpbmVBY2N1bXVsYXRvciAtIG1lYXN1cmVXaWR0aCk7XG5cdFx0XHRcdG90aGVyVHJpZXMucHVzaCh7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3I6IGFjY3VtdWxhdG9yLFxuXHRcdFx0XHRcdGxpbmVBY2N1bXVsYXRvcjogbWVhc3VyZVdpZHRoLFxuXHRcdFx0XHRcdGxpbmVXaWR0aHM6IG5ld1dpZHRocyxcblx0XHRcdFx0XHRsYXN0VmFyaWFuY2U6IE1hdGguYWJzKGFjY3VtdWxhdG9yIC0gaWRlYWxXaWR0aHNbY3VyckxpbmUrMV0pLFxuXHRcdFx0XHRcdGhpZ2hlc3RWYXJpYW5jZTogTWF0aC5tYXgoaGlnaGVzdFZhcmlhbmNlLCBsYXN0VmFyaWFuY2UpLFxuXHRcdFx0XHRcdGN1cnJMaW5lOiBjdXJyTGluZSsxLFxuXHRcdFx0XHRcdGxpbmVCcmVha3M6IG5ld0JyZWFrcyxcblx0XHRcdFx0XHRzdGFydEluZGV4OiBpKzF9KTtcblx0XHRcdH0gZWxzZSBpZiAodGhpc1ZhcmlhbmNlID4gbGFzdFZhcmlhbmNlICYmIGkgPCBtZWFzdXJlV2lkdGhzLmxlbmd0aC0xKSB7XG5cdFx0XHRcdC8vIEFsc28gYXR0ZW1wdCBvbmUgZXh0cmEgbWVhc3VyZSBvbiB0aGlzIGxpbmUuXG5cdFx0XHRcdG5ld1dpZHRocyA9IGNsb25lKGxpbmVXaWR0aHMpO1xuXHRcdFx0XHRuZXdCcmVha3MgPSBjbG9uZShsaW5lQnJlYWtzKTtcblx0XHRcdFx0Ly8gbmV3QnJlYWtzW25ld0JyZWFrcy5sZW5ndGgtMV0gPSBpO1xuXHRcdFx0XHQvLyBuZXdXaWR0aHNbbmV3V2lkdGhzLmxlbmd0aC0xXSA9IGxpbmVBY2N1bXVsYXRvcjtcblx0XHRcdFx0b3RoZXJUcmllcy5wdXNoKHtcblx0XHRcdFx0XHRhY2N1bXVsYXRvcjogYWNjdW11bGF0b3IsXG5cdFx0XHRcdFx0bGluZUFjY3VtdWxhdG9yOiBsaW5lQWNjdW11bGF0b3IsXG5cdFx0XHRcdFx0bGluZVdpZHRoczogbmV3V2lkdGhzLFxuXHRcdFx0XHRcdGxhc3RWYXJpYW5jZTogdGhpc1ZhcmlhbmNlLFxuXHRcdFx0XHRcdGhpZ2hlc3RWYXJpYW5jZTogTWF0aC5tYXgoaGlnaGVzdFZhcmlhbmNlLCB0aGlzVmFyaWFuY2UpLFxuXHRcdFx0XHRcdGN1cnJMaW5lOiBjdXJyTGluZSxcblx0XHRcdFx0XHRsaW5lQnJlYWtzOiBuZXdCcmVha3MsXG5cdFx0XHRcdFx0c3RhcnRJbmRleDogaSsxfSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmICh0aGlzVmFyaWFuY2UgPiBsYXN0VmFyaWFuY2UpIHtcblx0XHRcdGxpbmVCcmVha3MucHVzaChpIC0gMSk7XG5cdFx0XHRjdXJyTGluZSsrO1xuXHRcdFx0aGlnaGVzdFZhcmlhbmNlID0gTWF0aC5tYXgoaGlnaGVzdFZhcmlhbmNlLCBsYXN0VmFyaWFuY2UpO1xuXHRcdFx0bGFzdFZhcmlhbmNlID0gTWF0aC5hYnMoYWNjdW11bGF0b3IgLSBpZGVhbFdpZHRoc1tjdXJyTGluZV0pO1xuXHRcdFx0bGluZVdpZHRocy5wdXNoKGxpbmVBY2N1bXVsYXRvciAtIG1lYXN1cmVXaWR0aCk7XG5cdFx0XHRsaW5lQWNjdW11bGF0b3IgPSBtZWFzdXJlV2lkdGg7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGxhc3RWYXJpYW5jZSA9IHRoaXNWYXJpYW5jZTtcblx0XHR9XG5cdH1cblx0bGluZVdpZHRocy5wdXNoKGxpbmVBY2N1bXVsYXRvcik7XG59XG5cbmZ1bmN0aW9uIG9wdGltaXplTGluZVdpZHRocyh3aWR0aHMsIGxpbmVCcmVha1BvaW50LCBsaW5lQnJlYWtzLCBleHBsYW5hdGlvbikge1xuXHQvL1x0ZmlndXJlIG91dCBob3cgbWFueSBsaW5lc1xuXHR2YXIgbnVtTGluZXMgPSBNYXRoLmNlaWwod2lkdGhzLnRvdGFsIC8gbGluZUJyZWFrUG9pbnQpOyAvLyArIDEgVE9ETy1QRVI6IHRoaXMgdXNlZCB0byBiZSBwbHVzIG9uZSAtIG5vdCBzdXJlIHdoeVxuXG5cdC8vXHRnZXQgdGhlIGlkZWFsIHdpZHRoIGZvciBhIGxpbmUgKGN1bXVsYXRpdmUgd2lkdGggLyBudW0gbGluZXMpIC0gYXBwcm94IHRoZSBzYW1lIGFzIGxpbmVCcmVha1BvaW50IGV4Y2VwdCBmb3Igcm91bmRpbmdcblx0dmFyIGlkZWFsV2lkdGggPSBNYXRoLmZsb29yKHdpZHRocy50b3RhbCAvIG51bUxpbmVzKTtcblxuXHQvL1x0Z2V0IGVhY2ggaWRlYWwgbGluZSB3aWR0aCAoMSppZGVhbCwgMippZGVhbCwgMyppZGVhbCwgZXRjKVxuXHR2YXIgaWRlYWxXaWR0aHMgPSBbXTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBudW1MaW5lczsgaSsrKVxuXHRcdGlkZWFsV2lkdGhzLnB1c2goaWRlYWxXaWR0aCooaSsxKSk7XG5cblx0Ly9cdGZyb20gZmlyc3QgbWVhc3VyZSwgc3RlcCB0aHJvdWdoIGFjY3VtLiBXaWR0aHMgdW50aWwgdGhlIGFicyBvZiB0aGUgaWRlYWwgaXMgZ3JlYXRlciB0aGFuIHRoZSBsYXN0IG9uZS5cblx0Ly8gVGhpcyBjYW4gc29tZXRpbWVzIGxvb2sgZnVubnkgaW4gZWRnZSBjYXNlcywgc28gd2hlbiB0aGUgbGVuZ3RoIGlzIHdpdGhpbiAxMCUsIHRyeSBvbmUgbW9yZSBvciBvbmUgbGVzcyB0byBzZWUgd2hpY2ggaXMgYmV0dGVyLlxuXHQvLyBUaGlzIGlzIGJldHRlciB0aGFuIHRyeWluZyBhbGwgdGhlIHBvc3NpYmlsaXRpZXMgYmVjYXVzZSB0aGF0IHdvdWxkIGdldCB0byBiZSBhIGh1Z2UgbnVtYmVyIGZvciBldmVuIGEgbWVkaXVtIHNpemUgcGllY2UuXG5cdC8vIFRoaXMgbWV0aG9kIHNlZW1zIHRvIG5ldmVyIGdlbmVyYXRlIG1vcmUgdGhhbiBhYm91dCAxNiB0cmllcyBhbmQgaXQgaXMgdXN1YWxseSA0IG9yIGxlc3MuXG5cdHZhciBvdGhlclRyaWVzID0gW107XG5cdG90aGVyVHJpZXMucHVzaCh7XG5cdFx0YWNjdW11bGF0b3I6IDAsXG5cdFx0bGluZUFjY3VtdWxhdG9yOiAwLFxuXHRcdGxpbmVXaWR0aHM6IFtdLFxuXHRcdGxhc3RWYXJpYW5jZTogOTk5OTk5LFxuXHRcdGhpZ2hlc3RWYXJpYW5jZTogMCxcblx0XHRjdXJyTGluZTogMCxcblx0XHRsaW5lQnJlYWtzOiBbXSwgLy8gVGhlc2UgYXJlIHRoZSB6ZXJvLWJhc2VkIGxhc3QgbWVhc3VyZSBvbiBlYWNoIGxpbmVcblx0XHRzdGFydEluZGV4OiAwfSk7XG5cdHZhciBpbmRleCA9IDA7XG5cdHdoaWxlIChpbmRleCA8IG90aGVyVHJpZXMubGVuZ3RoKSB7XG5cdFx0b25lVHJ5KHdpZHRocy5tZWFzdXJlV2lkdGhzLFxuXHRcdFx0aWRlYWxXaWR0aHMsXG5cdFx0XHRvdGhlclRyaWVzW2luZGV4XS5hY2N1bXVsYXRvcixcblx0XHRcdG90aGVyVHJpZXNbaW5kZXhdLmxpbmVBY2N1bXVsYXRvcixcblx0XHRcdG90aGVyVHJpZXNbaW5kZXhdLmxpbmVXaWR0aHMsXG5cdFx0XHRvdGhlclRyaWVzW2luZGV4XS5sYXN0VmFyaWFuY2UsXG5cdFx0XHRvdGhlclRyaWVzW2luZGV4XS5oaWdoZXN0VmFyaWFuY2UsXG5cdFx0XHRvdGhlclRyaWVzW2luZGV4XS5jdXJyTGluZSxcblx0XHRcdG90aGVyVHJpZXNbaW5kZXhdLmxpbmVCcmVha3MsXG5cdFx0XHRvdGhlclRyaWVzW2luZGV4XS5zdGFydEluZGV4LFxuXHRcdFx0b3RoZXJUcmllcyk7XG5cdFx0aW5kZXgrKztcblx0fVxuXHRmb3IgKGkgPSAwOyBpIDwgb3RoZXJUcmllcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBvdGhlclRyeSA9IG90aGVyVHJpZXNbaV07XG5cdFx0b3RoZXJUcnkudmFyaWFuY2VzID0gW107XG5cdFx0b3RoZXJUcnkuYXZlVmFyaWFuY2UgPSAwO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgb3RoZXJUcnkubGluZVdpZHRocy5sZW5ndGg7IGorKykge1xuXHRcdFx0dmFyIGxpbmVXaWR0aCA9IG90aGVyVHJ5LmxpbmVXaWR0aHNbal07XG5cdFx0XHRvdGhlclRyeS52YXJpYW5jZXMucHVzaChsaW5lV2lkdGggLSBpZGVhbFdpZHRoc1swXSk7XG5cdFx0XHRvdGhlclRyeS5hdmVWYXJpYW5jZSArPSBNYXRoLmFicyhsaW5lV2lkdGggLSBpZGVhbFdpZHRoc1swXSk7XG5cdFx0fVxuXHRcdG90aGVyVHJ5LmF2ZVZhcmlhbmNlID0gIG90aGVyVHJ5LmF2ZVZhcmlhbmNlIC8gb3RoZXJUcnkubGluZVdpZHRocy5sZW5ndGg7XG5cdFx0ZXhwbGFuYXRpb24uYXR0ZW1wdHMucHVzaCh7IHR5cGU6IFwib3B0aW1pemVMaW5lV2lkdGhzXCIsIGxpbmVCcmVha3M6IG90aGVyVHJ5LmxpbmVCcmVha3MsIHZhcmlhbmNlczogb3RoZXJUcnkudmFyaWFuY2VzLCBhdmVWYXJpYW5jZTogb3RoZXJUcnkuYXZlVmFyaWFuY2UsIHdpZHRoczogd2lkdGhzLm1lYXN1cmVXaWR0aHMgfSk7XG5cdH1cblx0dmFyIHNtYWxsZXN0ID0gOTk5OTk5OTtcblx0dmFyIHNtYWxsZXN0SW5kZXggPSAtMTtcblx0Zm9yIChpID0gMDsgaSA8IG90aGVyVHJpZXMubGVuZ3RoOyBpKyspIHtcblx0XHRvdGhlclRyeSA9IG90aGVyVHJpZXNbaV07XG5cdFx0aWYgKG90aGVyVHJ5LmF2ZVZhcmlhbmNlIDwgc21hbGxlc3QpIHtcblx0XHRcdHNtYWxsZXN0ID0gb3RoZXJUcnkuYXZlVmFyaWFuY2U7XG5cdFx0XHRzbWFsbGVzdEluZGV4ID0gaTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHsgZmFpbGVkOiBmYWxzZSwgbGluZUJyZWFrczogb3RoZXJUcmllc1tzbWFsbGVzdEluZGV4XS5saW5lQnJlYWtzLCB2YXJpYW5jZTogb3RoZXJUcmllc1tzbWFsbGVzdEluZGV4XS5oaWdoZXN0VmFyaWFuY2UgfTtcbn1cblxuZnVuY3Rpb24gZml4ZWRNZWFzdXJlTGluZUJyZWFrcyh3aWR0aHMsIGxpbmVCcmVha1BvaW50LCBwcmVmZXJyZWRNZWFzdXJlc1BlckxpbmUpIHtcblx0dmFyIGxpbmVCcmVha3MgPSBbXTtcblx0dmFyIHRvdGFscyA9IFtdO1xuXHR2YXIgdGhpc1dpZHRoID0gMDtcblx0dmFyIGZhaWxlZCA9IGZhbHNlO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHdpZHRocy5sZW5ndGg7IGkrKykge1xuXHRcdHRoaXNXaWR0aCArPSB3aWR0aHNbaV07XG5cdFx0aWYgKHRoaXNXaWR0aCA+IGxpbmVCcmVha1BvaW50KSB7XG5cdFx0XHRmYWlsZWQgPSB0cnVlO1xuXHRcdH1cblx0XHRpZiAoaSAlIHByZWZlcnJlZE1lYXN1cmVzUGVyTGluZSA9PT0gKHByZWZlcnJlZE1lYXN1cmVzUGVyTGluZS0xKSkge1xuXHRcdFx0aWYgKGkgIT09IHdpZHRocy5sZW5ndGgtMSkgLy8gRG9uJ3QgYm90aGVyIHB1dHRpbmcgYSBsaW5lIGJyZWFrIGZvciB0aGUgbGFzdCBsaW5lIC0gaXQncyBhbHJlYWR5IGEgYnJlYWsuXG5cdFx0XHRcdGxpbmVCcmVha3MucHVzaChpKTtcblx0XHRcdHRvdGFscy5wdXNoKE1hdGgucm91bmQodGhpc1dpZHRoKSk7XG5cdFx0XHR0aGlzV2lkdGggPSAwO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4geyBmYWlsZWQ6IGZhaWxlZCwgdG90YWxzOiB0b3RhbHMsIGxpbmVCcmVha3M6IGxpbmVCcmVha3MgfTtcbn1cblxuZnVuY3Rpb24gZ2V0UmV2aXNlZFR1bmVQYXJhbXMobGluZUJyZWFrcywgc3RhZmZXaWR0aCwgcGFyYW1zKSB7XG5cblx0dmFyIHJldmlzZWRQYXJhbXMgPSB7XG5cdFx0bGluZUJyZWFrczogbGluZUJyZWFrcyxcblx0XHRzdGFmZndpZHRoOiBzdGFmZldpZHRoXG5cdH07XG5cdGZvciAodmFyIGtleSBpbiBwYXJhbXMpIHtcblx0XHRpZiAocGFyYW1zLmhhc093blByb3BlcnR5KGtleSkgJiYga2V5ICE9PSAnd3JhcCcgJiYga2V5ICE9PSAnc3RhZmZ3aWR0aCcpIHtcblx0XHRcdHJldmlzZWRQYXJhbXNba2V5XSA9IHBhcmFtc1trZXldO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB7IHJldmlzZWRQYXJhbXM6IHJldmlzZWRQYXJhbXMgfTtcbn1cblxuZnVuY3Rpb24gY2FsY0xpbmVXcmFwcyh0dW5lLCB3aWR0aHMsIHBhcmFtcykge1xuXHQvLyBGb3IgY2FsY3VsYXRpbmcgaG93IG11Y2ggY2FuIGdvIG9uIHRoZSBsaW5lLCBpdCBkZXBlbmRzIG9uIHRoZSB3aWR0aCBvZiB0aGUgbGluZS4gSXQgaXMgYSBjb252ZW5pZW5jZSB0byBqdXN0IGRpdmlkZSBpdCBoZXJlXG5cdC8vIGJ5IHRoZSBtaW5pbXVtIHNwYWNpbmcgaW5zdGVhZCBvZiBtdWx0aXBseWluZyB0aGUgbWluIHNwYWNpbmcgbGF0ZXIuXG5cdC8vIFRoZSBzY2FsaW5nIHdvcmtzIGRpZmZlcmVudGx5OiB0aGlzIGlzIGRvbmUgYnkgY2hhbmdpbmcgdGhlIHNjYWxpbmcgb2YgdGhlIG91dGVyIFNWRywgc28gdGhlIHNjYWxpbmcgbmVlZHMgdG8gYmUgY29tcGVuc2F0ZWRcblx0Ly8gZm9yIGhlcmUsIGJlY2F1c2UgdGhlIGFjdHVhbCB3aWR0aCB3aWxsIGJlIGRpZmZlcmVudCBmcm9tIHRoZSBjYWxjdWxhdGVkIG51bWJlcnMuXG5cblx0Ly8gSWYgdGhlIGRlc2lyZWQgd2lkdGggaXMgbGVzcyB0aGFuIHRoZSBtYXJnaW4sIGp1c3QgcHVudCBhbmQgcmV0dXJuIHRoZSBvcmlnaW5hbCB0dW5lXG5cdC8vY29uc29sZS5sb2cod2lkdGhzKVxuXHRpZiAod2lkdGhzLmxlbmd0aCA9PT0gMCB8fCBwYXJhbXMuc3RhZmZ3aWR0aCA8IHdpZHRoc1swXS5sZWZ0KSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlUGFyc2U6IGZhbHNlLFxuXHRcdFx0ZXhwbGFuYXRpb246IFwiU3RhZmYgd2lkdGggaXMgbmFycm93ZXIgdGhhbiB0aGUgbWFyZ2luXCIsXG5cdFx0XHRyZXZpc2VkUGFyYW1zOiBwYXJhbXNcblx0XHR9O1xuXHR9XG5cdHZhciBzY2FsZSA9IHBhcmFtcy5zY2FsZSA/IE1hdGgubWF4KHBhcmFtcy5zY2FsZSwgMC4xKSA6IDE7XG5cdHZhciBtaW5TcGFjaW5nID0gcGFyYW1zLndyYXAubWluU3BhY2luZyA/IE1hdGgubWF4KHBhcnNlRmxvYXQocGFyYW1zLndyYXAubWluU3BhY2luZyksIDEpIDogMTtcblx0dmFyIG1pblNwYWNpbmdMaW1pdCA9IHBhcmFtcy53cmFwLm1pblNwYWNpbmdMaW1pdCA/IE1hdGgubWF4KHBhcnNlRmxvYXQocGFyYW1zLndyYXAubWluU3BhY2luZ0xpbWl0KSwgMSkgOiBtaW5TcGFjaW5nIC0gMC4xO1xuXHR2YXIgbWF4U3BhY2luZyA9IHBhcmFtcy53cmFwLm1heFNwYWNpbmcgPyBNYXRoLm1heChwYXJzZUZsb2F0KHBhcmFtcy53cmFwLm1heFNwYWNpbmcpLCAxKSA6IHVuZGVmaW5lZDtcblx0aWYgKHBhcmFtcy53cmFwLmxhc3RMaW5lTGltaXQgJiYgIW1heFNwYWNpbmcpXG5cdFx0bWF4U3BhY2luZyA9IE1hdGgubWF4KHBhcnNlRmxvYXQocGFyYW1zLndyYXAubGFzdExpbmVMaW1pdCksIDEpO1xuXHQvLyB2YXIgdGFyZ2V0SGVpZ2h0ID0gcGFyYW1zLndyYXAudGFyZ2V0SGVpZ2h0ID8gTWF0aC5tYXgocGFyc2VJbnQocGFyYW1zLndyYXAudGFyZ2V0SGVpZ2h0LCAxMCksIDEwMCkgOiB1bmRlZmluZWQ7XG5cdHZhciBwcmVmZXJyZWRNZWFzdXJlc1BlckxpbmUgPSBwYXJhbXMud3JhcC5wcmVmZXJyZWRNZWFzdXJlc1BlckxpbmUgPyBNYXRoLm1heChwYXJzZUludChwYXJhbXMud3JhcC5wcmVmZXJyZWRNZWFzdXJlc1BlckxpbmUsIDEwKSwgMCkgOiB1bmRlZmluZWQ7XG5cblx0dmFyIGFjY3VtdWxhdGVkTGluZUJyZWFrcyA9IFtdO1xuXHR2YXIgZXhwbGFuYXRpb25zID0gW107XG5cdGZvciAodmFyIHMgPSAwOyBzIDwgd2lkdGhzLmxlbmd0aDsgcysrKSB7XG5cdFx0dmFyIHNlY3Rpb24gPSB3aWR0aHNbc107XG5cdFx0dmFyIHVzYWJsZVdpZHRoID0gcGFyYW1zLnN0YWZmd2lkdGggLSBzZWN0aW9uLmxlZnQ7XG5cdFx0dmFyIGxpbmVCcmVha1BvaW50ID0gdXNhYmxlV2lkdGggLyBtaW5TcGFjaW5nIC8gc2NhbGU7XG5cdFx0dmFyIG1pbkxpbmVTaXplID0gdXNhYmxlV2lkdGggLyBtYXhTcGFjaW5nIC8gc2NhbGU7XG5cdFx0dmFyIGFsbG93YWJsZVZhcmlhbmNlID0gdXNhYmxlV2lkdGggLyBtaW5TcGFjaW5nTGltaXQgLyBzY2FsZTtcblx0XHR2YXIgZXhwbGFuYXRpb24gPSB7XG5cdFx0XHR3aWR0aHM6IHNlY3Rpb24sXG5cdFx0XHRsaW5lQnJlYWtQb2ludDogbGluZUJyZWFrUG9pbnQsXG5cdFx0XHRtaW5MaW5lU2l6ZTogbWluTGluZVNpemUsXG5cdFx0XHRhdHRlbXB0czogW10sXG5cdFx0XHRzdGFmZldpZHRoOiBwYXJhbXMuc3RhZmZ3aWR0aCxcblx0XHRcdG1pbldpZHRoOiBNYXRoLnJvdW5kKGFsbG93YWJsZVZhcmlhbmNlKVxuXHRcdH07XG5cblx0XHQvLyBJZiB0aGVyZSBpcyBhIHByZWZlcnJlZCBudW1iZXIgb2YgbWVhc3VyZXMgcGVyIGxpbmUsIHRlc3QgdGhhdCBmaXJzdC4gSWYgbm9uZSBvZiB0aGUgbGluZXMgaXMgdG9vIGxvbmcsIHRoZW4gd2UncmUgZmluaXNoZWQuXG5cdFx0dmFyIGxpbmVCcmVha3MgPSBudWxsO1xuXHRcdGlmIChwcmVmZXJyZWRNZWFzdXJlc1BlckxpbmUpIHtcblx0XHRcdHZhciBmID0gZml4ZWRNZWFzdXJlTGluZUJyZWFrcyhzZWN0aW9uLm1lYXN1cmVXaWR0aHMsIGxpbmVCcmVha1BvaW50LCBwcmVmZXJyZWRNZWFzdXJlc1BlckxpbmUpO1xuXHRcdFx0ZXhwbGFuYXRpb24uYXR0ZW1wdHMucHVzaCh7XG5cdFx0XHRcdHR5cGU6IFwiRml4ZWQgTWVhc3VyZXMgUGVyIExpbmVcIixcblx0XHRcdFx0cHJlZmVycmVkTWVhc3VyZXNQZXJMaW5lOiBwcmVmZXJyZWRNZWFzdXJlc1BlckxpbmUsXG5cdFx0XHRcdGxpbmVCcmVha3M6IGYubGluZUJyZWFrcyxcblx0XHRcdFx0ZmFpbGVkOiBmLmZhaWxlZCxcblx0XHRcdFx0dG90YWxzOiBmLnRvdGFsc1xuXHRcdFx0fSk7XG5cdFx0XHRpZiAoIWYuZmFpbGVkKVxuXHRcdFx0XHRsaW5lQnJlYWtzID0gZi5saW5lQnJlYWtzO1xuXHRcdH1cblxuXHRcdC8vIElmIHdlIGRvbid0IGhhdmUgbGluZUJyZWFrcyB5ZXQsIHVzZSB0aGUgZnJlZSBmb3JtIG1ldGhvZCBvZiBsaW5lIGJyZWFrcy5cblx0XHQvLyBUaGlzIHdpbGwgYmUgY2FsbGVkIGVpdGhlciBpZiBQcmVmZXJyZWQgTWVhc3VyZXMgaXMgbm90IHVzZWQsIG9yIGlmIHRoZSBtdXNpYyBpcyBqdXN0IHdlaXJkIC0gbGlrZSBhIHNpbmdsZSBtZWFzdXJlIGlzIHdheSB0b28gY3Jvd2RlZC5cblx0XHRpZiAoIWxpbmVCcmVha3MpIHtcblx0XHRcdHZhciBmZiA9IGZyZWVGb3JtTGluZUJyZWFrcyhzZWN0aW9uLm1lYXN1cmVXaWR0aHMsIGxpbmVCcmVha1BvaW50KTtcblx0XHRcdGV4cGxhbmF0aW9uLmF0dGVtcHRzLnB1c2goe3R5cGU6IFwiRnJlZSBGb3JtXCIsIGxpbmVCcmVha3M6IGZmLmxpbmVCcmVha3MsIHRvdGFsczogZmYudG90YWxzfSk7XG5cdFx0XHRsaW5lQnJlYWtzID0gZmYubGluZUJyZWFrcztcblxuXHRcdFx0Ly8gV2Ugbm93IGhhdmUgYW4gYWNjZXB0YWJsZSBudW1iZXIgb2YgbGluZXMsIGJ1dCB0aGUgbWVhc3VyZXMgbWF5IG5vdCBiZSBvcHRpbWFsbHkgZGlzdHJpYnV0ZWQuIFNlZSBpZiB0aGVyZSBpcyBhIGJldHRlciBkaXN0cmlidXRpb24uXG5cdFx0XHRpZiAobGluZUJyZWFrcy5sZW5ndGggPiAwICYmIHNlY3Rpb24ubWVhc3VyZVdpZHRocy5sZW5ndGggPCAyNSkge1xuXHRcdFx0XHQvLyBPbmx5IGRvIHRoaXMgaWYgZXZlcnl0aGluZyBkb2Vzbid0IGZpdCBvbiBvbmUgbGluZS5cblx0XHRcdFx0Ly8gVGhpcyBpcyBhbiBpbnRlbnNpdmUgb3BlcmF0aW9uIGFuZCBpdCBpcyBvcHRpb25hbCBzbyBqdXN0IGRvIGl0IGZvciBzaG9ydGVyIG11c2ljLlxuXHRcdFx0XHRmZiA9IG9wdGltaXplTGluZVdpZHRocyhzZWN0aW9uLCBsaW5lQnJlYWtQb2ludCwgbGluZUJyZWFrcywgZXhwbGFuYXRpb24pO1xuXHRcdFx0XHRleHBsYW5hdGlvbi5hdHRlbXB0cy5wdXNoKHtcblx0XHRcdFx0XHR0eXBlOiBcIk9wdGltaXplXCIsXG5cdFx0XHRcdFx0ZmFpbGVkOiBmZi5mYWlsZWQsXG5cdFx0XHRcdFx0cmVhc29uOiBmZi5yZWFzb24sXG5cdFx0XHRcdFx0bGluZUJyZWFrczogZmYubGluZUJyZWFrcyxcblx0XHRcdFx0XHR0b3RhbHM6IGZmLnRvdGFsc1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKCFmZi5mYWlsZWQpXG5cdFx0XHRcdFx0bGluZUJyZWFrcyA9IGZmLmxpbmVCcmVha3M7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGFjY3VtdWxhdGVkTGluZUJyZWFrcy5wdXNoKGxpbmVCcmVha3MpO1xuXHRcdGV4cGxhbmF0aW9ucy5wdXNoKGV4cGxhbmF0aW9uKTtcblx0fVxuXHQvLyBJZiB0aGUgdmVydGljYWwgc3BhY2UgZXhjZWVkcyB0YXJnZXRIZWlnaHQsIHJlbW92ZSBhIGxpbmUgYW5kIHRyeSBhZ2Fpbi4gSWYgdGhhdCBpcyB0b28gY3Jvd2RlZCwgdGhlbiBkb24ndCB1c2UgaXQuXG5cdHZhciBzdGFmZldpZHRoID0gcGFyYW1zLnN0YWZmd2lkdGg7XG5cdHZhciByZXQgPSBnZXRSZXZpc2VkVHVuZVBhcmFtcyhhY2N1bXVsYXRlZExpbmVCcmVha3MsIHN0YWZmV2lkdGgsIHBhcmFtcyk7XG5cdHJldC5leHBsYW5hdGlvbiA9IGV4cGxhbmF0aW9ucztcblx0cmV0LnJlUGFyc2UgPSB0cnVlO1xuXHRyZXR1cm4gcmV0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgd3JhcExpbmVzOiB3cmFwTGluZXMsIGNhbGNMaW5lV3JhcHM6IGNhbGNMaW5lV3JhcHMgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/parse/wrap_lines.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/str/output.js":
/*!**********************************************!*\
  !*** ./node_modules/abcjs/src/str/output.js ***!
  \**********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var keyAccidentals = __webpack_require__(/*! ../const/key-accidentals */ \"(ssr)/./node_modules/abcjs/src/const/key-accidentals.js\");\nvar { relativeMajor, transposeKey, relativeMode } = __webpack_require__(/*! ../const/relative-major */ \"(ssr)/./node_modules/abcjs/src/const/relative-major.js\");\nvar transposeChordName = __webpack_require__(/*! ../parse/transpose-chord */ \"(ssr)/./node_modules/abcjs/src/parse/transpose-chord.js\")\n\nvar strTranspose;\n\n(function () {\n\t\"use strict\";\n\tstrTranspose = function (abc, abcTune, steps) {\n\t\tif (abcTune === \"TEST\") // Backdoor way to get entry points for unit tests\n\t\t\treturn { keyAccidentals: keyAccidentals, relativeMajor: relativeMajor, transposeKey: transposeKey, relativeMode: relativeMode, transposeChordName: transposeChordName}\n\t\tsteps = parseInt(steps, 10)\n\t\tvar changes = [];\n\t\tvar i;\n\t\tfor (i = 0; i < abcTune.length; i++)\n\t\t\tchanges = changes.concat(transposeOneTune(abc, abcTune[i], steps))\n\n\t\t// Reverse sort so that we are replacing strings from the end to the beginning so that the indexes aren't invalidated as we go.\n\t\t// (Because voices can be written in different ways we can't count on the notes being encountered in the order they appear in the string.)\n\t\tchanges = changes.sort(function (a, b) {\n\t\t\treturn b.start - a.start\n\t\t})\n\t\tvar output = abc.split('')\n\t\tfor (i = 0; i < changes.length; i++) {\n\t\t\tvar ch = changes[i]\n\t\t\toutput.splice(ch.start, ch.end - ch.start, ch.note)\n\t\t}\n\t\treturn output.join('')\n\t}\n\n\tfunction transposeOneTune(abc, abcTune, steps) {\n\t\tvar changes = []\n\n\t\t// Don't transpose bagpipe music - that is a special case and is always a particular key\n\t\tvar key = abcTune.getKeySignature()\n\t\tif (key.root === 'Hp' || key.root === \"HP\")\n\t\t\treturn changes;\n\n\t\tchanges = changes.concat(changeAllKeySigs(abc, steps))\n\n\t\tfor (var i = 0; i < abcTune.lines.length; i++) {\n\t\t\tvar staves = abcTune.lines[i].staff\n\t\t\tif (staves) {\n\t\t\t\tfor (var j = 0; j < staves.length; j++) {\n\t\t\t\t\tvar staff = staves[j]\n\t\t\t\t\tif (staff.clef.type !== \"perc\")\n\t\t\t\t\t\tchanges = changes.concat(transposeVoices(abc, staff.voices, staff.key, steps))\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn changes\n\t}\n\n\tfunction changeAllKeySigs(abc, steps) {\n\t\tvar changes = [];\n\t\tvar arr = abc.split(\"K:\")\n\t\t// now each line except the first one will start with whatever is right after \"K:\"\n\t\tvar count = arr[0].length\n\t\tfor (var i = 1; i < arr.length; i++) {\n\t\t\tvar segment = arr[i]\n\t\t\tvar match = segment.match(/^( *)([A-G])([#b]?)( ?)(\\w*)/)\n\t\t\tif (match) {\n\t\t\t\tvar start = count + 2 + match[1].length // move past the 'K:' and optional white space\n\t\t\t\tvar key = match[2] + match[3] + match[4] + match[5] // key name, accidental, optional space, and mode\n\t\t\t\tvar destinationKey = newKey({ root: match[2], acc: match[3], mode: match[5] }, steps)\n\t\t\t\tvar dest = destinationKey.root + destinationKey.acc + match[4] + destinationKey.mode\n\t\t\t\tchanges.push({ start: start, end: start + key.length, note: dest })\n\t\t\t}\n\t\t\tcount += segment.length + 2\n\t\t}\n\t\treturn changes\n\t}\n\n\tfunction transposeVoices(abc, voices, key, steps) {\n\t\tvar changes = [];\n\t\tvar destinationKey = newKey(key, steps)\n\t\tfor (var i = 0; i < voices.length; i++) {\n\t\t\tchanges = changes.concat(transposeVoice(abc, voices[i], key.root, createKeyAccidentals(key), destinationKey, steps))\n\t\t}\n\t\treturn changes\n\t}\n\n\tfunction createKeyAccidentals(key) {\n\t\tvar ret = {}\n\t\tfor (var i = 0; i < key.accidentals.length; i++) {\n\t\t\tvar acc = key.accidentals[i];\n\t\t\tif (acc.acc === 'flat')\n\t\t\t\tret[acc.note.toUpperCase()] = '_'\n\t\t\telse if (acc.acc === 'sharp')\n\t\t\t\tret[acc.note.toUpperCase()] = '^'\n\t\t}\n\t\treturn ret\n\t}\n\n\tfunction setLetterDistance(destinationKey, keyRoot, steps) {\n\t\tvar letterDistance = letters.indexOf(destinationKey.root) - letters.indexOf(keyRoot)\n\t\tif (keyRoot === \"none\")\n\t\t\tletterDistance = letters.indexOf(destinationKey.root)\n\t\tif (letterDistance === 0) {\n\t\t\t// This could either be a half step (like Eb => E) or almost an octave (like E => Eb)\n\t\t\tif (steps > 2) // If it is a large leap, then we are going up an octave\n\t\t\t\tletterDistance += 7\n\t\t\telse if (steps === -12) // If it is a large leap, then we are going down an octave\t\n\t\t\t \tletterDistance -= 7\n\t\t} else if (steps > 0 && letterDistance < 0) \n\t\t\tletterDistance += 7\n\t\telse if (steps < 0 && letterDistance > 0) \n\t\t\tletterDistance -= 7\n\n\t\tif (steps > 12)\n\t\t\tletterDistance += 7\n\t\telse if (steps < -12)\n\t\t\tletterDistance -= 7\n\n\t\treturn letterDistance\n\t}\n\n\tfunction transposeVoice(abc, voice, keyRoot, keyAccidentals, destinationKey, steps) {\n\t\tvar changes = []\n\t\tvar letterDistance = setLetterDistance(destinationKey, keyRoot, steps)\n\n\t\tvar measureAccidentals = {}\n\t\tvar transposedMeasureAccidentals = {}\n\t\tfor (var i = 0; i < voice.length; i++) {\n\t\t\tvar el = voice[i];\n\t\t\tif (el.chord) {\n\t\t\t\tfor (var c = 0; c < el.chord.length; c++) {\n\t\t\t\t\tvar ch = el.chord[c]\n\t\t\t\t\tif (ch.position === 'default') {\n\t\t\t\t\t\tvar prefersFlats = destinationKey.accidentals.length && destinationKey.accidentals[0].acc === 'flat'\n\t\t\t\t\t\tvar newChord = transposeChordName(ch.name, steps, prefersFlats, true)\n\t\t\t\t\t\tnewChord = newChord.replace(//g, \"b\").replace(//g, \"#\")\n\t\t\t\t\t\tif (newChord !== ch.name) // If we didn't recognize the chord the input is returned unchanged and there is nothing to replace\n\t\t\t\t\t\t\tchanges.push(replaceChord(abc, el.startChar, el.endChar, newChord))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (el.el_type === 'note' && el.pitches) {\n\t\t\t\tfor (var j = 0; j < el.pitches.length; j++) {\n\t\t\t\t\tvar note = parseNote(el.pitches[j].name, keyRoot, keyAccidentals, measureAccidentals)\n\t\t\t\t\tif (note.acc)\n\t\t\t\t\t\tmeasureAccidentals[note.name.toUpperCase()] = note.acc\n\t\t\t\t\tvar newPitch = transposePitch(note, destinationKey, letterDistance, transposedMeasureAccidentals)\n\t\t\t\t\tif (newPitch.acc)\n\t\t\t\t\t\ttransposedMeasureAccidentals[newPitch.upper] = newPitch.acc\n\t\t\t\t\tchanges.push(replaceNote(abc, el.startChar, el.endChar, newPitch.acc + newPitch.name, j))\n\t\t\t\t}\n\t\t\t\tif (el.gracenotes) {\n\t\t\t\t\tfor (var g = 0; g < el.gracenotes.length; g++) {\n\t\t\t\t\t\tvar grace = parseNote(el.gracenotes[g].name, keyRoot, keyAccidentals, measureAccidentals)\n\t\t\t\t\t\tif (grace.acc)\n\t\t\t\t\t\t\tmeasureAccidentals[grace.name.toUpperCase()] = grace.acc\n\t\t\t\t\t\tvar newGrace = transposePitch(grace, destinationKey, letterDistance, measureAccidentals)\n\t\t\t\t\t\tif (newGrace.acc)\n\t\t\t\t\t\t\ttransposedMeasureAccidentals[newGrace.upper] = newGrace.acc\n\t\t\t\t\t\tchanges.push(replaceGrace(abc, el.startChar, el.endChar, newGrace.acc + newGrace.name, g))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (el.el_type === \"bar\") {\n\t\t\t\tmeasureAccidentals = {}\n\t\t\t\ttransposedMeasureAccidentals = {}\n\t\t\t} else if (el.el_type === \"keySignature\") {\n\t\t\t\tkeyRoot = el.root\n\t\t\t\tkeyAccidentals = createKeyAccidentals(el)\n\t\t\t\tdestinationKey = newKey(el, steps)\n\t\t\t\tletterDistance = setLetterDistance(destinationKey, keyRoot, steps)\n\t\t\t}\n\t\t}\n\t\treturn changes\n\t}\n\n\tvar letters = \"CDEFGAB\"\n\tvar octaves = [\",,,,\", \",,,\", \",,\", \",\", \"\", \"'\", \"''\", \"'''\", \"''''\"]\n\n\tfunction newKey(key, steps) {\n\t\tif (key.root === \"none\") {\n\t\t\treturn { root: transposeKey(\"C\", steps), mode: \"\", acc: \"\", accidentals: [] }\n\t\t}\n\t\tvar major = relativeMajor(key.root + key.acc + key.mode)\n\t\tvar newMajor = transposeKey(major, steps)\n\t\tvar newMode = relativeMode(newMajor, key.mode)\n\t\tvar acc = keyAccidentals(newMajor)\n\t\treturn { root: newMode[0], mode: key.mode, acc: newMode.length > 1 ? newMode[1] : '', accidentals: acc }\n\t}\n\n\tfunction transposePitch(note, key, letterDistance, measureAccidentals) {\n\t\t// Depending on what the current note and new note are, the octave might have changed\n\t\t// The letterDistance is how far the change is to see if we passed \"C\" when transposing.\n\n\t\tvar pitch = note.pitch\n\t\tvar origDistFromC = letters.indexOf(note.name)\n\t\tvar root = letters.indexOf(key.root)\n\t\tvar index = (root + pitch) % 7\n\t\t// if the note crosses \"c\" then the octave changes, so that is true of \"B\" when going up one step, \"A\" and \"B\" when going up two steps, etc., and reverse when going down.\n\t\tvar newDistFromC = origDistFromC + letterDistance\n\t\tvar oct = note.oct\n\t\twhile (newDistFromC > 6) {\n\t\t\toct++\n\t\t\tnewDistFromC -= 7\n\t\t}\n\t\twhile (newDistFromC < 0) {\n\t\t\toct--\n\t\t\tnewDistFromC += 7\n\t\t}\n\n\t\tvar name = letters[index]\n\n\t\tvar acc = '';\n\t\tvar adj = note.adj\n\t\t// the amount of adjustment depends on the key - if there is a sharp in the key sig, then -1 is a natural, if there isn't, then -1 is a flat.\n\t\tvar keyAcc = '=';\n\t\tfor (var i = 0; i < key.accidentals.length; i++) {\n\t\t\tif (key.accidentals[i].note.toLowerCase() === name.toLowerCase()) {\n\t\t\t\tadj = adj + (key.accidentals[i].acc === 'flat' ? -1 : 1)\n\t\t\t\tkeyAcc = (key.accidentals[i].acc === 'flat' ? '_' : '^')\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tswitch (adj) {\n\t\t\tcase -2: acc = \"__\"; break;\n\t\t\tcase -1: acc = \"_\"; break;\n\t\t\tcase 0: acc = \"=\"; break;\n\t\t\tcase 1: acc = \"^\"; break;\n\t\t\tcase 2: acc = \"^^\"; break;\n\t\t\tcase -3:\n\t\t\t\t// This requires a triple flat, so bump down the pitch and try again\n\t\t\t\tvar newNote = {}\n\t\t\t\tnewNote.pitch = note.pitch - 1\n\t\t\t\tnewNote.oct = note.oct\n\t\t\t\tnewNote.name = letters[letters.indexOf(note.name) - 1]\n\t\t\t\tif (!newNote.name) {\n\t\t\t\t\tnewNote.name = \"B\"\n\t\t\t\t\tnewNote.oct--\n\t\t\t\t}\n\t\t\t\tif (newNote.name === \"B\" || newNote.name === \"E\")\n\t\t\t\t\tnewNote.adj = note.adj + 1;\n\t\t\t\telse\n\t\t\t\t\tnewNote.adj = note.adj + 2;\n\t\t\t\treturn transposePitch(newNote, key, letterDistance + 1, measureAccidentals)\n\t\t\tcase 3:\n\t\t\t\t// This requires a triple sharp, so bump up the pitch and try again\n\t\t\t\tvar newNote = {}\n\t\t\t\tnewNote.pitch = note.pitch + 1\n\t\t\t\tnewNote.oct = note.oct\n\t\t\t\tnewNote.name = letters[letters.indexOf(note.name) + 1]\n\t\t\t\tif (!newNote.name) {\n\t\t\t\t\tnewNote.name = \"C\"\n\t\t\t\t\tnewNote.oct++\n\t\t\t\t}\n\t\t\t\tif (newNote.name === \"C\" || newNote.name === \"F\")\n\t\t\t\t\tnewNote.adj = note.adj - 1;\n\t\t\t\telse\n\t\t\t\t\tnewNote.adj = note.adj - 2;\n\t\t\t\treturn transposePitch(newNote, key, letterDistance + 1, measureAccidentals)\n\t\t}\n\t\tif ((measureAccidentals[name] === acc || (!measureAccidentals[name] && acc === keyAcc)) && !note.courtesy)\n\t\t\tacc = \"\"\n\n\t\tswitch (oct) {\n\t\t\tcase 0: name = name + \",,,\"; break;\n\t\t\tcase 1: name = name + \",,\"; break;\n\t\t\tcase 2: name = name + \",\"; break;\n\t\t\t// case 3: it is already correct\n\t\t\tcase 4: name = name.toLowerCase(); break;\n\t\t\tcase 5: name = name.toLowerCase() + \"'\"; break;\n\t\t\tcase 6: name = name.toLowerCase() + \"''\"; break;\n\t\t\tcase 7: name = name.toLowerCase() + \"'''\"; break;\n\t\t\tcase 8: name = name.toLowerCase() + \"''''\"; break;\n\t\t}\n\t\tif (oct > 4)\n\t\t\tname = name.toLowerCase();\n\n\t\treturn { acc: acc, name: name, upper: name.toUpperCase() }\n\t}\n\n\tvar regPitch = /([_^=]*)([A-Ga-g])([,']*)/\n\tvar regNote = /([_^=]*[A-Ga-g][,']*)(\\d*\\/*\\d*)([\\>\\<\\-\\)\\.\\s\\\\]*)/\n\tvar regOptionalNote = /([_^=]*[A-Ga-g][,']*)?(\\d*\\/*\\d*)?([\\>\\<\\-\\)]*)?/\n\tvar regSpace = /(\\s*)$/\n\tvar regOptionalSpace = /(\\s*)/\n\n\t// This the relationship of the note to the tonic and an octave. So what is returned is a distance in steps from the tonic and the amount of adjustment from\n\t// a normal scale. That is - in the key of D an F# is two steps from the tonic and no adjustment. A G# is three steps from the tonic and one half-step higher.\n\t// I don't think there is any adjustment needed for minor keys since the adjustment is based on the key signature and the accidentals.\n\tfunction parseNote(note, keyRoot, keyAccidentals, measureAccidentals) {\n\t\tvar root = keyRoot === \"none\" ? 0 : letters.indexOf(keyRoot)\n\t\tvar reg = note.match(regPitch)\n\t\t// reg[1] : \"__\", \"_\", \"\", \"=\", \"^\", or \"^^\"\n\t\t// reg[2] : A-G a-g\n\t\t// reg[3] : commas or apostrophes\n\t\tvar name = reg[2].toUpperCase()\n\t\tvar pos = letters.indexOf(name) - root;\n\t\tif (pos < 0) pos += 7\n\t\tvar oct = octaves.indexOf(reg[3])\n\t\tif (name === reg[2]) // See if it is a capital letter and subtract an octave if so.\n\t\t\toct--;\n\t\tvar currentAcc = measureAccidentals[name] || keyAccidentals[name] || \"=\" //  use the key accidentals if they exist, but override with the measure accidentals, and if neither of them exist, use a natural.\n\t\treturn { acc: reg[1], name: name, pitch: pos, oct: oct, adj: calcAdjustment(reg[1], keyAccidentals[name], measureAccidentals[name]), courtesy: reg[1] === currentAcc }\n\t}\n\n\tfunction replaceNote(abc, start, end, newPitch, index) {\n\t\tvar note = abc.substring(start, end);\n\t\t// Try single note first\n\t\tvar match = note.match(new RegExp(regNote.source + regSpace.source));\n\t\tif (match) {\n\t\t\tvar noteLen = match[1].length;\n\t\t\tvar trailingLen = match[2].length + match[3].length + match[4].length;\n\t\t\tvar leadingLen = end - start - noteLen - trailingLen;\n\t\t\tstart += leadingLen;\n\t\t\tend -= trailingLen;\n\t\t} else {\n\t\t\t// Match chord\n\t\t\tvar regPreBracket = /([^\\[]*)/;\n\t\t\tvar regOpenBracket = /\\[/;\n\t\t\tvar regCloseBracket = /\\-?](\\d*\\/*\\d*)?([\\>\\<\\-\\)]*)/;\n\t\t\tvar regChord = new RegExp(\n\t\t\t\tregPreBracket.source +\n\t\t\t\tregOpenBracket.source +\n\t\t\t\t\"(?:\" + regOptionalNote.source + \"\\\\s*){1,8}\" +\n\t\t\t\tregCloseBracket.source +\n\t\t\t\tregSpace.source\n\t\t\t);\n\t\t\tmatch = note.match(regChord);\n\t\t\tif (match) {\n\t\t\t\tvar beforeChordLen = match[1].length + 1; // text before + '['\n\t\t\t\tvar chordBody = note.slice(match[1].length + 1, note.lastIndexOf(\"]\"));\n\t\t\t\t// Collect notes inside chord\n\t\t\t\tvar chordNotes = [];\n\t\t\t\tvar regNoteWithSpace = new RegExp(regOptionalNote.source + \"\\\\s*\", \"g\");\n\t\t\t\tfor (const m of chordBody.matchAll(regNoteWithSpace)) {\n\t\t\t\t\tlet noteText = m[0].trim();\n\t\t\t\t\tif (noteText !== \"\") {\n\t\t\t\t\t\tchordNotes.push({ text: noteText, index: m.index });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (index >= chordNotes.length) {\n\t\t\t\t\tthrow new Error(\"Chord index out of range for chord: \" + note);\n\t\t\t\t}\n\t\t\t\tvar chosen = chordNotes[index];\n\t\t\t\t// Preserve duration and tie\n\t\t\t\tlet mDurTie = chosen.text.match(/^(.+?)(\\d+\\/?\\d*)?(-)?$/);\n\t\t\t\tlet pitchPart = mDurTie ? mDurTie[1] : chosen.text;\n\t\t\t\tlet durationPart = mDurTie && mDurTie[2] ? mDurTie[2] : \"\";\n\t\t\t\tlet tiePart = mDurTie && mDurTie[3] ? mDurTie[3] : \"\";\n\t\t\t\t// Replace note keeping duration and tie\n\t\t\t\tnewPitch = newPitch + durationPart + tiePart;\n\t\t\t\tstart += beforeChordLen + chosen.index;\n\t\t\t\tend = start + chosen.text.length;\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tstart: start,\n\t\t\tend: end,\n\t\t\tnote: newPitch\n\t\t};\n\t}\n\n\tfunction replaceGrace(abc, start, end, newGrace, index) {\n\t\tvar note = abc.substring(start, end)\n\t\t// I don't know how to capture more than one note, so I'm separating them. There is a limit of the number of notes in a chord depending on the repeats I have here, but it is unlikely to happen in real music.\n\t\tvar regOpenBrace = /\\{/\n\t\tvar regCloseBrace = /\\}/\n\t\tvar regPreBrace = /([^\\{]*)/\n\t\tvar regPreNote = /(\\/*)/\n\t\tvar match = note.match(new RegExp(regPreBrace.source + regOpenBrace.source + regPreNote.source + regOptionalNote.source +\n\t\t\tregPreNote.source + regOptionalNote.source + regPreNote.source + regOptionalNote.source + regPreNote.source + regOptionalNote.source +\n\t\t\tregPreNote.source + regOptionalNote.source + regPreNote.source + regOptionalNote.source + regPreNote.source + regOptionalNote.source +\n\t\t\tregPreNote.source + regOptionalNote.source + regCloseBrace.source))\n\t\tif (match) {\n\t\t\t// This will match all notes inside a grace symbol\n\t\t\t// Get the number of chars used by the previous graces\n\t\t\tvar count = 1 + match[1].length // one character for the open brace, and whatever comes before the brace\n\t\t\tfor (var i = 0; i < index; i++) { // index is the iteration through the chord. This function gets called for each one.\n\t\t\t\tif (match[i * 3 + 2])\n\t\t\t\t\tcount += match[i * 3 + 2].length\n\t\t\t\tif (match[i * 3 + 3])\n\t\t\t\t\tcount += match[i * 3 + 3].length\n\t\t\t\tif (match[i * 3 + 4])\n\t\t\t\t\tcount += match[i * 3 + 4].length\n\t\t\t\tif (match[i * 3 + 5])\n\t\t\t\t\tcount += match[i * 3 + 5].length\n\t\t\t}\n\t\t\tif (match[index * 3 + 2])\n\t\t\t\tcount += match[i * 3 + 2].length\n\t\t\tstart += count\n\t\t\tvar endLen = match[index * 3 + 3] ? match[index * 3 + 3].length : 0\n\t\t\tendLen += match[index * 3 + 4] ? match[index * 3 + 4].length : 0\n\t\t\tendLen += match[index * 3 + 5] ? match[index * 3 + 5].length : 0\n\n\t\t\tend = start + endLen\n\t\t}\n\t\treturn { start: start, end: end, note: newGrace }\n\t}\n\n\tfunction replaceChord(abc, start, end, newChord) {\n\t\t// Isolate the chord and just replace that\n\t\tvar match = abc.substring(start, end).match(/([^\"]+)?(\".+\")+/)\n\t\tif (match[1])\n\t\t\tstart += match[1].length\n\t\tend = start + match[2].length\n\t\t// leave the quote in, so skip one more\n\t\treturn { start: start + 1, end: end - 1, note: newChord }\n\t}\n\n\tfunction calcAdjustment(thisAccidental, keyAccidental, measureAccidental) {\n\t\tif (!thisAccidental && measureAccidental) {\n\t\t\t// There was no accidental on this note, but there was earlier in the measure, so we'll use that\n\t\t\tthisAccidental = measureAccidental\n\t\t}\n\t\tif (!thisAccidental)\n\t\t\treturn 0; // there is no deviation from the key.\n\n\t\tswitch (keyAccidental) {\n\t\t\tcase undefined:\n\t\t\t\tswitch (thisAccidental) {\n\t\t\t\t\tcase '__': return -2;\n\t\t\t\t\tcase '_': return -1;\n\t\t\t\t\tcase '=': return 0;\n\t\t\t\t\tcase '^': return 1;\n\t\t\t\t\tcase '^^': return 2;\n\t\t\t\t\tdefault: return 0; // this should never happen\n\t\t\t\t}\n\t\t\tcase '_':\n\t\t\t\tswitch (thisAccidental) {\n\t\t\t\t\tcase '__': return -1;\n\t\t\t\t\tcase '_': return 0;\n\t\t\t\t\tcase '=': return 1;\n\t\t\t\t\tcase '^': return 2;\n\t\t\t\t\tcase '^^': return 3;\n\t\t\t\t\tdefault: return 0; // this should never happen\n\t\t\t\t}\n\t\t\tcase '^':\n\t\t\t\tswitch (thisAccidental) {\n\t\t\t\t\tcase '__': return -3;\n\t\t\t\t\tcase '_': return -2;\n\t\t\t\t\tcase '=': return -1;\n\t\t\t\t\tcase '^': return 0;\n\t\t\t\t\tcase '^^': return 1;\n\t\t\t\t\tdefault: return 0; // this should never happen\n\t\t\t\t}\n\t\t}\n\t\treturn 0// this should never happen\n\t}\n})();\n\nmodule.exports = strTranspose;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N0ci9vdXRwdXQuanMiLCJtYXBwaW5ncyI6IkFBQUEscUJBQXFCLG1CQUFPLENBQUMseUZBQTBCO0FBQ3ZELE1BQU0sNENBQTRDLEVBQUUsbUJBQU8sQ0FBQyx1RkFBeUI7QUFDckYseUJBQXlCLG1CQUFPLENBQUMseUZBQTBCOztBQUUzRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxjQUFjLG9CQUFvQjtBQUNsQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLGNBQWMsb0JBQW9CO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxrQkFBa0IsMEJBQTBCO0FBQzVDO0FBQ0E7QUFDQSxvQkFBb0IsbUJBQW1CO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywrQ0FBK0M7QUFDakY7QUFDQSxtQkFBbUIsbURBQW1EO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG1CQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLDRCQUE0QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBO0FBQ0Esb0JBQW9CLHFCQUFxQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVCQUF1QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMEJBQTBCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw0QkFBNEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEIsdUJBQXVCO0FBQ3ZCLHNCQUFzQjtBQUN0QixzQkFBc0I7QUFDdEIsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdDQUFnQztBQUNoQywrQkFBK0I7QUFDL0IsOEJBQThCO0FBQzlCO0FBQ0Esc0NBQXNDO0FBQ3RDLDRDQUE0QztBQUM1Qyw2Q0FBNkM7QUFDN0MsOENBQThDO0FBQzlDLCtDQUErQztBQUMvQztBQUNBO0FBQ0E7O0FBRUEsV0FBVztBQUNYOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsSUFBSTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdDQUFnQztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4Qix5QkFBeUI7QUFDekIsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixXQUFXLE9BQU87QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvc3RyL291dHB1dC5qcz9kMDE3Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBrZXlBY2NpZGVudGFscyA9IHJlcXVpcmUoXCIuLi9jb25zdC9rZXktYWNjaWRlbnRhbHNcIik7XG52YXIgeyByZWxhdGl2ZU1ham9yLCB0cmFuc3Bvc2VLZXksIHJlbGF0aXZlTW9kZSB9ID0gcmVxdWlyZShcIi4uL2NvbnN0L3JlbGF0aXZlLW1ham9yXCIpO1xudmFyIHRyYW5zcG9zZUNob3JkTmFtZSA9IHJlcXVpcmUoXCIuLi9wYXJzZS90cmFuc3Bvc2UtY2hvcmRcIilcblxudmFyIHN0clRyYW5zcG9zZTtcblxuKGZ1bmN0aW9uICgpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHN0clRyYW5zcG9zZSA9IGZ1bmN0aW9uIChhYmMsIGFiY1R1bmUsIHN0ZXBzKSB7XG5cdFx0aWYgKGFiY1R1bmUgPT09IFwiVEVTVFwiKSAvLyBCYWNrZG9vciB3YXkgdG8gZ2V0IGVudHJ5IHBvaW50cyBmb3IgdW5pdCB0ZXN0c1xuXHRcdFx0cmV0dXJuIHsga2V5QWNjaWRlbnRhbHM6IGtleUFjY2lkZW50YWxzLCByZWxhdGl2ZU1ham9yOiByZWxhdGl2ZU1ham9yLCB0cmFuc3Bvc2VLZXk6IHRyYW5zcG9zZUtleSwgcmVsYXRpdmVNb2RlOiByZWxhdGl2ZU1vZGUsIHRyYW5zcG9zZUNob3JkTmFtZTogdHJhbnNwb3NlQ2hvcmROYW1lfVxuXHRcdHN0ZXBzID0gcGFyc2VJbnQoc3RlcHMsIDEwKVxuXHRcdHZhciBjaGFuZ2VzID0gW107XG5cdFx0dmFyIGk7XG5cdFx0Zm9yIChpID0gMDsgaSA8IGFiY1R1bmUubGVuZ3RoOyBpKyspXG5cdFx0XHRjaGFuZ2VzID0gY2hhbmdlcy5jb25jYXQodHJhbnNwb3NlT25lVHVuZShhYmMsIGFiY1R1bmVbaV0sIHN0ZXBzKSlcblxuXHRcdC8vIFJldmVyc2Ugc29ydCBzbyB0aGF0IHdlIGFyZSByZXBsYWNpbmcgc3RyaW5ncyBmcm9tIHRoZSBlbmQgdG8gdGhlIGJlZ2lubmluZyBzbyB0aGF0IHRoZSBpbmRleGVzIGFyZW4ndCBpbnZhbGlkYXRlZCBhcyB3ZSBnby5cblx0XHQvLyAoQmVjYXVzZSB2b2ljZXMgY2FuIGJlIHdyaXR0ZW4gaW4gZGlmZmVyZW50IHdheXMgd2UgY2FuJ3QgY291bnQgb24gdGhlIG5vdGVzIGJlaW5nIGVuY291bnRlcmVkIGluIHRoZSBvcmRlciB0aGV5IGFwcGVhciBpbiB0aGUgc3RyaW5nLilcblx0XHRjaGFuZ2VzID0gY2hhbmdlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG5cdFx0XHRyZXR1cm4gYi5zdGFydCAtIGEuc3RhcnRcblx0XHR9KVxuXHRcdHZhciBvdXRwdXQgPSBhYmMuc3BsaXQoJycpXG5cdFx0Zm9yIChpID0gMDsgaSA8IGNoYW5nZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBjaCA9IGNoYW5nZXNbaV1cblx0XHRcdG91dHB1dC5zcGxpY2UoY2guc3RhcnQsIGNoLmVuZCAtIGNoLnN0YXJ0LCBjaC5ub3RlKVxuXHRcdH1cblx0XHRyZXR1cm4gb3V0cHV0LmpvaW4oJycpXG5cdH1cblxuXHRmdW5jdGlvbiB0cmFuc3Bvc2VPbmVUdW5lKGFiYywgYWJjVHVuZSwgc3RlcHMpIHtcblx0XHR2YXIgY2hhbmdlcyA9IFtdXG5cblx0XHQvLyBEb24ndCB0cmFuc3Bvc2UgYmFncGlwZSBtdXNpYyAtIHRoYXQgaXMgYSBzcGVjaWFsIGNhc2UgYW5kIGlzIGFsd2F5cyBhIHBhcnRpY3VsYXIga2V5XG5cdFx0dmFyIGtleSA9IGFiY1R1bmUuZ2V0S2V5U2lnbmF0dXJlKClcblx0XHRpZiAoa2V5LnJvb3QgPT09ICdIcCcgfHwga2V5LnJvb3QgPT09IFwiSFBcIilcblx0XHRcdHJldHVybiBjaGFuZ2VzO1xuXG5cdFx0Y2hhbmdlcyA9IGNoYW5nZXMuY29uY2F0KGNoYW5nZUFsbEtleVNpZ3MoYWJjLCBzdGVwcykpXG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFiY1R1bmUubGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBzdGF2ZXMgPSBhYmNUdW5lLmxpbmVzW2ldLnN0YWZmXG5cdFx0XHRpZiAoc3RhdmVzKSB7XG5cdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgc3RhdmVzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdFx0dmFyIHN0YWZmID0gc3RhdmVzW2pdXG5cdFx0XHRcdFx0aWYgKHN0YWZmLmNsZWYudHlwZSAhPT0gXCJwZXJjXCIpXG5cdFx0XHRcdFx0XHRjaGFuZ2VzID0gY2hhbmdlcy5jb25jYXQodHJhbnNwb3NlVm9pY2VzKGFiYywgc3RhZmYudm9pY2VzLCBzdGFmZi5rZXksIHN0ZXBzKSlcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gY2hhbmdlc1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hhbmdlQWxsS2V5U2lncyhhYmMsIHN0ZXBzKSB7XG5cdFx0dmFyIGNoYW5nZXMgPSBbXTtcblx0XHR2YXIgYXJyID0gYWJjLnNwbGl0KFwiSzpcIilcblx0XHQvLyBub3cgZWFjaCBsaW5lIGV4Y2VwdCB0aGUgZmlyc3Qgb25lIHdpbGwgc3RhcnQgd2l0aCB3aGF0ZXZlciBpcyByaWdodCBhZnRlciBcIks6XCJcblx0XHR2YXIgY291bnQgPSBhcnJbMF0ubGVuZ3RoXG5cdFx0Zm9yICh2YXIgaSA9IDE7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBzZWdtZW50ID0gYXJyW2ldXG5cdFx0XHR2YXIgbWF0Y2ggPSBzZWdtZW50Lm1hdGNoKC9eKCAqKShbQS1HXSkoWyNiXT8pKCA/KShcXHcqKS8pXG5cdFx0XHRpZiAobWF0Y2gpIHtcblx0XHRcdFx0dmFyIHN0YXJ0ID0gY291bnQgKyAyICsgbWF0Y2hbMV0ubGVuZ3RoIC8vIG1vdmUgcGFzdCB0aGUgJ0s6JyBhbmQgb3B0aW9uYWwgd2hpdGUgc3BhY2Vcblx0XHRcdFx0dmFyIGtleSA9IG1hdGNoWzJdICsgbWF0Y2hbM10gKyBtYXRjaFs0XSArIG1hdGNoWzVdIC8vIGtleSBuYW1lLCBhY2NpZGVudGFsLCBvcHRpb25hbCBzcGFjZSwgYW5kIG1vZGVcblx0XHRcdFx0dmFyIGRlc3RpbmF0aW9uS2V5ID0gbmV3S2V5KHsgcm9vdDogbWF0Y2hbMl0sIGFjYzogbWF0Y2hbM10sIG1vZGU6IG1hdGNoWzVdIH0sIHN0ZXBzKVxuXHRcdFx0XHR2YXIgZGVzdCA9IGRlc3RpbmF0aW9uS2V5LnJvb3QgKyBkZXN0aW5hdGlvbktleS5hY2MgKyBtYXRjaFs0XSArIGRlc3RpbmF0aW9uS2V5Lm1vZGVcblx0XHRcdFx0Y2hhbmdlcy5wdXNoKHsgc3RhcnQ6IHN0YXJ0LCBlbmQ6IHN0YXJ0ICsga2V5Lmxlbmd0aCwgbm90ZTogZGVzdCB9KVxuXHRcdFx0fVxuXHRcdFx0Y291bnQgKz0gc2VnbWVudC5sZW5ndGggKyAyXG5cdFx0fVxuXHRcdHJldHVybiBjaGFuZ2VzXG5cdH1cblxuXHRmdW5jdGlvbiB0cmFuc3Bvc2VWb2ljZXMoYWJjLCB2b2ljZXMsIGtleSwgc3RlcHMpIHtcblx0XHR2YXIgY2hhbmdlcyA9IFtdO1xuXHRcdHZhciBkZXN0aW5hdGlvbktleSA9IG5ld0tleShrZXksIHN0ZXBzKVxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdm9pY2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjaGFuZ2VzID0gY2hhbmdlcy5jb25jYXQodHJhbnNwb3NlVm9pY2UoYWJjLCB2b2ljZXNbaV0sIGtleS5yb290LCBjcmVhdGVLZXlBY2NpZGVudGFscyhrZXkpLCBkZXN0aW5hdGlvbktleSwgc3RlcHMpKVxuXHRcdH1cblx0XHRyZXR1cm4gY2hhbmdlc1xuXHR9XG5cblx0ZnVuY3Rpb24gY3JlYXRlS2V5QWNjaWRlbnRhbHMoa2V5KSB7XG5cdFx0dmFyIHJldCA9IHt9XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBrZXkuYWNjaWRlbnRhbHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhY2MgPSBrZXkuYWNjaWRlbnRhbHNbaV07XG5cdFx0XHRpZiAoYWNjLmFjYyA9PT0gJ2ZsYXQnKVxuXHRcdFx0XHRyZXRbYWNjLm5vdGUudG9VcHBlckNhc2UoKV0gPSAnXydcblx0XHRcdGVsc2UgaWYgKGFjYy5hY2MgPT09ICdzaGFycCcpXG5cdFx0XHRcdHJldFthY2Mubm90ZS50b1VwcGVyQ2FzZSgpXSA9ICdeJ1xuXHRcdH1cblx0XHRyZXR1cm4gcmV0XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRMZXR0ZXJEaXN0YW5jZShkZXN0aW5hdGlvbktleSwga2V5Um9vdCwgc3RlcHMpIHtcblx0XHR2YXIgbGV0dGVyRGlzdGFuY2UgPSBsZXR0ZXJzLmluZGV4T2YoZGVzdGluYXRpb25LZXkucm9vdCkgLSBsZXR0ZXJzLmluZGV4T2Yoa2V5Um9vdClcblx0XHRpZiAoa2V5Um9vdCA9PT0gXCJub25lXCIpXG5cdFx0XHRsZXR0ZXJEaXN0YW5jZSA9IGxldHRlcnMuaW5kZXhPZihkZXN0aW5hdGlvbktleS5yb290KVxuXHRcdGlmIChsZXR0ZXJEaXN0YW5jZSA9PT0gMCkge1xuXHRcdFx0Ly8gVGhpcyBjb3VsZCBlaXRoZXIgYmUgYSBoYWxmIHN0ZXAgKGxpa2UgRWIgPT4gRSkgb3IgYWxtb3N0IGFuIG9jdGF2ZSAobGlrZSBFID0+IEViKVxuXHRcdFx0aWYgKHN0ZXBzID4gMikgLy8gSWYgaXQgaXMgYSBsYXJnZSBsZWFwLCB0aGVuIHdlIGFyZSBnb2luZyB1cCBhbiBvY3RhdmVcblx0XHRcdFx0bGV0dGVyRGlzdGFuY2UgKz0gN1xuXHRcdFx0ZWxzZSBpZiAoc3RlcHMgPT09IC0xMikgLy8gSWYgaXQgaXMgYSBsYXJnZSBsZWFwLCB0aGVuIHdlIGFyZSBnb2luZyBkb3duIGFuIG9jdGF2ZVx0XG5cdFx0XHQgXHRsZXR0ZXJEaXN0YW5jZSAtPSA3XG5cdFx0fSBlbHNlIGlmIChzdGVwcyA+IDAgJiYgbGV0dGVyRGlzdGFuY2UgPCAwKSBcblx0XHRcdGxldHRlckRpc3RhbmNlICs9IDdcblx0XHRlbHNlIGlmIChzdGVwcyA8IDAgJiYgbGV0dGVyRGlzdGFuY2UgPiAwKSBcblx0XHRcdGxldHRlckRpc3RhbmNlIC09IDdcblxuXHRcdGlmIChzdGVwcyA+IDEyKVxuXHRcdFx0bGV0dGVyRGlzdGFuY2UgKz0gN1xuXHRcdGVsc2UgaWYgKHN0ZXBzIDwgLTEyKVxuXHRcdFx0bGV0dGVyRGlzdGFuY2UgLT0gN1xuXG5cdFx0cmV0dXJuIGxldHRlckRpc3RhbmNlXG5cdH1cblxuXHRmdW5jdGlvbiB0cmFuc3Bvc2VWb2ljZShhYmMsIHZvaWNlLCBrZXlSb290LCBrZXlBY2NpZGVudGFscywgZGVzdGluYXRpb25LZXksIHN0ZXBzKSB7XG5cdFx0dmFyIGNoYW5nZXMgPSBbXVxuXHRcdHZhciBsZXR0ZXJEaXN0YW5jZSA9IHNldExldHRlckRpc3RhbmNlKGRlc3RpbmF0aW9uS2V5LCBrZXlSb290LCBzdGVwcylcblxuXHRcdHZhciBtZWFzdXJlQWNjaWRlbnRhbHMgPSB7fVxuXHRcdHZhciB0cmFuc3Bvc2VkTWVhc3VyZUFjY2lkZW50YWxzID0ge31cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHZvaWNlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZWwgPSB2b2ljZVtpXTtcblx0XHRcdGlmIChlbC5jaG9yZCkge1xuXHRcdFx0XHRmb3IgKHZhciBjID0gMDsgYyA8IGVsLmNob3JkLmxlbmd0aDsgYysrKSB7XG5cdFx0XHRcdFx0dmFyIGNoID0gZWwuY2hvcmRbY11cblx0XHRcdFx0XHRpZiAoY2gucG9zaXRpb24gPT09ICdkZWZhdWx0Jykge1xuXHRcdFx0XHRcdFx0dmFyIHByZWZlcnNGbGF0cyA9IGRlc3RpbmF0aW9uS2V5LmFjY2lkZW50YWxzLmxlbmd0aCAmJiBkZXN0aW5hdGlvbktleS5hY2NpZGVudGFsc1swXS5hY2MgPT09ICdmbGF0J1xuXHRcdFx0XHRcdFx0dmFyIG5ld0Nob3JkID0gdHJhbnNwb3NlQ2hvcmROYW1lKGNoLm5hbWUsIHN0ZXBzLCBwcmVmZXJzRmxhdHMsIHRydWUpXG5cdFx0XHRcdFx0XHRuZXdDaG9yZCA9IG5ld0Nob3JkLnJlcGxhY2UoL+KZrS9nLCBcImJcIikucmVwbGFjZSgv4pmvL2csIFwiI1wiKVxuXHRcdFx0XHRcdFx0aWYgKG5ld0Nob3JkICE9PSBjaC5uYW1lKSAvLyBJZiB3ZSBkaWRuJ3QgcmVjb2duaXplIHRoZSBjaG9yZCB0aGUgaW5wdXQgaXMgcmV0dXJuZWQgdW5jaGFuZ2VkIGFuZCB0aGVyZSBpcyBub3RoaW5nIHRvIHJlcGxhY2Vcblx0XHRcdFx0XHRcdFx0Y2hhbmdlcy5wdXNoKHJlcGxhY2VDaG9yZChhYmMsIGVsLnN0YXJ0Q2hhciwgZWwuZW5kQ2hhciwgbmV3Q2hvcmQpKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKGVsLmVsX3R5cGUgPT09ICdub3RlJyAmJiBlbC5waXRjaGVzKSB7XG5cdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgZWwucGl0Y2hlcy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdHZhciBub3RlID0gcGFyc2VOb3RlKGVsLnBpdGNoZXNbal0ubmFtZSwga2V5Um9vdCwga2V5QWNjaWRlbnRhbHMsIG1lYXN1cmVBY2NpZGVudGFscylcblx0XHRcdFx0XHRpZiAobm90ZS5hY2MpXG5cdFx0XHRcdFx0XHRtZWFzdXJlQWNjaWRlbnRhbHNbbm90ZS5uYW1lLnRvVXBwZXJDYXNlKCldID0gbm90ZS5hY2Ncblx0XHRcdFx0XHR2YXIgbmV3UGl0Y2ggPSB0cmFuc3Bvc2VQaXRjaChub3RlLCBkZXN0aW5hdGlvbktleSwgbGV0dGVyRGlzdGFuY2UsIHRyYW5zcG9zZWRNZWFzdXJlQWNjaWRlbnRhbHMpXG5cdFx0XHRcdFx0aWYgKG5ld1BpdGNoLmFjYylcblx0XHRcdFx0XHRcdHRyYW5zcG9zZWRNZWFzdXJlQWNjaWRlbnRhbHNbbmV3UGl0Y2gudXBwZXJdID0gbmV3UGl0Y2guYWNjXG5cdFx0XHRcdFx0Y2hhbmdlcy5wdXNoKHJlcGxhY2VOb3RlKGFiYywgZWwuc3RhcnRDaGFyLCBlbC5lbmRDaGFyLCBuZXdQaXRjaC5hY2MgKyBuZXdQaXRjaC5uYW1lLCBqKSlcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZWwuZ3JhY2Vub3Rlcykge1xuXHRcdFx0XHRcdGZvciAodmFyIGcgPSAwOyBnIDwgZWwuZ3JhY2Vub3Rlcy5sZW5ndGg7IGcrKykge1xuXHRcdFx0XHRcdFx0dmFyIGdyYWNlID0gcGFyc2VOb3RlKGVsLmdyYWNlbm90ZXNbZ10ubmFtZSwga2V5Um9vdCwga2V5QWNjaWRlbnRhbHMsIG1lYXN1cmVBY2NpZGVudGFscylcblx0XHRcdFx0XHRcdGlmIChncmFjZS5hY2MpXG5cdFx0XHRcdFx0XHRcdG1lYXN1cmVBY2NpZGVudGFsc1tncmFjZS5uYW1lLnRvVXBwZXJDYXNlKCldID0gZ3JhY2UuYWNjXG5cdFx0XHRcdFx0XHR2YXIgbmV3R3JhY2UgPSB0cmFuc3Bvc2VQaXRjaChncmFjZSwgZGVzdGluYXRpb25LZXksIGxldHRlckRpc3RhbmNlLCBtZWFzdXJlQWNjaWRlbnRhbHMpXG5cdFx0XHRcdFx0XHRpZiAobmV3R3JhY2UuYWNjKVxuXHRcdFx0XHRcdFx0XHR0cmFuc3Bvc2VkTWVhc3VyZUFjY2lkZW50YWxzW25ld0dyYWNlLnVwcGVyXSA9IG5ld0dyYWNlLmFjY1xuXHRcdFx0XHRcdFx0Y2hhbmdlcy5wdXNoKHJlcGxhY2VHcmFjZShhYmMsIGVsLnN0YXJ0Q2hhciwgZWwuZW5kQ2hhciwgbmV3R3JhY2UuYWNjICsgbmV3R3JhY2UubmFtZSwgZykpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKGVsLmVsX3R5cGUgPT09IFwiYmFyXCIpIHtcblx0XHRcdFx0bWVhc3VyZUFjY2lkZW50YWxzID0ge31cblx0XHRcdFx0dHJhbnNwb3NlZE1lYXN1cmVBY2NpZGVudGFscyA9IHt9XG5cdFx0XHR9IGVsc2UgaWYgKGVsLmVsX3R5cGUgPT09IFwia2V5U2lnbmF0dXJlXCIpIHtcblx0XHRcdFx0a2V5Um9vdCA9IGVsLnJvb3Rcblx0XHRcdFx0a2V5QWNjaWRlbnRhbHMgPSBjcmVhdGVLZXlBY2NpZGVudGFscyhlbClcblx0XHRcdFx0ZGVzdGluYXRpb25LZXkgPSBuZXdLZXkoZWwsIHN0ZXBzKVxuXHRcdFx0XHRsZXR0ZXJEaXN0YW5jZSA9IHNldExldHRlckRpc3RhbmNlKGRlc3RpbmF0aW9uS2V5LCBrZXlSb290LCBzdGVwcylcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGNoYW5nZXNcblx0fVxuXG5cdHZhciBsZXR0ZXJzID0gXCJDREVGR0FCXCJcblx0dmFyIG9jdGF2ZXMgPSBbXCIsLCwsXCIsIFwiLCwsXCIsIFwiLCxcIiwgXCIsXCIsIFwiXCIsIFwiJ1wiLCBcIicnXCIsIFwiJycnXCIsIFwiJycnJ1wiXVxuXG5cdGZ1bmN0aW9uIG5ld0tleShrZXksIHN0ZXBzKSB7XG5cdFx0aWYgKGtleS5yb290ID09PSBcIm5vbmVcIikge1xuXHRcdFx0cmV0dXJuIHsgcm9vdDogdHJhbnNwb3NlS2V5KFwiQ1wiLCBzdGVwcyksIG1vZGU6IFwiXCIsIGFjYzogXCJcIiwgYWNjaWRlbnRhbHM6IFtdIH1cblx0XHR9XG5cdFx0dmFyIG1ham9yID0gcmVsYXRpdmVNYWpvcihrZXkucm9vdCArIGtleS5hY2MgKyBrZXkubW9kZSlcblx0XHR2YXIgbmV3TWFqb3IgPSB0cmFuc3Bvc2VLZXkobWFqb3IsIHN0ZXBzKVxuXHRcdHZhciBuZXdNb2RlID0gcmVsYXRpdmVNb2RlKG5ld01ham9yLCBrZXkubW9kZSlcblx0XHR2YXIgYWNjID0ga2V5QWNjaWRlbnRhbHMobmV3TWFqb3IpXG5cdFx0cmV0dXJuIHsgcm9vdDogbmV3TW9kZVswXSwgbW9kZToga2V5Lm1vZGUsIGFjYzogbmV3TW9kZS5sZW5ndGggPiAxID8gbmV3TW9kZVsxXSA6ICcnLCBhY2NpZGVudGFsczogYWNjIH1cblx0fVxuXG5cdGZ1bmN0aW9uIHRyYW5zcG9zZVBpdGNoKG5vdGUsIGtleSwgbGV0dGVyRGlzdGFuY2UsIG1lYXN1cmVBY2NpZGVudGFscykge1xuXHRcdC8vIERlcGVuZGluZyBvbiB3aGF0IHRoZSBjdXJyZW50IG5vdGUgYW5kIG5ldyBub3RlIGFyZSwgdGhlIG9jdGF2ZSBtaWdodCBoYXZlIGNoYW5nZWRcblx0XHQvLyBUaGUgbGV0dGVyRGlzdGFuY2UgaXMgaG93IGZhciB0aGUgY2hhbmdlIGlzIHRvIHNlZSBpZiB3ZSBwYXNzZWQgXCJDXCIgd2hlbiB0cmFuc3Bvc2luZy5cblxuXHRcdHZhciBwaXRjaCA9IG5vdGUucGl0Y2hcblx0XHR2YXIgb3JpZ0Rpc3RGcm9tQyA9IGxldHRlcnMuaW5kZXhPZihub3RlLm5hbWUpXG5cdFx0dmFyIHJvb3QgPSBsZXR0ZXJzLmluZGV4T2Yoa2V5LnJvb3QpXG5cdFx0dmFyIGluZGV4ID0gKHJvb3QgKyBwaXRjaCkgJSA3XG5cdFx0Ly8gaWYgdGhlIG5vdGUgY3Jvc3NlcyBcImNcIiB0aGVuIHRoZSBvY3RhdmUgY2hhbmdlcywgc28gdGhhdCBpcyB0cnVlIG9mIFwiQlwiIHdoZW4gZ29pbmcgdXAgb25lIHN0ZXAsIFwiQVwiIGFuZCBcIkJcIiB3aGVuIGdvaW5nIHVwIHR3byBzdGVwcywgZXRjLiwgYW5kIHJldmVyc2Ugd2hlbiBnb2luZyBkb3duLlxuXHRcdHZhciBuZXdEaXN0RnJvbUMgPSBvcmlnRGlzdEZyb21DICsgbGV0dGVyRGlzdGFuY2Vcblx0XHR2YXIgb2N0ID0gbm90ZS5vY3Rcblx0XHR3aGlsZSAobmV3RGlzdEZyb21DID4gNikge1xuXHRcdFx0b2N0Kytcblx0XHRcdG5ld0Rpc3RGcm9tQyAtPSA3XG5cdFx0fVxuXHRcdHdoaWxlIChuZXdEaXN0RnJvbUMgPCAwKSB7XG5cdFx0XHRvY3QtLVxuXHRcdFx0bmV3RGlzdEZyb21DICs9IDdcblx0XHR9XG5cblx0XHR2YXIgbmFtZSA9IGxldHRlcnNbaW5kZXhdXG5cblx0XHR2YXIgYWNjID0gJyc7XG5cdFx0dmFyIGFkaiA9IG5vdGUuYWRqXG5cdFx0Ly8gdGhlIGFtb3VudCBvZiBhZGp1c3RtZW50IGRlcGVuZHMgb24gdGhlIGtleSAtIGlmIHRoZXJlIGlzIGEgc2hhcnAgaW4gdGhlIGtleSBzaWcsIHRoZW4gLTEgaXMgYSBuYXR1cmFsLCBpZiB0aGVyZSBpc24ndCwgdGhlbiAtMSBpcyBhIGZsYXQuXG5cdFx0dmFyIGtleUFjYyA9ICc9Jztcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGtleS5hY2NpZGVudGFscy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKGtleS5hY2NpZGVudGFsc1tpXS5ub3RlLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSkge1xuXHRcdFx0XHRhZGogPSBhZGogKyAoa2V5LmFjY2lkZW50YWxzW2ldLmFjYyA9PT0gJ2ZsYXQnID8gLTEgOiAxKVxuXHRcdFx0XHRrZXlBY2MgPSAoa2V5LmFjY2lkZW50YWxzW2ldLmFjYyA9PT0gJ2ZsYXQnID8gJ18nIDogJ14nKVxuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdFx0c3dpdGNoIChhZGopIHtcblx0XHRcdGNhc2UgLTI6IGFjYyA9IFwiX19cIjsgYnJlYWs7XG5cdFx0XHRjYXNlIC0xOiBhY2MgPSBcIl9cIjsgYnJlYWs7XG5cdFx0XHRjYXNlIDA6IGFjYyA9IFwiPVwiOyBicmVhaztcblx0XHRcdGNhc2UgMTogYWNjID0gXCJeXCI7IGJyZWFrO1xuXHRcdFx0Y2FzZSAyOiBhY2MgPSBcIl5eXCI7IGJyZWFrO1xuXHRcdFx0Y2FzZSAtMzpcblx0XHRcdFx0Ly8gVGhpcyByZXF1aXJlcyBhIHRyaXBsZSBmbGF0LCBzbyBidW1wIGRvd24gdGhlIHBpdGNoIGFuZCB0cnkgYWdhaW5cblx0XHRcdFx0dmFyIG5ld05vdGUgPSB7fVxuXHRcdFx0XHRuZXdOb3RlLnBpdGNoID0gbm90ZS5waXRjaCAtIDFcblx0XHRcdFx0bmV3Tm90ZS5vY3QgPSBub3RlLm9jdFxuXHRcdFx0XHRuZXdOb3RlLm5hbWUgPSBsZXR0ZXJzW2xldHRlcnMuaW5kZXhPZihub3RlLm5hbWUpIC0gMV1cblx0XHRcdFx0aWYgKCFuZXdOb3RlLm5hbWUpIHtcblx0XHRcdFx0XHRuZXdOb3RlLm5hbWUgPSBcIkJcIlxuXHRcdFx0XHRcdG5ld05vdGUub2N0LS1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobmV3Tm90ZS5uYW1lID09PSBcIkJcIiB8fCBuZXdOb3RlLm5hbWUgPT09IFwiRVwiKVxuXHRcdFx0XHRcdG5ld05vdGUuYWRqID0gbm90ZS5hZGogKyAxO1xuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0bmV3Tm90ZS5hZGogPSBub3RlLmFkaiArIDI7XG5cdFx0XHRcdHJldHVybiB0cmFuc3Bvc2VQaXRjaChuZXdOb3RlLCBrZXksIGxldHRlckRpc3RhbmNlICsgMSwgbWVhc3VyZUFjY2lkZW50YWxzKVxuXHRcdFx0Y2FzZSAzOlxuXHRcdFx0XHQvLyBUaGlzIHJlcXVpcmVzIGEgdHJpcGxlIHNoYXJwLCBzbyBidW1wIHVwIHRoZSBwaXRjaCBhbmQgdHJ5IGFnYWluXG5cdFx0XHRcdHZhciBuZXdOb3RlID0ge31cblx0XHRcdFx0bmV3Tm90ZS5waXRjaCA9IG5vdGUucGl0Y2ggKyAxXG5cdFx0XHRcdG5ld05vdGUub2N0ID0gbm90ZS5vY3Rcblx0XHRcdFx0bmV3Tm90ZS5uYW1lID0gbGV0dGVyc1tsZXR0ZXJzLmluZGV4T2Yobm90ZS5uYW1lKSArIDFdXG5cdFx0XHRcdGlmICghbmV3Tm90ZS5uYW1lKSB7XG5cdFx0XHRcdFx0bmV3Tm90ZS5uYW1lID0gXCJDXCJcblx0XHRcdFx0XHRuZXdOb3RlLm9jdCsrXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG5ld05vdGUubmFtZSA9PT0gXCJDXCIgfHwgbmV3Tm90ZS5uYW1lID09PSBcIkZcIilcblx0XHRcdFx0XHRuZXdOb3RlLmFkaiA9IG5vdGUuYWRqIC0gMTtcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdG5ld05vdGUuYWRqID0gbm90ZS5hZGogLSAyO1xuXHRcdFx0XHRyZXR1cm4gdHJhbnNwb3NlUGl0Y2gobmV3Tm90ZSwga2V5LCBsZXR0ZXJEaXN0YW5jZSArIDEsIG1lYXN1cmVBY2NpZGVudGFscylcblx0XHR9XG5cdFx0aWYgKChtZWFzdXJlQWNjaWRlbnRhbHNbbmFtZV0gPT09IGFjYyB8fCAoIW1lYXN1cmVBY2NpZGVudGFsc1tuYW1lXSAmJiBhY2MgPT09IGtleUFjYykpICYmICFub3RlLmNvdXJ0ZXN5KVxuXHRcdFx0YWNjID0gXCJcIlxuXG5cdFx0c3dpdGNoIChvY3QpIHtcblx0XHRcdGNhc2UgMDogbmFtZSA9IG5hbWUgKyBcIiwsLFwiOyBicmVhaztcblx0XHRcdGNhc2UgMTogbmFtZSA9IG5hbWUgKyBcIiwsXCI7IGJyZWFrO1xuXHRcdFx0Y2FzZSAyOiBuYW1lID0gbmFtZSArIFwiLFwiOyBicmVhaztcblx0XHRcdC8vIGNhc2UgMzogaXQgaXMgYWxyZWFkeSBjb3JyZWN0XG5cdFx0XHRjYXNlIDQ6IG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7IGJyZWFrO1xuXHRcdFx0Y2FzZSA1OiBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpICsgXCInXCI7IGJyZWFrO1xuXHRcdFx0Y2FzZSA2OiBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpICsgXCInJ1wiOyBicmVhaztcblx0XHRcdGNhc2UgNzogbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKSArIFwiJycnXCI7IGJyZWFrO1xuXHRcdFx0Y2FzZSA4OiBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpICsgXCInJycnXCI7IGJyZWFrO1xuXHRcdH1cblx0XHRpZiAob2N0ID4gNClcblx0XHRcdG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRyZXR1cm4geyBhY2M6IGFjYywgbmFtZTogbmFtZSwgdXBwZXI6IG5hbWUudG9VcHBlckNhc2UoKSB9XG5cdH1cblxuXHR2YXIgcmVnUGl0Y2ggPSAvKFtfXj1dKikoW0EtR2EtZ10pKFssJ10qKS9cblx0dmFyIHJlZ05vdGUgPSAvKFtfXj1dKltBLUdhLWddWywnXSopKFxcZCpcXC8qXFxkKikoW1xcPlxcPFxcLVxcKVxcLlxcc1xcXFxdKikvXG5cdHZhciByZWdPcHRpb25hbE5vdGUgPSAvKFtfXj1dKltBLUdhLWddWywnXSopPyhcXGQqXFwvKlxcZCopPyhbXFw+XFw8XFwtXFwpXSopPy9cblx0dmFyIHJlZ1NwYWNlID0gLyhcXHMqKSQvXG5cdHZhciByZWdPcHRpb25hbFNwYWNlID0gLyhcXHMqKS9cblxuXHQvLyBUaGlzIHRoZSByZWxhdGlvbnNoaXAgb2YgdGhlIG5vdGUgdG8gdGhlIHRvbmljIGFuZCBhbiBvY3RhdmUuIFNvIHdoYXQgaXMgcmV0dXJuZWQgaXMgYSBkaXN0YW5jZSBpbiBzdGVwcyBmcm9tIHRoZSB0b25pYyBhbmQgdGhlIGFtb3VudCBvZiBhZGp1c3RtZW50IGZyb21cblx0Ly8gYSBub3JtYWwgc2NhbGUuIFRoYXQgaXMgLSBpbiB0aGUga2V5IG9mIEQgYW4gRiMgaXMgdHdvIHN0ZXBzIGZyb20gdGhlIHRvbmljIGFuZCBubyBhZGp1c3RtZW50LiBBIEcjIGlzIHRocmVlIHN0ZXBzIGZyb20gdGhlIHRvbmljIGFuZCBvbmUgaGFsZi1zdGVwIGhpZ2hlci5cblx0Ly8gSSBkb24ndCB0aGluayB0aGVyZSBpcyBhbnkgYWRqdXN0bWVudCBuZWVkZWQgZm9yIG1pbm9yIGtleXMgc2luY2UgdGhlIGFkanVzdG1lbnQgaXMgYmFzZWQgb24gdGhlIGtleSBzaWduYXR1cmUgYW5kIHRoZSBhY2NpZGVudGFscy5cblx0ZnVuY3Rpb24gcGFyc2VOb3RlKG5vdGUsIGtleVJvb3QsIGtleUFjY2lkZW50YWxzLCBtZWFzdXJlQWNjaWRlbnRhbHMpIHtcblx0XHR2YXIgcm9vdCA9IGtleVJvb3QgPT09IFwibm9uZVwiID8gMCA6IGxldHRlcnMuaW5kZXhPZihrZXlSb290KVxuXHRcdHZhciByZWcgPSBub3RlLm1hdGNoKHJlZ1BpdGNoKVxuXHRcdC8vIHJlZ1sxXSA6IFwiX19cIiwgXCJfXCIsIFwiXCIsIFwiPVwiLCBcIl5cIiwgb3IgXCJeXlwiXG5cdFx0Ly8gcmVnWzJdIDogQS1HIGEtZ1xuXHRcdC8vIHJlZ1szXSA6IGNvbW1hcyBvciBhcG9zdHJvcGhlc1xuXHRcdHZhciBuYW1lID0gcmVnWzJdLnRvVXBwZXJDYXNlKClcblx0XHR2YXIgcG9zID0gbGV0dGVycy5pbmRleE9mKG5hbWUpIC0gcm9vdDtcblx0XHRpZiAocG9zIDwgMCkgcG9zICs9IDdcblx0XHR2YXIgb2N0ID0gb2N0YXZlcy5pbmRleE9mKHJlZ1szXSlcblx0XHRpZiAobmFtZSA9PT0gcmVnWzJdKSAvLyBTZWUgaWYgaXQgaXMgYSBjYXBpdGFsIGxldHRlciBhbmQgc3VidHJhY3QgYW4gb2N0YXZlIGlmIHNvLlxuXHRcdFx0b2N0LS07XG5cdFx0dmFyIGN1cnJlbnRBY2MgPSBtZWFzdXJlQWNjaWRlbnRhbHNbbmFtZV0gfHwga2V5QWNjaWRlbnRhbHNbbmFtZV0gfHwgXCI9XCIgLy8gIHVzZSB0aGUga2V5IGFjY2lkZW50YWxzIGlmIHRoZXkgZXhpc3QsIGJ1dCBvdmVycmlkZSB3aXRoIHRoZSBtZWFzdXJlIGFjY2lkZW50YWxzLCBhbmQgaWYgbmVpdGhlciBvZiB0aGVtIGV4aXN0LCB1c2UgYSBuYXR1cmFsLlxuXHRcdHJldHVybiB7IGFjYzogcmVnWzFdLCBuYW1lOiBuYW1lLCBwaXRjaDogcG9zLCBvY3Q6IG9jdCwgYWRqOiBjYWxjQWRqdXN0bWVudChyZWdbMV0sIGtleUFjY2lkZW50YWxzW25hbWVdLCBtZWFzdXJlQWNjaWRlbnRhbHNbbmFtZV0pLCBjb3VydGVzeTogcmVnWzFdID09PSBjdXJyZW50QWNjIH1cblx0fVxuXG5cdGZ1bmN0aW9uIHJlcGxhY2VOb3RlKGFiYywgc3RhcnQsIGVuZCwgbmV3UGl0Y2gsIGluZGV4KSB7XG5cdFx0dmFyIG5vdGUgPSBhYmMuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpO1xuXHRcdC8vIFRyeSBzaW5nbGUgbm90ZSBmaXJzdFxuXHRcdHZhciBtYXRjaCA9IG5vdGUubWF0Y2gobmV3IFJlZ0V4cChyZWdOb3RlLnNvdXJjZSArIHJlZ1NwYWNlLnNvdXJjZSkpO1xuXHRcdGlmIChtYXRjaCkge1xuXHRcdFx0dmFyIG5vdGVMZW4gPSBtYXRjaFsxXS5sZW5ndGg7XG5cdFx0XHR2YXIgdHJhaWxpbmdMZW4gPSBtYXRjaFsyXS5sZW5ndGggKyBtYXRjaFszXS5sZW5ndGggKyBtYXRjaFs0XS5sZW5ndGg7XG5cdFx0XHR2YXIgbGVhZGluZ0xlbiA9IGVuZCAtIHN0YXJ0IC0gbm90ZUxlbiAtIHRyYWlsaW5nTGVuO1xuXHRcdFx0c3RhcnQgKz0gbGVhZGluZ0xlbjtcblx0XHRcdGVuZCAtPSB0cmFpbGluZ0xlbjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gTWF0Y2ggY2hvcmRcblx0XHRcdHZhciByZWdQcmVCcmFja2V0ID0gLyhbXlxcW10qKS87XG5cdFx0XHR2YXIgcmVnT3BlbkJyYWNrZXQgPSAvXFxbLztcblx0XHRcdHZhciByZWdDbG9zZUJyYWNrZXQgPSAvXFwtP10oXFxkKlxcLypcXGQqKT8oW1xcPlxcPFxcLVxcKV0qKS87XG5cdFx0XHR2YXIgcmVnQ2hvcmQgPSBuZXcgUmVnRXhwKFxuXHRcdFx0XHRyZWdQcmVCcmFja2V0LnNvdXJjZSArXG5cdFx0XHRcdHJlZ09wZW5CcmFja2V0LnNvdXJjZSArXG5cdFx0XHRcdFwiKD86XCIgKyByZWdPcHRpb25hbE5vdGUuc291cmNlICsgXCJcXFxccyopezEsOH1cIiArXG5cdFx0XHRcdHJlZ0Nsb3NlQnJhY2tldC5zb3VyY2UgK1xuXHRcdFx0XHRyZWdTcGFjZS5zb3VyY2Vcblx0XHRcdCk7XG5cdFx0XHRtYXRjaCA9IG5vdGUubWF0Y2gocmVnQ2hvcmQpO1xuXHRcdFx0aWYgKG1hdGNoKSB7XG5cdFx0XHRcdHZhciBiZWZvcmVDaG9yZExlbiA9IG1hdGNoWzFdLmxlbmd0aCArIDE7IC8vIHRleHQgYmVmb3JlICsgJ1snXG5cdFx0XHRcdHZhciBjaG9yZEJvZHkgPSBub3RlLnNsaWNlKG1hdGNoWzFdLmxlbmd0aCArIDEsIG5vdGUubGFzdEluZGV4T2YoXCJdXCIpKTtcblx0XHRcdFx0Ly8gQ29sbGVjdCBub3RlcyBpbnNpZGUgY2hvcmRcblx0XHRcdFx0dmFyIGNob3JkTm90ZXMgPSBbXTtcblx0XHRcdFx0dmFyIHJlZ05vdGVXaXRoU3BhY2UgPSBuZXcgUmVnRXhwKHJlZ09wdGlvbmFsTm90ZS5zb3VyY2UgKyBcIlxcXFxzKlwiLCBcImdcIik7XG5cdFx0XHRcdGZvciAoY29uc3QgbSBvZiBjaG9yZEJvZHkubWF0Y2hBbGwocmVnTm90ZVdpdGhTcGFjZSkpIHtcblx0XHRcdFx0XHRsZXQgbm90ZVRleHQgPSBtWzBdLnRyaW0oKTtcblx0XHRcdFx0XHRpZiAobm90ZVRleHQgIT09IFwiXCIpIHtcblx0XHRcdFx0XHRcdGNob3JkTm90ZXMucHVzaCh7IHRleHQ6IG5vdGVUZXh0LCBpbmRleDogbS5pbmRleCB9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGluZGV4ID49IGNob3JkTm90ZXMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiQ2hvcmQgaW5kZXggb3V0IG9mIHJhbmdlIGZvciBjaG9yZDogXCIgKyBub3RlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgY2hvc2VuID0gY2hvcmROb3Rlc1tpbmRleF07XG5cdFx0XHRcdC8vIFByZXNlcnZlIGR1cmF0aW9uIGFuZCB0aWVcblx0XHRcdFx0bGV0IG1EdXJUaWUgPSBjaG9zZW4udGV4dC5tYXRjaCgvXiguKz8pKFxcZCtcXC8/XFxkKik/KC0pPyQvKTtcblx0XHRcdFx0bGV0IHBpdGNoUGFydCA9IG1EdXJUaWUgPyBtRHVyVGllWzFdIDogY2hvc2VuLnRleHQ7XG5cdFx0XHRcdGxldCBkdXJhdGlvblBhcnQgPSBtRHVyVGllICYmIG1EdXJUaWVbMl0gPyBtRHVyVGllWzJdIDogXCJcIjtcblx0XHRcdFx0bGV0IHRpZVBhcnQgPSBtRHVyVGllICYmIG1EdXJUaWVbM10gPyBtRHVyVGllWzNdIDogXCJcIjtcblx0XHRcdFx0Ly8gUmVwbGFjZSBub3RlIGtlZXBpbmcgZHVyYXRpb24gYW5kIHRpZVxuXHRcdFx0XHRuZXdQaXRjaCA9IG5ld1BpdGNoICsgZHVyYXRpb25QYXJ0ICsgdGllUGFydDtcblx0XHRcdFx0c3RhcnQgKz0gYmVmb3JlQ2hvcmRMZW4gKyBjaG9zZW4uaW5kZXg7XG5cdFx0XHRcdGVuZCA9IHN0YXJ0ICsgY2hvc2VuLnRleHQubGVuZ3RoO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4ge1xuXHRcdFx0c3RhcnQ6IHN0YXJ0LFxuXHRcdFx0ZW5kOiBlbmQsXG5cdFx0XHRub3RlOiBuZXdQaXRjaFxuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiByZXBsYWNlR3JhY2UoYWJjLCBzdGFydCwgZW5kLCBuZXdHcmFjZSwgaW5kZXgpIHtcblx0XHR2YXIgbm90ZSA9IGFiYy5zdWJzdHJpbmcoc3RhcnQsIGVuZClcblx0XHQvLyBJIGRvbid0IGtub3cgaG93IHRvIGNhcHR1cmUgbW9yZSB0aGFuIG9uZSBub3RlLCBzbyBJJ20gc2VwYXJhdGluZyB0aGVtLiBUaGVyZSBpcyBhIGxpbWl0IG9mIHRoZSBudW1iZXIgb2Ygbm90ZXMgaW4gYSBjaG9yZCBkZXBlbmRpbmcgb24gdGhlIHJlcGVhdHMgSSBoYXZlIGhlcmUsIGJ1dCBpdCBpcyB1bmxpa2VseSB0byBoYXBwZW4gaW4gcmVhbCBtdXNpYy5cblx0XHR2YXIgcmVnT3BlbkJyYWNlID0gL1xcey9cblx0XHR2YXIgcmVnQ2xvc2VCcmFjZSA9IC9cXH0vXG5cdFx0dmFyIHJlZ1ByZUJyYWNlID0gLyhbXlxce10qKS9cblx0XHR2YXIgcmVnUHJlTm90ZSA9IC8oXFwvKikvXG5cdFx0dmFyIG1hdGNoID0gbm90ZS5tYXRjaChuZXcgUmVnRXhwKHJlZ1ByZUJyYWNlLnNvdXJjZSArIHJlZ09wZW5CcmFjZS5zb3VyY2UgKyByZWdQcmVOb3RlLnNvdXJjZSArIHJlZ09wdGlvbmFsTm90ZS5zb3VyY2UgK1xuXHRcdFx0cmVnUHJlTm90ZS5zb3VyY2UgKyByZWdPcHRpb25hbE5vdGUuc291cmNlICsgcmVnUHJlTm90ZS5zb3VyY2UgKyByZWdPcHRpb25hbE5vdGUuc291cmNlICsgcmVnUHJlTm90ZS5zb3VyY2UgKyByZWdPcHRpb25hbE5vdGUuc291cmNlICtcblx0XHRcdHJlZ1ByZU5vdGUuc291cmNlICsgcmVnT3B0aW9uYWxOb3RlLnNvdXJjZSArIHJlZ1ByZU5vdGUuc291cmNlICsgcmVnT3B0aW9uYWxOb3RlLnNvdXJjZSArIHJlZ1ByZU5vdGUuc291cmNlICsgcmVnT3B0aW9uYWxOb3RlLnNvdXJjZSArXG5cdFx0XHRyZWdQcmVOb3RlLnNvdXJjZSArIHJlZ09wdGlvbmFsTm90ZS5zb3VyY2UgKyByZWdDbG9zZUJyYWNlLnNvdXJjZSkpXG5cdFx0aWYgKG1hdGNoKSB7XG5cdFx0XHQvLyBUaGlzIHdpbGwgbWF0Y2ggYWxsIG5vdGVzIGluc2lkZSBhIGdyYWNlIHN5bWJvbFxuXHRcdFx0Ly8gR2V0IHRoZSBudW1iZXIgb2YgY2hhcnMgdXNlZCBieSB0aGUgcHJldmlvdXMgZ3JhY2VzXG5cdFx0XHR2YXIgY291bnQgPSAxICsgbWF0Y2hbMV0ubGVuZ3RoIC8vIG9uZSBjaGFyYWN0ZXIgZm9yIHRoZSBvcGVuIGJyYWNlLCBhbmQgd2hhdGV2ZXIgY29tZXMgYmVmb3JlIHRoZSBicmFjZVxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBpbmRleDsgaSsrKSB7IC8vIGluZGV4IGlzIHRoZSBpdGVyYXRpb24gdGhyb3VnaCB0aGUgY2hvcmQuIFRoaXMgZnVuY3Rpb24gZ2V0cyBjYWxsZWQgZm9yIGVhY2ggb25lLlxuXHRcdFx0XHRpZiAobWF0Y2hbaSAqIDMgKyAyXSlcblx0XHRcdFx0XHRjb3VudCArPSBtYXRjaFtpICogMyArIDJdLmxlbmd0aFxuXHRcdFx0XHRpZiAobWF0Y2hbaSAqIDMgKyAzXSlcblx0XHRcdFx0XHRjb3VudCArPSBtYXRjaFtpICogMyArIDNdLmxlbmd0aFxuXHRcdFx0XHRpZiAobWF0Y2hbaSAqIDMgKyA0XSlcblx0XHRcdFx0XHRjb3VudCArPSBtYXRjaFtpICogMyArIDRdLmxlbmd0aFxuXHRcdFx0XHRpZiAobWF0Y2hbaSAqIDMgKyA1XSlcblx0XHRcdFx0XHRjb3VudCArPSBtYXRjaFtpICogMyArIDVdLmxlbmd0aFxuXHRcdFx0fVxuXHRcdFx0aWYgKG1hdGNoW2luZGV4ICogMyArIDJdKVxuXHRcdFx0XHRjb3VudCArPSBtYXRjaFtpICogMyArIDJdLmxlbmd0aFxuXHRcdFx0c3RhcnQgKz0gY291bnRcblx0XHRcdHZhciBlbmRMZW4gPSBtYXRjaFtpbmRleCAqIDMgKyAzXSA/IG1hdGNoW2luZGV4ICogMyArIDNdLmxlbmd0aCA6IDBcblx0XHRcdGVuZExlbiArPSBtYXRjaFtpbmRleCAqIDMgKyA0XSA/IG1hdGNoW2luZGV4ICogMyArIDRdLmxlbmd0aCA6IDBcblx0XHRcdGVuZExlbiArPSBtYXRjaFtpbmRleCAqIDMgKyA1XSA/IG1hdGNoW2luZGV4ICogMyArIDVdLmxlbmd0aCA6IDBcblxuXHRcdFx0ZW5kID0gc3RhcnQgKyBlbmRMZW5cblx0XHR9XG5cdFx0cmV0dXJuIHsgc3RhcnQ6IHN0YXJ0LCBlbmQ6IGVuZCwgbm90ZTogbmV3R3JhY2UgfVxuXHR9XG5cblx0ZnVuY3Rpb24gcmVwbGFjZUNob3JkKGFiYywgc3RhcnQsIGVuZCwgbmV3Q2hvcmQpIHtcblx0XHQvLyBJc29sYXRlIHRoZSBjaG9yZCBhbmQganVzdCByZXBsYWNlIHRoYXRcblx0XHR2YXIgbWF0Y2ggPSBhYmMuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpLm1hdGNoKC8oW15cIl0rKT8oXCIuK1wiKSsvKVxuXHRcdGlmIChtYXRjaFsxXSlcblx0XHRcdHN0YXJ0ICs9IG1hdGNoWzFdLmxlbmd0aFxuXHRcdGVuZCA9IHN0YXJ0ICsgbWF0Y2hbMl0ubGVuZ3RoXG5cdFx0Ly8gbGVhdmUgdGhlIHF1b3RlIGluLCBzbyBza2lwIG9uZSBtb3JlXG5cdFx0cmV0dXJuIHsgc3RhcnQ6IHN0YXJ0ICsgMSwgZW5kOiBlbmQgLSAxLCBub3RlOiBuZXdDaG9yZCB9XG5cdH1cblxuXHRmdW5jdGlvbiBjYWxjQWRqdXN0bWVudCh0aGlzQWNjaWRlbnRhbCwga2V5QWNjaWRlbnRhbCwgbWVhc3VyZUFjY2lkZW50YWwpIHtcblx0XHRpZiAoIXRoaXNBY2NpZGVudGFsICYmIG1lYXN1cmVBY2NpZGVudGFsKSB7XG5cdFx0XHQvLyBUaGVyZSB3YXMgbm8gYWNjaWRlbnRhbCBvbiB0aGlzIG5vdGUsIGJ1dCB0aGVyZSB3YXMgZWFybGllciBpbiB0aGUgbWVhc3VyZSwgc28gd2UnbGwgdXNlIHRoYXRcblx0XHRcdHRoaXNBY2NpZGVudGFsID0gbWVhc3VyZUFjY2lkZW50YWxcblx0XHR9XG5cdFx0aWYgKCF0aGlzQWNjaWRlbnRhbClcblx0XHRcdHJldHVybiAwOyAvLyB0aGVyZSBpcyBubyBkZXZpYXRpb24gZnJvbSB0aGUga2V5LlxuXG5cdFx0c3dpdGNoIChrZXlBY2NpZGVudGFsKSB7XG5cdFx0XHRjYXNlIHVuZGVmaW5lZDpcblx0XHRcdFx0c3dpdGNoICh0aGlzQWNjaWRlbnRhbCkge1xuXHRcdFx0XHRcdGNhc2UgJ19fJzogcmV0dXJuIC0yO1xuXHRcdFx0XHRcdGNhc2UgJ18nOiByZXR1cm4gLTE7XG5cdFx0XHRcdFx0Y2FzZSAnPSc6IHJldHVybiAwO1xuXHRcdFx0XHRcdGNhc2UgJ14nOiByZXR1cm4gMTtcblx0XHRcdFx0XHRjYXNlICdeXic6IHJldHVybiAyO1xuXHRcdFx0XHRcdGRlZmF1bHQ6IHJldHVybiAwOyAvLyB0aGlzIHNob3VsZCBuZXZlciBoYXBwZW5cblx0XHRcdFx0fVxuXHRcdFx0Y2FzZSAnXyc6XG5cdFx0XHRcdHN3aXRjaCAodGhpc0FjY2lkZW50YWwpIHtcblx0XHRcdFx0XHRjYXNlICdfXyc6IHJldHVybiAtMTtcblx0XHRcdFx0XHRjYXNlICdfJzogcmV0dXJuIDA7XG5cdFx0XHRcdFx0Y2FzZSAnPSc6IHJldHVybiAxO1xuXHRcdFx0XHRcdGNhc2UgJ14nOiByZXR1cm4gMjtcblx0XHRcdFx0XHRjYXNlICdeXic6IHJldHVybiAzO1xuXHRcdFx0XHRcdGRlZmF1bHQ6IHJldHVybiAwOyAvLyB0aGlzIHNob3VsZCBuZXZlciBoYXBwZW5cblx0XHRcdFx0fVxuXHRcdFx0Y2FzZSAnXic6XG5cdFx0XHRcdHN3aXRjaCAodGhpc0FjY2lkZW50YWwpIHtcblx0XHRcdFx0XHRjYXNlICdfXyc6IHJldHVybiAtMztcblx0XHRcdFx0XHRjYXNlICdfJzogcmV0dXJuIC0yO1xuXHRcdFx0XHRcdGNhc2UgJz0nOiByZXR1cm4gLTE7XG5cdFx0XHRcdFx0Y2FzZSAnXic6IHJldHVybiAwO1xuXHRcdFx0XHRcdGNhc2UgJ15eJzogcmV0dXJuIDE7XG5cdFx0XHRcdFx0ZGVmYXVsdDogcmV0dXJuIDA7IC8vIHRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlblxuXHRcdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiAwLy8gdGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuXG5cdH1cbn0pKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gc3RyVHJhbnNwb3NlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/str/output.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/abc_midi_flattener.js":
/*!************************************************************!*\
  !*** ./node_modules/abcjs/src/synth/abc_midi_flattener.js ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_midi_flattener.js: Turn a linear series of events into a series of MIDI commands.\n\n// We input a set of voices, but the notes are still complex. This pass changes the logical definitions\n// of the grace notes, decorations, ties, triplets, rests, transpositions, keys, and accidentals into actual note durations.\n// It also extracts guitar chords to a separate voice and resolves their rhythm.\n\nvar flatten;\nvar ChordTrack = __webpack_require__(/*! ./chord-track */ \"(ssr)/./node_modules/abcjs/src/synth/chord-track.js\");\nvar pitchesToPerc = __webpack_require__(/*! ./pitches-to-perc */ \"(ssr)/./node_modules/abcjs/src/synth/pitches-to-perc.js\");\n\n(function() {\n\t\"use strict\";\n\n\tvar barAccidentals;\n\tvar accidentals;\n\tvar transpose;\n\tvar bagpipes;\n\tvar tracks;\n\tvar startingTempo;\n\tvar startingMeter;\n\tvar tempoChangeFactor = 1;\n\tvar instrument;\n\tvar currentInstrument;\n\t// var channel;\n\tvar currentTrack;\n\tvar lastNoteDurationPosition;\n\tvar currentTrackName;\n\tvar lastEventTime;\n\tvar chordTrack;\n\n\tvar meter = { num: 4, den: 4 };\n\tvar drumInstrument = 128;\n\tvar lastBarTime;\n\tvar doBeatAccents = true;\n\tvar stressBeat1 = 105;\n\tvar stressBeatDown = 95;\n\tvar stressBeatUp = 85;\n\tvar volumesPerNotePitch = [[stressBeat1, stressBeatDown, stressBeatUp]];\n\tvar beatFraction = 0.25;\n\tvar nextVolume;\n\tvar nextVolumeDelta;\n\tvar slurCount = 0;\n\n\tvar drumTrack;\n\tvar drumTrackFinished;\n\tvar drumDefinition = {};\n\tvar drumBars;\n\n\tvar pickupLength = 0;\n\tvar percmap;\n\n\t// The gaps per beat. The first two are in seconds, the third is in fraction of a duration.\n\tvar normalBreakBetweenNotes = 0; //0.000520833333325*1.5; // for articulation (matches muse score value)\n\tvar slurredBreakBetweenNotes = -0.001; // make the slurred notes actually overlap\n\tvar staccatoBreakBetweenNotes = 0.4; // some people say staccato is half duration, some say 3/4 so this splits it\n\n\tflatten = function(voices, options, percmap_, midiOptions) {\n\t\tif (!options) options = {};\n\t\tif (!midiOptions) midiOptions = {};\n\t\tbarAccidentals = [];\n\t\taccidentals = [0,0,0,0,0,0,0];\n\t\tbagpipes = false;\n\t\ttracks = [];\n\t\tstartingTempo = options.qpm;\n\t\tstartingMeter = undefined;\n\t\ttempoChangeFactor = 1;\n\t\tinstrument = undefined;\n\t\tcurrentInstrument = undefined;\n\t\t// channel = undefined;\n\t\tcurrentTrack = undefined;\n\t\tcurrentTrackName = undefined;\n\t\tlastEventTime = 0;\n\t\tpercmap = percmap_;\n\n\t\tmeter = { num: 4, den: 4 };\n\n\t\tdoBeatAccents = true;\n\t\tstressBeat1 = 105;\n\t\tstressBeatDown = 95;\n\t\tstressBeatUp = 85;\n\t\tvolumesPerNotePitch = [];\n\t\tbeatFraction = 0.25;\n\t\tnextVolume = undefined;\n\t\tnextVolumeDelta = undefined;\n\t\tslurCount = 0;\n\n\t\t// For the drum/metronome track.\n\t\tdrumTrack = [];\n\t\tdrumTrackFinished = false;\n\t\tdrumDefinition = {};\n\t\tdrumBars = 1;\n\n\t\tif (voices.length > 0 && voices[0].length > 0)\n\t\t\tpickupLength = voices[0][0].pickupLength;\n\n\t\t// For resolving chords.\n\t\tif (options.bassprog !== undefined && !midiOptions.bassprog)\n\t\t\tmidiOptions.bassprog = [options.bassprog]\n\t\tif (options.bassvol !== undefined && !midiOptions.bassvol)\n\t\t\tmidiOptions.bassvol = [options.bassvol]\n\t\tif (options.chordprog !== undefined && !midiOptions.chordprog)\n\t\t\tmidiOptions.chordprog = [options.chordprog]\n\t\tif (options.chordvol !== undefined && !midiOptions.chordvol)\n\t\t\tmidiOptions.chordvol = [options.chordvol]\n\t\tif (options.gchord !== undefined && !midiOptions.gchord)\n\t\t\tmidiOptions.gchord = [options.gchord]\n\t\tchordTrack = new ChordTrack(voices.length, options.chordsOff, midiOptions, meter)\n\n\t\t// First adjust the input to resolve ties, set the starting time for each note, etc. That will make the rest of the logic easier\n\t\tpreProcess(voices, options);\n\n\t\tfor (var i = 0; i < voices.length; i++) {\n\t\t\ttranspose = 0;\n\t\t\tchordTrack.setTranspose(transpose)\n\t\t\tlastNoteDurationPosition = -1;\n\t\t\tvar voice = voices[i];\n\t\t\tcurrentTrack = [{ cmd: 'program', channel: i, instrument: instrument }];\n\t\t\tcurrentTrackName = undefined;\n\t\t\tlastBarTime = 0;\n\t\t\tchordTrack.setLastBarTime(0)\n\t\t\tvar voiceOff = false;\n\t\t\tif (options.voicesOff === true)\n\t\t\t\tvoiceOff = true;\n\t\t\telse if (options.voicesOff && options.voicesOff.length && options.voicesOff.indexOf(i) >= 0)\n\t\t\t\tvoiceOff = true;\n\t\t\tfor (var j = 0; j < voice.length; j++) {\n\t\t\t\tvar element = voice[j];\n\t\t\t\tswitch (element.el_type) {\n\t\t\t\t\tcase \"name\":\n\t\t\t\t\t\tcurrentTrackName = {cmd: 'text', type: \"name\", text: element.trackName };\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"note\":\n\t\t\t\t\t\twriteNote(element, voiceOff);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"key\":\n\t\t\t\t\t\taccidentals = setKeySignature(element);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"meter\":\n\t\t\t\t\t\tif (!startingMeter)\n\t\t\t\t\t\t\tstartingMeter = element;\n\t\t\t\t\t\tmeter = element;\n\t\t\t\t\t\tchordTrack.setMeter(meter)\n\t\t\t\t\t\tbeatFraction = getBeatFraction(meter);\n\t\t\t\t\t\talignDrumToMeter();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"tempo\":\n\t\t\t\t\t\tif (!startingTempo)\n\t\t\t\t\t\t\tstartingTempo = element.qpm;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\ttempoChangeFactor = element.qpm ? startingTempo / element.qpm : 1;\n\t\t\t\t\t\tchordTrack.setTempoChangeFactor(tempoChangeFactor)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"transpose\":\n\t\t\t\t\t\ttranspose = element.transpose;\n\t\t\t\t\t\tchordTrack.setTranspose(transpose)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"bar\":\n\t\t\t\t\t\tchordTrack.barEnd(element)\n\n\t\t\t\t\t\tbarAccidentals = [];\n\t\t\t\t\t\tif (i === 0) // Only write the drum part on the first voice so that it is not duplicated.\n\t\t\t\t\t\t\twriteDrum(voices.length+1);\n\t\t\t\t\t\t\tchordTrack.setRhythmHead(false) // decide whether there are rhythm heads each measure.\n\t\t\t\t\t\tlastBarTime = timeToRealTime(element.time);\n\t\t\t\t\t\tchordTrack.setLastBarTime(lastBarTime)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"bagpipes\":\n\t\t\t\t\t\tbagpipes = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"instrument\":\n\t\t\t\t\t\tif (instrument === undefined)\n\t\t\t\t\t\t\tinstrument = element.program;\n\t\t\t\t\t\tcurrentInstrument = element.program;\n\t\t\t\t\t\tif (currentTrack.length > 0 && currentTrack[currentTrack.length-1].cmd === 'program')\n\t\t\t\t\t\t\tcurrentTrack[currentTrack.length-1].instrument = element.program;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar ii;\n\t\t\t\t\t\t\tfor (ii = currentTrack.length-1; ii >= 0 && currentTrack[ii].cmd !== 'program'; ii--)\n\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\tif (ii < 0 || currentTrack[ii].instrument !== element.program)\n\t\t\t\t\t\t\t\tcurrentTrack.push({cmd: 'program', channel: 0, instrument: element.program});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"channel\":\n\t\t\t\t\t\tsetChannel(element.channel);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"drum\":\n\t\t\t\t\t\tdrumDefinition = normalizeDrumDefinition(element.params);\n\t\t\t\t\t\talignDrumToMeter();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"gchordOn\":\n\t\t\t\t\t\tchordTrack.gChordOn(element)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"beat\":\n\t\t\t\t\t\tstressBeat1 = element.beats[0];\n\t\t\t\t\t\tstressBeatDown = element.beats[1];\n\t\t\t\t\t\tstressBeatUp = element.beats[2];\n\t\t\t\t\t\tif (!element.volumesPerNotePitch)\n\t\t\t\t\t\t\tvolumesPerNotePitch = []\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tvolumesPerNotePitch = element.volumesPerNotePitch;\n\t\t\t\t\t\t// TODO-PER: also use the last parameter - which changes which beats are strong.\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"vol\":\n\t\t\t\t\t\tnextVolume = element.volume;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"volinc\":\n\t\t\t\t\t\tnextVolumeDelta = element.volume;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"beataccents\":\n\t\t\t\t\t\tdoBeatAccents = element.value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"gchord\":\n\t\t\t\t\tcase \"bassprog\":\n\t\t\t\t\tcase \"chordprog\":\n\t\t\t\t\tcase \"bassvol\":\n\t\t\t\t\tcase \"chordvol\":\n\t\t\t\t\tcase \"gchordbars\":\n\t\t\t\t\t\tchordTrack.paramChange(element)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// This should never happen\n\t\t\t\t\t\tconsole.log(\"MIDI creation. Unknown el_type: \" + element.el_type + \"\\n\");// jshint ignore:line\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (currentTrack[0].instrument === undefined)\n\t\t\t\tcurrentTrack[0].instrument = instrument ? instrument : 0;\n\t\t\tif (currentTrackName)\n\t\t\t\tcurrentTrack.unshift(currentTrackName);\n\t\t\ttracks.push(currentTrack);\n\t\t\tchordTrack.finish()\n\t\t\tif (drumTrack.length > 0) // Don't do drums on more than one track, so turn off drum after we create it.\n\t\t\t\tdrumTrackFinished = true;\n\t\t}\n\t\t// See if any notes are octaves played at the same time. If so, raise the pitch of the higher one.\n\t\tif (options.detuneOctave)\n\t\t\tfindOctaves(tracks, parseInt(options.detuneOctave, 10));\n\n\t\tchordTrack.addTrack(tracks)\n\t\tif (drumTrack.length > 0)\n\t\t\ttracks.push(drumTrack);\n\n\t\treturn { tempo: startingTempo, instrument: instrument, tracks: tracks, totalDuration: lastEventTime };\n\t};\n\n\tfunction setChannel(channel) {\n\t\tfor (var i = currentTrack.length-1; i>=0; i--) {\n\t\t\tif (currentTrack[i].cmd === \"program\") {\n\t\t\t\tcurrentTrack[i].channel = channel;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction timeToRealTime(time) {\n\t\treturn time/1000000;\n\t}\n\n\tfunction durationRounded(duration) {\n\t\treturn Math.round(duration*tempoChangeFactor*1000000)/1000000;\n\t}\n\n\tfunction preProcess(voices, options) {\n\t\tfor (var i = 0; i < voices.length; i++) {\n\t\t\tvar voice = voices[i];\n\t\t\tvar ties = {};\n\t\t\tvar startingTempo = options.qpm;\n\t\t\tvar timeCounter = 0;\n\t\t\tvar tempoMultiplier = 1;\n\t\t\tfor (var j = 0; j < voice.length; j++) {\n\t\t\t\tvar element = voice[j];\n\n\t\t\t\tif (element.el_type === 'tempo') {\n\t\t\t\t\tif (!startingTempo)\n\t\t\t\t\t\tstartingTempo = element.qpm;\n\t\t\t\t\telse\n\t\t\t\t\t\ttempoMultiplier = element.qpm ? startingTempo / element.qpm : 1;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// For convenience, put the current time in each event so that it doesn't have to be calculated in the complicated stuff that follows.\n\t\t\t\telement.time = timeCounter;\n\t\t\t\tvar thisDuration = element.duration ? element.duration : 0;\n\t\t\t\ttimeCounter += Math.round(thisDuration*tempoMultiplier*1000000); // To compensate for JS rounding problems, do all intermediate calcs on integers.\n\n\t\t\t\t// If there are pitches then put the duration in the pitch object and if there are ties then change the duration of the first note in the tie.\n\t\t\t\tif (element.pitches) {\n\t\t\t\t\tfor (var k = 0; k < element.pitches.length; k++) {\n\t\t\t\t\t\tvar pitch = element.pitches[k];\n\t\t\t\t\t\tif (pitch) {\n\t\t\t\t\t\t\tpitch.duration = element.duration;\n\t\t\t\t\t\t\tif (pitch.startTie) {\n\t\t\t\t\t\t\t\t//console.log(element)\n\t\t\t\t\t\t\t\tif (ties[pitch.pitch] === undefined) // We might have three notes tied together - if so just add this duration.\n\t\t\t\t\t\t\t\t\tties[pitch.pitch] = {el: j, pitch: k};\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tvoice[ties[pitch.pitch].el].pitches[ties[pitch.pitch].pitch].duration += pitch.duration;\n\t\t\t\t\t\t\t\t\telement.pitches[k] = null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//console.log(\">>> START\", JSON.stringify(ties));\n\t\t\t\t\t\t\t} else if (pitch.endTie) {\n\t\t\t\t\t\t\t\t//console.log(element)\n\t\t\t\t\t\t\t\tvar tie = ties[pitch.pitch];\n\t\t\t\t\t\t\t\t//console.log(\">>> END\", pitch.pitch, tie, JSON.stringify(ties));\n\t\t\t\t\t\t\t\tif (tie) {\n\t\t\t\t\t\t\t\t\tvar dur = pitch.duration;\n\t\t\t\t\t\t\t\t\tdelete voice[tie.el].pitches[tie.pitch].startTie;\n\t\t\t\t\t\t\t\t\tvoice[tie.el].pitches[tie.pitch].duration += dur;\n\t\t\t\t\t\t\t\t\telement.pitches[k] = null;\n\t\t\t\t\t\t\t\t\tdelete ties[pitch.pitch];\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdelete pitch.endTie;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdelete element.duration;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var key in ties) {\n\t\t\t\tif (ties.hasOwnProperty(key)) {\n\t\t\t\t\tvar item = ties[key];\n\t\t\t\t\tdelete voice[item.el].pitches[item.pitch].startTie;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// voices[0].forEach(v => delete v.elem)\n\t\t\t// voices[1].forEach(v => delete v.elem)\n\t\t\t// console.log(JSON.stringify(voices))\n\t\t}\n\t}\n\n\tfunction getBeatFraction(meter) {\n\t\tswitch (parseInt(meter.den,10)) {\n\t\t\tcase 2: return 0.5;\n\t\t\tcase 4: return 0.25;\n\t\t\tcase 8:\n\t\t\t\tif (meter.num % 3 === 0)\n\t\t\t\t\treturn 0.375;\n\t\t\t\telse\n\t\t\t\t\treturn 0.125;\n\t\t\tcase 16: return 0.125;\n\t\t}\n\t\treturn 0.25;\n\t}\n\n\tfunction calcBeat(measureStart, beatLength, currTime) {\n\t\tvar distanceFromStart = currTime - measureStart;\n\t\treturn distanceFromStart / beatLength;\n\t}\n\n\tfunction processVolume(beat, voiceOff, pitchIndexOfNote) {\n\t\tif (voiceOff)\n\t\t\treturn 0;\n\t\tlet pitchStressBeat1 = stressBeat1;\n\t\tlet pitchStressBeatDown = stressBeatDown;\n\t\tlet pitchStressBeatUp = stressBeatUp;\n\t\tif(pitchIndexOfNote !== undefined && volumesPerNotePitch.length >= pitchIndexOfNote+1){\n\t\t\tpitchStressBeat1 = volumesPerNotePitch[pitchIndexOfNote][0];\n\t\t\tpitchStressBeatDown = volumesPerNotePitch[pitchIndexOfNote][1];\n\t\t\tpitchStressBeatUp = volumesPerNotePitch[pitchIndexOfNote][2];\n\t\t}\n\t\tvar volume;\n    \t// MAE 21 Jun 2024 - This previously wasn't allowing zero volume to be applied\n\t\tif (nextVolume !== undefined) {\n\t\t\tvolume = nextVolume;\n\t\t\tnextVolume = undefined;\n\t\t} else if (!doBeatAccents) {\n\t\t\tvolume = pitchStressBeatDown;\n\t\t} else if (pickupLength > beat) {\n\t\t\tvolume = pitchStressBeatUp;\n\t\t} else {\n\t\t\t//var barLength = meter.num / meter.den;\n\t\t\tvar barBeat = calcBeat(lastBarTime, getBeatFraction(meter), beat);\n\t\t\tif (barBeat === 0)\n\t\t\t\tvolume = pitchStressBeat1;\n\t\t\telse if (parseInt(barBeat,10) === barBeat)\n\t\t\t\tvolume = pitchStressBeatDown;\n\t\t\telse\n\t\t\t\tvolume = pitchStressBeatUp;\n\t\t}\n\t\tif (nextVolumeDelta) {\n\t\t\tvolume += nextVolumeDelta;\n\t\t\tnextVolumeDelta = undefined;\n\t\t}\n\t\tif (volume < 0)\n\t\t\tvolume = 0;\n\t\tif (volume > 127)\n\t\t\tvolume = 127;\n\t\treturn voiceOff ? 0 : volume;\n\t}\n\n\n\tfunction findNoteModifications(elem, velocity) {\n\t\tvar ret = { };\n\t\tif (elem.decoration) {\n\t\t\tfor (var d = 0; d < elem.decoration.length; d++) {\n\t\t\t\tif (elem.decoration[d] === 'staccato')\n\t\t\t\t\tret.thisBreakBetweenNotes = 'staccato';\n\t\t\t\telse if (elem.decoration[d] === 'tenuto')\n\t\t\t\t\tret.thisBreakBetweenNotes = 'tenuto';\n\t\t\t\telse if (elem.decoration[d] === 'accent')\n\t\t\t\t\tret.velocity = Math.min(127, velocity * 1.5);\n\t\t\t\telse if (elem.decoration[d] === 'trill')\n\t\t\t\t\tret.noteModification = \"trill\";\n\t\t\t\telse if (elem.decoration[d] === 'lowermordent')\n\t\t\t\t\tret.noteModification = \"lowermordent\";\n\t\t\t\telse if (elem.decoration[d] === 'uppermordent')\n\t\t\t\t\tret.noteModification = \"pralltriller\";\n\t\t\t\telse if (elem.decoration[d] === 'mordent')\n\t\t\t\t\tret.noteModification = \"mordent\";\n\t\t\t\telse if (elem.decoration[d] === 'turn')\n\t\t\t\t\tret.noteModification = \"turn\";\n\t\t\t\telse if (elem.decoration[d] === 'roll')\n\t\t\t\t\tret.noteModification = \"roll\";\n\t\t\t\telse if (elem.decoration[d] === 'pralltriller')\n\t\t\t\t\tret.noteModification = \"pralltriller\";\n\t\t\t\telse if (elem.decoration[d] === 'trillh') \n\t\t\t\t\tret.noteModification = \"trillh\";\n\t\t\t}\n\t\t}\n\t\treturn ret;\n\t}\n\n\tfunction doModifiedNotes(noteModification, p) {\n\t\tvar noteTime;\n\t\tvar numNotes;\n\t\tvar start = p.start;\n\t\tvar pp;\n\t\tvar runningDuration = p.duration;\n\t\tvar shortestNote = durationRounded(1.0 / 32);\n\n\t\tswitch (noteModification) {\n\t\t\tcase \"trill\":\n\t\t\t\tvar note = 2;\n\t\t\t\twhile (runningDuration > 0) {\n\t\t\t\t\tcurrentTrack.push({ cmd: 'note', pitch: p.pitch+note, volume: p.volume, start: start, duration: shortestNote, gap: 0, instrument: currentInstrument, style: 'decoration' });\n\t\t\t\t\tnote = (note === 2) ? 0 : 2;\n\t\t\t\t\trunningDuration -= shortestNote;\n\t\t\t\t\tstart += shortestNote;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t      case \"trillh\":\n\t\t\t        var note = 1;\n\t\t\t        while (runningDuration > 0) {\n\t\t\t          currentTrack.push({\n\t\t\t            cmd: 'note',\n\t\t\t            pitch: p.pitch + note,\n\t\t\t            volume: p.volume,\n\t\t\t            start: start,\n\t\t\t            duration: shortestNote,\n\t\t\t            gap: 0,\n\t\t\t            instrument: currentInstrument,\n\t\t\t            style: 'decoration'\n\t\t\t          });\n\t\t\t          note = note === 1 ? 0 : 1;\n\t\t\t          runningDuration -= shortestNote;\n\t\t\t          start += shortestNote;\n\t\t\t        }\n\t\t\t        break;\n\t\t\tcase \"pralltriller\":\n\t\t\t\tcurrentTrack.push({ cmd: 'note', pitch: p.pitch, volume: p.volume, start: start, duration: shortestNote, gap: 0, instrument: currentInstrument, style: 'decoration' });\n\t\t\t\trunningDuration -= shortestNote;\n\t\t\t\tstart += shortestNote;\n\t\t\t\tcurrentTrack.push({ cmd: 'note', pitch: p.pitch+2, volume: p.volume, start: start, duration: shortestNote, gap: 0, instrument: currentInstrument, style: 'decoration' });\n\t\t\t\trunningDuration -= shortestNote;\n\t\t\t\tstart += shortestNote;\n\t\t\t\tcurrentTrack.push({ cmd: 'note', pitch: p.pitch, volume: p.volume, start: start, duration: runningDuration, gap: 0, instrument: currentInstrument });\n\t\t\t\tbreak;\n\t\t\tcase \"mordent\":\n\t\t\tcase \"lowermordent\":\n\t\t\t\tcurrentTrack.push({ cmd: 'note', pitch: p.pitch, volume: p.volume, start: start, duration: shortestNote, gap: 0, instrument: currentInstrument, style: 'decoration' });\n\t\t\t\trunningDuration -= shortestNote;\n\t\t\t\tstart += shortestNote;\n\t\t\t\tcurrentTrack.push({ cmd: 'note', pitch: p.pitch-2, volume: p.volume, start: start, duration: shortestNote, gap: 0, instrument: currentInstrument, style: 'decoration' });\n\t\t\t\trunningDuration -= shortestNote;\n\t\t\t\tstart += shortestNote;\n\t\t\t\tcurrentTrack.push({ cmd: 'note', pitch: p.pitch, volume: p.volume, start: start, duration: runningDuration, gap: 0, instrument: currentInstrument });\n\t\t\t\tbreak;\n\t\t\tcase \"turn\":\n\t\t\t\tshortestNote = p.duration / 4;\n\t\t\t\tcurrentTrack.push({ cmd: 'note', pitch: p.pitch+2, volume: p.volume, start: start, duration: shortestNote, gap: 0, instrument: currentInstrument, style: 'decoration' });\n\t\t\t\tcurrentTrack.push({ cmd: 'note', pitch: p.pitch, volume: p.volume, start: start+shortestNote, duration: shortestNote, gap: 0, instrument: currentInstrument, style: 'decoration' });\n\t\t\t\tcurrentTrack.push({ cmd: 'note', pitch: p.pitch-1, volume: p.volume, start: start+shortestNote*2, duration: shortestNote, gap: 0, instrument: currentInstrument, style: 'decoration' });\n\t\t\t\tcurrentTrack.push({ cmd: 'note', pitch: p.pitch, volume: p.volume, start: start+shortestNote*3, duration: shortestNote, gap: 0, instrument: currentInstrument, style: 'decoration' });\n\t\t\t\tbreak;\n\t\t\tcase \"roll\":\n\t\t\t\twhile (runningDuration > 0) {\n\t\t\t\t\tcurrentTrack.push({ cmd: 'note', pitch: p.pitch, volume: p.volume, start: start, duration: shortestNote, gap: 0, instrument: currentInstrument, style: 'decoration' });\n\t\t\t\t\trunningDuration -= shortestNote*2;\n\t\t\t\t\tstart += shortestNote*2;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tfunction writeNote(elem, voiceOff) {\n\t\t//\n\t\t// Create a series of note events to append to the current track.\n\t\t// The output event is one of: { pitchStart: pitch_in_abc_units, volume: from_1_to_64 }\n\t\t// { pitchStop: pitch_in_abc_units }\n\t\t// { moveTime: duration_in_abc_units }\n\t\t// If there are guitar chords, then they are put in a separate track, but they have the same format.\n\t\t//\n\n\t\t//var trackStartingIndex = currentTrack.length;\n\n\t\tvar velocity = processVolume(timeToRealTime(elem.time), voiceOff);\n\t\tchordTrack.processChord(elem)\n\n\t\t// if there are grace notes, then also play them.\n\t\t// I'm not sure there is an exact rule for the length of the notes. My rule, unless I find\n\t\t// a better one is: the grace notes cannot take more than 1/2 of the main note's value.\n\t\t// A grace note (of 1/8 note duration) takes 1/8 of the main note's value.\n\t\tvar graces;\n\t\tif (elem.gracenotes && elem.pitches && elem.pitches.length > 0 && elem.pitches[0]) {\n\t\t\tgraces = processGraceNotes(elem.gracenotes, elem.pitches[0].duration);\n\t\t\tif (elem.elem)\n\t\t\t\telem.elem.midiGraceNotePitches = writeGraceNotes(graces, timeToRealTime(elem.time), velocity*2/3, currentInstrument); // make the graces a little quieter.\n\t\t}\n\n\t\t// The beat fraction is the note that gets a beat (.25 is a quarter note)\n\t\t// The tempo is in minutes and we want to get to milliseconds.\n\t\t// If the element is inside a repeat, there may be more than one value. If there is one value,\n\t\t// then just store that as a number. If there are more than one value, then change that to\n\t\t// an array and return all of them.\n\t\tif (elem.elem) {\n\t\t\tvar rt = timeToRealTime(elem.time);\n\t\t\tvar ms = rt / beatFraction / startingTempo * 60 * 1000;\n\t\t\tif (elem.elem.currentTrackMilliseconds === undefined) {\n\t\t\t\telem.elem.currentTrackMilliseconds = ms;\n\t\t\t\telem.elem.currentTrackWholeNotes = rt;\n\t\t\t} else {\n\t\t\t\tif (elem.elem.currentTrackMilliseconds.length === undefined) {\n\t\t\t\t\tif (elem.elem.currentTrackMilliseconds !== ms) {\n\t\t\t\t\t\telem.elem.currentTrackMilliseconds = [elem.elem.currentTrackMilliseconds, ms];\n\t\t\t\t\t\telem.elem.currentTrackWholeNotes = [elem.elem.currentTrackWholeNotes, rt];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// There can be duplicates if there are multiple voices\n\t\t\t\t\tvar found = false;\n\t\t\t\t\tfor (var j = 0; j < elem.elem.currentTrackMilliseconds.length; j++) {\n\t\t\t\t\t\tif (elem.elem.currentTrackMilliseconds[j] === ms)\n\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t}\n\t\t\t\t\tif (!found) {\n\t\t\t\t\t\telem.elem.currentTrackMilliseconds.push(ms);\n\t\t\t\t\t\telem.elem.currentTrackWholeNotes.push(rt);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//var tieAdjustment = 0;\n\t\tif (elem.pitches) {\n\t\t\tvar thisBreakBetweenNotes = '';\n\t\t\tvar ret = findNoteModifications(elem, velocity);\n\t\t\tif (ret.thisBreakBetweenNotes)\n\t\t\t\tthisBreakBetweenNotes = ret.thisBreakBetweenNotes;\n\t\t\tif (ret.velocity)\n\t\t\t\tvelocity = ret.velocity;\n\n\t\t\t// TODO-PER: Can also make a different sound on style=x and style=harmonic\n\t\t\tvar ePitches = elem.pitches;\n\t\t\tif (elem.style === \"rhythm\") {\n\t\t\t\tePitches = chordTrack.setRhythmHead(true, elem)\n\t\t\t}\n\n\t\t\tif (elem.elem)\n\t\t\t\telem.elem.midiPitches = [];\n\t\t\tfor (var i=0; i<ePitches.length; i++) {\n\t\t\t\t//here we can set the volume for each note in a chord, if specified\n\t\t\t\tlet pitchVelocity = velocity;\n\t\t\t\tif(!ret.velocity && Array.isArray(elem.decoration) && elem.decoration.length > i){\n\t\t\t\t\tpitchVelocity = processVolume(timeToRealTime(elem.time), voiceOff, i)\n\t\t\t\t}\n\t\t\t\tvar note = ePitches[i];\n\t\t\t\tif (!note)\n\t\t\t\t\tcontinue;\n\t\t\t\tif (note.startSlur)\n\t\t\t\t\tslurCount += note.startSlur.length;\n\t\t\t\tif (note.endSlur)\n\t\t\t\t\tslurCount -= note.endSlur.length;\n\t\t\t\tvar actualPitch = note.actualPitch ? note.actualPitch : adjustPitch(note);\n\t\t\t\tif (currentInstrument === drumInstrument && percmap) {\n\t\t\t\t\tvar name = pitchesToPerc(note)\n\t\t\t\t\tif (name && percmap[name])\n\t\t\t\t\t\tactualPitch = percmap[name].sound;\n\t\t\t\t}\n\t\t\t\tvar p = { cmd: 'note', pitch: actualPitch, volume: pitchVelocity, start: timeToRealTime(elem.time), duration: durationRounded(note.duration), instrument: currentInstrument, startChar: elem.elem.startChar, endChar: elem.elem.endChar};\n\t\t\t\tp = adjustForMicroTone(p);\n\t\t\t\tif (elem.gracenotes) {\n\t\t\t\t\tp.duration = p.duration / 2;\n\t\t\t\t\tp.start = p.start + p.duration;\n\t\t\t\t}\n\t\t\t\tif (elem.elem)\n\t\t\t\t\telem.elem.midiPitches.push(p);\n\t\t\t\tif (ret.noteModification) {\n\t\t\t\t\tdoModifiedNotes(ret.noteModification, p);\n\t\t\t\t} else {\n\t\t\t\t\tif (slurCount > 0)\n\t\t\t\t\t\tp.endType = 'tenuto';\n\t\t\t\t\telse if (thisBreakBetweenNotes)\n\t\t\t\t\t\tp.endType = thisBreakBetweenNotes;\n\n\t\t\t\t\tswitch (p.endType) {\n\t\t\t\t\t\tcase \"tenuto\":\n\t\t\t\t\t\t\tp.gap = slurredBreakBetweenNotes;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"staccato\":\n\t\t\t\t\t\t\tvar d = p.duration * staccatoBreakBetweenNotes;\n\t\t\t\t\t\t\tp.gap = startingTempo / 60 * d;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tp.gap = normalBreakBetweenNotes;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcurrentTrack.push(p);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlastNoteDurationPosition = currentTrack.length-1;\n\n\t\t}\n\t\tvar realDur = getRealDuration(elem);\n\t\tlastEventTime = Math.max(lastEventTime, timeToRealTime(elem.time)+durationRounded(realDur));\n\t}\n\tfunction getRealDuration(elem) {\n\t\tif (elem.pitches && elem.pitches.length > 0 && elem.pitches[0])\n\t\t\treturn elem.pitches[0].duration;\n\t\tif (elem.elem)\n\t\t\treturn elem.elem.duration;\n\t\treturn elem.duration;\n\t}\n\n\tvar scale = [0,2,4,5,7,9,11];\n\tfunction adjustPitch(note) {\n\t\tif (note.midipitch !== undefined)\n\t\t\treturn note.midipitch; // The pitch might already be known, for instance if there is a drummap.\n\t\tvar pitch = note.pitch;\n\t\tif (note.accidental) {\n\t\t\tswitch(note.accidental) { // change that pitch (not other octaves) for the rest of the bar\n\t\t\t\tcase \"sharp\":\n\t\t\t\t\tbarAccidentals[pitch]=1; break;\n\t\t\t\tcase \"flat\":\n\t\t\t\t\tbarAccidentals[pitch]=-1; break;\n\t\t\t\tcase \"natural\":\n\t\t\t\t\tbarAccidentals[pitch]=0; break;\n\t\t\t\tcase \"dblsharp\":\n\t\t\t\t\tbarAccidentals[pitch]=2; break;\n\t\t\t\tcase \"dblflat\":\n\t\t\t\t\tbarAccidentals[pitch]=-2; break;\n\t\t\t\tcase \"quartersharp\":\n\t\t\t\t\tbarAccidentals[pitch]=0.25; break;\n\t\t\t\tcase \"quarterflat\":\n\t\t\t\t\tbarAccidentals[pitch]=-0.25; break;\n\t\t\t}\n\t\t}\n\n\t\tvar actualPitch = extractOctave(pitch) *12 + scale[extractNote(pitch)] + 60;\n\n\t\tif ( barAccidentals[pitch]!==undefined) {\n\t\t\t// An accidental is always taken at face value and supersedes the key signature.\n\t\t\tactualPitch += barAccidentals[pitch];\n\t\t} else { // use normal accidentals\n\t\t\tactualPitch +=  accidentals[extractNote(pitch)];\n\t\t}\n\t\tactualPitch += transpose;\n\t\treturn actualPitch;\n\t}\n\n\tfunction setKeySignature(elem) {\n\t\tvar accidentals = [0,0,0,0,0,0,0];\n\t\tif (!elem.accidentals) return accidentals;\n\t\tfor (var i = 0; i < elem.accidentals.length; i++) {\n\t\t\tvar acc = elem.accidentals[i];\n\t\t\tvar d;\n\t\t\tswitch (acc.acc) {\n\t\t\t\tcase \"flat\": d = -1; break;\n\t\t\t\tcase \"quarterflat\": d = -0.25; break;\n\t\t\t\tcase \"sharp\": d = 1; break;\n\t\t\t\tcase \"quartersharp\": d = 0.25; break;\n\t\t\t\tdefault: d = 0; break;\n\t\t\t}\n\n\t\t\tvar lowercase = acc.note.toLowerCase();\n\t\t\tvar note = extractNote(lowercase.charCodeAt(0)-'c'.charCodeAt(0));\n\t\t\taccidentals[note]+=d;\n\t\t}\n\t\treturn accidentals;\n\t}\n\n\tfunction processGraceNotes(graces, companionDuration) {\n\t\t// Grace notes take up half of the note value. So if there are many of them they are all real short.\n\t\tvar graceDuration = 0;\n\t\tvar ret = [];\n\t\tvar grace;\n\t\tfor (var g = 0; g < graces.length; g++) {\n\t\t\tgrace = graces[g];\n\t\t\tgraceDuration += grace.duration;\n\t\t}\n\t\tvar multiplier = companionDuration/2 / graceDuration;\n\n\t\tfor (g = 0; g < graces.length; g++) {\n\t\t\tgrace = graces[g];\n\t\t\tvar actualPitch = adjustPitch(grace);\n\t\t\tif (currentInstrument === drumInstrument && percmap) {\n\t\t\t\tvar name = pitchesToPerc(grace)\n\t\t\t\tif (name && percmap[name])\n\t\t\t\t\tactualPitch = percmap[name].sound;\n\t\t\t}\n\t\t\tvar pitch = { pitch: actualPitch, duration: grace.duration*multiplier };\n\t\t\tpitch = adjustForMicroTone(pitch);\n\t\t\tret.push(pitch);\n\t\t}\n\t\treturn ret;\n\t}\n\n\tfunction writeGraceNotes(graces, start, velocity, currentInstrument) {\n\t\tvar midiGrace = [];\n\t\tvelocity = Math.round(velocity)\n\t\tfor (var g = 0; g < graces.length; g++) {\n\t\t\tvar gp = graces[g];\n\t\t\tcurrentTrack.push({cmd: 'note', pitch: gp.pitch, volume: velocity, start: start, duration: gp.duration, gap: 0, instrument:currentInstrument, style: 'grace'});\n\t\t\tmidiGrace.push({\n\t\t\t\tpitch: gp.pitch,\n\t\t\t\tdurationInMeasures: gp.duration,\n\t\t\t\tvolume: velocity,\n\t\t\t\tinstrument: currentInstrument\n\t\t\t});\n\t\t\tstart += gp.duration;\n\t\t}\n\t\treturn midiGrace;\n\t}\n\n\tvar quarterToneFactor = 0.02930223664349;\n\tfunction adjustForMicroTone(description) {\n\t\t// if the pitch is not a whole number then make it a whole number and add a tuning factor\n\t\tvar pitch = ''+description.pitch;\n\t\tif (pitch.indexOf(\".75\") >= 0) {\n\t\t\tdescription.pitch = Math.round(description.pitch);\n\t\t\tdescription.cents = -50;\n\t\t} else if (pitch.indexOf(\".25\") >= 0) {\n\t\t\tdescription.pitch = Math.round(description.pitch);\n\t\t\tdescription.cents = 50;\n\t\t}\n\n\t\treturn description;\n\t}\n\n\tfunction extractOctave(pitch) {\n\t\treturn Math.floor(pitch/7);\n\t}\n\n\tfunction extractNote(pitch) {\n\t\tpitch = pitch%7;\n\t\tif (pitch<0) pitch+=7;\n\t\treturn pitch;\n\t}\n\n\n\tfunction normalizeDrumDefinition(params) {\n\t\t// Be very strict with the drum definition. If anything is not perfect,\n\t\t// just turn the drums off.\n\t\t// Perhaps all of this logic belongs in the parser instead.\n\t\tif (params.pattern.length === 0 || params.on === false)\n\t\t\treturn { on: false };\n\n\t\tvar str = params.pattern[0];\n\t\tvar events = [];\n\t\tvar event = \"\";\n\t\tvar totalPlay = 0;\n\t\tfor (var i = 0; i < str.length; i++) {\n\t\t\tif (str[i] === 'd')\n\t\t\t\ttotalPlay++;\n\t\t\tif (str[i] === 'd' || str[i] === 'z') {\n\t\t\t\tif (event.length !== 0) {\n\t\t\t\t\tevents.push(event);\n\t\t\t\t\tevent = str[i];\n\t\t\t\t} else\n\t\t\t\t\tevent = event + str[i];\n\t\t\t} else {\n\t\t\t\tif (event.length === 0) {\n\t\t\t\t\t// there was an error: the string should have started with d or z\n\t\t\t\t\treturn {on: false};\n\t\t\t\t}\n\t\t\t\tevent = event + str[i];\n\t\t\t}\n\t\t}\n\n\t\tif (event.length !== 0)\n\t\t\tevents.push(event);\n\n\t\t// Now the events array should have one item per event.\n\t\t// There should be two more params for each event: the volume and the pitch.\n\t\tif (params.pattern.length !== totalPlay*2 + 1)\n\t\t\treturn { on: false };\n\n\t\tvar ret = { on: true, bars: params.bars, pattern: []};\n\t\tvar beatLength = getBeatFraction(meter);\n\t\tvar playCount = 0;\n\t\tfor (var j = 0; j < events.length; j++) {\n\t\t\tevent = events[j];\n\t\t\tvar len = 1;\n\t\t\tvar div = false;\n\t\t\tvar num = 0;\n\t\t\tfor (var k = 1; k < event.length; k++) {\n\t\t\t\tswitch(event[k]) {\n\t\t\t\t\tcase \"/\":\n\t\t\t\t\t\tif (num !== 0)\n\t\t\t\t\t\t\tlen *= num;\n\t\t\t\t\t\tnum = 0;\n\t\t\t\t\t\tdiv = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"1\":\n\t\t\t\t\tcase \"2\":\n\t\t\t\t\tcase \"3\":\n\t\t\t\t\tcase \"4\":\n\t\t\t\t\tcase \"5\":\n\t\t\t\t\tcase \"6\":\n\t\t\t\t\tcase \"7\":\n\t\t\t\t\tcase \"8\":\n\t\t\t\t\tcase \"9\":\n\t\t\t\t\t\tnum = num*10 +event[k];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn { on: false };\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (div) {\n\t\t\t\tif (num === 0) num = 2; // a slash by itself is interpreted as \"/2\"\n\t\t\t\tlen /= num;\n\t\t\t} else if (num)\n\t\t\t\tlen *= num;\n\t\t\tif (event[0] === 'd') {\n\t\t\t\tret.pattern.push({ len: len * beatLength, pitch: params.pattern[1 + playCount], velocity: params.pattern[1 + playCount + totalPlay]});\n\t\t\t\tplayCount++;\n\t\t\t} else\n\t\t\t\tret.pattern.push({ len: len * beatLength, pitch: null});\n\t\t}\n\t\tdrumBars = params.bars ? params.bars : 1;\n\t\treturn ret;\n\t}\n\n\tfunction alignDrumToMeter() {\n\t\tif (!drumDefinition ||!drumDefinition.pattern) {\n\t\t\treturn;\n\t\t}\n\t\tvar ret = drumDefinition;\n\t\t// Now normalize the pattern to cover the correct number of measures. The note lengths passed are relative to each other and need to be scaled to fit a measure.\n\t\tvar totalTime = 0;\n\t\tvar measuresPerBeat = meter.num/meter.den;\n\t\tfor (var ii = 0; ii < ret.pattern.length; ii++)\n\t\t\ttotalTime += ret.pattern[ii].len;\n\t\tvar factor = totalTime /  drumBars / measuresPerBeat;\n\t\tfor (ii = 0; ii < ret.pattern.length; ii++)\n\t\t\tret.pattern[ii].len = ret.pattern[ii].len / factor;\n\t\tdrumDefinition = ret;\n\t}\n\n\tfunction writeDrum(channel) {\n\t\tif (drumTrack.length === 0 && !drumDefinition.on)\n\t\t\treturn;\n\n\t\tvar measureLen = meter.num/meter.den;\n\t\tif (drumTrack.length === 0) {\n\t\t\tif (lastEventTime < measureLen)\n\t\t\t\treturn; // This is true if there are pickup notes. The drum doesn't start until the first full measure.\n\t\t\tdrumTrack.push({cmd: 'program', channel: channel, instrument: drumInstrument});\n\t\t}\n\n\t\tif (!drumDefinition.on) {\n\t\t\t// this is the case where there has been a drum track, but it was specifically turned off.\n\t\t\treturn;\n\t\t}\n\t\tvar start = lastBarTime;\n\t\tfor (var i = 0; i < drumDefinition.pattern.length; i++) {\n\t\t\tvar len = durationRounded(drumDefinition.pattern[i].len);\n\t\t\tif (drumDefinition.pattern[i].pitch) {\n\t\t\t\tdrumTrack.push({\n\t\t\t\t\tcmd: 'note',\n\t\t\t\t\tpitch: drumDefinition.pattern[i].pitch,\n\t\t\t\t\tvolume: drumDefinition.pattern[i].velocity,\n\t\t\t\t\tstart: start,\n\t\t\t\t\tduration: len,\n\t\t\t\t\tgap: 0,\n\t\t\t\t\tinstrument: drumInstrument});\n\t\t\t}\n\t\t\tstart += len;\n\t\t}\n\t}\n\n\tfunction findOctaves(tracks, detuneCents) {\n\t\tvar timing = {};\n\t\tfor (var i = 0; i < tracks.length; i++) {\n\t\t\tfor (var j = 0; j < tracks[i].length; j++) {\n\t\t\t\tvar note = tracks[i][j];\n\t\t\t\tif (note.cmd === \"note\") {\n\t\t\t\t\tif (timing[note.start] === undefined)\n\t\t\t\t\t\ttiming[note.start] = [];\n\t\t\t\t\ttiming[note.start].push({track: i, event: j, pitch: note.pitch});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar keys = Object.keys(timing);\n\t\tfor (i = 0; i < keys.length; i++) {\n\t\t\tvar arr = timing[keys[i]];\n\t\t\tif (arr.length > 1) {\n\t\t\t\tarr = arr.sort(function(a,b) {\n\t\t\t\t\treturn a.pitch - b.pitch;\n\t\t\t\t});\n\t\t\t\tvar topEvent = arr[arr.length-1];\n\t\t\t\tvar topNote = topEvent.pitch % 12;\n\t\t\t\tvar found = false;\n\t\t\t\tfor (j = 0; !found && j < arr.length-1; j++) {\n\t\t\t\t\tif (arr[j].pitch % 12 === topNote)\n\t\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t\tif (found) {\n\t\t\t\t\tvar event = tracks[topEvent.track][topEvent.event];\n\t\t\t\t\tif (!event.cents)\n\t\t\t\t\t\tevent.cents = 0;\n\t\t\t\t\tevent.cents += detuneCents;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n})();\n\nmodule.exports = flatten;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2FiY19taWRpX2ZsYXR0ZW5lci5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUIsbUJBQU8sQ0FBQywwRUFBZTtBQUN4QyxvQkFBb0IsbUJBQU8sQ0FBQyxrRkFBbUI7O0FBRS9DO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGtDQUFrQyx5QkFBeUI7QUFDM0Qsd0NBQXdDO0FBQ3hDLHNDQUFzQzs7QUFFdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxZQUFZOztBQUVaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsa0JBQWtCLG1CQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixvREFBb0Q7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixrQkFBa0I7QUFDckM7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QywrQ0FBK0M7QUFDdkY7QUFDQTtBQUNBLDJCQUEyQix3REFBd0Q7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtFQUErRTtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLFdBQVc7QUFDWDs7QUFFQTtBQUNBLHNDQUFzQyxNQUFNO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLG1CQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGtCQUFrQjtBQUNyQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUU7O0FBRXJFO0FBQ0E7QUFDQSxxQkFBcUIsNEJBQTRCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDRCQUE0QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHNKQUFzSjtBQUMvSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpSkFBaUo7QUFDeks7QUFDQTtBQUNBLHdCQUF3QixtSkFBbUo7QUFDM0s7QUFDQTtBQUNBLHdCQUF3QiwrSEFBK0g7QUFDdko7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlKQUFpSjtBQUN6SztBQUNBO0FBQ0Esd0JBQXdCLG1KQUFtSjtBQUMzSztBQUNBO0FBQ0Esd0JBQXdCLCtIQUErSDtBQUN2SjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsbUpBQW1KO0FBQzNLLHdCQUF3Qiw4SkFBOEo7QUFDdEwsd0JBQXdCLGtLQUFrSztBQUMxTCx3QkFBd0IsZ0tBQWdLO0FBQ3hMO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixpSkFBaUo7QUFDMUs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyxPQUFPO0FBQ1AsT0FBTztBQUNQO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEhBQTBIO0FBQzFIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EscUJBQXFCLCtDQUErQztBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLE9BQU87QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw2QkFBNkI7QUFDL0M7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLG1DQUFtQztBQUNuQyx5QkFBeUI7QUFDekIsbUNBQW1DO0FBQ25DLG9CQUFvQjtBQUNwQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixtQkFBbUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYyxtQkFBbUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0Esc0JBQXNCLDBJQUEwSTtBQUNoSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTs7QUFFWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZOztBQUVaLGNBQWM7QUFDZDtBQUNBO0FBQ0Esa0JBQWtCLG1CQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixrQkFBa0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx1QkFBdUIsaUhBQWlIO0FBQ3hJO0FBQ0EsS0FBSztBQUNMLHVCQUF1QixtQ0FBbUM7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix5QkFBeUI7QUFDNUM7QUFDQTtBQUNBLGVBQWUseUJBQXlCO0FBQ3hDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaLG1CQUFtQiw2REFBNkQ7QUFDaEY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixtQ0FBbUM7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDLG1CQUFtQixzQkFBc0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsc0NBQXNDO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxpQkFBaUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDRCQUE0QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2FiY19taWRpX2ZsYXR0ZW5lci5qcz8xMDkxIl0sInNvdXJjZXNDb250ZW50IjpbIi8vICAgIGFiY19taWRpX2ZsYXR0ZW5lci5qczogVHVybiBhIGxpbmVhciBzZXJpZXMgb2YgZXZlbnRzIGludG8gYSBzZXJpZXMgb2YgTUlESSBjb21tYW5kcy5cblxuLy8gV2UgaW5wdXQgYSBzZXQgb2Ygdm9pY2VzLCBidXQgdGhlIG5vdGVzIGFyZSBzdGlsbCBjb21wbGV4LiBUaGlzIHBhc3MgY2hhbmdlcyB0aGUgbG9naWNhbCBkZWZpbml0aW9uc1xuLy8gb2YgdGhlIGdyYWNlIG5vdGVzLCBkZWNvcmF0aW9ucywgdGllcywgdHJpcGxldHMsIHJlc3RzLCB0cmFuc3Bvc2l0aW9ucywga2V5cywgYW5kIGFjY2lkZW50YWxzIGludG8gYWN0dWFsIG5vdGUgZHVyYXRpb25zLlxuLy8gSXQgYWxzbyBleHRyYWN0cyBndWl0YXIgY2hvcmRzIHRvIGEgc2VwYXJhdGUgdm9pY2UgYW5kIHJlc29sdmVzIHRoZWlyIHJoeXRobS5cblxudmFyIGZsYXR0ZW47XG52YXIgQ2hvcmRUcmFjayA9IHJlcXVpcmUoXCIuL2Nob3JkLXRyYWNrXCIpO1xudmFyIHBpdGNoZXNUb1BlcmMgPSByZXF1aXJlKCcuL3BpdGNoZXMtdG8tcGVyYycpO1xuXG4oZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBiYXJBY2NpZGVudGFscztcblx0dmFyIGFjY2lkZW50YWxzO1xuXHR2YXIgdHJhbnNwb3NlO1xuXHR2YXIgYmFncGlwZXM7XG5cdHZhciB0cmFja3M7XG5cdHZhciBzdGFydGluZ1RlbXBvO1xuXHR2YXIgc3RhcnRpbmdNZXRlcjtcblx0dmFyIHRlbXBvQ2hhbmdlRmFjdG9yID0gMTtcblx0dmFyIGluc3RydW1lbnQ7XG5cdHZhciBjdXJyZW50SW5zdHJ1bWVudDtcblx0Ly8gdmFyIGNoYW5uZWw7XG5cdHZhciBjdXJyZW50VHJhY2s7XG5cdHZhciBsYXN0Tm90ZUR1cmF0aW9uUG9zaXRpb247XG5cdHZhciBjdXJyZW50VHJhY2tOYW1lO1xuXHR2YXIgbGFzdEV2ZW50VGltZTtcblx0dmFyIGNob3JkVHJhY2s7XG5cblx0dmFyIG1ldGVyID0geyBudW06IDQsIGRlbjogNCB9O1xuXHR2YXIgZHJ1bUluc3RydW1lbnQgPSAxMjg7XG5cdHZhciBsYXN0QmFyVGltZTtcblx0dmFyIGRvQmVhdEFjY2VudHMgPSB0cnVlO1xuXHR2YXIgc3RyZXNzQmVhdDEgPSAxMDU7XG5cdHZhciBzdHJlc3NCZWF0RG93biA9IDk1O1xuXHR2YXIgc3RyZXNzQmVhdFVwID0gODU7XG5cdHZhciB2b2x1bWVzUGVyTm90ZVBpdGNoID0gW1tzdHJlc3NCZWF0MSwgc3RyZXNzQmVhdERvd24sIHN0cmVzc0JlYXRVcF1dO1xuXHR2YXIgYmVhdEZyYWN0aW9uID0gMC4yNTtcblx0dmFyIG5leHRWb2x1bWU7XG5cdHZhciBuZXh0Vm9sdW1lRGVsdGE7XG5cdHZhciBzbHVyQ291bnQgPSAwO1xuXG5cdHZhciBkcnVtVHJhY2s7XG5cdHZhciBkcnVtVHJhY2tGaW5pc2hlZDtcblx0dmFyIGRydW1EZWZpbml0aW9uID0ge307XG5cdHZhciBkcnVtQmFycztcblxuXHR2YXIgcGlja3VwTGVuZ3RoID0gMDtcblx0dmFyIHBlcmNtYXA7XG5cblx0Ly8gVGhlIGdhcHMgcGVyIGJlYXQuIFRoZSBmaXJzdCB0d28gYXJlIGluIHNlY29uZHMsIHRoZSB0aGlyZCBpcyBpbiBmcmFjdGlvbiBvZiBhIGR1cmF0aW9uLlxuXHR2YXIgbm9ybWFsQnJlYWtCZXR3ZWVuTm90ZXMgPSAwOyAvLzAuMDAwNTIwODMzMzMzMzI1KjEuNTsgLy8gZm9yIGFydGljdWxhdGlvbiAobWF0Y2hlcyBtdXNlIHNjb3JlIHZhbHVlKVxuXHR2YXIgc2x1cnJlZEJyZWFrQmV0d2Vlbk5vdGVzID0gLTAuMDAxOyAvLyBtYWtlIHRoZSBzbHVycmVkIG5vdGVzIGFjdHVhbGx5IG92ZXJsYXBcblx0dmFyIHN0YWNjYXRvQnJlYWtCZXR3ZWVuTm90ZXMgPSAwLjQ7IC8vIHNvbWUgcGVvcGxlIHNheSBzdGFjY2F0byBpcyBoYWxmIGR1cmF0aW9uLCBzb21lIHNheSAzLzQgc28gdGhpcyBzcGxpdHMgaXRcblxuXHRmbGF0dGVuID0gZnVuY3Rpb24odm9pY2VzLCBvcHRpb25zLCBwZXJjbWFwXywgbWlkaU9wdGlvbnMpIHtcblx0XHRpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fTtcblx0XHRpZiAoIW1pZGlPcHRpb25zKSBtaWRpT3B0aW9ucyA9IHt9O1xuXHRcdGJhckFjY2lkZW50YWxzID0gW107XG5cdFx0YWNjaWRlbnRhbHMgPSBbMCwwLDAsMCwwLDAsMF07XG5cdFx0YmFncGlwZXMgPSBmYWxzZTtcblx0XHR0cmFja3MgPSBbXTtcblx0XHRzdGFydGluZ1RlbXBvID0gb3B0aW9ucy5xcG07XG5cdFx0c3RhcnRpbmdNZXRlciA9IHVuZGVmaW5lZDtcblx0XHR0ZW1wb0NoYW5nZUZhY3RvciA9IDE7XG5cdFx0aW5zdHJ1bWVudCA9IHVuZGVmaW5lZDtcblx0XHRjdXJyZW50SW5zdHJ1bWVudCA9IHVuZGVmaW5lZDtcblx0XHQvLyBjaGFubmVsID0gdW5kZWZpbmVkO1xuXHRcdGN1cnJlbnRUcmFjayA9IHVuZGVmaW5lZDtcblx0XHRjdXJyZW50VHJhY2tOYW1lID0gdW5kZWZpbmVkO1xuXHRcdGxhc3RFdmVudFRpbWUgPSAwO1xuXHRcdHBlcmNtYXAgPSBwZXJjbWFwXztcblxuXHRcdG1ldGVyID0geyBudW06IDQsIGRlbjogNCB9O1xuXG5cdFx0ZG9CZWF0QWNjZW50cyA9IHRydWU7XG5cdFx0c3RyZXNzQmVhdDEgPSAxMDU7XG5cdFx0c3RyZXNzQmVhdERvd24gPSA5NTtcblx0XHRzdHJlc3NCZWF0VXAgPSA4NTtcblx0XHR2b2x1bWVzUGVyTm90ZVBpdGNoID0gW107XG5cdFx0YmVhdEZyYWN0aW9uID0gMC4yNTtcblx0XHRuZXh0Vm9sdW1lID0gdW5kZWZpbmVkO1xuXHRcdG5leHRWb2x1bWVEZWx0YSA9IHVuZGVmaW5lZDtcblx0XHRzbHVyQ291bnQgPSAwO1xuXG5cdFx0Ly8gRm9yIHRoZSBkcnVtL21ldHJvbm9tZSB0cmFjay5cblx0XHRkcnVtVHJhY2sgPSBbXTtcblx0XHRkcnVtVHJhY2tGaW5pc2hlZCA9IGZhbHNlO1xuXHRcdGRydW1EZWZpbml0aW9uID0ge307XG5cdFx0ZHJ1bUJhcnMgPSAxO1xuXG5cdFx0aWYgKHZvaWNlcy5sZW5ndGggPiAwICYmIHZvaWNlc1swXS5sZW5ndGggPiAwKVxuXHRcdFx0cGlja3VwTGVuZ3RoID0gdm9pY2VzWzBdWzBdLnBpY2t1cExlbmd0aDtcblxuXHRcdC8vIEZvciByZXNvbHZpbmcgY2hvcmRzLlxuXHRcdGlmIChvcHRpb25zLmJhc3Nwcm9nICE9PSB1bmRlZmluZWQgJiYgIW1pZGlPcHRpb25zLmJhc3Nwcm9nKVxuXHRcdFx0bWlkaU9wdGlvbnMuYmFzc3Byb2cgPSBbb3B0aW9ucy5iYXNzcHJvZ11cblx0XHRpZiAob3B0aW9ucy5iYXNzdm9sICE9PSB1bmRlZmluZWQgJiYgIW1pZGlPcHRpb25zLmJhc3N2b2wpXG5cdFx0XHRtaWRpT3B0aW9ucy5iYXNzdm9sID0gW29wdGlvbnMuYmFzc3ZvbF1cblx0XHRpZiAob3B0aW9ucy5jaG9yZHByb2cgIT09IHVuZGVmaW5lZCAmJiAhbWlkaU9wdGlvbnMuY2hvcmRwcm9nKVxuXHRcdFx0bWlkaU9wdGlvbnMuY2hvcmRwcm9nID0gW29wdGlvbnMuY2hvcmRwcm9nXVxuXHRcdGlmIChvcHRpb25zLmNob3Jkdm9sICE9PSB1bmRlZmluZWQgJiYgIW1pZGlPcHRpb25zLmNob3Jkdm9sKVxuXHRcdFx0bWlkaU9wdGlvbnMuY2hvcmR2b2wgPSBbb3B0aW9ucy5jaG9yZHZvbF1cblx0XHRpZiAob3B0aW9ucy5nY2hvcmQgIT09IHVuZGVmaW5lZCAmJiAhbWlkaU9wdGlvbnMuZ2Nob3JkKVxuXHRcdFx0bWlkaU9wdGlvbnMuZ2Nob3JkID0gW29wdGlvbnMuZ2Nob3JkXVxuXHRcdGNob3JkVHJhY2sgPSBuZXcgQ2hvcmRUcmFjayh2b2ljZXMubGVuZ3RoLCBvcHRpb25zLmNob3Jkc09mZiwgbWlkaU9wdGlvbnMsIG1ldGVyKVxuXG5cdFx0Ly8gRmlyc3QgYWRqdXN0IHRoZSBpbnB1dCB0byByZXNvbHZlIHRpZXMsIHNldCB0aGUgc3RhcnRpbmcgdGltZSBmb3IgZWFjaCBub3RlLCBldGMuIFRoYXQgd2lsbCBtYWtlIHRoZSByZXN0IG9mIHRoZSBsb2dpYyBlYXNpZXJcblx0XHRwcmVQcm9jZXNzKHZvaWNlcywgb3B0aW9ucyk7XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHZvaWNlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dHJhbnNwb3NlID0gMDtcblx0XHRcdGNob3JkVHJhY2suc2V0VHJhbnNwb3NlKHRyYW5zcG9zZSlcblx0XHRcdGxhc3ROb3RlRHVyYXRpb25Qb3NpdGlvbiA9IC0xO1xuXHRcdFx0dmFyIHZvaWNlID0gdm9pY2VzW2ldO1xuXHRcdFx0Y3VycmVudFRyYWNrID0gW3sgY21kOiAncHJvZ3JhbScsIGNoYW5uZWw6IGksIGluc3RydW1lbnQ6IGluc3RydW1lbnQgfV07XG5cdFx0XHRjdXJyZW50VHJhY2tOYW1lID0gdW5kZWZpbmVkO1xuXHRcdFx0bGFzdEJhclRpbWUgPSAwO1xuXHRcdFx0Y2hvcmRUcmFjay5zZXRMYXN0QmFyVGltZSgwKVxuXHRcdFx0dmFyIHZvaWNlT2ZmID0gZmFsc2U7XG5cdFx0XHRpZiAob3B0aW9ucy52b2ljZXNPZmYgPT09IHRydWUpXG5cdFx0XHRcdHZvaWNlT2ZmID0gdHJ1ZTtcblx0XHRcdGVsc2UgaWYgKG9wdGlvbnMudm9pY2VzT2ZmICYmIG9wdGlvbnMudm9pY2VzT2ZmLmxlbmd0aCAmJiBvcHRpb25zLnZvaWNlc09mZi5pbmRleE9mKGkpID49IDApXG5cdFx0XHRcdHZvaWNlT2ZmID0gdHJ1ZTtcblx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgdm9pY2UubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0dmFyIGVsZW1lbnQgPSB2b2ljZVtqXTtcblx0XHRcdFx0c3dpdGNoIChlbGVtZW50LmVsX3R5cGUpIHtcblx0XHRcdFx0XHRjYXNlIFwibmFtZVwiOlxuXHRcdFx0XHRcdFx0Y3VycmVudFRyYWNrTmFtZSA9IHtjbWQ6ICd0ZXh0JywgdHlwZTogXCJuYW1lXCIsIHRleHQ6IGVsZW1lbnQudHJhY2tOYW1lIH07XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwibm90ZVwiOlxuXHRcdFx0XHRcdFx0d3JpdGVOb3RlKGVsZW1lbnQsIHZvaWNlT2ZmKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJrZXlcIjpcblx0XHRcdFx0XHRcdGFjY2lkZW50YWxzID0gc2V0S2V5U2lnbmF0dXJlKGVsZW1lbnQpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcIm1ldGVyXCI6XG5cdFx0XHRcdFx0XHRpZiAoIXN0YXJ0aW5nTWV0ZXIpXG5cdFx0XHRcdFx0XHRcdHN0YXJ0aW5nTWV0ZXIgPSBlbGVtZW50O1xuXHRcdFx0XHRcdFx0bWV0ZXIgPSBlbGVtZW50O1xuXHRcdFx0XHRcdFx0Y2hvcmRUcmFjay5zZXRNZXRlcihtZXRlcilcblx0XHRcdFx0XHRcdGJlYXRGcmFjdGlvbiA9IGdldEJlYXRGcmFjdGlvbihtZXRlcik7XG5cdFx0XHRcdFx0XHRhbGlnbkRydW1Ub01ldGVyKCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwidGVtcG9cIjpcblx0XHRcdFx0XHRcdGlmICghc3RhcnRpbmdUZW1wbylcblx0XHRcdFx0XHRcdFx0c3RhcnRpbmdUZW1wbyA9IGVsZW1lbnQucXBtO1xuXHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHR0ZW1wb0NoYW5nZUZhY3RvciA9IGVsZW1lbnQucXBtID8gc3RhcnRpbmdUZW1wbyAvIGVsZW1lbnQucXBtIDogMTtcblx0XHRcdFx0XHRcdGNob3JkVHJhY2suc2V0VGVtcG9DaGFuZ2VGYWN0b3IodGVtcG9DaGFuZ2VGYWN0b3IpXG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwidHJhbnNwb3NlXCI6XG5cdFx0XHRcdFx0XHR0cmFuc3Bvc2UgPSBlbGVtZW50LnRyYW5zcG9zZTtcblx0XHRcdFx0XHRcdGNob3JkVHJhY2suc2V0VHJhbnNwb3NlKHRyYW5zcG9zZSlcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJiYXJcIjpcblx0XHRcdFx0XHRcdGNob3JkVHJhY2suYmFyRW5kKGVsZW1lbnQpXG5cblx0XHRcdFx0XHRcdGJhckFjY2lkZW50YWxzID0gW107XG5cdFx0XHRcdFx0XHRpZiAoaSA9PT0gMCkgLy8gT25seSB3cml0ZSB0aGUgZHJ1bSBwYXJ0IG9uIHRoZSBmaXJzdCB2b2ljZSBzbyB0aGF0IGl0IGlzIG5vdCBkdXBsaWNhdGVkLlxuXHRcdFx0XHRcdFx0XHR3cml0ZURydW0odm9pY2VzLmxlbmd0aCsxKTtcblx0XHRcdFx0XHRcdFx0Y2hvcmRUcmFjay5zZXRSaHl0aG1IZWFkKGZhbHNlKSAvLyBkZWNpZGUgd2hldGhlciB0aGVyZSBhcmUgcmh5dGhtIGhlYWRzIGVhY2ggbWVhc3VyZS5cblx0XHRcdFx0XHRcdGxhc3RCYXJUaW1lID0gdGltZVRvUmVhbFRpbWUoZWxlbWVudC50aW1lKTtcblx0XHRcdFx0XHRcdGNob3JkVHJhY2suc2V0TGFzdEJhclRpbWUobGFzdEJhclRpbWUpXG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwiYmFncGlwZXNcIjpcblx0XHRcdFx0XHRcdGJhZ3BpcGVzID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJpbnN0cnVtZW50XCI6XG5cdFx0XHRcdFx0XHRpZiAoaW5zdHJ1bWVudCA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdFx0XHRpbnN0cnVtZW50ID0gZWxlbWVudC5wcm9ncmFtO1xuXHRcdFx0XHRcdFx0Y3VycmVudEluc3RydW1lbnQgPSBlbGVtZW50LnByb2dyYW07XG5cdFx0XHRcdFx0XHRpZiAoY3VycmVudFRyYWNrLmxlbmd0aCA+IDAgJiYgY3VycmVudFRyYWNrW2N1cnJlbnRUcmFjay5sZW5ndGgtMV0uY21kID09PSAncHJvZ3JhbScpXG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRUcmFja1tjdXJyZW50VHJhY2subGVuZ3RoLTFdLmluc3RydW1lbnQgPSBlbGVtZW50LnByb2dyYW07XG5cdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0dmFyIGlpO1xuXHRcdFx0XHRcdFx0XHRmb3IgKGlpID0gY3VycmVudFRyYWNrLmxlbmd0aC0xOyBpaSA+PSAwICYmIGN1cnJlbnRUcmFja1tpaV0uY21kICE9PSAncHJvZ3JhbSc7IGlpLS0pXG5cdFx0XHRcdFx0XHRcdFx0O1xuXHRcdFx0XHRcdFx0XHRpZiAoaWkgPCAwIHx8IGN1cnJlbnRUcmFja1tpaV0uaW5zdHJ1bWVudCAhPT0gZWxlbWVudC5wcm9ncmFtKVxuXHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRUcmFjay5wdXNoKHtjbWQ6ICdwcm9ncmFtJywgY2hhbm5lbDogMCwgaW5zdHJ1bWVudDogZWxlbWVudC5wcm9ncmFtfSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwiY2hhbm5lbFwiOlxuXHRcdFx0XHRcdFx0c2V0Q2hhbm5lbChlbGVtZW50LmNoYW5uZWwpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcImRydW1cIjpcblx0XHRcdFx0XHRcdGRydW1EZWZpbml0aW9uID0gbm9ybWFsaXplRHJ1bURlZmluaXRpb24oZWxlbWVudC5wYXJhbXMpO1xuXHRcdFx0XHRcdFx0YWxpZ25EcnVtVG9NZXRlcigpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcImdjaG9yZE9uXCI6XG5cdFx0XHRcdFx0XHRjaG9yZFRyYWNrLmdDaG9yZE9uKGVsZW1lbnQpXG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwiYmVhdFwiOlxuXHRcdFx0XHRcdFx0c3RyZXNzQmVhdDEgPSBlbGVtZW50LmJlYXRzWzBdO1xuXHRcdFx0XHRcdFx0c3RyZXNzQmVhdERvd24gPSBlbGVtZW50LmJlYXRzWzFdO1xuXHRcdFx0XHRcdFx0c3RyZXNzQmVhdFVwID0gZWxlbWVudC5iZWF0c1syXTtcblx0XHRcdFx0XHRcdGlmICghZWxlbWVudC52b2x1bWVzUGVyTm90ZVBpdGNoKVxuXHRcdFx0XHRcdFx0XHR2b2x1bWVzUGVyTm90ZVBpdGNoID0gW11cblx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdFx0dm9sdW1lc1Blck5vdGVQaXRjaCA9IGVsZW1lbnQudm9sdW1lc1Blck5vdGVQaXRjaDtcblx0XHRcdFx0XHRcdC8vIFRPRE8tUEVSOiBhbHNvIHVzZSB0aGUgbGFzdCBwYXJhbWV0ZXIgLSB3aGljaCBjaGFuZ2VzIHdoaWNoIGJlYXRzIGFyZSBzdHJvbmcuXG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwidm9sXCI6XG5cdFx0XHRcdFx0XHRuZXh0Vm9sdW1lID0gZWxlbWVudC52b2x1bWU7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwidm9saW5jXCI6XG5cdFx0XHRcdFx0XHRuZXh0Vm9sdW1lRGVsdGEgPSBlbGVtZW50LnZvbHVtZTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJiZWF0YWNjZW50c1wiOlxuXHRcdFx0XHRcdFx0ZG9CZWF0QWNjZW50cyA9IGVsZW1lbnQudmFsdWU7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwiZ2Nob3JkXCI6XG5cdFx0XHRcdFx0Y2FzZSBcImJhc3Nwcm9nXCI6XG5cdFx0XHRcdFx0Y2FzZSBcImNob3JkcHJvZ1wiOlxuXHRcdFx0XHRcdGNhc2UgXCJiYXNzdm9sXCI6XG5cdFx0XHRcdFx0Y2FzZSBcImNob3Jkdm9sXCI6XG5cdFx0XHRcdFx0Y2FzZSBcImdjaG9yZGJhcnNcIjpcblx0XHRcdFx0XHRcdGNob3JkVHJhY2sucGFyYW1DaGFuZ2UoZWxlbWVudClcblx0XHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdC8vIFRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlblxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJNSURJIGNyZWF0aW9uLiBVbmtub3duIGVsX3R5cGU6IFwiICsgZWxlbWVudC5lbF90eXBlICsgXCJcXG5cIik7Ly8ganNoaW50IGlnbm9yZTpsaW5lXG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKGN1cnJlbnRUcmFja1swXS5pbnN0cnVtZW50ID09PSB1bmRlZmluZWQpXG5cdFx0XHRcdGN1cnJlbnRUcmFja1swXS5pbnN0cnVtZW50ID0gaW5zdHJ1bWVudCA/IGluc3RydW1lbnQgOiAwO1xuXHRcdFx0aWYgKGN1cnJlbnRUcmFja05hbWUpXG5cdFx0XHRcdGN1cnJlbnRUcmFjay51bnNoaWZ0KGN1cnJlbnRUcmFja05hbWUpO1xuXHRcdFx0dHJhY2tzLnB1c2goY3VycmVudFRyYWNrKTtcblx0XHRcdGNob3JkVHJhY2suZmluaXNoKClcblx0XHRcdGlmIChkcnVtVHJhY2subGVuZ3RoID4gMCkgLy8gRG9uJ3QgZG8gZHJ1bXMgb24gbW9yZSB0aGFuIG9uZSB0cmFjaywgc28gdHVybiBvZmYgZHJ1bSBhZnRlciB3ZSBjcmVhdGUgaXQuXG5cdFx0XHRcdGRydW1UcmFja0ZpbmlzaGVkID0gdHJ1ZTtcblx0XHR9XG5cdFx0Ly8gU2VlIGlmIGFueSBub3RlcyBhcmUgb2N0YXZlcyBwbGF5ZWQgYXQgdGhlIHNhbWUgdGltZS4gSWYgc28sIHJhaXNlIHRoZSBwaXRjaCBvZiB0aGUgaGlnaGVyIG9uZS5cblx0XHRpZiAob3B0aW9ucy5kZXR1bmVPY3RhdmUpXG5cdFx0XHRmaW5kT2N0YXZlcyh0cmFja3MsIHBhcnNlSW50KG9wdGlvbnMuZGV0dW5lT2N0YXZlLCAxMCkpO1xuXG5cdFx0Y2hvcmRUcmFjay5hZGRUcmFjayh0cmFja3MpXG5cdFx0aWYgKGRydW1UcmFjay5sZW5ndGggPiAwKVxuXHRcdFx0dHJhY2tzLnB1c2goZHJ1bVRyYWNrKTtcblxuXHRcdHJldHVybiB7IHRlbXBvOiBzdGFydGluZ1RlbXBvLCBpbnN0cnVtZW50OiBpbnN0cnVtZW50LCB0cmFja3M6IHRyYWNrcywgdG90YWxEdXJhdGlvbjogbGFzdEV2ZW50VGltZSB9O1xuXHR9O1xuXG5cdGZ1bmN0aW9uIHNldENoYW5uZWwoY2hhbm5lbCkge1xuXHRcdGZvciAodmFyIGkgPSBjdXJyZW50VHJhY2subGVuZ3RoLTE7IGk+PTA7IGktLSkge1xuXHRcdFx0aWYgKGN1cnJlbnRUcmFja1tpXS5jbWQgPT09IFwicHJvZ3JhbVwiKSB7XG5cdFx0XHRcdGN1cnJlbnRUcmFja1tpXS5jaGFubmVsID0gY2hhbm5lbDtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHRpbWVUb1JlYWxUaW1lKHRpbWUpIHtcblx0XHRyZXR1cm4gdGltZS8xMDAwMDAwO1xuXHR9XG5cblx0ZnVuY3Rpb24gZHVyYXRpb25Sb3VuZGVkKGR1cmF0aW9uKSB7XG5cdFx0cmV0dXJuIE1hdGgucm91bmQoZHVyYXRpb24qdGVtcG9DaGFuZ2VGYWN0b3IqMTAwMDAwMCkvMTAwMDAwMDtcblx0fVxuXG5cdGZ1bmN0aW9uIHByZVByb2Nlc3Modm9pY2VzLCBvcHRpb25zKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB2b2ljZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciB2b2ljZSA9IHZvaWNlc1tpXTtcblx0XHRcdHZhciB0aWVzID0ge307XG5cdFx0XHR2YXIgc3RhcnRpbmdUZW1wbyA9IG9wdGlvbnMucXBtO1xuXHRcdFx0dmFyIHRpbWVDb3VudGVyID0gMDtcblx0XHRcdHZhciB0ZW1wb011bHRpcGxpZXIgPSAxO1xuXHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCB2b2ljZS5sZW5ndGg7IGorKykge1xuXHRcdFx0XHR2YXIgZWxlbWVudCA9IHZvaWNlW2pdO1xuXG5cdFx0XHRcdGlmIChlbGVtZW50LmVsX3R5cGUgPT09ICd0ZW1wbycpIHtcblx0XHRcdFx0XHRpZiAoIXN0YXJ0aW5nVGVtcG8pXG5cdFx0XHRcdFx0XHRzdGFydGluZ1RlbXBvID0gZWxlbWVudC5xcG07XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0dGVtcG9NdWx0aXBsaWVyID0gZWxlbWVudC5xcG0gPyBzdGFydGluZ1RlbXBvIC8gZWxlbWVudC5xcG0gOiAxO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRm9yIGNvbnZlbmllbmNlLCBwdXQgdGhlIGN1cnJlbnQgdGltZSBpbiBlYWNoIGV2ZW50IHNvIHRoYXQgaXQgZG9lc24ndCBoYXZlIHRvIGJlIGNhbGN1bGF0ZWQgaW4gdGhlIGNvbXBsaWNhdGVkIHN0dWZmIHRoYXQgZm9sbG93cy5cblx0XHRcdFx0ZWxlbWVudC50aW1lID0gdGltZUNvdW50ZXI7XG5cdFx0XHRcdHZhciB0aGlzRHVyYXRpb24gPSBlbGVtZW50LmR1cmF0aW9uID8gZWxlbWVudC5kdXJhdGlvbiA6IDA7XG5cdFx0XHRcdHRpbWVDb3VudGVyICs9IE1hdGgucm91bmQodGhpc0R1cmF0aW9uKnRlbXBvTXVsdGlwbGllcioxMDAwMDAwKTsgLy8gVG8gY29tcGVuc2F0ZSBmb3IgSlMgcm91bmRpbmcgcHJvYmxlbXMsIGRvIGFsbCBpbnRlcm1lZGlhdGUgY2FsY3Mgb24gaW50ZWdlcnMuXG5cblx0XHRcdFx0Ly8gSWYgdGhlcmUgYXJlIHBpdGNoZXMgdGhlbiBwdXQgdGhlIGR1cmF0aW9uIGluIHRoZSBwaXRjaCBvYmplY3QgYW5kIGlmIHRoZXJlIGFyZSB0aWVzIHRoZW4gY2hhbmdlIHRoZSBkdXJhdGlvbiBvZiB0aGUgZmlyc3Qgbm90ZSBpbiB0aGUgdGllLlxuXHRcdFx0XHRpZiAoZWxlbWVudC5waXRjaGVzKSB7XG5cdFx0XHRcdFx0Zm9yICh2YXIgayA9IDA7IGsgPCBlbGVtZW50LnBpdGNoZXMubGVuZ3RoOyBrKyspIHtcblx0XHRcdFx0XHRcdHZhciBwaXRjaCA9IGVsZW1lbnQucGl0Y2hlc1trXTtcblx0XHRcdFx0XHRcdGlmIChwaXRjaCkge1xuXHRcdFx0XHRcdFx0XHRwaXRjaC5kdXJhdGlvbiA9IGVsZW1lbnQuZHVyYXRpb247XG5cdFx0XHRcdFx0XHRcdGlmIChwaXRjaC5zdGFydFRpZSkge1xuXHRcdFx0XHRcdFx0XHRcdC8vY29uc29sZS5sb2coZWxlbWVudClcblx0XHRcdFx0XHRcdFx0XHRpZiAodGllc1twaXRjaC5waXRjaF0gPT09IHVuZGVmaW5lZCkgLy8gV2UgbWlnaHQgaGF2ZSB0aHJlZSBub3RlcyB0aWVkIHRvZ2V0aGVyIC0gaWYgc28ganVzdCBhZGQgdGhpcyBkdXJhdGlvbi5cblx0XHRcdFx0XHRcdFx0XHRcdHRpZXNbcGl0Y2gucGl0Y2hdID0ge2VsOiBqLCBwaXRjaDoga307XG5cdFx0XHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2b2ljZVt0aWVzW3BpdGNoLnBpdGNoXS5lbF0ucGl0Y2hlc1t0aWVzW3BpdGNoLnBpdGNoXS5waXRjaF0uZHVyYXRpb24gKz0gcGl0Y2guZHVyYXRpb247XG5cdFx0XHRcdFx0XHRcdFx0XHRlbGVtZW50LnBpdGNoZXNba10gPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKFwiPj4+IFNUQVJUXCIsIEpTT04uc3RyaW5naWZ5KHRpZXMpKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChwaXRjaC5lbmRUaWUpIHtcblx0XHRcdFx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKGVsZW1lbnQpXG5cdFx0XHRcdFx0XHRcdFx0dmFyIHRpZSA9IHRpZXNbcGl0Y2gucGl0Y2hdO1xuXHRcdFx0XHRcdFx0XHRcdC8vY29uc29sZS5sb2coXCI+Pj4gRU5EXCIsIHBpdGNoLnBpdGNoLCB0aWUsIEpTT04uc3RyaW5naWZ5KHRpZXMpKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAodGllKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgZHVyID0gcGl0Y2guZHVyYXRpb247XG5cdFx0XHRcdFx0XHRcdFx0XHRkZWxldGUgdm9pY2VbdGllLmVsXS5waXRjaGVzW3RpZS5waXRjaF0uc3RhcnRUaWU7XG5cdFx0XHRcdFx0XHRcdFx0XHR2b2ljZVt0aWUuZWxdLnBpdGNoZXNbdGllLnBpdGNoXS5kdXJhdGlvbiArPSBkdXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRlbGVtZW50LnBpdGNoZXNba10gPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGVsZXRlIHRpZXNbcGl0Y2gucGl0Y2hdO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRkZWxldGUgcGl0Y2guZW5kVGllO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkZWxldGUgZWxlbWVudC5kdXJhdGlvbjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Zm9yICh2YXIga2V5IGluIHRpZXMpIHtcblx0XHRcdFx0aWYgKHRpZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0XHRcdHZhciBpdGVtID0gdGllc1trZXldO1xuXHRcdFx0XHRcdGRlbGV0ZSB2b2ljZVtpdGVtLmVsXS5waXRjaGVzW2l0ZW0ucGl0Y2hdLnN0YXJ0VGllO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvLyB2b2ljZXNbMF0uZm9yRWFjaCh2ID0+IGRlbGV0ZSB2LmVsZW0pXG5cdFx0XHQvLyB2b2ljZXNbMV0uZm9yRWFjaCh2ID0+IGRlbGV0ZSB2LmVsZW0pXG5cdFx0XHQvLyBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh2b2ljZXMpKVxuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGdldEJlYXRGcmFjdGlvbihtZXRlcikge1xuXHRcdHN3aXRjaCAocGFyc2VJbnQobWV0ZXIuZGVuLDEwKSkge1xuXHRcdFx0Y2FzZSAyOiByZXR1cm4gMC41O1xuXHRcdFx0Y2FzZSA0OiByZXR1cm4gMC4yNTtcblx0XHRcdGNhc2UgODpcblx0XHRcdFx0aWYgKG1ldGVyLm51bSAlIDMgPT09IDApXG5cdFx0XHRcdFx0cmV0dXJuIDAuMzc1O1xuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0cmV0dXJuIDAuMTI1O1xuXHRcdFx0Y2FzZSAxNjogcmV0dXJuIDAuMTI1O1xuXHRcdH1cblx0XHRyZXR1cm4gMC4yNTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNhbGNCZWF0KG1lYXN1cmVTdGFydCwgYmVhdExlbmd0aCwgY3VyclRpbWUpIHtcblx0XHR2YXIgZGlzdGFuY2VGcm9tU3RhcnQgPSBjdXJyVGltZSAtIG1lYXN1cmVTdGFydDtcblx0XHRyZXR1cm4gZGlzdGFuY2VGcm9tU3RhcnQgLyBiZWF0TGVuZ3RoO1xuXHR9XG5cblx0ZnVuY3Rpb24gcHJvY2Vzc1ZvbHVtZShiZWF0LCB2b2ljZU9mZiwgcGl0Y2hJbmRleE9mTm90ZSkge1xuXHRcdGlmICh2b2ljZU9mZilcblx0XHRcdHJldHVybiAwO1xuXHRcdGxldCBwaXRjaFN0cmVzc0JlYXQxID0gc3RyZXNzQmVhdDE7XG5cdFx0bGV0IHBpdGNoU3RyZXNzQmVhdERvd24gPSBzdHJlc3NCZWF0RG93bjtcblx0XHRsZXQgcGl0Y2hTdHJlc3NCZWF0VXAgPSBzdHJlc3NCZWF0VXA7XG5cdFx0aWYocGl0Y2hJbmRleE9mTm90ZSAhPT0gdW5kZWZpbmVkICYmIHZvbHVtZXNQZXJOb3RlUGl0Y2gubGVuZ3RoID49IHBpdGNoSW5kZXhPZk5vdGUrMSl7XG5cdFx0XHRwaXRjaFN0cmVzc0JlYXQxID0gdm9sdW1lc1Blck5vdGVQaXRjaFtwaXRjaEluZGV4T2ZOb3RlXVswXTtcblx0XHRcdHBpdGNoU3RyZXNzQmVhdERvd24gPSB2b2x1bWVzUGVyTm90ZVBpdGNoW3BpdGNoSW5kZXhPZk5vdGVdWzFdO1xuXHRcdFx0cGl0Y2hTdHJlc3NCZWF0VXAgPSB2b2x1bWVzUGVyTm90ZVBpdGNoW3BpdGNoSW5kZXhPZk5vdGVdWzJdO1xuXHRcdH1cblx0XHR2YXIgdm9sdW1lO1xuICAgIFx0Ly8gTUFFIDIxIEp1biAyMDI0IC0gVGhpcyBwcmV2aW91c2x5IHdhc24ndCBhbGxvd2luZyB6ZXJvIHZvbHVtZSB0byBiZSBhcHBsaWVkXG5cdFx0aWYgKG5leHRWb2x1bWUgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0dm9sdW1lID0gbmV4dFZvbHVtZTtcblx0XHRcdG5leHRWb2x1bWUgPSB1bmRlZmluZWQ7XG5cdFx0fSBlbHNlIGlmICghZG9CZWF0QWNjZW50cykge1xuXHRcdFx0dm9sdW1lID0gcGl0Y2hTdHJlc3NCZWF0RG93bjtcblx0XHR9IGVsc2UgaWYgKHBpY2t1cExlbmd0aCA+IGJlYXQpIHtcblx0XHRcdHZvbHVtZSA9IHBpdGNoU3RyZXNzQmVhdFVwO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvL3ZhciBiYXJMZW5ndGggPSBtZXRlci5udW0gLyBtZXRlci5kZW47XG5cdFx0XHR2YXIgYmFyQmVhdCA9IGNhbGNCZWF0KGxhc3RCYXJUaW1lLCBnZXRCZWF0RnJhY3Rpb24obWV0ZXIpLCBiZWF0KTtcblx0XHRcdGlmIChiYXJCZWF0ID09PSAwKVxuXHRcdFx0XHR2b2x1bWUgPSBwaXRjaFN0cmVzc0JlYXQxO1xuXHRcdFx0ZWxzZSBpZiAocGFyc2VJbnQoYmFyQmVhdCwxMCkgPT09IGJhckJlYXQpXG5cdFx0XHRcdHZvbHVtZSA9IHBpdGNoU3RyZXNzQmVhdERvd247XG5cdFx0XHRlbHNlXG5cdFx0XHRcdHZvbHVtZSA9IHBpdGNoU3RyZXNzQmVhdFVwO1xuXHRcdH1cblx0XHRpZiAobmV4dFZvbHVtZURlbHRhKSB7XG5cdFx0XHR2b2x1bWUgKz0gbmV4dFZvbHVtZURlbHRhO1xuXHRcdFx0bmV4dFZvbHVtZURlbHRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAodm9sdW1lIDwgMClcblx0XHRcdHZvbHVtZSA9IDA7XG5cdFx0aWYgKHZvbHVtZSA+IDEyNylcblx0XHRcdHZvbHVtZSA9IDEyNztcblx0XHRyZXR1cm4gdm9pY2VPZmYgPyAwIDogdm9sdW1lO1xuXHR9XG5cblxuXHRmdW5jdGlvbiBmaW5kTm90ZU1vZGlmaWNhdGlvbnMoZWxlbSwgdmVsb2NpdHkpIHtcblx0XHR2YXIgcmV0ID0geyB9O1xuXHRcdGlmIChlbGVtLmRlY29yYXRpb24pIHtcblx0XHRcdGZvciAodmFyIGQgPSAwOyBkIDwgZWxlbS5kZWNvcmF0aW9uLmxlbmd0aDsgZCsrKSB7XG5cdFx0XHRcdGlmIChlbGVtLmRlY29yYXRpb25bZF0gPT09ICdzdGFjY2F0bycpXG5cdFx0XHRcdFx0cmV0LnRoaXNCcmVha0JldHdlZW5Ob3RlcyA9ICdzdGFjY2F0byc7XG5cdFx0XHRcdGVsc2UgaWYgKGVsZW0uZGVjb3JhdGlvbltkXSA9PT0gJ3RlbnV0bycpXG5cdFx0XHRcdFx0cmV0LnRoaXNCcmVha0JldHdlZW5Ob3RlcyA9ICd0ZW51dG8nO1xuXHRcdFx0XHRlbHNlIGlmIChlbGVtLmRlY29yYXRpb25bZF0gPT09ICdhY2NlbnQnKVxuXHRcdFx0XHRcdHJldC52ZWxvY2l0eSA9IE1hdGgubWluKDEyNywgdmVsb2NpdHkgKiAxLjUpO1xuXHRcdFx0XHRlbHNlIGlmIChlbGVtLmRlY29yYXRpb25bZF0gPT09ICd0cmlsbCcpXG5cdFx0XHRcdFx0cmV0Lm5vdGVNb2RpZmljYXRpb24gPSBcInRyaWxsXCI7XG5cdFx0XHRcdGVsc2UgaWYgKGVsZW0uZGVjb3JhdGlvbltkXSA9PT0gJ2xvd2VybW9yZGVudCcpXG5cdFx0XHRcdFx0cmV0Lm5vdGVNb2RpZmljYXRpb24gPSBcImxvd2VybW9yZGVudFwiO1xuXHRcdFx0XHRlbHNlIGlmIChlbGVtLmRlY29yYXRpb25bZF0gPT09ICd1cHBlcm1vcmRlbnQnKVxuXHRcdFx0XHRcdHJldC5ub3RlTW9kaWZpY2F0aW9uID0gXCJwcmFsbHRyaWxsZXJcIjtcblx0XHRcdFx0ZWxzZSBpZiAoZWxlbS5kZWNvcmF0aW9uW2RdID09PSAnbW9yZGVudCcpXG5cdFx0XHRcdFx0cmV0Lm5vdGVNb2RpZmljYXRpb24gPSBcIm1vcmRlbnRcIjtcblx0XHRcdFx0ZWxzZSBpZiAoZWxlbS5kZWNvcmF0aW9uW2RdID09PSAndHVybicpXG5cdFx0XHRcdFx0cmV0Lm5vdGVNb2RpZmljYXRpb24gPSBcInR1cm5cIjtcblx0XHRcdFx0ZWxzZSBpZiAoZWxlbS5kZWNvcmF0aW9uW2RdID09PSAncm9sbCcpXG5cdFx0XHRcdFx0cmV0Lm5vdGVNb2RpZmljYXRpb24gPSBcInJvbGxcIjtcblx0XHRcdFx0ZWxzZSBpZiAoZWxlbS5kZWNvcmF0aW9uW2RdID09PSAncHJhbGx0cmlsbGVyJylcblx0XHRcdFx0XHRyZXQubm90ZU1vZGlmaWNhdGlvbiA9IFwicHJhbGx0cmlsbGVyXCI7XG5cdFx0XHRcdGVsc2UgaWYgKGVsZW0uZGVjb3JhdGlvbltkXSA9PT0gJ3RyaWxsaCcpIFxuXHRcdFx0XHRcdHJldC5ub3RlTW9kaWZpY2F0aW9uID0gXCJ0cmlsbGhcIjtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHJldDtcblx0fVxuXG5cdGZ1bmN0aW9uIGRvTW9kaWZpZWROb3Rlcyhub3RlTW9kaWZpY2F0aW9uLCBwKSB7XG5cdFx0dmFyIG5vdGVUaW1lO1xuXHRcdHZhciBudW1Ob3Rlcztcblx0XHR2YXIgc3RhcnQgPSBwLnN0YXJ0O1xuXHRcdHZhciBwcDtcblx0XHR2YXIgcnVubmluZ0R1cmF0aW9uID0gcC5kdXJhdGlvbjtcblx0XHR2YXIgc2hvcnRlc3ROb3RlID0gZHVyYXRpb25Sb3VuZGVkKDEuMCAvIDMyKTtcblxuXHRcdHN3aXRjaCAobm90ZU1vZGlmaWNhdGlvbikge1xuXHRcdFx0Y2FzZSBcInRyaWxsXCI6XG5cdFx0XHRcdHZhciBub3RlID0gMjtcblx0XHRcdFx0d2hpbGUgKHJ1bm5pbmdEdXJhdGlvbiA+IDApIHtcblx0XHRcdFx0XHRjdXJyZW50VHJhY2sucHVzaCh7IGNtZDogJ25vdGUnLCBwaXRjaDogcC5waXRjaCtub3RlLCB2b2x1bWU6IHAudm9sdW1lLCBzdGFydDogc3RhcnQsIGR1cmF0aW9uOiBzaG9ydGVzdE5vdGUsIGdhcDogMCwgaW5zdHJ1bWVudDogY3VycmVudEluc3RydW1lbnQsIHN0eWxlOiAnZGVjb3JhdGlvbicgfSk7XG5cdFx0XHRcdFx0bm90ZSA9IChub3RlID09PSAyKSA/IDAgOiAyO1xuXHRcdFx0XHRcdHJ1bm5pbmdEdXJhdGlvbiAtPSBzaG9ydGVzdE5vdGU7XG5cdFx0XHRcdFx0c3RhcnQgKz0gc2hvcnRlc3ROb3RlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdCAgICAgIGNhc2UgXCJ0cmlsbGhcIjpcblx0XHRcdCAgICAgICAgdmFyIG5vdGUgPSAxO1xuXHRcdFx0ICAgICAgICB3aGlsZSAocnVubmluZ0R1cmF0aW9uID4gMCkge1xuXHRcdFx0ICAgICAgICAgIGN1cnJlbnRUcmFjay5wdXNoKHtcblx0XHRcdCAgICAgICAgICAgIGNtZDogJ25vdGUnLFxuXHRcdFx0ICAgICAgICAgICAgcGl0Y2g6IHAucGl0Y2ggKyBub3RlLFxuXHRcdFx0ICAgICAgICAgICAgdm9sdW1lOiBwLnZvbHVtZSxcblx0XHRcdCAgICAgICAgICAgIHN0YXJ0OiBzdGFydCxcblx0XHRcdCAgICAgICAgICAgIGR1cmF0aW9uOiBzaG9ydGVzdE5vdGUsXG5cdFx0XHQgICAgICAgICAgICBnYXA6IDAsXG5cdFx0XHQgICAgICAgICAgICBpbnN0cnVtZW50OiBjdXJyZW50SW5zdHJ1bWVudCxcblx0XHRcdCAgICAgICAgICAgIHN0eWxlOiAnZGVjb3JhdGlvbidcblx0XHRcdCAgICAgICAgICB9KTtcblx0XHRcdCAgICAgICAgICBub3RlID0gbm90ZSA9PT0gMSA/IDAgOiAxO1xuXHRcdFx0ICAgICAgICAgIHJ1bm5pbmdEdXJhdGlvbiAtPSBzaG9ydGVzdE5vdGU7XG5cdFx0XHQgICAgICAgICAgc3RhcnQgKz0gc2hvcnRlc3ROb3RlO1xuXHRcdFx0ICAgICAgICB9XG5cdFx0XHQgICAgICAgIGJyZWFrO1xuXHRcdFx0Y2FzZSBcInByYWxsdHJpbGxlclwiOlxuXHRcdFx0XHRjdXJyZW50VHJhY2sucHVzaCh7IGNtZDogJ25vdGUnLCBwaXRjaDogcC5waXRjaCwgdm9sdW1lOiBwLnZvbHVtZSwgc3RhcnQ6IHN0YXJ0LCBkdXJhdGlvbjogc2hvcnRlc3ROb3RlLCBnYXA6IDAsIGluc3RydW1lbnQ6IGN1cnJlbnRJbnN0cnVtZW50LCBzdHlsZTogJ2RlY29yYXRpb24nIH0pO1xuXHRcdFx0XHRydW5uaW5nRHVyYXRpb24gLT0gc2hvcnRlc3ROb3RlO1xuXHRcdFx0XHRzdGFydCArPSBzaG9ydGVzdE5vdGU7XG5cdFx0XHRcdGN1cnJlbnRUcmFjay5wdXNoKHsgY21kOiAnbm90ZScsIHBpdGNoOiBwLnBpdGNoKzIsIHZvbHVtZTogcC52b2x1bWUsIHN0YXJ0OiBzdGFydCwgZHVyYXRpb246IHNob3J0ZXN0Tm90ZSwgZ2FwOiAwLCBpbnN0cnVtZW50OiBjdXJyZW50SW5zdHJ1bWVudCwgc3R5bGU6ICdkZWNvcmF0aW9uJyB9KTtcblx0XHRcdFx0cnVubmluZ0R1cmF0aW9uIC09IHNob3J0ZXN0Tm90ZTtcblx0XHRcdFx0c3RhcnQgKz0gc2hvcnRlc3ROb3RlO1xuXHRcdFx0XHRjdXJyZW50VHJhY2sucHVzaCh7IGNtZDogJ25vdGUnLCBwaXRjaDogcC5waXRjaCwgdm9sdW1lOiBwLnZvbHVtZSwgc3RhcnQ6IHN0YXJ0LCBkdXJhdGlvbjogcnVubmluZ0R1cmF0aW9uLCBnYXA6IDAsIGluc3RydW1lbnQ6IGN1cnJlbnRJbnN0cnVtZW50IH0pO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJtb3JkZW50XCI6XG5cdFx0XHRjYXNlIFwibG93ZXJtb3JkZW50XCI6XG5cdFx0XHRcdGN1cnJlbnRUcmFjay5wdXNoKHsgY21kOiAnbm90ZScsIHBpdGNoOiBwLnBpdGNoLCB2b2x1bWU6IHAudm9sdW1lLCBzdGFydDogc3RhcnQsIGR1cmF0aW9uOiBzaG9ydGVzdE5vdGUsIGdhcDogMCwgaW5zdHJ1bWVudDogY3VycmVudEluc3RydW1lbnQsIHN0eWxlOiAnZGVjb3JhdGlvbicgfSk7XG5cdFx0XHRcdHJ1bm5pbmdEdXJhdGlvbiAtPSBzaG9ydGVzdE5vdGU7XG5cdFx0XHRcdHN0YXJ0ICs9IHNob3J0ZXN0Tm90ZTtcblx0XHRcdFx0Y3VycmVudFRyYWNrLnB1c2goeyBjbWQ6ICdub3RlJywgcGl0Y2g6IHAucGl0Y2gtMiwgdm9sdW1lOiBwLnZvbHVtZSwgc3RhcnQ6IHN0YXJ0LCBkdXJhdGlvbjogc2hvcnRlc3ROb3RlLCBnYXA6IDAsIGluc3RydW1lbnQ6IGN1cnJlbnRJbnN0cnVtZW50LCBzdHlsZTogJ2RlY29yYXRpb24nIH0pO1xuXHRcdFx0XHRydW5uaW5nRHVyYXRpb24gLT0gc2hvcnRlc3ROb3RlO1xuXHRcdFx0XHRzdGFydCArPSBzaG9ydGVzdE5vdGU7XG5cdFx0XHRcdGN1cnJlbnRUcmFjay5wdXNoKHsgY21kOiAnbm90ZScsIHBpdGNoOiBwLnBpdGNoLCB2b2x1bWU6IHAudm9sdW1lLCBzdGFydDogc3RhcnQsIGR1cmF0aW9uOiBydW5uaW5nRHVyYXRpb24sIGdhcDogMCwgaW5zdHJ1bWVudDogY3VycmVudEluc3RydW1lbnQgfSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcInR1cm5cIjpcblx0XHRcdFx0c2hvcnRlc3ROb3RlID0gcC5kdXJhdGlvbiAvIDQ7XG5cdFx0XHRcdGN1cnJlbnRUcmFjay5wdXNoKHsgY21kOiAnbm90ZScsIHBpdGNoOiBwLnBpdGNoKzIsIHZvbHVtZTogcC52b2x1bWUsIHN0YXJ0OiBzdGFydCwgZHVyYXRpb246IHNob3J0ZXN0Tm90ZSwgZ2FwOiAwLCBpbnN0cnVtZW50OiBjdXJyZW50SW5zdHJ1bWVudCwgc3R5bGU6ICdkZWNvcmF0aW9uJyB9KTtcblx0XHRcdFx0Y3VycmVudFRyYWNrLnB1c2goeyBjbWQ6ICdub3RlJywgcGl0Y2g6IHAucGl0Y2gsIHZvbHVtZTogcC52b2x1bWUsIHN0YXJ0OiBzdGFydCtzaG9ydGVzdE5vdGUsIGR1cmF0aW9uOiBzaG9ydGVzdE5vdGUsIGdhcDogMCwgaW5zdHJ1bWVudDogY3VycmVudEluc3RydW1lbnQsIHN0eWxlOiAnZGVjb3JhdGlvbicgfSk7XG5cdFx0XHRcdGN1cnJlbnRUcmFjay5wdXNoKHsgY21kOiAnbm90ZScsIHBpdGNoOiBwLnBpdGNoLTEsIHZvbHVtZTogcC52b2x1bWUsIHN0YXJ0OiBzdGFydCtzaG9ydGVzdE5vdGUqMiwgZHVyYXRpb246IHNob3J0ZXN0Tm90ZSwgZ2FwOiAwLCBpbnN0cnVtZW50OiBjdXJyZW50SW5zdHJ1bWVudCwgc3R5bGU6ICdkZWNvcmF0aW9uJyB9KTtcblx0XHRcdFx0Y3VycmVudFRyYWNrLnB1c2goeyBjbWQ6ICdub3RlJywgcGl0Y2g6IHAucGl0Y2gsIHZvbHVtZTogcC52b2x1bWUsIHN0YXJ0OiBzdGFydCtzaG9ydGVzdE5vdGUqMywgZHVyYXRpb246IHNob3J0ZXN0Tm90ZSwgZ2FwOiAwLCBpbnN0cnVtZW50OiBjdXJyZW50SW5zdHJ1bWVudCwgc3R5bGU6ICdkZWNvcmF0aW9uJyB9KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwicm9sbFwiOlxuXHRcdFx0XHR3aGlsZSAocnVubmluZ0R1cmF0aW9uID4gMCkge1xuXHRcdFx0XHRcdGN1cnJlbnRUcmFjay5wdXNoKHsgY21kOiAnbm90ZScsIHBpdGNoOiBwLnBpdGNoLCB2b2x1bWU6IHAudm9sdW1lLCBzdGFydDogc3RhcnQsIGR1cmF0aW9uOiBzaG9ydGVzdE5vdGUsIGdhcDogMCwgaW5zdHJ1bWVudDogY3VycmVudEluc3RydW1lbnQsIHN0eWxlOiAnZGVjb3JhdGlvbicgfSk7XG5cdFx0XHRcdFx0cnVubmluZ0R1cmF0aW9uIC09IHNob3J0ZXN0Tm90ZSoyO1xuXHRcdFx0XHRcdHN0YXJ0ICs9IHNob3J0ZXN0Tm90ZSoyO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHdyaXRlTm90ZShlbGVtLCB2b2ljZU9mZikge1xuXHRcdC8vXG5cdFx0Ly8gQ3JlYXRlIGEgc2VyaWVzIG9mIG5vdGUgZXZlbnRzIHRvIGFwcGVuZCB0byB0aGUgY3VycmVudCB0cmFjay5cblx0XHQvLyBUaGUgb3V0cHV0IGV2ZW50IGlzIG9uZSBvZjogeyBwaXRjaFN0YXJ0OiBwaXRjaF9pbl9hYmNfdW5pdHMsIHZvbHVtZTogZnJvbV8xX3RvXzY0IH1cblx0XHQvLyB7IHBpdGNoU3RvcDogcGl0Y2hfaW5fYWJjX3VuaXRzIH1cblx0XHQvLyB7IG1vdmVUaW1lOiBkdXJhdGlvbl9pbl9hYmNfdW5pdHMgfVxuXHRcdC8vIElmIHRoZXJlIGFyZSBndWl0YXIgY2hvcmRzLCB0aGVuIHRoZXkgYXJlIHB1dCBpbiBhIHNlcGFyYXRlIHRyYWNrLCBidXQgdGhleSBoYXZlIHRoZSBzYW1lIGZvcm1hdC5cblx0XHQvL1xuXG5cdFx0Ly92YXIgdHJhY2tTdGFydGluZ0luZGV4ID0gY3VycmVudFRyYWNrLmxlbmd0aDtcblxuXHRcdHZhciB2ZWxvY2l0eSA9IHByb2Nlc3NWb2x1bWUodGltZVRvUmVhbFRpbWUoZWxlbS50aW1lKSwgdm9pY2VPZmYpO1xuXHRcdGNob3JkVHJhY2sucHJvY2Vzc0Nob3JkKGVsZW0pXG5cblx0XHQvLyBpZiB0aGVyZSBhcmUgZ3JhY2Ugbm90ZXMsIHRoZW4gYWxzbyBwbGF5IHRoZW0uXG5cdFx0Ly8gSSdtIG5vdCBzdXJlIHRoZXJlIGlzIGFuIGV4YWN0IHJ1bGUgZm9yIHRoZSBsZW5ndGggb2YgdGhlIG5vdGVzLiBNeSBydWxlLCB1bmxlc3MgSSBmaW5kXG5cdFx0Ly8gYSBiZXR0ZXIgb25lIGlzOiB0aGUgZ3JhY2Ugbm90ZXMgY2Fubm90IHRha2UgbW9yZSB0aGFuIDEvMiBvZiB0aGUgbWFpbiBub3RlJ3MgdmFsdWUuXG5cdFx0Ly8gQSBncmFjZSBub3RlIChvZiAxLzggbm90ZSBkdXJhdGlvbikgdGFrZXMgMS84IG9mIHRoZSBtYWluIG5vdGUncyB2YWx1ZS5cblx0XHR2YXIgZ3JhY2VzO1xuXHRcdGlmIChlbGVtLmdyYWNlbm90ZXMgJiYgZWxlbS5waXRjaGVzICYmIGVsZW0ucGl0Y2hlcy5sZW5ndGggPiAwICYmIGVsZW0ucGl0Y2hlc1swXSkge1xuXHRcdFx0Z3JhY2VzID0gcHJvY2Vzc0dyYWNlTm90ZXMoZWxlbS5ncmFjZW5vdGVzLCBlbGVtLnBpdGNoZXNbMF0uZHVyYXRpb24pO1xuXHRcdFx0aWYgKGVsZW0uZWxlbSlcblx0XHRcdFx0ZWxlbS5lbGVtLm1pZGlHcmFjZU5vdGVQaXRjaGVzID0gd3JpdGVHcmFjZU5vdGVzKGdyYWNlcywgdGltZVRvUmVhbFRpbWUoZWxlbS50aW1lKSwgdmVsb2NpdHkqMi8zLCBjdXJyZW50SW5zdHJ1bWVudCk7IC8vIG1ha2UgdGhlIGdyYWNlcyBhIGxpdHRsZSBxdWlldGVyLlxuXHRcdH1cblxuXHRcdC8vIFRoZSBiZWF0IGZyYWN0aW9uIGlzIHRoZSBub3RlIHRoYXQgZ2V0cyBhIGJlYXQgKC4yNSBpcyBhIHF1YXJ0ZXIgbm90ZSlcblx0XHQvLyBUaGUgdGVtcG8gaXMgaW4gbWludXRlcyBhbmQgd2Ugd2FudCB0byBnZXQgdG8gbWlsbGlzZWNvbmRzLlxuXHRcdC8vIElmIHRoZSBlbGVtZW50IGlzIGluc2lkZSBhIHJlcGVhdCwgdGhlcmUgbWF5IGJlIG1vcmUgdGhhbiBvbmUgdmFsdWUuIElmIHRoZXJlIGlzIG9uZSB2YWx1ZSxcblx0XHQvLyB0aGVuIGp1c3Qgc3RvcmUgdGhhdCBhcyBhIG51bWJlci4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgdmFsdWUsIHRoZW4gY2hhbmdlIHRoYXQgdG9cblx0XHQvLyBhbiBhcnJheSBhbmQgcmV0dXJuIGFsbCBvZiB0aGVtLlxuXHRcdGlmIChlbGVtLmVsZW0pIHtcblx0XHRcdHZhciBydCA9IHRpbWVUb1JlYWxUaW1lKGVsZW0udGltZSk7XG5cdFx0XHR2YXIgbXMgPSBydCAvIGJlYXRGcmFjdGlvbiAvIHN0YXJ0aW5nVGVtcG8gKiA2MCAqIDEwMDA7XG5cdFx0XHRpZiAoZWxlbS5lbGVtLmN1cnJlbnRUcmFja01pbGxpc2Vjb25kcyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGVsZW0uZWxlbS5jdXJyZW50VHJhY2tNaWxsaXNlY29uZHMgPSBtcztcblx0XHRcdFx0ZWxlbS5lbGVtLmN1cnJlbnRUcmFja1dob2xlTm90ZXMgPSBydDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChlbGVtLmVsZW0uY3VycmVudFRyYWNrTWlsbGlzZWNvbmRzLmxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0aWYgKGVsZW0uZWxlbS5jdXJyZW50VHJhY2tNaWxsaXNlY29uZHMgIT09IG1zKSB7XG5cdFx0XHRcdFx0XHRlbGVtLmVsZW0uY3VycmVudFRyYWNrTWlsbGlzZWNvbmRzID0gW2VsZW0uZWxlbS5jdXJyZW50VHJhY2tNaWxsaXNlY29uZHMsIG1zXTtcblx0XHRcdFx0XHRcdGVsZW0uZWxlbS5jdXJyZW50VHJhY2tXaG9sZU5vdGVzID0gW2VsZW0uZWxlbS5jdXJyZW50VHJhY2tXaG9sZU5vdGVzLCBydF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIFRoZXJlIGNhbiBiZSBkdXBsaWNhdGVzIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSB2b2ljZXNcblx0XHRcdFx0XHR2YXIgZm91bmQgPSBmYWxzZTtcblx0XHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGVsZW0uZWxlbS5jdXJyZW50VHJhY2tNaWxsaXNlY29uZHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRcdGlmIChlbGVtLmVsZW0uY3VycmVudFRyYWNrTWlsbGlzZWNvbmRzW2pdID09PSBtcylcblx0XHRcdFx0XHRcdFx0Zm91bmQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIWZvdW5kKSB7XG5cdFx0XHRcdFx0XHRlbGVtLmVsZW0uY3VycmVudFRyYWNrTWlsbGlzZWNvbmRzLnB1c2gobXMpO1xuXHRcdFx0XHRcdFx0ZWxlbS5lbGVtLmN1cnJlbnRUcmFja1dob2xlTm90ZXMucHVzaChydCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vdmFyIHRpZUFkanVzdG1lbnQgPSAwO1xuXHRcdGlmIChlbGVtLnBpdGNoZXMpIHtcblx0XHRcdHZhciB0aGlzQnJlYWtCZXR3ZWVuTm90ZXMgPSAnJztcblx0XHRcdHZhciByZXQgPSBmaW5kTm90ZU1vZGlmaWNhdGlvbnMoZWxlbSwgdmVsb2NpdHkpO1xuXHRcdFx0aWYgKHJldC50aGlzQnJlYWtCZXR3ZWVuTm90ZXMpXG5cdFx0XHRcdHRoaXNCcmVha0JldHdlZW5Ob3RlcyA9IHJldC50aGlzQnJlYWtCZXR3ZWVuTm90ZXM7XG5cdFx0XHRpZiAocmV0LnZlbG9jaXR5KVxuXHRcdFx0XHR2ZWxvY2l0eSA9IHJldC52ZWxvY2l0eTtcblxuXHRcdFx0Ly8gVE9ETy1QRVI6IENhbiBhbHNvIG1ha2UgYSBkaWZmZXJlbnQgc291bmQgb24gc3R5bGU9eCBhbmQgc3R5bGU9aGFybW9uaWNcblx0XHRcdHZhciBlUGl0Y2hlcyA9IGVsZW0ucGl0Y2hlcztcblx0XHRcdGlmIChlbGVtLnN0eWxlID09PSBcInJoeXRobVwiKSB7XG5cdFx0XHRcdGVQaXRjaGVzID0gY2hvcmRUcmFjay5zZXRSaHl0aG1IZWFkKHRydWUsIGVsZW0pXG5cdFx0XHR9XG5cblx0XHRcdGlmIChlbGVtLmVsZW0pXG5cdFx0XHRcdGVsZW0uZWxlbS5taWRpUGl0Y2hlcyA9IFtdO1xuXHRcdFx0Zm9yICh2YXIgaT0wOyBpPGVQaXRjaGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdC8vaGVyZSB3ZSBjYW4gc2V0IHRoZSB2b2x1bWUgZm9yIGVhY2ggbm90ZSBpbiBhIGNob3JkLCBpZiBzcGVjaWZpZWRcblx0XHRcdFx0bGV0IHBpdGNoVmVsb2NpdHkgPSB2ZWxvY2l0eTtcblx0XHRcdFx0aWYoIXJldC52ZWxvY2l0eSAmJiBBcnJheS5pc0FycmF5KGVsZW0uZGVjb3JhdGlvbikgJiYgZWxlbS5kZWNvcmF0aW9uLmxlbmd0aCA+IGkpe1xuXHRcdFx0XHRcdHBpdGNoVmVsb2NpdHkgPSBwcm9jZXNzVm9sdW1lKHRpbWVUb1JlYWxUaW1lKGVsZW0udGltZSksIHZvaWNlT2ZmLCBpKVxuXHRcdFx0XHR9XG5cdFx0XHRcdHZhciBub3RlID0gZVBpdGNoZXNbaV07XG5cdFx0XHRcdGlmICghbm90ZSlcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0aWYgKG5vdGUuc3RhcnRTbHVyKVxuXHRcdFx0XHRcdHNsdXJDb3VudCArPSBub3RlLnN0YXJ0U2x1ci5sZW5ndGg7XG5cdFx0XHRcdGlmIChub3RlLmVuZFNsdXIpXG5cdFx0XHRcdFx0c2x1ckNvdW50IC09IG5vdGUuZW5kU2x1ci5sZW5ndGg7XG5cdFx0XHRcdHZhciBhY3R1YWxQaXRjaCA9IG5vdGUuYWN0dWFsUGl0Y2ggPyBub3RlLmFjdHVhbFBpdGNoIDogYWRqdXN0UGl0Y2gobm90ZSk7XG5cdFx0XHRcdGlmIChjdXJyZW50SW5zdHJ1bWVudCA9PT0gZHJ1bUluc3RydW1lbnQgJiYgcGVyY21hcCkge1xuXHRcdFx0XHRcdHZhciBuYW1lID0gcGl0Y2hlc1RvUGVyYyhub3RlKVxuXHRcdFx0XHRcdGlmIChuYW1lICYmIHBlcmNtYXBbbmFtZV0pXG5cdFx0XHRcdFx0XHRhY3R1YWxQaXRjaCA9IHBlcmNtYXBbbmFtZV0uc291bmQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0dmFyIHAgPSB7IGNtZDogJ25vdGUnLCBwaXRjaDogYWN0dWFsUGl0Y2gsIHZvbHVtZTogcGl0Y2hWZWxvY2l0eSwgc3RhcnQ6IHRpbWVUb1JlYWxUaW1lKGVsZW0udGltZSksIGR1cmF0aW9uOiBkdXJhdGlvblJvdW5kZWQobm90ZS5kdXJhdGlvbiksIGluc3RydW1lbnQ6IGN1cnJlbnRJbnN0cnVtZW50LCBzdGFydENoYXI6IGVsZW0uZWxlbS5zdGFydENoYXIsIGVuZENoYXI6IGVsZW0uZWxlbS5lbmRDaGFyfTtcblx0XHRcdFx0cCA9IGFkanVzdEZvck1pY3JvVG9uZShwKTtcblx0XHRcdFx0aWYgKGVsZW0uZ3JhY2Vub3Rlcykge1xuXHRcdFx0XHRcdHAuZHVyYXRpb24gPSBwLmR1cmF0aW9uIC8gMjtcblx0XHRcdFx0XHRwLnN0YXJ0ID0gcC5zdGFydCArIHAuZHVyYXRpb247XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGVsZW0uZWxlbSlcblx0XHRcdFx0XHRlbGVtLmVsZW0ubWlkaVBpdGNoZXMucHVzaChwKTtcblx0XHRcdFx0aWYgKHJldC5ub3RlTW9kaWZpY2F0aW9uKSB7XG5cdFx0XHRcdFx0ZG9Nb2RpZmllZE5vdGVzKHJldC5ub3RlTW9kaWZpY2F0aW9uLCBwKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoc2x1ckNvdW50ID4gMClcblx0XHRcdFx0XHRcdHAuZW5kVHlwZSA9ICd0ZW51dG8nO1xuXHRcdFx0XHRcdGVsc2UgaWYgKHRoaXNCcmVha0JldHdlZW5Ob3Rlcylcblx0XHRcdFx0XHRcdHAuZW5kVHlwZSA9IHRoaXNCcmVha0JldHdlZW5Ob3RlcztcblxuXHRcdFx0XHRcdHN3aXRjaCAocC5lbmRUeXBlKSB7XG5cdFx0XHRcdFx0XHRjYXNlIFwidGVudXRvXCI6XG5cdFx0XHRcdFx0XHRcdHAuZ2FwID0gc2x1cnJlZEJyZWFrQmV0d2Vlbk5vdGVzO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgXCJzdGFjY2F0b1wiOlxuXHRcdFx0XHRcdFx0XHR2YXIgZCA9IHAuZHVyYXRpb24gKiBzdGFjY2F0b0JyZWFrQmV0d2Vlbk5vdGVzO1xuXHRcdFx0XHRcdFx0XHRwLmdhcCA9IHN0YXJ0aW5nVGVtcG8gLyA2MCAqIGQ7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0cC5nYXAgPSBub3JtYWxCcmVha0JldHdlZW5Ob3Rlcztcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGN1cnJlbnRUcmFjay5wdXNoKHApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRsYXN0Tm90ZUR1cmF0aW9uUG9zaXRpb24gPSBjdXJyZW50VHJhY2subGVuZ3RoLTE7XG5cblx0XHR9XG5cdFx0dmFyIHJlYWxEdXIgPSBnZXRSZWFsRHVyYXRpb24oZWxlbSk7XG5cdFx0bGFzdEV2ZW50VGltZSA9IE1hdGgubWF4KGxhc3RFdmVudFRpbWUsIHRpbWVUb1JlYWxUaW1lKGVsZW0udGltZSkrZHVyYXRpb25Sb3VuZGVkKHJlYWxEdXIpKTtcblx0fVxuXHRmdW5jdGlvbiBnZXRSZWFsRHVyYXRpb24oZWxlbSkge1xuXHRcdGlmIChlbGVtLnBpdGNoZXMgJiYgZWxlbS5waXRjaGVzLmxlbmd0aCA+IDAgJiYgZWxlbS5waXRjaGVzWzBdKVxuXHRcdFx0cmV0dXJuIGVsZW0ucGl0Y2hlc1swXS5kdXJhdGlvbjtcblx0XHRpZiAoZWxlbS5lbGVtKVxuXHRcdFx0cmV0dXJuIGVsZW0uZWxlbS5kdXJhdGlvbjtcblx0XHRyZXR1cm4gZWxlbS5kdXJhdGlvbjtcblx0fVxuXG5cdHZhciBzY2FsZSA9IFswLDIsNCw1LDcsOSwxMV07XG5cdGZ1bmN0aW9uIGFkanVzdFBpdGNoKG5vdGUpIHtcblx0XHRpZiAobm90ZS5taWRpcGl0Y2ggIT09IHVuZGVmaW5lZClcblx0XHRcdHJldHVybiBub3RlLm1pZGlwaXRjaDsgLy8gVGhlIHBpdGNoIG1pZ2h0IGFscmVhZHkgYmUga25vd24sIGZvciBpbnN0YW5jZSBpZiB0aGVyZSBpcyBhIGRydW1tYXAuXG5cdFx0dmFyIHBpdGNoID0gbm90ZS5waXRjaDtcblx0XHRpZiAobm90ZS5hY2NpZGVudGFsKSB7XG5cdFx0XHRzd2l0Y2gobm90ZS5hY2NpZGVudGFsKSB7IC8vIGNoYW5nZSB0aGF0IHBpdGNoIChub3Qgb3RoZXIgb2N0YXZlcykgZm9yIHRoZSByZXN0IG9mIHRoZSBiYXJcblx0XHRcdFx0Y2FzZSBcInNoYXJwXCI6XG5cdFx0XHRcdFx0YmFyQWNjaWRlbnRhbHNbcGl0Y2hdPTE7IGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwiZmxhdFwiOlxuXHRcdFx0XHRcdGJhckFjY2lkZW50YWxzW3BpdGNoXT0tMTsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJuYXR1cmFsXCI6XG5cdFx0XHRcdFx0YmFyQWNjaWRlbnRhbHNbcGl0Y2hdPTA7IGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwiZGJsc2hhcnBcIjpcblx0XHRcdFx0XHRiYXJBY2NpZGVudGFsc1twaXRjaF09MjsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJkYmxmbGF0XCI6XG5cdFx0XHRcdFx0YmFyQWNjaWRlbnRhbHNbcGl0Y2hdPS0yOyBicmVhaztcblx0XHRcdFx0Y2FzZSBcInF1YXJ0ZXJzaGFycFwiOlxuXHRcdFx0XHRcdGJhckFjY2lkZW50YWxzW3BpdGNoXT0wLjI1OyBicmVhaztcblx0XHRcdFx0Y2FzZSBcInF1YXJ0ZXJmbGF0XCI6XG5cdFx0XHRcdFx0YmFyQWNjaWRlbnRhbHNbcGl0Y2hdPS0wLjI1OyBicmVhaztcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2YXIgYWN0dWFsUGl0Y2ggPSBleHRyYWN0T2N0YXZlKHBpdGNoKSAqMTIgKyBzY2FsZVtleHRyYWN0Tm90ZShwaXRjaCldICsgNjA7XG5cblx0XHRpZiAoIGJhckFjY2lkZW50YWxzW3BpdGNoXSE9PXVuZGVmaW5lZCkge1xuXHRcdFx0Ly8gQW4gYWNjaWRlbnRhbCBpcyBhbHdheXMgdGFrZW4gYXQgZmFjZSB2YWx1ZSBhbmQgc3VwZXJzZWRlcyB0aGUga2V5IHNpZ25hdHVyZS5cblx0XHRcdGFjdHVhbFBpdGNoICs9IGJhckFjY2lkZW50YWxzW3BpdGNoXTtcblx0XHR9IGVsc2UgeyAvLyB1c2Ugbm9ybWFsIGFjY2lkZW50YWxzXG5cdFx0XHRhY3R1YWxQaXRjaCArPSAgYWNjaWRlbnRhbHNbZXh0cmFjdE5vdGUocGl0Y2gpXTtcblx0XHR9XG5cdFx0YWN0dWFsUGl0Y2ggKz0gdHJhbnNwb3NlO1xuXHRcdHJldHVybiBhY3R1YWxQaXRjaDtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldEtleVNpZ25hdHVyZShlbGVtKSB7XG5cdFx0dmFyIGFjY2lkZW50YWxzID0gWzAsMCwwLDAsMCwwLDBdO1xuXHRcdGlmICghZWxlbS5hY2NpZGVudGFscykgcmV0dXJuIGFjY2lkZW50YWxzO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbS5hY2NpZGVudGFscy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGFjYyA9IGVsZW0uYWNjaWRlbnRhbHNbaV07XG5cdFx0XHR2YXIgZDtcblx0XHRcdHN3aXRjaCAoYWNjLmFjYykge1xuXHRcdFx0XHRjYXNlIFwiZmxhdFwiOiBkID0gLTE7IGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwicXVhcnRlcmZsYXRcIjogZCA9IC0wLjI1OyBicmVhaztcblx0XHRcdFx0Y2FzZSBcInNoYXJwXCI6IGQgPSAxOyBicmVhaztcblx0XHRcdFx0Y2FzZSBcInF1YXJ0ZXJzaGFycFwiOiBkID0gMC4yNTsgYnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6IGQgPSAwOyBicmVhaztcblx0XHRcdH1cblxuXHRcdFx0dmFyIGxvd2VyY2FzZSA9IGFjYy5ub3RlLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHR2YXIgbm90ZSA9IGV4dHJhY3ROb3RlKGxvd2VyY2FzZS5jaGFyQ29kZUF0KDApLSdjJy5jaGFyQ29kZUF0KDApKTtcblx0XHRcdGFjY2lkZW50YWxzW25vdGVdKz1kO1xuXHRcdH1cblx0XHRyZXR1cm4gYWNjaWRlbnRhbHM7XG5cdH1cblxuXHRmdW5jdGlvbiBwcm9jZXNzR3JhY2VOb3RlcyhncmFjZXMsIGNvbXBhbmlvbkR1cmF0aW9uKSB7XG5cdFx0Ly8gR3JhY2Ugbm90ZXMgdGFrZSB1cCBoYWxmIG9mIHRoZSBub3RlIHZhbHVlLiBTbyBpZiB0aGVyZSBhcmUgbWFueSBvZiB0aGVtIHRoZXkgYXJlIGFsbCByZWFsIHNob3J0LlxuXHRcdHZhciBncmFjZUR1cmF0aW9uID0gMDtcblx0XHR2YXIgcmV0ID0gW107XG5cdFx0dmFyIGdyYWNlO1xuXHRcdGZvciAodmFyIGcgPSAwOyBnIDwgZ3JhY2VzLmxlbmd0aDsgZysrKSB7XG5cdFx0XHRncmFjZSA9IGdyYWNlc1tnXTtcblx0XHRcdGdyYWNlRHVyYXRpb24gKz0gZ3JhY2UuZHVyYXRpb247XG5cdFx0fVxuXHRcdHZhciBtdWx0aXBsaWVyID0gY29tcGFuaW9uRHVyYXRpb24vMiAvIGdyYWNlRHVyYXRpb247XG5cblx0XHRmb3IgKGcgPSAwOyBnIDwgZ3JhY2VzLmxlbmd0aDsgZysrKSB7XG5cdFx0XHRncmFjZSA9IGdyYWNlc1tnXTtcblx0XHRcdHZhciBhY3R1YWxQaXRjaCA9IGFkanVzdFBpdGNoKGdyYWNlKTtcblx0XHRcdGlmIChjdXJyZW50SW5zdHJ1bWVudCA9PT0gZHJ1bUluc3RydW1lbnQgJiYgcGVyY21hcCkge1xuXHRcdFx0XHR2YXIgbmFtZSA9IHBpdGNoZXNUb1BlcmMoZ3JhY2UpXG5cdFx0XHRcdGlmIChuYW1lICYmIHBlcmNtYXBbbmFtZV0pXG5cdFx0XHRcdFx0YWN0dWFsUGl0Y2ggPSBwZXJjbWFwW25hbWVdLnNvdW5kO1xuXHRcdFx0fVxuXHRcdFx0dmFyIHBpdGNoID0geyBwaXRjaDogYWN0dWFsUGl0Y2gsIGR1cmF0aW9uOiBncmFjZS5kdXJhdGlvbiptdWx0aXBsaWVyIH07XG5cdFx0XHRwaXRjaCA9IGFkanVzdEZvck1pY3JvVG9uZShwaXRjaCk7XG5cdFx0XHRyZXQucHVzaChwaXRjaCk7XG5cdFx0fVxuXHRcdHJldHVybiByZXQ7XG5cdH1cblxuXHRmdW5jdGlvbiB3cml0ZUdyYWNlTm90ZXMoZ3JhY2VzLCBzdGFydCwgdmVsb2NpdHksIGN1cnJlbnRJbnN0cnVtZW50KSB7XG5cdFx0dmFyIG1pZGlHcmFjZSA9IFtdO1xuXHRcdHZlbG9jaXR5ID0gTWF0aC5yb3VuZCh2ZWxvY2l0eSlcblx0XHRmb3IgKHZhciBnID0gMDsgZyA8IGdyYWNlcy5sZW5ndGg7IGcrKykge1xuXHRcdFx0dmFyIGdwID0gZ3JhY2VzW2ddO1xuXHRcdFx0Y3VycmVudFRyYWNrLnB1c2goe2NtZDogJ25vdGUnLCBwaXRjaDogZ3AucGl0Y2gsIHZvbHVtZTogdmVsb2NpdHksIHN0YXJ0OiBzdGFydCwgZHVyYXRpb246IGdwLmR1cmF0aW9uLCBnYXA6IDAsIGluc3RydW1lbnQ6Y3VycmVudEluc3RydW1lbnQsIHN0eWxlOiAnZ3JhY2UnfSk7XG5cdFx0XHRtaWRpR3JhY2UucHVzaCh7XG5cdFx0XHRcdHBpdGNoOiBncC5waXRjaCxcblx0XHRcdFx0ZHVyYXRpb25Jbk1lYXN1cmVzOiBncC5kdXJhdGlvbixcblx0XHRcdFx0dm9sdW1lOiB2ZWxvY2l0eSxcblx0XHRcdFx0aW5zdHJ1bWVudDogY3VycmVudEluc3RydW1lbnRcblx0XHRcdH0pO1xuXHRcdFx0c3RhcnQgKz0gZ3AuZHVyYXRpb247XG5cdFx0fVxuXHRcdHJldHVybiBtaWRpR3JhY2U7XG5cdH1cblxuXHR2YXIgcXVhcnRlclRvbmVGYWN0b3IgPSAwLjAyOTMwMjIzNjY0MzQ5O1xuXHRmdW5jdGlvbiBhZGp1c3RGb3JNaWNyb1RvbmUoZGVzY3JpcHRpb24pIHtcblx0XHQvLyBpZiB0aGUgcGl0Y2ggaXMgbm90IGEgd2hvbGUgbnVtYmVyIHRoZW4gbWFrZSBpdCBhIHdob2xlIG51bWJlciBhbmQgYWRkIGEgdHVuaW5nIGZhY3RvclxuXHRcdHZhciBwaXRjaCA9ICcnK2Rlc2NyaXB0aW9uLnBpdGNoO1xuXHRcdGlmIChwaXRjaC5pbmRleE9mKFwiLjc1XCIpID49IDApIHtcblx0XHRcdGRlc2NyaXB0aW9uLnBpdGNoID0gTWF0aC5yb3VuZChkZXNjcmlwdGlvbi5waXRjaCk7XG5cdFx0XHRkZXNjcmlwdGlvbi5jZW50cyA9IC01MDtcblx0XHR9IGVsc2UgaWYgKHBpdGNoLmluZGV4T2YoXCIuMjVcIikgPj0gMCkge1xuXHRcdFx0ZGVzY3JpcHRpb24ucGl0Y2ggPSBNYXRoLnJvdW5kKGRlc2NyaXB0aW9uLnBpdGNoKTtcblx0XHRcdGRlc2NyaXB0aW9uLmNlbnRzID0gNTA7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlc2NyaXB0aW9uO1xuXHR9XG5cblx0ZnVuY3Rpb24gZXh0cmFjdE9jdGF2ZShwaXRjaCkge1xuXHRcdHJldHVybiBNYXRoLmZsb29yKHBpdGNoLzcpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZXh0cmFjdE5vdGUocGl0Y2gpIHtcblx0XHRwaXRjaCA9IHBpdGNoJTc7XG5cdFx0aWYgKHBpdGNoPDApIHBpdGNoKz03O1xuXHRcdHJldHVybiBwaXRjaDtcblx0fVxuXG5cblx0ZnVuY3Rpb24gbm9ybWFsaXplRHJ1bURlZmluaXRpb24ocGFyYW1zKSB7XG5cdFx0Ly8gQmUgdmVyeSBzdHJpY3Qgd2l0aCB0aGUgZHJ1bSBkZWZpbml0aW9uLiBJZiBhbnl0aGluZyBpcyBub3QgcGVyZmVjdCxcblx0XHQvLyBqdXN0IHR1cm4gdGhlIGRydW1zIG9mZi5cblx0XHQvLyBQZXJoYXBzIGFsbCBvZiB0aGlzIGxvZ2ljIGJlbG9uZ3MgaW4gdGhlIHBhcnNlciBpbnN0ZWFkLlxuXHRcdGlmIChwYXJhbXMucGF0dGVybi5sZW5ndGggPT09IDAgfHwgcGFyYW1zLm9uID09PSBmYWxzZSlcblx0XHRcdHJldHVybiB7IG9uOiBmYWxzZSB9O1xuXG5cdFx0dmFyIHN0ciA9IHBhcmFtcy5wYXR0ZXJuWzBdO1xuXHRcdHZhciBldmVudHMgPSBbXTtcblx0XHR2YXIgZXZlbnQgPSBcIlwiO1xuXHRcdHZhciB0b3RhbFBsYXkgPSAwO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAoc3RyW2ldID09PSAnZCcpXG5cdFx0XHRcdHRvdGFsUGxheSsrO1xuXHRcdFx0aWYgKHN0cltpXSA9PT0gJ2QnIHx8IHN0cltpXSA9PT0gJ3onKSB7XG5cdFx0XHRcdGlmIChldmVudC5sZW5ndGggIT09IDApIHtcblx0XHRcdFx0XHRldmVudHMucHVzaChldmVudCk7XG5cdFx0XHRcdFx0ZXZlbnQgPSBzdHJbaV07XG5cdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdGV2ZW50ID0gZXZlbnQgKyBzdHJbaV07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoZXZlbnQubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0Ly8gdGhlcmUgd2FzIGFuIGVycm9yOiB0aGUgc3RyaW5nIHNob3VsZCBoYXZlIHN0YXJ0ZWQgd2l0aCBkIG9yIHpcblx0XHRcdFx0XHRyZXR1cm4ge29uOiBmYWxzZX07XG5cdFx0XHRcdH1cblx0XHRcdFx0ZXZlbnQgPSBldmVudCArIHN0cltpXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoZXZlbnQubGVuZ3RoICE9PSAwKVxuXHRcdFx0ZXZlbnRzLnB1c2goZXZlbnQpO1xuXG5cdFx0Ly8gTm93IHRoZSBldmVudHMgYXJyYXkgc2hvdWxkIGhhdmUgb25lIGl0ZW0gcGVyIGV2ZW50LlxuXHRcdC8vIFRoZXJlIHNob3VsZCBiZSB0d28gbW9yZSBwYXJhbXMgZm9yIGVhY2ggZXZlbnQ6IHRoZSB2b2x1bWUgYW5kIHRoZSBwaXRjaC5cblx0XHRpZiAocGFyYW1zLnBhdHRlcm4ubGVuZ3RoICE9PSB0b3RhbFBsYXkqMiArIDEpXG5cdFx0XHRyZXR1cm4geyBvbjogZmFsc2UgfTtcblxuXHRcdHZhciByZXQgPSB7IG9uOiB0cnVlLCBiYXJzOiBwYXJhbXMuYmFycywgcGF0dGVybjogW119O1xuXHRcdHZhciBiZWF0TGVuZ3RoID0gZ2V0QmVhdEZyYWN0aW9uKG1ldGVyKTtcblx0XHR2YXIgcGxheUNvdW50ID0gMDtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGV2ZW50cy5sZW5ndGg7IGorKykge1xuXHRcdFx0ZXZlbnQgPSBldmVudHNbal07XG5cdFx0XHR2YXIgbGVuID0gMTtcblx0XHRcdHZhciBkaXYgPSBmYWxzZTtcblx0XHRcdHZhciBudW0gPSAwO1xuXHRcdFx0Zm9yICh2YXIgayA9IDE7IGsgPCBldmVudC5sZW5ndGg7IGsrKykge1xuXHRcdFx0XHRzd2l0Y2goZXZlbnRba10pIHtcblx0XHRcdFx0XHRjYXNlIFwiL1wiOlxuXHRcdFx0XHRcdFx0aWYgKG51bSAhPT0gMClcblx0XHRcdFx0XHRcdFx0bGVuICo9IG51bTtcblx0XHRcdFx0XHRcdG51bSA9IDA7XG5cdFx0XHRcdFx0XHRkaXYgPSB0cnVlO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcIjFcIjpcblx0XHRcdFx0XHRjYXNlIFwiMlwiOlxuXHRcdFx0XHRcdGNhc2UgXCIzXCI6XG5cdFx0XHRcdFx0Y2FzZSBcIjRcIjpcblx0XHRcdFx0XHRjYXNlIFwiNVwiOlxuXHRcdFx0XHRcdGNhc2UgXCI2XCI6XG5cdFx0XHRcdFx0Y2FzZSBcIjdcIjpcblx0XHRcdFx0XHRjYXNlIFwiOFwiOlxuXHRcdFx0XHRcdGNhc2UgXCI5XCI6XG5cdFx0XHRcdFx0XHRudW0gPSBudW0qMTAgK2V2ZW50W2tdO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdHJldHVybiB7IG9uOiBmYWxzZSB9O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoZGl2KSB7XG5cdFx0XHRcdGlmIChudW0gPT09IDApIG51bSA9IDI7IC8vIGEgc2xhc2ggYnkgaXRzZWxmIGlzIGludGVycHJldGVkIGFzIFwiLzJcIlxuXHRcdFx0XHRsZW4gLz0gbnVtO1xuXHRcdFx0fSBlbHNlIGlmIChudW0pXG5cdFx0XHRcdGxlbiAqPSBudW07XG5cdFx0XHRpZiAoZXZlbnRbMF0gPT09ICdkJykge1xuXHRcdFx0XHRyZXQucGF0dGVybi5wdXNoKHsgbGVuOiBsZW4gKiBiZWF0TGVuZ3RoLCBwaXRjaDogcGFyYW1zLnBhdHRlcm5bMSArIHBsYXlDb3VudF0sIHZlbG9jaXR5OiBwYXJhbXMucGF0dGVyblsxICsgcGxheUNvdW50ICsgdG90YWxQbGF5XX0pO1xuXHRcdFx0XHRwbGF5Q291bnQrKztcblx0XHRcdH0gZWxzZVxuXHRcdFx0XHRyZXQucGF0dGVybi5wdXNoKHsgbGVuOiBsZW4gKiBiZWF0TGVuZ3RoLCBwaXRjaDogbnVsbH0pO1xuXHRcdH1cblx0XHRkcnVtQmFycyA9IHBhcmFtcy5iYXJzID8gcGFyYW1zLmJhcnMgOiAxO1xuXHRcdHJldHVybiByZXQ7XG5cdH1cblxuXHRmdW5jdGlvbiBhbGlnbkRydW1Ub01ldGVyKCkge1xuXHRcdGlmICghZHJ1bURlZmluaXRpb24gfHwhZHJ1bURlZmluaXRpb24ucGF0dGVybikge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR2YXIgcmV0ID0gZHJ1bURlZmluaXRpb247XG5cdFx0Ly8gTm93IG5vcm1hbGl6ZSB0aGUgcGF0dGVybiB0byBjb3ZlciB0aGUgY29ycmVjdCBudW1iZXIgb2YgbWVhc3VyZXMuIFRoZSBub3RlIGxlbmd0aHMgcGFzc2VkIGFyZSByZWxhdGl2ZSB0byBlYWNoIG90aGVyIGFuZCBuZWVkIHRvIGJlIHNjYWxlZCB0byBmaXQgYSBtZWFzdXJlLlxuXHRcdHZhciB0b3RhbFRpbWUgPSAwO1xuXHRcdHZhciBtZWFzdXJlc1BlckJlYXQgPSBtZXRlci5udW0vbWV0ZXIuZGVuO1xuXHRcdGZvciAodmFyIGlpID0gMDsgaWkgPCByZXQucGF0dGVybi5sZW5ndGg7IGlpKyspXG5cdFx0XHR0b3RhbFRpbWUgKz0gcmV0LnBhdHRlcm5baWldLmxlbjtcblx0XHR2YXIgZmFjdG9yID0gdG90YWxUaW1lIC8gIGRydW1CYXJzIC8gbWVhc3VyZXNQZXJCZWF0O1xuXHRcdGZvciAoaWkgPSAwOyBpaSA8IHJldC5wYXR0ZXJuLmxlbmd0aDsgaWkrKylcblx0XHRcdHJldC5wYXR0ZXJuW2lpXS5sZW4gPSByZXQucGF0dGVybltpaV0ubGVuIC8gZmFjdG9yO1xuXHRcdGRydW1EZWZpbml0aW9uID0gcmV0O1xuXHR9XG5cblx0ZnVuY3Rpb24gd3JpdGVEcnVtKGNoYW5uZWwpIHtcblx0XHRpZiAoZHJ1bVRyYWNrLmxlbmd0aCA9PT0gMCAmJiAhZHJ1bURlZmluaXRpb24ub24pXG5cdFx0XHRyZXR1cm47XG5cblx0XHR2YXIgbWVhc3VyZUxlbiA9IG1ldGVyLm51bS9tZXRlci5kZW47XG5cdFx0aWYgKGRydW1UcmFjay5sZW5ndGggPT09IDApIHtcblx0XHRcdGlmIChsYXN0RXZlbnRUaW1lIDwgbWVhc3VyZUxlbilcblx0XHRcdFx0cmV0dXJuOyAvLyBUaGlzIGlzIHRydWUgaWYgdGhlcmUgYXJlIHBpY2t1cCBub3Rlcy4gVGhlIGRydW0gZG9lc24ndCBzdGFydCB1bnRpbCB0aGUgZmlyc3QgZnVsbCBtZWFzdXJlLlxuXHRcdFx0ZHJ1bVRyYWNrLnB1c2goe2NtZDogJ3Byb2dyYW0nLCBjaGFubmVsOiBjaGFubmVsLCBpbnN0cnVtZW50OiBkcnVtSW5zdHJ1bWVudH0pO1xuXHRcdH1cblxuXHRcdGlmICghZHJ1bURlZmluaXRpb24ub24pIHtcblx0XHRcdC8vIHRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgdGhlcmUgaGFzIGJlZW4gYSBkcnVtIHRyYWNrLCBidXQgaXQgd2FzIHNwZWNpZmljYWxseSB0dXJuZWQgb2ZmLlxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR2YXIgc3RhcnQgPSBsYXN0QmFyVGltZTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRydW1EZWZpbml0aW9uLnBhdHRlcm4ubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBsZW4gPSBkdXJhdGlvblJvdW5kZWQoZHJ1bURlZmluaXRpb24ucGF0dGVybltpXS5sZW4pO1xuXHRcdFx0aWYgKGRydW1EZWZpbml0aW9uLnBhdHRlcm5baV0ucGl0Y2gpIHtcblx0XHRcdFx0ZHJ1bVRyYWNrLnB1c2goe1xuXHRcdFx0XHRcdGNtZDogJ25vdGUnLFxuXHRcdFx0XHRcdHBpdGNoOiBkcnVtRGVmaW5pdGlvbi5wYXR0ZXJuW2ldLnBpdGNoLFxuXHRcdFx0XHRcdHZvbHVtZTogZHJ1bURlZmluaXRpb24ucGF0dGVybltpXS52ZWxvY2l0eSxcblx0XHRcdFx0XHRzdGFydDogc3RhcnQsXG5cdFx0XHRcdFx0ZHVyYXRpb246IGxlbixcblx0XHRcdFx0XHRnYXA6IDAsXG5cdFx0XHRcdFx0aW5zdHJ1bWVudDogZHJ1bUluc3RydW1lbnR9KTtcblx0XHRcdH1cblx0XHRcdHN0YXJ0ICs9IGxlbjtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBmaW5kT2N0YXZlcyh0cmFja3MsIGRldHVuZUNlbnRzKSB7XG5cdFx0dmFyIHRpbWluZyA9IHt9O1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2tzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHRyYWNrc1tpXS5sZW5ndGg7IGorKykge1xuXHRcdFx0XHR2YXIgbm90ZSA9IHRyYWNrc1tpXVtqXTtcblx0XHRcdFx0aWYgKG5vdGUuY21kID09PSBcIm5vdGVcIikge1xuXHRcdFx0XHRcdGlmICh0aW1pbmdbbm90ZS5zdGFydF0gPT09IHVuZGVmaW5lZClcblx0XHRcdFx0XHRcdHRpbWluZ1tub3RlLnN0YXJ0XSA9IFtdO1xuXHRcdFx0XHRcdHRpbWluZ1tub3RlLnN0YXJ0XS5wdXNoKHt0cmFjazogaSwgZXZlbnQ6IGosIHBpdGNoOiBub3RlLnBpdGNofSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0dmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aW1pbmcpO1xuXHRcdGZvciAoaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJyID0gdGltaW5nW2tleXNbaV1dO1xuXHRcdFx0aWYgKGFyci5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdGFyciA9IGFyci5zb3J0KGZ1bmN0aW9uKGEsYikge1xuXHRcdFx0XHRcdHJldHVybiBhLnBpdGNoIC0gYi5waXRjaDtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHZhciB0b3BFdmVudCA9IGFyclthcnIubGVuZ3RoLTFdO1xuXHRcdFx0XHR2YXIgdG9wTm90ZSA9IHRvcEV2ZW50LnBpdGNoICUgMTI7XG5cdFx0XHRcdHZhciBmb3VuZCA9IGZhbHNlO1xuXHRcdFx0XHRmb3IgKGogPSAwOyAhZm91bmQgJiYgaiA8IGFyci5sZW5ndGgtMTsgaisrKSB7XG5cdFx0XHRcdFx0aWYgKGFycltqXS5waXRjaCAlIDEyID09PSB0b3BOb3RlKVxuXHRcdFx0XHRcdFx0Zm91bmQgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChmb3VuZCkge1xuXHRcdFx0XHRcdHZhciBldmVudCA9IHRyYWNrc1t0b3BFdmVudC50cmFja11bdG9wRXZlbnQuZXZlbnRdO1xuXHRcdFx0XHRcdGlmICghZXZlbnQuY2VudHMpXG5cdFx0XHRcdFx0XHRldmVudC5jZW50cyA9IDA7XG5cdFx0XHRcdFx0ZXZlbnQuY2VudHMgKz0gZGV0dW5lQ2VudHM7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZmxhdHRlbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/abc_midi_flattener.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/abc_midi_renderer.js":
/*!***********************************************************!*\
  !*** ./node_modules/abcjs/src/synth/abc_midi_renderer.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_midi_renderer.js: Create the actual format for the midi.\n\nvar centsToFactor = __webpack_require__(/*! ./cents-to-factor */ \"(ssr)/./node_modules/abcjs/src/synth/cents-to-factor.js\");\nvar rendererFactory;\n\n(function() {\n\t\"use strict\";\n\tfunction setAttributes(elm, attrs) {\n\t\tfor (var attr in attrs)\n\t\t\tif (attrs.hasOwnProperty(attr))\n\t\t\t\telm.setAttribute(attr, attrs[attr]);\n\t\treturn elm;\n\t}\n\n\tfunction Midi() {\n\t\tthis.trackstrings = \"\";\n\t\tthis.trackcount = 0;\n\t\tthis.noteOnAndChannel = \"%90\";\n\t\tthis.noteOffAndChannel = \"%80\";\n\t}\n\n\tMidi.prototype.setTempo = function(qpm) {\n\t\tif (this.trackcount === 0) {\n\t\t\tthis.startTrack();\n\t\t\tthis.track += \"%00%FF%51%03\" + toHex(Math.round(60000000 / qpm), 6);\n\t\t\tthis.endTrack();\n\t\t}\n\t};\n\n\tMidi.prototype.setGlobalInfo = function(qpm, name, key, time) {\n\t\tif (this.trackcount === 0) {\n\t\t\tthis.startTrack();\n\t\t\tvar divisions = Math.round(60000000 / qpm);\n\t\t\t// Add the tempo\n\t\t\tthis.track += \"%00%FF%51%03\" + toHex(divisions, 6);\n\n\t\t\tif (key)\n\t\t\t\tthis.track += keySignature(key);\n\t\t\tif (time)\n\t\t\t\tthis.track += timeSignature(time);\n\t\t\tif (name) {\n\t\t\t\tthis.track += encodeString(name, \"%01\");\n\t\t\t}\n\t\t\tthis.endTrack();\n\t\t}\n\t};\n\n\tMidi.prototype.startTrack = function() {\n\t\tthis.noteWarped = {};\n\t\tthis.track = \"\";\n\t\tthis.trackName = \"\";\n\t\tthis.trackInstrument = \"\";\n\t\tthis.silencelength = 0;\n\t\tthis.trackcount++;\n\t\tif (this.instrument) {\n\t\t\tthis.setInstrument(this.instrument);\n\t\t}\n\t};\n\n\tMidi.prototype.endTrack = function() {\n\t\tthis.track = this.trackName + this.trackInstrument + this.track;\n\t\tvar tracklength = toHex(this.track.length / 3 + 4, 8);\n\t\tthis.track = \"MTrk\" + tracklength + // track header\n\t\t\tthis.track +\n\t\t\t'%00%FF%2F%00'; // track end\n\t\tthis.trackstrings += this.track;\n\t};\n\n\tMidi.prototype.setText = function(type, text) {\n\t\t// MIDI defines the following types of events:\n\t\t//FF 01 len text Text Event\n\t\t//FF 02 len text Copyright Notice\n\t\t//FF 03 len text Sequence/Track Name\n\t\t//FF 04 len text Instrument Name\n\t\t//FF 05 len text Lyric\n\t\t//FF 06 len text Marker\n\t\t//FF 07 len text Cue Point\n\t\tswitch(type) {\n\t\t\tcase 'name':\n\t\t\t\tthis.trackName = encodeString(text, \"%03\");\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tMidi.prototype.setInstrument = function(number) {\n\t\tthis.trackInstrument = \"%00%C0\" + toHex(number, 2);\n\t\tthis.instrument = number;\n\t};\n\n\tMidi.prototype.setChannel = function(number, pan) {\n\t\tthis.channel = number;\n\t\tvar ccPrefix = \"%00%B\" + this.channel.toString(16);\n\t\t// Reset midi, in case it was set previously.\n\t\tthis.track += ccPrefix + \"%79%00\"; // Reset All Controllers\n\t\tthis.track += ccPrefix + \"%40%00\"; // Damper pedal\n\t\tthis.track += ccPrefix + \"%5B%30\"; // Effect 1 Depth (reverb)\n\t\t// Translate pan as -1 to 1 to 0 to 127\n\t\tif (!pan)\n\t\t\tpan = 0;\n\t\tpan = Math.round((pan + 1) * 64);\n\t\tthis.track += ccPrefix + \"%0A\" + toHex(pan, 2); // Pan\n\t\tthis.track += ccPrefix + \"%07%64\"; // Channel Volume\n\n\t\tthis.noteOnAndChannel = \"%9\" + this.channel.toString(16);\n\t\tthis.noteOffAndChannel = \"%8\" + this.channel.toString(16);\n\t};\n\n\tvar HALF_STEP = 4096; // For the pitch wheel - (i.e. the distance from C to C#)\n\tMidi.prototype.startNote = function(pitch, loudness, cents) {\n\t\tthis.track += toDurationHex(this.silencelength); // only need to shift by amount of silence (if there is any)\n\t\tthis.silencelength = 0;\n\t\tif (cents) {\n\t\t\t// the pitch is altered so send a midi pitch wheel event\n\t\t\tthis.track += \"%e\" + this.channel.toString(16);\n\t\t\tvar bend = Math.round(centsToFactor(cents)*HALF_STEP);\n\t\t\tthis.track += to7BitHex(0x2000 + bend);\n\t\t\tthis.track += toDurationHex(0); // this all happens at once so there is a zero length here\n\t\t\tthis.noteWarped[pitch] = true;\n\t\t}\n\t\tthis.track += this.noteOnAndChannel;\n\t\tthis.track += \"%\" + pitch.toString(16) + toHex(loudness, 2); //note\n\t};\n\n\tMidi.prototype.endNote = function(pitch) {\n\t\tthis.track += toDurationHex(this.silencelength); // only need to shift by amount of silence (if there is any)\n\t\tthis.silencelength = 0;\n\t\tif (this.noteWarped[pitch]) {\n\t\t\t// the pitch was altered so alter it back.\n\t\t\tthis.track += \"%e\" + this.channel.toString(16);\n\t\t\tthis.track += to7BitHex(0x2000);\n\t\t\tthis.track += toDurationHex(0); // this all happens at once so there is a zero length here\n\t\t\tthis.noteWarped[pitch] = false;\n\t\t}\n\t\tthis.track += this.noteOffAndChannel;\n\t\tthis.track += \"%\" + pitch.toString(16) + \"%00\";//end note\n\t};\n\n\tMidi.prototype.addRest = function(length) {\n\t\tthis.silencelength += length;\n\t\tif (this.silencelength < 0)\n\t\t\tthis.silencelength = 0;\n\t};\n\n\tMidi.prototype.getData = function() {\n\t\treturn \"data:audio/midi,\" +\n\t\t\t\"MThd%00%00%00%06%00%01\" + toHex(this.trackcount, 4) + \"%01%e0\" + // header\n\t\t\tthis.trackstrings;\n\t};\n\n\tMidi.prototype.embed = function(parent, noplayer) {\n\n\t\tvar data = this.getData();\n\n\t\tvar link = setAttributes(document.createElement('a'), {\n\t\t\thref: data\n\t\t});\n\t\tlink.innerHTML = \"download midi\";\n\t\tparent.insertBefore(link, parent.firstChild);\n\n\t\tif (noplayer) return;\n\n\t\tvar embed = setAttributes(document.createElement('embed'), {\n\t\t\tsrc: data,\n\t\t\ttype: 'video/quicktime',\n\t\t\tcontroller: 'true',\n\t\t\tautoplay: 'false',\n\t\t\tloop: 'false',\n\t\t\tenablejavascript: 'true',\n\t\t\tstyle: 'display:block; height: 20px;'\n\t\t});\n\t\tparent.insertBefore(embed, parent.firstChild);\n\t};\n\n\tfunction encodeString(str, cmdType) {\n\t\t// If there are multi-byte chars, we don't know how long the string will be until we create it.\n\t\tvar nameArray = \"\";\n\t\tfor (var i = 0; i < str.length; i++)\n\t\t\tnameArray += toHex(str.charCodeAt(i), 2);\n\t\treturn \"%00%FF\" + cmdType + toHex(nameArray.length/3, 2) + nameArray; // Each byte is represented by three chars \"%XX\", so divide by 3 to get the length.\n\t}\n\n\tfunction keySignature(key) {\n\t\t//00 FF 5902 03 00 - key signature\n\t\tif (!key || !key.accidentals)\n\t\t\treturn \"\";\n\t\tvar hex = \"%00%FF%59%02\";\n\t\tvar sharpCount = 0;\n\t\tvar flatCount = 256;\n\t\tfor (var i = 0; i < key.accidentals.length; i++) {\n\t\t\tif (key.accidentals[i].acc === \"sharp\") sharpCount++;\n\t\t\telse if (key.accidentals[i].acc === \"flat\") flatCount--;\n\t\t}\n\t\tvar sig = flatCount !== 256 ? toHex(flatCount, 2) : toHex(sharpCount, 2);\n\t\tvar mode = (key.mode === \"m\") ? \"%01\" : \"%00\";\n\t\treturn hex + sig + mode;\n\t}\n\n\tfunction timeSignature(time) {\n\t\t//00 FF 58 04 04 02 30 08 - time signature\n\t\tvar hex = \"%00%FF%58%04\" + toHex(time.num,2);\n\t\tvar dens = { 1: 0, 2: 1, 4: 2, 8: 3, 16: 4, 32: 5 };\n\t\tvar den = dens[time.den];\n\t\tif (!den)\n\t\t\treturn \"\"; // the denominator is not supported, so just don't include this.\n\t\thex += toHex(den, 2);\n\n\t\tvar clocks;\n\t\tswitch (time.num+\"/\"+time.den) {\n\t\t\tcase \"2/4\":\n\t\t\tcase \"3/4\":\n\t\t\tcase \"4/4\":\n\t\t\tcase \"5/4\":\n\t\t\t\tclocks = 24;\n\t\t\t\tbreak;\n\t\t\tcase \"6/4\":\n\t\t\t\tclocks = 72;\n\t\t\t\tbreak;\n\t\t\tcase \"2/2\":\n\t\t\tcase \"3/2\":\n\t\t\tcase \"4/2\":\n\t\t\t\tclocks = 48;\n\t\t\t\tbreak;\n\t\t\tcase \"3/8\":\n\t\t\tcase \"6/8\":\n\t\t\tcase \"9/8\":\n\t\t\tcase \"12/8\":\n\t\t\t\tclocks = 36;\n\t\t\t\tbreak;\n\t\t}\n\t\tif (!clocks)\n\t\t\treturn \"\"; // time sig is not supported.\n\t\thex += toHex(clocks, 2);\n\t\treturn hex + \"%08\";\n\t}\n\n\t// s is assumed to be of even length\n\tfunction encodeHex(s) {\n\t\tvar ret = \"\";\n\t\tfor (var i = 0; i < s.length; i += 2) {\n\t\t\tret += \"%\";\n\t\t\tret += s.substr(i, 2);\n\t\t}\n\t\treturn ret;\n\t}\n\n\tfunction toHex(n, padding) {\n\t\tvar s = n.toString(16);\n\t\ts = s.split(\".\")[0];\n\t\twhile (s.length < padding) {\n\t\t\ts = \"0\" + s;\n\t\t}\n\t\tif (s.length > padding)\n\t\t\ts = s.substring(0,padding)\n\t\treturn encodeHex(s);\n\t}\n\n\tfunction to7BitHex(n) {\n\t\t// this takes a number and shifts all digits from the 7th one to the left.\n\t\tn = Math.round(n);\n\t\tvar lower = n % 128;\n\t\tvar higher = n - lower;\n\t\treturn toHex(higher*2+lower, 4);\n\t}\n\n\tfunction toDurationHex(n) {\n\t\tvar res = 0;\n\t\tvar a = [];\n\n\t\t// cut up into 7 bit chunks;\n\t\tn = Math.round(n);\n\t\twhile (n !== 0) {\n\t\t\ta.push(n & 0x7F);\n\t\t\tn = n >> 7;\n\t\t}\n\n\t\t// join the 7 bit chunks together, all but last chunk get leading 1\n\t\tfor (var i = a.length - 1; i >= 0; i--) {\n\t\t\tres = res << 8;\n\t\t\tvar bits = a[i];\n\t\t\tif (i !== 0) {\n\t\t\t\tbits = bits | 0x80;\n\t\t\t}\n\t\t\tres = res | bits;\n\t\t}\n\n\t\tvar padding = res.toString(16).length;\n\t\tpadding += padding % 2;\n\n\t\treturn toHex(res, padding);\n\t}\n\n\trendererFactory = function() {\n\t\treturn new Midi();\n\t};\n})();\n\nmodule.exports = rendererFactory;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2FiY19taWRpX3JlbmRlcmVyLmpzIiwibWFwcGluZ3MiOiJBQUFBOztBQUVBLG9CQUFvQixtQkFBTyxDQUFDLGtGQUFtQjtBQUMvQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDLHFDQUFxQztBQUNyQyxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQscUNBQXFDOztBQUVyQztBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCO0FBQ3ZCO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQSwrREFBK0Q7QUFDL0Q7O0FBRUE7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixhQUFhO0FBQ3ZDLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQSx3RUFBd0U7QUFDeEU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNEJBQTRCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0EsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGNBQWM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNkJBQTZCLFFBQVE7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvc3ludGgvYWJjX21pZGlfcmVuZGVyZXIuanM/MDBlYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAgICBhYmNfbWlkaV9yZW5kZXJlci5qczogQ3JlYXRlIHRoZSBhY3R1YWwgZm9ybWF0IGZvciB0aGUgbWlkaS5cblxudmFyIGNlbnRzVG9GYWN0b3IgPSByZXF1aXJlKFwiLi9jZW50cy10by1mYWN0b3JcIik7XG52YXIgcmVuZGVyZXJGYWN0b3J5O1xuXG4oZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXHRmdW5jdGlvbiBzZXRBdHRyaWJ1dGVzKGVsbSwgYXR0cnMpIHtcblx0XHRmb3IgKHZhciBhdHRyIGluIGF0dHJzKVxuXHRcdFx0aWYgKGF0dHJzLmhhc093blByb3BlcnR5KGF0dHIpKVxuXHRcdFx0XHRlbG0uc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJzW2F0dHJdKTtcblx0XHRyZXR1cm4gZWxtO1xuXHR9XG5cblx0ZnVuY3Rpb24gTWlkaSgpIHtcblx0XHR0aGlzLnRyYWNrc3RyaW5ncyA9IFwiXCI7XG5cdFx0dGhpcy50cmFja2NvdW50ID0gMDtcblx0XHR0aGlzLm5vdGVPbkFuZENoYW5uZWwgPSBcIiU5MFwiO1xuXHRcdHRoaXMubm90ZU9mZkFuZENoYW5uZWwgPSBcIiU4MFwiO1xuXHR9XG5cblx0TWlkaS5wcm90b3R5cGUuc2V0VGVtcG8gPSBmdW5jdGlvbihxcG0pIHtcblx0XHRpZiAodGhpcy50cmFja2NvdW50ID09PSAwKSB7XG5cdFx0XHR0aGlzLnN0YXJ0VHJhY2soKTtcblx0XHRcdHRoaXMudHJhY2sgKz0gXCIlMDAlRkYlNTElMDNcIiArIHRvSGV4KE1hdGgucm91bmQoNjAwMDAwMDAgLyBxcG0pLCA2KTtcblx0XHRcdHRoaXMuZW5kVHJhY2soKTtcblx0XHR9XG5cdH07XG5cblx0TWlkaS5wcm90b3R5cGUuc2V0R2xvYmFsSW5mbyA9IGZ1bmN0aW9uKHFwbSwgbmFtZSwga2V5LCB0aW1lKSB7XG5cdFx0aWYgKHRoaXMudHJhY2tjb3VudCA9PT0gMCkge1xuXHRcdFx0dGhpcy5zdGFydFRyYWNrKCk7XG5cdFx0XHR2YXIgZGl2aXNpb25zID0gTWF0aC5yb3VuZCg2MDAwMDAwMCAvIHFwbSk7XG5cdFx0XHQvLyBBZGQgdGhlIHRlbXBvXG5cdFx0XHR0aGlzLnRyYWNrICs9IFwiJTAwJUZGJTUxJTAzXCIgKyB0b0hleChkaXZpc2lvbnMsIDYpO1xuXG5cdFx0XHRpZiAoa2V5KVxuXHRcdFx0XHR0aGlzLnRyYWNrICs9IGtleVNpZ25hdHVyZShrZXkpO1xuXHRcdFx0aWYgKHRpbWUpXG5cdFx0XHRcdHRoaXMudHJhY2sgKz0gdGltZVNpZ25hdHVyZSh0aW1lKTtcblx0XHRcdGlmIChuYW1lKSB7XG5cdFx0XHRcdHRoaXMudHJhY2sgKz0gZW5jb2RlU3RyaW5nKG5hbWUsIFwiJTAxXCIpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5lbmRUcmFjaygpO1xuXHRcdH1cblx0fTtcblxuXHRNaWRpLnByb3RvdHlwZS5zdGFydFRyYWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5ub3RlV2FycGVkID0ge307XG5cdFx0dGhpcy50cmFjayA9IFwiXCI7XG5cdFx0dGhpcy50cmFja05hbWUgPSBcIlwiO1xuXHRcdHRoaXMudHJhY2tJbnN0cnVtZW50ID0gXCJcIjtcblx0XHR0aGlzLnNpbGVuY2VsZW5ndGggPSAwO1xuXHRcdHRoaXMudHJhY2tjb3VudCsrO1xuXHRcdGlmICh0aGlzLmluc3RydW1lbnQpIHtcblx0XHRcdHRoaXMuc2V0SW5zdHJ1bWVudCh0aGlzLmluc3RydW1lbnQpO1xuXHRcdH1cblx0fTtcblxuXHRNaWRpLnByb3RvdHlwZS5lbmRUcmFjayA9IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudHJhY2sgPSB0aGlzLnRyYWNrTmFtZSArIHRoaXMudHJhY2tJbnN0cnVtZW50ICsgdGhpcy50cmFjaztcblx0XHR2YXIgdHJhY2tsZW5ndGggPSB0b0hleCh0aGlzLnRyYWNrLmxlbmd0aCAvIDMgKyA0LCA4KTtcblx0XHR0aGlzLnRyYWNrID0gXCJNVHJrXCIgKyB0cmFja2xlbmd0aCArIC8vIHRyYWNrIGhlYWRlclxuXHRcdFx0dGhpcy50cmFjayArXG5cdFx0XHQnJTAwJUZGJTJGJTAwJzsgLy8gdHJhY2sgZW5kXG5cdFx0dGhpcy50cmFja3N0cmluZ3MgKz0gdGhpcy50cmFjaztcblx0fTtcblxuXHRNaWRpLnByb3RvdHlwZS5zZXRUZXh0ID0gZnVuY3Rpb24odHlwZSwgdGV4dCkge1xuXHRcdC8vIE1JREkgZGVmaW5lcyB0aGUgZm9sbG93aW5nIHR5cGVzIG9mIGV2ZW50czpcblx0XHQvL0ZGIDAxIGxlbiB0ZXh0IFRleHQgRXZlbnRcblx0XHQvL0ZGIDAyIGxlbiB0ZXh0IENvcHlyaWdodCBOb3RpY2Vcblx0XHQvL0ZGIDAzIGxlbiB0ZXh0IFNlcXVlbmNlL1RyYWNrIE5hbWVcblx0XHQvL0ZGIDA0IGxlbiB0ZXh0IEluc3RydW1lbnQgTmFtZVxuXHRcdC8vRkYgMDUgbGVuIHRleHQgTHlyaWNcblx0XHQvL0ZGIDA2IGxlbiB0ZXh0IE1hcmtlclxuXHRcdC8vRkYgMDcgbGVuIHRleHQgQ3VlIFBvaW50XG5cdFx0c3dpdGNoKHR5cGUpIHtcblx0XHRcdGNhc2UgJ25hbWUnOlxuXHRcdFx0XHR0aGlzLnRyYWNrTmFtZSA9IGVuY29kZVN0cmluZyh0ZXh0LCBcIiUwM1wiKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9O1xuXG5cdE1pZGkucHJvdG90eXBlLnNldEluc3RydW1lbnQgPSBmdW5jdGlvbihudW1iZXIpIHtcblx0XHR0aGlzLnRyYWNrSW5zdHJ1bWVudCA9IFwiJTAwJUMwXCIgKyB0b0hleChudW1iZXIsIDIpO1xuXHRcdHRoaXMuaW5zdHJ1bWVudCA9IG51bWJlcjtcblx0fTtcblxuXHRNaWRpLnByb3RvdHlwZS5zZXRDaGFubmVsID0gZnVuY3Rpb24obnVtYmVyLCBwYW4pIHtcblx0XHR0aGlzLmNoYW5uZWwgPSBudW1iZXI7XG5cdFx0dmFyIGNjUHJlZml4ID0gXCIlMDAlQlwiICsgdGhpcy5jaGFubmVsLnRvU3RyaW5nKDE2KTtcblx0XHQvLyBSZXNldCBtaWRpLCBpbiBjYXNlIGl0IHdhcyBzZXQgcHJldmlvdXNseS5cblx0XHR0aGlzLnRyYWNrICs9IGNjUHJlZml4ICsgXCIlNzklMDBcIjsgLy8gUmVzZXQgQWxsIENvbnRyb2xsZXJzXG5cdFx0dGhpcy50cmFjayArPSBjY1ByZWZpeCArIFwiJTQwJTAwXCI7IC8vIERhbXBlciBwZWRhbFxuXHRcdHRoaXMudHJhY2sgKz0gY2NQcmVmaXggKyBcIiU1QiUzMFwiOyAvLyBFZmZlY3QgMSBEZXB0aCAocmV2ZXJiKVxuXHRcdC8vIFRyYW5zbGF0ZSBwYW4gYXMgLTEgdG8gMSB0byAwIHRvIDEyN1xuXHRcdGlmICghcGFuKVxuXHRcdFx0cGFuID0gMDtcblx0XHRwYW4gPSBNYXRoLnJvdW5kKChwYW4gKyAxKSAqIDY0KTtcblx0XHR0aGlzLnRyYWNrICs9IGNjUHJlZml4ICsgXCIlMEFcIiArIHRvSGV4KHBhbiwgMik7IC8vIFBhblxuXHRcdHRoaXMudHJhY2sgKz0gY2NQcmVmaXggKyBcIiUwNyU2NFwiOyAvLyBDaGFubmVsIFZvbHVtZVxuXG5cdFx0dGhpcy5ub3RlT25BbmRDaGFubmVsID0gXCIlOVwiICsgdGhpcy5jaGFubmVsLnRvU3RyaW5nKDE2KTtcblx0XHR0aGlzLm5vdGVPZmZBbmRDaGFubmVsID0gXCIlOFwiICsgdGhpcy5jaGFubmVsLnRvU3RyaW5nKDE2KTtcblx0fTtcblxuXHR2YXIgSEFMRl9TVEVQID0gNDA5NjsgLy8gRm9yIHRoZSBwaXRjaCB3aGVlbCAtIChpLmUuIHRoZSBkaXN0YW5jZSBmcm9tIEMgdG8gQyMpXG5cdE1pZGkucHJvdG90eXBlLnN0YXJ0Tm90ZSA9IGZ1bmN0aW9uKHBpdGNoLCBsb3VkbmVzcywgY2VudHMpIHtcblx0XHR0aGlzLnRyYWNrICs9IHRvRHVyYXRpb25IZXgodGhpcy5zaWxlbmNlbGVuZ3RoKTsgLy8gb25seSBuZWVkIHRvIHNoaWZ0IGJ5IGFtb3VudCBvZiBzaWxlbmNlIChpZiB0aGVyZSBpcyBhbnkpXG5cdFx0dGhpcy5zaWxlbmNlbGVuZ3RoID0gMDtcblx0XHRpZiAoY2VudHMpIHtcblx0XHRcdC8vIHRoZSBwaXRjaCBpcyBhbHRlcmVkIHNvIHNlbmQgYSBtaWRpIHBpdGNoIHdoZWVsIGV2ZW50XG5cdFx0XHR0aGlzLnRyYWNrICs9IFwiJWVcIiArIHRoaXMuY2hhbm5lbC50b1N0cmluZygxNik7XG5cdFx0XHR2YXIgYmVuZCA9IE1hdGgucm91bmQoY2VudHNUb0ZhY3RvcihjZW50cykqSEFMRl9TVEVQKTtcblx0XHRcdHRoaXMudHJhY2sgKz0gdG83Qml0SGV4KDB4MjAwMCArIGJlbmQpO1xuXHRcdFx0dGhpcy50cmFjayArPSB0b0R1cmF0aW9uSGV4KDApOyAvLyB0aGlzIGFsbCBoYXBwZW5zIGF0IG9uY2Ugc28gdGhlcmUgaXMgYSB6ZXJvIGxlbmd0aCBoZXJlXG5cdFx0XHR0aGlzLm5vdGVXYXJwZWRbcGl0Y2hdID0gdHJ1ZTtcblx0XHR9XG5cdFx0dGhpcy50cmFjayArPSB0aGlzLm5vdGVPbkFuZENoYW5uZWw7XG5cdFx0dGhpcy50cmFjayArPSBcIiVcIiArIHBpdGNoLnRvU3RyaW5nKDE2KSArIHRvSGV4KGxvdWRuZXNzLCAyKTsgLy9ub3RlXG5cdH07XG5cblx0TWlkaS5wcm90b3R5cGUuZW5kTm90ZSA9IGZ1bmN0aW9uKHBpdGNoKSB7XG5cdFx0dGhpcy50cmFjayArPSB0b0R1cmF0aW9uSGV4KHRoaXMuc2lsZW5jZWxlbmd0aCk7IC8vIG9ubHkgbmVlZCB0byBzaGlmdCBieSBhbW91bnQgb2Ygc2lsZW5jZSAoaWYgdGhlcmUgaXMgYW55KVxuXHRcdHRoaXMuc2lsZW5jZWxlbmd0aCA9IDA7XG5cdFx0aWYgKHRoaXMubm90ZVdhcnBlZFtwaXRjaF0pIHtcblx0XHRcdC8vIHRoZSBwaXRjaCB3YXMgYWx0ZXJlZCBzbyBhbHRlciBpdCBiYWNrLlxuXHRcdFx0dGhpcy50cmFjayArPSBcIiVlXCIgKyB0aGlzLmNoYW5uZWwudG9TdHJpbmcoMTYpO1xuXHRcdFx0dGhpcy50cmFjayArPSB0bzdCaXRIZXgoMHgyMDAwKTtcblx0XHRcdHRoaXMudHJhY2sgKz0gdG9EdXJhdGlvbkhleCgwKTsgLy8gdGhpcyBhbGwgaGFwcGVucyBhdCBvbmNlIHNvIHRoZXJlIGlzIGEgemVybyBsZW5ndGggaGVyZVxuXHRcdFx0dGhpcy5ub3RlV2FycGVkW3BpdGNoXSA9IGZhbHNlO1xuXHRcdH1cblx0XHR0aGlzLnRyYWNrICs9IHRoaXMubm90ZU9mZkFuZENoYW5uZWw7XG5cdFx0dGhpcy50cmFjayArPSBcIiVcIiArIHBpdGNoLnRvU3RyaW5nKDE2KSArIFwiJTAwXCI7Ly9lbmQgbm90ZVxuXHR9O1xuXG5cdE1pZGkucHJvdG90eXBlLmFkZFJlc3QgPSBmdW5jdGlvbihsZW5ndGgpIHtcblx0XHR0aGlzLnNpbGVuY2VsZW5ndGggKz0gbGVuZ3RoO1xuXHRcdGlmICh0aGlzLnNpbGVuY2VsZW5ndGggPCAwKVxuXHRcdFx0dGhpcy5zaWxlbmNlbGVuZ3RoID0gMDtcblx0fTtcblxuXHRNaWRpLnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIFwiZGF0YTphdWRpby9taWRpLFwiICtcblx0XHRcdFwiTVRoZCUwMCUwMCUwMCUwNiUwMCUwMVwiICsgdG9IZXgodGhpcy50cmFja2NvdW50LCA0KSArIFwiJTAxJWUwXCIgKyAvLyBoZWFkZXJcblx0XHRcdHRoaXMudHJhY2tzdHJpbmdzO1xuXHR9O1xuXG5cdE1pZGkucHJvdG90eXBlLmVtYmVkID0gZnVuY3Rpb24ocGFyZW50LCBub3BsYXllcikge1xuXG5cdFx0dmFyIGRhdGEgPSB0aGlzLmdldERhdGEoKTtcblxuXHRcdHZhciBsaW5rID0gc2V0QXR0cmlidXRlcyhkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyksIHtcblx0XHRcdGhyZWY6IGRhdGFcblx0XHR9KTtcblx0XHRsaW5rLmlubmVySFRNTCA9IFwiZG93bmxvYWQgbWlkaVwiO1xuXHRcdHBhcmVudC5pbnNlcnRCZWZvcmUobGluaywgcGFyZW50LmZpcnN0Q2hpbGQpO1xuXG5cdFx0aWYgKG5vcGxheWVyKSByZXR1cm47XG5cblx0XHR2YXIgZW1iZWQgPSBzZXRBdHRyaWJ1dGVzKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2VtYmVkJyksIHtcblx0XHRcdHNyYzogZGF0YSxcblx0XHRcdHR5cGU6ICd2aWRlby9xdWlja3RpbWUnLFxuXHRcdFx0Y29udHJvbGxlcjogJ3RydWUnLFxuXHRcdFx0YXV0b3BsYXk6ICdmYWxzZScsXG5cdFx0XHRsb29wOiAnZmFsc2UnLFxuXHRcdFx0ZW5hYmxlamF2YXNjcmlwdDogJ3RydWUnLFxuXHRcdFx0c3R5bGU6ICdkaXNwbGF5OmJsb2NrOyBoZWlnaHQ6IDIwcHg7J1xuXHRcdH0pO1xuXHRcdHBhcmVudC5pbnNlcnRCZWZvcmUoZW1iZWQsIHBhcmVudC5maXJzdENoaWxkKTtcblx0fTtcblxuXHRmdW5jdGlvbiBlbmNvZGVTdHJpbmcoc3RyLCBjbWRUeXBlKSB7XG5cdFx0Ly8gSWYgdGhlcmUgYXJlIG11bHRpLWJ5dGUgY2hhcnMsIHdlIGRvbid0IGtub3cgaG93IGxvbmcgdGhlIHN0cmluZyB3aWxsIGJlIHVudGlsIHdlIGNyZWF0ZSBpdC5cblx0XHR2YXIgbmFtZUFycmF5ID0gXCJcIjtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKylcblx0XHRcdG5hbWVBcnJheSArPSB0b0hleChzdHIuY2hhckNvZGVBdChpKSwgMik7XG5cdFx0cmV0dXJuIFwiJTAwJUZGXCIgKyBjbWRUeXBlICsgdG9IZXgobmFtZUFycmF5Lmxlbmd0aC8zLCAyKSArIG5hbWVBcnJheTsgLy8gRWFjaCBieXRlIGlzIHJlcHJlc2VudGVkIGJ5IHRocmVlIGNoYXJzIFwiJVhYXCIsIHNvIGRpdmlkZSBieSAzIHRvIGdldCB0aGUgbGVuZ3RoLlxuXHR9XG5cblx0ZnVuY3Rpb24ga2V5U2lnbmF0dXJlKGtleSkge1xuXHRcdC8vMDAgRkYgNTkwMiAwMyAwMCAtIGtleSBzaWduYXR1cmVcblx0XHRpZiAoIWtleSB8fCAha2V5LmFjY2lkZW50YWxzKVxuXHRcdFx0cmV0dXJuIFwiXCI7XG5cdFx0dmFyIGhleCA9IFwiJTAwJUZGJTU5JTAyXCI7XG5cdFx0dmFyIHNoYXJwQ291bnQgPSAwO1xuXHRcdHZhciBmbGF0Q291bnQgPSAyNTY7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBrZXkuYWNjaWRlbnRhbHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmIChrZXkuYWNjaWRlbnRhbHNbaV0uYWNjID09PSBcInNoYXJwXCIpIHNoYXJwQ291bnQrKztcblx0XHRcdGVsc2UgaWYgKGtleS5hY2NpZGVudGFsc1tpXS5hY2MgPT09IFwiZmxhdFwiKSBmbGF0Q291bnQtLTtcblx0XHR9XG5cdFx0dmFyIHNpZyA9IGZsYXRDb3VudCAhPT0gMjU2ID8gdG9IZXgoZmxhdENvdW50LCAyKSA6IHRvSGV4KHNoYXJwQ291bnQsIDIpO1xuXHRcdHZhciBtb2RlID0gKGtleS5tb2RlID09PSBcIm1cIikgPyBcIiUwMVwiIDogXCIlMDBcIjtcblx0XHRyZXR1cm4gaGV4ICsgc2lnICsgbW9kZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHRpbWVTaWduYXR1cmUodGltZSkge1xuXHRcdC8vMDAgRkYgNTggMDQgMDQgMDIgMzAgMDggLSB0aW1lIHNpZ25hdHVyZVxuXHRcdHZhciBoZXggPSBcIiUwMCVGRiU1OCUwNFwiICsgdG9IZXgodGltZS5udW0sMik7XG5cdFx0dmFyIGRlbnMgPSB7IDE6IDAsIDI6IDEsIDQ6IDIsIDg6IDMsIDE2OiA0LCAzMjogNSB9O1xuXHRcdHZhciBkZW4gPSBkZW5zW3RpbWUuZGVuXTtcblx0XHRpZiAoIWRlbilcblx0XHRcdHJldHVybiBcIlwiOyAvLyB0aGUgZGVub21pbmF0b3IgaXMgbm90IHN1cHBvcnRlZCwgc28ganVzdCBkb24ndCBpbmNsdWRlIHRoaXMuXG5cdFx0aGV4ICs9IHRvSGV4KGRlbiwgMik7XG5cblx0XHR2YXIgY2xvY2tzO1xuXHRcdHN3aXRjaCAodGltZS5udW0rXCIvXCIrdGltZS5kZW4pIHtcblx0XHRcdGNhc2UgXCIyLzRcIjpcblx0XHRcdGNhc2UgXCIzLzRcIjpcblx0XHRcdGNhc2UgXCI0LzRcIjpcblx0XHRcdGNhc2UgXCI1LzRcIjpcblx0XHRcdFx0Y2xvY2tzID0gMjQ7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcIjYvNFwiOlxuXHRcdFx0XHRjbG9ja3MgPSA3Mjtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiMi8yXCI6XG5cdFx0XHRjYXNlIFwiMy8yXCI6XG5cdFx0XHRjYXNlIFwiNC8yXCI6XG5cdFx0XHRcdGNsb2NrcyA9IDQ4O1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCIzLzhcIjpcblx0XHRcdGNhc2UgXCI2LzhcIjpcblx0XHRcdGNhc2UgXCI5LzhcIjpcblx0XHRcdGNhc2UgXCIxMi84XCI6XG5cdFx0XHRcdGNsb2NrcyA9IDM2O1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdFx0aWYgKCFjbG9ja3MpXG5cdFx0XHRyZXR1cm4gXCJcIjsgLy8gdGltZSBzaWcgaXMgbm90IHN1cHBvcnRlZC5cblx0XHRoZXggKz0gdG9IZXgoY2xvY2tzLCAyKTtcblx0XHRyZXR1cm4gaGV4ICsgXCIlMDhcIjtcblx0fVxuXG5cdC8vIHMgaXMgYXNzdW1lZCB0byBiZSBvZiBldmVuIGxlbmd0aFxuXHRmdW5jdGlvbiBlbmNvZGVIZXgocykge1xuXHRcdHZhciByZXQgPSBcIlwiO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkgKz0gMikge1xuXHRcdFx0cmV0ICs9IFwiJVwiO1xuXHRcdFx0cmV0ICs9IHMuc3Vic3RyKGksIDIpO1xuXHRcdH1cblx0XHRyZXR1cm4gcmV0O1xuXHR9XG5cblx0ZnVuY3Rpb24gdG9IZXgobiwgcGFkZGluZykge1xuXHRcdHZhciBzID0gbi50b1N0cmluZygxNik7XG5cdFx0cyA9IHMuc3BsaXQoXCIuXCIpWzBdO1xuXHRcdHdoaWxlIChzLmxlbmd0aCA8IHBhZGRpbmcpIHtcblx0XHRcdHMgPSBcIjBcIiArIHM7XG5cdFx0fVxuXHRcdGlmIChzLmxlbmd0aCA+IHBhZGRpbmcpXG5cdFx0XHRzID0gcy5zdWJzdHJpbmcoMCxwYWRkaW5nKVxuXHRcdHJldHVybiBlbmNvZGVIZXgocyk7XG5cdH1cblxuXHRmdW5jdGlvbiB0bzdCaXRIZXgobikge1xuXHRcdC8vIHRoaXMgdGFrZXMgYSBudW1iZXIgYW5kIHNoaWZ0cyBhbGwgZGlnaXRzIGZyb20gdGhlIDd0aCBvbmUgdG8gdGhlIGxlZnQuXG5cdFx0biA9IE1hdGgucm91bmQobik7XG5cdFx0dmFyIGxvd2VyID0gbiAlIDEyODtcblx0XHR2YXIgaGlnaGVyID0gbiAtIGxvd2VyO1xuXHRcdHJldHVybiB0b0hleChoaWdoZXIqMitsb3dlciwgNCk7XG5cdH1cblxuXHRmdW5jdGlvbiB0b0R1cmF0aW9uSGV4KG4pIHtcblx0XHR2YXIgcmVzID0gMDtcblx0XHR2YXIgYSA9IFtdO1xuXG5cdFx0Ly8gY3V0IHVwIGludG8gNyBiaXQgY2h1bmtzO1xuXHRcdG4gPSBNYXRoLnJvdW5kKG4pO1xuXHRcdHdoaWxlIChuICE9PSAwKSB7XG5cdFx0XHRhLnB1c2gobiAmIDB4N0YpO1xuXHRcdFx0biA9IG4gPj4gNztcblx0XHR9XG5cblx0XHQvLyBqb2luIHRoZSA3IGJpdCBjaHVua3MgdG9nZXRoZXIsIGFsbCBidXQgbGFzdCBjaHVuayBnZXQgbGVhZGluZyAxXG5cdFx0Zm9yICh2YXIgaSA9IGEubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdHJlcyA9IHJlcyA8PCA4O1xuXHRcdFx0dmFyIGJpdHMgPSBhW2ldO1xuXHRcdFx0aWYgKGkgIT09IDApIHtcblx0XHRcdFx0Yml0cyA9IGJpdHMgfCAweDgwO1xuXHRcdFx0fVxuXHRcdFx0cmVzID0gcmVzIHwgYml0cztcblx0XHR9XG5cblx0XHR2YXIgcGFkZGluZyA9IHJlcy50b1N0cmluZygxNikubGVuZ3RoO1xuXHRcdHBhZGRpbmcgKz0gcGFkZGluZyAlIDI7XG5cblx0XHRyZXR1cm4gdG9IZXgocmVzLCBwYWRkaW5nKTtcblx0fVxuXG5cdHJlbmRlcmVyRmFjdG9yeSA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBuZXcgTWlkaSgpO1xuXHR9O1xufSkoKTtcblxubW9kdWxlLmV4cG9ydHMgPSByZW5kZXJlckZhY3Rvcnk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/abc_midi_renderer.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/abc_midi_sequencer.js":
/*!************************************************************!*\
  !*** ./node_modules/abcjs/src/synth/abc_midi_sequencer.js ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_midi_sequencer.js: Turn parsed abc into a linear series of events.\n\nvar sequence;\nvar parseCommon = __webpack_require__(/*! ../parse/abc_common */ \"(ssr)/./node_modules/abcjs/src/parse/abc_common.js\");\n\n(function() {\n\t\"use strict\";\n\n\tvar measureLength = 1; // This should be set by the meter, but just in case that is missing, we'll take a guess.\n\t// The abc is provided to us line by line. It might have repeats in it. We want to re arrange the elements to\n\t// be an array of voices with all the repeats embedded, and no lines. Then it is trivial to go through the events\n\t// one at a time and turn it into midi.\n\n\tvar PERCUSSION_PROGRAM = 128;\n\n\tsequence = function(abctune, options) {\n\t\t// Global options\n\t\toptions = options || {};\n\t\tvar qpm;\n\t\tvar program = options.program || 0;\t// The program if there isn't a program specified.\n\t\tvar transpose = options.midiTranspose || 0;\n\t\t// If the tune has a visual transpose then that needs to be subtracted out because we are getting the visual object.\n\t\tif (abctune.visualTranspose)\n\t\t\ttranspose -= abctune.visualTranspose;\n\t\tvar channel = options.channel || 0;\n\t\tvar channelExplicitlySet = false;\n\t\tvar drumPattern = options.drum || \"\";\n\t\tvar drumBars = options.drumBars || 1;\n\t\tvar drumIntro = options.drumIntro || 0;\n\t\tvar drumOn = drumPattern !== \"\";\n\t\tvar drumOffAfterIntro = !!options.drumOff\n\t\tvar style = []; // The note head style for each voice.\n\t\tvar rhythmHeadThisBar = false; // Rhythm notation was detected.\n\t\tvar crescendoSize = 50; // how much to increase or decrease volume when crescendo/diminuendo is encountered.\n\n\t\t// All of the above overrides need to be integers\n\t\tprogram = parseInt(program, 10);\n\t\ttranspose = parseInt(transpose, 10);\n\t\tchannel = parseInt(channel, 10);\n\t\tif (channel === 10)\n\t\t\tprogram = PERCUSSION_PROGRAM;\n\t\tdrumPattern = drumPattern.split(\" \");\n\t\tdrumBars = parseInt(drumBars, 10);\n\t\tdrumIntro = parseInt(drumIntro, 10);\n\n\t\tvar bagpipes = abctune.formatting.bagpipes; // If it is bagpipes, then the gracenotes are played on top of the main note.\n\t\tif (bagpipes)\n\t\t\tprogram = 71;\n\n\t\t// %%MIDI fermatafixed\n\t\t// %%MIDI fermataproportional\n\t\t// %%MIDI deltaloudness n\n\t\t// %%MIDI gracedivider b\n\t\t// %%MIDI ratio n m\n\t\t// %%MIDI beat a b c n\n\t\t// %%MIDI grace a/b\n\t\t// %%MIDI trim x/y\n\n\t\t// %MIDI gchordon\n\t\t// %MIDI gchordoff\n\t\t// %%MIDI bassprog 45\n\t\t// %%MIDI chordprog 24\n\t\t// %%MIDI chordname name n1 n2 n3 n4 n5 n6\n\n\t\t//%%MIDI beat int1 int2 int3 int4: controls the volumes of the notes in a measure. The first note in a bar has volume int1; other strong notes have volume int2 and all the rest have volume int3. These values must be in the range 0127. The parameter int4 determines which notes are strong. If the time signature is x/y, then each note is given a position number k = 0, 1, 2. . . x-1 within each bar. If k is a multiple of int4, then the note is strong.\n\n\t\tvar startingMidi = [];\n\t\tif (abctune.formatting.midi) {\n\t\t\t//console.log(\"MIDI Formatting:\", abctune.formatting.midi);\n\t\t\tvar globals = abctune.formatting.midi;\n\t\t\tif (globals.program && globals.program.length > 0) {\n\t\t\t\tprogram = globals.program[0];\n\t\t\t\tif (globals.program.length > 1) {\n\t\t\t\t\tprogram = globals.program[1];\n\t\t\t\t\tchannel = globals.program[0];\n\t\t\t\t}\n\t\t\t\tchannelExplicitlySet = true;\n\t\t\t}\n\t\t\tif (globals.transpose)\n\t\t\t\ttranspose = globals.transpose[0];\n\t\t\tif (globals.channel) {\n\t\t\t\tchannel = globals.channel[0];\n\t\t\t\tchannelExplicitlySet = true;\n\t\t\t}\n\t\t\tif (globals.drum)\n\t\t\t\tdrumPattern = globals.drum;\n\t\t\tif (globals.drumbars)\n\t\t\t\tdrumBars = globals.drumbars[0];\n\t\t\tif (globals.drumon)\n\t\t\t\tdrumOn = true;\n\t\t\tif (channel === 10)\n\t\t\t\tprogram = PERCUSSION_PROGRAM;\n\t\t\tif (globals.beat)\n\t\t\t\tstartingMidi.push({ el_type: 'beat', beats: globals.beat })\n\t\t\tif (globals.nobeataccents)\n\t\t\t\tstartingMidi.push({ el_type: 'beataccents', value: false });\n\n\t\t}\n\n\t\t// Specified options in abc string.\n\n\t\t// If the tempo was passed in, use that.\n\t\t// If the tempo is specified, use that.\n\t\t// If there is a default, use that.\n\t\t// Otherwise, use the default.\n\t\tif (options.qpm)\n\t\t\tqpm = parseInt(options.qpm, 10);\n\t\telse if (abctune.metaText.tempo)\n\t\t\tqpm = interpretTempo(abctune.metaText.tempo, abctune.getBeatLength());\n\t\telse if (options.defaultQpm)\n\t\t\tqpm = options.defaultQpm;\n\t\telse\n\t\t\tqpm = 180; \t// The tempo if there isn't a tempo specified.\n\n\t\tvar startVoice = [];\n\t\tif (bagpipes)\n\t\t\tstartVoice.push({ el_type: 'bagpipes' });\n\t\tstartVoice.push({ el_type: 'instrument', program: program });\n\t\tif (channel)\n\t\t\tstartVoice.push({ el_type: 'channel', channel: channel });\n\t\tif (transpose)\n\t\t\tstartVoice.push({ el_type: 'transpose', transpose: transpose });\n\t\tstartVoice.push({ el_type: 'tempo', qpm: qpm });\n\t\tfor (var ss = 0; ss < startingMidi.length;ss++)\n\t\t\tstartVoice.push(startingMidi[ss]);\n\n\t\t// the relevant part of the input structure is:\n\t\t// abctune\n\t\t//\t\tarray lines\n\t\t//\t\t\tarray staff\n\t\t//\t\t\t\tobject key\n\t\t//\t\t\t\tobject meter\n\t\t//\t\t\t\tarray voices\n\t\t//\t\t\t\t\tarray abcelem\n\n\t\t// visit each voice completely in turn\n\t\tvar voices = [];\n\t\tvar clefTransposeActive = []\n\t\tvar inCrescendo = [];\n\t\tvar inDiminuendo = [];\n\t\tvar durationCounter = [0];\n\t\tvar tempoChanges = {};\n\t\ttempoChanges[\"0\"] = { el_type: 'tempo', qpm: qpm, timing: 0 };\n\t\tvar currentVolume;\n\t\tvar startRepeatPlaceholder = []; // There is a place holder for each voice.\n\t\tvar skipEndingPlaceholder = []; // This is the place where the first ending starts.\n\t\tvar startingDrumSet = false;\n\t\tvar lines = abctune.lines; //abctune.deline(); TODO-PER: can switch to this, then simplify the loops below.\n\t\tfor (var i = 0; i < lines.length; i++) {\n\t\t\t// For each group of staff lines in the tune.\n\t\t\tvar line = lines[i];\n\t\t\tif (line.staff) {\n\t\t\t\tvar staves = line.staff;\n\t\t\t\tvar voiceNumber = 0;\n\t\t\t\tfor (var j = 0; j < staves.length; j++) {\n\t\t\t\t\tvar staff = staves[j];\n\t\t\t\t\tif (staff.clef && staff.clef.type === \"TAB\")\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t// For each staff line\n\t\t\t\t\tfor (var k = 0; k < staff.voices.length; k++) {\n\t\t\t\t\t\t// For each voice in a staff line\n\t\t\t\t\t\tvar voice = staff.voices[k];\n\t\t\t\t\t\tif (!voices[voiceNumber]) {\n\t\t\t\t\t\t\tvoices[voiceNumber] = [].concat(JSON.parse(JSON.stringify(startVoice)));\n\t\t\t\t\t\t\tvar voiceName = getTrackTitle(line.staff, voiceNumber);\n\t\t\t\t\t\t\tif (voiceName)\n\t\t\t\t\t\t\t\tvoices[voiceNumber].unshift({el_type: \"name\", trackName: voiceName});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Negate any transposition for the percussion staff.\n\t\t\t\t\t\tif (transpose && staff.clef.type === \"perc\")\n\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'transpose', transpose: 0 });\n\n\t\t\t\t\t\tif (staff.clef && staff.clef.type === 'perc' && !channelExplicitlySet) {\n\t\t\t\t\t\t\tfor (var cl = 0; cl < voices[voiceNumber].length; cl++) {\n\t\t\t\t\t\t\t\tif (voices[voiceNumber][cl].el_type === 'instrument')\n\t\t\t\t\t\t\t\t\tvoices[voiceNumber][cl].program = PERCUSSION_PROGRAM;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (staff.key) {\n\t\t\t\t\t\t\taddKey(voices[voiceNumber], staff.key);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (staff.meter) {\n\t\t\t\t\t\t\taddMeter(voices[voiceNumber], staff.meter);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!startingDrumSet && drumOn) { // drum information is only needed once, so use the first line and track 0.\n\t\t\t\t\t\t\tvoices[voiceNumber].push({el_type: 'drum', params: {pattern: drumPattern, bars: drumBars, on: drumOn, intro: drumIntro}});\n\t\t\t\t\t\t\tstartingDrumSet = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (staff.clef && staff.clef.type !== \"perc\" && staff.clef.transpose) {\n\t\t\t\t\t\t\tstaff.clef.el_type = 'clef';\n\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'transpose', transpose: staff.clef.transpose });\n\t\t\t\t\t\t\tclefTransposeActive[voiceNumber] = false\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (staff.clef && staff.clef.type) {\n\t\t\t\t\t\t\tif (staff.clef.type.indexOf(\"-8\") >= 0) {\n\t\t\t\t\t\t\t\tvoices[voiceNumber].push({el_type: 'transpose', transpose: -12});\n\t\t\t\t\t\t\t\tclefTransposeActive[voiceNumber] = true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (staff.clef.type.indexOf(\"+8\") >= 0) {\n\t\t\t\t\t\t\t\tvoices[voiceNumber].push({el_type: 'transpose', transpose: 12});\n\t\t\t\t\t\t\t\tclefTransposeActive[voiceNumber] = true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// if we had a previous treble+8 and now have a regular clef, then cancel the transposition\n\t\t\t\t\t\t\t\tif (clefTransposeActive[voiceNumber]) {\n\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'transpose', transpose: 0 });\n\t\t\t\t\t\t\t\t\tclefTransposeActive[voiceNumber] = false\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (abctune.formatting.midi && abctune.formatting.midi.drumoff) {\n\t\t\t\t\t\t\t// If there is a drum off command right at the beginning it is put in the metaText instead of the stream,\n\t\t\t\t\t\t\t// so we will just insert it here.\n\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'bar' });\n\t\t\t\t\t\t\tvoices[voiceNumber].push({el_type: 'drum', params: {pattern: \"\", on: false }});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar noteEventsInBar = 0;\n\t\t\t\t\t\tvar tripletMultiplier = 0;\n\t\t\t\t\t\tvar tripletDurationTotal = 0; // try to mitigate the js rounding problems.\n\t\t\t\t\t\tvar tripletDurationCount = 0;\n\t\t\t\t\t\tcurrentVolume = [105, 95, 85, 1];\n\n\t\t\t\t\t\tfor (var v = 0; v < voice.length; v++) {\n\t\t\t\t\t\t\t// For each element in a voice\n\t\t\t\t\t\t\tvar elem = voice[v];\n\t\t\t\t\t\t\tswitch (elem.el_type) {\n\t\t\t\t\t\t\t\tcase \"note\":\n\t\t\t\t\t\t\t\t\tif (inCrescendo[k]) {\n\t\t\t\t\t\t\t\t\t\tcurrentVolume[0] += inCrescendo[k];\n\t\t\t\t\t\t\t\t\t\tcurrentVolume[1] += inCrescendo[k];\n\t\t\t\t\t\t\t\t\t\tcurrentVolume[2] += inCrescendo[k];\n\t\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'beat', beats: currentVolume.slice(0) });\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (inDiminuendo[k]) {\n\t\t\t\t\t\t\t\t\t\tcurrentVolume[0] += inDiminuendo[k];\n\t\t\t\t\t\t\t\t\t\tcurrentVolume[1] += inDiminuendo[k];\n\t\t\t\t\t\t\t\t\t\tcurrentVolume[2] += inDiminuendo[k];\n\t\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'beat', beats: currentVolume.slice(0) });\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsetDynamics(elem);\n\n\t\t\t\t\t\t\t\t\t// regular items are just pushed.\n\t\t\t\t\t\t\t\t\tif (!elem.rest || elem.rest.type !== 'spacer') {\n\t\t\t\t\t\t\t\t\t\tvar noteElem = { elem: elem, el_type: \"note\", timing: durationCounter[voiceNumber] }; // Make a copy so that modifications aren't kept except for adding the midiPitches\n\t\t\t\t\t\t\t\t\t\tif (elem.style)\n\t\t\t\t\t\t\t\t\t\t\tnoteElem.style = elem.style;\n\t\t\t\t\t\t\t\t\t\telse if (style[voiceNumber])\n\t\t\t\t\t\t\t\t\t\t\tnoteElem.style = style[voiceNumber];\n\t\t\t\t\t\t\t\t\t\tnoteElem.duration = (elem.duration === 0) ? 0.25 : elem.duration;\n\t\t\t\t\t\t\t\t\t\tif (elem.startTriplet) {\n\t\t\t\t\t\t\t\t\t\t\ttripletMultiplier = elem.tripletMultiplier;\n\t\t\t\t\t\t\t\t\t\t\ttripletDurationTotal = elem.startTriplet * tripletMultiplier * elem.duration;\n\t\t\t\t\t\t\t\t\t\t\tif (elem.startTriplet !== elem.tripletR) { // most commonly (3:2:2\n\t\t\t\t\t\t\t\t\t\t\t\tif (v + elem.tripletR <= voice.length) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar durationTotal = 0;\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var w = v; w < v + elem.tripletR; w++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdurationTotal += voice[w].duration;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttripletDurationTotal = tripletMultiplier * durationTotal;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tnoteElem.duration = noteElem.duration * tripletMultiplier;\n\t\t\t\t\t\t\t\t\t\t\tnoteElem.duration = Math.round(noteElem.duration*1000000)/1000000;\n\t\t\t\t\t\t\t\t\t\t\ttripletDurationCount = noteElem.duration;\n\t\t\t\t\t\t\t\t\t\t} else if (tripletMultiplier) {\n\t\t\t\t\t\t\t\t\t\t\tif (elem.endTriplet) {\n\t\t\t\t\t\t\t\t\t\t\t\ttripletMultiplier = 0;\n\t\t\t\t\t\t\t\t\t\t\t\tnoteElem.duration = Math.round((tripletDurationTotal - tripletDurationCount)*1000000)/1000000;\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tnoteElem.duration = noteElem.duration * tripletMultiplier;\n\t\t\t\t\t\t\t\t\t\t\t\tnoteElem.duration = Math.round(noteElem.duration*1000000)/1000000;\n\t\t\t\t\t\t\t\t\t\t\t\ttripletDurationCount += noteElem.duration;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (elem.rest) noteElem.rest = elem.rest;\n\t\t\t\t\t\t\t\t\t\tif (elem.decoration) noteElem.decoration = elem.decoration.slice(0);\n\t\t\t\t\t\t\t\t\t\tif (elem.pitches) noteElem.pitches = parseCommon.cloneArray(elem.pitches);\n\t\t\t\t\t\t\t\t\t\tif (elem.gracenotes) noteElem.gracenotes = parseCommon.cloneArray(elem.gracenotes);\n\t\t\t\t\t\t\t\t\t\tif (elem.chord) noteElem.chord = parseCommon.cloneArray(elem.chord);\n\n\t\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push(noteElem);\n\t\t\t\t\t\t\t\t\t\tif (elem.style === \"rhythm\") {\n\t\t\t\t\t\t\t\t\t\t\trhythmHeadThisBar = true;\n\t\t\t\t\t\t\t\t\t\t\tchordVoiceOffThisBar(voices)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tnoteEventsInBar++;\n\t\t\t\t\t\t\t\t\t\tdurationCounter[voiceNumber] += noteElem.duration;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"key\":\n\t\t\t\t\t\t\t\tcase \"keySignature\":\n\t\t\t\t\t\t\t\t\taddKey(voices[voiceNumber], elem);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"meter\":\n\t\t\t\t\t\t\t\t\taddMeter(voices[voiceNumber], elem);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"clef\": // need to keep this to catch the \"transpose\" element.\n\t\t\t\t\t\t\t\t\tif (elem.transpose)\n\t\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'transpose', transpose: elem.transpose });\n\t\t\t\t\t\t\t\t\tif (elem.type) {\n\t\t\t\t\t\t\t\t\t\tif (elem.type.indexOf(\"-8\") >= 0)\n\t\t\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'transpose', transpose: -12 });\n\t\t\t\t\t\t\t\t\t\telse if (elem.type.indexOf(\"+8\") >= 0)\n\t\t\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'transpose', transpose: 12 });\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"tempo\":\n\t\t\t\t\t\t\t\t\tqpm = interpretTempo(elem, abctune.getBeatLength());\n\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'tempo', qpm: qpm, timing: durationCounter[voiceNumber] });\n\t\t\t\t\t\t\t\t\ttempoChanges[''+durationCounter[voiceNumber]] = { el_type: 'tempo', qpm: qpm, timing: durationCounter[voiceNumber] };\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"bar\":\n\t\t\t\t\t\t\t\t\tif (noteEventsInBar > 0) // don't add two bars in a row.\n\t\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'bar' }); // We need the bar marking to reset the accidentals.\n\t\t\t\t\t\t\t\t\tsetDynamics(elem);\n\t\t\t\t\t\t\t\t\tnoteEventsInBar = 0;\n\t\t\t\t\t\t\t\t\t// figure out repeats and endings --\n\t\t\t\t\t\t\t\t\t// The important part is where there is a start repeat, and end repeat, or a first ending.\n\t\t\t\t\t\t\t\t\tvar endRepeat = (elem.type === \"bar_right_repeat\" || elem.type === \"bar_dbl_repeat\");\n\t\t\t\t\t\t\t\t\tvar startEnding = (elem.startEnding === '1');\n\t\t\t\t\t\t\t\t\tvar startRepeat = (elem.type === \"bar_left_repeat\" || elem.type === \"bar_dbl_repeat\" || elem.type === \"bar_right_repeat\");\n\t\t\t\t\t\t\t\t\tif (endRepeat) {\n\t\t\t\t\t\t\t\t\t\tvar s = startRepeatPlaceholder[voiceNumber];\n\t\t\t\t\t\t\t\t\t\tif (!s) s = 0; // If there wasn't a left repeat, then we repeat from the beginning.\n\t\t\t\t\t\t\t\t\t\tvar e = skipEndingPlaceholder[voiceNumber];\n\t\t\t\t\t\t\t\t\t\tif (!e) e = voices[voiceNumber].length; // If there wasn't a first ending marker, then we copy everything.\n\t\t\t\t\t\t\t\t\t\t// duplicate each of the elements - this has to be a deep copy.\n\t\t\t\t\t\t\t\t\t\tfor (var z = s; z < e; z++) {\n\t\t\t\t\t\t\t\t\t\t\tvar item = Object.assign({},voices[voiceNumber][z]);\n\t\t\t\t\t\t\t\t\t\t\tif (item.pitches)\n\t\t\t\t\t\t\t\t\t\t\t\titem.pitches = parseCommon.cloneArray(item.pitches);\n\t\t\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push(item);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t// reset these in case there is a second repeat later on.\n\t\t\t\t\t\t\t\t\t\tskipEndingPlaceholder[voiceNumber] = undefined;\n\t\t\t\t\t\t\t\t\t\tstartRepeatPlaceholder[voiceNumber] = undefined;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (startEnding)\n\t\t\t\t\t\t\t\t\t\tskipEndingPlaceholder[voiceNumber] = voices[voiceNumber].length;\n\t\t\t\t\t\t\t\t\tif (startRepeat)\n\t\t\t\t\t\t\t\t\t\tstartRepeatPlaceholder[voiceNumber] = voices[voiceNumber].length;\n\t\t\t\t\t\t\t\t\trhythmHeadThisBar = false;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'style':\n\t\t\t\t\t\t\t\t\tstyle[voiceNumber] = elem.head;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'timeSignature':\n\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push(interpretMeter(elem));\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'part':\n\t\t\t\t\t\t\t\t\t// TODO-PER: If there is a part section in the header, then this should probably affect the repeats.\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'stem':\n\t\t\t\t\t\t\t\tcase 'scale':\n\t\t\t\t\t\t\t\tcase 'break':\n\t\t\t\t\t\t\t\tcase 'font':\n\t\t\t\t\t\t\t\t\t// These elements don't affect sound\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'midi':\n\t\t\t\t\t\t\t\t\t//console.log(\"MIDI inline\", elem); // TODO-PER: for debugging. Remove this.\n\t\t\t\t\t\t\t\t\tvar drumChange = false;\n\t\t\t\t\t\t\t\t\tswitch (elem.cmd) {\n\t\t\t\t\t\t\t\t\t\tcase \"drumon\": drumOn = true; drumChange = true; break;\n\t\t\t\t\t\t\t\t\t\tcase \"drumoff\": drumOn = false; drumChange = true; break;\n\t\t\t\t\t\t\t\t\t\tcase \"drum\": drumPattern = elem.params; drumChange = true; break;\n\t\t\t\t\t\t\t\t\t\tcase \"drumbars\": drumBars = elem.params[0]; drumChange = true; break;\n\t\t\t\t\t\t\t\t\t\tcase \"drummap\":\n\t\t\t\t\t\t\t\t\t\t\t// This is handled before getting here so it can be ignored.\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"channel\":\n\t\t\t\t\t\t\t\t\t\t\t// There's not much needed for the channel except to look out for the percussion channel\n\t\t\t\t\t\t\t\t\t\t\tif (elem.params[0] === 10)\n\t\t\t\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'instrument', program: PERCUSSION_PROGRAM });\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"program\":\n\t\t\t\t\t\t\t\t\t\t\taddIfDifferent(voices[voiceNumber], { el_type: 'instrument', program: elem.params[0] });\n\t\t\t\t\t\t\t\t\t\t\tchannelExplicitlySet = true;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"transpose\":\n\t\t\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'transpose', transpose: elem.params[0] });\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"gchordoff\":\n\t\t\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'gchordOn', tacet: true });\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"gchordon\":\n\t\t\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'gchordOn', tacet: false });\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"beat\":\n\t\t\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'beat', beats: elem.params });\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"nobeataccents\":\n\t\t\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'beataccents', value: false });\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"beataccents\":\n\t\t\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'beataccents', value: true });\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"vol\":\n\t\t\t\t\t\t\t\t\t\tcase \"volinc\":\n\t\t\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: elem.cmd, volume: elem.params[0] });\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase \"swing\":\n\t\t\t\t\t\t\t\t\t\tcase \"gchord\":\n\t\t\t\t\t\t\t\t\t\tcase \"bassvol\":\n\t\t\t\t\t\t\t\t\t\tcase \"chordvol\":\n\t\t\t\t\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: elem.cmd, param: elem.params[0] });\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase \"bassprog\": // MAE 22 May 2024\n\t\t\t\t\t\t\t\t\t\tcase \"chordprog\": // MAE 22 May 2024\n\t\t\t\t\t                      voices[voiceNumber].push({\n\t\t\t\t\t                        el_type: elem.cmd,\n\t\t\t\t\t                        value: elem.params[0],\n\t\t\t\t\t                        octaveShift: elem.params[1]\n\t\t\t\t\t                      });\n\t\t\t\t\t                      break;\n\n\t\t\t\t\t                    // MAE 23 Jun 2024\n\t\t\t\t\t                    case \"gchordbars\":\n\t\t\t\t\t                        voices[voiceNumber].push({\n\t\t\t\t\t                          el_type: elem.cmd,\n\t\t\t\t\t                          param: elem.params[0]\n\t\t\t\t\t                        });\n\t\t\t\t\t                    break;\n\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"MIDI seq: midi cmd not handled: \", elem.cmd, elem);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (drumChange) {\n\t\t\t\t\t\t\t\t\t\tvoices[0].push({el_type: 'drum', params: { pattern: drumPattern, bars: drumBars, intro: drumIntro, on: drumOn}});\n\t\t\t\t\t\t\t\t\t\tstartingDrumSet = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tconsole.log(\"MIDI: element type \" + elem.el_type + \" not handled.\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvoiceNumber++;\n\t\t\t\t\t\tif (!durationCounter[voiceNumber])\n\t\t\t\t\t\t\tdurationCounter[voiceNumber] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction setDynamics(elem) {\n\t\t\t\t\tvar volumes = {//stressBeat1, stressBeatDown, stressBeatUp\n\t\t\t\t\t\t'pppp': [15, 10, 5, 1],\n\t\t\t\t\t\t'ppp': [30, 20, 10, 1],\n\t\t\t\t\t\t'pp': [45, 35, 20, 1],\n\t\t\t\t\t\t'p': [60, 50, 35, 1],\n\t\t\t\t\t\t'mp': [75, 65, 50, 1],\n\t\t\t\t\t\t'mf': [90, 80, 65, 1],\n\t\t\t\t\t\t'f': [105, 95, 80, 1],\n\t\t\t\t\t\t'ff': [120, 110, 95, 1],\n\t\t\t\t\t\t'fff': [127, 125, 110, 1],\n\t\t\t\t\t\t'ffff': [127, 125, 110, 1]\n\t\t\t\t\t};\n\n\t\t\t\t\tvar dynamicType;\n\t\t\t\t\tif (elem.decoration) {\n\t\t\t\t\t\tif (elem.decoration.indexOf('pppp') >= 0)\n\t\t\t\t\t\t\tdynamicType = 'pppp';\n\t\t\t\t\t\telse if (elem.decoration.indexOf('ppp') >= 0)\n\t\t\t\t\t\t\tdynamicType = 'ppp';\n\t\t\t\t\t\telse if (elem.decoration.indexOf('pp') >= 0)\n\t\t\t\t\t\t\tdynamicType = 'pp';\n\t\t\t\t\t\telse if (elem.decoration.indexOf('p') >= 0)\n\t\t\t\t\t\t\tdynamicType = 'p';\n\t\t\t\t\t\telse if (elem.decoration.indexOf('mp') >= 0)\n\t\t\t\t\t\t\tdynamicType = 'mp';\n\t\t\t\t\t\telse if (elem.decoration.indexOf('mf') >= 0)\n\t\t\t\t\t\t\tdynamicType = 'mf';\n\t\t\t\t\t\telse if (elem.decoration.indexOf('f') >= 0)\n\t\t\t\t\t\t\tdynamicType = 'f';\n\t\t\t\t\t\telse if (elem.decoration.indexOf('ff') >= 0)\n\t\t\t\t\t\t\tdynamicType = 'ff';\n\t\t\t\t\t\telse if (elem.decoration.indexOf('fff') >= 0)\n\t\t\t\t\t\t\tdynamicType = 'fff';\n\t\t\t\t\t\telse if (elem.decoration.indexOf('ffff') >= 0)\n\t\t\t\t\t\t\tdynamicType = 'ffff';\n\n\t\t\t\t\t\tif (dynamicType) {\n\t\t\t\t\t\t\tcurrentVolume = volumes[dynamicType].slice(0);\n\t\t\t\t\t\t\tlet volumesPerNotePitch = [currentVolume];\n\t\t\t\t\t\t\tif(Array.isArray(elem.decoration)){\n\t\t\t\t\t\t\t\tvolumesPerNotePitch = [];\n\t\t\t\t\t\t\t\telem.decoration.forEach(d=>{\n\t\t\t\t\t\t\t\t\tif (d in volumes)\n\t\t\t\t\t\t\t\t\t\tvolumesPerNotePitch.push(volumes[d].slice(0));\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvoices[voiceNumber].push({ el_type: 'beat', beats: currentVolume.slice(0), volumesPerNotePitch: volumesPerNotePitch, });\n\t\t\t\t\t\t\tinCrescendo[k] = false;\n\t\t\t\t\t\t\tinDiminuendo[k] = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (elem.decoration.indexOf(\"crescendo(\") >= 0) {\n\t\t\t\t\t\t\tvar n = numNotesToDecoration(voice, v, \"crescendo)\");\n\t\t\t\t\t\t\tvar top = Math.min(127, currentVolume[0] + crescendoSize);\n\t\t\t\t\t\t\tvar endDec = endingVolume(voice, v+n+1, Object.keys(volumes));\n\t\t\t\t\t\t\tif (endDec)\n\t\t\t\t\t\t\t\ttop = volumes[endDec][0];\n\t\t\t\t\t\t\tif (n > 0)\n\t\t\t\t\t\t\t\tinCrescendo[k] = Math.floor((top - currentVolume[0]) / n);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tinCrescendo[k] = false;\n\t\t\t\t\t\t\tinDiminuendo[k] = false;\n\t\t\t\t\t\t} else if (elem.decoration.indexOf(\"crescendo)\") >= 0) {\n\t\t\t\t\t\t\tinCrescendo[k] = false;\n\t\t\t\t\t\t} else if (elem.decoration.indexOf(\"diminuendo(\") >= 0) {\n\t\t\t\t\t\t\tvar n2 = numNotesToDecoration(voice, v, \"diminuendo)\");\n\t\t\t\t\t\t\tvar bottom = Math.max(15, currentVolume[0] - crescendoSize);\n\t\t\t\t\t\t\tvar endDec2 = endingVolume(voice, v+n2+1, Object.keys(volumes));\n\t\t\t\t\t\t\tif (endDec2)\n\t\t\t\t\t\t\t\tbottom = volumes[endDec2][0];\n\t\t\t\t\t\t\tinCrescendo[k] = false;\n\t\t\t\t\t\t\tif (n2 > 0)\n\t\t\t\t\t\t\t\tinDiminuendo[k] = Math.floor((bottom - currentVolume[0]) / n2);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tinDiminuendo[k] = false;\n\t\t\t\t\t\t} else if (elem.decoration.indexOf(\"diminuendo)\") >= 0) {\n\t\t\t\t\t\t\tinDiminuendo[k] = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// If there are tempo changes, make sure they are in all the voices. This must be done post process because all the elements in all the voices need to be created first.\n\t\tinsertTempoChanges(voices, tempoChanges);\n\n\t\tif (drumIntro) {\n\t\t\tvar pickups = abctune.getPickupLength();\n\t\t\t// add some measures of rests to the start of each track.\n\t\t\tfor (var vv = 0; vv < voices.length; vv++) {\n\t\t\t\tvar insertPoint = 0;\n\t\t\t\twhile (voices[vv][insertPoint].el_type !== \"note\" && voices[vv].length > insertPoint)\n\t\t\t\t\tinsertPoint++;\n\t\t\t\tif (voices[vv].length > insertPoint) {\n\t\t\t\t\tfor (var w = 0; w < drumIntro; w++) {\n\t\t\t\t\t\t// If it is the last measure of intro, subtract the pickups.\n\t\t\t\t\t\tif (pickups === 0 || w < drumIntro-1) {\n\t\t\t\t\t\t\tvoices[vv].splice(insertPoint, 0, \n\t\t\t\t\t\t\t\t{el_type: \"note\", rest: {type: \"rest\"}, duration: measureLength},\n\t\t\t\t\t\t\t\t{ el_type: \"bar\" }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tinsertPoint += 2\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvoices[vv].splice(insertPoint++, 0, {el_type: \"note\", rest: {type: \"rest\"}, duration: measureLength-pickups});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (drumOffAfterIntro) {\n\t\t\t\t\t\tdrumOn = false\n\t\t\t\t\t\tvoices[vv].splice(insertPoint++, 0, {el_type: 'drum', params: { pattern: drumPattern, bars: drumBars, intro: drumIntro, on: drumOn}});\n\t\t\t\t\t\tdrumOffAfterIntro = false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (voices.length > 0 && voices[0].length > 0) {\n\t\t\tvoices[0][0].pickupLength = abctune.getPickupLength();\n\t\t}\n\t\treturn voices;\n\t};\n\n\tfunction numNotesToDecoration(voice, start, decoration) {\n\t\tvar counter = 0;\n\t\tfor (var i = start+1; i < voice.length; i++) {\n\t\t\tif (voice[i].el_type === \"note\")\n\t\t\t\tcounter++;\n\t\t\tif (voice[i].decoration && voice[i].decoration.indexOf(decoration) >= 0)\n\t\t\t\treturn counter;\n\t\t}\n\t\treturn counter;\n\t}\n\tfunction endingVolume(voice, start, volumeDecorations) {\n\t\tvar end = Math.min(voice.length, start + 3); // If we have a volume within a couple notes of the end then assume that is the destination.\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tif (voice[i].el_type === \"note\") {\n\t\t\t\tif (voice[i].decoration) {\n\t\t\t\t\tfor (var j = 0; j < voice[i].decoration.length; j++) {\n\t\t\t\t\t\tif (volumeDecorations.indexOf(voice[i].decoration[j]) >= 0)\n\t\t\t\t\t\t\treturn voice[i].decoration[j];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tfunction insertTempoChanges(voices, tempoChanges) {\n\t\tif (!tempoChanges || tempoChanges.length === 0)\n\t\t\treturn;\n\t\tvar changePositions = Object.keys(tempoChanges);\n\t\tfor (var i = 0; i < voices.length; i++) {\n\t\t\tvar voice = voices[i];\n\t\t\tvar lastTempo = tempoChanges['0'] ? tempoChanges['0'].qpm : 0; // Don't insert redundant changes. This happens normally when repeating from the beginning, but could happen anywhere that there is a tempo marking that is the same as the last one.\n\t\t\tfor (var j = 0; j < voice.length; j++) {\n\t\t\t\tvar el = voice[j];\n\t\t\t\tif (el.el_type === \"tempo\")\n\t\t\t\t\tlastTempo = el.qpm;\n\t\t\t\tif (changePositions.indexOf(''+el.timing) >= 0 && lastTempo !== tempoChanges[''+el.timing].qpm) {\n\t\t\t\t\tlastTempo = tempoChanges[''+el.timing].qpm;\n\t\t\t\t\tif (el.el_type === \"tempo\") {\n\t\t\t\t\t\tel.qpm = tempoChanges[''+el.timing].qpm;\n\t\t\t\t\t\tj++; // when there is a tempo element the next element has the same timing and we don't want it to match the second time.\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//console.log(\"tempo position\", i, j, el);\n\t\t\t\t\t\tvoices[i].splice(j, 0, {el_type: \"tempo\", qpm: tempoChanges[''+el.timing].qpm, timing: el.timing});\n\t\t\t\t\t\tj +=2; // skip the element we just inserted.\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction chordVoiceOffThisBar(voices) {\n\t\tfor (var i = 0; i < voices.length; i++) {\n\t\t\tvar voice = voices[i];\n\t\t\tvar j = voice.length-1;\n\t\t\twhile (j >= 0 && voice[j].el_type !== 'bar') {\n\t\t\t\tvoice[j].noChordVoice = true;\n\t\t\t\tj--;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getTrackTitle(staff, voiceNumber) {\n\t\tif (!staff || staff.length <= voiceNumber || !staff[voiceNumber].title)\n\t\t\treturn undefined;\n\t\treturn staff[voiceNumber].title.join(\" \");\n\t}\n\n\tfunction interpretTempo(element, beatLength) {\n\t\tvar duration = 1/4;\n\t\tif (element.duration) {\n\t\t\tduration = element.duration[0];\n\t\t}\n\t\tvar bpm = 60;\n\t\tif (element.bpm) {\n\t\t\tbpm = element.bpm;\n\t\t}\n\t\t// The tempo is defined with a beat length of \"duration\". If that isn't the natural beat length then there is a translation.\n\t\treturn duration * bpm / beatLength;\n\t}\n\n\tfunction interpretMeter(element) {\n\t\tvar meter;\n\t\tswitch (element.type) {\n\t\t\tcase \"common_time\":\n\t\t\t\tmeter = { el_type: 'meter', num: 4, den: 4 };\n\t\t\t\tbreak;\n\t\t\tcase \"cut_time\":\n\t\t\t\tmeter = { el_type: 'meter', num: 2, den: 2 };\n\t\t\t\tbreak;\n\t\t\tcase \"specified\":\n\t\t\t\t// TODO-PER: only taking the first meter, so the complex meters are not handled.\n\t\t\t\tmeter = { el_type: 'meter', num: element.value[0].num, den: element.value[0].den };\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// This should never happen.\n\t\t\t\tmeter = { el_type: 'meter' };\n\t\t}\n\t\tmeasureLength = meter.num/meter.den;\n\t\treturn meter;\n\t}\n\n\tfunction removeNaturals(accidentals) {\n\t\tvar acc = [];\n\t\tfor (var i = 0; i < accidentals.length; i++) {\n\t\t\tif (accidentals[i].acc !== \"natural\")\n\t\t\t\tacc.push(accidentals[i])\n\t\t}\n\t\treturn acc;\n\t}\n\tfunction addKey(arr, key) {\n\t\tvar newKey;\n\t\tif (key.root === 'HP')\n\t\t\tnewKey = {el_type: 'key', accidentals: [{acc: 'natural', note: 'g'}, {acc: 'sharp', note: 'f'}, {acc: 'sharp', note: 'c'}]};\n\t\telse\n\t\t\tnewKey = {el_type: 'key', accidentals: removeNaturals(key.accidentals) };\n\t\taddIfDifferent(arr, newKey);\n\t}\n\tfunction addMeter(arr, meter) {\n\t\tvar newMeter = interpretMeter(meter);\n\t\taddIfDifferent(arr, newMeter);\n\t}\n\tfunction addIfDifferent(arr, item) {\n\t\tfor (var i = arr.length-1; i >= 0; i--) {\n\t\t\tif (arr[i].el_type === item.el_type) {\n\t\t\t\tif (JSON.stringify(arr[i]) !== JSON.stringify(item))\n\t\t\t\t\tarr.push(item);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tarr.push(item);\n\t}\n\n})();\n\nmodule.exports = sequence;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2FiY19taWRpX3NlcXVlbmNlci5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBLGtCQUFrQixtQkFBTyxDQUFDLCtFQUFxQjs7QUFFL0M7QUFDQTs7QUFFQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIsaUNBQWlDO0FBQ2pDLDBCQUEwQjs7QUFFMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDhDQUE4QztBQUM5QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx3SUFBd0k7O0FBRXhJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixzQ0FBc0M7QUFDOUQ7QUFDQSx3QkFBd0Isc0NBQXNDOztBQUU5RDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTs7QUFFZjtBQUNBO0FBQ0EscUJBQXFCLHFCQUFxQjtBQUMxQyxvQkFBb0IseUNBQXlDO0FBQzdEO0FBQ0EscUJBQXFCLHNDQUFzQztBQUMzRDtBQUNBLHFCQUFxQiw0Q0FBNEM7QUFDakUsb0JBQW9CLDRCQUE0QjtBQUNoRCxtQkFBbUIseUJBQXlCO0FBQzVDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQSxtQ0FBbUM7QUFDbkMsa0NBQWtDO0FBQ2xDO0FBQ0EsNkJBQTZCLG9CQUFvQjtBQUNqRCxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsbUJBQW1CO0FBQ3ZDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFCQUFxQix5QkFBeUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHNDQUFzQztBQUMzRTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msb0NBQW9DOztBQUV0RTtBQUNBLHdCQUF3QixpQ0FBaUM7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEMsaUNBQWlDLDBCQUEwQixvRUFBb0U7QUFDL0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsdURBQXVEO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHFDQUFxQztBQUN2RTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msb0NBQW9DO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0Msb0NBQW9DO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxnQkFBZ0I7QUFDbEQsaUNBQWlDLDBCQUEwQix5QkFBeUI7QUFDcEY7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7O0FBRUEsc0JBQXNCLGtCQUFrQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGdEQUFnRDtBQUNyRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxnREFBZ0Q7QUFDckY7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMkJBQTJCLHFFQUFxRTtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNEO0FBQ3REO0FBQ0E7QUFDQSw2QkFBNkIsdUJBQXVCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxpREFBaUQ7QUFDdEY7QUFDQTtBQUNBLHNDQUFzQyxzQ0FBc0M7QUFDNUU7QUFDQSxzQ0FBc0MscUNBQXFDO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGtFQUFrRTtBQUN0RywyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGdCQUFnQixHQUFHO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBLDBCQUEwQixPQUFPO0FBQ2pDLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBLHdDQUF3QyxtQkFBbUI7QUFDM0QsMENBQTBDLG1CQUFtQjtBQUM3RCxrREFBa0QsbUJBQW1CO0FBQ3JFLHNEQUFzRCxtQkFBbUI7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLG9EQUFvRDtBQUMzRjtBQUNBO0FBQ0EsaURBQWlELGdEQUFnRDtBQUNqRztBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsaURBQWlEO0FBQ3ZGO0FBQ0E7QUFDQSxzQ0FBc0Msa0NBQWtDO0FBQ3hFO0FBQ0E7QUFDQSxzQ0FBc0MsbUNBQW1DO0FBQ3pFO0FBQ0E7QUFDQSxzQ0FBc0MscUNBQXFDO0FBQzNFO0FBQ0E7QUFDQSxzQ0FBc0Msc0NBQXNDO0FBQzVFO0FBQ0E7QUFDQSxzQ0FBc0MscUNBQXFDO0FBQzNFO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQywyQ0FBMkM7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQywwQ0FBMEM7QUFDaEY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwyQkFBMkIsb0VBQW9FO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxrQ0FBa0MsMkZBQTJGO0FBQzdIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9CQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixlQUFlO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLFNBQVMsd0JBQXdCLGFBQWEsMEJBQTBCO0FBQ3hFLFVBQVU7QUFDVjtBQUNBO0FBQ0EsUUFBUTtBQUNSLDRDQUE0Qyx3QkFBd0IsYUFBYSxrQ0FBa0M7QUFDbkg7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsMkJBQTJCLG9FQUFvRTtBQUMxSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLGtCQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DLHNCQUFzQixTQUFTO0FBQy9CO0FBQ0E7QUFDQSxxQkFBcUIsZ0NBQWdDO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0Esa0VBQWtFO0FBQ2xFLG1CQUFtQixrQkFBa0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsT0FBTztBQUNQO0FBQ0EsOEJBQThCLHlFQUF5RTtBQUN2RyxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixtQkFBbUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQix3QkFBd0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsK0JBQStCLDBCQUEwQixHQUFHLHdCQUF3QixHQUFHLHdCQUF3QjtBQUM1SDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixRQUFRO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy9zeW50aC9hYmNfbWlkaV9zZXF1ZW5jZXIuanM/MWJjZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAgICBhYmNfbWlkaV9zZXF1ZW5jZXIuanM6IFR1cm4gcGFyc2VkIGFiYyBpbnRvIGEgbGluZWFyIHNlcmllcyBvZiBldmVudHMuXG5cbnZhciBzZXF1ZW5jZTtcbnZhciBwYXJzZUNvbW1vbiA9IHJlcXVpcmUoXCIuLi9wYXJzZS9hYmNfY29tbW9uXCIpO1xuXG4oZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBtZWFzdXJlTGVuZ3RoID0gMTsgLy8gVGhpcyBzaG91bGQgYmUgc2V0IGJ5IHRoZSBtZXRlciwgYnV0IGp1c3QgaW4gY2FzZSB0aGF0IGlzIG1pc3NpbmcsIHdlJ2xsIHRha2UgYSBndWVzcy5cblx0Ly8gVGhlIGFiYyBpcyBwcm92aWRlZCB0byB1cyBsaW5lIGJ5IGxpbmUuIEl0IG1pZ2h0IGhhdmUgcmVwZWF0cyBpbiBpdC4gV2Ugd2FudCB0byByZSBhcnJhbmdlIHRoZSBlbGVtZW50cyB0b1xuXHQvLyBiZSBhbiBhcnJheSBvZiB2b2ljZXMgd2l0aCBhbGwgdGhlIHJlcGVhdHMgZW1iZWRkZWQsIGFuZCBubyBsaW5lcy4gVGhlbiBpdCBpcyB0cml2aWFsIHRvIGdvIHRocm91Z2ggdGhlIGV2ZW50c1xuXHQvLyBvbmUgYXQgYSB0aW1lIGFuZCB0dXJuIGl0IGludG8gbWlkaS5cblxuXHR2YXIgUEVSQ1VTU0lPTl9QUk9HUkFNID0gMTI4O1xuXG5cdHNlcXVlbmNlID0gZnVuY3Rpb24oYWJjdHVuZSwgb3B0aW9ucykge1xuXHRcdC8vIEdsb2JhbCBvcHRpb25zXG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFx0dmFyIHFwbTtcblx0XHR2YXIgcHJvZ3JhbSA9IG9wdGlvbnMucHJvZ3JhbSB8fCAwO1x0Ly8gVGhlIHByb2dyYW0gaWYgdGhlcmUgaXNuJ3QgYSBwcm9ncmFtIHNwZWNpZmllZC5cblx0XHR2YXIgdHJhbnNwb3NlID0gb3B0aW9ucy5taWRpVHJhbnNwb3NlIHx8IDA7XG5cdFx0Ly8gSWYgdGhlIHR1bmUgaGFzIGEgdmlzdWFsIHRyYW5zcG9zZSB0aGVuIHRoYXQgbmVlZHMgdG8gYmUgc3VidHJhY3RlZCBvdXQgYmVjYXVzZSB3ZSBhcmUgZ2V0dGluZyB0aGUgdmlzdWFsIG9iamVjdC5cblx0XHRpZiAoYWJjdHVuZS52aXN1YWxUcmFuc3Bvc2UpXG5cdFx0XHR0cmFuc3Bvc2UgLT0gYWJjdHVuZS52aXN1YWxUcmFuc3Bvc2U7XG5cdFx0dmFyIGNoYW5uZWwgPSBvcHRpb25zLmNoYW5uZWwgfHwgMDtcblx0XHR2YXIgY2hhbm5lbEV4cGxpY2l0bHlTZXQgPSBmYWxzZTtcblx0XHR2YXIgZHJ1bVBhdHRlcm4gPSBvcHRpb25zLmRydW0gfHwgXCJcIjtcblx0XHR2YXIgZHJ1bUJhcnMgPSBvcHRpb25zLmRydW1CYXJzIHx8IDE7XG5cdFx0dmFyIGRydW1JbnRybyA9IG9wdGlvbnMuZHJ1bUludHJvIHx8IDA7XG5cdFx0dmFyIGRydW1PbiA9IGRydW1QYXR0ZXJuICE9PSBcIlwiO1xuXHRcdHZhciBkcnVtT2ZmQWZ0ZXJJbnRybyA9ICEhb3B0aW9ucy5kcnVtT2ZmXG5cdFx0dmFyIHN0eWxlID0gW107IC8vIFRoZSBub3RlIGhlYWQgc3R5bGUgZm9yIGVhY2ggdm9pY2UuXG5cdFx0dmFyIHJoeXRobUhlYWRUaGlzQmFyID0gZmFsc2U7IC8vIFJoeXRobSBub3RhdGlvbiB3YXMgZGV0ZWN0ZWQuXG5cdFx0dmFyIGNyZXNjZW5kb1NpemUgPSA1MDsgLy8gaG93IG11Y2ggdG8gaW5jcmVhc2Ugb3IgZGVjcmVhc2Ugdm9sdW1lIHdoZW4gY3Jlc2NlbmRvL2RpbWludWVuZG8gaXMgZW5jb3VudGVyZWQuXG5cblx0XHQvLyBBbGwgb2YgdGhlIGFib3ZlIG92ZXJyaWRlcyBuZWVkIHRvIGJlIGludGVnZXJzXG5cdFx0cHJvZ3JhbSA9IHBhcnNlSW50KHByb2dyYW0sIDEwKTtcblx0XHR0cmFuc3Bvc2UgPSBwYXJzZUludCh0cmFuc3Bvc2UsIDEwKTtcblx0XHRjaGFubmVsID0gcGFyc2VJbnQoY2hhbm5lbCwgMTApO1xuXHRcdGlmIChjaGFubmVsID09PSAxMClcblx0XHRcdHByb2dyYW0gPSBQRVJDVVNTSU9OX1BST0dSQU07XG5cdFx0ZHJ1bVBhdHRlcm4gPSBkcnVtUGF0dGVybi5zcGxpdChcIiBcIik7XG5cdFx0ZHJ1bUJhcnMgPSBwYXJzZUludChkcnVtQmFycywgMTApO1xuXHRcdGRydW1JbnRybyA9IHBhcnNlSW50KGRydW1JbnRybywgMTApO1xuXG5cdFx0dmFyIGJhZ3BpcGVzID0gYWJjdHVuZS5mb3JtYXR0aW5nLmJhZ3BpcGVzOyAvLyBJZiBpdCBpcyBiYWdwaXBlcywgdGhlbiB0aGUgZ3JhY2Vub3RlcyBhcmUgcGxheWVkIG9uIHRvcCBvZiB0aGUgbWFpbiBub3RlLlxuXHRcdGlmIChiYWdwaXBlcylcblx0XHRcdHByb2dyYW0gPSA3MTtcblxuXHRcdC8vICUlTUlESSBmZXJtYXRhZml4ZWRcblx0XHQvLyAlJU1JREkgZmVybWF0YXByb3BvcnRpb25hbFxuXHRcdC8vICUlTUlESSBkZWx0YWxvdWRuZXNzIG5cblx0XHQvLyAlJU1JREkgZ3JhY2VkaXZpZGVyIGJcblx0XHQvLyAlJU1JREkgcmF0aW8gbiBtXG5cdFx0Ly8gJSVNSURJIGJlYXQgYSBiIGMgblxuXHRcdC8vICUlTUlESSBncmFjZSBhL2Jcblx0XHQvLyAlJU1JREkgdHJpbSB4L3lcblxuXHRcdC8vICVNSURJIGdjaG9yZG9uXG5cdFx0Ly8gJU1JREkgZ2Nob3Jkb2ZmXG5cdFx0Ly8gJSVNSURJIGJhc3Nwcm9nIDQ1XG5cdFx0Ly8gJSVNSURJIGNob3JkcHJvZyAyNFxuXHRcdC8vICUlTUlESSBjaG9yZG5hbWUgbmFtZSBuMSBuMiBuMyBuNCBuNSBuNlxuXG5cdFx0Ly8lJU1JREkgYmVhdCDin6hpbnQx4p+pIOKfqGludDLin6kg4p+oaW50M+KfqSDin6hpbnQ04p+pOiBjb250cm9scyB0aGUgdm9sdW1lcyBvZiB0aGUgbm90ZXMgaW4gYSBtZWFzdXJlLiBUaGUgZmlyc3Qgbm90ZSBpbiBhIGJhciBoYXMgdm9sdW1lIOKfqGludDHin6k7IG90aGVyIOKAmHN0cm9uZ+KAmSBub3RlcyBoYXZlIHZvbHVtZSDin6hpbnQy4p+pIGFuZCBhbGwgdGhlIHJlc3QgaGF2ZSB2b2x1bWUg4p+oaW50M+KfqS4gVGhlc2UgdmFsdWVzIG11c3QgYmUgaW4gdGhlIHJhbmdlIDDigJMxMjcuIFRoZSBwYXJhbWV0ZXIg4p+oaW50NOKfqSBkZXRlcm1pbmVzIHdoaWNoIG5vdGVzIGFyZSDigJhzdHJvbmfigJkuIElmIHRoZSB0aW1lIHNpZ25hdHVyZSBpcyB4L3ksIHRoZW4gZWFjaCBub3RlIGlzIGdpdmVuIGEgcG9zaXRpb24gbnVtYmVyIGsgPSAwLCAxLCAyLiAuIC4geC0xIHdpdGhpbiBlYWNoIGJhci4gSWYgayBpcyBhIG11bHRpcGxlIG9mIOKfqGludDTin6ksIHRoZW4gdGhlIG5vdGUgaXMg4oCYc3Ryb25n4oCZLlxuXG5cdFx0dmFyIHN0YXJ0aW5nTWlkaSA9IFtdO1xuXHRcdGlmIChhYmN0dW5lLmZvcm1hdHRpbmcubWlkaSkge1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhcIk1JREkgRm9ybWF0dGluZzpcIiwgYWJjdHVuZS5mb3JtYXR0aW5nLm1pZGkpO1xuXHRcdFx0dmFyIGdsb2JhbHMgPSBhYmN0dW5lLmZvcm1hdHRpbmcubWlkaTtcblx0XHRcdGlmIChnbG9iYWxzLnByb2dyYW0gJiYgZ2xvYmFscy5wcm9ncmFtLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0cHJvZ3JhbSA9IGdsb2JhbHMucHJvZ3JhbVswXTtcblx0XHRcdFx0aWYgKGdsb2JhbHMucHJvZ3JhbS5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdFx0cHJvZ3JhbSA9IGdsb2JhbHMucHJvZ3JhbVsxXTtcblx0XHRcdFx0XHRjaGFubmVsID0gZ2xvYmFscy5wcm9ncmFtWzBdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNoYW5uZWxFeHBsaWNpdGx5U2V0ID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGlmIChnbG9iYWxzLnRyYW5zcG9zZSlcblx0XHRcdFx0dHJhbnNwb3NlID0gZ2xvYmFscy50cmFuc3Bvc2VbMF07XG5cdFx0XHRpZiAoZ2xvYmFscy5jaGFubmVsKSB7XG5cdFx0XHRcdGNoYW5uZWwgPSBnbG9iYWxzLmNoYW5uZWxbMF07XG5cdFx0XHRcdGNoYW5uZWxFeHBsaWNpdGx5U2V0ID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGlmIChnbG9iYWxzLmRydW0pXG5cdFx0XHRcdGRydW1QYXR0ZXJuID0gZ2xvYmFscy5kcnVtO1xuXHRcdFx0aWYgKGdsb2JhbHMuZHJ1bWJhcnMpXG5cdFx0XHRcdGRydW1CYXJzID0gZ2xvYmFscy5kcnVtYmFyc1swXTtcblx0XHRcdGlmIChnbG9iYWxzLmRydW1vbilcblx0XHRcdFx0ZHJ1bU9uID0gdHJ1ZTtcblx0XHRcdGlmIChjaGFubmVsID09PSAxMClcblx0XHRcdFx0cHJvZ3JhbSA9IFBFUkNVU1NJT05fUFJPR1JBTTtcblx0XHRcdGlmIChnbG9iYWxzLmJlYXQpXG5cdFx0XHRcdHN0YXJ0aW5nTWlkaS5wdXNoKHsgZWxfdHlwZTogJ2JlYXQnLCBiZWF0czogZ2xvYmFscy5iZWF0IH0pXG5cdFx0XHRpZiAoZ2xvYmFscy5ub2JlYXRhY2NlbnRzKVxuXHRcdFx0XHRzdGFydGluZ01pZGkucHVzaCh7IGVsX3R5cGU6ICdiZWF0YWNjZW50cycsIHZhbHVlOiBmYWxzZSB9KTtcblxuXHRcdH1cblxuXHRcdC8vIFNwZWNpZmllZCBvcHRpb25zIGluIGFiYyBzdHJpbmcuXG5cblx0XHQvLyBJZiB0aGUgdGVtcG8gd2FzIHBhc3NlZCBpbiwgdXNlIHRoYXQuXG5cdFx0Ly8gSWYgdGhlIHRlbXBvIGlzIHNwZWNpZmllZCwgdXNlIHRoYXQuXG5cdFx0Ly8gSWYgdGhlcmUgaXMgYSBkZWZhdWx0LCB1c2UgdGhhdC5cblx0XHQvLyBPdGhlcndpc2UsIHVzZSB0aGUgZGVmYXVsdC5cblx0XHRpZiAob3B0aW9ucy5xcG0pXG5cdFx0XHRxcG0gPSBwYXJzZUludChvcHRpb25zLnFwbSwgMTApO1xuXHRcdGVsc2UgaWYgKGFiY3R1bmUubWV0YVRleHQudGVtcG8pXG5cdFx0XHRxcG0gPSBpbnRlcnByZXRUZW1wbyhhYmN0dW5lLm1ldGFUZXh0LnRlbXBvLCBhYmN0dW5lLmdldEJlYXRMZW5ndGgoKSk7XG5cdFx0ZWxzZSBpZiAob3B0aW9ucy5kZWZhdWx0UXBtKVxuXHRcdFx0cXBtID0gb3B0aW9ucy5kZWZhdWx0UXBtO1xuXHRcdGVsc2Vcblx0XHRcdHFwbSA9IDE4MDsgXHQvLyBUaGUgdGVtcG8gaWYgdGhlcmUgaXNuJ3QgYSB0ZW1wbyBzcGVjaWZpZWQuXG5cblx0XHR2YXIgc3RhcnRWb2ljZSA9IFtdO1xuXHRcdGlmIChiYWdwaXBlcylcblx0XHRcdHN0YXJ0Vm9pY2UucHVzaCh7IGVsX3R5cGU6ICdiYWdwaXBlcycgfSk7XG5cdFx0c3RhcnRWb2ljZS5wdXNoKHsgZWxfdHlwZTogJ2luc3RydW1lbnQnLCBwcm9ncmFtOiBwcm9ncmFtIH0pO1xuXHRcdGlmIChjaGFubmVsKVxuXHRcdFx0c3RhcnRWb2ljZS5wdXNoKHsgZWxfdHlwZTogJ2NoYW5uZWwnLCBjaGFubmVsOiBjaGFubmVsIH0pO1xuXHRcdGlmICh0cmFuc3Bvc2UpXG5cdFx0XHRzdGFydFZvaWNlLnB1c2goeyBlbF90eXBlOiAndHJhbnNwb3NlJywgdHJhbnNwb3NlOiB0cmFuc3Bvc2UgfSk7XG5cdFx0c3RhcnRWb2ljZS5wdXNoKHsgZWxfdHlwZTogJ3RlbXBvJywgcXBtOiBxcG0gfSk7XG5cdFx0Zm9yICh2YXIgc3MgPSAwOyBzcyA8IHN0YXJ0aW5nTWlkaS5sZW5ndGg7c3MrKylcblx0XHRcdHN0YXJ0Vm9pY2UucHVzaChzdGFydGluZ01pZGlbc3NdKTtcblxuXHRcdC8vIHRoZSByZWxldmFudCBwYXJ0IG9mIHRoZSBpbnB1dCBzdHJ1Y3R1cmUgaXM6XG5cdFx0Ly8gYWJjdHVuZVxuXHRcdC8vXHRcdGFycmF5IGxpbmVzXG5cdFx0Ly9cdFx0XHRhcnJheSBzdGFmZlxuXHRcdC8vXHRcdFx0XHRvYmplY3Qga2V5XG5cdFx0Ly9cdFx0XHRcdG9iamVjdCBtZXRlclxuXHRcdC8vXHRcdFx0XHRhcnJheSB2b2ljZXNcblx0XHQvL1x0XHRcdFx0XHRhcnJheSBhYmNlbGVtXG5cblx0XHQvLyB2aXNpdCBlYWNoIHZvaWNlIGNvbXBsZXRlbHkgaW4gdHVyblxuXHRcdHZhciB2b2ljZXMgPSBbXTtcblx0XHR2YXIgY2xlZlRyYW5zcG9zZUFjdGl2ZSA9IFtdXG5cdFx0dmFyIGluQ3Jlc2NlbmRvID0gW107XG5cdFx0dmFyIGluRGltaW51ZW5kbyA9IFtdO1xuXHRcdHZhciBkdXJhdGlvbkNvdW50ZXIgPSBbMF07XG5cdFx0dmFyIHRlbXBvQ2hhbmdlcyA9IHt9O1xuXHRcdHRlbXBvQ2hhbmdlc1tcIjBcIl0gPSB7IGVsX3R5cGU6ICd0ZW1wbycsIHFwbTogcXBtLCB0aW1pbmc6IDAgfTtcblx0XHR2YXIgY3VycmVudFZvbHVtZTtcblx0XHR2YXIgc3RhcnRSZXBlYXRQbGFjZWhvbGRlciA9IFtdOyAvLyBUaGVyZSBpcyBhIHBsYWNlIGhvbGRlciBmb3IgZWFjaCB2b2ljZS5cblx0XHR2YXIgc2tpcEVuZGluZ1BsYWNlaG9sZGVyID0gW107IC8vIFRoaXMgaXMgdGhlIHBsYWNlIHdoZXJlIHRoZSBmaXJzdCBlbmRpbmcgc3RhcnRzLlxuXHRcdHZhciBzdGFydGluZ0RydW1TZXQgPSBmYWxzZTtcblx0XHR2YXIgbGluZXMgPSBhYmN0dW5lLmxpbmVzOyAvL2FiY3R1bmUuZGVsaW5lKCk7IFRPRE8tUEVSOiBjYW4gc3dpdGNoIHRvIHRoaXMsIHRoZW4gc2ltcGxpZnkgdGhlIGxvb3BzIGJlbG93LlxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdC8vIEZvciBlYWNoIGdyb3VwIG9mIHN0YWZmIGxpbmVzIGluIHRoZSB0dW5lLlxuXHRcdFx0dmFyIGxpbmUgPSBsaW5lc1tpXTtcblx0XHRcdGlmIChsaW5lLnN0YWZmKSB7XG5cdFx0XHRcdHZhciBzdGF2ZXMgPSBsaW5lLnN0YWZmO1xuXHRcdFx0XHR2YXIgdm9pY2VOdW1iZXIgPSAwO1xuXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHN0YXZlcy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdHZhciBzdGFmZiA9IHN0YXZlc1tqXTtcblx0XHRcdFx0XHRpZiAoc3RhZmYuY2xlZiAmJiBzdGFmZi5jbGVmLnR5cGUgPT09IFwiVEFCXCIpXG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblxuXHRcdFx0XHRcdC8vIEZvciBlYWNoIHN0YWZmIGxpbmVcblx0XHRcdFx0XHRmb3IgKHZhciBrID0gMDsgayA8IHN0YWZmLnZvaWNlcy5sZW5ndGg7IGsrKykge1xuXHRcdFx0XHRcdFx0Ly8gRm9yIGVhY2ggdm9pY2UgaW4gYSBzdGFmZiBsaW5lXG5cdFx0XHRcdFx0XHR2YXIgdm9pY2UgPSBzdGFmZi52b2ljZXNba107XG5cdFx0XHRcdFx0XHRpZiAoIXZvaWNlc1t2b2ljZU51bWJlcl0pIHtcblx0XHRcdFx0XHRcdFx0dm9pY2VzW3ZvaWNlTnVtYmVyXSA9IFtdLmNvbmNhdChKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHN0YXJ0Vm9pY2UpKSk7XG5cdFx0XHRcdFx0XHRcdHZhciB2b2ljZU5hbWUgPSBnZXRUcmFja1RpdGxlKGxpbmUuc3RhZmYsIHZvaWNlTnVtYmVyKTtcblx0XHRcdFx0XHRcdFx0aWYgKHZvaWNlTmFtZSlcblx0XHRcdFx0XHRcdFx0XHR2b2ljZXNbdm9pY2VOdW1iZXJdLnVuc2hpZnQoe2VsX3R5cGU6IFwibmFtZVwiLCB0cmFja05hbWU6IHZvaWNlTmFtZX0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Ly8gTmVnYXRlIGFueSB0cmFuc3Bvc2l0aW9uIGZvciB0aGUgcGVyY3Vzc2lvbiBzdGFmZi5cblx0XHRcdFx0XHRcdGlmICh0cmFuc3Bvc2UgJiYgc3RhZmYuY2xlZi50eXBlID09PSBcInBlcmNcIilcblx0XHRcdFx0XHRcdFx0dm9pY2VzW3ZvaWNlTnVtYmVyXS5wdXNoKHsgZWxfdHlwZTogJ3RyYW5zcG9zZScsIHRyYW5zcG9zZTogMCB9KTtcblxuXHRcdFx0XHRcdFx0aWYgKHN0YWZmLmNsZWYgJiYgc3RhZmYuY2xlZi50eXBlID09PSAncGVyYycgJiYgIWNoYW5uZWxFeHBsaWNpdGx5U2V0KSB7XG5cdFx0XHRcdFx0XHRcdGZvciAodmFyIGNsID0gMDsgY2wgPCB2b2ljZXNbdm9pY2VOdW1iZXJdLmxlbmd0aDsgY2wrKykge1xuXHRcdFx0XHRcdFx0XHRcdGlmICh2b2ljZXNbdm9pY2VOdW1iZXJdW2NsXS5lbF90eXBlID09PSAnaW5zdHJ1bWVudCcpXG5cdFx0XHRcdFx0XHRcdFx0XHR2b2ljZXNbdm9pY2VOdW1iZXJdW2NsXS5wcm9ncmFtID0gUEVSQ1VTU0lPTl9QUk9HUkFNO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHN0YWZmLmtleSkge1xuXHRcdFx0XHRcdFx0XHRhZGRLZXkodm9pY2VzW3ZvaWNlTnVtYmVyXSwgc3RhZmYua2V5KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChzdGFmZi5tZXRlcikge1xuXHRcdFx0XHRcdFx0XHRhZGRNZXRlcih2b2ljZXNbdm9pY2VOdW1iZXJdLCBzdGFmZi5tZXRlcik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIXN0YXJ0aW5nRHJ1bVNldCAmJiBkcnVtT24pIHsgLy8gZHJ1bSBpbmZvcm1hdGlvbiBpcyBvbmx5IG5lZWRlZCBvbmNlLCBzbyB1c2UgdGhlIGZpcnN0IGxpbmUgYW5kIHRyYWNrIDAuXG5cdFx0XHRcdFx0XHRcdHZvaWNlc1t2b2ljZU51bWJlcl0ucHVzaCh7ZWxfdHlwZTogJ2RydW0nLCBwYXJhbXM6IHtwYXR0ZXJuOiBkcnVtUGF0dGVybiwgYmFyczogZHJ1bUJhcnMsIG9uOiBkcnVtT24sIGludHJvOiBkcnVtSW50cm99fSk7XG5cdFx0XHRcdFx0XHRcdHN0YXJ0aW5nRHJ1bVNldCA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoc3RhZmYuY2xlZiAmJiBzdGFmZi5jbGVmLnR5cGUgIT09IFwicGVyY1wiICYmIHN0YWZmLmNsZWYudHJhbnNwb3NlKSB7XG5cdFx0XHRcdFx0XHRcdHN0YWZmLmNsZWYuZWxfdHlwZSA9ICdjbGVmJztcblx0XHRcdFx0XHRcdFx0dm9pY2VzW3ZvaWNlTnVtYmVyXS5wdXNoKHsgZWxfdHlwZTogJ3RyYW5zcG9zZScsIHRyYW5zcG9zZTogc3RhZmYuY2xlZi50cmFuc3Bvc2UgfSk7XG5cdFx0XHRcdFx0XHRcdGNsZWZUcmFuc3Bvc2VBY3RpdmVbdm9pY2VOdW1iZXJdID0gZmFsc2Vcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChzdGFmZi5jbGVmICYmIHN0YWZmLmNsZWYudHlwZSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoc3RhZmYuY2xlZi50eXBlLmluZGV4T2YoXCItOFwiKSA+PSAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0dm9pY2VzW3ZvaWNlTnVtYmVyXS5wdXNoKHtlbF90eXBlOiAndHJhbnNwb3NlJywgdHJhbnNwb3NlOiAtMTJ9KTtcblx0XHRcdFx0XHRcdFx0XHRjbGVmVHJhbnNwb3NlQWN0aXZlW3ZvaWNlTnVtYmVyXSA9IHRydWVcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRlbHNlIGlmIChzdGFmZi5jbGVmLnR5cGUuaW5kZXhPZihcIis4XCIpID49IDApIHtcblx0XHRcdFx0XHRcdFx0XHR2b2ljZXNbdm9pY2VOdW1iZXJdLnB1c2goe2VsX3R5cGU6ICd0cmFuc3Bvc2UnLCB0cmFuc3Bvc2U6IDEyfSk7XG5cdFx0XHRcdFx0XHRcdFx0Y2xlZlRyYW5zcG9zZUFjdGl2ZVt2b2ljZU51bWJlcl0gPSB0cnVlXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gaWYgd2UgaGFkIGEgcHJldmlvdXMgdHJlYmxlKzggYW5kIG5vdyBoYXZlIGEgcmVndWxhciBjbGVmLCB0aGVuIGNhbmNlbCB0aGUgdHJhbnNwb3NpdGlvblxuXHRcdFx0XHRcdFx0XHRcdGlmIChjbGVmVHJhbnNwb3NlQWN0aXZlW3ZvaWNlTnVtYmVyXSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dm9pY2VzW3ZvaWNlTnVtYmVyXS5wdXNoKHsgZWxfdHlwZTogJ3RyYW5zcG9zZScsIHRyYW5zcG9zZTogMCB9KTtcblx0XHRcdFx0XHRcdFx0XHRcdGNsZWZUcmFuc3Bvc2VBY3RpdmVbdm9pY2VOdW1iZXJdID0gZmFsc2Vcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKGFiY3R1bmUuZm9ybWF0dGluZy5taWRpICYmIGFiY3R1bmUuZm9ybWF0dGluZy5taWRpLmRydW1vZmYpIHtcblx0XHRcdFx0XHRcdFx0Ly8gSWYgdGhlcmUgaXMgYSBkcnVtIG9mZiBjb21tYW5kIHJpZ2h0IGF0IHRoZSBiZWdpbm5pbmcgaXQgaXMgcHV0IGluIHRoZSBtZXRhVGV4dCBpbnN0ZWFkIG9mIHRoZSBzdHJlYW0sXG5cdFx0XHRcdFx0XHRcdC8vIHNvIHdlIHdpbGwganVzdCBpbnNlcnQgaXQgaGVyZS5cblx0XHRcdFx0XHRcdFx0dm9pY2VzW3ZvaWNlTnVtYmVyXS5wdXNoKHsgZWxfdHlwZTogJ2JhcicgfSk7XG5cdFx0XHRcdFx0XHRcdHZvaWNlc1t2b2ljZU51bWJlcl0ucHVzaCh7ZWxfdHlwZTogJ2RydW0nLCBwYXJhbXM6IHtwYXR0ZXJuOiBcIlwiLCBvbjogZmFsc2UgfX0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0dmFyIG5vdGVFdmVudHNJbkJhciA9IDA7XG5cdFx0XHRcdFx0XHR2YXIgdHJpcGxldE11bHRpcGxpZXIgPSAwO1xuXHRcdFx0XHRcdFx0dmFyIHRyaXBsZXREdXJhdGlvblRvdGFsID0gMDsgLy8gdHJ5IHRvIG1pdGlnYXRlIHRoZSBqcyByb3VuZGluZyBwcm9ibGVtcy5cblx0XHRcdFx0XHRcdHZhciB0cmlwbGV0RHVyYXRpb25Db3VudCA9IDA7XG5cdFx0XHRcdFx0XHRjdXJyZW50Vm9sdW1lID0gWzEwNSwgOTUsIDg1LCAxXTtcblxuXHRcdFx0XHRcdFx0Zm9yICh2YXIgdiA9IDA7IHYgPCB2b2ljZS5sZW5ndGg7IHYrKykge1xuXHRcdFx0XHRcdFx0XHQvLyBGb3IgZWFjaCBlbGVtZW50IGluIGEgdm9pY2Vcblx0XHRcdFx0XHRcdFx0dmFyIGVsZW0gPSB2b2ljZVt2XTtcblx0XHRcdFx0XHRcdFx0c3dpdGNoIChlbGVtLmVsX3R5cGUpIHtcblx0XHRcdFx0XHRcdFx0XHRjYXNlIFwibm90ZVwiOlxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGluQ3Jlc2NlbmRvW2tdKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRWb2x1bWVbMF0gKz0gaW5DcmVzY2VuZG9ba107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRWb2x1bWVbMV0gKz0gaW5DcmVzY2VuZG9ba107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRWb2x1bWVbMl0gKz0gaW5DcmVzY2VuZG9ba107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZvaWNlc1t2b2ljZU51bWJlcl0ucHVzaCh7IGVsX3R5cGU6ICdiZWF0JywgYmVhdHM6IGN1cnJlbnRWb2x1bWUuc2xpY2UoMCkgfSk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdGlmIChpbkRpbWludWVuZG9ba10pIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y3VycmVudFZvbHVtZVswXSArPSBpbkRpbWludWVuZG9ba107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRWb2x1bWVbMV0gKz0gaW5EaW1pbnVlbmRvW2tdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjdXJyZW50Vm9sdW1lWzJdICs9IGluRGltaW51ZW5kb1trXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dm9pY2VzW3ZvaWNlTnVtYmVyXS5wdXNoKHsgZWxfdHlwZTogJ2JlYXQnLCBiZWF0czogY3VycmVudFZvbHVtZS5zbGljZSgwKSB9KTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdHNldER5bmFtaWNzKGVsZW0pO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyByZWd1bGFyIGl0ZW1zIGFyZSBqdXN0IHB1c2hlZC5cblx0XHRcdFx0XHRcdFx0XHRcdGlmICghZWxlbS5yZXN0IHx8IGVsZW0ucmVzdC50eXBlICE9PSAnc3BhY2VyJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgbm90ZUVsZW0gPSB7IGVsZW06IGVsZW0sIGVsX3R5cGU6IFwibm90ZVwiLCB0aW1pbmc6IGR1cmF0aW9uQ291bnRlclt2b2ljZU51bWJlcl0gfTsgLy8gTWFrZSBhIGNvcHkgc28gdGhhdCBtb2RpZmljYXRpb25zIGFyZW4ndCBrZXB0IGV4Y2VwdCBmb3IgYWRkaW5nIHRoZSBtaWRpUGl0Y2hlc1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZWxlbS5zdHlsZSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRub3RlRWxlbS5zdHlsZSA9IGVsZW0uc3R5bGU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2UgaWYgKHN0eWxlW3ZvaWNlTnVtYmVyXSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRub3RlRWxlbS5zdHlsZSA9IHN0eWxlW3ZvaWNlTnVtYmVyXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bm90ZUVsZW0uZHVyYXRpb24gPSAoZWxlbS5kdXJhdGlvbiA9PT0gMCkgPyAwLjI1IDogZWxlbS5kdXJhdGlvbjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVsZW0uc3RhcnRUcmlwbGV0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHJpcGxldE11bHRpcGxpZXIgPSBlbGVtLnRyaXBsZXRNdWx0aXBsaWVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRyaXBsZXREdXJhdGlvblRvdGFsID0gZWxlbS5zdGFydFRyaXBsZXQgKiB0cmlwbGV0TXVsdGlwbGllciAqIGVsZW0uZHVyYXRpb247XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVsZW0uc3RhcnRUcmlwbGV0ICE9PSBlbGVtLnRyaXBsZXRSKSB7IC8vIG1vc3QgY29tbW9ubHkgKDM6MjoyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodiArIGVsZW0udHJpcGxldFIgPD0gdm9pY2UubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBkdXJhdGlvblRvdGFsID0gMDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9yICh2YXIgdyA9IHY7IHcgPCB2ICsgZWxlbS50cmlwbGV0UjsgdysrKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZHVyYXRpb25Ub3RhbCArPSB2b2ljZVt3XS5kdXJhdGlvbjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0cmlwbGV0RHVyYXRpb25Ub3RhbCA9IHRyaXBsZXRNdWx0aXBsaWVyICogZHVyYXRpb25Ub3RhbDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bm90ZUVsZW0uZHVyYXRpb24gPSBub3RlRWxlbS5kdXJhdGlvbiAqIHRyaXBsZXRNdWx0aXBsaWVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5vdGVFbGVtLmR1cmF0aW9uID0gTWF0aC5yb3VuZChub3RlRWxlbS5kdXJhdGlvbioxMDAwMDAwKS8xMDAwMDAwO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRyaXBsZXREdXJhdGlvbkNvdW50ID0gbm90ZUVsZW0uZHVyYXRpb247XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAodHJpcGxldE11bHRpcGxpZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZWxlbS5lbmRUcmlwbGV0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0cmlwbGV0TXVsdGlwbGllciA9IDA7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRub3RlRWxlbS5kdXJhdGlvbiA9IE1hdGgucm91bmQoKHRyaXBsZXREdXJhdGlvblRvdGFsIC0gdHJpcGxldER1cmF0aW9uQ291bnQpKjEwMDAwMDApLzEwMDAwMDA7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5vdGVFbGVtLmR1cmF0aW9uID0gbm90ZUVsZW0uZHVyYXRpb24gKiB0cmlwbGV0TXVsdGlwbGllcjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5vdGVFbGVtLmR1cmF0aW9uID0gTWF0aC5yb3VuZChub3RlRWxlbS5kdXJhdGlvbioxMDAwMDAwKS8xMDAwMDAwO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHJpcGxldER1cmF0aW9uQ291bnQgKz0gbm90ZUVsZW0uZHVyYXRpb247XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlbGVtLnJlc3QpIG5vdGVFbGVtLnJlc3QgPSBlbGVtLnJlc3Q7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlbGVtLmRlY29yYXRpb24pIG5vdGVFbGVtLmRlY29yYXRpb24gPSBlbGVtLmRlY29yYXRpb24uc2xpY2UoMCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlbGVtLnBpdGNoZXMpIG5vdGVFbGVtLnBpdGNoZXMgPSBwYXJzZUNvbW1vbi5jbG9uZUFycmF5KGVsZW0ucGl0Y2hlcyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlbGVtLmdyYWNlbm90ZXMpIG5vdGVFbGVtLmdyYWNlbm90ZXMgPSBwYXJzZUNvbW1vbi5jbG9uZUFycmF5KGVsZW0uZ3JhY2Vub3Rlcyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlbGVtLmNob3JkKSBub3RlRWxlbS5jaG9yZCA9IHBhcnNlQ29tbW9uLmNsb25lQXJyYXkoZWxlbS5jaG9yZCk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0dm9pY2VzW3ZvaWNlTnVtYmVyXS5wdXNoKG5vdGVFbGVtKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVsZW0uc3R5bGUgPT09IFwicmh5dGhtXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyaHl0aG1IZWFkVGhpc0JhciA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2hvcmRWb2ljZU9mZlRoaXNCYXIodm9pY2VzKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vdGVFdmVudHNJbkJhcisrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRkdXJhdGlvbkNvdW50ZXJbdm9pY2VOdW1iZXJdICs9IG5vdGVFbGVtLmR1cmF0aW9uO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBcImtleVwiOlxuXHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJrZXlTaWduYXR1cmVcIjpcblx0XHRcdFx0XHRcdFx0XHRcdGFkZEtleSh2b2ljZXNbdm9pY2VOdW1iZXJdLCBlbGVtKTtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJtZXRlclwiOlxuXHRcdFx0XHRcdFx0XHRcdFx0YWRkTWV0ZXIodm9pY2VzW3ZvaWNlTnVtYmVyXSwgZWxlbSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRjYXNlIFwiY2xlZlwiOiAvLyBuZWVkIHRvIGtlZXAgdGhpcyB0byBjYXRjaCB0aGUgXCJ0cmFuc3Bvc2VcIiBlbGVtZW50LlxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVsZW0udHJhbnNwb3NlKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR2b2ljZXNbdm9pY2VOdW1iZXJdLnB1c2goeyBlbF90eXBlOiAndHJhbnNwb3NlJywgdHJhbnNwb3NlOiBlbGVtLnRyYW5zcG9zZSB9KTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChlbGVtLnR5cGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVsZW0udHlwZS5pbmRleE9mKFwiLThcIikgPj0gMClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2b2ljZXNbdm9pY2VOdW1iZXJdLnB1c2goeyBlbF90eXBlOiAndHJhbnNwb3NlJywgdHJhbnNwb3NlOiAtMTIgfSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2UgaWYgKGVsZW0udHlwZS5pbmRleE9mKFwiKzhcIikgPj0gMClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2b2ljZXNbdm9pY2VOdW1iZXJdLnB1c2goeyBlbF90eXBlOiAndHJhbnNwb3NlJywgdHJhbnNwb3NlOiAxMiB9KTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJ0ZW1wb1wiOlxuXHRcdFx0XHRcdFx0XHRcdFx0cXBtID0gaW50ZXJwcmV0VGVtcG8oZWxlbSwgYWJjdHVuZS5nZXRCZWF0TGVuZ3RoKCkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0dm9pY2VzW3ZvaWNlTnVtYmVyXS5wdXNoKHsgZWxfdHlwZTogJ3RlbXBvJywgcXBtOiBxcG0sIHRpbWluZzogZHVyYXRpb25Db3VudGVyW3ZvaWNlTnVtYmVyXSB9KTtcblx0XHRcdFx0XHRcdFx0XHRcdHRlbXBvQ2hhbmdlc1snJytkdXJhdGlvbkNvdW50ZXJbdm9pY2VOdW1iZXJdXSA9IHsgZWxfdHlwZTogJ3RlbXBvJywgcXBtOiBxcG0sIHRpbWluZzogZHVyYXRpb25Db3VudGVyW3ZvaWNlTnVtYmVyXSB9O1xuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBcImJhclwiOlxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKG5vdGVFdmVudHNJbkJhciA+IDApIC8vIGRvbid0IGFkZCB0d28gYmFycyBpbiBhIHJvdy5cblx0XHRcdFx0XHRcdFx0XHRcdFx0dm9pY2VzW3ZvaWNlTnVtYmVyXS5wdXNoKHsgZWxfdHlwZTogJ2JhcicgfSk7IC8vIFdlIG5lZWQgdGhlIGJhciBtYXJraW5nIHRvIHJlc2V0IHRoZSBhY2NpZGVudGFscy5cblx0XHRcdFx0XHRcdFx0XHRcdHNldER5bmFtaWNzKGVsZW0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0bm90ZUV2ZW50c0luQmFyID0gMDtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGZpZ3VyZSBvdXQgcmVwZWF0cyBhbmQgZW5kaW5ncyAtLVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gVGhlIGltcG9ydGFudCBwYXJ0IGlzIHdoZXJlIHRoZXJlIGlzIGEgc3RhcnQgcmVwZWF0LCBhbmQgZW5kIHJlcGVhdCwgb3IgYSBmaXJzdCBlbmRpbmcuXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgZW5kUmVwZWF0ID0gKGVsZW0udHlwZSA9PT0gXCJiYXJfcmlnaHRfcmVwZWF0XCIgfHwgZWxlbS50eXBlID09PSBcImJhcl9kYmxfcmVwZWF0XCIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIHN0YXJ0RW5kaW5nID0gKGVsZW0uc3RhcnRFbmRpbmcgPT09ICcxJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgc3RhcnRSZXBlYXQgPSAoZWxlbS50eXBlID09PSBcImJhcl9sZWZ0X3JlcGVhdFwiIHx8IGVsZW0udHlwZSA9PT0gXCJiYXJfZGJsX3JlcGVhdFwiIHx8IGVsZW0udHlwZSA9PT0gXCJiYXJfcmlnaHRfcmVwZWF0XCIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVuZFJlcGVhdCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgcyA9IHN0YXJ0UmVwZWF0UGxhY2Vob2xkZXJbdm9pY2VOdW1iZXJdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXMpIHMgPSAwOyAvLyBJZiB0aGVyZSB3YXNuJ3QgYSBsZWZ0IHJlcGVhdCwgdGhlbiB3ZSByZXBlYXQgZnJvbSB0aGUgYmVnaW5uaW5nLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgZSA9IHNraXBFbmRpbmdQbGFjZWhvbGRlclt2b2ljZU51bWJlcl07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICghZSkgZSA9IHZvaWNlc1t2b2ljZU51bWJlcl0ubGVuZ3RoOyAvLyBJZiB0aGVyZSB3YXNuJ3QgYSBmaXJzdCBlbmRpbmcgbWFya2VyLCB0aGVuIHdlIGNvcHkgZXZlcnl0aGluZy5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gZHVwbGljYXRlIGVhY2ggb2YgdGhlIGVsZW1lbnRzIC0gdGhpcyBoYXMgdG8gYmUgYSBkZWVwIGNvcHkuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZvciAodmFyIHogPSBzOyB6IDwgZTsgeisrKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIGl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LHZvaWNlc1t2b2ljZU51bWJlcl1bel0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChpdGVtLnBpdGNoZXMpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpdGVtLnBpdGNoZXMgPSBwYXJzZUNvbW1vbi5jbG9uZUFycmF5KGl0ZW0ucGl0Y2hlcyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dm9pY2VzW3ZvaWNlTnVtYmVyXS5wdXNoKGl0ZW0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHJlc2V0IHRoZXNlIGluIGNhc2UgdGhlcmUgaXMgYSBzZWNvbmQgcmVwZWF0IGxhdGVyIG9uLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRza2lwRW5kaW5nUGxhY2Vob2xkZXJbdm9pY2VOdW1iZXJdID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzdGFydFJlcGVhdFBsYWNlaG9sZGVyW3ZvaWNlTnVtYmVyXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdGlmIChzdGFydEVuZGluZylcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2tpcEVuZGluZ1BsYWNlaG9sZGVyW3ZvaWNlTnVtYmVyXSA9IHZvaWNlc1t2b2ljZU51bWJlcl0ubGVuZ3RoO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHN0YXJ0UmVwZWF0KVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzdGFydFJlcGVhdFBsYWNlaG9sZGVyW3ZvaWNlTnVtYmVyXSA9IHZvaWNlc1t2b2ljZU51bWJlcl0ubGVuZ3RoO1xuXHRcdFx0XHRcdFx0XHRcdFx0cmh5dGhtSGVhZFRoaXNCYXIgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGNhc2UgJ3N0eWxlJzpcblx0XHRcdFx0XHRcdFx0XHRcdHN0eWxlW3ZvaWNlTnVtYmVyXSA9IGVsZW0uaGVhZDtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGNhc2UgJ3RpbWVTaWduYXR1cmUnOlxuXHRcdFx0XHRcdFx0XHRcdFx0dm9pY2VzW3ZvaWNlTnVtYmVyXS5wdXNoKGludGVycHJldE1ldGVyKGVsZW0pKTtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGNhc2UgJ3BhcnQnOlxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gVE9ETy1QRVI6IElmIHRoZXJlIGlzIGEgcGFydCBzZWN0aW9uIGluIHRoZSBoZWFkZXIsIHRoZW4gdGhpcyBzaG91bGQgcHJvYmFibHkgYWZmZWN0IHRoZSByZXBlYXRzLlxuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSAnc3RlbSc6XG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSAnc2NhbGUnOlxuXHRcdFx0XHRcdFx0XHRcdGNhc2UgJ2JyZWFrJzpcblx0XHRcdFx0XHRcdFx0XHRjYXNlICdmb250Jzpcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFRoZXNlIGVsZW1lbnRzIGRvbid0IGFmZmVjdCBzb3VuZFxuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSAnbWlkaSc6XG5cdFx0XHRcdFx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKFwiTUlESSBpbmxpbmVcIiwgZWxlbSk7IC8vIFRPRE8tUEVSOiBmb3IgZGVidWdnaW5nLiBSZW1vdmUgdGhpcy5cblx0XHRcdFx0XHRcdFx0XHRcdHZhciBkcnVtQ2hhbmdlID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHRzd2l0Y2ggKGVsZW0uY21kKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJkcnVtb25cIjogZHJ1bU9uID0gdHJ1ZTsgZHJ1bUNoYW5nZSA9IHRydWU7IGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIFwiZHJ1bW9mZlwiOiBkcnVtT24gPSBmYWxzZTsgZHJ1bUNoYW5nZSA9IHRydWU7IGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIFwiZHJ1bVwiOiBkcnVtUGF0dGVybiA9IGVsZW0ucGFyYW1zOyBkcnVtQ2hhbmdlID0gdHJ1ZTsgYnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJkcnVtYmFyc1wiOiBkcnVtQmFycyA9IGVsZW0ucGFyYW1zWzBdOyBkcnVtQ2hhbmdlID0gdHJ1ZTsgYnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJkcnVtbWFwXCI6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVGhpcyBpcyBoYW5kbGVkIGJlZm9yZSBnZXR0aW5nIGhlcmUgc28gaXQgY2FuIGJlIGlnbm9yZWQuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJjaGFubmVsXCI6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVGhlcmUncyBub3QgbXVjaCBuZWVkZWQgZm9yIHRoZSBjaGFubmVsIGV4Y2VwdCB0byBsb29rIG91dCBmb3IgdGhlIHBlcmN1c3Npb24gY2hhbm5lbFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlbGVtLnBhcmFtc1swXSA9PT0gMTApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2b2ljZXNbdm9pY2VOdW1iZXJdLnB1c2goeyBlbF90eXBlOiAnaW5zdHJ1bWVudCcsIHByb2dyYW06IFBFUkNVU1NJT05fUFJPR1JBTSB9KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBcInByb2dyYW1cIjpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhZGRJZkRpZmZlcmVudCh2b2ljZXNbdm9pY2VOdW1iZXJdLCB7IGVsX3R5cGU6ICdpbnN0cnVtZW50JywgcHJvZ3JhbTogZWxlbS5wYXJhbXNbMF0gfSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2hhbm5lbEV4cGxpY2l0bHlTZXQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIFwidHJhbnNwb3NlXCI6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dm9pY2VzW3ZvaWNlTnVtYmVyXS5wdXNoKHsgZWxfdHlwZTogJ3RyYW5zcG9zZScsIHRyYW5zcG9zZTogZWxlbS5wYXJhbXNbMF0gfSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJnY2hvcmRvZmZcIjpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2b2ljZXNbdm9pY2VOdW1iZXJdLnB1c2goeyBlbF90eXBlOiAnZ2Nob3JkT24nLCB0YWNldDogdHJ1ZSB9KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBcImdjaG9yZG9uXCI6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dm9pY2VzW3ZvaWNlTnVtYmVyXS5wdXNoKHsgZWxfdHlwZTogJ2djaG9yZE9uJywgdGFjZXQ6IGZhbHNlIH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIFwiYmVhdFwiOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZvaWNlc1t2b2ljZU51bWJlcl0ucHVzaCh7IGVsX3R5cGU6ICdiZWF0JywgYmVhdHM6IGVsZW0ucGFyYW1zIH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIFwibm9iZWF0YWNjZW50c1wiOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZvaWNlc1t2b2ljZU51bWJlcl0ucHVzaCh7IGVsX3R5cGU6ICdiZWF0YWNjZW50cycsIHZhbHVlOiBmYWxzZSB9KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBcImJlYXRhY2NlbnRzXCI6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dm9pY2VzW3ZvaWNlTnVtYmVyXS5wdXNoKHsgZWxfdHlwZTogJ2JlYXRhY2NlbnRzJywgdmFsdWU6IHRydWUgfSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJ2b2xcIjpcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBcInZvbGluY1wiOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZvaWNlc1t2b2ljZU51bWJlcl0ucHVzaCh7IGVsX3R5cGU6IGVsZW0uY21kLCB2b2x1bWU6IGVsZW0ucGFyYW1zWzBdIH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIFwic3dpbmdcIjpcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBcImdjaG9yZFwiOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIFwiYmFzc3ZvbFwiOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYXNlIFwiY2hvcmR2b2xcIjpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2b2ljZXNbdm9pY2VOdW1iZXJdLnB1c2goeyBlbF90eXBlOiBlbGVtLmNtZCwgcGFyYW06IGVsZW0ucGFyYW1zWzBdIH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJiYXNzcHJvZ1wiOiAvLyBNQUUgMjIgTWF5IDIwMjRcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSBcImNob3JkcHJvZ1wiOiAvLyBNQUUgMjIgTWF5IDIwMjRcblx0XHRcdFx0XHQgICAgICAgICAgICAgICAgICAgICAgdm9pY2VzW3ZvaWNlTnVtYmVyXS5wdXNoKHtcblx0XHRcdFx0XHQgICAgICAgICAgICAgICAgICAgICAgICBlbF90eXBlOiBlbGVtLmNtZCxcblx0XHRcdFx0XHQgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZWxlbS5wYXJhbXNbMF0sXG5cdFx0XHRcdFx0ICAgICAgICAgICAgICAgICAgICAgICAgb2N0YXZlU2hpZnQ6IGVsZW0ucGFyYW1zWzFdXG5cdFx0XHRcdFx0ICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXHRcdFx0XHRcdCAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuXHRcdFx0XHRcdCAgICAgICAgICAgICAgICAgICAgLy8gTUFFIDIzIEp1biAyMDI0XG5cdFx0XHRcdFx0ICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZ2Nob3JkYmFyc1wiOlxuXHRcdFx0XHRcdCAgICAgICAgICAgICAgICAgICAgICAgIHZvaWNlc1t2b2ljZU51bWJlcl0ucHVzaCh7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICBlbF90eXBlOiBlbGVtLmNtZCxcblx0XHRcdFx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtOiBlbGVtLnBhcmFtc1swXVxuXHRcdFx0XHRcdCAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXHRcdFx0XHRcdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJNSURJIHNlcTogbWlkaSBjbWQgbm90IGhhbmRsZWQ6IFwiLCBlbGVtLmNtZCwgZWxlbSk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoZHJ1bUNoYW5nZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2b2ljZXNbMF0ucHVzaCh7ZWxfdHlwZTogJ2RydW0nLCBwYXJhbXM6IHsgcGF0dGVybjogZHJ1bVBhdHRlcm4sIGJhcnM6IGRydW1CYXJzLCBpbnRybzogZHJ1bUludHJvLCBvbjogZHJ1bU9ufX0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzdGFydGluZ0RydW1TZXQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiTUlESTogZWxlbWVudCB0eXBlIFwiICsgZWxlbS5lbF90eXBlICsgXCIgbm90IGhhbmRsZWQuXCIpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR2b2ljZU51bWJlcisrO1xuXHRcdFx0XHRcdFx0aWYgKCFkdXJhdGlvbkNvdW50ZXJbdm9pY2VOdW1iZXJdKVxuXHRcdFx0XHRcdFx0XHRkdXJhdGlvbkNvdW50ZXJbdm9pY2VOdW1iZXJdID0gMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmdW5jdGlvbiBzZXREeW5hbWljcyhlbGVtKSB7XG5cdFx0XHRcdFx0dmFyIHZvbHVtZXMgPSB7Ly9zdHJlc3NCZWF0MSwgc3RyZXNzQmVhdERvd24sIHN0cmVzc0JlYXRVcFxuXHRcdFx0XHRcdFx0J3BwcHAnOiBbMTUsIDEwLCA1LCAxXSxcblx0XHRcdFx0XHRcdCdwcHAnOiBbMzAsIDIwLCAxMCwgMV0sXG5cdFx0XHRcdFx0XHQncHAnOiBbNDUsIDM1LCAyMCwgMV0sXG5cdFx0XHRcdFx0XHQncCc6IFs2MCwgNTAsIDM1LCAxXSxcblx0XHRcdFx0XHRcdCdtcCc6IFs3NSwgNjUsIDUwLCAxXSxcblx0XHRcdFx0XHRcdCdtZic6IFs5MCwgODAsIDY1LCAxXSxcblx0XHRcdFx0XHRcdCdmJzogWzEwNSwgOTUsIDgwLCAxXSxcblx0XHRcdFx0XHRcdCdmZic6IFsxMjAsIDExMCwgOTUsIDFdLFxuXHRcdFx0XHRcdFx0J2ZmZic6IFsxMjcsIDEyNSwgMTEwLCAxXSxcblx0XHRcdFx0XHRcdCdmZmZmJzogWzEyNywgMTI1LCAxMTAsIDFdXG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdHZhciBkeW5hbWljVHlwZTtcblx0XHRcdFx0XHRpZiAoZWxlbS5kZWNvcmF0aW9uKSB7XG5cdFx0XHRcdFx0XHRpZiAoZWxlbS5kZWNvcmF0aW9uLmluZGV4T2YoJ3BwcHAnKSA+PSAwKVxuXHRcdFx0XHRcdFx0XHRkeW5hbWljVHlwZSA9ICdwcHBwJztcblx0XHRcdFx0XHRcdGVsc2UgaWYgKGVsZW0uZGVjb3JhdGlvbi5pbmRleE9mKCdwcHAnKSA+PSAwKVxuXHRcdFx0XHRcdFx0XHRkeW5hbWljVHlwZSA9ICdwcHAnO1xuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoZWxlbS5kZWNvcmF0aW9uLmluZGV4T2YoJ3BwJykgPj0gMClcblx0XHRcdFx0XHRcdFx0ZHluYW1pY1R5cGUgPSAncHAnO1xuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoZWxlbS5kZWNvcmF0aW9uLmluZGV4T2YoJ3AnKSA+PSAwKVxuXHRcdFx0XHRcdFx0XHRkeW5hbWljVHlwZSA9ICdwJztcblx0XHRcdFx0XHRcdGVsc2UgaWYgKGVsZW0uZGVjb3JhdGlvbi5pbmRleE9mKCdtcCcpID49IDApXG5cdFx0XHRcdFx0XHRcdGR5bmFtaWNUeXBlID0gJ21wJztcblx0XHRcdFx0XHRcdGVsc2UgaWYgKGVsZW0uZGVjb3JhdGlvbi5pbmRleE9mKCdtZicpID49IDApXG5cdFx0XHRcdFx0XHRcdGR5bmFtaWNUeXBlID0gJ21mJztcblx0XHRcdFx0XHRcdGVsc2UgaWYgKGVsZW0uZGVjb3JhdGlvbi5pbmRleE9mKCdmJykgPj0gMClcblx0XHRcdFx0XHRcdFx0ZHluYW1pY1R5cGUgPSAnZic7XG5cdFx0XHRcdFx0XHRlbHNlIGlmIChlbGVtLmRlY29yYXRpb24uaW5kZXhPZignZmYnKSA+PSAwKVxuXHRcdFx0XHRcdFx0XHRkeW5hbWljVHlwZSA9ICdmZic7XG5cdFx0XHRcdFx0XHRlbHNlIGlmIChlbGVtLmRlY29yYXRpb24uaW5kZXhPZignZmZmJykgPj0gMClcblx0XHRcdFx0XHRcdFx0ZHluYW1pY1R5cGUgPSAnZmZmJztcblx0XHRcdFx0XHRcdGVsc2UgaWYgKGVsZW0uZGVjb3JhdGlvbi5pbmRleE9mKCdmZmZmJykgPj0gMClcblx0XHRcdFx0XHRcdFx0ZHluYW1pY1R5cGUgPSAnZmZmZic7XG5cblx0XHRcdFx0XHRcdGlmIChkeW5hbWljVHlwZSkge1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50Vm9sdW1lID0gdm9sdW1lc1tkeW5hbWljVHlwZV0uc2xpY2UoMCk7XG5cdFx0XHRcdFx0XHRcdGxldCB2b2x1bWVzUGVyTm90ZVBpdGNoID0gW2N1cnJlbnRWb2x1bWVdO1xuXHRcdFx0XHRcdFx0XHRpZihBcnJheS5pc0FycmF5KGVsZW0uZGVjb3JhdGlvbikpe1xuXHRcdFx0XHRcdFx0XHRcdHZvbHVtZXNQZXJOb3RlUGl0Y2ggPSBbXTtcblx0XHRcdFx0XHRcdFx0XHRlbGVtLmRlY29yYXRpb24uZm9yRWFjaChkPT57XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoZCBpbiB2b2x1bWVzKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR2b2x1bWVzUGVyTm90ZVBpdGNoLnB1c2godm9sdW1lc1tkXS5zbGljZSgwKSk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0dm9pY2VzW3ZvaWNlTnVtYmVyXS5wdXNoKHsgZWxfdHlwZTogJ2JlYXQnLCBiZWF0czogY3VycmVudFZvbHVtZS5zbGljZSgwKSwgdm9sdW1lc1Blck5vdGVQaXRjaDogdm9sdW1lc1Blck5vdGVQaXRjaCwgfSk7XG5cdFx0XHRcdFx0XHRcdGluQ3Jlc2NlbmRvW2tdID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdGluRGltaW51ZW5kb1trXSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoZWxlbS5kZWNvcmF0aW9uLmluZGV4T2YoXCJjcmVzY2VuZG8oXCIpID49IDApIHtcblx0XHRcdFx0XHRcdFx0dmFyIG4gPSBudW1Ob3Rlc1RvRGVjb3JhdGlvbih2b2ljZSwgdiwgXCJjcmVzY2VuZG8pXCIpO1xuXHRcdFx0XHRcdFx0XHR2YXIgdG9wID0gTWF0aC5taW4oMTI3LCBjdXJyZW50Vm9sdW1lWzBdICsgY3Jlc2NlbmRvU2l6ZSk7XG5cdFx0XHRcdFx0XHRcdHZhciBlbmREZWMgPSBlbmRpbmdWb2x1bWUodm9pY2UsIHYrbisxLCBPYmplY3Qua2V5cyh2b2x1bWVzKSk7XG5cdFx0XHRcdFx0XHRcdGlmIChlbmREZWMpXG5cdFx0XHRcdFx0XHRcdFx0dG9wID0gdm9sdW1lc1tlbmREZWNdWzBdO1xuXHRcdFx0XHRcdFx0XHRpZiAobiA+IDApXG5cdFx0XHRcdFx0XHRcdFx0aW5DcmVzY2VuZG9ba10gPSBNYXRoLmZsb29yKCh0b3AgLSBjdXJyZW50Vm9sdW1lWzBdKSAvIG4pO1xuXHRcdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdFx0aW5DcmVzY2VuZG9ba10gPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0aW5EaW1pbnVlbmRvW2tdID0gZmFsc2U7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGVsZW0uZGVjb3JhdGlvbi5pbmRleE9mKFwiY3Jlc2NlbmRvKVwiKSA+PSAwKSB7XG5cdFx0XHRcdFx0XHRcdGluQ3Jlc2NlbmRvW2tdID0gZmFsc2U7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGVsZW0uZGVjb3JhdGlvbi5pbmRleE9mKFwiZGltaW51ZW5kbyhcIikgPj0gMCkge1xuXHRcdFx0XHRcdFx0XHR2YXIgbjIgPSBudW1Ob3Rlc1RvRGVjb3JhdGlvbih2b2ljZSwgdiwgXCJkaW1pbnVlbmRvKVwiKTtcblx0XHRcdFx0XHRcdFx0dmFyIGJvdHRvbSA9IE1hdGgubWF4KDE1LCBjdXJyZW50Vm9sdW1lWzBdIC0gY3Jlc2NlbmRvU2l6ZSk7XG5cdFx0XHRcdFx0XHRcdHZhciBlbmREZWMyID0gZW5kaW5nVm9sdW1lKHZvaWNlLCB2K24yKzEsIE9iamVjdC5rZXlzKHZvbHVtZXMpKTtcblx0XHRcdFx0XHRcdFx0aWYgKGVuZERlYzIpXG5cdFx0XHRcdFx0XHRcdFx0Ym90dG9tID0gdm9sdW1lc1tlbmREZWMyXVswXTtcblx0XHRcdFx0XHRcdFx0aW5DcmVzY2VuZG9ba10gPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0aWYgKG4yID4gMClcblx0XHRcdFx0XHRcdFx0XHRpbkRpbWludWVuZG9ba10gPSBNYXRoLmZsb29yKChib3R0b20gLSBjdXJyZW50Vm9sdW1lWzBdKSAvIG4yKTtcblx0XHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHRcdGluRGltaW51ZW5kb1trXSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChlbGVtLmRlY29yYXRpb24uaW5kZXhPZihcImRpbWludWVuZG8pXCIpID49IDApIHtcblx0XHRcdFx0XHRcdFx0aW5EaW1pbnVlbmRvW2tdID0gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vIElmIHRoZXJlIGFyZSB0ZW1wbyBjaGFuZ2VzLCBtYWtlIHN1cmUgdGhleSBhcmUgaW4gYWxsIHRoZSB2b2ljZXMuIFRoaXMgbXVzdCBiZSBkb25lIHBvc3QgcHJvY2VzcyBiZWNhdXNlIGFsbCB0aGUgZWxlbWVudHMgaW4gYWxsIHRoZSB2b2ljZXMgbmVlZCB0byBiZSBjcmVhdGVkIGZpcnN0LlxuXHRcdGluc2VydFRlbXBvQ2hhbmdlcyh2b2ljZXMsIHRlbXBvQ2hhbmdlcyk7XG5cblx0XHRpZiAoZHJ1bUludHJvKSB7XG5cdFx0XHR2YXIgcGlja3VwcyA9IGFiY3R1bmUuZ2V0UGlja3VwTGVuZ3RoKCk7XG5cdFx0XHQvLyBhZGQgc29tZSBtZWFzdXJlcyBvZiByZXN0cyB0byB0aGUgc3RhcnQgb2YgZWFjaCB0cmFjay5cblx0XHRcdGZvciAodmFyIHZ2ID0gMDsgdnYgPCB2b2ljZXMubGVuZ3RoOyB2disrKSB7XG5cdFx0XHRcdHZhciBpbnNlcnRQb2ludCA9IDA7XG5cdFx0XHRcdHdoaWxlICh2b2ljZXNbdnZdW2luc2VydFBvaW50XS5lbF90eXBlICE9PSBcIm5vdGVcIiAmJiB2b2ljZXNbdnZdLmxlbmd0aCA+IGluc2VydFBvaW50KVxuXHRcdFx0XHRcdGluc2VydFBvaW50Kys7XG5cdFx0XHRcdGlmICh2b2ljZXNbdnZdLmxlbmd0aCA+IGluc2VydFBvaW50KSB7XG5cdFx0XHRcdFx0Zm9yICh2YXIgdyA9IDA7IHcgPCBkcnVtSW50cm87IHcrKykge1xuXHRcdFx0XHRcdFx0Ly8gSWYgaXQgaXMgdGhlIGxhc3QgbWVhc3VyZSBvZiBpbnRybywgc3VidHJhY3QgdGhlIHBpY2t1cHMuXG5cdFx0XHRcdFx0XHRpZiAocGlja3VwcyA9PT0gMCB8fCB3IDwgZHJ1bUludHJvLTEpIHtcblx0XHRcdFx0XHRcdFx0dm9pY2VzW3Z2XS5zcGxpY2UoaW5zZXJ0UG9pbnQsIDAsIFxuXHRcdFx0XHRcdFx0XHRcdHtlbF90eXBlOiBcIm5vdGVcIiwgcmVzdDoge3R5cGU6IFwicmVzdFwifSwgZHVyYXRpb246IG1lYXN1cmVMZW5ndGh9LFxuXHRcdFx0XHRcdFx0XHRcdHsgZWxfdHlwZTogXCJiYXJcIiB9XG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdGluc2VydFBvaW50ICs9IDJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHZvaWNlc1t2dl0uc3BsaWNlKGluc2VydFBvaW50KyssIDAsIHtlbF90eXBlOiBcIm5vdGVcIiwgcmVzdDoge3R5cGU6IFwicmVzdFwifSwgZHVyYXRpb246IG1lYXN1cmVMZW5ndGgtcGlja3Vwc30pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoZHJ1bU9mZkFmdGVySW50cm8pIHtcblx0XHRcdFx0XHRcdGRydW1PbiA9IGZhbHNlXG5cdFx0XHRcdFx0XHR2b2ljZXNbdnZdLnNwbGljZShpbnNlcnRQb2ludCsrLCAwLCB7ZWxfdHlwZTogJ2RydW0nLCBwYXJhbXM6IHsgcGF0dGVybjogZHJ1bVBhdHRlcm4sIGJhcnM6IGRydW1CYXJzLCBpbnRybzogZHJ1bUludHJvLCBvbjogZHJ1bU9ufX0pO1xuXHRcdFx0XHRcdFx0ZHJ1bU9mZkFmdGVySW50cm8gPSBmYWxzZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAodm9pY2VzLmxlbmd0aCA+IDAgJiYgdm9pY2VzWzBdLmxlbmd0aCA+IDApIHtcblx0XHRcdHZvaWNlc1swXVswXS5waWNrdXBMZW5ndGggPSBhYmN0dW5lLmdldFBpY2t1cExlbmd0aCgpO1xuXHRcdH1cblx0XHRyZXR1cm4gdm9pY2VzO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIG51bU5vdGVzVG9EZWNvcmF0aW9uKHZvaWNlLCBzdGFydCwgZGVjb3JhdGlvbikge1xuXHRcdHZhciBjb3VudGVyID0gMDtcblx0XHRmb3IgKHZhciBpID0gc3RhcnQrMTsgaSA8IHZvaWNlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAodm9pY2VbaV0uZWxfdHlwZSA9PT0gXCJub3RlXCIpXG5cdFx0XHRcdGNvdW50ZXIrKztcblx0XHRcdGlmICh2b2ljZVtpXS5kZWNvcmF0aW9uICYmIHZvaWNlW2ldLmRlY29yYXRpb24uaW5kZXhPZihkZWNvcmF0aW9uKSA+PSAwKVxuXHRcdFx0XHRyZXR1cm4gY291bnRlcjtcblx0XHR9XG5cdFx0cmV0dXJuIGNvdW50ZXI7XG5cdH1cblx0ZnVuY3Rpb24gZW5kaW5nVm9sdW1lKHZvaWNlLCBzdGFydCwgdm9sdW1lRGVjb3JhdGlvbnMpIHtcblx0XHR2YXIgZW5kID0gTWF0aC5taW4odm9pY2UubGVuZ3RoLCBzdGFydCArIDMpOyAvLyBJZiB3ZSBoYXZlIGEgdm9sdW1lIHdpdGhpbiBhIGNvdXBsZSBub3RlcyBvZiB0aGUgZW5kIHRoZW4gYXNzdW1lIHRoYXQgaXMgdGhlIGRlc3RpbmF0aW9uLlxuXHRcdGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG5cdFx0XHRpZiAodm9pY2VbaV0uZWxfdHlwZSA9PT0gXCJub3RlXCIpIHtcblx0XHRcdFx0aWYgKHZvaWNlW2ldLmRlY29yYXRpb24pIHtcblx0XHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHZvaWNlW2ldLmRlY29yYXRpb24ubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRcdGlmICh2b2x1bWVEZWNvcmF0aW9ucy5pbmRleE9mKHZvaWNlW2ldLmRlY29yYXRpb25bal0pID49IDApXG5cdFx0XHRcdFx0XHRcdHJldHVybiB2b2ljZVtpXS5kZWNvcmF0aW9uW2pdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdGZ1bmN0aW9uIGluc2VydFRlbXBvQ2hhbmdlcyh2b2ljZXMsIHRlbXBvQ2hhbmdlcykge1xuXHRcdGlmICghdGVtcG9DaGFuZ2VzIHx8IHRlbXBvQ2hhbmdlcy5sZW5ndGggPT09IDApXG5cdFx0XHRyZXR1cm47XG5cdFx0dmFyIGNoYW5nZVBvc2l0aW9ucyA9IE9iamVjdC5rZXlzKHRlbXBvQ2hhbmdlcyk7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB2b2ljZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciB2b2ljZSA9IHZvaWNlc1tpXTtcblx0XHRcdHZhciBsYXN0VGVtcG8gPSB0ZW1wb0NoYW5nZXNbJzAnXSA/IHRlbXBvQ2hhbmdlc1snMCddLnFwbSA6IDA7IC8vIERvbid0IGluc2VydCByZWR1bmRhbnQgY2hhbmdlcy4gVGhpcyBoYXBwZW5zIG5vcm1hbGx5IHdoZW4gcmVwZWF0aW5nIGZyb20gdGhlIGJlZ2lubmluZywgYnV0IGNvdWxkIGhhcHBlbiBhbnl3aGVyZSB0aGF0IHRoZXJlIGlzIGEgdGVtcG8gbWFya2luZyB0aGF0IGlzIHRoZSBzYW1lIGFzIHRoZSBsYXN0IG9uZS5cblx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgdm9pY2UubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0dmFyIGVsID0gdm9pY2Vbal07XG5cdFx0XHRcdGlmIChlbC5lbF90eXBlID09PSBcInRlbXBvXCIpXG5cdFx0XHRcdFx0bGFzdFRlbXBvID0gZWwucXBtO1xuXHRcdFx0XHRpZiAoY2hhbmdlUG9zaXRpb25zLmluZGV4T2YoJycrZWwudGltaW5nKSA+PSAwICYmIGxhc3RUZW1wbyAhPT0gdGVtcG9DaGFuZ2VzWycnK2VsLnRpbWluZ10ucXBtKSB7XG5cdFx0XHRcdFx0bGFzdFRlbXBvID0gdGVtcG9DaGFuZ2VzWycnK2VsLnRpbWluZ10ucXBtO1xuXHRcdFx0XHRcdGlmIChlbC5lbF90eXBlID09PSBcInRlbXBvXCIpIHtcblx0XHRcdFx0XHRcdGVsLnFwbSA9IHRlbXBvQ2hhbmdlc1snJytlbC50aW1pbmddLnFwbTtcblx0XHRcdFx0XHRcdGorKzsgLy8gd2hlbiB0aGVyZSBpcyBhIHRlbXBvIGVsZW1lbnQgdGhlIG5leHQgZWxlbWVudCBoYXMgdGhlIHNhbWUgdGltaW5nIGFuZCB3ZSBkb24ndCB3YW50IGl0IHRvIG1hdGNoIHRoZSBzZWNvbmQgdGltZS5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyhcInRlbXBvIHBvc2l0aW9uXCIsIGksIGosIGVsKTtcblx0XHRcdFx0XHRcdHZvaWNlc1tpXS5zcGxpY2UoaiwgMCwge2VsX3R5cGU6IFwidGVtcG9cIiwgcXBtOiB0ZW1wb0NoYW5nZXNbJycrZWwudGltaW5nXS5xcG0sIHRpbWluZzogZWwudGltaW5nfSk7XG5cdFx0XHRcdFx0XHRqICs9MjsgLy8gc2tpcCB0aGUgZWxlbWVudCB3ZSBqdXN0IGluc2VydGVkLlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGNob3JkVm9pY2VPZmZUaGlzQmFyKHZvaWNlcykge1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdm9pY2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgdm9pY2UgPSB2b2ljZXNbaV07XG5cdFx0XHR2YXIgaiA9IHZvaWNlLmxlbmd0aC0xO1xuXHRcdFx0d2hpbGUgKGogPj0gMCAmJiB2b2ljZVtqXS5lbF90eXBlICE9PSAnYmFyJykge1xuXHRcdFx0XHR2b2ljZVtqXS5ub0Nob3JkVm9pY2UgPSB0cnVlO1xuXHRcdFx0XHRqLS07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VHJhY2tUaXRsZShzdGFmZiwgdm9pY2VOdW1iZXIpIHtcblx0XHRpZiAoIXN0YWZmIHx8IHN0YWZmLmxlbmd0aCA8PSB2b2ljZU51bWJlciB8fCAhc3RhZmZbdm9pY2VOdW1iZXJdLnRpdGxlKVxuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHRyZXR1cm4gc3RhZmZbdm9pY2VOdW1iZXJdLnRpdGxlLmpvaW4oXCIgXCIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gaW50ZXJwcmV0VGVtcG8oZWxlbWVudCwgYmVhdExlbmd0aCkge1xuXHRcdHZhciBkdXJhdGlvbiA9IDEvNDtcblx0XHRpZiAoZWxlbWVudC5kdXJhdGlvbikge1xuXHRcdFx0ZHVyYXRpb24gPSBlbGVtZW50LmR1cmF0aW9uWzBdO1xuXHRcdH1cblx0XHR2YXIgYnBtID0gNjA7XG5cdFx0aWYgKGVsZW1lbnQuYnBtKSB7XG5cdFx0XHRicG0gPSBlbGVtZW50LmJwbTtcblx0XHR9XG5cdFx0Ly8gVGhlIHRlbXBvIGlzIGRlZmluZWQgd2l0aCBhIGJlYXQgbGVuZ3RoIG9mIFwiZHVyYXRpb25cIi4gSWYgdGhhdCBpc24ndCB0aGUgbmF0dXJhbCBiZWF0IGxlbmd0aCB0aGVuIHRoZXJlIGlzIGEgdHJhbnNsYXRpb24uXG5cdFx0cmV0dXJuIGR1cmF0aW9uICogYnBtIC8gYmVhdExlbmd0aDtcblx0fVxuXG5cdGZ1bmN0aW9uIGludGVycHJldE1ldGVyKGVsZW1lbnQpIHtcblx0XHR2YXIgbWV0ZXI7XG5cdFx0c3dpdGNoIChlbGVtZW50LnR5cGUpIHtcblx0XHRcdGNhc2UgXCJjb21tb25fdGltZVwiOlxuXHRcdFx0XHRtZXRlciA9IHsgZWxfdHlwZTogJ21ldGVyJywgbnVtOiA0LCBkZW46IDQgfTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiY3V0X3RpbWVcIjpcblx0XHRcdFx0bWV0ZXIgPSB7IGVsX3R5cGU6ICdtZXRlcicsIG51bTogMiwgZGVuOiAyIH07XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcInNwZWNpZmllZFwiOlxuXHRcdFx0XHQvLyBUT0RPLVBFUjogb25seSB0YWtpbmcgdGhlIGZpcnN0IG1ldGVyLCBzbyB0aGUgY29tcGxleCBtZXRlcnMgYXJlIG5vdCBoYW5kbGVkLlxuXHRcdFx0XHRtZXRlciA9IHsgZWxfdHlwZTogJ21ldGVyJywgbnVtOiBlbGVtZW50LnZhbHVlWzBdLm51bSwgZGVuOiBlbGVtZW50LnZhbHVlWzBdLmRlbiB9O1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdC8vIFRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbi5cblx0XHRcdFx0bWV0ZXIgPSB7IGVsX3R5cGU6ICdtZXRlcicgfTtcblx0XHR9XG5cdFx0bWVhc3VyZUxlbmd0aCA9IG1ldGVyLm51bS9tZXRlci5kZW47XG5cdFx0cmV0dXJuIG1ldGVyO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlTmF0dXJhbHMoYWNjaWRlbnRhbHMpIHtcblx0XHR2YXIgYWNjID0gW107XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhY2NpZGVudGFscy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKGFjY2lkZW50YWxzW2ldLmFjYyAhPT0gXCJuYXR1cmFsXCIpXG5cdFx0XHRcdGFjYy5wdXNoKGFjY2lkZW50YWxzW2ldKVxuXHRcdH1cblx0XHRyZXR1cm4gYWNjO1xuXHR9XG5cdGZ1bmN0aW9uIGFkZEtleShhcnIsIGtleSkge1xuXHRcdHZhciBuZXdLZXk7XG5cdFx0aWYgKGtleS5yb290ID09PSAnSFAnKVxuXHRcdFx0bmV3S2V5ID0ge2VsX3R5cGU6ICdrZXknLCBhY2NpZGVudGFsczogW3thY2M6ICduYXR1cmFsJywgbm90ZTogJ2cnfSwge2FjYzogJ3NoYXJwJywgbm90ZTogJ2YnfSwge2FjYzogJ3NoYXJwJywgbm90ZTogJ2MnfV19O1xuXHRcdGVsc2Vcblx0XHRcdG5ld0tleSA9IHtlbF90eXBlOiAna2V5JywgYWNjaWRlbnRhbHM6IHJlbW92ZU5hdHVyYWxzKGtleS5hY2NpZGVudGFscykgfTtcblx0XHRhZGRJZkRpZmZlcmVudChhcnIsIG5ld0tleSk7XG5cdH1cblx0ZnVuY3Rpb24gYWRkTWV0ZXIoYXJyLCBtZXRlcikge1xuXHRcdHZhciBuZXdNZXRlciA9IGludGVycHJldE1ldGVyKG1ldGVyKTtcblx0XHRhZGRJZkRpZmZlcmVudChhcnIsIG5ld01ldGVyKTtcblx0fVxuXHRmdW5jdGlvbiBhZGRJZkRpZmZlcmVudChhcnIsIGl0ZW0pIHtcblx0XHRmb3IgKHZhciBpID0gYXJyLmxlbmd0aC0xOyBpID49IDA7IGktLSkge1xuXHRcdFx0aWYgKGFycltpXS5lbF90eXBlID09PSBpdGVtLmVsX3R5cGUpIHtcblx0XHRcdFx0aWYgKEpTT04uc3RyaW5naWZ5KGFycltpXSkgIT09IEpTT04uc3RyaW5naWZ5KGl0ZW0pKVxuXHRcdFx0XHRcdGFyci5wdXNoKGl0ZW0pO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGFyci5wdXNoKGl0ZW0pO1xuXHR9XG5cbn0pKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gc2VxdWVuY2U7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/abc_midi_sequencer.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/active-audio-context.js":
/*!**************************************************************!*\
  !*** ./node_modules/abcjs/src/synth/active-audio-context.js ***!
  \**************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var registerAudioContext = __webpack_require__(/*! ./register-audio-context.js */ \"(ssr)/./node_modules/abcjs/src/synth/register-audio-context.js\");\n\nfunction activeAudioContext() {\n\tif (!window.abcjsAudioContext)\n\t\tregisterAudioContext();\n\treturn window.abcjsAudioContext;\n}\n\nmodule.exports = activeAudioContext;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2FjdGl2ZS1hdWRpby1jb250ZXh0LmpzIiwibWFwcGluZ3MiOiJBQUFBLDJCQUEyQixtQkFBTyxDQUFDLG1HQUE2Qjs7QUFFaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy9zeW50aC9hY3RpdmUtYXVkaW8tY29udGV4dC5qcz9kYTBlIl0sInNvdXJjZXNDb250ZW50IjpbInZhciByZWdpc3RlckF1ZGlvQ29udGV4dCA9IHJlcXVpcmUoJy4vcmVnaXN0ZXItYXVkaW8tY29udGV4dC5qcycpO1xuXG5mdW5jdGlvbiBhY3RpdmVBdWRpb0NvbnRleHQoKSB7XG5cdGlmICghd2luZG93LmFiY2pzQXVkaW9Db250ZXh0KVxuXHRcdHJlZ2lzdGVyQXVkaW9Db250ZXh0KCk7XG5cdHJldHVybiB3aW5kb3cuYWJjanNBdWRpb0NvbnRleHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYWN0aXZlQXVkaW9Db250ZXh0O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/active-audio-context.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/cents-to-factor.js":
/*!*********************************************************!*\
  !*** ./node_modules/abcjs/src/synth/cents-to-factor.js ***!
  \*********************************************************/
/***/ ((module) => {

eval("// This turns the number of cents to detune into a value that is convenient to use in pitch calculations\n// A cent is 1/100 of a musical half step and is calculated exponentially over the course of an octave.\n// The equation is:\n// Two to the power of cents divided by 1200\n\nfunction centsToFactor(cents) {\n\treturn Math.pow(2, cents/1200);\n}\n\nmodule.exports = centsToFactor;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2NlbnRzLXRvLWZhY3Rvci5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvc3ludGgvY2VudHMtdG8tZmFjdG9yLmpzPzcwYWMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyB0dXJucyB0aGUgbnVtYmVyIG9mIGNlbnRzIHRvIGRldHVuZSBpbnRvIGEgdmFsdWUgdGhhdCBpcyBjb252ZW5pZW50IHRvIHVzZSBpbiBwaXRjaCBjYWxjdWxhdGlvbnNcbi8vIEEgY2VudCBpcyAxLzEwMCBvZiBhIG11c2ljYWwgaGFsZiBzdGVwIGFuZCBpcyBjYWxjdWxhdGVkIGV4cG9uZW50aWFsbHkgb3ZlciB0aGUgY291cnNlIG9mIGFuIG9jdGF2ZS5cbi8vIFRoZSBlcXVhdGlvbiBpczpcbi8vIFR3byB0byB0aGUgcG93ZXIgb2YgY2VudHMgZGl2aWRlZCBieSAxMjAwXG5cbmZ1bmN0aW9uIGNlbnRzVG9GYWN0b3IoY2VudHMpIHtcblx0cmV0dXJuIE1hdGgucG93KDIsIGNlbnRzLzEyMDApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNlbnRzVG9GYWN0b3I7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/cents-to-factor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/chord-track.js":
/*!*****************************************************!*\
  !*** ./node_modules/abcjs/src/synth/chord-track.js ***!
  \*****************************************************/
/***/ ((module) => {

eval("//\n// The algorithm for chords is:\n// - The chords are done in a separate track.\n// - If there are notes before the first chord, then put that much silence to start the track.\n// - The pattern of chord expression depends on the meter, and how many chords are in a measure.\n// - There is a possibility that a measure will have an incorrect number of beats, if that is the case, then\n// start the pattern anew on the next measure number.\n// - If a chord root is not A-G, then ignore it as if the chord wasn't there at all.\n// - If a chord modification isn't in our supported list, change it to a major triad.\n//\n// - There is a standard pattern of boom-chick for each time sig, or it can be overridden.\n// - For any unrecognized meter, play the full chord on each beat.\n//\n//\t- If there is a chord specified that is not on a beat, move it earlier to the previous beat, unless there is already a chord on that beat.\n//\t- Otherwise, move it later, unless there is already a chord on that beat.\n// \t- Otherwise, ignore it. (TODO-PER: expand this as more support is added.)\n//\n// If there is any note in the melody that has a rhythm head, then assume the melody controls the rhythm, so there is no chord added for that entire measure.\n\nvar ChordTrack = function ChordTrack(numVoices, chordsOff, midiOptions, meter) {\n\tthis.chordTrack = [];\n\tthis.chordTrackFinished = false;\n\tthis.chordChannel = numVoices; // first free channel for chords\n\tthis.currentChords = [];\n\tthis.lastChord;\n\tthis.chordLastBar;\n\tthis.chordsOff = !!chordsOff\n\tthis.gChordTacet = this.chordsOff;\n\tthis.hasRhythmHead = false;\n\tthis.transpose = 0;\n\tthis.lastBarTime = 0;\n\tthis.meter = meter;\n\tthis.tempoChangeFactor = 1;\n\n\t// MAE 17 Jun 2024 - To allow for bass and chord instrument octave shifts\n\tthis.bassInstrument = midiOptions.bassprog && midiOptions.bassprog.length >= 1 ? midiOptions.bassprog[0] : 0;\n\tthis.chordInstrument = midiOptions.chordprog && midiOptions.chordprog.length >= 1 ? midiOptions.chordprog[0] : 0;\n\n\t// MAE For octave shifted bass and chords\n\tthis.bassOctaveShift = midiOptions.bassprog && midiOptions.bassprog.length === 2 ? midiOptions.bassprog[1] : 0;\n\tthis.chordOctaveShift = midiOptions.chordprog && midiOptions.chordprog.length === 2 ? midiOptions.chordprog[1] : 0;\n\n\tthis.boomVolume = midiOptions.bassvol && midiOptions.bassvol.length === 1 ? midiOptions.bassvol[0] : 64;\n\tthis.chickVolume = midiOptions.chordvol && midiOptions.chordvol.length === 1 ? midiOptions.chordvol[0] : 48;\n\n\t// This allows for an initial %%MIDI gchord with no string\n\tif (midiOptions.gchord && (midiOptions.gchord.length > 0)) {\n\t\tthis.overridePattern = parseGChord(midiOptions.gchord[0])\n\t}\n\telse {\n\t\tthis.overridePattern = undefined;\n\t}\n};\n\nChordTrack.prototype.setMeter = function (meter) {\n\tthis.meter = meter\n};\n\nChordTrack.prototype.setTempoChangeFactor = function (tempoChangeFactor) {\n\tthis.tempoChangeFactor = tempoChangeFactor\n};\n\nChordTrack.prototype.setLastBarTime = function (lastBarTime) {\n\tthis.lastBarTime = lastBarTime\n};\n\nChordTrack.prototype.setTranspose = function (transpose) {\n\tthis.transpose = transpose\n};\n\nChordTrack.prototype.setRhythmHead = function (isRhythmHead, elem) {\n\tthis.hasRhythmHead = isRhythmHead\n\tvar ePitches = [];\n\tif (isRhythmHead) {\n\t\tif (this.lastChord && this.lastChord.chick) {\n\t\t\tfor (var i2 = 0; i2 < this.lastChord.chick.length; i2++) {\n\t\t\t\tvar note2 = Object.assign({},elem.pitches[0]);\n\t\t\t\tnote2.actualPitch = this.lastChord.chick[i2];\n\t\t\t\tePitches.push(note2);\n\t\t\t}\n\t\t}\n\t}\n\treturn ePitches\n};\n\nChordTrack.prototype.barEnd = function (element) {\n\tif (this.chordTrack.length > 0 && !this.chordTrackFinished) {\n\t\tthis.resolveChords(this.lastBarTime, timeToRealTime(element.time));\n\t\tthis.currentChords = [];\n\t}\n\tthis.chordLastBar = this.lastChord;\n};\n\nChordTrack.prototype.gChordOn = function (element) {\n\tif (!this.chordsOff)\n\t\tthis.gChordTacet = element.tacet;\n};\n\nChordTrack.prototype.paramChange = function (element) {\n\tswitch (element.el_type) {\n\t\tcase \"gchord\":\n\t\t\t// Skips gchord elements that don't have pattern strings\n\t\t\tif (element.param && element.param.length > 0) {\n\t\t\t\tthis.overridePattern = parseGChord(element.param);\n\n\t\t\t\t// Generate a default duration scale based on the pattern\n\t\t\t\t//this.gchordduration = generateDefaultDurationScale(element.param);\n\t\t\t} else\n\t\t\t\tthis.overridePattern = undefined;\n\t\t\tbreak;\n\t\tcase \"bassprog\":\n\t\t\tthis.bassInstrument = element.value;\n\t\t\tif ((element.octaveShift != undefined) && (element.octaveShift != null)) {\n\t\t\t\tthis.bassOctaveShift = element.octaveShift;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.bassOctaveShift = 0;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"chordprog\":\n\t\t\tthis.chordInstrument = element.value;\n\t\t\tif ((element.octaveShift != undefined) && (element.octaveShift != null)) {\n\t\t\t\tthis.chordOctaveShift = element.octaveShift;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.chordOctaveShift = 0;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"bassvol\":\n\t\t\tthis.boomVolume = element.param;\n\t\t\tbreak;\n\t\tcase \"chordvol\":\n\t\t\tthis.chickVolume = element.param;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tconsole.log(\"unhandled midi param\", element)\t\n\t}\n};\n\nChordTrack.prototype.finish = function () {\n\tif (!this.chordTrackEmpty()) // Don't do chords on more than one track, so turn off chord detection after we create it.\n\t\tthis.chordTrackFinished = true;\n};\n\nChordTrack.prototype.addTrack = function (tracks) {\n\tif (!this.chordTrackEmpty())\n\t\ttracks.push(this.chordTrack);\n};\n\nChordTrack.prototype.findChord = function (elem) {\n\tif (this.gChordTacet)\n\t\treturn 'break';\n\n\t// TODO-PER: Just using the first chord if there are more than one.\n\tif (this.chordTrackFinished || !elem.chord || elem.chord.length === 0)\n\t\treturn null;\n\n\t// Return the first annotation that is a regular chord: that is, it is in the default place or is a recognized \"tacet\" phrase.\n\tfor (var i = 0; i < elem.chord.length; i++) {\n\t\tvar ch = elem.chord[i];\n\t\tif (ch.position === 'default')\n\t\t\treturn ch.name;\n\t\tif (this.breakSynonyms.indexOf(ch.name.toLowerCase()) >= 0)\n\t\t\treturn 'break';\n\t}\n\treturn null;\n}\n\nChordTrack.prototype.interpretChord = function (name) {\n\t// chords have the format:\n\t// [root][acc][modifier][/][bass][acc]\n\t// (The chord might be surrounded by parens. Just ignore them.)\n\t// root must be present and must be from A-G.\n\t// acc is optional and can be # or b\n\t// The modifier can be a wide variety of things, like \"maj7\". As they are discovered, more are supported here.\n\t// If there is a slash, then there is a bass note, which can be from A-G, with an optional acc.\n\t// If the root is unrecognized, then \"undefined\" is returned and there is no chord.\n\t// If the modifier is unrecognized, a major triad is returned.\n\t// If the bass notes is unrecognized, it is ignored.\n\tif (name.length === 0)\n\t\treturn undefined;\n\tif (name === 'break')\n\t\treturn { chick: [] };\n\tvar root = name.substring(0, 1);\n\tif (root === '(') {\n\t\tname = name.substring(1, name.length - 1);\n\t\tif (name.length === 0)\n\t\t\treturn undefined;\n\t\troot = name.substring(0, 1);\n\t}\n\tvar bass = this.basses[root];\n\tif (!bass)\t// If the bass note isn't listed, then this was an unknown root. Only A-G are accepted.\n\t\treturn undefined;\n\t// Don't transpose the chords more than an octave.\n\tvar chordTranspose = this.transpose;\n\twhile (chordTranspose < -8)\n\t\tchordTranspose += 12;\n\twhile (chordTranspose > 8)\n\t\tchordTranspose -= 12;\n\tbass += chordTranspose;\n\t\n    \t// MAE 31 Aug 2024 - For visual transpose backup range issue\n    \t// If transposed below A or above G, bring it back in the normal backup range\n    \tif (bass < 33){\n      \t\tbass += 12;\n    \t}\n    \telse if (bass > 44){\n\t     \t bass -= 12;\n    \t}\n\n\t// MAE 17 Jun 2024 - Supporting octave shifted bass and chords\n\tvar unshiftedBass = bass;\n\n\tbass += this.bassOctaveShift * 12;\n\n\tvar bass2 = bass - 5;\t// The alternating bass is a 4th below\n\tvar chick;\n\tif (name.length === 1)\n\t\tchick = this.chordNotes(bass, '');\n\tvar remaining = name.substring(1);\n\tvar acc = remaining.substring(0, 1);\n\tif (acc === 'b' || acc === '') {\n\t\tunshiftedBass--;\n\t\tbass--;\n\t\tbass2--;\n\t\tremaining = remaining.substring(1);\n\t} else if (acc === '#' || acc === '') {\n\t\tunshiftedBass++;\n\t\tbass++;\n\t\tbass2++;\n\t\tremaining = remaining.substring(1);\n\t}\n\tvar arr = remaining.split('/');\n\tchick = this.chordNotes(unshiftedBass, arr[0]);\n\t// If the 5th is altered then the bass is altered. Normally the bass is 7 from the root, so adjust if it isn't.\n\tif (chick.length >= 3) {\n\t\tvar fifth = chick[2] - chick[0];\n\t\tbass2 = bass2 + fifth - 7;\n\t}\n\n\tif (arr.length === 2) {\n\t\tvar explicitBass = this.basses[arr[1].substring(0, 1)];\n\t\tif (explicitBass) {\n\t\t\tvar bassAcc = arr[1].substring(1);\n\t\t\tvar bassShift = { '#': 1, '': 1, 'b': -1, '': -1 }[bassAcc] || 0;\n\t\t\tbass = this.basses[arr[1].substring(0, 1)] + bassShift + chordTranspose;\n\n\t\t\t// MAE 22 May 2024 - Supporting octave shifted bass and chords\n\t\t\tbass += this.bassOctaveShift * 12;\n\n\t\t\tbass2 = bass;\n\t\t}\n\t}\n\treturn { boom: bass, boom2: bass2, chick: chick };\n}\n\nChordTrack.prototype.chordNotes = function (bass, modifier) {\n\tvar intervals = this.chordIntervals[modifier];\n\tif (!intervals) {\n\t\tif (modifier.slice(0, 2).toLowerCase() === 'ma' || modifier[0] === 'M')\n\t\t\tintervals = this.chordIntervals.M;\n\t\telse if (modifier[0] === 'm' || modifier[0] === '-')\n\t\t\tintervals = this.chordIntervals.m;\n\t\telse\n\t\t\tintervals = this.chordIntervals.M;\n\t}\n\tbass += 12;\t// the chord is an octave above the bass note.\n\n\t// MAE 22 May 2024 - For chick octave shift\n\tbass += (this.chordOctaveShift * 12);\n\n\tvar notes = [];\n\tfor (var i = 0; i < intervals.length; i++) {\n\t\tnotes.push(bass + intervals[i]);\n\t}\n\treturn notes;\n}\n\nChordTrack.prototype.writeNote = function (note, beatLength, volume, beat, noteLength, instrument) {\n\t// undefined means there is a stop time.\n\tif (note !== undefined)\n\t\tthis.chordTrack.push({ cmd: 'note', pitch: note, volume: volume, start: this.lastBarTime + beat * durationRounded(beatLength, this.tempoChangeFactor), duration: durationRounded(noteLength, this.tempoChangeFactor), gap: 0, instrument: instrument });\n}\n\nChordTrack.prototype.chordTrackEmpty = function () {\n\tvar isEmpty = true;\n\tfor (var i = 0; i < this.chordTrack.length && isEmpty; i++) {\n\t\tif (this.chordTrack[i].cmd === 'note')\n\t\t\tisEmpty = false\n\t}\n\treturn isEmpty;\n}\n\nChordTrack.prototype.resolveChords = function (startTime, endTime) {\n\t// If there is a rhythm head anywhere in the measure then don't add a separate rhythm track\n\tif (this.hasRhythmHead)\n\t\treturn\n\n\tvar num = this.meter.num;\n\tvar den = this.meter.den;\n\tvar beatLength = 1 / den;\n\tvar noteLength = beatLength / 2;\n\tvar thisMeasureLength = parseInt(num, 10) / parseInt(den, 10);\n\tvar portionOfAMeasure = thisMeasureLength - (endTime - startTime) / this.tempoChangeFactor;\n\tif (Math.abs(portionOfAMeasure) < 0.00001)\n\t\tportionOfAMeasure = 0;\n\n\t // there wasn't a new chord this measure, so use the last chord declared.\n\t // also the case where there is a chord declared in the measure, but not on its first beat.\n\tif (this.currentChords.length === 0 || this.currentChords[0].beat !== 0) {\n\t\tthis.currentChords.unshift({ beat: 0, chord: this.chordLastBar });\n\t}\n\n\t//console.log(this.currentChords)\n\tvar currentChordsExpanded = expandCurrentChords(this.currentChords, 8*num/den, beatLength)\n\t//console.log(currentChordsExpanded)\n\tvar thisPattern = this.overridePattern ? this.overridePattern : this.rhythmPatterns[num + '/' + den]\n\tif (portionOfAMeasure) {\n\t\tthisPattern = [];\n\t\tvar beatsPresent = ((endTime - startTime) / this.tempoChangeFactor) * 8;\n\t\tfor (var p = 0; p < beatsPresent/2; p += 2) {\n\t\t\tthisPattern.push(\"chick\");\n\t\t\tthisPattern.push(\"\");\n\t\t}\n\t}\n\tif (!thisPattern) {\n\t\tthisPattern = []\n\t\tfor (var p = 0; p < (8*num/den)/2; p++) {\n\t\t\tthisPattern.push('chick')\n\t\t\tthisPattern.push(\"\");\n\t\t}\n\t}\n\tvar firstBoom = true\n\t// If the pattern is overridden, it might be longer than the length of a measure. If so, then ignore the rest of it\n\tvar minLength = Math.min(thisPattern.length, currentChordsExpanded.length)\n\tfor (var p = 0; p < minLength; p++) {\n\t\tif (p > 0 && currentChordsExpanded[p-1] && currentChordsExpanded[p] && currentChordsExpanded[p-1].boom !== currentChordsExpanded[p].boom)\n\t\t\tfirstBoom = true\n\t\tvar type = thisPattern[p]\n\t\tvar isBoom = type.indexOf('boom') >= 0\n\t\t// If we changed chords at a time when we're not expecting a bass note, then add an extra bass note in if the first thing in the pattern is a bass note.\n\t\tvar newBass = !isBoom &&\n\t\t\tp !== 0 &&\n\t\t\tthisPattern[0].indexOf('boom') >= 0 &&\n\t\t\t(!currentChordsExpanded[p-1] || currentChordsExpanded[p-1].boom !== currentChordsExpanded[p].boom)\n\t\tvar pitches = resolvePitch(currentChordsExpanded[p], type, firstBoom, newBass)\n\t\tif (isBoom)\n\t\t\tfirstBoom = false\n\t\tfor (var oo = 0; oo < pitches.length; oo++) {\n\t\t\tthis.writeNote(pitches[oo], \n\t\t\t\t0.125,\n\t\t\t\tisBoom || newBass ? this.boomVolume : this.chickVolume,\n\t\t\t\tp,\n\t\t\t\tnoteLength,\n\t\t\t\tisBoom || newBass ? this.bassInstrument : this.chordInstrument\n\t\t\t)\n\t\t\tif (newBass)\n\t\t\t\tnewBass = false\n\t\t\telse\n\t\t\t\tisBoom = false // only the first note in a chord is a bass note. This handles the case where bass and chord are played at the same time.\n\t\t}\n\t}\n\treturn\n}\n\nChordTrack.prototype.processChord = function (elem) {\n\tif (this.chordTrackFinished)\n\t\treturn\n\tvar chord = this.findChord(elem);\n\tif (chord) {\n\t\tvar c = this.interpretChord(chord);\n\t\t// If this isn't a recognized chord, just completely ignore it.\n\t\tif (c) {\n\t\t\t// If we ever have a chord in this voice, then we add the chord track.\n\t\t\t// However, if there are chords on more than one voice, then just use the first voice.\n\t\t\tif (this.chordTrack.length === 0) {\n\t\t\t\tthis.chordTrack.push({ cmd: 'program', channel: this.chordChannel, instrument: this.chordInstrument });\n\t\t\t}\n\n\t\t\tthis.lastChord = c;\n\t\t\tvar barBeat = calcBeat(this.lastBarTime, timeToRealTime(elem.time));\n\t\t\tthis.currentChords.push({ chord: this.lastChord, beat: barBeat, start: timeToRealTime(elem.time) });\n\t\t}\n\t}\n}\n\nfunction resolvePitch(currentChord, type, firstBoom, newBass) {\n\tvar ret = []\n\tif (!currentChord)\n\t\treturn ret\n\tif (type.indexOf('boom') >= 0)\n\t\tret.push(firstBoom ? currentChord.boom : currentChord.boom2)\n\telse if (newBass)\n\t\tret.push(currentChord.boom)\n\tvar numChordNotes = currentChord.chick.length\n\tif (type.indexOf('chick') >= 0) {\n\t\tfor (var i = 0; i < numChordNotes; i++)\n\t\t\tret.push(currentChord.chick[i])\n\t}\n\tswitch (type) {\n\t\tcase 'DO': ret.push(currentChord.chick[0]); break;\n\t\tcase 'MI': ret.push(currentChord.chick[1]); break;\n\t\tcase 'SOL': ret.push(extractNote(currentChord,2)); break;\n\t\tcase 'TI': ret.push(extractNote(currentChord,3)); break;\n\t\tcase 'TOP': ret.push(extractNote(currentChord,4)); break;\n\t\tcase 'do': ret.push(currentChord.chick[0]+12); break;\n\t\tcase 'mi': ret.push(currentChord.chick[1]+12); break;\n\t\tcase 'sol': ret.push(extractNote(currentChord,2)+12); break;\n\t\tcase 'ti': ret.push(extractNote(currentChord,3)+12); break;\n\t\tcase 'top': ret.push(extractNote(currentChord,4)+12); break;\n\t}\n\treturn ret\n}\n\nfunction extractNote(chord, index) {\n\t// This creates an arpeggio note no matter how many notes are in the chord - if it runs out of notes it continues in the next octave\n\tvar octave = Math.floor(index / chord.chick.length)\n\tvar note = chord.chick[index % chord.chick.length]\n\t//console.log(chord.chick, {index, octave, note}, index % chord.chick.length)\n\treturn note + octave * 12\n}\n\nfunction parseGChord(gchord) {\n\t// TODO-PER: The spec is more complicated than this but for now this will not try to do anything with error cases like the wrong number of beats.\n\tvar pattern = []\n\tfor (var i = 0; i < gchord.length; i++) {\n\t\tvar ch = gchord[i]\n\t\tswitch(ch) {\n\t\t\tcase 'z' : pattern.push(''); break;\n\t\t\tcase '2' : pattern.push(''); break; // TODO-PER: This should extend the last note, but that's a small effect\n\t\t\tcase 'c' : pattern.push('chick'); break;\n\t\t\tcase 'b' : pattern.push('boom&chick'); break;\n\t\t\tcase 'f' : pattern.push('boom'); break;\n\t\t\tcase 'G' : pattern.push('DO'); break;\n\t\t\tcase 'H' : pattern.push('MI'); break;\n\t\t\tcase 'I' : pattern.push('SOL'); break;\n\t\t\tcase 'J' : pattern.push('TI'); break;\n\t\t\tcase 'K' : pattern.push('TOP'); break;\n\t\t\tcase 'g' : pattern.push('do'); break;\n\t\t\tcase 'h' : pattern.push('mi'); break;\n\t\t\tcase 'i' : pattern.push('sol'); break;\n\t\t\tcase 'j' : pattern.push('ti'); break;\n\t\t\tcase 'k' : pattern.push('top'); break;\n\t\t}\n\t}\n\treturn pattern\n}\n\n// This returns an array that has a chord for each 1/8th note position in the current measure\nfunction expandCurrentChords(currentChords, num8thNotes, beatLength) {\n\tbeatLength = beatLength * 8 // this is expressed as a fraction, so that 0.25 is a quarter notes. We want it to be the number of 8th notes\n\tvar chords = []\n\tif (currentChords.length === 0)\n\t\treturn chords\n\n\tvar currentChord = currentChords[0].chord\n\tfor (var i = 1; i < currentChords.length; i++) {\n\t\tvar current = currentChords[i]\n\t\twhile (chords.length < current.beat) {\n\t\t\tchords.push(currentChord)\n\t\t}\n\t\tcurrentChord = current.chord\n\t}\n\twhile (chords.length < num8thNotes)\n\t\tchords.push(currentChord)\n\treturn chords\n}\n\nfunction calcBeat(measureStart, currTime) {\n\tvar distanceFromStart = currTime - measureStart;\n\treturn distanceFromStart * 8;\n}\n\nChordTrack.prototype.breakSynonyms = ['break', '(break)', 'no chord', 'n.c.', 'tacet'];\n\nChordTrack.prototype.basses = {\n\t'A': 33, 'B': 35, 'C': 36, 'D': 38, 'E': 40, 'F': 41, 'G': 43\n};\n\nChordTrack.prototype.chordIntervals = {\n\t// diminished (all flat 5 chords)\n\t'dim': [0, 3, 6],\n\t'': [0, 3, 6],\n\t'': [0, 3, 6],\n\n\t'dim7': [0, 3, 6, 9],\n\t'7': [0, 3, 6, 9],\n\t'7': [0, 3, 6, 9],\n\n\t'7': [0, 3, 6, 10],\n\t'm7(b5)': [0, 3, 6, 10],\n\t'm7b5': [0, 3, 6, 10],\n\t'm75': [0, 3, 6, 10],\n\t'-7(b5)': [0, 3, 6, 10],\n\t'-7b5': [0, 3, 6, 10],\n\n\t'7b5': [0, 4, 6, 10],\n\t'7(b5)': [0, 4, 6, 10],\n\t'75': [0, 4, 6, 10],\n\n\t'7(b9,b5)': [0, 4, 6, 10, 13],\n\t'7b9,b5': [0, 4, 6, 10, 13],\n\t'7(#9,b5)': [0, 4, 6, 10, 15],\n\t'7#9b5': [0, 4, 6, 10, 15],\n\t'maj7(b5)': [0, 4, 6, 11],\n\t'maj7b5': [0, 4, 6, 11],\n\t'13(b5)': [0, 4, 6, 10, 14, 21],\n\t'13b5': [0, 4, 6, 10, 14, 21],\n\n\t// minor (all normal 5, minor 3 chords)\n\t'm': [0, 3, 7],\n\t'-': [0, 3, 7],\n\t'm6': [0, 3, 7, 9],\n\t'-6': [0, 3, 7, 9],\n\t'm7': [0, 3, 7, 10],\n\t'-7': [0, 3, 7, 10],\n\n\t'-(b6)': [0, 3, 7, 8],\n\t'-b6': [0, 3, 7, 8],\n\t'-6/9': [0, 3, 7, 9, 14],\n\t'-7(b9)': [0, 3, 7, 10, 13],\n\t'-7b9': [0, 3, 7, 10, 13],\n\t'-maj7': [0, 3, 7, 11],\n\t'-9+7': [0, 3, 7, 11, 13],\n\t'-11': [0, 3, 7, 11, 14, 17],\n\t'm11': [0, 3, 7, 11, 14, 17],\n\t'-maj9': [0, 3, 7, 11, 14],\n\t'-9': [0, 3, 7, 11, 14],\n\t'mM9': [0, 3, 7, 11, 14],\n\n\t// major (all normal 5, major 3 chords)\n\t'M': [0, 4, 7],\n\t'6': [0, 4, 7, 9],\n\t'6/9': [0, 4, 7, 9, 14],\n\t'6add9': [0, 4, 7, 9, 14],\n\t'69': [0, 4, 7, 9, 14],\n\n\t'7': [0, 4, 7, 10],\n\t'9': [0, 4, 7, 10, 14],\n\t'11': [0, 7, 10, 14, 17],\n\t'13': [0, 4, 7, 10, 14, 21],\n\t'7b9': [0, 4, 7, 10, 13],\n\t'79': [0, 4, 7, 10, 13],\n\t'7(b9)': [0, 4, 7, 10, 13],\n\t'7(#9)': [0, 4, 7, 10, 15],\n\t'7#9': [0, 4, 7, 10, 15],\n\t'(13)': [0, 4, 7, 10, 14, 21],\n\t'7(9,13)': [0, 4, 7, 10, 14, 21],\n\t'7(#9,b13)': [0, 4, 7, 10, 15, 20],\n\t'7(#11)': [0, 4, 7, 10, 14, 18],\n\t'7#11': [0, 4, 7, 10, 14, 18],\n\t'7(b13)': [0, 4, 7, 10, 20],\n\t'7b13': [0, 4, 7, 10, 20],\n\t'9(#11)': [0, 4, 7, 10, 14, 18],\n\t'9#11': [0, 4, 7, 10, 14, 18],\n\t'13(#11)': [0, 4, 7, 10, 18, 21],\n\t'13#11': [0, 4, 7, 10, 18, 21],\n\n\t'maj7': [0, 4, 7, 11],\n\t'7': [0, 4, 7, 11],\n\t'7': [0, 4, 7, 11],\n\t'maj9': [0, 4, 7, 11, 14],\n\t'maj7(9)': [0, 4, 7, 11, 14],\n\t'maj7(11)': [0, 4, 7, 11, 17],\n\t'maj7(#11)': [0, 4, 7, 11, 18],\n\t'maj7(13)': [0, 4, 7, 14, 21],\n\t'maj7(9,13)': [0, 4, 7, 11, 14, 21],\n\n\t'7sus4': [0, 5, 7, 10],\n\t'm7sus4': [0, 3, 7, 10, 17],\n\t'sus4': [0, 5, 7],\n\t'sus2': [0, 2, 7],\n\t'7sus2': [0, 2, 7, 10],\n\t'9sus4': [0, 5, 7, 10, 14],\n\t'13sus4': [0, 5, 7, 10, 14, 21],\n\n\t// augmented (all sharp 5 chords)\n\t'aug7': [0, 4, 8, 10],\n\t'+7': [0, 4, 8, 10],\n\t'+': [0, 4, 8],\n\t'7#5': [0, 4, 8, 10],\n\t'75': [0, 4, 8, 10],\n\t'7+5': [0, 4, 8, 10],\n\t'9#5': [0, 4, 8, 10, 14],\n\t'95': [0, 4, 8, 10, 14],\n\t'9+5': [0, 4, 8, 10, 14],\n\t'-7(#5)': [0, 3, 8, 10],\n\t'-7#5': [0, 3, 8, 10],\n\t'7(#5)': [0, 4, 8, 10],\n\t'7(b9,#5)': [0, 4, 8, 10, 13],\n\t'7b9#5': [0, 4, 8, 10, 13],\n\t'maj7(#5)': [0, 4, 8, 11],\n\t'maj7#5': [0, 4, 8, 11],\n\t'maj7(#5,#11)': [0, 4, 8, 11, 18],\n\t'maj7#5#11': [0, 4, 8, 11, 18],\n\t'9(#5)': [0, 4, 8, 10, 14],\n\t'13(#5)': [0, 4, 8, 10, 14, 21],\n\t'13#5': [0, 4, 8, 10, 14, 21],\n\t// MAE Power chords added 10 April 2024\n\t'5': [0, 7],\n\t'5(8)': [0, 7, 12],\n\t'5add8': [0, 7, 12]\n\n};\n\nChordTrack.prototype.rhythmPatterns = {\n\t\"2/2\": ['boom', '', '', '', 'chick', '', '', ''],\n\t\"3/2\": ['boom', '', '', '', 'chick', '', '', '', 'chick', '', '', ''],\n\t\"4/2\": ['boom', '', '', '', 'chick', '', '', '', 'boom', '', '', '', 'chick', '', '', ''],\n\n\t\"2/4\": ['boom', '', 'chick', ''],\n\t\"3/4\": ['boom', '', 'chick', '', 'chick', ''],\n\t\"4/4\": ['boom', '', 'chick', '', 'boom', '', 'chick', ''],\n\t\"5/4\": ['boom', '', 'chick', '', 'chick', '', 'boom', '', 'chick', ''],\n\t\"6/4\": ['boom', '', 'chick', '', 'boom', '', 'chick', '', 'boom', '', 'chick', ''],\n\n\t\"3/8\": ['boom', '', 'chick'],\n\t\"5/8\": ['boom', 'chick', 'chick', 'boom', 'chick'],\n\t\"6/8\": ['boom', '', 'chick', 'boom', '', 'chick'],\n\t\"7/8\": ['boom', 'chick', 'chick', 'boom', 'chick', 'boom', 'chick'],\n\t\"9/8\": ['boom', '', 'chick', 'boom', '', 'chick', 'boom', '', 'chick'],\n\t\"10/8\": ['boom', 'chick', 'chick', 'boom', 'chick', 'chick', 'boom', 'chick', 'boom', 'chick'],\n\t\"11/8\": ['boom', 'chick', 'chick', 'boom', 'chick', 'chick', 'boom', 'chick', 'boom', 'chick', 'chick'],\n\t\"12/8\": ['boom', '', 'chick', 'boom', '', 'chick', 'boom', '', 'chick', 'boom', '', 'chick'],\n};\n\n// TODO-PER: these are repeated in flattener. Can it be shared?\n\nfunction timeToRealTime(time) {\n\treturn time / 1000000;\n}\n\nfunction durationRounded(duration, tempoChangeFactor) {\n\treturn Math.round(duration * tempoChangeFactor * 1000000) / 1000000;\n}\n\nmodule.exports = ChordTrack;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2Nob3JkLXRyYWNrLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0NBQWtDO0FBQ3RELGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQix1QkFBdUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGtDQUFrQztBQUN2RDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLCtOQUErTjtBQUN4UDs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLHVDQUF1QztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG1DQUFtQztBQUNsRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvQkFBb0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG1CQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixlQUFlO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixxQkFBcUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsOEVBQThFO0FBQ3pHOztBQUVBO0FBQ0E7QUFDQSw2QkFBNkIsd0VBQXdFO0FBQ3JHO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixtQkFBbUI7QUFDckM7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDLDhDQUE4QztBQUM5QyxxREFBcUQ7QUFDckQsb0RBQW9EO0FBQ3BELHFEQUFxRDtBQUNyRCxpREFBaUQ7QUFDakQsaURBQWlEO0FBQ2pELHdEQUF3RDtBQUN4RCx1REFBdUQ7QUFDdkQsd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixvQkFBb0I7QUFDakQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEMsZ0NBQWdDLE9BQU87QUFDdkMscUNBQXFDO0FBQ3JDLDBDQUEwQztBQUMxQyxvQ0FBb0M7QUFDcEMsa0NBQWtDO0FBQ2xDLGtDQUFrQztBQUNsQyxtQ0FBbUM7QUFDbkMsa0NBQWtDO0FBQ2xDLG1DQUFtQztBQUNuQyxrQ0FBa0M7QUFDbEMsa0NBQWtDO0FBQ2xDLG1DQUFtQztBQUNuQyxrQ0FBa0M7QUFDbEMsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQiwwQkFBMEI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy9zeW50aC9jaG9yZC10cmFjay5qcz9lNjhiIl0sInNvdXJjZXNDb250ZW50IjpbIi8vXG4vLyBUaGUgYWxnb3JpdGhtIGZvciBjaG9yZHMgaXM6XG4vLyAtIFRoZSBjaG9yZHMgYXJlIGRvbmUgaW4gYSBzZXBhcmF0ZSB0cmFjay5cbi8vIC0gSWYgdGhlcmUgYXJlIG5vdGVzIGJlZm9yZSB0aGUgZmlyc3QgY2hvcmQsIHRoZW4gcHV0IHRoYXQgbXVjaCBzaWxlbmNlIHRvIHN0YXJ0IHRoZSB0cmFjay5cbi8vIC0gVGhlIHBhdHRlcm4gb2YgY2hvcmQgZXhwcmVzc2lvbiBkZXBlbmRzIG9uIHRoZSBtZXRlciwgYW5kIGhvdyBtYW55IGNob3JkcyBhcmUgaW4gYSBtZWFzdXJlLlxuLy8gLSBUaGVyZSBpcyBhIHBvc3NpYmlsaXR5IHRoYXQgYSBtZWFzdXJlIHdpbGwgaGF2ZSBhbiBpbmNvcnJlY3QgbnVtYmVyIG9mIGJlYXRzLCBpZiB0aGF0IGlzIHRoZSBjYXNlLCB0aGVuXG4vLyBzdGFydCB0aGUgcGF0dGVybiBhbmV3IG9uIHRoZSBuZXh0IG1lYXN1cmUgbnVtYmVyLlxuLy8gLSBJZiBhIGNob3JkIHJvb3QgaXMgbm90IEEtRywgdGhlbiBpZ25vcmUgaXQgYXMgaWYgdGhlIGNob3JkIHdhc24ndCB0aGVyZSBhdCBhbGwuXG4vLyAtIElmIGEgY2hvcmQgbW9kaWZpY2F0aW9uIGlzbid0IGluIG91ciBzdXBwb3J0ZWQgbGlzdCwgY2hhbmdlIGl0IHRvIGEgbWFqb3IgdHJpYWQuXG4vL1xuLy8gLSBUaGVyZSBpcyBhIHN0YW5kYXJkIHBhdHRlcm4gb2YgYm9vbS1jaGljayBmb3IgZWFjaCB0aW1lIHNpZywgb3IgaXQgY2FuIGJlIG92ZXJyaWRkZW4uXG4vLyAtIEZvciBhbnkgdW5yZWNvZ25pemVkIG1ldGVyLCBwbGF5IHRoZSBmdWxsIGNob3JkIG9uIGVhY2ggYmVhdC5cbi8vXG4vL1x0LSBJZiB0aGVyZSBpcyBhIGNob3JkIHNwZWNpZmllZCB0aGF0IGlzIG5vdCBvbiBhIGJlYXQsIG1vdmUgaXQgZWFybGllciB0byB0aGUgcHJldmlvdXMgYmVhdCwgdW5sZXNzIHRoZXJlIGlzIGFscmVhZHkgYSBjaG9yZCBvbiB0aGF0IGJlYXQuXG4vL1x0LSBPdGhlcndpc2UsIG1vdmUgaXQgbGF0ZXIsIHVubGVzcyB0aGVyZSBpcyBhbHJlYWR5IGEgY2hvcmQgb24gdGhhdCBiZWF0LlxuLy8gXHQtIE90aGVyd2lzZSwgaWdub3JlIGl0LiAoVE9ETy1QRVI6IGV4cGFuZCB0aGlzIGFzIG1vcmUgc3VwcG9ydCBpcyBhZGRlZC4pXG4vL1xuLy8gSWYgdGhlcmUgaXMgYW55IG5vdGUgaW4gdGhlIG1lbG9keSB0aGF0IGhhcyBhIHJoeXRobSBoZWFkLCB0aGVuIGFzc3VtZSB0aGUgbWVsb2R5IGNvbnRyb2xzIHRoZSByaHl0aG0sIHNvIHRoZXJlIGlzIG5vIGNob3JkIGFkZGVkIGZvciB0aGF0IGVudGlyZSBtZWFzdXJlLlxuXG52YXIgQ2hvcmRUcmFjayA9IGZ1bmN0aW9uIENob3JkVHJhY2sobnVtVm9pY2VzLCBjaG9yZHNPZmYsIG1pZGlPcHRpb25zLCBtZXRlcikge1xuXHR0aGlzLmNob3JkVHJhY2sgPSBbXTtcblx0dGhpcy5jaG9yZFRyYWNrRmluaXNoZWQgPSBmYWxzZTtcblx0dGhpcy5jaG9yZENoYW5uZWwgPSBudW1Wb2ljZXM7IC8vIGZpcnN0IGZyZWUgY2hhbm5lbCBmb3IgY2hvcmRzXG5cdHRoaXMuY3VycmVudENob3JkcyA9IFtdO1xuXHR0aGlzLmxhc3RDaG9yZDtcblx0dGhpcy5jaG9yZExhc3RCYXI7XG5cdHRoaXMuY2hvcmRzT2ZmID0gISFjaG9yZHNPZmZcblx0dGhpcy5nQ2hvcmRUYWNldCA9IHRoaXMuY2hvcmRzT2ZmO1xuXHR0aGlzLmhhc1JoeXRobUhlYWQgPSBmYWxzZTtcblx0dGhpcy50cmFuc3Bvc2UgPSAwO1xuXHR0aGlzLmxhc3RCYXJUaW1lID0gMDtcblx0dGhpcy5tZXRlciA9IG1ldGVyO1xuXHR0aGlzLnRlbXBvQ2hhbmdlRmFjdG9yID0gMTtcblxuXHQvLyBNQUUgMTcgSnVuIDIwMjQgLSBUbyBhbGxvdyBmb3IgYmFzcyBhbmQgY2hvcmQgaW5zdHJ1bWVudCBvY3RhdmUgc2hpZnRzXG5cdHRoaXMuYmFzc0luc3RydW1lbnQgPSBtaWRpT3B0aW9ucy5iYXNzcHJvZyAmJiBtaWRpT3B0aW9ucy5iYXNzcHJvZy5sZW5ndGggPj0gMSA/IG1pZGlPcHRpb25zLmJhc3Nwcm9nWzBdIDogMDtcblx0dGhpcy5jaG9yZEluc3RydW1lbnQgPSBtaWRpT3B0aW9ucy5jaG9yZHByb2cgJiYgbWlkaU9wdGlvbnMuY2hvcmRwcm9nLmxlbmd0aCA+PSAxID8gbWlkaU9wdGlvbnMuY2hvcmRwcm9nWzBdIDogMDtcblxuXHQvLyBNQUUgRm9yIG9jdGF2ZSBzaGlmdGVkIGJhc3MgYW5kIGNob3Jkc1xuXHR0aGlzLmJhc3NPY3RhdmVTaGlmdCA9IG1pZGlPcHRpb25zLmJhc3Nwcm9nICYmIG1pZGlPcHRpb25zLmJhc3Nwcm9nLmxlbmd0aCA9PT0gMiA/IG1pZGlPcHRpb25zLmJhc3Nwcm9nWzFdIDogMDtcblx0dGhpcy5jaG9yZE9jdGF2ZVNoaWZ0ID0gbWlkaU9wdGlvbnMuY2hvcmRwcm9nICYmIG1pZGlPcHRpb25zLmNob3JkcHJvZy5sZW5ndGggPT09IDIgPyBtaWRpT3B0aW9ucy5jaG9yZHByb2dbMV0gOiAwO1xuXG5cdHRoaXMuYm9vbVZvbHVtZSA9IG1pZGlPcHRpb25zLmJhc3N2b2wgJiYgbWlkaU9wdGlvbnMuYmFzc3ZvbC5sZW5ndGggPT09IDEgPyBtaWRpT3B0aW9ucy5iYXNzdm9sWzBdIDogNjQ7XG5cdHRoaXMuY2hpY2tWb2x1bWUgPSBtaWRpT3B0aW9ucy5jaG9yZHZvbCAmJiBtaWRpT3B0aW9ucy5jaG9yZHZvbC5sZW5ndGggPT09IDEgPyBtaWRpT3B0aW9ucy5jaG9yZHZvbFswXSA6IDQ4O1xuXG5cdC8vIFRoaXMgYWxsb3dzIGZvciBhbiBpbml0aWFsICUlTUlESSBnY2hvcmQgd2l0aCBubyBzdHJpbmdcblx0aWYgKG1pZGlPcHRpb25zLmdjaG9yZCAmJiAobWlkaU9wdGlvbnMuZ2Nob3JkLmxlbmd0aCA+IDApKSB7XG5cdFx0dGhpcy5vdmVycmlkZVBhdHRlcm4gPSBwYXJzZUdDaG9yZChtaWRpT3B0aW9ucy5nY2hvcmRbMF0pXG5cdH1cblx0ZWxzZSB7XG5cdFx0dGhpcy5vdmVycmlkZVBhdHRlcm4gPSB1bmRlZmluZWQ7XG5cdH1cbn07XG5cbkNob3JkVHJhY2sucHJvdG90eXBlLnNldE1ldGVyID0gZnVuY3Rpb24gKG1ldGVyKSB7XG5cdHRoaXMubWV0ZXIgPSBtZXRlclxufTtcblxuQ2hvcmRUcmFjay5wcm90b3R5cGUuc2V0VGVtcG9DaGFuZ2VGYWN0b3IgPSBmdW5jdGlvbiAodGVtcG9DaGFuZ2VGYWN0b3IpIHtcblx0dGhpcy50ZW1wb0NoYW5nZUZhY3RvciA9IHRlbXBvQ2hhbmdlRmFjdG9yXG59O1xuXG5DaG9yZFRyYWNrLnByb3RvdHlwZS5zZXRMYXN0QmFyVGltZSA9IGZ1bmN0aW9uIChsYXN0QmFyVGltZSkge1xuXHR0aGlzLmxhc3RCYXJUaW1lID0gbGFzdEJhclRpbWVcbn07XG5cbkNob3JkVHJhY2sucHJvdG90eXBlLnNldFRyYW5zcG9zZSA9IGZ1bmN0aW9uICh0cmFuc3Bvc2UpIHtcblx0dGhpcy50cmFuc3Bvc2UgPSB0cmFuc3Bvc2Vcbn07XG5cbkNob3JkVHJhY2sucHJvdG90eXBlLnNldFJoeXRobUhlYWQgPSBmdW5jdGlvbiAoaXNSaHl0aG1IZWFkLCBlbGVtKSB7XG5cdHRoaXMuaGFzUmh5dGhtSGVhZCA9IGlzUmh5dGhtSGVhZFxuXHR2YXIgZVBpdGNoZXMgPSBbXTtcblx0aWYgKGlzUmh5dGhtSGVhZCkge1xuXHRcdGlmICh0aGlzLmxhc3RDaG9yZCAmJiB0aGlzLmxhc3RDaG9yZC5jaGljaykge1xuXHRcdFx0Zm9yICh2YXIgaTIgPSAwOyBpMiA8IHRoaXMubGFzdENob3JkLmNoaWNrLmxlbmd0aDsgaTIrKykge1xuXHRcdFx0XHR2YXIgbm90ZTIgPSBPYmplY3QuYXNzaWduKHt9LGVsZW0ucGl0Y2hlc1swXSk7XG5cdFx0XHRcdG5vdGUyLmFjdHVhbFBpdGNoID0gdGhpcy5sYXN0Q2hvcmQuY2hpY2tbaTJdO1xuXHRcdFx0XHRlUGl0Y2hlcy5wdXNoKG5vdGUyKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIGVQaXRjaGVzXG59O1xuXG5DaG9yZFRyYWNrLnByb3RvdHlwZS5iYXJFbmQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXHRpZiAodGhpcy5jaG9yZFRyYWNrLmxlbmd0aCA+IDAgJiYgIXRoaXMuY2hvcmRUcmFja0ZpbmlzaGVkKSB7XG5cdFx0dGhpcy5yZXNvbHZlQ2hvcmRzKHRoaXMubGFzdEJhclRpbWUsIHRpbWVUb1JlYWxUaW1lKGVsZW1lbnQudGltZSkpO1xuXHRcdHRoaXMuY3VycmVudENob3JkcyA9IFtdO1xuXHR9XG5cdHRoaXMuY2hvcmRMYXN0QmFyID0gdGhpcy5sYXN0Q2hvcmQ7XG59O1xuXG5DaG9yZFRyYWNrLnByb3RvdHlwZS5nQ2hvcmRPbiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cdGlmICghdGhpcy5jaG9yZHNPZmYpXG5cdFx0dGhpcy5nQ2hvcmRUYWNldCA9IGVsZW1lbnQudGFjZXQ7XG59O1xuXG5DaG9yZFRyYWNrLnByb3RvdHlwZS5wYXJhbUNoYW5nZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cdHN3aXRjaCAoZWxlbWVudC5lbF90eXBlKSB7XG5cdFx0Y2FzZSBcImdjaG9yZFwiOlxuXHRcdFx0Ly8gU2tpcHMgZ2Nob3JkIGVsZW1lbnRzIHRoYXQgZG9uJ3QgaGF2ZSBwYXR0ZXJuIHN0cmluZ3Ncblx0XHRcdGlmIChlbGVtZW50LnBhcmFtICYmIGVsZW1lbnQucGFyYW0ubGVuZ3RoID4gMCkge1xuXHRcdFx0XHR0aGlzLm92ZXJyaWRlUGF0dGVybiA9IHBhcnNlR0Nob3JkKGVsZW1lbnQucGFyYW0pO1xuXG5cdFx0XHRcdC8vIEdlbmVyYXRlIGEgZGVmYXVsdCBkdXJhdGlvbiBzY2FsZSBiYXNlZCBvbiB0aGUgcGF0dGVyblxuXHRcdFx0XHQvL3RoaXMuZ2Nob3JkZHVyYXRpb24gPSBnZW5lcmF0ZURlZmF1bHREdXJhdGlvblNjYWxlKGVsZW1lbnQucGFyYW0pO1xuXHRcdFx0fSBlbHNlXG5cdFx0XHRcdHRoaXMub3ZlcnJpZGVQYXR0ZXJuID0gdW5kZWZpbmVkO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcImJhc3Nwcm9nXCI6XG5cdFx0XHR0aGlzLmJhc3NJbnN0cnVtZW50ID0gZWxlbWVudC52YWx1ZTtcblx0XHRcdGlmICgoZWxlbWVudC5vY3RhdmVTaGlmdCAhPSB1bmRlZmluZWQpICYmIChlbGVtZW50Lm9jdGF2ZVNoaWZ0ICE9IG51bGwpKSB7XG5cdFx0XHRcdHRoaXMuYmFzc09jdGF2ZVNoaWZ0ID0gZWxlbWVudC5vY3RhdmVTaGlmdDtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHR0aGlzLmJhc3NPY3RhdmVTaGlmdCA9IDA7XG5cdFx0XHR9XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwiY2hvcmRwcm9nXCI6XG5cdFx0XHR0aGlzLmNob3JkSW5zdHJ1bWVudCA9IGVsZW1lbnQudmFsdWU7XG5cdFx0XHRpZiAoKGVsZW1lbnQub2N0YXZlU2hpZnQgIT0gdW5kZWZpbmVkKSAmJiAoZWxlbWVudC5vY3RhdmVTaGlmdCAhPSBudWxsKSkge1xuXHRcdFx0XHR0aGlzLmNob3JkT2N0YXZlU2hpZnQgPSBlbGVtZW50Lm9jdGF2ZVNoaWZ0O1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHRoaXMuY2hvcmRPY3RhdmVTaGlmdCA9IDA7XG5cdFx0XHR9XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwiYmFzc3ZvbFwiOlxuXHRcdFx0dGhpcy5ib29tVm9sdW1lID0gZWxlbWVudC5wYXJhbTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJjaG9yZHZvbFwiOlxuXHRcdFx0dGhpcy5jaGlja1ZvbHVtZSA9IGVsZW1lbnQucGFyYW07XG5cdFx0XHRicmVhaztcblx0XHRkZWZhdWx0OlxuXHRcdFx0Y29uc29sZS5sb2coXCJ1bmhhbmRsZWQgbWlkaSBwYXJhbVwiLCBlbGVtZW50KVx0XG5cdH1cbn07XG5cbkNob3JkVHJhY2sucHJvdG90eXBlLmZpbmlzaCA9IGZ1bmN0aW9uICgpIHtcblx0aWYgKCF0aGlzLmNob3JkVHJhY2tFbXB0eSgpKSAvLyBEb24ndCBkbyBjaG9yZHMgb24gbW9yZSB0aGFuIG9uZSB0cmFjaywgc28gdHVybiBvZmYgY2hvcmQgZGV0ZWN0aW9uIGFmdGVyIHdlIGNyZWF0ZSBpdC5cblx0XHR0aGlzLmNob3JkVHJhY2tGaW5pc2hlZCA9IHRydWU7XG59O1xuXG5DaG9yZFRyYWNrLnByb3RvdHlwZS5hZGRUcmFjayA9IGZ1bmN0aW9uICh0cmFja3MpIHtcblx0aWYgKCF0aGlzLmNob3JkVHJhY2tFbXB0eSgpKVxuXHRcdHRyYWNrcy5wdXNoKHRoaXMuY2hvcmRUcmFjayk7XG59O1xuXG5DaG9yZFRyYWNrLnByb3RvdHlwZS5maW5kQ2hvcmQgPSBmdW5jdGlvbiAoZWxlbSkge1xuXHRpZiAodGhpcy5nQ2hvcmRUYWNldClcblx0XHRyZXR1cm4gJ2JyZWFrJztcblxuXHQvLyBUT0RPLVBFUjogSnVzdCB1c2luZyB0aGUgZmlyc3QgY2hvcmQgaWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUuXG5cdGlmICh0aGlzLmNob3JkVHJhY2tGaW5pc2hlZCB8fCAhZWxlbS5jaG9yZCB8fCBlbGVtLmNob3JkLmxlbmd0aCA9PT0gMClcblx0XHRyZXR1cm4gbnVsbDtcblxuXHQvLyBSZXR1cm4gdGhlIGZpcnN0IGFubm90YXRpb24gdGhhdCBpcyBhIHJlZ3VsYXIgY2hvcmQ6IHRoYXQgaXMsIGl0IGlzIGluIHRoZSBkZWZhdWx0IHBsYWNlIG9yIGlzIGEgcmVjb2duaXplZCBcInRhY2V0XCIgcGhyYXNlLlxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGVsZW0uY2hvcmQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgY2ggPSBlbGVtLmNob3JkW2ldO1xuXHRcdGlmIChjaC5wb3NpdGlvbiA9PT0gJ2RlZmF1bHQnKVxuXHRcdFx0cmV0dXJuIGNoLm5hbWU7XG5cdFx0aWYgKHRoaXMuYnJlYWtTeW5vbnltcy5pbmRleE9mKGNoLm5hbWUudG9Mb3dlckNhc2UoKSkgPj0gMClcblx0XHRcdHJldHVybiAnYnJlYWsnO1xuXHR9XG5cdHJldHVybiBudWxsO1xufVxuXG5DaG9yZFRyYWNrLnByb3RvdHlwZS5pbnRlcnByZXRDaG9yZCA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdC8vIGNob3JkcyBoYXZlIHRoZSBmb3JtYXQ6XG5cdC8vIFtyb290XVthY2NdW21vZGlmaWVyXVsvXVtiYXNzXVthY2NdXG5cdC8vIChUaGUgY2hvcmQgbWlnaHQgYmUgc3Vycm91bmRlZCBieSBwYXJlbnMuIEp1c3QgaWdub3JlIHRoZW0uKVxuXHQvLyByb290IG11c3QgYmUgcHJlc2VudCBhbmQgbXVzdCBiZSBmcm9tIEEtRy5cblx0Ly8gYWNjIGlzIG9wdGlvbmFsIGFuZCBjYW4gYmUgIyBvciBiXG5cdC8vIFRoZSBtb2RpZmllciBjYW4gYmUgYSB3aWRlIHZhcmlldHkgb2YgdGhpbmdzLCBsaWtlIFwibWFqN1wiLiBBcyB0aGV5IGFyZSBkaXNjb3ZlcmVkLCBtb3JlIGFyZSBzdXBwb3J0ZWQgaGVyZS5cblx0Ly8gSWYgdGhlcmUgaXMgYSBzbGFzaCwgdGhlbiB0aGVyZSBpcyBhIGJhc3Mgbm90ZSwgd2hpY2ggY2FuIGJlIGZyb20gQS1HLCB3aXRoIGFuIG9wdGlvbmFsIGFjYy5cblx0Ly8gSWYgdGhlIHJvb3QgaXMgdW5yZWNvZ25pemVkLCB0aGVuIFwidW5kZWZpbmVkXCIgaXMgcmV0dXJuZWQgYW5kIHRoZXJlIGlzIG5vIGNob3JkLlxuXHQvLyBJZiB0aGUgbW9kaWZpZXIgaXMgdW5yZWNvZ25pemVkLCBhIG1ham9yIHRyaWFkIGlzIHJldHVybmVkLlxuXHQvLyBJZiB0aGUgYmFzcyBub3RlcyBpcyB1bnJlY29nbml6ZWQsIGl0IGlzIGlnbm9yZWQuXG5cdGlmIChuYW1lLmxlbmd0aCA9PT0gMClcblx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRpZiAobmFtZSA9PT0gJ2JyZWFrJylcblx0XHRyZXR1cm4geyBjaGljazogW10gfTtcblx0dmFyIHJvb3QgPSBuYW1lLnN1YnN0cmluZygwLCAxKTtcblx0aWYgKHJvb3QgPT09ICcoJykge1xuXHRcdG5hbWUgPSBuYW1lLnN1YnN0cmluZygxLCBuYW1lLmxlbmd0aCAtIDEpO1xuXHRcdGlmIChuYW1lLmxlbmd0aCA9PT0gMClcblx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdFx0cm9vdCA9IG5hbWUuc3Vic3RyaW5nKDAsIDEpO1xuXHR9XG5cdHZhciBiYXNzID0gdGhpcy5iYXNzZXNbcm9vdF07XG5cdGlmICghYmFzcylcdC8vIElmIHRoZSBiYXNzIG5vdGUgaXNuJ3QgbGlzdGVkLCB0aGVuIHRoaXMgd2FzIGFuIHVua25vd24gcm9vdC4gT25seSBBLUcgYXJlIGFjY2VwdGVkLlxuXHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdC8vIERvbid0IHRyYW5zcG9zZSB0aGUgY2hvcmRzIG1vcmUgdGhhbiBhbiBvY3RhdmUuXG5cdHZhciBjaG9yZFRyYW5zcG9zZSA9IHRoaXMudHJhbnNwb3NlO1xuXHR3aGlsZSAoY2hvcmRUcmFuc3Bvc2UgPCAtOClcblx0XHRjaG9yZFRyYW5zcG9zZSArPSAxMjtcblx0d2hpbGUgKGNob3JkVHJhbnNwb3NlID4gOClcblx0XHRjaG9yZFRyYW5zcG9zZSAtPSAxMjtcblx0YmFzcyArPSBjaG9yZFRyYW5zcG9zZTtcblx0XG4gICAgXHQvLyBNQUUgMzEgQXVnIDIwMjQgLSBGb3IgdmlzdWFsIHRyYW5zcG9zZSBiYWNrdXAgcmFuZ2UgaXNzdWVcbiAgICBcdC8vIElmIHRyYW5zcG9zZWQgYmVsb3cgQSBvciBhYm92ZSBHLCBicmluZyBpdCBiYWNrIGluIHRoZSBub3JtYWwgYmFja3VwIHJhbmdlXG4gICAgXHRpZiAoYmFzcyA8IDMzKXtcbiAgICAgIFx0XHRiYXNzICs9IDEyO1xuICAgIFx0fVxuICAgIFx0ZWxzZSBpZiAoYmFzcyA+IDQ0KXtcblx0ICAgICBcdCBiYXNzIC09IDEyO1xuICAgIFx0fVxuXG5cdC8vIE1BRSAxNyBKdW4gMjAyNCAtIFN1cHBvcnRpbmcgb2N0YXZlIHNoaWZ0ZWQgYmFzcyBhbmQgY2hvcmRzXG5cdHZhciB1bnNoaWZ0ZWRCYXNzID0gYmFzcztcblxuXHRiYXNzICs9IHRoaXMuYmFzc09jdGF2ZVNoaWZ0ICogMTI7XG5cblx0dmFyIGJhc3MyID0gYmFzcyAtIDU7XHQvLyBUaGUgYWx0ZXJuYXRpbmcgYmFzcyBpcyBhIDR0aCBiZWxvd1xuXHR2YXIgY2hpY2s7XG5cdGlmIChuYW1lLmxlbmd0aCA9PT0gMSlcblx0XHRjaGljayA9IHRoaXMuY2hvcmROb3RlcyhiYXNzLCAnJyk7XG5cdHZhciByZW1haW5pbmcgPSBuYW1lLnN1YnN0cmluZygxKTtcblx0dmFyIGFjYyA9IHJlbWFpbmluZy5zdWJzdHJpbmcoMCwgMSk7XG5cdGlmIChhY2MgPT09ICdiJyB8fCBhY2MgPT09ICfima0nKSB7XG5cdFx0dW5zaGlmdGVkQmFzcy0tO1xuXHRcdGJhc3MtLTtcblx0XHRiYXNzMi0tO1xuXHRcdHJlbWFpbmluZyA9IHJlbWFpbmluZy5zdWJzdHJpbmcoMSk7XG5cdH0gZWxzZSBpZiAoYWNjID09PSAnIycgfHwgYWNjID09PSAn4pmvJykge1xuXHRcdHVuc2hpZnRlZEJhc3MrKztcblx0XHRiYXNzKys7XG5cdFx0YmFzczIrKztcblx0XHRyZW1haW5pbmcgPSByZW1haW5pbmcuc3Vic3RyaW5nKDEpO1xuXHR9XG5cdHZhciBhcnIgPSByZW1haW5pbmcuc3BsaXQoJy8nKTtcblx0Y2hpY2sgPSB0aGlzLmNob3JkTm90ZXModW5zaGlmdGVkQmFzcywgYXJyWzBdKTtcblx0Ly8gSWYgdGhlIDV0aCBpcyBhbHRlcmVkIHRoZW4gdGhlIGJhc3MgaXMgYWx0ZXJlZC4gTm9ybWFsbHkgdGhlIGJhc3MgaXMgNyBmcm9tIHRoZSByb290LCBzbyBhZGp1c3QgaWYgaXQgaXNuJ3QuXG5cdGlmIChjaGljay5sZW5ndGggPj0gMykge1xuXHRcdHZhciBmaWZ0aCA9IGNoaWNrWzJdIC0gY2hpY2tbMF07XG5cdFx0YmFzczIgPSBiYXNzMiArIGZpZnRoIC0gNztcblx0fVxuXG5cdGlmIChhcnIubGVuZ3RoID09PSAyKSB7XG5cdFx0dmFyIGV4cGxpY2l0QmFzcyA9IHRoaXMuYmFzc2VzW2FyclsxXS5zdWJzdHJpbmcoMCwgMSldO1xuXHRcdGlmIChleHBsaWNpdEJhc3MpIHtcblx0XHRcdHZhciBiYXNzQWNjID0gYXJyWzFdLnN1YnN0cmluZygxKTtcblx0XHRcdHZhciBiYXNzU2hpZnQgPSB7ICcjJzogMSwgJ+KZryc6IDEsICdiJzogLTEsICfima0nOiAtMSB9W2Jhc3NBY2NdIHx8IDA7XG5cdFx0XHRiYXNzID0gdGhpcy5iYXNzZXNbYXJyWzFdLnN1YnN0cmluZygwLCAxKV0gKyBiYXNzU2hpZnQgKyBjaG9yZFRyYW5zcG9zZTtcblxuXHRcdFx0Ly8gTUFFIDIyIE1heSAyMDI0IC0gU3VwcG9ydGluZyBvY3RhdmUgc2hpZnRlZCBiYXNzIGFuZCBjaG9yZHNcblx0XHRcdGJhc3MgKz0gdGhpcy5iYXNzT2N0YXZlU2hpZnQgKiAxMjtcblxuXHRcdFx0YmFzczIgPSBiYXNzO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4geyBib29tOiBiYXNzLCBib29tMjogYmFzczIsIGNoaWNrOiBjaGljayB9O1xufVxuXG5DaG9yZFRyYWNrLnByb3RvdHlwZS5jaG9yZE5vdGVzID0gZnVuY3Rpb24gKGJhc3MsIG1vZGlmaWVyKSB7XG5cdHZhciBpbnRlcnZhbHMgPSB0aGlzLmNob3JkSW50ZXJ2YWxzW21vZGlmaWVyXTtcblx0aWYgKCFpbnRlcnZhbHMpIHtcblx0XHRpZiAobW9kaWZpZXIuc2xpY2UoMCwgMikudG9Mb3dlckNhc2UoKSA9PT0gJ21hJyB8fCBtb2RpZmllclswXSA9PT0gJ00nKVxuXHRcdFx0aW50ZXJ2YWxzID0gdGhpcy5jaG9yZEludGVydmFscy5NO1xuXHRcdGVsc2UgaWYgKG1vZGlmaWVyWzBdID09PSAnbScgfHwgbW9kaWZpZXJbMF0gPT09ICctJylcblx0XHRcdGludGVydmFscyA9IHRoaXMuY2hvcmRJbnRlcnZhbHMubTtcblx0XHRlbHNlXG5cdFx0XHRpbnRlcnZhbHMgPSB0aGlzLmNob3JkSW50ZXJ2YWxzLk07XG5cdH1cblx0YmFzcyArPSAxMjtcdC8vIHRoZSBjaG9yZCBpcyBhbiBvY3RhdmUgYWJvdmUgdGhlIGJhc3Mgbm90ZS5cblxuXHQvLyBNQUUgMjIgTWF5IDIwMjQgLSBGb3IgY2hpY2sgb2N0YXZlIHNoaWZ0XG5cdGJhc3MgKz0gKHRoaXMuY2hvcmRPY3RhdmVTaGlmdCAqIDEyKTtcblxuXHR2YXIgbm90ZXMgPSBbXTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBpbnRlcnZhbHMubGVuZ3RoOyBpKyspIHtcblx0XHRub3Rlcy5wdXNoKGJhc3MgKyBpbnRlcnZhbHNbaV0pO1xuXHR9XG5cdHJldHVybiBub3Rlcztcbn1cblxuQ2hvcmRUcmFjay5wcm90b3R5cGUud3JpdGVOb3RlID0gZnVuY3Rpb24gKG5vdGUsIGJlYXRMZW5ndGgsIHZvbHVtZSwgYmVhdCwgbm90ZUxlbmd0aCwgaW5zdHJ1bWVudCkge1xuXHQvLyB1bmRlZmluZWQgbWVhbnMgdGhlcmUgaXMgYSBzdG9wIHRpbWUuXG5cdGlmIChub3RlICE9PSB1bmRlZmluZWQpXG5cdFx0dGhpcy5jaG9yZFRyYWNrLnB1c2goeyBjbWQ6ICdub3RlJywgcGl0Y2g6IG5vdGUsIHZvbHVtZTogdm9sdW1lLCBzdGFydDogdGhpcy5sYXN0QmFyVGltZSArIGJlYXQgKiBkdXJhdGlvblJvdW5kZWQoYmVhdExlbmd0aCwgdGhpcy50ZW1wb0NoYW5nZUZhY3RvciksIGR1cmF0aW9uOiBkdXJhdGlvblJvdW5kZWQobm90ZUxlbmd0aCwgdGhpcy50ZW1wb0NoYW5nZUZhY3RvciksIGdhcDogMCwgaW5zdHJ1bWVudDogaW5zdHJ1bWVudCB9KTtcbn1cblxuQ2hvcmRUcmFjay5wcm90b3R5cGUuY2hvcmRUcmFja0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuXHR2YXIgaXNFbXB0eSA9IHRydWU7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaG9yZFRyYWNrLmxlbmd0aCAmJiBpc0VtcHR5OyBpKyspIHtcblx0XHRpZiAodGhpcy5jaG9yZFRyYWNrW2ldLmNtZCA9PT0gJ25vdGUnKVxuXHRcdFx0aXNFbXB0eSA9IGZhbHNlXG5cdH1cblx0cmV0dXJuIGlzRW1wdHk7XG59XG5cbkNob3JkVHJhY2sucHJvdG90eXBlLnJlc29sdmVDaG9yZHMgPSBmdW5jdGlvbiAoc3RhcnRUaW1lLCBlbmRUaW1lKSB7XG5cdC8vIElmIHRoZXJlIGlzIGEgcmh5dGhtIGhlYWQgYW55d2hlcmUgaW4gdGhlIG1lYXN1cmUgdGhlbiBkb24ndCBhZGQgYSBzZXBhcmF0ZSByaHl0aG0gdHJhY2tcblx0aWYgKHRoaXMuaGFzUmh5dGhtSGVhZClcblx0XHRyZXR1cm5cblxuXHR2YXIgbnVtID0gdGhpcy5tZXRlci5udW07XG5cdHZhciBkZW4gPSB0aGlzLm1ldGVyLmRlbjtcblx0dmFyIGJlYXRMZW5ndGggPSAxIC8gZGVuO1xuXHR2YXIgbm90ZUxlbmd0aCA9IGJlYXRMZW5ndGggLyAyO1xuXHR2YXIgdGhpc01lYXN1cmVMZW5ndGggPSBwYXJzZUludChudW0sIDEwKSAvIHBhcnNlSW50KGRlbiwgMTApO1xuXHR2YXIgcG9ydGlvbk9mQU1lYXN1cmUgPSB0aGlzTWVhc3VyZUxlbmd0aCAtIChlbmRUaW1lIC0gc3RhcnRUaW1lKSAvIHRoaXMudGVtcG9DaGFuZ2VGYWN0b3I7XG5cdGlmIChNYXRoLmFicyhwb3J0aW9uT2ZBTWVhc3VyZSkgPCAwLjAwMDAxKVxuXHRcdHBvcnRpb25PZkFNZWFzdXJlID0gMDtcblxuXHQgLy8gdGhlcmUgd2Fzbid0IGEgbmV3IGNob3JkIHRoaXMgbWVhc3VyZSwgc28gdXNlIHRoZSBsYXN0IGNob3JkIGRlY2xhcmVkLlxuXHQgLy8gYWxzbyB0aGUgY2FzZSB3aGVyZSB0aGVyZSBpcyBhIGNob3JkIGRlY2xhcmVkIGluIHRoZSBtZWFzdXJlLCBidXQgbm90IG9uIGl0cyBmaXJzdCBiZWF0LlxuXHRpZiAodGhpcy5jdXJyZW50Q2hvcmRzLmxlbmd0aCA9PT0gMCB8fCB0aGlzLmN1cnJlbnRDaG9yZHNbMF0uYmVhdCAhPT0gMCkge1xuXHRcdHRoaXMuY3VycmVudENob3Jkcy51bnNoaWZ0KHsgYmVhdDogMCwgY2hvcmQ6IHRoaXMuY2hvcmRMYXN0QmFyIH0pO1xuXHR9XG5cblx0Ly9jb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRDaG9yZHMpXG5cdHZhciBjdXJyZW50Q2hvcmRzRXhwYW5kZWQgPSBleHBhbmRDdXJyZW50Q2hvcmRzKHRoaXMuY3VycmVudENob3JkcywgOCpudW0vZGVuLCBiZWF0TGVuZ3RoKVxuXHQvL2NvbnNvbGUubG9nKGN1cnJlbnRDaG9yZHNFeHBhbmRlZClcblx0dmFyIHRoaXNQYXR0ZXJuID0gdGhpcy5vdmVycmlkZVBhdHRlcm4gPyB0aGlzLm92ZXJyaWRlUGF0dGVybiA6IHRoaXMucmh5dGhtUGF0dGVybnNbbnVtICsgJy8nICsgZGVuXVxuXHRpZiAocG9ydGlvbk9mQU1lYXN1cmUpIHtcblx0XHR0aGlzUGF0dGVybiA9IFtdO1xuXHRcdHZhciBiZWF0c1ByZXNlbnQgPSAoKGVuZFRpbWUgLSBzdGFydFRpbWUpIC8gdGhpcy50ZW1wb0NoYW5nZUZhY3RvcikgKiA4O1xuXHRcdGZvciAodmFyIHAgPSAwOyBwIDwgYmVhdHNQcmVzZW50LzI7IHAgKz0gMikge1xuXHRcdFx0dGhpc1BhdHRlcm4ucHVzaChcImNoaWNrXCIpO1xuXHRcdFx0dGhpc1BhdHRlcm4ucHVzaChcIlwiKTtcblx0XHR9XG5cdH1cblx0aWYgKCF0aGlzUGF0dGVybikge1xuXHRcdHRoaXNQYXR0ZXJuID0gW11cblx0XHRmb3IgKHZhciBwID0gMDsgcCA8ICg4Km51bS9kZW4pLzI7IHArKykge1xuXHRcdFx0dGhpc1BhdHRlcm4ucHVzaCgnY2hpY2snKVxuXHRcdFx0dGhpc1BhdHRlcm4ucHVzaChcIlwiKTtcblx0XHR9XG5cdH1cblx0dmFyIGZpcnN0Qm9vbSA9IHRydWVcblx0Ly8gSWYgdGhlIHBhdHRlcm4gaXMgb3ZlcnJpZGRlbiwgaXQgbWlnaHQgYmUgbG9uZ2VyIHRoYW4gdGhlIGxlbmd0aCBvZiBhIG1lYXN1cmUuIElmIHNvLCB0aGVuIGlnbm9yZSB0aGUgcmVzdCBvZiBpdFxuXHR2YXIgbWluTGVuZ3RoID0gTWF0aC5taW4odGhpc1BhdHRlcm4ubGVuZ3RoLCBjdXJyZW50Q2hvcmRzRXhwYW5kZWQubGVuZ3RoKVxuXHRmb3IgKHZhciBwID0gMDsgcCA8IG1pbkxlbmd0aDsgcCsrKSB7XG5cdFx0aWYgKHAgPiAwICYmIGN1cnJlbnRDaG9yZHNFeHBhbmRlZFtwLTFdICYmIGN1cnJlbnRDaG9yZHNFeHBhbmRlZFtwXSAmJiBjdXJyZW50Q2hvcmRzRXhwYW5kZWRbcC0xXS5ib29tICE9PSBjdXJyZW50Q2hvcmRzRXhwYW5kZWRbcF0uYm9vbSlcblx0XHRcdGZpcnN0Qm9vbSA9IHRydWVcblx0XHR2YXIgdHlwZSA9IHRoaXNQYXR0ZXJuW3BdXG5cdFx0dmFyIGlzQm9vbSA9IHR5cGUuaW5kZXhPZignYm9vbScpID49IDBcblx0XHQvLyBJZiB3ZSBjaGFuZ2VkIGNob3JkcyBhdCBhIHRpbWUgd2hlbiB3ZSdyZSBub3QgZXhwZWN0aW5nIGEgYmFzcyBub3RlLCB0aGVuIGFkZCBhbiBleHRyYSBiYXNzIG5vdGUgaW4gaWYgdGhlIGZpcnN0IHRoaW5nIGluIHRoZSBwYXR0ZXJuIGlzIGEgYmFzcyBub3RlLlxuXHRcdHZhciBuZXdCYXNzID0gIWlzQm9vbSAmJlxuXHRcdFx0cCAhPT0gMCAmJlxuXHRcdFx0dGhpc1BhdHRlcm5bMF0uaW5kZXhPZignYm9vbScpID49IDAgJiZcblx0XHRcdCghY3VycmVudENob3Jkc0V4cGFuZGVkW3AtMV0gfHwgY3VycmVudENob3Jkc0V4cGFuZGVkW3AtMV0uYm9vbSAhPT0gY3VycmVudENob3Jkc0V4cGFuZGVkW3BdLmJvb20pXG5cdFx0dmFyIHBpdGNoZXMgPSByZXNvbHZlUGl0Y2goY3VycmVudENob3Jkc0V4cGFuZGVkW3BdLCB0eXBlLCBmaXJzdEJvb20sIG5ld0Jhc3MpXG5cdFx0aWYgKGlzQm9vbSlcblx0XHRcdGZpcnN0Qm9vbSA9IGZhbHNlXG5cdFx0Zm9yICh2YXIgb28gPSAwOyBvbyA8IHBpdGNoZXMubGVuZ3RoOyBvbysrKSB7XG5cdFx0XHR0aGlzLndyaXRlTm90ZShwaXRjaGVzW29vXSwgXG5cdFx0XHRcdDAuMTI1LFxuXHRcdFx0XHRpc0Jvb20gfHwgbmV3QmFzcyA/IHRoaXMuYm9vbVZvbHVtZSA6IHRoaXMuY2hpY2tWb2x1bWUsXG5cdFx0XHRcdHAsXG5cdFx0XHRcdG5vdGVMZW5ndGgsXG5cdFx0XHRcdGlzQm9vbSB8fCBuZXdCYXNzID8gdGhpcy5iYXNzSW5zdHJ1bWVudCA6IHRoaXMuY2hvcmRJbnN0cnVtZW50XG5cdFx0XHQpXG5cdFx0XHRpZiAobmV3QmFzcylcblx0XHRcdFx0bmV3QmFzcyA9IGZhbHNlXG5cdFx0XHRlbHNlXG5cdFx0XHRcdGlzQm9vbSA9IGZhbHNlIC8vIG9ubHkgdGhlIGZpcnN0IG5vdGUgaW4gYSBjaG9yZCBpcyBhIGJhc3Mgbm90ZS4gVGhpcyBoYW5kbGVzIHRoZSBjYXNlIHdoZXJlIGJhc3MgYW5kIGNob3JkIGFyZSBwbGF5ZWQgYXQgdGhlIHNhbWUgdGltZS5cblx0XHR9XG5cdH1cblx0cmV0dXJuXG59XG5cbkNob3JkVHJhY2sucHJvdG90eXBlLnByb2Nlc3NDaG9yZCA9IGZ1bmN0aW9uIChlbGVtKSB7XG5cdGlmICh0aGlzLmNob3JkVHJhY2tGaW5pc2hlZClcblx0XHRyZXR1cm5cblx0dmFyIGNob3JkID0gdGhpcy5maW5kQ2hvcmQoZWxlbSk7XG5cdGlmIChjaG9yZCkge1xuXHRcdHZhciBjID0gdGhpcy5pbnRlcnByZXRDaG9yZChjaG9yZCk7XG5cdFx0Ly8gSWYgdGhpcyBpc24ndCBhIHJlY29nbml6ZWQgY2hvcmQsIGp1c3QgY29tcGxldGVseSBpZ25vcmUgaXQuXG5cdFx0aWYgKGMpIHtcblx0XHRcdC8vIElmIHdlIGV2ZXIgaGF2ZSBhIGNob3JkIGluIHRoaXMgdm9pY2UsIHRoZW4gd2UgYWRkIHRoZSBjaG9yZCB0cmFjay5cblx0XHRcdC8vIEhvd2V2ZXIsIGlmIHRoZXJlIGFyZSBjaG9yZHMgb24gbW9yZSB0aGFuIG9uZSB2b2ljZSwgdGhlbiBqdXN0IHVzZSB0aGUgZmlyc3Qgdm9pY2UuXG5cdFx0XHRpZiAodGhpcy5jaG9yZFRyYWNrLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHR0aGlzLmNob3JkVHJhY2sucHVzaCh7IGNtZDogJ3Byb2dyYW0nLCBjaGFubmVsOiB0aGlzLmNob3JkQ2hhbm5lbCwgaW5zdHJ1bWVudDogdGhpcy5jaG9yZEluc3RydW1lbnQgfSk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMubGFzdENob3JkID0gYztcblx0XHRcdHZhciBiYXJCZWF0ID0gY2FsY0JlYXQodGhpcy5sYXN0QmFyVGltZSwgdGltZVRvUmVhbFRpbWUoZWxlbS50aW1lKSk7XG5cdFx0XHR0aGlzLmN1cnJlbnRDaG9yZHMucHVzaCh7IGNob3JkOiB0aGlzLmxhc3RDaG9yZCwgYmVhdDogYmFyQmVhdCwgc3RhcnQ6IHRpbWVUb1JlYWxUaW1lKGVsZW0udGltZSkgfSk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIHJlc29sdmVQaXRjaChjdXJyZW50Q2hvcmQsIHR5cGUsIGZpcnN0Qm9vbSwgbmV3QmFzcykge1xuXHR2YXIgcmV0ID0gW11cblx0aWYgKCFjdXJyZW50Q2hvcmQpXG5cdFx0cmV0dXJuIHJldFxuXHRpZiAodHlwZS5pbmRleE9mKCdib29tJykgPj0gMClcblx0XHRyZXQucHVzaChmaXJzdEJvb20gPyBjdXJyZW50Q2hvcmQuYm9vbSA6IGN1cnJlbnRDaG9yZC5ib29tMilcblx0ZWxzZSBpZiAobmV3QmFzcylcblx0XHRyZXQucHVzaChjdXJyZW50Q2hvcmQuYm9vbSlcblx0dmFyIG51bUNob3JkTm90ZXMgPSBjdXJyZW50Q2hvcmQuY2hpY2subGVuZ3RoXG5cdGlmICh0eXBlLmluZGV4T2YoJ2NoaWNrJykgPj0gMCkge1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQ2hvcmROb3RlczsgaSsrKVxuXHRcdFx0cmV0LnB1c2goY3VycmVudENob3JkLmNoaWNrW2ldKVxuXHR9XG5cdHN3aXRjaCAodHlwZSkge1xuXHRcdGNhc2UgJ0RPJzogcmV0LnB1c2goY3VycmVudENob3JkLmNoaWNrWzBdKTsgYnJlYWs7XG5cdFx0Y2FzZSAnTUknOiByZXQucHVzaChjdXJyZW50Q2hvcmQuY2hpY2tbMV0pOyBicmVhaztcblx0XHRjYXNlICdTT0wnOiByZXQucHVzaChleHRyYWN0Tm90ZShjdXJyZW50Q2hvcmQsMikpOyBicmVhaztcblx0XHRjYXNlICdUSSc6IHJldC5wdXNoKGV4dHJhY3ROb3RlKGN1cnJlbnRDaG9yZCwzKSk7IGJyZWFrO1xuXHRcdGNhc2UgJ1RPUCc6IHJldC5wdXNoKGV4dHJhY3ROb3RlKGN1cnJlbnRDaG9yZCw0KSk7IGJyZWFrO1xuXHRcdGNhc2UgJ2RvJzogcmV0LnB1c2goY3VycmVudENob3JkLmNoaWNrWzBdKzEyKTsgYnJlYWs7XG5cdFx0Y2FzZSAnbWknOiByZXQucHVzaChjdXJyZW50Q2hvcmQuY2hpY2tbMV0rMTIpOyBicmVhaztcblx0XHRjYXNlICdzb2wnOiByZXQucHVzaChleHRyYWN0Tm90ZShjdXJyZW50Q2hvcmQsMikrMTIpOyBicmVhaztcblx0XHRjYXNlICd0aSc6IHJldC5wdXNoKGV4dHJhY3ROb3RlKGN1cnJlbnRDaG9yZCwzKSsxMik7IGJyZWFrO1xuXHRcdGNhc2UgJ3RvcCc6IHJldC5wdXNoKGV4dHJhY3ROb3RlKGN1cnJlbnRDaG9yZCw0KSsxMik7IGJyZWFrO1xuXHR9XG5cdHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gZXh0cmFjdE5vdGUoY2hvcmQsIGluZGV4KSB7XG5cdC8vIFRoaXMgY3JlYXRlcyBhbiBhcnBlZ2dpbyBub3RlIG5vIG1hdHRlciBob3cgbWFueSBub3RlcyBhcmUgaW4gdGhlIGNob3JkIC0gaWYgaXQgcnVucyBvdXQgb2Ygbm90ZXMgaXQgY29udGludWVzIGluIHRoZSBuZXh0IG9jdGF2ZVxuXHR2YXIgb2N0YXZlID0gTWF0aC5mbG9vcihpbmRleCAvIGNob3JkLmNoaWNrLmxlbmd0aClcblx0dmFyIG5vdGUgPSBjaG9yZC5jaGlja1tpbmRleCAlIGNob3JkLmNoaWNrLmxlbmd0aF1cblx0Ly9jb25zb2xlLmxvZyhjaG9yZC5jaGljaywge2luZGV4LCBvY3RhdmUsIG5vdGV9LCBpbmRleCAlIGNob3JkLmNoaWNrLmxlbmd0aClcblx0cmV0dXJuIG5vdGUgKyBvY3RhdmUgKiAxMlxufVxuXG5mdW5jdGlvbiBwYXJzZUdDaG9yZChnY2hvcmQpIHtcblx0Ly8gVE9ETy1QRVI6IFRoZSBzcGVjIGlzIG1vcmUgY29tcGxpY2F0ZWQgdGhhbiB0aGlzIGJ1dCBmb3Igbm93IHRoaXMgd2lsbCBub3QgdHJ5IHRvIGRvIGFueXRoaW5nIHdpdGggZXJyb3IgY2FzZXMgbGlrZSB0aGUgd3JvbmcgbnVtYmVyIG9mIGJlYXRzLlxuXHR2YXIgcGF0dGVybiA9IFtdXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZ2Nob3JkLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGNoID0gZ2Nob3JkW2ldXG5cdFx0c3dpdGNoKGNoKSB7XG5cdFx0XHRjYXNlICd6JyA6IHBhdHRlcm4ucHVzaCgnJyk7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnMicgOiBwYXR0ZXJuLnB1c2goJycpOyBicmVhazsgLy8gVE9ETy1QRVI6IFRoaXMgc2hvdWxkIGV4dGVuZCB0aGUgbGFzdCBub3RlLCBidXQgdGhhdCdzIGEgc21hbGwgZWZmZWN0XG5cdFx0XHRjYXNlICdjJyA6IHBhdHRlcm4ucHVzaCgnY2hpY2snKTsgYnJlYWs7XG5cdFx0XHRjYXNlICdiJyA6IHBhdHRlcm4ucHVzaCgnYm9vbSZjaGljaycpOyBicmVhaztcblx0XHRcdGNhc2UgJ2YnIDogcGF0dGVybi5wdXNoKCdib29tJyk7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnRycgOiBwYXR0ZXJuLnB1c2goJ0RPJyk7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnSCcgOiBwYXR0ZXJuLnB1c2goJ01JJyk7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnSScgOiBwYXR0ZXJuLnB1c2goJ1NPTCcpOyBicmVhaztcblx0XHRcdGNhc2UgJ0onIDogcGF0dGVybi5wdXNoKCdUSScpOyBicmVhaztcblx0XHRcdGNhc2UgJ0snIDogcGF0dGVybi5wdXNoKCdUT1AnKTsgYnJlYWs7XG5cdFx0XHRjYXNlICdnJyA6IHBhdHRlcm4ucHVzaCgnZG8nKTsgYnJlYWs7XG5cdFx0XHRjYXNlICdoJyA6IHBhdHRlcm4ucHVzaCgnbWknKTsgYnJlYWs7XG5cdFx0XHRjYXNlICdpJyA6IHBhdHRlcm4ucHVzaCgnc29sJyk7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnaicgOiBwYXR0ZXJuLnB1c2goJ3RpJyk7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnaycgOiBwYXR0ZXJuLnB1c2goJ3RvcCcpOyBicmVhaztcblx0XHR9XG5cdH1cblx0cmV0dXJuIHBhdHRlcm5cbn1cblxuLy8gVGhpcyByZXR1cm5zIGFuIGFycmF5IHRoYXQgaGFzIGEgY2hvcmQgZm9yIGVhY2ggMS84dGggbm90ZSBwb3NpdGlvbiBpbiB0aGUgY3VycmVudCBtZWFzdXJlXG5mdW5jdGlvbiBleHBhbmRDdXJyZW50Q2hvcmRzKGN1cnJlbnRDaG9yZHMsIG51bTh0aE5vdGVzLCBiZWF0TGVuZ3RoKSB7XG5cdGJlYXRMZW5ndGggPSBiZWF0TGVuZ3RoICogOCAvLyB0aGlzIGlzIGV4cHJlc3NlZCBhcyBhIGZyYWN0aW9uLCBzbyB0aGF0IDAuMjUgaXMgYSBxdWFydGVyIG5vdGVzLiBXZSB3YW50IGl0IHRvIGJlIHRoZSBudW1iZXIgb2YgOHRoIG5vdGVzXG5cdHZhciBjaG9yZHMgPSBbXVxuXHRpZiAoY3VycmVudENob3Jkcy5sZW5ndGggPT09IDApXG5cdFx0cmV0dXJuIGNob3Jkc1xuXG5cdHZhciBjdXJyZW50Q2hvcmQgPSBjdXJyZW50Q2hvcmRzWzBdLmNob3JkXG5cdGZvciAodmFyIGkgPSAxOyBpIDwgY3VycmVudENob3Jkcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBjdXJyZW50ID0gY3VycmVudENob3Jkc1tpXVxuXHRcdHdoaWxlIChjaG9yZHMubGVuZ3RoIDwgY3VycmVudC5iZWF0KSB7XG5cdFx0XHRjaG9yZHMucHVzaChjdXJyZW50Q2hvcmQpXG5cdFx0fVxuXHRcdGN1cnJlbnRDaG9yZCA9IGN1cnJlbnQuY2hvcmRcblx0fVxuXHR3aGlsZSAoY2hvcmRzLmxlbmd0aCA8IG51bTh0aE5vdGVzKVxuXHRcdGNob3Jkcy5wdXNoKGN1cnJlbnRDaG9yZClcblx0cmV0dXJuIGNob3Jkc1xufVxuXG5mdW5jdGlvbiBjYWxjQmVhdChtZWFzdXJlU3RhcnQsIGN1cnJUaW1lKSB7XG5cdHZhciBkaXN0YW5jZUZyb21TdGFydCA9IGN1cnJUaW1lIC0gbWVhc3VyZVN0YXJ0O1xuXHRyZXR1cm4gZGlzdGFuY2VGcm9tU3RhcnQgKiA4O1xufVxuXG5DaG9yZFRyYWNrLnByb3RvdHlwZS5icmVha1N5bm9ueW1zID0gWydicmVhaycsICcoYnJlYWspJywgJ25vIGNob3JkJywgJ24uYy4nLCAndGFjZXQnXTtcblxuQ2hvcmRUcmFjay5wcm90b3R5cGUuYmFzc2VzID0ge1xuXHQnQSc6IDMzLCAnQic6IDM1LCAnQyc6IDM2LCAnRCc6IDM4LCAnRSc6IDQwLCAnRic6IDQxLCAnRyc6IDQzXG59O1xuXG5DaG9yZFRyYWNrLnByb3RvdHlwZS5jaG9yZEludGVydmFscyA9IHtcblx0Ly8gZGltaW5pc2hlZCAoYWxsIGZsYXQgNSBjaG9yZHMpXG5cdCdkaW0nOiBbMCwgMywgNl0sXG5cdCfCsCc6IFswLCAzLCA2XSxcblx0J8uaJzogWzAsIDMsIDZdLFxuXG5cdCdkaW03JzogWzAsIDMsIDYsIDldLFxuXHQnwrA3JzogWzAsIDMsIDYsIDldLFxuXHQny5o3JzogWzAsIDMsIDYsIDldLFxuXG5cdCfDuDcnOiBbMCwgMywgNiwgMTBdLFxuXHQnbTcoYjUpJzogWzAsIDMsIDYsIDEwXSxcblx0J203YjUnOiBbMCwgMywgNiwgMTBdLFxuXHQnbTfima01JzogWzAsIDMsIDYsIDEwXSxcblx0Jy03KGI1KSc6IFswLCAzLCA2LCAxMF0sXG5cdCctN2I1JzogWzAsIDMsIDYsIDEwXSxcblxuXHQnN2I1JzogWzAsIDQsIDYsIDEwXSxcblx0JzcoYjUpJzogWzAsIDQsIDYsIDEwXSxcblx0Jzfima01JzogWzAsIDQsIDYsIDEwXSxcblxuXHQnNyhiOSxiNSknOiBbMCwgNCwgNiwgMTAsIDEzXSxcblx0JzdiOSxiNSc6IFswLCA0LCA2LCAxMCwgMTNdLFxuXHQnNygjOSxiNSknOiBbMCwgNCwgNiwgMTAsIDE1XSxcblx0JzcjOWI1JzogWzAsIDQsIDYsIDEwLCAxNV0sXG5cdCdtYWo3KGI1KSc6IFswLCA0LCA2LCAxMV0sXG5cdCdtYWo3YjUnOiBbMCwgNCwgNiwgMTFdLFxuXHQnMTMoYjUpJzogWzAsIDQsIDYsIDEwLCAxNCwgMjFdLFxuXHQnMTNiNSc6IFswLCA0LCA2LCAxMCwgMTQsIDIxXSxcblxuXHQvLyBtaW5vciAoYWxsIG5vcm1hbCA1LCBtaW5vciAzIGNob3Jkcylcblx0J20nOiBbMCwgMywgN10sXG5cdCctJzogWzAsIDMsIDddLFxuXHQnbTYnOiBbMCwgMywgNywgOV0sXG5cdCctNic6IFswLCAzLCA3LCA5XSxcblx0J203JzogWzAsIDMsIDcsIDEwXSxcblx0Jy03JzogWzAsIDMsIDcsIDEwXSxcblxuXHQnLShiNiknOiBbMCwgMywgNywgOF0sXG5cdCctYjYnOiBbMCwgMywgNywgOF0sXG5cdCctNi85JzogWzAsIDMsIDcsIDksIDE0XSxcblx0Jy03KGI5KSc6IFswLCAzLCA3LCAxMCwgMTNdLFxuXHQnLTdiOSc6IFswLCAzLCA3LCAxMCwgMTNdLFxuXHQnLW1hajcnOiBbMCwgMywgNywgMTFdLFxuXHQnLTkrNyc6IFswLCAzLCA3LCAxMSwgMTNdLFxuXHQnLTExJzogWzAsIDMsIDcsIDExLCAxNCwgMTddLFxuXHQnbTExJzogWzAsIDMsIDcsIDExLCAxNCwgMTddLFxuXHQnLW1hajknOiBbMCwgMywgNywgMTEsIDE0XSxcblx0Jy3iiIY5JzogWzAsIDMsIDcsIDExLCAxNF0sXG5cdCdtTTknOiBbMCwgMywgNywgMTEsIDE0XSxcblxuXHQvLyBtYWpvciAoYWxsIG5vcm1hbCA1LCBtYWpvciAzIGNob3Jkcylcblx0J00nOiBbMCwgNCwgN10sXG5cdCc2JzogWzAsIDQsIDcsIDldLFxuXHQnNi85JzogWzAsIDQsIDcsIDksIDE0XSxcblx0JzZhZGQ5JzogWzAsIDQsIDcsIDksIDE0XSxcblx0JzY5JzogWzAsIDQsIDcsIDksIDE0XSxcblxuXHQnNyc6IFswLCA0LCA3LCAxMF0sXG5cdCc5JzogWzAsIDQsIDcsIDEwLCAxNF0sXG5cdCcxMSc6IFswLCA3LCAxMCwgMTQsIDE3XSxcblx0JzEzJzogWzAsIDQsIDcsIDEwLCAxNCwgMjFdLFxuXHQnN2I5JzogWzAsIDQsIDcsIDEwLCAxM10sXG5cdCc34pmtOSc6IFswLCA0LCA3LCAxMCwgMTNdLFxuXHQnNyhiOSknOiBbMCwgNCwgNywgMTAsIDEzXSxcblx0JzcoIzkpJzogWzAsIDQsIDcsIDEwLCAxNV0sXG5cdCc3IzknOiBbMCwgNCwgNywgMTAsIDE1XSxcblx0JygxMyknOiBbMCwgNCwgNywgMTAsIDE0LCAyMV0sXG5cdCc3KDksMTMpJzogWzAsIDQsIDcsIDEwLCAxNCwgMjFdLFxuXHQnNygjOSxiMTMpJzogWzAsIDQsIDcsIDEwLCAxNSwgMjBdLFxuXHQnNygjMTEpJzogWzAsIDQsIDcsIDEwLCAxNCwgMThdLFxuXHQnNyMxMSc6IFswLCA0LCA3LCAxMCwgMTQsIDE4XSxcblx0JzcoYjEzKSc6IFswLCA0LCA3LCAxMCwgMjBdLFxuXHQnN2IxMyc6IFswLCA0LCA3LCAxMCwgMjBdLFxuXHQnOSgjMTEpJzogWzAsIDQsIDcsIDEwLCAxNCwgMThdLFxuXHQnOSMxMSc6IFswLCA0LCA3LCAxMCwgMTQsIDE4XSxcblx0JzEzKCMxMSknOiBbMCwgNCwgNywgMTAsIDE4LCAyMV0sXG5cdCcxMyMxMSc6IFswLCA0LCA3LCAxMCwgMTgsIDIxXSxcblxuXHQnbWFqNyc6IFswLCA0LCA3LCAxMV0sXG5cdCfiiIY3JzogWzAsIDQsIDcsIDExXSxcblx0J86UNyc6IFswLCA0LCA3LCAxMV0sXG5cdCdtYWo5JzogWzAsIDQsIDcsIDExLCAxNF0sXG5cdCdtYWo3KDkpJzogWzAsIDQsIDcsIDExLCAxNF0sXG5cdCdtYWo3KDExKSc6IFswLCA0LCA3LCAxMSwgMTddLFxuXHQnbWFqNygjMTEpJzogWzAsIDQsIDcsIDExLCAxOF0sXG5cdCdtYWo3KDEzKSc6IFswLCA0LCA3LCAxNCwgMjFdLFxuXHQnbWFqNyg5LDEzKSc6IFswLCA0LCA3LCAxMSwgMTQsIDIxXSxcblxuXHQnN3N1czQnOiBbMCwgNSwgNywgMTBdLFxuXHQnbTdzdXM0JzogWzAsIDMsIDcsIDEwLCAxN10sXG5cdCdzdXM0JzogWzAsIDUsIDddLFxuXHQnc3VzMic6IFswLCAyLCA3XSxcblx0JzdzdXMyJzogWzAsIDIsIDcsIDEwXSxcblx0JzlzdXM0JzogWzAsIDUsIDcsIDEwLCAxNF0sXG5cdCcxM3N1czQnOiBbMCwgNSwgNywgMTAsIDE0LCAyMV0sXG5cblx0Ly8gYXVnbWVudGVkIChhbGwgc2hhcnAgNSBjaG9yZHMpXG5cdCdhdWc3JzogWzAsIDQsIDgsIDEwXSxcblx0Jys3JzogWzAsIDQsIDgsIDEwXSxcblx0JysnOiBbMCwgNCwgOF0sXG5cdCc3IzUnOiBbMCwgNCwgOCwgMTBdLFxuXHQnN+KZrzUnOiBbMCwgNCwgOCwgMTBdLFxuXHQnNys1JzogWzAsIDQsIDgsIDEwXSxcblx0JzkjNSc6IFswLCA0LCA4LCAxMCwgMTRdLFxuXHQnOeKZrzUnOiBbMCwgNCwgOCwgMTAsIDE0XSxcblx0JzkrNSc6IFswLCA0LCA4LCAxMCwgMTRdLFxuXHQnLTcoIzUpJzogWzAsIDMsIDgsIDEwXSxcblx0Jy03IzUnOiBbMCwgMywgOCwgMTBdLFxuXHQnNygjNSknOiBbMCwgNCwgOCwgMTBdLFxuXHQnNyhiOSwjNSknOiBbMCwgNCwgOCwgMTAsIDEzXSxcblx0JzdiOSM1JzogWzAsIDQsIDgsIDEwLCAxM10sXG5cdCdtYWo3KCM1KSc6IFswLCA0LCA4LCAxMV0sXG5cdCdtYWo3IzUnOiBbMCwgNCwgOCwgMTFdLFxuXHQnbWFqNygjNSwjMTEpJzogWzAsIDQsIDgsIDExLCAxOF0sXG5cdCdtYWo3IzUjMTEnOiBbMCwgNCwgOCwgMTEsIDE4XSxcblx0JzkoIzUpJzogWzAsIDQsIDgsIDEwLCAxNF0sXG5cdCcxMygjNSknOiBbMCwgNCwgOCwgMTAsIDE0LCAyMV0sXG5cdCcxMyM1JzogWzAsIDQsIDgsIDEwLCAxNCwgMjFdLFxuXHQvLyBNQUUgUG93ZXIgY2hvcmRzIGFkZGVkIDEwIEFwcmlsIDIwMjRcblx0JzUnOiBbMCwgN10sXG5cdCc1KDgpJzogWzAsIDcsIDEyXSxcblx0JzVhZGQ4JzogWzAsIDcsIDEyXVxuXG59O1xuXG5DaG9yZFRyYWNrLnByb3RvdHlwZS5yaHl0aG1QYXR0ZXJucyA9IHtcblx0XCIyLzJcIjogWydib29tJywgJycsICcnLCAnJywgJ2NoaWNrJywgJycsICcnLCAnJ10sXG5cdFwiMy8yXCI6IFsnYm9vbScsICcnLCAnJywgJycsICdjaGljaycsICcnLCAnJywgJycsICdjaGljaycsICcnLCAnJywgJyddLFxuXHRcIjQvMlwiOiBbJ2Jvb20nLCAnJywgJycsICcnLCAnY2hpY2snLCAnJywgJycsICcnLCAnYm9vbScsICcnLCAnJywgJycsICdjaGljaycsICcnLCAnJywgJyddLFxuXG5cdFwiMi80XCI6IFsnYm9vbScsICcnLCAnY2hpY2snLCAnJ10sXG5cdFwiMy80XCI6IFsnYm9vbScsICcnLCAnY2hpY2snLCAnJywgJ2NoaWNrJywgJyddLFxuXHRcIjQvNFwiOiBbJ2Jvb20nLCAnJywgJ2NoaWNrJywgJycsICdib29tJywgJycsICdjaGljaycsICcnXSxcblx0XCI1LzRcIjogWydib29tJywgJycsICdjaGljaycsICcnLCAnY2hpY2snLCAnJywgJ2Jvb20nLCAnJywgJ2NoaWNrJywgJyddLFxuXHRcIjYvNFwiOiBbJ2Jvb20nLCAnJywgJ2NoaWNrJywgJycsICdib29tJywgJycsICdjaGljaycsICcnLCAnYm9vbScsICcnLCAnY2hpY2snLCAnJ10sXG5cblx0XCIzLzhcIjogWydib29tJywgJycsICdjaGljayddLFxuXHRcIjUvOFwiOiBbJ2Jvb20nLCAnY2hpY2snLCAnY2hpY2snLCAnYm9vbScsICdjaGljayddLFxuXHRcIjYvOFwiOiBbJ2Jvb20nLCAnJywgJ2NoaWNrJywgJ2Jvb20nLCAnJywgJ2NoaWNrJ10sXG5cdFwiNy84XCI6IFsnYm9vbScsICdjaGljaycsICdjaGljaycsICdib29tJywgJ2NoaWNrJywgJ2Jvb20nLCAnY2hpY2snXSxcblx0XCI5LzhcIjogWydib29tJywgJycsICdjaGljaycsICdib29tJywgJycsICdjaGljaycsICdib29tJywgJycsICdjaGljayddLFxuXHRcIjEwLzhcIjogWydib29tJywgJ2NoaWNrJywgJ2NoaWNrJywgJ2Jvb20nLCAnY2hpY2snLCAnY2hpY2snLCAnYm9vbScsICdjaGljaycsICdib29tJywgJ2NoaWNrJ10sXG5cdFwiMTEvOFwiOiBbJ2Jvb20nLCAnY2hpY2snLCAnY2hpY2snLCAnYm9vbScsICdjaGljaycsICdjaGljaycsICdib29tJywgJ2NoaWNrJywgJ2Jvb20nLCAnY2hpY2snLCAnY2hpY2snXSxcblx0XCIxMi84XCI6IFsnYm9vbScsICcnLCAnY2hpY2snLCAnYm9vbScsICcnLCAnY2hpY2snLCAnYm9vbScsICcnLCAnY2hpY2snLCAnYm9vbScsICcnLCAnY2hpY2snXSxcbn07XG5cbi8vIFRPRE8tUEVSOiB0aGVzZSBhcmUgcmVwZWF0ZWQgaW4gZmxhdHRlbmVyLiBDYW4gaXQgYmUgc2hhcmVkP1xuXG5mdW5jdGlvbiB0aW1lVG9SZWFsVGltZSh0aW1lKSB7XG5cdHJldHVybiB0aW1lIC8gMTAwMDAwMDtcbn1cblxuZnVuY3Rpb24gZHVyYXRpb25Sb3VuZGVkKGR1cmF0aW9uLCB0ZW1wb0NoYW5nZUZhY3Rvcikge1xuXHRyZXR1cm4gTWF0aC5yb3VuZChkdXJhdGlvbiAqIHRlbXBvQ2hhbmdlRmFjdG9yICogMTAwMDAwMCkgLyAxMDAwMDAwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENob3JkVHJhY2s7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/chord-track.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/create-note-map.js":
/*!*********************************************************!*\
  !*** ./node_modules/abcjs/src/synth/create-note-map.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// Convert the input structure to a more useful structure where each item has a length of its own.\n\nvar instrumentIndexToName = __webpack_require__(/*! ./instrument-index-to-name */ \"(ssr)/./node_modules/abcjs/src/synth/instrument-index-to-name.js\");\n\nvar createNoteMap = function(sequence) {\n\tvar map = [];\n\tfor (var i = 0; i < sequence.tracks.length; i++)\n\t\tmap.push([]);\n\n\t// TODO-PER: handle more than one note in a track\n\tvar nextNote = {};\n\tvar currentInstrument = instrumentIndexToName[0];\n\t// ev.start and ev.duration are in whole notes. Need to turn them into\n\tsequence.tracks.forEach(function(track, i) {\n\t\ttrack.forEach(function(ev) {\n\t\t\tswitch (ev.cmd) {\n\t\t\t\tcase \"note\":\n\t\t\t\t\t// ev contains:\n\t\t\t\t\t// {\"cmd\":\"note\",\"pitch\":72,\"volume\":95,\"start\":0.125,\"duration\":0.25,\"instrument\":0,\"gap\":0}\n\t\t\t\t\t// where start and duration are in whole notes, gap is in 1/1920 of a second (i.e. MIDI ticks)\n\t\t\t\t\tvar inst = ev.instrument !== undefined ? instrumentIndexToName[ev.instrument] : currentInstrument\n\t\t\t\t\tif (ev.duration > 0) {\n\t\t\t\t\t\tvar gap = ev.gap ? ev.gap : 0;\n\t\t\t\t\t\tvar len = ev.duration;\n\t\t\t\t\t\tgap = Math.min(gap, len * 2 / 3);\n\t\t\t\t\t\tvar obj = {\n\t\t\t\t\t\t\tpitch: ev.pitch,\n\t\t\t\t\t\t\tinstrument: inst,\n\t\t\t\t\t\t\tstart: Math.round((ev.start) * 1000000)/1000000,\n\t\t\t\t\t\t\tend: Math.round((ev.start + len - gap) * 1000000)/1000000,\n\t\t\t\t\t\t\tvolume: ev.volume\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (ev.startChar)\n\t\t\t\t\t\t\tobj.startChar = ev.startChar;\n\t\t\t\t\t\tif (ev.endChar)\n\t\t\t\t\t\t\tobj.endChar = ev.endChar;\n\t\t\t\t\t\tif (ev.style)\n\t\t\t\t\t\t\tobj.style = ev.style;\n\t\t\t\t\t\tif (ev.cents)\n\t\t\t\t\t\t\tobj.cents = ev.cents;\n\t\t\t\t\t\tmap[i].push(obj);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"program\":\n\t\t\t\t\tcurrentInstrument = instrumentIndexToName[ev.instrument];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"text\":\n\t\t\t\t\t// Ignore the track names - that is just for midi files.\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t// TODO-PER: handle other event types\n\t\t\t\t\tconsole.log(\"Unhandled midi event\", ev);\n\t\t\t}\n\t\t});\n\t});\n\treturn map;\n};\n\nmodule.exports = createNoteMap;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2NyZWF0ZS1ub3RlLW1hcC5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSw0QkFBNEIsbUJBQU8sQ0FBQyxvR0FBNEI7O0FBRWhFO0FBQ0E7QUFDQSxpQkFBaUIsNEJBQTRCO0FBQzdDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy9zeW50aC9jcmVhdGUtbm90ZS1tYXAuanM/Nzg2NiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb252ZXJ0IHRoZSBpbnB1dCBzdHJ1Y3R1cmUgdG8gYSBtb3JlIHVzZWZ1bCBzdHJ1Y3R1cmUgd2hlcmUgZWFjaCBpdGVtIGhhcyBhIGxlbmd0aCBvZiBpdHMgb3duLlxuXG52YXIgaW5zdHJ1bWVudEluZGV4VG9OYW1lID0gcmVxdWlyZSgnLi9pbnN0cnVtZW50LWluZGV4LXRvLW5hbWUnKTtcblxudmFyIGNyZWF0ZU5vdGVNYXAgPSBmdW5jdGlvbihzZXF1ZW5jZSkge1xuXHR2YXIgbWFwID0gW107XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc2VxdWVuY2UudHJhY2tzLmxlbmd0aDsgaSsrKVxuXHRcdG1hcC5wdXNoKFtdKTtcblxuXHQvLyBUT0RPLVBFUjogaGFuZGxlIG1vcmUgdGhhbiBvbmUgbm90ZSBpbiBhIHRyYWNrXG5cdHZhciBuZXh0Tm90ZSA9IHt9O1xuXHR2YXIgY3VycmVudEluc3RydW1lbnQgPSBpbnN0cnVtZW50SW5kZXhUb05hbWVbMF07XG5cdC8vIGV2LnN0YXJ0IGFuZCBldi5kdXJhdGlvbiBhcmUgaW4gd2hvbGUgbm90ZXMuIE5lZWQgdG8gdHVybiB0aGVtIGludG9cblx0c2VxdWVuY2UudHJhY2tzLmZvckVhY2goZnVuY3Rpb24odHJhY2ssIGkpIHtcblx0XHR0cmFjay5mb3JFYWNoKGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHRzd2l0Y2ggKGV2LmNtZCkge1xuXHRcdFx0XHRjYXNlIFwibm90ZVwiOlxuXHRcdFx0XHRcdC8vIGV2IGNvbnRhaW5zOlxuXHRcdFx0XHRcdC8vIHtcImNtZFwiOlwibm90ZVwiLFwicGl0Y2hcIjo3MixcInZvbHVtZVwiOjk1LFwic3RhcnRcIjowLjEyNSxcImR1cmF0aW9uXCI6MC4yNSxcImluc3RydW1lbnRcIjowLFwiZ2FwXCI6MH1cblx0XHRcdFx0XHQvLyB3aGVyZSBzdGFydCBhbmQgZHVyYXRpb24gYXJlIGluIHdob2xlIG5vdGVzLCBnYXAgaXMgaW4gMS8xOTIwIG9mIGEgc2Vjb25kIChpLmUuIE1JREkgdGlja3MpXG5cdFx0XHRcdFx0dmFyIGluc3QgPSBldi5pbnN0cnVtZW50ICE9PSB1bmRlZmluZWQgPyBpbnN0cnVtZW50SW5kZXhUb05hbWVbZXYuaW5zdHJ1bWVudF0gOiBjdXJyZW50SW5zdHJ1bWVudFxuXHRcdFx0XHRcdGlmIChldi5kdXJhdGlvbiA+IDApIHtcblx0XHRcdFx0XHRcdHZhciBnYXAgPSBldi5nYXAgPyBldi5nYXAgOiAwO1xuXHRcdFx0XHRcdFx0dmFyIGxlbiA9IGV2LmR1cmF0aW9uO1xuXHRcdFx0XHRcdFx0Z2FwID0gTWF0aC5taW4oZ2FwLCBsZW4gKiAyIC8gMyk7XG5cdFx0XHRcdFx0XHR2YXIgb2JqID0ge1xuXHRcdFx0XHRcdFx0XHRwaXRjaDogZXYucGl0Y2gsXG5cdFx0XHRcdFx0XHRcdGluc3RydW1lbnQ6IGluc3QsXG5cdFx0XHRcdFx0XHRcdHN0YXJ0OiBNYXRoLnJvdW5kKChldi5zdGFydCkgKiAxMDAwMDAwKS8xMDAwMDAwLFxuXHRcdFx0XHRcdFx0XHRlbmQ6IE1hdGgucm91bmQoKGV2LnN0YXJ0ICsgbGVuIC0gZ2FwKSAqIDEwMDAwMDApLzEwMDAwMDAsXG5cdFx0XHRcdFx0XHRcdHZvbHVtZTogZXYudm9sdW1lXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0aWYgKGV2LnN0YXJ0Q2hhcilcblx0XHRcdFx0XHRcdFx0b2JqLnN0YXJ0Q2hhciA9IGV2LnN0YXJ0Q2hhcjtcblx0XHRcdFx0XHRcdGlmIChldi5lbmRDaGFyKVxuXHRcdFx0XHRcdFx0XHRvYmouZW5kQ2hhciA9IGV2LmVuZENoYXI7XG5cdFx0XHRcdFx0XHRpZiAoZXYuc3R5bGUpXG5cdFx0XHRcdFx0XHRcdG9iai5zdHlsZSA9IGV2LnN0eWxlO1xuXHRcdFx0XHRcdFx0aWYgKGV2LmNlbnRzKVxuXHRcdFx0XHRcdFx0XHRvYmouY2VudHMgPSBldi5jZW50cztcblx0XHRcdFx0XHRcdG1hcFtpXS5wdXNoKG9iaik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwicHJvZ3JhbVwiOlxuXHRcdFx0XHRcdGN1cnJlbnRJbnN0cnVtZW50ID0gaW5zdHJ1bWVudEluZGV4VG9OYW1lW2V2Lmluc3RydW1lbnRdO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwidGV4dFwiOlxuXHRcdFx0XHRcdC8vIElnbm9yZSB0aGUgdHJhY2sgbmFtZXMgLSB0aGF0IGlzIGp1c3QgZm9yIG1pZGkgZmlsZXMuXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0Ly8gVE9ETy1QRVI6IGhhbmRsZSBvdGhlciBldmVudCB0eXBlc1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiVW5oYW5kbGVkIG1pZGkgZXZlbnRcIiwgZXYpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcblx0cmV0dXJuIG1hcDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlTm90ZU1hcDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/create-note-map.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/create-synth-control.js":
/*!**************************************************************!*\
  !*** ./node_modules/abcjs/src/synth/create-synth-control.js ***!
  \**************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var supportsAudio = __webpack_require__(/*! ./supports-audio */ \"(ssr)/./node_modules/abcjs/src/synth/supports-audio.js\");\nvar registerAudioContext = __webpack_require__(/*! ./register-audio-context */ \"(ssr)/./node_modules/abcjs/src/synth/register-audio-context.js\");\nvar activeAudioContext = __webpack_require__(/*! ./active-audio-context */ \"(ssr)/./node_modules/abcjs/src/synth/active-audio-context.js\");\n\nvar loopImage = __webpack_require__(/*! ./images/loop.svg.js */ \"(ssr)/./node_modules/abcjs/src/synth/images/loop.svg.js\");\nvar playImage = __webpack_require__(/*! ./images/play.svg.js */ \"(ssr)/./node_modules/abcjs/src/synth/images/play.svg.js\");\nvar pauseImage = __webpack_require__(/*! ./images/pause.svg.js */ \"(ssr)/./node_modules/abcjs/src/synth/images/pause.svg.js\");\nvar loadingImage = __webpack_require__(/*! ./images/loading.svg.js */ \"(ssr)/./node_modules/abcjs/src/synth/images/loading.svg.js\");\nvar resetImage = __webpack_require__(/*! ./images/reset.svg.js */ \"(ssr)/./node_modules/abcjs/src/synth/images/reset.svg.js\");\n\nfunction CreateSynthControl(parent, options) {\n\tvar self = this;\n\t// parent is either an element or a selector.\n\tif (typeof parent === \"string\") {\n\t\tvar selector = parent;\n\t\tparent = document.querySelector(selector);\n\t\tif (!parent)\n\t\t\tthrow new Error(\"Cannot find element \\\"\" + selector + \"\\\" in the DOM.\");\n\t} else if (!(parent instanceof HTMLElement))\n\t\tthrow new Error(\"The first parameter must be a valid element or selector in the DOM.\");\n\n\tself.parent = parent;\n\tself.options = {};\n\tif (options)\n\t\tself.options = Object.assign({},options);\n\n\t// This can be called in the following cases:\n\t// AC already registered and not suspended\n\t// AC already registered and suspended\n\t// AC not registered and not passed in\n\t// AC not registered but passed in (but suspended)\n\t// AC not registered but passed in (not suspended)\n\t// If the AC is already registered, then just use it - ignore what is passed in\n\t// Create the AC if necessary if there isn't one already.\n\t// We don't care right now if the AC is suspended - whenever a button is clicked then we check it.\n\tif (self.options.ac)\n\t\tregisterAudioContext(self.options.ac);\n\tbuildDom(self.parent, self.options);\n\tattachListeners(self);\n\n\tself.disable = function(isDisabled) {\n\t\tvar el = self.parent.querySelector(\".abcjs-inline-audio\");\n\t\tif (isDisabled)\n\t\t\tel.classList.add(\"abcjs-disabled\");\n\t\telse\n\t\t\tel.classList.remove(\"abcjs-disabled\");\n\t};\n\tself.setWarp = function(tempo, warp) {\n\t\tvar el = self.parent.querySelector(\".abcjs-midi-tempo\");\n\t\tel.value = Math.round(warp);\n\t\tself.setTempo(tempo)\n\t};\n\tself.setTempo = function(tempo) {\n\t\tvar el = self.parent.querySelector(\".abcjs-midi-current-tempo\");\n\t\tif (el)\n\t\t\tel.innerHTML = Math.round(tempo);\n\t};\n\tself.resetAll = function() {\n\t\tvar pushedButtons = self.parent.querySelectorAll(\".abcjs-pushed\");\n\t\tfor (var i = 0; i < pushedButtons.length; i++) {\n\t\t\tvar button = pushedButtons[i];\n\t\t\tbutton.classList.remove(\"abcjs-pushed\");\n\t\t}\n\t};\n\tself.pushPlay = function(push) {\n\t\tvar startButton = self.parent.querySelector(\".abcjs-midi-start\");\n\t\tif (!startButton)\n\t\t\treturn;\n\t\tif (push)\n\t\t\tstartButton.classList.add(\"abcjs-pushed\");\n\t\telse\n\t\t\tstartButton.classList.remove(\"abcjs-pushed\");\n\t};\n\tself.pushLoop = function(push) {\n\t\tvar loopButton = self.parent.querySelector(\".abcjs-midi-loop\");\n\t\tif (!loopButton)\n\t\t\treturn;\n\t\tif (push)\n\t\t\tloopButton.classList.add(\"abcjs-pushed\");\n\t\telse\n\t\t\tloopButton.classList.remove(\"abcjs-pushed\");\n\t};\n\n\tself.setProgress = function (percent, totalTime) {\n\t\tvar progressBackground = self.parent.querySelector(\".abcjs-midi-progress-background\");\n\t\tvar progressThumb = self.parent.querySelector(\".abcjs-midi-progress-indicator\");\n\t\tif (!progressBackground || !progressThumb)\n\t\t\treturn;\n\t\tvar width = progressBackground.clientWidth;\n\t\tvar left = width * percent;\n\t\tprogressThumb.style.left = left + \"px\";\n\n\t\tvar clock = self.parent.querySelector(\".abcjs-midi-clock\");\n\t\tif (clock) {\n\t\t\tvar totalSeconds = (totalTime * percent) / 1000;\n\t\t\tvar minutes = Math.floor(totalSeconds / 60);\n\t\t\tvar seconds = Math.floor(totalSeconds % 60);\n\t\t\tvar secondsFormatted = seconds < 10 ? \"0\" + seconds : seconds;\n\t\t\tclock.innerHTML = minutes + \":\" + secondsFormatted;\n\t\t}\n\t};\n\n\tif (self.options.afterResume) {\n\t\tvar isResumed = false;\n\t\tif (self.options.ac) {\n\t\t\tisResumed = self.options.ac.state !== \"suspended\";\n\t\t} else if (activeAudioContext()) {\n\t\t\tisResumed = activeAudioContext().state !== \"suspended\";\n\t\t}\n\t\tif (isResumed)\n\t\t\tself.options.afterResume();\n\t}\n}\n\nfunction buildDom(parent, options) {\n\tvar hasLoop = !!options.loopHandler;\n\tvar hasRestart = !!options.restartHandler;\n\tvar hasPlay = !!options.playHandler || !!options.playPromiseHandler;\n\tvar hasProgress = !!options.progressHandler;\n\tvar hasWarp = !!options.warpHandler;\n\tvar hasClock = options.hasClock !== false;\n\n\tvar html = '<div class=\"abcjs-inline-audio\">\\n';\n\tif (hasLoop) {\n\t\tvar repeatTitle = options.repeatTitle ? options.repeatTitle : \"Click to toggle play once/repeat.\";\n\t\tvar repeatAria = options.repeatAria ? options.repeatAria : repeatTitle;\n\t\thtml += '<button type=\"button\" class=\"abcjs-midi-loop abcjs-btn\" title=\"' + repeatTitle + '\" aria-label=\"' + repeatAria + '\">' + loopImage + '</button>\\n';\n\t}\n\tif (hasRestart) {\n\t\tvar restartTitle = options.restartTitle ? options.restartTitle : \"Click to go to beginning.\";\n\t\tvar restartAria = options.restartAria ? options.restartAria : restartTitle;\n\t\thtml += '<button type=\"button\" class=\"abcjs-midi-reset abcjs-btn\" title=\"' + restartTitle + '\" aria-label=\"' + restartAria + '\">' + resetImage + '</button>\\n';\n\t}\n\tif (hasPlay) {\n\t\tvar playTitle = options.playTitle ? options.playTitle : \"Click to play/pause.\";\n\t\tvar playAria = options.playAria ? options.playAria : playTitle;\n\t\thtml += '<button type=\"button\" class=\"abcjs-midi-start abcjs-btn\" title=\"' + playTitle + '\" aria-label=\"' + playAria + '\">' + playImage + pauseImage + loadingImage + '</button>\\n';\n\t}\n\tif (hasProgress) {\n\t\tvar randomTitle = options.randomTitle ? options.randomTitle : \"Click to change the playback position.\";\n\t\tvar randomAria = options.randomAria ? options.randomAria : randomTitle;\n\t\thtml += '<button type=\"button\" class=\"abcjs-midi-progress-background\" title=\"' + randomTitle + '\" aria-label=\"' + randomAria + '\"><span class=\"abcjs-midi-progress-indicator\"></span></button>\\n';\n\t}\n\tif (hasClock) {\n\t\thtml += '<span class=\"abcjs-midi-clock\"></span>\\n';\n\t}\n\tif (hasWarp) {\n\t\tvar warpTitle = options.warpTitle ? options.warpTitle : \"Change the playback speed.\";\n\t\tvar warpAria = options.warpAria ? options.warpAria : warpTitle;\n\t\tvar bpm = options.bpm ? options.bpm : \"BPM\";\n\t\thtml += '<span class=\"abcjs-tempo-wrapper\"><label><input class=\"abcjs-midi-tempo\" type=\"number\" min=\"1\" max=\"300\" value=\"100\" title=\"' + warpTitle + '\" aria-label=\"' + warpAria + '\">%</label><span>&nbsp;(<span class=\"abcjs-midi-current-tempo\"></span> ' + bpm + ')</span></span>\\n';\n\t}\n\thtml += '<div class=\"abcjs-css-warning\" style=\"font-size: 12px;color:red;border: 1px solid red;text-align: center;width: 300px;margin-top: 4px;font-weight: bold;border-radius: 4px;\">CSS required: load abcjs-audio.css</div>';\n\thtml += '</div>\\n';\n\tparent.innerHTML = html;\n}\n\nfunction acResumerMiddleWare(next, ev, playBtn, afterResume, isPromise) {\n\tvar needsInit = true;\n\tif (!activeAudioContext()) {\n\t\tregisterAudioContext();\n\t} else {\n\t\tneedsInit = activeAudioContext().state === \"suspended\";\n\t}\n\tif (!supportsAudio()) {\n\t\tthrow { status: \"NotSupported\", message: \"This browser does not support audio.\"};\n\t}\n\n\tif ((needsInit || isPromise) && playBtn)\n\t\tplayBtn.classList.add(\"abcjs-loading\");\n\n\tif (needsInit) {\n\t\tactiveAudioContext().resume().then(function () {\n\t\t\tif (afterResume) {\n\t\t\t\tafterResume().then(function (response) {\n\t\t\t\t\tdoNext(next, ev, playBtn, isPromise);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdoNext(next, ev, playBtn, isPromise);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tdoNext(next, ev, playBtn, isPromise);\n\t}\n}\n\nfunction doNext(next, ev, playBtn, isPromise) {\n\tif (isPromise) {\n\t\tnext(ev).then(function() {\n\t\t\tif (playBtn)\n\t\t\t\tplayBtn.classList.remove(\"abcjs-loading\");\n\t\t});\n\t} else {\n\t\tnext(ev);\n\t\tif (playBtn)\n\t\t\tplayBtn.classList.remove(\"abcjs-loading\");\n\t}\n}\n\nfunction attachListeners(self) {\n\tvar hasLoop = !!self.options.loopHandler;\n\tvar hasRestart = !!self.options.restartHandler;\n\tvar hasPlay = !!self.options.playHandler || !!self.options.playPromiseHandler;\n\tvar hasProgress = !!self.options.progressHandler;\n\tvar hasWarp = !!self.options.warpHandler;\n\tvar playBtn = self.parent.querySelector(\".abcjs-midi-start\");\n\n\tif (hasLoop)\n\t\tself.parent.querySelector(\".abcjs-midi-loop\").addEventListener(\"click\", function(ev){acResumerMiddleWare(self.options.loopHandler, ev, playBtn, self.options.afterResume)});\n\tif (hasRestart)\n\t\tself.parent.querySelector(\".abcjs-midi-reset\").addEventListener(\"click\", function(ev){acResumerMiddleWare(self.options.restartHandler, ev, playBtn, self.options.afterResume)});\n\tif (hasPlay)\n\t\tplayBtn.addEventListener(\"click\", function(ev){\n\t\t\tacResumerMiddleWare(\n\t\t\t\tself.options.playPromiseHandler || self.options.playHandler,\n\t\t\t\tev,\n\t\t\t\tplayBtn,\n\t\t\t\tself.options.afterResume,\n\t\t\t\t!!self.options.playPromiseHandler)\n\t\t});\n\tif (hasProgress)\n\t\tself.parent.querySelector(\".abcjs-midi-progress-background\").addEventListener(\"click\", function(ev){acResumerMiddleWare(self.options.progressHandler, ev, playBtn, self.options.afterResume)});\n\tif (hasWarp)\n\t\tself.parent.querySelector(\".abcjs-midi-tempo\").addEventListener(\"change\", function(ev){acResumerMiddleWare(self.options.warpHandler, ev, playBtn, self.options.afterResume)});\n}\nmodule.exports = CreateSynthControl;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2NyZWF0ZS1zeW50aC1jb250cm9sLmpzIiwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQixtQkFBTyxDQUFDLGdGQUFrQjtBQUM5QywyQkFBMkIsbUJBQU8sQ0FBQyxnR0FBMEI7QUFDN0QseUJBQXlCLG1CQUFPLENBQUMsNEZBQXdCOztBQUV6RCxnQkFBZ0IsbUJBQU8sQ0FBQyxxRkFBc0I7QUFDOUMsZ0JBQWdCLG1CQUFPLENBQUMscUZBQXNCO0FBQzlDLGlCQUFpQixtQkFBTyxDQUFDLHVGQUF1QjtBQUNoRCxtQkFBbUIsbUJBQU8sQ0FBQywyRkFBeUI7QUFDcEQsaUJBQWlCLG1CQUFPLENBQUMsdUZBQXVCOztBQUVoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQzs7QUFFakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMEJBQTBCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZNQUE2TTtBQUM3TTtBQUNBLGdFQUFnRSxVQUFVLHNCQUFzQixtQkFBbUIsYUFBYSxnQkFBZ0Isa0JBQWtCLG1CQUFtQjtBQUNyTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSCxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1RkFBdUYscUZBQXFGO0FBQzVLO0FBQ0Esd0ZBQXdGLHdGQUF3RjtBQUNoTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esc0dBQXNHLHlGQUF5RjtBQUMvTDtBQUNBLHlGQUF5RixxRkFBcUY7QUFDOUs7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy9zeW50aC9jcmVhdGUtc3ludGgtY29udHJvbC5qcz85YjkyIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBzdXBwb3J0c0F1ZGlvID0gcmVxdWlyZSgnLi9zdXBwb3J0cy1hdWRpbycpO1xudmFyIHJlZ2lzdGVyQXVkaW9Db250ZXh0ID0gcmVxdWlyZSgnLi9yZWdpc3Rlci1hdWRpby1jb250ZXh0Jyk7XG52YXIgYWN0aXZlQXVkaW9Db250ZXh0ID0gcmVxdWlyZSgnLi9hY3RpdmUtYXVkaW8tY29udGV4dCcpO1xuXG52YXIgbG9vcEltYWdlID0gcmVxdWlyZSgnLi9pbWFnZXMvbG9vcC5zdmcuanMnKTtcbnZhciBwbGF5SW1hZ2UgPSByZXF1aXJlKCcuL2ltYWdlcy9wbGF5LnN2Zy5qcycpO1xudmFyIHBhdXNlSW1hZ2UgPSByZXF1aXJlKCcuL2ltYWdlcy9wYXVzZS5zdmcuanMnKTtcbnZhciBsb2FkaW5nSW1hZ2UgPSByZXF1aXJlKCcuL2ltYWdlcy9sb2FkaW5nLnN2Zy5qcycpO1xudmFyIHJlc2V0SW1hZ2UgPSByZXF1aXJlKCcuL2ltYWdlcy9yZXNldC5zdmcuanMnKTtcblxuZnVuY3Rpb24gQ3JlYXRlU3ludGhDb250cm9sKHBhcmVudCwgb3B0aW9ucykge1xuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdC8vIHBhcmVudCBpcyBlaXRoZXIgYW4gZWxlbWVudCBvciBhIHNlbGVjdG9yLlxuXHRpZiAodHlwZW9mIHBhcmVudCA9PT0gXCJzdHJpbmdcIikge1xuXHRcdHZhciBzZWxlY3RvciA9IHBhcmVudDtcblx0XHRwYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcblx0XHRpZiAoIXBhcmVudClcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIGVsZW1lbnQgXFxcIlwiICsgc2VsZWN0b3IgKyBcIlxcXCIgaW4gdGhlIERPTS5cIik7XG5cdH0gZWxzZSBpZiAoIShwYXJlbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiVGhlIGZpcnN0IHBhcmFtZXRlciBtdXN0IGJlIGEgdmFsaWQgZWxlbWVudCBvciBzZWxlY3RvciBpbiB0aGUgRE9NLlwiKTtcblxuXHRzZWxmLnBhcmVudCA9IHBhcmVudDtcblx0c2VsZi5vcHRpb25zID0ge307XG5cdGlmIChvcHRpb25zKVxuXHRcdHNlbGYub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sb3B0aW9ucyk7XG5cblx0Ly8gVGhpcyBjYW4gYmUgY2FsbGVkIGluIHRoZSBmb2xsb3dpbmcgY2FzZXM6XG5cdC8vIEFDIGFscmVhZHkgcmVnaXN0ZXJlZCBhbmQgbm90IHN1c3BlbmRlZFxuXHQvLyBBQyBhbHJlYWR5IHJlZ2lzdGVyZWQgYW5kIHN1c3BlbmRlZFxuXHQvLyBBQyBub3QgcmVnaXN0ZXJlZCBhbmQgbm90IHBhc3NlZCBpblxuXHQvLyBBQyBub3QgcmVnaXN0ZXJlZCBidXQgcGFzc2VkIGluIChidXQgc3VzcGVuZGVkKVxuXHQvLyBBQyBub3QgcmVnaXN0ZXJlZCBidXQgcGFzc2VkIGluIChub3Qgc3VzcGVuZGVkKVxuXHQvLyBJZiB0aGUgQUMgaXMgYWxyZWFkeSByZWdpc3RlcmVkLCB0aGVuIGp1c3QgdXNlIGl0IC0gaWdub3JlIHdoYXQgaXMgcGFzc2VkIGluXG5cdC8vIENyZWF0ZSB0aGUgQUMgaWYgbmVjZXNzYXJ5IGlmIHRoZXJlIGlzbid0IG9uZSBhbHJlYWR5LlxuXHQvLyBXZSBkb24ndCBjYXJlIHJpZ2h0IG5vdyBpZiB0aGUgQUMgaXMgc3VzcGVuZGVkIC0gd2hlbmV2ZXIgYSBidXR0b24gaXMgY2xpY2tlZCB0aGVuIHdlIGNoZWNrIGl0LlxuXHRpZiAoc2VsZi5vcHRpb25zLmFjKVxuXHRcdHJlZ2lzdGVyQXVkaW9Db250ZXh0KHNlbGYub3B0aW9ucy5hYyk7XG5cdGJ1aWxkRG9tKHNlbGYucGFyZW50LCBzZWxmLm9wdGlvbnMpO1xuXHRhdHRhY2hMaXN0ZW5lcnMoc2VsZik7XG5cblx0c2VsZi5kaXNhYmxlID0gZnVuY3Rpb24oaXNEaXNhYmxlZCkge1xuXHRcdHZhciBlbCA9IHNlbGYucGFyZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWJjanMtaW5saW5lLWF1ZGlvXCIpO1xuXHRcdGlmIChpc0Rpc2FibGVkKVxuXHRcdFx0ZWwuY2xhc3NMaXN0LmFkZChcImFiY2pzLWRpc2FibGVkXCIpO1xuXHRcdGVsc2Vcblx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJhYmNqcy1kaXNhYmxlZFwiKTtcblx0fTtcblx0c2VsZi5zZXRXYXJwID0gZnVuY3Rpb24odGVtcG8sIHdhcnApIHtcblx0XHR2YXIgZWwgPSBzZWxmLnBhcmVudC5xdWVyeVNlbGVjdG9yKFwiLmFiY2pzLW1pZGktdGVtcG9cIik7XG5cdFx0ZWwudmFsdWUgPSBNYXRoLnJvdW5kKHdhcnApO1xuXHRcdHNlbGYuc2V0VGVtcG8odGVtcG8pXG5cdH07XG5cdHNlbGYuc2V0VGVtcG8gPSBmdW5jdGlvbih0ZW1wbykge1xuXHRcdHZhciBlbCA9IHNlbGYucGFyZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWJjanMtbWlkaS1jdXJyZW50LXRlbXBvXCIpO1xuXHRcdGlmIChlbClcblx0XHRcdGVsLmlubmVySFRNTCA9IE1hdGgucm91bmQodGVtcG8pO1xuXHR9O1xuXHRzZWxmLnJlc2V0QWxsID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHB1c2hlZEJ1dHRvbnMgPSBzZWxmLnBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFiY2pzLXB1c2hlZFwiKTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHB1c2hlZEJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBidXR0b24gPSBwdXNoZWRCdXR0b25zW2ldO1xuXHRcdFx0YnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJhYmNqcy1wdXNoZWRcIik7XG5cdFx0fVxuXHR9O1xuXHRzZWxmLnB1c2hQbGF5ID0gZnVuY3Rpb24ocHVzaCkge1xuXHRcdHZhciBzdGFydEJ1dHRvbiA9IHNlbGYucGFyZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWJjanMtbWlkaS1zdGFydFwiKTtcblx0XHRpZiAoIXN0YXJ0QnV0dG9uKVxuXHRcdFx0cmV0dXJuO1xuXHRcdGlmIChwdXNoKVxuXHRcdFx0c3RhcnRCdXR0b24uY2xhc3NMaXN0LmFkZChcImFiY2pzLXB1c2hlZFwiKTtcblx0XHRlbHNlXG5cdFx0XHRzdGFydEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYWJjanMtcHVzaGVkXCIpO1xuXHR9O1xuXHRzZWxmLnB1c2hMb29wID0gZnVuY3Rpb24ocHVzaCkge1xuXHRcdHZhciBsb29wQnV0dG9uID0gc2VsZi5wYXJlbnQucXVlcnlTZWxlY3RvcihcIi5hYmNqcy1taWRpLWxvb3BcIik7XG5cdFx0aWYgKCFsb29wQnV0dG9uKVxuXHRcdFx0cmV0dXJuO1xuXHRcdGlmIChwdXNoKVxuXHRcdFx0bG9vcEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYWJjanMtcHVzaGVkXCIpO1xuXHRcdGVsc2Vcblx0XHRcdGxvb3BCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImFiY2pzLXB1c2hlZFwiKTtcblx0fTtcblxuXHRzZWxmLnNldFByb2dyZXNzID0gZnVuY3Rpb24gKHBlcmNlbnQsIHRvdGFsVGltZSkge1xuXHRcdHZhciBwcm9ncmVzc0JhY2tncm91bmQgPSBzZWxmLnBhcmVudC5xdWVyeVNlbGVjdG9yKFwiLmFiY2pzLW1pZGktcHJvZ3Jlc3MtYmFja2dyb3VuZFwiKTtcblx0XHR2YXIgcHJvZ3Jlc3NUaHVtYiA9IHNlbGYucGFyZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWJjanMtbWlkaS1wcm9ncmVzcy1pbmRpY2F0b3JcIik7XG5cdFx0aWYgKCFwcm9ncmVzc0JhY2tncm91bmQgfHwgIXByb2dyZXNzVGh1bWIpXG5cdFx0XHRyZXR1cm47XG5cdFx0dmFyIHdpZHRoID0gcHJvZ3Jlc3NCYWNrZ3JvdW5kLmNsaWVudFdpZHRoO1xuXHRcdHZhciBsZWZ0ID0gd2lkdGggKiBwZXJjZW50O1xuXHRcdHByb2dyZXNzVGh1bWIuc3R5bGUubGVmdCA9IGxlZnQgKyBcInB4XCI7XG5cblx0XHR2YXIgY2xvY2sgPSBzZWxmLnBhcmVudC5xdWVyeVNlbGVjdG9yKFwiLmFiY2pzLW1pZGktY2xvY2tcIik7XG5cdFx0aWYgKGNsb2NrKSB7XG5cdFx0XHR2YXIgdG90YWxTZWNvbmRzID0gKHRvdGFsVGltZSAqIHBlcmNlbnQpIC8gMTAwMDtcblx0XHRcdHZhciBtaW51dGVzID0gTWF0aC5mbG9vcih0b3RhbFNlY29uZHMgLyA2MCk7XG5cdFx0XHR2YXIgc2Vjb25kcyA9IE1hdGguZmxvb3IodG90YWxTZWNvbmRzICUgNjApO1xuXHRcdFx0dmFyIHNlY29uZHNGb3JtYXR0ZWQgPSBzZWNvbmRzIDwgMTAgPyBcIjBcIiArIHNlY29uZHMgOiBzZWNvbmRzO1xuXHRcdFx0Y2xvY2suaW5uZXJIVE1MID0gbWludXRlcyArIFwiOlwiICsgc2Vjb25kc0Zvcm1hdHRlZDtcblx0XHR9XG5cdH07XG5cblx0aWYgKHNlbGYub3B0aW9ucy5hZnRlclJlc3VtZSkge1xuXHRcdHZhciBpc1Jlc3VtZWQgPSBmYWxzZTtcblx0XHRpZiAoc2VsZi5vcHRpb25zLmFjKSB7XG5cdFx0XHRpc1Jlc3VtZWQgPSBzZWxmLm9wdGlvbnMuYWMuc3RhdGUgIT09IFwic3VzcGVuZGVkXCI7XG5cdFx0fSBlbHNlIGlmIChhY3RpdmVBdWRpb0NvbnRleHQoKSkge1xuXHRcdFx0aXNSZXN1bWVkID0gYWN0aXZlQXVkaW9Db250ZXh0KCkuc3RhdGUgIT09IFwic3VzcGVuZGVkXCI7XG5cdFx0fVxuXHRcdGlmIChpc1Jlc3VtZWQpXG5cdFx0XHRzZWxmLm9wdGlvbnMuYWZ0ZXJSZXN1bWUoKTtcblx0fVxufVxuXG5mdW5jdGlvbiBidWlsZERvbShwYXJlbnQsIG9wdGlvbnMpIHtcblx0dmFyIGhhc0xvb3AgPSAhIW9wdGlvbnMubG9vcEhhbmRsZXI7XG5cdHZhciBoYXNSZXN0YXJ0ID0gISFvcHRpb25zLnJlc3RhcnRIYW5kbGVyO1xuXHR2YXIgaGFzUGxheSA9ICEhb3B0aW9ucy5wbGF5SGFuZGxlciB8fCAhIW9wdGlvbnMucGxheVByb21pc2VIYW5kbGVyO1xuXHR2YXIgaGFzUHJvZ3Jlc3MgPSAhIW9wdGlvbnMucHJvZ3Jlc3NIYW5kbGVyO1xuXHR2YXIgaGFzV2FycCA9ICEhb3B0aW9ucy53YXJwSGFuZGxlcjtcblx0dmFyIGhhc0Nsb2NrID0gb3B0aW9ucy5oYXNDbG9jayAhPT0gZmFsc2U7XG5cblx0dmFyIGh0bWwgPSAnPGRpdiBjbGFzcz1cImFiY2pzLWlubGluZS1hdWRpb1wiPlxcbic7XG5cdGlmIChoYXNMb29wKSB7XG5cdFx0dmFyIHJlcGVhdFRpdGxlID0gb3B0aW9ucy5yZXBlYXRUaXRsZSA/IG9wdGlvbnMucmVwZWF0VGl0bGUgOiBcIkNsaWNrIHRvIHRvZ2dsZSBwbGF5IG9uY2UvcmVwZWF0LlwiO1xuXHRcdHZhciByZXBlYXRBcmlhID0gb3B0aW9ucy5yZXBlYXRBcmlhID8gb3B0aW9ucy5yZXBlYXRBcmlhIDogcmVwZWF0VGl0bGU7XG5cdFx0aHRtbCArPSAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJhYmNqcy1taWRpLWxvb3AgYWJjanMtYnRuXCIgdGl0bGU9XCInICsgcmVwZWF0VGl0bGUgKyAnXCIgYXJpYS1sYWJlbD1cIicgKyByZXBlYXRBcmlhICsgJ1wiPicgKyBsb29wSW1hZ2UgKyAnPC9idXR0b24+XFxuJztcblx0fVxuXHRpZiAoaGFzUmVzdGFydCkge1xuXHRcdHZhciByZXN0YXJ0VGl0bGUgPSBvcHRpb25zLnJlc3RhcnRUaXRsZSA/IG9wdGlvbnMucmVzdGFydFRpdGxlIDogXCJDbGljayB0byBnbyB0byBiZWdpbm5pbmcuXCI7XG5cdFx0dmFyIHJlc3RhcnRBcmlhID0gb3B0aW9ucy5yZXN0YXJ0QXJpYSA/IG9wdGlvbnMucmVzdGFydEFyaWEgOiByZXN0YXJ0VGl0bGU7XG5cdFx0aHRtbCArPSAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJhYmNqcy1taWRpLXJlc2V0IGFiY2pzLWJ0blwiIHRpdGxlPVwiJyArIHJlc3RhcnRUaXRsZSArICdcIiBhcmlhLWxhYmVsPVwiJyArIHJlc3RhcnRBcmlhICsgJ1wiPicgKyByZXNldEltYWdlICsgJzwvYnV0dG9uPlxcbic7XG5cdH1cblx0aWYgKGhhc1BsYXkpIHtcblx0XHR2YXIgcGxheVRpdGxlID0gb3B0aW9ucy5wbGF5VGl0bGUgPyBvcHRpb25zLnBsYXlUaXRsZSA6IFwiQ2xpY2sgdG8gcGxheS9wYXVzZS5cIjtcblx0XHR2YXIgcGxheUFyaWEgPSBvcHRpb25zLnBsYXlBcmlhID8gb3B0aW9ucy5wbGF5QXJpYSA6IHBsYXlUaXRsZTtcblx0XHRodG1sICs9ICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImFiY2pzLW1pZGktc3RhcnQgYWJjanMtYnRuXCIgdGl0bGU9XCInICsgcGxheVRpdGxlICsgJ1wiIGFyaWEtbGFiZWw9XCInICsgcGxheUFyaWEgKyAnXCI+JyArIHBsYXlJbWFnZSArIHBhdXNlSW1hZ2UgKyBsb2FkaW5nSW1hZ2UgKyAnPC9idXR0b24+XFxuJztcblx0fVxuXHRpZiAoaGFzUHJvZ3Jlc3MpIHtcblx0XHR2YXIgcmFuZG9tVGl0bGUgPSBvcHRpb25zLnJhbmRvbVRpdGxlID8gb3B0aW9ucy5yYW5kb21UaXRsZSA6IFwiQ2xpY2sgdG8gY2hhbmdlIHRoZSBwbGF5YmFjayBwb3NpdGlvbi5cIjtcblx0XHR2YXIgcmFuZG9tQXJpYSA9IG9wdGlvbnMucmFuZG9tQXJpYSA/IG9wdGlvbnMucmFuZG9tQXJpYSA6IHJhbmRvbVRpdGxlO1xuXHRcdGh0bWwgKz0gJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYWJjanMtbWlkaS1wcm9ncmVzcy1iYWNrZ3JvdW5kXCIgdGl0bGU9XCInICsgcmFuZG9tVGl0bGUgKyAnXCIgYXJpYS1sYWJlbD1cIicgKyByYW5kb21BcmlhICsgJ1wiPjxzcGFuIGNsYXNzPVwiYWJjanMtbWlkaS1wcm9ncmVzcy1pbmRpY2F0b3JcIj48L3NwYW4+PC9idXR0b24+XFxuJztcblx0fVxuXHRpZiAoaGFzQ2xvY2spIHtcblx0XHRodG1sICs9ICc8c3BhbiBjbGFzcz1cImFiY2pzLW1pZGktY2xvY2tcIj48L3NwYW4+XFxuJztcblx0fVxuXHRpZiAoaGFzV2FycCkge1xuXHRcdHZhciB3YXJwVGl0bGUgPSBvcHRpb25zLndhcnBUaXRsZSA/IG9wdGlvbnMud2FycFRpdGxlIDogXCJDaGFuZ2UgdGhlIHBsYXliYWNrIHNwZWVkLlwiO1xuXHRcdHZhciB3YXJwQXJpYSA9IG9wdGlvbnMud2FycEFyaWEgPyBvcHRpb25zLndhcnBBcmlhIDogd2FycFRpdGxlO1xuXHRcdHZhciBicG0gPSBvcHRpb25zLmJwbSA/IG9wdGlvbnMuYnBtIDogXCJCUE1cIjtcblx0XHRodG1sICs9ICc8c3BhbiBjbGFzcz1cImFiY2pzLXRlbXBvLXdyYXBwZXJcIj48bGFiZWw+PGlucHV0IGNsYXNzPVwiYWJjanMtbWlkaS10ZW1wb1wiIHR5cGU9XCJudW1iZXJcIiBtaW49XCIxXCIgbWF4PVwiMzAwXCIgdmFsdWU9XCIxMDBcIiB0aXRsZT1cIicgKyB3YXJwVGl0bGUgKyAnXCIgYXJpYS1sYWJlbD1cIicgKyB3YXJwQXJpYSArICdcIj4lPC9sYWJlbD48c3Bhbj4mbmJzcDsoPHNwYW4gY2xhc3M9XCJhYmNqcy1taWRpLWN1cnJlbnQtdGVtcG9cIj48L3NwYW4+ICcgKyBicG0gKyAnKTwvc3Bhbj48L3NwYW4+XFxuJztcblx0fVxuXHRodG1sICs9ICc8ZGl2IGNsYXNzPVwiYWJjanMtY3NzLXdhcm5pbmdcIiBzdHlsZT1cImZvbnQtc2l6ZTogMTJweDtjb2xvcjpyZWQ7Ym9yZGVyOiAxcHggc29saWQgcmVkO3RleHQtYWxpZ246IGNlbnRlcjt3aWR0aDogMzAwcHg7bWFyZ2luLXRvcDogNHB4O2ZvbnQtd2VpZ2h0OiBib2xkO2JvcmRlci1yYWRpdXM6IDRweDtcIj5DU1MgcmVxdWlyZWQ6IGxvYWQgYWJjanMtYXVkaW8uY3NzPC9kaXY+Jztcblx0aHRtbCArPSAnPC9kaXY+XFxuJztcblx0cGFyZW50LmlubmVySFRNTCA9IGh0bWw7XG59XG5cbmZ1bmN0aW9uIGFjUmVzdW1lck1pZGRsZVdhcmUobmV4dCwgZXYsIHBsYXlCdG4sIGFmdGVyUmVzdW1lLCBpc1Byb21pc2UpIHtcblx0dmFyIG5lZWRzSW5pdCA9IHRydWU7XG5cdGlmICghYWN0aXZlQXVkaW9Db250ZXh0KCkpIHtcblx0XHRyZWdpc3RlckF1ZGlvQ29udGV4dCgpO1xuXHR9IGVsc2Uge1xuXHRcdG5lZWRzSW5pdCA9IGFjdGl2ZUF1ZGlvQ29udGV4dCgpLnN0YXRlID09PSBcInN1c3BlbmRlZFwiO1xuXHR9XG5cdGlmICghc3VwcG9ydHNBdWRpbygpKSB7XG5cdFx0dGhyb3cgeyBzdGF0dXM6IFwiTm90U3VwcG9ydGVkXCIsIG1lc3NhZ2U6IFwiVGhpcyBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgYXVkaW8uXCJ9O1xuXHR9XG5cblx0aWYgKChuZWVkc0luaXQgfHwgaXNQcm9taXNlKSAmJiBwbGF5QnRuKVxuXHRcdHBsYXlCdG4uY2xhc3NMaXN0LmFkZChcImFiY2pzLWxvYWRpbmdcIik7XG5cblx0aWYgKG5lZWRzSW5pdCkge1xuXHRcdGFjdGl2ZUF1ZGlvQ29udGV4dCgpLnJlc3VtZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKGFmdGVyUmVzdW1lKSB7XG5cdFx0XHRcdGFmdGVyUmVzdW1lKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRkb05leHQobmV4dCwgZXYsIHBsYXlCdG4sIGlzUHJvbWlzZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZG9OZXh0KG5leHQsIGV2LCBwbGF5QnRuLCBpc1Byb21pc2UpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdGRvTmV4dChuZXh0LCBldiwgcGxheUJ0biwgaXNQcm9taXNlKTtcblx0fVxufVxuXG5mdW5jdGlvbiBkb05leHQobmV4dCwgZXYsIHBsYXlCdG4sIGlzUHJvbWlzZSkge1xuXHRpZiAoaXNQcm9taXNlKSB7XG5cdFx0bmV4dChldikudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdGlmIChwbGF5QnRuKVxuXHRcdFx0XHRwbGF5QnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJhYmNqcy1sb2FkaW5nXCIpO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdG5leHQoZXYpO1xuXHRcdGlmIChwbGF5QnRuKVxuXHRcdFx0cGxheUJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiYWJjanMtbG9hZGluZ1wiKTtcblx0fVxufVxuXG5mdW5jdGlvbiBhdHRhY2hMaXN0ZW5lcnMoc2VsZikge1xuXHR2YXIgaGFzTG9vcCA9ICEhc2VsZi5vcHRpb25zLmxvb3BIYW5kbGVyO1xuXHR2YXIgaGFzUmVzdGFydCA9ICEhc2VsZi5vcHRpb25zLnJlc3RhcnRIYW5kbGVyO1xuXHR2YXIgaGFzUGxheSA9ICEhc2VsZi5vcHRpb25zLnBsYXlIYW5kbGVyIHx8ICEhc2VsZi5vcHRpb25zLnBsYXlQcm9taXNlSGFuZGxlcjtcblx0dmFyIGhhc1Byb2dyZXNzID0gISFzZWxmLm9wdGlvbnMucHJvZ3Jlc3NIYW5kbGVyO1xuXHR2YXIgaGFzV2FycCA9ICEhc2VsZi5vcHRpb25zLndhcnBIYW5kbGVyO1xuXHR2YXIgcGxheUJ0biA9IHNlbGYucGFyZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWJjanMtbWlkaS1zdGFydFwiKTtcblxuXHRpZiAoaGFzTG9vcClcblx0XHRzZWxmLnBhcmVudC5xdWVyeVNlbGVjdG9yKFwiLmFiY2pzLW1pZGktbG9vcFwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZXYpe2FjUmVzdW1lck1pZGRsZVdhcmUoc2VsZi5vcHRpb25zLmxvb3BIYW5kbGVyLCBldiwgcGxheUJ0biwgc2VsZi5vcHRpb25zLmFmdGVyUmVzdW1lKX0pO1xuXHRpZiAoaGFzUmVzdGFydClcblx0XHRzZWxmLnBhcmVudC5xdWVyeVNlbGVjdG9yKFwiLmFiY2pzLW1pZGktcmVzZXRcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGV2KXthY1Jlc3VtZXJNaWRkbGVXYXJlKHNlbGYub3B0aW9ucy5yZXN0YXJ0SGFuZGxlciwgZXYsIHBsYXlCdG4sIHNlbGYub3B0aW9ucy5hZnRlclJlc3VtZSl9KTtcblx0aWYgKGhhc1BsYXkpXG5cdFx0cGxheUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZXYpe1xuXHRcdFx0YWNSZXN1bWVyTWlkZGxlV2FyZShcblx0XHRcdFx0c2VsZi5vcHRpb25zLnBsYXlQcm9taXNlSGFuZGxlciB8fCBzZWxmLm9wdGlvbnMucGxheUhhbmRsZXIsXG5cdFx0XHRcdGV2LFxuXHRcdFx0XHRwbGF5QnRuLFxuXHRcdFx0XHRzZWxmLm9wdGlvbnMuYWZ0ZXJSZXN1bWUsXG5cdFx0XHRcdCEhc2VsZi5vcHRpb25zLnBsYXlQcm9taXNlSGFuZGxlcilcblx0XHR9KTtcblx0aWYgKGhhc1Byb2dyZXNzKVxuXHRcdHNlbGYucGFyZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWJjanMtbWlkaS1wcm9ncmVzcy1iYWNrZ3JvdW5kXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihldil7YWNSZXN1bWVyTWlkZGxlV2FyZShzZWxmLm9wdGlvbnMucHJvZ3Jlc3NIYW5kbGVyLCBldiwgcGxheUJ0biwgc2VsZi5vcHRpb25zLmFmdGVyUmVzdW1lKX0pO1xuXHRpZiAoaGFzV2FycClcblx0XHRzZWxmLnBhcmVudC5xdWVyeVNlbGVjdG9yKFwiLmFiY2pzLW1pZGktdGVtcG9cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbihldil7YWNSZXN1bWVyTWlkZGxlV2FyZShzZWxmLm9wdGlvbnMud2FycEhhbmRsZXIsIGV2LCBwbGF5QnRuLCBzZWxmLm9wdGlvbnMuYWZ0ZXJSZXN1bWUpfSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IENyZWF0ZVN5bnRoQ29udHJvbDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/create-synth-control.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/create-synth.js":
/*!******************************************************!*\
  !*** ./node_modules/abcjs/src/synth/create-synth.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var getNote = __webpack_require__(/*! ./load-note */ \"(ssr)/./node_modules/abcjs/src/synth/load-note.js\");\nvar createNoteMap = __webpack_require__(/*! ./create-note-map */ \"(ssr)/./node_modules/abcjs/src/synth/create-note-map.js\");\nvar registerAudioContext = __webpack_require__(/*! ./register-audio-context */ \"(ssr)/./node_modules/abcjs/src/synth/register-audio-context.js\");\nvar activeAudioContext = __webpack_require__(/*! ./active-audio-context */ \"(ssr)/./node_modules/abcjs/src/synth/active-audio-context.js\");\nvar supportsAudio = __webpack_require__(/*! ./supports-audio */ \"(ssr)/./node_modules/abcjs/src/synth/supports-audio.js\");\nvar pitchToNoteName = __webpack_require__(/*! ./pitch-to-note-name */ \"(ssr)/./node_modules/abcjs/src/synth/pitch-to-note-name.js\");\nvar instrumentIndexToName = __webpack_require__(/*! ./instrument-index-to-name */ \"(ssr)/./node_modules/abcjs/src/synth/instrument-index-to-name.js\");\nvar downloadBuffer = __webpack_require__(/*! ./download-buffer */ \"(ssr)/./node_modules/abcjs/src/synth/download-buffer.js\");\nvar placeNote = __webpack_require__(/*! ./place-note */ \"(ssr)/./node_modules/abcjs/src/synth/place-note.js\");\nvar soundsCache = __webpack_require__(/*! ./sounds-cache */ \"(ssr)/./node_modules/abcjs/src/synth/sounds-cache.js\");\n\n// TODO-PER: remove the midi tests from here: I don't think the object can be constructed unless it passes.\nvar notSupportedMessage = \"MIDI is not supported in this browser.\";\n\nvar originalSoundFontUrl = \"https://paulrosen.github.io/midi-js-soundfonts/abcjs/\";\n// These are the original soundfonts supplied. They will need a volume boost:\nvar defaultSoundFontUrl = \"https://paulrosen.github.io/midi-js-soundfonts/FluidR3_GM/\";\nvar alternateSoundFontUrl = \"https://paulrosen.github.io/midi-js-soundfonts/MusyngKite/\";\n\nfunction CreateSynth() {\n\tvar self = this;\n\tself.audioBufferPossible = undefined;\n\tself.directSource = []; // type: AudioBufferSourceNode\n\tself.startTimeSec = undefined; // the time (in seconds) that the audio started: used for pause to get the pausedTimeSec.\n\tself.pausedTimeSec = undefined; // the position (in seconds) that the audio was paused: used for resume.\n\tself.audioBuffers = []; // cache of the buffers so starting play can be fast.\n\tself.duration = undefined; // the duration of the tune in seconds.\n\tself.isRunning = false; // whether there is currently a sound buffer running.\n\tself.options = {} // Thx tomohirohiratsuka\n\tself.pickupLength = 0\n\n\t// Load and cache all needed sounds\n\tself.init = function(options) {\n\t\tif (!options)\n\t\t\toptions = {};\n\t\tif (options.options)\n\t\t\tself.options = options.options\n\t\tregisterAudioContext(options.audioContext); // This works no matter what - if there is already an ac it is a nop; if the context is not passed in, then it creates one.\n\t\tvar startTime = activeAudioContext().currentTime;\n\t\tself.debugCallback = options.debugCallback;\n\t\tif (self.debugCallback)\n\t\t\tself.debugCallback(\"init called\");\n\t\tself.audioBufferPossible = self._deviceCapable();\n\t\tif (!self.audioBufferPossible)\n\t\t\treturn Promise.reject({ status: \"NotSupported\", message: notSupportedMessage});\n\t\tvar params = options.options ? options.options : {};\n\t\tself.soundFontUrl = params.soundFontUrl ? params.soundFontUrl : defaultSoundFontUrl;\n\t\tif (self.soundFontUrl[self.soundFontUrl.length-1] !== '/')\n\t\t\tself.soundFontUrl += '/';\n\t\tif (params.soundFontVolumeMultiplier || params.soundFontVolumeMultiplier === 0)\n\t\t\tself.soundFontVolumeMultiplier = params.soundFontVolumeMultiplier;\n\t\telse if (self.soundFontUrl === defaultSoundFontUrl || self.soundFontUrl === alternateSoundFontUrl)\n\t\t\tself.soundFontVolumeMultiplier = 3.0;\n\t\telse if (self.soundFontUrl === originalSoundFontUrl)\n\t\t\tself.soundFontVolumeMultiplier = 0.4;\n\t\telse\n\t\t\tself.soundFontVolumeMultiplier = 1.0;\n\t\tif (params.programOffsets)\n\t\t\tself.programOffsets = params.programOffsets;\n\t\telse if (self.soundFontUrl === originalSoundFontUrl)\n\t\t\tself.programOffsets = {\n\t\t\t\t\"bright_acoustic_piano\": 20,\n\t\t\t\t\"honkytonk_piano\": 20,\n\t\t\t\t\"electric_piano_1\": 30,\n\t\t\t\t\"electric_piano_2\": 30,\n\t\t\t\t\"harpsichord\": 40,\n\t\t\t\t\"clavinet\": 20,\n\t\t\t\t\"celesta\": 20,\n\t\t\t\t\"glockenspiel\": 40,\n\t\t\t\t\"vibraphone\": 30,\n\t\t\t\t\"marimba\": 35,\n\t\t\t\t\"xylophone\": 30,\n\t\t\t\t\"tubular_bells\": 35,\n\t\t\t\t\"dulcimer\": 30,\n\t\t\t\t\"drawbar_organ\": 20,\n\t\t\t\t\"percussive_organ\": 25,\n\t\t\t\t\"rock_organ\": 20,\n\t\t\t\t\"church_organ\": 40,\n\t\t\t\t\"reed_organ\": 40,\n\t\t\t\t\"accordion\": 40,\n\t\t\t\t\"harmonica\": 40,\n\t\t\t\t\"acoustic_guitar_nylon\": 20,\n\t\t\t\t\"acoustic_guitar_steel\": 30,\n\t\t\t\t\"electric_guitar_jazz\": 25,\n\t\t\t\t\"electric_guitar_clean\": 15,\n\t\t\t\t\"electric_guitar_muted\": 35,\n\t\t\t\t\"overdriven_guitar\": 25,\n\t\t\t\t\"distortion_guitar\": 20,\n\t\t\t\t\"guitar_harmonics\": 30,\n\t\t\t\t\"electric_bass_finger\": 15,\n\t\t\t\t\"electric_bass_pick\": 30,\n\t\t\t\t\"fretless_bass\": 40,\n\t\t\t\t\"violin\": 105,\n\t\t\t\t\"viola\": 50,\n\t\t\t\t\"cello\": 40,\n\t\t\t\t\"contrabass\": 60,\n\t\t\t\t\"trumpet\": 10,\n\t\t\t\t\"trombone\": 90,\n\t\t\t\t\"alto_sax\": 20,\n\t\t\t\t\"tenor_sax\": 20,\n\t\t\t\t\"clarinet\": 20,\n\t\t\t\t\"flute\": 50,\n\t\t\t\t\"banjo\": 50,\n\t\t\t\t\"woodblock\": 20,\n\t\t\t};\n\t\telse\n\t\t\tself.programOffsets = {};\n\t\tvar p = params.fadeLength !== undefined ? parseInt(params.fadeLength,10) : NaN;\n\t\tself.fadeLength = isNaN(p) ? 200 : p;\n\t\tp = params.noteEnd !== undefined ? parseInt(params.noteEnd,10) : NaN;\n\t\tself.noteEnd = isNaN(p) ? 0 : p;\n\n\t\tself.pan = params.pan;\n\t\tself.meterSize = 1;\n\t\tif (options.visualObj) {\n\t\t\tself.flattened = options.visualObj.setUpAudio(params);\n\t\t\tvar meter = options.visualObj.getMeterFraction();\n\t\t\tif (meter.den)\n\t\t\t\tself.meterSize = options.visualObj.getMeterFraction().num / options.visualObj.getMeterFraction().den;\n\t\t\tself.pickupLength = options.visualObj.getPickupLength()\n\t\t} else if (options.sequence)\n\t\t\tself.flattened = options.sequence;\n\t\telse\n\t\t\treturn Promise.reject(new Error(\"Must pass in either a visualObj or a sequence\"));\n\t\tself.millisecondsPerMeasure = options.millisecondsPerMeasure ? options.millisecondsPerMeasure : (options.visualObj ? options.visualObj.millisecondsPerMeasure(self.flattened.tempo) : 1000);\n\t\tself.beatsPerMeasure = options.visualObj ? options.visualObj.getBeatsPerMeasure() : 4;\n\t\tself.sequenceCallback = params.sequenceCallback;\n\t\tself.callbackContext = params.callbackContext;\n\t\tself.onEnded = params.onEnded;\n\t\tself.meterFraction = options.visualObj ? options.visualObj.getMeterFraction() : {den: 1} // If we are given a sequence instead of a regular visual obj, then don't do the swing\n\n\t\tvar allNotes = {};\n\t\tvar cached = [];\n\t\tvar errorNotes = [];\n\t\tvar currentInstrument = instrumentIndexToName[0];\n\t\tself.flattened.tracks.forEach(function(track) {\n\t\t\ttrack.forEach(function(event) {\n\t\t\t\tif (event.cmd === \"program\" && instrumentIndexToName[event.instrument])\n\t\t\t\t\tcurrentInstrument = instrumentIndexToName[event.instrument];\n\t\t\t\tif (event.pitch !== undefined) {\n\t\t\t\t\tvar pitchNumber = event.pitch;\n\t\t\t\t\tvar noteName = pitchToNoteName[pitchNumber];\n\t\t\t\t\tvar inst = event.instrument !== undefined ? instrumentIndexToName[event.instrument] : currentInstrument\n\t\t\t\t\tif (noteName) {\n\t\t\t\t\t\tif (!allNotes[inst])\n\t\t\t\t\t\t\tallNotes[inst] = {};\n\t\t\t\t\t\tif (!soundsCache[inst] || !soundsCache[inst][noteName])\n\t\t\t\t\t\t\tallNotes[inst][noteName] = true;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar label2 = inst+\":\"+noteName\n\t\t\t\t\t\t\tif (cached.indexOf(label2) < 0)\n\t\t\t\t\t\t\t\tcached.push(label2);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar label = inst+\":\"+noteName\n\t\t\t\t\t\tconsole.log(\"Can't find note: \", pitchNumber, label);\n\t\t\t\t\t\tif (errorNotes.indexOf(label) < 0)\n\t\t\t\t\t\t\terrorNotes.push(label)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tif (self.debugCallback)\n\t\t\tself.debugCallback(\"note gathering time = \" + Math.floor((activeAudioContext().currentTime - startTime)*1000)+\"ms\");\n\t\tstartTime = activeAudioContext().currentTime;\n\n\t\tvar notes = [];\n\t\tObject.keys(allNotes).forEach(function(instrument) {\n\t\t\tObject.keys(allNotes[instrument]).forEach(function(note) {\n\t\t\t\tnotes.push({ instrument: instrument, note: note });\n\t\t\t});\n\t\t});\n\t\tif (self.debugCallback)\n\t\t\tself.debugCallback(\"notes \"+JSON.stringify(notes));\n\n\t\t// If there are lots of notes, load them in batches\n\t\tvar batches = [];\n\t\tvar CHUNK = 256;\n\t\tfor (var i=0; i < notes.length; i += CHUNK) {\n\t\t\tbatches.push(notes.slice(i, i + CHUNK));\n\t\t}\n\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tvar results = {\n\t\t\t\tcached: cached,\n\t\t\t\terror: errorNotes,\n\t\t\t\tloaded: []\n\t\t\t};\n\n\t\t\tvar index = 0;\n\t\t\tvar next = function() {\n\t\t\t\tif (self.debugCallback)\n\t\t\t\t\tself.debugCallback(\"loadBatch idx=\"+index+ \" len=\"+batches.length);\n\t\n\t\t\t\tif (index < batches.length) {\n\t\t\t\t\tself._loadBatch(batches[index], self.soundFontUrl, startTime).then(function(data) {\n\t\t\t\t\t\tif (self.debugCallback)\n\t\t\t\t\t\t\tself.debugCallback(\"loadBatch then\");\n\t\t\t\t\t\tstartTime = activeAudioContext().currentTime;\n\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\tif (data.error)\n\t\t\t\t\t\t\t\tresults.error = results.error.concat(data.error);\n\t\t\t\t\t\t\tif (data.loaded)\n\t\t\t\t\t\t\t\tresults.loaded = results.loaded.concat(data.loaded);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t\tnext();\n\t\t\t\t\t}, reject);\n\t\t\t\t} else {\n\t\t\t\t\tif (self.debugCallback)\n\t\t\t\t\t\tself.debugCallback(\"resolve init\");\n\t\t\n\t\t\t\t\tresolve(results);\n\t\t\t\t}\n\t\t\t};\n\t\t\tnext();\n\t\t});\n\t};\n\n\tself._loadBatch = (function(batch, soundFontUrl, startTime, delay) {\n\t\t// This is called recursively to see if the sounds have loaded. The \"delay\" parameter is how long it has been since the original call.\n\t\tvar promises = [];\n\t\tbatch.forEach(function(item) {\n\t\t\tif (self.debugCallback)\n\t\t\t\tself.debugCallback(\"getNote \" + item.instrument+':'+item.note);\n\t\t\tpromises.push(getNote(soundFontUrl, item.instrument, item.note, activeAudioContext()));\n\t\t});\n\t\treturn Promise.all(promises).then(function(response) {\n\t\t\tif (self.debugCallback)\n\t\t\t\tself.debugCallback(\"mp3 load time = \" + Math.floor((activeAudioContext().currentTime - startTime)*1000)+\"ms\");\n\t\t\tvar loaded = [];\n\t\t\tvar cached = [];\n\t\t\tvar pending = [];\n\t\t\tvar error = [];\n\t\t\tfor (var i = 0; i < response.length; i++) {\n\t\t\t\tvar oneResponse = response[i];\n\t\t\t\tvar which = oneResponse.instrument + \":\" + oneResponse.name;\n\t\t\t\tif (oneResponse.status === \"loaded\")\n\t\t\t\t\tloaded.push(which);\n\t\t\t\telse if (oneResponse.status === \"pending\")\n\t\t\t\t\tpending.push(which);\n\t\t\t\telse if (oneResponse.status === \"cached\")\n\t\t\t\t\tcached.push(which);\n\t\t\t\telse\n\t\t\t\t\terror.push(which + ' ' + oneResponse.message);\n\t\t\t}\n\t\t\tif (pending.length > 0) {\n\t\t\t\tif (self.debugCallback)\n\t\t\t\t\tself.debugCallback(\"pending \" + JSON.stringify(pending));\n\t\t\t\t// There was probably a second call for notes before the first one finished, so just retry a few times to see if they stop being pending.\n\t\t\t\t// Retry quickly at first so that there isn't an unnecessary delay, but increase the delay each time.\n\t\t\t\tif (!delay)\n\t\t\t\t\tdelay = 50;\n\t\t\t\telse\n\t\t\t\t\tdelay = delay * 2;\n\t\t\t\tif (delay < 90000) {\n\t\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tvar newBatch = [];\n\t\t\t\t\t\t\tfor (i = 0; i < pending.length; i++) {\n\t\t\t\t\t\t\t\twhich = pending[i].split(\":\");\n\t\t\t\t\t\t\t\tnewBatch.push({instrument: which[0], note: which[1]});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (self.debugCallback)\n\t\t\t\t\t\t\t\tself.debugCallback(\"retry \" + JSON.stringify(newBatch));\n\t\t\t\t\t\t\t\t\tself._loadBatch(newBatch, soundFontUrl, startTime, delay).then(function (response) {\n\t\t\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t\t\t}).catch(function (error) {\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, delay);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tvar list = [];\n\t\t\t\t\tfor (var j = 0; j < batch.length; j++)\n\t\t\t\t\t\tlist.push(batch[j].instrument+'/'+batch[j].note)\n\t\t\t\t\t\tif (self.debugCallback)\n\t\t\t\t\t\t\tself.debugCallback(\"loadBatch timeout\")\n\t\t\t\t\t\treturn Promise.reject(new Error(\"timeout attempting to load: \" + list.join(\", \")));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (self.debugCallback)\n\t\t\t\t\tself.debugCallback(\"loadBatch resolve\")\n\t\t\t\treturn Promise.resolve({loaded: loaded, cached: cached, error: error});\n\t\t\t}\n\t\t}).catch(function (error) {\n\t\t\tif (self.debugCallback)\n\t\t\t\tself.debugCallback(\"loadBatch catch \"+error.message)\n\t\t});\n\t});\n\n\tself.prime = function() {\n\t\t// At this point all of the notes are loaded. This function writes them into the output buffer.\n\t\t// Most music has a lot of repeating notes. If a note is the same pitch, volume, length, etc. as another one,\n\t\t// It saves a lot of time to just create it once and place it repeatedly where ever it needs to be.\n\t\tvar fadeTimeSec = self.fadeLength/1000;\n\t\tself.isRunning = false;\n\t\tif (!self.audioBufferPossible)\n\t\t\treturn Promise.reject(new Error(notSupportedMessage));\n\t\tif (self.debugCallback)\n\t\t\tself.debugCallback(\"prime called\");\n\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\ttry {\n\t\t\t\tvar startTime = activeAudioContext().currentTime;\n\t\t\t\tvar tempoMultiplier = self.millisecondsPerMeasure / 1000 / self.meterSize;\n\t\t\t\tself.duration = self.flattened.totalDuration * tempoMultiplier;\n\t\t\t\tif (self.duration <= 0) {\n\t\t\t\t\tself.audioBuffers = [];\n\t\t\t\t\treturn resolve({status: \"empty\", seconds: 0});\n\t\t\t\t}\n\t\t\t\tself.duration += fadeTimeSec;\n\t\t\t\tvar totalSamples = Math.floor(activeAudioContext().sampleRate * self.duration);\n\n\t\t\t\t// There might be a previous run that needs to be turned off.\n\t\t\t\tself.stop();\n\n\t\t\t\tvar noteMapTracks = createNoteMap(self.flattened);\n\n\t\t\t\tif (self.options.swing)\n\t\t\t\t\taddSwing(noteMapTracks, self.options.swing, self.meterFraction, self.pickupLength)\n\n\t\t\t\tif (self.sequenceCallback)\n\t\t\t\t\tself.sequenceCallback(noteMapTracks, self.callbackContext);\n\n\t\t\t\tvar panDistances = setPan(noteMapTracks.length, self.pan);\n\n\t\t\t\t// Create a simple list of all the unique sounds in this music and where they should be placed.\n\t\t\t\t// There appears to be a limit on how many audio buffers can be created at once so this technique limits the number needed.\n\t\t\t\tvar uniqueSounds = {};\n\t\t\t\tnoteMapTracks.forEach(function (noteMap, trackNumber) {\n\t\t\t\t\tvar panDistance = panDistances && panDistances.length > trackNumber ? panDistances[trackNumber] : 0;\n\t\t\t\t\tnoteMap.forEach(function (note) {\n\t\t\t\t\t\tvar key = note.instrument + ':' + note.pitch + ':' + note.volume + ':' + Math.round((note.end - note.start) * 1000) / 1000 + ':' + panDistance + ':' + tempoMultiplier + ':' + (note.cents ? note.cents : 0);\n\t\t\t\t\t\tif (self.debugCallback)\n\t\t\t\t\t\t\tself.debugCallback(\"noteMapTrack \" + key)\n\t\t\t\t\t\tif (!uniqueSounds[key])\n\t\t\t\t\t\t\tuniqueSounds[key] = [];\n\t\t\t\t\t\tuniqueSounds[key].push(note.start);\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t// Now that we know what we are trying to create, construct the audio buffer by creating each sound and placing it.\n\t\t\t\tvar allPromises = [];\n\t\t\t\tvar audioBuffer = activeAudioContext().createBuffer(2, totalSamples, activeAudioContext().sampleRate);\n\t\t\t\tfor (var key2 = 0; key2 < Object.keys(uniqueSounds).length; key2++) {\n\t\t\t\t\tvar k = Object.keys(uniqueSounds)[key2];\n\t\t\t\t\tvar parts = k.split(\":\");\n\t\t\t\t\tvar cents = parts[6] !== undefined ? parseFloat(parts[6]) : 0;\n\t\t\t\t\tparts = {instrument: parts[0], pitch: parseInt(parts[1], 10), volume: parseInt(parts[2], 10), len: parseFloat(parts[3]), pan: parseFloat(parts[4]), tempoMultiplier: parseFloat(parts[5]), cents: cents};\n\t\t\t\t\tallPromises.push(placeNote(audioBuffer, activeAudioContext().sampleRate, parts, uniqueSounds[k], self.soundFontVolumeMultiplier, self.programOffsets[parts.instrument], fadeTimeSec, self.noteEnd / 1000, self.debugCallback));\n\t\t\t\t}\n\t\t\t\tself.audioBuffers = [audioBuffer];\n\n\t\t\t\tif (self.debugCallback) {\n\t\t\t\t\tself.debugCallback(\"sampleRate = \" + activeAudioContext().sampleRate);\n\t\t\t\t\tself.debugCallback(\"totalSamples = \" + totalSamples);\n\t\t\t\t\tself.debugCallback(\"creationTime = \" + Math.floor((activeAudioContext().currentTime - startTime) * 1000) + \"ms\");\n\t\t\t\t}\n\n\t\t\t\tfunction resolveData(me) {\n\t\t\t\t\tvar duration = me && me.audioBuffers && me.audioBuffers.length > 0 ? me.audioBuffers[0].duration : 0;\n\t\t\t\t\treturn {status: activeAudioContext().state, duration: duration}\n\t\t\t\t}\n\n\t\t\t\tPromise.all(allPromises).then(function () {\n\t\t\t\t\t// Safari iOS can mess with the audioContext state, so resume if needed.\n\t\t\t\t\tif (activeAudioContext().state === \"suspended\") {\n\t\t\t\t\t\tactiveAudioContext().resume().then(function () {\n\t\t\t\t\t\t\tresolve(resolveData(self));\n\t\t\t\t\t\t})\n\t\t\t\t\t} else if (activeAudioContext().state === \"interrupted\") {\n\t\t\t\t\t\tactiveAudioContext().suspend().then(function () {\n\t\t\t\t\t\t\tactiveAudioContext().resume().then(function () {\n\t\t\t\t\t\t\t\tresolve(resolveData(self));\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(resolveData(self));\n\t\t\t\t\t}\n\t\t\t\t}).catch(function (error) {\n\t\t\t\t\treject(error)\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\treject(error)\n\t\t\t}\n\t\t});\n\t};\n\n\tfunction setPan(numTracks, panParam) {\n\t\t// panParam, if it is set, can be either a number representing the separation between each track,\n\t\t// or an array, which is the absolute pan position for each track.\n\t\tif (panParam === null || panParam === undefined)\n\t\t\treturn null;\n\n\t\tvar panDistances = [];\n\t\tif (panParam.length) {\n\t\t\t// We received an array. If there are the same number of items in the pan array as the number of tracks,\n\t\t\t// it all lines up perfectly. If there are more items in the pan array than the tracks then the excess items are ignored.\n\t\t\t// If there are more tracks than items in the pan array then the remaining tracks are placed in the middle.\n\t\t\t// If any of the pan numbers are out of range then they are adjusted.\n\t\t\tfor (var pp = 0; pp < numTracks; pp++) {\n\t\t\t\tif (pp < panParam.length) {\n\t\t\t\t\tvar x = parseFloat(panParam[pp]);\n\t\t\t\t\tif (x < -1)\n\t\t\t\t\t\tx = -1;\n\t\t\t\t\telse if (x > 1)\n\t\t\t\t\t\tx = 1;\n\t\t\t\t\tpanDistances.push(x);\n\t\t\t\t} else\n\t\t\t\t\tpanDistances.push(0)\n\t\t\t}\n\t\t\treturn panDistances;\n\t\t} else {\n\t\t\tvar panNumber = parseFloat(panParam);\n\t\t\t// the separation needs to be no further than 2 (i.e. -1 to 1) so test to see if there are too many tracks for the passed in distance\n\t\t\tif (panNumber*(numTracks-1) > 2)\n\t\t\t\treturn null;\n\n\t\t\t// If there are an even number of tracks, then offset so that the first two are centered around the middle\n\t\t\tvar even = numTracks % 2 === 0;\n\t\t\tvar currLow = even ? 0 - panNumber/2 : 0;\n\t\t\tvar currHigh = currLow+panNumber;\n\t\t\t// Now add the tracks to either side\n\t\t\tfor (var p = 0; p < numTracks; p++) {\n\t\t\t\teven = p % 2 === 0;\n\t\t\t\tif (even) {\n\t\t\t\t\tpanDistances.push(currLow);\n\t\t\t\t\tcurrLow -= panNumber;\n\t\t\t\t} else {\n\t\t\t\t\tpanDistances.push(currHigh);\n\t\t\t\t\tcurrHigh += panNumber;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn panDistances;\n\t\t}\n\t\t// There was either no panning, or the parameters were illegal\n\t\treturn null;\n\t}\n\n\t// This is called after everything is set up, so it can quickly make sound\n\tself.start = function() {\n\t\tif (!self.audioBufferPossible)\n\t\t\tthrow new Error(notSupportedMessage);\n\t\tif (self.debugCallback)\n\t\t\tself.debugCallback(\"start called\");\n\n\t\tvar resumePosition = self.pausedTimeSec ? self.pausedTimeSec : 0;\n\t\tself._kickOffSound(resumePosition);\n\t\tself.startTimeSec = activeAudioContext().currentTime - resumePosition;\n\t\tself.pausedTimeSec = undefined;\n\n\t\tif (self.debugCallback)\n\t\t\tself.debugCallback(\"MIDI STARTED\", self.startTimeSec);\n\t};\n\n\tself.pause = function() {\n\t\tif (!self.audioBufferPossible)\n\t\t\tthrow new Error(notSupportedMessage);\n\t\tif (self.debugCallback)\n\t\t\tself.debugCallback(\"pause called\");\n\n\t\tself.pausedTimeSec = self.stop();\n\t\treturn self.pausedTimeSec;\n\t};\n\n\tself.resume = function() {\n\t\tself.start();\n\t};\n\n\tself.seek = function(position, units) {\n\t\tvar offset;\n\t\tswitch (units) {\n\t\t\tcase \"seconds\":\n\t\t\t\toffset = position;\n\t\t\t\tbreak;\n\t\t\tcase \"beats\":\n\t\t\t\toffset = position * self.millisecondsPerMeasure / self.beatsPerMeasure / 1000;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// this is \"percent\" or any illegal value\n\t\t\t\toffset = (self.duration-self.fadeLength/1000) * position;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// TODO-PER: can seek when paused or when playing\n\t\tif (!self.audioBufferPossible)\n\t\t\tthrow new Error(notSupportedMessage);\n\t\tif (self.debugCallback)\n\t\t\tself.debugCallback(\"seek called sec=\" + offset);\n\n\t\tif (self.isRunning) {\n\t\t\tself.stop();\n\t\t\tself._kickOffSound(offset);\n\t\t} else {\n\t\t\tself.pausedTimeSec = offset;\n\t\t}\n\t\tself.pausedTimeSec = offset;\n\t};\n\n\tself.stop = function() {\n\t\tself.isRunning = false;\n\t\tself.pausedTimeSec = undefined;\n\t\tself.directSource.forEach(function(source) {\n\t\t\ttry {\n\t\t\t\tsource.stop();\n\t\t\t} catch (error) {\n\t\t\t\t// We don't care if self succeeds: it might fail if something else turned off the sound or it ended for some reason.\n\t\t\t\tconsole.log(\"direct source didn't stop:\", error)\n\t\t\t}\n\t\t});\n\t\tself.directSource = [];\n\t\tvar elapsed = activeAudioContext().currentTime - self.startTimeSec;\n\t\treturn elapsed;\n\t};\n\tself.finished = function() {\n\t\tself.startTimeSec = undefined;\n\t\tself.pausedTimeSec = undefined;\n\t\tself.isRunning = false;\n\t};\n\n\tself.download = function() {\n\t\treturn downloadBuffer(self);\n\t};\n\n\tself.getAudioBuffer = function() {\n\t\treturn self.audioBuffers[0];\n\t};\n\n\tself.getIsRunning = function() {\n\t\treturn self.isRunning;\n\t}\n\n\t/////////////// Private functions //////////////\n\n\tself._deviceCapable = function() {\n\t\tif (!supportsAudio()) {\n\t\t\tconsole.warn(notSupportedMessage);\n\t\t\tif (self.debugCallback)\n\t\t\t\tself.debugCallback(notSupportedMessage);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\tself._kickOffSound = function(seconds) {\n\t\tself.isRunning = true;\n\t\tself.directSource = [];\n\t\tself.audioBuffers.forEach(function(audioBuffer, trackNum) {\n\t\t\tself.directSource[trackNum] = activeAudioContext().createBufferSource(); // creates a sound source\n\t\t\tself.directSource[trackNum].buffer = audioBuffer; // tell the source which sound to play\n\t\t\tself.directSource[trackNum].connect(activeAudioContext().destination); // connect the source to the context's destination (the speakers)\n\t\t});\n\t\tself.directSource.forEach(function(source) {\n\t\t\tsource.start(0, seconds);\n\t\t});\n\t\tif (self.onEnded) {\n\t\t\tself.directSource[0].onended = function () {\n\t\t\t\tself.onEnded(self.callbackContext);\n\t\t\t};\n\t\t}\n\t};\n\n\tfunction addSwing(noteMapTracks, swing, meterFraction, pickupLength) {\n\n\t\t// we can only swing in X/4 and X/8 meters.\n\t\tif (meterFraction.den != 4 && meterFraction.den != 8)\n\t\t\treturn;\n\n\t\tswing = parseFloat(swing);\n\n\t\t// 50 (or less) is no swing, \n\t\tif (isNaN(swing) || swing <= 50)\n\t\t\treturn;\n\n\t\t// 66 is triplet swing 2:1, and \n\t\t// 60 is swing with a ratio of 3:2. \n\t\t// 75 is the maximum swing where the first eight is played as a dotted eight and the second as a sixteenth. \n\t\tif (swing > 75)\n\t\t\tswing = 75;\n\n\t\t// convert the swing percentage to a percentage of increase for the first half of the beat\n\t\tswing = swing/50 - 1;\n\n\t\t// The volume of the swung notes is increased by this factor\n\t\t// could be also in the settings. Try out values such 0.1, 0.2\n\t\tvar volumeIncrease = 0.0;\n\n\t\t// the beatLength in X/8 meters\n\t\tvar beatLength = 0.25; \n\n\t\t// in X/8 meters the 16s swing so the beatLength is halved\n\t\tif (meterFraction.den === 8) \n\t\t\tbeatLength = beatLength/2; \n\n\t\t// duration of a half beat\n\t\tvar halfbeatLength = beatLength/2;\n\n\t\t// the extra duration of the first swung notes and the delay of the second notes\n\t\tvar swingDuration = halfbeatLength * swing;\n\n\t\tfor (var t = 0; t < noteMapTracks.length; t++) {\n\t\t\tvar track = noteMapTracks[t];\n\t\t\tfor (var i = 0; i < track.length; i++) {\n\t\t\t\tvar event = track[i];\n\t\t\t\tif (\n\t\t\t\t\t// is halfbeat\n\t\t\t\t\t(event.start-pickupLength) % halfbeatLength == 0 && (event.start-pickupLength) % beatLength != 0 \n\t\t\t\t\t&& (\n\t\t\t\t\t\t// the previous note is on the beat or before OR there is no previous note \n\t\t\t\t\t\ti == 0 \n\t\t\t\t\t\t|| track[i-1].start <= track[i].start - halfbeatLength\n\t\t\t\t\t)\n\t\t\t\t\t&& (\n\t\t\t\t\t\t// the next note is on the beat or after OR there is no next note\n\t\t\t\t\t\ti == track.length - 1 \n\t\t\t\t\t\t|| track[i+1].start >= track[i].start + halfbeatLength\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tvar oldEventStart = event.start;\n\n\t\t\t\t\tevent.start += swingDuration;\n\n\t\t\t\t\t// Increase volume of swung notes\n\t\t\t\t\tevent.volume *= 1 + volumeIncrease;\n\n\t\t\t\t\t// if there is a previous note ending at the start of this note, extend its end\n\t\t\t\t\t// and decrease its volume\n\t\t\t\t\tif (i > 0 && track[i-1].end == oldEventStart) {\n\t\t\t\t\t\ttrack[i-1].end = event.start;\n\t\t\t\t\t\ttrack[i-1].volume *= 1 - volumeIncrease;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n}\n\nmodule.exports = CreateSynth;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2NyZWF0ZS1zeW50aC5qcyIsIm1hcHBpbmdzIjoiQUFBQSxjQUFjLG1CQUFPLENBQUMsc0VBQWE7QUFDbkMsb0JBQW9CLG1CQUFPLENBQUMsa0ZBQW1CO0FBQy9DLDJCQUEyQixtQkFBTyxDQUFDLGdHQUEwQjtBQUM3RCx5QkFBeUIsbUJBQU8sQ0FBQyw0RkFBd0I7QUFDekQsb0JBQW9CLG1CQUFPLENBQUMsZ0ZBQWtCO0FBQzlDLHNCQUFzQixtQkFBTyxDQUFDLHdGQUFzQjtBQUNwRCw0QkFBNEIsbUJBQU8sQ0FBQyxvR0FBNEI7QUFDaEUscUJBQXFCLG1CQUFPLENBQUMsa0ZBQW1CO0FBQ2hELGdCQUFnQixtQkFBTyxDQUFDLHdFQUFjO0FBQ3RDLGtCQUFrQixtQkFBTyxDQUFDLDRFQUFnQjs7QUFFMUM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIsZ0NBQWdDO0FBQ2hDLGlDQUFpQztBQUNqQyx5QkFBeUI7QUFDekIsNEJBQTRCO0FBQzVCLHlCQUF5QjtBQUN6QixtQkFBbUI7QUFDbkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLHNFQUFzRTtBQUNwSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIscURBQXFEO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsUUFBUTs7QUFFM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG9DQUFvQztBQUNyRCxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGtCQUFrQjtBQUNsQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHFCQUFxQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsb0JBQW9CO0FBQ3ZDO0FBQ0EsdUJBQXVCLHFDQUFxQztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSLE9BQU87QUFDUCxNQUFNO0FBQ04sTUFBTTtBQUNOO0FBQ0EscUJBQXFCLGtCQUFrQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSw0QkFBNEIsNkNBQTZDO0FBQ3pFO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiw0QkFBNEI7QUFDakQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix5Q0FBeUM7QUFDaEU7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLE9BQU87QUFDUCxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTCxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnQkFBZ0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZUFBZTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEU7QUFDNUUscURBQXFEO0FBQ3JELDBFQUEwRTtBQUMxRSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxrQkFBa0IsMEJBQTBCO0FBQzVDO0FBQ0EsbUJBQW1CLGtCQUFrQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy9zeW50aC9jcmVhdGUtc3ludGguanM/ZmZjMSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZ2V0Tm90ZSA9IHJlcXVpcmUoJy4vbG9hZC1ub3RlJyk7XG52YXIgY3JlYXRlTm90ZU1hcCA9IHJlcXVpcmUoJy4vY3JlYXRlLW5vdGUtbWFwJyk7XG52YXIgcmVnaXN0ZXJBdWRpb0NvbnRleHQgPSByZXF1aXJlKCcuL3JlZ2lzdGVyLWF1ZGlvLWNvbnRleHQnKTtcbnZhciBhY3RpdmVBdWRpb0NvbnRleHQgPSByZXF1aXJlKCcuL2FjdGl2ZS1hdWRpby1jb250ZXh0Jyk7XG52YXIgc3VwcG9ydHNBdWRpbyA9IHJlcXVpcmUoJy4vc3VwcG9ydHMtYXVkaW8nKTtcbnZhciBwaXRjaFRvTm90ZU5hbWUgPSByZXF1aXJlKCcuL3BpdGNoLXRvLW5vdGUtbmFtZScpO1xudmFyIGluc3RydW1lbnRJbmRleFRvTmFtZSA9IHJlcXVpcmUoJy4vaW5zdHJ1bWVudC1pbmRleC10by1uYW1lJyk7XG52YXIgZG93bmxvYWRCdWZmZXIgPSByZXF1aXJlKCcuL2Rvd25sb2FkLWJ1ZmZlcicpO1xudmFyIHBsYWNlTm90ZSA9IHJlcXVpcmUoJy4vcGxhY2Utbm90ZScpO1xudmFyIHNvdW5kc0NhY2hlID0gcmVxdWlyZSgnLi9zb3VuZHMtY2FjaGUnKTtcblxuLy8gVE9ETy1QRVI6IHJlbW92ZSB0aGUgbWlkaSB0ZXN0cyBmcm9tIGhlcmU6IEkgZG9uJ3QgdGhpbmsgdGhlIG9iamVjdCBjYW4gYmUgY29uc3RydWN0ZWQgdW5sZXNzIGl0IHBhc3Nlcy5cbnZhciBub3RTdXBwb3J0ZWRNZXNzYWdlID0gXCJNSURJIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyLlwiO1xuXG52YXIgb3JpZ2luYWxTb3VuZEZvbnRVcmwgPSBcImh0dHBzOi8vcGF1bHJvc2VuLmdpdGh1Yi5pby9taWRpLWpzLXNvdW5kZm9udHMvYWJjanMvXCI7XG4vLyBUaGVzZSBhcmUgdGhlIG9yaWdpbmFsIHNvdW5kZm9udHMgc3VwcGxpZWQuIFRoZXkgd2lsbCBuZWVkIGEgdm9sdW1lIGJvb3N0OlxudmFyIGRlZmF1bHRTb3VuZEZvbnRVcmwgPSBcImh0dHBzOi8vcGF1bHJvc2VuLmdpdGh1Yi5pby9taWRpLWpzLXNvdW5kZm9udHMvRmx1aWRSM19HTS9cIjtcbnZhciBhbHRlcm5hdGVTb3VuZEZvbnRVcmwgPSBcImh0dHBzOi8vcGF1bHJvc2VuLmdpdGh1Yi5pby9taWRpLWpzLXNvdW5kZm9udHMvTXVzeW5nS2l0ZS9cIjtcblxuZnVuY3Rpb24gQ3JlYXRlU3ludGgoKSB7XG5cdHZhciBzZWxmID0gdGhpcztcblx0c2VsZi5hdWRpb0J1ZmZlclBvc3NpYmxlID0gdW5kZWZpbmVkO1xuXHRzZWxmLmRpcmVjdFNvdXJjZSA9IFtdOyAvLyB0eXBlOiBBdWRpb0J1ZmZlclNvdXJjZU5vZGVcblx0c2VsZi5zdGFydFRpbWVTZWMgPSB1bmRlZmluZWQ7IC8vIHRoZSB0aW1lIChpbiBzZWNvbmRzKSB0aGF0IHRoZSBhdWRpbyBzdGFydGVkOiB1c2VkIGZvciBwYXVzZSB0byBnZXQgdGhlIHBhdXNlZFRpbWVTZWMuXG5cdHNlbGYucGF1c2VkVGltZVNlYyA9IHVuZGVmaW5lZDsgLy8gdGhlIHBvc2l0aW9uIChpbiBzZWNvbmRzKSB0aGF0IHRoZSBhdWRpbyB3YXMgcGF1c2VkOiB1c2VkIGZvciByZXN1bWUuXG5cdHNlbGYuYXVkaW9CdWZmZXJzID0gW107IC8vIGNhY2hlIG9mIHRoZSBidWZmZXJzIHNvIHN0YXJ0aW5nIHBsYXkgY2FuIGJlIGZhc3QuXG5cdHNlbGYuZHVyYXRpb24gPSB1bmRlZmluZWQ7IC8vIHRoZSBkdXJhdGlvbiBvZiB0aGUgdHVuZSBpbiBzZWNvbmRzLlxuXHRzZWxmLmlzUnVubmluZyA9IGZhbHNlOyAvLyB3aGV0aGVyIHRoZXJlIGlzIGN1cnJlbnRseSBhIHNvdW5kIGJ1ZmZlciBydW5uaW5nLlxuXHRzZWxmLm9wdGlvbnMgPSB7fSAvLyBUaHggdG9tb2hpcm9oaXJhdHN1a2Fcblx0c2VsZi5waWNrdXBMZW5ndGggPSAwXG5cblx0Ly8gTG9hZCBhbmQgY2FjaGUgYWxsIG5lZWRlZCBzb3VuZHNcblx0c2VsZi5pbml0ID0gZnVuY3Rpb24ob3B0aW9ucykge1xuXHRcdGlmICghb3B0aW9ucylcblx0XHRcdG9wdGlvbnMgPSB7fTtcblx0XHRpZiAob3B0aW9ucy5vcHRpb25zKVxuXHRcdFx0c2VsZi5vcHRpb25zID0gb3B0aW9ucy5vcHRpb25zXG5cdFx0cmVnaXN0ZXJBdWRpb0NvbnRleHQob3B0aW9ucy5hdWRpb0NvbnRleHQpOyAvLyBUaGlzIHdvcmtzIG5vIG1hdHRlciB3aGF0IC0gaWYgdGhlcmUgaXMgYWxyZWFkeSBhbiBhYyBpdCBpcyBhIG5vcDsgaWYgdGhlIGNvbnRleHQgaXMgbm90IHBhc3NlZCBpbiwgdGhlbiBpdCBjcmVhdGVzIG9uZS5cblx0XHR2YXIgc3RhcnRUaW1lID0gYWN0aXZlQXVkaW9Db250ZXh0KCkuY3VycmVudFRpbWU7XG5cdFx0c2VsZi5kZWJ1Z0NhbGxiYWNrID0gb3B0aW9ucy5kZWJ1Z0NhbGxiYWNrO1xuXHRcdGlmIChzZWxmLmRlYnVnQ2FsbGJhY2spXG5cdFx0XHRzZWxmLmRlYnVnQ2FsbGJhY2soXCJpbml0IGNhbGxlZFwiKTtcblx0XHRzZWxmLmF1ZGlvQnVmZmVyUG9zc2libGUgPSBzZWxmLl9kZXZpY2VDYXBhYmxlKCk7XG5cdFx0aWYgKCFzZWxmLmF1ZGlvQnVmZmVyUG9zc2libGUpXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoeyBzdGF0dXM6IFwiTm90U3VwcG9ydGVkXCIsIG1lc3NhZ2U6IG5vdFN1cHBvcnRlZE1lc3NhZ2V9KTtcblx0XHR2YXIgcGFyYW1zID0gb3B0aW9ucy5vcHRpb25zID8gb3B0aW9ucy5vcHRpb25zIDoge307XG5cdFx0c2VsZi5zb3VuZEZvbnRVcmwgPSBwYXJhbXMuc291bmRGb250VXJsID8gcGFyYW1zLnNvdW5kRm9udFVybCA6IGRlZmF1bHRTb3VuZEZvbnRVcmw7XG5cdFx0aWYgKHNlbGYuc291bmRGb250VXJsW3NlbGYuc291bmRGb250VXJsLmxlbmd0aC0xXSAhPT0gJy8nKVxuXHRcdFx0c2VsZi5zb3VuZEZvbnRVcmwgKz0gJy8nO1xuXHRcdGlmIChwYXJhbXMuc291bmRGb250Vm9sdW1lTXVsdGlwbGllciB8fCBwYXJhbXMuc291bmRGb250Vm9sdW1lTXVsdGlwbGllciA9PT0gMClcblx0XHRcdHNlbGYuc291bmRGb250Vm9sdW1lTXVsdGlwbGllciA9IHBhcmFtcy5zb3VuZEZvbnRWb2x1bWVNdWx0aXBsaWVyO1xuXHRcdGVsc2UgaWYgKHNlbGYuc291bmRGb250VXJsID09PSBkZWZhdWx0U291bmRGb250VXJsIHx8IHNlbGYuc291bmRGb250VXJsID09PSBhbHRlcm5hdGVTb3VuZEZvbnRVcmwpXG5cdFx0XHRzZWxmLnNvdW5kRm9udFZvbHVtZU11bHRpcGxpZXIgPSAzLjA7XG5cdFx0ZWxzZSBpZiAoc2VsZi5zb3VuZEZvbnRVcmwgPT09IG9yaWdpbmFsU291bmRGb250VXJsKVxuXHRcdFx0c2VsZi5zb3VuZEZvbnRWb2x1bWVNdWx0aXBsaWVyID0gMC40O1xuXHRcdGVsc2Vcblx0XHRcdHNlbGYuc291bmRGb250Vm9sdW1lTXVsdGlwbGllciA9IDEuMDtcblx0XHRpZiAocGFyYW1zLnByb2dyYW1PZmZzZXRzKVxuXHRcdFx0c2VsZi5wcm9ncmFtT2Zmc2V0cyA9IHBhcmFtcy5wcm9ncmFtT2Zmc2V0cztcblx0XHRlbHNlIGlmIChzZWxmLnNvdW5kRm9udFVybCA9PT0gb3JpZ2luYWxTb3VuZEZvbnRVcmwpXG5cdFx0XHRzZWxmLnByb2dyYW1PZmZzZXRzID0ge1xuXHRcdFx0XHRcImJyaWdodF9hY291c3RpY19waWFub1wiOiAyMCxcblx0XHRcdFx0XCJob25reXRvbmtfcGlhbm9cIjogMjAsXG5cdFx0XHRcdFwiZWxlY3RyaWNfcGlhbm9fMVwiOiAzMCxcblx0XHRcdFx0XCJlbGVjdHJpY19waWFub18yXCI6IDMwLFxuXHRcdFx0XHRcImhhcnBzaWNob3JkXCI6IDQwLFxuXHRcdFx0XHRcImNsYXZpbmV0XCI6IDIwLFxuXHRcdFx0XHRcImNlbGVzdGFcIjogMjAsXG5cdFx0XHRcdFwiZ2xvY2tlbnNwaWVsXCI6IDQwLFxuXHRcdFx0XHRcInZpYnJhcGhvbmVcIjogMzAsXG5cdFx0XHRcdFwibWFyaW1iYVwiOiAzNSxcblx0XHRcdFx0XCJ4eWxvcGhvbmVcIjogMzAsXG5cdFx0XHRcdFwidHVidWxhcl9iZWxsc1wiOiAzNSxcblx0XHRcdFx0XCJkdWxjaW1lclwiOiAzMCxcblx0XHRcdFx0XCJkcmF3YmFyX29yZ2FuXCI6IDIwLFxuXHRcdFx0XHRcInBlcmN1c3NpdmVfb3JnYW5cIjogMjUsXG5cdFx0XHRcdFwicm9ja19vcmdhblwiOiAyMCxcblx0XHRcdFx0XCJjaHVyY2hfb3JnYW5cIjogNDAsXG5cdFx0XHRcdFwicmVlZF9vcmdhblwiOiA0MCxcblx0XHRcdFx0XCJhY2NvcmRpb25cIjogNDAsXG5cdFx0XHRcdFwiaGFybW9uaWNhXCI6IDQwLFxuXHRcdFx0XHRcImFjb3VzdGljX2d1aXRhcl9ueWxvblwiOiAyMCxcblx0XHRcdFx0XCJhY291c3RpY19ndWl0YXJfc3RlZWxcIjogMzAsXG5cdFx0XHRcdFwiZWxlY3RyaWNfZ3VpdGFyX2phenpcIjogMjUsXG5cdFx0XHRcdFwiZWxlY3RyaWNfZ3VpdGFyX2NsZWFuXCI6IDE1LFxuXHRcdFx0XHRcImVsZWN0cmljX2d1aXRhcl9tdXRlZFwiOiAzNSxcblx0XHRcdFx0XCJvdmVyZHJpdmVuX2d1aXRhclwiOiAyNSxcblx0XHRcdFx0XCJkaXN0b3J0aW9uX2d1aXRhclwiOiAyMCxcblx0XHRcdFx0XCJndWl0YXJfaGFybW9uaWNzXCI6IDMwLFxuXHRcdFx0XHRcImVsZWN0cmljX2Jhc3NfZmluZ2VyXCI6IDE1LFxuXHRcdFx0XHRcImVsZWN0cmljX2Jhc3NfcGlja1wiOiAzMCxcblx0XHRcdFx0XCJmcmV0bGVzc19iYXNzXCI6IDQwLFxuXHRcdFx0XHRcInZpb2xpblwiOiAxMDUsXG5cdFx0XHRcdFwidmlvbGFcIjogNTAsXG5cdFx0XHRcdFwiY2VsbG9cIjogNDAsXG5cdFx0XHRcdFwiY29udHJhYmFzc1wiOiA2MCxcblx0XHRcdFx0XCJ0cnVtcGV0XCI6IDEwLFxuXHRcdFx0XHRcInRyb21ib25lXCI6IDkwLFxuXHRcdFx0XHRcImFsdG9fc2F4XCI6IDIwLFxuXHRcdFx0XHRcInRlbm9yX3NheFwiOiAyMCxcblx0XHRcdFx0XCJjbGFyaW5ldFwiOiAyMCxcblx0XHRcdFx0XCJmbHV0ZVwiOiA1MCxcblx0XHRcdFx0XCJiYW5qb1wiOiA1MCxcblx0XHRcdFx0XCJ3b29kYmxvY2tcIjogMjAsXG5cdFx0XHR9O1xuXHRcdGVsc2Vcblx0XHRcdHNlbGYucHJvZ3JhbU9mZnNldHMgPSB7fTtcblx0XHR2YXIgcCA9IHBhcmFtcy5mYWRlTGVuZ3RoICE9PSB1bmRlZmluZWQgPyBwYXJzZUludChwYXJhbXMuZmFkZUxlbmd0aCwxMCkgOiBOYU47XG5cdFx0c2VsZi5mYWRlTGVuZ3RoID0gaXNOYU4ocCkgPyAyMDAgOiBwO1xuXHRcdHAgPSBwYXJhbXMubm90ZUVuZCAhPT0gdW5kZWZpbmVkID8gcGFyc2VJbnQocGFyYW1zLm5vdGVFbmQsMTApIDogTmFOO1xuXHRcdHNlbGYubm90ZUVuZCA9IGlzTmFOKHApID8gMCA6IHA7XG5cblx0XHRzZWxmLnBhbiA9IHBhcmFtcy5wYW47XG5cdFx0c2VsZi5tZXRlclNpemUgPSAxO1xuXHRcdGlmIChvcHRpb25zLnZpc3VhbE9iaikge1xuXHRcdFx0c2VsZi5mbGF0dGVuZWQgPSBvcHRpb25zLnZpc3VhbE9iai5zZXRVcEF1ZGlvKHBhcmFtcyk7XG5cdFx0XHR2YXIgbWV0ZXIgPSBvcHRpb25zLnZpc3VhbE9iai5nZXRNZXRlckZyYWN0aW9uKCk7XG5cdFx0XHRpZiAobWV0ZXIuZGVuKVxuXHRcdFx0XHRzZWxmLm1ldGVyU2l6ZSA9IG9wdGlvbnMudmlzdWFsT2JqLmdldE1ldGVyRnJhY3Rpb24oKS5udW0gLyBvcHRpb25zLnZpc3VhbE9iai5nZXRNZXRlckZyYWN0aW9uKCkuZGVuO1xuXHRcdFx0c2VsZi5waWNrdXBMZW5ndGggPSBvcHRpb25zLnZpc3VhbE9iai5nZXRQaWNrdXBMZW5ndGgoKVxuXHRcdH0gZWxzZSBpZiAob3B0aW9ucy5zZXF1ZW5jZSlcblx0XHRcdHNlbGYuZmxhdHRlbmVkID0gb3B0aW9ucy5zZXF1ZW5jZTtcblx0XHRlbHNlXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiTXVzdCBwYXNzIGluIGVpdGhlciBhIHZpc3VhbE9iaiBvciBhIHNlcXVlbmNlXCIpKTtcblx0XHRzZWxmLm1pbGxpc2Vjb25kc1Blck1lYXN1cmUgPSBvcHRpb25zLm1pbGxpc2Vjb25kc1Blck1lYXN1cmUgPyBvcHRpb25zLm1pbGxpc2Vjb25kc1Blck1lYXN1cmUgOiAob3B0aW9ucy52aXN1YWxPYmogPyBvcHRpb25zLnZpc3VhbE9iai5taWxsaXNlY29uZHNQZXJNZWFzdXJlKHNlbGYuZmxhdHRlbmVkLnRlbXBvKSA6IDEwMDApO1xuXHRcdHNlbGYuYmVhdHNQZXJNZWFzdXJlID0gb3B0aW9ucy52aXN1YWxPYmogPyBvcHRpb25zLnZpc3VhbE9iai5nZXRCZWF0c1Blck1lYXN1cmUoKSA6IDQ7XG5cdFx0c2VsZi5zZXF1ZW5jZUNhbGxiYWNrID0gcGFyYW1zLnNlcXVlbmNlQ2FsbGJhY2s7XG5cdFx0c2VsZi5jYWxsYmFja0NvbnRleHQgPSBwYXJhbXMuY2FsbGJhY2tDb250ZXh0O1xuXHRcdHNlbGYub25FbmRlZCA9IHBhcmFtcy5vbkVuZGVkO1xuXHRcdHNlbGYubWV0ZXJGcmFjdGlvbiA9IG9wdGlvbnMudmlzdWFsT2JqID8gb3B0aW9ucy52aXN1YWxPYmouZ2V0TWV0ZXJGcmFjdGlvbigpIDoge2RlbjogMX0gLy8gSWYgd2UgYXJlIGdpdmVuIGEgc2VxdWVuY2UgaW5zdGVhZCBvZiBhIHJlZ3VsYXIgdmlzdWFsIG9iaiwgdGhlbiBkb24ndCBkbyB0aGUgc3dpbmdcblxuXHRcdHZhciBhbGxOb3RlcyA9IHt9O1xuXHRcdHZhciBjYWNoZWQgPSBbXTtcblx0XHR2YXIgZXJyb3JOb3RlcyA9IFtdO1xuXHRcdHZhciBjdXJyZW50SW5zdHJ1bWVudCA9IGluc3RydW1lbnRJbmRleFRvTmFtZVswXTtcblx0XHRzZWxmLmZsYXR0ZW5lZC50cmFja3MuZm9yRWFjaChmdW5jdGlvbih0cmFjaykge1xuXHRcdFx0dHJhY2suZm9yRWFjaChmdW5jdGlvbihldmVudCkge1xuXHRcdFx0XHRpZiAoZXZlbnQuY21kID09PSBcInByb2dyYW1cIiAmJiBpbnN0cnVtZW50SW5kZXhUb05hbWVbZXZlbnQuaW5zdHJ1bWVudF0pXG5cdFx0XHRcdFx0Y3VycmVudEluc3RydW1lbnQgPSBpbnN0cnVtZW50SW5kZXhUb05hbWVbZXZlbnQuaW5zdHJ1bWVudF07XG5cdFx0XHRcdGlmIChldmVudC5waXRjaCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0dmFyIHBpdGNoTnVtYmVyID0gZXZlbnQucGl0Y2g7XG5cdFx0XHRcdFx0dmFyIG5vdGVOYW1lID0gcGl0Y2hUb05vdGVOYW1lW3BpdGNoTnVtYmVyXTtcblx0XHRcdFx0XHR2YXIgaW5zdCA9IGV2ZW50Lmluc3RydW1lbnQgIT09IHVuZGVmaW5lZCA/IGluc3RydW1lbnRJbmRleFRvTmFtZVtldmVudC5pbnN0cnVtZW50XSA6IGN1cnJlbnRJbnN0cnVtZW50XG5cdFx0XHRcdFx0aWYgKG5vdGVOYW1lKSB7XG5cdFx0XHRcdFx0XHRpZiAoIWFsbE5vdGVzW2luc3RdKVxuXHRcdFx0XHRcdFx0XHRhbGxOb3Rlc1tpbnN0XSA9IHt9O1xuXHRcdFx0XHRcdFx0aWYgKCFzb3VuZHNDYWNoZVtpbnN0XSB8fCAhc291bmRzQ2FjaGVbaW5zdF1bbm90ZU5hbWVdKVxuXHRcdFx0XHRcdFx0XHRhbGxOb3Rlc1tpbnN0XVtub3RlTmFtZV0gPSB0cnVlO1xuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHZhciBsYWJlbDIgPSBpbnN0K1wiOlwiK25vdGVOYW1lXG5cdFx0XHRcdFx0XHRcdGlmIChjYWNoZWQuaW5kZXhPZihsYWJlbDIpIDwgMClcblx0XHRcdFx0XHRcdFx0XHRjYWNoZWQucHVzaChsYWJlbDIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR2YXIgbGFiZWwgPSBpbnN0K1wiOlwiK25vdGVOYW1lXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIkNhbid0IGZpbmQgbm90ZTogXCIsIHBpdGNoTnVtYmVyLCBsYWJlbCk7XG5cdFx0XHRcdFx0XHRpZiAoZXJyb3JOb3Rlcy5pbmRleE9mKGxhYmVsKSA8IDApXG5cdFx0XHRcdFx0XHRcdGVycm9yTm90ZXMucHVzaChsYWJlbClcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdGlmIChzZWxmLmRlYnVnQ2FsbGJhY2spXG5cdFx0XHRzZWxmLmRlYnVnQ2FsbGJhY2soXCJub3RlIGdhdGhlcmluZyB0aW1lID0gXCIgKyBNYXRoLmZsb29yKChhY3RpdmVBdWRpb0NvbnRleHQoKS5jdXJyZW50VGltZSAtIHN0YXJ0VGltZSkqMTAwMCkrXCJtc1wiKTtcblx0XHRzdGFydFRpbWUgPSBhY3RpdmVBdWRpb0NvbnRleHQoKS5jdXJyZW50VGltZTtcblxuXHRcdHZhciBub3RlcyA9IFtdO1xuXHRcdE9iamVjdC5rZXlzKGFsbE5vdGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGluc3RydW1lbnQpIHtcblx0XHRcdE9iamVjdC5rZXlzKGFsbE5vdGVzW2luc3RydW1lbnRdKS5mb3JFYWNoKGZ1bmN0aW9uKG5vdGUpIHtcblx0XHRcdFx0bm90ZXMucHVzaCh7IGluc3RydW1lbnQ6IGluc3RydW1lbnQsIG5vdGU6IG5vdGUgfSk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0XHRpZiAoc2VsZi5kZWJ1Z0NhbGxiYWNrKVxuXHRcdFx0c2VsZi5kZWJ1Z0NhbGxiYWNrKFwibm90ZXMgXCIrSlNPTi5zdHJpbmdpZnkobm90ZXMpKTtcblxuXHRcdC8vIElmIHRoZXJlIGFyZSBsb3RzIG9mIG5vdGVzLCBsb2FkIHRoZW0gaW4gYmF0Y2hlc1xuXHRcdHZhciBiYXRjaGVzID0gW107XG5cdFx0dmFyIENIVU5LID0gMjU2O1xuXHRcdGZvciAodmFyIGk9MDsgaSA8IG5vdGVzLmxlbmd0aDsgaSArPSBDSFVOSykge1xuXHRcdFx0YmF0Y2hlcy5wdXNoKG5vdGVzLnNsaWNlKGksIGkgKyBDSFVOSykpO1xuXHRcdH1cblxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdHZhciByZXN1bHRzID0ge1xuXHRcdFx0XHRjYWNoZWQ6IGNhY2hlZCxcblx0XHRcdFx0ZXJyb3I6IGVycm9yTm90ZXMsXG5cdFx0XHRcdGxvYWRlZDogW11cblx0XHRcdH07XG5cblx0XHRcdHZhciBpbmRleCA9IDA7XG5cdFx0XHR2YXIgbmV4dCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoc2VsZi5kZWJ1Z0NhbGxiYWNrKVxuXHRcdFx0XHRcdHNlbGYuZGVidWdDYWxsYmFjayhcImxvYWRCYXRjaCBpZHg9XCIraW5kZXgrIFwiIGxlbj1cIitiYXRjaGVzLmxlbmd0aCk7XG5cdFxuXHRcdFx0XHRpZiAoaW5kZXggPCBiYXRjaGVzLmxlbmd0aCkge1xuXHRcdFx0XHRcdHNlbGYuX2xvYWRCYXRjaChiYXRjaGVzW2luZGV4XSwgc2VsZi5zb3VuZEZvbnRVcmwsIHN0YXJ0VGltZSkudGhlbihmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdFx0XHRpZiAoc2VsZi5kZWJ1Z0NhbGxiYWNrKVxuXHRcdFx0XHRcdFx0XHRzZWxmLmRlYnVnQ2FsbGJhY2soXCJsb2FkQmF0Y2ggdGhlblwiKTtcblx0XHRcdFx0XHRcdHN0YXJ0VGltZSA9IGFjdGl2ZUF1ZGlvQ29udGV4dCgpLmN1cnJlbnRUaW1lO1xuXHRcdFx0XHRcdFx0aWYgKGRhdGEpIHtcblx0XHRcdFx0XHRcdFx0aWYgKGRhdGEuZXJyb3IpXG5cdFx0XHRcdFx0XHRcdFx0cmVzdWx0cy5lcnJvciA9IHJlc3VsdHMuZXJyb3IuY29uY2F0KGRhdGEuZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHRpZiAoZGF0YS5sb2FkZWQpXG5cdFx0XHRcdFx0XHRcdFx0cmVzdWx0cy5sb2FkZWQgPSByZXN1bHRzLmxvYWRlZC5jb25jYXQoZGF0YS5sb2FkZWQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0XHRcdG5leHQoKTtcblx0XHRcdFx0XHR9LCByZWplY3QpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmIChzZWxmLmRlYnVnQ2FsbGJhY2spXG5cdFx0XHRcdFx0XHRzZWxmLmRlYnVnQ2FsbGJhY2soXCJyZXNvbHZlIGluaXRcIik7XG5cdFx0XG5cdFx0XHRcdFx0cmVzb2x2ZShyZXN1bHRzKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdG5leHQoKTtcblx0XHR9KTtcblx0fTtcblxuXHRzZWxmLl9sb2FkQmF0Y2ggPSAoZnVuY3Rpb24oYmF0Y2gsIHNvdW5kRm9udFVybCwgc3RhcnRUaW1lLCBkZWxheSkge1xuXHRcdC8vIFRoaXMgaXMgY2FsbGVkIHJlY3Vyc2l2ZWx5IHRvIHNlZSBpZiB0aGUgc291bmRzIGhhdmUgbG9hZGVkLiBUaGUgXCJkZWxheVwiIHBhcmFtZXRlciBpcyBob3cgbG9uZyBpdCBoYXMgYmVlbiBzaW5jZSB0aGUgb3JpZ2luYWwgY2FsbC5cblx0XHR2YXIgcHJvbWlzZXMgPSBbXTtcblx0XHRiYXRjaC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdGlmIChzZWxmLmRlYnVnQ2FsbGJhY2spXG5cdFx0XHRcdHNlbGYuZGVidWdDYWxsYmFjayhcImdldE5vdGUgXCIgKyBpdGVtLmluc3RydW1lbnQrJzonK2l0ZW0ubm90ZSk7XG5cdFx0XHRwcm9taXNlcy5wdXNoKGdldE5vdGUoc291bmRGb250VXJsLCBpdGVtLmluc3RydW1lbnQsIGl0ZW0ubm90ZSwgYWN0aXZlQXVkaW9Db250ZXh0KCkpKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdGlmIChzZWxmLmRlYnVnQ2FsbGJhY2spXG5cdFx0XHRcdHNlbGYuZGVidWdDYWxsYmFjayhcIm1wMyBsb2FkIHRpbWUgPSBcIiArIE1hdGguZmxvb3IoKGFjdGl2ZUF1ZGlvQ29udGV4dCgpLmN1cnJlbnRUaW1lIC0gc3RhcnRUaW1lKSoxMDAwKStcIm1zXCIpO1xuXHRcdFx0dmFyIGxvYWRlZCA9IFtdO1xuXHRcdFx0dmFyIGNhY2hlZCA9IFtdO1xuXHRcdFx0dmFyIHBlbmRpbmcgPSBbXTtcblx0XHRcdHZhciBlcnJvciA9IFtdO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCByZXNwb25zZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgb25lUmVzcG9uc2UgPSByZXNwb25zZVtpXTtcblx0XHRcdFx0dmFyIHdoaWNoID0gb25lUmVzcG9uc2UuaW5zdHJ1bWVudCArIFwiOlwiICsgb25lUmVzcG9uc2UubmFtZTtcblx0XHRcdFx0aWYgKG9uZVJlc3BvbnNlLnN0YXR1cyA9PT0gXCJsb2FkZWRcIilcblx0XHRcdFx0XHRsb2FkZWQucHVzaCh3aGljaCk7XG5cdFx0XHRcdGVsc2UgaWYgKG9uZVJlc3BvbnNlLnN0YXR1cyA9PT0gXCJwZW5kaW5nXCIpXG5cdFx0XHRcdFx0cGVuZGluZy5wdXNoKHdoaWNoKTtcblx0XHRcdFx0ZWxzZSBpZiAob25lUmVzcG9uc2Uuc3RhdHVzID09PSBcImNhY2hlZFwiKVxuXHRcdFx0XHRcdGNhY2hlZC5wdXNoKHdoaWNoKTtcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdGVycm9yLnB1c2god2hpY2ggKyAnICcgKyBvbmVSZXNwb25zZS5tZXNzYWdlKTtcblx0XHRcdH1cblx0XHRcdGlmIChwZW5kaW5nLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0aWYgKHNlbGYuZGVidWdDYWxsYmFjaylcblx0XHRcdFx0XHRzZWxmLmRlYnVnQ2FsbGJhY2soXCJwZW5kaW5nIFwiICsgSlNPTi5zdHJpbmdpZnkocGVuZGluZykpO1xuXHRcdFx0XHQvLyBUaGVyZSB3YXMgcHJvYmFibHkgYSBzZWNvbmQgY2FsbCBmb3Igbm90ZXMgYmVmb3JlIHRoZSBmaXJzdCBvbmUgZmluaXNoZWQsIHNvIGp1c3QgcmV0cnkgYSBmZXcgdGltZXMgdG8gc2VlIGlmIHRoZXkgc3RvcCBiZWluZyBwZW5kaW5nLlxuXHRcdFx0XHQvLyBSZXRyeSBxdWlja2x5IGF0IGZpcnN0IHNvIHRoYXQgdGhlcmUgaXNuJ3QgYW4gdW5uZWNlc3NhcnkgZGVsYXksIGJ1dCBpbmNyZWFzZSB0aGUgZGVsYXkgZWFjaCB0aW1lLlxuXHRcdFx0XHRpZiAoIWRlbGF5KVxuXHRcdFx0XHRcdGRlbGF5ID0gNTA7XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRkZWxheSA9IGRlbGF5ICogMjtcblx0XHRcdFx0aWYgKGRlbGF5IDwgOTAwMDApIHtcblx0XHRcdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBuZXdCYXRjaCA9IFtdO1xuXHRcdFx0XHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgcGVuZGluZy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRcdHdoaWNoID0gcGVuZGluZ1tpXS5zcGxpdChcIjpcIik7XG5cdFx0XHRcdFx0XHRcdFx0bmV3QmF0Y2gucHVzaCh7aW5zdHJ1bWVudDogd2hpY2hbMF0sIG5vdGU6IHdoaWNoWzFdfSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuZGVidWdDYWxsYmFjaylcblx0XHRcdFx0XHRcdFx0XHRzZWxmLmRlYnVnQ2FsbGJhY2soXCJyZXRyeSBcIiArIEpTT04uc3RyaW5naWZ5KG5ld0JhdGNoKSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl9sb2FkQmF0Y2gobmV3QmF0Y2gsIHNvdW5kRm9udFVybCwgc3RhcnRUaW1lLCBkZWxheSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKHJlc3BvbnNlKTtcblx0XHRcdFx0XHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9LCBkZWxheSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dmFyIGxpc3QgPSBbXTtcblx0XHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGJhdGNoLmxlbmd0aDsgaisrKVxuXHRcdFx0XHRcdFx0bGlzdC5wdXNoKGJhdGNoW2pdLmluc3RydW1lbnQrJy8nK2JhdGNoW2pdLm5vdGUpXG5cdFx0XHRcdFx0XHRpZiAoc2VsZi5kZWJ1Z0NhbGxiYWNrKVxuXHRcdFx0XHRcdFx0XHRzZWxmLmRlYnVnQ2FsbGJhY2soXCJsb2FkQmF0Y2ggdGltZW91dFwiKVxuXHRcdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcInRpbWVvdXQgYXR0ZW1wdGluZyB0byBsb2FkOiBcIiArIGxpc3Quam9pbihcIiwgXCIpKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChzZWxmLmRlYnVnQ2FsbGJhY2spXG5cdFx0XHRcdFx0c2VsZi5kZWJ1Z0NhbGxiYWNrKFwibG9hZEJhdGNoIHJlc29sdmVcIilcblx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSh7bG9hZGVkOiBsb2FkZWQsIGNhY2hlZDogY2FjaGVkLCBlcnJvcjogZXJyb3J9KTtcblx0XHRcdH1cblx0XHR9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcblx0XHRcdGlmIChzZWxmLmRlYnVnQ2FsbGJhY2spXG5cdFx0XHRcdHNlbGYuZGVidWdDYWxsYmFjayhcImxvYWRCYXRjaCBjYXRjaCBcIitlcnJvci5tZXNzYWdlKVxuXHRcdH0pO1xuXHR9KTtcblxuXHRzZWxmLnByaW1lID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly8gQXQgdGhpcyBwb2ludCBhbGwgb2YgdGhlIG5vdGVzIGFyZSBsb2FkZWQuIFRoaXMgZnVuY3Rpb24gd3JpdGVzIHRoZW0gaW50byB0aGUgb3V0cHV0IGJ1ZmZlci5cblx0XHQvLyBNb3N0IG11c2ljIGhhcyBhIGxvdCBvZiByZXBlYXRpbmcgbm90ZXMuIElmIGEgbm90ZSBpcyB0aGUgc2FtZSBwaXRjaCwgdm9sdW1lLCBsZW5ndGgsIGV0Yy4gYXMgYW5vdGhlciBvbmUsXG5cdFx0Ly8gSXQgc2F2ZXMgYSBsb3Qgb2YgdGltZSB0byBqdXN0IGNyZWF0ZSBpdCBvbmNlIGFuZCBwbGFjZSBpdCByZXBlYXRlZGx5IHdoZXJlIGV2ZXIgaXQgbmVlZHMgdG8gYmUuXG5cdFx0dmFyIGZhZGVUaW1lU2VjID0gc2VsZi5mYWRlTGVuZ3RoLzEwMDA7XG5cdFx0c2VsZi5pc1J1bm5pbmcgPSBmYWxzZTtcblx0XHRpZiAoIXNlbGYuYXVkaW9CdWZmZXJQb3NzaWJsZSlcblx0XHRcdHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3Iobm90U3VwcG9ydGVkTWVzc2FnZSkpO1xuXHRcdGlmIChzZWxmLmRlYnVnQ2FsbGJhY2spXG5cdFx0XHRzZWxmLmRlYnVnQ2FsbGJhY2soXCJwcmltZSBjYWxsZWRcIik7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHR2YXIgc3RhcnRUaW1lID0gYWN0aXZlQXVkaW9Db250ZXh0KCkuY3VycmVudFRpbWU7XG5cdFx0XHRcdHZhciB0ZW1wb011bHRpcGxpZXIgPSBzZWxmLm1pbGxpc2Vjb25kc1Blck1lYXN1cmUgLyAxMDAwIC8gc2VsZi5tZXRlclNpemU7XG5cdFx0XHRcdHNlbGYuZHVyYXRpb24gPSBzZWxmLmZsYXR0ZW5lZC50b3RhbER1cmF0aW9uICogdGVtcG9NdWx0aXBsaWVyO1xuXHRcdFx0XHRpZiAoc2VsZi5kdXJhdGlvbiA8PSAwKSB7XG5cdFx0XHRcdFx0c2VsZi5hdWRpb0J1ZmZlcnMgPSBbXTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzb2x2ZSh7c3RhdHVzOiBcImVtcHR5XCIsIHNlY29uZHM6IDB9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzZWxmLmR1cmF0aW9uICs9IGZhZGVUaW1lU2VjO1xuXHRcdFx0XHR2YXIgdG90YWxTYW1wbGVzID0gTWF0aC5mbG9vcihhY3RpdmVBdWRpb0NvbnRleHQoKS5zYW1wbGVSYXRlICogc2VsZi5kdXJhdGlvbik7XG5cblx0XHRcdFx0Ly8gVGhlcmUgbWlnaHQgYmUgYSBwcmV2aW91cyBydW4gdGhhdCBuZWVkcyB0byBiZSB0dXJuZWQgb2ZmLlxuXHRcdFx0XHRzZWxmLnN0b3AoKTtcblxuXHRcdFx0XHR2YXIgbm90ZU1hcFRyYWNrcyA9IGNyZWF0ZU5vdGVNYXAoc2VsZi5mbGF0dGVuZWQpO1xuXG5cdFx0XHRcdGlmIChzZWxmLm9wdGlvbnMuc3dpbmcpXG5cdFx0XHRcdFx0YWRkU3dpbmcobm90ZU1hcFRyYWNrcywgc2VsZi5vcHRpb25zLnN3aW5nLCBzZWxmLm1ldGVyRnJhY3Rpb24sIHNlbGYucGlja3VwTGVuZ3RoKVxuXG5cdFx0XHRcdGlmIChzZWxmLnNlcXVlbmNlQ2FsbGJhY2spXG5cdFx0XHRcdFx0c2VsZi5zZXF1ZW5jZUNhbGxiYWNrKG5vdGVNYXBUcmFja3MsIHNlbGYuY2FsbGJhY2tDb250ZXh0KTtcblxuXHRcdFx0XHR2YXIgcGFuRGlzdGFuY2VzID0gc2V0UGFuKG5vdGVNYXBUcmFja3MubGVuZ3RoLCBzZWxmLnBhbik7XG5cblx0XHRcdFx0Ly8gQ3JlYXRlIGEgc2ltcGxlIGxpc3Qgb2YgYWxsIHRoZSB1bmlxdWUgc291bmRzIGluIHRoaXMgbXVzaWMgYW5kIHdoZXJlIHRoZXkgc2hvdWxkIGJlIHBsYWNlZC5cblx0XHRcdFx0Ly8gVGhlcmUgYXBwZWFycyB0byBiZSBhIGxpbWl0IG9uIGhvdyBtYW55IGF1ZGlvIGJ1ZmZlcnMgY2FuIGJlIGNyZWF0ZWQgYXQgb25jZSBzbyB0aGlzIHRlY2huaXF1ZSBsaW1pdHMgdGhlIG51bWJlciBuZWVkZWQuXG5cdFx0XHRcdHZhciB1bmlxdWVTb3VuZHMgPSB7fTtcblx0XHRcdFx0bm90ZU1hcFRyYWNrcy5mb3JFYWNoKGZ1bmN0aW9uIChub3RlTWFwLCB0cmFja051bWJlcikge1xuXHRcdFx0XHRcdHZhciBwYW5EaXN0YW5jZSA9IHBhbkRpc3RhbmNlcyAmJiBwYW5EaXN0YW5jZXMubGVuZ3RoID4gdHJhY2tOdW1iZXIgPyBwYW5EaXN0YW5jZXNbdHJhY2tOdW1iZXJdIDogMDtcblx0XHRcdFx0XHRub3RlTWFwLmZvckVhY2goZnVuY3Rpb24gKG5vdGUpIHtcblx0XHRcdFx0XHRcdHZhciBrZXkgPSBub3RlLmluc3RydW1lbnQgKyAnOicgKyBub3RlLnBpdGNoICsgJzonICsgbm90ZS52b2x1bWUgKyAnOicgKyBNYXRoLnJvdW5kKChub3RlLmVuZCAtIG5vdGUuc3RhcnQpICogMTAwMCkgLyAxMDAwICsgJzonICsgcGFuRGlzdGFuY2UgKyAnOicgKyB0ZW1wb011bHRpcGxpZXIgKyAnOicgKyAobm90ZS5jZW50cyA/IG5vdGUuY2VudHMgOiAwKTtcblx0XHRcdFx0XHRcdGlmIChzZWxmLmRlYnVnQ2FsbGJhY2spXG5cdFx0XHRcdFx0XHRcdHNlbGYuZGVidWdDYWxsYmFjayhcIm5vdGVNYXBUcmFjayBcIiArIGtleSlcblx0XHRcdFx0XHRcdGlmICghdW5pcXVlU291bmRzW2tleV0pXG5cdFx0XHRcdFx0XHRcdHVuaXF1ZVNvdW5kc1trZXldID0gW107XG5cdFx0XHRcdFx0XHR1bmlxdWVTb3VuZHNba2V5XS5wdXNoKG5vdGUuc3RhcnQpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvLyBOb3cgdGhhdCB3ZSBrbm93IHdoYXQgd2UgYXJlIHRyeWluZyB0byBjcmVhdGUsIGNvbnN0cnVjdCB0aGUgYXVkaW8gYnVmZmVyIGJ5IGNyZWF0aW5nIGVhY2ggc291bmQgYW5kIHBsYWNpbmcgaXQuXG5cdFx0XHRcdHZhciBhbGxQcm9taXNlcyA9IFtdO1xuXHRcdFx0XHR2YXIgYXVkaW9CdWZmZXIgPSBhY3RpdmVBdWRpb0NvbnRleHQoKS5jcmVhdGVCdWZmZXIoMiwgdG90YWxTYW1wbGVzLCBhY3RpdmVBdWRpb0NvbnRleHQoKS5zYW1wbGVSYXRlKTtcblx0XHRcdFx0Zm9yICh2YXIga2V5MiA9IDA7IGtleTIgPCBPYmplY3Qua2V5cyh1bmlxdWVTb3VuZHMpLmxlbmd0aDsga2V5MisrKSB7XG5cdFx0XHRcdFx0dmFyIGsgPSBPYmplY3Qua2V5cyh1bmlxdWVTb3VuZHMpW2tleTJdO1xuXHRcdFx0XHRcdHZhciBwYXJ0cyA9IGsuc3BsaXQoXCI6XCIpO1xuXHRcdFx0XHRcdHZhciBjZW50cyA9IHBhcnRzWzZdICE9PSB1bmRlZmluZWQgPyBwYXJzZUZsb2F0KHBhcnRzWzZdKSA6IDA7XG5cdFx0XHRcdFx0cGFydHMgPSB7aW5zdHJ1bWVudDogcGFydHNbMF0sIHBpdGNoOiBwYXJzZUludChwYXJ0c1sxXSwgMTApLCB2b2x1bWU6IHBhcnNlSW50KHBhcnRzWzJdLCAxMCksIGxlbjogcGFyc2VGbG9hdChwYXJ0c1szXSksIHBhbjogcGFyc2VGbG9hdChwYXJ0c1s0XSksIHRlbXBvTXVsdGlwbGllcjogcGFyc2VGbG9hdChwYXJ0c1s1XSksIGNlbnRzOiBjZW50c307XG5cdFx0XHRcdFx0YWxsUHJvbWlzZXMucHVzaChwbGFjZU5vdGUoYXVkaW9CdWZmZXIsIGFjdGl2ZUF1ZGlvQ29udGV4dCgpLnNhbXBsZVJhdGUsIHBhcnRzLCB1bmlxdWVTb3VuZHNba10sIHNlbGYuc291bmRGb250Vm9sdW1lTXVsdGlwbGllciwgc2VsZi5wcm9ncmFtT2Zmc2V0c1twYXJ0cy5pbnN0cnVtZW50XSwgZmFkZVRpbWVTZWMsIHNlbGYubm90ZUVuZCAvIDEwMDAsIHNlbGYuZGVidWdDYWxsYmFjaykpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHNlbGYuYXVkaW9CdWZmZXJzID0gW2F1ZGlvQnVmZmVyXTtcblxuXHRcdFx0XHRpZiAoc2VsZi5kZWJ1Z0NhbGxiYWNrKSB7XG5cdFx0XHRcdFx0c2VsZi5kZWJ1Z0NhbGxiYWNrKFwic2FtcGxlUmF0ZSA9IFwiICsgYWN0aXZlQXVkaW9Db250ZXh0KCkuc2FtcGxlUmF0ZSk7XG5cdFx0XHRcdFx0c2VsZi5kZWJ1Z0NhbGxiYWNrKFwidG90YWxTYW1wbGVzID0gXCIgKyB0b3RhbFNhbXBsZXMpO1xuXHRcdFx0XHRcdHNlbGYuZGVidWdDYWxsYmFjayhcImNyZWF0aW9uVGltZSA9IFwiICsgTWF0aC5mbG9vcigoYWN0aXZlQXVkaW9Db250ZXh0KCkuY3VycmVudFRpbWUgLSBzdGFydFRpbWUpICogMTAwMCkgKyBcIm1zXCIpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZnVuY3Rpb24gcmVzb2x2ZURhdGEobWUpIHtcblx0XHRcdFx0XHR2YXIgZHVyYXRpb24gPSBtZSAmJiBtZS5hdWRpb0J1ZmZlcnMgJiYgbWUuYXVkaW9CdWZmZXJzLmxlbmd0aCA+IDAgPyBtZS5hdWRpb0J1ZmZlcnNbMF0uZHVyYXRpb24gOiAwO1xuXHRcdFx0XHRcdHJldHVybiB7c3RhdHVzOiBhY3RpdmVBdWRpb0NvbnRleHQoKS5zdGF0ZSwgZHVyYXRpb246IGR1cmF0aW9ufVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0UHJvbWlzZS5hbGwoYWxsUHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdC8vIFNhZmFyaSBpT1MgY2FuIG1lc3Mgd2l0aCB0aGUgYXVkaW9Db250ZXh0IHN0YXRlLCBzbyByZXN1bWUgaWYgbmVlZGVkLlxuXHRcdFx0XHRcdGlmIChhY3RpdmVBdWRpb0NvbnRleHQoKS5zdGF0ZSA9PT0gXCJzdXNwZW5kZWRcIikge1xuXHRcdFx0XHRcdFx0YWN0aXZlQXVkaW9Db250ZXh0KCkucmVzdW1lKCkudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmUocmVzb2x2ZURhdGEoc2VsZikpO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGFjdGl2ZUF1ZGlvQ29udGV4dCgpLnN0YXRlID09PSBcImludGVycnVwdGVkXCIpIHtcblx0XHRcdFx0XHRcdGFjdGl2ZUF1ZGlvQ29udGV4dCgpLnN1c3BlbmQoKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0YWN0aXZlQXVkaW9Db250ZXh0KCkucmVzdW1lKCkudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZShyZXNvbHZlRGF0YShzZWxmKSk7XG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKHJlc29sdmVEYXRhKHNlbGYpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcilcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gc2V0UGFuKG51bVRyYWNrcywgcGFuUGFyYW0pIHtcblx0XHQvLyBwYW5QYXJhbSwgaWYgaXQgaXMgc2V0LCBjYW4gYmUgZWl0aGVyIGEgbnVtYmVyIHJlcHJlc2VudGluZyB0aGUgc2VwYXJhdGlvbiBiZXR3ZWVuIGVhY2ggdHJhY2ssXG5cdFx0Ly8gb3IgYW4gYXJyYXksIHdoaWNoIGlzIHRoZSBhYnNvbHV0ZSBwYW4gcG9zaXRpb24gZm9yIGVhY2ggdHJhY2suXG5cdFx0aWYgKHBhblBhcmFtID09PSBudWxsIHx8IHBhblBhcmFtID09PSB1bmRlZmluZWQpXG5cdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdHZhciBwYW5EaXN0YW5jZXMgPSBbXTtcblx0XHRpZiAocGFuUGFyYW0ubGVuZ3RoKSB7XG5cdFx0XHQvLyBXZSByZWNlaXZlZCBhbiBhcnJheS4gSWYgdGhlcmUgYXJlIHRoZSBzYW1lIG51bWJlciBvZiBpdGVtcyBpbiB0aGUgcGFuIGFycmF5IGFzIHRoZSBudW1iZXIgb2YgdHJhY2tzLFxuXHRcdFx0Ly8gaXQgYWxsIGxpbmVzIHVwIHBlcmZlY3RseS4gSWYgdGhlcmUgYXJlIG1vcmUgaXRlbXMgaW4gdGhlIHBhbiBhcnJheSB0aGFuIHRoZSB0cmFja3MgdGhlbiB0aGUgZXhjZXNzIGl0ZW1zIGFyZSBpZ25vcmVkLlxuXHRcdFx0Ly8gSWYgdGhlcmUgYXJlIG1vcmUgdHJhY2tzIHRoYW4gaXRlbXMgaW4gdGhlIHBhbiBhcnJheSB0aGVuIHRoZSByZW1haW5pbmcgdHJhY2tzIGFyZSBwbGFjZWQgaW4gdGhlIG1pZGRsZS5cblx0XHRcdC8vIElmIGFueSBvZiB0aGUgcGFuIG51bWJlcnMgYXJlIG91dCBvZiByYW5nZSB0aGVuIHRoZXkgYXJlIGFkanVzdGVkLlxuXHRcdFx0Zm9yICh2YXIgcHAgPSAwOyBwcCA8IG51bVRyYWNrczsgcHArKykge1xuXHRcdFx0XHRpZiAocHAgPCBwYW5QYXJhbS5sZW5ndGgpIHtcblx0XHRcdFx0XHR2YXIgeCA9IHBhcnNlRmxvYXQocGFuUGFyYW1bcHBdKTtcblx0XHRcdFx0XHRpZiAoeCA8IC0xKVxuXHRcdFx0XHRcdFx0eCA9IC0xO1xuXHRcdFx0XHRcdGVsc2UgaWYgKHggPiAxKVxuXHRcdFx0XHRcdFx0eCA9IDE7XG5cdFx0XHRcdFx0cGFuRGlzdGFuY2VzLnB1c2goeCk7XG5cdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdHBhbkRpc3RhbmNlcy5wdXNoKDApXG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcGFuRGlzdGFuY2VzO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcGFuTnVtYmVyID0gcGFyc2VGbG9hdChwYW5QYXJhbSk7XG5cdFx0XHQvLyB0aGUgc2VwYXJhdGlvbiBuZWVkcyB0byBiZSBubyBmdXJ0aGVyIHRoYW4gMiAoaS5lLiAtMSB0byAxKSBzbyB0ZXN0IHRvIHNlZSBpZiB0aGVyZSBhcmUgdG9vIG1hbnkgdHJhY2tzIGZvciB0aGUgcGFzc2VkIGluIGRpc3RhbmNlXG5cdFx0XHRpZiAocGFuTnVtYmVyKihudW1UcmFja3MtMSkgPiAyKVxuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdFx0Ly8gSWYgdGhlcmUgYXJlIGFuIGV2ZW4gbnVtYmVyIG9mIHRyYWNrcywgdGhlbiBvZmZzZXQgc28gdGhhdCB0aGUgZmlyc3QgdHdvIGFyZSBjZW50ZXJlZCBhcm91bmQgdGhlIG1pZGRsZVxuXHRcdFx0dmFyIGV2ZW4gPSBudW1UcmFja3MgJSAyID09PSAwO1xuXHRcdFx0dmFyIGN1cnJMb3cgPSBldmVuID8gMCAtIHBhbk51bWJlci8yIDogMDtcblx0XHRcdHZhciBjdXJySGlnaCA9IGN1cnJMb3crcGFuTnVtYmVyO1xuXHRcdFx0Ly8gTm93IGFkZCB0aGUgdHJhY2tzIHRvIGVpdGhlciBzaWRlXG5cdFx0XHRmb3IgKHZhciBwID0gMDsgcCA8IG51bVRyYWNrczsgcCsrKSB7XG5cdFx0XHRcdGV2ZW4gPSBwICUgMiA9PT0gMDtcblx0XHRcdFx0aWYgKGV2ZW4pIHtcblx0XHRcdFx0XHRwYW5EaXN0YW5jZXMucHVzaChjdXJyTG93KTtcblx0XHRcdFx0XHRjdXJyTG93IC09IHBhbk51bWJlcjtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRwYW5EaXN0YW5jZXMucHVzaChjdXJySGlnaCk7XG5cdFx0XHRcdFx0Y3VyckhpZ2ggKz0gcGFuTnVtYmVyO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcGFuRGlzdGFuY2VzO1xuXHRcdH1cblx0XHQvLyBUaGVyZSB3YXMgZWl0aGVyIG5vIHBhbm5pbmcsIG9yIHRoZSBwYXJhbWV0ZXJzIHdlcmUgaWxsZWdhbFxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0Ly8gVGhpcyBpcyBjYWxsZWQgYWZ0ZXIgZXZlcnl0aGluZyBpcyBzZXQgdXAsIHNvIGl0IGNhbiBxdWlja2x5IG1ha2Ugc291bmRcblx0c2VsZi5zdGFydCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmICghc2VsZi5hdWRpb0J1ZmZlclBvc3NpYmxlKVxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKG5vdFN1cHBvcnRlZE1lc3NhZ2UpO1xuXHRcdGlmIChzZWxmLmRlYnVnQ2FsbGJhY2spXG5cdFx0XHRzZWxmLmRlYnVnQ2FsbGJhY2soXCJzdGFydCBjYWxsZWRcIik7XG5cblx0XHR2YXIgcmVzdW1lUG9zaXRpb24gPSBzZWxmLnBhdXNlZFRpbWVTZWMgPyBzZWxmLnBhdXNlZFRpbWVTZWMgOiAwO1xuXHRcdHNlbGYuX2tpY2tPZmZTb3VuZChyZXN1bWVQb3NpdGlvbik7XG5cdFx0c2VsZi5zdGFydFRpbWVTZWMgPSBhY3RpdmVBdWRpb0NvbnRleHQoKS5jdXJyZW50VGltZSAtIHJlc3VtZVBvc2l0aW9uO1xuXHRcdHNlbGYucGF1c2VkVGltZVNlYyA9IHVuZGVmaW5lZDtcblxuXHRcdGlmIChzZWxmLmRlYnVnQ2FsbGJhY2spXG5cdFx0XHRzZWxmLmRlYnVnQ2FsbGJhY2soXCJNSURJIFNUQVJURURcIiwgc2VsZi5zdGFydFRpbWVTZWMpO1xuXHR9O1xuXG5cdHNlbGYucGF1c2UgPSBmdW5jdGlvbigpIHtcblx0XHRpZiAoIXNlbGYuYXVkaW9CdWZmZXJQb3NzaWJsZSlcblx0XHRcdHRocm93IG5ldyBFcnJvcihub3RTdXBwb3J0ZWRNZXNzYWdlKTtcblx0XHRpZiAoc2VsZi5kZWJ1Z0NhbGxiYWNrKVxuXHRcdFx0c2VsZi5kZWJ1Z0NhbGxiYWNrKFwicGF1c2UgY2FsbGVkXCIpO1xuXG5cdFx0c2VsZi5wYXVzZWRUaW1lU2VjID0gc2VsZi5zdG9wKCk7XG5cdFx0cmV0dXJuIHNlbGYucGF1c2VkVGltZVNlYztcblx0fTtcblxuXHRzZWxmLnJlc3VtZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHNlbGYuc3RhcnQoKTtcblx0fTtcblxuXHRzZWxmLnNlZWsgPSBmdW5jdGlvbihwb3NpdGlvbiwgdW5pdHMpIHtcblx0XHR2YXIgb2Zmc2V0O1xuXHRcdHN3aXRjaCAodW5pdHMpIHtcblx0XHRcdGNhc2UgXCJzZWNvbmRzXCI6XG5cdFx0XHRcdG9mZnNldCA9IHBvc2l0aW9uO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJiZWF0c1wiOlxuXHRcdFx0XHRvZmZzZXQgPSBwb3NpdGlvbiAqIHNlbGYubWlsbGlzZWNvbmRzUGVyTWVhc3VyZSAvIHNlbGYuYmVhdHNQZXJNZWFzdXJlIC8gMTAwMDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHQvLyB0aGlzIGlzIFwicGVyY2VudFwiIG9yIGFueSBpbGxlZ2FsIHZhbHVlXG5cdFx0XHRcdG9mZnNldCA9IChzZWxmLmR1cmF0aW9uLXNlbGYuZmFkZUxlbmd0aC8xMDAwKSAqIHBvc2l0aW9uO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHQvLyBUT0RPLVBFUjogY2FuIHNlZWsgd2hlbiBwYXVzZWQgb3Igd2hlbiBwbGF5aW5nXG5cdFx0aWYgKCFzZWxmLmF1ZGlvQnVmZmVyUG9zc2libGUpXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3Iobm90U3VwcG9ydGVkTWVzc2FnZSk7XG5cdFx0aWYgKHNlbGYuZGVidWdDYWxsYmFjaylcblx0XHRcdHNlbGYuZGVidWdDYWxsYmFjayhcInNlZWsgY2FsbGVkIHNlYz1cIiArIG9mZnNldCk7XG5cblx0XHRpZiAoc2VsZi5pc1J1bm5pbmcpIHtcblx0XHRcdHNlbGYuc3RvcCgpO1xuXHRcdFx0c2VsZi5fa2lja09mZlNvdW5kKG9mZnNldCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNlbGYucGF1c2VkVGltZVNlYyA9IG9mZnNldDtcblx0XHR9XG5cdFx0c2VsZi5wYXVzZWRUaW1lU2VjID0gb2Zmc2V0O1xuXHR9O1xuXG5cdHNlbGYuc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRcdHNlbGYuaXNSdW5uaW5nID0gZmFsc2U7XG5cdFx0c2VsZi5wYXVzZWRUaW1lU2VjID0gdW5kZWZpbmVkO1xuXHRcdHNlbGYuZGlyZWN0U291cmNlLmZvckVhY2goZnVuY3Rpb24oc291cmNlKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRzb3VyY2Uuc3RvcCgpO1xuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0Ly8gV2UgZG9uJ3QgY2FyZSBpZiBzZWxmIHN1Y2NlZWRzOiBpdCBtaWdodCBmYWlsIGlmIHNvbWV0aGluZyBlbHNlIHR1cm5lZCBvZmYgdGhlIHNvdW5kIG9yIGl0IGVuZGVkIGZvciBzb21lIHJlYXNvbi5cblx0XHRcdFx0Y29uc29sZS5sb2coXCJkaXJlY3Qgc291cmNlIGRpZG4ndCBzdG9wOlwiLCBlcnJvcilcblx0XHRcdH1cblx0XHR9KTtcblx0XHRzZWxmLmRpcmVjdFNvdXJjZSA9IFtdO1xuXHRcdHZhciBlbGFwc2VkID0gYWN0aXZlQXVkaW9Db250ZXh0KCkuY3VycmVudFRpbWUgLSBzZWxmLnN0YXJ0VGltZVNlYztcblx0XHRyZXR1cm4gZWxhcHNlZDtcblx0fTtcblx0c2VsZi5maW5pc2hlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHNlbGYuc3RhcnRUaW1lU2VjID0gdW5kZWZpbmVkO1xuXHRcdHNlbGYucGF1c2VkVGltZVNlYyA9IHVuZGVmaW5lZDtcblx0XHRzZWxmLmlzUnVubmluZyA9IGZhbHNlO1xuXHR9O1xuXG5cdHNlbGYuZG93bmxvYWQgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG93bmxvYWRCdWZmZXIoc2VsZik7XG5cdH07XG5cblx0c2VsZi5nZXRBdWRpb0J1ZmZlciA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzZWxmLmF1ZGlvQnVmZmVyc1swXTtcblx0fTtcblxuXHRzZWxmLmdldElzUnVubmluZyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzZWxmLmlzUnVubmluZztcblx0fVxuXG5cdC8vLy8vLy8vLy8vLy8vLyBQcml2YXRlIGZ1bmN0aW9ucyAvLy8vLy8vLy8vLy8vL1xuXG5cdHNlbGYuX2RldmljZUNhcGFibGUgPSBmdW5jdGlvbigpIHtcblx0XHRpZiAoIXN1cHBvcnRzQXVkaW8oKSkge1xuXHRcdFx0Y29uc29sZS53YXJuKG5vdFN1cHBvcnRlZE1lc3NhZ2UpO1xuXHRcdFx0aWYgKHNlbGYuZGVidWdDYWxsYmFjaylcblx0XHRcdFx0c2VsZi5kZWJ1Z0NhbGxiYWNrKG5vdFN1cHBvcnRlZE1lc3NhZ2UpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fTtcblxuXHRzZWxmLl9raWNrT2ZmU291bmQgPSBmdW5jdGlvbihzZWNvbmRzKSB7XG5cdFx0c2VsZi5pc1J1bm5pbmcgPSB0cnVlO1xuXHRcdHNlbGYuZGlyZWN0U291cmNlID0gW107XG5cdFx0c2VsZi5hdWRpb0J1ZmZlcnMuZm9yRWFjaChmdW5jdGlvbihhdWRpb0J1ZmZlciwgdHJhY2tOdW0pIHtcblx0XHRcdHNlbGYuZGlyZWN0U291cmNlW3RyYWNrTnVtXSA9IGFjdGl2ZUF1ZGlvQ29udGV4dCgpLmNyZWF0ZUJ1ZmZlclNvdXJjZSgpOyAvLyBjcmVhdGVzIGEgc291bmQgc291cmNlXG5cdFx0XHRzZWxmLmRpcmVjdFNvdXJjZVt0cmFja051bV0uYnVmZmVyID0gYXVkaW9CdWZmZXI7IC8vIHRlbGwgdGhlIHNvdXJjZSB3aGljaCBzb3VuZCB0byBwbGF5XG5cdFx0XHRzZWxmLmRpcmVjdFNvdXJjZVt0cmFja051bV0uY29ubmVjdChhY3RpdmVBdWRpb0NvbnRleHQoKS5kZXN0aW5hdGlvbik7IC8vIGNvbm5lY3QgdGhlIHNvdXJjZSB0byB0aGUgY29udGV4dCdzIGRlc3RpbmF0aW9uICh0aGUgc3BlYWtlcnMpXG5cdFx0fSk7XG5cdFx0c2VsZi5kaXJlY3RTb3VyY2UuZm9yRWFjaChmdW5jdGlvbihzb3VyY2UpIHtcblx0XHRcdHNvdXJjZS5zdGFydCgwLCBzZWNvbmRzKTtcblx0XHR9KTtcblx0XHRpZiAoc2VsZi5vbkVuZGVkKSB7XG5cdFx0XHRzZWxmLmRpcmVjdFNvdXJjZVswXS5vbmVuZGVkID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRzZWxmLm9uRW5kZWQoc2VsZi5jYWxsYmFja0NvbnRleHQpO1xuXHRcdFx0fTtcblx0XHR9XG5cdH07XG5cblx0ZnVuY3Rpb24gYWRkU3dpbmcobm90ZU1hcFRyYWNrcywgc3dpbmcsIG1ldGVyRnJhY3Rpb24sIHBpY2t1cExlbmd0aCkge1xuXG5cdFx0Ly8gd2UgY2FuIG9ubHkgc3dpbmcgaW4gWC80IGFuZCBYLzggbWV0ZXJzLlxuXHRcdGlmIChtZXRlckZyYWN0aW9uLmRlbiAhPSA0ICYmIG1ldGVyRnJhY3Rpb24uZGVuICE9IDgpXG5cdFx0XHRyZXR1cm47XG5cblx0XHRzd2luZyA9IHBhcnNlRmxvYXQoc3dpbmcpO1xuXG5cdFx0Ly8gNTAgKG9yIGxlc3MpIGlzIG5vIHN3aW5nLCBcblx0XHRpZiAoaXNOYU4oc3dpbmcpIHx8IHN3aW5nIDw9IDUwKVxuXHRcdFx0cmV0dXJuO1xuXG5cdFx0Ly8gNjYgaXMgdHJpcGxldCBzd2luZyAyOjEsIGFuZCBcblx0XHQvLyA2MCBpcyBzd2luZyB3aXRoIGEgcmF0aW8gb2YgMzoyLiBcblx0XHQvLyA3NSBpcyB0aGUgbWF4aW11bSBzd2luZyB3aGVyZSB0aGUgZmlyc3QgZWlnaHQgaXMgcGxheWVkIGFzIGEgZG90dGVkIGVpZ2h0IGFuZCB0aGUgc2Vjb25kIGFzIGEgc2l4dGVlbnRoLiBcblx0XHRpZiAoc3dpbmcgPiA3NSlcblx0XHRcdHN3aW5nID0gNzU7XG5cblx0XHQvLyBjb252ZXJ0IHRoZSBzd2luZyBwZXJjZW50YWdlIHRvIGEgcGVyY2VudGFnZSBvZiBpbmNyZWFzZSBmb3IgdGhlIGZpcnN0IGhhbGYgb2YgdGhlIGJlYXRcblx0XHRzd2luZyA9IHN3aW5nLzUwIC0gMTtcblxuXHRcdC8vIFRoZSB2b2x1bWUgb2YgdGhlIHN3dW5nIG5vdGVzIGlzIGluY3JlYXNlZCBieSB0aGlzIGZhY3RvclxuXHRcdC8vIGNvdWxkIGJlIGFsc28gaW4gdGhlIHNldHRpbmdzLiBUcnkgb3V0IHZhbHVlcyBzdWNoIDAuMSwgMC4yXG5cdFx0dmFyIHZvbHVtZUluY3JlYXNlID0gMC4wO1xuXG5cdFx0Ly8gdGhlIGJlYXRMZW5ndGggaW4gWC84IG1ldGVyc1xuXHRcdHZhciBiZWF0TGVuZ3RoID0gMC4yNTsgXG5cblx0XHQvLyBpbiBYLzggbWV0ZXJzIHRoZSAxNnMgc3dpbmcgc28gdGhlIGJlYXRMZW5ndGggaXMgaGFsdmVkXG5cdFx0aWYgKG1ldGVyRnJhY3Rpb24uZGVuID09PSA4KSBcblx0XHRcdGJlYXRMZW5ndGggPSBiZWF0TGVuZ3RoLzI7IFxuXG5cdFx0Ly8gZHVyYXRpb24gb2YgYSBoYWxmIGJlYXRcblx0XHR2YXIgaGFsZmJlYXRMZW5ndGggPSBiZWF0TGVuZ3RoLzI7XG5cblx0XHQvLyB0aGUgZXh0cmEgZHVyYXRpb24gb2YgdGhlIGZpcnN0IHN3dW5nIG5vdGVzIGFuZCB0aGUgZGVsYXkgb2YgdGhlIHNlY29uZCBub3Rlc1xuXHRcdHZhciBzd2luZ0R1cmF0aW9uID0gaGFsZmJlYXRMZW5ndGggKiBzd2luZztcblxuXHRcdGZvciAodmFyIHQgPSAwOyB0IDwgbm90ZU1hcFRyYWNrcy5sZW5ndGg7IHQrKykge1xuXHRcdFx0dmFyIHRyYWNrID0gbm90ZU1hcFRyYWNrc1t0XTtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2subGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIGV2ZW50ID0gdHJhY2tbaV07XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHQvLyBpcyBoYWxmYmVhdFxuXHRcdFx0XHRcdChldmVudC5zdGFydC1waWNrdXBMZW5ndGgpICUgaGFsZmJlYXRMZW5ndGggPT0gMCAmJiAoZXZlbnQuc3RhcnQtcGlja3VwTGVuZ3RoKSAlIGJlYXRMZW5ndGggIT0gMCBcblx0XHRcdFx0XHQmJiAoXG5cdFx0XHRcdFx0XHQvLyB0aGUgcHJldmlvdXMgbm90ZSBpcyBvbiB0aGUgYmVhdCBvciBiZWZvcmUgT1IgdGhlcmUgaXMgbm8gcHJldmlvdXMgbm90ZSBcblx0XHRcdFx0XHRcdGkgPT0gMCBcblx0XHRcdFx0XHRcdHx8IHRyYWNrW2ktMV0uc3RhcnQgPD0gdHJhY2tbaV0uc3RhcnQgLSBoYWxmYmVhdExlbmd0aFxuXHRcdFx0XHRcdClcblx0XHRcdFx0XHQmJiAoXG5cdFx0XHRcdFx0XHQvLyB0aGUgbmV4dCBub3RlIGlzIG9uIHRoZSBiZWF0IG9yIGFmdGVyIE9SIHRoZXJlIGlzIG5vIG5leHQgbm90ZVxuXHRcdFx0XHRcdFx0aSA9PSB0cmFjay5sZW5ndGggLSAxIFxuXHRcdFx0XHRcdFx0fHwgdHJhY2tbaSsxXS5zdGFydCA+PSB0cmFja1tpXS5zdGFydCArIGhhbGZiZWF0TGVuZ3RoXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHR2YXIgb2xkRXZlbnRTdGFydCA9IGV2ZW50LnN0YXJ0O1xuXG5cdFx0XHRcdFx0ZXZlbnQuc3RhcnQgKz0gc3dpbmdEdXJhdGlvbjtcblxuXHRcdFx0XHRcdC8vIEluY3JlYXNlIHZvbHVtZSBvZiBzd3VuZyBub3Rlc1xuXHRcdFx0XHRcdGV2ZW50LnZvbHVtZSAqPSAxICsgdm9sdW1lSW5jcmVhc2U7XG5cblx0XHRcdFx0XHQvLyBpZiB0aGVyZSBpcyBhIHByZXZpb3VzIG5vdGUgZW5kaW5nIGF0IHRoZSBzdGFydCBvZiB0aGlzIG5vdGUsIGV4dGVuZCBpdHMgZW5kXG5cdFx0XHRcdFx0Ly8gYW5kIGRlY3JlYXNlIGl0cyB2b2x1bWVcblx0XHRcdFx0XHRpZiAoaSA+IDAgJiYgdHJhY2tbaS0xXS5lbmQgPT0gb2xkRXZlbnRTdGFydCkge1xuXHRcdFx0XHRcdFx0dHJhY2tbaS0xXS5lbmQgPSBldmVudC5zdGFydDtcblx0XHRcdFx0XHRcdHRyYWNrW2ktMV0udm9sdW1lICo9IDEgLSB2b2x1bWVJbmNyZWFzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ3JlYXRlU3ludGg7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/create-synth.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/download-buffer.js":
/*!*********************************************************!*\
  !*** ./node_modules/abcjs/src/synth/download-buffer.js ***!
  \*********************************************************/
/***/ ((module) => {

eval("var downloadBuffer = function(buffer) {\n\treturn window.URL.createObjectURL(bufferToWave(buffer.audioBuffers));\n};\n\n// Convert an AudioBuffer to a Blob using WAVE representation\nfunction bufferToWave(audioBuffers) {\n\tvar audioBuffer = audioBuffers[0];\n\tvar numOfChan = audioBuffer.numberOfChannels;\n\tvar length = audioBuffer.length * numOfChan * 2 + 44;\n\tvar buffer = new ArrayBuffer(length);\n\tvar view = new DataView(buffer);\n\tvar channels = [];\n\tvar i;\n\tvar sample;\n\tvar offset = 0;\n\tvar pos = 0;\n\n\t// write WAVE header\n\tsetUint32(0x46464952);                         // \"RIFF\"\n\tsetUint32(length - 8);                         // file length - 8\n\tsetUint32(0x45564157);                         // \"WAVE\"\n\n\tsetUint32(0x20746d66);                         // \"fmt \" chunk\n\tsetUint32(16);                                 // length = 16\n\tsetUint16(1);                                  // PCM (uncompressed)\n\tsetUint16(numOfChan);\n\tsetUint32(audioBuffer.sampleRate);\n\tsetUint32(audioBuffer.sampleRate * 2 * numOfChan); // avg. bytes/sec\n\tsetUint16(numOfChan * 2);                      // block-align\n\tsetUint16(16);                                 // 16-bit (hardcoded in this demo)\n\n\tsetUint32(0x61746164);                         // \"data\" - chunk\n\tsetUint32(length - pos - 4);                   // chunk length\n\n\t// write interleaved data\n\tfor(i = 0; i < numOfChan; i++)\n\t\tchannels.push(audioBuffer.getChannelData(i));\n\n\twhile(pos < length) {\n\t\tfor(i = 0; i < channels.length; i++) {             // interleave channels\n\t\t\tsample = Math.max(-1, Math.min(1, channels[i][offset])); // clamp\n\t\t\tsample = (0.5 + sample < 0 ? sample * 32768 : sample * 32767)|0; // scale to 16-bit signed int\n\t\t\tview.setInt16(pos, sample, true);          // write 16-bit sample\n\t\t\tpos += 2;\n\t\t}\n\t\toffset++; // next source sample\n\t}\n\n\t// create Blob\n\treturn new Blob([buffer], {type: \"audio/wav\"});\n\n\tfunction setUint16(data) {\n\t\tview.setUint16(pos, data, true);\n\t\tpos += 2;\n\t}\n\n\tfunction setUint32(data) {\n\t\tview.setUint32(pos, data, true);\n\t\tpos += 4;\n\t}\n}\n\nmodule.exports = downloadBuffer;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2Rvd25sb2FkLWJ1ZmZlci5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0RBQWdEO0FBQ2hELGdEQUFnRDtBQUNoRCxnREFBZ0Q7O0FBRWhELGdEQUFnRDtBQUNoRCxnREFBZ0Q7QUFDaEQsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQSxvREFBb0Q7QUFDcEQsZ0RBQWdEO0FBQ2hELGdEQUFnRDs7QUFFaEQsZ0RBQWdEO0FBQ2hELGdEQUFnRDs7QUFFaEQ7QUFDQSxZQUFZLGVBQWU7QUFDM0I7O0FBRUE7QUFDQSxhQUFhLHFCQUFxQixtQkFBbUI7QUFDckQsNERBQTREO0FBQzVELG9FQUFvRTtBQUNwRSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBLFlBQVk7QUFDWjs7QUFFQTtBQUNBLDRCQUE0QixrQkFBa0I7O0FBRTlDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvc3ludGgvZG93bmxvYWQtYnVmZmVyLmpzP2U1ZmQiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRvd25sb2FkQnVmZmVyID0gZnVuY3Rpb24oYnVmZmVyKSB7XG5cdHJldHVybiB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChidWZmZXJUb1dhdmUoYnVmZmVyLmF1ZGlvQnVmZmVycykpO1xufTtcblxuLy8gQ29udmVydCBhbiBBdWRpb0J1ZmZlciB0byBhIEJsb2IgdXNpbmcgV0FWRSByZXByZXNlbnRhdGlvblxuZnVuY3Rpb24gYnVmZmVyVG9XYXZlKGF1ZGlvQnVmZmVycykge1xuXHR2YXIgYXVkaW9CdWZmZXIgPSBhdWRpb0J1ZmZlcnNbMF07XG5cdHZhciBudW1PZkNoYW4gPSBhdWRpb0J1ZmZlci5udW1iZXJPZkNoYW5uZWxzO1xuXHR2YXIgbGVuZ3RoID0gYXVkaW9CdWZmZXIubGVuZ3RoICogbnVtT2ZDaGFuICogMiArIDQ0O1xuXHR2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGxlbmd0aCk7XG5cdHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG5cdHZhciBjaGFubmVscyA9IFtdO1xuXHR2YXIgaTtcblx0dmFyIHNhbXBsZTtcblx0dmFyIG9mZnNldCA9IDA7XG5cdHZhciBwb3MgPSAwO1xuXG5cdC8vIHdyaXRlIFdBVkUgaGVhZGVyXG5cdHNldFVpbnQzMigweDQ2NDY0OTUyKTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCJSSUZGXCJcblx0c2V0VWludDMyKGxlbmd0aCAtIDgpOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaWxlIGxlbmd0aCAtIDhcblx0c2V0VWludDMyKDB4NDU1NjQxNTcpOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcIldBVkVcIlxuXG5cdHNldFVpbnQzMigweDIwNzQ2ZDY2KTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCJmbXQgXCIgY2h1bmtcblx0c2V0VWludDMyKDE2KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsZW5ndGggPSAxNlxuXHRzZXRVaW50MTYoMSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBDTSAodW5jb21wcmVzc2VkKVxuXHRzZXRVaW50MTYobnVtT2ZDaGFuKTtcblx0c2V0VWludDMyKGF1ZGlvQnVmZmVyLnNhbXBsZVJhdGUpO1xuXHRzZXRVaW50MzIoYXVkaW9CdWZmZXIuc2FtcGxlUmF0ZSAqIDIgKiBudW1PZkNoYW4pOyAvLyBhdmcuIGJ5dGVzL3NlY1xuXHRzZXRVaW50MTYobnVtT2ZDaGFuICogMik7ICAgICAgICAgICAgICAgICAgICAgIC8vIGJsb2NrLWFsaWduXG5cdHNldFVpbnQxNigxNik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMTYtYml0IChoYXJkY29kZWQgaW4gdGhpcyBkZW1vKVxuXG5cdHNldFVpbnQzMigweDYxNzQ2MTY0KTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCJkYXRhXCIgLSBjaHVua1xuXHRzZXRVaW50MzIobGVuZ3RoIC0gcG9zIC0gNCk7ICAgICAgICAgICAgICAgICAgIC8vIGNodW5rIGxlbmd0aFxuXG5cdC8vIHdyaXRlIGludGVybGVhdmVkIGRhdGFcblx0Zm9yKGkgPSAwOyBpIDwgbnVtT2ZDaGFuOyBpKyspXG5cdFx0Y2hhbm5lbHMucHVzaChhdWRpb0J1ZmZlci5nZXRDaGFubmVsRGF0YShpKSk7XG5cblx0d2hpbGUocG9zIDwgbGVuZ3RoKSB7XG5cdFx0Zm9yKGkgPSAwOyBpIDwgY2hhbm5lbHMubGVuZ3RoOyBpKyspIHsgICAgICAgICAgICAgLy8gaW50ZXJsZWF2ZSBjaGFubmVsc1xuXHRcdFx0c2FtcGxlID0gTWF0aC5tYXgoLTEsIE1hdGgubWluKDEsIGNoYW5uZWxzW2ldW29mZnNldF0pKTsgLy8gY2xhbXBcblx0XHRcdHNhbXBsZSA9ICgwLjUgKyBzYW1wbGUgPCAwID8gc2FtcGxlICogMzI3NjggOiBzYW1wbGUgKiAzMjc2Nyl8MDsgLy8gc2NhbGUgdG8gMTYtYml0IHNpZ25lZCBpbnRcblx0XHRcdHZpZXcuc2V0SW50MTYocG9zLCBzYW1wbGUsIHRydWUpOyAgICAgICAgICAvLyB3cml0ZSAxNi1iaXQgc2FtcGxlXG5cdFx0XHRwb3MgKz0gMjtcblx0XHR9XG5cdFx0b2Zmc2V0Kys7IC8vIG5leHQgc291cmNlIHNhbXBsZVxuXHR9XG5cblx0Ly8gY3JlYXRlIEJsb2Jcblx0cmV0dXJuIG5ldyBCbG9iKFtidWZmZXJdLCB7dHlwZTogXCJhdWRpby93YXZcIn0pO1xuXG5cdGZ1bmN0aW9uIHNldFVpbnQxNihkYXRhKSB7XG5cdFx0dmlldy5zZXRVaW50MTYocG9zLCBkYXRhLCB0cnVlKTtcblx0XHRwb3MgKz0gMjtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFVpbnQzMihkYXRhKSB7XG5cdFx0dmlldy5zZXRVaW50MzIocG9zLCBkYXRhLCB0cnVlKTtcblx0XHRwb3MgKz0gNDtcblx0fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRvd25sb2FkQnVmZmVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/download-buffer.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/get-midi-file.js":
/*!*******************************************************!*\
  !*** ./node_modules/abcjs/src/synth/get-midi-file.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var tunebook = __webpack_require__(/*! ../api/abc_tunebook */ \"(ssr)/./node_modules/abcjs/src/api/abc_tunebook.js\");\nvar midiCreate = __webpack_require__(/*! ../midi/abc_midi_create */ \"(ssr)/./node_modules/abcjs/src/midi/abc_midi_create.js\");\n\nvar getMidiFile = function(source, options) {\n\tvar params = {};\n\tif (options) {\n\t\tfor (var key in options) {\n\t\t\tif (options.hasOwnProperty(key)) {\n\t\t\t\tparams[key] = options[key];\n\t\t\t}\n\t\t}\n\t}\n\tparams.generateInline = false;\n\n\tfunction callback(div, tune, index) {\n\t\tvar downloadMidi = midiCreate(tune, params);\n\t\tswitch (params.midiOutputType) {\n\t\t\tcase \"encoded\":\n\t\t\t\treturn downloadMidi;\n\t\t\tcase \"binary\":\n\t\t\t\tvar decoded = downloadMidi.replace(\"data:audio/midi,\", \"\");\n\t\t\t\tdecoded = decoded.replace(/MThd/g,\"%4d%54%68%64\");\n\t\t\t\tdecoded = decoded.replace(/MTrk/g,\"%4d%54%72%6b\");\n\t\t\t\tvar buffer = new ArrayBuffer(decoded.length/3);\n\t\t\t\tvar output = new Uint8Array(buffer);\n\t\t\t\tfor (var i = 0; i < decoded.length/3; i++) {\n\t\t\t\t\tvar p = i*3+1;\n\t\t\t\t\tvar d = parseInt(decoded.substring(p, p+2), 16);\n\t\t\t\t\toutput[i] = d;\n\t\t\t\t}\n\t\t\t\treturn output;\n\t\t\tcase \"link\":\n\t\t\tdefault:\n\t\t\t\treturn generateMidiDownloadLink(tune, params, downloadMidi, index);\n\t\t}\n\t}\n\n\tif (typeof source === \"string\")\n\t\treturn tunebook.renderEngine(callback, \"*\", source, params);\n\telse\n\t\treturn callback(null, source, 0);\n};\n\nfunction isFunction(functionToCheck) {\n\tvar getType = {};\n\treturn functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n}\n\nvar generateMidiDownloadLink = function(tune, midiParams, midi, index) {\n\tvar divClasses = ['abcjs-download-midi', 'abcjs-midi-' + index]\n\tif (midiParams.downloadClass)\n\t\tdivClasses.push(midiParams.downloadClass)\n\tvar html = '<div class=\"' + divClasses.join(' ') + '\">';\n\tif (midiParams.preTextDownload)\n\t\thtml += midiParams.preTextDownload;\n\tvar title = tune.metaText && tune.metaText.title ? tune.metaText.title : 'Untitled';\n\tvar label;\n\tif (midiParams.downloadLabel && isFunction(midiParams.downloadLabel))\n\t\tlabel = midiParams.downloadLabel(tune, index);\n\telse if (midiParams.downloadLabel)\n\t\tlabel = midiParams.downloadLabel.replace(/%T/, title);\n\telse\n\t\tlabel = \"Download MIDI for \\\"\" + title + \"\\\"\";\n\ttitle = title.toLowerCase().replace(/'/g, '').replace(/\\W/g, '_').replace(/__/g, '_');\n\tvar filename = (midiParams.fileName) ? midiParams.fileName :  title + '.midi';\n\thtml += '<a download=\"' + filename + '\" href=\"' + midi + '\">' + label + '</a>';\n\tif (midiParams.postTextDownload)\n\t\thtml += midiParams.postTextDownload;\n\treturn html + \"</div>\";\n};\n\n\nmodule.exports = getMidiFile;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2dldC1taWRpLWZpbGUuanMiLCJtYXBwaW5ncyI6IkFBQUEsZUFBZSxtQkFBTyxDQUFDLCtFQUFxQjtBQUM1QyxpQkFBaUIsbUJBQU8sQ0FBQyx1RkFBeUI7O0FBRWxEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isc0JBQXNCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2dldC1taWRpLWZpbGUuanM/MjMyMCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdHVuZWJvb2sgPSByZXF1aXJlKCcuLi9hcGkvYWJjX3R1bmVib29rJyk7XG52YXIgbWlkaUNyZWF0ZSA9IHJlcXVpcmUoJy4uL21pZGkvYWJjX21pZGlfY3JlYXRlJyk7XG5cbnZhciBnZXRNaWRpRmlsZSA9IGZ1bmN0aW9uKHNvdXJjZSwgb3B0aW9ucykge1xuXHR2YXIgcGFyYW1zID0ge307XG5cdGlmIChvcHRpb25zKSB7XG5cdFx0Zm9yICh2YXIga2V5IGluIG9wdGlvbnMpIHtcblx0XHRcdGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0XHRcdFx0cGFyYW1zW2tleV0gPSBvcHRpb25zW2tleV07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHBhcmFtcy5nZW5lcmF0ZUlubGluZSA9IGZhbHNlO1xuXG5cdGZ1bmN0aW9uIGNhbGxiYWNrKGRpdiwgdHVuZSwgaW5kZXgpIHtcblx0XHR2YXIgZG93bmxvYWRNaWRpID0gbWlkaUNyZWF0ZSh0dW5lLCBwYXJhbXMpO1xuXHRcdHN3aXRjaCAocGFyYW1zLm1pZGlPdXRwdXRUeXBlKSB7XG5cdFx0XHRjYXNlIFwiZW5jb2RlZFwiOlxuXHRcdFx0XHRyZXR1cm4gZG93bmxvYWRNaWRpO1xuXHRcdFx0Y2FzZSBcImJpbmFyeVwiOlxuXHRcdFx0XHR2YXIgZGVjb2RlZCA9IGRvd25sb2FkTWlkaS5yZXBsYWNlKFwiZGF0YTphdWRpby9taWRpLFwiLCBcIlwiKTtcblx0XHRcdFx0ZGVjb2RlZCA9IGRlY29kZWQucmVwbGFjZSgvTVRoZC9nLFwiJTRkJTU0JTY4JTY0XCIpO1xuXHRcdFx0XHRkZWNvZGVkID0gZGVjb2RlZC5yZXBsYWNlKC9NVHJrL2csXCIlNGQlNTQlNzIlNmJcIik7XG5cdFx0XHRcdHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoZGVjb2RlZC5sZW5ndGgvMyk7XG5cdFx0XHRcdHZhciBvdXRwdXQgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRlY29kZWQubGVuZ3RoLzM7IGkrKykge1xuXHRcdFx0XHRcdHZhciBwID0gaSozKzE7XG5cdFx0XHRcdFx0dmFyIGQgPSBwYXJzZUludChkZWNvZGVkLnN1YnN0cmluZyhwLCBwKzIpLCAxNik7XG5cdFx0XHRcdFx0b3V0cHV0W2ldID0gZDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gb3V0cHV0O1xuXHRcdFx0Y2FzZSBcImxpbmtcIjpcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHJldHVybiBnZW5lcmF0ZU1pZGlEb3dubG9hZExpbmsodHVuZSwgcGFyYW1zLCBkb3dubG9hZE1pZGksIGluZGV4KTtcblx0XHR9XG5cdH1cblxuXHRpZiAodHlwZW9mIHNvdXJjZSA9PT0gXCJzdHJpbmdcIilcblx0XHRyZXR1cm4gdHVuZWJvb2sucmVuZGVyRW5naW5lKGNhbGxiYWNrLCBcIipcIiwgc291cmNlLCBwYXJhbXMpO1xuXHRlbHNlXG5cdFx0cmV0dXJuIGNhbGxiYWNrKG51bGwsIHNvdXJjZSwgMCk7XG59O1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGZ1bmN0aW9uVG9DaGVjaykge1xuXHR2YXIgZ2V0VHlwZSA9IHt9O1xuXHRyZXR1cm4gZnVuY3Rpb25Ub0NoZWNrICYmIGdldFR5cGUudG9TdHJpbmcuY2FsbChmdW5jdGlvblRvQ2hlY2spID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xufVxuXG52YXIgZ2VuZXJhdGVNaWRpRG93bmxvYWRMaW5rID0gZnVuY3Rpb24odHVuZSwgbWlkaVBhcmFtcywgbWlkaSwgaW5kZXgpIHtcblx0dmFyIGRpdkNsYXNzZXMgPSBbJ2FiY2pzLWRvd25sb2FkLW1pZGknLCAnYWJjanMtbWlkaS0nICsgaW5kZXhdXG5cdGlmIChtaWRpUGFyYW1zLmRvd25sb2FkQ2xhc3MpXG5cdFx0ZGl2Q2xhc3Nlcy5wdXNoKG1pZGlQYXJhbXMuZG93bmxvYWRDbGFzcylcblx0dmFyIGh0bWwgPSAnPGRpdiBjbGFzcz1cIicgKyBkaXZDbGFzc2VzLmpvaW4oJyAnKSArICdcIj4nO1xuXHRpZiAobWlkaVBhcmFtcy5wcmVUZXh0RG93bmxvYWQpXG5cdFx0aHRtbCArPSBtaWRpUGFyYW1zLnByZVRleHREb3dubG9hZDtcblx0dmFyIHRpdGxlID0gdHVuZS5tZXRhVGV4dCAmJiB0dW5lLm1ldGFUZXh0LnRpdGxlID8gdHVuZS5tZXRhVGV4dC50aXRsZSA6ICdVbnRpdGxlZCc7XG5cdHZhciBsYWJlbDtcblx0aWYgKG1pZGlQYXJhbXMuZG93bmxvYWRMYWJlbCAmJiBpc0Z1bmN0aW9uKG1pZGlQYXJhbXMuZG93bmxvYWRMYWJlbCkpXG5cdFx0bGFiZWwgPSBtaWRpUGFyYW1zLmRvd25sb2FkTGFiZWwodHVuZSwgaW5kZXgpO1xuXHRlbHNlIGlmIChtaWRpUGFyYW1zLmRvd25sb2FkTGFiZWwpXG5cdFx0bGFiZWwgPSBtaWRpUGFyYW1zLmRvd25sb2FkTGFiZWwucmVwbGFjZSgvJVQvLCB0aXRsZSk7XG5cdGVsc2Vcblx0XHRsYWJlbCA9IFwiRG93bmxvYWQgTUlESSBmb3IgXFxcIlwiICsgdGl0bGUgKyBcIlxcXCJcIjtcblx0dGl0bGUgPSB0aXRsZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLycvZywgJycpLnJlcGxhY2UoL1xcVy9nLCAnXycpLnJlcGxhY2UoL19fL2csICdfJyk7XG5cdHZhciBmaWxlbmFtZSA9IChtaWRpUGFyYW1zLmZpbGVOYW1lKSA/IG1pZGlQYXJhbXMuZmlsZU5hbWUgOiAgdGl0bGUgKyAnLm1pZGknO1xuXHRodG1sICs9ICc8YSBkb3dubG9hZD1cIicgKyBmaWxlbmFtZSArICdcIiBocmVmPVwiJyArIG1pZGkgKyAnXCI+JyArIGxhYmVsICsgJzwvYT4nO1xuXHRpZiAobWlkaVBhcmFtcy5wb3N0VGV4dERvd25sb2FkKVxuXHRcdGh0bWwgKz0gbWlkaVBhcmFtcy5wb3N0VGV4dERvd25sb2FkO1xuXHRyZXR1cm4gaHRtbCArIFwiPC9kaXY+XCI7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0TWlkaUZpbGU7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/get-midi-file.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/images/loading.svg.js":
/*!************************************************************!*\
  !*** ./node_modules/abcjs/src/synth/images/loading.svg.js ***!
  \************************************************************/
/***/ ((module) => {

eval("var svg = `\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" class=\"abcjs-loading-svg\">\n    <circle cx=\"50\" cy=\"50\" fill=\"none\" stroke-width=\"20\" r=\"35\" stroke-dasharray=\"160 55\"></circle>\n</svg>\n`\n\nmodule.exports = svg\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2ltYWdlcy9sb2FkaW5nLnN2Zy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2ltYWdlcy9sb2FkaW5nLnN2Zy5qcz84Y2VlIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBzdmcgPSBgXG48c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIiBjbGFzcz1cImFiY2pzLWxvYWRpbmctc3ZnXCI+XG4gICAgPGNpcmNsZSBjeD1cIjUwXCIgY3k9XCI1MFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiMjBcIiByPVwiMzVcIiBzdHJva2UtZGFzaGFycmF5PVwiMTYwIDU1XCI+PC9jaXJjbGU+XG48L3N2Zz5cbmBcblxubW9kdWxlLmV4cG9ydHMgPSBzdmdcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/images/loading.svg.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/images/loop.svg.js":
/*!*********************************************************!*\
  !*** ./node_modules/abcjs/src/synth/images/loop.svg.js ***!
  \*********************************************************/
/***/ ((module) => {

eval("var svg = `\n<svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 700 700\" preserveAspectRatio=\"xMidYMid meet\">\n\t<g transform=\"translate(0,700) scale(0.1,-0.1)\" >\n\t<path d=\"M3111 6981 c-20 -37 -90 -55 -364 -96 -120 -18 -190 -33 -244 -55\n\t-42 -17 -124 -42 -182 -56 -78 -18 -119 -34 -157 -60 -28 -19 -86 -46 -128\n\t-60 -43 -13 -107 -42 -144 -64 -37 -23 -84 -46 -106 -52 -21 -7 -56 -29 -79\n\t-50 -22 -22 -61 -50 -86 -63 -26 -13 -67 -40 -91 -60 -24 -20 -65 -47 -90 -60\n\t-25 -13 -53 -31 -61 -41 -8 -9 -32 -30 -54 -46 -75 -54 -486 -460 -512 -507\n\t-15 -25 -48 -69 -75 -98 -26 -28 -48 -57 -48 -63 0 -6 -18 -29 -39 -53 -21\n\t-23 -56 -71 -77 -107 -20 -36 -50 -80 -65 -97 -16 -18 -33 -52 -40 -75 -12\n\t-47 -47 -115 -84 -166 -13 -18 -30 -56 -38 -83 -8 -27 -34 -80 -56 -118 -33\n\t-53 -46 -91 -62 -167 -12 -63 -34 -127 -59 -179 -42 -84 -60 -166 -60 -270 0\n\t-90 26 -122 125 -154 54 -17 96 -19 430 -20 305 -1 381 2 430 14 82 22 140 51\n\t153 78 6 12 22 47 37 77 14 30 38 77 54 103 15 27 34 73 40 103 7 30 28 78 48\n\t107 19 28 44 74 55 101 10 28 34 67 53 87 18 20 49 61 68 90 19 30 44 63 57\n\t74 13 11 36 40 52 65 59 94 232 270 306 313 20 11 57 37 82 58 25 20 70 52\n\t100 72 30 19 66 47 79 61 13 14 49 35 80 46 30 12 80 37 111 56 31 19 95 45\n\t143 58 48 12 110 37 139 55 63 40 127 55 323 76 83 9 208 28 279 41 156 29\n\t165 29 330 4 453 -71 514 -84 606 -130 31 -16 83 -36 116 -45 32 -9 84 -34\n\t115 -56 31 -21 82 -48 113 -60 32 -11 72 -33 89 -48 18 -16 59 -45 92 -65 33\n\t-21 74 -51 90 -66 17 -15 49 -40 73 -54 52 -32 65 -61 50 -113 -8 -31 -61 -90\n\t-277 -308 -300 -303 -361 -382 -369 -481 -2 -29 0 -66 6 -81 13 -40 88 -138\n\t115 -151 12 -6 54 -26 92 -44 l70 -33 945 -2 c520 -1 975 2 1012 7 64 8 191\n\t50 231 76 11 7 33 34 50 60 22 34 42 51 65 58 l32 9 0 1101 0 1102 -32 9 c-21\n\t7 -44 26 -64 55 -60 84 -77 97 -140 110 -44 9 -76 10 -127 2 -59 -9 -77 -17\n\t-134 -62 -37 -28 -172 -155 -301 -281 -129 -127 -249 -237 -267 -245 -25 -10\n\t-41 -11 -71 -2 -58 15 -112 45 -124 69 -6 11 -35 35 -64 54 -28 18 -58 41 -66\n\t50 -8 9 -41 35 -75 58 -33 22 -77 56 -99 75 -21 18 -64 46 -95 61 -31 14 -73\n\t39 -93 55 -20 15 -70 40 -110 55 -40 15 -97 44 -127 64 -29 21 -78 44 -107 53\n\t-30 8 -77 31 -105 51 -42 28 -73 39 -173 60 -68 14 -154 39 -196 58 -95 43\n\t-131 51 -343 76 -209 24 -242 32 -279 70 l-30 29 -328 0 c-312 0 -330 -1 -339\n\t-19z\"></path>\n\t<path d=\"M254 2875 c-89 -16 -107 -26 -145 -78 -32 -44 -62 -66 -91 -67 -17 0\n\t-18 -61 -18 -1140 l0 -1140 24 0 c16 0 41 -17 72 -50 40 -42 61 -55 117 -72\n\tl69 -21 82 23 c44 12 96 30 114 39 18 9 148 132 290 272 141 141 267 261 279\n\t268 51 26 86 14 176 -61 32 -26 62 -48 66 -48 5 0 36 -25 70 -55 34 -30 74\n\t-61 89 -69 15 -8 37 -28 50 -45 12 -17 50 -45 84 -62 34 -17 78 -44 98 -60 19\n\t-16 61 -37 93 -48 32 -11 81 -37 107 -56 27 -20 76 -45 109 -56 33 -12 75 -31\n\t93 -44 62 -45 93 -58 191 -82 54 -12 130 -37 168 -54 68 -29 180 -58 226 -59\n\t62 0 183 -64 183 -96 0 -12 88 -14 639 -14 l639 0 12 30 c18 44 76 66 233 89\n\t89 14 160 30 200 47 34 15 106 42 159 60 54 18 112 44 130 57 47 35 85 52 146\n\t67 29 7 76 28 105 48 29 20 77 48 107 63 30 15 66 39 80 54 14 15 50 40 81 56\n\t31 15 78 46 104 69 26 22 61 46 79 54 17 7 43 26 56 42 14 16 41 41 60 56 64\n\t48 380 362 408 405 15 23 40 51 55 63 15 12 36 38 46 58 11 21 37 57 58 82 22\n\t25 49 62 62 83 13 20 38 56 57 78 19 23 50 74 69 113 19 39 46 86 59 104 14\n\t18 34 62 46 98 12 36 32 77 45 92 31 38 60 97 80 167 9 33 26 76 37 95 29 50\n\t47 103 68 206 10 52 32 117 51 155 29 56 33 74 34 140 0 94 -10 108 -101 138\n\t-61 20 -83 21 -463 21 -226 0 -421 -4 -451 -10 -63 -12 -86 -30 -110 -85 -10\n\t-22 -33 -63 -52 -92 -21 -31 -42 -80 -53 -123 -11 -44 -32 -93 -56 -128 -20\n\t-32 -47 -83 -59 -115 -12 -32 -37 -77 -56 -100 -19 -23 -50 -65 -69 -94 -19\n\t-29 -44 -57 -54 -63 -11 -5 -29 -27 -42 -47 -52 -85 -234 -277 -300 -315 -25\n\t-15 -53 -38 -62 -51 -9 -14 -42 -39 -74 -57 -32 -18 -75 -48 -95 -66 -21 -18\n\t-59 -44 -85 -58 -26 -13 -72 -40 -100 -59 -35 -24 -78 -41 -128 -52 -47 -11\n\t-99 -31 -139 -56 -69 -42 -94 -49 -391 -110 -245 -51 -425 -66 -595 -50 -168\n\t16 -230 27 -330 61 -47 16 -123 35 -170 44 -98 17 -123 25 -172 58 -20 14 -71\n\t37 -114 53 -44 15 -95 40 -115 56 -20 16 -70 42 -110 59 -40 16 -88 45 -108\n\t63 -20 19 -55 46 -78 61 -24 14 -49 35 -55 47 -7 11 -34 33 -60 49 -50 31 -65\n\t61 -53 102 4 13 130 147 281 298 236 238 277 283 299 335 15 32 35 71 46 86\n\t12 18 19 44 19 76 0 42 -8 63 -53 138 -92 151 11 139 -1207 141 -798 2 -1030\n\t0 -1086 -11z\"></path>\n\t</g>\n</svg>\n`\n\nmodule.exports = svg\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2ltYWdlcy9sb29wLnN2Zy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvc3ludGgvaW1hZ2VzL2xvb3Auc3ZnLmpzP2VmMjAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHN2ZyA9IGBcbjxzdmcgdmVyc2lvbj1cIjEuMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDcwMCA3MDBcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pZFlNaWQgbWVldFwiPlxuXHQ8ZyB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMCw3MDApIHNjYWxlKDAuMSwtMC4xKVwiID5cblx0PHBhdGggZD1cIk0zMTExIDY5ODEgYy0yMCAtMzcgLTkwIC01NSAtMzY0IC05NiAtMTIwIC0xOCAtMTkwIC0zMyAtMjQ0IC01NVxuXHQtNDIgLTE3IC0xMjQgLTQyIC0xODIgLTU2IC03OCAtMTggLTExOSAtMzQgLTE1NyAtNjAgLTI4IC0xOSAtODYgLTQ2IC0xMjhcblx0LTYwIC00MyAtMTMgLTEwNyAtNDIgLTE0NCAtNjQgLTM3IC0yMyAtODQgLTQ2IC0xMDYgLTUyIC0yMSAtNyAtNTYgLTI5IC03OVxuXHQtNTAgLTIyIC0yMiAtNjEgLTUwIC04NiAtNjMgLTI2IC0xMyAtNjcgLTQwIC05MSAtNjAgLTI0IC0yMCAtNjUgLTQ3IC05MCAtNjBcblx0LTI1IC0xMyAtNTMgLTMxIC02MSAtNDEgLTggLTkgLTMyIC0zMCAtNTQgLTQ2IC03NSAtNTQgLTQ4NiAtNDYwIC01MTIgLTUwN1xuXHQtMTUgLTI1IC00OCAtNjkgLTc1IC05OCAtMjYgLTI4IC00OCAtNTcgLTQ4IC02MyAwIC02IC0xOCAtMjkgLTM5IC01MyAtMjFcblx0LTIzIC01NiAtNzEgLTc3IC0xMDcgLTIwIC0zNiAtNTAgLTgwIC02NSAtOTcgLTE2IC0xOCAtMzMgLTUyIC00MCAtNzUgLTEyXG5cdC00NyAtNDcgLTExNSAtODQgLTE2NiAtMTMgLTE4IC0zMCAtNTYgLTM4IC04MyAtOCAtMjcgLTM0IC04MCAtNTYgLTExOCAtMzNcblx0LTUzIC00NiAtOTEgLTYyIC0xNjcgLTEyIC02MyAtMzQgLTEyNyAtNTkgLTE3OSAtNDIgLTg0IC02MCAtMTY2IC02MCAtMjcwIDBcblx0LTkwIDI2IC0xMjIgMTI1IC0xNTQgNTQgLTE3IDk2IC0xOSA0MzAgLTIwIDMwNSAtMSAzODEgMiA0MzAgMTQgODIgMjIgMTQwIDUxXG5cdDE1MyA3OCA2IDEyIDIyIDQ3IDM3IDc3IDE0IDMwIDM4IDc3IDU0IDEwMyAxNSAyNyAzNCA3MyA0MCAxMDMgNyAzMCAyOCA3OCA0OFxuXHQxMDcgMTkgMjggNDQgNzQgNTUgMTAxIDEwIDI4IDM0IDY3IDUzIDg3IDE4IDIwIDQ5IDYxIDY4IDkwIDE5IDMwIDQ0IDYzIDU3XG5cdDc0IDEzIDExIDM2IDQwIDUyIDY1IDU5IDk0IDIzMiAyNzAgMzA2IDMxMyAyMCAxMSA1NyAzNyA4MiA1OCAyNSAyMCA3MCA1MlxuXHQxMDAgNzIgMzAgMTkgNjYgNDcgNzkgNjEgMTMgMTQgNDkgMzUgODAgNDYgMzAgMTIgODAgMzcgMTExIDU2IDMxIDE5IDk1IDQ1XG5cdDE0MyA1OCA0OCAxMiAxMTAgMzcgMTM5IDU1IDYzIDQwIDEyNyA1NSAzMjMgNzYgODMgOSAyMDggMjggMjc5IDQxIDE1NiAyOVxuXHQxNjUgMjkgMzMwIDQgNDUzIC03MSA1MTQgLTg0IDYwNiAtMTMwIDMxIC0xNiA4MyAtMzYgMTE2IC00NSAzMiAtOSA4NCAtMzRcblx0MTE1IC01NiAzMSAtMjEgODIgLTQ4IDExMyAtNjAgMzIgLTExIDcyIC0zMyA4OSAtNDggMTggLTE2IDU5IC00NSA5MiAtNjUgMzNcblx0LTIxIDc0IC01MSA5MCAtNjYgMTcgLTE1IDQ5IC00MCA3MyAtNTQgNTIgLTMyIDY1IC02MSA1MCAtMTEzIC04IC0zMSAtNjEgLTkwXG5cdC0yNzcgLTMwOCAtMzAwIC0zMDMgLTM2MSAtMzgyIC0zNjkgLTQ4MSAtMiAtMjkgMCAtNjYgNiAtODEgMTMgLTQwIDg4IC0xMzhcblx0MTE1IC0xNTEgMTIgLTYgNTQgLTI2IDkyIC00NCBsNzAgLTMzIDk0NSAtMiBjNTIwIC0xIDk3NSAyIDEwMTIgNyA2NCA4IDE5MVxuXHQ1MCAyMzEgNzYgMTEgNyAzMyAzNCA1MCA2MCAyMiAzNCA0MiA1MSA2NSA1OCBsMzIgOSAwIDExMDEgMCAxMTAyIC0zMiA5IGMtMjFcblx0NyAtNDQgMjYgLTY0IDU1IC02MCA4NCAtNzcgOTcgLTE0MCAxMTAgLTQ0IDkgLTc2IDEwIC0xMjcgMiAtNTkgLTkgLTc3IC0xN1xuXHQtMTM0IC02MiAtMzcgLTI4IC0xNzIgLTE1NSAtMzAxIC0yODEgLTEyOSAtMTI3IC0yNDkgLTIzNyAtMjY3IC0yNDUgLTI1IC0xMFxuXHQtNDEgLTExIC03MSAtMiAtNTggMTUgLTExMiA0NSAtMTI0IDY5IC02IDExIC0zNSAzNSAtNjQgNTQgLTI4IDE4IC01OCA0MSAtNjZcblx0NTAgLTggOSAtNDEgMzUgLTc1IDU4IC0zMyAyMiAtNzcgNTYgLTk5IDc1IC0yMSAxOCAtNjQgNDYgLTk1IDYxIC0zMSAxNCAtNzNcblx0MzkgLTkzIDU1IC0yMCAxNSAtNzAgNDAgLTExMCA1NSAtNDAgMTUgLTk3IDQ0IC0xMjcgNjQgLTI5IDIxIC03OCA0NCAtMTA3IDUzXG5cdC0zMCA4IC03NyAzMSAtMTA1IDUxIC00MiAyOCAtNzMgMzkgLTE3MyA2MCAtNjggMTQgLTE1NCAzOSAtMTk2IDU4IC05NSA0M1xuXHQtMTMxIDUxIC0zNDMgNzYgLTIwOSAyNCAtMjQyIDMyIC0yNzkgNzAgbC0zMCAyOSAtMzI4IDAgYy0zMTIgMCAtMzMwIC0xIC0zMzlcblx0LTE5elwiPjwvcGF0aD5cblx0PHBhdGggZD1cIk0yNTQgMjg3NSBjLTg5IC0xNiAtMTA3IC0yNiAtMTQ1IC03OCAtMzIgLTQ0IC02MiAtNjYgLTkxIC02NyAtMTcgMFxuXHQtMTggLTYxIC0xOCAtMTE0MCBsMCAtMTE0MCAyNCAwIGMxNiAwIDQxIC0xNyA3MiAtNTAgNDAgLTQyIDYxIC01NSAxMTcgLTcyXG5cdGw2OSAtMjEgODIgMjMgYzQ0IDEyIDk2IDMwIDExNCAzOSAxOCA5IDE0OCAxMzIgMjkwIDI3MiAxNDEgMTQxIDI2NyAyNjEgMjc5XG5cdDI2OCA1MSAyNiA4NiAxNCAxNzYgLTYxIDMyIC0yNiA2MiAtNDggNjYgLTQ4IDUgMCAzNiAtMjUgNzAgLTU1IDM0IC0zMCA3NFxuXHQtNjEgODkgLTY5IDE1IC04IDM3IC0yOCA1MCAtNDUgMTIgLTE3IDUwIC00NSA4NCAtNjIgMzQgLTE3IDc4IC00NCA5OCAtNjAgMTlcblx0LTE2IDYxIC0zNyA5MyAtNDggMzIgLTExIDgxIC0zNyAxMDcgLTU2IDI3IC0yMCA3NiAtNDUgMTA5IC01NiAzMyAtMTIgNzUgLTMxXG5cdDkzIC00NCA2MiAtNDUgOTMgLTU4IDE5MSAtODIgNTQgLTEyIDEzMCAtMzcgMTY4IC01NCA2OCAtMjkgMTgwIC01OCAyMjYgLTU5XG5cdDYyIDAgMTgzIC02NCAxODMgLTk2IDAgLTEyIDg4IC0xNCA2MzkgLTE0IGw2MzkgMCAxMiAzMCBjMTggNDQgNzYgNjYgMjMzIDg5XG5cdDg5IDE0IDE2MCAzMCAyMDAgNDcgMzQgMTUgMTA2IDQyIDE1OSA2MCA1NCAxOCAxMTIgNDQgMTMwIDU3IDQ3IDM1IDg1IDUyIDE0NlxuXHQ2NyAyOSA3IDc2IDI4IDEwNSA0OCAyOSAyMCA3NyA0OCAxMDcgNjMgMzAgMTUgNjYgMzkgODAgNTQgMTQgMTUgNTAgNDAgODEgNTZcblx0MzEgMTUgNzggNDYgMTA0IDY5IDI2IDIyIDYxIDQ2IDc5IDU0IDE3IDcgNDMgMjYgNTYgNDIgMTQgMTYgNDEgNDEgNjAgNTYgNjRcblx0NDggMzgwIDM2MiA0MDggNDA1IDE1IDIzIDQwIDUxIDU1IDYzIDE1IDEyIDM2IDM4IDQ2IDU4IDExIDIxIDM3IDU3IDU4IDgyIDIyXG5cdDI1IDQ5IDYyIDYyIDgzIDEzIDIwIDM4IDU2IDU3IDc4IDE5IDIzIDUwIDc0IDY5IDExMyAxOSAzOSA0NiA4NiA1OSAxMDQgMTRcblx0MTggMzQgNjIgNDYgOTggMTIgMzYgMzIgNzcgNDUgOTIgMzEgMzggNjAgOTcgODAgMTY3IDkgMzMgMjYgNzYgMzcgOTUgMjkgNTBcblx0NDcgMTAzIDY4IDIwNiAxMCA1MiAzMiAxMTcgNTEgMTU1IDI5IDU2IDMzIDc0IDM0IDE0MCAwIDk0IC0xMCAxMDggLTEwMSAxMzhcblx0LTYxIDIwIC04MyAyMSAtNDYzIDIxIC0yMjYgMCAtNDIxIC00IC00NTEgLTEwIC02MyAtMTIgLTg2IC0zMCAtMTEwIC04NSAtMTBcblx0LTIyIC0zMyAtNjMgLTUyIC05MiAtMjEgLTMxIC00MiAtODAgLTUzIC0xMjMgLTExIC00NCAtMzIgLTkzIC01NiAtMTI4IC0yMFxuXHQtMzIgLTQ3IC04MyAtNTkgLTExNSAtMTIgLTMyIC0zNyAtNzcgLTU2IC0xMDAgLTE5IC0yMyAtNTAgLTY1IC02OSAtOTQgLTE5XG5cdC0yOSAtNDQgLTU3IC01NCAtNjMgLTExIC01IC0yOSAtMjcgLTQyIC00NyAtNTIgLTg1IC0yMzQgLTI3NyAtMzAwIC0zMTUgLTI1XG5cdC0xNSAtNTMgLTM4IC02MiAtNTEgLTkgLTE0IC00MiAtMzkgLTc0IC01NyAtMzIgLTE4IC03NSAtNDggLTk1IC02NiAtMjEgLTE4XG5cdC01OSAtNDQgLTg1IC01OCAtMjYgLTEzIC03MiAtNDAgLTEwMCAtNTkgLTM1IC0yNCAtNzggLTQxIC0xMjggLTUyIC00NyAtMTFcblx0LTk5IC0zMSAtMTM5IC01NiAtNjkgLTQyIC05NCAtNDkgLTM5MSAtMTEwIC0yNDUgLTUxIC00MjUgLTY2IC01OTUgLTUwIC0xNjhcblx0MTYgLTIzMCAyNyAtMzMwIDYxIC00NyAxNiAtMTIzIDM1IC0xNzAgNDQgLTk4IDE3IC0xMjMgMjUgLTE3MiA1OCAtMjAgMTQgLTcxXG5cdDM3IC0xMTQgNTMgLTQ0IDE1IC05NSA0MCAtMTE1IDU2IC0yMCAxNiAtNzAgNDIgLTExMCA1OSAtNDAgMTYgLTg4IDQ1IC0xMDhcblx0NjMgLTIwIDE5IC01NSA0NiAtNzggNjEgLTI0IDE0IC00OSAzNSAtNTUgNDcgLTcgMTEgLTM0IDMzIC02MCA0OSAtNTAgMzEgLTY1XG5cdDYxIC01MyAxMDIgNCAxMyAxMzAgMTQ3IDI4MSAyOTggMjM2IDIzOCAyNzcgMjgzIDI5OSAzMzUgMTUgMzIgMzUgNzEgNDYgODZcblx0MTIgMTggMTkgNDQgMTkgNzYgMCA0MiAtOCA2MyAtNTMgMTM4IC05MiAxNTEgMTEgMTM5IC0xMjA3IDE0MSAtNzk4IDIgLTEwMzBcblx0MCAtMTA4NiAtMTF6XCI+PC9wYXRoPlxuXHQ8L2c+XG48L3N2Zz5cbmBcblxubW9kdWxlLmV4cG9ydHMgPSBzdmdcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/images/loop.svg.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/images/pause.svg.js":
/*!**********************************************************!*\
  !*** ./node_modules/abcjs/src/synth/images/pause.svg.js ***!
  \**********************************************************/
/***/ ((module) => {

eval("var svg = `\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" class=\"abcjs-pause-svg\">\n  <g>\n    <rect width=\"8.23\" height=\"25\"/>\n    <rect width=\"8.23\" height=\"25\" x=\"17\"/>\n  </g>\n</svg>\n`\n\nmodule.exports = svg\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2ltYWdlcy9wYXVzZS5zdmcuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy9zeW50aC9pbWFnZXMvcGF1c2Uuc3ZnLmpzP2I4Y2MiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHN2ZyA9IGBcbjxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjUgMjVcIiBjbGFzcz1cImFiY2pzLXBhdXNlLXN2Z1wiPlxuICA8Zz5cbiAgICA8cmVjdCB3aWR0aD1cIjguMjNcIiBoZWlnaHQ9XCIyNVwiLz5cbiAgICA8cmVjdCB3aWR0aD1cIjguMjNcIiBoZWlnaHQ9XCIyNVwiIHg9XCIxN1wiLz5cbiAgPC9nPlxuPC9zdmc+XG5gXG5cbm1vZHVsZS5leHBvcnRzID0gc3ZnXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/images/pause.svg.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/images/play.svg.js":
/*!*********************************************************!*\
  !*** ./node_modules/abcjs/src/synth/images/play.svg.js ***!
  \*********************************************************/
/***/ ((module) => {

eval("var svg = `\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" class=\"abcjs-play-svg\">\n    <g>\n    <polygon points=\"4 0 23 12.5 4 25\"/>\n    </g>\n</svg>\n`\n\nmodule.exports = svg\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2ltYWdlcy9wbGF5LnN2Zy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy9zeW50aC9pbWFnZXMvcGxheS5zdmcuanM/NjU2YiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgc3ZnID0gYFxuPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNSAyNVwiIGNsYXNzPVwiYWJjanMtcGxheS1zdmdcIj5cbiAgICA8Zz5cbiAgICA8cG9seWdvbiBwb2ludHM9XCI0IDAgMjMgMTIuNSA0IDI1XCIvPlxuICAgIDwvZz5cbjwvc3ZnPlxuYFxuXG5tb2R1bGUuZXhwb3J0cyA9IHN2Z1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/images/play.svg.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/images/reset.svg.js":
/*!**********************************************************!*\
  !*** ./node_modules/abcjs/src/synth/images/reset.svg.js ***!
  \**********************************************************/
/***/ ((module) => {

eval("var svg = `\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\">\n  <g>\n    <polygon points=\"5 12.5 24 0 24 25\"/>\n    <rect width=\"3\" height=\"25\" x=\"0\" y=\"0\"/>\n  </g>\n</svg>\n`\n\nmodule.exports = svg\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2ltYWdlcy9yZXNldC5zdmcuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy9zeW50aC9pbWFnZXMvcmVzZXQuc3ZnLmpzPzJkYmUiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHN2ZyA9IGBcbjxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjUgMjVcIj5cbiAgPGc+XG4gICAgPHBvbHlnb24gcG9pbnRzPVwiNSAxMi41IDI0IDAgMjQgMjVcIi8+XG4gICAgPHJlY3Qgd2lkdGg9XCIzXCIgaGVpZ2h0PVwiMjVcIiB4PVwiMFwiIHk9XCIwXCIvPlxuICA8L2c+XG48L3N2Zz5cbmBcblxubW9kdWxlLmV4cG9ydHMgPSBzdmdcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/images/reset.svg.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/instrument-index-to-name.js":
/*!******************************************************************!*\
  !*** ./node_modules/abcjs/src/synth/instrument-index-to-name.js ***!
  \******************************************************************/
/***/ ((module) => {

eval("var instrumentIndexToName = [\n\t\"acoustic_grand_piano\",\n\t\"bright_acoustic_piano\",\n\t\"electric_grand_piano\",\n\t\"honkytonk_piano\",\n\t\"electric_piano_1\",\n\t\"electric_piano_2\",\n\t\"harpsichord\",\n\t\"clavinet\",\n\n\t\"celesta\",\n\t\"glockenspiel\",\n\t\"music_box\",\n\t\"vibraphone\",\n\t\"marimba\",\n\t\"xylophone\",\n\t\"tubular_bells\",\n\t\"dulcimer\",\n\n\t\"drawbar_organ\",\n\t\"percussive_organ\",\n\t\"rock_organ\",\n\t\"church_organ\",\n\t\"reed_organ\",\n\t\"accordion\",\n\t\"harmonica\",\n\t\"tango_accordion\",\n\n\t\"acoustic_guitar_nylon\",\n\t\"acoustic_guitar_steel\",\n\t\"electric_guitar_jazz\",\n\t\"electric_guitar_clean\",\n\t\"electric_guitar_muted\",\n\t\"overdriven_guitar\",\n\t\"distortion_guitar\",\n\t\"guitar_harmonics\",\n\n\t\"acoustic_bass\",\n\t\"electric_bass_finger\",\n\t\"electric_bass_pick\",\n\t\"fretless_bass\",\n\t\"slap_bass_1\",\n\t\"slap_bass_2\",\n\t\"synth_bass_1\",\n\t\"synth_bass_2\",\n\n\t\"violin\",\n\t\"viola\",\n\t\"cello\",\n\t\"contrabass\",\n\t\"tremolo_strings\",\n\t\"pizzicato_strings\",\n\t\"orchestral_harp\",\n\t\"timpani\",\n\n\t\"string_ensemble_1\",\n\t\"string_ensemble_2\",\n\t\"synth_strings_1\",\n\t\"synth_strings_2\",\n\t\"choir_aahs\",\n\t\"voice_oohs\",\n\t\"synth_choir\",\n\t\"orchestra_hit\",\n\n\t\"trumpet\",\n\t\"trombone\",\n\t\"tuba\",\n\t\"muted_trumpet\",\n\t\"french_horn\",\n\t\"brass_section\",\n\t\"synth_brass_1\",\n\t\"synth_brass_2\",\n\n\t\"soprano_sax\",\n\t\"alto_sax\",\n\t\"tenor_sax\",\n\t\"baritone_sax\",\n\t\"oboe\",\n\t\"english_horn\",\n\t\"bassoon\",\n\t\"clarinet\",\n\n\t\"piccolo\",\n\t\"flute\",\n\t\"recorder\",\n\t\"pan_flute\",\n\t\"blown_bottle\",\n\t\"shakuhachi\",\n\t\"whistle\",\n\t\"ocarina\",\n\n\t\"lead_1_square\",\n\t\"lead_2_sawtooth\",\n\t\"lead_3_calliope\",\n\t\"lead_4_chiff\",\n\t\"lead_5_charang\",\n\t\"lead_6_voice\",\n\t\"lead_7_fifths\",\n\t\"lead_8_bass_lead\",\n\n\t\"pad_1_new_age\",\n\t\"pad_2_warm\",\n\t\"pad_3_polysynth\",\n\t\"pad_4_choir\",\n\t\"pad_5_bowed\",\n\t\"pad_6_metallic\",\n\t\"pad_7_halo\",\n\t\"pad_8_sweep\",\n\n\t\"fx_1_rain\",\n\t\"fx_2_soundtrack\",\n\t\"fx_3_crystal\",\n\t\"fx_4_atmosphere\",\n\t\"fx_5_brightness\",\n\t\"fx_6_goblins\",\n\t\"fx_7_echoes\",\n\t\"fx_8_scifi\",\n\n\t\"sitar\",\n\t\"banjo\",\n\t\"shamisen\",\n\t\"koto\",\n\t\"kalimba\",\n\t\"bagpipe\",\n\t\"fiddle\",\n\t\"shanai\",\n\n\t\"tinkle_bell\",\n\t\"agogo\",\n\t\"steel_drums\",\n\t\"woodblock\",\n\t\"taiko_drum\",\n\t\"melodic_tom\",\n\t\"synth_drum\",\n\t\"reverse_cymbal\",\n\n\t\"guitar_fret_noise\",\n\t\"breath_noise\",\n\t\"seashore\",\n\t\"bird_tweet\",\n\t\"telephone_ring\",\n\t\"helicopter\",\n\t\"applause\",\n\t\"gunshot\",\n\n\t\"percussion\"\n];\n\nmodule.exports = instrumentIndexToName;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2luc3RydW1lbnQtaW5kZXgtdG8tbmFtZS5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy9zeW50aC9pbnN0cnVtZW50LWluZGV4LXRvLW5hbWUuanM/NzNmNCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgaW5zdHJ1bWVudEluZGV4VG9OYW1lID0gW1xuXHRcImFjb3VzdGljX2dyYW5kX3BpYW5vXCIsXG5cdFwiYnJpZ2h0X2Fjb3VzdGljX3BpYW5vXCIsXG5cdFwiZWxlY3RyaWNfZ3JhbmRfcGlhbm9cIixcblx0XCJob25reXRvbmtfcGlhbm9cIixcblx0XCJlbGVjdHJpY19waWFub18xXCIsXG5cdFwiZWxlY3RyaWNfcGlhbm9fMlwiLFxuXHRcImhhcnBzaWNob3JkXCIsXG5cdFwiY2xhdmluZXRcIixcblxuXHRcImNlbGVzdGFcIixcblx0XCJnbG9ja2Vuc3BpZWxcIixcblx0XCJtdXNpY19ib3hcIixcblx0XCJ2aWJyYXBob25lXCIsXG5cdFwibWFyaW1iYVwiLFxuXHRcInh5bG9waG9uZVwiLFxuXHRcInR1YnVsYXJfYmVsbHNcIixcblx0XCJkdWxjaW1lclwiLFxuXG5cdFwiZHJhd2Jhcl9vcmdhblwiLFxuXHRcInBlcmN1c3NpdmVfb3JnYW5cIixcblx0XCJyb2NrX29yZ2FuXCIsXG5cdFwiY2h1cmNoX29yZ2FuXCIsXG5cdFwicmVlZF9vcmdhblwiLFxuXHRcImFjY29yZGlvblwiLFxuXHRcImhhcm1vbmljYVwiLFxuXHRcInRhbmdvX2FjY29yZGlvblwiLFxuXG5cdFwiYWNvdXN0aWNfZ3VpdGFyX255bG9uXCIsXG5cdFwiYWNvdXN0aWNfZ3VpdGFyX3N0ZWVsXCIsXG5cdFwiZWxlY3RyaWNfZ3VpdGFyX2phenpcIixcblx0XCJlbGVjdHJpY19ndWl0YXJfY2xlYW5cIixcblx0XCJlbGVjdHJpY19ndWl0YXJfbXV0ZWRcIixcblx0XCJvdmVyZHJpdmVuX2d1aXRhclwiLFxuXHRcImRpc3RvcnRpb25fZ3VpdGFyXCIsXG5cdFwiZ3VpdGFyX2hhcm1vbmljc1wiLFxuXG5cdFwiYWNvdXN0aWNfYmFzc1wiLFxuXHRcImVsZWN0cmljX2Jhc3NfZmluZ2VyXCIsXG5cdFwiZWxlY3RyaWNfYmFzc19waWNrXCIsXG5cdFwiZnJldGxlc3NfYmFzc1wiLFxuXHRcInNsYXBfYmFzc18xXCIsXG5cdFwic2xhcF9iYXNzXzJcIixcblx0XCJzeW50aF9iYXNzXzFcIixcblx0XCJzeW50aF9iYXNzXzJcIixcblxuXHRcInZpb2xpblwiLFxuXHRcInZpb2xhXCIsXG5cdFwiY2VsbG9cIixcblx0XCJjb250cmFiYXNzXCIsXG5cdFwidHJlbW9sb19zdHJpbmdzXCIsXG5cdFwicGl6emljYXRvX3N0cmluZ3NcIixcblx0XCJvcmNoZXN0cmFsX2hhcnBcIixcblx0XCJ0aW1wYW5pXCIsXG5cblx0XCJzdHJpbmdfZW5zZW1ibGVfMVwiLFxuXHRcInN0cmluZ19lbnNlbWJsZV8yXCIsXG5cdFwic3ludGhfc3RyaW5nc18xXCIsXG5cdFwic3ludGhfc3RyaW5nc18yXCIsXG5cdFwiY2hvaXJfYWFoc1wiLFxuXHRcInZvaWNlX29vaHNcIixcblx0XCJzeW50aF9jaG9pclwiLFxuXHRcIm9yY2hlc3RyYV9oaXRcIixcblxuXHRcInRydW1wZXRcIixcblx0XCJ0cm9tYm9uZVwiLFxuXHRcInR1YmFcIixcblx0XCJtdXRlZF90cnVtcGV0XCIsXG5cdFwiZnJlbmNoX2hvcm5cIixcblx0XCJicmFzc19zZWN0aW9uXCIsXG5cdFwic3ludGhfYnJhc3NfMVwiLFxuXHRcInN5bnRoX2JyYXNzXzJcIixcblxuXHRcInNvcHJhbm9fc2F4XCIsXG5cdFwiYWx0b19zYXhcIixcblx0XCJ0ZW5vcl9zYXhcIixcblx0XCJiYXJpdG9uZV9zYXhcIixcblx0XCJvYm9lXCIsXG5cdFwiZW5nbGlzaF9ob3JuXCIsXG5cdFwiYmFzc29vblwiLFxuXHRcImNsYXJpbmV0XCIsXG5cblx0XCJwaWNjb2xvXCIsXG5cdFwiZmx1dGVcIixcblx0XCJyZWNvcmRlclwiLFxuXHRcInBhbl9mbHV0ZVwiLFxuXHRcImJsb3duX2JvdHRsZVwiLFxuXHRcInNoYWt1aGFjaGlcIixcblx0XCJ3aGlzdGxlXCIsXG5cdFwib2NhcmluYVwiLFxuXG5cdFwibGVhZF8xX3NxdWFyZVwiLFxuXHRcImxlYWRfMl9zYXd0b290aFwiLFxuXHRcImxlYWRfM19jYWxsaW9wZVwiLFxuXHRcImxlYWRfNF9jaGlmZlwiLFxuXHRcImxlYWRfNV9jaGFyYW5nXCIsXG5cdFwibGVhZF82X3ZvaWNlXCIsXG5cdFwibGVhZF83X2ZpZnRoc1wiLFxuXHRcImxlYWRfOF9iYXNzX2xlYWRcIixcblxuXHRcInBhZF8xX25ld19hZ2VcIixcblx0XCJwYWRfMl93YXJtXCIsXG5cdFwicGFkXzNfcG9seXN5bnRoXCIsXG5cdFwicGFkXzRfY2hvaXJcIixcblx0XCJwYWRfNV9ib3dlZFwiLFxuXHRcInBhZF82X21ldGFsbGljXCIsXG5cdFwicGFkXzdfaGFsb1wiLFxuXHRcInBhZF84X3N3ZWVwXCIsXG5cblx0XCJmeF8xX3JhaW5cIixcblx0XCJmeF8yX3NvdW5kdHJhY2tcIixcblx0XCJmeF8zX2NyeXN0YWxcIixcblx0XCJmeF80X2F0bW9zcGhlcmVcIixcblx0XCJmeF81X2JyaWdodG5lc3NcIixcblx0XCJmeF82X2dvYmxpbnNcIixcblx0XCJmeF83X2VjaG9lc1wiLFxuXHRcImZ4Xzhfc2NpZmlcIixcblxuXHRcInNpdGFyXCIsXG5cdFwiYmFuam9cIixcblx0XCJzaGFtaXNlblwiLFxuXHRcImtvdG9cIixcblx0XCJrYWxpbWJhXCIsXG5cdFwiYmFncGlwZVwiLFxuXHRcImZpZGRsZVwiLFxuXHRcInNoYW5haVwiLFxuXG5cdFwidGlua2xlX2JlbGxcIixcblx0XCJhZ29nb1wiLFxuXHRcInN0ZWVsX2RydW1zXCIsXG5cdFwid29vZGJsb2NrXCIsXG5cdFwidGFpa29fZHJ1bVwiLFxuXHRcIm1lbG9kaWNfdG9tXCIsXG5cdFwic3ludGhfZHJ1bVwiLFxuXHRcInJldmVyc2VfY3ltYmFsXCIsXG5cblx0XCJndWl0YXJfZnJldF9ub2lzZVwiLFxuXHRcImJyZWF0aF9ub2lzZVwiLFxuXHRcInNlYXNob3JlXCIsXG5cdFwiYmlyZF90d2VldFwiLFxuXHRcInRlbGVwaG9uZV9yaW5nXCIsXG5cdFwiaGVsaWNvcHRlclwiLFxuXHRcImFwcGxhdXNlXCIsXG5cdFwiZ3Vuc2hvdFwiLFxuXG5cdFwicGVyY3Vzc2lvblwiXG5dO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGluc3RydW1lbnRJbmRleFRvTmFtZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/instrument-index-to-name.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/load-note.js":
/*!***************************************************!*\
  !*** ./node_modules/abcjs/src/synth/load-note.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// Load one mp3 file for one note.\n// url = the base url for the soundfont\n// instrument = the instrument name (e.g. \"acoustic_grand_piano\")\n// name = the pitch name (e.g. \"A3\")\nvar soundsCache = __webpack_require__(/*! ./sounds-cache */ \"(ssr)/./node_modules/abcjs/src/synth/sounds-cache.js\");\n\nvar getNote = function (url, instrument, name, audioContext) {\n\tif (!soundsCache[instrument]) soundsCache[instrument] = {};\n\tvar instrumentCache = soundsCache[instrument];\n\n\tif (!instrumentCache[name])\n\t\tinstrumentCache[name] = new Promise(function (resolve, reject) {\n\t\t\tvar xhr = new XMLHttpRequest();\n\t\t\tlet noteUrl = url + instrument + \"-mp3/\" + name + \".mp3\";\n\t\t\txhr.open(\"GET\", noteUrl, true);\n\t\t\txhr.responseType = \"arraybuffer\";\n\t\t\txhr.onload = function () {\n\t\t\t\tif (xhr.status !== 200) {\n\t\t\t\t\treject(Error(\"Can't load sound at \" + noteUrl + ' status=' + xhr.status));\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tvar noteDecoded = function(audioBuffer) {\n\t\t\t\t\tresolve({instrument: instrument, name: name, status: \"loaded\", audioBuffer: audioBuffer})\n\t\t\t\t}\n\t\t\t\tvar maybePromise = audioContext.decodeAudioData(xhr.response, noteDecoded, function () {\n\t\t\t\t\treject(Error(\"Can't decode sound at \" + noteUrl));\n\t\t\t\t});\n\t\t\t\t// In older browsers `BaseAudioContext.decodeAudio()` did not return a promise\n\t\t\t\tif (maybePromise && typeof maybePromise.catch === \"function\") maybePromise.catch(reject);\n\t\t\t};\n\t\t\txhr.onerror = function () {\n\t\t\t\treject(Error(\"Can't load sound at \" + noteUrl));\n\t\t\t};\n\t\t\txhr.send();\n\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.error(\"Didn't load note\", instrument, name, \":\", err.message);\n\t\t\t\tthrow err;\n\t\t\t});\n\n\treturn instrumentCache[name];\n};\n\nmodule.exports = getNote;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL2xvYWQtbm90ZS5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixtQkFBTyxDQUFDLDRFQUFnQjs7QUFFMUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsK0VBQStFO0FBQzdGO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvc3ludGgvbG9hZC1ub3RlLmpzPzA5Y2MiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTG9hZCBvbmUgbXAzIGZpbGUgZm9yIG9uZSBub3RlLlxuLy8gdXJsID0gdGhlIGJhc2UgdXJsIGZvciB0aGUgc291bmRmb250XG4vLyBpbnN0cnVtZW50ID0gdGhlIGluc3RydW1lbnQgbmFtZSAoZS5nLiBcImFjb3VzdGljX2dyYW5kX3BpYW5vXCIpXG4vLyBuYW1lID0gdGhlIHBpdGNoIG5hbWUgKGUuZy4gXCJBM1wiKVxudmFyIHNvdW5kc0NhY2hlID0gcmVxdWlyZShcIi4vc291bmRzLWNhY2hlXCIpO1xuXG52YXIgZ2V0Tm90ZSA9IGZ1bmN0aW9uICh1cmwsIGluc3RydW1lbnQsIG5hbWUsIGF1ZGlvQ29udGV4dCkge1xuXHRpZiAoIXNvdW5kc0NhY2hlW2luc3RydW1lbnRdKSBzb3VuZHNDYWNoZVtpbnN0cnVtZW50XSA9IHt9O1xuXHR2YXIgaW5zdHJ1bWVudENhY2hlID0gc291bmRzQ2FjaGVbaW5zdHJ1bWVudF07XG5cblx0aWYgKCFpbnN0cnVtZW50Q2FjaGVbbmFtZV0pXG5cdFx0aW5zdHJ1bWVudENhY2hlW25hbWVdID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0dmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcdFx0bGV0IG5vdGVVcmwgPSB1cmwgKyBpbnN0cnVtZW50ICsgXCItbXAzL1wiICsgbmFtZSArIFwiLm1wM1wiO1xuXHRcdFx0eGhyLm9wZW4oXCJHRVRcIiwgbm90ZVVybCwgdHJ1ZSk7XG5cdFx0XHR4aHIucmVzcG9uc2VUeXBlID0gXCJhcnJheWJ1ZmZlclwiO1xuXHRcdFx0eGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aWYgKHhoci5zdGF0dXMgIT09IDIwMCkge1xuXHRcdFx0XHRcdHJlamVjdChFcnJvcihcIkNhbid0IGxvYWQgc291bmQgYXQgXCIgKyBub3RlVXJsICsgJyBzdGF0dXM9JyArIHhoci5zdGF0dXMpKTtcblx0XHRcdFx0XHRyZXR1cm5cblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgbm90ZURlY29kZWQgPSBmdW5jdGlvbihhdWRpb0J1ZmZlcikge1xuXHRcdFx0XHRcdHJlc29sdmUoe2luc3RydW1lbnQ6IGluc3RydW1lbnQsIG5hbWU6IG5hbWUsIHN0YXR1czogXCJsb2FkZWRcIiwgYXVkaW9CdWZmZXI6IGF1ZGlvQnVmZmVyfSlcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgbWF5YmVQcm9taXNlID0gYXVkaW9Db250ZXh0LmRlY29kZUF1ZGlvRGF0YSh4aHIucmVzcG9uc2UsIG5vdGVEZWNvZGVkLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0cmVqZWN0KEVycm9yKFwiQ2FuJ3QgZGVjb2RlIHNvdW5kIGF0IFwiICsgbm90ZVVybCkpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0Ly8gSW4gb2xkZXIgYnJvd3NlcnMgYEJhc2VBdWRpb0NvbnRleHQuZGVjb2RlQXVkaW8oKWAgZGlkIG5vdCByZXR1cm4gYSBwcm9taXNlXG5cdFx0XHRcdGlmIChtYXliZVByb21pc2UgJiYgdHlwZW9mIG1heWJlUHJvbWlzZS5jYXRjaCA9PT0gXCJmdW5jdGlvblwiKSBtYXliZVByb21pc2UuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH07XG5cdFx0XHR4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0cmVqZWN0KEVycm9yKFwiQ2FuJ3QgbG9hZCBzb3VuZCBhdCBcIiArIG5vdGVVcmwpKTtcblx0XHRcdH07XG5cdFx0XHR4aHIuc2VuZCgpO1xuXHRcdH0pXG5cdFx0XHQuY2F0Y2goZXJyID0+IHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkRpZG4ndCBsb2FkIG5vdGVcIiwgaW5zdHJ1bWVudCwgbmFtZSwgXCI6XCIsIGVyci5tZXNzYWdlKTtcblx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0fSk7XG5cblx0cmV0dXJuIGluc3RydW1lbnRDYWNoZVtuYW1lXTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0Tm90ZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/load-note.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/note-to-midi.js":
/*!******************************************************!*\
  !*** ./node_modules/abcjs/src/synth/note-to-midi.js ***!
  \******************************************************/
/***/ ((module) => {

eval("var accidentals = {\n\t\"__\": -2,\n\t\"_\": -1,\n\t\"_/\": -0.5,\n\t\"=\": 0,\n\t\"\": 0,\n\t\"^/\": 0.5,\n\t\"^\": 1,\n\t\"^^\": 2\n}\n\nvar notesInOrder = ['C', '-', 'D', '-', 'E', 'F', '-', 'G', '-', 'A', '-', 'B', 'c', '-', 'd', '-', 'e', 'f', '-', 'g', '-', 'a', '-', 'b']\n\nfunction noteToMidi(note) {\n\tvar reg = note.match(/([_^\\/]*)([ABCDEFGabcdefg])(,*)('*)/)\n\tif (reg && reg.length === 5) {\n\t\tvar acc = accidentals[reg[1]]\n\t\tvar pitch = notesInOrder.indexOf(reg[2])\n\t\tvar octave = reg[4].length - reg[3].length\n\t\treturn 48 + pitch + acc + octave * 12;\n\t}\n\treturn 0;\n}\n\nfunction midiToNote(midi) {\n\tmidi = parseInt(midi, 10) // TODO-PER: not sure how to handle quarter sharps and flats, so strip them for now.\n\tvar octave = Math.floor(midi / 12)\n\tvar pitch = midi % 12\n\tvar name = notesInOrder[pitch]\n\tif (name === '-') {\n\t\tname = '^' + notesInOrder[pitch-1]\n\t}\n\t\n\tif (octave > 4) {\n\t\tname = name.toLowerCase()\n\t\toctave -= 5\n\t\twhile (octave > 0) {\n\t\t\tname += \"'\"\n\t\t\toctave--\n\t\t}\n\t} else {\n\t\twhile (octave < 4) {\n\t\t\tname += ','\n\t\t\toctave++\n\t\t}\n\t}\t\n\treturn name\n}\n\nmodule.exports = {noteToMidi: noteToMidi, midiToNote: midiToNote};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL25vdGUtdG8tbWlkaS5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvc3ludGgvbm90ZS10by1taWRpLmpzP2U2ZGYiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGFjY2lkZW50YWxzID0ge1xuXHRcIl9fXCI6IC0yLFxuXHRcIl9cIjogLTEsXG5cdFwiXy9cIjogLTAuNSxcblx0XCI9XCI6IDAsXG5cdFwiXCI6IDAsXG5cdFwiXi9cIjogMC41LFxuXHRcIl5cIjogMSxcblx0XCJeXlwiOiAyXG59XG5cbnZhciBub3Rlc0luT3JkZXIgPSBbJ0MnLCAnLScsICdEJywgJy0nLCAnRScsICdGJywgJy0nLCAnRycsICctJywgJ0EnLCAnLScsICdCJywgJ2MnLCAnLScsICdkJywgJy0nLCAnZScsICdmJywgJy0nLCAnZycsICctJywgJ2EnLCAnLScsICdiJ11cblxuZnVuY3Rpb24gbm90ZVRvTWlkaShub3RlKSB7XG5cdHZhciByZWcgPSBub3RlLm1hdGNoKC8oW19eXFwvXSopKFtBQkNERUZHYWJjZGVmZ10pKCwqKSgnKikvKVxuXHRpZiAocmVnICYmIHJlZy5sZW5ndGggPT09IDUpIHtcblx0XHR2YXIgYWNjID0gYWNjaWRlbnRhbHNbcmVnWzFdXVxuXHRcdHZhciBwaXRjaCA9IG5vdGVzSW5PcmRlci5pbmRleE9mKHJlZ1syXSlcblx0XHR2YXIgb2N0YXZlID0gcmVnWzRdLmxlbmd0aCAtIHJlZ1szXS5sZW5ndGhcblx0XHRyZXR1cm4gNDggKyBwaXRjaCArIGFjYyArIG9jdGF2ZSAqIDEyO1xuXHR9XG5cdHJldHVybiAwO1xufVxuXG5mdW5jdGlvbiBtaWRpVG9Ob3RlKG1pZGkpIHtcblx0bWlkaSA9IHBhcnNlSW50KG1pZGksIDEwKSAvLyBUT0RPLVBFUjogbm90IHN1cmUgaG93IHRvIGhhbmRsZSBxdWFydGVyIHNoYXJwcyBhbmQgZmxhdHMsIHNvIHN0cmlwIHRoZW0gZm9yIG5vdy5cblx0dmFyIG9jdGF2ZSA9IE1hdGguZmxvb3IobWlkaSAvIDEyKVxuXHR2YXIgcGl0Y2ggPSBtaWRpICUgMTJcblx0dmFyIG5hbWUgPSBub3Rlc0luT3JkZXJbcGl0Y2hdXG5cdGlmIChuYW1lID09PSAnLScpIHtcblx0XHRuYW1lID0gJ14nICsgbm90ZXNJbk9yZGVyW3BpdGNoLTFdXG5cdH1cblx0XG5cdGlmIChvY3RhdmUgPiA0KSB7XG5cdFx0bmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKVxuXHRcdG9jdGF2ZSAtPSA1XG5cdFx0d2hpbGUgKG9jdGF2ZSA+IDApIHtcblx0XHRcdG5hbWUgKz0gXCInXCJcblx0XHRcdG9jdGF2ZS0tXG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdHdoaWxlIChvY3RhdmUgPCA0KSB7XG5cdFx0XHRuYW1lICs9ICcsJ1xuXHRcdFx0b2N0YXZlKytcblx0XHR9XG5cdH1cdFxuXHRyZXR1cm4gbmFtZVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtub3RlVG9NaWRpOiBub3RlVG9NaWRpLCBtaWRpVG9Ob3RlOiBtaWRpVG9Ob3RlfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/note-to-midi.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/pitch-to-note-name.js":
/*!************************************************************!*\
  !*** ./node_modules/abcjs/src/synth/pitch-to-note-name.js ***!
  \************************************************************/
/***/ ((module) => {

eval("var pitchToNoteName = {\n\t21: 'A0',\n\t22: 'Bb0',\n\t23: 'B0',\n\t24: 'C1',\n\t25: 'Db1',\n\t26: 'D1',\n\t27: 'Eb1',\n\t28: 'E1',\n\t29: 'F1',\n\t30: 'Gb1',\n\t31: 'G1',\n\t32: 'Ab1',\n\t33: 'A1',\n\t34: 'Bb1',\n\t35: 'B1',\n\t36: 'C2',\n\t37: 'Db2',\n\t38: 'D2',\n\t39: 'Eb2',\n\t40: 'E2',\n\t41: 'F2',\n\t42: 'Gb2',\n\t43: 'G2',\n\t44: 'Ab2',\n\t45: 'A2',\n\t46: 'Bb2',\n\t47: 'B2',\n\t48: 'C3',\n\t49: 'Db3',\n\t50: 'D3',\n\t51: 'Eb3',\n\t52: 'E3',\n\t53: 'F3',\n\t54: 'Gb3',\n\t55: 'G3',\n\t56: 'Ab3',\n\t57: 'A3',\n\t58: 'Bb3',\n\t59: 'B3',\n\t60: 'C4',\n\t61: 'Db4',\n\t62: 'D4',\n\t63: 'Eb4',\n\t64: 'E4',\n\t65: 'F4',\n\t66: 'Gb4',\n\t67: 'G4',\n\t68: 'Ab4',\n\t69: 'A4',\n\t70: 'Bb4',\n\t71: 'B4',\n\t72: 'C5',\n\t73: 'Db5',\n\t74: 'D5',\n\t75: 'Eb5',\n\t76: 'E5',\n\t77: 'F5',\n\t78: 'Gb5',\n\t79: 'G5',\n\t80: 'Ab5',\n\t81: 'A5',\n\t82: 'Bb5',\n\t83: 'B5',\n\t84: 'C6',\n\t85: 'Db6',\n\t86: 'D6',\n\t87: 'Eb6',\n\t88: 'E6',\n\t89: 'F6',\n\t90: 'Gb6',\n\t91: 'G6',\n\t92: 'Ab6',\n\t93: 'A6',\n\t94: 'Bb6',\n\t95: 'B6',\n\t96: 'C7',\n\t97: 'Db7',\n\t98: 'D7',\n\t99: 'Eb7',\n\t100: 'E7',\n\t101: 'F7',\n\t102: 'Gb7',\n\t103: 'G7',\n\t104: 'Ab7',\n\t105: 'A7',\n\t106: 'Bb7',\n\t107: 'B7',\n\t108: 'C8',\n\t109: 'Db8',\n\t110: 'D8',\n\t111: 'Eb8',\n\t112: 'E8',\n\t113: 'F8',\n\t114: 'Gb8',\n\t115: 'G8',\n\t116: 'Ab8',\n\t117: 'A8',\n\t118: 'Bb8',\n\t119: 'B8',\n\t120: 'C9',\n\t121: 'Db9'\n};\n\nmodule.exports = pitchToNoteName;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL3BpdGNoLXRvLW5vdGUtbmFtZS5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy9zeW50aC9waXRjaC10by1ub3RlLW5hbWUuanM/YzRjZiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcGl0Y2hUb05vdGVOYW1lID0ge1xuXHQyMTogJ0EwJyxcblx0MjI6ICdCYjAnLFxuXHQyMzogJ0IwJyxcblx0MjQ6ICdDMScsXG5cdDI1OiAnRGIxJyxcblx0MjY6ICdEMScsXG5cdDI3OiAnRWIxJyxcblx0Mjg6ICdFMScsXG5cdDI5OiAnRjEnLFxuXHQzMDogJ0diMScsXG5cdDMxOiAnRzEnLFxuXHQzMjogJ0FiMScsXG5cdDMzOiAnQTEnLFxuXHQzNDogJ0JiMScsXG5cdDM1OiAnQjEnLFxuXHQzNjogJ0MyJyxcblx0Mzc6ICdEYjInLFxuXHQzODogJ0QyJyxcblx0Mzk6ICdFYjInLFxuXHQ0MDogJ0UyJyxcblx0NDE6ICdGMicsXG5cdDQyOiAnR2IyJyxcblx0NDM6ICdHMicsXG5cdDQ0OiAnQWIyJyxcblx0NDU6ICdBMicsXG5cdDQ2OiAnQmIyJyxcblx0NDc6ICdCMicsXG5cdDQ4OiAnQzMnLFxuXHQ0OTogJ0RiMycsXG5cdDUwOiAnRDMnLFxuXHQ1MTogJ0ViMycsXG5cdDUyOiAnRTMnLFxuXHQ1MzogJ0YzJyxcblx0NTQ6ICdHYjMnLFxuXHQ1NTogJ0czJyxcblx0NTY6ICdBYjMnLFxuXHQ1NzogJ0EzJyxcblx0NTg6ICdCYjMnLFxuXHQ1OTogJ0IzJyxcblx0NjA6ICdDNCcsXG5cdDYxOiAnRGI0Jyxcblx0NjI6ICdENCcsXG5cdDYzOiAnRWI0Jyxcblx0NjQ6ICdFNCcsXG5cdDY1OiAnRjQnLFxuXHQ2NjogJ0diNCcsXG5cdDY3OiAnRzQnLFxuXHQ2ODogJ0FiNCcsXG5cdDY5OiAnQTQnLFxuXHQ3MDogJ0JiNCcsXG5cdDcxOiAnQjQnLFxuXHQ3MjogJ0M1Jyxcblx0NzM6ICdEYjUnLFxuXHQ3NDogJ0Q1Jyxcblx0NzU6ICdFYjUnLFxuXHQ3NjogJ0U1Jyxcblx0Nzc6ICdGNScsXG5cdDc4OiAnR2I1Jyxcblx0Nzk6ICdHNScsXG5cdDgwOiAnQWI1Jyxcblx0ODE6ICdBNScsXG5cdDgyOiAnQmI1Jyxcblx0ODM6ICdCNScsXG5cdDg0OiAnQzYnLFxuXHQ4NTogJ0RiNicsXG5cdDg2OiAnRDYnLFxuXHQ4NzogJ0ViNicsXG5cdDg4OiAnRTYnLFxuXHQ4OTogJ0Y2Jyxcblx0OTA6ICdHYjYnLFxuXHQ5MTogJ0c2Jyxcblx0OTI6ICdBYjYnLFxuXHQ5MzogJ0E2Jyxcblx0OTQ6ICdCYjYnLFxuXHQ5NTogJ0I2Jyxcblx0OTY6ICdDNycsXG5cdDk3OiAnRGI3Jyxcblx0OTg6ICdENycsXG5cdDk5OiAnRWI3Jyxcblx0MTAwOiAnRTcnLFxuXHQxMDE6ICdGNycsXG5cdDEwMjogJ0diNycsXG5cdDEwMzogJ0c3Jyxcblx0MTA0OiAnQWI3Jyxcblx0MTA1OiAnQTcnLFxuXHQxMDY6ICdCYjcnLFxuXHQxMDc6ICdCNycsXG5cdDEwODogJ0M4Jyxcblx0MTA5OiAnRGI4Jyxcblx0MTEwOiAnRDgnLFxuXHQxMTE6ICdFYjgnLFxuXHQxMTI6ICdFOCcsXG5cdDExMzogJ0Y4Jyxcblx0MTE0OiAnR2I4Jyxcblx0MTE1OiAnRzgnLFxuXHQxMTY6ICdBYjgnLFxuXHQxMTc6ICdBOCcsXG5cdDExODogJ0JiOCcsXG5cdDExOTogJ0I4Jyxcblx0MTIwOiAnQzknLFxuXHQxMjE6ICdEYjknXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHBpdGNoVG9Ob3RlTmFtZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/pitch-to-note-name.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/pitches-to-perc.js":
/*!*********************************************************!*\
  !*** ./node_modules/abcjs/src/synth/pitches-to-perc.js ***!
  \*********************************************************/
/***/ ((module) => {

eval("var pitchMap = {\n\tf0: \"_C\",\n\tn0: \"=C\",\n\ts0: \"^C\",\n\tx0: \"C\",\n\tf1: \"_D\",\n\tn1: \"=D\",\n\ts1: \"^D\",\n\tx1: \"D\",\n\tf2: \"_E\",\n\tn2: \"=E\",\n\ts2: \"^E\",\n\tx2: \"E\",\n\tf3: \"_F\",\n\tn3: \"=F\",\n\ts3: \"^F\",\n\tx3: \"F\",\n\tf4: \"_G\",\n\tn4: \"=G\",\n\ts4: \"^G\",\n\tx4: \"G\",\n\tf5: \"_A\",\n\tn5: \"=A\",\n\ts5: \"^A\",\n\tx5: \"A\",\n\tf6: \"_B\",\n\tn6: \"=B\",\n\ts6: \"^B\",\n\tx6: \"B\",\n\tf7: \"_c\",\n\tn7: \"=c\",\n\ts7: \"^c\",\n\tx7: \"c\",\n\tf8: \"_d\",\n\tn8: \"=d\",\n\ts8: \"^d\",\n\tx8: \"d\",\n\tf9: \"_e\",\n\tn9: \"=e\",\n\ts9: \"^e\",\n\tx9: \"e\",\n\tf10: \"_f\",\n\tn10: \"=f\",\n\ts10: \"^f\",\n\tx10: \"f\",\n\tf11: \"_g\",\n\tn11: \"=g\",\n\ts11: \"^g\",\n\tx11: \"g\",\n\tf12: \"_a\",\n\tn12: \"=a\",\n\ts12: \"^a\",\n\tx12: \"a\",\n\tf13: \"_b\",\n\tn13: \"=b\",\n\ts13: \"^b\",\n\tx13: \"b\",\n\tf14: \"_c'\",\n\tn14: \"=c'\",\n\ts14: \"^c'\",\n\tx14: \"c'\",\n\tf15: \"_d'\",\n\tn15: \"=d'\",\n\ts15: \"^d'\",\n\tx15: \"d'\",\n\tf16: \"_e'\",\n\tn16: \"=e'\",\n\ts16: \"^e'\",\n\tx16: \"e'\",\n}\n\nfunction pitchesToPerc(pitchObj) {\n\tvar pitch = (pitchObj.accidental ? pitchObj.accidental[0] : 'x') + pitchObj.verticalPos;\n\treturn pitchMap[pitch];\n}\nmodule.exports = pitchesToPerc;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL3BpdGNoZXMtdG8tcGVyYy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL3BpdGNoZXMtdG8tcGVyYy5qcz9kMjg0Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBwaXRjaE1hcCA9IHtcblx0ZjA6IFwiX0NcIixcblx0bjA6IFwiPUNcIixcblx0czA6IFwiXkNcIixcblx0eDA6IFwiQ1wiLFxuXHRmMTogXCJfRFwiLFxuXHRuMTogXCI9RFwiLFxuXHRzMTogXCJeRFwiLFxuXHR4MTogXCJEXCIsXG5cdGYyOiBcIl9FXCIsXG5cdG4yOiBcIj1FXCIsXG5cdHMyOiBcIl5FXCIsXG5cdHgyOiBcIkVcIixcblx0ZjM6IFwiX0ZcIixcblx0bjM6IFwiPUZcIixcblx0czM6IFwiXkZcIixcblx0eDM6IFwiRlwiLFxuXHRmNDogXCJfR1wiLFxuXHRuNDogXCI9R1wiLFxuXHRzNDogXCJeR1wiLFxuXHR4NDogXCJHXCIsXG5cdGY1OiBcIl9BXCIsXG5cdG41OiBcIj1BXCIsXG5cdHM1OiBcIl5BXCIsXG5cdHg1OiBcIkFcIixcblx0ZjY6IFwiX0JcIixcblx0bjY6IFwiPUJcIixcblx0czY6IFwiXkJcIixcblx0eDY6IFwiQlwiLFxuXHRmNzogXCJfY1wiLFxuXHRuNzogXCI9Y1wiLFxuXHRzNzogXCJeY1wiLFxuXHR4NzogXCJjXCIsXG5cdGY4OiBcIl9kXCIsXG5cdG44OiBcIj1kXCIsXG5cdHM4OiBcIl5kXCIsXG5cdHg4OiBcImRcIixcblx0Zjk6IFwiX2VcIixcblx0bjk6IFwiPWVcIixcblx0czk6IFwiXmVcIixcblx0eDk6IFwiZVwiLFxuXHRmMTA6IFwiX2ZcIixcblx0bjEwOiBcIj1mXCIsXG5cdHMxMDogXCJeZlwiLFxuXHR4MTA6IFwiZlwiLFxuXHRmMTE6IFwiX2dcIixcblx0bjExOiBcIj1nXCIsXG5cdHMxMTogXCJeZ1wiLFxuXHR4MTE6IFwiZ1wiLFxuXHRmMTI6IFwiX2FcIixcblx0bjEyOiBcIj1hXCIsXG5cdHMxMjogXCJeYVwiLFxuXHR4MTI6IFwiYVwiLFxuXHRmMTM6IFwiX2JcIixcblx0bjEzOiBcIj1iXCIsXG5cdHMxMzogXCJeYlwiLFxuXHR4MTM6IFwiYlwiLFxuXHRmMTQ6IFwiX2MnXCIsXG5cdG4xNDogXCI9YydcIixcblx0czE0OiBcIl5jJ1wiLFxuXHR4MTQ6IFwiYydcIixcblx0ZjE1OiBcIl9kJ1wiLFxuXHRuMTU6IFwiPWQnXCIsXG5cdHMxNTogXCJeZCdcIixcblx0eDE1OiBcImQnXCIsXG5cdGYxNjogXCJfZSdcIixcblx0bjE2OiBcIj1lJ1wiLFxuXHRzMTY6IFwiXmUnXCIsXG5cdHgxNjogXCJlJ1wiLFxufVxuXG5mdW5jdGlvbiBwaXRjaGVzVG9QZXJjKHBpdGNoT2JqKSB7XG5cdHZhciBwaXRjaCA9IChwaXRjaE9iai5hY2NpZGVudGFsID8gcGl0Y2hPYmouYWNjaWRlbnRhbFswXSA6ICd4JykgKyBwaXRjaE9iai52ZXJ0aWNhbFBvcztcblx0cmV0dXJuIHBpdGNoTWFwW3BpdGNoXTtcbn1cbm1vZHVsZS5leHBvcnRzID0gcGl0Y2hlc1RvUGVyYztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/pitches-to-perc.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/place-note.js":
/*!****************************************************!*\
  !*** ./node_modules/abcjs/src/synth/place-note.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var soundsCache = __webpack_require__(/*! ./sounds-cache */ \"(ssr)/./node_modules/abcjs/src/synth/sounds-cache.js\");\nvar pitchToNoteName = __webpack_require__(/*! ./pitch-to-note-name */ \"(ssr)/./node_modules/abcjs/src/synth/pitch-to-note-name.js\");\nvar centsToFactor = __webpack_require__(/*! ./cents-to-factor */ \"(ssr)/./node_modules/abcjs/src/synth/cents-to-factor.js\");\n\nfunction placeNote(outputAudioBuffer, sampleRate, sound, startArray, volumeMultiplier, ofsMs, fadeTimeSec, noteEndSec, debugCallback) {\n\t// sound contains { instrument, pitch, volume, len, pan, tempoMultiplier\n\t// len is in whole notes. Multiply by tempoMultiplier to get seconds.\n\t// ofsMs is an offset to subtract from the note to line up programs that have different length onsets.\n\tvar OfflineAC = window.OfflineAudioContext ||\n\t\twindow.webkitOfflineAudioContext;\n\n\tvar len = sound.len * sound.tempoMultiplier;\n\tif (ofsMs)\n\t\tlen +=ofsMs/1000;\n\tlen -= noteEndSec;\n\tif (len < 0)\n\t\tlen = 0.005; // Have some small audible length no matter how short the note is.\n\tvar offlineCtx = new OfflineAC(2,Math.floor((len+fadeTimeSec)*sampleRate),sampleRate);\n\tvar noteName = pitchToNoteName[sound.pitch];\n\tif (!soundsCache[sound.instrument]) {\n\t\t// It shouldn't happen that the entire instrument cache wasn't created, but this has been seen in practice, so guard against it.\n\t\tif (debugCallback)\n\t\t\tdebugCallback('placeNote skipped (instrument empty): '+sound.instrument+':'+noteName)\n\t\treturn Promise.resolve();\n\t}\n\tvar noteBufferPromise = soundsCache[sound.instrument][noteName];\n\n\tif (!noteBufferPromise) {\n\t\t// if the note isn't present then just skip it - it will leave a blank spot in the audio.\n\t\tif (debugCallback)\n\t\t\tdebugCallback('placeNote skipped: '+sound.instrument+':'+noteName)\n\t\treturn Promise.resolve();\n\t}\n\n\treturn noteBufferPromise\n\t\t.then(function (response) {\n\t\t\t// create audio buffer\n\t\t\tvar source = offlineCtx.createBufferSource();\n\t\t\tsource.buffer = response.audioBuffer;\n\n\t\t\t// add gain\n\t\t\t// volume can be between 1 to 127. This translation to gain is just trial and error.\n\t\t\t// The smaller the first number, the more dynamic range between the quietest to loudest.\n\t\t\t// The larger the second number, the louder it will be in general.\n\t\t\tvar volume = (sound.volume / 96) * volumeMultiplier;\n\t\t\tsource.gainNode = offlineCtx.createGain();\n\n\t\t\t// add pan if supported and present\n\t\t\tif (sound.pan && offlineCtx.createStereoPanner) {\n\t\t\t\tsource.panNode = offlineCtx.createStereoPanner();\n\t\t\t\tsource.panNode.pan.setValueAtTime(sound.pan, 0);\n\t\t\t}\n\t\t\tsource.gainNode.gain.value = volume; // Math.min(2, Math.max(0, volume));\n\t\t\tsource.gainNode.gain.linearRampToValueAtTime(source.gainNode.gain.value, len);\n\t\t\tsource.gainNode.gain.linearRampToValueAtTime(0.0, len + fadeTimeSec);\n\n\t\t\tif (sound.cents) {\n\t\t\t\tsource.playbackRate.value = centsToFactor(sound.cents);\n\t\t\t}\n\n\t\t\t// connect all the nodes\n\t\t\tif (source.panNode) {\n\t\t\t\tsource.panNode.connect(offlineCtx.destination);\n\t\t\t\tsource.gainNode.connect(source.panNode);\n\t\t\t} else {\n\t\t\t\tsource.gainNode.connect(offlineCtx.destination);\n\t\t\t}\n\t\t\tsource.connect(source.gainNode);\n\n\t\t\t// Do the process of creating the sound and placing it in the buffer\n\t\t\tsource.start(0);\n\n\t\t\tif (source.noteOff) {\n\t\t\t\tsource.noteOff(len + fadeTimeSec);\n\t\t\t} else {\n\t\t\t\tsource.stop(len + fadeTimeSec);\n\t\t\t}\n\t\t\tvar fnResolve;\n\t\t\tofflineCtx.oncomplete = function(e) {\n\t\t\t\tif (e.renderedBuffer && e.renderedBuffer.getChannelData) { // If the system gets overloaded or there are network problems then this can start failing. Just drop the note if so.\n\t\t\t\t\tfor (var i = 0; i < startArray.length; i++) {\n\t\t\t\t\t\t//Math.floor(startArray[i] * sound.tempoMultiplier * sampleRate)\n\t\t\t\t\t\tvar start = startArray[i] * sound.tempoMultiplier;\n\t\t\t\t\t\tif (ofsMs)\n\t\t\t\t\t\t\tstart -=ofsMs/1000;\n\t\t\t\t\t\tif (start < 0)\n\t\t\t\t\t\t\tstart = 0; // If the item that is moved back is at the very beginning of the buffer then don't move it back. To do that would be to push everything else forward. TODO-PER: this should probably be done at some point but then it would change timing in existing apps.\n\t\t\t\t\t\tstart = Math.floor(start*sampleRate);\n\t\t\t\t\t\tcopyToChannel(outputAudioBuffer, e.renderedBuffer, start);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (debugCallback)\n\t\t\t\t\tdebugCallback('placeNote: '+sound.instrument+':'+noteName)\n\t\t\t\tfnResolve();\n\t\t\t};\n\t\t\tofflineCtx.startRendering();\n\t\t\treturn new Promise(function(resolve) {\n\t\t\t\tfnResolve = resolve;\n\t\t\t});\n\t\t})\n\t\t.catch(function (error) {\n\t\t\tif (debugCallback)\n\t\t\t\tdebugCallback('placeNote catch: '+error.message)\n\t\t\treturn Promise.reject(error)\n\t\t});\n}\n\nvar copyToChannel = function(toBuffer, fromBuffer, start) {\n\tfor (var ch = 0; ch < 2; ch++) {\n\t\tvar fromData = fromBuffer.getChannelData(ch);\n\t\tvar toData = toBuffer.getChannelData(ch);\n\n\t\t// Mix the current note into the existing track\n\t\tfor (var n = 0; n < fromData.length; n++) {\n\t\t\ttoData[n + start] += fromData[n];\n\t\t}\n\t}\n};\n\nmodule.exports = placeNote;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL3BsYWNlLW5vdGUuanMiLCJtYXBwaW5ncyI6IkFBQUEsa0JBQWtCLG1CQUFPLENBQUMsNEVBQWdCO0FBQzFDLHNCQUFzQixtQkFBTyxDQUFDLHdGQUFzQjtBQUNwRCxvQkFBb0IsbUJBQU8sQ0FBQyxrRkFBbUI7O0FBRS9DO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0Q7QUFDL0QscUJBQXFCLHVCQUF1QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0Esa0JBQWtCLFFBQVE7QUFDMUI7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixxQkFBcUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvc3ludGgvcGxhY2Utbm90ZS5qcz9lZjQ0Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBzb3VuZHNDYWNoZSA9IHJlcXVpcmUoJy4vc291bmRzLWNhY2hlJyk7XG52YXIgcGl0Y2hUb05vdGVOYW1lID0gcmVxdWlyZSgnLi9waXRjaC10by1ub3RlLW5hbWUnKTtcbnZhciBjZW50c1RvRmFjdG9yID0gcmVxdWlyZShcIi4vY2VudHMtdG8tZmFjdG9yXCIpO1xuXG5mdW5jdGlvbiBwbGFjZU5vdGUob3V0cHV0QXVkaW9CdWZmZXIsIHNhbXBsZVJhdGUsIHNvdW5kLCBzdGFydEFycmF5LCB2b2x1bWVNdWx0aXBsaWVyLCBvZnNNcywgZmFkZVRpbWVTZWMsIG5vdGVFbmRTZWMsIGRlYnVnQ2FsbGJhY2spIHtcblx0Ly8gc291bmQgY29udGFpbnMgeyBpbnN0cnVtZW50LCBwaXRjaCwgdm9sdW1lLCBsZW4sIHBhbiwgdGVtcG9NdWx0aXBsaWVyXG5cdC8vIGxlbiBpcyBpbiB3aG9sZSBub3Rlcy4gTXVsdGlwbHkgYnkgdGVtcG9NdWx0aXBsaWVyIHRvIGdldCBzZWNvbmRzLlxuXHQvLyBvZnNNcyBpcyBhbiBvZmZzZXQgdG8gc3VidHJhY3QgZnJvbSB0aGUgbm90ZSB0byBsaW5lIHVwIHByb2dyYW1zIHRoYXQgaGF2ZSBkaWZmZXJlbnQgbGVuZ3RoIG9uc2V0cy5cblx0dmFyIE9mZmxpbmVBQyA9IHdpbmRvdy5PZmZsaW5lQXVkaW9Db250ZXh0IHx8XG5cdFx0d2luZG93LndlYmtpdE9mZmxpbmVBdWRpb0NvbnRleHQ7XG5cblx0dmFyIGxlbiA9IHNvdW5kLmxlbiAqIHNvdW5kLnRlbXBvTXVsdGlwbGllcjtcblx0aWYgKG9mc01zKVxuXHRcdGxlbiArPW9mc01zLzEwMDA7XG5cdGxlbiAtPSBub3RlRW5kU2VjO1xuXHRpZiAobGVuIDwgMClcblx0XHRsZW4gPSAwLjAwNTsgLy8gSGF2ZSBzb21lIHNtYWxsIGF1ZGlibGUgbGVuZ3RoIG5vIG1hdHRlciBob3cgc2hvcnQgdGhlIG5vdGUgaXMuXG5cdHZhciBvZmZsaW5lQ3R4ID0gbmV3IE9mZmxpbmVBQygyLE1hdGguZmxvb3IoKGxlbitmYWRlVGltZVNlYykqc2FtcGxlUmF0ZSksc2FtcGxlUmF0ZSk7XG5cdHZhciBub3RlTmFtZSA9IHBpdGNoVG9Ob3RlTmFtZVtzb3VuZC5waXRjaF07XG5cdGlmICghc291bmRzQ2FjaGVbc291bmQuaW5zdHJ1bWVudF0pIHtcblx0XHQvLyBJdCBzaG91bGRuJ3QgaGFwcGVuIHRoYXQgdGhlIGVudGlyZSBpbnN0cnVtZW50IGNhY2hlIHdhc24ndCBjcmVhdGVkLCBidXQgdGhpcyBoYXMgYmVlbiBzZWVuIGluIHByYWN0aWNlLCBzbyBndWFyZCBhZ2FpbnN0IGl0LlxuXHRcdGlmIChkZWJ1Z0NhbGxiYWNrKVxuXHRcdFx0ZGVidWdDYWxsYmFjaygncGxhY2VOb3RlIHNraXBwZWQgKGluc3RydW1lbnQgZW1wdHkpOiAnK3NvdW5kLmluc3RydW1lbnQrJzonK25vdGVOYW1lKVxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblx0fVxuXHR2YXIgbm90ZUJ1ZmZlclByb21pc2UgPSBzb3VuZHNDYWNoZVtzb3VuZC5pbnN0cnVtZW50XVtub3RlTmFtZV07XG5cblx0aWYgKCFub3RlQnVmZmVyUHJvbWlzZSkge1xuXHRcdC8vIGlmIHRoZSBub3RlIGlzbid0IHByZXNlbnQgdGhlbiBqdXN0IHNraXAgaXQgLSBpdCB3aWxsIGxlYXZlIGEgYmxhbmsgc3BvdCBpbiB0aGUgYXVkaW8uXG5cdFx0aWYgKGRlYnVnQ2FsbGJhY2spXG5cdFx0XHRkZWJ1Z0NhbGxiYWNrKCdwbGFjZU5vdGUgc2tpcHBlZDogJytzb3VuZC5pbnN0cnVtZW50Kyc6Jytub3RlTmFtZSlcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG5cdH1cblxuXHRyZXR1cm4gbm90ZUJ1ZmZlclByb21pc2Vcblx0XHQudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHRcdC8vIGNyZWF0ZSBhdWRpbyBidWZmZXJcblx0XHRcdHZhciBzb3VyY2UgPSBvZmZsaW5lQ3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuXHRcdFx0c291cmNlLmJ1ZmZlciA9IHJlc3BvbnNlLmF1ZGlvQnVmZmVyO1xuXG5cdFx0XHQvLyBhZGQgZ2FpblxuXHRcdFx0Ly8gdm9sdW1lIGNhbiBiZSBiZXR3ZWVuIDEgdG8gMTI3LiBUaGlzIHRyYW5zbGF0aW9uIHRvIGdhaW4gaXMganVzdCB0cmlhbCBhbmQgZXJyb3IuXG5cdFx0XHQvLyBUaGUgc21hbGxlciB0aGUgZmlyc3QgbnVtYmVyLCB0aGUgbW9yZSBkeW5hbWljIHJhbmdlIGJldHdlZW4gdGhlIHF1aWV0ZXN0IHRvIGxvdWRlc3QuXG5cdFx0XHQvLyBUaGUgbGFyZ2VyIHRoZSBzZWNvbmQgbnVtYmVyLCB0aGUgbG91ZGVyIGl0IHdpbGwgYmUgaW4gZ2VuZXJhbC5cblx0XHRcdHZhciB2b2x1bWUgPSAoc291bmQudm9sdW1lIC8gOTYpICogdm9sdW1lTXVsdGlwbGllcjtcblx0XHRcdHNvdXJjZS5nYWluTm9kZSA9IG9mZmxpbmVDdHguY3JlYXRlR2FpbigpO1xuXG5cdFx0XHQvLyBhZGQgcGFuIGlmIHN1cHBvcnRlZCBhbmQgcHJlc2VudFxuXHRcdFx0aWYgKHNvdW5kLnBhbiAmJiBvZmZsaW5lQ3R4LmNyZWF0ZVN0ZXJlb1Bhbm5lcikge1xuXHRcdFx0XHRzb3VyY2UucGFuTm9kZSA9IG9mZmxpbmVDdHguY3JlYXRlU3RlcmVvUGFubmVyKCk7XG5cdFx0XHRcdHNvdXJjZS5wYW5Ob2RlLnBhbi5zZXRWYWx1ZUF0VGltZShzb3VuZC5wYW4sIDApO1xuXHRcdFx0fVxuXHRcdFx0c291cmNlLmdhaW5Ob2RlLmdhaW4udmFsdWUgPSB2b2x1bWU7IC8vIE1hdGgubWluKDIsIE1hdGgubWF4KDAsIHZvbHVtZSkpO1xuXHRcdFx0c291cmNlLmdhaW5Ob2RlLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoc291cmNlLmdhaW5Ob2RlLmdhaW4udmFsdWUsIGxlbik7XG5cdFx0XHRzb3VyY2UuZ2Fpbk5vZGUuZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgwLjAsIGxlbiArIGZhZGVUaW1lU2VjKTtcblxuXHRcdFx0aWYgKHNvdW5kLmNlbnRzKSB7XG5cdFx0XHRcdHNvdXJjZS5wbGF5YmFja1JhdGUudmFsdWUgPSBjZW50c1RvRmFjdG9yKHNvdW5kLmNlbnRzKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gY29ubmVjdCBhbGwgdGhlIG5vZGVzXG5cdFx0XHRpZiAoc291cmNlLnBhbk5vZGUpIHtcblx0XHRcdFx0c291cmNlLnBhbk5vZGUuY29ubmVjdChvZmZsaW5lQ3R4LmRlc3RpbmF0aW9uKTtcblx0XHRcdFx0c291cmNlLmdhaW5Ob2RlLmNvbm5lY3Qoc291cmNlLnBhbk5vZGUpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c291cmNlLmdhaW5Ob2RlLmNvbm5lY3Qob2ZmbGluZUN0eC5kZXN0aW5hdGlvbik7XG5cdFx0XHR9XG5cdFx0XHRzb3VyY2UuY29ubmVjdChzb3VyY2UuZ2Fpbk5vZGUpO1xuXG5cdFx0XHQvLyBEbyB0aGUgcHJvY2VzcyBvZiBjcmVhdGluZyB0aGUgc291bmQgYW5kIHBsYWNpbmcgaXQgaW4gdGhlIGJ1ZmZlclxuXHRcdFx0c291cmNlLnN0YXJ0KDApO1xuXG5cdFx0XHRpZiAoc291cmNlLm5vdGVPZmYpIHtcblx0XHRcdFx0c291cmNlLm5vdGVPZmYobGVuICsgZmFkZVRpbWVTZWMpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c291cmNlLnN0b3AobGVuICsgZmFkZVRpbWVTZWMpO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGZuUmVzb2x2ZTtcblx0XHRcdG9mZmxpbmVDdHgub25jb21wbGV0ZSA9IGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0aWYgKGUucmVuZGVyZWRCdWZmZXIgJiYgZS5yZW5kZXJlZEJ1ZmZlci5nZXRDaGFubmVsRGF0YSkgeyAvLyBJZiB0aGUgc3lzdGVtIGdldHMgb3ZlcmxvYWRlZCBvciB0aGVyZSBhcmUgbmV0d29yayBwcm9ibGVtcyB0aGVuIHRoaXMgY2FuIHN0YXJ0IGZhaWxpbmcuIEp1c3QgZHJvcCB0aGUgbm90ZSBpZiBzby5cblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHN0YXJ0QXJyYXkubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdC8vTWF0aC5mbG9vcihzdGFydEFycmF5W2ldICogc291bmQudGVtcG9NdWx0aXBsaWVyICogc2FtcGxlUmF0ZSlcblx0XHRcdFx0XHRcdHZhciBzdGFydCA9IHN0YXJ0QXJyYXlbaV0gKiBzb3VuZC50ZW1wb011bHRpcGxpZXI7XG5cdFx0XHRcdFx0XHRpZiAob2ZzTXMpXG5cdFx0XHRcdFx0XHRcdHN0YXJ0IC09b2ZzTXMvMTAwMDtcblx0XHRcdFx0XHRcdGlmIChzdGFydCA8IDApXG5cdFx0XHRcdFx0XHRcdHN0YXJ0ID0gMDsgLy8gSWYgdGhlIGl0ZW0gdGhhdCBpcyBtb3ZlZCBiYWNrIGlzIGF0IHRoZSB2ZXJ5IGJlZ2lubmluZyBvZiB0aGUgYnVmZmVyIHRoZW4gZG9uJ3QgbW92ZSBpdCBiYWNrLiBUbyBkbyB0aGF0IHdvdWxkIGJlIHRvIHB1c2ggZXZlcnl0aGluZyBlbHNlIGZvcndhcmQuIFRPRE8tUEVSOiB0aGlzIHNob3VsZCBwcm9iYWJseSBiZSBkb25lIGF0IHNvbWUgcG9pbnQgYnV0IHRoZW4gaXQgd291bGQgY2hhbmdlIHRpbWluZyBpbiBleGlzdGluZyBhcHBzLlxuXHRcdFx0XHRcdFx0c3RhcnQgPSBNYXRoLmZsb29yKHN0YXJ0KnNhbXBsZVJhdGUpO1xuXHRcdFx0XHRcdFx0Y29weVRvQ2hhbm5lbChvdXRwdXRBdWRpb0J1ZmZlciwgZS5yZW5kZXJlZEJ1ZmZlciwgc3RhcnQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZGVidWdDYWxsYmFjaylcblx0XHRcdFx0XHRkZWJ1Z0NhbGxiYWNrKCdwbGFjZU5vdGU6ICcrc291bmQuaW5zdHJ1bWVudCsnOicrbm90ZU5hbWUpXG5cdFx0XHRcdGZuUmVzb2x2ZSgpO1xuXHRcdFx0fTtcblx0XHRcdG9mZmxpbmVDdHguc3RhcnRSZW5kZXJpbmcoKTtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XG5cdFx0XHRcdGZuUmVzb2x2ZSA9IHJlc29sdmU7XG5cdFx0XHR9KTtcblx0XHR9KVxuXHRcdC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcblx0XHRcdGlmIChkZWJ1Z0NhbGxiYWNrKVxuXHRcdFx0XHRkZWJ1Z0NhbGxiYWNrKCdwbGFjZU5vdGUgY2F0Y2g6ICcrZXJyb3IubWVzc2FnZSlcblx0XHRcdHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcilcblx0XHR9KTtcbn1cblxudmFyIGNvcHlUb0NoYW5uZWwgPSBmdW5jdGlvbih0b0J1ZmZlciwgZnJvbUJ1ZmZlciwgc3RhcnQpIHtcblx0Zm9yICh2YXIgY2ggPSAwOyBjaCA8IDI7IGNoKyspIHtcblx0XHR2YXIgZnJvbURhdGEgPSBmcm9tQnVmZmVyLmdldENoYW5uZWxEYXRhKGNoKTtcblx0XHR2YXIgdG9EYXRhID0gdG9CdWZmZXIuZ2V0Q2hhbm5lbERhdGEoY2gpO1xuXG5cdFx0Ly8gTWl4IHRoZSBjdXJyZW50IG5vdGUgaW50byB0aGUgZXhpc3RpbmcgdHJhY2tcblx0XHRmb3IgKHZhciBuID0gMDsgbiA8IGZyb21EYXRhLmxlbmd0aDsgbisrKSB7XG5cdFx0XHR0b0RhdGFbbiArIHN0YXJ0XSArPSBmcm9tRGF0YVtuXTtcblx0XHR9XG5cdH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gcGxhY2VOb3RlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/place-note.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/play-event.js":
/*!****************************************************!*\
  !*** ./node_modules/abcjs/src/synth/play-event.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var SynthSequence = __webpack_require__(/*! ./synth-sequence */ \"(ssr)/./node_modules/abcjs/src/synth/synth-sequence.js\");\nvar CreateSynth = __webpack_require__(/*! ./create-synth */ \"(ssr)/./node_modules/abcjs/src/synth/create-synth.js\");\nvar activeAudioContext = __webpack_require__(/*! ./active-audio-context */ \"(ssr)/./node_modules/abcjs/src/synth/active-audio-context.js\");\n\nfunction playEvent(midiPitches, midiGracePitches, millisecondsPerMeasure, soundFontUrl, debugCallback) {\n\tvar sequence = new SynthSequence();\n\n\tfor (var i = 0; i < midiPitches.length; i++) {\n\t\tvar note = midiPitches[i];\n\t\tvar trackNum = sequence.addTrack();\n\t\tsequence.setInstrument(trackNum, note.instrument);\n\t\tif (i === 0 && midiGracePitches) {\n\t\t\tfor (var j = 0; j < midiGracePitches.length; j++) {\n\t\t\t\tvar grace = midiGracePitches[j];\n\t\t\t\tsequence.appendNote(trackNum, grace.pitch, 1 / 64, grace.volume, grace.cents);\n\t\t\t}\n\t\t}\n\t\tsequence.appendNote(trackNum, note.pitch, note.duration, note.volume, note.cents);\n\t}\n\n\tvar ac = activeAudioContext();\n\tif (ac.state === \"suspended\") {\n\t\treturn ac.resume().then(function () {\n\t\t\treturn doPlay(sequence, millisecondsPerMeasure, soundFontUrl, debugCallback);\n\t\t});\n\t} else {\n\t\treturn doPlay(sequence, millisecondsPerMeasure, soundFontUrl, debugCallback);\n\t}\n}\n\nfunction doPlay(sequence, millisecondsPerMeasure, soundFontUrl, debugCallback) {\n\tvar buffer = new CreateSynth();\n\treturn buffer.init({\n\t\tsequence: sequence,\n\t\tmillisecondsPerMeasure: millisecondsPerMeasure,\n\t\toptions: { soundFontUrl: soundFontUrl },\n\t\tdebugCallback: debugCallback,\n\t}).then(function () {\n\t\treturn buffer.prime();\n\t}).then(function () {\n\t\tbuffer.start();\n\t\treturn Promise.resolve();\n\t});\n}\n\nmodule.exports = playEvent;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL3BsYXktZXZlbnQuanMiLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CLG1CQUFPLENBQUMsZ0ZBQWtCO0FBQzlDLGtCQUFrQixtQkFBTyxDQUFDLDRFQUFnQjtBQUMxQyx5QkFBeUIsbUJBQU8sQ0FBQyw0RkFBd0I7O0FBRXpEO0FBQ0E7O0FBRUEsaUJBQWlCLHdCQUF3QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw2QkFBNkI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsNEJBQTRCO0FBQ3pDO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvc3ludGgvcGxheS1ldmVudC5qcz80YmY4Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBTeW50aFNlcXVlbmNlID0gcmVxdWlyZSgnLi9zeW50aC1zZXF1ZW5jZScpO1xudmFyIENyZWF0ZVN5bnRoID0gcmVxdWlyZSgnLi9jcmVhdGUtc3ludGgnKTtcbnZhciBhY3RpdmVBdWRpb0NvbnRleHQgPSByZXF1aXJlKFwiLi9hY3RpdmUtYXVkaW8tY29udGV4dFwiKTtcblxuZnVuY3Rpb24gcGxheUV2ZW50KG1pZGlQaXRjaGVzLCBtaWRpR3JhY2VQaXRjaGVzLCBtaWxsaXNlY29uZHNQZXJNZWFzdXJlLCBzb3VuZEZvbnRVcmwsIGRlYnVnQ2FsbGJhY2spIHtcblx0dmFyIHNlcXVlbmNlID0gbmV3IFN5bnRoU2VxdWVuY2UoKTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IG1pZGlQaXRjaGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIG5vdGUgPSBtaWRpUGl0Y2hlc1tpXTtcblx0XHR2YXIgdHJhY2tOdW0gPSBzZXF1ZW5jZS5hZGRUcmFjaygpO1xuXHRcdHNlcXVlbmNlLnNldEluc3RydW1lbnQodHJhY2tOdW0sIG5vdGUuaW5zdHJ1bWVudCk7XG5cdFx0aWYgKGkgPT09IDAgJiYgbWlkaUdyYWNlUGl0Y2hlcykge1xuXHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBtaWRpR3JhY2VQaXRjaGVzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHZhciBncmFjZSA9IG1pZGlHcmFjZVBpdGNoZXNbal07XG5cdFx0XHRcdHNlcXVlbmNlLmFwcGVuZE5vdGUodHJhY2tOdW0sIGdyYWNlLnBpdGNoLCAxIC8gNjQsIGdyYWNlLnZvbHVtZSwgZ3JhY2UuY2VudHMpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRzZXF1ZW5jZS5hcHBlbmROb3RlKHRyYWNrTnVtLCBub3RlLnBpdGNoLCBub3RlLmR1cmF0aW9uLCBub3RlLnZvbHVtZSwgbm90ZS5jZW50cyk7XG5cdH1cblxuXHR2YXIgYWMgPSBhY3RpdmVBdWRpb0NvbnRleHQoKTtcblx0aWYgKGFjLnN0YXRlID09PSBcInN1c3BlbmRlZFwiKSB7XG5cdFx0cmV0dXJuIGFjLnJlc3VtZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGRvUGxheShzZXF1ZW5jZSwgbWlsbGlzZWNvbmRzUGVyTWVhc3VyZSwgc291bmRGb250VXJsLCBkZWJ1Z0NhbGxiYWNrKTtcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gZG9QbGF5KHNlcXVlbmNlLCBtaWxsaXNlY29uZHNQZXJNZWFzdXJlLCBzb3VuZEZvbnRVcmwsIGRlYnVnQ2FsbGJhY2spO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGRvUGxheShzZXF1ZW5jZSwgbWlsbGlzZWNvbmRzUGVyTWVhc3VyZSwgc291bmRGb250VXJsLCBkZWJ1Z0NhbGxiYWNrKSB7XG5cdHZhciBidWZmZXIgPSBuZXcgQ3JlYXRlU3ludGgoKTtcblx0cmV0dXJuIGJ1ZmZlci5pbml0KHtcblx0XHRzZXF1ZW5jZTogc2VxdWVuY2UsXG5cdFx0bWlsbGlzZWNvbmRzUGVyTWVhc3VyZTogbWlsbGlzZWNvbmRzUGVyTWVhc3VyZSxcblx0XHRvcHRpb25zOiB7IHNvdW5kRm9udFVybDogc291bmRGb250VXJsIH0sXG5cdFx0ZGVidWdDYWxsYmFjazogZGVidWdDYWxsYmFjayxcblx0fSkudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIGJ1ZmZlci5wcmltZSgpO1xuXHR9KS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRidWZmZXIuc3RhcnQoKTtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG5cdH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBsYXlFdmVudDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/play-event.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/register-audio-context.js":
/*!****************************************************************!*\
  !*** ./node_modules/abcjs/src/synth/register-audio-context.js ***!
  \****************************************************************/
/***/ ((module) => {

eval("// Call this when it is safe for the abcjs to produce sound. This is after the first user gesture on the page.\n// If you call it with no parameters, then an AudioContext is created and stored.\n// If you call it with a parameter, that is used as an already created AudioContext.\n\nfunction registerAudioContext(ac) {\n\t// If one is passed in, that is the one to use even if there was already one created.\n\tif (ac)\n\t\twindow.abcjsAudioContext = ac;\n\telse {\n\t\t// no audio context passed in, so create it unless there is already one from before.\n\t\tif (!window.abcjsAudioContext) {\n\t\t\tvar AudioContext = window.AudioContext || window.webkitAudioContext;\n\t\t\tif (AudioContext)\n\t\t\t\twindow.abcjsAudioContext = new AudioContext();\n\t\t\telse\n\t\t\t\treturn false;\n\t\t}\n\t}\n\treturn window.abcjsAudioContext.state !== \"suspended\";\n}\n\nmodule.exports = registerAudioContext;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL3JlZ2lzdGVyLWF1ZGlvLWNvbnRleHQuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL3JlZ2lzdGVyLWF1ZGlvLWNvbnRleHQuanM/ZTg5OSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDYWxsIHRoaXMgd2hlbiBpdCBpcyBzYWZlIGZvciB0aGUgYWJjanMgdG8gcHJvZHVjZSBzb3VuZC4gVGhpcyBpcyBhZnRlciB0aGUgZmlyc3QgdXNlciBnZXN0dXJlIG9uIHRoZSBwYWdlLlxuLy8gSWYgeW91IGNhbGwgaXQgd2l0aCBubyBwYXJhbWV0ZXJzLCB0aGVuIGFuIEF1ZGlvQ29udGV4dCBpcyBjcmVhdGVkIGFuZCBzdG9yZWQuXG4vLyBJZiB5b3UgY2FsbCBpdCB3aXRoIGEgcGFyYW1ldGVyLCB0aGF0IGlzIHVzZWQgYXMgYW4gYWxyZWFkeSBjcmVhdGVkIEF1ZGlvQ29udGV4dC5cblxuZnVuY3Rpb24gcmVnaXN0ZXJBdWRpb0NvbnRleHQoYWMpIHtcblx0Ly8gSWYgb25lIGlzIHBhc3NlZCBpbiwgdGhhdCBpcyB0aGUgb25lIHRvIHVzZSBldmVuIGlmIHRoZXJlIHdhcyBhbHJlYWR5IG9uZSBjcmVhdGVkLlxuXHRpZiAoYWMpXG5cdFx0d2luZG93LmFiY2pzQXVkaW9Db250ZXh0ID0gYWM7XG5cdGVsc2Uge1xuXHRcdC8vIG5vIGF1ZGlvIGNvbnRleHQgcGFzc2VkIGluLCBzbyBjcmVhdGUgaXQgdW5sZXNzIHRoZXJlIGlzIGFscmVhZHkgb25lIGZyb20gYmVmb3JlLlxuXHRcdGlmICghd2luZG93LmFiY2pzQXVkaW9Db250ZXh0KSB7XG5cdFx0XHR2YXIgQXVkaW9Db250ZXh0ID0gd2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0O1xuXHRcdFx0aWYgKEF1ZGlvQ29udGV4dClcblx0XHRcdFx0d2luZG93LmFiY2pzQXVkaW9Db250ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cdHJldHVybiB3aW5kb3cuYWJjanNBdWRpb0NvbnRleHQuc3RhdGUgIT09IFwic3VzcGVuZGVkXCI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVnaXN0ZXJBdWRpb0NvbnRleHQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/register-audio-context.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/sounds-cache.js":
/*!******************************************************!*\
  !*** ./node_modules/abcjs/src/synth/sounds-cache.js ***!
  \******************************************************/
/***/ ((module) => {

eval("var soundsCache = {\n};\n\nmodule.exports = soundsCache;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL3NvdW5kcy1jYWNoZS5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL3NvdW5kcy1jYWNoZS5qcz8yNTI1Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBzb3VuZHNDYWNoZSA9IHtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gc291bmRzQ2FjaGU7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/sounds-cache.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/supports-audio.js":
/*!********************************************************!*\
  !*** ./node_modules/abcjs/src/synth/supports-audio.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var activeAudioContext = __webpack_require__(/*! ./active-audio-context */ \"(ssr)/./node_modules/abcjs/src/synth/active-audio-context.js\");\n\n//\n// Support for audio depends on three things: support for Promise, support for AudioContext, and support for AudioContext.resume.\n// Unfortunately, AudioContext.resume cannot be detected unless an AudioContext is created, and creating an AudioContext can't\n// be done until a user click, so there is no way to know for sure if audio is supported until the user tries.\n// We can get close, though - we can test for Promises and AudioContext - there are just a few evergreen browsers that supported\n// that before supporting resume, so we'll test what we can.\n\n// The best use of this routine is to call it before doing any audio related stuff to decide whether to bother.\n// But then, call it again after a user interaction to test for resume.\n\nfunction supportsAudio() {\n\tif (!window.Promise)\n\t\treturn false;\n\n\tif (!window.AudioContext &&\n\t\t!window.webkitAudioContext &&\n\t\t!navigator.mozAudioContext &&\n\t\t!navigator.msAudioContext)\n\t\treturn false;\n\n\tvar aac = activeAudioContext();\n\tif (aac)\n\t\treturn aac.resume !== undefined;\n}\n\nmodule.exports = supportsAudio;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL3N1cHBvcnRzLWF1ZGlvLmpzIiwibWFwcGluZ3MiOiJBQUFBLHlCQUF5QixtQkFBTyxDQUFDLDRGQUF3Qjs7QUFFekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvc3ludGgvc3VwcG9ydHMtYXVkaW8uanM/ZDFjNCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYWN0aXZlQXVkaW9Db250ZXh0ID0gcmVxdWlyZSgnLi9hY3RpdmUtYXVkaW8tY29udGV4dCcpO1xuXG4vL1xuLy8gU3VwcG9ydCBmb3IgYXVkaW8gZGVwZW5kcyBvbiB0aHJlZSB0aGluZ3M6IHN1cHBvcnQgZm9yIFByb21pc2UsIHN1cHBvcnQgZm9yIEF1ZGlvQ29udGV4dCwgYW5kIHN1cHBvcnQgZm9yIEF1ZGlvQ29udGV4dC5yZXN1bWUuXG4vLyBVbmZvcnR1bmF0ZWx5LCBBdWRpb0NvbnRleHQucmVzdW1lIGNhbm5vdCBiZSBkZXRlY3RlZCB1bmxlc3MgYW4gQXVkaW9Db250ZXh0IGlzIGNyZWF0ZWQsIGFuZCBjcmVhdGluZyBhbiBBdWRpb0NvbnRleHQgY2FuJ3Rcbi8vIGJlIGRvbmUgdW50aWwgYSB1c2VyIGNsaWNrLCBzbyB0aGVyZSBpcyBubyB3YXkgdG8ga25vdyBmb3Igc3VyZSBpZiBhdWRpbyBpcyBzdXBwb3J0ZWQgdW50aWwgdGhlIHVzZXIgdHJpZXMuXG4vLyBXZSBjYW4gZ2V0IGNsb3NlLCB0aG91Z2ggLSB3ZSBjYW4gdGVzdCBmb3IgUHJvbWlzZXMgYW5kIEF1ZGlvQ29udGV4dCAtIHRoZXJlIGFyZSBqdXN0IGEgZmV3IGV2ZXJncmVlbiBicm93c2VycyB0aGF0IHN1cHBvcnRlZFxuLy8gdGhhdCBiZWZvcmUgc3VwcG9ydGluZyByZXN1bWUsIHNvIHdlJ2xsIHRlc3Qgd2hhdCB3ZSBjYW4uXG5cbi8vIFRoZSBiZXN0IHVzZSBvZiB0aGlzIHJvdXRpbmUgaXMgdG8gY2FsbCBpdCBiZWZvcmUgZG9pbmcgYW55IGF1ZGlvIHJlbGF0ZWQgc3R1ZmYgdG8gZGVjaWRlIHdoZXRoZXIgdG8gYm90aGVyLlxuLy8gQnV0IHRoZW4sIGNhbGwgaXQgYWdhaW4gYWZ0ZXIgYSB1c2VyIGludGVyYWN0aW9uIHRvIHRlc3QgZm9yIHJlc3VtZS5cblxuZnVuY3Rpb24gc3VwcG9ydHNBdWRpbygpIHtcblx0aWYgKCF3aW5kb3cuUHJvbWlzZSlcblx0XHRyZXR1cm4gZmFsc2U7XG5cblx0aWYgKCF3aW5kb3cuQXVkaW9Db250ZXh0ICYmXG5cdFx0IXdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQgJiZcblx0XHQhbmF2aWdhdG9yLm1vekF1ZGlvQ29udGV4dCAmJlxuXHRcdCFuYXZpZ2F0b3IubXNBdWRpb0NvbnRleHQpXG5cdFx0cmV0dXJuIGZhbHNlO1xuXG5cdHZhciBhYWMgPSBhY3RpdmVBdWRpb0NvbnRleHQoKTtcblx0aWYgKGFhYylcblx0XHRyZXR1cm4gYWFjLnJlc3VtZSAhPT0gdW5kZWZpbmVkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN1cHBvcnRzQXVkaW87XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/supports-audio.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/synth-controller.js":
/*!**********************************************************!*\
  !*** ./node_modules/abcjs/src/synth/synth-controller.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var CreateSynthControl = __webpack_require__(/*! ./create-synth-control */ \"(ssr)/./node_modules/abcjs/src/synth/create-synth-control.js\");\nvar CreateSynth = __webpack_require__(/*! ./create-synth */ \"(ssr)/./node_modules/abcjs/src/synth/create-synth.js\");\nvar TimingCallbacks = __webpack_require__(/*! ../api/abc_timing_callbacks */ \"(ssr)/./node_modules/abcjs/src/api/abc_timing_callbacks.js\");\nvar activeAudioContext = __webpack_require__(/*! ./active-audio-context */ \"(ssr)/./node_modules/abcjs/src/synth/active-audio-context.js\");\n\nfunction SynthController() {\n\tvar self = this;\n\tself.warp = 100;\n\tself.cursorControl = null;\n\tself.visualObj = null;\n\tself.timer = null;\n\tself.midiBuffer = null;\n\tself.options = null;\n\tself.currentTempo = null;\n\tself.control = null;\n\tself.isLooping = false;\n\tself.isStarted = false;\n\tself.isLoaded = false;\n\tself.isLoading = false;\n\n\tself.load = function (selector, cursorControl, visualOptions) {\n\t\tif (!visualOptions)\n\t\t\tvisualOptions = {};\n\t\tif (visualOptions.displayPlay === undefined)\n\t\t\tvisualOptions.displayPlay = true\n\t\tif (visualOptions.displayProgress === undefined)\n\t\t\tvisualOptions.displayProgress = true\n\t\tself.control = new CreateSynthControl(selector, {\n\t\t\tloopHandler: visualOptions.displayLoop ? self.toggleLoop : undefined,\n\t\t\trestartHandler: visualOptions.displayRestart ? self.restart : undefined,\n\t\t\tplayPromiseHandler: visualOptions.displayPlay ? self.play : undefined,\n\t\t\tprogressHandler: visualOptions.displayProgress ? self.randomAccess : undefined,\n\t\t\twarpHandler: visualOptions.displayWarp ? self.onWarp : undefined,\n\t\t\tafterResume: self.init\n\t\t});\n\t\tself.cursorControl = cursorControl;\n\t\tself.disable(true);\n\t};\n\n\tself.disable = function(isDisabled) {\n\t\tif (self.control)\n\t\t\tself.control.disable(isDisabled);\n\t};\n\n\tself.setTune = function(visualObj, userAction, audioParams) {\n\t\tself.visualObj = visualObj;\n\t\tself.disable(false);\n\t\tself.options = audioParams ? audioParams : {};\n\n\t\tif (self.control) {\n\t\t\tself.pause();\n\t\t\tself.setProgress(0, 1);\n\t\t\tself.control.resetAll();\n\t\t\tself.restart();\n\t\t\tself.isStarted = false;\n\t\t}\n\t\tself.isLooping = false;\n\n\t\tif (userAction)\n\t\t\treturn self.go();\n\t\telse {\n\t\t\treturn Promise.resolve({status: \"no-audio-context\"});\n\t\t}\n\t};\n\n\tself.go = function () {\n\t\tself.isLoading = true;\n\t\tvar millisecondsPerMeasure = self.visualObj.millisecondsPerMeasure() * 100 / self.warp;\n\t\tself.currentTempo = Math.round(self.visualObj.getBeatsPerMeasure() / millisecondsPerMeasure * 60000);\n\t\tif (self.control)\n\t\t\tself.control.setTempo(self.currentTempo);\n\t\tself.percent = 0;\n\t\tvar loadingResponse;\n\n\t\tif (!self.midiBuffer)\n\t\t\tself.midiBuffer = new CreateSynth();\n\t\treturn activeAudioContext().resume().then(function (response) {\n\t\t\treturn self.midiBuffer.init({\n\t\t\t\tvisualObj: self.visualObj,\n\t\t\t\toptions: self.options,\n\t\t\t\tmillisecondsPerMeasure: millisecondsPerMeasure\n\t\t\t});\n\t\t}).then(function (response) {\n\t\t\tloadingResponse = response;\n\t\t\treturn self.midiBuffer.prime();\n\t\t}).then(function () {\n\t\t\tvar subdivisions = 16;\n\t\t\tif (self.cursorControl &&\n\t\t\t\tself.cursorControl.beatSubdivisions !== undefined &&\n\t\t\t\tparseInt(self.cursorControl.beatSubdivisions, 10) >= 1 &&\n\t\t\t\tparseInt(self.cursorControl.beatSubdivisions, 10) <= 64)\n\t\t\t\tsubdivisions = parseInt(self.cursorControl.beatSubdivisions, 10);\n\n\t\t\t// Need to create the TimingCallbacks after priming the midi so that the midi data is available for the callbacks.\n\t\t\tself.timer = new TimingCallbacks(self.visualObj, {\n\t\t\t\tbeatCallback: self.beatCallback,\n\t\t\t\teventCallback: self.eventCallback,\n\t\t\t\tlineEndCallback: self.lineEndCallback,\n\t\t\t\tqpm: self.currentTempo,\n\n\t\t\t\textraMeasuresAtBeginning: self.cursorControl ? self.cursorControl.extraMeasuresAtBeginning : undefined,\n\t\t\t\tlineEndAnticipation: self.cursorControl ? self.cursorControl.lineEndAnticipation : 0,\n\t\t\t\tbeatSubdivisions: subdivisions,\n\t\t\t});\n\t\t\tif (self.cursorControl && self.cursorControl.onReady && typeof self.cursorControl.onReady  === 'function')\n\t\t\t\tself.cursorControl.onReady(self);\n\t\t\tself.isLoaded = true;\n\t\t\tself.isLoading = false;\n\t\t\treturn Promise.resolve({ status: \"created\", notesStatus: loadingResponse });\n\t\t});\n\t};\n\n\tself.destroy = function () {\n\t\tif (self.timer) {\n\t\t\tself.timer.reset();\n\t\t\tself.timer.stop();\n\t\t\tself.timer = null;\n\t\t}\n\t\tif (self.midiBuffer) {\n\t\t\tself.midiBuffer.stop();\n\t\t\tself.midiBuffer = null;\n\t\t}\n\t\tself.setProgress(0, 1);\n\t\tif (self.control)\n\t\t\tself.control.resetAll();\n\t};\n\n\tself.play = function () {\n\t\treturn self.runWhenReady(self._play, undefined);\n\t};\n\n\tfunction sleep(ms) {\n\t\treturn new Promise(function (resolve) {\n\t\t\tsetTimeout(resolve, ms)\n\t\t});\n\t}\n\n\tself.runWhenReady = function(fn, arg1) {\n\t\tif (!self.visualObj)\n\t\t\treturn Promise.resolve({status: \"loading\"});\n\t\tif (self.isLoading) {\n\t\t\t// Some other promise is waiting for the tune to be loaded, so just wait.\n\t\t\treturn sleep(500).then(function() {\n\t\t\t\tif (self.isLoading)\n\t\t\t\t\treturn self.runWhenReady(fn, arg1);\n\t\t\t\treturn fn(arg1);\n\t\t\t})\n\t\t} else if (!self.isLoaded) {\n\t\t\treturn self.go().then(function () {\n\t\t\t\treturn fn(arg1);\n\t\t\t});\n\t\t} else {\n\t\t\treturn fn(arg1);\n\t\t}\n\t};\n\n\tself._play = function () {\n\t\treturn activeAudioContext().resume().then(function () {\n\t\t\tself.isStarted = !self.isStarted;\n\t\t\tif (self.isStarted) {\n\t\t\t\tif (self.cursorControl && self.cursorControl.onStart && typeof self.cursorControl.onStart === 'function')\n\t\t\t\t\tself.cursorControl.onStart();\n\t\t\t\tself.midiBuffer.start();\n\t\t\t\tself.timer.start(self.percent);\n\t\t\t\tif (self.control)\n\t\t\t\t\tself.control.pushPlay(true);\n\t\t\t} else {\n\t\t\t\tself.pause();\n\t\t\t}\n\t\t\treturn Promise.resolve({status: \"ok\"});\n\t\t})\n\t};\n\n\tself.pause = function() {\n\t\tif (self.timer) {\n\t\t\tself.timer.pause();\n\t\t\tself.midiBuffer.pause();\n\t\t\tif (self.control)\n\t\t\t\tself.control.pushPlay(false);\n\t\t}\n\t};\n\n\tself.toggleLoop = function () {\n\t\tself.isLooping = !self.isLooping;\n\t\tif (self.control)\n\t\t\tself.control.pushLoop(self.isLooping);\n\t};\n\n\tself.restart = function () {\n\t\tif (self.timer) {\n\t\t\tself.timer.setProgress(0);\n\t\t\tself.midiBuffer.seek(0);\n\t\t}\n\t};\n\n\tself.randomAccess = function (ev) {\n\t\treturn self.runWhenReady(self._randomAccess, ev);\n\t};\n\n\tself._randomAccess = function (ev) {\n\t\tvar background = (ev.target.classList.contains('abcjs-midi-progress-indicator')) ? ev.target.parentNode : ev.target;\n\t\tvar percent = (ev.x - background.getBoundingClientRect().left) / background.offsetWidth;\n\t\tif (percent < 0)\n\t\t\tpercent = 0;\n\t\tif (percent > 1)\n\t\t\tpercent = 1;\n\t\tself.seek(percent);\n\t\treturn Promise.resolve({status: \"ok\"});\n\t};\n\n\tself.seek = function (percent, units) {\n\t\tif (self.timer && self.midiBuffer) {\n\t\t\tself.timer.setProgress(percent, units);\n\t\t\tself.midiBuffer.seek(percent, units);\n\t\t}\n\t};\n\n\tself.setWarp = function (newWarp) {\n\t\tif (parseInt(newWarp, 10) > 0) {\n\t\t\tself.warp = parseInt(newWarp, 10);\n\t\t\tvar wasPlaying = self.isStarted;\n\t\t\tvar startPercent = self.percent;\n\t\t\tself.destroy();\n\t\t\tself.isStarted = false;\n\t\t\treturn self.go().then(function () {\n\t\t\t\tself.setProgress(startPercent, self.midiBuffer.duration * 1000);\n\t\t\t\tif (self.control)\n\t\t\t\t\tself.control.setWarp(self.currentTempo, self.warp);\n\t\t\t\tif (wasPlaying) {\n\t\t\t\t\treturn self.play().then(function () {\n\t\t\t\t\t\tself.seek(startPercent);\n\t\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tself.seek(startPercent);\n\t\t\t\treturn Promise.resolve();\n\t\t\t});\n\t\t}\n\t\treturn Promise.resolve();\n\t};\n\n\tself.onWarp = function (ev) {\n\t\tvar newWarp = ev.target.value;\n\t\treturn self.setWarp(newWarp);\n\t};\n\n\tself.setProgress = function (percent, totalTime) {\n\t\tself.percent = percent;\n\t\tif (self.control)\n\t\t\tself.control.setProgress(percent, totalTime);\n\t};\n\n\tself.finished = function () {\n\t\tself.timer.reset();\n\t\tif (self.isLooping) {\n\t\t\tself.timer.start(0);\n\t\t\tself.midiBuffer.finished();\n\t\t\tself.midiBuffer.start();\n\t\t\treturn \"continue\";\n\t\t} else {\n\t\t\tself.timer.stop();\n\t\t\tif (self.isStarted) {\n\t\t\t\tif (self.control)\n\t\t\t\t\tself.control.pushPlay(false);\n\t\t\t\tself.isStarted = false;\n\t\t\t\tself.midiBuffer.finished();\n\t\t\t\tif (self.cursorControl && self.cursorControl.onFinished && typeof self.cursorControl.onFinished  === 'function')\n\t\t\t\t\tself.cursorControl.onFinished();\n\t\t\t\tself.setProgress(0, 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tself.beatCallback = function (beatNumber, totalBeats, totalTime, position) {\n\t\tvar percent = beatNumber / totalBeats;\n\t\tself.setProgress(percent, totalTime);\n\t\tif (self.cursorControl && self.cursorControl.onBeat && typeof self.cursorControl.onBeat  === 'function')\n\t\t\tself.cursorControl.onBeat(beatNumber, totalBeats, totalTime, position);\n\t};\n\n\tself.eventCallback = function (event) {\n\t\tif (event) {\n\t\t\tif (self.cursorControl && self.cursorControl.onEvent && typeof self.cursorControl.onEvent  === 'function')\n\t\t\t\tself.cursorControl.onEvent(event);\n\t\t} else {\n\t\t\treturn self.finished();\n\t\t}\n\t};\n\n\tself.lineEndCallback = function (lineEvent, leftEvent) {\n\t\tif (self.cursorControl && self.cursorControl.onLineEnd && typeof self.cursorControl.onLineEnd  === 'function')\n\t\t\tself.cursorControl.onLineEnd(lineEvent, leftEvent);\n\t};\n\n\tself.getUrl = function () {\n\t\treturn self.midiBuffer.download();\n\t};\n\n\tself.download = function(fileName) {\n\t\tvar url = self.getUrl();\n\t\tvar link = document.createElement('a');\n\t\tdocument.body.appendChild(link);\n\t\tlink.setAttribute(\"style\",\"display: none;\");\n\t\tlink.href = url;\n\t\tlink.download = fileName ? fileName : 'output.wav';\n\t\tlink.click();\n\t\twindow.URL.revokeObjectURL(url);\n\t\tdocument.body.removeChild(link);\n\t};\n}\n\nmodule.exports = SynthController;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL3N5bnRoLWNvbnRyb2xsZXIuanMiLCJtYXBwaW5ncyI6IkFBQUEseUJBQXlCLG1CQUFPLENBQUMsNEZBQXdCO0FBQ3pELGtCQUFrQixtQkFBTyxDQUFDLDRFQUFnQjtBQUMxQyxzQkFBc0IsbUJBQU8sQ0FBQywrRkFBNkI7QUFDM0QseUJBQXlCLG1CQUFPLENBQUMsNEZBQXdCOztBQUV6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDJCQUEyQjtBQUN0RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsaURBQWlEO0FBQzdFLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBLDJCQUEyQixrQkFBa0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDJCQUEyQixhQUFhO0FBQ3hDLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGFBQWE7QUFDdkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL3N5bnRoLWNvbnRyb2xsZXIuanM/MGRjZSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQ3JlYXRlU3ludGhDb250cm9sID0gcmVxdWlyZSgnLi9jcmVhdGUtc3ludGgtY29udHJvbCcpO1xudmFyIENyZWF0ZVN5bnRoID0gcmVxdWlyZSgnLi9jcmVhdGUtc3ludGgnKTtcbnZhciBUaW1pbmdDYWxsYmFja3MgPSByZXF1aXJlKCcuLi9hcGkvYWJjX3RpbWluZ19jYWxsYmFja3MnKTtcbnZhciBhY3RpdmVBdWRpb0NvbnRleHQgPSByZXF1aXJlKCcuL2FjdGl2ZS1hdWRpby1jb250ZXh0Jyk7XG5cbmZ1bmN0aW9uIFN5bnRoQ29udHJvbGxlcigpIHtcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHRzZWxmLndhcnAgPSAxMDA7XG5cdHNlbGYuY3Vyc29yQ29udHJvbCA9IG51bGw7XG5cdHNlbGYudmlzdWFsT2JqID0gbnVsbDtcblx0c2VsZi50aW1lciA9IG51bGw7XG5cdHNlbGYubWlkaUJ1ZmZlciA9IG51bGw7XG5cdHNlbGYub3B0aW9ucyA9IG51bGw7XG5cdHNlbGYuY3VycmVudFRlbXBvID0gbnVsbDtcblx0c2VsZi5jb250cm9sID0gbnVsbDtcblx0c2VsZi5pc0xvb3BpbmcgPSBmYWxzZTtcblx0c2VsZi5pc1N0YXJ0ZWQgPSBmYWxzZTtcblx0c2VsZi5pc0xvYWRlZCA9IGZhbHNlO1xuXHRzZWxmLmlzTG9hZGluZyA9IGZhbHNlO1xuXG5cdHNlbGYubG9hZCA9IGZ1bmN0aW9uIChzZWxlY3RvciwgY3Vyc29yQ29udHJvbCwgdmlzdWFsT3B0aW9ucykge1xuXHRcdGlmICghdmlzdWFsT3B0aW9ucylcblx0XHRcdHZpc3VhbE9wdGlvbnMgPSB7fTtcblx0XHRpZiAodmlzdWFsT3B0aW9ucy5kaXNwbGF5UGxheSA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0dmlzdWFsT3B0aW9ucy5kaXNwbGF5UGxheSA9IHRydWVcblx0XHRpZiAodmlzdWFsT3B0aW9ucy5kaXNwbGF5UHJvZ3Jlc3MgPT09IHVuZGVmaW5lZClcblx0XHRcdHZpc3VhbE9wdGlvbnMuZGlzcGxheVByb2dyZXNzID0gdHJ1ZVxuXHRcdHNlbGYuY29udHJvbCA9IG5ldyBDcmVhdGVTeW50aENvbnRyb2woc2VsZWN0b3IsIHtcblx0XHRcdGxvb3BIYW5kbGVyOiB2aXN1YWxPcHRpb25zLmRpc3BsYXlMb29wID8gc2VsZi50b2dnbGVMb29wIDogdW5kZWZpbmVkLFxuXHRcdFx0cmVzdGFydEhhbmRsZXI6IHZpc3VhbE9wdGlvbnMuZGlzcGxheVJlc3RhcnQgPyBzZWxmLnJlc3RhcnQgOiB1bmRlZmluZWQsXG5cdFx0XHRwbGF5UHJvbWlzZUhhbmRsZXI6IHZpc3VhbE9wdGlvbnMuZGlzcGxheVBsYXkgPyBzZWxmLnBsYXkgOiB1bmRlZmluZWQsXG5cdFx0XHRwcm9ncmVzc0hhbmRsZXI6IHZpc3VhbE9wdGlvbnMuZGlzcGxheVByb2dyZXNzID8gc2VsZi5yYW5kb21BY2Nlc3MgOiB1bmRlZmluZWQsXG5cdFx0XHR3YXJwSGFuZGxlcjogdmlzdWFsT3B0aW9ucy5kaXNwbGF5V2FycCA/IHNlbGYub25XYXJwIDogdW5kZWZpbmVkLFxuXHRcdFx0YWZ0ZXJSZXN1bWU6IHNlbGYuaW5pdFxuXHRcdH0pO1xuXHRcdHNlbGYuY3Vyc29yQ29udHJvbCA9IGN1cnNvckNvbnRyb2w7XG5cdFx0c2VsZi5kaXNhYmxlKHRydWUpO1xuXHR9O1xuXG5cdHNlbGYuZGlzYWJsZSA9IGZ1bmN0aW9uKGlzRGlzYWJsZWQpIHtcblx0XHRpZiAoc2VsZi5jb250cm9sKVxuXHRcdFx0c2VsZi5jb250cm9sLmRpc2FibGUoaXNEaXNhYmxlZCk7XG5cdH07XG5cblx0c2VsZi5zZXRUdW5lID0gZnVuY3Rpb24odmlzdWFsT2JqLCB1c2VyQWN0aW9uLCBhdWRpb1BhcmFtcykge1xuXHRcdHNlbGYudmlzdWFsT2JqID0gdmlzdWFsT2JqO1xuXHRcdHNlbGYuZGlzYWJsZShmYWxzZSk7XG5cdFx0c2VsZi5vcHRpb25zID0gYXVkaW9QYXJhbXMgPyBhdWRpb1BhcmFtcyA6IHt9O1xuXG5cdFx0aWYgKHNlbGYuY29udHJvbCkge1xuXHRcdFx0c2VsZi5wYXVzZSgpO1xuXHRcdFx0c2VsZi5zZXRQcm9ncmVzcygwLCAxKTtcblx0XHRcdHNlbGYuY29udHJvbC5yZXNldEFsbCgpO1xuXHRcdFx0c2VsZi5yZXN0YXJ0KCk7XG5cdFx0XHRzZWxmLmlzU3RhcnRlZCA9IGZhbHNlO1xuXHRcdH1cblx0XHRzZWxmLmlzTG9vcGluZyA9IGZhbHNlO1xuXG5cdFx0aWYgKHVzZXJBY3Rpb24pXG5cdFx0XHRyZXR1cm4gc2VsZi5nbygpO1xuXHRcdGVsc2Uge1xuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSh7c3RhdHVzOiBcIm5vLWF1ZGlvLWNvbnRleHRcIn0pO1xuXHRcdH1cblx0fTtcblxuXHRzZWxmLmdvID0gZnVuY3Rpb24gKCkge1xuXHRcdHNlbGYuaXNMb2FkaW5nID0gdHJ1ZTtcblx0XHR2YXIgbWlsbGlzZWNvbmRzUGVyTWVhc3VyZSA9IHNlbGYudmlzdWFsT2JqLm1pbGxpc2Vjb25kc1Blck1lYXN1cmUoKSAqIDEwMCAvIHNlbGYud2FycDtcblx0XHRzZWxmLmN1cnJlbnRUZW1wbyA9IE1hdGgucm91bmQoc2VsZi52aXN1YWxPYmouZ2V0QmVhdHNQZXJNZWFzdXJlKCkgLyBtaWxsaXNlY29uZHNQZXJNZWFzdXJlICogNjAwMDApO1xuXHRcdGlmIChzZWxmLmNvbnRyb2wpXG5cdFx0XHRzZWxmLmNvbnRyb2wuc2V0VGVtcG8oc2VsZi5jdXJyZW50VGVtcG8pO1xuXHRcdHNlbGYucGVyY2VudCA9IDA7XG5cdFx0dmFyIGxvYWRpbmdSZXNwb25zZTtcblxuXHRcdGlmICghc2VsZi5taWRpQnVmZmVyKVxuXHRcdFx0c2VsZi5taWRpQnVmZmVyID0gbmV3IENyZWF0ZVN5bnRoKCk7XG5cdFx0cmV0dXJuIGFjdGl2ZUF1ZGlvQ29udGV4dCgpLnJlc3VtZSgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0XHRyZXR1cm4gc2VsZi5taWRpQnVmZmVyLmluaXQoe1xuXHRcdFx0XHR2aXN1YWxPYmo6IHNlbGYudmlzdWFsT2JqLFxuXHRcdFx0XHRvcHRpb25zOiBzZWxmLm9wdGlvbnMsXG5cdFx0XHRcdG1pbGxpc2Vjb25kc1Blck1lYXN1cmU6IG1pbGxpc2Vjb25kc1Blck1lYXN1cmVcblx0XHRcdH0pO1xuXHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0XHRsb2FkaW5nUmVzcG9uc2UgPSByZXNwb25zZTtcblx0XHRcdHJldHVybiBzZWxmLm1pZGlCdWZmZXIucHJpbWUoKTtcblx0XHR9KS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBzdWJkaXZpc2lvbnMgPSAxNjtcblx0XHRcdGlmIChzZWxmLmN1cnNvckNvbnRyb2wgJiZcblx0XHRcdFx0c2VsZi5jdXJzb3JDb250cm9sLmJlYXRTdWJkaXZpc2lvbnMgIT09IHVuZGVmaW5lZCAmJlxuXHRcdFx0XHRwYXJzZUludChzZWxmLmN1cnNvckNvbnRyb2wuYmVhdFN1YmRpdmlzaW9ucywgMTApID49IDEgJiZcblx0XHRcdFx0cGFyc2VJbnQoc2VsZi5jdXJzb3JDb250cm9sLmJlYXRTdWJkaXZpc2lvbnMsIDEwKSA8PSA2NClcblx0XHRcdFx0c3ViZGl2aXNpb25zID0gcGFyc2VJbnQoc2VsZi5jdXJzb3JDb250cm9sLmJlYXRTdWJkaXZpc2lvbnMsIDEwKTtcblxuXHRcdFx0Ly8gTmVlZCB0byBjcmVhdGUgdGhlIFRpbWluZ0NhbGxiYWNrcyBhZnRlciBwcmltaW5nIHRoZSBtaWRpIHNvIHRoYXQgdGhlIG1pZGkgZGF0YSBpcyBhdmFpbGFibGUgZm9yIHRoZSBjYWxsYmFja3MuXG5cdFx0XHRzZWxmLnRpbWVyID0gbmV3IFRpbWluZ0NhbGxiYWNrcyhzZWxmLnZpc3VhbE9iaiwge1xuXHRcdFx0XHRiZWF0Q2FsbGJhY2s6IHNlbGYuYmVhdENhbGxiYWNrLFxuXHRcdFx0XHRldmVudENhbGxiYWNrOiBzZWxmLmV2ZW50Q2FsbGJhY2ssXG5cdFx0XHRcdGxpbmVFbmRDYWxsYmFjazogc2VsZi5saW5lRW5kQ2FsbGJhY2ssXG5cdFx0XHRcdHFwbTogc2VsZi5jdXJyZW50VGVtcG8sXG5cblx0XHRcdFx0ZXh0cmFNZWFzdXJlc0F0QmVnaW5uaW5nOiBzZWxmLmN1cnNvckNvbnRyb2wgPyBzZWxmLmN1cnNvckNvbnRyb2wuZXh0cmFNZWFzdXJlc0F0QmVnaW5uaW5nIDogdW5kZWZpbmVkLFxuXHRcdFx0XHRsaW5lRW5kQW50aWNpcGF0aW9uOiBzZWxmLmN1cnNvckNvbnRyb2wgPyBzZWxmLmN1cnNvckNvbnRyb2wubGluZUVuZEFudGljaXBhdGlvbiA6IDAsXG5cdFx0XHRcdGJlYXRTdWJkaXZpc2lvbnM6IHN1YmRpdmlzaW9ucyxcblx0XHRcdH0pO1xuXHRcdFx0aWYgKHNlbGYuY3Vyc29yQ29udHJvbCAmJiBzZWxmLmN1cnNvckNvbnRyb2wub25SZWFkeSAmJiB0eXBlb2Ygc2VsZi5jdXJzb3JDb250cm9sLm9uUmVhZHkgID09PSAnZnVuY3Rpb24nKVxuXHRcdFx0XHRzZWxmLmN1cnNvckNvbnRyb2wub25SZWFkeShzZWxmKTtcblx0XHRcdHNlbGYuaXNMb2FkZWQgPSB0cnVlO1xuXHRcdFx0c2VsZi5pc0xvYWRpbmcgPSBmYWxzZTtcblx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoeyBzdGF0dXM6IFwiY3JlYXRlZFwiLCBub3Rlc1N0YXR1czogbG9hZGluZ1Jlc3BvbnNlIH0pO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHNlbGYuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoc2VsZi50aW1lcikge1xuXHRcdFx0c2VsZi50aW1lci5yZXNldCgpO1xuXHRcdFx0c2VsZi50aW1lci5zdG9wKCk7XG5cdFx0XHRzZWxmLnRpbWVyID0gbnVsbDtcblx0XHR9XG5cdFx0aWYgKHNlbGYubWlkaUJ1ZmZlcikge1xuXHRcdFx0c2VsZi5taWRpQnVmZmVyLnN0b3AoKTtcblx0XHRcdHNlbGYubWlkaUJ1ZmZlciA9IG51bGw7XG5cdFx0fVxuXHRcdHNlbGYuc2V0UHJvZ3Jlc3MoMCwgMSk7XG5cdFx0aWYgKHNlbGYuY29udHJvbClcblx0XHRcdHNlbGYuY29udHJvbC5yZXNldEFsbCgpO1xuXHR9O1xuXG5cdHNlbGYucGxheSA9IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gc2VsZi5ydW5XaGVuUmVhZHkoc2VsZi5fcGxheSwgdW5kZWZpbmVkKTtcblx0fTtcblxuXHRmdW5jdGlvbiBzbGVlcChtcykge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuXHRcdFx0c2V0VGltZW91dChyZXNvbHZlLCBtcylcblx0XHR9KTtcblx0fVxuXG5cdHNlbGYucnVuV2hlblJlYWR5ID0gZnVuY3Rpb24oZm4sIGFyZzEpIHtcblx0XHRpZiAoIXNlbGYudmlzdWFsT2JqKVxuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSh7c3RhdHVzOiBcImxvYWRpbmdcIn0pO1xuXHRcdGlmIChzZWxmLmlzTG9hZGluZykge1xuXHRcdFx0Ly8gU29tZSBvdGhlciBwcm9taXNlIGlzIHdhaXRpbmcgZm9yIHRoZSB0dW5lIHRvIGJlIGxvYWRlZCwgc28ganVzdCB3YWl0LlxuXHRcdFx0cmV0dXJuIHNsZWVwKDUwMCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKHNlbGYuaXNMb2FkaW5nKVxuXHRcdFx0XHRcdHJldHVybiBzZWxmLnJ1bldoZW5SZWFkeShmbiwgYXJnMSk7XG5cdFx0XHRcdHJldHVybiBmbihhcmcxKTtcblx0XHRcdH0pXG5cdFx0fSBlbHNlIGlmICghc2VsZi5pc0xvYWRlZCkge1xuXHRcdFx0cmV0dXJuIHNlbGYuZ28oKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0cmV0dXJuIGZuKGFyZzEpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBmbihhcmcxKTtcblx0XHR9XG5cdH07XG5cblx0c2VsZi5fcGxheSA9IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gYWN0aXZlQXVkaW9Db250ZXh0KCkucmVzdW1lKCkudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRzZWxmLmlzU3RhcnRlZCA9ICFzZWxmLmlzU3RhcnRlZDtcblx0XHRcdGlmIChzZWxmLmlzU3RhcnRlZCkge1xuXHRcdFx0XHRpZiAoc2VsZi5jdXJzb3JDb250cm9sICYmIHNlbGYuY3Vyc29yQ29udHJvbC5vblN0YXJ0ICYmIHR5cGVvZiBzZWxmLmN1cnNvckNvbnRyb2wub25TdGFydCA9PT0gJ2Z1bmN0aW9uJylcblx0XHRcdFx0XHRzZWxmLmN1cnNvckNvbnRyb2wub25TdGFydCgpO1xuXHRcdFx0XHRzZWxmLm1pZGlCdWZmZXIuc3RhcnQoKTtcblx0XHRcdFx0c2VsZi50aW1lci5zdGFydChzZWxmLnBlcmNlbnQpO1xuXHRcdFx0XHRpZiAoc2VsZi5jb250cm9sKVxuXHRcdFx0XHRcdHNlbGYuY29udHJvbC5wdXNoUGxheSh0cnVlKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNlbGYucGF1c2UoKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoe3N0YXR1czogXCJva1wifSk7XG5cdFx0fSlcblx0fTtcblxuXHRzZWxmLnBhdXNlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHNlbGYudGltZXIpIHtcblx0XHRcdHNlbGYudGltZXIucGF1c2UoKTtcblx0XHRcdHNlbGYubWlkaUJ1ZmZlci5wYXVzZSgpO1xuXHRcdFx0aWYgKHNlbGYuY29udHJvbClcblx0XHRcdFx0c2VsZi5jb250cm9sLnB1c2hQbGF5KGZhbHNlKTtcblx0XHR9XG5cdH07XG5cblx0c2VsZi50b2dnbGVMb29wID0gZnVuY3Rpb24gKCkge1xuXHRcdHNlbGYuaXNMb29waW5nID0gIXNlbGYuaXNMb29waW5nO1xuXHRcdGlmIChzZWxmLmNvbnRyb2wpXG5cdFx0XHRzZWxmLmNvbnRyb2wucHVzaExvb3Aoc2VsZi5pc0xvb3BpbmcpO1xuXHR9O1xuXG5cdHNlbGYucmVzdGFydCA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoc2VsZi50aW1lcikge1xuXHRcdFx0c2VsZi50aW1lci5zZXRQcm9ncmVzcygwKTtcblx0XHRcdHNlbGYubWlkaUJ1ZmZlci5zZWVrKDApO1xuXHRcdH1cblx0fTtcblxuXHRzZWxmLnJhbmRvbUFjY2VzcyA9IGZ1bmN0aW9uIChldikge1xuXHRcdHJldHVybiBzZWxmLnJ1bldoZW5SZWFkeShzZWxmLl9yYW5kb21BY2Nlc3MsIGV2KTtcblx0fTtcblxuXHRzZWxmLl9yYW5kb21BY2Nlc3MgPSBmdW5jdGlvbiAoZXYpIHtcblx0XHR2YXIgYmFja2dyb3VuZCA9IChldi50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhYmNqcy1taWRpLXByb2dyZXNzLWluZGljYXRvcicpKSA/IGV2LnRhcmdldC5wYXJlbnROb2RlIDogZXYudGFyZ2V0O1xuXHRcdHZhciBwZXJjZW50ID0gKGV2LnggLSBiYWNrZ3JvdW5kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQpIC8gYmFja2dyb3VuZC5vZmZzZXRXaWR0aDtcblx0XHRpZiAocGVyY2VudCA8IDApXG5cdFx0XHRwZXJjZW50ID0gMDtcblx0XHRpZiAocGVyY2VudCA+IDEpXG5cdFx0XHRwZXJjZW50ID0gMTtcblx0XHRzZWxmLnNlZWsocGVyY2VudCk7XG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSh7c3RhdHVzOiBcIm9rXCJ9KTtcblx0fTtcblxuXHRzZWxmLnNlZWsgPSBmdW5jdGlvbiAocGVyY2VudCwgdW5pdHMpIHtcblx0XHRpZiAoc2VsZi50aW1lciAmJiBzZWxmLm1pZGlCdWZmZXIpIHtcblx0XHRcdHNlbGYudGltZXIuc2V0UHJvZ3Jlc3MocGVyY2VudCwgdW5pdHMpO1xuXHRcdFx0c2VsZi5taWRpQnVmZmVyLnNlZWsocGVyY2VudCwgdW5pdHMpO1xuXHRcdH1cblx0fTtcblxuXHRzZWxmLnNldFdhcnAgPSBmdW5jdGlvbiAobmV3V2FycCkge1xuXHRcdGlmIChwYXJzZUludChuZXdXYXJwLCAxMCkgPiAwKSB7XG5cdFx0XHRzZWxmLndhcnAgPSBwYXJzZUludChuZXdXYXJwLCAxMCk7XG5cdFx0XHR2YXIgd2FzUGxheWluZyA9IHNlbGYuaXNTdGFydGVkO1xuXHRcdFx0dmFyIHN0YXJ0UGVyY2VudCA9IHNlbGYucGVyY2VudDtcblx0XHRcdHNlbGYuZGVzdHJveSgpO1xuXHRcdFx0c2VsZi5pc1N0YXJ0ZWQgPSBmYWxzZTtcblx0XHRcdHJldHVybiBzZWxmLmdvKCkudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHNlbGYuc2V0UHJvZ3Jlc3Moc3RhcnRQZXJjZW50LCBzZWxmLm1pZGlCdWZmZXIuZHVyYXRpb24gKiAxMDAwKTtcblx0XHRcdFx0aWYgKHNlbGYuY29udHJvbClcblx0XHRcdFx0XHRzZWxmLmNvbnRyb2wuc2V0V2FycChzZWxmLmN1cnJlbnRUZW1wbywgc2VsZi53YXJwKTtcblx0XHRcdFx0aWYgKHdhc1BsYXlpbmcpIHtcblx0XHRcdFx0XHRyZXR1cm4gc2VsZi5wbGF5KCkudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRzZWxmLnNlZWsoc3RhcnRQZXJjZW50KTtcblx0XHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzZWxmLnNlZWsoc3RhcnRQZXJjZW50KTtcblx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblx0fTtcblxuXHRzZWxmLm9uV2FycCA9IGZ1bmN0aW9uIChldikge1xuXHRcdHZhciBuZXdXYXJwID0gZXYudGFyZ2V0LnZhbHVlO1xuXHRcdHJldHVybiBzZWxmLnNldFdhcnAobmV3V2FycCk7XG5cdH07XG5cblx0c2VsZi5zZXRQcm9ncmVzcyA9IGZ1bmN0aW9uIChwZXJjZW50LCB0b3RhbFRpbWUpIHtcblx0XHRzZWxmLnBlcmNlbnQgPSBwZXJjZW50O1xuXHRcdGlmIChzZWxmLmNvbnRyb2wpXG5cdFx0XHRzZWxmLmNvbnRyb2wuc2V0UHJvZ3Jlc3MocGVyY2VudCwgdG90YWxUaW1lKTtcblx0fTtcblxuXHRzZWxmLmZpbmlzaGVkID0gZnVuY3Rpb24gKCkge1xuXHRcdHNlbGYudGltZXIucmVzZXQoKTtcblx0XHRpZiAoc2VsZi5pc0xvb3BpbmcpIHtcblx0XHRcdHNlbGYudGltZXIuc3RhcnQoMCk7XG5cdFx0XHRzZWxmLm1pZGlCdWZmZXIuZmluaXNoZWQoKTtcblx0XHRcdHNlbGYubWlkaUJ1ZmZlci5zdGFydCgpO1xuXHRcdFx0cmV0dXJuIFwiY29udGludWVcIjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2VsZi50aW1lci5zdG9wKCk7XG5cdFx0XHRpZiAoc2VsZi5pc1N0YXJ0ZWQpIHtcblx0XHRcdFx0aWYgKHNlbGYuY29udHJvbClcblx0XHRcdFx0XHRzZWxmLmNvbnRyb2wucHVzaFBsYXkoZmFsc2UpO1xuXHRcdFx0XHRzZWxmLmlzU3RhcnRlZCA9IGZhbHNlO1xuXHRcdFx0XHRzZWxmLm1pZGlCdWZmZXIuZmluaXNoZWQoKTtcblx0XHRcdFx0aWYgKHNlbGYuY3Vyc29yQ29udHJvbCAmJiBzZWxmLmN1cnNvckNvbnRyb2wub25GaW5pc2hlZCAmJiB0eXBlb2Ygc2VsZi5jdXJzb3JDb250cm9sLm9uRmluaXNoZWQgID09PSAnZnVuY3Rpb24nKVxuXHRcdFx0XHRcdHNlbGYuY3Vyc29yQ29udHJvbC5vbkZpbmlzaGVkKCk7XG5cdFx0XHRcdHNlbGYuc2V0UHJvZ3Jlc3MoMCwgMSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdHNlbGYuYmVhdENhbGxiYWNrID0gZnVuY3Rpb24gKGJlYXROdW1iZXIsIHRvdGFsQmVhdHMsIHRvdGFsVGltZSwgcG9zaXRpb24pIHtcblx0XHR2YXIgcGVyY2VudCA9IGJlYXROdW1iZXIgLyB0b3RhbEJlYXRzO1xuXHRcdHNlbGYuc2V0UHJvZ3Jlc3MocGVyY2VudCwgdG90YWxUaW1lKTtcblx0XHRpZiAoc2VsZi5jdXJzb3JDb250cm9sICYmIHNlbGYuY3Vyc29yQ29udHJvbC5vbkJlYXQgJiYgdHlwZW9mIHNlbGYuY3Vyc29yQ29udHJvbC5vbkJlYXQgID09PSAnZnVuY3Rpb24nKVxuXHRcdFx0c2VsZi5jdXJzb3JDb250cm9sLm9uQmVhdChiZWF0TnVtYmVyLCB0b3RhbEJlYXRzLCB0b3RhbFRpbWUsIHBvc2l0aW9uKTtcblx0fTtcblxuXHRzZWxmLmV2ZW50Q2FsbGJhY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRpZiAoZXZlbnQpIHtcblx0XHRcdGlmIChzZWxmLmN1cnNvckNvbnRyb2wgJiYgc2VsZi5jdXJzb3JDb250cm9sLm9uRXZlbnQgJiYgdHlwZW9mIHNlbGYuY3Vyc29yQ29udHJvbC5vbkV2ZW50ICA9PT0gJ2Z1bmN0aW9uJylcblx0XHRcdFx0c2VsZi5jdXJzb3JDb250cm9sLm9uRXZlbnQoZXZlbnQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gc2VsZi5maW5pc2hlZCgpO1xuXHRcdH1cblx0fTtcblxuXHRzZWxmLmxpbmVFbmRDYWxsYmFjayA9IGZ1bmN0aW9uIChsaW5lRXZlbnQsIGxlZnRFdmVudCkge1xuXHRcdGlmIChzZWxmLmN1cnNvckNvbnRyb2wgJiYgc2VsZi5jdXJzb3JDb250cm9sLm9uTGluZUVuZCAmJiB0eXBlb2Ygc2VsZi5jdXJzb3JDb250cm9sLm9uTGluZUVuZCAgPT09ICdmdW5jdGlvbicpXG5cdFx0XHRzZWxmLmN1cnNvckNvbnRyb2wub25MaW5lRW5kKGxpbmVFdmVudCwgbGVmdEV2ZW50KTtcblx0fTtcblxuXHRzZWxmLmdldFVybCA9IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gc2VsZi5taWRpQnVmZmVyLmRvd25sb2FkKCk7XG5cdH07XG5cblx0c2VsZi5kb3dubG9hZCA9IGZ1bmN0aW9uKGZpbGVOYW1lKSB7XG5cdFx0dmFyIHVybCA9IHNlbGYuZ2V0VXJsKCk7XG5cdFx0dmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTtcblx0XHRsaW5rLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJkaXNwbGF5OiBub25lO1wiKTtcblx0XHRsaW5rLmhyZWYgPSB1cmw7XG5cdFx0bGluay5kb3dubG9hZCA9IGZpbGVOYW1lID8gZmlsZU5hbWUgOiAnb3V0cHV0Lndhdic7XG5cdFx0bGluay5jbGljaygpO1xuXHRcdHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG5cdFx0ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTtcblx0fTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aENvbnRyb2xsZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/synth-controller.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/synth/synth-sequence.js":
/*!********************************************************!*\
  !*** ./node_modules/abcjs/src/synth/synth-sequence.js ***!
  \********************************************************/
/***/ ((module) => {

eval("var SynthSequence = function() {\n\tvar self = this;\n\tself.tracks = [];\n\tself.totalDuration = 0;\n\tself.currentInstrument = [];\n\tself.starts = [];\n\n\tself.addTrack = function() {\n\t\tself.tracks.push([]);\n\t\tself.currentInstrument.push(0);\n\t\tself.starts.push(0);\n\t\treturn self.tracks.length - 1;\n\t};\n\n\tself.setInstrument = function(trackNumber, instrumentNumber) {\n\t\tself.tracks[trackNumber].push({\n\t\t\tchannel: 0,\n\t\t\tcmd: \"program\",\n\t\t\tinstrument: instrumentNumber\n\t\t});\n\t\tself.currentInstrument[trackNumber] = instrumentNumber;\n\t};\n\n\tself.appendNote = function(trackNumber, pitch, durationInMeasures, volume, cents) {\n\t\tvar note = {\n\t\t\tcmd: \"note\",\n\t\t\tduration: durationInMeasures,\n\t\t\tgap: 0,\n\t\t\tinstrument: self.currentInstrument[trackNumber],\n\t\t\tpitch: pitch,\n\t\t\tstart: self.starts[trackNumber],\n\t\t\tvolume: volume\n\t\t};\n\t\tif (cents)\n\t\t\tnote.cents = cents;\n\t\tself.tracks[trackNumber].push(note);\n\t\tself.starts[trackNumber] += durationInMeasures;\n\n\t\tself.totalDuration = Math.max(self.totalDuration, self.starts[trackNumber]);\n\t};\n};\n\nmodule.exports = SynthSequence;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL3N5bnRoLXNlcXVlbmNlLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3N5bnRoL3N5bnRoLXNlcXVlbmNlLmpzP2M1OGMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIFN5bnRoU2VxdWVuY2UgPSBmdW5jdGlvbigpIHtcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHRzZWxmLnRyYWNrcyA9IFtdO1xuXHRzZWxmLnRvdGFsRHVyYXRpb24gPSAwO1xuXHRzZWxmLmN1cnJlbnRJbnN0cnVtZW50ID0gW107XG5cdHNlbGYuc3RhcnRzID0gW107XG5cblx0c2VsZi5hZGRUcmFjayA9IGZ1bmN0aW9uKCkge1xuXHRcdHNlbGYudHJhY2tzLnB1c2goW10pO1xuXHRcdHNlbGYuY3VycmVudEluc3RydW1lbnQucHVzaCgwKTtcblx0XHRzZWxmLnN0YXJ0cy5wdXNoKDApO1xuXHRcdHJldHVybiBzZWxmLnRyYWNrcy5sZW5ndGggLSAxO1xuXHR9O1xuXG5cdHNlbGYuc2V0SW5zdHJ1bWVudCA9IGZ1bmN0aW9uKHRyYWNrTnVtYmVyLCBpbnN0cnVtZW50TnVtYmVyKSB7XG5cdFx0c2VsZi50cmFja3NbdHJhY2tOdW1iZXJdLnB1c2goe1xuXHRcdFx0Y2hhbm5lbDogMCxcblx0XHRcdGNtZDogXCJwcm9ncmFtXCIsXG5cdFx0XHRpbnN0cnVtZW50OiBpbnN0cnVtZW50TnVtYmVyXG5cdFx0fSk7XG5cdFx0c2VsZi5jdXJyZW50SW5zdHJ1bWVudFt0cmFja051bWJlcl0gPSBpbnN0cnVtZW50TnVtYmVyO1xuXHR9O1xuXG5cdHNlbGYuYXBwZW5kTm90ZSA9IGZ1bmN0aW9uKHRyYWNrTnVtYmVyLCBwaXRjaCwgZHVyYXRpb25Jbk1lYXN1cmVzLCB2b2x1bWUsIGNlbnRzKSB7XG5cdFx0dmFyIG5vdGUgPSB7XG5cdFx0XHRjbWQ6IFwibm90ZVwiLFxuXHRcdFx0ZHVyYXRpb246IGR1cmF0aW9uSW5NZWFzdXJlcyxcblx0XHRcdGdhcDogMCxcblx0XHRcdGluc3RydW1lbnQ6IHNlbGYuY3VycmVudEluc3RydW1lbnRbdHJhY2tOdW1iZXJdLFxuXHRcdFx0cGl0Y2g6IHBpdGNoLFxuXHRcdFx0c3RhcnQ6IHNlbGYuc3RhcnRzW3RyYWNrTnVtYmVyXSxcblx0XHRcdHZvbHVtZTogdm9sdW1lXG5cdFx0fTtcblx0XHRpZiAoY2VudHMpXG5cdFx0XHRub3RlLmNlbnRzID0gY2VudHM7XG5cdFx0c2VsZi50cmFja3NbdHJhY2tOdW1iZXJdLnB1c2gobm90ZSk7XG5cdFx0c2VsZi5zdGFydHNbdHJhY2tOdW1iZXJdICs9IGR1cmF0aW9uSW5NZWFzdXJlcztcblxuXHRcdHNlbGYudG90YWxEdXJhdGlvbiA9IE1hdGgubWF4KHNlbGYudG90YWxEdXJhdGlvbiwgc2VsZi5zdGFydHNbdHJhY2tOdW1iZXJdKTtcblx0fTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhTZXF1ZW5jZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/synth/synth-sequence.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/tablatures/abc_tablatures.js":
/*!*************************************************************!*\
  !*** ./node_modules/abcjs/src/tablatures/abc_tablatures.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/*\n * Tablature Plugins\n * tablature are defined dynamically and registered inside abcjs\n * by calling abcTablatures.register(plugin) \n * where plugin represents a plugin instance \n * \n */\n\n// This is the only entry point to the tablatures. It is called both after parsing a tune and just before engraving\n\nvar TabString = __webpack_require__(/*! ./instruments/tab-string */ \"(ssr)/./node_modules/abcjs/src/tablatures/instruments/tab-string.js\");\n\n/* extend the table below when adding a new instrument plugin */\n\n// Existing tab classes \nvar pluginTab = {\n\t'violin': { name: 'StringTab', defaultTuning: ['G,', 'D', 'A', 'e'], isTabBig: false, tabSymbolOffset: 0 },\n\t'fiddle': { name: 'StringTab', defaultTuning: ['G,', 'D', 'A', 'e'], isTabBig: false, tabSymbolOffset: 0 },\n\t'mandolin': { name: 'StringTab', defaultTuning: ['G,', 'D', 'A', 'e'], isTabBig: false, tabSymbolOffset: 0 },\n\t'guitar': { name: 'StringTab', defaultTuning: ['E,', 'A,', 'D', 'G', 'B', 'e'], isTabBig: true, tabSymbolOffset: 0 },\n\t'fiveString': { name: 'StringTab', defaultTuning: ['C,', 'G,', 'D', 'A', 'e'], isTabBig: false, tabSymbolOffset: -.95 },\n};\n\nvar abcTablatures = {\n\n\tinited: false,\n\tplugins: {},\n\n\n\t/**\n\t * to be called once per plugin for registration \n\t * @param {*} plugin \n\t */\n\tregister: function (plugin) {\n\t\tvar name = plugin.name;\n\t\tvar tablature = plugin.tablature;\n\t\tthis.plugins[name] = tablature;\n\t},\n\n\tsetError: function (tune, msg) {\n\t\tif (tune.warnings) {\n\t\t\ttune.warning.push(msg);\n\t\t} else {\n\t\t\ttune.warnings = [msg];\n\t\t}\n\t},\n\n\t/**\n\t * handle params for current processed score\n\t * @param {*} tune current tune \n\t * @param {*} tuneNumber number in tune list\n\t * @param {*} params params to be processed for tablature\n\t * @return prepared tablatures plugin instances for current tune\n\t */\n\tpreparePlugins: function (tune, tuneNumber, params) {\n\t\t// Called after parsing a tune and before engraving it\n\t\tif (!this.inited) {\n\t\t\t// TODO-PER: I don't think this is needed - the plugin array can be hard coded, right?\n\t\t\tthis.register(new TabString());\n\t\t\tthis.inited = true;\n\t\t}\n\t\tvar returned = null;\n\t\tvar nbPlugins = 0;\n\t\tif (params.tablature) {\n\t\t\t// validate requested plugins \n\t\t\tvar tabs = params.tablature;\n\t\t\treturned = [];\n\t\t\tfor (var ii = 0; ii < tabs.length; ii++) {\n\t\t\t\tvar args = tabs[ii];\n\t\t\t\tvar instrument = args['instrument'];\n\t\t\t\tif (instrument == null) {\n\t\t\t\t\tthis.setError(tune, \"tablature 'instrument' is missing\");\n\t\t\t\t\treturn returned;\n\t\t\t\t}\n\t\t\t\tvar tabName = pluginTab[instrument];\n\t\t\t\tvar plugin = null;\n\t\t\t\tif (tabName) {\n\t\t\t\t\tplugin = this.plugins[tabName.name];\n\t\t\t\t}\n\t\t\t\tif (plugin) {\n\t\t\t\t\tif (params.visualTranspose != 0) {\n\t\t\t\t\t\t// populate transposition request to tabs\n\t\t\t\t\t\targs.visualTranspose = params.visualTranspose;\n\t\t\t\t\t}\n\t\t\t\t\targs.abcSrc = params.tablature.abcSrc;\n\t\t\t\t\tvar pluginInstance = {\n\t\t\t\t\t\tclassz: plugin,\n\t\t\t\t\t\ttuneNumber: tuneNumber,\n\t\t\t\t\t\tparams: args,\n\t\t\t\t\t\tinstance: null,\n\t\t\t\t\t\ttabType: tabName,\n\t\t\t\t\t};\n\t\t\t\t\t// proceed with tab plugin  init \n\t\t\t\t\t// plugin.init(tune, tuneNumber, args, ii);\n\t\t\t\t\treturned.push(pluginInstance);\n\t\t\t\t\tnbPlugins++;\n\t\t\t\t} else if (instrument === '') {\n\t\t\t\t\t// create a placeholder - there is no tab for this staff\n\t\t\t\t\treturned.push(null)\n\t\t\t\t} else {\n\t\t\t\t\t// unknown tab plugin \n\t\t\t\t\t//this.emit_error('Undefined tablature plugin: ' + tabName)\n\t\t\t\t\tthis.setError(tune, 'Undefined tablature plugin: ' + instrument);\n\t\t\t\t\treturn returned;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn returned;\n\t},\n\n\t/**\n\t * Call requested plugin\n\t * @param {*} renderer \n\t * @param {*} abcTune \n\t */\n\tlayoutTablatures: function layoutTablatures(renderer, abcTune) {\n\t\tvar tabs = abcTune.tablatures;\n\n\t\t// chack tabs request for each staffs\n\t\tvar staffLineCount = 0;\n\n\t\t// Clear the suppression flag\n\t\tif (tabs && (tabs.length > 0)) {\n\t\t\tvar nTabs = tabs.length;\n\t\t\tfor (var kk = 0; kk < nTabs; ++kk) {\n\t\t\t\tif (tabs[kk] && tabs[kk].params.firstStaffOnly) {\n\t\t\t\t\ttabs[kk].params.suppress = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (var ii = 0; ii < abcTune.lines.length; ii++) {\n\t\t\tvar line = abcTune.lines[ii];\n\n\t\t\tif (line.staff) {\n\t\t\t\tstaffLineCount++;\n\t\t\t}\n\n\t\t\t// MAE 27Nov2023\n\t\t\t// If tab param \"firstStaffOnly\", remove the tab label after the first staff\n\t\t\tif (staffLineCount > 1) {\n\t\t\t\tif (tabs && (tabs.length > 0)) {\n\t\t\t\t\tvar nTabs = tabs.length;\n\t\t\t\t\tfor (var kk = 0; kk < nTabs; ++kk) {\n\t\t\t\t\t\tif (tabs[kk].params.firstStaffOnly) {\n\t\t\t\t\t\t\t// Set the staff draw suppression flag\n\t\t\t\t\t\t\ttabs[kk].params.suppress = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar curStaff = line.staff;\n\t\t\tif (curStaff) {\n\t\t\t\tvar maxStaves = curStaff.length\n\t\t\t\tfor (var jj = 0; jj < curStaff.length; jj++) {\n\n\t\t\t\t\tif (tabs[jj] && jj < maxStaves) {\n\t\t\t\t\t\t// tablature requested for staff\n\t\t\t\t\t\tvar tabPlugin = tabs[jj];\n\t\t\t\t\t\tif (tabPlugin.instance == null) {\n\t\t\t\t\t\t\t//console.log(\" Tab Init line: \" + ii + \" staff: \" + jj)\n\t\t\t\t\t\t\ttabPlugin.instance = new tabPlugin.classz();\n\t\t\t\t\t\t\t// plugin.init(tune, tuneNumber, args, ii);\n\t\t\t\t\t\t\t// call initer first\n\t\t\t\t\t\t\ttabPlugin.instance.init(abcTune,\n\t\t\t\t\t\t\t\ttabPlugin.tuneNumber,\n\t\t\t\t\t\t\t\ttabPlugin.params,\n\t\t\t\t\t\t\t\ttabPlugin.tabType\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// render next\n\t\t\t\t\t\t//console.log(\" Tab Render line: \" + ii + \" staff: \" + jj)\n\t\t\t\t\t\ttabPlugin.instance.render(renderer, line, jj);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n};\n\n\nmodule.exports = abcTablatures;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3RhYmxhdHVyZXMvYWJjX3RhYmxhdHVyZXMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsZ0JBQWdCLG1CQUFPLENBQUMscUdBQTBCOztBQUVsRDs7QUFFQTtBQUNBO0FBQ0EsYUFBYSw4RkFBOEY7QUFDM0csYUFBYSw4RkFBOEY7QUFDM0csZUFBZSw4RkFBOEY7QUFDN0csYUFBYSx3R0FBd0c7QUFDckgsaUJBQWlCLHVHQUF1RztBQUN4SDs7QUFFQTs7QUFFQTtBQUNBLFlBQVk7OztBQUdaO0FBQ0E7QUFDQSxZQUFZLEdBQUc7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLFlBQVksR0FBRztBQUNmLFlBQVksR0FBRztBQUNmLFlBQVksR0FBRztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrQkFBa0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsWUFBWSxHQUFHO0FBQ2YsWUFBWSxHQUFHO0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFlBQVk7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsMkJBQTJCO0FBQzlDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLFlBQVk7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHNCQUFzQjs7QUFFM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7O0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvdGFibGF0dXJlcy9hYmNfdGFibGF0dXJlcy5qcz9iYTdkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBUYWJsYXR1cmUgUGx1Z2luc1xuICogdGFibGF0dXJlIGFyZSBkZWZpbmVkIGR5bmFtaWNhbGx5IGFuZCByZWdpc3RlcmVkIGluc2lkZSBhYmNqc1xuICogYnkgY2FsbGluZyBhYmNUYWJsYXR1cmVzLnJlZ2lzdGVyKHBsdWdpbikgXG4gKiB3aGVyZSBwbHVnaW4gcmVwcmVzZW50cyBhIHBsdWdpbiBpbnN0YW5jZSBcbiAqIFxuICovXG5cbi8vIFRoaXMgaXMgdGhlIG9ubHkgZW50cnkgcG9pbnQgdG8gdGhlIHRhYmxhdHVyZXMuIEl0IGlzIGNhbGxlZCBib3RoIGFmdGVyIHBhcnNpbmcgYSB0dW5lIGFuZCBqdXN0IGJlZm9yZSBlbmdyYXZpbmdcblxudmFyIFRhYlN0cmluZyA9IHJlcXVpcmUoJy4vaW5zdHJ1bWVudHMvdGFiLXN0cmluZycpO1xuXG4vKiBleHRlbmQgdGhlIHRhYmxlIGJlbG93IHdoZW4gYWRkaW5nIGEgbmV3IGluc3RydW1lbnQgcGx1Z2luICovXG5cbi8vIEV4aXN0aW5nIHRhYiBjbGFzc2VzIFxudmFyIHBsdWdpblRhYiA9IHtcblx0J3Zpb2xpbic6IHsgbmFtZTogJ1N0cmluZ1RhYicsIGRlZmF1bHRUdW5pbmc6IFsnRywnLCAnRCcsICdBJywgJ2UnXSwgaXNUYWJCaWc6IGZhbHNlLCB0YWJTeW1ib2xPZmZzZXQ6IDAgfSxcblx0J2ZpZGRsZSc6IHsgbmFtZTogJ1N0cmluZ1RhYicsIGRlZmF1bHRUdW5pbmc6IFsnRywnLCAnRCcsICdBJywgJ2UnXSwgaXNUYWJCaWc6IGZhbHNlLCB0YWJTeW1ib2xPZmZzZXQ6IDAgfSxcblx0J21hbmRvbGluJzogeyBuYW1lOiAnU3RyaW5nVGFiJywgZGVmYXVsdFR1bmluZzogWydHLCcsICdEJywgJ0EnLCAnZSddLCBpc1RhYkJpZzogZmFsc2UsIHRhYlN5bWJvbE9mZnNldDogMCB9LFxuXHQnZ3VpdGFyJzogeyBuYW1lOiAnU3RyaW5nVGFiJywgZGVmYXVsdFR1bmluZzogWydFLCcsICdBLCcsICdEJywgJ0cnLCAnQicsICdlJ10sIGlzVGFiQmlnOiB0cnVlLCB0YWJTeW1ib2xPZmZzZXQ6IDAgfSxcblx0J2ZpdmVTdHJpbmcnOiB7IG5hbWU6ICdTdHJpbmdUYWInLCBkZWZhdWx0VHVuaW5nOiBbJ0MsJywgJ0csJywgJ0QnLCAnQScsICdlJ10sIGlzVGFiQmlnOiBmYWxzZSwgdGFiU3ltYm9sT2Zmc2V0OiAtLjk1IH0sXG59O1xuXG52YXIgYWJjVGFibGF0dXJlcyA9IHtcblxuXHRpbml0ZWQ6IGZhbHNlLFxuXHRwbHVnaW5zOiB7fSxcblxuXG5cdC8qKlxuXHQgKiB0byBiZSBjYWxsZWQgb25jZSBwZXIgcGx1Z2luIGZvciByZWdpc3RyYXRpb24gXG5cdCAqIEBwYXJhbSB7Kn0gcGx1Z2luIFxuXHQgKi9cblx0cmVnaXN0ZXI6IGZ1bmN0aW9uIChwbHVnaW4pIHtcblx0XHR2YXIgbmFtZSA9IHBsdWdpbi5uYW1lO1xuXHRcdHZhciB0YWJsYXR1cmUgPSBwbHVnaW4udGFibGF0dXJlO1xuXHRcdHRoaXMucGx1Z2luc1tuYW1lXSA9IHRhYmxhdHVyZTtcblx0fSxcblxuXHRzZXRFcnJvcjogZnVuY3Rpb24gKHR1bmUsIG1zZykge1xuXHRcdGlmICh0dW5lLndhcm5pbmdzKSB7XG5cdFx0XHR0dW5lLndhcm5pbmcucHVzaChtc2cpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0dW5lLndhcm5pbmdzID0gW21zZ107XG5cdFx0fVxuXHR9LFxuXG5cdC8qKlxuXHQgKiBoYW5kbGUgcGFyYW1zIGZvciBjdXJyZW50IHByb2Nlc3NlZCBzY29yZVxuXHQgKiBAcGFyYW0geyp9IHR1bmUgY3VycmVudCB0dW5lIFxuXHQgKiBAcGFyYW0geyp9IHR1bmVOdW1iZXIgbnVtYmVyIGluIHR1bmUgbGlzdFxuXHQgKiBAcGFyYW0geyp9IHBhcmFtcyBwYXJhbXMgdG8gYmUgcHJvY2Vzc2VkIGZvciB0YWJsYXR1cmVcblx0ICogQHJldHVybiBwcmVwYXJlZCB0YWJsYXR1cmVzIHBsdWdpbiBpbnN0YW5jZXMgZm9yIGN1cnJlbnQgdHVuZVxuXHQgKi9cblx0cHJlcGFyZVBsdWdpbnM6IGZ1bmN0aW9uICh0dW5lLCB0dW5lTnVtYmVyLCBwYXJhbXMpIHtcblx0XHQvLyBDYWxsZWQgYWZ0ZXIgcGFyc2luZyBhIHR1bmUgYW5kIGJlZm9yZSBlbmdyYXZpbmcgaXRcblx0XHRpZiAoIXRoaXMuaW5pdGVkKSB7XG5cdFx0XHQvLyBUT0RPLVBFUjogSSBkb24ndCB0aGluayB0aGlzIGlzIG5lZWRlZCAtIHRoZSBwbHVnaW4gYXJyYXkgY2FuIGJlIGhhcmQgY29kZWQsIHJpZ2h0P1xuXHRcdFx0dGhpcy5yZWdpc3RlcihuZXcgVGFiU3RyaW5nKCkpO1xuXHRcdFx0dGhpcy5pbml0ZWQgPSB0cnVlO1xuXHRcdH1cblx0XHR2YXIgcmV0dXJuZWQgPSBudWxsO1xuXHRcdHZhciBuYlBsdWdpbnMgPSAwO1xuXHRcdGlmIChwYXJhbXMudGFibGF0dXJlKSB7XG5cdFx0XHQvLyB2YWxpZGF0ZSByZXF1ZXN0ZWQgcGx1Z2lucyBcblx0XHRcdHZhciB0YWJzID0gcGFyYW1zLnRhYmxhdHVyZTtcblx0XHRcdHJldHVybmVkID0gW107XG5cdFx0XHRmb3IgKHZhciBpaSA9IDA7IGlpIDwgdGFicy5sZW5ndGg7IGlpKyspIHtcblx0XHRcdFx0dmFyIGFyZ3MgPSB0YWJzW2lpXTtcblx0XHRcdFx0dmFyIGluc3RydW1lbnQgPSBhcmdzWydpbnN0cnVtZW50J107XG5cdFx0XHRcdGlmIChpbnN0cnVtZW50ID09IG51bGwpIHtcblx0XHRcdFx0XHR0aGlzLnNldEVycm9yKHR1bmUsIFwidGFibGF0dXJlICdpbnN0cnVtZW50JyBpcyBtaXNzaW5nXCIpO1xuXHRcdFx0XHRcdHJldHVybiByZXR1cm5lZDtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgdGFiTmFtZSA9IHBsdWdpblRhYltpbnN0cnVtZW50XTtcblx0XHRcdFx0dmFyIHBsdWdpbiA9IG51bGw7XG5cdFx0XHRcdGlmICh0YWJOYW1lKSB7XG5cdFx0XHRcdFx0cGx1Z2luID0gdGhpcy5wbHVnaW5zW3RhYk5hbWUubmFtZV07XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHBsdWdpbikge1xuXHRcdFx0XHRcdGlmIChwYXJhbXMudmlzdWFsVHJhbnNwb3NlICE9IDApIHtcblx0XHRcdFx0XHRcdC8vIHBvcHVsYXRlIHRyYW5zcG9zaXRpb24gcmVxdWVzdCB0byB0YWJzXG5cdFx0XHRcdFx0XHRhcmdzLnZpc3VhbFRyYW5zcG9zZSA9IHBhcmFtcy52aXN1YWxUcmFuc3Bvc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGFyZ3MuYWJjU3JjID0gcGFyYW1zLnRhYmxhdHVyZS5hYmNTcmM7XG5cdFx0XHRcdFx0dmFyIHBsdWdpbkluc3RhbmNlID0ge1xuXHRcdFx0XHRcdFx0Y2xhc3N6OiBwbHVnaW4sXG5cdFx0XHRcdFx0XHR0dW5lTnVtYmVyOiB0dW5lTnVtYmVyLFxuXHRcdFx0XHRcdFx0cGFyYW1zOiBhcmdzLFxuXHRcdFx0XHRcdFx0aW5zdGFuY2U6IG51bGwsXG5cdFx0XHRcdFx0XHR0YWJUeXBlOiB0YWJOYW1lLFxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0Ly8gcHJvY2VlZCB3aXRoIHRhYiBwbHVnaW4gIGluaXQgXG5cdFx0XHRcdFx0Ly8gcGx1Z2luLmluaXQodHVuZSwgdHVuZU51bWJlciwgYXJncywgaWkpO1xuXHRcdFx0XHRcdHJldHVybmVkLnB1c2gocGx1Z2luSW5zdGFuY2UpO1xuXHRcdFx0XHRcdG5iUGx1Z2lucysrO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGluc3RydW1lbnQgPT09ICcnKSB7XG5cdFx0XHRcdFx0Ly8gY3JlYXRlIGEgcGxhY2Vob2xkZXIgLSB0aGVyZSBpcyBubyB0YWIgZm9yIHRoaXMgc3RhZmZcblx0XHRcdFx0XHRyZXR1cm5lZC5wdXNoKG51bGwpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gdW5rbm93biB0YWIgcGx1Z2luIFxuXHRcdFx0XHRcdC8vdGhpcy5lbWl0X2Vycm9yKCdVbmRlZmluZWQgdGFibGF0dXJlIHBsdWdpbjogJyArIHRhYk5hbWUpXG5cdFx0XHRcdFx0dGhpcy5zZXRFcnJvcih0dW5lLCAnVW5kZWZpbmVkIHRhYmxhdHVyZSBwbHVnaW46ICcgKyBpbnN0cnVtZW50KTtcblx0XHRcdFx0XHRyZXR1cm4gcmV0dXJuZWQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHJldHVybmVkO1xuXHR9LFxuXG5cdC8qKlxuXHQgKiBDYWxsIHJlcXVlc3RlZCBwbHVnaW5cblx0ICogQHBhcmFtIHsqfSByZW5kZXJlciBcblx0ICogQHBhcmFtIHsqfSBhYmNUdW5lIFxuXHQgKi9cblx0bGF5b3V0VGFibGF0dXJlczogZnVuY3Rpb24gbGF5b3V0VGFibGF0dXJlcyhyZW5kZXJlciwgYWJjVHVuZSkge1xuXHRcdHZhciB0YWJzID0gYWJjVHVuZS50YWJsYXR1cmVzO1xuXG5cdFx0Ly8gY2hhY2sgdGFicyByZXF1ZXN0IGZvciBlYWNoIHN0YWZmc1xuXHRcdHZhciBzdGFmZkxpbmVDb3VudCA9IDA7XG5cblx0XHQvLyBDbGVhciB0aGUgc3VwcHJlc3Npb24gZmxhZ1xuXHRcdGlmICh0YWJzICYmICh0YWJzLmxlbmd0aCA+IDApKSB7XG5cdFx0XHR2YXIgblRhYnMgPSB0YWJzLmxlbmd0aDtcblx0XHRcdGZvciAodmFyIGtrID0gMDsga2sgPCBuVGFiczsgKytraykge1xuXHRcdFx0XHRpZiAodGFic1tra10gJiYgdGFic1tra10ucGFyYW1zLmZpcnN0U3RhZmZPbmx5KSB7XG5cdFx0XHRcdFx0dGFic1tra10ucGFyYW1zLnN1cHByZXNzID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRmb3IgKHZhciBpaSA9IDA7IGlpIDwgYWJjVHVuZS5saW5lcy5sZW5ndGg7IGlpKyspIHtcblx0XHRcdHZhciBsaW5lID0gYWJjVHVuZS5saW5lc1tpaV07XG5cblx0XHRcdGlmIChsaW5lLnN0YWZmKSB7XG5cdFx0XHRcdHN0YWZmTGluZUNvdW50Kys7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE1BRSAyN05vdjIwMjNcblx0XHRcdC8vIElmIHRhYiBwYXJhbSBcImZpcnN0U3RhZmZPbmx5XCIsIHJlbW92ZSB0aGUgdGFiIGxhYmVsIGFmdGVyIHRoZSBmaXJzdCBzdGFmZlxuXHRcdFx0aWYgKHN0YWZmTGluZUNvdW50ID4gMSkge1xuXHRcdFx0XHRpZiAodGFicyAmJiAodGFicy5sZW5ndGggPiAwKSkge1xuXHRcdFx0XHRcdHZhciBuVGFicyA9IHRhYnMubGVuZ3RoO1xuXHRcdFx0XHRcdGZvciAodmFyIGtrID0gMDsga2sgPCBuVGFiczsgKytraykge1xuXHRcdFx0XHRcdFx0aWYgKHRhYnNba2tdLnBhcmFtcy5maXJzdFN0YWZmT25seSkge1xuXHRcdFx0XHRcdFx0XHQvLyBTZXQgdGhlIHN0YWZmIGRyYXcgc3VwcHJlc3Npb24gZmxhZ1xuXHRcdFx0XHRcdFx0XHR0YWJzW2trXS5wYXJhbXMuc3VwcHJlc3MgPSB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgY3VyU3RhZmYgPSBsaW5lLnN0YWZmO1xuXHRcdFx0aWYgKGN1clN0YWZmKSB7XG5cdFx0XHRcdHZhciBtYXhTdGF2ZXMgPSBjdXJTdGFmZi5sZW5ndGhcblx0XHRcdFx0Zm9yICh2YXIgamogPSAwOyBqaiA8IGN1clN0YWZmLmxlbmd0aDsgamorKykge1xuXG5cdFx0XHRcdFx0aWYgKHRhYnNbampdICYmIGpqIDwgbWF4U3RhdmVzKSB7XG5cdFx0XHRcdFx0XHQvLyB0YWJsYXR1cmUgcmVxdWVzdGVkIGZvciBzdGFmZlxuXHRcdFx0XHRcdFx0dmFyIHRhYlBsdWdpbiA9IHRhYnNbampdO1xuXHRcdFx0XHRcdFx0aWYgKHRhYlBsdWdpbi5pbnN0YW5jZSA9PSBudWxsKSB7XG5cdFx0XHRcdFx0XHRcdC8vY29uc29sZS5sb2coXCLimIXimIXimIXimIUgVGFiIEluaXQgbGluZTogXCIgKyBpaSArIFwiIHN0YWZmOiBcIiArIGpqKVxuXHRcdFx0XHRcdFx0XHR0YWJQbHVnaW4uaW5zdGFuY2UgPSBuZXcgdGFiUGx1Z2luLmNsYXNzeigpO1xuXHRcdFx0XHRcdFx0XHQvLyBwbHVnaW4uaW5pdCh0dW5lLCB0dW5lTnVtYmVyLCBhcmdzLCBpaSk7XG5cdFx0XHRcdFx0XHRcdC8vIGNhbGwgaW5pdGVyIGZpcnN0XG5cdFx0XHRcdFx0XHRcdHRhYlBsdWdpbi5pbnN0YW5jZS5pbml0KGFiY1R1bmUsXG5cdFx0XHRcdFx0XHRcdFx0dGFiUGx1Z2luLnR1bmVOdW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0dGFiUGx1Z2luLnBhcmFtcyxcblx0XHRcdFx0XHRcdFx0XHR0YWJQbHVnaW4udGFiVHlwZVxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Ly8gcmVuZGVyIG5leHRcblx0XHRcdFx0XHRcdC8vY29uc29sZS5sb2coXCLimIXimIXimIXimIUgVGFiIFJlbmRlciBsaW5lOiBcIiArIGlpICsgXCIgc3RhZmY6IFwiICsgamopXG5cdFx0XHRcdFx0XHR0YWJQbHVnaW4uaW5zdGFuY2UucmVuZGVyKHJlbmRlcmVyLCBsaW5lLCBqaik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gYWJjVGFibGF0dXJlcztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/tablatures/abc_tablatures.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/tablatures/instruments/string-patterns.js":
/*!**************************************************************************!*\
  !*** ./node_modules/abcjs/src/tablatures/instruments/string-patterns.js ***!
  \**************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const { noteToMidi } = __webpack_require__(/*! ../../synth/note-to-midi */ \"(ssr)/./node_modules/abcjs/src/synth/note-to-midi.js\");\nvar TabNote = __webpack_require__(/*! ./tab-note */ \"(ssr)/./node_modules/abcjs/src/tablatures/instruments/tab-note.js\");\nvar tabNotes = __webpack_require__(/*! ./tab-notes */ \"(ssr)/./node_modules/abcjs/src/tablatures/instruments/tab-notes.js\");\n\n\nfunction buildCapo(self) {\n\tvar capoTuning = null;\n\tvar tuning = self.tuning;\n\tif (self.capo > 0) {\n\t\tcapoTuning = [];\n\t\tfor (var iii = 0; iii < tuning.length; iii++) {\n\t\t\tvar curNote = new TabNote(tuning[iii]);\n\t\t\tfor (var jjj = 0; jjj < self.capo; jjj++) {\n\t\t\t\tcurNote = curNote.nextNote();\n\t\t\t}\n\t\t\tcapoTuning[iii] = curNote.emit();\n\t\t}\n\t}\n\treturn capoTuning;\n}\n\nfunction buildPatterns(self) {\n\tvar strings = [];\n\tvar tuning = self.tuning;\n\tif (self.capo > 0) {\n\t\ttuning = self.capoTuning;\n\t}\n\tvar pos = tuning.length - 1;\n\tfor (var iii = 0; iii < tuning.length; iii++) {\n\t\tvar nextNote = self.highestNote; // highest handled note\n\t\tif (iii != tuning.length - 1) {\n\t\t\tnextNote = tuning[iii + 1];\n\t\t}\n\t\tvar stringNotes = tabNotes(tuning[iii], nextNote);\n\t\tif (stringNotes.error) {\n\t\t\treturn stringNotes;\n\t\t}\n\t\tstrings[pos--] = stringNotes;\n\t}\n\treturn strings;\n}\n\n\nfunction buildSecond(first) {\n\tvar seconds = [];\n\tseconds[0] = [];\n\tvar strings = first.strings;\n\tfor (var iii = 1; iii < strings.length; iii++) {\n\t\tseconds[iii] = strings[iii - 1];\n\t}\n\treturn seconds;\n}\n\nfunction sameString(self, chord) {\n\tfor (var jjjj = 0; jjjj < chord.length - 1; jjjj++) {\n\t\tvar curPos = chord[jjjj];\n\t\tvar nextPos = chord[jjjj + 1];\n\t\tif (curPos.str == nextPos.str) {\n\t\t\t// same String\n\t\t\t// => change lower pos \n\t\t\tif (curPos.str == self.strings.length - 1) {\n\t\t\t\t// Invalid tab Chord position for instrument\n\t\t\t\tcurPos.num = \"?\";\n\t\t\t\tnextPos.num = \"?\";\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// change lower pitch on lowest string\n\t\t\tif (nextPos.num < curPos.num) {\n\t\t\t\tnextPos.str++;\n\t\t\t\tnextPos = noteToNumber(self,\n\t\t\t\t\tnextPos.note,\n\t\t\t\t\tnextPos.str,\n\t\t\t\t\tself.secondPos,\n\t\t\t\t\tself.strings[nextPos.str].length\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcurPos.str++;\n\t\t\t\tcurPos = noteToNumber(self,\n\t\t\t\t\tcurPos.note,\n\t\t\t\t\tcurPos.str,\n\t\t\t\t\tself.secondPos,\n\t\t\t\t\tself.strings[curPos.str].length\n\t\t\t\t);\n\t\t\t}\n\t\t\t// update table\n\t\t\tchord[jjjj] = curPos;\n\t\t\tchord[jjjj + 1] = nextPos;\n\t\t}\n\t}\n\treturn null;\n}\n\nfunction handleChordNotes(self, notes) {\n\tvar retNotes = [];\n\tfor (var iiii = 0; iiii < notes.length; iiii++) {\n\t\tif (notes[iiii].endTie)\n\t\t\tcontinue;\n\t\tvar note = new TabNote(notes[iiii].name, self.clefTranspose);\n\t\tnote.checkKeyAccidentals(self.accidentals, self.measureAccidentals)\n\t\tvar curPos = toNumber(self, note);\n\t\tretNotes.push(curPos);\n\t}\n\tsameString(self, retNotes);\n\treturn retNotes;\n}\n\nfunction noteToNumber(self, note, stringNumber, secondPosition, firstSize) {\n\tvar strings = self.strings;\n\tnote.checkKeyAccidentals(self.accidentals, self.measureAccidentals);\n\tif (secondPosition) {\n\t\tstrings = secondPosition;\n\t}\n\tvar noteName = note.emitNoAccidentals();\n\tvar num = strings[stringNumber].indexOf(noteName);\n\tvar acc = note.acc;\n\tif (num != -1) {\n\t\tif (secondPosition) {\n\t\t\tnum += firstSize;\n\t\t}\n\t\tif ((note.isFlat || note.acc == -1) && (num == 0)) {\n\t\t\t// flat on 0 pos => previous string 7th position\n\t\t\tvar noteEquiv = note.getAccidentalEquiv();\n\t\t\tstringNumber++;\n\t\t\tnum = strings[stringNumber].indexOf(noteEquiv.emit());\n\t\t\tacc = 0;\n\t\t}\n\t\treturn {\n\t\t\tnum: (num + acc),\n\t\t\tstr: stringNumber,\n\t\t\tnote: note\n\t\t};\n\t}\n\treturn null;\n}\n\nfunction toNumber(self, note) {\n\tif (note.isAltered || note.natural) {\n\t\tvar acc;\n\t\tif (note.isFlat) {\n\t\t\tif (note.isDouble)\n\t\t\t\tacc = \"__\"\n\t\t\telse\n\t\t\t\tacc = \"_\"\n\t\t} else if (note.isSharp) {\n\t\t\tif (note.isDouble)\n\t\t\t\tacc = \"^^\"\n\t\t\telse\n\t\t\t\tacc = \"^\"\n\t\t} else if (note.natural)\n\t\t\tacc = \"=\"\n\t\tself.measureAccidentals[note.name.toUpperCase()] = acc\n\t}\n\tfor (var i = self.stringPitches.length - 1; i >= 0; i--) {\n\t\tif (note.pitch + note.pitchAltered >= self.stringPitches[i]) {\n\t\t\tvar num = note.pitch + note.pitchAltered - self.stringPitches[i]\n\t\t\tif (note.quarter === '^') num -= 0.5\n\t\t\telse if (note.quarter === \"v\") num += 0.5\n\t\t\treturn {\n\t\t\t\tnum: Math.round(num),\n\t\t\t\tstr: self.stringPitches.length - 1 - i, // reverse the strings because string 0 is on the bottom\n\t\t\t\tnote: note\n\t\t\t}\n\t\t}\n\t}\n\treturn {\n\t\tnum: \"?\",\n\t\tstr: self.stringPitches.length - 1,\n\t\tnote: note,\n\t};\n}\n\nStringPatterns.prototype.stringToPitch = function (stringNumber) {\n\tvar startingPitch = 5.3;\n\tvar bottom = this.strings.length - 1;\n\treturn startingPitch + ((bottom - stringNumber) * this.linePitch);\n};\n\nfunction invalidNumber(retNotes, note) {\n\tvar number = {\n\t\tnum: \"?\",\n\t\tstr: 0,\n\t\tnote: note\n\t};\n\tretNotes.push(number);\n\tretNotes.error = note.emit() + ': unexpected note for instrument';\n}\n\nStringPatterns.prototype.notesToNumber = function (notes, graces) {\n\tvar note;\n\tvar number;\n\tvar error = null;\n\tvar retNotes = null;\n\tif (notes) {\n\t\tretNotes = [];\n\t\tif (notes.length > 1) {\n\t\t\tretNotes = handleChordNotes(this, notes);\n\t\t\tif (retNotes.error) {\n\t\t\t\terror = retNotes.error;\n\t\t\t}\n\t\t} else {\n\t\t\tif (!notes[0].endTie) {\n\t\t\t\tnote = new TabNote(notes[0].name, this.clefTranspose);\n\t\t\t\tnote.checkKeyAccidentals(this.accidentals, this.measureAccidentals)\n\t\t\t\tnumber = toNumber(this, note);\n\t\t\t\tif (number) {\n\t\t\t\t\tretNotes.push(number);\n\t\t\t\t} else {\n\t\t\t\t\tinvalidNumber(retNotes, note);\n\t\t\t\t\terror = retNotes.error;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (error) return retNotes;\n\tvar retGraces = null;\n\tif (graces) {\n\t\tretGraces = [];\n\t\tfor (var iiii = 0; iiii < graces.length; iiii++) {\n\t\t\tnote = new TabNote(graces[iiii].name, this.clefTranspose);\n\t\t\tnote.checkKeyAccidentals(this.accidentals, this.measureAccidentals)\n\t\t\tnumber = toNumber(this, note);\n\t\t\tif (number) {\n\t\t\t\tretGraces.push(number);\n\t\t\t} else {\n\t\t\t\tinvalidNumber(retGraces, note);\n\t\t\t\terror = retNotes.error;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn {\n\t\tnotes: retNotes,\n\t\tgraces: retGraces,\n\t\terror: error\n\t};\n};\n\nStringPatterns.prototype.toString = function () {\n\tvar arr = []\n\tfor (var i = 0; i < this.tuning.length; i++) {\n\t\tvar str = this.tuning[i].replaceAll(',', '').replaceAll(\"'\", '').toUpperCase();\n\t\tif (str[0] === '_') str = str[1] + 'b '\n\t\telse if (str[0] === '^') str = str[1] + \"# \"\n\t\tarr.push(str)\n\t}\n\treturn arr.join('');\n};\n\nStringPatterns.prototype.tabInfos = function (plugin) {\n\tvar name = plugin.params.label;\n\tif (name) {\n\t\tvar tunePos = name.indexOf('%T');\n\t\tvar tuning = \"\";\n\t\tif (tunePos != -1) {\n\t\t\ttuning = this.toString();\n\t\t\tif (plugin.capo > 0) {\n\t\t\t\ttuning += ' capo:' + plugin.capo;\n\t\t\t}\n\t\t\tname = name.replace('%T', tuning);\n\t\t}\n\t\treturn name;\n\t}\n\treturn '';\n};\n\n// MAE 27 Nov 2023\nStringPatterns.prototype.suppress = function (plugin) {\n\tvar suppress = plugin.params.suppress;\n\tif (suppress) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n// MAE 27 Nov 2023 End\n\n/**\n * Common patterns for all string instruments\n * @param {} plugin\n * @param {} tuning\n * @param {*} capo\n * @param {*} highestNote \n */\nfunction StringPatterns(plugin) {\n\t//console.log(\"INIT StringPatterns constructor\")\n\tvar tuning = plugin.tuning;\n\tvar capo = plugin.capo;\n\tvar highestNote = plugin.params.highestNote;\n\tthis.linePitch = plugin.linePitch;\n\tthis.highestNote = \"a'\";\n\tif (highestNote) {\n\t\t// override default\n\t\tthis.highestNote = highestNote;\n\t}\n\tthis.measureAccidentals = {}\n\tthis.capo = 0;\n\tif (capo) {\n\t\tthis.capo = parseInt(capo, 10);\n\t}\n\tthis.transpose = plugin.transpose ? plugin.transpose : 0\n\tthis.tuning = tuning;\n\tthis.stringPitches = []\n\tfor (var i = 0; i < this.tuning.length; i++) {\n\t\tvar pitch = noteToMidi(this.tuning[i]) + this.capo\n\t\tthis.stringPitches.push(pitch)\n\t}\n\tif (this.capo > 0) {\n\t\tthis.capoTuning = buildCapo(this);\n\t}\n\tthis.strings = buildPatterns(this);\n\tif (this.strings.error) {\n\t\tplugin.setError(this.strings.error);\n\t\tplugin.inError = true;\n\t\treturn;\n\t}\n\t// second position pattern per string\n\tthis.secondPos = buildSecond(this);\n}\n\n\n\nmodule.exports = StringPatterns;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3RhYmxhdHVyZXMvaW5zdHJ1bWVudHMvc3RyaW5nLXBhdHRlcm5zLmpzIiwibWFwcGluZ3MiOiJBQUFBLFFBQVEsYUFBYSxFQUFFLG1CQUFPLENBQUMsc0ZBQTBCO0FBQ3pELGNBQWMsbUJBQU8sQ0FBQyxxRkFBWTtBQUNsQyxlQUFlLG1CQUFPLENBQUMsdUZBQWE7OztBQUdwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFCQUFxQjtBQUN6QztBQUNBLHFCQUFxQixpQkFBaUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIscUJBQXFCO0FBQ3hDLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixzQkFBc0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxvQkFBb0IseUJBQXlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQkFBb0IscUJBQXFCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLFFBQVE7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHNCQUFzQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsd0JBQXdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLGFBQWE7QUFDYixXQUFXLEdBQUc7QUFDZCxXQUFXLEdBQUc7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHdCQUF3QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy90YWJsYXR1cmVzL2luc3RydW1lbnRzL3N0cmluZy1wYXR0ZXJucy5qcz83M2Y1Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgbm90ZVRvTWlkaSB9ID0gcmVxdWlyZSgnLi4vLi4vc3ludGgvbm90ZS10by1taWRpJyk7XG52YXIgVGFiTm90ZSA9IHJlcXVpcmUoJy4vdGFiLW5vdGUnKTtcbnZhciB0YWJOb3RlcyA9IHJlcXVpcmUoJy4vdGFiLW5vdGVzJyk7XG5cblxuZnVuY3Rpb24gYnVpbGRDYXBvKHNlbGYpIHtcblx0dmFyIGNhcG9UdW5pbmcgPSBudWxsO1xuXHR2YXIgdHVuaW5nID0gc2VsZi50dW5pbmc7XG5cdGlmIChzZWxmLmNhcG8gPiAwKSB7XG5cdFx0Y2Fwb1R1bmluZyA9IFtdO1xuXHRcdGZvciAodmFyIGlpaSA9IDA7IGlpaSA8IHR1bmluZy5sZW5ndGg7IGlpaSsrKSB7XG5cdFx0XHR2YXIgY3VyTm90ZSA9IG5ldyBUYWJOb3RlKHR1bmluZ1tpaWldKTtcblx0XHRcdGZvciAodmFyIGpqaiA9IDA7IGpqaiA8IHNlbGYuY2FwbzsgampqKyspIHtcblx0XHRcdFx0Y3VyTm90ZSA9IGN1ck5vdGUubmV4dE5vdGUoKTtcblx0XHRcdH1cblx0XHRcdGNhcG9UdW5pbmdbaWlpXSA9IGN1ck5vdGUuZW1pdCgpO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gY2Fwb1R1bmluZztcbn1cblxuZnVuY3Rpb24gYnVpbGRQYXR0ZXJucyhzZWxmKSB7XG5cdHZhciBzdHJpbmdzID0gW107XG5cdHZhciB0dW5pbmcgPSBzZWxmLnR1bmluZztcblx0aWYgKHNlbGYuY2FwbyA+IDApIHtcblx0XHR0dW5pbmcgPSBzZWxmLmNhcG9UdW5pbmc7XG5cdH1cblx0dmFyIHBvcyA9IHR1bmluZy5sZW5ndGggLSAxO1xuXHRmb3IgKHZhciBpaWkgPSAwOyBpaWkgPCB0dW5pbmcubGVuZ3RoOyBpaWkrKykge1xuXHRcdHZhciBuZXh0Tm90ZSA9IHNlbGYuaGlnaGVzdE5vdGU7IC8vIGhpZ2hlc3QgaGFuZGxlZCBub3RlXG5cdFx0aWYgKGlpaSAhPSB0dW5pbmcubGVuZ3RoIC0gMSkge1xuXHRcdFx0bmV4dE5vdGUgPSB0dW5pbmdbaWlpICsgMV07XG5cdFx0fVxuXHRcdHZhciBzdHJpbmdOb3RlcyA9IHRhYk5vdGVzKHR1bmluZ1tpaWldLCBuZXh0Tm90ZSk7XG5cdFx0aWYgKHN0cmluZ05vdGVzLmVycm9yKSB7XG5cdFx0XHRyZXR1cm4gc3RyaW5nTm90ZXM7XG5cdFx0fVxuXHRcdHN0cmluZ3NbcG9zLS1dID0gc3RyaW5nTm90ZXM7XG5cdH1cblx0cmV0dXJuIHN0cmluZ3M7XG59XG5cblxuZnVuY3Rpb24gYnVpbGRTZWNvbmQoZmlyc3QpIHtcblx0dmFyIHNlY29uZHMgPSBbXTtcblx0c2Vjb25kc1swXSA9IFtdO1xuXHR2YXIgc3RyaW5ncyA9IGZpcnN0LnN0cmluZ3M7XG5cdGZvciAodmFyIGlpaSA9IDE7IGlpaSA8IHN0cmluZ3MubGVuZ3RoOyBpaWkrKykge1xuXHRcdHNlY29uZHNbaWlpXSA9IHN0cmluZ3NbaWlpIC0gMV07XG5cdH1cblx0cmV0dXJuIHNlY29uZHM7XG59XG5cbmZ1bmN0aW9uIHNhbWVTdHJpbmcoc2VsZiwgY2hvcmQpIHtcblx0Zm9yICh2YXIgampqaiA9IDA7IGpqamogPCBjaG9yZC5sZW5ndGggLSAxOyBqampqKyspIHtcblx0XHR2YXIgY3VyUG9zID0gY2hvcmRbampqal07XG5cdFx0dmFyIG5leHRQb3MgPSBjaG9yZFtqampqICsgMV07XG5cdFx0aWYgKGN1clBvcy5zdHIgPT0gbmV4dFBvcy5zdHIpIHtcblx0XHRcdC8vIHNhbWUgU3RyaW5nXG5cdFx0XHQvLyA9PiBjaGFuZ2UgbG93ZXIgcG9zIFxuXHRcdFx0aWYgKGN1clBvcy5zdHIgPT0gc2VsZi5zdHJpbmdzLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0Ly8gSW52YWxpZCB0YWIgQ2hvcmQgcG9zaXRpb24gZm9yIGluc3RydW1lbnRcblx0XHRcdFx0Y3VyUG9zLm51bSA9IFwiP1wiO1xuXHRcdFx0XHRuZXh0UG9zLm51bSA9IFwiP1wiO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHQvLyBjaGFuZ2UgbG93ZXIgcGl0Y2ggb24gbG93ZXN0IHN0cmluZ1xuXHRcdFx0aWYgKG5leHRQb3MubnVtIDwgY3VyUG9zLm51bSkge1xuXHRcdFx0XHRuZXh0UG9zLnN0cisrO1xuXHRcdFx0XHRuZXh0UG9zID0gbm90ZVRvTnVtYmVyKHNlbGYsXG5cdFx0XHRcdFx0bmV4dFBvcy5ub3RlLFxuXHRcdFx0XHRcdG5leHRQb3Muc3RyLFxuXHRcdFx0XHRcdHNlbGYuc2Vjb25kUG9zLFxuXHRcdFx0XHRcdHNlbGYuc3RyaW5nc1tuZXh0UG9zLnN0cl0ubGVuZ3RoXG5cdFx0XHRcdCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjdXJQb3Muc3RyKys7XG5cdFx0XHRcdGN1clBvcyA9IG5vdGVUb051bWJlcihzZWxmLFxuXHRcdFx0XHRcdGN1clBvcy5ub3RlLFxuXHRcdFx0XHRcdGN1clBvcy5zdHIsXG5cdFx0XHRcdFx0c2VsZi5zZWNvbmRQb3MsXG5cdFx0XHRcdFx0c2VsZi5zdHJpbmdzW2N1clBvcy5zdHJdLmxlbmd0aFxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gdXBkYXRlIHRhYmxlXG5cdFx0XHRjaG9yZFtqampqXSA9IGN1clBvcztcblx0XHRcdGNob3JkW2pqamogKyAxXSA9IG5leHRQb3M7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDaG9yZE5vdGVzKHNlbGYsIG5vdGVzKSB7XG5cdHZhciByZXROb3RlcyA9IFtdO1xuXHRmb3IgKHZhciBpaWlpID0gMDsgaWlpaSA8IG5vdGVzLmxlbmd0aDsgaWlpaSsrKSB7XG5cdFx0aWYgKG5vdGVzW2lpaWldLmVuZFRpZSlcblx0XHRcdGNvbnRpbnVlO1xuXHRcdHZhciBub3RlID0gbmV3IFRhYk5vdGUobm90ZXNbaWlpaV0ubmFtZSwgc2VsZi5jbGVmVHJhbnNwb3NlKTtcblx0XHRub3RlLmNoZWNrS2V5QWNjaWRlbnRhbHMoc2VsZi5hY2NpZGVudGFscywgc2VsZi5tZWFzdXJlQWNjaWRlbnRhbHMpXG5cdFx0dmFyIGN1clBvcyA9IHRvTnVtYmVyKHNlbGYsIG5vdGUpO1xuXHRcdHJldE5vdGVzLnB1c2goY3VyUG9zKTtcblx0fVxuXHRzYW1lU3RyaW5nKHNlbGYsIHJldE5vdGVzKTtcblx0cmV0dXJuIHJldE5vdGVzO1xufVxuXG5mdW5jdGlvbiBub3RlVG9OdW1iZXIoc2VsZiwgbm90ZSwgc3RyaW5nTnVtYmVyLCBzZWNvbmRQb3NpdGlvbiwgZmlyc3RTaXplKSB7XG5cdHZhciBzdHJpbmdzID0gc2VsZi5zdHJpbmdzO1xuXHRub3RlLmNoZWNrS2V5QWNjaWRlbnRhbHMoc2VsZi5hY2NpZGVudGFscywgc2VsZi5tZWFzdXJlQWNjaWRlbnRhbHMpO1xuXHRpZiAoc2Vjb25kUG9zaXRpb24pIHtcblx0XHRzdHJpbmdzID0gc2Vjb25kUG9zaXRpb247XG5cdH1cblx0dmFyIG5vdGVOYW1lID0gbm90ZS5lbWl0Tm9BY2NpZGVudGFscygpO1xuXHR2YXIgbnVtID0gc3RyaW5nc1tzdHJpbmdOdW1iZXJdLmluZGV4T2Yobm90ZU5hbWUpO1xuXHR2YXIgYWNjID0gbm90ZS5hY2M7XG5cdGlmIChudW0gIT0gLTEpIHtcblx0XHRpZiAoc2Vjb25kUG9zaXRpb24pIHtcblx0XHRcdG51bSArPSBmaXJzdFNpemU7XG5cdFx0fVxuXHRcdGlmICgobm90ZS5pc0ZsYXQgfHwgbm90ZS5hY2MgPT0gLTEpICYmIChudW0gPT0gMCkpIHtcblx0XHRcdC8vIGZsYXQgb24gMCBwb3MgPT4gcHJldmlvdXMgc3RyaW5nIDd0aCBwb3NpdGlvblxuXHRcdFx0dmFyIG5vdGVFcXVpdiA9IG5vdGUuZ2V0QWNjaWRlbnRhbEVxdWl2KCk7XG5cdFx0XHRzdHJpbmdOdW1iZXIrKztcblx0XHRcdG51bSA9IHN0cmluZ3Nbc3RyaW5nTnVtYmVyXS5pbmRleE9mKG5vdGVFcXVpdi5lbWl0KCkpO1xuXHRcdFx0YWNjID0gMDtcblx0XHR9XG5cdFx0cmV0dXJuIHtcblx0XHRcdG51bTogKG51bSArIGFjYyksXG5cdFx0XHRzdHI6IHN0cmluZ051bWJlcixcblx0XHRcdG5vdGU6IG5vdGVcblx0XHR9O1xuXHR9XG5cdHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiB0b051bWJlcihzZWxmLCBub3RlKSB7XG5cdGlmIChub3RlLmlzQWx0ZXJlZCB8fCBub3RlLm5hdHVyYWwpIHtcblx0XHR2YXIgYWNjO1xuXHRcdGlmIChub3RlLmlzRmxhdCkge1xuXHRcdFx0aWYgKG5vdGUuaXNEb3VibGUpXG5cdFx0XHRcdGFjYyA9IFwiX19cIlxuXHRcdFx0ZWxzZVxuXHRcdFx0XHRhY2MgPSBcIl9cIlxuXHRcdH0gZWxzZSBpZiAobm90ZS5pc1NoYXJwKSB7XG5cdFx0XHRpZiAobm90ZS5pc0RvdWJsZSlcblx0XHRcdFx0YWNjID0gXCJeXlwiXG5cdFx0XHRlbHNlXG5cdFx0XHRcdGFjYyA9IFwiXlwiXG5cdFx0fSBlbHNlIGlmIChub3RlLm5hdHVyYWwpXG5cdFx0XHRhY2MgPSBcIj1cIlxuXHRcdHNlbGYubWVhc3VyZUFjY2lkZW50YWxzW25vdGUubmFtZS50b1VwcGVyQ2FzZSgpXSA9IGFjY1xuXHR9XG5cdGZvciAodmFyIGkgPSBzZWxmLnN0cmluZ1BpdGNoZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRpZiAobm90ZS5waXRjaCArIG5vdGUucGl0Y2hBbHRlcmVkID49IHNlbGYuc3RyaW5nUGl0Y2hlc1tpXSkge1xuXHRcdFx0dmFyIG51bSA9IG5vdGUucGl0Y2ggKyBub3RlLnBpdGNoQWx0ZXJlZCAtIHNlbGYuc3RyaW5nUGl0Y2hlc1tpXVxuXHRcdFx0aWYgKG5vdGUucXVhcnRlciA9PT0gJ14nKSBudW0gLT0gMC41XG5cdFx0XHRlbHNlIGlmIChub3RlLnF1YXJ0ZXIgPT09IFwidlwiKSBudW0gKz0gMC41XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRudW06IE1hdGgucm91bmQobnVtKSxcblx0XHRcdFx0c3RyOiBzZWxmLnN0cmluZ1BpdGNoZXMubGVuZ3RoIC0gMSAtIGksIC8vIHJldmVyc2UgdGhlIHN0cmluZ3MgYmVjYXVzZSBzdHJpbmcgMCBpcyBvbiB0aGUgYm90dG9tXG5cdFx0XHRcdG5vdGU6IG5vdGVcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIHtcblx0XHRudW06IFwiP1wiLFxuXHRcdHN0cjogc2VsZi5zdHJpbmdQaXRjaGVzLmxlbmd0aCAtIDEsXG5cdFx0bm90ZTogbm90ZSxcblx0fTtcbn1cblxuU3RyaW5nUGF0dGVybnMucHJvdG90eXBlLnN0cmluZ1RvUGl0Y2ggPSBmdW5jdGlvbiAoc3RyaW5nTnVtYmVyKSB7XG5cdHZhciBzdGFydGluZ1BpdGNoID0gNS4zO1xuXHR2YXIgYm90dG9tID0gdGhpcy5zdHJpbmdzLmxlbmd0aCAtIDE7XG5cdHJldHVybiBzdGFydGluZ1BpdGNoICsgKChib3R0b20gLSBzdHJpbmdOdW1iZXIpICogdGhpcy5saW5lUGl0Y2gpO1xufTtcblxuZnVuY3Rpb24gaW52YWxpZE51bWJlcihyZXROb3Rlcywgbm90ZSkge1xuXHR2YXIgbnVtYmVyID0ge1xuXHRcdG51bTogXCI/XCIsXG5cdFx0c3RyOiAwLFxuXHRcdG5vdGU6IG5vdGVcblx0fTtcblx0cmV0Tm90ZXMucHVzaChudW1iZXIpO1xuXHRyZXROb3Rlcy5lcnJvciA9IG5vdGUuZW1pdCgpICsgJzogdW5leHBlY3RlZCBub3RlIGZvciBpbnN0cnVtZW50Jztcbn1cblxuU3RyaW5nUGF0dGVybnMucHJvdG90eXBlLm5vdGVzVG9OdW1iZXIgPSBmdW5jdGlvbiAobm90ZXMsIGdyYWNlcykge1xuXHR2YXIgbm90ZTtcblx0dmFyIG51bWJlcjtcblx0dmFyIGVycm9yID0gbnVsbDtcblx0dmFyIHJldE5vdGVzID0gbnVsbDtcblx0aWYgKG5vdGVzKSB7XG5cdFx0cmV0Tm90ZXMgPSBbXTtcblx0XHRpZiAobm90ZXMubGVuZ3RoID4gMSkge1xuXHRcdFx0cmV0Tm90ZXMgPSBoYW5kbGVDaG9yZE5vdGVzKHRoaXMsIG5vdGVzKTtcblx0XHRcdGlmIChyZXROb3Rlcy5lcnJvcikge1xuXHRcdFx0XHRlcnJvciA9IHJldE5vdGVzLmVycm9yO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAoIW5vdGVzWzBdLmVuZFRpZSkge1xuXHRcdFx0XHRub3RlID0gbmV3IFRhYk5vdGUobm90ZXNbMF0ubmFtZSwgdGhpcy5jbGVmVHJhbnNwb3NlKTtcblx0XHRcdFx0bm90ZS5jaGVja0tleUFjY2lkZW50YWxzKHRoaXMuYWNjaWRlbnRhbHMsIHRoaXMubWVhc3VyZUFjY2lkZW50YWxzKVxuXHRcdFx0XHRudW1iZXIgPSB0b051bWJlcih0aGlzLCBub3RlKTtcblx0XHRcdFx0aWYgKG51bWJlcikge1xuXHRcdFx0XHRcdHJldE5vdGVzLnB1c2gobnVtYmVyKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpbnZhbGlkTnVtYmVyKHJldE5vdGVzLCBub3RlKTtcblx0XHRcdFx0XHRlcnJvciA9IHJldE5vdGVzLmVycm9yO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGlmIChlcnJvcikgcmV0dXJuIHJldE5vdGVzO1xuXHR2YXIgcmV0R3JhY2VzID0gbnVsbDtcblx0aWYgKGdyYWNlcykge1xuXHRcdHJldEdyYWNlcyA9IFtdO1xuXHRcdGZvciAodmFyIGlpaWkgPSAwOyBpaWlpIDwgZ3JhY2VzLmxlbmd0aDsgaWlpaSsrKSB7XG5cdFx0XHRub3RlID0gbmV3IFRhYk5vdGUoZ3JhY2VzW2lpaWldLm5hbWUsIHRoaXMuY2xlZlRyYW5zcG9zZSk7XG5cdFx0XHRub3RlLmNoZWNrS2V5QWNjaWRlbnRhbHModGhpcy5hY2NpZGVudGFscywgdGhpcy5tZWFzdXJlQWNjaWRlbnRhbHMpXG5cdFx0XHRudW1iZXIgPSB0b051bWJlcih0aGlzLCBub3RlKTtcblx0XHRcdGlmIChudW1iZXIpIHtcblx0XHRcdFx0cmV0R3JhY2VzLnB1c2gobnVtYmVyKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGludmFsaWROdW1iZXIocmV0R3JhY2VzLCBub3RlKTtcblx0XHRcdFx0ZXJyb3IgPSByZXROb3Rlcy5lcnJvcjtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdG5vdGVzOiByZXROb3Rlcyxcblx0XHRncmFjZXM6IHJldEdyYWNlcyxcblx0XHRlcnJvcjogZXJyb3Jcblx0fTtcbn07XG5cblN0cmluZ1BhdHRlcm5zLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIGFyciA9IFtdXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50dW5pbmcubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgc3RyID0gdGhpcy50dW5pbmdbaV0ucmVwbGFjZUFsbCgnLCcsICcnKS5yZXBsYWNlQWxsKFwiJ1wiLCAnJykudG9VcHBlckNhc2UoKTtcblx0XHRpZiAoc3RyWzBdID09PSAnXycpIHN0ciA9IHN0clsxXSArICdiICdcblx0XHRlbHNlIGlmIChzdHJbMF0gPT09ICdeJykgc3RyID0gc3RyWzFdICsgXCIjIFwiXG5cdFx0YXJyLnB1c2goc3RyKVxuXHR9XG5cdHJldHVybiBhcnIuam9pbignJyk7XG59O1xuXG5TdHJpbmdQYXR0ZXJucy5wcm90b3R5cGUudGFiSW5mb3MgPSBmdW5jdGlvbiAocGx1Z2luKSB7XG5cdHZhciBuYW1lID0gcGx1Z2luLnBhcmFtcy5sYWJlbDtcblx0aWYgKG5hbWUpIHtcblx0XHR2YXIgdHVuZVBvcyA9IG5hbWUuaW5kZXhPZignJVQnKTtcblx0XHR2YXIgdHVuaW5nID0gXCJcIjtcblx0XHRpZiAodHVuZVBvcyAhPSAtMSkge1xuXHRcdFx0dHVuaW5nID0gdGhpcy50b1N0cmluZygpO1xuXHRcdFx0aWYgKHBsdWdpbi5jYXBvID4gMCkge1xuXHRcdFx0XHR0dW5pbmcgKz0gJyBjYXBvOicgKyBwbHVnaW4uY2Fwbztcblx0XHRcdH1cblx0XHRcdG5hbWUgPSBuYW1lLnJlcGxhY2UoJyVUJywgdHVuaW5nKTtcblx0XHR9XG5cdFx0cmV0dXJuIG5hbWU7XG5cdH1cblx0cmV0dXJuICcnO1xufTtcblxuLy8gTUFFIDI3IE5vdiAyMDIzXG5TdHJpbmdQYXR0ZXJucy5wcm90b3R5cGUuc3VwcHJlc3MgPSBmdW5jdGlvbiAocGx1Z2luKSB7XG5cdHZhciBzdXBwcmVzcyA9IHBsdWdpbi5wYXJhbXMuc3VwcHJlc3M7XG5cdGlmIChzdXBwcmVzcykge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdHJldHVybiBmYWxzZTtcbn07XG4vLyBNQUUgMjcgTm92IDIwMjMgRW5kXG5cbi8qKlxuICogQ29tbW9uIHBhdHRlcm5zIGZvciBhbGwgc3RyaW5nIGluc3RydW1lbnRzXG4gKiBAcGFyYW0ge30gcGx1Z2luXG4gKiBAcGFyYW0ge30gdHVuaW5nXG4gKiBAcGFyYW0geyp9IGNhcG9cbiAqIEBwYXJhbSB7Kn0gaGlnaGVzdE5vdGUgXG4gKi9cbmZ1bmN0aW9uIFN0cmluZ1BhdHRlcm5zKHBsdWdpbikge1xuXHQvL2NvbnNvbGUubG9nKFwiSU5JVCBTdHJpbmdQYXR0ZXJucyBjb25zdHJ1Y3RvclwiKVxuXHR2YXIgdHVuaW5nID0gcGx1Z2luLnR1bmluZztcblx0dmFyIGNhcG8gPSBwbHVnaW4uY2Fwbztcblx0dmFyIGhpZ2hlc3ROb3RlID0gcGx1Z2luLnBhcmFtcy5oaWdoZXN0Tm90ZTtcblx0dGhpcy5saW5lUGl0Y2ggPSBwbHVnaW4ubGluZVBpdGNoO1xuXHR0aGlzLmhpZ2hlc3ROb3RlID0gXCJhJ1wiO1xuXHRpZiAoaGlnaGVzdE5vdGUpIHtcblx0XHQvLyBvdmVycmlkZSBkZWZhdWx0XG5cdFx0dGhpcy5oaWdoZXN0Tm90ZSA9IGhpZ2hlc3ROb3RlO1xuXHR9XG5cdHRoaXMubWVhc3VyZUFjY2lkZW50YWxzID0ge31cblx0dGhpcy5jYXBvID0gMDtcblx0aWYgKGNhcG8pIHtcblx0XHR0aGlzLmNhcG8gPSBwYXJzZUludChjYXBvLCAxMCk7XG5cdH1cblx0dGhpcy50cmFuc3Bvc2UgPSBwbHVnaW4udHJhbnNwb3NlID8gcGx1Z2luLnRyYW5zcG9zZSA6IDBcblx0dGhpcy50dW5pbmcgPSB0dW5pbmc7XG5cdHRoaXMuc3RyaW5nUGl0Y2hlcyA9IFtdXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50dW5pbmcubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgcGl0Y2ggPSBub3RlVG9NaWRpKHRoaXMudHVuaW5nW2ldKSArIHRoaXMuY2Fwb1xuXHRcdHRoaXMuc3RyaW5nUGl0Y2hlcy5wdXNoKHBpdGNoKVxuXHR9XG5cdGlmICh0aGlzLmNhcG8gPiAwKSB7XG5cdFx0dGhpcy5jYXBvVHVuaW5nID0gYnVpbGRDYXBvKHRoaXMpO1xuXHR9XG5cdHRoaXMuc3RyaW5ncyA9IGJ1aWxkUGF0dGVybnModGhpcyk7XG5cdGlmICh0aGlzLnN0cmluZ3MuZXJyb3IpIHtcblx0XHRwbHVnaW4uc2V0RXJyb3IodGhpcy5zdHJpbmdzLmVycm9yKTtcblx0XHRwbHVnaW4uaW5FcnJvciA9IHRydWU7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdC8vIHNlY29uZCBwb3NpdGlvbiBwYXR0ZXJuIHBlciBzdHJpbmdcblx0dGhpcy5zZWNvbmRQb3MgPSBidWlsZFNlY29uZCh0aGlzKTtcbn1cblxuXG5cbm1vZHVsZS5leHBvcnRzID0gU3RyaW5nUGF0dGVybnM7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/tablatures/instruments/string-patterns.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/tablatures/instruments/string-tablature.js":
/*!***************************************************************************!*\
  !*** ./node_modules/abcjs/src/tablatures/instruments/string-tablature.js ***!
  \***************************************************************************/
/***/ ((module) => {

eval("\n/**\n * Layout tablature informations for draw\n * @param {*} numLines \n * @param {*} lineSpace \n */\n\nfunction StringTablature(numLines, lineSpace) {\n\t//console.log(\"INIT StringTablature constructor\")\n\tthis.numLines = numLines;\n\tthis.lineSpace = lineSpace;\n\tthis.verticalSize = this.numLines * this.lineSpace;\n\tvar pitch = 3;\n\tthis.bar = {\n\t\tpitch: pitch,\n\t\tpitch2: lineSpace * numLines,\n\t\theight: 5,\n\t};\n}\n\n/**\n * return true if current line should not produce a tab\n * @param {} line \n */\nStringTablature.prototype.bypass = function (line) {\n\t//console.log(\"RENDER StringTablature bypass\")\n\tvar voices = line.staffGroup.voices;\n\tif (voices.length > 0) {\n\t\tif (voices[0].isPercussion) return true;\n\t}\n\treturn false;\n};\n\n\nStringTablature.prototype.setRelative = function (child, relative, first) {\n\t//console.log(\"RENDER StringTablature setRelative\")\n\tswitch (child.type) {\n\t\tcase 'bar':\n\t\t\trelative.pitch = this.bar.pitch;\n\t\t\trelative.pitch2 = this.bar.pitch2;\n\t\t\trelative.height = this.height;\n\t\t\tbreak;\n\t\tcase 'symbol':\n\t\t\tvar top = this.bar.pitch2 / 2;\n\t\t\tif (child.name == 'dots.dot') {\n\t\t\t\tif (first) {\n\t\t\t\t\trelative.pitch = top;\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\trelative.pitch = top + this.lineSpace;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t}\n\treturn first;\n};\n\nmodule.exports = StringTablature;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3RhYmxhdHVyZXMvaW5zdHJ1bWVudHMvc3RyaW5nLXRhYmxhdHVyZS5qcyIsIm1hcHBpbmdzIjoiO0FBQ0E7QUFDQTtBQUNBLFdBQVcsR0FBRztBQUNkLFdBQVcsR0FBRztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3RhYmxhdHVyZXMvaW5zdHJ1bWVudHMvc3RyaW5nLXRhYmxhdHVyZS5qcz8wNzFkIl0sInNvdXJjZXNDb250ZW50IjpbIlxuLyoqXG4gKiBMYXlvdXQgdGFibGF0dXJlIGluZm9ybWF0aW9ucyBmb3IgZHJhd1xuICogQHBhcmFtIHsqfSBudW1MaW5lcyBcbiAqIEBwYXJhbSB7Kn0gbGluZVNwYWNlIFxuICovXG5cbmZ1bmN0aW9uIFN0cmluZ1RhYmxhdHVyZShudW1MaW5lcywgbGluZVNwYWNlKSB7XG5cdC8vY29uc29sZS5sb2coXCJJTklUIFN0cmluZ1RhYmxhdHVyZSBjb25zdHJ1Y3RvclwiKVxuXHR0aGlzLm51bUxpbmVzID0gbnVtTGluZXM7XG5cdHRoaXMubGluZVNwYWNlID0gbGluZVNwYWNlO1xuXHR0aGlzLnZlcnRpY2FsU2l6ZSA9IHRoaXMubnVtTGluZXMgKiB0aGlzLmxpbmVTcGFjZTtcblx0dmFyIHBpdGNoID0gMztcblx0dGhpcy5iYXIgPSB7XG5cdFx0cGl0Y2g6IHBpdGNoLFxuXHRcdHBpdGNoMjogbGluZVNwYWNlICogbnVtTGluZXMsXG5cdFx0aGVpZ2h0OiA1LFxuXHR9O1xufVxuXG4vKipcbiAqIHJldHVybiB0cnVlIGlmIGN1cnJlbnQgbGluZSBzaG91bGQgbm90IHByb2R1Y2UgYSB0YWJcbiAqIEBwYXJhbSB7fSBsaW5lIFxuICovXG5TdHJpbmdUYWJsYXR1cmUucHJvdG90eXBlLmJ5cGFzcyA9IGZ1bmN0aW9uIChsaW5lKSB7XG5cdC8vY29uc29sZS5sb2coXCJSRU5ERVIgU3RyaW5nVGFibGF0dXJlIGJ5cGFzc1wiKVxuXHR2YXIgdm9pY2VzID0gbGluZS5zdGFmZkdyb3VwLnZvaWNlcztcblx0aWYgKHZvaWNlcy5sZW5ndGggPiAwKSB7XG5cdFx0aWYgKHZvaWNlc1swXS5pc1BlcmN1c3Npb24pIHJldHVybiB0cnVlO1xuXHR9XG5cdHJldHVybiBmYWxzZTtcbn07XG5cblxuU3RyaW5nVGFibGF0dXJlLnByb3RvdHlwZS5zZXRSZWxhdGl2ZSA9IGZ1bmN0aW9uIChjaGlsZCwgcmVsYXRpdmUsIGZpcnN0KSB7XG5cdC8vY29uc29sZS5sb2coXCJSRU5ERVIgU3RyaW5nVGFibGF0dXJlIHNldFJlbGF0aXZlXCIpXG5cdHN3aXRjaCAoY2hpbGQudHlwZSkge1xuXHRcdGNhc2UgJ2Jhcic6XG5cdFx0XHRyZWxhdGl2ZS5waXRjaCA9IHRoaXMuYmFyLnBpdGNoO1xuXHRcdFx0cmVsYXRpdmUucGl0Y2gyID0gdGhpcy5iYXIucGl0Y2gyO1xuXHRcdFx0cmVsYXRpdmUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdzeW1ib2wnOlxuXHRcdFx0dmFyIHRvcCA9IHRoaXMuYmFyLnBpdGNoMiAvIDI7XG5cdFx0XHRpZiAoY2hpbGQubmFtZSA9PSAnZG90cy5kb3QnKSB7XG5cdFx0XHRcdGlmIChmaXJzdCkge1xuXHRcdFx0XHRcdHJlbGF0aXZlLnBpdGNoID0gdG9wO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZWxhdGl2ZS5waXRjaCA9IHRvcCArIHRoaXMubGluZVNwYWNlO1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRicmVhaztcblx0fVxuXHRyZXR1cm4gZmlyc3Q7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN0cmluZ1RhYmxhdHVyZTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/tablatures/instruments/string-tablature.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/tablatures/instruments/tab-note.js":
/*!*******************************************************************!*\
  !*** ./node_modules/abcjs/src/tablatures/instruments/tab-note.js ***!
  \*******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var { noteToMidi, midiToNote } = __webpack_require__(/*! ../../synth/note-to-midi */ \"(ssr)/./node_modules/abcjs/src/synth/note-to-midi.js\");\n\n/**\n * \n * Note structure for Tabs\n * \n */\n\n\nfunction TabNote(note, clefTranspose) {\n\t//console.log(\"INIT/RENDER TabNote constructor\")\n\tvar pitch = noteToMidi(note)\n\tif (clefTranspose)\n\t\tpitch += clefTranspose\n\tvar newNote = midiToNote(pitch);\n\tvar isFlat = false;\n\tvar isSharp = false;\n\tvar isAltered = false;\n\tvar natural = null;\n\tvar quarter = null;\n\tvar isDouble = false;\n\tvar acc = 0;\n\n\tif (note.startsWith('_')) {\n\t\tisFlat = true;\n\t\tacc = -1;\n\t\t// check quarter flat\n\t\tif (note[1] == '/') {\n\t\t\tisFlat = false;\n\t\t\tquarter = \"v\";\n\t\t\tacc = 0;\n\t\t} else if (note[1] == '_') {\n\t\t\t// double flat\n\t\t\tisDouble = true;\n\t\t\tacc -= 1;\n\t\t}\n\t} else if (note.startsWith('^')) {\n\t\tisSharp = true;\n\t\tacc = +1;\n\t\t// check quarter sharp\n\t\tif (note[1] == '/') {\n\t\t\tisSharp = false;\n\t\t\tquarter = \"^\";\n\t\t\tacc = 0;\n\t\t} else if (note[1] == '^') {\n\t\t\t// double sharp\n\t\t\tisDouble = true;\n\t\t\tacc += 1;\n\t\t}\n\t} else if (note.startsWith('=')) {\n\t\tnatural = true;\n\t\tacc = 0;\n\t}\n\tisAltered = isFlat || isSharp || (quarter != null);\n\tif (isAltered || natural) {\n\t\tif ((quarter != null) || (isDouble)) {\n\t\t\tnewNote = note.slice(2);\n\t\t} else {\n\t\t\tnewNote = note.slice(1);\n\t\t}\n\t}\n\tvar hasComma = (newNote.match(/,/g) || []).length;\n\tvar hasQuote = (newNote.match(/'/g) || []).length;\n\n\tthis.pitch = pitch\n\tthis.pitchAltered = 0\n\tthis.name = newNote;\n\tthis.acc = acc;\n\tthis.isSharp = isSharp;\n\tthis.isKeySharp = false;\n\tthis.isDouble = isDouble;\n\tthis.isAltered = isAltered;\n\tthis.isFlat = isFlat;\n\tthis.isKeyFlat = false;\n\tthis.natural = natural;\n\tthis.quarter = quarter;\n\tthis.isLower = (this.name == this.name.toLowerCase());\n\tthis.name = this.name[0].toUpperCase();\n\tthis.hasComma = hasComma;\n\tthis.isQuoted = hasQuote;\n}\n\nfunction cloneNote(self) {\n\tvar newNote = self.name;\n\tvar newTabNote = new TabNote(newNote);\n\tnewTabNote.pitch = self.pitch;\n\tnewTabNote.hasComma = self.hasComma;\n\tnewTabNote.isLower = self.isLower;\n\tnewTabNote.isQuoted = self.isQuoted;\n\tnewTabNote.isSharp = self.isSharp;\n\tnewTabNote.isKeySharp = self.isKeySharp;\n\tnewTabNote.isFlat = self.isFlat;\n\tnewTabNote.isKeyFlat = self.isKeyFlat;\n\treturn newTabNote;\n}\nTabNote.prototype.sameNoteAs = function (note) {\n\t//console.log(\"INIT TabNote sameNoteAs\")\n\treturn note.pitch === this.pitch\n};\n\nTabNote.prototype.isLowerThan = function (note) {\n\t//console.log(\"INIT TabNote isLowerThan\")\n\treturn note.pitch > this.pitch\n};\n\nTabNote.prototype.checkKeyAccidentals = function (accidentals, measureAccidentals) {\n\t//console.log(\"RENDER TabNote checkKeyAccidentals\")\n\tif (this.isAltered || this.natural)\n\t\treturn\n\tif (measureAccidentals[this.name.toUpperCase()]) {\n\t\tswitch (measureAccidentals[this.name.toUpperCase()]) {\n\t\t\tcase \"__\": this.acc = -2; this.pitchAltered = -2; return;\n\t\t\tcase \"_\": this.acc = -1; this.pitchAltered = -1; return;\n\t\t\tcase \"=\": this.acc = 0; this.pitchAltered = 0; return;\n\t\t\tcase \"^\": this.acc = 1; this.pitchAltered = 1; return;\n\t\t\tcase \"^^\": this.acc = 2; this.pitchAltered = 2; return;\n\t\t}\n\t} else if (accidentals) {\n\t\tvar curNote = this.name;\n\t\tfor (var iii = 0; iii < accidentals.length; iii++) {\n\t\t\tvar curAccidentals = accidentals[iii];\n\t\t\tif (curNote == curAccidentals.note.toUpperCase()) {\n\t\t\t\tif (curAccidentals.acc == 'flat') {\n\t\t\t\t\tthis.acc = -1;\n\t\t\t\t\tthis.isKeyFlat = true;\n\t\t\t\t\tthis.pitchAltered = -1\n\t\t\t\t}\n\t\t\t\tif (curAccidentals.acc == 'sharp') {\n\t\t\t\t\tthis.acc = +1;\n\t\t\t\t\tthis.isKeySharp = true;\n\t\t\t\t\tthis.pitchAltered = 1\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nTabNote.prototype.getAccidentalEquiv = function () {\n\t//console.log(\"TabNote getAccidentalEquiv\")\n\tvar cloned = cloneNote(this);\n\tif (cloned.isSharp || cloned.isKeySharp) {\n\t\tcloned = cloned.nextNote();\n\t\tcloned.isFlat = true;\n\t\tcloned.isSharp = false;\n\t\tcloned.isKeySharp = false;\n\t} else if (cloned.isFlat || cloned.isKeyFlat) {\n\t\tcloned = cloned.prevNote();\n\t\tcloned.isSharp = true;\n\t\tcloned.isFlat = false;\n\t\tcloned.isKeyFlat = false;\n\t}\n\treturn cloned;\n};\n\n\nTabNote.prototype.nextNote = function () {\n\t//console.log(\"INIT TabNote nextNote\")\n\tvar note = midiToNote(this.pitch + 1 + this.pitchAltered)\n\treturn new TabNote(note)\n};\n\nTabNote.prototype.prevNote = function () {\n\t//console.log(\"TabNote prevNote\")\n\tvar note = midiToNote(this.pitch - 1 + this.pitchAltered)\n\treturn new TabNote(note)\n};\n\nTabNote.prototype.emitNoAccidentals = function () {\n\t//console.log(\"TabNote emitNoAccidentals\")\n\tvar returned = this.name;\n\tif (this.isLower) {\n\t\treturned = returned.toLowerCase();\n\t}\n\tfor (var ii = 0; ii < this.isQuoted; ii++) {\n\t\treturned += \"'\";\n\t}\n\tfor (var jj = 0; jj < this.hasComma; jj++) {\n\t\treturned += \",\";\n\t}\n\treturn returned;\n};\n\nTabNote.prototype.emit = function () {\n\t//console.log(\"INIT/RENDER TabNote emit\")\n\tvar returned = this.name;\n\tif (this.isSharp || this.isKeySharp) {\n\t\treturned = '^' + returned;\n\t\tif (this.isDouble) {\n\t\t\treturned = '^' + returned;\n\t\t}\n\t}\n\tif (this.isFlat || this.isKeyFlat) {\n\t\treturned = '_' + returned;\n\t\tif (this.isDouble) {\n\t\t\treturned = '_' + returned;\n\t\t}\n\t}\n\tif (this.quarter) {\n\t\tif (this.quarter == \"^\") {\n\t\t\treturned = \"^/\" + returned;\n\t\t} else {\n\t\t\treturned = \"_/\" + returned;\n\t\t}\n\t}\n\tif (this.natural) {\n\t\treturned = '=' + returned;\n\t}\n\tfor (var ii = 1; ii <= this.hasComma; ii++) {\n\t\treturned += ',';\n\t}\n\n\tif (this.isLower) {\n\t\treturned = returned.toLowerCase();\n\t\tfor (var jj = 1; jj <= this.isQuoted; jj++) {\n\t\t\treturned += \"'\";\n\t\t}\n\t}\n\treturn returned;\n};\n\nmodule.exports = TabNote\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3RhYmxhdHVyZXMvaW5zdHJ1bWVudHMvdGFiLW5vdGUuanMiLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSx5QkFBeUIsRUFBRSxtQkFBTyxDQUFDLHNGQUEwQjs7QUFFbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsd0JBQXdCO0FBQ3JELDRCQUE0Qix3QkFBd0I7QUFDcEQsMkJBQTJCLHVCQUF1QjtBQUNsRCwyQkFBMkIsdUJBQXVCO0FBQ2xELDRCQUE0Qix1QkFBdUI7QUFDbkQ7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQkFBb0IsMEJBQTBCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isb0JBQW9CO0FBQ3RDO0FBQ0E7QUFDQSxrQkFBa0Isb0JBQW9CO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IscUJBQXFCO0FBQ3ZDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1CQUFtQixxQkFBcUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy90YWJsYXR1cmVzL2luc3RydW1lbnRzL3RhYi1ub3RlLmpzPzVhMTYiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHsgbm90ZVRvTWlkaSwgbWlkaVRvTm90ZSB9ID0gcmVxdWlyZSgnLi4vLi4vc3ludGgvbm90ZS10by1taWRpJyk7XG5cbi8qKlxuICogXG4gKiBOb3RlIHN0cnVjdHVyZSBmb3IgVGFic1xuICogXG4gKi9cblxuXG5mdW5jdGlvbiBUYWJOb3RlKG5vdGUsIGNsZWZUcmFuc3Bvc2UpIHtcblx0Ly9jb25zb2xlLmxvZyhcIklOSVQvUkVOREVSIFRhYk5vdGUgY29uc3RydWN0b3JcIilcblx0dmFyIHBpdGNoID0gbm90ZVRvTWlkaShub3RlKVxuXHRpZiAoY2xlZlRyYW5zcG9zZSlcblx0XHRwaXRjaCArPSBjbGVmVHJhbnNwb3NlXG5cdHZhciBuZXdOb3RlID0gbWlkaVRvTm90ZShwaXRjaCk7XG5cdHZhciBpc0ZsYXQgPSBmYWxzZTtcblx0dmFyIGlzU2hhcnAgPSBmYWxzZTtcblx0dmFyIGlzQWx0ZXJlZCA9IGZhbHNlO1xuXHR2YXIgbmF0dXJhbCA9IG51bGw7XG5cdHZhciBxdWFydGVyID0gbnVsbDtcblx0dmFyIGlzRG91YmxlID0gZmFsc2U7XG5cdHZhciBhY2MgPSAwO1xuXG5cdGlmIChub3RlLnN0YXJ0c1dpdGgoJ18nKSkge1xuXHRcdGlzRmxhdCA9IHRydWU7XG5cdFx0YWNjID0gLTE7XG5cdFx0Ly8gY2hlY2sgcXVhcnRlciBmbGF0XG5cdFx0aWYgKG5vdGVbMV0gPT0gJy8nKSB7XG5cdFx0XHRpc0ZsYXQgPSBmYWxzZTtcblx0XHRcdHF1YXJ0ZXIgPSBcInZcIjtcblx0XHRcdGFjYyA9IDA7XG5cdFx0fSBlbHNlIGlmIChub3RlWzFdID09ICdfJykge1xuXHRcdFx0Ly8gZG91YmxlIGZsYXRcblx0XHRcdGlzRG91YmxlID0gdHJ1ZTtcblx0XHRcdGFjYyAtPSAxO1xuXHRcdH1cblx0fSBlbHNlIGlmIChub3RlLnN0YXJ0c1dpdGgoJ14nKSkge1xuXHRcdGlzU2hhcnAgPSB0cnVlO1xuXHRcdGFjYyA9ICsxO1xuXHRcdC8vIGNoZWNrIHF1YXJ0ZXIgc2hhcnBcblx0XHRpZiAobm90ZVsxXSA9PSAnLycpIHtcblx0XHRcdGlzU2hhcnAgPSBmYWxzZTtcblx0XHRcdHF1YXJ0ZXIgPSBcIl5cIjtcblx0XHRcdGFjYyA9IDA7XG5cdFx0fSBlbHNlIGlmIChub3RlWzFdID09ICdeJykge1xuXHRcdFx0Ly8gZG91YmxlIHNoYXJwXG5cdFx0XHRpc0RvdWJsZSA9IHRydWU7XG5cdFx0XHRhY2MgKz0gMTtcblx0XHR9XG5cdH0gZWxzZSBpZiAobm90ZS5zdGFydHNXaXRoKCc9JykpIHtcblx0XHRuYXR1cmFsID0gdHJ1ZTtcblx0XHRhY2MgPSAwO1xuXHR9XG5cdGlzQWx0ZXJlZCA9IGlzRmxhdCB8fCBpc1NoYXJwIHx8IChxdWFydGVyICE9IG51bGwpO1xuXHRpZiAoaXNBbHRlcmVkIHx8IG5hdHVyYWwpIHtcblx0XHRpZiAoKHF1YXJ0ZXIgIT0gbnVsbCkgfHwgKGlzRG91YmxlKSkge1xuXHRcdFx0bmV3Tm90ZSA9IG5vdGUuc2xpY2UoMik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5ld05vdGUgPSBub3RlLnNsaWNlKDEpO1xuXHRcdH1cblx0fVxuXHR2YXIgaGFzQ29tbWEgPSAobmV3Tm90ZS5tYXRjaCgvLC9nKSB8fCBbXSkubGVuZ3RoO1xuXHR2YXIgaGFzUXVvdGUgPSAobmV3Tm90ZS5tYXRjaCgvJy9nKSB8fCBbXSkubGVuZ3RoO1xuXG5cdHRoaXMucGl0Y2ggPSBwaXRjaFxuXHR0aGlzLnBpdGNoQWx0ZXJlZCA9IDBcblx0dGhpcy5uYW1lID0gbmV3Tm90ZTtcblx0dGhpcy5hY2MgPSBhY2M7XG5cdHRoaXMuaXNTaGFycCA9IGlzU2hhcnA7XG5cdHRoaXMuaXNLZXlTaGFycCA9IGZhbHNlO1xuXHR0aGlzLmlzRG91YmxlID0gaXNEb3VibGU7XG5cdHRoaXMuaXNBbHRlcmVkID0gaXNBbHRlcmVkO1xuXHR0aGlzLmlzRmxhdCA9IGlzRmxhdDtcblx0dGhpcy5pc0tleUZsYXQgPSBmYWxzZTtcblx0dGhpcy5uYXR1cmFsID0gbmF0dXJhbDtcblx0dGhpcy5xdWFydGVyID0gcXVhcnRlcjtcblx0dGhpcy5pc0xvd2VyID0gKHRoaXMubmFtZSA9PSB0aGlzLm5hbWUudG9Mb3dlckNhc2UoKSk7XG5cdHRoaXMubmFtZSA9IHRoaXMubmFtZVswXS50b1VwcGVyQ2FzZSgpO1xuXHR0aGlzLmhhc0NvbW1hID0gaGFzQ29tbWE7XG5cdHRoaXMuaXNRdW90ZWQgPSBoYXNRdW90ZTtcbn1cblxuZnVuY3Rpb24gY2xvbmVOb3RlKHNlbGYpIHtcblx0dmFyIG5ld05vdGUgPSBzZWxmLm5hbWU7XG5cdHZhciBuZXdUYWJOb3RlID0gbmV3IFRhYk5vdGUobmV3Tm90ZSk7XG5cdG5ld1RhYk5vdGUucGl0Y2ggPSBzZWxmLnBpdGNoO1xuXHRuZXdUYWJOb3RlLmhhc0NvbW1hID0gc2VsZi5oYXNDb21tYTtcblx0bmV3VGFiTm90ZS5pc0xvd2VyID0gc2VsZi5pc0xvd2VyO1xuXHRuZXdUYWJOb3RlLmlzUXVvdGVkID0gc2VsZi5pc1F1b3RlZDtcblx0bmV3VGFiTm90ZS5pc1NoYXJwID0gc2VsZi5pc1NoYXJwO1xuXHRuZXdUYWJOb3RlLmlzS2V5U2hhcnAgPSBzZWxmLmlzS2V5U2hhcnA7XG5cdG5ld1RhYk5vdGUuaXNGbGF0ID0gc2VsZi5pc0ZsYXQ7XG5cdG5ld1RhYk5vdGUuaXNLZXlGbGF0ID0gc2VsZi5pc0tleUZsYXQ7XG5cdHJldHVybiBuZXdUYWJOb3RlO1xufVxuVGFiTm90ZS5wcm90b3R5cGUuc2FtZU5vdGVBcyA9IGZ1bmN0aW9uIChub3RlKSB7XG5cdC8vY29uc29sZS5sb2coXCJJTklUIFRhYk5vdGUgc2FtZU5vdGVBc1wiKVxuXHRyZXR1cm4gbm90ZS5waXRjaCA9PT0gdGhpcy5waXRjaFxufTtcblxuVGFiTm90ZS5wcm90b3R5cGUuaXNMb3dlclRoYW4gPSBmdW5jdGlvbiAobm90ZSkge1xuXHQvL2NvbnNvbGUubG9nKFwiSU5JVCBUYWJOb3RlIGlzTG93ZXJUaGFuXCIpXG5cdHJldHVybiBub3RlLnBpdGNoID4gdGhpcy5waXRjaFxufTtcblxuVGFiTm90ZS5wcm90b3R5cGUuY2hlY2tLZXlBY2NpZGVudGFscyA9IGZ1bmN0aW9uIChhY2NpZGVudGFscywgbWVhc3VyZUFjY2lkZW50YWxzKSB7XG5cdC8vY29uc29sZS5sb2coXCJSRU5ERVIgVGFiTm90ZSBjaGVja0tleUFjY2lkZW50YWxzXCIpXG5cdGlmICh0aGlzLmlzQWx0ZXJlZCB8fCB0aGlzLm5hdHVyYWwpXG5cdFx0cmV0dXJuXG5cdGlmIChtZWFzdXJlQWNjaWRlbnRhbHNbdGhpcy5uYW1lLnRvVXBwZXJDYXNlKCldKSB7XG5cdFx0c3dpdGNoIChtZWFzdXJlQWNjaWRlbnRhbHNbdGhpcy5uYW1lLnRvVXBwZXJDYXNlKCldKSB7XG5cdFx0XHRjYXNlIFwiX19cIjogdGhpcy5hY2MgPSAtMjsgdGhpcy5waXRjaEFsdGVyZWQgPSAtMjsgcmV0dXJuO1xuXHRcdFx0Y2FzZSBcIl9cIjogdGhpcy5hY2MgPSAtMTsgdGhpcy5waXRjaEFsdGVyZWQgPSAtMTsgcmV0dXJuO1xuXHRcdFx0Y2FzZSBcIj1cIjogdGhpcy5hY2MgPSAwOyB0aGlzLnBpdGNoQWx0ZXJlZCA9IDA7IHJldHVybjtcblx0XHRcdGNhc2UgXCJeXCI6IHRoaXMuYWNjID0gMTsgdGhpcy5waXRjaEFsdGVyZWQgPSAxOyByZXR1cm47XG5cdFx0XHRjYXNlIFwiXl5cIjogdGhpcy5hY2MgPSAyOyB0aGlzLnBpdGNoQWx0ZXJlZCA9IDI7IHJldHVybjtcblx0XHR9XG5cdH0gZWxzZSBpZiAoYWNjaWRlbnRhbHMpIHtcblx0XHR2YXIgY3VyTm90ZSA9IHRoaXMubmFtZTtcblx0XHRmb3IgKHZhciBpaWkgPSAwOyBpaWkgPCBhY2NpZGVudGFscy5sZW5ndGg7IGlpaSsrKSB7XG5cdFx0XHR2YXIgY3VyQWNjaWRlbnRhbHMgPSBhY2NpZGVudGFsc1tpaWldO1xuXHRcdFx0aWYgKGN1ck5vdGUgPT0gY3VyQWNjaWRlbnRhbHMubm90ZS50b1VwcGVyQ2FzZSgpKSB7XG5cdFx0XHRcdGlmIChjdXJBY2NpZGVudGFscy5hY2MgPT0gJ2ZsYXQnKSB7XG5cdFx0XHRcdFx0dGhpcy5hY2MgPSAtMTtcblx0XHRcdFx0XHR0aGlzLmlzS2V5RmxhdCA9IHRydWU7XG5cdFx0XHRcdFx0dGhpcy5waXRjaEFsdGVyZWQgPSAtMVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChjdXJBY2NpZGVudGFscy5hY2MgPT0gJ3NoYXJwJykge1xuXHRcdFx0XHRcdHRoaXMuYWNjID0gKzE7XG5cdFx0XHRcdFx0dGhpcy5pc0tleVNoYXJwID0gdHJ1ZTtcblx0XHRcdFx0XHR0aGlzLnBpdGNoQWx0ZXJlZCA9IDFcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxuVGFiTm90ZS5wcm90b3R5cGUuZ2V0QWNjaWRlbnRhbEVxdWl2ID0gZnVuY3Rpb24gKCkge1xuXHQvL2NvbnNvbGUubG9nKFwiVGFiTm90ZSBnZXRBY2NpZGVudGFsRXF1aXZcIilcblx0dmFyIGNsb25lZCA9IGNsb25lTm90ZSh0aGlzKTtcblx0aWYgKGNsb25lZC5pc1NoYXJwIHx8IGNsb25lZC5pc0tleVNoYXJwKSB7XG5cdFx0Y2xvbmVkID0gY2xvbmVkLm5leHROb3RlKCk7XG5cdFx0Y2xvbmVkLmlzRmxhdCA9IHRydWU7XG5cdFx0Y2xvbmVkLmlzU2hhcnAgPSBmYWxzZTtcblx0XHRjbG9uZWQuaXNLZXlTaGFycCA9IGZhbHNlO1xuXHR9IGVsc2UgaWYgKGNsb25lZC5pc0ZsYXQgfHwgY2xvbmVkLmlzS2V5RmxhdCkge1xuXHRcdGNsb25lZCA9IGNsb25lZC5wcmV2Tm90ZSgpO1xuXHRcdGNsb25lZC5pc1NoYXJwID0gdHJ1ZTtcblx0XHRjbG9uZWQuaXNGbGF0ID0gZmFsc2U7XG5cdFx0Y2xvbmVkLmlzS2V5RmxhdCA9IGZhbHNlO1xuXHR9XG5cdHJldHVybiBjbG9uZWQ7XG59O1xuXG5cblRhYk5vdGUucHJvdG90eXBlLm5leHROb3RlID0gZnVuY3Rpb24gKCkge1xuXHQvL2NvbnNvbGUubG9nKFwiSU5JVCBUYWJOb3RlIG5leHROb3RlXCIpXG5cdHZhciBub3RlID0gbWlkaVRvTm90ZSh0aGlzLnBpdGNoICsgMSArIHRoaXMucGl0Y2hBbHRlcmVkKVxuXHRyZXR1cm4gbmV3IFRhYk5vdGUobm90ZSlcbn07XG5cblRhYk5vdGUucHJvdG90eXBlLnByZXZOb3RlID0gZnVuY3Rpb24gKCkge1xuXHQvL2NvbnNvbGUubG9nKFwiVGFiTm90ZSBwcmV2Tm90ZVwiKVxuXHR2YXIgbm90ZSA9IG1pZGlUb05vdGUodGhpcy5waXRjaCAtIDEgKyB0aGlzLnBpdGNoQWx0ZXJlZClcblx0cmV0dXJuIG5ldyBUYWJOb3RlKG5vdGUpXG59O1xuXG5UYWJOb3RlLnByb3RvdHlwZS5lbWl0Tm9BY2NpZGVudGFscyA9IGZ1bmN0aW9uICgpIHtcblx0Ly9jb25zb2xlLmxvZyhcIlRhYk5vdGUgZW1pdE5vQWNjaWRlbnRhbHNcIilcblx0dmFyIHJldHVybmVkID0gdGhpcy5uYW1lO1xuXHRpZiAodGhpcy5pc0xvd2VyKSB7XG5cdFx0cmV0dXJuZWQgPSByZXR1cm5lZC50b0xvd2VyQ2FzZSgpO1xuXHR9XG5cdGZvciAodmFyIGlpID0gMDsgaWkgPCB0aGlzLmlzUXVvdGVkOyBpaSsrKSB7XG5cdFx0cmV0dXJuZWQgKz0gXCInXCI7XG5cdH1cblx0Zm9yICh2YXIgamogPSAwOyBqaiA8IHRoaXMuaGFzQ29tbWE7IGpqKyspIHtcblx0XHRyZXR1cm5lZCArPSBcIixcIjtcblx0fVxuXHRyZXR1cm4gcmV0dXJuZWQ7XG59O1xuXG5UYWJOb3RlLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gKCkge1xuXHQvL2NvbnNvbGUubG9nKFwiSU5JVC9SRU5ERVIgVGFiTm90ZSBlbWl0XCIpXG5cdHZhciByZXR1cm5lZCA9IHRoaXMubmFtZTtcblx0aWYgKHRoaXMuaXNTaGFycCB8fCB0aGlzLmlzS2V5U2hhcnApIHtcblx0XHRyZXR1cm5lZCA9ICdeJyArIHJldHVybmVkO1xuXHRcdGlmICh0aGlzLmlzRG91YmxlKSB7XG5cdFx0XHRyZXR1cm5lZCA9ICdeJyArIHJldHVybmVkO1xuXHRcdH1cblx0fVxuXHRpZiAodGhpcy5pc0ZsYXQgfHwgdGhpcy5pc0tleUZsYXQpIHtcblx0XHRyZXR1cm5lZCA9ICdfJyArIHJldHVybmVkO1xuXHRcdGlmICh0aGlzLmlzRG91YmxlKSB7XG5cdFx0XHRyZXR1cm5lZCA9ICdfJyArIHJldHVybmVkO1xuXHRcdH1cblx0fVxuXHRpZiAodGhpcy5xdWFydGVyKSB7XG5cdFx0aWYgKHRoaXMucXVhcnRlciA9PSBcIl5cIikge1xuXHRcdFx0cmV0dXJuZWQgPSBcIl4vXCIgKyByZXR1cm5lZDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuZWQgPSBcIl8vXCIgKyByZXR1cm5lZDtcblx0XHR9XG5cdH1cblx0aWYgKHRoaXMubmF0dXJhbCkge1xuXHRcdHJldHVybmVkID0gJz0nICsgcmV0dXJuZWQ7XG5cdH1cblx0Zm9yICh2YXIgaWkgPSAxOyBpaSA8PSB0aGlzLmhhc0NvbW1hOyBpaSsrKSB7XG5cdFx0cmV0dXJuZWQgKz0gJywnO1xuXHR9XG5cblx0aWYgKHRoaXMuaXNMb3dlcikge1xuXHRcdHJldHVybmVkID0gcmV0dXJuZWQudG9Mb3dlckNhc2UoKTtcblx0XHRmb3IgKHZhciBqaiA9IDE7IGpqIDw9IHRoaXMuaXNRdW90ZWQ7IGpqKyspIHtcblx0XHRcdHJldHVybmVkICs9IFwiJ1wiO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmV0dXJuZWQ7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRhYk5vdGVcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/tablatures/instruments/tab-note.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/tablatures/instruments/tab-notes.js":
/*!********************************************************************!*\
  !*** ./node_modules/abcjs/src/tablatures/instruments/tab-notes.js ***!
  \********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar TabNote = __webpack_require__(/*! ./tab-note */ \"(ssr)/./node_modules/abcjs/src/tablatures/instruments/tab-note.js\");\n\nvar notes = ['A', 'B', 'C', 'D', 'E', 'F', 'G'];\n\nfunction tabNotes(fromNote, toNote) {\n\t//console.log(\"INIT TabNotes\")\n\tvar fromN = new TabNote(fromNote);\n\tvar toN = new TabNote(toNote);\n\t// check that toN is not lower than fromN\n\tif (toN.isLowerThan(fromN)) {\n\t\tvar from = fromN.emit();\n\t\tvar tn = toN.emit();\n\t\treturn {\n\t\t\terror: 'Invalid string Instrument tuning : ' +\n\t\t\t\ttn + ' string lower than ' + from + ' string'\n\t\t};\n\t}\n\tvar buildReturned = [];\n\tvar startIndex = notes.indexOf(fromN.name);\n\tvar toIndex = notes.indexOf(toN.name);\n\tif ((startIndex == -1) || (toIndex == -1)) {\n\t\treturn buildReturned;\n\t}\n\tvar finished = false;\n\twhile (!finished) {\n\t\tbuildReturned.push(fromN.emit());\n\t\tfromN = fromN.nextNote();\n\t\tif (fromN.sameNoteAs(toN)) {\n\t\t\tfinished = true;\n\t\t}\n\t}\n\treturn buildReturned;\n}\n\nmodule.exports = tabNotes;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3RhYmxhdHVyZXMvaW5zdHJ1bWVudHMvdGFiLW5vdGVzLmpzIiwibWFwcGluZ3MiOiI7QUFDQSxjQUFjLG1CQUFPLENBQUMscUZBQVk7O0FBRWxDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvdGFibGF0dXJlcy9pbnN0cnVtZW50cy90YWItbm90ZXMuanM/ZWM0OCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbnZhciBUYWJOb3RlID0gcmVxdWlyZSgnLi90YWItbm90ZScpO1xuXG52YXIgbm90ZXMgPSBbJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnXTtcblxuZnVuY3Rpb24gdGFiTm90ZXMoZnJvbU5vdGUsIHRvTm90ZSkge1xuXHQvL2NvbnNvbGUubG9nKFwiSU5JVCBUYWJOb3Rlc1wiKVxuXHR2YXIgZnJvbU4gPSBuZXcgVGFiTm90ZShmcm9tTm90ZSk7XG5cdHZhciB0b04gPSBuZXcgVGFiTm90ZSh0b05vdGUpO1xuXHQvLyBjaGVjayB0aGF0IHRvTiBpcyBub3QgbG93ZXIgdGhhbiBmcm9tTlxuXHRpZiAodG9OLmlzTG93ZXJUaGFuKGZyb21OKSkge1xuXHRcdHZhciBmcm9tID0gZnJvbU4uZW1pdCgpO1xuXHRcdHZhciB0biA9IHRvTi5lbWl0KCk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGVycm9yOiAnSW52YWxpZCBzdHJpbmcgSW5zdHJ1bWVudCB0dW5pbmcgOiAnICtcblx0XHRcdFx0dG4gKyAnIHN0cmluZyBsb3dlciB0aGFuICcgKyBmcm9tICsgJyBzdHJpbmcnXG5cdFx0fTtcblx0fVxuXHR2YXIgYnVpbGRSZXR1cm5lZCA9IFtdO1xuXHR2YXIgc3RhcnRJbmRleCA9IG5vdGVzLmluZGV4T2YoZnJvbU4ubmFtZSk7XG5cdHZhciB0b0luZGV4ID0gbm90ZXMuaW5kZXhPZih0b04ubmFtZSk7XG5cdGlmICgoc3RhcnRJbmRleCA9PSAtMSkgfHwgKHRvSW5kZXggPT0gLTEpKSB7XG5cdFx0cmV0dXJuIGJ1aWxkUmV0dXJuZWQ7XG5cdH1cblx0dmFyIGZpbmlzaGVkID0gZmFsc2U7XG5cdHdoaWxlICghZmluaXNoZWQpIHtcblx0XHRidWlsZFJldHVybmVkLnB1c2goZnJvbU4uZW1pdCgpKTtcblx0XHRmcm9tTiA9IGZyb21OLm5leHROb3RlKCk7XG5cdFx0aWYgKGZyb21OLnNhbWVOb3RlQXModG9OKSkge1xuXHRcdFx0ZmluaXNoZWQgPSB0cnVlO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gYnVpbGRSZXR1cm5lZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0YWJOb3RlcztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/tablatures/instruments/tab-notes.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/tablatures/instruments/tab-string.js":
/*!*********************************************************************!*\
  !*** ./node_modules/abcjs/src/tablatures/instruments/tab-string.js ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar StringTablature = __webpack_require__(/*! ./string-tablature */ \"(ssr)/./node_modules/abcjs/src/tablatures/instruments/string-tablature.js\");\nvar tabRenderer = __webpack_require__(/*! ../render/tab-renderer */ \"(ssr)/./node_modules/abcjs/src/tablatures/render/tab-renderer.js\");\nvar StringPatterns = __webpack_require__(/*! ./string-patterns */ \"(ssr)/./node_modules/abcjs/src/tablatures/instruments/string-patterns.js\");\n\n\n/**\n * upon init mainly store provided instances for later usage\n * @param {*} abcTune  the parsed tune AST tree\n * @param {*} tuneNumber  the parsed tune AST tree\n * @param {*} params  complementary args provided to Tablature Plugin\n */\nPlugin.prototype.init = function (abcTune, tuneNumber, params, tabSettings) {\n\t//console.log(\"INIT AbcStringTab Plugin.init\")\n\tthis.tune = abcTune;\n\tthis.params = params;\n\tthis.tuneNumber = tuneNumber;\n\tthis.inError = false;\n\tthis.abcTune = abcTune;\n\tthis.linePitch = 3;\n\tthis.nbLines = tabSettings.defaultTuning.length;\n\tthis.isTabBig = tabSettings.isTabBig;\n\tthis.tabSymbolOffset = tabSettings.tabSymbolOffset;\n\tthis.capo = params.capo;\n\tthis.transpose = params.visualTranspose;\n\tthis.hideTabSymbol = params.hideTabSymbol;\n\tthis.tablature = new StringTablature(this.nbLines, this.linePitch);\n\tvar tuning = params.tuning;\n\tif (!tuning) {\n\t\ttuning = tabSettings.defaultTuning;\n\t}\n\tthis.tuning = tuning;\n\tthis.semantics = new StringPatterns(this);\n};\n\nPlugin.prototype.setError = function (error) {\n\t//console.log(\"Plugin setError\")\n\tif (error) {\n\t\tthis.error = error;\n\t\tthis.inError = true;\n\t\tif (this.tune.warnings) {\n\t\t\tthis.tune.warnings.push(error);\n\t\t} else {\n\t\t\tthis.tune.warnings = [error];\n\t\t}\n\t}\n};\n\nPlugin.prototype.render = function (renderer, line, staffIndex) {\n\t//console.log(\"RENDER AbcStringTab Plugin.render\")\n\tif (this.inError) return;\n\tif (this.tablature.bypass(line)) return;\n\ttabRenderer(this, renderer, line, staffIndex);\n};\n\nfunction Plugin() { }\n\n//\n// Tablature plugin definition\n//\nvar AbcStringTab = function () {\n\treturn { name: 'StringTab', tablature: Plugin };\n};\n\nmodule.exports = AbcStringTab;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3RhYmxhdHVyZXMvaW5zdHJ1bWVudHMvdGFiLXN0cmluZy5qcyIsIm1hcHBpbmdzIjoiO0FBQ0Esc0JBQXNCLG1CQUFPLENBQUMscUdBQW9CO0FBQ2xELGtCQUFrQixtQkFBTyxDQUFDLGdHQUF3QjtBQUNsRCxxQkFBcUIsbUJBQU8sQ0FBQyxtR0FBbUI7OztBQUdoRDtBQUNBO0FBQ0EsV0FBVyxHQUFHO0FBQ2QsV0FBVyxHQUFHO0FBQ2QsV0FBVyxHQUFHO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvdGFibGF0dXJlcy9pbnN0cnVtZW50cy90YWItc3RyaW5nLmpzPzlmMTEiXSwic291cmNlc0NvbnRlbnQiOlsiXG52YXIgU3RyaW5nVGFibGF0dXJlID0gcmVxdWlyZSgnLi9zdHJpbmctdGFibGF0dXJlJyk7XG52YXIgdGFiUmVuZGVyZXIgPSByZXF1aXJlKCcuLi9yZW5kZXIvdGFiLXJlbmRlcmVyJyk7XG52YXIgU3RyaW5nUGF0dGVybnMgPSByZXF1aXJlKCcuL3N0cmluZy1wYXR0ZXJucycpO1xuXG5cbi8qKlxuICogdXBvbiBpbml0IG1haW5seSBzdG9yZSBwcm92aWRlZCBpbnN0YW5jZXMgZm9yIGxhdGVyIHVzYWdlXG4gKiBAcGFyYW0geyp9IGFiY1R1bmUgIHRoZSBwYXJzZWQgdHVuZSBBU1QgdHJlZVxuICogQHBhcmFtIHsqfSB0dW5lTnVtYmVyICB0aGUgcGFyc2VkIHR1bmUgQVNUIHRyZWVcbiAqIEBwYXJhbSB7Kn0gcGFyYW1zICBjb21wbGVtZW50YXJ5IGFyZ3MgcHJvdmlkZWQgdG8gVGFibGF0dXJlIFBsdWdpblxuICovXG5QbHVnaW4ucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoYWJjVHVuZSwgdHVuZU51bWJlciwgcGFyYW1zLCB0YWJTZXR0aW5ncykge1xuXHQvL2NvbnNvbGUubG9nKFwiSU5JVCBBYmNTdHJpbmdUYWIgUGx1Z2luLmluaXRcIilcblx0dGhpcy50dW5lID0gYWJjVHVuZTtcblx0dGhpcy5wYXJhbXMgPSBwYXJhbXM7XG5cdHRoaXMudHVuZU51bWJlciA9IHR1bmVOdW1iZXI7XG5cdHRoaXMuaW5FcnJvciA9IGZhbHNlO1xuXHR0aGlzLmFiY1R1bmUgPSBhYmNUdW5lO1xuXHR0aGlzLmxpbmVQaXRjaCA9IDM7XG5cdHRoaXMubmJMaW5lcyA9IHRhYlNldHRpbmdzLmRlZmF1bHRUdW5pbmcubGVuZ3RoO1xuXHR0aGlzLmlzVGFiQmlnID0gdGFiU2V0dGluZ3MuaXNUYWJCaWc7XG5cdHRoaXMudGFiU3ltYm9sT2Zmc2V0ID0gdGFiU2V0dGluZ3MudGFiU3ltYm9sT2Zmc2V0O1xuXHR0aGlzLmNhcG8gPSBwYXJhbXMuY2Fwbztcblx0dGhpcy50cmFuc3Bvc2UgPSBwYXJhbXMudmlzdWFsVHJhbnNwb3NlO1xuXHR0aGlzLmhpZGVUYWJTeW1ib2wgPSBwYXJhbXMuaGlkZVRhYlN5bWJvbDtcblx0dGhpcy50YWJsYXR1cmUgPSBuZXcgU3RyaW5nVGFibGF0dXJlKHRoaXMubmJMaW5lcywgdGhpcy5saW5lUGl0Y2gpO1xuXHR2YXIgdHVuaW5nID0gcGFyYW1zLnR1bmluZztcblx0aWYgKCF0dW5pbmcpIHtcblx0XHR0dW5pbmcgPSB0YWJTZXR0aW5ncy5kZWZhdWx0VHVuaW5nO1xuXHR9XG5cdHRoaXMudHVuaW5nID0gdHVuaW5nO1xuXHR0aGlzLnNlbWFudGljcyA9IG5ldyBTdHJpbmdQYXR0ZXJucyh0aGlzKTtcbn07XG5cblBsdWdpbi5wcm90b3R5cGUuc2V0RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcblx0Ly9jb25zb2xlLmxvZyhcIlBsdWdpbiBzZXRFcnJvclwiKVxuXHRpZiAoZXJyb3IpIHtcblx0XHR0aGlzLmVycm9yID0gZXJyb3I7XG5cdFx0dGhpcy5pbkVycm9yID0gdHJ1ZTtcblx0XHRpZiAodGhpcy50dW5lLndhcm5pbmdzKSB7XG5cdFx0XHR0aGlzLnR1bmUud2FybmluZ3MucHVzaChlcnJvcik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMudHVuZS53YXJuaW5ncyA9IFtlcnJvcl07XG5cdFx0fVxuXHR9XG59O1xuXG5QbHVnaW4ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChyZW5kZXJlciwgbGluZSwgc3RhZmZJbmRleCkge1xuXHQvL2NvbnNvbGUubG9nKFwiUkVOREVSIEFiY1N0cmluZ1RhYiBQbHVnaW4ucmVuZGVyXCIpXG5cdGlmICh0aGlzLmluRXJyb3IpIHJldHVybjtcblx0aWYgKHRoaXMudGFibGF0dXJlLmJ5cGFzcyhsaW5lKSkgcmV0dXJuO1xuXHR0YWJSZW5kZXJlcih0aGlzLCByZW5kZXJlciwgbGluZSwgc3RhZmZJbmRleCk7XG59O1xuXG5mdW5jdGlvbiBQbHVnaW4oKSB7IH1cblxuLy9cbi8vIFRhYmxhdHVyZSBwbHVnaW4gZGVmaW5pdGlvblxuLy9cbnZhciBBYmNTdHJpbmdUYWIgPSBmdW5jdGlvbiAoKSB7XG5cdHJldHVybiB7IG5hbWU6ICdTdHJpbmdUYWInLCB0YWJsYXR1cmU6IFBsdWdpbiB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBBYmNTdHJpbmdUYWI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/tablatures/instruments/tab-string.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/tablatures/render/tab-absolute-elements.js":
/*!***************************************************************************!*\
  !*** ./node_modules/abcjs/src/tablatures/render/tab-absolute-elements.js ***!
  \***************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/**\n * Tablature Absolute elements factory\n */\nvar AbsoluteElement = __webpack_require__(/*! ../../write/creation/elements/absolute-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/absolute-element.js\");\nvar RelativeElement = __webpack_require__(/*! ../../write/creation/elements/relative-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/relative-element.js\");\n\nfunction isObject(a) { return a != null && a.constructor === Object; }\nfunction cloneObject(dest, src) {\n\tfor (var prop in src) {\n\t\tif (src.hasOwnProperty(prop)) {\n\t\t\tif (!(Array.isArray(src[prop]) || isObject(src[prop]))) {\n\t\t\t\tdest[prop] = src[prop];\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction cloneAbsolute(absSrc) {\n\tvar returned = new AbsoluteElement('', 0, 0, '', 0);\n\tcloneObject(returned, absSrc);\n\treturned.top = 0;\n\treturned.bottom = -1;\n\tif (absSrc.abcelem) {\n\t\treturned.abcelem = {};\n\t\tcloneObject(returned.abcelem, absSrc.abcelem);\n\t\tif (returned.abcelem.el_type === \"note\")\n\t\t\treturned.abcelem.el_type = 'tabNumber';\n\t}\n\t// TODO-PER: This fixes the classes because the element isn't created at the right time.\n\tabsSrc.cloned = returned\n\treturn returned;\n}\n\nfunction cloneAbsoluteAndRelatives(absSrc, plugin) {\n\tvar returned = cloneAbsolute(absSrc);\n\tif (plugin) {\n\t\tvar children = absSrc.children;\n\t\t// proceed with relative as well\n\t\tvar first = true;\n\t\tfor (var ii = 0; ii < children.length; ii++) {\n\t\t\tvar child = children[ii];\n\t\t\tvar relative = new RelativeElement('', 0, 0, 0, '');\n\t\t\tcloneObject(relative, child);\n\t\t\tfirst = plugin.tablature.setRelative(child, relative, first);\n\t\t\treturned.children.push(relative);\n\t\t}\n\t}\n\treturn returned;\n}\n\nfunction buildTabAbsolute(plugin, absX, relX) {\n\tvar tabIcon = 'tab.tiny';\n\tvar tabYPos = 7.5;\n\tif (plugin.isTabBig) {\n\t\ttabIcon = 'tab.big';\n\t\ttabYPos = 10;\n\t}\n\tvar element = {\n\t\tel_type: \"tab\",\n\t\ticon: tabIcon,\n\t\tYpos: tabYPos\n\t};\n\n\t// Offset the TAB symbol position if specified in the tab description\n\ttabYPos += plugin.tabSymbolOffset;\n\n\t// For tablature like whistle tab where you want the TAB symbol hidden\n\tif (!plugin.hideTabSymbol) {\n\n\t\tvar tabAbsolute = new AbsoluteElement(element, 0, 0, \"symbol\", 0);\n\t\ttabAbsolute.x = absX;\n\t\tvar tabRelative = new RelativeElement(tabIcon, 0, 0, 7.5, \"tab\");\n\t\ttabRelative.x = relX;\n\t\ttabAbsolute.children.push(tabRelative);\n\t\tif (tabAbsolute.abcelem.el_type == 'tab') {\n\t\t\ttabRelative.pitch = tabYPos;\n\t\t}\n\n\t}\n\treturn tabAbsolute;\n}\n\nfunction lyricsDim(abs) {\n\tif (abs.extra) {\n\t\tfor (var ii = 0; ii < abs.extra.length; ii++) {\n\t\t\tvar extra = abs.extra[ii];\n\t\t\tif (extra.type == 'lyric') {\n\t\t\t\treturn {\n\t\t\t\t\tbottom: extra.bottom,\n\t\t\t\t\theight: extra.height\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n}\nfunction TabAbsoluteElements() {\n\t//console.log(\"RENDER TabAbsoluteElements constructor\")\n\tthis.accidentals = null;\n}\n\nfunction getInitialStaffSize(staffGroup) {\n\tvar returned = 0;\n\tfor (var ii = 0; ii < staffGroup.length; ii++) {\n\t\tif (!staffGroup[ii].tabNameInfos) returned++;\n\t}\n\treturn returned;\n}\n\nfunction buildRelativeTabNote(plugin, relX, def, curNote, isGrace) {\n\tvar strNote = curNote.num;\n\tif (curNote.note.quarter != null) {\n\t\t// add tab quarter => needs to string conversion then \n\t\tstrNote = strNote.toString();\n\t\tstrNote += curNote.note.quarter;\n\t}\n\tvar pitch = plugin.semantics.stringToPitch(curNote.str);\n\tdef.notes.push({ num: strNote, str: curNote.str, pitch: curNote.note.emit() });\n\tvar opt = {\n\t\ttype: 'tabNumber'\n\t};\n\tvar tabNoteRelative = new RelativeElement(\n\t\tstrNote, 0, 0, pitch + 0.3, opt);\n\ttabNoteRelative.x = relX;\n\ttabNoteRelative.isGrace = isGrace;\n\ttabNoteRelative.isAltered = curNote.note.isAltered;\n\treturn tabNoteRelative;\n}\n\nfunction getXGrace(abs, index) {\n\tvar found = 0;\n\tif (abs.extra) {\n\t\tfor (var ii = 0; ii < abs.extra.length; ii++) {\n\t\t\tif (abs.extra[ii].c.indexOf('noteheads') >= 0) {\n\t\t\t\tif (found === index) {\n\t\t\t\t\treturn abs.extra[ii].x + abs.extra[ii].w / 2;\n\t\t\t\t} else {\n\t\t\t\t\tfound++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn -1;\n}\n\nfunction graceInRest(absElem) {\n\tif (absElem.abcelem) {\n\t\tvar elem = absElem.abcelem;\n\t\tif (elem.rest) {\n\t\t\treturn elem.gracenotes;\n\t\t}\n\t}\n\treturn null;\n}\n\nfunction convertToNumber(plugin, pitches, graceNotes) {\n\tvar tabPos = plugin.semantics.notesToNumber(pitches, graceNotes);\n\tif (tabPos.error) {\n\t\tplugin.setError(tabPos.error);\n\t\treturn tabPos; // give up on error here\n\t}\n\tif (tabPos.graces && tabPos.notes) {\n\t\t// add graces to last note in notes\n\t\tvar posNote = tabPos.notes.length - 1;\n\t\ttabPos.notes[posNote].graces = tabPos.graces;\n\t}\n\treturn tabPos;\n}\n\nfunction buildGraceRelativesForRest(plugin, abs, absChild, graceNotes, tabVoice) {\n\tfor (var mm = 0; mm < graceNotes.length; mm++) {\n\t\tvar defGrace = { el_type: \"note\", startChar: absChild.abcelem.startChar, endChar: absChild.abcelem.endChar, notes: [], grace: true };\n\t\tvar graceX = getXGrace(absChild, mm);\n\t\tvar curGrace = graceNotes[mm];\n\t\tvar tabGraceRelative = buildRelativeTabNote(plugin, graceX, defGrace, curGrace, true);\n\t\tabs.children.push(tabGraceRelative);\n\t\ttabVoice.push(defGrace);\n\t}\n}\n\n/**\n * Build tab absolutes by scanning current staff line absolute array\n * @param {*} staffAbsolute\n */\nTabAbsoluteElements.prototype.build = function (plugin,\n\tstaffAbsolute,\n\ttabVoice,\n\tvoiceIndex,\n\tstaffIndex,\n\tkeySig,\n\ttabVoiceIndex) {\n\t//console.log(\"RENDER TabAbsoluteElements build\")\n\tvar staffSize = getInitialStaffSize(staffAbsolute);\n\tvar source = staffAbsolute[staffIndex + voiceIndex];\n\tvar dest = staffAbsolute[tabVoiceIndex];\n\tvar tabPos = null;\n\tvar defNote = null;\n\tif (source.children[0].abcelem.el_type != 'clef') {\n\t\t// keysig missing => provide one for tabs\n\t\tif (keySig != 'none') {\n\t\t\tsource.children.splice(0, 0, keySig);\n\t\t}\n\t}\n\tfor (var ii = 0; ii < source.children.length; ii++) {\n\t\tvar absChild = source.children[ii];\n\t\tvar absX = absChild.x;\n\t\tvar relX = absX;\n\t\t// if (absChild.children.length > 0) {\n\t\t//   relX = absChild.children[0].x;\n\t\t// }\n\t\tif ((absChild.isClef)) {\n\t\t\tdest.children.push(buildTabAbsolute(plugin, absX, relX));\n\t\t\tif (absChild.abcelem.type.indexOf('-8') >= 0) plugin.semantics.clefTranspose = -12\n\t\t\tif (absChild.abcelem.type.indexOf('+8') >= 0) plugin.semantics.clefTranspose = 12\n\t\t}\n\t\tswitch (absChild.type) {\n\t\t\tcase 'staff-extra key-signature':\n\t\t\t\t// refresh key accidentals\n\t\t\t\tthis.accidentals = absChild.abcelem.accidentals;\n\t\t\t\tplugin.semantics.accidentals = this.accidentals;\n\t\t\t\tbreak;\n\t\t\tcase 'bar':\n\t\t\t\tplugin.semantics.measureAccidentals = {}\n\t\t\t\tvar lastBar = false;\n\t\t\t\tif (ii === source.children.length - 1) {\n\t\t\t\t\t// used for final line bar drawing\n\t\t\t\t\t// for multi tabs / multi staves\n\t\t\t\t\tlastBar = true;\n\t\t\t\t}\n\t\t\t\tvar cloned = cloneAbsoluteAndRelatives(absChild, plugin);\n\t\t\t\tif (cloned.abcelem.barNumber) {\n\t\t\t\t\tdelete cloned.abcelem.barNumber;\n\t\t\t\t\tfor (var bn = 0; bn < cloned.children.length; bn++) {\n\t\t\t\t\t\tif (cloned.children[bn].type === \"barNumber\") {\n\t\t\t\t\t\t\tcloned.children.splice(bn, 1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcloned.abcelem.lastBar = lastBar;\n\t\t\t\tdest.children.push(cloned);\n\t\t\t\ttabVoice.push({\n\t\t\t\t\tel_type: absChild.abcelem.el_type,\n\t\t\t\t\ttype: absChild.abcelem.type,\n\t\t\t\t\tendChar: absChild.abcelem.endChar,\n\t\t\t\t\tstartChar: absChild.abcelem.startChar,\n\t\t\t\t\tabselem: cloned\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'rest':\n\t\t\t\tvar restGraces = graceInRest(absChild);\n\t\t\t\tif (restGraces) {\n\t\t\t\t\t// to number conversion \n\t\t\t\t\ttabPos = convertToNumber(plugin, null, restGraces);\n\t\t\t\t\tif (tabPos.error) return;\n\t\t\t\t\t// build relative for grace\n\t\t\t\t\tdefGrace = { el_type: \"note\", startChar: absChild.abcelem.startChar, endChar: absChild.abcelem.endChar, notes: [], grace: true };\n\t\t\t\t\tbuildGraceRelativesForRest(plugin, abs, absChild, tabPos.graces, tabVoice);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'note':\n\t\t\t\tvar abs = cloneAbsolute(absChild);\n\t\t\t\tabs.x = absChild.heads[0].x + absChild.heads[0].w / 2; // center the number\n\t\t\t\tabs.lyricDim = lyricsDim(absChild);\n\t\t\t\tvar pitches = absChild.abcelem.pitches;\n\t\t\t\tvar graceNotes = absChild.abcelem.gracenotes;\n\t\t\t\tabs.type = 'tabNumber';\n\t\t\t\t// to number conversion \n\t\t\t\ttabPos = convertToNumber(plugin, pitches, graceNotes);\n\t\t\t\tif (tabPos.error) return;\n\t\t\t\tif (tabPos.graces) {\n\t\t\t\t\t// add graces to last note in notes\n\t\t\t\t\tvar posNote = tabPos.notes.length - 1;\n\t\t\t\t\ttabPos.notes[posNote].graces = tabPos.graces;\n\t\t\t\t}\n\t\t\t\t// build relative\n\t\t\t\tdefNote = { el_type: \"note\", startChar: absChild.abcelem.startChar, endChar: absChild.abcelem.endChar, notes: [] };\n\t\t\t\tfor (var ll = 0; ll < tabPos.notes.length; ll++) {\n\t\t\t\t\tvar curNote = tabPos.notes[ll];\n\t\t\t\t\tif (curNote.graces) {\n\t\t\t\t\t\tfor (var mm = 0; mm < curNote.graces.length; mm++) {\n\t\t\t\t\t\t\tvar defGrace = { el_type: \"note\", startChar: absChild.abcelem.startChar, endChar: absChild.abcelem.endChar, notes: [], grace: true };\n\t\t\t\t\t\t\tvar graceX = getXGrace(absChild, mm);\n\t\t\t\t\t\t\tvar curGrace = curNote.graces[mm];\n\t\t\t\t\t\t\tvar tabGraceRelative = buildRelativeTabNote(plugin, graceX, defGrace, curGrace, true);\n\t\t\t\t\t\t\tabs.children.push(tabGraceRelative);\n\t\t\t\t\t\t\ttabVoice.push(defGrace);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar tabNoteRelative = buildRelativeTabNote(plugin, abs.x + absChild.heads[ll].dx, defNote, curNote, false);\n\t\t\t\t\tabs.children.push(tabNoteRelative);\n\t\t\t\t}\n\t\t\t\tif (defNote.notes.length > 0) {\n\t\t\t\t\tdefNote.abselem = abs;\n\t\t\t\t\ttabVoice.push(defNote);\n\t\t\t\t\tdest.children.push(abs);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n};\n\nmodule.exports = TabAbsoluteElements;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3RhYmxhdHVyZXMvcmVuZGVyL3RhYi1hYnNvbHV0ZS1lbGVtZW50cy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsbUJBQU8sQ0FBQyxrSUFBZ0Q7QUFDOUUsc0JBQXNCLG1CQUFPLENBQUMsa0lBQWdEOztBQUU5RSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsc0JBQXNCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsdUJBQXVCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLHdCQUF3QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDREQUE0RDtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsdUJBQXVCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQix3QkFBd0I7QUFDMUMsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLEdBQUc7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDZCQUE2QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw2QkFBNkI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEIscUJBQXFCLDBCQUEwQjtBQUMvQztBQUNBO0FBQ0EsdUJBQXVCLDRCQUE0QjtBQUNuRCx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvdGFibGF0dXJlcy9yZW5kZXIvdGFiLWFic29sdXRlLWVsZW1lbnRzLmpzPzY4ZWEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUYWJsYXR1cmUgQWJzb2x1dGUgZWxlbWVudHMgZmFjdG9yeVxuICovXG52YXIgQWJzb2x1dGVFbGVtZW50ID0gcmVxdWlyZSgnLi4vLi4vd3JpdGUvY3JlYXRpb24vZWxlbWVudHMvYWJzb2x1dGUtZWxlbWVudCcpO1xudmFyIFJlbGF0aXZlRWxlbWVudCA9IHJlcXVpcmUoJy4uLy4uL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3JlbGF0aXZlLWVsZW1lbnQnKTtcblxuZnVuY3Rpb24gaXNPYmplY3QoYSkgeyByZXR1cm4gYSAhPSBudWxsICYmIGEuY29uc3RydWN0b3IgPT09IE9iamVjdDsgfVxuZnVuY3Rpb24gY2xvbmVPYmplY3QoZGVzdCwgc3JjKSB7XG5cdGZvciAodmFyIHByb3AgaW4gc3JjKSB7XG5cdFx0aWYgKHNyYy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuXHRcdFx0aWYgKCEoQXJyYXkuaXNBcnJheShzcmNbcHJvcF0pIHx8IGlzT2JqZWN0KHNyY1twcm9wXSkpKSB7XG5cdFx0XHRcdGRlc3RbcHJvcF0gPSBzcmNbcHJvcF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGNsb25lQWJzb2x1dGUoYWJzU3JjKSB7XG5cdHZhciByZXR1cm5lZCA9IG5ldyBBYnNvbHV0ZUVsZW1lbnQoJycsIDAsIDAsICcnLCAwKTtcblx0Y2xvbmVPYmplY3QocmV0dXJuZWQsIGFic1NyYyk7XG5cdHJldHVybmVkLnRvcCA9IDA7XG5cdHJldHVybmVkLmJvdHRvbSA9IC0xO1xuXHRpZiAoYWJzU3JjLmFiY2VsZW0pIHtcblx0XHRyZXR1cm5lZC5hYmNlbGVtID0ge307XG5cdFx0Y2xvbmVPYmplY3QocmV0dXJuZWQuYWJjZWxlbSwgYWJzU3JjLmFiY2VsZW0pO1xuXHRcdGlmIChyZXR1cm5lZC5hYmNlbGVtLmVsX3R5cGUgPT09IFwibm90ZVwiKVxuXHRcdFx0cmV0dXJuZWQuYWJjZWxlbS5lbF90eXBlID0gJ3RhYk51bWJlcic7XG5cdH1cblx0Ly8gVE9ETy1QRVI6IFRoaXMgZml4ZXMgdGhlIGNsYXNzZXMgYmVjYXVzZSB0aGUgZWxlbWVudCBpc24ndCBjcmVhdGVkIGF0IHRoZSByaWdodCB0aW1lLlxuXHRhYnNTcmMuY2xvbmVkID0gcmV0dXJuZWRcblx0cmV0dXJuIHJldHVybmVkO1xufVxuXG5mdW5jdGlvbiBjbG9uZUFic29sdXRlQW5kUmVsYXRpdmVzKGFic1NyYywgcGx1Z2luKSB7XG5cdHZhciByZXR1cm5lZCA9IGNsb25lQWJzb2x1dGUoYWJzU3JjKTtcblx0aWYgKHBsdWdpbikge1xuXHRcdHZhciBjaGlsZHJlbiA9IGFic1NyYy5jaGlsZHJlbjtcblx0XHQvLyBwcm9jZWVkIHdpdGggcmVsYXRpdmUgYXMgd2VsbFxuXHRcdHZhciBmaXJzdCA9IHRydWU7XG5cdFx0Zm9yICh2YXIgaWkgPSAwOyBpaSA8IGNoaWxkcmVuLmxlbmd0aDsgaWkrKykge1xuXHRcdFx0dmFyIGNoaWxkID0gY2hpbGRyZW5baWldO1xuXHRcdFx0dmFyIHJlbGF0aXZlID0gbmV3IFJlbGF0aXZlRWxlbWVudCgnJywgMCwgMCwgMCwgJycpO1xuXHRcdFx0Y2xvbmVPYmplY3QocmVsYXRpdmUsIGNoaWxkKTtcblx0XHRcdGZpcnN0ID0gcGx1Z2luLnRhYmxhdHVyZS5zZXRSZWxhdGl2ZShjaGlsZCwgcmVsYXRpdmUsIGZpcnN0KTtcblx0XHRcdHJldHVybmVkLmNoaWxkcmVuLnB1c2gocmVsYXRpdmUpO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmV0dXJuZWQ7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkVGFiQWJzb2x1dGUocGx1Z2luLCBhYnNYLCByZWxYKSB7XG5cdHZhciB0YWJJY29uID0gJ3RhYi50aW55Jztcblx0dmFyIHRhYllQb3MgPSA3LjU7XG5cdGlmIChwbHVnaW4uaXNUYWJCaWcpIHtcblx0XHR0YWJJY29uID0gJ3RhYi5iaWcnO1xuXHRcdHRhYllQb3MgPSAxMDtcblx0fVxuXHR2YXIgZWxlbWVudCA9IHtcblx0XHRlbF90eXBlOiBcInRhYlwiLFxuXHRcdGljb246IHRhYkljb24sXG5cdFx0WXBvczogdGFiWVBvc1xuXHR9O1xuXG5cdC8vIE9mZnNldCB0aGUgVEFCIHN5bWJvbCBwb3NpdGlvbiBpZiBzcGVjaWZpZWQgaW4gdGhlIHRhYiBkZXNjcmlwdGlvblxuXHR0YWJZUG9zICs9IHBsdWdpbi50YWJTeW1ib2xPZmZzZXQ7XG5cblx0Ly8gRm9yIHRhYmxhdHVyZSBsaWtlIHdoaXN0bGUgdGFiIHdoZXJlIHlvdSB3YW50IHRoZSBUQUIgc3ltYm9sIGhpZGRlblxuXHRpZiAoIXBsdWdpbi5oaWRlVGFiU3ltYm9sKSB7XG5cblx0XHR2YXIgdGFiQWJzb2x1dGUgPSBuZXcgQWJzb2x1dGVFbGVtZW50KGVsZW1lbnQsIDAsIDAsIFwic3ltYm9sXCIsIDApO1xuXHRcdHRhYkFic29sdXRlLnggPSBhYnNYO1xuXHRcdHZhciB0YWJSZWxhdGl2ZSA9IG5ldyBSZWxhdGl2ZUVsZW1lbnQodGFiSWNvbiwgMCwgMCwgNy41LCBcInRhYlwiKTtcblx0XHR0YWJSZWxhdGl2ZS54ID0gcmVsWDtcblx0XHR0YWJBYnNvbHV0ZS5jaGlsZHJlbi5wdXNoKHRhYlJlbGF0aXZlKTtcblx0XHRpZiAodGFiQWJzb2x1dGUuYWJjZWxlbS5lbF90eXBlID09ICd0YWInKSB7XG5cdFx0XHR0YWJSZWxhdGl2ZS5waXRjaCA9IHRhYllQb3M7XG5cdFx0fVxuXG5cdH1cblx0cmV0dXJuIHRhYkFic29sdXRlO1xufVxuXG5mdW5jdGlvbiBseXJpY3NEaW0oYWJzKSB7XG5cdGlmIChhYnMuZXh0cmEpIHtcblx0XHRmb3IgKHZhciBpaSA9IDA7IGlpIDwgYWJzLmV4dHJhLmxlbmd0aDsgaWkrKykge1xuXHRcdFx0dmFyIGV4dHJhID0gYWJzLmV4dHJhW2lpXTtcblx0XHRcdGlmIChleHRyYS50eXBlID09ICdseXJpYycpIHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRib3R0b206IGV4dHJhLmJvdHRvbSxcblx0XHRcdFx0XHRoZWlnaHQ6IGV4dHJhLmhlaWdodFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIFRhYkFic29sdXRlRWxlbWVudHMoKSB7XG5cdC8vY29uc29sZS5sb2coXCJSRU5ERVIgVGFiQWJzb2x1dGVFbGVtZW50cyBjb25zdHJ1Y3RvclwiKVxuXHR0aGlzLmFjY2lkZW50YWxzID0gbnVsbDtcbn1cblxuZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YWZmU2l6ZShzdGFmZkdyb3VwKSB7XG5cdHZhciByZXR1cm5lZCA9IDA7XG5cdGZvciAodmFyIGlpID0gMDsgaWkgPCBzdGFmZkdyb3VwLmxlbmd0aDsgaWkrKykge1xuXHRcdGlmICghc3RhZmZHcm91cFtpaV0udGFiTmFtZUluZm9zKSByZXR1cm5lZCsrO1xuXHR9XG5cdHJldHVybiByZXR1cm5lZDtcbn1cblxuZnVuY3Rpb24gYnVpbGRSZWxhdGl2ZVRhYk5vdGUocGx1Z2luLCByZWxYLCBkZWYsIGN1ck5vdGUsIGlzR3JhY2UpIHtcblx0dmFyIHN0ck5vdGUgPSBjdXJOb3RlLm51bTtcblx0aWYgKGN1ck5vdGUubm90ZS5xdWFydGVyICE9IG51bGwpIHtcblx0XHQvLyBhZGQgdGFiIHF1YXJ0ZXIgPT4gbmVlZHMgdG8gc3RyaW5nIGNvbnZlcnNpb24gdGhlbiBcblx0XHRzdHJOb3RlID0gc3RyTm90ZS50b1N0cmluZygpO1xuXHRcdHN0ck5vdGUgKz0gY3VyTm90ZS5ub3RlLnF1YXJ0ZXI7XG5cdH1cblx0dmFyIHBpdGNoID0gcGx1Z2luLnNlbWFudGljcy5zdHJpbmdUb1BpdGNoKGN1ck5vdGUuc3RyKTtcblx0ZGVmLm5vdGVzLnB1c2goeyBudW06IHN0ck5vdGUsIHN0cjogY3VyTm90ZS5zdHIsIHBpdGNoOiBjdXJOb3RlLm5vdGUuZW1pdCgpIH0pO1xuXHR2YXIgb3B0ID0ge1xuXHRcdHR5cGU6ICd0YWJOdW1iZXInXG5cdH07XG5cdHZhciB0YWJOb3RlUmVsYXRpdmUgPSBuZXcgUmVsYXRpdmVFbGVtZW50KFxuXHRcdHN0ck5vdGUsIDAsIDAsIHBpdGNoICsgMC4zLCBvcHQpO1xuXHR0YWJOb3RlUmVsYXRpdmUueCA9IHJlbFg7XG5cdHRhYk5vdGVSZWxhdGl2ZS5pc0dyYWNlID0gaXNHcmFjZTtcblx0dGFiTm90ZVJlbGF0aXZlLmlzQWx0ZXJlZCA9IGN1ck5vdGUubm90ZS5pc0FsdGVyZWQ7XG5cdHJldHVybiB0YWJOb3RlUmVsYXRpdmU7XG59XG5cbmZ1bmN0aW9uIGdldFhHcmFjZShhYnMsIGluZGV4KSB7XG5cdHZhciBmb3VuZCA9IDA7XG5cdGlmIChhYnMuZXh0cmEpIHtcblx0XHRmb3IgKHZhciBpaSA9IDA7IGlpIDwgYWJzLmV4dHJhLmxlbmd0aDsgaWkrKykge1xuXHRcdFx0aWYgKGFicy5leHRyYVtpaV0uYy5pbmRleE9mKCdub3RlaGVhZHMnKSA+PSAwKSB7XG5cdFx0XHRcdGlmIChmb3VuZCA9PT0gaW5kZXgpIHtcblx0XHRcdFx0XHRyZXR1cm4gYWJzLmV4dHJhW2lpXS54ICsgYWJzLmV4dHJhW2lpXS53IC8gMjtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRmb3VuZCsrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiAtMTtcbn1cblxuZnVuY3Rpb24gZ3JhY2VJblJlc3QoYWJzRWxlbSkge1xuXHRpZiAoYWJzRWxlbS5hYmNlbGVtKSB7XG5cdFx0dmFyIGVsZW0gPSBhYnNFbGVtLmFiY2VsZW07XG5cdFx0aWYgKGVsZW0ucmVzdCkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZ3JhY2Vub3Rlcztcblx0XHR9XG5cdH1cblx0cmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRUb051bWJlcihwbHVnaW4sIHBpdGNoZXMsIGdyYWNlTm90ZXMpIHtcblx0dmFyIHRhYlBvcyA9IHBsdWdpbi5zZW1hbnRpY3Mubm90ZXNUb051bWJlcihwaXRjaGVzLCBncmFjZU5vdGVzKTtcblx0aWYgKHRhYlBvcy5lcnJvcikge1xuXHRcdHBsdWdpbi5zZXRFcnJvcih0YWJQb3MuZXJyb3IpO1xuXHRcdHJldHVybiB0YWJQb3M7IC8vIGdpdmUgdXAgb24gZXJyb3IgaGVyZVxuXHR9XG5cdGlmICh0YWJQb3MuZ3JhY2VzICYmIHRhYlBvcy5ub3Rlcykge1xuXHRcdC8vIGFkZCBncmFjZXMgdG8gbGFzdCBub3RlIGluIG5vdGVzXG5cdFx0dmFyIHBvc05vdGUgPSB0YWJQb3Mubm90ZXMubGVuZ3RoIC0gMTtcblx0XHR0YWJQb3Mubm90ZXNbcG9zTm90ZV0uZ3JhY2VzID0gdGFiUG9zLmdyYWNlcztcblx0fVxuXHRyZXR1cm4gdGFiUG9zO1xufVxuXG5mdW5jdGlvbiBidWlsZEdyYWNlUmVsYXRpdmVzRm9yUmVzdChwbHVnaW4sIGFicywgYWJzQ2hpbGQsIGdyYWNlTm90ZXMsIHRhYlZvaWNlKSB7XG5cdGZvciAodmFyIG1tID0gMDsgbW0gPCBncmFjZU5vdGVzLmxlbmd0aDsgbW0rKykge1xuXHRcdHZhciBkZWZHcmFjZSA9IHsgZWxfdHlwZTogXCJub3RlXCIsIHN0YXJ0Q2hhcjogYWJzQ2hpbGQuYWJjZWxlbS5zdGFydENoYXIsIGVuZENoYXI6IGFic0NoaWxkLmFiY2VsZW0uZW5kQ2hhciwgbm90ZXM6IFtdLCBncmFjZTogdHJ1ZSB9O1xuXHRcdHZhciBncmFjZVggPSBnZXRYR3JhY2UoYWJzQ2hpbGQsIG1tKTtcblx0XHR2YXIgY3VyR3JhY2UgPSBncmFjZU5vdGVzW21tXTtcblx0XHR2YXIgdGFiR3JhY2VSZWxhdGl2ZSA9IGJ1aWxkUmVsYXRpdmVUYWJOb3RlKHBsdWdpbiwgZ3JhY2VYLCBkZWZHcmFjZSwgY3VyR3JhY2UsIHRydWUpO1xuXHRcdGFicy5jaGlsZHJlbi5wdXNoKHRhYkdyYWNlUmVsYXRpdmUpO1xuXHRcdHRhYlZvaWNlLnB1c2goZGVmR3JhY2UpO1xuXHR9XG59XG5cbi8qKlxuICogQnVpbGQgdGFiIGFic29sdXRlcyBieSBzY2FubmluZyBjdXJyZW50IHN0YWZmIGxpbmUgYWJzb2x1dGUgYXJyYXlcbiAqIEBwYXJhbSB7Kn0gc3RhZmZBYnNvbHV0ZVxuICovXG5UYWJBYnNvbHV0ZUVsZW1lbnRzLnByb3RvdHlwZS5idWlsZCA9IGZ1bmN0aW9uIChwbHVnaW4sXG5cdHN0YWZmQWJzb2x1dGUsXG5cdHRhYlZvaWNlLFxuXHR2b2ljZUluZGV4LFxuXHRzdGFmZkluZGV4LFxuXHRrZXlTaWcsXG5cdHRhYlZvaWNlSW5kZXgpIHtcblx0Ly9jb25zb2xlLmxvZyhcIlJFTkRFUiBUYWJBYnNvbHV0ZUVsZW1lbnRzIGJ1aWxkXCIpXG5cdHZhciBzdGFmZlNpemUgPSBnZXRJbml0aWFsU3RhZmZTaXplKHN0YWZmQWJzb2x1dGUpO1xuXHR2YXIgc291cmNlID0gc3RhZmZBYnNvbHV0ZVtzdGFmZkluZGV4ICsgdm9pY2VJbmRleF07XG5cdHZhciBkZXN0ID0gc3RhZmZBYnNvbHV0ZVt0YWJWb2ljZUluZGV4XTtcblx0dmFyIHRhYlBvcyA9IG51bGw7XG5cdHZhciBkZWZOb3RlID0gbnVsbDtcblx0aWYgKHNvdXJjZS5jaGlsZHJlblswXS5hYmNlbGVtLmVsX3R5cGUgIT0gJ2NsZWYnKSB7XG5cdFx0Ly8ga2V5c2lnIG1pc3NpbmcgPT4gcHJvdmlkZSBvbmUgZm9yIHRhYnNcblx0XHRpZiAoa2V5U2lnICE9ICdub25lJykge1xuXHRcdFx0c291cmNlLmNoaWxkcmVuLnNwbGljZSgwLCAwLCBrZXlTaWcpO1xuXHRcdH1cblx0fVxuXHRmb3IgKHZhciBpaSA9IDA7IGlpIDwgc291cmNlLmNoaWxkcmVuLmxlbmd0aDsgaWkrKykge1xuXHRcdHZhciBhYnNDaGlsZCA9IHNvdXJjZS5jaGlsZHJlbltpaV07XG5cdFx0dmFyIGFic1ggPSBhYnNDaGlsZC54O1xuXHRcdHZhciByZWxYID0gYWJzWDtcblx0XHQvLyBpZiAoYWJzQ2hpbGQuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuXHRcdC8vICAgcmVsWCA9IGFic0NoaWxkLmNoaWxkcmVuWzBdLng7XG5cdFx0Ly8gfVxuXHRcdGlmICgoYWJzQ2hpbGQuaXNDbGVmKSkge1xuXHRcdFx0ZGVzdC5jaGlsZHJlbi5wdXNoKGJ1aWxkVGFiQWJzb2x1dGUocGx1Z2luLCBhYnNYLCByZWxYKSk7XG5cdFx0XHRpZiAoYWJzQ2hpbGQuYWJjZWxlbS50eXBlLmluZGV4T2YoJy04JykgPj0gMCkgcGx1Z2luLnNlbWFudGljcy5jbGVmVHJhbnNwb3NlID0gLTEyXG5cdFx0XHRpZiAoYWJzQ2hpbGQuYWJjZWxlbS50eXBlLmluZGV4T2YoJys4JykgPj0gMCkgcGx1Z2luLnNlbWFudGljcy5jbGVmVHJhbnNwb3NlID0gMTJcblx0XHR9XG5cdFx0c3dpdGNoIChhYnNDaGlsZC50eXBlKSB7XG5cdFx0XHRjYXNlICdzdGFmZi1leHRyYSBrZXktc2lnbmF0dXJlJzpcblx0XHRcdFx0Ly8gcmVmcmVzaCBrZXkgYWNjaWRlbnRhbHNcblx0XHRcdFx0dGhpcy5hY2NpZGVudGFscyA9IGFic0NoaWxkLmFiY2VsZW0uYWNjaWRlbnRhbHM7XG5cdFx0XHRcdHBsdWdpbi5zZW1hbnRpY3MuYWNjaWRlbnRhbHMgPSB0aGlzLmFjY2lkZW50YWxzO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2Jhcic6XG5cdFx0XHRcdHBsdWdpbi5zZW1hbnRpY3MubWVhc3VyZUFjY2lkZW50YWxzID0ge31cblx0XHRcdFx0dmFyIGxhc3RCYXIgPSBmYWxzZTtcblx0XHRcdFx0aWYgKGlpID09PSBzb3VyY2UuY2hpbGRyZW4ubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRcdC8vIHVzZWQgZm9yIGZpbmFsIGxpbmUgYmFyIGRyYXdpbmdcblx0XHRcdFx0XHQvLyBmb3IgbXVsdGkgdGFicyAvIG11bHRpIHN0YXZlc1xuXHRcdFx0XHRcdGxhc3RCYXIgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHZhciBjbG9uZWQgPSBjbG9uZUFic29sdXRlQW5kUmVsYXRpdmVzKGFic0NoaWxkLCBwbHVnaW4pO1xuXHRcdFx0XHRpZiAoY2xvbmVkLmFiY2VsZW0uYmFyTnVtYmVyKSB7XG5cdFx0XHRcdFx0ZGVsZXRlIGNsb25lZC5hYmNlbGVtLmJhck51bWJlcjtcblx0XHRcdFx0XHRmb3IgKHZhciBibiA9IDA7IGJuIDwgY2xvbmVkLmNoaWxkcmVuLmxlbmd0aDsgYm4rKykge1xuXHRcdFx0XHRcdFx0aWYgKGNsb25lZC5jaGlsZHJlbltibl0udHlwZSA9PT0gXCJiYXJOdW1iZXJcIikge1xuXHRcdFx0XHRcdFx0XHRjbG9uZWQuY2hpbGRyZW4uc3BsaWNlKGJuLCAxKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGNsb25lZC5hYmNlbGVtLmxhc3RCYXIgPSBsYXN0QmFyO1xuXHRcdFx0XHRkZXN0LmNoaWxkcmVuLnB1c2goY2xvbmVkKTtcblx0XHRcdFx0dGFiVm9pY2UucHVzaCh7XG5cdFx0XHRcdFx0ZWxfdHlwZTogYWJzQ2hpbGQuYWJjZWxlbS5lbF90eXBlLFxuXHRcdFx0XHRcdHR5cGU6IGFic0NoaWxkLmFiY2VsZW0udHlwZSxcblx0XHRcdFx0XHRlbmRDaGFyOiBhYnNDaGlsZC5hYmNlbGVtLmVuZENoYXIsXG5cdFx0XHRcdFx0c3RhcnRDaGFyOiBhYnNDaGlsZC5hYmNlbGVtLnN0YXJ0Q2hhcixcblx0XHRcdFx0XHRhYnNlbGVtOiBjbG9uZWRcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAncmVzdCc6XG5cdFx0XHRcdHZhciByZXN0R3JhY2VzID0gZ3JhY2VJblJlc3QoYWJzQ2hpbGQpO1xuXHRcdFx0XHRpZiAocmVzdEdyYWNlcykge1xuXHRcdFx0XHRcdC8vIHRvIG51bWJlciBjb252ZXJzaW9uIFxuXHRcdFx0XHRcdHRhYlBvcyA9IGNvbnZlcnRUb051bWJlcihwbHVnaW4sIG51bGwsIHJlc3RHcmFjZXMpO1xuXHRcdFx0XHRcdGlmICh0YWJQb3MuZXJyb3IpIHJldHVybjtcblx0XHRcdFx0XHQvLyBidWlsZCByZWxhdGl2ZSBmb3IgZ3JhY2Vcblx0XHRcdFx0XHRkZWZHcmFjZSA9IHsgZWxfdHlwZTogXCJub3RlXCIsIHN0YXJ0Q2hhcjogYWJzQ2hpbGQuYWJjZWxlbS5zdGFydENoYXIsIGVuZENoYXI6IGFic0NoaWxkLmFiY2VsZW0uZW5kQ2hhciwgbm90ZXM6IFtdLCBncmFjZTogdHJ1ZSB9O1xuXHRcdFx0XHRcdGJ1aWxkR3JhY2VSZWxhdGl2ZXNGb3JSZXN0KHBsdWdpbiwgYWJzLCBhYnNDaGlsZCwgdGFiUG9zLmdyYWNlcywgdGFiVm9pY2UpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnbm90ZSc6XG5cdFx0XHRcdHZhciBhYnMgPSBjbG9uZUFic29sdXRlKGFic0NoaWxkKTtcblx0XHRcdFx0YWJzLnggPSBhYnNDaGlsZC5oZWFkc1swXS54ICsgYWJzQ2hpbGQuaGVhZHNbMF0udyAvIDI7IC8vIGNlbnRlciB0aGUgbnVtYmVyXG5cdFx0XHRcdGFicy5seXJpY0RpbSA9IGx5cmljc0RpbShhYnNDaGlsZCk7XG5cdFx0XHRcdHZhciBwaXRjaGVzID0gYWJzQ2hpbGQuYWJjZWxlbS5waXRjaGVzO1xuXHRcdFx0XHR2YXIgZ3JhY2VOb3RlcyA9IGFic0NoaWxkLmFiY2VsZW0uZ3JhY2Vub3Rlcztcblx0XHRcdFx0YWJzLnR5cGUgPSAndGFiTnVtYmVyJztcblx0XHRcdFx0Ly8gdG8gbnVtYmVyIGNvbnZlcnNpb24gXG5cdFx0XHRcdHRhYlBvcyA9IGNvbnZlcnRUb051bWJlcihwbHVnaW4sIHBpdGNoZXMsIGdyYWNlTm90ZXMpO1xuXHRcdFx0XHRpZiAodGFiUG9zLmVycm9yKSByZXR1cm47XG5cdFx0XHRcdGlmICh0YWJQb3MuZ3JhY2VzKSB7XG5cdFx0XHRcdFx0Ly8gYWRkIGdyYWNlcyB0byBsYXN0IG5vdGUgaW4gbm90ZXNcblx0XHRcdFx0XHR2YXIgcG9zTm90ZSA9IHRhYlBvcy5ub3Rlcy5sZW5ndGggLSAxO1xuXHRcdFx0XHRcdHRhYlBvcy5ub3Rlc1twb3NOb3RlXS5ncmFjZXMgPSB0YWJQb3MuZ3JhY2VzO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIGJ1aWxkIHJlbGF0aXZlXG5cdFx0XHRcdGRlZk5vdGUgPSB7IGVsX3R5cGU6IFwibm90ZVwiLCBzdGFydENoYXI6IGFic0NoaWxkLmFiY2VsZW0uc3RhcnRDaGFyLCBlbmRDaGFyOiBhYnNDaGlsZC5hYmNlbGVtLmVuZENoYXIsIG5vdGVzOiBbXSB9O1xuXHRcdFx0XHRmb3IgKHZhciBsbCA9IDA7IGxsIDwgdGFiUG9zLm5vdGVzLmxlbmd0aDsgbGwrKykge1xuXHRcdFx0XHRcdHZhciBjdXJOb3RlID0gdGFiUG9zLm5vdGVzW2xsXTtcblx0XHRcdFx0XHRpZiAoY3VyTm90ZS5ncmFjZXMpIHtcblx0XHRcdFx0XHRcdGZvciAodmFyIG1tID0gMDsgbW0gPCBjdXJOb3RlLmdyYWNlcy5sZW5ndGg7IG1tKyspIHtcblx0XHRcdFx0XHRcdFx0dmFyIGRlZkdyYWNlID0geyBlbF90eXBlOiBcIm5vdGVcIiwgc3RhcnRDaGFyOiBhYnNDaGlsZC5hYmNlbGVtLnN0YXJ0Q2hhciwgZW5kQ2hhcjogYWJzQ2hpbGQuYWJjZWxlbS5lbmRDaGFyLCBub3RlczogW10sIGdyYWNlOiB0cnVlIH07XG5cdFx0XHRcdFx0XHRcdHZhciBncmFjZVggPSBnZXRYR3JhY2UoYWJzQ2hpbGQsIG1tKTtcblx0XHRcdFx0XHRcdFx0dmFyIGN1ckdyYWNlID0gY3VyTm90ZS5ncmFjZXNbbW1dO1xuXHRcdFx0XHRcdFx0XHR2YXIgdGFiR3JhY2VSZWxhdGl2ZSA9IGJ1aWxkUmVsYXRpdmVUYWJOb3RlKHBsdWdpbiwgZ3JhY2VYLCBkZWZHcmFjZSwgY3VyR3JhY2UsIHRydWUpO1xuXHRcdFx0XHRcdFx0XHRhYnMuY2hpbGRyZW4ucHVzaCh0YWJHcmFjZVJlbGF0aXZlKTtcblx0XHRcdFx0XHRcdFx0dGFiVm9pY2UucHVzaChkZWZHcmFjZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHZhciB0YWJOb3RlUmVsYXRpdmUgPSBidWlsZFJlbGF0aXZlVGFiTm90ZShwbHVnaW4sIGFicy54ICsgYWJzQ2hpbGQuaGVhZHNbbGxdLmR4LCBkZWZOb3RlLCBjdXJOb3RlLCBmYWxzZSk7XG5cdFx0XHRcdFx0YWJzLmNoaWxkcmVuLnB1c2godGFiTm90ZVJlbGF0aXZlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZGVmTm90ZS5ub3Rlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0ZGVmTm90ZS5hYnNlbGVtID0gYWJzO1xuXHRcdFx0XHRcdHRhYlZvaWNlLnB1c2goZGVmTm90ZSk7XG5cdFx0XHRcdFx0ZGVzdC5jaGlsZHJlbi5wdXNoKGFicyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRhYkFic29sdXRlRWxlbWVudHM7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/tablatures/render/tab-absolute-elements.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/tablatures/render/tab-renderer.js":
/*!******************************************************************!*\
  !*** ./node_modules/abcjs/src/tablatures/render/tab-renderer.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/* eslint-disable no-debugger */\nvar VoiceElement = __webpack_require__(/*! ../../write/creation/elements/voice-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/voice-element.js\");\nvar TabAbsoluteElements = __webpack_require__(/*! ./tab-absolute-elements */ \"(ssr)/./node_modules/abcjs/src/tablatures/render/tab-absolute-elements.js\");\nvar spacing = __webpack_require__(/*! ../../write/helpers/spacing */ \"(ssr)/./node_modules/abcjs/src/write/helpers/spacing.js\");\n\nfunction initSpecialY() {\n\treturn {\n\t\ttempoHeightAbove: 0,\n\t\tpartHeightAbove: 0,\n\t\tvolumeHeightAbove: 0,\n\t\tdynamicHeightAbove: 0,\n\t\tendingHeightAbove: 0,\n\t\tchordHeightAbove: 0,\n\t\tlyricHeightAbove: 0,\n\t\tlyricHeightBelow: 0,\n\t\tchordHeightBelow: 0,\n\t\tvolumeHeightBelow: 0,\n\t\tdynamicHeightBelow: 0\n\t};\n}\n\nfunction getLyricHeight(voice) {\n\tvar maxLyricHeight = 0;\n\tfor (var ii = 0; ii < voice.children.length; ii++) {\n\t\tvar curAbs = voice.children[ii];\n\t\tif (curAbs.specialY) {\n\t\t\tif (curAbs.specialY.lyricHeightBelow > maxLyricHeight) {\n\t\t\t\tmaxLyricHeight = curAbs.specialY.lyricHeightBelow;\n\t\t\t}\n\t\t}\n\t}\n\treturn maxLyricHeight; // add spacing\n}\n\nfunction buildTabName(plugin, renderer, dest) {\n\tvar stringSemantics = plugin.semantics;\n\tvar textSize = renderer.controller.getTextSize;\n\tvar tabName = stringSemantics.tabInfos(plugin);\n\tvar suppress = stringSemantics.suppress(plugin);\n\tvar doDraw = true;\n\n\tif (suppress) {\n\t\tdoDraw = false\n\t}\n\n\n\tif (doDraw) {\n\t\tvar size = textSize.calc(tabName, 'tablabelfont', 'text instrumentname');\n\t\tdest.tabNameInfos = {\n\t\t\ttextSize: { height: size.height, width: size.width },\n\t\t\tname: tabName\n\t\t};\n\t\treturn size.height;\n\t}\n\treturn 0\n\n}\n\nfunction islastTabInStaff(index, staffGroup) {\n\tif (staffGroup[index].isTabStaff) {\n\t\tif (index === staffGroup.length - 1) return true;\n\t\tif (staffGroup[index + 1].isTabStaff) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction getStaffNumbers(staffs) {\n\tvar nbStaffs = 0;\n\tfor (var ii = 0; ii < staffs.length; ii++) {\n\t\tif (!staffs[ii].isTabStaff) {\n\t\t\tnbStaffs++;\n\t\t}\n\t}\n\treturn nbStaffs;\n}\n\nfunction getParentStaffIndex(staffs, index) {\n\tfor (var ii = index; ii >= 0; ii--) {\n\t\tif (!staffs[ii].isTabStaff) {\n\t\t\treturn ii;\n\t\t}\n\t}\n\treturn -1;\n}\n\n\nfunction linkStaffAndTabs(staffs) {\n\tfor (var ii = 0; ii < staffs.length; ii++) {\n\t\tif (staffs[ii].isTabStaff) {\n\t\t\t// link to parent staff\n\t\t\tvar parentIndex = getParentStaffIndex(staffs, ii);\n\t\t\tstaffs[ii].hasStaff = staffs[parentIndex];\n\t\t\tif (!staffs[parentIndex].hasTab) staffs[parentIndex].hasTab = [];\n\t\t\tstaffs[parentIndex].hasTab.push(staffs[ii]);\n\t\t}\n\t}\n}\n\nfunction isMultiVoiceSingleStaff(staffs, parent) {\n\tif (getStaffNumbers(staffs) === 1) {\n\t\tif (parent.voices.length > 1) return true;\n\t}\n\treturn false;\n}\n\n\nfunction getNextTabPos(tabIndex, staffGroup) {\n\tvar startIndex = 0;\n\tvar handledVoices = 0;\n\tvar inProgress = true;\n\tvar nbVoices = 0;\n\twhile (inProgress) {\n\t\t//for (var ii = 0; ii < staffGroup.length; ii++) {\n\t\tif (!staffGroup[startIndex])\n\t\t\treturn -1;\n\t\tif (!staffGroup[startIndex].isTabStaff) {\n\t\t\tnbVoices = staffGroup[startIndex].voices.length; // get number of staff voices\n\t\t}\n\t\tif (staffGroup[startIndex].isTabStaff) {\n\t\t\thandledVoices++;\n\t\t\tif (islastTabInStaff(startIndex, staffGroup)) {\n\t\t\t\tif (handledVoices < nbVoices) return startIndex + 1;\n\t\t\t}\n\t\t} else {\n\t\t\thandledVoices = 0;\n\t\t\tif (startIndex >= tabIndex) {\n\t\t\t\tif (startIndex + 1 == staffGroup.length) return startIndex + 1;\n\t\t\t\tif (!staffGroup[startIndex + 1].isTabStaff) return startIndex + 1;\n\t\t\t}\n\t\t}\n\t\tstartIndex++;\n\t\t// out of space case\n\t\tif (startIndex > staffGroup.length) return -1;\n\t}\n}\n\nfunction getLastStaff(staffs, lastTab) {\n\tfor (var ii = lastTab; ii >= 0; ii--) {\n\t\tif (!staffs[ii].isTabStaff) {\n\t\t\treturn staffs[ii];\n\t\t}\n\t}\n\treturn null;\n}\n\nfunction checkVoiceKeySig(voices, ii) {\n\tvar curVoice = voices[ii];\n\t// on multivoice multistaff only the first voice has key signature\n\t// folling consecutive do not have one => we should provide the first voice key sig back then\n\tvar elem0 = curVoice.children[0].abcelem;\n\tif (elem0.el_type === 'clef') return null;\n\tif (ii == 0) {\n\t\t// not found => clef=none case\n\t\treturn 'none';\n\t}\n\treturn voices[ii - 1].children[0];\n}\n\nfunction tabRenderer(plugin, renderer, line, staffIndex) {\n\t//console.log(\"RENDER tabRenderer\")\n\tvar absolutes = new TabAbsoluteElements();\n\tvar tabStaff = {\n\t\tclef: {\n\t\t\ttype: 'TAB'\n\t\t}\n\t};\n\tvar tabSize = (plugin.linePitch * plugin.nbLines);\n\tvar staffs = line.staff;\n\tif (staffs) {\n\t\t// give up on staffline=0 in key \n\t\tvar firstStaff = staffs[0];\n\t\tif (firstStaff) {\n\t\t\tif (firstStaff.clef) {\n\t\t\t\tif (firstStaff.clef.stafflines == 0) {\n\t\t\t\t\tplugin.setError(\"No tablatures when stafflines=0\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tstaffs.splice(\n\t\t\tstaffs.length, 0,\n\t\t\ttabStaff\n\t\t);\n\t}\n\tvar staffGroup = line.staffGroup;\n\n\tvar voices = staffGroup.voices;\n\tvar firstVoice = voices[0];\n\t// take lyrics into account if any\n\tvar lyricsHeight = getLyricHeight(firstVoice);\n\tvar padd = 3;\n\tvar prevIndex = staffIndex;\n\tvar previousStaff = staffGroup.staffs[prevIndex];\n\tvar tabTop = tabSize + padd - previousStaff.bottom - lyricsHeight;\n\tif (previousStaff.isTabStaff) {\n\t\ttabTop = previousStaff.top;\n\t}\n\tvar staffGroupInfos = {\n\t\tbottom: -1,\n\t\tisTabStaff: true,\n\t\tspecialY: initSpecialY(),\n\t\tlines: plugin.nbLines,\n\t\tlinePitch: plugin.linePitch,\n\t\tdy: 0.15,\n\t\ttop: tabTop,\n\t};\n\tvar nextTabPos = getNextTabPos(staffIndex, staffGroup.staffs);\n\tif (nextTabPos === -1)\n\t\treturn;\n\tstaffGroupInfos.parentIndex = nextTabPos - 1;\n\tstaffGroup.staffs.splice(nextTabPos, 0, staffGroupInfos);\n\t// staffGroup.staffs.push(staffGroupInfos);\n\tstaffGroup.height += tabSize + padd;\n\tvar parentStaff = getLastStaff(staffGroup.staffs, nextTabPos);\n\tvar nbVoices = 1;\n\tif (isMultiVoiceSingleStaff(staffGroup.staffs, parentStaff)) {\n\t\tnbVoices = parentStaff.voices.length;\n\t}\n\t// build from staff\n\ttabStaff.voices = [];\n\tfor (var ii = 0; ii < nbVoices; ii++) {\n\t\tvar tabVoice = new VoiceElement(0, 0);\n\t\tif (ii > 0) tabVoice.duplicate = true;\n\t\tvar nameHeight = buildTabName(plugin, renderer, tabVoice) / spacing.STEP;\n\t\tnameHeight = Math.max(nameHeight, 1) // If there is no label for the tab line, then there needs to be a little padding\n\t\t// This was pushing down the top staff by the tab label height\n\t\t//staffGroup.staffs[staffIndex].top += nameHeight;\n\t\tstaffGroup.staffs[staffIndex].top += 1;\n\t\tstaffGroup.height += nameHeight;\n\t\ttabVoice.staff = staffGroupInfos;\n\t\tvar tabVoiceIndex = voices.length\n\t\tvoices.splice(voices.length, 0, tabVoice);\n\t\tvar keySig = checkVoiceKeySig(voices, ii + staffIndex);\n\t\ttabStaff.voices[ii] = [];\n\t\tabsolutes.build(plugin, voices, tabStaff.voices[ii], ii, staffIndex, keySig, tabVoiceIndex);\n\t}\n\tlinkStaffAndTabs(staffGroup.staffs); // crossreference tabs and staff\n}\n\nmodule.exports = tabRenderer;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3RhYmxhdHVyZXMvcmVuZGVyL3RhYi1yZW5kZXJlci5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBLG1CQUFtQixtQkFBTyxDQUFDLDRIQUE2QztBQUN4RSwwQkFBMEIsbUJBQU8sQ0FBQywwR0FBeUI7QUFDM0QsY0FBYyxtQkFBTyxDQUFDLDRGQUE2Qjs7QUFFbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0IsNEJBQTRCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsd0NBQXdDO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0Isb0JBQW9CO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNCQUFzQixTQUFTO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQSxrQkFBa0Isb0JBQW9CO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix3QkFBd0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0Esb0RBQW9EO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0JBQXdCLFNBQVM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsZUFBZTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvdGFibGF0dXJlcy9yZW5kZXIvdGFiLXJlbmRlcmVyLmpzPzA4ZmYiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tZGVidWdnZXIgKi9cbnZhciBWb2ljZUVsZW1lbnQgPSByZXF1aXJlKCcuLi8uLi93cml0ZS9jcmVhdGlvbi9lbGVtZW50cy92b2ljZS1lbGVtZW50Jyk7XG52YXIgVGFiQWJzb2x1dGVFbGVtZW50cyA9IHJlcXVpcmUoJy4vdGFiLWFic29sdXRlLWVsZW1lbnRzJyk7XG52YXIgc3BhY2luZyA9IHJlcXVpcmUoJy4uLy4uL3dyaXRlL2hlbHBlcnMvc3BhY2luZycpO1xuXG5mdW5jdGlvbiBpbml0U3BlY2lhbFkoKSB7XG5cdHJldHVybiB7XG5cdFx0dGVtcG9IZWlnaHRBYm92ZTogMCxcblx0XHRwYXJ0SGVpZ2h0QWJvdmU6IDAsXG5cdFx0dm9sdW1lSGVpZ2h0QWJvdmU6IDAsXG5cdFx0ZHluYW1pY0hlaWdodEFib3ZlOiAwLFxuXHRcdGVuZGluZ0hlaWdodEFib3ZlOiAwLFxuXHRcdGNob3JkSGVpZ2h0QWJvdmU6IDAsXG5cdFx0bHlyaWNIZWlnaHRBYm92ZTogMCxcblx0XHRseXJpY0hlaWdodEJlbG93OiAwLFxuXHRcdGNob3JkSGVpZ2h0QmVsb3c6IDAsXG5cdFx0dm9sdW1lSGVpZ2h0QmVsb3c6IDAsXG5cdFx0ZHluYW1pY0hlaWdodEJlbG93OiAwXG5cdH07XG59XG5cbmZ1bmN0aW9uIGdldEx5cmljSGVpZ2h0KHZvaWNlKSB7XG5cdHZhciBtYXhMeXJpY0hlaWdodCA9IDA7XG5cdGZvciAodmFyIGlpID0gMDsgaWkgPCB2b2ljZS5jaGlsZHJlbi5sZW5ndGg7IGlpKyspIHtcblx0XHR2YXIgY3VyQWJzID0gdm9pY2UuY2hpbGRyZW5baWldO1xuXHRcdGlmIChjdXJBYnMuc3BlY2lhbFkpIHtcblx0XHRcdGlmIChjdXJBYnMuc3BlY2lhbFkubHlyaWNIZWlnaHRCZWxvdyA+IG1heEx5cmljSGVpZ2h0KSB7XG5cdFx0XHRcdG1heEx5cmljSGVpZ2h0ID0gY3VyQWJzLnNwZWNpYWxZLmx5cmljSGVpZ2h0QmVsb3c7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiBtYXhMeXJpY0hlaWdodDsgLy8gYWRkIHNwYWNpbmdcbn1cblxuZnVuY3Rpb24gYnVpbGRUYWJOYW1lKHBsdWdpbiwgcmVuZGVyZXIsIGRlc3QpIHtcblx0dmFyIHN0cmluZ1NlbWFudGljcyA9IHBsdWdpbi5zZW1hbnRpY3M7XG5cdHZhciB0ZXh0U2l6ZSA9IHJlbmRlcmVyLmNvbnRyb2xsZXIuZ2V0VGV4dFNpemU7XG5cdHZhciB0YWJOYW1lID0gc3RyaW5nU2VtYW50aWNzLnRhYkluZm9zKHBsdWdpbik7XG5cdHZhciBzdXBwcmVzcyA9IHN0cmluZ1NlbWFudGljcy5zdXBwcmVzcyhwbHVnaW4pO1xuXHR2YXIgZG9EcmF3ID0gdHJ1ZTtcblxuXHRpZiAoc3VwcHJlc3MpIHtcblx0XHRkb0RyYXcgPSBmYWxzZVxuXHR9XG5cblxuXHRpZiAoZG9EcmF3KSB7XG5cdFx0dmFyIHNpemUgPSB0ZXh0U2l6ZS5jYWxjKHRhYk5hbWUsICd0YWJsYWJlbGZvbnQnLCAndGV4dCBpbnN0cnVtZW50bmFtZScpO1xuXHRcdGRlc3QudGFiTmFtZUluZm9zID0ge1xuXHRcdFx0dGV4dFNpemU6IHsgaGVpZ2h0OiBzaXplLmhlaWdodCwgd2lkdGg6IHNpemUud2lkdGggfSxcblx0XHRcdG5hbWU6IHRhYk5hbWVcblx0XHR9O1xuXHRcdHJldHVybiBzaXplLmhlaWdodDtcblx0fVxuXHRyZXR1cm4gMFxuXG59XG5cbmZ1bmN0aW9uIGlzbGFzdFRhYkluU3RhZmYoaW5kZXgsIHN0YWZmR3JvdXApIHtcblx0aWYgKHN0YWZmR3JvdXBbaW5kZXhdLmlzVGFiU3RhZmYpIHtcblx0XHRpZiAoaW5kZXggPT09IHN0YWZmR3JvdXAubGVuZ3RoIC0gMSkgcmV0dXJuIHRydWU7XG5cdFx0aWYgKHN0YWZmR3JvdXBbaW5kZXggKyAxXS5pc1RhYlN0YWZmKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGdldFN0YWZmTnVtYmVycyhzdGFmZnMpIHtcblx0dmFyIG5iU3RhZmZzID0gMDtcblx0Zm9yICh2YXIgaWkgPSAwOyBpaSA8IHN0YWZmcy5sZW5ndGg7IGlpKyspIHtcblx0XHRpZiAoIXN0YWZmc1tpaV0uaXNUYWJTdGFmZikge1xuXHRcdFx0bmJTdGFmZnMrKztcblx0XHR9XG5cdH1cblx0cmV0dXJuIG5iU3RhZmZzO1xufVxuXG5mdW5jdGlvbiBnZXRQYXJlbnRTdGFmZkluZGV4KHN0YWZmcywgaW5kZXgpIHtcblx0Zm9yICh2YXIgaWkgPSBpbmRleDsgaWkgPj0gMDsgaWktLSkge1xuXHRcdGlmICghc3RhZmZzW2lpXS5pc1RhYlN0YWZmKSB7XG5cdFx0XHRyZXR1cm4gaWk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiAtMTtcbn1cblxuXG5mdW5jdGlvbiBsaW5rU3RhZmZBbmRUYWJzKHN0YWZmcykge1xuXHRmb3IgKHZhciBpaSA9IDA7IGlpIDwgc3RhZmZzLmxlbmd0aDsgaWkrKykge1xuXHRcdGlmIChzdGFmZnNbaWldLmlzVGFiU3RhZmYpIHtcblx0XHRcdC8vIGxpbmsgdG8gcGFyZW50IHN0YWZmXG5cdFx0XHR2YXIgcGFyZW50SW5kZXggPSBnZXRQYXJlbnRTdGFmZkluZGV4KHN0YWZmcywgaWkpO1xuXHRcdFx0c3RhZmZzW2lpXS5oYXNTdGFmZiA9IHN0YWZmc1twYXJlbnRJbmRleF07XG5cdFx0XHRpZiAoIXN0YWZmc1twYXJlbnRJbmRleF0uaGFzVGFiKSBzdGFmZnNbcGFyZW50SW5kZXhdLmhhc1RhYiA9IFtdO1xuXHRcdFx0c3RhZmZzW3BhcmVudEluZGV4XS5oYXNUYWIucHVzaChzdGFmZnNbaWldKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gaXNNdWx0aVZvaWNlU2luZ2xlU3RhZmYoc3RhZmZzLCBwYXJlbnQpIHtcblx0aWYgKGdldFN0YWZmTnVtYmVycyhzdGFmZnMpID09PSAxKSB7XG5cdFx0aWYgKHBhcmVudC52b2ljZXMubGVuZ3RoID4gMSkgcmV0dXJuIHRydWU7XG5cdH1cblx0cmV0dXJuIGZhbHNlO1xufVxuXG5cbmZ1bmN0aW9uIGdldE5leHRUYWJQb3ModGFiSW5kZXgsIHN0YWZmR3JvdXApIHtcblx0dmFyIHN0YXJ0SW5kZXggPSAwO1xuXHR2YXIgaGFuZGxlZFZvaWNlcyA9IDA7XG5cdHZhciBpblByb2dyZXNzID0gdHJ1ZTtcblx0dmFyIG5iVm9pY2VzID0gMDtcblx0d2hpbGUgKGluUHJvZ3Jlc3MpIHtcblx0XHQvL2ZvciAodmFyIGlpID0gMDsgaWkgPCBzdGFmZkdyb3VwLmxlbmd0aDsgaWkrKykge1xuXHRcdGlmICghc3RhZmZHcm91cFtzdGFydEluZGV4XSlcblx0XHRcdHJldHVybiAtMTtcblx0XHRpZiAoIXN0YWZmR3JvdXBbc3RhcnRJbmRleF0uaXNUYWJTdGFmZikge1xuXHRcdFx0bmJWb2ljZXMgPSBzdGFmZkdyb3VwW3N0YXJ0SW5kZXhdLnZvaWNlcy5sZW5ndGg7IC8vIGdldCBudW1iZXIgb2Ygc3RhZmYgdm9pY2VzXG5cdFx0fVxuXHRcdGlmIChzdGFmZkdyb3VwW3N0YXJ0SW5kZXhdLmlzVGFiU3RhZmYpIHtcblx0XHRcdGhhbmRsZWRWb2ljZXMrKztcblx0XHRcdGlmIChpc2xhc3RUYWJJblN0YWZmKHN0YXJ0SW5kZXgsIHN0YWZmR3JvdXApKSB7XG5cdFx0XHRcdGlmIChoYW5kbGVkVm9pY2VzIDwgbmJWb2ljZXMpIHJldHVybiBzdGFydEluZGV4ICsgMTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0aGFuZGxlZFZvaWNlcyA9IDA7XG5cdFx0XHRpZiAoc3RhcnRJbmRleCA+PSB0YWJJbmRleCkge1xuXHRcdFx0XHRpZiAoc3RhcnRJbmRleCArIDEgPT0gc3RhZmZHcm91cC5sZW5ndGgpIHJldHVybiBzdGFydEluZGV4ICsgMTtcblx0XHRcdFx0aWYgKCFzdGFmZkdyb3VwW3N0YXJ0SW5kZXggKyAxXS5pc1RhYlN0YWZmKSByZXR1cm4gc3RhcnRJbmRleCArIDE7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHN0YXJ0SW5kZXgrKztcblx0XHQvLyBvdXQgb2Ygc3BhY2UgY2FzZVxuXHRcdGlmIChzdGFydEluZGV4ID4gc3RhZmZHcm91cC5sZW5ndGgpIHJldHVybiAtMTtcblx0fVxufVxuXG5mdW5jdGlvbiBnZXRMYXN0U3RhZmYoc3RhZmZzLCBsYXN0VGFiKSB7XG5cdGZvciAodmFyIGlpID0gbGFzdFRhYjsgaWkgPj0gMDsgaWktLSkge1xuXHRcdGlmICghc3RhZmZzW2lpXS5pc1RhYlN0YWZmKSB7XG5cdFx0XHRyZXR1cm4gc3RhZmZzW2lpXTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGNoZWNrVm9pY2VLZXlTaWcodm9pY2VzLCBpaSkge1xuXHR2YXIgY3VyVm9pY2UgPSB2b2ljZXNbaWldO1xuXHQvLyBvbiBtdWx0aXZvaWNlIG11bHRpc3RhZmYgb25seSB0aGUgZmlyc3Qgdm9pY2UgaGFzIGtleSBzaWduYXR1cmVcblx0Ly8gZm9sbGluZyBjb25zZWN1dGl2ZSBkbyBub3QgaGF2ZSBvbmUgPT4gd2Ugc2hvdWxkIHByb3ZpZGUgdGhlIGZpcnN0IHZvaWNlIGtleSBzaWcgYmFjayB0aGVuXG5cdHZhciBlbGVtMCA9IGN1clZvaWNlLmNoaWxkcmVuWzBdLmFiY2VsZW07XG5cdGlmIChlbGVtMC5lbF90eXBlID09PSAnY2xlZicpIHJldHVybiBudWxsO1xuXHRpZiAoaWkgPT0gMCkge1xuXHRcdC8vIG5vdCBmb3VuZCA9PiBjbGVmPW5vbmUgY2FzZVxuXHRcdHJldHVybiAnbm9uZSc7XG5cdH1cblx0cmV0dXJuIHZvaWNlc1tpaSAtIDFdLmNoaWxkcmVuWzBdO1xufVxuXG5mdW5jdGlvbiB0YWJSZW5kZXJlcihwbHVnaW4sIHJlbmRlcmVyLCBsaW5lLCBzdGFmZkluZGV4KSB7XG5cdC8vY29uc29sZS5sb2coXCJSRU5ERVIgdGFiUmVuZGVyZXJcIilcblx0dmFyIGFic29sdXRlcyA9IG5ldyBUYWJBYnNvbHV0ZUVsZW1lbnRzKCk7XG5cdHZhciB0YWJTdGFmZiA9IHtcblx0XHRjbGVmOiB7XG5cdFx0XHR0eXBlOiAnVEFCJ1xuXHRcdH1cblx0fTtcblx0dmFyIHRhYlNpemUgPSAocGx1Z2luLmxpbmVQaXRjaCAqIHBsdWdpbi5uYkxpbmVzKTtcblx0dmFyIHN0YWZmcyA9IGxpbmUuc3RhZmY7XG5cdGlmIChzdGFmZnMpIHtcblx0XHQvLyBnaXZlIHVwIG9uIHN0YWZmbGluZT0wIGluIGtleSBcblx0XHR2YXIgZmlyc3RTdGFmZiA9IHN0YWZmc1swXTtcblx0XHRpZiAoZmlyc3RTdGFmZikge1xuXHRcdFx0aWYgKGZpcnN0U3RhZmYuY2xlZikge1xuXHRcdFx0XHRpZiAoZmlyc3RTdGFmZi5jbGVmLnN0YWZmbGluZXMgPT0gMCkge1xuXHRcdFx0XHRcdHBsdWdpbi5zZXRFcnJvcihcIk5vIHRhYmxhdHVyZXMgd2hlbiBzdGFmZmxpbmVzPTBcIik7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHN0YWZmcy5zcGxpY2UoXG5cdFx0XHRzdGFmZnMubGVuZ3RoLCAwLFxuXHRcdFx0dGFiU3RhZmZcblx0XHQpO1xuXHR9XG5cdHZhciBzdGFmZkdyb3VwID0gbGluZS5zdGFmZkdyb3VwO1xuXG5cdHZhciB2b2ljZXMgPSBzdGFmZkdyb3VwLnZvaWNlcztcblx0dmFyIGZpcnN0Vm9pY2UgPSB2b2ljZXNbMF07XG5cdC8vIHRha2UgbHlyaWNzIGludG8gYWNjb3VudCBpZiBhbnlcblx0dmFyIGx5cmljc0hlaWdodCA9IGdldEx5cmljSGVpZ2h0KGZpcnN0Vm9pY2UpO1xuXHR2YXIgcGFkZCA9IDM7XG5cdHZhciBwcmV2SW5kZXggPSBzdGFmZkluZGV4O1xuXHR2YXIgcHJldmlvdXNTdGFmZiA9IHN0YWZmR3JvdXAuc3RhZmZzW3ByZXZJbmRleF07XG5cdHZhciB0YWJUb3AgPSB0YWJTaXplICsgcGFkZCAtIHByZXZpb3VzU3RhZmYuYm90dG9tIC0gbHlyaWNzSGVpZ2h0O1xuXHRpZiAocHJldmlvdXNTdGFmZi5pc1RhYlN0YWZmKSB7XG5cdFx0dGFiVG9wID0gcHJldmlvdXNTdGFmZi50b3A7XG5cdH1cblx0dmFyIHN0YWZmR3JvdXBJbmZvcyA9IHtcblx0XHRib3R0b206IC0xLFxuXHRcdGlzVGFiU3RhZmY6IHRydWUsXG5cdFx0c3BlY2lhbFk6IGluaXRTcGVjaWFsWSgpLFxuXHRcdGxpbmVzOiBwbHVnaW4ubmJMaW5lcyxcblx0XHRsaW5lUGl0Y2g6IHBsdWdpbi5saW5lUGl0Y2gsXG5cdFx0ZHk6IDAuMTUsXG5cdFx0dG9wOiB0YWJUb3AsXG5cdH07XG5cdHZhciBuZXh0VGFiUG9zID0gZ2V0TmV4dFRhYlBvcyhzdGFmZkluZGV4LCBzdGFmZkdyb3VwLnN0YWZmcyk7XG5cdGlmIChuZXh0VGFiUG9zID09PSAtMSlcblx0XHRyZXR1cm47XG5cdHN0YWZmR3JvdXBJbmZvcy5wYXJlbnRJbmRleCA9IG5leHRUYWJQb3MgLSAxO1xuXHRzdGFmZkdyb3VwLnN0YWZmcy5zcGxpY2UobmV4dFRhYlBvcywgMCwgc3RhZmZHcm91cEluZm9zKTtcblx0Ly8gc3RhZmZHcm91cC5zdGFmZnMucHVzaChzdGFmZkdyb3VwSW5mb3MpO1xuXHRzdGFmZkdyb3VwLmhlaWdodCArPSB0YWJTaXplICsgcGFkZDtcblx0dmFyIHBhcmVudFN0YWZmID0gZ2V0TGFzdFN0YWZmKHN0YWZmR3JvdXAuc3RhZmZzLCBuZXh0VGFiUG9zKTtcblx0dmFyIG5iVm9pY2VzID0gMTtcblx0aWYgKGlzTXVsdGlWb2ljZVNpbmdsZVN0YWZmKHN0YWZmR3JvdXAuc3RhZmZzLCBwYXJlbnRTdGFmZikpIHtcblx0XHRuYlZvaWNlcyA9IHBhcmVudFN0YWZmLnZvaWNlcy5sZW5ndGg7XG5cdH1cblx0Ly8gYnVpbGQgZnJvbSBzdGFmZlxuXHR0YWJTdGFmZi52b2ljZXMgPSBbXTtcblx0Zm9yICh2YXIgaWkgPSAwOyBpaSA8IG5iVm9pY2VzOyBpaSsrKSB7XG5cdFx0dmFyIHRhYlZvaWNlID0gbmV3IFZvaWNlRWxlbWVudCgwLCAwKTtcblx0XHRpZiAoaWkgPiAwKSB0YWJWb2ljZS5kdXBsaWNhdGUgPSB0cnVlO1xuXHRcdHZhciBuYW1lSGVpZ2h0ID0gYnVpbGRUYWJOYW1lKHBsdWdpbiwgcmVuZGVyZXIsIHRhYlZvaWNlKSAvIHNwYWNpbmcuU1RFUDtcblx0XHRuYW1lSGVpZ2h0ID0gTWF0aC5tYXgobmFtZUhlaWdodCwgMSkgLy8gSWYgdGhlcmUgaXMgbm8gbGFiZWwgZm9yIHRoZSB0YWIgbGluZSwgdGhlbiB0aGVyZSBuZWVkcyB0byBiZSBhIGxpdHRsZSBwYWRkaW5nXG5cdFx0Ly8gVGhpcyB3YXMgcHVzaGluZyBkb3duIHRoZSB0b3Agc3RhZmYgYnkgdGhlIHRhYiBsYWJlbCBoZWlnaHRcblx0XHQvL3N0YWZmR3JvdXAuc3RhZmZzW3N0YWZmSW5kZXhdLnRvcCArPSBuYW1lSGVpZ2h0O1xuXHRcdHN0YWZmR3JvdXAuc3RhZmZzW3N0YWZmSW5kZXhdLnRvcCArPSAxO1xuXHRcdHN0YWZmR3JvdXAuaGVpZ2h0ICs9IG5hbWVIZWlnaHQ7XG5cdFx0dGFiVm9pY2Uuc3RhZmYgPSBzdGFmZkdyb3VwSW5mb3M7XG5cdFx0dmFyIHRhYlZvaWNlSW5kZXggPSB2b2ljZXMubGVuZ3RoXG5cdFx0dm9pY2VzLnNwbGljZSh2b2ljZXMubGVuZ3RoLCAwLCB0YWJWb2ljZSk7XG5cdFx0dmFyIGtleVNpZyA9IGNoZWNrVm9pY2VLZXlTaWcodm9pY2VzLCBpaSArIHN0YWZmSW5kZXgpO1xuXHRcdHRhYlN0YWZmLnZvaWNlc1tpaV0gPSBbXTtcblx0XHRhYnNvbHV0ZXMuYnVpbGQocGx1Z2luLCB2b2ljZXMsIHRhYlN0YWZmLnZvaWNlc1tpaV0sIGlpLCBzdGFmZkluZGV4LCBrZXlTaWcsIHRhYlZvaWNlSW5kZXgpO1xuXHR9XG5cdGxpbmtTdGFmZkFuZFRhYnMoc3RhZmZHcm91cC5zdGFmZnMpOyAvLyBjcm9zc3JlZmVyZW5jZSB0YWJzIGFuZCBzdGFmZlxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRhYlJlbmRlcmVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/tablatures/render/tab-renderer.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/abstract-engraver.js":
/*!********************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/abstract-engraver.js ***!
  \********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// abc_abstract_engraver.js: Creates a data structure suitable for printing a line of abc\n\nvar AbsoluteElement = __webpack_require__(/*! ./elements/absolute-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/absolute-element.js\");\nvar BeamElem = __webpack_require__(/*! ./elements/beam-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/beam-element.js\");\nvar BraceElem = __webpack_require__(/*! ./elements/brace-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/brace-element.js\");\nvar createClef = __webpack_require__(/*! ./create-clef */ \"(ssr)/./node_modules/abcjs/src/write/creation/create-clef.js\");\nvar createKeySignature = __webpack_require__(/*! ./create-key-signature */ \"(ssr)/./node_modules/abcjs/src/write/creation/create-key-signature.js\");\nvar createNoteHead = __webpack_require__(/*! ./create-note-head */ \"(ssr)/./node_modules/abcjs/src/write/creation/create-note-head.js\");\nvar createTimeSignature = __webpack_require__(/*! ./create-time-signature */ \"(ssr)/./node_modules/abcjs/src/write/creation/create-time-signature.js\");\nvar Decoration = __webpack_require__(/*! ./decoration */ \"(ssr)/./node_modules/abcjs/src/write/creation/decoration.js\");\nvar EndingElem = __webpack_require__(/*! ./elements/ending-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/ending-element.js\");\nvar glyphs = __webpack_require__(/*! ./glyphs */ \"(ssr)/./node_modules/abcjs/src/write/creation/glyphs.js\");\nvar RelativeElement = __webpack_require__(/*! ./elements/relative-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/relative-element.js\");\nvar spacing = __webpack_require__(/*! ../helpers/spacing */ \"(ssr)/./node_modules/abcjs/src/write/helpers/spacing.js\");\nvar StaffGroupElement = __webpack_require__(/*! ./elements/staff-group-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/staff-group-element.js\");\nvar TempoElement = __webpack_require__(/*! ./elements/tempo-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/tempo-element.js\");\nvar TieElem = __webpack_require__(/*! ./elements/tie-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/tie-element.js\");\nvar TripletElem = __webpack_require__(/*! ./elements/triplet-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/triplet-element.js\");\nvar VoiceElement = __webpack_require__(/*! ./elements/voice-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/voice-element.js\");\nvar addChord = __webpack_require__(/*! ./add-chord */ \"(ssr)/./node_modules/abcjs/src/write/creation/add-chord.js\");\nvar pitchesToPerc = __webpack_require__(/*! ../../synth/pitches-to-perc */ \"(ssr)/./node_modules/abcjs/src/synth/pitches-to-perc.js\")\n\nvar parseCommon = __webpack_require__(/*! ../../parse/abc_common */ \"(ssr)/./node_modules/abcjs/src/parse/abc_common.js\");\n\nvar getDuration = function (elem) {\n\tvar d = 0;\n\tif (elem.duration) {\n\t\td = elem.duration;\n\t}\n\treturn d;\n};\n\nvar hint = false;\n\nvar chartable = {\n\trest: { 0: \"rests.whole\", 1: \"rests.half\", 2: \"rests.quarter\", 3: \"rests.8th\", 4: \"rests.16th\", 5: \"rests.32nd\", 6: \"rests.64th\", 7: \"rests.128th\", \"multi\": \"rests.multimeasure\" },\n\tnote: { \"-1\": \"noteheads.dbl\", 0: \"noteheads.whole\", 1: \"noteheads.half\", 2: \"noteheads.quarter\", 3: \"noteheads.quarter\", 4: \"noteheads.quarter\", 5: \"noteheads.quarter\", 6: \"noteheads.quarter\", 7: \"noteheads.quarter\", 'nostem': \"noteheads.quarter\" },\n\trhythm: { \"-1\": \"noteheads.slash.whole\", 0: \"noteheads.slash.whole\", 1: \"noteheads.slash.whole\", 2: \"noteheads.slash.quarter\", 3: \"noteheads.slash.quarter\", 4: \"noteheads.slash.quarter\", 5: \"noteheads.slash.quarter\", 6: \"noteheads.slash.quarter\", 7: \"noteheads.slash.quarter\", nostem: \"noteheads.slash.nostem\" },\n\tx: { \"-1\": \"noteheads.indeterminate\", 0: \"noteheads.indeterminate\", 1: \"noteheads.indeterminate\", 2: \"noteheads.indeterminate\", 3: \"noteheads.indeterminate\", 4: \"noteheads.indeterminate\", 5: \"noteheads.indeterminate\", 6: \"noteheads.indeterminate\", 7: \"noteheads.indeterminate\", nostem: \"noteheads.indeterminate\" },\n\tharmonic: { \"-1\": \"noteheads.harmonic.quarter\", 0: \"noteheads.harmonic.quarter\", 1: \"noteheads.harmonic.quarter\", 2: \"noteheads.harmonic.quarter\", 3: \"noteheads.harmonic.quarter\", 4: \"noteheads.harmonic.quarter\", 5: \"noteheads.harmonic.quarter\", 6: \"noteheads.harmonic.quarter\", 7: \"noteheads.harmonic.quarter\", nostem: \"noteheads.harmonic.quarter\" },\n\ttriangle: { \"-1\": \"noteheads.triangle.quarter\", 0: \"noteheads.triangle.quarter\", 1: \"noteheads.triangle.quarter\", 2: \"noteheads.triangle.quarter\", 3: \"noteheads.triangle.quarter\", 4: \"noteheads.triangle.quarter\", 5: \"noteheads.triangle.quarter\", 6: \"noteheads.triangle.quarter\", 7: \"noteheads.triangle.quarter\", nostem: \"noteheads.triangle.quarter\" },\n\tuflags: { 3: \"flags.u8th\", 4: \"flags.u16th\", 5: \"flags.u32nd\", 6: \"flags.u64th\" },\n\tdflags: { 3: \"flags.d8th\", 4: \"flags.d16th\", 5: \"flags.d32nd\", 6: \"flags.d64th\" }\n};\n\nvar AbstractEngraver = function (getTextSize, tuneNumber, options) {\n\tthis.decoration = new Decoration();\n\tthis.getTextSize = getTextSize;\n\tthis.tuneNumber = tuneNumber;\n\tthis.isBagpipes = options.bagpipes;\n\tthis.flatBeams = options.flatbeams;\n\tthis.graceSlurs = options.graceSlurs;\n\tthis.percmap = options.percmap;\n\tthis.initialClef = options.initialClef\n\tthis.jazzchords = !!options.jazzchords\n\tthis.accentAbove = !!options.accentAbove\n\tthis.germanAlphabet = !!options.germanAlphabet\n\tthis.reset();\n};\n\nAbstractEngraver.prototype.reset = function () {\n\tthis.slurs = {};\n\tthis.ties = [];\n\tthis.voiceScale = 1;\n\tthis.voiceColor = undefined;\n\tthis.slursbyvoice = {};\n\tthis.tiesbyvoice = {};\n\tthis.endingsbyvoice = {};\n\tthis.scaleByVoice = {};\n\tthis.colorByVoice = {};\n\tthis.tripletmultiplier = 1;\n\n\tthis.abcline = undefined;\n\tthis.accidentalSlot = undefined;\n\tthis.accidentalshiftx = undefined;\n\tthis.dotshiftx = undefined;\n\tthis.hasVocals = false;\n\tthis.minY = undefined;\n\tthis.partstartelem = undefined;\n\tthis.startlimitelem = undefined;\n\tthis.stemdir = undefined;\n};\n\nAbstractEngraver.prototype.setStemHeight = function (heightInPixels) {\n\tthis.stemHeight = Math.round(heightInPixels * 10 / spacing.STEP) / 10;\n};\n\nAbstractEngraver.prototype.getCurrentVoiceId = function (s, v) {\n\treturn \"s\" + s + \"v\" + v;\n};\n\nAbstractEngraver.prototype.pushCrossLineElems = function (s, v) {\n\tthis.slursbyvoice[this.getCurrentVoiceId(s, v)] = this.slurs;\n\tthis.tiesbyvoice[this.getCurrentVoiceId(s, v)] = this.ties;\n\tthis.endingsbyvoice[this.getCurrentVoiceId(s, v)] = this.partstartelem;\n\tthis.scaleByVoice[this.getCurrentVoiceId(s, v)] = this.voiceScale;\n\tif (this.voiceColor)\n\t\tthis.colorByVoice[this.getCurrentVoiceId(s, v)] = this.voiceColor;\n};\n\nAbstractEngraver.prototype.popCrossLineElems = function (s, v) {\n\tthis.slurs = this.slursbyvoice[this.getCurrentVoiceId(s, v)] || {};\n\tthis.ties = this.tiesbyvoice[this.getCurrentVoiceId(s, v)] || [];\n\tthis.partstartelem = this.endingsbyvoice[this.getCurrentVoiceId(s, v)];\n\tthis.voiceScale = this.scaleByVoice[this.getCurrentVoiceId(s, v)];\n\tif (this.voiceScale === undefined) this.voiceScale = 1;\n\tthis.voiceColor = this.colorByVoice[this.getCurrentVoiceId(s, v)];\n};\n\nAbstractEngraver.prototype.containsLyrics = function (staves) {\n\tfor (var i = 0; i < staves.length; i++) {\n\t\tfor (var j = 0; j < staves[i].voices.length; j++) {\n\t\t\tfor (var k = 0; k < staves[i].voices[j].length; k++) {\n\t\t\t\tvar el = staves[i].voices[j][k];\n\t\t\t\tif (el.lyric) {\n\t\t\t\t\t// We just want to see if there are vocals below the music to know where to put the dynamics.\n\t\t\t\t\tif (!el.positioning || el.positioning.vocalPosition === 'below')\n\t\t\t\t\t\tthis.hasVocals = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nAbstractEngraver.prototype.createABCLine = function (staffs, tempo, l) {\n\tthis.minY = 2; // PER: This will be the lowest that any note reaches. It will be used to set the dynamics row.\n\t// See if there are any lyrics on this line.\n\tthis.containsLyrics(staffs);\n\tvar staffgroup = new StaffGroupElement(this.getTextSize);\n\tthis.tempoSet = false;\n\tfor (var s = 0; s < staffs.length; s++) {\n\t\tif (hint)\n\t\t\tthis.restoreState();\n\t\thint = false;\n\t\tthis.createABCStaff(staffgroup, staffs[s], tempo, s, l);\n\t}\n\treturn staffgroup;\n};\n\nAbstractEngraver.prototype.createABCStaff = function (staffgroup, abcstaff, tempo, s, l) {\n\t// If the tempo is passed in, then the first element should get the tempo attached to it.\n\tstaffgroup.getTextSize.updateFonts(abcstaff);\n\tfor (var v = 0; v < abcstaff.voices.length; v++) {\n\t\tvar voice = new VoiceElement(v, abcstaff.voices.length);\n\t\tif (v === 0) {\n\t\t\tvoice.barfrom = (abcstaff.connectBarLines === \"start\" || abcstaff.connectBarLines === \"continue\");\n\t\t\tvoice.barto = (abcstaff.connectBarLines === \"continue\" || abcstaff.connectBarLines === \"end\");\n\t\t} else {\n\t\t\tvoice.duplicate = true; // bar lines and other duplicate info need not be created\n\t\t}\n\t\tif (abcstaff.title && abcstaff.title[v]) {\n\t\t\tvoice.header = abcstaff.title[v].replace(/\\\\n/g, \"\\n\");\n\t\t\tvoice.headerPosition = 6 + staffgroup.getTextSize.baselineToCenter(voice.header, \"voicefont\", 'staff-extra voice-name', v, abcstaff.voices.length) / spacing.STEP;\n\t\t}\n\t\tif (abcstaff.clef && abcstaff.clef.type === \"perc\")\n\t\t\tvoice.isPercussion = true;\n\t\tvar clef = (!this.initialClef || l === 0) && createClef(abcstaff.clef, this.tuneNumber);\n\t\tif (clef) {\n\t\t\tif (v === 0 && abcstaff.barNumber) {\n\t\t\t\tthis.addMeasureNumber(abcstaff.barNumber, clef);\n\t\t\t}\n\t\t\tvoice.addChild(clef);\n\t\t\tthis.startlimitelem = clef; // limit ties here\n\t\t}\n\t\tvar keySig = createKeySignature(abcstaff.key, this.tuneNumber);\n\t\tif (keySig) {\n\t\t\tvoice.addChild(keySig);\n\t\t\tthis.startlimitelem = keySig; // limit ties here\n\t\t}\n\t\tif (abcstaff.meter) {\n\t\t\tif (abcstaff.meter.type === 'specified') {\n\t\t\t\tthis.measureLength = abcstaff.meter.value[0].num / abcstaff.meter.value[0].den;\n\t\t\t} else\n\t\t\t\tthis.measureLength = 1;\n\t\t\tvar ts = createTimeSignature(abcstaff.meter, this.tuneNumber);\n\t\t\tvoice.addChild(ts);\n\t\t\tthis.startlimitelem = ts; // limit ties here\n\t\t}\n\t\tif (voice.duplicate)\n\t\t\tvoice.children = []; // we shouldn't reprint the above if we're reusing the same staff. We just created them to get the right spacing.\n\t\tvar staffLines = abcstaff.clef.stafflines || abcstaff.clef.stafflines === 0 ? abcstaff.clef.stafflines : 5;\n\t\tstaffgroup.addVoice(voice, s, staffLines);\n\t\tvar isSingleLineStaff = staffLines === 1;\n\t\tthis.createABCVoice(abcstaff.voices[v], tempo, s, v, isSingleLineStaff, voice);\n\t\tstaffgroup.setStaffLimits(voice);\n\t\tif (v === 0) {\n\t\t\t// only do brace and bracket processing on the first voice, otherwise it would be done twice.\n\t\t\tif (abcstaff.brace === \"start\" || (!staffgroup.brace && abcstaff.brace)) {\n\t\t\t\tif (!staffgroup.brace)\n\t\t\t\t\tstaffgroup.brace = [];\n\t\t\t\tstaffgroup.brace.push(new BraceElem(voice, \"brace\"));\n\t\t\t} else if (abcstaff.brace === \"end\" && staffgroup.brace) {\n\t\t\t\tstaffgroup.brace[staffgroup.brace.length - 1].setBottomStaff(voice);\n\t\t\t} else if (abcstaff.brace === \"continue\" && staffgroup.brace) {\n\t\t\t\tstaffgroup.brace[staffgroup.brace.length - 1].continuing(voice);\n\t\t\t}\n\t\t\tif (abcstaff.bracket === \"start\" || (!staffgroup.bracket && abcstaff.bracket)) {\n\t\t\t\tif (!staffgroup.bracket)\n\t\t\t\t\tstaffgroup.bracket = [];\n\t\t\t\tstaffgroup.bracket.push(new BraceElem(voice, \"bracket\"));\n\t\t\t} else if (abcstaff.bracket === \"end\" && staffgroup.bracket) {\n\t\t\t\tstaffgroup.bracket[staffgroup.bracket.length - 1].setBottomStaff(voice);\n\t\t\t} else if (abcstaff.bracket === \"continue\" && staffgroup.bracket) {\n\t\t\t\tstaffgroup.bracket[staffgroup.bracket.length - 1].continuing(voice);\n\t\t\t}\n\t\t}\n\t}\n};\n\nfunction getBeamGroup(abcline, pos) {\n\t// If there are notes beamed together, they are handled as a group, so find all of them here.\n\tvar elem = abcline[pos];\n\tif (elem.el_type !== 'note' || !elem.startBeam || elem.endBeam)\n\t\treturn { count: 1, elem: elem };\n\n\tvar group = [];\n\twhile (pos < abcline.length && abcline[pos].el_type === 'note') {\n\t\tgroup.push(abcline[pos]);\n\t\tif (abcline[pos].endBeam)\n\t\t\tbreak;\n\t\tpos++;\n\t}\n\treturn { count: group.length, elem: group };\n}\n\nAbstractEngraver.prototype.createABCVoice = function (abcline, tempo, s, v, isSingleLineStaff, voice) {\n\tthis.popCrossLineElems(s, v);\n\tthis.stemdir = (this.isBagpipes) ? \"down\" : null;\n\tthis.abcline = abcline;\n\tif (this.partstartelem) {\n\t\tthis.partstartelem = new EndingElem(\"\", null, null);\n\t\tvoice.addOther(this.partstartelem);\n\t}\n\tvar voiceNumber = voice.voicetotal < 2 ? -1 : voice.voicenumber;\n\tfor (var slur in this.slurs) {\n\t\tif (this.slurs.hasOwnProperty(slur)) {\n\t\t\t// this is already a slur element, but it was created for the last line, so recreate it.\n\t\t\tthis.slurs[slur] = new TieElem({ force: this.slurs[slur].force, voiceNumber: voiceNumber, stemDir: this.slurs[slur].stemDir, style: this.slurs[slur].dotted });\n\t\t\tif (hint) this.slurs[slur].setHint();\n\t\t\tvoice.addOther(this.slurs[slur]);\n\t\t}\n\t}\n\tfor (var i = 0; i < this.ties.length; i++) {\n\t\t// this is already a tie element, but it was created for the last line, so recreate it.\n\t\tthis.ties[i] = new TieElem({ force: this.ties[i].force, stemDir: this.ties[i].stemDir, voiceNumber: voiceNumber, style: this.ties[i].dotted });\n\t\tif (hint) this.ties[i].setHint();\n\t\tvoice.addOther(this.ties[i]);\n\t}\n\n\tfor (var j = 0; j < this.abcline.length; j++) {\n\t\tsetAveragePitch(this.abcline[j]);\n\t\tthis.minY = Math.min(this.abcline[j].minpitch, this.minY);\n\t}\n\n\tvar isFirstStaff = (s === 0);\n\tvar pos = 0;\n\twhile (pos < this.abcline.length) {\n\t\tvar ret = getBeamGroup(this.abcline, pos);\n\t\tvar abselems = this.createABCElement(isFirstStaff, isSingleLineStaff, voice, ret.elem);\n\t\tif (abselems) {\n\t\t\tfor (i = 0; i < abselems.length; i++) {\n\t\t\t\tif (!this.tempoSet && tempo && !tempo.suppress) {\n\t\t\t\t\tthis.tempoSet = true;\n\t\t\t\t\tvar tempoElement = new AbsoluteElement(tempo, 0, 0, \"tempo\", this.tuneNumber, {});\n\t\t\t\t\ttempoElement.addFixedX(new TempoElement(tempo, this.tuneNumber, createNoteHead));\n\t\t\t\t\tvoice.addChild(tempoElement);\n\t\t\t\t}\n\t\t\t\tvoice.addChild(abselems[i]);\n\t\t\t}\n\t\t}\n\t\tpos += ret.count;\n\t}\n\tthis.pushCrossLineElems(s, v);\n};\n\nAbstractEngraver.prototype.saveState = function () {\n\tthis.tiesSave = parseCommon.cloneArray(this.ties);\n\tthis.slursSave = parseCommon.cloneHashOfHash(this.slurs);\n\tthis.slursbyvoiceSave = parseCommon.cloneHashOfHash(this.slursbyvoice);\n\tthis.tiesbyvoiceSave = parseCommon.cloneHashOfArrayOfHash(this.tiesbyvoice);\n};\n\nAbstractEngraver.prototype.restoreState = function () {\n\tthis.ties = parseCommon.cloneArray(this.tiesSave);\n\tthis.slurs = parseCommon.cloneHashOfHash(this.slursSave);\n\tthis.slursbyvoice = parseCommon.cloneHashOfHash(this.slursbyvoiceSave);\n\tthis.tiesbyvoice = parseCommon.cloneHashOfArrayOfHash(this.tiesbyvoiceSave);\n};\n\n// function writeMeasureWidth(voice) {\n// \tvar width = 0;\n// \tfor (var i = voice.children.length-1; i >= 0; i--) {\n// \t\tvar elem = voice.children[i];\n// \t\tif (elem.abcelem.el_type === 'bar')\n// \t\t\tbreak;\n// \t\twidth += elem.w;\n// \t}\n// \treturn new RelativeElement(width.toFixed(2), -70, 0, undefined, {type:\"debug\"});\n// }\n\n// return an array of AbsoluteElement\nAbstractEngraver.prototype.createABCElement = function (isFirstStaff, isSingleLineStaff, voice, elem) {\n\tvar elemset = [];\n\tswitch (elem.el_type) {\n\t\tcase undefined:\n\t\t\t// it is undefined if we were passed an array in - an array means a set of notes that should be beamed together.\n\t\t\telemset = this.createBeam(isSingleLineStaff, voice, elem);\n\t\t\tbreak;\n\t\tcase \"note\":\n\t\t\telemset[0] = this.createNote(elem, false, isSingleLineStaff, voice);\n\t\t\tif (this.triplet && this.triplet.isClosed()) {\n\t\t\t\tvoice.addOther(this.triplet);\n\t\t\t\tthis.triplet = null;\n\t\t\t\tthis.tripletmultiplier = 1;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"bar\":\n\t\t\telemset[0] = this.createBarLine(voice, elem, isFirstStaff);\n\t\t\tif (voice.duplicate && elemset.length > 0) elemset[0].invisible = true;\n\t\t\t//\t  elemset[0].addChild(writeMeasureWidth(voice));\n\t\t\tbreak;\n\t\tcase \"meter\":\n\t\t\telemset[0] = createTimeSignature(elem, this.tuneNumber);\n\t\t\tthis.startlimitelem = elemset[0]; // limit ties here\n\t\t\tif (voice.duplicate && elemset.length > 0) elemset[0].invisible = true;\n\t\t\tbreak;\n\t\tcase \"clef\":\n\t\t\telemset[0] = createClef(elem, this.tuneNumber);\n\t\t\tif (!elemset[0]) return null;\n\t\t\tif (voice.duplicate && elemset.length > 0) elemset[0].invisible = true;\n\t\t\tbreak;\n\t\tcase \"key\":\n\t\t\tvar absKey = createKeySignature(elem, this.tuneNumber);\n\t\t\tif (absKey) {\n\t\t\t\telemset[0] = absKey;\n\t\t\t\tthis.startlimitelem = elemset[0]; // limit ties here\n\t\t\t}\n\t\t\tif (voice.duplicate && elemset.length > 0) elemset[0].invisible = true;\n\t\t\tbreak;\n\t\tcase \"stem\":\n\t\t\tthis.stemdir = elem.direction === \"auto\" ? undefined : elem.direction;\n\t\t\tbreak;\n\t\tcase \"part\":\n\t\t\tvar abselem = new AbsoluteElement(elem, 0, 0, 'part', this.tuneNumber);\n\t\t\tvar dim = this.getTextSize.calc(elem.title, 'partsfont', \"part\");\n\t\t\tabselem.addFixedX(new RelativeElement(elem.title, 0, 0, undefined, { type: \"part\", height: dim.height / spacing.STEP }));\n\t\t\telemset[0] = abselem;\n\t\t\tbreak;\n\t\tcase \"tempo\":\n\t\t\tvar abselem3 = new AbsoluteElement(elem, 0, 0, 'tempo', this.tuneNumber);\n\t\t\tabselem3.addFixedX(new TempoElement(elem, this.tuneNumber, createNoteHead));\n\t\t\telemset[0] = abselem3;\n\t\t\tbreak;\n\t\tcase \"style\":\n\t\t\tif (elem.head === \"normal\")\n\t\t\t\tdelete this.style;\n\t\t\telse\n\t\t\t\tthis.style = elem.head;\n\t\t\tbreak;\n\t\tcase \"hint\":\n\t\t\thint = true;\n\t\t\tthis.saveState();\n\t\t\tbreak;\n\t\tcase \"midi\":\n\t\t\t// This has no effect on the visible music, so just skip it.\n\t\t\tbreak;\n\t\tcase \"scale\":\n\t\t\tthis.voiceScale = elem.size;\n\t\t\tbreak;\n\t\tcase \"color\":\n\t\t\tthis.voiceColor = elem.color;\n\t\t\tvoice.color = this.voiceColor;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tvar abselem2 = new AbsoluteElement(elem, 0, 0, 'unsupported', this.tuneNumber);\n\t\t\tabselem2.addFixed(new RelativeElement(\"element type \" + elem.el_type, 0, 0, undefined, { type: \"debug\" }));\n\t\t\telemset[0] = abselem2;\n\t}\n\n\treturn elemset;\n};\n\nfunction setAveragePitch(elem) {\n\tif (elem.pitches) {\n\t\tsortPitch(elem);\n\t\tvar sum = 0;\n\t\tfor (var p = 0; p < elem.pitches.length; p++) {\n\t\t\tsum += elem.pitches[p].verticalPos;\n\t\t}\n\t\telem.averagepitch = sum / elem.pitches.length;\n\t\telem.minpitch = elem.pitches[0].verticalPos;\n\t\telem.maxpitch = elem.pitches[elem.pitches.length - 1].verticalPos;\n\t}\n}\n\nAbstractEngraver.prototype.createBeam = function (isSingleLineStaff, voice, elems) {\n\tvar abselemset = [];\n\n\tvar beamelem = new BeamElem(this.stemHeight * this.voiceScale, this.stemdir, this.flatBeams, elems[0]);\n\tif (hint) beamelem.setHint();\n\tfor (var i = 0; i < elems.length; i++) {\n\t\t// Do a first pass to figure out the stem direction before creating the notes, so that staccatos and other decorations can be placed correctly.\n\t\tbeamelem.runningDirection(elems[i])\n\t}\n\tbeamelem.setStemDirection()\n\tvar tempStemDir = this.stemdir\n\tthis.stemdir = beamelem.stemsUp ? 'up' : 'down'\n\tfor (i = 0; i < elems.length; i++) {\n\t\tvar elem = elems[i];\n\t\tvar abselem = this.createNote(elem, true, isSingleLineStaff, voice);\n\t\tabselemset.push(abselem);\n\t\tbeamelem.add(abselem);\n\t\tif (this.triplet && this.triplet.isClosed()) {\n\t\t\tvoice.addOther(this.triplet);\n\t\t\tthis.triplet = null;\n\t\t\tthis.tripletmultiplier = 1;\n\t\t}\n\t}\n\tbeamelem.calcDir();\n\tvoice.addBeam(beamelem);\n\tthis.stemdir = tempStemDir\n\treturn abselemset;\n};\n\nvar sortPitch = function (elem) {\n\tvar sorted;\n\tdo {\n\t\tsorted = true;\n\t\tfor (var p = 0; p < elem.pitches.length - 1; p++) {\n\t\t\tif (elem.pitches[p].pitch > elem.pitches[p + 1].pitch) {\n\t\t\t\tsorted = false;\n\t\t\t\tvar tmp = elem.pitches[p];\n\t\t\t\telem.pitches[p] = elem.pitches[p + 1];\n\t\t\t\telem.pitches[p + 1] = tmp;\n\t\t\t}\n\t\t}\n\t} while (!sorted);\n};\n\nvar ledgerLines = function (abselem, minPitch, maxPitch, isRest, symbolWidth, additionalLedgers, dir, dx, scale) {\n\tfor (var i = maxPitch; i > 11; i--) {\n\t\tif (i % 2 === 0 && !isRest) {\n\t\t\tabselem.addFixed(new RelativeElement(null, dx, (symbolWidth + 4) * scale, i, { type: \"ledger\" }));\n\t\t}\n\t}\n\n\tfor (i = minPitch; i < 1; i++) {\n\t\tif (i % 2 === 0 && !isRest) {\n\t\t\tabselem.addFixed(new RelativeElement(null, dx, (symbolWidth + 4) * scale, i, { type: \"ledger\" }));\n\t\t}\n\t}\n\n\tfor (i = 0; i < additionalLedgers.length; i++) { // PER: draw additional ledgers\n\t\tvar ofs = symbolWidth;\n\t\tif (dir === 'down') ofs = -ofs;\n\t\tabselem.addFixed(new RelativeElement(null, ofs + dx, (symbolWidth + 4) * scale, additionalLedgers[i], { type: \"ledger\" }));\n\t}\n};\n\nAbstractEngraver.prototype.addGraceNotes = function (elem, voice, abselem, notehead, stemHeight, isBagpipes, roomtaken) {\n\tvar gracescale = 3 / 5;\n\tvar graceScaleStem = 3.5 / 5; // TODO-PER: empirically found constant.\n\tstemHeight = Math.round(stemHeight * graceScaleStem);\n\tvar gracebeam = null;\n\tvar flag;\n\n\tif (elem.gracenotes.length > 1) {\n\t\tgracebeam = new BeamElem(stemHeight, \"grace\", isBagpipes);\n\t\tif (hint) gracebeam.setHint();\n\t\tgracebeam.mainNote = abselem;\t// this gives us a reference back to the note this is attached to so that the stems can be attached somewhere.\n\t}\n\n\tvar i;\n\tvar graceoffsets = [];\n\tfor (i = elem.gracenotes.length - 1; i >= 0; i--) { // figure out where to place each gracenote\n\t\troomtaken += 10;\n\t\tgraceoffsets[i] = roomtaken;\n\t\tif (elem.gracenotes[i].accidental) {\n\t\t\troomtaken += 7;\n\t\t}\n\t}\n\n\tfor (i = 0; i < elem.gracenotes.length; i++) {\n\t\tvar gracepitch = elem.gracenotes[i].verticalPos;\n\n\t\tflag = (gracebeam) ? null : chartable.uflags[(isBagpipes) ? 5 : 3];\n\t\tvar accidentalSlot = [];\n\t\tvar ret = createNoteHead(abselem, \"noteheads.quarter\", elem.gracenotes[i],\n\t\t\t{ dir: \"up\", headx: -graceoffsets[i], extrax: -graceoffsets[i], flag: flag, scale: gracescale * this.voiceScale, accidentalSlot: accidentalSlot });\n\t\tret.notehead.highestVert = ret.notehead.pitch + stemHeight;\n\t\tvar grace = ret.notehead;\n\t\tthis.addSlursAndTies(abselem, elem.gracenotes[i], grace, voice, \"up\", true);\n\n\t\tabselem.addExtra(grace);\n\t\t// PER: added acciaccatura slash\n\t\tif (elem.gracenotes[i].acciaccatura) {\n\t\t\tvar pos = elem.gracenotes[i].verticalPos + 7 * gracescale;        // the same formula that determines the flag position.\n\t\t\tvar dAcciaccatura = gracebeam ? 5 : 6;        // just an offset to make it line up correctly.\n\t\t\tabselem.addRight(new RelativeElement(\"flags.ugrace\", -graceoffsets[i] + dAcciaccatura, 0, pos, { scalex: gracescale, scaley: gracescale }));\n\t\t}\n\t\tif (gracebeam) { // give the beam the necessary info\n\t\t\tvar graceDuration = elem.gracenotes[i].duration / 2;\n\t\t\tif (isBagpipes) graceDuration /= 2;\n\t\t\tvar pseudoabselem = {\n\t\t\t\theads: [grace],\n\t\t\t\tabcelem: { averagepitch: gracepitch, minpitch: gracepitch, maxpitch: gracepitch, duration: graceDuration }\n\t\t\t};\n\t\t\tgracebeam.add(pseudoabselem);\n\t\t} else { // draw the stem\n\t\t\tvar p1 = gracepitch + 1 / 3 * gracescale;\n\t\t\tvar p2 = gracepitch + 7 * gracescale;\n\t\t\tvar dx = grace.dx + grace.w;\n\t\t\tvar width = -0.6;\n\t\t\tabselem.addExtra(new RelativeElement(null, dx, 0, p1, { \"type\": \"stem\", \"pitch2\": p2, linewidth: width }));\n\t\t}\n\t\tledgerLines(abselem, gracepitch, gracepitch, false, glyphs.getSymbolWidth(\"noteheads.quarter\"), [], true, grace.dx - 1, 0.6);\n\n\t\t// if this is the first grace note, we might want to start a slur.\n\t\t// there is a slur if graceSlurs is specifically set.\n\t\t// there is no slur if it is bagpipes.\n\t\t// there is not a slur if the element is a spacer or invisible rest.\n\t\tvar isInvisibleRest = elem.rest && (elem.rest.type === \"spacer\" || elem.rest.type === \"invisible\");\n\t\tif (i === 0 && !isBagpipes && this.graceSlurs && !isInvisibleRest) {\n\t\t\t// This is the overall slur that is under the grace notes.\n\t\t\tvoice.addOther(new TieElem({ anchor1: grace, anchor2: notehead, isGrace: true }));\n\t\t}\n\t}\n\n\tif (gracebeam) {\n\t\tgracebeam.calcDir();\n\t\tvoice.addBeam(gracebeam);\n\t}\n\treturn roomtaken;\n};\n\nfunction addRestToAbsElement(abselem, elem, duration, dot, isMultiVoice, stemdir, isSingleLineStaff, durlog, voiceScale) {\n\tvar c;\n\tvar restpitch = 7;\n\tvar noteHead;\n\tvar roomTaken;\n\tvar roomTakenRight;\n\n\tif (isMultiVoice) {\n\t\tif (stemdir === \"down\") restpitch = 3;\n\t\tif (stemdir === \"up\") restpitch = 11;\n\t}\n\t// There is special placement for the percussion staff. If there is one staff line, then move the rest position.\n\tif (isSingleLineStaff) {\n\t\t// The half and whole rests are attached to different lines normally, so we need to tweak their position to get them to both be attached to the same one.\n\t\tif (duration < 0.5)\n\t\t\trestpitch = 7;\n\t\telse if (duration < 1)\n\t\t\trestpitch = 7;\t// half rest\n\t\telse\n\t\t\trestpitch = 5; // whole rest\n\t}\n\tswitch (elem.rest.type) {\n\t\tcase \"whole\":\n\t\t\tc = chartable.rest[0];\n\t\t\telem.averagepitch = restpitch;\n\t\t\telem.minpitch = restpitch;\n\t\t\telem.maxpitch = restpitch;\n\t\t\tdot = 0;\n\t\t\tbreak;\n\t\tcase \"rest\":\n\t\t\tif (elem.style === \"rhythm\") // special case for rhythm: rests are a handy way to express the rhythm.\n\t\t\t\tc = chartable.rhythm[-durlog];\n\t\t\telse\n\t\t\t\tc = chartable.rest[-durlog];\n\t\t\telem.averagepitch = restpitch;\n\t\t\telem.minpitch = restpitch;\n\t\t\telem.maxpitch = restpitch;\n\t\t\tbreak;\n\t\tcase \"invisible\":\n\t\tcase \"invisible-multimeasure\":\n\t\tcase \"spacer\":\n\t\t\tc = \"\";\n\t\t\telem.averagepitch = restpitch;\n\t\t\telem.minpitch = restpitch;\n\t\t\telem.maxpitch = restpitch;\n\t\t\tbreak;\n\t\tcase \"multimeasure\":\n\t\t\tc = chartable.rest['multi'];\n\t\t\telem.averagepitch = restpitch;\n\t\t\telem.minpitch = restpitch;\n\t\t\telem.maxpitch = restpitch;\n\t\t\tdot = 0;\n\t\t\tvar mmWidth = glyphs.getSymbolWidth(c);\n\t\t\tabselem.addHead(new RelativeElement(c, mmWidth, mmWidth * 2, 7));\n\t\t\tvar numMeasures = new RelativeElement(\"\" + elem.rest.text, mmWidth, mmWidth, 16, { type: \"multimeasure-text\" });\n\t\t\tabselem.addExtra(numMeasures);\n\t}\n\tif (elem.rest.type.indexOf(\"multimeasure\") < 0 && elem.rest.type !== \"invisible\") {\n\t\tvar ret = createNoteHead(abselem, c, { verticalPos: restpitch },\n\t\t\t{ dot: dot, scale: voiceScale });\n\t\tnoteHead = ret.notehead;\n\t\tif (noteHead) {\n\t\t\tabselem.addHead(noteHead);\n\t\t\troomTaken = ret.accidentalshiftx;\n\t\t\troomTakenRight = ret.dotshiftx;\n\t\t}\n\t}\n\treturn { noteHead: noteHead, roomTaken: roomTaken, roomTakenRight: roomTakenRight };\n}\n\nfunction addIfNotExist(arr, item) {\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tif (JSON.stringify(arr[i]) === JSON.stringify(item))\n\t\t\treturn;\n\t}\n\tarr.push(item);\n}\n\nAbstractEngraver.prototype.addNoteToAbcElement = function (abselem, elem, dot, stemdir, style, zeroDuration, durlog, nostem, voice) {\n\tvar dotshiftx = 0; // room taken by chords with displaced noteheads which cause dots to shift\n\tvar noteHead;\n\tvar roomTaken = 0;\n\tvar roomTakenRight = 0;\n\tvar min;\n\tvar i;\n\tvar additionalLedgers = [];\n\t// The accidentalSlot will hold a list of all the accidentals on this chord. Each element is a vertical place,\n\t// and contains a pitch, which is the last pitch that contains an accidental in that slot. The slots are numbered\n\t// from closest to the note to farther left. We only need to know the last accidental we placed because\n\t// we know that the pitches are sorted by now.\n\tvar accidentalSlot = [];\n\tvar symbolWidth = 0;\n\n\tvar dir = (elem.averagepitch >= 6) ? \"down\" : \"up\";\n\tif (stemdir) dir = stemdir;\n\n\tstyle = elem.style ? elem.style : style; // get the style of note head.\n\tif (!style || style === \"normal\") style = \"note\";\n\tvar noteSymbol;\n\tif (zeroDuration)\n\t\tnoteSymbol = chartable[style].nostem;\n\telse\n\t\tnoteSymbol = chartable[style][-durlog];\n\tif (!noteSymbol)\n\t\tconsole.log(\"noteSymbol:\", style, durlog, zeroDuration);\n\n\t// determine elements of chords which should be shifted\n\tvar p;\n\tfor (p = (dir === \"down\") ? elem.pitches.length - 2 : 1; (dir === \"down\") ? p >= 0 : p < elem.pitches.length; p = (dir === \"down\") ? p - 1 : p + 1) {\n\t\tvar prev = elem.pitches[(dir === \"down\") ? p + 1 : p - 1];\n\t\tvar curr = elem.pitches[p];\n\t\tvar delta = (dir === \"down\") ? prev.pitch - curr.pitch : curr.pitch - prev.pitch;\n\t\tif (delta <= 1 && !prev.printer_shift) {\n\t\t\tcurr.printer_shift = (delta) ? \"different\" : \"same\";\n\t\t\tif (curr.verticalPos > 11 || curr.verticalPos < 1) {        // PER: add extra ledger line\n\t\t\t\tadditionalLedgers.push(curr.verticalPos - (curr.verticalPos % 2));\n\t\t\t}\n\t\t\tif (dir === \"down\") {\n\t\t\t\troomTaken = glyphs.getSymbolWidth(noteSymbol) + 2;\n\t\t\t} else {\n\t\t\t\tdotshiftx = glyphs.getSymbolWidth(noteSymbol) + 2;\n\t\t\t}\n\t\t}\n\t}\n\n\tvar pp = elem.pitches.length;\n\tfor (p = 0; p < elem.pitches.length; p++) {\n\n\t\tif (!nostem) {\n\t\t\tvar flag;\n\t\t\tif ((dir === \"down\" && p !== 0) || (dir === \"up\" && p !== pp - 1)) { // not the stemmed elem of the chord\n\t\t\t\tflag = null;\n\t\t\t} else {\n\t\t\t\tflag = chartable[(dir === \"down\") ? \"dflags\" : \"uflags\"][-durlog];\n\t\t\t}\n\t\t}\n\t\tvar c;\n\t\tif (elem.pitches[p].style) { // There is a style for the whole group of pitches, but there could also be an override for a particular pitch.\n\t\t\tc = chartable[elem.pitches[p].style][-durlog];\n\t\t} else if (voice.isPercussion && this.percmap) {\n\t\t\tc = noteSymbol;\n\t\t\tvar percHead = this.percmap[pitchesToPerc(elem.pitches[p])];\n\t\t\tif (percHead && percHead.noteHead) {\n\t\t\t\tif (chartable[percHead.noteHead])\n\t\t\t\t\tc = chartable[percHead.noteHead][-durlog];\n\t\t\t}\n\t\t} else\n\t\t\tc = noteSymbol;\n\t\t// The highest position for the sake of placing slurs is itself if the slur is internal. It is the highest position possible if the slur is for the whole chord.\n\t\t// If the note is the only one in the chord, then any slur it has counts as if it were on the whole chord.\n\t\telem.pitches[p].highestVert = elem.pitches[p].verticalPos;\n\t\tvar isTopWhenStemIsDown = (stemdir === \"up\" || dir === \"up\") && p === 0;\n\t\tvar isBottomWhenStemIsUp = (stemdir === \"down\" || dir === \"down\") && p === pp - 1;\n\t\tif (isTopWhenStemIsDown || isBottomWhenStemIsUp) { // place to put slurs if not already on pitches\n\n\t\t\tif (elem.startSlur || pp === 1) {\n\t\t\t\telem.pitches[p].highestVert = elem.pitches[pp - 1].verticalPos;\n\t\t\t\tif (getDuration(elem) < 1 && (stemdir === \"up\" || dir === \"up\"))\n\t\t\t\t\telem.pitches[p].highestVert += 6;        // If the stem is up, then compensate for the length of the stem\n\t\t\t}\n\t\t\tif (elem.startSlur) {\n\t\t\t\tif (!elem.pitches[p].startSlur) elem.pitches[p].startSlur = []; //TODO possibly redundant, provided array is not optional\n\t\t\t\tfor (i = 0; i < elem.startSlur.length; i++) {\n\t\t\t\t\taddIfNotExist(elem.pitches[p].startSlur, elem.startSlur[i]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (elem.endSlur) {\n\t\t\t\telem.pitches[p].highestVert = elem.pitches[pp - 1].verticalPos;\n\t\t\t\tif (getDuration(elem) < 1 && (stemdir === \"up\" || dir === \"up\"))\n\t\t\t\t\telem.pitches[p].highestVert += 6;        // If the stem is up, then compensate for the length of the stem\n\t\t\t\tif (!elem.pitches[p].endSlur) elem.pitches[p].endSlur = []; //TODO possibly redundant, provided array is not optional\n\t\t\t\tfor (i = 0; i < elem.endSlur.length; i++) {\n\t\t\t\t\taddIfNotExist(elem.pitches[p].endSlur, elem.endSlur[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar hasStem = !nostem && durlog <= -1;\n\t\tvar ret = createNoteHead(abselem, c, elem.pitches[p],\n\t\t\t{ dir: dir, extrax: -roomTaken, flag: flag, dot: dot, dotshiftx: dotshiftx, scale: this.voiceScale, accidentalSlot: accidentalSlot, shouldExtendStem: !stemdir, printAccidentals: !voice.isPercussion });\n\t\tsymbolWidth = Math.max(glyphs.getSymbolWidth(c), symbolWidth);\n\t\tabselem.extraw -= ret.extraLeft;\n\t\tnoteHead = ret.notehead;\n\t\tif (noteHead) {\n\t\t\tthis.addSlursAndTies(abselem, elem.pitches[p], noteHead, voice, hasStem ? dir : null, false);\n\n\t\t\tif (elem.gracenotes && elem.gracenotes.length > 0)\n\t\t\t\tnoteHead.bottom = noteHead.bottom - 1;\t // If there is a tie to the grace notes, leave a little more room for the note to avoid collisions.\n\t\t\tabselem.addHead(noteHead);\n\t\t}\n\t\troomTaken += ret.accidentalshiftx;\n\t\troomTakenRight = Math.max(roomTakenRight, ret.dotshiftx);\n\t}\n\n\t// draw stem from the furthest note to a pitch above/below the stemmed note\n\tif (hasStem) {\n\t\tvar stemHeight = Math.round(70 * this.voiceScale) / 10;\n\t\tvar p1 = (dir === \"down\") ? elem.minpitch - stemHeight : elem.minpitch + 1 / 3;\n\t\t// PER added stemdir test to make the line meet the note.\n\t\tif (p1 > 6 && !stemdir) p1 = 6;\n\t\tvar p2 = (dir === \"down\") ? elem.maxpitch - 1 / 3 : elem.maxpitch + stemHeight;\n\t\t// PER added stemdir test to make the line meet the note.\n\t\tif (p2 < 6 && !stemdir) p2 = 6;\n\t\tvar dx = (dir === \"down\" || abselem.heads.length === 0) ? 0 : abselem.heads[0].w;\n\t\tvar width = (dir === \"down\") ? 1 : -1;\n\t\t// TODO-PER-HACK: One type of note head has a different placement of the stem. This should be more generically calculated:\n\t\tif (noteHead && noteHead.c === 'noteheads.slash.quarter') {\n\t\t\tif (dir === 'down')\n\t\t\t\tp2 -= 1;\n\t\t\telse\n\t\t\t\tp1 += 1;\n\t\t}\n\t\tif (noteHead && noteHead.c === 'noteheads.triangle.quarter') {\n\t\t\tif (dir === 'down')\n\t\t\t\tp2 -= 0.7;\n\t\t\telse\n\t\t\t\tp1 -= 1.2;\n\t\t}\n\t\tabselem.addRight(new RelativeElement(null, dx, 0, p1, { \"type\": \"stem\", \"pitch2\": p2, linewidth: width, bottom: p1 - 1 }));\n\t\t//var RelativeElement = function RelativeElement(c, dx, w, pitch, opt) {\n\t\tmin = Math.min(p1, p2);\n\t}\n\treturn { noteHead: noteHead, roomTaken: roomTaken, roomTakenRight: roomTakenRight, min: min, additionalLedgers: additionalLedgers, dir: dir, symbolWidth: symbolWidth };\n};\n\nAbstractEngraver.prototype.addLyric = function (abselem, elem) {\n\tvar lyricStr = \"\";\n\telem.lyric.forEach(function (ly) {\n\t\tvar div = ly.divider === ' ' ? \"\" : ly.divider;\n\t\tlyricStr += ly.syllable + div + \"\\n\";\n\t});\n\tvar lyricDim = this.getTextSize.calc(lyricStr, 'vocalfont', \"lyric\");\n\tvar position = elem.positioning ? elem.positioning.vocalPosition : 'below';\n\tabselem.addCentered(new RelativeElement(lyricStr, 0, lyricDim.width, undefined, { type: \"lyric\", position: position, height: lyricDim.height / spacing.STEP, dim: this.getTextSize.attr('vocalfont', \"lyric\") }));\n};\n\nAbstractEngraver.prototype.createNote = function (elem, nostem, isSingleLineStaff, voice) { //stem presence: true for drawing stemless notehead\n\tvar notehead = null;\n\tvar roomtaken = 0; // room needed to the left of the note\n\tvar roomtakenright = 0; // room needed to the right of the note\n\tvar symbolWidth = 0;\n\tvar additionalLedgers = []; // PER: handle the case of [bc'], where the b doesn't have a ledger line\n\n\tvar dir;\n\n\tvar duration = getDuration(elem);\n\tvar zeroDuration = false;\n\tif (duration === 0) { zeroDuration = true; duration = 0.25; nostem = true; }        //PER: zero duration will draw a quarter note head.\n\tvar durlog = Math.floor(Math.log(duration) / Math.log(2)); //TODO use getDurlog\n\tvar dot = 0;\n\n\tfor (var tot = Math.pow(2, durlog), inc = tot / 2; tot < duration; dot++, tot += inc, inc /= 2);\n\n\n\tif (elem.startTriplet) {\n\t\tthis.tripletmultiplier = elem.tripletMultiplier;\n\t}\n\n\tvar durationForSpacing = duration * this.tripletmultiplier;\n\tif (elem.rest && elem.rest.type === 'multimeasure')\n\t\tdurationForSpacing = 1;\n\tif (elem.rest && elem.rest.type === 'invisible-multimeasure')\n\t\tdurationForSpacing = this.measureLength * elem.rest.text;\n\tvar absType = elem.rest ? \"rest\" : \"note\";\n\tvar abselem = new AbsoluteElement(elem, durationForSpacing, 1, absType, this.tuneNumber, { durationClassOveride: elem.duration * this.tripletmultiplier });\n\tif (hint) abselem.setHint();\n\n\tif (elem.rest) {\n\t\tif (this.measureLength === duration && elem.rest.type !== 'invisible' && elem.rest.type !== 'spacer' && elem.rest.type.indexOf('multimeasure') < 0)\n\t\t\telem.rest.type = 'whole'; // If the rest is exactly a measure, always use a whole rest\n\t\tvar ret1 = addRestToAbsElement(abselem, elem, duration, dot, voice.voicetotal > 1, this.stemdir, isSingleLineStaff, durlog, this.voiceScale);\n\t\tnotehead = ret1.noteHead;\n\t\troomtaken = ret1.roomTaken;\n\t\troomtakenright = ret1.roomTakenRight;\n\t} else {\n\t\tvar ret2 = this.addNoteToAbcElement(abselem, elem, dot, this.stemdir, this.style, zeroDuration, durlog, nostem, voice);\n\t\tif (ret2.min !== undefined)\n\t\t\tthis.minY = Math.min(ret2.min, this.minY);\n\t\tnotehead = ret2.noteHead;\n\t\troomtaken = ret2.roomTaken;\n\t\troomtakenright = ret2.roomTakenRight;\n\t\tadditionalLedgers = ret2.additionalLedgers;\n\t\tdir = ret2.dir;\n\t\tsymbolWidth = ret2.symbolWidth;\n\t}\n\n\tif (elem.lyric !== undefined) {\n\t\tthis.addLyric(abselem, elem);\n\t}\n\n\tif (elem.gracenotes !== undefined) {\n\t\troomtaken += this.addGraceNotes(elem, voice, abselem, notehead, this.stemHeight * this.voiceScale, this.isBagpipes, roomtaken);\n\t}\n\n\tif (elem.decoration) {\n\t\t// TODO-PER: nostem is true if this is beamed. In that case we don't know where to place the decoration yet so just make a guess. This should be refactored to not place decorations until after the beams are determined.\n\t\t// This should probably be combined with moveDecorations()\n\t\tvar bottom = nostem && dir !== 'up' ? Math.min(-3, abselem.bottom - 6) : abselem.bottom\n\t\tthis.decoration.createDecoration(voice, elem.decoration, abselem.top, (notehead) ? notehead.w : 0, abselem, roomtaken, dir, bottom, elem.positioning, this.hasVocals, this.accentAbove);\n\t}\n\n\tif (elem.barNumber) {\n\t\tabselem.addFixed(new RelativeElement(elem.barNumber, -10, 0, 0, { type: \"barNumber\" }));\n\t}\n\n\t// ledger lines\n\tledgerLines(abselem, elem.minpitch, elem.maxpitch, elem.rest, symbolWidth, additionalLedgers, dir, -2, 1);\n\n\tif (elem.chord !== undefined) {\n\t\tvar ret3 = addChord(this.getTextSize, abselem, elem, roomtaken, roomtakenright, symbolWidth, this.jazzchords, this.germanAlphabet);\n\t\troomtaken = ret3.roomTaken;\n\t\troomtakenright = ret3.roomTakenRight;\n\t}\n\n\tif (elem.startTriplet) {\n\t\tthis.triplet = new TripletElem(elem.startTriplet, notehead, { flatBeams: this.flatBeams }); // above is opposite from case of slurs\n\t}\n\n\tif (elem.endTriplet && this.triplet) {\n\t\tthis.triplet.setCloseAnchor(notehead);\n\t}\n\n\tif (this.triplet && !elem.startTriplet && !elem.endTriplet && !(elem.rest && elem.rest.type === \"spacer\")) {\n\t\tthis.triplet.middleNote(notehead);\n\t}\n\n\treturn abselem;\n};\n\nAbstractEngraver.prototype.addSlursAndTies = function (abselem, pitchelem, notehead, voice, dir, isGrace) {\n\tif (pitchelem.endTie) {\n\t\tif (this.ties.length > 0) {\n\t\t\t// If there are multiple open ties, find the one that applies by matching the pitch, if possible.\n\t\t\tvar found = false;\n\t\t\tfor (var j = 0; j < this.ties.length; j++) {\n\t\t\t\tif (this.ties[j].anchor1 && this.ties[j].anchor1.pitch === notehead.pitch) {\n\t\t\t\t\tthis.ties[j].setEndAnchor(notehead);\n\t\t\t\t\tvoice.setRange(this.ties[j])\n\t\t\t\t\tthis.ties.splice(j, 1);\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!found) {\n\t\t\t\tthis.ties[0].setEndAnchor(notehead);\n\t\t\t\tvoice.setRange(this.ties[0])\n\t\t\t\tthis.ties.splice(0, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tvar voiceNumber = voice.voicetotal < 2 ? -1 : voice.voicenumber;\n\tif (pitchelem.startTie) {\n\t\tvar tie = new TieElem({ anchor1: notehead, force: (this.stemdir === \"down\" || this.stemdir === \"up\"), stemDir: this.stemdir, isGrace: isGrace, voiceNumber: voiceNumber, style: pitchelem.startTie.style });\n\t\tif (hint) tie.setHint();\n\n\t\tthis.ties[this.ties.length] = tie;\n\t\tvoice.addOther(tie);\n\t\t// HACK-PER: For the animation, we need to know if a note is tied to the next one, so here's a flag.\n\t\t// Unfortunately, only some of the notes in the current event might be tied, but this will consider it\n\t\t// tied if any one of them is. That will work for most cases.\n\t\tabselem.startTie = true;\n\t}\n\n\tvar slur;\n\tvar slurid;\n\tif (pitchelem.endSlur) {\n\t\tfor (var i = 0; i < pitchelem.endSlur.length; i++) {\n\t\t\tslurid = pitchelem.endSlur[i];\n\t\t\tif (this.slurs[slurid]) {\n\t\t\t\tslur = this.slurs[slurid];\n\t\t\t\tslur.setEndAnchor(notehead);\n\t\t\t\tvoice.setRange(slur)\n\t\t\t\tdelete this.slurs[slurid];\n\t\t\t} else {\n\t\t\t\tslur = new TieElem({ anchor2: notehead, stemDir: this.stemdir, voiceNumber: voiceNumber });\n\t\t\t\tif (hint) slur.setHint();\n\t\t\t\tvoice.addOther(slur);\n\t\t\t}\n\t\t\tif (this.startlimitelem) {\n\t\t\t\tslur.setStartX(this.startlimitelem);\n\t\t\t}\n\t\t}\n\t} else if (!isGrace) {\n\t\tfor (var s in this.slurs) {\n\t\t\tif (this.slurs.hasOwnProperty(s)) {\n\t\t\t\tthis.slurs[s].addInternalNote(notehead);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (pitchelem.startSlur) {\n\t\tfor (i = 0; i < pitchelem.startSlur.length; i++) {\n\t\t\tslurid = pitchelem.startSlur[i].label;\n\t\t\tslur = new TieElem({ anchor1: notehead, stemDir: this.stemdir, voiceNumber: voiceNumber, style: pitchelem.startSlur[i].style });\n\t\t\tif (hint) slur.setHint();\n\t\t\tthis.slurs[slurid] = slur;\n\t\t\tvoice.addOther(slur);\n\t\t}\n\t}\n};\n\nAbstractEngraver.prototype.addMeasureNumber = function (number, abselem) {\n\tvar measureNumDim = this.getTextSize.calc(number, \"measurefont\", 'bar-number');\n\tvar dx = 0;\n\tif (abselem.isClef) // If this is a clef rather than bar line, then the number shouldn't be centered because it could overlap the left side. This is an easy way to let it be centered but move it over, too.\n\t\tdx += measureNumDim.width / 2\n\t// MAE 1 Oct 2024 - Change 13 to 13.5 since previously bar numbers were very slightly overlapping the top of the clef\n\tvar vert = measureNumDim.width > 10 && abselem.abcelem.type === \"treble\" ? 13.5 : 11\n\tabselem.addFixed(new RelativeElement(number, dx, measureNumDim.width, vert + measureNumDim.height / spacing.STEP, { type: \"barNumber\", dim: this.getTextSize.attr(\"measurefont\", 'bar-number') }));\n};\n\nAbstractEngraver.prototype.createBarLine = function (voice, elem, isFirstStaff) {\n\t// bar_thin, bar_thin_thick, bar_thin_thin, bar_thick_thin, bar_right_repeat, bar_left_repeat, bar_double_repeat\n\n\tvar abselem = new AbsoluteElement(elem, 0, 10, 'bar', this.tuneNumber);\n\tvar anchor = null; // place to attach part lines\n\tvar dx = 0;\n\n\tif (elem.barNumber) {\n\t\tthis.addMeasureNumber(elem.barNumber, abselem);\n\t}\n\n\n\tvar firstdots = (elem.type === \"bar_right_repeat\" || elem.type === \"bar_dbl_repeat\");\n\tvar firstthin = (elem.type !== \"bar_left_repeat\" && elem.type !== \"bar_thick_thin\" && elem.type !== \"bar_invisible\");\n\tvar thick = (elem.type === \"bar_right_repeat\" || elem.type === \"bar_dbl_repeat\" || elem.type === \"bar_left_repeat\" ||\n\t\telem.type === \"bar_thin_thick\" || elem.type === \"bar_thick_thin\");\n\tvar secondthin = (elem.type === \"bar_left_repeat\" || elem.type === \"bar_thick_thin\" || elem.type === \"bar_thin_thin\" || elem.type === \"bar_dbl_repeat\");\n\tvar seconddots = (elem.type === \"bar_left_repeat\" || elem.type === \"bar_dbl_repeat\");\n\n\t// limit positioning of slurs\n\tif (firstdots || seconddots) {\n\t\tfor (var slur in this.slurs) {\n\t\t\tif (this.slurs.hasOwnProperty(slur)) {\n\t\t\t\tthis.slurs[slur].setEndX(abselem);\n\t\t\t}\n\t\t}\n\t\tthis.startlimitelem = abselem;\n\t}\n\n\tif (firstdots) {\n\t\tabselem.addRight(new RelativeElement(\"dots.dot\", dx, 1, 7));\n\t\tabselem.addRight(new RelativeElement(\"dots.dot\", dx, 1, 5));\n\t\tdx += 6; //2 hardcoded, twice;\n\t}\n\n\tif (firstthin) {\n\t\tanchor = new RelativeElement(null, dx, 1, 2, { \"type\": \"bar\", \"pitch2\": 10, linewidth: 0.6 });\n\t\tabselem.addRight(anchor);\n\t}\n\n\tif (elem.type === \"bar_invisible\") {\n\t\tanchor = new RelativeElement(null, dx, 1, 2, { \"type\": \"none\", \"pitch2\": 10, linewidth: 0.6 });\n\t\tabselem.addRight(anchor);\n\t}\n\n\tif (elem.decoration) {\n\t\tthis.decoration.createDecoration(voice, elem.decoration, 12, (thick) ? 3 : 1, abselem, 0, \"down\", 2, elem.positioning, this.hasVocals, this.accentAbove);\n\t}\n\n\tif (thick) {\n\t\tdx += 4; //3 hardcoded;\n\t\tanchor = new RelativeElement(null, dx, 4, 2, { \"type\": \"bar\", \"pitch2\": 10, linewidth: 4 });\n\t\tabselem.addRight(anchor);\n\t\tdx += 5;\n\t}\n\n\t// if (this.partstartelem && (thick || (firstthin && secondthin))) { // means end of nth part\n\t// this.partstartelem.anchor2=anchor;\n\t// this.partstartelem = null;\n\t// }\n\n\tif (this.partstartelem && elem.endEnding) {\n\t\tthis.partstartelem.anchor2 = anchor;\n\t\tthis.partstartelem = null;\n\t}\n\n\tif (secondthin) {\n\t\tdx += 3; //3 hardcoded;\n\t\tanchor = new RelativeElement(null, dx, 1, 2, { \"type\": \"bar\", \"pitch2\": 10, linewidth: 0.6 });\n\t\tabselem.addRight(anchor); // 3 is hardcoded\n\t}\n\n\tif (seconddots) {\n\t\tdx += 3; //3 hardcoded;\n\t\tabselem.addRight(new RelativeElement(\"dots.dot\", dx, 1, 7));\n\t\tabselem.addRight(new RelativeElement(\"dots.dot\", dx, 1, 5));\n\t} // 2 is hardcoded\n\n\tif (elem.startEnding && isFirstStaff) {\n\t\t// MAE 17 May 2025 - Fixes drawing issue\n\t\tif (voice.voicenumber === 0){\n\t\t\t// only put the first & second ending marks on the first staff\n\t\t\tvar textWidth = this.getTextSize.calc(elem.startEnding, \"repeatfont\", '').width;\n\t\t\tabselem.minspacing += textWidth + 10; // Give plenty of room for the ending number.\n\t\t\tthis.partstartelem = new EndingElem(elem.startEnding, anchor, null);\n\t\t\tvoice.addOther(this.partstartelem);\n\t\t}\n\t}\n\t// Add a little space to the left of the bar line so that nothing can crowd it.\n\tabselem.extraw -= 5;\n\n\tif (elem.chord !== undefined) {\n\t\tvar ret3 = addChord(this.getTextSize, abselem, elem, 0, 0, 0, false, this.germanAlphabet);\n\t}\n\n\treturn abselem;\n\n};\n\nmodule.exports = AbstractEngraver;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2Fic3RyYWN0LWVuZ3JhdmVyLmpzIiwibWFwcGluZ3MiOiJBQUFBOztBQUVBLHNCQUFzQixtQkFBTyxDQUFDLCtHQUE2QjtBQUMzRCxlQUFlLG1CQUFPLENBQUMsdUdBQXlCO0FBQ2hELGdCQUFnQixtQkFBTyxDQUFDLHlHQUEwQjtBQUNsRCxpQkFBaUIsbUJBQU8sQ0FBQyxtRkFBZTtBQUN4Qyx5QkFBeUIsbUJBQU8sQ0FBQyxxR0FBd0I7QUFDekQscUJBQXFCLG1CQUFPLENBQUMsNkZBQW9CO0FBQ2pELDBCQUEwQixtQkFBTyxDQUFDLHVHQUF5QjtBQUMzRCxpQkFBaUIsbUJBQU8sQ0FBQyxpRkFBYztBQUN2QyxpQkFBaUIsbUJBQU8sQ0FBQywyR0FBMkI7QUFDcEQsYUFBYSxtQkFBTyxDQUFDLHlFQUFVO0FBQy9CLHNCQUFzQixtQkFBTyxDQUFDLCtHQUE2QjtBQUMzRCxjQUFjLG1CQUFPLENBQUMsbUZBQW9CO0FBQzFDLHdCQUF3QixtQkFBTyxDQUFDLHFIQUFnQztBQUNoRSxtQkFBbUIsbUJBQU8sQ0FBQyx5R0FBMEI7QUFDckQsY0FBYyxtQkFBTyxDQUFDLHFHQUF3QjtBQUM5QyxrQkFBa0IsbUJBQU8sQ0FBQyw2R0FBNEI7QUFDdEQsbUJBQW1CLG1CQUFPLENBQUMseUdBQTBCO0FBQ3JELGVBQWUsbUJBQU8sQ0FBQywrRUFBYTtBQUNwQyxvQkFBb0IsbUJBQU8sQ0FBQyw0RkFBNkI7O0FBRXpELGtCQUFrQixtQkFBTyxDQUFDLGtGQUF3Qjs7QUFFbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxTQUFTLDJLQUEySztBQUNwTCxTQUFTLGlQQUFpUDtBQUMxUCxXQUFXLDZTQUE2UztBQUN4VCxNQUFNLG9UQUFvVDtBQUMxVCxhQUFhLGtWQUFrVjtBQUMvVixhQUFhLGtWQUFrVjtBQUMvVixXQUFXLHVFQUF1RTtBQUNsRixXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLG1CQUFtQjtBQUNwQyxrQkFBa0IsNkJBQTZCO0FBQy9DLG1CQUFtQixnQ0FBZ0M7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDRCQUE0QjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSiwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDRIQUE0SDtBQUNoSztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQSwrQkFBK0IsZ0hBQWdIO0FBQy9JO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIseUJBQXlCO0FBQzFDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHFCQUFxQjtBQUNwQztBQUNBO0FBQ0EscUZBQXFGO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDBDQUEwQyxRQUFRO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsYUFBYTtBQUNsRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFLGlEQUFpRDtBQUN6SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRGQUE0RixlQUFlO0FBQzNHO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix5QkFBeUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLGtCQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGtCQUFrQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNkJBQTZCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDQSxrRkFBa0YsZ0JBQWdCO0FBQ2xHO0FBQ0E7O0FBRUEsb0JBQW9CLE9BQU87QUFDM0I7QUFDQSxrRkFBa0YsZ0JBQWdCO0FBQ2xHO0FBQ0E7O0FBRUEsYUFBYSw4QkFBOEIsT0FBTztBQUNsRDtBQUNBO0FBQ0EsMEdBQTBHLGdCQUFnQjtBQUMxSDtBQUNBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQzs7QUFFQTtBQUNBO0FBQ0Esc0NBQXNDLFFBQVEsT0FBTztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsYUFBYSw0QkFBNEI7QUFDekM7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSywrSUFBK0k7QUFDcEo7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRTtBQUNyRSxpREFBaUQ7QUFDakQsb0dBQW9HLHdDQUF3QztBQUM1STtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0EsSUFBSSxPQUFPO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsZ0RBQWdEO0FBQzNHO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msa0RBQWtEO0FBQ2xGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNGQUFzRiwyQkFBMkI7QUFDakg7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHdCQUF3QjtBQUNqRSxLQUFLLDZCQUE2QjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQTtBQUNBLGlCQUFpQixnQkFBZ0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMERBQTBELHFEQUFxRDtBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStEO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYSx5QkFBeUI7O0FBRXRDO0FBQ0E7QUFDQSx3RUFBd0U7QUFDeEU7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRDs7QUFFckQ7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQSxvRUFBb0U7QUFDcEUsZ0JBQWdCLDJCQUEyQjtBQUMzQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDLGdFQUFnRTtBQUNoRSxnQkFBZ0IseUJBQXlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLLHFNQUFxTTtBQUMxTTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELGdFQUFnRTtBQUMxSDtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsbUZBQW1GLDZIQUE2SDtBQUNoTjs7QUFFQSw0RkFBNEY7QUFDNUY7QUFDQSxvQkFBb0I7QUFDcEIseUJBQXlCO0FBQ3pCO0FBQ0EsNkJBQTZCOztBQUU3Qjs7QUFFQTtBQUNBO0FBQ0EsdUJBQXVCLHFCQUFxQixpQkFBaUIsd0JBQXdCO0FBQ3JGLDREQUE0RDtBQUM1RDs7QUFFQSxvREFBb0QsZ0JBQWdCOzs7QUFHcEU7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRGQUE0Riw4REFBOEQ7QUFDMUo7O0FBRUE7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9FQUFvRSxtQkFBbUI7QUFDdkY7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0VBQWdFLDJCQUEyQixHQUFHO0FBQzlGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNCQUFzQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDBCQUEwQixrTEFBa0w7QUFDNU07O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDhCQUE4QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wseUJBQXlCLG9FQUFvRTtBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxjQUFjLGdDQUFnQztBQUM5QztBQUNBLHdCQUF3Qix5R0FBeUc7QUFDakk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUhBQXFILDRFQUE0RTtBQUNqTTs7QUFFQTtBQUNBOztBQUVBO0FBQ0Esb0JBQW9CO0FBQ3BCOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQSxpREFBaUQsNkNBQTZDO0FBQzlGO0FBQ0E7O0FBRUE7QUFDQSxpREFBaUQsOENBQThDO0FBQy9GO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVztBQUNYLGlEQUFpRCwyQ0FBMkM7QUFDNUY7QUFDQTtBQUNBOztBQUVBLHNFQUFzRTtBQUN0RTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXO0FBQ1gsaURBQWlELDZDQUE2QztBQUM5Riw0QkFBNEI7QUFDNUI7O0FBRUE7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2Fic3RyYWN0LWVuZ3JhdmVyLmpzP2EwY2UiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gYWJjX2Fic3RyYWN0X2VuZ3JhdmVyLmpzOiBDcmVhdGVzIGEgZGF0YSBzdHJ1Y3R1cmUgc3VpdGFibGUgZm9yIHByaW50aW5nIGEgbGluZSBvZiBhYmNcblxudmFyIEFic29sdXRlRWxlbWVudCA9IHJlcXVpcmUoJy4vZWxlbWVudHMvYWJzb2x1dGUtZWxlbWVudCcpO1xudmFyIEJlYW1FbGVtID0gcmVxdWlyZSgnLi9lbGVtZW50cy9iZWFtLWVsZW1lbnQnKTtcbnZhciBCcmFjZUVsZW0gPSByZXF1aXJlKCcuL2VsZW1lbnRzL2JyYWNlLWVsZW1lbnQnKTtcbnZhciBjcmVhdGVDbGVmID0gcmVxdWlyZSgnLi9jcmVhdGUtY2xlZicpO1xudmFyIGNyZWF0ZUtleVNpZ25hdHVyZSA9IHJlcXVpcmUoJy4vY3JlYXRlLWtleS1zaWduYXR1cmUnKTtcbnZhciBjcmVhdGVOb3RlSGVhZCA9IHJlcXVpcmUoJy4vY3JlYXRlLW5vdGUtaGVhZCcpO1xudmFyIGNyZWF0ZVRpbWVTaWduYXR1cmUgPSByZXF1aXJlKCcuL2NyZWF0ZS10aW1lLXNpZ25hdHVyZScpO1xudmFyIERlY29yYXRpb24gPSByZXF1aXJlKCcuL2RlY29yYXRpb24nKTtcbnZhciBFbmRpbmdFbGVtID0gcmVxdWlyZSgnLi9lbGVtZW50cy9lbmRpbmctZWxlbWVudCcpO1xudmFyIGdseXBocyA9IHJlcXVpcmUoJy4vZ2x5cGhzJyk7XG52YXIgUmVsYXRpdmVFbGVtZW50ID0gcmVxdWlyZSgnLi9lbGVtZW50cy9yZWxhdGl2ZS1lbGVtZW50Jyk7XG52YXIgc3BhY2luZyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvc3BhY2luZycpO1xudmFyIFN0YWZmR3JvdXBFbGVtZW50ID0gcmVxdWlyZSgnLi9lbGVtZW50cy9zdGFmZi1ncm91cC1lbGVtZW50Jyk7XG52YXIgVGVtcG9FbGVtZW50ID0gcmVxdWlyZSgnLi9lbGVtZW50cy90ZW1wby1lbGVtZW50Jyk7XG52YXIgVGllRWxlbSA9IHJlcXVpcmUoJy4vZWxlbWVudHMvdGllLWVsZW1lbnQnKTtcbnZhciBUcmlwbGV0RWxlbSA9IHJlcXVpcmUoJy4vZWxlbWVudHMvdHJpcGxldC1lbGVtZW50Jyk7XG52YXIgVm9pY2VFbGVtZW50ID0gcmVxdWlyZSgnLi9lbGVtZW50cy92b2ljZS1lbGVtZW50Jyk7XG52YXIgYWRkQ2hvcmQgPSByZXF1aXJlKCcuL2FkZC1jaG9yZCcpO1xudmFyIHBpdGNoZXNUb1BlcmMgPSByZXF1aXJlKCcuLi8uLi9zeW50aC9waXRjaGVzLXRvLXBlcmMnKVxuXG52YXIgcGFyc2VDb21tb24gPSByZXF1aXJlKCcuLi8uLi9wYXJzZS9hYmNfY29tbW9uJyk7XG5cbnZhciBnZXREdXJhdGlvbiA9IGZ1bmN0aW9uIChlbGVtKSB7XG5cdHZhciBkID0gMDtcblx0aWYgKGVsZW0uZHVyYXRpb24pIHtcblx0XHRkID0gZWxlbS5kdXJhdGlvbjtcblx0fVxuXHRyZXR1cm4gZDtcbn07XG5cbnZhciBoaW50ID0gZmFsc2U7XG5cbnZhciBjaGFydGFibGUgPSB7XG5cdHJlc3Q6IHsgMDogXCJyZXN0cy53aG9sZVwiLCAxOiBcInJlc3RzLmhhbGZcIiwgMjogXCJyZXN0cy5xdWFydGVyXCIsIDM6IFwicmVzdHMuOHRoXCIsIDQ6IFwicmVzdHMuMTZ0aFwiLCA1OiBcInJlc3RzLjMybmRcIiwgNjogXCJyZXN0cy42NHRoXCIsIDc6IFwicmVzdHMuMTI4dGhcIiwgXCJtdWx0aVwiOiBcInJlc3RzLm11bHRpbWVhc3VyZVwiIH0sXG5cdG5vdGU6IHsgXCItMVwiOiBcIm5vdGVoZWFkcy5kYmxcIiwgMDogXCJub3RlaGVhZHMud2hvbGVcIiwgMTogXCJub3RlaGVhZHMuaGFsZlwiLCAyOiBcIm5vdGVoZWFkcy5xdWFydGVyXCIsIDM6IFwibm90ZWhlYWRzLnF1YXJ0ZXJcIiwgNDogXCJub3RlaGVhZHMucXVhcnRlclwiLCA1OiBcIm5vdGVoZWFkcy5xdWFydGVyXCIsIDY6IFwibm90ZWhlYWRzLnF1YXJ0ZXJcIiwgNzogXCJub3RlaGVhZHMucXVhcnRlclwiLCAnbm9zdGVtJzogXCJub3RlaGVhZHMucXVhcnRlclwiIH0sXG5cdHJoeXRobTogeyBcIi0xXCI6IFwibm90ZWhlYWRzLnNsYXNoLndob2xlXCIsIDA6IFwibm90ZWhlYWRzLnNsYXNoLndob2xlXCIsIDE6IFwibm90ZWhlYWRzLnNsYXNoLndob2xlXCIsIDI6IFwibm90ZWhlYWRzLnNsYXNoLnF1YXJ0ZXJcIiwgMzogXCJub3RlaGVhZHMuc2xhc2gucXVhcnRlclwiLCA0OiBcIm5vdGVoZWFkcy5zbGFzaC5xdWFydGVyXCIsIDU6IFwibm90ZWhlYWRzLnNsYXNoLnF1YXJ0ZXJcIiwgNjogXCJub3RlaGVhZHMuc2xhc2gucXVhcnRlclwiLCA3OiBcIm5vdGVoZWFkcy5zbGFzaC5xdWFydGVyXCIsIG5vc3RlbTogXCJub3RlaGVhZHMuc2xhc2gubm9zdGVtXCIgfSxcblx0eDogeyBcIi0xXCI6IFwibm90ZWhlYWRzLmluZGV0ZXJtaW5hdGVcIiwgMDogXCJub3RlaGVhZHMuaW5kZXRlcm1pbmF0ZVwiLCAxOiBcIm5vdGVoZWFkcy5pbmRldGVybWluYXRlXCIsIDI6IFwibm90ZWhlYWRzLmluZGV0ZXJtaW5hdGVcIiwgMzogXCJub3RlaGVhZHMuaW5kZXRlcm1pbmF0ZVwiLCA0OiBcIm5vdGVoZWFkcy5pbmRldGVybWluYXRlXCIsIDU6IFwibm90ZWhlYWRzLmluZGV0ZXJtaW5hdGVcIiwgNjogXCJub3RlaGVhZHMuaW5kZXRlcm1pbmF0ZVwiLCA3OiBcIm5vdGVoZWFkcy5pbmRldGVybWluYXRlXCIsIG5vc3RlbTogXCJub3RlaGVhZHMuaW5kZXRlcm1pbmF0ZVwiIH0sXG5cdGhhcm1vbmljOiB7IFwiLTFcIjogXCJub3RlaGVhZHMuaGFybW9uaWMucXVhcnRlclwiLCAwOiBcIm5vdGVoZWFkcy5oYXJtb25pYy5xdWFydGVyXCIsIDE6IFwibm90ZWhlYWRzLmhhcm1vbmljLnF1YXJ0ZXJcIiwgMjogXCJub3RlaGVhZHMuaGFybW9uaWMucXVhcnRlclwiLCAzOiBcIm5vdGVoZWFkcy5oYXJtb25pYy5xdWFydGVyXCIsIDQ6IFwibm90ZWhlYWRzLmhhcm1vbmljLnF1YXJ0ZXJcIiwgNTogXCJub3RlaGVhZHMuaGFybW9uaWMucXVhcnRlclwiLCA2OiBcIm5vdGVoZWFkcy5oYXJtb25pYy5xdWFydGVyXCIsIDc6IFwibm90ZWhlYWRzLmhhcm1vbmljLnF1YXJ0ZXJcIiwgbm9zdGVtOiBcIm5vdGVoZWFkcy5oYXJtb25pYy5xdWFydGVyXCIgfSxcblx0dHJpYW5nbGU6IHsgXCItMVwiOiBcIm5vdGVoZWFkcy50cmlhbmdsZS5xdWFydGVyXCIsIDA6IFwibm90ZWhlYWRzLnRyaWFuZ2xlLnF1YXJ0ZXJcIiwgMTogXCJub3RlaGVhZHMudHJpYW5nbGUucXVhcnRlclwiLCAyOiBcIm5vdGVoZWFkcy50cmlhbmdsZS5xdWFydGVyXCIsIDM6IFwibm90ZWhlYWRzLnRyaWFuZ2xlLnF1YXJ0ZXJcIiwgNDogXCJub3RlaGVhZHMudHJpYW5nbGUucXVhcnRlclwiLCA1OiBcIm5vdGVoZWFkcy50cmlhbmdsZS5xdWFydGVyXCIsIDY6IFwibm90ZWhlYWRzLnRyaWFuZ2xlLnF1YXJ0ZXJcIiwgNzogXCJub3RlaGVhZHMudHJpYW5nbGUucXVhcnRlclwiLCBub3N0ZW06IFwibm90ZWhlYWRzLnRyaWFuZ2xlLnF1YXJ0ZXJcIiB9LFxuXHR1ZmxhZ3M6IHsgMzogXCJmbGFncy51OHRoXCIsIDQ6IFwiZmxhZ3MudTE2dGhcIiwgNTogXCJmbGFncy51MzJuZFwiLCA2OiBcImZsYWdzLnU2NHRoXCIgfSxcblx0ZGZsYWdzOiB7IDM6IFwiZmxhZ3MuZDh0aFwiLCA0OiBcImZsYWdzLmQxNnRoXCIsIDU6IFwiZmxhZ3MuZDMybmRcIiwgNjogXCJmbGFncy5kNjR0aFwiIH1cbn07XG5cbnZhciBBYnN0cmFjdEVuZ3JhdmVyID0gZnVuY3Rpb24gKGdldFRleHRTaXplLCB0dW5lTnVtYmVyLCBvcHRpb25zKSB7XG5cdHRoaXMuZGVjb3JhdGlvbiA9IG5ldyBEZWNvcmF0aW9uKCk7XG5cdHRoaXMuZ2V0VGV4dFNpemUgPSBnZXRUZXh0U2l6ZTtcblx0dGhpcy50dW5lTnVtYmVyID0gdHVuZU51bWJlcjtcblx0dGhpcy5pc0JhZ3BpcGVzID0gb3B0aW9ucy5iYWdwaXBlcztcblx0dGhpcy5mbGF0QmVhbXMgPSBvcHRpb25zLmZsYXRiZWFtcztcblx0dGhpcy5ncmFjZVNsdXJzID0gb3B0aW9ucy5ncmFjZVNsdXJzO1xuXHR0aGlzLnBlcmNtYXAgPSBvcHRpb25zLnBlcmNtYXA7XG5cdHRoaXMuaW5pdGlhbENsZWYgPSBvcHRpb25zLmluaXRpYWxDbGVmXG5cdHRoaXMuamF6emNob3JkcyA9ICEhb3B0aW9ucy5qYXp6Y2hvcmRzXG5cdHRoaXMuYWNjZW50QWJvdmUgPSAhIW9wdGlvbnMuYWNjZW50QWJvdmVcblx0dGhpcy5nZXJtYW5BbHBoYWJldCA9ICEhb3B0aW9ucy5nZXJtYW5BbHBoYWJldFxuXHR0aGlzLnJlc2V0KCk7XG59O1xuXG5BYnN0cmFjdEVuZ3JhdmVyLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcblx0dGhpcy5zbHVycyA9IHt9O1xuXHR0aGlzLnRpZXMgPSBbXTtcblx0dGhpcy52b2ljZVNjYWxlID0gMTtcblx0dGhpcy52b2ljZUNvbG9yID0gdW5kZWZpbmVkO1xuXHR0aGlzLnNsdXJzYnl2b2ljZSA9IHt9O1xuXHR0aGlzLnRpZXNieXZvaWNlID0ge307XG5cdHRoaXMuZW5kaW5nc2J5dm9pY2UgPSB7fTtcblx0dGhpcy5zY2FsZUJ5Vm9pY2UgPSB7fTtcblx0dGhpcy5jb2xvckJ5Vm9pY2UgPSB7fTtcblx0dGhpcy50cmlwbGV0bXVsdGlwbGllciA9IDE7XG5cblx0dGhpcy5hYmNsaW5lID0gdW5kZWZpbmVkO1xuXHR0aGlzLmFjY2lkZW50YWxTbG90ID0gdW5kZWZpbmVkO1xuXHR0aGlzLmFjY2lkZW50YWxzaGlmdHggPSB1bmRlZmluZWQ7XG5cdHRoaXMuZG90c2hpZnR4ID0gdW5kZWZpbmVkO1xuXHR0aGlzLmhhc1ZvY2FscyA9IGZhbHNlO1xuXHR0aGlzLm1pblkgPSB1bmRlZmluZWQ7XG5cdHRoaXMucGFydHN0YXJ0ZWxlbSA9IHVuZGVmaW5lZDtcblx0dGhpcy5zdGFydGxpbWl0ZWxlbSA9IHVuZGVmaW5lZDtcblx0dGhpcy5zdGVtZGlyID0gdW5kZWZpbmVkO1xufTtcblxuQWJzdHJhY3RFbmdyYXZlci5wcm90b3R5cGUuc2V0U3RlbUhlaWdodCA9IGZ1bmN0aW9uIChoZWlnaHRJblBpeGVscykge1xuXHR0aGlzLnN0ZW1IZWlnaHQgPSBNYXRoLnJvdW5kKGhlaWdodEluUGl4ZWxzICogMTAgLyBzcGFjaW5nLlNURVApIC8gMTA7XG59O1xuXG5BYnN0cmFjdEVuZ3JhdmVyLnByb3RvdHlwZS5nZXRDdXJyZW50Vm9pY2VJZCA9IGZ1bmN0aW9uIChzLCB2KSB7XG5cdHJldHVybiBcInNcIiArIHMgKyBcInZcIiArIHY7XG59O1xuXG5BYnN0cmFjdEVuZ3JhdmVyLnByb3RvdHlwZS5wdXNoQ3Jvc3NMaW5lRWxlbXMgPSBmdW5jdGlvbiAocywgdikge1xuXHR0aGlzLnNsdXJzYnl2b2ljZVt0aGlzLmdldEN1cnJlbnRWb2ljZUlkKHMsIHYpXSA9IHRoaXMuc2x1cnM7XG5cdHRoaXMudGllc2J5dm9pY2VbdGhpcy5nZXRDdXJyZW50Vm9pY2VJZChzLCB2KV0gPSB0aGlzLnRpZXM7XG5cdHRoaXMuZW5kaW5nc2J5dm9pY2VbdGhpcy5nZXRDdXJyZW50Vm9pY2VJZChzLCB2KV0gPSB0aGlzLnBhcnRzdGFydGVsZW07XG5cdHRoaXMuc2NhbGVCeVZvaWNlW3RoaXMuZ2V0Q3VycmVudFZvaWNlSWQocywgdildID0gdGhpcy52b2ljZVNjYWxlO1xuXHRpZiAodGhpcy52b2ljZUNvbG9yKVxuXHRcdHRoaXMuY29sb3JCeVZvaWNlW3RoaXMuZ2V0Q3VycmVudFZvaWNlSWQocywgdildID0gdGhpcy52b2ljZUNvbG9yO1xufTtcblxuQWJzdHJhY3RFbmdyYXZlci5wcm90b3R5cGUucG9wQ3Jvc3NMaW5lRWxlbXMgPSBmdW5jdGlvbiAocywgdikge1xuXHR0aGlzLnNsdXJzID0gdGhpcy5zbHVyc2J5dm9pY2VbdGhpcy5nZXRDdXJyZW50Vm9pY2VJZChzLCB2KV0gfHwge307XG5cdHRoaXMudGllcyA9IHRoaXMudGllc2J5dm9pY2VbdGhpcy5nZXRDdXJyZW50Vm9pY2VJZChzLCB2KV0gfHwgW107XG5cdHRoaXMucGFydHN0YXJ0ZWxlbSA9IHRoaXMuZW5kaW5nc2J5dm9pY2VbdGhpcy5nZXRDdXJyZW50Vm9pY2VJZChzLCB2KV07XG5cdHRoaXMudm9pY2VTY2FsZSA9IHRoaXMuc2NhbGVCeVZvaWNlW3RoaXMuZ2V0Q3VycmVudFZvaWNlSWQocywgdildO1xuXHRpZiAodGhpcy52b2ljZVNjYWxlID09PSB1bmRlZmluZWQpIHRoaXMudm9pY2VTY2FsZSA9IDE7XG5cdHRoaXMudm9pY2VDb2xvciA9IHRoaXMuY29sb3JCeVZvaWNlW3RoaXMuZ2V0Q3VycmVudFZvaWNlSWQocywgdildO1xufTtcblxuQWJzdHJhY3RFbmdyYXZlci5wcm90b3R5cGUuY29udGFpbnNMeXJpY3MgPSBmdW5jdGlvbiAoc3RhdmVzKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBzdGF2ZXNbaV0udm9pY2VzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRmb3IgKHZhciBrID0gMDsgayA8IHN0YXZlc1tpXS52b2ljZXNbal0ubGVuZ3RoOyBrKyspIHtcblx0XHRcdFx0dmFyIGVsID0gc3RhdmVzW2ldLnZvaWNlc1tqXVtrXTtcblx0XHRcdFx0aWYgKGVsLmx5cmljKSB7XG5cdFx0XHRcdFx0Ly8gV2UganVzdCB3YW50IHRvIHNlZSBpZiB0aGVyZSBhcmUgdm9jYWxzIGJlbG93IHRoZSBtdXNpYyB0byBrbm93IHdoZXJlIHRvIHB1dCB0aGUgZHluYW1pY3MuXG5cdFx0XHRcdFx0aWYgKCFlbC5wb3NpdGlvbmluZyB8fCBlbC5wb3NpdGlvbmluZy52b2NhbFBvc2l0aW9uID09PSAnYmVsb3cnKVxuXHRcdFx0XHRcdFx0dGhpcy5oYXNWb2NhbHMgPSB0cnVlO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxuQWJzdHJhY3RFbmdyYXZlci5wcm90b3R5cGUuY3JlYXRlQUJDTGluZSA9IGZ1bmN0aW9uIChzdGFmZnMsIHRlbXBvLCBsKSB7XG5cdHRoaXMubWluWSA9IDI7IC8vIFBFUjogVGhpcyB3aWxsIGJlIHRoZSBsb3dlc3QgdGhhdCBhbnkgbm90ZSByZWFjaGVzLiBJdCB3aWxsIGJlIHVzZWQgdG8gc2V0IHRoZSBkeW5hbWljcyByb3cuXG5cdC8vIFNlZSBpZiB0aGVyZSBhcmUgYW55IGx5cmljcyBvbiB0aGlzIGxpbmUuXG5cdHRoaXMuY29udGFpbnNMeXJpY3Moc3RhZmZzKTtcblx0dmFyIHN0YWZmZ3JvdXAgPSBuZXcgU3RhZmZHcm91cEVsZW1lbnQodGhpcy5nZXRUZXh0U2l6ZSk7XG5cdHRoaXMudGVtcG9TZXQgPSBmYWxzZTtcblx0Zm9yICh2YXIgcyA9IDA7IHMgPCBzdGFmZnMubGVuZ3RoOyBzKyspIHtcblx0XHRpZiAoaGludClcblx0XHRcdHRoaXMucmVzdG9yZVN0YXRlKCk7XG5cdFx0aGludCA9IGZhbHNlO1xuXHRcdHRoaXMuY3JlYXRlQUJDU3RhZmYoc3RhZmZncm91cCwgc3RhZmZzW3NdLCB0ZW1wbywgcywgbCk7XG5cdH1cblx0cmV0dXJuIHN0YWZmZ3JvdXA7XG59O1xuXG5BYnN0cmFjdEVuZ3JhdmVyLnByb3RvdHlwZS5jcmVhdGVBQkNTdGFmZiA9IGZ1bmN0aW9uIChzdGFmZmdyb3VwLCBhYmNzdGFmZiwgdGVtcG8sIHMsIGwpIHtcblx0Ly8gSWYgdGhlIHRlbXBvIGlzIHBhc3NlZCBpbiwgdGhlbiB0aGUgZmlyc3QgZWxlbWVudCBzaG91bGQgZ2V0IHRoZSB0ZW1wbyBhdHRhY2hlZCB0byBpdC5cblx0c3RhZmZncm91cC5nZXRUZXh0U2l6ZS51cGRhdGVGb250cyhhYmNzdGFmZik7XG5cdGZvciAodmFyIHYgPSAwOyB2IDwgYWJjc3RhZmYudm9pY2VzLmxlbmd0aDsgdisrKSB7XG5cdFx0dmFyIHZvaWNlID0gbmV3IFZvaWNlRWxlbWVudCh2LCBhYmNzdGFmZi52b2ljZXMubGVuZ3RoKTtcblx0XHRpZiAodiA9PT0gMCkge1xuXHRcdFx0dm9pY2UuYmFyZnJvbSA9IChhYmNzdGFmZi5jb25uZWN0QmFyTGluZXMgPT09IFwic3RhcnRcIiB8fCBhYmNzdGFmZi5jb25uZWN0QmFyTGluZXMgPT09IFwiY29udGludWVcIik7XG5cdFx0XHR2b2ljZS5iYXJ0byA9IChhYmNzdGFmZi5jb25uZWN0QmFyTGluZXMgPT09IFwiY29udGludWVcIiB8fCBhYmNzdGFmZi5jb25uZWN0QmFyTGluZXMgPT09IFwiZW5kXCIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2b2ljZS5kdXBsaWNhdGUgPSB0cnVlOyAvLyBiYXIgbGluZXMgYW5kIG90aGVyIGR1cGxpY2F0ZSBpbmZvIG5lZWQgbm90IGJlIGNyZWF0ZWRcblx0XHR9XG5cdFx0aWYgKGFiY3N0YWZmLnRpdGxlICYmIGFiY3N0YWZmLnRpdGxlW3ZdKSB7XG5cdFx0XHR2b2ljZS5oZWFkZXIgPSBhYmNzdGFmZi50aXRsZVt2XS5yZXBsYWNlKC9cXFxcbi9nLCBcIlxcblwiKTtcblx0XHRcdHZvaWNlLmhlYWRlclBvc2l0aW9uID0gNiArIHN0YWZmZ3JvdXAuZ2V0VGV4dFNpemUuYmFzZWxpbmVUb0NlbnRlcih2b2ljZS5oZWFkZXIsIFwidm9pY2Vmb250XCIsICdzdGFmZi1leHRyYSB2b2ljZS1uYW1lJywgdiwgYWJjc3RhZmYudm9pY2VzLmxlbmd0aCkgLyBzcGFjaW5nLlNURVA7XG5cdFx0fVxuXHRcdGlmIChhYmNzdGFmZi5jbGVmICYmIGFiY3N0YWZmLmNsZWYudHlwZSA9PT0gXCJwZXJjXCIpXG5cdFx0XHR2b2ljZS5pc1BlcmN1c3Npb24gPSB0cnVlO1xuXHRcdHZhciBjbGVmID0gKCF0aGlzLmluaXRpYWxDbGVmIHx8IGwgPT09IDApICYmIGNyZWF0ZUNsZWYoYWJjc3RhZmYuY2xlZiwgdGhpcy50dW5lTnVtYmVyKTtcblx0XHRpZiAoY2xlZikge1xuXHRcdFx0aWYgKHYgPT09IDAgJiYgYWJjc3RhZmYuYmFyTnVtYmVyKSB7XG5cdFx0XHRcdHRoaXMuYWRkTWVhc3VyZU51bWJlcihhYmNzdGFmZi5iYXJOdW1iZXIsIGNsZWYpO1xuXHRcdFx0fVxuXHRcdFx0dm9pY2UuYWRkQ2hpbGQoY2xlZik7XG5cdFx0XHR0aGlzLnN0YXJ0bGltaXRlbGVtID0gY2xlZjsgLy8gbGltaXQgdGllcyBoZXJlXG5cdFx0fVxuXHRcdHZhciBrZXlTaWcgPSBjcmVhdGVLZXlTaWduYXR1cmUoYWJjc3RhZmYua2V5LCB0aGlzLnR1bmVOdW1iZXIpO1xuXHRcdGlmIChrZXlTaWcpIHtcblx0XHRcdHZvaWNlLmFkZENoaWxkKGtleVNpZyk7XG5cdFx0XHR0aGlzLnN0YXJ0bGltaXRlbGVtID0ga2V5U2lnOyAvLyBsaW1pdCB0aWVzIGhlcmVcblx0XHR9XG5cdFx0aWYgKGFiY3N0YWZmLm1ldGVyKSB7XG5cdFx0XHRpZiAoYWJjc3RhZmYubWV0ZXIudHlwZSA9PT0gJ3NwZWNpZmllZCcpIHtcblx0XHRcdFx0dGhpcy5tZWFzdXJlTGVuZ3RoID0gYWJjc3RhZmYubWV0ZXIudmFsdWVbMF0ubnVtIC8gYWJjc3RhZmYubWV0ZXIudmFsdWVbMF0uZGVuO1xuXHRcdFx0fSBlbHNlXG5cdFx0XHRcdHRoaXMubWVhc3VyZUxlbmd0aCA9IDE7XG5cdFx0XHR2YXIgdHMgPSBjcmVhdGVUaW1lU2lnbmF0dXJlKGFiY3N0YWZmLm1ldGVyLCB0aGlzLnR1bmVOdW1iZXIpO1xuXHRcdFx0dm9pY2UuYWRkQ2hpbGQodHMpO1xuXHRcdFx0dGhpcy5zdGFydGxpbWl0ZWxlbSA9IHRzOyAvLyBsaW1pdCB0aWVzIGhlcmVcblx0XHR9XG5cdFx0aWYgKHZvaWNlLmR1cGxpY2F0ZSlcblx0XHRcdHZvaWNlLmNoaWxkcmVuID0gW107IC8vIHdlIHNob3VsZG4ndCByZXByaW50IHRoZSBhYm92ZSBpZiB3ZSdyZSByZXVzaW5nIHRoZSBzYW1lIHN0YWZmLiBXZSBqdXN0IGNyZWF0ZWQgdGhlbSB0byBnZXQgdGhlIHJpZ2h0IHNwYWNpbmcuXG5cdFx0dmFyIHN0YWZmTGluZXMgPSBhYmNzdGFmZi5jbGVmLnN0YWZmbGluZXMgfHwgYWJjc3RhZmYuY2xlZi5zdGFmZmxpbmVzID09PSAwID8gYWJjc3RhZmYuY2xlZi5zdGFmZmxpbmVzIDogNTtcblx0XHRzdGFmZmdyb3VwLmFkZFZvaWNlKHZvaWNlLCBzLCBzdGFmZkxpbmVzKTtcblx0XHR2YXIgaXNTaW5nbGVMaW5lU3RhZmYgPSBzdGFmZkxpbmVzID09PSAxO1xuXHRcdHRoaXMuY3JlYXRlQUJDVm9pY2UoYWJjc3RhZmYudm9pY2VzW3ZdLCB0ZW1wbywgcywgdiwgaXNTaW5nbGVMaW5lU3RhZmYsIHZvaWNlKTtcblx0XHRzdGFmZmdyb3VwLnNldFN0YWZmTGltaXRzKHZvaWNlKTtcblx0XHRpZiAodiA9PT0gMCkge1xuXHRcdFx0Ly8gb25seSBkbyBicmFjZSBhbmQgYnJhY2tldCBwcm9jZXNzaW5nIG9uIHRoZSBmaXJzdCB2b2ljZSwgb3RoZXJ3aXNlIGl0IHdvdWxkIGJlIGRvbmUgdHdpY2UuXG5cdFx0XHRpZiAoYWJjc3RhZmYuYnJhY2UgPT09IFwic3RhcnRcIiB8fCAoIXN0YWZmZ3JvdXAuYnJhY2UgJiYgYWJjc3RhZmYuYnJhY2UpKSB7XG5cdFx0XHRcdGlmICghc3RhZmZncm91cC5icmFjZSlcblx0XHRcdFx0XHRzdGFmZmdyb3VwLmJyYWNlID0gW107XG5cdFx0XHRcdHN0YWZmZ3JvdXAuYnJhY2UucHVzaChuZXcgQnJhY2VFbGVtKHZvaWNlLCBcImJyYWNlXCIpKTtcblx0XHRcdH0gZWxzZSBpZiAoYWJjc3RhZmYuYnJhY2UgPT09IFwiZW5kXCIgJiYgc3RhZmZncm91cC5icmFjZSkge1xuXHRcdFx0XHRzdGFmZmdyb3VwLmJyYWNlW3N0YWZmZ3JvdXAuYnJhY2UubGVuZ3RoIC0gMV0uc2V0Qm90dG9tU3RhZmYodm9pY2UpO1xuXHRcdFx0fSBlbHNlIGlmIChhYmNzdGFmZi5icmFjZSA9PT0gXCJjb250aW51ZVwiICYmIHN0YWZmZ3JvdXAuYnJhY2UpIHtcblx0XHRcdFx0c3RhZmZncm91cC5icmFjZVtzdGFmZmdyb3VwLmJyYWNlLmxlbmd0aCAtIDFdLmNvbnRpbnVpbmcodm9pY2UpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGFiY3N0YWZmLmJyYWNrZXQgPT09IFwic3RhcnRcIiB8fCAoIXN0YWZmZ3JvdXAuYnJhY2tldCAmJiBhYmNzdGFmZi5icmFja2V0KSkge1xuXHRcdFx0XHRpZiAoIXN0YWZmZ3JvdXAuYnJhY2tldClcblx0XHRcdFx0XHRzdGFmZmdyb3VwLmJyYWNrZXQgPSBbXTtcblx0XHRcdFx0c3RhZmZncm91cC5icmFja2V0LnB1c2gobmV3IEJyYWNlRWxlbSh2b2ljZSwgXCJicmFja2V0XCIpKTtcblx0XHRcdH0gZWxzZSBpZiAoYWJjc3RhZmYuYnJhY2tldCA9PT0gXCJlbmRcIiAmJiBzdGFmZmdyb3VwLmJyYWNrZXQpIHtcblx0XHRcdFx0c3RhZmZncm91cC5icmFja2V0W3N0YWZmZ3JvdXAuYnJhY2tldC5sZW5ndGggLSAxXS5zZXRCb3R0b21TdGFmZih2b2ljZSk7XG5cdFx0XHR9IGVsc2UgaWYgKGFiY3N0YWZmLmJyYWNrZXQgPT09IFwiY29udGludWVcIiAmJiBzdGFmZmdyb3VwLmJyYWNrZXQpIHtcblx0XHRcdFx0c3RhZmZncm91cC5icmFja2V0W3N0YWZmZ3JvdXAuYnJhY2tldC5sZW5ndGggLSAxXS5jb250aW51aW5nKHZvaWNlKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn07XG5cbmZ1bmN0aW9uIGdldEJlYW1Hcm91cChhYmNsaW5lLCBwb3MpIHtcblx0Ly8gSWYgdGhlcmUgYXJlIG5vdGVzIGJlYW1lZCB0b2dldGhlciwgdGhleSBhcmUgaGFuZGxlZCBhcyBhIGdyb3VwLCBzbyBmaW5kIGFsbCBvZiB0aGVtIGhlcmUuXG5cdHZhciBlbGVtID0gYWJjbGluZVtwb3NdO1xuXHRpZiAoZWxlbS5lbF90eXBlICE9PSAnbm90ZScgfHwgIWVsZW0uc3RhcnRCZWFtIHx8IGVsZW0uZW5kQmVhbSlcblx0XHRyZXR1cm4geyBjb3VudDogMSwgZWxlbTogZWxlbSB9O1xuXG5cdHZhciBncm91cCA9IFtdO1xuXHR3aGlsZSAocG9zIDwgYWJjbGluZS5sZW5ndGggJiYgYWJjbGluZVtwb3NdLmVsX3R5cGUgPT09ICdub3RlJykge1xuXHRcdGdyb3VwLnB1c2goYWJjbGluZVtwb3NdKTtcblx0XHRpZiAoYWJjbGluZVtwb3NdLmVuZEJlYW0pXG5cdFx0XHRicmVhaztcblx0XHRwb3MrKztcblx0fVxuXHRyZXR1cm4geyBjb3VudDogZ3JvdXAubGVuZ3RoLCBlbGVtOiBncm91cCB9O1xufVxuXG5BYnN0cmFjdEVuZ3JhdmVyLnByb3RvdHlwZS5jcmVhdGVBQkNWb2ljZSA9IGZ1bmN0aW9uIChhYmNsaW5lLCB0ZW1wbywgcywgdiwgaXNTaW5nbGVMaW5lU3RhZmYsIHZvaWNlKSB7XG5cdHRoaXMucG9wQ3Jvc3NMaW5lRWxlbXMocywgdik7XG5cdHRoaXMuc3RlbWRpciA9ICh0aGlzLmlzQmFncGlwZXMpID8gXCJkb3duXCIgOiBudWxsO1xuXHR0aGlzLmFiY2xpbmUgPSBhYmNsaW5lO1xuXHRpZiAodGhpcy5wYXJ0c3RhcnRlbGVtKSB7XG5cdFx0dGhpcy5wYXJ0c3RhcnRlbGVtID0gbmV3IEVuZGluZ0VsZW0oXCJcIiwgbnVsbCwgbnVsbCk7XG5cdFx0dm9pY2UuYWRkT3RoZXIodGhpcy5wYXJ0c3RhcnRlbGVtKTtcblx0fVxuXHR2YXIgdm9pY2VOdW1iZXIgPSB2b2ljZS52b2ljZXRvdGFsIDwgMiA/IC0xIDogdm9pY2Uudm9pY2VudW1iZXI7XG5cdGZvciAodmFyIHNsdXIgaW4gdGhpcy5zbHVycykge1xuXHRcdGlmICh0aGlzLnNsdXJzLmhhc093blByb3BlcnR5KHNsdXIpKSB7XG5cdFx0XHQvLyB0aGlzIGlzIGFscmVhZHkgYSBzbHVyIGVsZW1lbnQsIGJ1dCBpdCB3YXMgY3JlYXRlZCBmb3IgdGhlIGxhc3QgbGluZSwgc28gcmVjcmVhdGUgaXQuXG5cdFx0XHR0aGlzLnNsdXJzW3NsdXJdID0gbmV3IFRpZUVsZW0oeyBmb3JjZTogdGhpcy5zbHVyc1tzbHVyXS5mb3JjZSwgdm9pY2VOdW1iZXI6IHZvaWNlTnVtYmVyLCBzdGVtRGlyOiB0aGlzLnNsdXJzW3NsdXJdLnN0ZW1EaXIsIHN0eWxlOiB0aGlzLnNsdXJzW3NsdXJdLmRvdHRlZCB9KTtcblx0XHRcdGlmIChoaW50KSB0aGlzLnNsdXJzW3NsdXJdLnNldEhpbnQoKTtcblx0XHRcdHZvaWNlLmFkZE90aGVyKHRoaXMuc2x1cnNbc2x1cl0pO1xuXHRcdH1cblx0fVxuXHRmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudGllcy5sZW5ndGg7IGkrKykge1xuXHRcdC8vIHRoaXMgaXMgYWxyZWFkeSBhIHRpZSBlbGVtZW50LCBidXQgaXQgd2FzIGNyZWF0ZWQgZm9yIHRoZSBsYXN0IGxpbmUsIHNvIHJlY3JlYXRlIGl0LlxuXHRcdHRoaXMudGllc1tpXSA9IG5ldyBUaWVFbGVtKHsgZm9yY2U6IHRoaXMudGllc1tpXS5mb3JjZSwgc3RlbURpcjogdGhpcy50aWVzW2ldLnN0ZW1EaXIsIHZvaWNlTnVtYmVyOiB2b2ljZU51bWJlciwgc3R5bGU6IHRoaXMudGllc1tpXS5kb3R0ZWQgfSk7XG5cdFx0aWYgKGhpbnQpIHRoaXMudGllc1tpXS5zZXRIaW50KCk7XG5cdFx0dm9pY2UuYWRkT3RoZXIodGhpcy50aWVzW2ldKTtcblx0fVxuXG5cdGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5hYmNsaW5lLmxlbmd0aDsgaisrKSB7XG5cdFx0c2V0QXZlcmFnZVBpdGNoKHRoaXMuYWJjbGluZVtqXSk7XG5cdFx0dGhpcy5taW5ZID0gTWF0aC5taW4odGhpcy5hYmNsaW5lW2pdLm1pbnBpdGNoLCB0aGlzLm1pblkpO1xuXHR9XG5cblx0dmFyIGlzRmlyc3RTdGFmZiA9IChzID09PSAwKTtcblx0dmFyIHBvcyA9IDA7XG5cdHdoaWxlIChwb3MgPCB0aGlzLmFiY2xpbmUubGVuZ3RoKSB7XG5cdFx0dmFyIHJldCA9IGdldEJlYW1Hcm91cCh0aGlzLmFiY2xpbmUsIHBvcyk7XG5cdFx0dmFyIGFic2VsZW1zID0gdGhpcy5jcmVhdGVBQkNFbGVtZW50KGlzRmlyc3RTdGFmZiwgaXNTaW5nbGVMaW5lU3RhZmYsIHZvaWNlLCByZXQuZWxlbSk7XG5cdFx0aWYgKGFic2VsZW1zKSB7XG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgYWJzZWxlbXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKCF0aGlzLnRlbXBvU2V0ICYmIHRlbXBvICYmICF0ZW1wby5zdXBwcmVzcykge1xuXHRcdFx0XHRcdHRoaXMudGVtcG9TZXQgPSB0cnVlO1xuXHRcdFx0XHRcdHZhciB0ZW1wb0VsZW1lbnQgPSBuZXcgQWJzb2x1dGVFbGVtZW50KHRlbXBvLCAwLCAwLCBcInRlbXBvXCIsIHRoaXMudHVuZU51bWJlciwge30pO1xuXHRcdFx0XHRcdHRlbXBvRWxlbWVudC5hZGRGaXhlZFgobmV3IFRlbXBvRWxlbWVudCh0ZW1wbywgdGhpcy50dW5lTnVtYmVyLCBjcmVhdGVOb3RlSGVhZCkpO1xuXHRcdFx0XHRcdHZvaWNlLmFkZENoaWxkKHRlbXBvRWxlbWVudCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dm9pY2UuYWRkQ2hpbGQoYWJzZWxlbXNbaV0pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRwb3MgKz0gcmV0LmNvdW50O1xuXHR9XG5cdHRoaXMucHVzaENyb3NzTGluZUVsZW1zKHMsIHYpO1xufTtcblxuQWJzdHJhY3RFbmdyYXZlci5wcm90b3R5cGUuc2F2ZVN0YXRlID0gZnVuY3Rpb24gKCkge1xuXHR0aGlzLnRpZXNTYXZlID0gcGFyc2VDb21tb24uY2xvbmVBcnJheSh0aGlzLnRpZXMpO1xuXHR0aGlzLnNsdXJzU2F2ZSA9IHBhcnNlQ29tbW9uLmNsb25lSGFzaE9mSGFzaCh0aGlzLnNsdXJzKTtcblx0dGhpcy5zbHVyc2J5dm9pY2VTYXZlID0gcGFyc2VDb21tb24uY2xvbmVIYXNoT2ZIYXNoKHRoaXMuc2x1cnNieXZvaWNlKTtcblx0dGhpcy50aWVzYnl2b2ljZVNhdmUgPSBwYXJzZUNvbW1vbi5jbG9uZUhhc2hPZkFycmF5T2ZIYXNoKHRoaXMudGllc2J5dm9pY2UpO1xufTtcblxuQWJzdHJhY3RFbmdyYXZlci5wcm90b3R5cGUucmVzdG9yZVN0YXRlID0gZnVuY3Rpb24gKCkge1xuXHR0aGlzLnRpZXMgPSBwYXJzZUNvbW1vbi5jbG9uZUFycmF5KHRoaXMudGllc1NhdmUpO1xuXHR0aGlzLnNsdXJzID0gcGFyc2VDb21tb24uY2xvbmVIYXNoT2ZIYXNoKHRoaXMuc2x1cnNTYXZlKTtcblx0dGhpcy5zbHVyc2J5dm9pY2UgPSBwYXJzZUNvbW1vbi5jbG9uZUhhc2hPZkhhc2godGhpcy5zbHVyc2J5dm9pY2VTYXZlKTtcblx0dGhpcy50aWVzYnl2b2ljZSA9IHBhcnNlQ29tbW9uLmNsb25lSGFzaE9mQXJyYXlPZkhhc2godGhpcy50aWVzYnl2b2ljZVNhdmUpO1xufTtcblxuLy8gZnVuY3Rpb24gd3JpdGVNZWFzdXJlV2lkdGgodm9pY2UpIHtcbi8vIFx0dmFyIHdpZHRoID0gMDtcbi8vIFx0Zm9yICh2YXIgaSA9IHZvaWNlLmNoaWxkcmVuLmxlbmd0aC0xOyBpID49IDA7IGktLSkge1xuLy8gXHRcdHZhciBlbGVtID0gdm9pY2UuY2hpbGRyZW5baV07XG4vLyBcdFx0aWYgKGVsZW0uYWJjZWxlbS5lbF90eXBlID09PSAnYmFyJylcbi8vIFx0XHRcdGJyZWFrO1xuLy8gXHRcdHdpZHRoICs9IGVsZW0udztcbi8vIFx0fVxuLy8gXHRyZXR1cm4gbmV3IFJlbGF0aXZlRWxlbWVudCh3aWR0aC50b0ZpeGVkKDIpLCAtNzAsIDAsIHVuZGVmaW5lZCwge3R5cGU6XCJkZWJ1Z1wifSk7XG4vLyB9XG5cbi8vIHJldHVybiBhbiBhcnJheSBvZiBBYnNvbHV0ZUVsZW1lbnRcbkFic3RyYWN0RW5ncmF2ZXIucHJvdG90eXBlLmNyZWF0ZUFCQ0VsZW1lbnQgPSBmdW5jdGlvbiAoaXNGaXJzdFN0YWZmLCBpc1NpbmdsZUxpbmVTdGFmZiwgdm9pY2UsIGVsZW0pIHtcblx0dmFyIGVsZW1zZXQgPSBbXTtcblx0c3dpdGNoIChlbGVtLmVsX3R5cGUpIHtcblx0XHRjYXNlIHVuZGVmaW5lZDpcblx0XHRcdC8vIGl0IGlzIHVuZGVmaW5lZCBpZiB3ZSB3ZXJlIHBhc3NlZCBhbiBhcnJheSBpbiAtIGFuIGFycmF5IG1lYW5zIGEgc2V0IG9mIG5vdGVzIHRoYXQgc2hvdWxkIGJlIGJlYW1lZCB0b2dldGhlci5cblx0XHRcdGVsZW1zZXQgPSB0aGlzLmNyZWF0ZUJlYW0oaXNTaW5nbGVMaW5lU3RhZmYsIHZvaWNlLCBlbGVtKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJub3RlXCI6XG5cdFx0XHRlbGVtc2V0WzBdID0gdGhpcy5jcmVhdGVOb3RlKGVsZW0sIGZhbHNlLCBpc1NpbmdsZUxpbmVTdGFmZiwgdm9pY2UpO1xuXHRcdFx0aWYgKHRoaXMudHJpcGxldCAmJiB0aGlzLnRyaXBsZXQuaXNDbG9zZWQoKSkge1xuXHRcdFx0XHR2b2ljZS5hZGRPdGhlcih0aGlzLnRyaXBsZXQpO1xuXHRcdFx0XHR0aGlzLnRyaXBsZXQgPSBudWxsO1xuXHRcdFx0XHR0aGlzLnRyaXBsZXRtdWx0aXBsaWVyID0gMTtcblx0XHRcdH1cblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJiYXJcIjpcblx0XHRcdGVsZW1zZXRbMF0gPSB0aGlzLmNyZWF0ZUJhckxpbmUodm9pY2UsIGVsZW0sIGlzRmlyc3RTdGFmZik7XG5cdFx0XHRpZiAodm9pY2UuZHVwbGljYXRlICYmIGVsZW1zZXQubGVuZ3RoID4gMCkgZWxlbXNldFswXS5pbnZpc2libGUgPSB0cnVlO1xuXHRcdFx0Ly9cdCAgZWxlbXNldFswXS5hZGRDaGlsZCh3cml0ZU1lYXN1cmVXaWR0aCh2b2ljZSkpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcIm1ldGVyXCI6XG5cdFx0XHRlbGVtc2V0WzBdID0gY3JlYXRlVGltZVNpZ25hdHVyZShlbGVtLCB0aGlzLnR1bmVOdW1iZXIpO1xuXHRcdFx0dGhpcy5zdGFydGxpbWl0ZWxlbSA9IGVsZW1zZXRbMF07IC8vIGxpbWl0IHRpZXMgaGVyZVxuXHRcdFx0aWYgKHZvaWNlLmR1cGxpY2F0ZSAmJiBlbGVtc2V0Lmxlbmd0aCA+IDApIGVsZW1zZXRbMF0uaW52aXNpYmxlID0gdHJ1ZTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJjbGVmXCI6XG5cdFx0XHRlbGVtc2V0WzBdID0gY3JlYXRlQ2xlZihlbGVtLCB0aGlzLnR1bmVOdW1iZXIpO1xuXHRcdFx0aWYgKCFlbGVtc2V0WzBdKSByZXR1cm4gbnVsbDtcblx0XHRcdGlmICh2b2ljZS5kdXBsaWNhdGUgJiYgZWxlbXNldC5sZW5ndGggPiAwKSBlbGVtc2V0WzBdLmludmlzaWJsZSA9IHRydWU7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwia2V5XCI6XG5cdFx0XHR2YXIgYWJzS2V5ID0gY3JlYXRlS2V5U2lnbmF0dXJlKGVsZW0sIHRoaXMudHVuZU51bWJlcik7XG5cdFx0XHRpZiAoYWJzS2V5KSB7XG5cdFx0XHRcdGVsZW1zZXRbMF0gPSBhYnNLZXk7XG5cdFx0XHRcdHRoaXMuc3RhcnRsaW1pdGVsZW0gPSBlbGVtc2V0WzBdOyAvLyBsaW1pdCB0aWVzIGhlcmVcblx0XHRcdH1cblx0XHRcdGlmICh2b2ljZS5kdXBsaWNhdGUgJiYgZWxlbXNldC5sZW5ndGggPiAwKSBlbGVtc2V0WzBdLmludmlzaWJsZSA9IHRydWU7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwic3RlbVwiOlxuXHRcdFx0dGhpcy5zdGVtZGlyID0gZWxlbS5kaXJlY3Rpb24gPT09IFwiYXV0b1wiID8gdW5kZWZpbmVkIDogZWxlbS5kaXJlY3Rpb247XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwicGFydFwiOlxuXHRcdFx0dmFyIGFic2VsZW0gPSBuZXcgQWJzb2x1dGVFbGVtZW50KGVsZW0sIDAsIDAsICdwYXJ0JywgdGhpcy50dW5lTnVtYmVyKTtcblx0XHRcdHZhciBkaW0gPSB0aGlzLmdldFRleHRTaXplLmNhbGMoZWxlbS50aXRsZSwgJ3BhcnRzZm9udCcsIFwicGFydFwiKTtcblx0XHRcdGFic2VsZW0uYWRkRml4ZWRYKG5ldyBSZWxhdGl2ZUVsZW1lbnQoZWxlbS50aXRsZSwgMCwgMCwgdW5kZWZpbmVkLCB7IHR5cGU6IFwicGFydFwiLCBoZWlnaHQ6IGRpbS5oZWlnaHQgLyBzcGFjaW5nLlNURVAgfSkpO1xuXHRcdFx0ZWxlbXNldFswXSA9IGFic2VsZW07XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwidGVtcG9cIjpcblx0XHRcdHZhciBhYnNlbGVtMyA9IG5ldyBBYnNvbHV0ZUVsZW1lbnQoZWxlbSwgMCwgMCwgJ3RlbXBvJywgdGhpcy50dW5lTnVtYmVyKTtcblx0XHRcdGFic2VsZW0zLmFkZEZpeGVkWChuZXcgVGVtcG9FbGVtZW50KGVsZW0sIHRoaXMudHVuZU51bWJlciwgY3JlYXRlTm90ZUhlYWQpKTtcblx0XHRcdGVsZW1zZXRbMF0gPSBhYnNlbGVtMztcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJzdHlsZVwiOlxuXHRcdFx0aWYgKGVsZW0uaGVhZCA9PT0gXCJub3JtYWxcIilcblx0XHRcdFx0ZGVsZXRlIHRoaXMuc3R5bGU7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdHRoaXMuc3R5bGUgPSBlbGVtLmhlYWQ7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwiaGludFwiOlxuXHRcdFx0aGludCA9IHRydWU7XG5cdFx0XHR0aGlzLnNhdmVTdGF0ZSgpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcIm1pZGlcIjpcblx0XHRcdC8vIFRoaXMgaGFzIG5vIGVmZmVjdCBvbiB0aGUgdmlzaWJsZSBtdXNpYywgc28ganVzdCBza2lwIGl0LlxuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcInNjYWxlXCI6XG5cdFx0XHR0aGlzLnZvaWNlU2NhbGUgPSBlbGVtLnNpemU7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwiY29sb3JcIjpcblx0XHRcdHRoaXMudm9pY2VDb2xvciA9IGVsZW0uY29sb3I7XG5cdFx0XHR2b2ljZS5jb2xvciA9IHRoaXMudm9pY2VDb2xvcjtcblx0XHRcdGJyZWFrO1xuXG5cdFx0ZGVmYXVsdDpcblx0XHRcdHZhciBhYnNlbGVtMiA9IG5ldyBBYnNvbHV0ZUVsZW1lbnQoZWxlbSwgMCwgMCwgJ3Vuc3VwcG9ydGVkJywgdGhpcy50dW5lTnVtYmVyKTtcblx0XHRcdGFic2VsZW0yLmFkZEZpeGVkKG5ldyBSZWxhdGl2ZUVsZW1lbnQoXCJlbGVtZW50IHR5cGUgXCIgKyBlbGVtLmVsX3R5cGUsIDAsIDAsIHVuZGVmaW5lZCwgeyB0eXBlOiBcImRlYnVnXCIgfSkpO1xuXHRcdFx0ZWxlbXNldFswXSA9IGFic2VsZW0yO1xuXHR9XG5cblx0cmV0dXJuIGVsZW1zZXQ7XG59O1xuXG5mdW5jdGlvbiBzZXRBdmVyYWdlUGl0Y2goZWxlbSkge1xuXHRpZiAoZWxlbS5waXRjaGVzKSB7XG5cdFx0c29ydFBpdGNoKGVsZW0pO1xuXHRcdHZhciBzdW0gPSAwO1xuXHRcdGZvciAodmFyIHAgPSAwOyBwIDwgZWxlbS5waXRjaGVzLmxlbmd0aDsgcCsrKSB7XG5cdFx0XHRzdW0gKz0gZWxlbS5waXRjaGVzW3BdLnZlcnRpY2FsUG9zO1xuXHRcdH1cblx0XHRlbGVtLmF2ZXJhZ2VwaXRjaCA9IHN1bSAvIGVsZW0ucGl0Y2hlcy5sZW5ndGg7XG5cdFx0ZWxlbS5taW5waXRjaCA9IGVsZW0ucGl0Y2hlc1swXS52ZXJ0aWNhbFBvcztcblx0XHRlbGVtLm1heHBpdGNoID0gZWxlbS5waXRjaGVzW2VsZW0ucGl0Y2hlcy5sZW5ndGggLSAxXS52ZXJ0aWNhbFBvcztcblx0fVxufVxuXG5BYnN0cmFjdEVuZ3JhdmVyLnByb3RvdHlwZS5jcmVhdGVCZWFtID0gZnVuY3Rpb24gKGlzU2luZ2xlTGluZVN0YWZmLCB2b2ljZSwgZWxlbXMpIHtcblx0dmFyIGFic2VsZW1zZXQgPSBbXTtcblxuXHR2YXIgYmVhbWVsZW0gPSBuZXcgQmVhbUVsZW0odGhpcy5zdGVtSGVpZ2h0ICogdGhpcy52b2ljZVNjYWxlLCB0aGlzLnN0ZW1kaXIsIHRoaXMuZmxhdEJlYW1zLCBlbGVtc1swXSk7XG5cdGlmIChoaW50KSBiZWFtZWxlbS5zZXRIaW50KCk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbXMubGVuZ3RoOyBpKyspIHtcblx0XHQvLyBEbyBhIGZpcnN0IHBhc3MgdG8gZmlndXJlIG91dCB0aGUgc3RlbSBkaXJlY3Rpb24gYmVmb3JlIGNyZWF0aW5nIHRoZSBub3Rlcywgc28gdGhhdCBzdGFjY2F0b3MgYW5kIG90aGVyIGRlY29yYXRpb25zIGNhbiBiZSBwbGFjZWQgY29ycmVjdGx5LlxuXHRcdGJlYW1lbGVtLnJ1bm5pbmdEaXJlY3Rpb24oZWxlbXNbaV0pXG5cdH1cblx0YmVhbWVsZW0uc2V0U3RlbURpcmVjdGlvbigpXG5cdHZhciB0ZW1wU3RlbURpciA9IHRoaXMuc3RlbWRpclxuXHR0aGlzLnN0ZW1kaXIgPSBiZWFtZWxlbS5zdGVtc1VwID8gJ3VwJyA6ICdkb3duJ1xuXHRmb3IgKGkgPSAwOyBpIDwgZWxlbXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgZWxlbSA9IGVsZW1zW2ldO1xuXHRcdHZhciBhYnNlbGVtID0gdGhpcy5jcmVhdGVOb3RlKGVsZW0sIHRydWUsIGlzU2luZ2xlTGluZVN0YWZmLCB2b2ljZSk7XG5cdFx0YWJzZWxlbXNldC5wdXNoKGFic2VsZW0pO1xuXHRcdGJlYW1lbGVtLmFkZChhYnNlbGVtKTtcblx0XHRpZiAodGhpcy50cmlwbGV0ICYmIHRoaXMudHJpcGxldC5pc0Nsb3NlZCgpKSB7XG5cdFx0XHR2b2ljZS5hZGRPdGhlcih0aGlzLnRyaXBsZXQpO1xuXHRcdFx0dGhpcy50cmlwbGV0ID0gbnVsbDtcblx0XHRcdHRoaXMudHJpcGxldG11bHRpcGxpZXIgPSAxO1xuXHRcdH1cblx0fVxuXHRiZWFtZWxlbS5jYWxjRGlyKCk7XG5cdHZvaWNlLmFkZEJlYW0oYmVhbWVsZW0pO1xuXHR0aGlzLnN0ZW1kaXIgPSB0ZW1wU3RlbURpclxuXHRyZXR1cm4gYWJzZWxlbXNldDtcbn07XG5cbnZhciBzb3J0UGl0Y2ggPSBmdW5jdGlvbiAoZWxlbSkge1xuXHR2YXIgc29ydGVkO1xuXHRkbyB7XG5cdFx0c29ydGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBwID0gMDsgcCA8IGVsZW0ucGl0Y2hlcy5sZW5ndGggLSAxOyBwKyspIHtcblx0XHRcdGlmIChlbGVtLnBpdGNoZXNbcF0ucGl0Y2ggPiBlbGVtLnBpdGNoZXNbcCArIDFdLnBpdGNoKSB7XG5cdFx0XHRcdHNvcnRlZCA9IGZhbHNlO1xuXHRcdFx0XHR2YXIgdG1wID0gZWxlbS5waXRjaGVzW3BdO1xuXHRcdFx0XHRlbGVtLnBpdGNoZXNbcF0gPSBlbGVtLnBpdGNoZXNbcCArIDFdO1xuXHRcdFx0XHRlbGVtLnBpdGNoZXNbcCArIDFdID0gdG1wO1xuXHRcdFx0fVxuXHRcdH1cblx0fSB3aGlsZSAoIXNvcnRlZCk7XG59O1xuXG52YXIgbGVkZ2VyTGluZXMgPSBmdW5jdGlvbiAoYWJzZWxlbSwgbWluUGl0Y2gsIG1heFBpdGNoLCBpc1Jlc3QsIHN5bWJvbFdpZHRoLCBhZGRpdGlvbmFsTGVkZ2VycywgZGlyLCBkeCwgc2NhbGUpIHtcblx0Zm9yICh2YXIgaSA9IG1heFBpdGNoOyBpID4gMTE7IGktLSkge1xuXHRcdGlmIChpICUgMiA9PT0gMCAmJiAhaXNSZXN0KSB7XG5cdFx0XHRhYnNlbGVtLmFkZEZpeGVkKG5ldyBSZWxhdGl2ZUVsZW1lbnQobnVsbCwgZHgsIChzeW1ib2xXaWR0aCArIDQpICogc2NhbGUsIGksIHsgdHlwZTogXCJsZWRnZXJcIiB9KSk7XG5cdFx0fVxuXHR9XG5cblx0Zm9yIChpID0gbWluUGl0Y2g7IGkgPCAxOyBpKyspIHtcblx0XHRpZiAoaSAlIDIgPT09IDAgJiYgIWlzUmVzdCkge1xuXHRcdFx0YWJzZWxlbS5hZGRGaXhlZChuZXcgUmVsYXRpdmVFbGVtZW50KG51bGwsIGR4LCAoc3ltYm9sV2lkdGggKyA0KSAqIHNjYWxlLCBpLCB7IHR5cGU6IFwibGVkZ2VyXCIgfSkpO1xuXHRcdH1cblx0fVxuXG5cdGZvciAoaSA9IDA7IGkgPCBhZGRpdGlvbmFsTGVkZ2Vycy5sZW5ndGg7IGkrKykgeyAvLyBQRVI6IGRyYXcgYWRkaXRpb25hbCBsZWRnZXJzXG5cdFx0dmFyIG9mcyA9IHN5bWJvbFdpZHRoO1xuXHRcdGlmIChkaXIgPT09ICdkb3duJykgb2ZzID0gLW9mcztcblx0XHRhYnNlbGVtLmFkZEZpeGVkKG5ldyBSZWxhdGl2ZUVsZW1lbnQobnVsbCwgb2ZzICsgZHgsIChzeW1ib2xXaWR0aCArIDQpICogc2NhbGUsIGFkZGl0aW9uYWxMZWRnZXJzW2ldLCB7IHR5cGU6IFwibGVkZ2VyXCIgfSkpO1xuXHR9XG59O1xuXG5BYnN0cmFjdEVuZ3JhdmVyLnByb3RvdHlwZS5hZGRHcmFjZU5vdGVzID0gZnVuY3Rpb24gKGVsZW0sIHZvaWNlLCBhYnNlbGVtLCBub3RlaGVhZCwgc3RlbUhlaWdodCwgaXNCYWdwaXBlcywgcm9vbXRha2VuKSB7XG5cdHZhciBncmFjZXNjYWxlID0gMyAvIDU7XG5cdHZhciBncmFjZVNjYWxlU3RlbSA9IDMuNSAvIDU7IC8vIFRPRE8tUEVSOiBlbXBpcmljYWxseSBmb3VuZCBjb25zdGFudC5cblx0c3RlbUhlaWdodCA9IE1hdGgucm91bmQoc3RlbUhlaWdodCAqIGdyYWNlU2NhbGVTdGVtKTtcblx0dmFyIGdyYWNlYmVhbSA9IG51bGw7XG5cdHZhciBmbGFnO1xuXG5cdGlmIChlbGVtLmdyYWNlbm90ZXMubGVuZ3RoID4gMSkge1xuXHRcdGdyYWNlYmVhbSA9IG5ldyBCZWFtRWxlbShzdGVtSGVpZ2h0LCBcImdyYWNlXCIsIGlzQmFncGlwZXMpO1xuXHRcdGlmIChoaW50KSBncmFjZWJlYW0uc2V0SGludCgpO1xuXHRcdGdyYWNlYmVhbS5tYWluTm90ZSA9IGFic2VsZW07XHQvLyB0aGlzIGdpdmVzIHVzIGEgcmVmZXJlbmNlIGJhY2sgdG8gdGhlIG5vdGUgdGhpcyBpcyBhdHRhY2hlZCB0byBzbyB0aGF0IHRoZSBzdGVtcyBjYW4gYmUgYXR0YWNoZWQgc29tZXdoZXJlLlxuXHR9XG5cblx0dmFyIGk7XG5cdHZhciBncmFjZW9mZnNldHMgPSBbXTtcblx0Zm9yIChpID0gZWxlbS5ncmFjZW5vdGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7IC8vIGZpZ3VyZSBvdXQgd2hlcmUgdG8gcGxhY2UgZWFjaCBncmFjZW5vdGVcblx0XHRyb29tdGFrZW4gKz0gMTA7XG5cdFx0Z3JhY2VvZmZzZXRzW2ldID0gcm9vbXRha2VuO1xuXHRcdGlmIChlbGVtLmdyYWNlbm90ZXNbaV0uYWNjaWRlbnRhbCkge1xuXHRcdFx0cm9vbXRha2VuICs9IDc7XG5cdFx0fVxuXHR9XG5cblx0Zm9yIChpID0gMDsgaSA8IGVsZW0uZ3JhY2Vub3Rlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBncmFjZXBpdGNoID0gZWxlbS5ncmFjZW5vdGVzW2ldLnZlcnRpY2FsUG9zO1xuXG5cdFx0ZmxhZyA9IChncmFjZWJlYW0pID8gbnVsbCA6IGNoYXJ0YWJsZS51ZmxhZ3NbKGlzQmFncGlwZXMpID8gNSA6IDNdO1xuXHRcdHZhciBhY2NpZGVudGFsU2xvdCA9IFtdO1xuXHRcdHZhciByZXQgPSBjcmVhdGVOb3RlSGVhZChhYnNlbGVtLCBcIm5vdGVoZWFkcy5xdWFydGVyXCIsIGVsZW0uZ3JhY2Vub3Rlc1tpXSxcblx0XHRcdHsgZGlyOiBcInVwXCIsIGhlYWR4OiAtZ3JhY2VvZmZzZXRzW2ldLCBleHRyYXg6IC1ncmFjZW9mZnNldHNbaV0sIGZsYWc6IGZsYWcsIHNjYWxlOiBncmFjZXNjYWxlICogdGhpcy52b2ljZVNjYWxlLCBhY2NpZGVudGFsU2xvdDogYWNjaWRlbnRhbFNsb3QgfSk7XG5cdFx0cmV0Lm5vdGVoZWFkLmhpZ2hlc3RWZXJ0ID0gcmV0Lm5vdGVoZWFkLnBpdGNoICsgc3RlbUhlaWdodDtcblx0XHR2YXIgZ3JhY2UgPSByZXQubm90ZWhlYWQ7XG5cdFx0dGhpcy5hZGRTbHVyc0FuZFRpZXMoYWJzZWxlbSwgZWxlbS5ncmFjZW5vdGVzW2ldLCBncmFjZSwgdm9pY2UsIFwidXBcIiwgdHJ1ZSk7XG5cblx0XHRhYnNlbGVtLmFkZEV4dHJhKGdyYWNlKTtcblx0XHQvLyBQRVI6IGFkZGVkIGFjY2lhY2NhdHVyYSBzbGFzaFxuXHRcdGlmIChlbGVtLmdyYWNlbm90ZXNbaV0uYWNjaWFjY2F0dXJhKSB7XG5cdFx0XHR2YXIgcG9zID0gZWxlbS5ncmFjZW5vdGVzW2ldLnZlcnRpY2FsUG9zICsgNyAqIGdyYWNlc2NhbGU7ICAgICAgICAvLyB0aGUgc2FtZSBmb3JtdWxhIHRoYXQgZGV0ZXJtaW5lcyB0aGUgZmxhZyBwb3NpdGlvbi5cblx0XHRcdHZhciBkQWNjaWFjY2F0dXJhID0gZ3JhY2ViZWFtID8gNSA6IDY7ICAgICAgICAvLyBqdXN0IGFuIG9mZnNldCB0byBtYWtlIGl0IGxpbmUgdXAgY29ycmVjdGx5LlxuXHRcdFx0YWJzZWxlbS5hZGRSaWdodChuZXcgUmVsYXRpdmVFbGVtZW50KFwiZmxhZ3MudWdyYWNlXCIsIC1ncmFjZW9mZnNldHNbaV0gKyBkQWNjaWFjY2F0dXJhLCAwLCBwb3MsIHsgc2NhbGV4OiBncmFjZXNjYWxlLCBzY2FsZXk6IGdyYWNlc2NhbGUgfSkpO1xuXHRcdH1cblx0XHRpZiAoZ3JhY2ViZWFtKSB7IC8vIGdpdmUgdGhlIGJlYW0gdGhlIG5lY2Vzc2FyeSBpbmZvXG5cdFx0XHR2YXIgZ3JhY2VEdXJhdGlvbiA9IGVsZW0uZ3JhY2Vub3Rlc1tpXS5kdXJhdGlvbiAvIDI7XG5cdFx0XHRpZiAoaXNCYWdwaXBlcykgZ3JhY2VEdXJhdGlvbiAvPSAyO1xuXHRcdFx0dmFyIHBzZXVkb2Fic2VsZW0gPSB7XG5cdFx0XHRcdGhlYWRzOiBbZ3JhY2VdLFxuXHRcdFx0XHRhYmNlbGVtOiB7IGF2ZXJhZ2VwaXRjaDogZ3JhY2VwaXRjaCwgbWlucGl0Y2g6IGdyYWNlcGl0Y2gsIG1heHBpdGNoOiBncmFjZXBpdGNoLCBkdXJhdGlvbjogZ3JhY2VEdXJhdGlvbiB9XG5cdFx0XHR9O1xuXHRcdFx0Z3JhY2ViZWFtLmFkZChwc2V1ZG9hYnNlbGVtKTtcblx0XHR9IGVsc2UgeyAvLyBkcmF3IHRoZSBzdGVtXG5cdFx0XHR2YXIgcDEgPSBncmFjZXBpdGNoICsgMSAvIDMgKiBncmFjZXNjYWxlO1xuXHRcdFx0dmFyIHAyID0gZ3JhY2VwaXRjaCArIDcgKiBncmFjZXNjYWxlO1xuXHRcdFx0dmFyIGR4ID0gZ3JhY2UuZHggKyBncmFjZS53O1xuXHRcdFx0dmFyIHdpZHRoID0gLTAuNjtcblx0XHRcdGFic2VsZW0uYWRkRXh0cmEobmV3IFJlbGF0aXZlRWxlbWVudChudWxsLCBkeCwgMCwgcDEsIHsgXCJ0eXBlXCI6IFwic3RlbVwiLCBcInBpdGNoMlwiOiBwMiwgbGluZXdpZHRoOiB3aWR0aCB9KSk7XG5cdFx0fVxuXHRcdGxlZGdlckxpbmVzKGFic2VsZW0sIGdyYWNlcGl0Y2gsIGdyYWNlcGl0Y2gsIGZhbHNlLCBnbHlwaHMuZ2V0U3ltYm9sV2lkdGgoXCJub3RlaGVhZHMucXVhcnRlclwiKSwgW10sIHRydWUsIGdyYWNlLmR4IC0gMSwgMC42KTtcblxuXHRcdC8vIGlmIHRoaXMgaXMgdGhlIGZpcnN0IGdyYWNlIG5vdGUsIHdlIG1pZ2h0IHdhbnQgdG8gc3RhcnQgYSBzbHVyLlxuXHRcdC8vIHRoZXJlIGlzIGEgc2x1ciBpZiBncmFjZVNsdXJzIGlzIHNwZWNpZmljYWxseSBzZXQuXG5cdFx0Ly8gdGhlcmUgaXMgbm8gc2x1ciBpZiBpdCBpcyBiYWdwaXBlcy5cblx0XHQvLyB0aGVyZSBpcyBub3QgYSBzbHVyIGlmIHRoZSBlbGVtZW50IGlzIGEgc3BhY2VyIG9yIGludmlzaWJsZSByZXN0LlxuXHRcdHZhciBpc0ludmlzaWJsZVJlc3QgPSBlbGVtLnJlc3QgJiYgKGVsZW0ucmVzdC50eXBlID09PSBcInNwYWNlclwiIHx8IGVsZW0ucmVzdC50eXBlID09PSBcImludmlzaWJsZVwiKTtcblx0XHRpZiAoaSA9PT0gMCAmJiAhaXNCYWdwaXBlcyAmJiB0aGlzLmdyYWNlU2x1cnMgJiYgIWlzSW52aXNpYmxlUmVzdCkge1xuXHRcdFx0Ly8gVGhpcyBpcyB0aGUgb3ZlcmFsbCBzbHVyIHRoYXQgaXMgdW5kZXIgdGhlIGdyYWNlIG5vdGVzLlxuXHRcdFx0dm9pY2UuYWRkT3RoZXIobmV3IFRpZUVsZW0oeyBhbmNob3IxOiBncmFjZSwgYW5jaG9yMjogbm90ZWhlYWQsIGlzR3JhY2U6IHRydWUgfSkpO1xuXHRcdH1cblx0fVxuXG5cdGlmIChncmFjZWJlYW0pIHtcblx0XHRncmFjZWJlYW0uY2FsY0RpcigpO1xuXHRcdHZvaWNlLmFkZEJlYW0oZ3JhY2ViZWFtKTtcblx0fVxuXHRyZXR1cm4gcm9vbXRha2VuO1xufTtcblxuZnVuY3Rpb24gYWRkUmVzdFRvQWJzRWxlbWVudChhYnNlbGVtLCBlbGVtLCBkdXJhdGlvbiwgZG90LCBpc011bHRpVm9pY2UsIHN0ZW1kaXIsIGlzU2luZ2xlTGluZVN0YWZmLCBkdXJsb2csIHZvaWNlU2NhbGUpIHtcblx0dmFyIGM7XG5cdHZhciByZXN0cGl0Y2ggPSA3O1xuXHR2YXIgbm90ZUhlYWQ7XG5cdHZhciByb29tVGFrZW47XG5cdHZhciByb29tVGFrZW5SaWdodDtcblxuXHRpZiAoaXNNdWx0aVZvaWNlKSB7XG5cdFx0aWYgKHN0ZW1kaXIgPT09IFwiZG93blwiKSByZXN0cGl0Y2ggPSAzO1xuXHRcdGlmIChzdGVtZGlyID09PSBcInVwXCIpIHJlc3RwaXRjaCA9IDExO1xuXHR9XG5cdC8vIFRoZXJlIGlzIHNwZWNpYWwgcGxhY2VtZW50IGZvciB0aGUgcGVyY3Vzc2lvbiBzdGFmZi4gSWYgdGhlcmUgaXMgb25lIHN0YWZmIGxpbmUsIHRoZW4gbW92ZSB0aGUgcmVzdCBwb3NpdGlvbi5cblx0aWYgKGlzU2luZ2xlTGluZVN0YWZmKSB7XG5cdFx0Ly8gVGhlIGhhbGYgYW5kIHdob2xlIHJlc3RzIGFyZSBhdHRhY2hlZCB0byBkaWZmZXJlbnQgbGluZXMgbm9ybWFsbHksIHNvIHdlIG5lZWQgdG8gdHdlYWsgdGhlaXIgcG9zaXRpb24gdG8gZ2V0IHRoZW0gdG8gYm90aCBiZSBhdHRhY2hlZCB0byB0aGUgc2FtZSBvbmUuXG5cdFx0aWYgKGR1cmF0aW9uIDwgMC41KVxuXHRcdFx0cmVzdHBpdGNoID0gNztcblx0XHRlbHNlIGlmIChkdXJhdGlvbiA8IDEpXG5cdFx0XHRyZXN0cGl0Y2ggPSA3O1x0Ly8gaGFsZiByZXN0XG5cdFx0ZWxzZVxuXHRcdFx0cmVzdHBpdGNoID0gNTsgLy8gd2hvbGUgcmVzdFxuXHR9XG5cdHN3aXRjaCAoZWxlbS5yZXN0LnR5cGUpIHtcblx0XHRjYXNlIFwid2hvbGVcIjpcblx0XHRcdGMgPSBjaGFydGFibGUucmVzdFswXTtcblx0XHRcdGVsZW0uYXZlcmFnZXBpdGNoID0gcmVzdHBpdGNoO1xuXHRcdFx0ZWxlbS5taW5waXRjaCA9IHJlc3RwaXRjaDtcblx0XHRcdGVsZW0ubWF4cGl0Y2ggPSByZXN0cGl0Y2g7XG5cdFx0XHRkb3QgPSAwO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcInJlc3RcIjpcblx0XHRcdGlmIChlbGVtLnN0eWxlID09PSBcInJoeXRobVwiKSAvLyBzcGVjaWFsIGNhc2UgZm9yIHJoeXRobTogcmVzdHMgYXJlIGEgaGFuZHkgd2F5IHRvIGV4cHJlc3MgdGhlIHJoeXRobS5cblx0XHRcdFx0YyA9IGNoYXJ0YWJsZS5yaHl0aG1bLWR1cmxvZ107XG5cdFx0XHRlbHNlXG5cdFx0XHRcdGMgPSBjaGFydGFibGUucmVzdFstZHVybG9nXTtcblx0XHRcdGVsZW0uYXZlcmFnZXBpdGNoID0gcmVzdHBpdGNoO1xuXHRcdFx0ZWxlbS5taW5waXRjaCA9IHJlc3RwaXRjaDtcblx0XHRcdGVsZW0ubWF4cGl0Y2ggPSByZXN0cGl0Y2g7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwiaW52aXNpYmxlXCI6XG5cdFx0Y2FzZSBcImludmlzaWJsZS1tdWx0aW1lYXN1cmVcIjpcblx0XHRjYXNlIFwic3BhY2VyXCI6XG5cdFx0XHRjID0gXCJcIjtcblx0XHRcdGVsZW0uYXZlcmFnZXBpdGNoID0gcmVzdHBpdGNoO1xuXHRcdFx0ZWxlbS5taW5waXRjaCA9IHJlc3RwaXRjaDtcblx0XHRcdGVsZW0ubWF4cGl0Y2ggPSByZXN0cGl0Y2g7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwibXVsdGltZWFzdXJlXCI6XG5cdFx0XHRjID0gY2hhcnRhYmxlLnJlc3RbJ211bHRpJ107XG5cdFx0XHRlbGVtLmF2ZXJhZ2VwaXRjaCA9IHJlc3RwaXRjaDtcblx0XHRcdGVsZW0ubWlucGl0Y2ggPSByZXN0cGl0Y2g7XG5cdFx0XHRlbGVtLm1heHBpdGNoID0gcmVzdHBpdGNoO1xuXHRcdFx0ZG90ID0gMDtcblx0XHRcdHZhciBtbVdpZHRoID0gZ2x5cGhzLmdldFN5bWJvbFdpZHRoKGMpO1xuXHRcdFx0YWJzZWxlbS5hZGRIZWFkKG5ldyBSZWxhdGl2ZUVsZW1lbnQoYywgbW1XaWR0aCwgbW1XaWR0aCAqIDIsIDcpKTtcblx0XHRcdHZhciBudW1NZWFzdXJlcyA9IG5ldyBSZWxhdGl2ZUVsZW1lbnQoXCJcIiArIGVsZW0ucmVzdC50ZXh0LCBtbVdpZHRoLCBtbVdpZHRoLCAxNiwgeyB0eXBlOiBcIm11bHRpbWVhc3VyZS10ZXh0XCIgfSk7XG5cdFx0XHRhYnNlbGVtLmFkZEV4dHJhKG51bU1lYXN1cmVzKTtcblx0fVxuXHRpZiAoZWxlbS5yZXN0LnR5cGUuaW5kZXhPZihcIm11bHRpbWVhc3VyZVwiKSA8IDAgJiYgZWxlbS5yZXN0LnR5cGUgIT09IFwiaW52aXNpYmxlXCIpIHtcblx0XHR2YXIgcmV0ID0gY3JlYXRlTm90ZUhlYWQoYWJzZWxlbSwgYywgeyB2ZXJ0aWNhbFBvczogcmVzdHBpdGNoIH0sXG5cdFx0XHR7IGRvdDogZG90LCBzY2FsZTogdm9pY2VTY2FsZSB9KTtcblx0XHRub3RlSGVhZCA9IHJldC5ub3RlaGVhZDtcblx0XHRpZiAobm90ZUhlYWQpIHtcblx0XHRcdGFic2VsZW0uYWRkSGVhZChub3RlSGVhZCk7XG5cdFx0XHRyb29tVGFrZW4gPSByZXQuYWNjaWRlbnRhbHNoaWZ0eDtcblx0XHRcdHJvb21UYWtlblJpZ2h0ID0gcmV0LmRvdHNoaWZ0eDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHsgbm90ZUhlYWQ6IG5vdGVIZWFkLCByb29tVGFrZW46IHJvb21UYWtlbiwgcm9vbVRha2VuUmlnaHQ6IHJvb21UYWtlblJpZ2h0IH07XG59XG5cbmZ1bmN0aW9uIGFkZElmTm90RXhpc3QoYXJyLCBpdGVtKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG5cdFx0aWYgKEpTT04uc3RyaW5naWZ5KGFycltpXSkgPT09IEpTT04uc3RyaW5naWZ5KGl0ZW0pKVxuXHRcdFx0cmV0dXJuO1xuXHR9XG5cdGFyci5wdXNoKGl0ZW0pO1xufVxuXG5BYnN0cmFjdEVuZ3JhdmVyLnByb3RvdHlwZS5hZGROb3RlVG9BYmNFbGVtZW50ID0gZnVuY3Rpb24gKGFic2VsZW0sIGVsZW0sIGRvdCwgc3RlbWRpciwgc3R5bGUsIHplcm9EdXJhdGlvbiwgZHVybG9nLCBub3N0ZW0sIHZvaWNlKSB7XG5cdHZhciBkb3RzaGlmdHggPSAwOyAvLyByb29tIHRha2VuIGJ5IGNob3JkcyB3aXRoIGRpc3BsYWNlZCBub3RlaGVhZHMgd2hpY2ggY2F1c2UgZG90cyB0byBzaGlmdFxuXHR2YXIgbm90ZUhlYWQ7XG5cdHZhciByb29tVGFrZW4gPSAwO1xuXHR2YXIgcm9vbVRha2VuUmlnaHQgPSAwO1xuXHR2YXIgbWluO1xuXHR2YXIgaTtcblx0dmFyIGFkZGl0aW9uYWxMZWRnZXJzID0gW107XG5cdC8vIFRoZSBhY2NpZGVudGFsU2xvdCB3aWxsIGhvbGQgYSBsaXN0IG9mIGFsbCB0aGUgYWNjaWRlbnRhbHMgb24gdGhpcyBjaG9yZC4gRWFjaCBlbGVtZW50IGlzIGEgdmVydGljYWwgcGxhY2UsXG5cdC8vIGFuZCBjb250YWlucyBhIHBpdGNoLCB3aGljaCBpcyB0aGUgbGFzdCBwaXRjaCB0aGF0IGNvbnRhaW5zIGFuIGFjY2lkZW50YWwgaW4gdGhhdCBzbG90LiBUaGUgc2xvdHMgYXJlIG51bWJlcmVkXG5cdC8vIGZyb20gY2xvc2VzdCB0byB0aGUgbm90ZSB0byBmYXJ0aGVyIGxlZnQuIFdlIG9ubHkgbmVlZCB0byBrbm93IHRoZSBsYXN0IGFjY2lkZW50YWwgd2UgcGxhY2VkIGJlY2F1c2Vcblx0Ly8gd2Uga25vdyB0aGF0IHRoZSBwaXRjaGVzIGFyZSBzb3J0ZWQgYnkgbm93LlxuXHR2YXIgYWNjaWRlbnRhbFNsb3QgPSBbXTtcblx0dmFyIHN5bWJvbFdpZHRoID0gMDtcblxuXHR2YXIgZGlyID0gKGVsZW0uYXZlcmFnZXBpdGNoID49IDYpID8gXCJkb3duXCIgOiBcInVwXCI7XG5cdGlmIChzdGVtZGlyKSBkaXIgPSBzdGVtZGlyO1xuXG5cdHN0eWxlID0gZWxlbS5zdHlsZSA/IGVsZW0uc3R5bGUgOiBzdHlsZTsgLy8gZ2V0IHRoZSBzdHlsZSBvZiBub3RlIGhlYWQuXG5cdGlmICghc3R5bGUgfHwgc3R5bGUgPT09IFwibm9ybWFsXCIpIHN0eWxlID0gXCJub3RlXCI7XG5cdHZhciBub3RlU3ltYm9sO1xuXHRpZiAoemVyb0R1cmF0aW9uKVxuXHRcdG5vdGVTeW1ib2wgPSBjaGFydGFibGVbc3R5bGVdLm5vc3RlbTtcblx0ZWxzZVxuXHRcdG5vdGVTeW1ib2wgPSBjaGFydGFibGVbc3R5bGVdWy1kdXJsb2ddO1xuXHRpZiAoIW5vdGVTeW1ib2wpXG5cdFx0Y29uc29sZS5sb2coXCJub3RlU3ltYm9sOlwiLCBzdHlsZSwgZHVybG9nLCB6ZXJvRHVyYXRpb24pO1xuXG5cdC8vIGRldGVybWluZSBlbGVtZW50cyBvZiBjaG9yZHMgd2hpY2ggc2hvdWxkIGJlIHNoaWZ0ZWRcblx0dmFyIHA7XG5cdGZvciAocCA9IChkaXIgPT09IFwiZG93blwiKSA/IGVsZW0ucGl0Y2hlcy5sZW5ndGggLSAyIDogMTsgKGRpciA9PT0gXCJkb3duXCIpID8gcCA+PSAwIDogcCA8IGVsZW0ucGl0Y2hlcy5sZW5ndGg7IHAgPSAoZGlyID09PSBcImRvd25cIikgPyBwIC0gMSA6IHAgKyAxKSB7XG5cdFx0dmFyIHByZXYgPSBlbGVtLnBpdGNoZXNbKGRpciA9PT0gXCJkb3duXCIpID8gcCArIDEgOiBwIC0gMV07XG5cdFx0dmFyIGN1cnIgPSBlbGVtLnBpdGNoZXNbcF07XG5cdFx0dmFyIGRlbHRhID0gKGRpciA9PT0gXCJkb3duXCIpID8gcHJldi5waXRjaCAtIGN1cnIucGl0Y2ggOiBjdXJyLnBpdGNoIC0gcHJldi5waXRjaDtcblx0XHRpZiAoZGVsdGEgPD0gMSAmJiAhcHJldi5wcmludGVyX3NoaWZ0KSB7XG5cdFx0XHRjdXJyLnByaW50ZXJfc2hpZnQgPSAoZGVsdGEpID8gXCJkaWZmZXJlbnRcIiA6IFwic2FtZVwiO1xuXHRcdFx0aWYgKGN1cnIudmVydGljYWxQb3MgPiAxMSB8fCBjdXJyLnZlcnRpY2FsUG9zIDwgMSkgeyAgICAgICAgLy8gUEVSOiBhZGQgZXh0cmEgbGVkZ2VyIGxpbmVcblx0XHRcdFx0YWRkaXRpb25hbExlZGdlcnMucHVzaChjdXJyLnZlcnRpY2FsUG9zIC0gKGN1cnIudmVydGljYWxQb3MgJSAyKSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZGlyID09PSBcImRvd25cIikge1xuXHRcdFx0XHRyb29tVGFrZW4gPSBnbHlwaHMuZ2V0U3ltYm9sV2lkdGgobm90ZVN5bWJvbCkgKyAyO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZG90c2hpZnR4ID0gZ2x5cGhzLmdldFN5bWJvbFdpZHRoKG5vdGVTeW1ib2wpICsgMjtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHR2YXIgcHAgPSBlbGVtLnBpdGNoZXMubGVuZ3RoO1xuXHRmb3IgKHAgPSAwOyBwIDwgZWxlbS5waXRjaGVzLmxlbmd0aDsgcCsrKSB7XG5cblx0XHRpZiAoIW5vc3RlbSkge1xuXHRcdFx0dmFyIGZsYWc7XG5cdFx0XHRpZiAoKGRpciA9PT0gXCJkb3duXCIgJiYgcCAhPT0gMCkgfHwgKGRpciA9PT0gXCJ1cFwiICYmIHAgIT09IHBwIC0gMSkpIHsgLy8gbm90IHRoZSBzdGVtbWVkIGVsZW0gb2YgdGhlIGNob3JkXG5cdFx0XHRcdGZsYWcgPSBudWxsO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZmxhZyA9IGNoYXJ0YWJsZVsoZGlyID09PSBcImRvd25cIikgPyBcImRmbGFnc1wiIDogXCJ1ZmxhZ3NcIl1bLWR1cmxvZ107XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHZhciBjO1xuXHRcdGlmIChlbGVtLnBpdGNoZXNbcF0uc3R5bGUpIHsgLy8gVGhlcmUgaXMgYSBzdHlsZSBmb3IgdGhlIHdob2xlIGdyb3VwIG9mIHBpdGNoZXMsIGJ1dCB0aGVyZSBjb3VsZCBhbHNvIGJlIGFuIG92ZXJyaWRlIGZvciBhIHBhcnRpY3VsYXIgcGl0Y2guXG5cdFx0XHRjID0gY2hhcnRhYmxlW2VsZW0ucGl0Y2hlc1twXS5zdHlsZV1bLWR1cmxvZ107XG5cdFx0fSBlbHNlIGlmICh2b2ljZS5pc1BlcmN1c3Npb24gJiYgdGhpcy5wZXJjbWFwKSB7XG5cdFx0XHRjID0gbm90ZVN5bWJvbDtcblx0XHRcdHZhciBwZXJjSGVhZCA9IHRoaXMucGVyY21hcFtwaXRjaGVzVG9QZXJjKGVsZW0ucGl0Y2hlc1twXSldO1xuXHRcdFx0aWYgKHBlcmNIZWFkICYmIHBlcmNIZWFkLm5vdGVIZWFkKSB7XG5cdFx0XHRcdGlmIChjaGFydGFibGVbcGVyY0hlYWQubm90ZUhlYWRdKVxuXHRcdFx0XHRcdGMgPSBjaGFydGFibGVbcGVyY0hlYWQubm90ZUhlYWRdWy1kdXJsb2ddO1xuXHRcdFx0fVxuXHRcdH0gZWxzZVxuXHRcdFx0YyA9IG5vdGVTeW1ib2w7XG5cdFx0Ly8gVGhlIGhpZ2hlc3QgcG9zaXRpb24gZm9yIHRoZSBzYWtlIG9mIHBsYWNpbmcgc2x1cnMgaXMgaXRzZWxmIGlmIHRoZSBzbHVyIGlzIGludGVybmFsLiBJdCBpcyB0aGUgaGlnaGVzdCBwb3NpdGlvbiBwb3NzaWJsZSBpZiB0aGUgc2x1ciBpcyBmb3IgdGhlIHdob2xlIGNob3JkLlxuXHRcdC8vIElmIHRoZSBub3RlIGlzIHRoZSBvbmx5IG9uZSBpbiB0aGUgY2hvcmQsIHRoZW4gYW55IHNsdXIgaXQgaGFzIGNvdW50cyBhcyBpZiBpdCB3ZXJlIG9uIHRoZSB3aG9sZSBjaG9yZC5cblx0XHRlbGVtLnBpdGNoZXNbcF0uaGlnaGVzdFZlcnQgPSBlbGVtLnBpdGNoZXNbcF0udmVydGljYWxQb3M7XG5cdFx0dmFyIGlzVG9wV2hlblN0ZW1Jc0Rvd24gPSAoc3RlbWRpciA9PT0gXCJ1cFwiIHx8IGRpciA9PT0gXCJ1cFwiKSAmJiBwID09PSAwO1xuXHRcdHZhciBpc0JvdHRvbVdoZW5TdGVtSXNVcCA9IChzdGVtZGlyID09PSBcImRvd25cIiB8fCBkaXIgPT09IFwiZG93blwiKSAmJiBwID09PSBwcCAtIDE7XG5cdFx0aWYgKGlzVG9wV2hlblN0ZW1Jc0Rvd24gfHwgaXNCb3R0b21XaGVuU3RlbUlzVXApIHsgLy8gcGxhY2UgdG8gcHV0IHNsdXJzIGlmIG5vdCBhbHJlYWR5IG9uIHBpdGNoZXNcblxuXHRcdFx0aWYgKGVsZW0uc3RhcnRTbHVyIHx8IHBwID09PSAxKSB7XG5cdFx0XHRcdGVsZW0ucGl0Y2hlc1twXS5oaWdoZXN0VmVydCA9IGVsZW0ucGl0Y2hlc1twcCAtIDFdLnZlcnRpY2FsUG9zO1xuXHRcdFx0XHRpZiAoZ2V0RHVyYXRpb24oZWxlbSkgPCAxICYmIChzdGVtZGlyID09PSBcInVwXCIgfHwgZGlyID09PSBcInVwXCIpKVxuXHRcdFx0XHRcdGVsZW0ucGl0Y2hlc1twXS5oaWdoZXN0VmVydCArPSA2OyAgICAgICAgLy8gSWYgdGhlIHN0ZW0gaXMgdXAsIHRoZW4gY29tcGVuc2F0ZSBmb3IgdGhlIGxlbmd0aCBvZiB0aGUgc3RlbVxuXHRcdFx0fVxuXHRcdFx0aWYgKGVsZW0uc3RhcnRTbHVyKSB7XG5cdFx0XHRcdGlmICghZWxlbS5waXRjaGVzW3BdLnN0YXJ0U2x1cikgZWxlbS5waXRjaGVzW3BdLnN0YXJ0U2x1ciA9IFtdOyAvL1RPRE8gcG9zc2libHkgcmVkdW5kYW50LCBwcm92aWRlZCBhcnJheSBpcyBub3Qgb3B0aW9uYWxcblx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IGVsZW0uc3RhcnRTbHVyLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0YWRkSWZOb3RFeGlzdChlbGVtLnBpdGNoZXNbcF0uc3RhcnRTbHVyLCBlbGVtLnN0YXJ0U2x1cltpXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKGVsZW0uZW5kU2x1cikge1xuXHRcdFx0XHRlbGVtLnBpdGNoZXNbcF0uaGlnaGVzdFZlcnQgPSBlbGVtLnBpdGNoZXNbcHAgLSAxXS52ZXJ0aWNhbFBvcztcblx0XHRcdFx0aWYgKGdldER1cmF0aW9uKGVsZW0pIDwgMSAmJiAoc3RlbWRpciA9PT0gXCJ1cFwiIHx8IGRpciA9PT0gXCJ1cFwiKSlcblx0XHRcdFx0XHRlbGVtLnBpdGNoZXNbcF0uaGlnaGVzdFZlcnQgKz0gNjsgICAgICAgIC8vIElmIHRoZSBzdGVtIGlzIHVwLCB0aGVuIGNvbXBlbnNhdGUgZm9yIHRoZSBsZW5ndGggb2YgdGhlIHN0ZW1cblx0XHRcdFx0aWYgKCFlbGVtLnBpdGNoZXNbcF0uZW5kU2x1cikgZWxlbS5waXRjaGVzW3BdLmVuZFNsdXIgPSBbXTsgLy9UT0RPIHBvc3NpYmx5IHJlZHVuZGFudCwgcHJvdmlkZWQgYXJyYXkgaXMgbm90IG9wdGlvbmFsXG5cdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBlbGVtLmVuZFNsdXIubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRhZGRJZk5vdEV4aXN0KGVsZW0ucGl0Y2hlc1twXS5lbmRTbHVyLCBlbGVtLmVuZFNsdXJbaV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dmFyIGhhc1N0ZW0gPSAhbm9zdGVtICYmIGR1cmxvZyA8PSAtMTtcblx0XHR2YXIgcmV0ID0gY3JlYXRlTm90ZUhlYWQoYWJzZWxlbSwgYywgZWxlbS5waXRjaGVzW3BdLFxuXHRcdFx0eyBkaXI6IGRpciwgZXh0cmF4OiAtcm9vbVRha2VuLCBmbGFnOiBmbGFnLCBkb3Q6IGRvdCwgZG90c2hpZnR4OiBkb3RzaGlmdHgsIHNjYWxlOiB0aGlzLnZvaWNlU2NhbGUsIGFjY2lkZW50YWxTbG90OiBhY2NpZGVudGFsU2xvdCwgc2hvdWxkRXh0ZW5kU3RlbTogIXN0ZW1kaXIsIHByaW50QWNjaWRlbnRhbHM6ICF2b2ljZS5pc1BlcmN1c3Npb24gfSk7XG5cdFx0c3ltYm9sV2lkdGggPSBNYXRoLm1heChnbHlwaHMuZ2V0U3ltYm9sV2lkdGgoYyksIHN5bWJvbFdpZHRoKTtcblx0XHRhYnNlbGVtLmV4dHJhdyAtPSByZXQuZXh0cmFMZWZ0O1xuXHRcdG5vdGVIZWFkID0gcmV0Lm5vdGVoZWFkO1xuXHRcdGlmIChub3RlSGVhZCkge1xuXHRcdFx0dGhpcy5hZGRTbHVyc0FuZFRpZXMoYWJzZWxlbSwgZWxlbS5waXRjaGVzW3BdLCBub3RlSGVhZCwgdm9pY2UsIGhhc1N0ZW0gPyBkaXIgOiBudWxsLCBmYWxzZSk7XG5cblx0XHRcdGlmIChlbGVtLmdyYWNlbm90ZXMgJiYgZWxlbS5ncmFjZW5vdGVzLmxlbmd0aCA+IDApXG5cdFx0XHRcdG5vdGVIZWFkLmJvdHRvbSA9IG5vdGVIZWFkLmJvdHRvbSAtIDE7XHQgLy8gSWYgdGhlcmUgaXMgYSB0aWUgdG8gdGhlIGdyYWNlIG5vdGVzLCBsZWF2ZSBhIGxpdHRsZSBtb3JlIHJvb20gZm9yIHRoZSBub3RlIHRvIGF2b2lkIGNvbGxpc2lvbnMuXG5cdFx0XHRhYnNlbGVtLmFkZEhlYWQobm90ZUhlYWQpO1xuXHRcdH1cblx0XHRyb29tVGFrZW4gKz0gcmV0LmFjY2lkZW50YWxzaGlmdHg7XG5cdFx0cm9vbVRha2VuUmlnaHQgPSBNYXRoLm1heChyb29tVGFrZW5SaWdodCwgcmV0LmRvdHNoaWZ0eCk7XG5cdH1cblxuXHQvLyBkcmF3IHN0ZW0gZnJvbSB0aGUgZnVydGhlc3Qgbm90ZSB0byBhIHBpdGNoIGFib3ZlL2JlbG93IHRoZSBzdGVtbWVkIG5vdGVcblx0aWYgKGhhc1N0ZW0pIHtcblx0XHR2YXIgc3RlbUhlaWdodCA9IE1hdGgucm91bmQoNzAgKiB0aGlzLnZvaWNlU2NhbGUpIC8gMTA7XG5cdFx0dmFyIHAxID0gKGRpciA9PT0gXCJkb3duXCIpID8gZWxlbS5taW5waXRjaCAtIHN0ZW1IZWlnaHQgOiBlbGVtLm1pbnBpdGNoICsgMSAvIDM7XG5cdFx0Ly8gUEVSIGFkZGVkIHN0ZW1kaXIgdGVzdCB0byBtYWtlIHRoZSBsaW5lIG1lZXQgdGhlIG5vdGUuXG5cdFx0aWYgKHAxID4gNiAmJiAhc3RlbWRpcikgcDEgPSA2O1xuXHRcdHZhciBwMiA9IChkaXIgPT09IFwiZG93blwiKSA/IGVsZW0ubWF4cGl0Y2ggLSAxIC8gMyA6IGVsZW0ubWF4cGl0Y2ggKyBzdGVtSGVpZ2h0O1xuXHRcdC8vIFBFUiBhZGRlZCBzdGVtZGlyIHRlc3QgdG8gbWFrZSB0aGUgbGluZSBtZWV0IHRoZSBub3RlLlxuXHRcdGlmIChwMiA8IDYgJiYgIXN0ZW1kaXIpIHAyID0gNjtcblx0XHR2YXIgZHggPSAoZGlyID09PSBcImRvd25cIiB8fCBhYnNlbGVtLmhlYWRzLmxlbmd0aCA9PT0gMCkgPyAwIDogYWJzZWxlbS5oZWFkc1swXS53O1xuXHRcdHZhciB3aWR0aCA9IChkaXIgPT09IFwiZG93blwiKSA/IDEgOiAtMTtcblx0XHQvLyBUT0RPLVBFUi1IQUNLOiBPbmUgdHlwZSBvZiBub3RlIGhlYWQgaGFzIGEgZGlmZmVyZW50IHBsYWNlbWVudCBvZiB0aGUgc3RlbS4gVGhpcyBzaG91bGQgYmUgbW9yZSBnZW5lcmljYWxseSBjYWxjdWxhdGVkOlxuXHRcdGlmIChub3RlSGVhZCAmJiBub3RlSGVhZC5jID09PSAnbm90ZWhlYWRzLnNsYXNoLnF1YXJ0ZXInKSB7XG5cdFx0XHRpZiAoZGlyID09PSAnZG93bicpXG5cdFx0XHRcdHAyIC09IDE7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdHAxICs9IDE7XG5cdFx0fVxuXHRcdGlmIChub3RlSGVhZCAmJiBub3RlSGVhZC5jID09PSAnbm90ZWhlYWRzLnRyaWFuZ2xlLnF1YXJ0ZXInKSB7XG5cdFx0XHRpZiAoZGlyID09PSAnZG93bicpXG5cdFx0XHRcdHAyIC09IDAuNztcblx0XHRcdGVsc2Vcblx0XHRcdFx0cDEgLT0gMS4yO1xuXHRcdH1cblx0XHRhYnNlbGVtLmFkZFJpZ2h0KG5ldyBSZWxhdGl2ZUVsZW1lbnQobnVsbCwgZHgsIDAsIHAxLCB7IFwidHlwZVwiOiBcInN0ZW1cIiwgXCJwaXRjaDJcIjogcDIsIGxpbmV3aWR0aDogd2lkdGgsIGJvdHRvbTogcDEgLSAxIH0pKTtcblx0XHQvL3ZhciBSZWxhdGl2ZUVsZW1lbnQgPSBmdW5jdGlvbiBSZWxhdGl2ZUVsZW1lbnQoYywgZHgsIHcsIHBpdGNoLCBvcHQpIHtcblx0XHRtaW4gPSBNYXRoLm1pbihwMSwgcDIpO1xuXHR9XG5cdHJldHVybiB7IG5vdGVIZWFkOiBub3RlSGVhZCwgcm9vbVRha2VuOiByb29tVGFrZW4sIHJvb21UYWtlblJpZ2h0OiByb29tVGFrZW5SaWdodCwgbWluOiBtaW4sIGFkZGl0aW9uYWxMZWRnZXJzOiBhZGRpdGlvbmFsTGVkZ2VycywgZGlyOiBkaXIsIHN5bWJvbFdpZHRoOiBzeW1ib2xXaWR0aCB9O1xufTtcblxuQWJzdHJhY3RFbmdyYXZlci5wcm90b3R5cGUuYWRkTHlyaWMgPSBmdW5jdGlvbiAoYWJzZWxlbSwgZWxlbSkge1xuXHR2YXIgbHlyaWNTdHIgPSBcIlwiO1xuXHRlbGVtLmx5cmljLmZvckVhY2goZnVuY3Rpb24gKGx5KSB7XG5cdFx0dmFyIGRpdiA9IGx5LmRpdmlkZXIgPT09ICcgJyA/IFwiXCIgOiBseS5kaXZpZGVyO1xuXHRcdGx5cmljU3RyICs9IGx5LnN5bGxhYmxlICsgZGl2ICsgXCJcXG5cIjtcblx0fSk7XG5cdHZhciBseXJpY0RpbSA9IHRoaXMuZ2V0VGV4dFNpemUuY2FsYyhseXJpY1N0ciwgJ3ZvY2FsZm9udCcsIFwibHlyaWNcIik7XG5cdHZhciBwb3NpdGlvbiA9IGVsZW0ucG9zaXRpb25pbmcgPyBlbGVtLnBvc2l0aW9uaW5nLnZvY2FsUG9zaXRpb24gOiAnYmVsb3cnO1xuXHRhYnNlbGVtLmFkZENlbnRlcmVkKG5ldyBSZWxhdGl2ZUVsZW1lbnQobHlyaWNTdHIsIDAsIGx5cmljRGltLndpZHRoLCB1bmRlZmluZWQsIHsgdHlwZTogXCJseXJpY1wiLCBwb3NpdGlvbjogcG9zaXRpb24sIGhlaWdodDogbHlyaWNEaW0uaGVpZ2h0IC8gc3BhY2luZy5TVEVQLCBkaW06IHRoaXMuZ2V0VGV4dFNpemUuYXR0cigndm9jYWxmb250JywgXCJseXJpY1wiKSB9KSk7XG59O1xuXG5BYnN0cmFjdEVuZ3JhdmVyLnByb3RvdHlwZS5jcmVhdGVOb3RlID0gZnVuY3Rpb24gKGVsZW0sIG5vc3RlbSwgaXNTaW5nbGVMaW5lU3RhZmYsIHZvaWNlKSB7IC8vc3RlbSBwcmVzZW5jZTogdHJ1ZSBmb3IgZHJhd2luZyBzdGVtbGVzcyBub3RlaGVhZFxuXHR2YXIgbm90ZWhlYWQgPSBudWxsO1xuXHR2YXIgcm9vbXRha2VuID0gMDsgLy8gcm9vbSBuZWVkZWQgdG8gdGhlIGxlZnQgb2YgdGhlIG5vdGVcblx0dmFyIHJvb210YWtlbnJpZ2h0ID0gMDsgLy8gcm9vbSBuZWVkZWQgdG8gdGhlIHJpZ2h0IG9mIHRoZSBub3RlXG5cdHZhciBzeW1ib2xXaWR0aCA9IDA7XG5cdHZhciBhZGRpdGlvbmFsTGVkZ2VycyA9IFtdOyAvLyBQRVI6IGhhbmRsZSB0aGUgY2FzZSBvZiBbYmMnXSwgd2hlcmUgdGhlIGIgZG9lc24ndCBoYXZlIGEgbGVkZ2VyIGxpbmVcblxuXHR2YXIgZGlyO1xuXG5cdHZhciBkdXJhdGlvbiA9IGdldER1cmF0aW9uKGVsZW0pO1xuXHR2YXIgemVyb0R1cmF0aW9uID0gZmFsc2U7XG5cdGlmIChkdXJhdGlvbiA9PT0gMCkgeyB6ZXJvRHVyYXRpb24gPSB0cnVlOyBkdXJhdGlvbiA9IDAuMjU7IG5vc3RlbSA9IHRydWU7IH0gICAgICAgIC8vUEVSOiB6ZXJvIGR1cmF0aW9uIHdpbGwgZHJhdyBhIHF1YXJ0ZXIgbm90ZSBoZWFkLlxuXHR2YXIgZHVybG9nID0gTWF0aC5mbG9vcihNYXRoLmxvZyhkdXJhdGlvbikgLyBNYXRoLmxvZygyKSk7IC8vVE9ETyB1c2UgZ2V0RHVybG9nXG5cdHZhciBkb3QgPSAwO1xuXG5cdGZvciAodmFyIHRvdCA9IE1hdGgucG93KDIsIGR1cmxvZyksIGluYyA9IHRvdCAvIDI7IHRvdCA8IGR1cmF0aW9uOyBkb3QrKywgdG90ICs9IGluYywgaW5jIC89IDIpO1xuXG5cblx0aWYgKGVsZW0uc3RhcnRUcmlwbGV0KSB7XG5cdFx0dGhpcy50cmlwbGV0bXVsdGlwbGllciA9IGVsZW0udHJpcGxldE11bHRpcGxpZXI7XG5cdH1cblxuXHR2YXIgZHVyYXRpb25Gb3JTcGFjaW5nID0gZHVyYXRpb24gKiB0aGlzLnRyaXBsZXRtdWx0aXBsaWVyO1xuXHRpZiAoZWxlbS5yZXN0ICYmIGVsZW0ucmVzdC50eXBlID09PSAnbXVsdGltZWFzdXJlJylcblx0XHRkdXJhdGlvbkZvclNwYWNpbmcgPSAxO1xuXHRpZiAoZWxlbS5yZXN0ICYmIGVsZW0ucmVzdC50eXBlID09PSAnaW52aXNpYmxlLW11bHRpbWVhc3VyZScpXG5cdFx0ZHVyYXRpb25Gb3JTcGFjaW5nID0gdGhpcy5tZWFzdXJlTGVuZ3RoICogZWxlbS5yZXN0LnRleHQ7XG5cdHZhciBhYnNUeXBlID0gZWxlbS5yZXN0ID8gXCJyZXN0XCIgOiBcIm5vdGVcIjtcblx0dmFyIGFic2VsZW0gPSBuZXcgQWJzb2x1dGVFbGVtZW50KGVsZW0sIGR1cmF0aW9uRm9yU3BhY2luZywgMSwgYWJzVHlwZSwgdGhpcy50dW5lTnVtYmVyLCB7IGR1cmF0aW9uQ2xhc3NPdmVyaWRlOiBlbGVtLmR1cmF0aW9uICogdGhpcy50cmlwbGV0bXVsdGlwbGllciB9KTtcblx0aWYgKGhpbnQpIGFic2VsZW0uc2V0SGludCgpO1xuXG5cdGlmIChlbGVtLnJlc3QpIHtcblx0XHRpZiAodGhpcy5tZWFzdXJlTGVuZ3RoID09PSBkdXJhdGlvbiAmJiBlbGVtLnJlc3QudHlwZSAhPT0gJ2ludmlzaWJsZScgJiYgZWxlbS5yZXN0LnR5cGUgIT09ICdzcGFjZXInICYmIGVsZW0ucmVzdC50eXBlLmluZGV4T2YoJ211bHRpbWVhc3VyZScpIDwgMClcblx0XHRcdGVsZW0ucmVzdC50eXBlID0gJ3dob2xlJzsgLy8gSWYgdGhlIHJlc3QgaXMgZXhhY3RseSBhIG1lYXN1cmUsIGFsd2F5cyB1c2UgYSB3aG9sZSByZXN0XG5cdFx0dmFyIHJldDEgPSBhZGRSZXN0VG9BYnNFbGVtZW50KGFic2VsZW0sIGVsZW0sIGR1cmF0aW9uLCBkb3QsIHZvaWNlLnZvaWNldG90YWwgPiAxLCB0aGlzLnN0ZW1kaXIsIGlzU2luZ2xlTGluZVN0YWZmLCBkdXJsb2csIHRoaXMudm9pY2VTY2FsZSk7XG5cdFx0bm90ZWhlYWQgPSByZXQxLm5vdGVIZWFkO1xuXHRcdHJvb210YWtlbiA9IHJldDEucm9vbVRha2VuO1xuXHRcdHJvb210YWtlbnJpZ2h0ID0gcmV0MS5yb29tVGFrZW5SaWdodDtcblx0fSBlbHNlIHtcblx0XHR2YXIgcmV0MiA9IHRoaXMuYWRkTm90ZVRvQWJjRWxlbWVudChhYnNlbGVtLCBlbGVtLCBkb3QsIHRoaXMuc3RlbWRpciwgdGhpcy5zdHlsZSwgemVyb0R1cmF0aW9uLCBkdXJsb2csIG5vc3RlbSwgdm9pY2UpO1xuXHRcdGlmIChyZXQyLm1pbiAhPT0gdW5kZWZpbmVkKVxuXHRcdFx0dGhpcy5taW5ZID0gTWF0aC5taW4ocmV0Mi5taW4sIHRoaXMubWluWSk7XG5cdFx0bm90ZWhlYWQgPSByZXQyLm5vdGVIZWFkO1xuXHRcdHJvb210YWtlbiA9IHJldDIucm9vbVRha2VuO1xuXHRcdHJvb210YWtlbnJpZ2h0ID0gcmV0Mi5yb29tVGFrZW5SaWdodDtcblx0XHRhZGRpdGlvbmFsTGVkZ2VycyA9IHJldDIuYWRkaXRpb25hbExlZGdlcnM7XG5cdFx0ZGlyID0gcmV0Mi5kaXI7XG5cdFx0c3ltYm9sV2lkdGggPSByZXQyLnN5bWJvbFdpZHRoO1xuXHR9XG5cblx0aWYgKGVsZW0ubHlyaWMgIT09IHVuZGVmaW5lZCkge1xuXHRcdHRoaXMuYWRkTHlyaWMoYWJzZWxlbSwgZWxlbSk7XG5cdH1cblxuXHRpZiAoZWxlbS5ncmFjZW5vdGVzICE9PSB1bmRlZmluZWQpIHtcblx0XHRyb29tdGFrZW4gKz0gdGhpcy5hZGRHcmFjZU5vdGVzKGVsZW0sIHZvaWNlLCBhYnNlbGVtLCBub3RlaGVhZCwgdGhpcy5zdGVtSGVpZ2h0ICogdGhpcy52b2ljZVNjYWxlLCB0aGlzLmlzQmFncGlwZXMsIHJvb210YWtlbik7XG5cdH1cblxuXHRpZiAoZWxlbS5kZWNvcmF0aW9uKSB7XG5cdFx0Ly8gVE9ETy1QRVI6IG5vc3RlbSBpcyB0cnVlIGlmIHRoaXMgaXMgYmVhbWVkLiBJbiB0aGF0IGNhc2Ugd2UgZG9uJ3Qga25vdyB3aGVyZSB0byBwbGFjZSB0aGUgZGVjb3JhdGlvbiB5ZXQgc28ganVzdCBtYWtlIGEgZ3Vlc3MuIFRoaXMgc2hvdWxkIGJlIHJlZmFjdG9yZWQgdG8gbm90IHBsYWNlIGRlY29yYXRpb25zIHVudGlsIGFmdGVyIHRoZSBiZWFtcyBhcmUgZGV0ZXJtaW5lZC5cblx0XHQvLyBUaGlzIHNob3VsZCBwcm9iYWJseSBiZSBjb21iaW5lZCB3aXRoIG1vdmVEZWNvcmF0aW9ucygpXG5cdFx0dmFyIGJvdHRvbSA9IG5vc3RlbSAmJiBkaXIgIT09ICd1cCcgPyBNYXRoLm1pbigtMywgYWJzZWxlbS5ib3R0b20gLSA2KSA6IGFic2VsZW0uYm90dG9tXG5cdFx0dGhpcy5kZWNvcmF0aW9uLmNyZWF0ZURlY29yYXRpb24odm9pY2UsIGVsZW0uZGVjb3JhdGlvbiwgYWJzZWxlbS50b3AsIChub3RlaGVhZCkgPyBub3RlaGVhZC53IDogMCwgYWJzZWxlbSwgcm9vbXRha2VuLCBkaXIsIGJvdHRvbSwgZWxlbS5wb3NpdGlvbmluZywgdGhpcy5oYXNWb2NhbHMsIHRoaXMuYWNjZW50QWJvdmUpO1xuXHR9XG5cblx0aWYgKGVsZW0uYmFyTnVtYmVyKSB7XG5cdFx0YWJzZWxlbS5hZGRGaXhlZChuZXcgUmVsYXRpdmVFbGVtZW50KGVsZW0uYmFyTnVtYmVyLCAtMTAsIDAsIDAsIHsgdHlwZTogXCJiYXJOdW1iZXJcIiB9KSk7XG5cdH1cblxuXHQvLyBsZWRnZXIgbGluZXNcblx0bGVkZ2VyTGluZXMoYWJzZWxlbSwgZWxlbS5taW5waXRjaCwgZWxlbS5tYXhwaXRjaCwgZWxlbS5yZXN0LCBzeW1ib2xXaWR0aCwgYWRkaXRpb25hbExlZGdlcnMsIGRpciwgLTIsIDEpO1xuXG5cdGlmIChlbGVtLmNob3JkICE9PSB1bmRlZmluZWQpIHtcblx0XHR2YXIgcmV0MyA9IGFkZENob3JkKHRoaXMuZ2V0VGV4dFNpemUsIGFic2VsZW0sIGVsZW0sIHJvb210YWtlbiwgcm9vbXRha2VucmlnaHQsIHN5bWJvbFdpZHRoLCB0aGlzLmphenpjaG9yZHMsIHRoaXMuZ2VybWFuQWxwaGFiZXQpO1xuXHRcdHJvb210YWtlbiA9IHJldDMucm9vbVRha2VuO1xuXHRcdHJvb210YWtlbnJpZ2h0ID0gcmV0My5yb29tVGFrZW5SaWdodDtcblx0fVxuXG5cdGlmIChlbGVtLnN0YXJ0VHJpcGxldCkge1xuXHRcdHRoaXMudHJpcGxldCA9IG5ldyBUcmlwbGV0RWxlbShlbGVtLnN0YXJ0VHJpcGxldCwgbm90ZWhlYWQsIHsgZmxhdEJlYW1zOiB0aGlzLmZsYXRCZWFtcyB9KTsgLy8gYWJvdmUgaXMgb3Bwb3NpdGUgZnJvbSBjYXNlIG9mIHNsdXJzXG5cdH1cblxuXHRpZiAoZWxlbS5lbmRUcmlwbGV0ICYmIHRoaXMudHJpcGxldCkge1xuXHRcdHRoaXMudHJpcGxldC5zZXRDbG9zZUFuY2hvcihub3RlaGVhZCk7XG5cdH1cblxuXHRpZiAodGhpcy50cmlwbGV0ICYmICFlbGVtLnN0YXJ0VHJpcGxldCAmJiAhZWxlbS5lbmRUcmlwbGV0ICYmICEoZWxlbS5yZXN0ICYmIGVsZW0ucmVzdC50eXBlID09PSBcInNwYWNlclwiKSkge1xuXHRcdHRoaXMudHJpcGxldC5taWRkbGVOb3RlKG5vdGVoZWFkKTtcblx0fVxuXG5cdHJldHVybiBhYnNlbGVtO1xufTtcblxuQWJzdHJhY3RFbmdyYXZlci5wcm90b3R5cGUuYWRkU2x1cnNBbmRUaWVzID0gZnVuY3Rpb24gKGFic2VsZW0sIHBpdGNoZWxlbSwgbm90ZWhlYWQsIHZvaWNlLCBkaXIsIGlzR3JhY2UpIHtcblx0aWYgKHBpdGNoZWxlbS5lbmRUaWUpIHtcblx0XHRpZiAodGhpcy50aWVzLmxlbmd0aCA+IDApIHtcblx0XHRcdC8vIElmIHRoZXJlIGFyZSBtdWx0aXBsZSBvcGVuIHRpZXMsIGZpbmQgdGhlIG9uZSB0aGF0IGFwcGxpZXMgYnkgbWF0Y2hpbmcgdGhlIHBpdGNoLCBpZiBwb3NzaWJsZS5cblx0XHRcdHZhciBmb3VuZCA9IGZhbHNlO1xuXHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLnRpZXMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0aWYgKHRoaXMudGllc1tqXS5hbmNob3IxICYmIHRoaXMudGllc1tqXS5hbmNob3IxLnBpdGNoID09PSBub3RlaGVhZC5waXRjaCkge1xuXHRcdFx0XHRcdHRoaXMudGllc1tqXS5zZXRFbmRBbmNob3Iobm90ZWhlYWQpO1xuXHRcdFx0XHRcdHZvaWNlLnNldFJhbmdlKHRoaXMudGllc1tqXSlcblx0XHRcdFx0XHR0aGlzLnRpZXMuc3BsaWNlKGosIDEpO1xuXHRcdFx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKCFmb3VuZCkge1xuXHRcdFx0XHR0aGlzLnRpZXNbMF0uc2V0RW5kQW5jaG9yKG5vdGVoZWFkKTtcblx0XHRcdFx0dm9pY2Uuc2V0UmFuZ2UodGhpcy50aWVzWzBdKVxuXHRcdFx0XHR0aGlzLnRpZXMuc3BsaWNlKDAsIDEpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHZhciB2b2ljZU51bWJlciA9IHZvaWNlLnZvaWNldG90YWwgPCAyID8gLTEgOiB2b2ljZS52b2ljZW51bWJlcjtcblx0aWYgKHBpdGNoZWxlbS5zdGFydFRpZSkge1xuXHRcdHZhciB0aWUgPSBuZXcgVGllRWxlbSh7IGFuY2hvcjE6IG5vdGVoZWFkLCBmb3JjZTogKHRoaXMuc3RlbWRpciA9PT0gXCJkb3duXCIgfHwgdGhpcy5zdGVtZGlyID09PSBcInVwXCIpLCBzdGVtRGlyOiB0aGlzLnN0ZW1kaXIsIGlzR3JhY2U6IGlzR3JhY2UsIHZvaWNlTnVtYmVyOiB2b2ljZU51bWJlciwgc3R5bGU6IHBpdGNoZWxlbS5zdGFydFRpZS5zdHlsZSB9KTtcblx0XHRpZiAoaGludCkgdGllLnNldEhpbnQoKTtcblxuXHRcdHRoaXMudGllc1t0aGlzLnRpZXMubGVuZ3RoXSA9IHRpZTtcblx0XHR2b2ljZS5hZGRPdGhlcih0aWUpO1xuXHRcdC8vIEhBQ0stUEVSOiBGb3IgdGhlIGFuaW1hdGlvbiwgd2UgbmVlZCB0byBrbm93IGlmIGEgbm90ZSBpcyB0aWVkIHRvIHRoZSBuZXh0IG9uZSwgc28gaGVyZSdzIGEgZmxhZy5cblx0XHQvLyBVbmZvcnR1bmF0ZWx5LCBvbmx5IHNvbWUgb2YgdGhlIG5vdGVzIGluIHRoZSBjdXJyZW50IGV2ZW50IG1pZ2h0IGJlIHRpZWQsIGJ1dCB0aGlzIHdpbGwgY29uc2lkZXIgaXRcblx0XHQvLyB0aWVkIGlmIGFueSBvbmUgb2YgdGhlbSBpcy4gVGhhdCB3aWxsIHdvcmsgZm9yIG1vc3QgY2FzZXMuXG5cdFx0YWJzZWxlbS5zdGFydFRpZSA9IHRydWU7XG5cdH1cblxuXHR2YXIgc2x1cjtcblx0dmFyIHNsdXJpZDtcblx0aWYgKHBpdGNoZWxlbS5lbmRTbHVyKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwaXRjaGVsZW0uZW5kU2x1ci5sZW5ndGg7IGkrKykge1xuXHRcdFx0c2x1cmlkID0gcGl0Y2hlbGVtLmVuZFNsdXJbaV07XG5cdFx0XHRpZiAodGhpcy5zbHVyc1tzbHVyaWRdKSB7XG5cdFx0XHRcdHNsdXIgPSB0aGlzLnNsdXJzW3NsdXJpZF07XG5cdFx0XHRcdHNsdXIuc2V0RW5kQW5jaG9yKG5vdGVoZWFkKTtcblx0XHRcdFx0dm9pY2Uuc2V0UmFuZ2Uoc2x1cilcblx0XHRcdFx0ZGVsZXRlIHRoaXMuc2x1cnNbc2x1cmlkXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNsdXIgPSBuZXcgVGllRWxlbSh7IGFuY2hvcjI6IG5vdGVoZWFkLCBzdGVtRGlyOiB0aGlzLnN0ZW1kaXIsIHZvaWNlTnVtYmVyOiB2b2ljZU51bWJlciB9KTtcblx0XHRcdFx0aWYgKGhpbnQpIHNsdXIuc2V0SGludCgpO1xuXHRcdFx0XHR2b2ljZS5hZGRPdGhlcihzbHVyKTtcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLnN0YXJ0bGltaXRlbGVtKSB7XG5cdFx0XHRcdHNsdXIuc2V0U3RhcnRYKHRoaXMuc3RhcnRsaW1pdGVsZW0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fSBlbHNlIGlmICghaXNHcmFjZSkge1xuXHRcdGZvciAodmFyIHMgaW4gdGhpcy5zbHVycykge1xuXHRcdFx0aWYgKHRoaXMuc2x1cnMuaGFzT3duUHJvcGVydHkocykpIHtcblx0XHRcdFx0dGhpcy5zbHVyc1tzXS5hZGRJbnRlcm5hbE5vdGUobm90ZWhlYWQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGlmIChwaXRjaGVsZW0uc3RhcnRTbHVyKSB7XG5cdFx0Zm9yIChpID0gMDsgaSA8IHBpdGNoZWxlbS5zdGFydFNsdXIubGVuZ3RoOyBpKyspIHtcblx0XHRcdHNsdXJpZCA9IHBpdGNoZWxlbS5zdGFydFNsdXJbaV0ubGFiZWw7XG5cdFx0XHRzbHVyID0gbmV3IFRpZUVsZW0oeyBhbmNob3IxOiBub3RlaGVhZCwgc3RlbURpcjogdGhpcy5zdGVtZGlyLCB2b2ljZU51bWJlcjogdm9pY2VOdW1iZXIsIHN0eWxlOiBwaXRjaGVsZW0uc3RhcnRTbHVyW2ldLnN0eWxlIH0pO1xuXHRcdFx0aWYgKGhpbnQpIHNsdXIuc2V0SGludCgpO1xuXHRcdFx0dGhpcy5zbHVyc1tzbHVyaWRdID0gc2x1cjtcblx0XHRcdHZvaWNlLmFkZE90aGVyKHNsdXIpO1xuXHRcdH1cblx0fVxufTtcblxuQWJzdHJhY3RFbmdyYXZlci5wcm90b3R5cGUuYWRkTWVhc3VyZU51bWJlciA9IGZ1bmN0aW9uIChudW1iZXIsIGFic2VsZW0pIHtcblx0dmFyIG1lYXN1cmVOdW1EaW0gPSB0aGlzLmdldFRleHRTaXplLmNhbGMobnVtYmVyLCBcIm1lYXN1cmVmb250XCIsICdiYXItbnVtYmVyJyk7XG5cdHZhciBkeCA9IDA7XG5cdGlmIChhYnNlbGVtLmlzQ2xlZikgLy8gSWYgdGhpcyBpcyBhIGNsZWYgcmF0aGVyIHRoYW4gYmFyIGxpbmUsIHRoZW4gdGhlIG51bWJlciBzaG91bGRuJ3QgYmUgY2VudGVyZWQgYmVjYXVzZSBpdCBjb3VsZCBvdmVybGFwIHRoZSBsZWZ0IHNpZGUuIFRoaXMgaXMgYW4gZWFzeSB3YXkgdG8gbGV0IGl0IGJlIGNlbnRlcmVkIGJ1dCBtb3ZlIGl0IG92ZXIsIHRvby5cblx0XHRkeCArPSBtZWFzdXJlTnVtRGltLndpZHRoIC8gMlxuXHQvLyBNQUUgMSBPY3QgMjAyNCAtIENoYW5nZSAxMyB0byAxMy41IHNpbmNlIHByZXZpb3VzbHkgYmFyIG51bWJlcnMgd2VyZSB2ZXJ5IHNsaWdodGx5IG92ZXJsYXBwaW5nIHRoZSB0b3Agb2YgdGhlIGNsZWZcblx0dmFyIHZlcnQgPSBtZWFzdXJlTnVtRGltLndpZHRoID4gMTAgJiYgYWJzZWxlbS5hYmNlbGVtLnR5cGUgPT09IFwidHJlYmxlXCIgPyAxMy41IDogMTFcblx0YWJzZWxlbS5hZGRGaXhlZChuZXcgUmVsYXRpdmVFbGVtZW50KG51bWJlciwgZHgsIG1lYXN1cmVOdW1EaW0ud2lkdGgsIHZlcnQgKyBtZWFzdXJlTnVtRGltLmhlaWdodCAvIHNwYWNpbmcuU1RFUCwgeyB0eXBlOiBcImJhck51bWJlclwiLCBkaW06IHRoaXMuZ2V0VGV4dFNpemUuYXR0cihcIm1lYXN1cmVmb250XCIsICdiYXItbnVtYmVyJykgfSkpO1xufTtcblxuQWJzdHJhY3RFbmdyYXZlci5wcm90b3R5cGUuY3JlYXRlQmFyTGluZSA9IGZ1bmN0aW9uICh2b2ljZSwgZWxlbSwgaXNGaXJzdFN0YWZmKSB7XG5cdC8vIGJhcl90aGluLCBiYXJfdGhpbl90aGljaywgYmFyX3RoaW5fdGhpbiwgYmFyX3RoaWNrX3RoaW4sIGJhcl9yaWdodF9yZXBlYXQsIGJhcl9sZWZ0X3JlcGVhdCwgYmFyX2RvdWJsZV9yZXBlYXRcblxuXHR2YXIgYWJzZWxlbSA9IG5ldyBBYnNvbHV0ZUVsZW1lbnQoZWxlbSwgMCwgMTAsICdiYXInLCB0aGlzLnR1bmVOdW1iZXIpO1xuXHR2YXIgYW5jaG9yID0gbnVsbDsgLy8gcGxhY2UgdG8gYXR0YWNoIHBhcnQgbGluZXNcblx0dmFyIGR4ID0gMDtcblxuXHRpZiAoZWxlbS5iYXJOdW1iZXIpIHtcblx0XHR0aGlzLmFkZE1lYXN1cmVOdW1iZXIoZWxlbS5iYXJOdW1iZXIsIGFic2VsZW0pO1xuXHR9XG5cblxuXHR2YXIgZmlyc3Rkb3RzID0gKGVsZW0udHlwZSA9PT0gXCJiYXJfcmlnaHRfcmVwZWF0XCIgfHwgZWxlbS50eXBlID09PSBcImJhcl9kYmxfcmVwZWF0XCIpO1xuXHR2YXIgZmlyc3R0aGluID0gKGVsZW0udHlwZSAhPT0gXCJiYXJfbGVmdF9yZXBlYXRcIiAmJiBlbGVtLnR5cGUgIT09IFwiYmFyX3RoaWNrX3RoaW5cIiAmJiBlbGVtLnR5cGUgIT09IFwiYmFyX2ludmlzaWJsZVwiKTtcblx0dmFyIHRoaWNrID0gKGVsZW0udHlwZSA9PT0gXCJiYXJfcmlnaHRfcmVwZWF0XCIgfHwgZWxlbS50eXBlID09PSBcImJhcl9kYmxfcmVwZWF0XCIgfHwgZWxlbS50eXBlID09PSBcImJhcl9sZWZ0X3JlcGVhdFwiIHx8XG5cdFx0ZWxlbS50eXBlID09PSBcImJhcl90aGluX3RoaWNrXCIgfHwgZWxlbS50eXBlID09PSBcImJhcl90aGlja190aGluXCIpO1xuXHR2YXIgc2Vjb25kdGhpbiA9IChlbGVtLnR5cGUgPT09IFwiYmFyX2xlZnRfcmVwZWF0XCIgfHwgZWxlbS50eXBlID09PSBcImJhcl90aGlja190aGluXCIgfHwgZWxlbS50eXBlID09PSBcImJhcl90aGluX3RoaW5cIiB8fCBlbGVtLnR5cGUgPT09IFwiYmFyX2RibF9yZXBlYXRcIik7XG5cdHZhciBzZWNvbmRkb3RzID0gKGVsZW0udHlwZSA9PT0gXCJiYXJfbGVmdF9yZXBlYXRcIiB8fCBlbGVtLnR5cGUgPT09IFwiYmFyX2RibF9yZXBlYXRcIik7XG5cblx0Ly8gbGltaXQgcG9zaXRpb25pbmcgb2Ygc2x1cnNcblx0aWYgKGZpcnN0ZG90cyB8fCBzZWNvbmRkb3RzKSB7XG5cdFx0Zm9yICh2YXIgc2x1ciBpbiB0aGlzLnNsdXJzKSB7XG5cdFx0XHRpZiAodGhpcy5zbHVycy5oYXNPd25Qcm9wZXJ0eShzbHVyKSkge1xuXHRcdFx0XHR0aGlzLnNsdXJzW3NsdXJdLnNldEVuZFgoYWJzZWxlbSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRoaXMuc3RhcnRsaW1pdGVsZW0gPSBhYnNlbGVtO1xuXHR9XG5cblx0aWYgKGZpcnN0ZG90cykge1xuXHRcdGFic2VsZW0uYWRkUmlnaHQobmV3IFJlbGF0aXZlRWxlbWVudChcImRvdHMuZG90XCIsIGR4LCAxLCA3KSk7XG5cdFx0YWJzZWxlbS5hZGRSaWdodChuZXcgUmVsYXRpdmVFbGVtZW50KFwiZG90cy5kb3RcIiwgZHgsIDEsIDUpKTtcblx0XHRkeCArPSA2OyAvLzIgaGFyZGNvZGVkLCB0d2ljZTtcblx0fVxuXG5cdGlmIChmaXJzdHRoaW4pIHtcblx0XHRhbmNob3IgPSBuZXcgUmVsYXRpdmVFbGVtZW50KG51bGwsIGR4LCAxLCAyLCB7IFwidHlwZVwiOiBcImJhclwiLCBcInBpdGNoMlwiOiAxMCwgbGluZXdpZHRoOiAwLjYgfSk7XG5cdFx0YWJzZWxlbS5hZGRSaWdodChhbmNob3IpO1xuXHR9XG5cblx0aWYgKGVsZW0udHlwZSA9PT0gXCJiYXJfaW52aXNpYmxlXCIpIHtcblx0XHRhbmNob3IgPSBuZXcgUmVsYXRpdmVFbGVtZW50KG51bGwsIGR4LCAxLCAyLCB7IFwidHlwZVwiOiBcIm5vbmVcIiwgXCJwaXRjaDJcIjogMTAsIGxpbmV3aWR0aDogMC42IH0pO1xuXHRcdGFic2VsZW0uYWRkUmlnaHQoYW5jaG9yKTtcblx0fVxuXG5cdGlmIChlbGVtLmRlY29yYXRpb24pIHtcblx0XHR0aGlzLmRlY29yYXRpb24uY3JlYXRlRGVjb3JhdGlvbih2b2ljZSwgZWxlbS5kZWNvcmF0aW9uLCAxMiwgKHRoaWNrKSA/IDMgOiAxLCBhYnNlbGVtLCAwLCBcImRvd25cIiwgMiwgZWxlbS5wb3NpdGlvbmluZywgdGhpcy5oYXNWb2NhbHMsIHRoaXMuYWNjZW50QWJvdmUpO1xuXHR9XG5cblx0aWYgKHRoaWNrKSB7XG5cdFx0ZHggKz0gNDsgLy8zIGhhcmRjb2RlZDtcblx0XHRhbmNob3IgPSBuZXcgUmVsYXRpdmVFbGVtZW50KG51bGwsIGR4LCA0LCAyLCB7IFwidHlwZVwiOiBcImJhclwiLCBcInBpdGNoMlwiOiAxMCwgbGluZXdpZHRoOiA0IH0pO1xuXHRcdGFic2VsZW0uYWRkUmlnaHQoYW5jaG9yKTtcblx0XHRkeCArPSA1O1xuXHR9XG5cblx0Ly8gaWYgKHRoaXMucGFydHN0YXJ0ZWxlbSAmJiAodGhpY2sgfHwgKGZpcnN0dGhpbiAmJiBzZWNvbmR0aGluKSkpIHsgLy8gbWVhbnMgZW5kIG9mIG50aCBwYXJ0XG5cdC8vIHRoaXMucGFydHN0YXJ0ZWxlbS5hbmNob3IyPWFuY2hvcjtcblx0Ly8gdGhpcy5wYXJ0c3RhcnRlbGVtID0gbnVsbDtcblx0Ly8gfVxuXG5cdGlmICh0aGlzLnBhcnRzdGFydGVsZW0gJiYgZWxlbS5lbmRFbmRpbmcpIHtcblx0XHR0aGlzLnBhcnRzdGFydGVsZW0uYW5jaG9yMiA9IGFuY2hvcjtcblx0XHR0aGlzLnBhcnRzdGFydGVsZW0gPSBudWxsO1xuXHR9XG5cblx0aWYgKHNlY29uZHRoaW4pIHtcblx0XHRkeCArPSAzOyAvLzMgaGFyZGNvZGVkO1xuXHRcdGFuY2hvciA9IG5ldyBSZWxhdGl2ZUVsZW1lbnQobnVsbCwgZHgsIDEsIDIsIHsgXCJ0eXBlXCI6IFwiYmFyXCIsIFwicGl0Y2gyXCI6IDEwLCBsaW5ld2lkdGg6IDAuNiB9KTtcblx0XHRhYnNlbGVtLmFkZFJpZ2h0KGFuY2hvcik7IC8vIDMgaXMgaGFyZGNvZGVkXG5cdH1cblxuXHRpZiAoc2Vjb25kZG90cykge1xuXHRcdGR4ICs9IDM7IC8vMyBoYXJkY29kZWQ7XG5cdFx0YWJzZWxlbS5hZGRSaWdodChuZXcgUmVsYXRpdmVFbGVtZW50KFwiZG90cy5kb3RcIiwgZHgsIDEsIDcpKTtcblx0XHRhYnNlbGVtLmFkZFJpZ2h0KG5ldyBSZWxhdGl2ZUVsZW1lbnQoXCJkb3RzLmRvdFwiLCBkeCwgMSwgNSkpO1xuXHR9IC8vIDIgaXMgaGFyZGNvZGVkXG5cblx0aWYgKGVsZW0uc3RhcnRFbmRpbmcgJiYgaXNGaXJzdFN0YWZmKSB7XG5cdFx0Ly8gTUFFIDE3IE1heSAyMDI1IC0gRml4ZXMgZHJhd2luZyBpc3N1ZVxuXHRcdGlmICh2b2ljZS52b2ljZW51bWJlciA9PT0gMCl7XG5cdFx0XHQvLyBvbmx5IHB1dCB0aGUgZmlyc3QgJiBzZWNvbmQgZW5kaW5nIG1hcmtzIG9uIHRoZSBmaXJzdCBzdGFmZlxuXHRcdFx0dmFyIHRleHRXaWR0aCA9IHRoaXMuZ2V0VGV4dFNpemUuY2FsYyhlbGVtLnN0YXJ0RW5kaW5nLCBcInJlcGVhdGZvbnRcIiwgJycpLndpZHRoO1xuXHRcdFx0YWJzZWxlbS5taW5zcGFjaW5nICs9IHRleHRXaWR0aCArIDEwOyAvLyBHaXZlIHBsZW50eSBvZiByb29tIGZvciB0aGUgZW5kaW5nIG51bWJlci5cblx0XHRcdHRoaXMucGFydHN0YXJ0ZWxlbSA9IG5ldyBFbmRpbmdFbGVtKGVsZW0uc3RhcnRFbmRpbmcsIGFuY2hvciwgbnVsbCk7XG5cdFx0XHR2b2ljZS5hZGRPdGhlcih0aGlzLnBhcnRzdGFydGVsZW0pO1xuXHRcdH1cblx0fVxuXHQvLyBBZGQgYSBsaXR0bGUgc3BhY2UgdG8gdGhlIGxlZnQgb2YgdGhlIGJhciBsaW5lIHNvIHRoYXQgbm90aGluZyBjYW4gY3Jvd2QgaXQuXG5cdGFic2VsZW0uZXh0cmF3IC09IDU7XG5cblx0aWYgKGVsZW0uY2hvcmQgIT09IHVuZGVmaW5lZCkge1xuXHRcdHZhciByZXQzID0gYWRkQ2hvcmQodGhpcy5nZXRUZXh0U2l6ZSwgYWJzZWxlbSwgZWxlbSwgMCwgMCwgMCwgZmFsc2UsIHRoaXMuZ2VybWFuQWxwaGFiZXQpO1xuXHR9XG5cblx0cmV0dXJuIGFic2VsZW07XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQWJzdHJhY3RFbmdyYXZlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/abstract-engraver.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/add-chord.js":
/*!************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/add-chord.js ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var RelativeElement = __webpack_require__(/*! ./elements/relative-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/relative-element.js\");\nvar spacing = __webpack_require__(/*! ../helpers/spacing */ \"(ssr)/./node_modules/abcjs/src/write/helpers/spacing.js\");\nconst translateChord = __webpack_require__(/*! ./translate-chord */ \"(ssr)/./node_modules/abcjs/src/write/creation/translate-chord.js\");\n\nvar addChord = function (getTextSize, abselem, elem, roomTaken, roomTakenRight, noteheadWidth, jazzchords, germanAlphabet) {\n\tfor (var i = 0; i < elem.chord.length; i++) {\n\t\tvar pos = elem.chord[i].position;\n\t\tvar rel_position = elem.chord[i].rel_position;\n\t\tvar isAnnotation = pos === \"left\" || pos === \"right\" || pos === \"below\" || pos === \"above\" || !!rel_position\n\t\tvar font;\n\t\tvar klass;\n\t\tif (isAnnotation) {\n\t\t\tfont = 'annotationfont';\n\t\t\tklass = \"abcjs-annotation\";\n\t\t} else {\n\t\t\tfont = 'gchordfont';\n\t\t\tklass = \"abcjs-chord\";\n\t\t}\n\t\tvar attr = getTextSize.attr(font, klass);\n\n\t\tvar name = elem.chord[i].name\n\t\tvar ret;\n\t\t//console.log(\"chord\",name)\n\t\tif (typeof name === \"string\") {\n\t\t\tret = chordString(name, pos, rel_position, isAnnotation, font, klass, attr, getTextSize, abselem, elem, roomTaken, roomTakenRight, noteheadWidth, jazzchords, germanAlphabet)\n\t\t\troomTaken = ret.roomTaken\n\t\t\troomTakenRight = ret.roomTakenRight\n\t\t} else {\n\t\t\tfor (var j = 0; j < name.length; j++) {\n\t\t\t\tret = chordString(name[j].text, pos, rel_position, isAnnotation, font, klass, attr, getTextSize, abselem, elem, roomTaken, roomTakenRight, noteheadWidth, jazzchords, germanAlphabet)\n\t\t\t\troomTaken = ret.roomTaken\n\t\t\t\troomTakenRight = ret.roomTakenRight\n\t\t\t}\n\t\t}\n\t}\n\treturn { roomTaken: roomTaken, roomTakenRight: roomTakenRight };\n};\n\nfunction chordString(chordString, pos, rel_position, isAnnotation, font, klass, attr, getTextSize, abselem, elem, roomTaken, roomTakenRight, noteheadWidth, jazzchords, germanAlphabet) {\n\tvar chords = chordString.split(\"\\n\");\n\tfor (var j = chords.length - 1; j >= 0; j--) { // parse these in opposite order because we place them from bottom to top.\n\t\tvar chord = chords[j];\n\t\tvar x = 0;\n\t\tvar y;\n\t\tif (!isAnnotation)\n\t\t\tchord = translateChord(chord, jazzchords, germanAlphabet);\n\t\tvar dim = getTextSize.calc(chord, font, klass);\n\t\tvar chordWidth = dim.width;\n\t\tvar chordHeight = dim.height / spacing.STEP;\n\t\tswitch (pos) {\n\t\t\tcase \"left\":\n\t\t\t\troomTaken += chordWidth + 7;\n\t\t\t\tx = -roomTaken;        // TODO-PER: This is just a guess from trial and error\n\t\t\t\ty = elem.averagepitch;\n\t\t\t\tabselem.addExtra(new RelativeElement(chord, x, chordWidth + 4, y, {\n\t\t\t\t\ttype: \"text\",\n\t\t\t\t\theight: chordHeight,\n\t\t\t\t\tdim: attr,\n\t\t\t\t\tposition: \"left\"\n\t\t\t\t}));\n\t\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\troomTakenRight += 4;\n\t\t\t\tx = roomTakenRight;// TODO-PER: This is just a guess from trial and error\n\t\t\t\ty = elem.averagepitch;\n\t\t\t\tabselem.addRight(new RelativeElement(chord, x, chordWidth + 4, y, {\n\t\t\t\t\ttype: \"text\",\n\t\t\t\t\theight: chordHeight,\n\t\t\t\t\tdim: attr,\n\t\t\t\t\tposition: \"right\"\n\t\t\t\t}));\n\t\t\t\tbreak;\n\t\t\tcase \"below\":\n\t\t\t\t// setting the y-coordinate to undefined for now: it will be overwritten later on, after we figure out what the highest element on the line is.\n\t\t\t\tabselem.addRight(new RelativeElement(chord, 0, 0, undefined, {\n\t\t\t\t\ttype: \"text\",\n\t\t\t\t\tposition: \"below\",\n\t\t\t\t\theight: chordHeight,\n\t\t\t\t\tdim: attr,\n\t\t\t\t\trealWidth: chordWidth\n\t\t\t\t}));\n\t\t\t\tbreak;\n\t\t\tcase \"above\":\n\t\t\t\t// setting the y-coordinate to undefined for now: it will be overwritten later on, after we figure out what the highest element on the line is.\n\t\t\t\tabselem.addRight(new RelativeElement(chord, 0, 0, undefined, {\n\t\t\t\t\ttype: \"text\",\n\t\t\t\t\tposition: \"above\",\n\t\t\t\t\theight: chordHeight,\n\t\t\t\t\tdim: attr,\n\t\t\t\t\trealWidth: chordWidth\n\t\t\t\t}));\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif (rel_position) {\n\t\t\t\t\tvar relPositionY = rel_position.y + 3 * spacing.STEP; // TODO-PER: this is a fudge factor to make it line up with abcm2ps\n\t\t\t\t\tabselem.addRight(new RelativeElement(chord, x + rel_position.x, 0, elem.minpitch + relPositionY / spacing.STEP, {\n\t\t\t\t\t\tposition: \"relative\",\n\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\theight: chordHeight,\n\t\t\t\t\t\tdim: attr\n\t\t\t\t\t}));\n\t\t\t\t} else {\n\t\t\t\t\t// setting the y-coordinate to undefined for now: it will be overwritten later on, after we figure out what the highest element on the line is.\n\t\t\t\t\tvar pos2 = 'above';\n\t\t\t\t\tif (elem.positioning && elem.positioning.chordPosition)\n\t\t\t\t\t\tpos2 = elem.positioning.chordPosition;\n\n\t\t\t\t\tif (pos2 !== 'hidden') {\n\t\t\t\t\t\tabselem.addCentered(new RelativeElement(chord, noteheadWidth / 2, chordWidth, undefined, {\n\t\t\t\t\t\t\ttype: \"chord\",\n\t\t\t\t\t\t\tposition: pos2,\n\t\t\t\t\t\t\theight: chordHeight,\n\t\t\t\t\t\t\tdim: attr,\n\t\t\t\t\t\t\trealWidth: chordWidth\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\t}\n\treturn { roomTaken: roomTaken, roomTakenRight: roomTakenRight };\n}\nmodule.exports = addChord;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2FkZC1jaG9yZC5qcyIsIm1hcHBpbmdzIjoiQUFBQSxzQkFBc0IsbUJBQU8sQ0FBQywrR0FBNkI7QUFDM0QsY0FBYyxtQkFBTyxDQUFDLG1GQUFvQjtBQUMxQyx1QkFBdUIsbUJBQU8sQ0FBQywyRkFBbUI7O0FBRWxEO0FBQ0EsaUJBQWlCLHVCQUF1QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLG1CQUFtQixpQkFBaUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWOztBQUVBO0FBQ0E7QUFDQSxpQ0FBaUMsUUFBUSxPQUFPO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9jcmVhdGlvbi9hZGQtY2hvcmQuanM/NjBkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUmVsYXRpdmVFbGVtZW50ID0gcmVxdWlyZSgnLi9lbGVtZW50cy9yZWxhdGl2ZS1lbGVtZW50Jyk7XG52YXIgc3BhY2luZyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvc3BhY2luZycpO1xuY29uc3QgdHJhbnNsYXRlQ2hvcmQgPSByZXF1aXJlKFwiLi90cmFuc2xhdGUtY2hvcmRcIik7XG5cbnZhciBhZGRDaG9yZCA9IGZ1bmN0aW9uIChnZXRUZXh0U2l6ZSwgYWJzZWxlbSwgZWxlbSwgcm9vbVRha2VuLCByb29tVGFrZW5SaWdodCwgbm90ZWhlYWRXaWR0aCwgamF6emNob3JkcywgZ2VybWFuQWxwaGFiZXQpIHtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtLmNob3JkLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIHBvcyA9IGVsZW0uY2hvcmRbaV0ucG9zaXRpb247XG5cdFx0dmFyIHJlbF9wb3NpdGlvbiA9IGVsZW0uY2hvcmRbaV0ucmVsX3Bvc2l0aW9uO1xuXHRcdHZhciBpc0Fubm90YXRpb24gPSBwb3MgPT09IFwibGVmdFwiIHx8IHBvcyA9PT0gXCJyaWdodFwiIHx8IHBvcyA9PT0gXCJiZWxvd1wiIHx8IHBvcyA9PT0gXCJhYm92ZVwiIHx8ICEhcmVsX3Bvc2l0aW9uXG5cdFx0dmFyIGZvbnQ7XG5cdFx0dmFyIGtsYXNzO1xuXHRcdGlmIChpc0Fubm90YXRpb24pIHtcblx0XHRcdGZvbnQgPSAnYW5ub3RhdGlvbmZvbnQnO1xuXHRcdFx0a2xhc3MgPSBcImFiY2pzLWFubm90YXRpb25cIjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm9udCA9ICdnY2hvcmRmb250Jztcblx0XHRcdGtsYXNzID0gXCJhYmNqcy1jaG9yZFwiO1xuXHRcdH1cblx0XHR2YXIgYXR0ciA9IGdldFRleHRTaXplLmF0dHIoZm9udCwga2xhc3MpO1xuXG5cdFx0dmFyIG5hbWUgPSBlbGVtLmNob3JkW2ldLm5hbWVcblx0XHR2YXIgcmV0O1xuXHRcdC8vY29uc29sZS5sb2coXCJjaG9yZFwiLG5hbWUpXG5cdFx0aWYgKHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRyZXQgPSBjaG9yZFN0cmluZyhuYW1lLCBwb3MsIHJlbF9wb3NpdGlvbiwgaXNBbm5vdGF0aW9uLCBmb250LCBrbGFzcywgYXR0ciwgZ2V0VGV4dFNpemUsIGFic2VsZW0sIGVsZW0sIHJvb21UYWtlbiwgcm9vbVRha2VuUmlnaHQsIG5vdGVoZWFkV2lkdGgsIGphenpjaG9yZHMsIGdlcm1hbkFscGhhYmV0KVxuXHRcdFx0cm9vbVRha2VuID0gcmV0LnJvb21UYWtlblxuXHRcdFx0cm9vbVRha2VuUmlnaHQgPSByZXQucm9vbVRha2VuUmlnaHRcblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBuYW1lLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHJldCA9IGNob3JkU3RyaW5nKG5hbWVbal0udGV4dCwgcG9zLCByZWxfcG9zaXRpb24sIGlzQW5ub3RhdGlvbiwgZm9udCwga2xhc3MsIGF0dHIsIGdldFRleHRTaXplLCBhYnNlbGVtLCBlbGVtLCByb29tVGFrZW4sIHJvb21UYWtlblJpZ2h0LCBub3RlaGVhZFdpZHRoLCBqYXp6Y2hvcmRzLCBnZXJtYW5BbHBoYWJldClcblx0XHRcdFx0cm9vbVRha2VuID0gcmV0LnJvb21UYWtlblxuXHRcdFx0XHRyb29tVGFrZW5SaWdodCA9IHJldC5yb29tVGFrZW5SaWdodFxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4geyByb29tVGFrZW46IHJvb21UYWtlbiwgcm9vbVRha2VuUmlnaHQ6IHJvb21UYWtlblJpZ2h0IH07XG59O1xuXG5mdW5jdGlvbiBjaG9yZFN0cmluZyhjaG9yZFN0cmluZywgcG9zLCByZWxfcG9zaXRpb24sIGlzQW5ub3RhdGlvbiwgZm9udCwga2xhc3MsIGF0dHIsIGdldFRleHRTaXplLCBhYnNlbGVtLCBlbGVtLCByb29tVGFrZW4sIHJvb21UYWtlblJpZ2h0LCBub3RlaGVhZFdpZHRoLCBqYXp6Y2hvcmRzLCBnZXJtYW5BbHBoYWJldCkge1xuXHR2YXIgY2hvcmRzID0gY2hvcmRTdHJpbmcuc3BsaXQoXCJcXG5cIik7XG5cdGZvciAodmFyIGogPSBjaG9yZHMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHsgLy8gcGFyc2UgdGhlc2UgaW4gb3Bwb3NpdGUgb3JkZXIgYmVjYXVzZSB3ZSBwbGFjZSB0aGVtIGZyb20gYm90dG9tIHRvIHRvcC5cblx0XHR2YXIgY2hvcmQgPSBjaG9yZHNbal07XG5cdFx0dmFyIHggPSAwO1xuXHRcdHZhciB5O1xuXHRcdGlmICghaXNBbm5vdGF0aW9uKVxuXHRcdFx0Y2hvcmQgPSB0cmFuc2xhdGVDaG9yZChjaG9yZCwgamF6emNob3JkcywgZ2VybWFuQWxwaGFiZXQpO1xuXHRcdHZhciBkaW0gPSBnZXRUZXh0U2l6ZS5jYWxjKGNob3JkLCBmb250LCBrbGFzcyk7XG5cdFx0dmFyIGNob3JkV2lkdGggPSBkaW0ud2lkdGg7XG5cdFx0dmFyIGNob3JkSGVpZ2h0ID0gZGltLmhlaWdodCAvIHNwYWNpbmcuU1RFUDtcblx0XHRzd2l0Y2ggKHBvcykge1xuXHRcdFx0Y2FzZSBcImxlZnRcIjpcblx0XHRcdFx0cm9vbVRha2VuICs9IGNob3JkV2lkdGggKyA3O1xuXHRcdFx0XHR4ID0gLXJvb21UYWtlbjsgICAgICAgIC8vIFRPRE8tUEVSOiBUaGlzIGlzIGp1c3QgYSBndWVzcyBmcm9tIHRyaWFsIGFuZCBlcnJvclxuXHRcdFx0XHR5ID0gZWxlbS5hdmVyYWdlcGl0Y2g7XG5cdFx0XHRcdGFic2VsZW0uYWRkRXh0cmEobmV3IFJlbGF0aXZlRWxlbWVudChjaG9yZCwgeCwgY2hvcmRXaWR0aCArIDQsIHksIHtcblx0XHRcdFx0XHR0eXBlOiBcInRleHRcIixcblx0XHRcdFx0XHRoZWlnaHQ6IGNob3JkSGVpZ2h0LFxuXHRcdFx0XHRcdGRpbTogYXR0cixcblx0XHRcdFx0XHRwb3NpdGlvbjogXCJsZWZ0XCJcblx0XHRcdFx0fSkpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJyaWdodFwiOlxuXHRcdFx0XHRyb29tVGFrZW5SaWdodCArPSA0O1xuXHRcdFx0XHR4ID0gcm9vbVRha2VuUmlnaHQ7Ly8gVE9ETy1QRVI6IFRoaXMgaXMganVzdCBhIGd1ZXNzIGZyb20gdHJpYWwgYW5kIGVycm9yXG5cdFx0XHRcdHkgPSBlbGVtLmF2ZXJhZ2VwaXRjaDtcblx0XHRcdFx0YWJzZWxlbS5hZGRSaWdodChuZXcgUmVsYXRpdmVFbGVtZW50KGNob3JkLCB4LCBjaG9yZFdpZHRoICsgNCwgeSwge1xuXHRcdFx0XHRcdHR5cGU6IFwidGV4dFwiLFxuXHRcdFx0XHRcdGhlaWdodDogY2hvcmRIZWlnaHQsXG5cdFx0XHRcdFx0ZGltOiBhdHRyLFxuXHRcdFx0XHRcdHBvc2l0aW9uOiBcInJpZ2h0XCJcblx0XHRcdFx0fSkpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJiZWxvd1wiOlxuXHRcdFx0XHQvLyBzZXR0aW5nIHRoZSB5LWNvb3JkaW5hdGUgdG8gdW5kZWZpbmVkIGZvciBub3c6IGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gbGF0ZXIgb24sIGFmdGVyIHdlIGZpZ3VyZSBvdXQgd2hhdCB0aGUgaGlnaGVzdCBlbGVtZW50IG9uIHRoZSBsaW5lIGlzLlxuXHRcdFx0XHRhYnNlbGVtLmFkZFJpZ2h0KG5ldyBSZWxhdGl2ZUVsZW1lbnQoY2hvcmQsIDAsIDAsIHVuZGVmaW5lZCwge1xuXHRcdFx0XHRcdHR5cGU6IFwidGV4dFwiLFxuXHRcdFx0XHRcdHBvc2l0aW9uOiBcImJlbG93XCIsXG5cdFx0XHRcdFx0aGVpZ2h0OiBjaG9yZEhlaWdodCxcblx0XHRcdFx0XHRkaW06IGF0dHIsXG5cdFx0XHRcdFx0cmVhbFdpZHRoOiBjaG9yZFdpZHRoXG5cdFx0XHRcdH0pKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiYWJvdmVcIjpcblx0XHRcdFx0Ly8gc2V0dGluZyB0aGUgeS1jb29yZGluYXRlIHRvIHVuZGVmaW5lZCBmb3Igbm93OiBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIGxhdGVyIG9uLCBhZnRlciB3ZSBmaWd1cmUgb3V0IHdoYXQgdGhlIGhpZ2hlc3QgZWxlbWVudCBvbiB0aGUgbGluZSBpcy5cblx0XHRcdFx0YWJzZWxlbS5hZGRSaWdodChuZXcgUmVsYXRpdmVFbGVtZW50KGNob3JkLCAwLCAwLCB1bmRlZmluZWQsIHtcblx0XHRcdFx0XHR0eXBlOiBcInRleHRcIixcblx0XHRcdFx0XHRwb3NpdGlvbjogXCJhYm92ZVwiLFxuXHRcdFx0XHRcdGhlaWdodDogY2hvcmRIZWlnaHQsXG5cdFx0XHRcdFx0ZGltOiBhdHRyLFxuXHRcdFx0XHRcdHJlYWxXaWR0aDogY2hvcmRXaWR0aFxuXHRcdFx0XHR9KSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0aWYgKHJlbF9wb3NpdGlvbikge1xuXHRcdFx0XHRcdHZhciByZWxQb3NpdGlvblkgPSByZWxfcG9zaXRpb24ueSArIDMgKiBzcGFjaW5nLlNURVA7IC8vIFRPRE8tUEVSOiB0aGlzIGlzIGEgZnVkZ2UgZmFjdG9yIHRvIG1ha2UgaXQgbGluZSB1cCB3aXRoIGFiY20ycHNcblx0XHRcdFx0XHRhYnNlbGVtLmFkZFJpZ2h0KG5ldyBSZWxhdGl2ZUVsZW1lbnQoY2hvcmQsIHggKyByZWxfcG9zaXRpb24ueCwgMCwgZWxlbS5taW5waXRjaCArIHJlbFBvc2l0aW9uWSAvIHNwYWNpbmcuU1RFUCwge1xuXHRcdFx0XHRcdFx0cG9zaXRpb246IFwicmVsYXRpdmVcIixcblx0XHRcdFx0XHRcdHR5cGU6IFwidGV4dFwiLFxuXHRcdFx0XHRcdFx0aGVpZ2h0OiBjaG9yZEhlaWdodCxcblx0XHRcdFx0XHRcdGRpbTogYXR0clxuXHRcdFx0XHRcdH0pKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBzZXR0aW5nIHRoZSB5LWNvb3JkaW5hdGUgdG8gdW5kZWZpbmVkIGZvciBub3c6IGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gbGF0ZXIgb24sIGFmdGVyIHdlIGZpZ3VyZSBvdXQgd2hhdCB0aGUgaGlnaGVzdCBlbGVtZW50IG9uIHRoZSBsaW5lIGlzLlxuXHRcdFx0XHRcdHZhciBwb3MyID0gJ2Fib3ZlJztcblx0XHRcdFx0XHRpZiAoZWxlbS5wb3NpdGlvbmluZyAmJiBlbGVtLnBvc2l0aW9uaW5nLmNob3JkUG9zaXRpb24pXG5cdFx0XHRcdFx0XHRwb3MyID0gZWxlbS5wb3NpdGlvbmluZy5jaG9yZFBvc2l0aW9uO1xuXG5cdFx0XHRcdFx0aWYgKHBvczIgIT09ICdoaWRkZW4nKSB7XG5cdFx0XHRcdFx0XHRhYnNlbGVtLmFkZENlbnRlcmVkKG5ldyBSZWxhdGl2ZUVsZW1lbnQoY2hvcmQsIG5vdGVoZWFkV2lkdGggLyAyLCBjaG9yZFdpZHRoLCB1bmRlZmluZWQsIHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJjaG9yZFwiLFxuXHRcdFx0XHRcdFx0XHRwb3NpdGlvbjogcG9zMixcblx0XHRcdFx0XHRcdFx0aGVpZ2h0OiBjaG9yZEhlaWdodCxcblx0XHRcdFx0XHRcdFx0ZGltOiBhdHRyLFxuXHRcdFx0XHRcdFx0XHRyZWFsV2lkdGg6IGNob3JkV2lkdGhcblx0XHRcdFx0XHRcdH0pKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIHsgcm9vbVRha2VuOiByb29tVGFrZW4sIHJvb21UYWtlblJpZ2h0OiByb29tVGFrZW5SaWdodCB9O1xufVxubW9kdWxlLmV4cG9ydHMgPSBhZGRDaG9yZDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/add-chord.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/add-text-if.js":
/*!**************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/add-text-if.js ***!
  \**************************************************************/
/***/ ((module) => {

eval("function addTextIf(rows, params, getTextSize) {\n\tif (!params.text)\n\t\treturn;\n\tif (!params.marginLeft) params.marginLeft = 0;\n\tif (!params.klass) params.klass = '';\n\tif (!params.anchor) params.anchor = 'start';\n\tif (!params.info) params.info = { startChar: -2, endChar: -2 }\n\n\tif (params.marginTop)\n\t\trows.push({ move: params.marginTop });\n\tvar attr = { left: params.marginLeft, text: params.text, font: params.font, anchor: params.anchor, startChar: params.info.startChar, endChar: params.info.endChar, 'dominant-baseline': params['dominant-baseline'] };\n\tif (params.absElemType)\n\t\tattr.absElemType = params.absElemType;\n\tif (!params.inGroup && params.klass)\n\t\tattr.klass = params.klass;\n\tif (params.name)\n\t\tattr.name = params.name;\n\n\trows.push(attr);\n\t// If there are blank lines they won't be counted by getTextSize, so just get the height of one line and multiply\n\tvar size = getTextSize.calc(\"A\", params.font, params.klass);\n\tvar numLines = params.text.split(\"\\n\").length;\n\tif (params.text[params.text.length - 1] === '\\n')\n\t\tnumLines--; // If there is a new line at the end of the string, then an extra line will be counted.\n\tif (!params.noMove) {\n\t\tvar h = (size.height * 1.1) * numLines;\n\t\trows.push({ move: Math.round(h) });\n\t\tif (params.marginBottom)\n\t\t\trows.push({ move: params.marginBottom });\n\t}\n}\n\nmodule.exports = addTextIf;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2FkZC10ZXh0LWlmLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQzs7QUFFbkM7QUFDQSxjQUFjLHdCQUF3QjtBQUN0QyxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLGNBQWMscUJBQXFCO0FBQ25DO0FBQ0EsZUFBZSwyQkFBMkI7QUFDMUM7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9jcmVhdGlvbi9hZGQtdGV4dC1pZi5qcz8xMjEzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGFkZFRleHRJZihyb3dzLCBwYXJhbXMsIGdldFRleHRTaXplKSB7XG5cdGlmICghcGFyYW1zLnRleHQpXG5cdFx0cmV0dXJuO1xuXHRpZiAoIXBhcmFtcy5tYXJnaW5MZWZ0KSBwYXJhbXMubWFyZ2luTGVmdCA9IDA7XG5cdGlmICghcGFyYW1zLmtsYXNzKSBwYXJhbXMua2xhc3MgPSAnJztcblx0aWYgKCFwYXJhbXMuYW5jaG9yKSBwYXJhbXMuYW5jaG9yID0gJ3N0YXJ0Jztcblx0aWYgKCFwYXJhbXMuaW5mbykgcGFyYW1zLmluZm8gPSB7IHN0YXJ0Q2hhcjogLTIsIGVuZENoYXI6IC0yIH1cblxuXHRpZiAocGFyYW1zLm1hcmdpblRvcClcblx0XHRyb3dzLnB1c2goeyBtb3ZlOiBwYXJhbXMubWFyZ2luVG9wIH0pO1xuXHR2YXIgYXR0ciA9IHsgbGVmdDogcGFyYW1zLm1hcmdpbkxlZnQsIHRleHQ6IHBhcmFtcy50ZXh0LCBmb250OiBwYXJhbXMuZm9udCwgYW5jaG9yOiBwYXJhbXMuYW5jaG9yLCBzdGFydENoYXI6IHBhcmFtcy5pbmZvLnN0YXJ0Q2hhciwgZW5kQ2hhcjogcGFyYW1zLmluZm8uZW5kQ2hhciwgJ2RvbWluYW50LWJhc2VsaW5lJzogcGFyYW1zWydkb21pbmFudC1iYXNlbGluZSddIH07XG5cdGlmIChwYXJhbXMuYWJzRWxlbVR5cGUpXG5cdFx0YXR0ci5hYnNFbGVtVHlwZSA9IHBhcmFtcy5hYnNFbGVtVHlwZTtcblx0aWYgKCFwYXJhbXMuaW5Hcm91cCAmJiBwYXJhbXMua2xhc3MpXG5cdFx0YXR0ci5rbGFzcyA9IHBhcmFtcy5rbGFzcztcblx0aWYgKHBhcmFtcy5uYW1lKVxuXHRcdGF0dHIubmFtZSA9IHBhcmFtcy5uYW1lO1xuXG5cdHJvd3MucHVzaChhdHRyKTtcblx0Ly8gSWYgdGhlcmUgYXJlIGJsYW5rIGxpbmVzIHRoZXkgd29uJ3QgYmUgY291bnRlZCBieSBnZXRUZXh0U2l6ZSwgc28ganVzdCBnZXQgdGhlIGhlaWdodCBvZiBvbmUgbGluZSBhbmQgbXVsdGlwbHlcblx0dmFyIHNpemUgPSBnZXRUZXh0U2l6ZS5jYWxjKFwiQVwiLCBwYXJhbXMuZm9udCwgcGFyYW1zLmtsYXNzKTtcblx0dmFyIG51bUxpbmVzID0gcGFyYW1zLnRleHQuc3BsaXQoXCJcXG5cIikubGVuZ3RoO1xuXHRpZiAocGFyYW1zLnRleHRbcGFyYW1zLnRleHQubGVuZ3RoIC0gMV0gPT09ICdcXG4nKVxuXHRcdG51bUxpbmVzLS07IC8vIElmIHRoZXJlIGlzIGEgbmV3IGxpbmUgYXQgdGhlIGVuZCBvZiB0aGUgc3RyaW5nLCB0aGVuIGFuIGV4dHJhIGxpbmUgd2lsbCBiZSBjb3VudGVkLlxuXHRpZiAoIXBhcmFtcy5ub01vdmUpIHtcblx0XHR2YXIgaCA9IChzaXplLmhlaWdodCAqIDEuMSkgKiBudW1MaW5lcztcblx0XHRyb3dzLnB1c2goeyBtb3ZlOiBNYXRoLnJvdW5kKGgpIH0pO1xuXHRcdGlmIChwYXJhbXMubWFyZ2luQm90dG9tKVxuXHRcdFx0cm93cy5wdXNoKHsgbW92ZTogcGFyYW1zLm1hcmdpbkJvdHRvbSB9KTtcblx0fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFkZFRleHRJZjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/add-text-if.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/calc-height.js":
/*!**************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/calc-height.js ***!
  \**************************************************************/
/***/ ((module) => {

eval("var calcHeight = function (staffGroup) {\n\t// the height is calculated here in a parallel way to the drawing below in hopes that both of these functions will be modified together.\n\t// TODO-PER: also add the space between staves. (That's systemStaffSeparation, which is the minimum distance between the staff LINES.)\n\tvar height = 0;\n\tfor (var i = 0; i < staffGroup.voices.length; i++) {\n\t\tvar staff = staffGroup.voices[i].staff;\n\t\tif (!staffGroup.voices[i].duplicate) {\n\t\t\theight += staff.top;\n\t\t\t//if (staff.bottom < 0)\n\t\t\theight += -staff.bottom;\n\t\t}\n\t}\n\treturn height;\n};\n\nmodule.exports = calcHeight;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2NhbGMtaGVpZ2h0LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDhCQUE4QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvY3JlYXRpb24vY2FsYy1oZWlnaHQuanM/ZTEzMSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgY2FsY0hlaWdodCA9IGZ1bmN0aW9uIChzdGFmZkdyb3VwKSB7XG5cdC8vIHRoZSBoZWlnaHQgaXMgY2FsY3VsYXRlZCBoZXJlIGluIGEgcGFyYWxsZWwgd2F5IHRvIHRoZSBkcmF3aW5nIGJlbG93IGluIGhvcGVzIHRoYXQgYm90aCBvZiB0aGVzZSBmdW5jdGlvbnMgd2lsbCBiZSBtb2RpZmllZCB0b2dldGhlci5cblx0Ly8gVE9ETy1QRVI6IGFsc28gYWRkIHRoZSBzcGFjZSBiZXR3ZWVuIHN0YXZlcy4gKFRoYXQncyBzeXN0ZW1TdGFmZlNlcGFyYXRpb24sIHdoaWNoIGlzIHRoZSBtaW5pbXVtIGRpc3RhbmNlIGJldHdlZW4gdGhlIHN0YWZmIExJTkVTLilcblx0dmFyIGhlaWdodCA9IDA7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc3RhZmZHcm91cC52b2ljZXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgc3RhZmYgPSBzdGFmZkdyb3VwLnZvaWNlc1tpXS5zdGFmZjtcblx0XHRpZiAoIXN0YWZmR3JvdXAudm9pY2VzW2ldLmR1cGxpY2F0ZSkge1xuXHRcdFx0aGVpZ2h0ICs9IHN0YWZmLnRvcDtcblx0XHRcdC8vaWYgKHN0YWZmLmJvdHRvbSA8IDApXG5cdFx0XHRoZWlnaHQgKz0gLXN0YWZmLmJvdHRvbTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGhlaWdodDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY2FsY0hlaWdodDtcblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/calc-height.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/create-clef.js":
/*!**************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/create-clef.js ***!
  \**************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_create_clef.js\n\nvar AbsoluteElement = __webpack_require__(/*! ./elements/absolute-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/absolute-element.js\");\nvar glyphs = __webpack_require__(/*! ./glyphs */ \"(ssr)/./node_modules/abcjs/src/write/creation/glyphs.js\");\nvar RelativeElement = __webpack_require__(/*! ./elements/relative-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/relative-element.js\");\n\nvar createClef = function (elem, tuneNumber) {\n\tvar clef;\n\tvar octave = 0;\n\telem.el_type = \"clef\";\n\tvar abselem = new AbsoluteElement(elem, 0, 10, 'staff-extra clef', tuneNumber);\n\tabselem.isClef = true;\n\tswitch (elem.type) {\n\t\tcase \"treble\": clef = \"clefs.G\"; break;\n\t\tcase \"tenor\": clef = \"clefs.C\"; break;\n\t\tcase \"alto\": clef = \"clefs.C\"; break;\n\t\tcase \"bass\": clef = \"clefs.F\"; break;\n\t\tcase 'treble+8': clef = \"clefs.G\"; octave = 1; break;\n\t\tcase 'tenor+8': clef = \"clefs.C\"; octave = 1; break;\n\t\tcase 'bass+8': clef = \"clefs.F\"; octave = 1; break;\n\t\tcase 'alto+8': clef = \"clefs.C\"; octave = 1; break;\n\t\tcase 'treble-8': clef = \"clefs.G\"; octave = -1; break;\n\t\tcase 'tenor-8': clef = \"clefs.C\"; octave = -1; break;\n\t\tcase 'bass-8': clef = \"clefs.F\"; octave = -1; break;\n\t\tcase 'alto-8': clef = \"clefs.C\"; octave = -1; break;\n\t\tcase 'none': return null;\n\t\tcase 'perc': clef = \"clefs.perc\"; break;\n\t\tdefault: abselem.addFixed(new RelativeElement(\"clef=\" + elem.type, 0, 0, undefined, { type: \"debug\" }));\n\t}\n\t// if (elem.verticalPos) {\n\t// pitch = elem.verticalPos;\n\t// }\n\tvar dx = 5;\n\tif (clef) {\n\t\tvar height = glyphs.symbolHeightInPitches(clef);\n\t\tvar ofs = clefOffsets(clef);\n\t\tabselem.addRight(new RelativeElement(clef, dx, glyphs.getSymbolWidth(clef), elem.clefPos, { top: height + elem.clefPos + ofs, bottom: elem.clefPos + ofs }));\n\n\t\tif (octave !== 0) {\n\t\t\tvar scale = 2 / 3;\n\t\t\tvar adjustspacing = (glyphs.getSymbolWidth(clef) - glyphs.getSymbolWidth(\"8\") * scale) / 2;\n\t\t\tvar pitch = (octave > 0) ? abselem.top + 3 : abselem.bottom - 1;\n\t\t\tvar top = (octave > 0) ? abselem.top + 3 : abselem.bottom - 3;\n\t\t\tvar bottom = top - 2;\n\t\t\tif (elem.type === \"bass-8\") {\n\t\t\t\t// The placement for bass octave is a little different. It should hug the clef.\n\t\t\t\tpitch = 3;\n\t\t\t\tadjustspacing = 0;\n\t\t\t}\n\t\t\tabselem.addRight(new RelativeElement(\"8\", dx + adjustspacing, glyphs.getSymbolWidth(\"8\") * scale, pitch, {\n\t\t\t\tscalex: scale,\n\t\t\t\tscaley: scale,\n\t\t\t\ttop: top,\n\t\t\t\tbottom: bottom\n\t\t\t}));\n\t\t\t//abselem.top += 2;\n\t\t}\n\t}\n\treturn abselem;\n};\n\nfunction clefOffsets(clef) {\n\tswitch (clef) {\n\t\tcase \"clefs.G\": return -5;\n\t\tcase \"clefs.C\": return -4;\n\t\tcase \"clefs.F\": return -4;\n\t\tcase \"clefs.perc\": return -2;\n\t\tdefault: return 0;\n\t}\n}\n\nmodule.exports = createClef;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2NyZWF0ZS1jbGVmLmpzIiwibWFwcGluZ3MiOiJBQUFBOztBQUVBLHNCQUFzQixtQkFBTyxDQUFDLCtHQUE2QjtBQUMzRCxhQUFhLG1CQUFPLENBQUMseUVBQVU7QUFDL0Isc0JBQXNCLG1CQUFPLENBQUMsK0dBQTZCOztBQUUzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyxrQ0FBa0M7QUFDbEMsaUNBQWlDO0FBQ2pDLGlDQUFpQztBQUNqQyxxQ0FBcUMsWUFBWTtBQUNqRCxvQ0FBb0MsWUFBWTtBQUNoRCxtQ0FBbUMsWUFBWTtBQUMvQyxtQ0FBbUMsWUFBWTtBQUMvQyxxQ0FBcUMsYUFBYTtBQUNsRCxvQ0FBb0MsYUFBYTtBQUNqRCxtQ0FBbUMsYUFBYTtBQUNoRCxtQ0FBbUMsYUFBYTtBQUNoRDtBQUNBLG9DQUFvQztBQUNwQyx3RkFBd0YsZUFBZTtBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEZBQThGLDhEQUE4RDs7QUFFNUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvY3JlYXRpb24vY3JlYXRlLWNsZWYuanM/YmUzYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAgICBhYmNfY3JlYXRlX2NsZWYuanNcblxudmFyIEFic29sdXRlRWxlbWVudCA9IHJlcXVpcmUoJy4vZWxlbWVudHMvYWJzb2x1dGUtZWxlbWVudCcpO1xudmFyIGdseXBocyA9IHJlcXVpcmUoJy4vZ2x5cGhzJyk7XG52YXIgUmVsYXRpdmVFbGVtZW50ID0gcmVxdWlyZSgnLi9lbGVtZW50cy9yZWxhdGl2ZS1lbGVtZW50Jyk7XG5cbnZhciBjcmVhdGVDbGVmID0gZnVuY3Rpb24gKGVsZW0sIHR1bmVOdW1iZXIpIHtcblx0dmFyIGNsZWY7XG5cdHZhciBvY3RhdmUgPSAwO1xuXHRlbGVtLmVsX3R5cGUgPSBcImNsZWZcIjtcblx0dmFyIGFic2VsZW0gPSBuZXcgQWJzb2x1dGVFbGVtZW50KGVsZW0sIDAsIDEwLCAnc3RhZmYtZXh0cmEgY2xlZicsIHR1bmVOdW1iZXIpO1xuXHRhYnNlbGVtLmlzQ2xlZiA9IHRydWU7XG5cdHN3aXRjaCAoZWxlbS50eXBlKSB7XG5cdFx0Y2FzZSBcInRyZWJsZVwiOiBjbGVmID0gXCJjbGVmcy5HXCI7IGJyZWFrO1xuXHRcdGNhc2UgXCJ0ZW5vclwiOiBjbGVmID0gXCJjbGVmcy5DXCI7IGJyZWFrO1xuXHRcdGNhc2UgXCJhbHRvXCI6IGNsZWYgPSBcImNsZWZzLkNcIjsgYnJlYWs7XG5cdFx0Y2FzZSBcImJhc3NcIjogY2xlZiA9IFwiY2xlZnMuRlwiOyBicmVhaztcblx0XHRjYXNlICd0cmVibGUrOCc6IGNsZWYgPSBcImNsZWZzLkdcIjsgb2N0YXZlID0gMTsgYnJlYWs7XG5cdFx0Y2FzZSAndGVub3IrOCc6IGNsZWYgPSBcImNsZWZzLkNcIjsgb2N0YXZlID0gMTsgYnJlYWs7XG5cdFx0Y2FzZSAnYmFzcys4JzogY2xlZiA9IFwiY2xlZnMuRlwiOyBvY3RhdmUgPSAxOyBicmVhaztcblx0XHRjYXNlICdhbHRvKzgnOiBjbGVmID0gXCJjbGVmcy5DXCI7IG9jdGF2ZSA9IDE7IGJyZWFrO1xuXHRcdGNhc2UgJ3RyZWJsZS04JzogY2xlZiA9IFwiY2xlZnMuR1wiOyBvY3RhdmUgPSAtMTsgYnJlYWs7XG5cdFx0Y2FzZSAndGVub3ItOCc6IGNsZWYgPSBcImNsZWZzLkNcIjsgb2N0YXZlID0gLTE7IGJyZWFrO1xuXHRcdGNhc2UgJ2Jhc3MtOCc6IGNsZWYgPSBcImNsZWZzLkZcIjsgb2N0YXZlID0gLTE7IGJyZWFrO1xuXHRcdGNhc2UgJ2FsdG8tOCc6IGNsZWYgPSBcImNsZWZzLkNcIjsgb2N0YXZlID0gLTE7IGJyZWFrO1xuXHRcdGNhc2UgJ25vbmUnOiByZXR1cm4gbnVsbDtcblx0XHRjYXNlICdwZXJjJzogY2xlZiA9IFwiY2xlZnMucGVyY1wiOyBicmVhaztcblx0XHRkZWZhdWx0OiBhYnNlbGVtLmFkZEZpeGVkKG5ldyBSZWxhdGl2ZUVsZW1lbnQoXCJjbGVmPVwiICsgZWxlbS50eXBlLCAwLCAwLCB1bmRlZmluZWQsIHsgdHlwZTogXCJkZWJ1Z1wiIH0pKTtcblx0fVxuXHQvLyBpZiAoZWxlbS52ZXJ0aWNhbFBvcykge1xuXHQvLyBwaXRjaCA9IGVsZW0udmVydGljYWxQb3M7XG5cdC8vIH1cblx0dmFyIGR4ID0gNTtcblx0aWYgKGNsZWYpIHtcblx0XHR2YXIgaGVpZ2h0ID0gZ2x5cGhzLnN5bWJvbEhlaWdodEluUGl0Y2hlcyhjbGVmKTtcblx0XHR2YXIgb2ZzID0gY2xlZk9mZnNldHMoY2xlZik7XG5cdFx0YWJzZWxlbS5hZGRSaWdodChuZXcgUmVsYXRpdmVFbGVtZW50KGNsZWYsIGR4LCBnbHlwaHMuZ2V0U3ltYm9sV2lkdGgoY2xlZiksIGVsZW0uY2xlZlBvcywgeyB0b3A6IGhlaWdodCArIGVsZW0uY2xlZlBvcyArIG9mcywgYm90dG9tOiBlbGVtLmNsZWZQb3MgKyBvZnMgfSkpO1xuXG5cdFx0aWYgKG9jdGF2ZSAhPT0gMCkge1xuXHRcdFx0dmFyIHNjYWxlID0gMiAvIDM7XG5cdFx0XHR2YXIgYWRqdXN0c3BhY2luZyA9IChnbHlwaHMuZ2V0U3ltYm9sV2lkdGgoY2xlZikgLSBnbHlwaHMuZ2V0U3ltYm9sV2lkdGgoXCI4XCIpICogc2NhbGUpIC8gMjtcblx0XHRcdHZhciBwaXRjaCA9IChvY3RhdmUgPiAwKSA/IGFic2VsZW0udG9wICsgMyA6IGFic2VsZW0uYm90dG9tIC0gMTtcblx0XHRcdHZhciB0b3AgPSAob2N0YXZlID4gMCkgPyBhYnNlbGVtLnRvcCArIDMgOiBhYnNlbGVtLmJvdHRvbSAtIDM7XG5cdFx0XHR2YXIgYm90dG9tID0gdG9wIC0gMjtcblx0XHRcdGlmIChlbGVtLnR5cGUgPT09IFwiYmFzcy04XCIpIHtcblx0XHRcdFx0Ly8gVGhlIHBsYWNlbWVudCBmb3IgYmFzcyBvY3RhdmUgaXMgYSBsaXR0bGUgZGlmZmVyZW50LiBJdCBzaG91bGQgaHVnIHRoZSBjbGVmLlxuXHRcdFx0XHRwaXRjaCA9IDM7XG5cdFx0XHRcdGFkanVzdHNwYWNpbmcgPSAwO1xuXHRcdFx0fVxuXHRcdFx0YWJzZWxlbS5hZGRSaWdodChuZXcgUmVsYXRpdmVFbGVtZW50KFwiOFwiLCBkeCArIGFkanVzdHNwYWNpbmcsIGdseXBocy5nZXRTeW1ib2xXaWR0aChcIjhcIikgKiBzY2FsZSwgcGl0Y2gsIHtcblx0XHRcdFx0c2NhbGV4OiBzY2FsZSxcblx0XHRcdFx0c2NhbGV5OiBzY2FsZSxcblx0XHRcdFx0dG9wOiB0b3AsXG5cdFx0XHRcdGJvdHRvbTogYm90dG9tXG5cdFx0XHR9KSk7XG5cdFx0XHQvL2Fic2VsZW0udG9wICs9IDI7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBhYnNlbGVtO1xufTtcblxuZnVuY3Rpb24gY2xlZk9mZnNldHMoY2xlZikge1xuXHRzd2l0Y2ggKGNsZWYpIHtcblx0XHRjYXNlIFwiY2xlZnMuR1wiOiByZXR1cm4gLTU7XG5cdFx0Y2FzZSBcImNsZWZzLkNcIjogcmV0dXJuIC00O1xuXHRcdGNhc2UgXCJjbGVmcy5GXCI6IHJldHVybiAtNDtcblx0XHRjYXNlIFwiY2xlZnMucGVyY1wiOiByZXR1cm4gLTI7XG5cdFx0ZGVmYXVsdDogcmV0dXJuIDA7XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVDbGVmO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/create-clef.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/create-key-signature.js":
/*!***********************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/create-key-signature.js ***!
  \***********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_create_key_signature.js\n\nvar AbsoluteElement = __webpack_require__(/*! ./elements/absolute-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/absolute-element.js\");\nvar glyphs = __webpack_require__(/*! ./glyphs */ \"(ssr)/./node_modules/abcjs/src/write/creation/glyphs.js\");\nvar RelativeElement = __webpack_require__(/*! ./elements/relative-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/relative-element.js\");\n\nvar createKeySignature = function (elem, tuneNumber) {\n\telem.el_type = \"keySignature\";\n\tif (!elem.accidentals || elem.accidentals.length === 0)\n\t\treturn null;\n\tvar abselem = new AbsoluteElement(elem, 0, 10, 'staff-extra key-signature', tuneNumber);\n\tabselem.isKeySig = true;\n\tvar dx = 0;\n\telem.accidentals.forEach(function (acc) {\n\t\tvar symbol;\n\t\tvar fudge = 0;\n\t\tswitch (acc.acc) {\n\t\t\tcase \"sharp\": symbol = \"accidentals.sharp\"; fudge = -3; break;\n\t\t\tcase \"natural\": symbol = \"accidentals.nat\"; break;\n\t\t\tcase \"flat\": symbol = \"accidentals.flat\"; fudge = -1.2; break;\n\t\t\tcase \"quartersharp\": symbol = \"accidentals.halfsharp\"; fudge = -2.5; break;\n\t\t\tcase \"quarterflat\": symbol = \"accidentals.halfflat\"; fudge = -1.2; break;\n\t\t\tdefault: symbol = \"accidentals.flat\";\n\t\t}\n\t\tabselem.addRight(new RelativeElement(symbol, dx, glyphs.getSymbolWidth(symbol), acc.verticalPos, { thickness: glyphs.symbolHeightInPitches(symbol), top: acc.verticalPos + glyphs.symbolHeightInPitches(symbol) + fudge, bottom: acc.verticalPos + fudge }));\n\t\tdx += glyphs.getSymbolWidth(symbol) + 2;\n\t}, this);\n\treturn abselem;\n};\n\nmodule.exports = createKeySignature;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2NyZWF0ZS1rZXktc2lnbmF0dXJlLmpzIiwibWFwcGluZ3MiOiJBQUFBOztBQUVBLHNCQUFzQixtQkFBTyxDQUFDLCtHQUE2QjtBQUMzRCxhQUFhLG1CQUFPLENBQUMseUVBQVU7QUFDL0Isc0JBQXNCLG1CQUFPLENBQUMsK0dBQTZCOztBQUUzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFlBQVk7QUFDM0QsK0NBQStDO0FBQy9DLDZDQUE2QyxjQUFjO0FBQzNELDBEQUEwRCxjQUFjO0FBQ3hFLHdEQUF3RCxjQUFjO0FBQ3RFO0FBQ0E7QUFDQSxxR0FBcUcsdUpBQXVKO0FBQzVQO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvY3JlYXRpb24vY3JlYXRlLWtleS1zaWduYXR1cmUuanM/ZWQ2YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAgICBhYmNfY3JlYXRlX2tleV9zaWduYXR1cmUuanNcblxudmFyIEFic29sdXRlRWxlbWVudCA9IHJlcXVpcmUoJy4vZWxlbWVudHMvYWJzb2x1dGUtZWxlbWVudCcpO1xudmFyIGdseXBocyA9IHJlcXVpcmUoJy4vZ2x5cGhzJyk7XG52YXIgUmVsYXRpdmVFbGVtZW50ID0gcmVxdWlyZSgnLi9lbGVtZW50cy9yZWxhdGl2ZS1lbGVtZW50Jyk7XG5cbnZhciBjcmVhdGVLZXlTaWduYXR1cmUgPSBmdW5jdGlvbiAoZWxlbSwgdHVuZU51bWJlcikge1xuXHRlbGVtLmVsX3R5cGUgPSBcImtleVNpZ25hdHVyZVwiO1xuXHRpZiAoIWVsZW0uYWNjaWRlbnRhbHMgfHwgZWxlbS5hY2NpZGVudGFscy5sZW5ndGggPT09IDApXG5cdFx0cmV0dXJuIG51bGw7XG5cdHZhciBhYnNlbGVtID0gbmV3IEFic29sdXRlRWxlbWVudChlbGVtLCAwLCAxMCwgJ3N0YWZmLWV4dHJhIGtleS1zaWduYXR1cmUnLCB0dW5lTnVtYmVyKTtcblx0YWJzZWxlbS5pc0tleVNpZyA9IHRydWU7XG5cdHZhciBkeCA9IDA7XG5cdGVsZW0uYWNjaWRlbnRhbHMuZm9yRWFjaChmdW5jdGlvbiAoYWNjKSB7XG5cdFx0dmFyIHN5bWJvbDtcblx0XHR2YXIgZnVkZ2UgPSAwO1xuXHRcdHN3aXRjaCAoYWNjLmFjYykge1xuXHRcdFx0Y2FzZSBcInNoYXJwXCI6IHN5bWJvbCA9IFwiYWNjaWRlbnRhbHMuc2hhcnBcIjsgZnVkZ2UgPSAtMzsgYnJlYWs7XG5cdFx0XHRjYXNlIFwibmF0dXJhbFwiOiBzeW1ib2wgPSBcImFjY2lkZW50YWxzLm5hdFwiOyBicmVhaztcblx0XHRcdGNhc2UgXCJmbGF0XCI6IHN5bWJvbCA9IFwiYWNjaWRlbnRhbHMuZmxhdFwiOyBmdWRnZSA9IC0xLjI7IGJyZWFrO1xuXHRcdFx0Y2FzZSBcInF1YXJ0ZXJzaGFycFwiOiBzeW1ib2wgPSBcImFjY2lkZW50YWxzLmhhbGZzaGFycFwiOyBmdWRnZSA9IC0yLjU7IGJyZWFrO1xuXHRcdFx0Y2FzZSBcInF1YXJ0ZXJmbGF0XCI6IHN5bWJvbCA9IFwiYWNjaWRlbnRhbHMuaGFsZmZsYXRcIjsgZnVkZ2UgPSAtMS4yOyBicmVhaztcblx0XHRcdGRlZmF1bHQ6IHN5bWJvbCA9IFwiYWNjaWRlbnRhbHMuZmxhdFwiO1xuXHRcdH1cblx0XHRhYnNlbGVtLmFkZFJpZ2h0KG5ldyBSZWxhdGl2ZUVsZW1lbnQoc3ltYm9sLCBkeCwgZ2x5cGhzLmdldFN5bWJvbFdpZHRoKHN5bWJvbCksIGFjYy52ZXJ0aWNhbFBvcywgeyB0aGlja25lc3M6IGdseXBocy5zeW1ib2xIZWlnaHRJblBpdGNoZXMoc3ltYm9sKSwgdG9wOiBhY2MudmVydGljYWxQb3MgKyBnbHlwaHMuc3ltYm9sSGVpZ2h0SW5QaXRjaGVzKHN5bWJvbCkgKyBmdWRnZSwgYm90dG9tOiBhY2MudmVydGljYWxQb3MgKyBmdWRnZSB9KSk7XG5cdFx0ZHggKz0gZ2x5cGhzLmdldFN5bWJvbFdpZHRoKHN5bWJvbCkgKyAyO1xuXHR9LCB0aGlzKTtcblx0cmV0dXJuIGFic2VsZW07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUtleVNpZ25hdHVyZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/create-key-signature.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/create-note-head.js":
/*!*******************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/create-note-head.js ***!
  \*******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var glyphs = __webpack_require__(/*! ./glyphs */ \"(ssr)/./node_modules/abcjs/src/write/creation/glyphs.js\");\nvar RelativeElement = __webpack_require__(/*! ./elements/relative-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/relative-element.js\");\n\nvar createNoteHead = function (abselem, c, pitchelem, options) {\n\tif (!options) options = {};\n\tvar dir = (options.dir !== undefined) ? options.dir : null;\n\tvar headx = (options.headx !== undefined) ? options.headx : 0;\n\tvar extrax = (options.extrax !== undefined) ? options.extrax : 0;\n\tvar flag = (options.flag !== undefined) ? options.flag : null;\n\tvar dot = (options.dot !== undefined) ? options.dot : 0;\n\tvar dotshiftx = (options.dotshiftx !== undefined) ? options.dotshiftx : 0;\n\tvar scale = (options.scale !== undefined) ? options.scale : 1;\n\tvar accidentalSlot = (options.accidentalSlot !== undefined) ? options.accidentalSlot : [];\n\tvar shouldExtendStem = (options.shouldExtendStem !== undefined) ? options.shouldExtendStem : false;\n\tvar printAccidentals = (options.printAccidentals !== undefined) ? options.printAccidentals : true;\n\n\t// TODO scale the dot as well\n\tvar pitch = pitchelem.verticalPos;\n\tvar notehead;\n\tvar accidentalshiftx = 0;\n\tvar newDotShiftX = 0;\n\tvar extraLeft = 0;\n\tif (c === undefined)\n\t\tabselem.addFixed(new RelativeElement(\"pitch is undefined\", 0, 0, 0, { type: \"debug\" }));\n\telse if (c === \"\") {\n\t\tnotehead = new RelativeElement(null, 0, 0, pitch);\n\t} else {\n\t\tvar shiftheadx = headx;\n\t\tif (pitchelem.printer_shift) {\n\t\t\tvar adjust = (pitchelem.printer_shift === \"same\") ? 1 : 0;\n\t\t\tshiftheadx = (dir === \"down\") ? -glyphs.getSymbolWidth(c) * scale + adjust : glyphs.getSymbolWidth(c) * scale - adjust;\n\t\t}\n\t\tvar opts = { scalex: scale, scaley: scale, thickness: glyphs.symbolHeightInPitches(c) * scale, name: pitchelem.name };\n\t\tnotehead = new RelativeElement(c, shiftheadx, glyphs.getSymbolWidth(c) * scale, pitch, opts);\n\t\tnotehead.stemDir = dir;\n\t\tif (flag) {\n\t\t\tvar pos = pitch + ((dir === \"down\") ? -7 : 7) * scale;\n\t\t\t// if this is a regular note, (not grace or tempo indicator) then the stem will have been stretched to the middle line if it is far from the center.\n\t\t\tif (shouldExtendStem) {\n\t\t\t\tif (dir === \"down\" && pos > 6)\n\t\t\t\t\tpos = 6;\n\t\t\t\tif (dir === \"up\" && pos < 6)\n\t\t\t\t\tpos = 6;\n\t\t\t}\n\t\t\t//if (scale===1 && (dir===\"down\")?(pos>6):(pos<6)) pos=6;\n\t\t\tvar xdelta = (dir === \"down\") ? headx : headx + notehead.w - 0.6;\n\t\t\tabselem.addRight(new RelativeElement(flag, xdelta, glyphs.getSymbolWidth(flag) * scale, pos, { scalex: scale, scaley: scale }));\n\t\t}\n\t\tnewDotShiftX = notehead.w + dotshiftx - 2 + 5 * dot;\n\t\tfor (; dot > 0; dot--) {\n\t\t\tvar dotadjusty = (1 - Math.abs(pitch) % 2); //PER: take abs value of the pitch. And the shift still happens on ledger lines.\n\t\t\tabselem.addRight(new RelativeElement(\"dots.dot\", notehead.w + dotshiftx - 2 + 5 * dot, glyphs.getSymbolWidth(\"dots.dot\"), pitch + dotadjusty));\n\t\t}\n\t}\n\tif (notehead)\n\t\tnotehead.highestVert = pitchelem.highestVert;\n\n\tif (printAccidentals && pitchelem.accidental) {\n\t\tvar symb;\n\t\tswitch (pitchelem.accidental) {\n\t\t\tcase \"quartersharp\":\n\t\t\t\tsymb = \"accidentals.halfsharp\";\n\t\t\t\tbreak;\n\t\t\tcase \"dblsharp\":\n\t\t\t\tsymb = \"accidentals.dblsharp\";\n\t\t\t\tbreak;\n\t\t\tcase \"sharp\":\n\t\t\t\tsymb = \"accidentals.sharp\";\n\t\t\t\tbreak;\n\t\t\tcase \"quarterflat\":\n\t\t\t\tsymb = \"accidentals.halfflat\";\n\t\t\t\tbreak;\n\t\t\tcase \"flat\":\n\t\t\t\tsymb = \"accidentals.flat\";\n\t\t\t\tbreak;\n\t\t\tcase \"dblflat\":\n\t\t\t\tsymb = \"accidentals.dblflat\";\n\t\t\t\tbreak;\n\t\t\tcase \"natural\":\n\t\t\t\tsymb = \"accidentals.nat\";\n\t\t}\n\t\t// if a note is at least a sixth away, it can share a slot with another accidental\n\t\tvar accSlotFound = false;\n\t\tvar accPlace = extrax;\n\t\tfor (var j = 0; j < accidentalSlot.length; j++) {\n\t\t\tif (pitch - accidentalSlot[j][0] >= 6) {\n\t\t\t\taccidentalSlot[j][0] = pitch;\n\t\t\t\taccPlace = accidentalSlot[j][1];\n\t\t\t\taccSlotFound = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (accSlotFound === false) {\n\t\t\taccPlace -= (glyphs.getSymbolWidth(symb) * scale + 2);\n\t\t\taccidentalSlot.push([pitch, accPlace]);\n\t\t\taccidentalshiftx = (glyphs.getSymbolWidth(symb) * scale + 2);\n\t\t}\n\t\tvar h = glyphs.symbolHeightInPitches(symb);\n\t\tabselem.addExtra(new RelativeElement(symb, accPlace, glyphs.getSymbolWidth(symb), pitch, { scalex: scale, scaley: scale, top: pitch + h / 2, bottom: pitch - h / 2 }));\n\t\textraLeft = glyphs.getSymbolWidth(symb) / 2; // TODO-PER: We need a little extra width if there is an accidental, but I'm not sure why it isn't the full width of the accidental.\n\t}\n\n\treturn { notehead: notehead, accidentalshiftx: accidentalshiftx, dotshiftx: newDotShiftX, extraLeft: extraLeft };\n\n};\n\nmodule.exports = createNoteHead;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2NyZWF0ZS1ub3RlLWhlYWQuanMiLCJtYXBwaW5ncyI6IkFBQUEsYUFBYSxtQkFBTyxDQUFDLHlFQUFVO0FBQy9CLHNCQUFzQixtQkFBTyxDQUFDLCtHQUE2Qjs7QUFFM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFLGVBQWU7QUFDdkY7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0dBQWtHLDhCQUE4QjtBQUNoSTtBQUNBO0FBQ0EsU0FBUyxTQUFTO0FBQ2xCLCtDQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwyQkFBMkI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2RkFBNkYseUVBQXlFO0FBQ3RLLCtDQUErQztBQUMvQzs7QUFFQSxVQUFVOztBQUVWOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2NyZWF0ZS1ub3RlLWhlYWQuanM/ZjgwOCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZ2x5cGhzID0gcmVxdWlyZSgnLi9nbHlwaHMnKTtcbnZhciBSZWxhdGl2ZUVsZW1lbnQgPSByZXF1aXJlKCcuL2VsZW1lbnRzL3JlbGF0aXZlLWVsZW1lbnQnKTtcblxudmFyIGNyZWF0ZU5vdGVIZWFkID0gZnVuY3Rpb24gKGFic2VsZW0sIGMsIHBpdGNoZWxlbSwgb3B0aW9ucykge1xuXHRpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fTtcblx0dmFyIGRpciA9IChvcHRpb25zLmRpciAhPT0gdW5kZWZpbmVkKSA/IG9wdGlvbnMuZGlyIDogbnVsbDtcblx0dmFyIGhlYWR4ID0gKG9wdGlvbnMuaGVhZHggIT09IHVuZGVmaW5lZCkgPyBvcHRpb25zLmhlYWR4IDogMDtcblx0dmFyIGV4dHJheCA9IChvcHRpb25zLmV4dHJheCAhPT0gdW5kZWZpbmVkKSA/IG9wdGlvbnMuZXh0cmF4IDogMDtcblx0dmFyIGZsYWcgPSAob3B0aW9ucy5mbGFnICE9PSB1bmRlZmluZWQpID8gb3B0aW9ucy5mbGFnIDogbnVsbDtcblx0dmFyIGRvdCA9IChvcHRpb25zLmRvdCAhPT0gdW5kZWZpbmVkKSA/IG9wdGlvbnMuZG90IDogMDtcblx0dmFyIGRvdHNoaWZ0eCA9IChvcHRpb25zLmRvdHNoaWZ0eCAhPT0gdW5kZWZpbmVkKSA/IG9wdGlvbnMuZG90c2hpZnR4IDogMDtcblx0dmFyIHNjYWxlID0gKG9wdGlvbnMuc2NhbGUgIT09IHVuZGVmaW5lZCkgPyBvcHRpb25zLnNjYWxlIDogMTtcblx0dmFyIGFjY2lkZW50YWxTbG90ID0gKG9wdGlvbnMuYWNjaWRlbnRhbFNsb3QgIT09IHVuZGVmaW5lZCkgPyBvcHRpb25zLmFjY2lkZW50YWxTbG90IDogW107XG5cdHZhciBzaG91bGRFeHRlbmRTdGVtID0gKG9wdGlvbnMuc2hvdWxkRXh0ZW5kU3RlbSAhPT0gdW5kZWZpbmVkKSA/IG9wdGlvbnMuc2hvdWxkRXh0ZW5kU3RlbSA6IGZhbHNlO1xuXHR2YXIgcHJpbnRBY2NpZGVudGFscyA9IChvcHRpb25zLnByaW50QWNjaWRlbnRhbHMgIT09IHVuZGVmaW5lZCkgPyBvcHRpb25zLnByaW50QWNjaWRlbnRhbHMgOiB0cnVlO1xuXG5cdC8vIFRPRE8gc2NhbGUgdGhlIGRvdCBhcyB3ZWxsXG5cdHZhciBwaXRjaCA9IHBpdGNoZWxlbS52ZXJ0aWNhbFBvcztcblx0dmFyIG5vdGVoZWFkO1xuXHR2YXIgYWNjaWRlbnRhbHNoaWZ0eCA9IDA7XG5cdHZhciBuZXdEb3RTaGlmdFggPSAwO1xuXHR2YXIgZXh0cmFMZWZ0ID0gMDtcblx0aWYgKGMgPT09IHVuZGVmaW5lZClcblx0XHRhYnNlbGVtLmFkZEZpeGVkKG5ldyBSZWxhdGl2ZUVsZW1lbnQoXCJwaXRjaCBpcyB1bmRlZmluZWRcIiwgMCwgMCwgMCwgeyB0eXBlOiBcImRlYnVnXCIgfSkpO1xuXHRlbHNlIGlmIChjID09PSBcIlwiKSB7XG5cdFx0bm90ZWhlYWQgPSBuZXcgUmVsYXRpdmVFbGVtZW50KG51bGwsIDAsIDAsIHBpdGNoKTtcblx0fSBlbHNlIHtcblx0XHR2YXIgc2hpZnRoZWFkeCA9IGhlYWR4O1xuXHRcdGlmIChwaXRjaGVsZW0ucHJpbnRlcl9zaGlmdCkge1xuXHRcdFx0dmFyIGFkanVzdCA9IChwaXRjaGVsZW0ucHJpbnRlcl9zaGlmdCA9PT0gXCJzYW1lXCIpID8gMSA6IDA7XG5cdFx0XHRzaGlmdGhlYWR4ID0gKGRpciA9PT0gXCJkb3duXCIpID8gLWdseXBocy5nZXRTeW1ib2xXaWR0aChjKSAqIHNjYWxlICsgYWRqdXN0IDogZ2x5cGhzLmdldFN5bWJvbFdpZHRoKGMpICogc2NhbGUgLSBhZGp1c3Q7XG5cdFx0fVxuXHRcdHZhciBvcHRzID0geyBzY2FsZXg6IHNjYWxlLCBzY2FsZXk6IHNjYWxlLCB0aGlja25lc3M6IGdseXBocy5zeW1ib2xIZWlnaHRJblBpdGNoZXMoYykgKiBzY2FsZSwgbmFtZTogcGl0Y2hlbGVtLm5hbWUgfTtcblx0XHRub3RlaGVhZCA9IG5ldyBSZWxhdGl2ZUVsZW1lbnQoYywgc2hpZnRoZWFkeCwgZ2x5cGhzLmdldFN5bWJvbFdpZHRoKGMpICogc2NhbGUsIHBpdGNoLCBvcHRzKTtcblx0XHRub3RlaGVhZC5zdGVtRGlyID0gZGlyO1xuXHRcdGlmIChmbGFnKSB7XG5cdFx0XHR2YXIgcG9zID0gcGl0Y2ggKyAoKGRpciA9PT0gXCJkb3duXCIpID8gLTcgOiA3KSAqIHNjYWxlO1xuXHRcdFx0Ly8gaWYgdGhpcyBpcyBhIHJlZ3VsYXIgbm90ZSwgKG5vdCBncmFjZSBvciB0ZW1wbyBpbmRpY2F0b3IpIHRoZW4gdGhlIHN0ZW0gd2lsbCBoYXZlIGJlZW4gc3RyZXRjaGVkIHRvIHRoZSBtaWRkbGUgbGluZSBpZiBpdCBpcyBmYXIgZnJvbSB0aGUgY2VudGVyLlxuXHRcdFx0aWYgKHNob3VsZEV4dGVuZFN0ZW0pIHtcblx0XHRcdFx0aWYgKGRpciA9PT0gXCJkb3duXCIgJiYgcG9zID4gNilcblx0XHRcdFx0XHRwb3MgPSA2O1xuXHRcdFx0XHRpZiAoZGlyID09PSBcInVwXCIgJiYgcG9zIDwgNilcblx0XHRcdFx0XHRwb3MgPSA2O1xuXHRcdFx0fVxuXHRcdFx0Ly9pZiAoc2NhbGU9PT0xICYmIChkaXI9PT1cImRvd25cIik/KHBvcz42KToocG9zPDYpKSBwb3M9Njtcblx0XHRcdHZhciB4ZGVsdGEgPSAoZGlyID09PSBcImRvd25cIikgPyBoZWFkeCA6IGhlYWR4ICsgbm90ZWhlYWQudyAtIDAuNjtcblx0XHRcdGFic2VsZW0uYWRkUmlnaHQobmV3IFJlbGF0aXZlRWxlbWVudChmbGFnLCB4ZGVsdGEsIGdseXBocy5nZXRTeW1ib2xXaWR0aChmbGFnKSAqIHNjYWxlLCBwb3MsIHsgc2NhbGV4OiBzY2FsZSwgc2NhbGV5OiBzY2FsZSB9KSk7XG5cdFx0fVxuXHRcdG5ld0RvdFNoaWZ0WCA9IG5vdGVoZWFkLncgKyBkb3RzaGlmdHggLSAyICsgNSAqIGRvdDtcblx0XHRmb3IgKDsgZG90ID4gMDsgZG90LS0pIHtcblx0XHRcdHZhciBkb3RhZGp1c3R5ID0gKDEgLSBNYXRoLmFicyhwaXRjaCkgJSAyKTsgLy9QRVI6IHRha2UgYWJzIHZhbHVlIG9mIHRoZSBwaXRjaC4gQW5kIHRoZSBzaGlmdCBzdGlsbCBoYXBwZW5zIG9uIGxlZGdlciBsaW5lcy5cblx0XHRcdGFic2VsZW0uYWRkUmlnaHQobmV3IFJlbGF0aXZlRWxlbWVudChcImRvdHMuZG90XCIsIG5vdGVoZWFkLncgKyBkb3RzaGlmdHggLSAyICsgNSAqIGRvdCwgZ2x5cGhzLmdldFN5bWJvbFdpZHRoKFwiZG90cy5kb3RcIiksIHBpdGNoICsgZG90YWRqdXN0eSkpO1xuXHRcdH1cblx0fVxuXHRpZiAobm90ZWhlYWQpXG5cdFx0bm90ZWhlYWQuaGlnaGVzdFZlcnQgPSBwaXRjaGVsZW0uaGlnaGVzdFZlcnQ7XG5cblx0aWYgKHByaW50QWNjaWRlbnRhbHMgJiYgcGl0Y2hlbGVtLmFjY2lkZW50YWwpIHtcblx0XHR2YXIgc3ltYjtcblx0XHRzd2l0Y2ggKHBpdGNoZWxlbS5hY2NpZGVudGFsKSB7XG5cdFx0XHRjYXNlIFwicXVhcnRlcnNoYXJwXCI6XG5cdFx0XHRcdHN5bWIgPSBcImFjY2lkZW50YWxzLmhhbGZzaGFycFwiO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJkYmxzaGFycFwiOlxuXHRcdFx0XHRzeW1iID0gXCJhY2NpZGVudGFscy5kYmxzaGFycFwiO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJzaGFycFwiOlxuXHRcdFx0XHRzeW1iID0gXCJhY2NpZGVudGFscy5zaGFycFwiO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJxdWFydGVyZmxhdFwiOlxuXHRcdFx0XHRzeW1iID0gXCJhY2NpZGVudGFscy5oYWxmZmxhdFwiO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJmbGF0XCI6XG5cdFx0XHRcdHN5bWIgPSBcImFjY2lkZW50YWxzLmZsYXRcIjtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiZGJsZmxhdFwiOlxuXHRcdFx0XHRzeW1iID0gXCJhY2NpZGVudGFscy5kYmxmbGF0XCI7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcIm5hdHVyYWxcIjpcblx0XHRcdFx0c3ltYiA9IFwiYWNjaWRlbnRhbHMubmF0XCI7XG5cdFx0fVxuXHRcdC8vIGlmIGEgbm90ZSBpcyBhdCBsZWFzdCBhIHNpeHRoIGF3YXksIGl0IGNhbiBzaGFyZSBhIHNsb3Qgd2l0aCBhbm90aGVyIGFjY2lkZW50YWxcblx0XHR2YXIgYWNjU2xvdEZvdW5kID0gZmFsc2U7XG5cdFx0dmFyIGFjY1BsYWNlID0gZXh0cmF4O1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgYWNjaWRlbnRhbFNsb3QubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmIChwaXRjaCAtIGFjY2lkZW50YWxTbG90W2pdWzBdID49IDYpIHtcblx0XHRcdFx0YWNjaWRlbnRhbFNsb3Rbal1bMF0gPSBwaXRjaDtcblx0XHRcdFx0YWNjUGxhY2UgPSBhY2NpZGVudGFsU2xvdFtqXVsxXTtcblx0XHRcdFx0YWNjU2xvdEZvdW5kID0gdHJ1ZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChhY2NTbG90Rm91bmQgPT09IGZhbHNlKSB7XG5cdFx0XHRhY2NQbGFjZSAtPSAoZ2x5cGhzLmdldFN5bWJvbFdpZHRoKHN5bWIpICogc2NhbGUgKyAyKTtcblx0XHRcdGFjY2lkZW50YWxTbG90LnB1c2goW3BpdGNoLCBhY2NQbGFjZV0pO1xuXHRcdFx0YWNjaWRlbnRhbHNoaWZ0eCA9IChnbHlwaHMuZ2V0U3ltYm9sV2lkdGgoc3ltYikgKiBzY2FsZSArIDIpO1xuXHRcdH1cblx0XHR2YXIgaCA9IGdseXBocy5zeW1ib2xIZWlnaHRJblBpdGNoZXMoc3ltYik7XG5cdFx0YWJzZWxlbS5hZGRFeHRyYShuZXcgUmVsYXRpdmVFbGVtZW50KHN5bWIsIGFjY1BsYWNlLCBnbHlwaHMuZ2V0U3ltYm9sV2lkdGgoc3ltYiksIHBpdGNoLCB7IHNjYWxleDogc2NhbGUsIHNjYWxleTogc2NhbGUsIHRvcDogcGl0Y2ggKyBoIC8gMiwgYm90dG9tOiBwaXRjaCAtIGggLyAyIH0pKTtcblx0XHRleHRyYUxlZnQgPSBnbHlwaHMuZ2V0U3ltYm9sV2lkdGgoc3ltYikgLyAyOyAvLyBUT0RPLVBFUjogV2UgbmVlZCBhIGxpdHRsZSBleHRyYSB3aWR0aCBpZiB0aGVyZSBpcyBhbiBhY2NpZGVudGFsLCBidXQgSSdtIG5vdCBzdXJlIHdoeSBpdCBpc24ndCB0aGUgZnVsbCB3aWR0aCBvZiB0aGUgYWNjaWRlbnRhbC5cblx0fVxuXG5cdHJldHVybiB7IG5vdGVoZWFkOiBub3RlaGVhZCwgYWNjaWRlbnRhbHNoaWZ0eDogYWNjaWRlbnRhbHNoaWZ0eCwgZG90c2hpZnR4OiBuZXdEb3RTaGlmdFgsIGV4dHJhTGVmdDogZXh0cmFMZWZ0IH07XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlTm90ZUhlYWQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/create-note-head.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/create-time-signature.js":
/*!************************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/create-time-signature.js ***!
  \************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_create_time_signature.js\n\nvar AbsoluteElement = __webpack_require__(/*! ./elements/absolute-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/absolute-element.js\");\nvar glyphs = __webpack_require__(/*! ./glyphs */ \"(ssr)/./node_modules/abcjs/src/write/creation/glyphs.js\");\nvar RelativeElement = __webpack_require__(/*! ./elements/relative-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/relative-element.js\");\n\nvar createTimeSignature = function (elem, tuneNumber) {\n\telem.el_type = \"timeSignature\";\n\tvar abselem = new AbsoluteElement(elem, 0, 10, 'staff-extra time-signature', tuneNumber);\n\tif (elem.type === \"specified\") {\n\t\tvar x = 0;\n\t\tfor (var i = 0; i < elem.value.length; i++) {\n\t\t\tif (i !== 0) {\n\t\t\t\tabselem.addRight(new RelativeElement('+', x + 1, glyphs.getSymbolWidth(\"+\"), 6, { thickness: glyphs.symbolHeightInPitches(\"+\") }));\n\t\t\t\tx += glyphs.getSymbolWidth(\"+\") + 2;\n\t\t\t}\n\t\t\tif (elem.value[i].den) {\n\t\t\t\tvar numWidth = 0;\n\t\t\t\tfor (var i2 = 0; i2 < elem.value[i].num.length; i2++)\n\t\t\t\t\tnumWidth += glyphs.getSymbolWidth(elem.value[i].num[i2]);\n\t\t\t\tvar denWidth = 0;\n\t\t\t\tfor (i2 = 0; i2 < elem.value[i].num.length; i2++)\n\t\t\t\t\tdenWidth += glyphs.getSymbolWidth(elem.value[i].den[i2]);\n\t\t\t\tvar maxWidth = Math.max(numWidth, denWidth);\n\t\t\t\tabselem.addRight(new RelativeElement(elem.value[i].num, x + (maxWidth - numWidth) / 2, numWidth, 8, { thickness: glyphs.symbolHeightInPitches(elem.value[i].num[0]) }));\n\t\t\t\tabselem.addRight(new RelativeElement(elem.value[i].den, x + (maxWidth - denWidth) / 2, denWidth, 4, { thickness: glyphs.symbolHeightInPitches(elem.value[i].den[0]) }));\n\t\t\t\tx += maxWidth\n\t\t\t} else {\n\t\t\t\tvar thisWidth = 0;\n\t\t\t\tfor (var i3 = 0; i3 < elem.value[i].num.length; i3++)\n\t\t\t\t\tthisWidth += glyphs.getSymbolWidth(elem.value[i].num[i3]);\n\t\t\t\tabselem.addRight(new RelativeElement(elem.value[i].num, x, thisWidth, 6, { thickness: glyphs.symbolHeightInPitches(elem.value[i].num[0]) }));\n\t\t\t\tx += thisWidth;\n\t\t\t}\n\t\t}\n\t} else if (elem.type === \"common_time\") {\n\t\tabselem.addRight(new RelativeElement(\"timesig.common\", 0, glyphs.getSymbolWidth(\"timesig.common\"), 6, { thickness: glyphs.symbolHeightInPitches(\"timesig.common\") }));\n\n\t} else if (elem.type === \"cut_time\") {\n\t\tabselem.addRight(new RelativeElement(\"timesig.cut\", 0, glyphs.getSymbolWidth(\"timesig.cut\"), 6, { thickness: glyphs.symbolHeightInPitches(\"timesig.cut\") }));\n\t} else if (elem.type === \"tempus_imperfectum\") {\n\t\tabselem.addRight(new RelativeElement(\"timesig.imperfectum\", 0, glyphs.getSymbolWidth(\"timesig.imperfectum\"), 6, { thickness: glyphs.symbolHeightInPitches(\"timesig.imperfectum\") }));\n\t} else if (elem.type === \"tempus_imperfectum_prolatio\") {\n\t\tabselem.addRight(new RelativeElement(\"timesig.imperfectum2\", 0, glyphs.getSymbolWidth(\"timesig.imperfectum2\"), 6, { thickness: glyphs.symbolHeightInPitches(\"timesig.imperfectum2\") }));\n\t} else if (elem.type === \"tempus_perfectum\") {\n\t\tabselem.addRight(new RelativeElement(\"timesig.perfectum\", 0, glyphs.getSymbolWidth(\"timesig.perfectum\"), 6, { thickness: glyphs.symbolHeightInPitches(\"timesig.perfectum\") }));\n\t} else if (elem.type === \"tempus_perfectum_prolatio\") {\n\t\tabselem.addRight(new RelativeElement(\"timesig.perfectum2\", 0, glyphs.getSymbolWidth(\"timesig.perfectum2\"), 6, { thickness: glyphs.symbolHeightInPitches(\"timesig.perfectum2\") }));\n\t} else {\n\t\tconsole.log(\"time signature:\", elem);\n\t}\n\treturn abselem;\n};\n\nmodule.exports = createTimeSignature;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2NyZWF0ZS10aW1lLXNpZ25hdHVyZS5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxzQkFBc0IsbUJBQU8sQ0FBQywrR0FBNkI7QUFDM0QsYUFBYSxtQkFBTyxDQUFDLHlFQUFVO0FBQy9CLHNCQUFzQixtQkFBTyxDQUFDLCtHQUE2Qjs7QUFFM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1QkFBdUI7QUFDekM7QUFDQSxzRkFBc0YsOENBQThDO0FBQ3BJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLCtCQUErQjtBQUNwRDtBQUNBO0FBQ0EsaUJBQWlCLCtCQUErQjtBQUNoRDtBQUNBO0FBQ0EsMEdBQTBHLCtEQUErRDtBQUN6SywwR0FBMEcsK0RBQStEO0FBQ3pLO0FBQ0EsS0FBSztBQUNMO0FBQ0EscUJBQXFCLCtCQUErQjtBQUNwRDtBQUNBLCtFQUErRSwrREFBK0Q7QUFDOUk7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILDBHQUEwRywyREFBMkQ7O0FBRXJLLEdBQUc7QUFDSCxvR0FBb0csd0RBQXdEO0FBQzVKLEdBQUc7QUFDSCxvSEFBb0gsZ0VBQWdFO0FBQ3BMLEdBQUc7QUFDSCxzSEFBc0gsaUVBQWlFO0FBQ3ZMLEdBQUc7QUFDSCxnSEFBZ0gsOERBQThEO0FBQzlLLEdBQUc7QUFDSCxrSEFBa0gsK0RBQStEO0FBQ2pMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9jcmVhdGlvbi9jcmVhdGUtdGltZS1zaWduYXR1cmUuanM/Y2ZiNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAgICBhYmNfY3JlYXRlX3RpbWVfc2lnbmF0dXJlLmpzXG5cbnZhciBBYnNvbHV0ZUVsZW1lbnQgPSByZXF1aXJlKCcuL2VsZW1lbnRzL2Fic29sdXRlLWVsZW1lbnQnKTtcbnZhciBnbHlwaHMgPSByZXF1aXJlKCcuL2dseXBocycpO1xudmFyIFJlbGF0aXZlRWxlbWVudCA9IHJlcXVpcmUoJy4vZWxlbWVudHMvcmVsYXRpdmUtZWxlbWVudCcpO1xuXG52YXIgY3JlYXRlVGltZVNpZ25hdHVyZSA9IGZ1bmN0aW9uIChlbGVtLCB0dW5lTnVtYmVyKSB7XG5cdGVsZW0uZWxfdHlwZSA9IFwidGltZVNpZ25hdHVyZVwiO1xuXHR2YXIgYWJzZWxlbSA9IG5ldyBBYnNvbHV0ZUVsZW1lbnQoZWxlbSwgMCwgMTAsICdzdGFmZi1leHRyYSB0aW1lLXNpZ25hdHVyZScsIHR1bmVOdW1iZXIpO1xuXHRpZiAoZWxlbS50eXBlID09PSBcInNwZWNpZmllZFwiKSB7XG5cdFx0dmFyIHggPSAwO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbS52YWx1ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKGkgIT09IDApIHtcblx0XHRcdFx0YWJzZWxlbS5hZGRSaWdodChuZXcgUmVsYXRpdmVFbGVtZW50KCcrJywgeCArIDEsIGdseXBocy5nZXRTeW1ib2xXaWR0aChcIitcIiksIDYsIHsgdGhpY2tuZXNzOiBnbHlwaHMuc3ltYm9sSGVpZ2h0SW5QaXRjaGVzKFwiK1wiKSB9KSk7XG5cdFx0XHRcdHggKz0gZ2x5cGhzLmdldFN5bWJvbFdpZHRoKFwiK1wiKSArIDI7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZWxlbS52YWx1ZVtpXS5kZW4pIHtcblx0XHRcdFx0dmFyIG51bVdpZHRoID0gMDtcblx0XHRcdFx0Zm9yICh2YXIgaTIgPSAwOyBpMiA8IGVsZW0udmFsdWVbaV0ubnVtLmxlbmd0aDsgaTIrKylcblx0XHRcdFx0XHRudW1XaWR0aCArPSBnbHlwaHMuZ2V0U3ltYm9sV2lkdGgoZWxlbS52YWx1ZVtpXS5udW1baTJdKTtcblx0XHRcdFx0dmFyIGRlbldpZHRoID0gMDtcblx0XHRcdFx0Zm9yIChpMiA9IDA7IGkyIDwgZWxlbS52YWx1ZVtpXS5udW0ubGVuZ3RoOyBpMisrKVxuXHRcdFx0XHRcdGRlbldpZHRoICs9IGdseXBocy5nZXRTeW1ib2xXaWR0aChlbGVtLnZhbHVlW2ldLmRlbltpMl0pO1xuXHRcdFx0XHR2YXIgbWF4V2lkdGggPSBNYXRoLm1heChudW1XaWR0aCwgZGVuV2lkdGgpO1xuXHRcdFx0XHRhYnNlbGVtLmFkZFJpZ2h0KG5ldyBSZWxhdGl2ZUVsZW1lbnQoZWxlbS52YWx1ZVtpXS5udW0sIHggKyAobWF4V2lkdGggLSBudW1XaWR0aCkgLyAyLCBudW1XaWR0aCwgOCwgeyB0aGlja25lc3M6IGdseXBocy5zeW1ib2xIZWlnaHRJblBpdGNoZXMoZWxlbS52YWx1ZVtpXS5udW1bMF0pIH0pKTtcblx0XHRcdFx0YWJzZWxlbS5hZGRSaWdodChuZXcgUmVsYXRpdmVFbGVtZW50KGVsZW0udmFsdWVbaV0uZGVuLCB4ICsgKG1heFdpZHRoIC0gZGVuV2lkdGgpIC8gMiwgZGVuV2lkdGgsIDQsIHsgdGhpY2tuZXNzOiBnbHlwaHMuc3ltYm9sSGVpZ2h0SW5QaXRjaGVzKGVsZW0udmFsdWVbaV0uZGVuWzBdKSB9KSk7XG5cdFx0XHRcdHggKz0gbWF4V2lkdGhcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhciB0aGlzV2lkdGggPSAwO1xuXHRcdFx0XHRmb3IgKHZhciBpMyA9IDA7IGkzIDwgZWxlbS52YWx1ZVtpXS5udW0ubGVuZ3RoOyBpMysrKVxuXHRcdFx0XHRcdHRoaXNXaWR0aCArPSBnbHlwaHMuZ2V0U3ltYm9sV2lkdGgoZWxlbS52YWx1ZVtpXS5udW1baTNdKTtcblx0XHRcdFx0YWJzZWxlbS5hZGRSaWdodChuZXcgUmVsYXRpdmVFbGVtZW50KGVsZW0udmFsdWVbaV0ubnVtLCB4LCB0aGlzV2lkdGgsIDYsIHsgdGhpY2tuZXNzOiBnbHlwaHMuc3ltYm9sSGVpZ2h0SW5QaXRjaGVzKGVsZW0udmFsdWVbaV0ubnVtWzBdKSB9KSk7XG5cdFx0XHRcdHggKz0gdGhpc1dpZHRoO1xuXHRcdFx0fVxuXHRcdH1cblx0fSBlbHNlIGlmIChlbGVtLnR5cGUgPT09IFwiY29tbW9uX3RpbWVcIikge1xuXHRcdGFic2VsZW0uYWRkUmlnaHQobmV3IFJlbGF0aXZlRWxlbWVudChcInRpbWVzaWcuY29tbW9uXCIsIDAsIGdseXBocy5nZXRTeW1ib2xXaWR0aChcInRpbWVzaWcuY29tbW9uXCIpLCA2LCB7IHRoaWNrbmVzczogZ2x5cGhzLnN5bWJvbEhlaWdodEluUGl0Y2hlcyhcInRpbWVzaWcuY29tbW9uXCIpIH0pKTtcblxuXHR9IGVsc2UgaWYgKGVsZW0udHlwZSA9PT0gXCJjdXRfdGltZVwiKSB7XG5cdFx0YWJzZWxlbS5hZGRSaWdodChuZXcgUmVsYXRpdmVFbGVtZW50KFwidGltZXNpZy5jdXRcIiwgMCwgZ2x5cGhzLmdldFN5bWJvbFdpZHRoKFwidGltZXNpZy5jdXRcIiksIDYsIHsgdGhpY2tuZXNzOiBnbHlwaHMuc3ltYm9sSGVpZ2h0SW5QaXRjaGVzKFwidGltZXNpZy5jdXRcIikgfSkpO1xuXHR9IGVsc2UgaWYgKGVsZW0udHlwZSA9PT0gXCJ0ZW1wdXNfaW1wZXJmZWN0dW1cIikge1xuXHRcdGFic2VsZW0uYWRkUmlnaHQobmV3IFJlbGF0aXZlRWxlbWVudChcInRpbWVzaWcuaW1wZXJmZWN0dW1cIiwgMCwgZ2x5cGhzLmdldFN5bWJvbFdpZHRoKFwidGltZXNpZy5pbXBlcmZlY3R1bVwiKSwgNiwgeyB0aGlja25lc3M6IGdseXBocy5zeW1ib2xIZWlnaHRJblBpdGNoZXMoXCJ0aW1lc2lnLmltcGVyZmVjdHVtXCIpIH0pKTtcblx0fSBlbHNlIGlmIChlbGVtLnR5cGUgPT09IFwidGVtcHVzX2ltcGVyZmVjdHVtX3Byb2xhdGlvXCIpIHtcblx0XHRhYnNlbGVtLmFkZFJpZ2h0KG5ldyBSZWxhdGl2ZUVsZW1lbnQoXCJ0aW1lc2lnLmltcGVyZmVjdHVtMlwiLCAwLCBnbHlwaHMuZ2V0U3ltYm9sV2lkdGgoXCJ0aW1lc2lnLmltcGVyZmVjdHVtMlwiKSwgNiwgeyB0aGlja25lc3M6IGdseXBocy5zeW1ib2xIZWlnaHRJblBpdGNoZXMoXCJ0aW1lc2lnLmltcGVyZmVjdHVtMlwiKSB9KSk7XG5cdH0gZWxzZSBpZiAoZWxlbS50eXBlID09PSBcInRlbXB1c19wZXJmZWN0dW1cIikge1xuXHRcdGFic2VsZW0uYWRkUmlnaHQobmV3IFJlbGF0aXZlRWxlbWVudChcInRpbWVzaWcucGVyZmVjdHVtXCIsIDAsIGdseXBocy5nZXRTeW1ib2xXaWR0aChcInRpbWVzaWcucGVyZmVjdHVtXCIpLCA2LCB7IHRoaWNrbmVzczogZ2x5cGhzLnN5bWJvbEhlaWdodEluUGl0Y2hlcyhcInRpbWVzaWcucGVyZmVjdHVtXCIpIH0pKTtcblx0fSBlbHNlIGlmIChlbGVtLnR5cGUgPT09IFwidGVtcHVzX3BlcmZlY3R1bV9wcm9sYXRpb1wiKSB7XG5cdFx0YWJzZWxlbS5hZGRSaWdodChuZXcgUmVsYXRpdmVFbGVtZW50KFwidGltZXNpZy5wZXJmZWN0dW0yXCIsIDAsIGdseXBocy5nZXRTeW1ib2xXaWR0aChcInRpbWVzaWcucGVyZmVjdHVtMlwiKSwgNiwgeyB0aGlja25lc3M6IGdseXBocy5zeW1ib2xIZWlnaHRJblBpdGNoZXMoXCJ0aW1lc2lnLnBlcmZlY3R1bTJcIikgfSkpO1xuXHR9IGVsc2Uge1xuXHRcdGNvbnNvbGUubG9nKFwidGltZSBzaWduYXR1cmU6XCIsIGVsZW0pO1xuXHR9XG5cdHJldHVybiBhYnNlbGVtO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVUaW1lU2lnbmF0dXJlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/create-time-signature.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/decoration.js":
/*!*************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/decoration.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// abc_decoration.js: Creates a data structure suitable for printing a line of abc\n\nvar DynamicDecoration = __webpack_require__(/*! ./elements/dynamic-decoration */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/dynamic-decoration.js\");\nvar CrescendoElem = __webpack_require__(/*! ./elements/crescendo-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/crescendo-element.js\");\nvar GlissandoElem = __webpack_require__(/*! ./elements/glissando-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/glissando-element.js\");\nvar glyphs = __webpack_require__(/*! ./glyphs */ \"(ssr)/./node_modules/abcjs/src/write/creation/glyphs.js\");\nvar RelativeElement = __webpack_require__(/*! ./elements/relative-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/relative-element.js\");\nvar TieElem = __webpack_require__(/*! ./elements/tie-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/tie-element.js\");\n\nvar Decoration = function Decoration() {\n\tthis.startDiminuendoX = undefined;\n\tthis.startCrescendoX = undefined;\n\tthis.minTop = 12;\t// TODO-PER: this is assuming a 5-line staff. Pass that info in.\n\tthis.minBottom = 0;\n};\n\nvar closeDecoration = function (voice, decoration, pitch, width, abselem, roomtaken, dir, minPitch, accentAbove) {\n\tvar yPos;\n\tfor (var i = 0; i < decoration.length; i++) {\n\t\tif (decoration[i] === \"staccato\" || decoration[i] === \"tenuto\" || (decoration[i] === \"accent\" && !accentAbove)) {\n\t\t\tvar symbol = \"scripts.\" + decoration[i];\n\t\t\tif (decoration[i] === \"accent\") symbol = \"scripts.sforzato\";\n\t\t\tif (yPos === undefined)\n\t\t\t\tyPos = (dir === \"down\") ? pitch + 2 : minPitch - 2;\n\t\t\telse\n\t\t\t\tyPos = (dir === \"down\") ? yPos + 2 : yPos - 2;\n\t\t\tif (decoration[i] === \"accent\") {\n\t\t\t\t// Always place the accent three pitches away, no matter whether that is a line or space.\n\t\t\t\tif (dir === \"up\") yPos--;\n\t\t\t\telse yPos++;\n\t\t\t} else {\n\t\t\t\t// don't place on a stave line. The stave lines are 2,4,6,8,10\n\t\t\t\tswitch (yPos) {\n\t\t\t\t\tcase 2:\n\t\t\t\t\tcase 4:\n\t\t\t\t\tcase 6:\n\t\t\t\t\tcase 8:\n\t\t\t\t\tcase 10:\n\t\t\t\t\t\tif (dir === \"up\") yPos--;\n\t\t\t\t\t\telse yPos++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pitch > 9) yPos++; // take up some room of those that are above\n\t\t\tvar deltaX = width / 2;\n\t\t\tif (glyphs.getSymbolAlign(symbol) !== \"center\") {\n\t\t\t\tdeltaX -= (glyphs.getSymbolWidth(symbol) / 2);\n\t\t\t}\n\t\t\tabselem.addFixedX(new RelativeElement(symbol, deltaX, glyphs.getSymbolWidth(symbol), yPos));\n\t\t}\n\t\tif (decoration[i] === \"slide\" && abselem.heads[0]) {\n\t\t\tvar yPos2 = abselem.heads[0].pitch;\n\t\t\tyPos2 -= 2; // TODO-PER: not sure what this fudge factor is.\n\t\t\tvar blank1 = new RelativeElement(\"\", -roomtaken - 15, 0, yPos2 - 1);\n\t\t\tvar blank2 = new RelativeElement(\"\", -roomtaken - 5, 0, yPos2 + 1);\n\t\t\tabselem.addFixedX(blank1);\n\t\t\tabselem.addFixedX(blank2);\n\t\t\tvoice.addOther(new TieElem({ anchor1: blank1, anchor2: blank2, fixedY: true }));\n\t\t}\n\t}\n\tif (yPos === undefined)\n\t\tyPos = pitch;\n\n\treturn { above: yPos, below: abselem.bottom };\n};\n\nvar volumeDecoration = function (voice, decoration, abselem, positioning) {\n\tfor (var i = 0; i < decoration.length; i++) {\n\t\tswitch (decoration[i]) {\n\t\t\tcase \"p\":\n\t\t\tcase \"mp\":\n\t\t\tcase \"pp\":\n\t\t\tcase \"ppp\":\n\t\t\tcase \"pppp\":\n\t\t\tcase \"f\":\n\t\t\tcase \"ff\":\n\t\t\tcase \"fff\":\n\t\t\tcase \"ffff\":\n\t\t\tcase \"sfz\":\n\t\t\tcase \"mf\":\n\t\t\t\tvar elem = new DynamicDecoration(abselem, decoration[i], positioning);\n\t\t\t\tvoice.addOther(elem);\n\t\t}\n\t}\n};\n\nvar compoundDecoration = function (decoration, pitch, width, abselem, dir) {\n\tfunction highestPitch() {\n\t\tif (abselem.heads.length === 0)\n\t\t\treturn 10;\t// TODO-PER: I don't know if this can happen, but we'll return the top of the staff if so.\n\t\tvar pitch = abselem.heads[0].pitch;\n\t\tfor (var i = 1; i < abselem.heads.length; i++)\n\t\t\tpitch = Math.max(pitch, abselem.heads[i].pitch);\n\t\treturn pitch;\n\t}\n\tfunction lowestPitch() {\n\t\tif (abselem.heads.length === 0)\n\t\t\treturn 2;\t// TODO-PER: I don't know if this can happen, but we'll return the bottom of the staff if so.\n\t\tvar pitch = abselem.heads[0].pitch;\n\t\tfor (var i = 1; i < abselem.heads.length; i++)\n\t\t\tpitch = Math.min(pitch, abselem.heads[i].pitch);\n\t\treturn pitch;\n\t}\n\tfunction compoundDecoration(symbol, count) {\n\t\tvar placement = (dir === 'down') ? lowestPitch() + 1 : highestPitch() + 9;\n\t\tif (dir !== 'down' && count === 1)\n\t\t\tplacement--;\n\t\tvar deltaX = width / 2;\n\t\tdeltaX += (dir === 'down') ? -5 : 3;\n\t\tfor (var i = 0; i < count; i++) {\n\t\t\tplacement -= 1;\n\t\t\tabselem.addFixedX(new RelativeElement(symbol, deltaX, glyphs.getSymbolWidth(symbol), placement));\n\t\t}\n\t}\n\n\tfor (var i = 0; i < decoration.length; i++) {\n\t\tswitch (decoration[i]) {\n\t\t\tcase \"/\": compoundDecoration(\"flags.ugrace\", 1); break;\n\t\t\tcase \"//\": compoundDecoration(\"flags.ugrace\", 2); break;\n\t\t\tcase \"///\": compoundDecoration(\"flags.ugrace\", 3); break;\n\t\t\tcase \"////\": compoundDecoration(\"flags.ugrace\", 4); break;\n\t\t}\n\t}\n};\n\nvar stackedDecoration = function (decoration, width, abselem, yPos, positioning, minTop, minBottom, accentAbove) {\n\tfunction incrementPlacement(placement, height) {\n\t\tif (placement === 'above')\n\t\t\tyPos.above += height;\n\t\telse\n\t\t\tyPos.below -= height;\n\t}\n\tfunction getPlacement(placement) {\n\t\tvar y;\n\t\tif (placement === 'above') {\n\t\t\ty = yPos.above;\n\t\t\tif (y < minTop)\n\t\t\t\ty = minTop;\n\t\t} else {\n\t\t\ty = yPos.below;\n\t\t\tif (y > minBottom)\n\t\t\t\ty = minBottom;\n\t\t}\n\t\treturn y;\n\t}\n\tfunction textDecoration(text, placement, anchor) {\n\t\tvar y = getPlacement(placement);\n\t\tvar textFudge = 2;\n\t\tvar textHeight = 5;\n\t\t// TODO-PER: Get the height of the current font and use that for the thickness.\n\t\tabselem.addFixedX(new RelativeElement(text, width / 2, 0, y + textFudge, { type: \"decoration\", klass: 'ornament', thickness: 3, anchor: anchor }));\n\n\t\tincrementPlacement(placement, textHeight);\n\t}\n\tfunction symbolDecoration(symbol, placement) {\n\t\tvar deltaX = width / 2;\n\t\tif (glyphs.getSymbolAlign(symbol) !== \"center\") {\n\t\t\tdeltaX -= (glyphs.getSymbolWidth(symbol) / 2);\n\t\t}\n\t\tvar height = glyphs.symbolHeightInPitches(symbol) + 1; // adding a little padding so nothing touches.\n\t\tvar y = getPlacement(placement);\n\t\ty = (placement === 'above') ? y + height / 2 : y - height / 2;// Center the element vertically.\n\t\tabselem.addFixedX(new RelativeElement(symbol, deltaX, glyphs.getSymbolWidth(symbol), y, { klass: 'ornament', thickness: glyphs.symbolHeightInPitches(symbol), position: placement }));\n\n\t\tincrementPlacement(placement, height);\n\t}\n\n\tvar symbolList = {\n\t\t\"+\": \"scripts.stopped\",\n\t\t\"open\": \"scripts.open\",\n\t\t\"snap\": \"scripts.snap\",\n\t\t\"wedge\": \"scripts.wedge\",\n\t\t\"thumb\": \"scripts.thumb\",\n\t\t\"shortphrase\": \"scripts.shortphrase\",\n\t\t\"mediumphrase\": \"scripts.mediumphrase\",\n\t\t\"longphrase\": \"scripts.longphrase\",\n\t\t\"trill\": \"scripts.trill\",\n\t\t\"trillh\": \"scripts.trill\",\n\t\t\"roll\": \"scripts.roll\",\n\t\t\"irishroll\": \"scripts.roll\",\n\t\t\"marcato\": \"scripts.umarcato\",\n\t\t\"dmarcato\": \"scripts.dmarcato\",\n\t\t\"umarcato\": \"scripts.umarcato\",\n\t\t\"turn\": \"scripts.turn\",\n\t\t\"uppermordent\": \"scripts.prall\",\n\t\t\"pralltriller\": \"scripts.prall\",\n\t\t\"mordent\": \"scripts.mordent\",\n\t\t\"lowermordent\": \"scripts.mordent\",\n\t\t\"downbow\": \"scripts.downbow\",\n\t\t\"upbow\": \"scripts.upbow\",\n\t\t\"fermata\": \"scripts.ufermata\",\n\t\t\"invertedfermata\": \"scripts.dfermata\",\n\t\t\"breath\": \",\",\n\t\t\"coda\": \"scripts.coda\",\n\t\t\"segno\": \"scripts.segno\"\n\t};\n\n\tvar hasOne = false;\n\tfor (var i = 0; i < decoration.length; i++) {\n\t\tswitch (decoration[i]) {\n\t\t\tcase \"0\":\n\t\t\tcase \"1\":\n\t\t\tcase \"2\":\n\t\t\tcase \"3\":\n\t\t\tcase \"4\":\n\t\t\tcase \"5\":\n\t\t\tcase \"D.C.\":\n\t\t\tcase \"D.S.\":\n\t\t\t\ttextDecoration(decoration[i], positioning, 'middle');\n\t\t\t\thasOne = true;\n\t\t\t\tbreak;\n\t\t\tcase \"D.C.alcoda\":\n\t\t\t\ttextDecoration(\"D.C. al coda\", positioning, 'end');\n\t\t\t\thasOne = true;\n\t\t\t\tbreak;\n\t\t\tcase \"D.C.alfine\":\n\t\t\t\ttextDecoration(\"D.C. al fine\", positioning, 'end');\n\t\t\t\thasOne = true;\n\t\t\t\tbreak;\n\t\t\tcase \"D.S.alcoda\":\n\t\t\t\ttextDecoration(\"D.S. al coda\", positioning, 'end');\n\t\t\t\thasOne = true;\n\t\t\t\tbreak;\n\t\t\tcase \"D.S.alfine\":\n\t\t\t\ttextDecoration(\"D.S. al fine\", positioning, 'end');\n\t\t\t\thasOne = true;\n\t\t\t\tbreak;\n\t\t\tcase \"fine\":\n\t\t\t\ttextDecoration(\"FINE\", positioning, 'middle');\n\t\t\t\thasOne = true;\n\t\t\t\tbreak;\n\t\t\tcase \"+\":\n\t\t\tcase \"open\":\n\t\t\tcase \"snap\":\n\t\t\tcase \"wedge\":\n\t\t\tcase \"thumb\":\n\t\t\tcase \"shortphrase\":\n\t\t\tcase \"mediumphrase\":\n\t\t\tcase \"longphrase\":\n\t\t\tcase \"trill\":\n\t\t\tcase \"trillh\":\n\t\t\tcase \"roll\":\n\t\t\tcase \"irishroll\":\n\t\t\tcase \"marcato\":\n\t\t\tcase \"dmarcato\":\n\t\t\tcase \"turn\":\n\t\t\tcase \"uppermordent\":\n\t\t\tcase \"pralltriller\":\n\t\t\tcase \"mordent\":\n\t\t\tcase \"lowermordent\":\n\t\t\tcase \"downbow\":\n\t\t\tcase \"upbow\":\n\t\t\tcase \"fermata\":\n\t\t\tcase \"breath\":\n\t\t\tcase \"umarcato\":\n\t\t\tcase \"coda\":\n\t\t\tcase \"segno\":\n\t\t\t\tsymbolDecoration(symbolList[decoration[i]], positioning);\n\t\t\t\thasOne = true;\n\t\t\t\tbreak;\n\t\t\tcase \"invertedfermata\":\n\t\t\t\tsymbolDecoration(symbolList[decoration[i]], 'below');\n\t\t\t\thasOne = true;\n\t\t\t\tbreak;\n\t\t\tcase \"mark\":\n\t\t\t\tabselem.klass = \"mark\";\n\t\t\t\tbreak;\n\t\t\tcase \"accent\":\n\t\t\t\tif (accentAbove) {\n\t\t\t\t\tsymbolDecoration(\"scripts.sforzato\", positioning);\n\t\t\t\t\thasOne = true;\n\t\t\t\t}\n\t\t\t\tbreak;\t\n\t\t}\n\t}\n\treturn hasOne;\n};\n\nfunction leftDecoration(decoration, abselem, roomtaken) {\n\tfor (var i = 0; i < decoration.length; i++) {\n\t\tswitch (decoration[i]) {\n\t\t\tcase \"arpeggio\":\n\t\t\t\t// The arpeggio symbol is the height of a note (that is, two Y units). This stacks as many as we need to go from the\n\t\t\t\t// top note to the bottom note. The arpeggio should also be a little taller than the stacked notes, so there is an extra\n\t\t\t\t// one drawn and it is offset by half of a note height (that is, one Y unit).\n\t\t\t\tfor (var j = abselem.abcelem.minpitch - 1; j <= abselem.abcelem.maxpitch; j += 2) {\n\t\t\t\t\tabselem.addExtra(\n\t\t\t\t\t\tnew RelativeElement(\n\t\t\t\t\t\t\t\"scripts.arpeggio\",\n\t\t\t\t\t\t\t-glyphs.getSymbolWidth(\"scripts.arpeggio\") * 2 - roomtaken,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\tj + 2,\n\t\t\t\t\t\t\t{ klass: 'ornament', thickness: glyphs.symbolHeightInPitches(\"scripts.arpeggio\") }\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n\nDecoration.prototype.dynamicDecoration = function (voice, decoration, abselem, positioning) {\n\tvar diminuendo;\n\tvar crescendo;\n\tvar glissando;\n\tfor (var i = 0; i < decoration.length; i++) {\n\t\tswitch (decoration[i]) {\n\t\t\tcase \"diminuendo(\":\n\t\t\t\tthis.startDiminuendoX = abselem;\n\t\t\t\tdiminuendo = undefined;\n\t\t\t\tbreak;\n\t\t\tcase \"diminuendo)\":\n\t\t\t\tdiminuendo = { start: this.startDiminuendoX, stop: abselem };\n\t\t\t\tthis.startDiminuendoX = undefined;\n\t\t\t\tbreak;\n\t\t\tcase \"crescendo(\":\n\t\t\t\tthis.startCrescendoX = abselem;\n\t\t\t\tcrescendo = undefined;\n\t\t\t\tbreak;\n\t\t\tcase \"crescendo)\":\n\t\t\t\tcrescendo = { start: this.startCrescendoX, stop: abselem };\n\t\t\t\tthis.startCrescendoX = undefined;\n\t\t\t\tbreak;\n\t\t\tcase '~(':\n\t\t\tcase \"glissando(\":\n\t\t\t\tthis.startGlissandoX = abselem;\n\t\t\t\tglissando = undefined;\n\t\t\t\tbreak;\n\t\t\tcase '~)':\n\t\t\tcase \"glissando)\":\n\t\t\t\tglissando = { start: this.startGlissandoX, stop: abselem };\n\t\t\t\tthis.startGlissandoX = undefined;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\tif (diminuendo) {\n\t\tvoice.addOther(new CrescendoElem(diminuendo.start, diminuendo.stop, \">\", positioning));\n\t}\n\tif (crescendo) {\n\t\tvoice.addOther(new CrescendoElem(crescendo.start, crescendo.stop, \"<\", positioning));\n\t}\n\tif (glissando) {\n\t\tvoice.addOther(new GlissandoElem(glissando.start, glissando.stop));\n\t}\n};\n\nDecoration.prototype.createDecoration = function (voice, decoration, pitch, width, abselem, roomtaken, dir, minPitch, positioning, hasVocals, accentAbove) {\n\tif (!positioning)\n\t\tpositioning = { ornamentPosition: 'above', volumePosition: hasVocals ? 'above' : 'below', dynamicPosition: hasVocals ? 'above' : 'below' };\n\t// These decorations don't affect the placement of other decorations\n\tvolumeDecoration(voice, decoration, abselem, positioning.volumePosition);\n\tthis.dynamicDecoration(voice, decoration, abselem, positioning.dynamicPosition);\n\tcompoundDecoration(decoration, pitch, width, abselem, dir);\n\n\t// treat staccato, accent, and tenuto first (may need to shift other markers)\n\tvar yPos = closeDecoration(voice, decoration, pitch, width, abselem, roomtaken, dir, minPitch, accentAbove);\n\t// yPos is an object containing 'above' and 'below'. That is the placement of the next symbol on either side.\n\n\tyPos.above = Math.max(yPos.above, this.minTop);\n\tyPos.below = Math.min(yPos.below, minPitch);\n\tvar hasOne = stackedDecoration(decoration, width, abselem, yPos, positioning.ornamentPosition, this.minTop, minPitch, accentAbove);\n\t//if (hasOne) {\n\t\t//\t\t\tabselem.top = Math.max(yPos.above + 3, abselem.top); // TODO-PER: Not sure why we need this fudge factor.\n\t//}\n\tleftDecoration(decoration, abselem, roomtaken);\n};\n\nmodule.exports = Decoration;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2RlY29yYXRpb24uanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsd0JBQXdCLG1CQUFPLENBQUMsbUhBQStCO0FBQy9ELG9CQUFvQixtQkFBTyxDQUFDLGlIQUE4QjtBQUMxRCxvQkFBb0IsbUJBQU8sQ0FBQyxpSEFBOEI7QUFDMUQsYUFBYSxtQkFBTyxDQUFDLHlFQUFVO0FBQy9CLHNCQUFzQixtQkFBTyxDQUFDLCtHQUE2QjtBQUMzRCxjQUFjLG1CQUFPLENBQUMscUdBQXdCOztBQUU5QztBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLHVCQUF1QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGdEQUFnRDtBQUNoRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxVQUFVO0FBQ1Y7O0FBRUE7QUFDQSxpQkFBaUIsdUJBQXVCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0Esa0JBQWtCLDBCQUEwQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esa0JBQWtCLDBCQUEwQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsV0FBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIsdUJBQXVCO0FBQ3hDO0FBQ0Esb0RBQW9EO0FBQ3BELHFEQUFxRDtBQUNyRCxzREFBc0Q7QUFDdEQsdURBQXVEO0FBQ3ZEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFLHFFQUFxRTs7QUFFbEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQ7QUFDekQ7QUFDQSxnRUFBZ0U7QUFDaEUsNEZBQTRGLHlGQUF5Rjs7QUFFckw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLHVCQUF1QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUIsdUJBQXVCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsK0JBQStCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix1QkFBdUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTREO0FBQzVEO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9jcmVhdGlvbi9kZWNvcmF0aW9uLmpzP2U2MmYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gYWJjX2RlY29yYXRpb24uanM6IENyZWF0ZXMgYSBkYXRhIHN0cnVjdHVyZSBzdWl0YWJsZSBmb3IgcHJpbnRpbmcgYSBsaW5lIG9mIGFiY1xuXG52YXIgRHluYW1pY0RlY29yYXRpb24gPSByZXF1aXJlKCcuL2VsZW1lbnRzL2R5bmFtaWMtZGVjb3JhdGlvbicpO1xudmFyIENyZXNjZW5kb0VsZW0gPSByZXF1aXJlKCcuL2VsZW1lbnRzL2NyZXNjZW5kby1lbGVtZW50Jyk7XG52YXIgR2xpc3NhbmRvRWxlbSA9IHJlcXVpcmUoJy4vZWxlbWVudHMvZ2xpc3NhbmRvLWVsZW1lbnQnKTtcbnZhciBnbHlwaHMgPSByZXF1aXJlKCcuL2dseXBocycpO1xudmFyIFJlbGF0aXZlRWxlbWVudCA9IHJlcXVpcmUoJy4vZWxlbWVudHMvcmVsYXRpdmUtZWxlbWVudCcpO1xudmFyIFRpZUVsZW0gPSByZXF1aXJlKCcuL2VsZW1lbnRzL3RpZS1lbGVtZW50Jyk7XG5cbnZhciBEZWNvcmF0aW9uID0gZnVuY3Rpb24gRGVjb3JhdGlvbigpIHtcblx0dGhpcy5zdGFydERpbWludWVuZG9YID0gdW5kZWZpbmVkO1xuXHR0aGlzLnN0YXJ0Q3Jlc2NlbmRvWCA9IHVuZGVmaW5lZDtcblx0dGhpcy5taW5Ub3AgPSAxMjtcdC8vIFRPRE8tUEVSOiB0aGlzIGlzIGFzc3VtaW5nIGEgNS1saW5lIHN0YWZmLiBQYXNzIHRoYXQgaW5mbyBpbi5cblx0dGhpcy5taW5Cb3R0b20gPSAwO1xufTtcblxudmFyIGNsb3NlRGVjb3JhdGlvbiA9IGZ1bmN0aW9uICh2b2ljZSwgZGVjb3JhdGlvbiwgcGl0Y2gsIHdpZHRoLCBhYnNlbGVtLCByb29tdGFrZW4sIGRpciwgbWluUGl0Y2gsIGFjY2VudEFib3ZlKSB7XG5cdHZhciB5UG9zO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRlY29yYXRpb24ubGVuZ3RoOyBpKyspIHtcblx0XHRpZiAoZGVjb3JhdGlvbltpXSA9PT0gXCJzdGFjY2F0b1wiIHx8IGRlY29yYXRpb25baV0gPT09IFwidGVudXRvXCIgfHwgKGRlY29yYXRpb25baV0gPT09IFwiYWNjZW50XCIgJiYgIWFjY2VudEFib3ZlKSkge1xuXHRcdFx0dmFyIHN5bWJvbCA9IFwic2NyaXB0cy5cIiArIGRlY29yYXRpb25baV07XG5cdFx0XHRpZiAoZGVjb3JhdGlvbltpXSA9PT0gXCJhY2NlbnRcIikgc3ltYm9sID0gXCJzY3JpcHRzLnNmb3J6YXRvXCI7XG5cdFx0XHRpZiAoeVBvcyA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0XHR5UG9zID0gKGRpciA9PT0gXCJkb3duXCIpID8gcGl0Y2ggKyAyIDogbWluUGl0Y2ggLSAyO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHR5UG9zID0gKGRpciA9PT0gXCJkb3duXCIpID8geVBvcyArIDIgOiB5UG9zIC0gMjtcblx0XHRcdGlmIChkZWNvcmF0aW9uW2ldID09PSBcImFjY2VudFwiKSB7XG5cdFx0XHRcdC8vIEFsd2F5cyBwbGFjZSB0aGUgYWNjZW50IHRocmVlIHBpdGNoZXMgYXdheSwgbm8gbWF0dGVyIHdoZXRoZXIgdGhhdCBpcyBhIGxpbmUgb3Igc3BhY2UuXG5cdFx0XHRcdGlmIChkaXIgPT09IFwidXBcIikgeVBvcy0tO1xuXHRcdFx0XHRlbHNlIHlQb3MrKztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIGRvbid0IHBsYWNlIG9uIGEgc3RhdmUgbGluZS4gVGhlIHN0YXZlIGxpbmVzIGFyZSAyLDQsNiw4LDEwXG5cdFx0XHRcdHN3aXRjaCAoeVBvcykge1xuXHRcdFx0XHRcdGNhc2UgMjpcblx0XHRcdFx0XHRjYXNlIDQ6XG5cdFx0XHRcdFx0Y2FzZSA2OlxuXHRcdFx0XHRcdGNhc2UgODpcblx0XHRcdFx0XHRjYXNlIDEwOlxuXHRcdFx0XHRcdFx0aWYgKGRpciA9PT0gXCJ1cFwiKSB5UG9zLS07XG5cdFx0XHRcdFx0XHRlbHNlIHlQb3MrKztcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAocGl0Y2ggPiA5KSB5UG9zKys7IC8vIHRha2UgdXAgc29tZSByb29tIG9mIHRob3NlIHRoYXQgYXJlIGFib3ZlXG5cdFx0XHR2YXIgZGVsdGFYID0gd2lkdGggLyAyO1xuXHRcdFx0aWYgKGdseXBocy5nZXRTeW1ib2xBbGlnbihzeW1ib2wpICE9PSBcImNlbnRlclwiKSB7XG5cdFx0XHRcdGRlbHRhWCAtPSAoZ2x5cGhzLmdldFN5bWJvbFdpZHRoKHN5bWJvbCkgLyAyKTtcblx0XHRcdH1cblx0XHRcdGFic2VsZW0uYWRkRml4ZWRYKG5ldyBSZWxhdGl2ZUVsZW1lbnQoc3ltYm9sLCBkZWx0YVgsIGdseXBocy5nZXRTeW1ib2xXaWR0aChzeW1ib2wpLCB5UG9zKSk7XG5cdFx0fVxuXHRcdGlmIChkZWNvcmF0aW9uW2ldID09PSBcInNsaWRlXCIgJiYgYWJzZWxlbS5oZWFkc1swXSkge1xuXHRcdFx0dmFyIHlQb3MyID0gYWJzZWxlbS5oZWFkc1swXS5waXRjaDtcblx0XHRcdHlQb3MyIC09IDI7IC8vIFRPRE8tUEVSOiBub3Qgc3VyZSB3aGF0IHRoaXMgZnVkZ2UgZmFjdG9yIGlzLlxuXHRcdFx0dmFyIGJsYW5rMSA9IG5ldyBSZWxhdGl2ZUVsZW1lbnQoXCJcIiwgLXJvb210YWtlbiAtIDE1LCAwLCB5UG9zMiAtIDEpO1xuXHRcdFx0dmFyIGJsYW5rMiA9IG5ldyBSZWxhdGl2ZUVsZW1lbnQoXCJcIiwgLXJvb210YWtlbiAtIDUsIDAsIHlQb3MyICsgMSk7XG5cdFx0XHRhYnNlbGVtLmFkZEZpeGVkWChibGFuazEpO1xuXHRcdFx0YWJzZWxlbS5hZGRGaXhlZFgoYmxhbmsyKTtcblx0XHRcdHZvaWNlLmFkZE90aGVyKG5ldyBUaWVFbGVtKHsgYW5jaG9yMTogYmxhbmsxLCBhbmNob3IyOiBibGFuazIsIGZpeGVkWTogdHJ1ZSB9KSk7XG5cdFx0fVxuXHR9XG5cdGlmICh5UG9zID09PSB1bmRlZmluZWQpXG5cdFx0eVBvcyA9IHBpdGNoO1xuXG5cdHJldHVybiB7IGFib3ZlOiB5UG9zLCBiZWxvdzogYWJzZWxlbS5ib3R0b20gfTtcbn07XG5cbnZhciB2b2x1bWVEZWNvcmF0aW9uID0gZnVuY3Rpb24gKHZvaWNlLCBkZWNvcmF0aW9uLCBhYnNlbGVtLCBwb3NpdGlvbmluZykge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRlY29yYXRpb24ubGVuZ3RoOyBpKyspIHtcblx0XHRzd2l0Y2ggKGRlY29yYXRpb25baV0pIHtcblx0XHRcdGNhc2UgXCJwXCI6XG5cdFx0XHRjYXNlIFwibXBcIjpcblx0XHRcdGNhc2UgXCJwcFwiOlxuXHRcdFx0Y2FzZSBcInBwcFwiOlxuXHRcdFx0Y2FzZSBcInBwcHBcIjpcblx0XHRcdGNhc2UgXCJmXCI6XG5cdFx0XHRjYXNlIFwiZmZcIjpcblx0XHRcdGNhc2UgXCJmZmZcIjpcblx0XHRcdGNhc2UgXCJmZmZmXCI6XG5cdFx0XHRjYXNlIFwic2Z6XCI6XG5cdFx0XHRjYXNlIFwibWZcIjpcblx0XHRcdFx0dmFyIGVsZW0gPSBuZXcgRHluYW1pY0RlY29yYXRpb24oYWJzZWxlbSwgZGVjb3JhdGlvbltpXSwgcG9zaXRpb25pbmcpO1xuXHRcdFx0XHR2b2ljZS5hZGRPdGhlcihlbGVtKTtcblx0XHR9XG5cdH1cbn07XG5cbnZhciBjb21wb3VuZERlY29yYXRpb24gPSBmdW5jdGlvbiAoZGVjb3JhdGlvbiwgcGl0Y2gsIHdpZHRoLCBhYnNlbGVtLCBkaXIpIHtcblx0ZnVuY3Rpb24gaGlnaGVzdFBpdGNoKCkge1xuXHRcdGlmIChhYnNlbGVtLmhlYWRzLmxlbmd0aCA9PT0gMClcblx0XHRcdHJldHVybiAxMDtcdC8vIFRPRE8tUEVSOiBJIGRvbid0IGtub3cgaWYgdGhpcyBjYW4gaGFwcGVuLCBidXQgd2UnbGwgcmV0dXJuIHRoZSB0b3Agb2YgdGhlIHN0YWZmIGlmIHNvLlxuXHRcdHZhciBwaXRjaCA9IGFic2VsZW0uaGVhZHNbMF0ucGl0Y2g7XG5cdFx0Zm9yICh2YXIgaSA9IDE7IGkgPCBhYnNlbGVtLmhlYWRzLmxlbmd0aDsgaSsrKVxuXHRcdFx0cGl0Y2ggPSBNYXRoLm1heChwaXRjaCwgYWJzZWxlbS5oZWFkc1tpXS5waXRjaCk7XG5cdFx0cmV0dXJuIHBpdGNoO1xuXHR9XG5cdGZ1bmN0aW9uIGxvd2VzdFBpdGNoKCkge1xuXHRcdGlmIChhYnNlbGVtLmhlYWRzLmxlbmd0aCA9PT0gMClcblx0XHRcdHJldHVybiAyO1x0Ly8gVE9ETy1QRVI6IEkgZG9uJ3Qga25vdyBpZiB0aGlzIGNhbiBoYXBwZW4sIGJ1dCB3ZSdsbCByZXR1cm4gdGhlIGJvdHRvbSBvZiB0aGUgc3RhZmYgaWYgc28uXG5cdFx0dmFyIHBpdGNoID0gYWJzZWxlbS5oZWFkc1swXS5waXRjaDtcblx0XHRmb3IgKHZhciBpID0gMTsgaSA8IGFic2VsZW0uaGVhZHMubGVuZ3RoOyBpKyspXG5cdFx0XHRwaXRjaCA9IE1hdGgubWluKHBpdGNoLCBhYnNlbGVtLmhlYWRzW2ldLnBpdGNoKTtcblx0XHRyZXR1cm4gcGl0Y2g7XG5cdH1cblx0ZnVuY3Rpb24gY29tcG91bmREZWNvcmF0aW9uKHN5bWJvbCwgY291bnQpIHtcblx0XHR2YXIgcGxhY2VtZW50ID0gKGRpciA9PT0gJ2Rvd24nKSA/IGxvd2VzdFBpdGNoKCkgKyAxIDogaGlnaGVzdFBpdGNoKCkgKyA5O1xuXHRcdGlmIChkaXIgIT09ICdkb3duJyAmJiBjb3VudCA9PT0gMSlcblx0XHRcdHBsYWNlbWVudC0tO1xuXHRcdHZhciBkZWx0YVggPSB3aWR0aCAvIDI7XG5cdFx0ZGVsdGFYICs9IChkaXIgPT09ICdkb3duJykgPyAtNSA6IDM7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG5cdFx0XHRwbGFjZW1lbnQgLT0gMTtcblx0XHRcdGFic2VsZW0uYWRkRml4ZWRYKG5ldyBSZWxhdGl2ZUVsZW1lbnQoc3ltYm9sLCBkZWx0YVgsIGdseXBocy5nZXRTeW1ib2xXaWR0aChzeW1ib2wpLCBwbGFjZW1lbnQpKTtcblx0XHR9XG5cdH1cblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRlY29yYXRpb24ubGVuZ3RoOyBpKyspIHtcblx0XHRzd2l0Y2ggKGRlY29yYXRpb25baV0pIHtcblx0XHRcdGNhc2UgXCIvXCI6IGNvbXBvdW5kRGVjb3JhdGlvbihcImZsYWdzLnVncmFjZVwiLCAxKTsgYnJlYWs7XG5cdFx0XHRjYXNlIFwiLy9cIjogY29tcG91bmREZWNvcmF0aW9uKFwiZmxhZ3MudWdyYWNlXCIsIDIpOyBicmVhaztcblx0XHRcdGNhc2UgXCIvLy9cIjogY29tcG91bmREZWNvcmF0aW9uKFwiZmxhZ3MudWdyYWNlXCIsIDMpOyBicmVhaztcblx0XHRcdGNhc2UgXCIvLy8vXCI6IGNvbXBvdW5kRGVjb3JhdGlvbihcImZsYWdzLnVncmFjZVwiLCA0KTsgYnJlYWs7XG5cdFx0fVxuXHR9XG59O1xuXG52YXIgc3RhY2tlZERlY29yYXRpb24gPSBmdW5jdGlvbiAoZGVjb3JhdGlvbiwgd2lkdGgsIGFic2VsZW0sIHlQb3MsIHBvc2l0aW9uaW5nLCBtaW5Ub3AsIG1pbkJvdHRvbSwgYWNjZW50QWJvdmUpIHtcblx0ZnVuY3Rpb24gaW5jcmVtZW50UGxhY2VtZW50KHBsYWNlbWVudCwgaGVpZ2h0KSB7XG5cdFx0aWYgKHBsYWNlbWVudCA9PT0gJ2Fib3ZlJylcblx0XHRcdHlQb3MuYWJvdmUgKz0gaGVpZ2h0O1xuXHRcdGVsc2Vcblx0XHRcdHlQb3MuYmVsb3cgLT0gaGVpZ2h0O1xuXHR9XG5cdGZ1bmN0aW9uIGdldFBsYWNlbWVudChwbGFjZW1lbnQpIHtcblx0XHR2YXIgeTtcblx0XHRpZiAocGxhY2VtZW50ID09PSAnYWJvdmUnKSB7XG5cdFx0XHR5ID0geVBvcy5hYm92ZTtcblx0XHRcdGlmICh5IDwgbWluVG9wKVxuXHRcdFx0XHR5ID0gbWluVG9wO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR5ID0geVBvcy5iZWxvdztcblx0XHRcdGlmICh5ID4gbWluQm90dG9tKVxuXHRcdFx0XHR5ID0gbWluQm90dG9tO1xuXHRcdH1cblx0XHRyZXR1cm4geTtcblx0fVxuXHRmdW5jdGlvbiB0ZXh0RGVjb3JhdGlvbih0ZXh0LCBwbGFjZW1lbnQsIGFuY2hvcikge1xuXHRcdHZhciB5ID0gZ2V0UGxhY2VtZW50KHBsYWNlbWVudCk7XG5cdFx0dmFyIHRleHRGdWRnZSA9IDI7XG5cdFx0dmFyIHRleHRIZWlnaHQgPSA1O1xuXHRcdC8vIFRPRE8tUEVSOiBHZXQgdGhlIGhlaWdodCBvZiB0aGUgY3VycmVudCBmb250IGFuZCB1c2UgdGhhdCBmb3IgdGhlIHRoaWNrbmVzcy5cblx0XHRhYnNlbGVtLmFkZEZpeGVkWChuZXcgUmVsYXRpdmVFbGVtZW50KHRleHQsIHdpZHRoIC8gMiwgMCwgeSArIHRleHRGdWRnZSwgeyB0eXBlOiBcImRlY29yYXRpb25cIiwga2xhc3M6ICdvcm5hbWVudCcsIHRoaWNrbmVzczogMywgYW5jaG9yOiBhbmNob3IgfSkpO1xuXG5cdFx0aW5jcmVtZW50UGxhY2VtZW50KHBsYWNlbWVudCwgdGV4dEhlaWdodCk7XG5cdH1cblx0ZnVuY3Rpb24gc3ltYm9sRGVjb3JhdGlvbihzeW1ib2wsIHBsYWNlbWVudCkge1xuXHRcdHZhciBkZWx0YVggPSB3aWR0aCAvIDI7XG5cdFx0aWYgKGdseXBocy5nZXRTeW1ib2xBbGlnbihzeW1ib2wpICE9PSBcImNlbnRlclwiKSB7XG5cdFx0XHRkZWx0YVggLT0gKGdseXBocy5nZXRTeW1ib2xXaWR0aChzeW1ib2wpIC8gMik7XG5cdFx0fVxuXHRcdHZhciBoZWlnaHQgPSBnbHlwaHMuc3ltYm9sSGVpZ2h0SW5QaXRjaGVzKHN5bWJvbCkgKyAxOyAvLyBhZGRpbmcgYSBsaXR0bGUgcGFkZGluZyBzbyBub3RoaW5nIHRvdWNoZXMuXG5cdFx0dmFyIHkgPSBnZXRQbGFjZW1lbnQocGxhY2VtZW50KTtcblx0XHR5ID0gKHBsYWNlbWVudCA9PT0gJ2Fib3ZlJykgPyB5ICsgaGVpZ2h0IC8gMiA6IHkgLSBoZWlnaHQgLyAyOy8vIENlbnRlciB0aGUgZWxlbWVudCB2ZXJ0aWNhbGx5LlxuXHRcdGFic2VsZW0uYWRkRml4ZWRYKG5ldyBSZWxhdGl2ZUVsZW1lbnQoc3ltYm9sLCBkZWx0YVgsIGdseXBocy5nZXRTeW1ib2xXaWR0aChzeW1ib2wpLCB5LCB7IGtsYXNzOiAnb3JuYW1lbnQnLCB0aGlja25lc3M6IGdseXBocy5zeW1ib2xIZWlnaHRJblBpdGNoZXMoc3ltYm9sKSwgcG9zaXRpb246IHBsYWNlbWVudCB9KSk7XG5cblx0XHRpbmNyZW1lbnRQbGFjZW1lbnQocGxhY2VtZW50LCBoZWlnaHQpO1xuXHR9XG5cblx0dmFyIHN5bWJvbExpc3QgPSB7XG5cdFx0XCIrXCI6IFwic2NyaXB0cy5zdG9wcGVkXCIsXG5cdFx0XCJvcGVuXCI6IFwic2NyaXB0cy5vcGVuXCIsXG5cdFx0XCJzbmFwXCI6IFwic2NyaXB0cy5zbmFwXCIsXG5cdFx0XCJ3ZWRnZVwiOiBcInNjcmlwdHMud2VkZ2VcIixcblx0XHRcInRodW1iXCI6IFwic2NyaXB0cy50aHVtYlwiLFxuXHRcdFwic2hvcnRwaHJhc2VcIjogXCJzY3JpcHRzLnNob3J0cGhyYXNlXCIsXG5cdFx0XCJtZWRpdW1waHJhc2VcIjogXCJzY3JpcHRzLm1lZGl1bXBocmFzZVwiLFxuXHRcdFwibG9uZ3BocmFzZVwiOiBcInNjcmlwdHMubG9uZ3BocmFzZVwiLFxuXHRcdFwidHJpbGxcIjogXCJzY3JpcHRzLnRyaWxsXCIsXG5cdFx0XCJ0cmlsbGhcIjogXCJzY3JpcHRzLnRyaWxsXCIsXG5cdFx0XCJyb2xsXCI6IFwic2NyaXB0cy5yb2xsXCIsXG5cdFx0XCJpcmlzaHJvbGxcIjogXCJzY3JpcHRzLnJvbGxcIixcblx0XHRcIm1hcmNhdG9cIjogXCJzY3JpcHRzLnVtYXJjYXRvXCIsXG5cdFx0XCJkbWFyY2F0b1wiOiBcInNjcmlwdHMuZG1hcmNhdG9cIixcblx0XHRcInVtYXJjYXRvXCI6IFwic2NyaXB0cy51bWFyY2F0b1wiLFxuXHRcdFwidHVyblwiOiBcInNjcmlwdHMudHVyblwiLFxuXHRcdFwidXBwZXJtb3JkZW50XCI6IFwic2NyaXB0cy5wcmFsbFwiLFxuXHRcdFwicHJhbGx0cmlsbGVyXCI6IFwic2NyaXB0cy5wcmFsbFwiLFxuXHRcdFwibW9yZGVudFwiOiBcInNjcmlwdHMubW9yZGVudFwiLFxuXHRcdFwibG93ZXJtb3JkZW50XCI6IFwic2NyaXB0cy5tb3JkZW50XCIsXG5cdFx0XCJkb3duYm93XCI6IFwic2NyaXB0cy5kb3duYm93XCIsXG5cdFx0XCJ1cGJvd1wiOiBcInNjcmlwdHMudXBib3dcIixcblx0XHRcImZlcm1hdGFcIjogXCJzY3JpcHRzLnVmZXJtYXRhXCIsXG5cdFx0XCJpbnZlcnRlZGZlcm1hdGFcIjogXCJzY3JpcHRzLmRmZXJtYXRhXCIsXG5cdFx0XCJicmVhdGhcIjogXCIsXCIsXG5cdFx0XCJjb2RhXCI6IFwic2NyaXB0cy5jb2RhXCIsXG5cdFx0XCJzZWdub1wiOiBcInNjcmlwdHMuc2Vnbm9cIlxuXHR9O1xuXG5cdHZhciBoYXNPbmUgPSBmYWxzZTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWNvcmF0aW9uLmxlbmd0aDsgaSsrKSB7XG5cdFx0c3dpdGNoIChkZWNvcmF0aW9uW2ldKSB7XG5cdFx0XHRjYXNlIFwiMFwiOlxuXHRcdFx0Y2FzZSBcIjFcIjpcblx0XHRcdGNhc2UgXCIyXCI6XG5cdFx0XHRjYXNlIFwiM1wiOlxuXHRcdFx0Y2FzZSBcIjRcIjpcblx0XHRcdGNhc2UgXCI1XCI6XG5cdFx0XHRjYXNlIFwiRC5DLlwiOlxuXHRcdFx0Y2FzZSBcIkQuUy5cIjpcblx0XHRcdFx0dGV4dERlY29yYXRpb24oZGVjb3JhdGlvbltpXSwgcG9zaXRpb25pbmcsICdtaWRkbGUnKTtcblx0XHRcdFx0aGFzT25lID0gdHJ1ZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiRC5DLmFsY29kYVwiOlxuXHRcdFx0XHR0ZXh0RGVjb3JhdGlvbihcIkQuQy4gYWwgY29kYVwiLCBwb3NpdGlvbmluZywgJ2VuZCcpO1xuXHRcdFx0XHRoYXNPbmUgPSB0cnVlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJELkMuYWxmaW5lXCI6XG5cdFx0XHRcdHRleHREZWNvcmF0aW9uKFwiRC5DLiBhbCBmaW5lXCIsIHBvc2l0aW9uaW5nLCAnZW5kJyk7XG5cdFx0XHRcdGhhc09uZSA9IHRydWU7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcIkQuUy5hbGNvZGFcIjpcblx0XHRcdFx0dGV4dERlY29yYXRpb24oXCJELlMuIGFsIGNvZGFcIiwgcG9zaXRpb25pbmcsICdlbmQnKTtcblx0XHRcdFx0aGFzT25lID0gdHJ1ZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiRC5TLmFsZmluZVwiOlxuXHRcdFx0XHR0ZXh0RGVjb3JhdGlvbihcIkQuUy4gYWwgZmluZVwiLCBwb3NpdGlvbmluZywgJ2VuZCcpO1xuXHRcdFx0XHRoYXNPbmUgPSB0cnVlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJmaW5lXCI6XG5cdFx0XHRcdHRleHREZWNvcmF0aW9uKFwiRklORVwiLCBwb3NpdGlvbmluZywgJ21pZGRsZScpO1xuXHRcdFx0XHRoYXNPbmUgPSB0cnVlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCIrXCI6XG5cdFx0XHRjYXNlIFwib3BlblwiOlxuXHRcdFx0Y2FzZSBcInNuYXBcIjpcblx0XHRcdGNhc2UgXCJ3ZWRnZVwiOlxuXHRcdFx0Y2FzZSBcInRodW1iXCI6XG5cdFx0XHRjYXNlIFwic2hvcnRwaHJhc2VcIjpcblx0XHRcdGNhc2UgXCJtZWRpdW1waHJhc2VcIjpcblx0XHRcdGNhc2UgXCJsb25ncGhyYXNlXCI6XG5cdFx0XHRjYXNlIFwidHJpbGxcIjpcblx0XHRcdGNhc2UgXCJ0cmlsbGhcIjpcblx0XHRcdGNhc2UgXCJyb2xsXCI6XG5cdFx0XHRjYXNlIFwiaXJpc2hyb2xsXCI6XG5cdFx0XHRjYXNlIFwibWFyY2F0b1wiOlxuXHRcdFx0Y2FzZSBcImRtYXJjYXRvXCI6XG5cdFx0XHRjYXNlIFwidHVyblwiOlxuXHRcdFx0Y2FzZSBcInVwcGVybW9yZGVudFwiOlxuXHRcdFx0Y2FzZSBcInByYWxsdHJpbGxlclwiOlxuXHRcdFx0Y2FzZSBcIm1vcmRlbnRcIjpcblx0XHRcdGNhc2UgXCJsb3dlcm1vcmRlbnRcIjpcblx0XHRcdGNhc2UgXCJkb3duYm93XCI6XG5cdFx0XHRjYXNlIFwidXBib3dcIjpcblx0XHRcdGNhc2UgXCJmZXJtYXRhXCI6XG5cdFx0XHRjYXNlIFwiYnJlYXRoXCI6XG5cdFx0XHRjYXNlIFwidW1hcmNhdG9cIjpcblx0XHRcdGNhc2UgXCJjb2RhXCI6XG5cdFx0XHRjYXNlIFwic2Vnbm9cIjpcblx0XHRcdFx0c3ltYm9sRGVjb3JhdGlvbihzeW1ib2xMaXN0W2RlY29yYXRpb25baV1dLCBwb3NpdGlvbmluZyk7XG5cdFx0XHRcdGhhc09uZSA9IHRydWU7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImludmVydGVkZmVybWF0YVwiOlxuXHRcdFx0XHRzeW1ib2xEZWNvcmF0aW9uKHN5bWJvbExpc3RbZGVjb3JhdGlvbltpXV0sICdiZWxvdycpO1xuXHRcdFx0XHRoYXNPbmUgPSB0cnVlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJtYXJrXCI6XG5cdFx0XHRcdGFic2VsZW0ua2xhc3MgPSBcIm1hcmtcIjtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiYWNjZW50XCI6XG5cdFx0XHRcdGlmIChhY2NlbnRBYm92ZSkge1xuXHRcdFx0XHRcdHN5bWJvbERlY29yYXRpb24oXCJzY3JpcHRzLnNmb3J6YXRvXCIsIHBvc2l0aW9uaW5nKTtcblx0XHRcdFx0XHRoYXNPbmUgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1x0XG5cdFx0fVxuXHR9XG5cdHJldHVybiBoYXNPbmU7XG59O1xuXG5mdW5jdGlvbiBsZWZ0RGVjb3JhdGlvbihkZWNvcmF0aW9uLCBhYnNlbGVtLCByb29tdGFrZW4pIHtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWNvcmF0aW9uLmxlbmd0aDsgaSsrKSB7XG5cdFx0c3dpdGNoIChkZWNvcmF0aW9uW2ldKSB7XG5cdFx0XHRjYXNlIFwiYXJwZWdnaW9cIjpcblx0XHRcdFx0Ly8gVGhlIGFycGVnZ2lvIHN5bWJvbCBpcyB0aGUgaGVpZ2h0IG9mIGEgbm90ZSAodGhhdCBpcywgdHdvIFkgdW5pdHMpLiBUaGlzIHN0YWNrcyBhcyBtYW55IGFzIHdlIG5lZWQgdG8gZ28gZnJvbSB0aGVcblx0XHRcdFx0Ly8gdG9wIG5vdGUgdG8gdGhlIGJvdHRvbSBub3RlLiBUaGUgYXJwZWdnaW8gc2hvdWxkIGFsc28gYmUgYSBsaXR0bGUgdGFsbGVyIHRoYW4gdGhlIHN0YWNrZWQgbm90ZXMsIHNvIHRoZXJlIGlzIGFuIGV4dHJhXG5cdFx0XHRcdC8vIG9uZSBkcmF3biBhbmQgaXQgaXMgb2Zmc2V0IGJ5IGhhbGYgb2YgYSBub3RlIGhlaWdodCAodGhhdCBpcywgb25lIFkgdW5pdCkuXG5cdFx0XHRcdGZvciAodmFyIGogPSBhYnNlbGVtLmFiY2VsZW0ubWlucGl0Y2ggLSAxOyBqIDw9IGFic2VsZW0uYWJjZWxlbS5tYXhwaXRjaDsgaiArPSAyKSB7XG5cdFx0XHRcdFx0YWJzZWxlbS5hZGRFeHRyYShcblx0XHRcdFx0XHRcdG5ldyBSZWxhdGl2ZUVsZW1lbnQoXG5cdFx0XHRcdFx0XHRcdFwic2NyaXB0cy5hcnBlZ2dpb1wiLFxuXHRcdFx0XHRcdFx0XHQtZ2x5cGhzLmdldFN5bWJvbFdpZHRoKFwic2NyaXB0cy5hcnBlZ2dpb1wiKSAqIDIgLSByb29tdGFrZW4sXG5cdFx0XHRcdFx0XHRcdDAsXG5cdFx0XHRcdFx0XHRcdGogKyAyLFxuXHRcdFx0XHRcdFx0XHR7IGtsYXNzOiAnb3JuYW1lbnQnLCB0aGlja25lc3M6IGdseXBocy5zeW1ib2xIZWlnaHRJblBpdGNoZXMoXCJzY3JpcHRzLmFycGVnZ2lvXCIpIH1cblx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxufVxuXG5EZWNvcmF0aW9uLnByb3RvdHlwZS5keW5hbWljRGVjb3JhdGlvbiA9IGZ1bmN0aW9uICh2b2ljZSwgZGVjb3JhdGlvbiwgYWJzZWxlbSwgcG9zaXRpb25pbmcpIHtcblx0dmFyIGRpbWludWVuZG87XG5cdHZhciBjcmVzY2VuZG87XG5cdHZhciBnbGlzc2FuZG87XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVjb3JhdGlvbi5sZW5ndGg7IGkrKykge1xuXHRcdHN3aXRjaCAoZGVjb3JhdGlvbltpXSkge1xuXHRcdFx0Y2FzZSBcImRpbWludWVuZG8oXCI6XG5cdFx0XHRcdHRoaXMuc3RhcnREaW1pbnVlbmRvWCA9IGFic2VsZW07XG5cdFx0XHRcdGRpbWludWVuZG8gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImRpbWludWVuZG8pXCI6XG5cdFx0XHRcdGRpbWludWVuZG8gPSB7IHN0YXJ0OiB0aGlzLnN0YXJ0RGltaW51ZW5kb1gsIHN0b3A6IGFic2VsZW0gfTtcblx0XHRcdFx0dGhpcy5zdGFydERpbWludWVuZG9YID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJjcmVzY2VuZG8oXCI6XG5cdFx0XHRcdHRoaXMuc3RhcnRDcmVzY2VuZG9YID0gYWJzZWxlbTtcblx0XHRcdFx0Y3Jlc2NlbmRvID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJjcmVzY2VuZG8pXCI6XG5cdFx0XHRcdGNyZXNjZW5kbyA9IHsgc3RhcnQ6IHRoaXMuc3RhcnRDcmVzY2VuZG9YLCBzdG9wOiBhYnNlbGVtIH07XG5cdFx0XHRcdHRoaXMuc3RhcnRDcmVzY2VuZG9YID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ34oJzpcblx0XHRcdGNhc2UgXCJnbGlzc2FuZG8oXCI6XG5cdFx0XHRcdHRoaXMuc3RhcnRHbGlzc2FuZG9YID0gYWJzZWxlbTtcblx0XHRcdFx0Z2xpc3NhbmRvID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ34pJzpcblx0XHRcdGNhc2UgXCJnbGlzc2FuZG8pXCI6XG5cdFx0XHRcdGdsaXNzYW5kbyA9IHsgc3RhcnQ6IHRoaXMuc3RhcnRHbGlzc2FuZG9YLCBzdG9wOiBhYnNlbGVtIH07XG5cdFx0XHRcdHRoaXMuc3RhcnRHbGlzc2FuZG9YID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdH1cblx0aWYgKGRpbWludWVuZG8pIHtcblx0XHR2b2ljZS5hZGRPdGhlcihuZXcgQ3Jlc2NlbmRvRWxlbShkaW1pbnVlbmRvLnN0YXJ0LCBkaW1pbnVlbmRvLnN0b3AsIFwiPlwiLCBwb3NpdGlvbmluZykpO1xuXHR9XG5cdGlmIChjcmVzY2VuZG8pIHtcblx0XHR2b2ljZS5hZGRPdGhlcihuZXcgQ3Jlc2NlbmRvRWxlbShjcmVzY2VuZG8uc3RhcnQsIGNyZXNjZW5kby5zdG9wLCBcIjxcIiwgcG9zaXRpb25pbmcpKTtcblx0fVxuXHRpZiAoZ2xpc3NhbmRvKSB7XG5cdFx0dm9pY2UuYWRkT3RoZXIobmV3IEdsaXNzYW5kb0VsZW0oZ2xpc3NhbmRvLnN0YXJ0LCBnbGlzc2FuZG8uc3RvcCkpO1xuXHR9XG59O1xuXG5EZWNvcmF0aW9uLnByb3RvdHlwZS5jcmVhdGVEZWNvcmF0aW9uID0gZnVuY3Rpb24gKHZvaWNlLCBkZWNvcmF0aW9uLCBwaXRjaCwgd2lkdGgsIGFic2VsZW0sIHJvb210YWtlbiwgZGlyLCBtaW5QaXRjaCwgcG9zaXRpb25pbmcsIGhhc1ZvY2FscywgYWNjZW50QWJvdmUpIHtcblx0aWYgKCFwb3NpdGlvbmluZylcblx0XHRwb3NpdGlvbmluZyA9IHsgb3JuYW1lbnRQb3NpdGlvbjogJ2Fib3ZlJywgdm9sdW1lUG9zaXRpb246IGhhc1ZvY2FscyA/ICdhYm92ZScgOiAnYmVsb3cnLCBkeW5hbWljUG9zaXRpb246IGhhc1ZvY2FscyA/ICdhYm92ZScgOiAnYmVsb3cnIH07XG5cdC8vIFRoZXNlIGRlY29yYXRpb25zIGRvbid0IGFmZmVjdCB0aGUgcGxhY2VtZW50IG9mIG90aGVyIGRlY29yYXRpb25zXG5cdHZvbHVtZURlY29yYXRpb24odm9pY2UsIGRlY29yYXRpb24sIGFic2VsZW0sIHBvc2l0aW9uaW5nLnZvbHVtZVBvc2l0aW9uKTtcblx0dGhpcy5keW5hbWljRGVjb3JhdGlvbih2b2ljZSwgZGVjb3JhdGlvbiwgYWJzZWxlbSwgcG9zaXRpb25pbmcuZHluYW1pY1Bvc2l0aW9uKTtcblx0Y29tcG91bmREZWNvcmF0aW9uKGRlY29yYXRpb24sIHBpdGNoLCB3aWR0aCwgYWJzZWxlbSwgZGlyKTtcblxuXHQvLyB0cmVhdCBzdGFjY2F0bywgYWNjZW50LCBhbmQgdGVudXRvIGZpcnN0IChtYXkgbmVlZCB0byBzaGlmdCBvdGhlciBtYXJrZXJzKVxuXHR2YXIgeVBvcyA9IGNsb3NlRGVjb3JhdGlvbih2b2ljZSwgZGVjb3JhdGlvbiwgcGl0Y2gsIHdpZHRoLCBhYnNlbGVtLCByb29tdGFrZW4sIGRpciwgbWluUGl0Y2gsIGFjY2VudEFib3ZlKTtcblx0Ly8geVBvcyBpcyBhbiBvYmplY3QgY29udGFpbmluZyAnYWJvdmUnIGFuZCAnYmVsb3cnLiBUaGF0IGlzIHRoZSBwbGFjZW1lbnQgb2YgdGhlIG5leHQgc3ltYm9sIG9uIGVpdGhlciBzaWRlLlxuXG5cdHlQb3MuYWJvdmUgPSBNYXRoLm1heCh5UG9zLmFib3ZlLCB0aGlzLm1pblRvcCk7XG5cdHlQb3MuYmVsb3cgPSBNYXRoLm1pbih5UG9zLmJlbG93LCBtaW5QaXRjaCk7XG5cdHZhciBoYXNPbmUgPSBzdGFja2VkRGVjb3JhdGlvbihkZWNvcmF0aW9uLCB3aWR0aCwgYWJzZWxlbSwgeVBvcywgcG9zaXRpb25pbmcub3JuYW1lbnRQb3NpdGlvbiwgdGhpcy5taW5Ub3AsIG1pblBpdGNoLCBhY2NlbnRBYm92ZSk7XG5cdC8vaWYgKGhhc09uZSkge1xuXHRcdC8vXHRcdFx0YWJzZWxlbS50b3AgPSBNYXRoLm1heCh5UG9zLmFib3ZlICsgMywgYWJzZWxlbS50b3ApOyAvLyBUT0RPLVBFUjogTm90IHN1cmUgd2h5IHdlIG5lZWQgdGhpcyBmdWRnZSBmYWN0b3IuXG5cdC8vfVxuXHRsZWZ0RGVjb3JhdGlvbihkZWNvcmF0aW9uLCBhYnNlbGVtLCByb29tdGFrZW4pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEZWNvcmF0aW9uO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/decoration.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/absolute-element.js":
/*!****************************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/absolute-element.js ***!
  \****************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_absolute_element.js: Definition of the AbsoluteElement class.\n\nvar highlight = __webpack_require__(/*! ../../interactive/highlight */ \"(ssr)/./node_modules/abcjs/src/write/interactive/highlight.js\");\nvar unhighlight = __webpack_require__(/*! ../../interactive/unhighlight */ \"(ssr)/./node_modules/abcjs/src/write/interactive/unhighlight.js\");\n\n// Everything that is placed in the SVG is first created as an absolute element. This is one unit of graphic information.\n// That is, it embodies a concept: a clef, a time signature, a bar line,etc. or most complexly:\n// a note with its accidental, grace note, chord symbol, trill, stem, eighth flags, etc.\n// In the largest sense, these are placed on the page at a particular place that is determined during the layout phase.\n// This object doesn't contain any of the drawing information, though. That information is contained in an array of\n// RelativeElements as the \"children\" of this class.\n// During the layout phase, the width of all the children is calculated and the X coordinate of the absolute element is set.\n//\n// So, after the AbsoluteElement is placed, then its children can be placed relative to that. There are different types of\n// relative elements that are placed with different rules:\n// 1) Fixed - these elements don't move relative to the absolute element's coordinates. These are things like the notehead,\n// any ledger lines, accidentals, etc.\n// 2) Slotted - these elements can move vertically and don't get Y coordinates until after the absolute element is placed.\n// These are things like the chord symbol, many decorations, the lyrics, etc.\n//\n// Relative elements are also classified by how they are related. This could be:\n// 1) Increases the absolute element's width to the left. This doesn't change the center point of\n// the absolute element, so adding a sharp to the note won't move it to the right. However, if the elements\n// are close together then this enforces a minimum distance.\n// 2) Has no effect on the width. Annotations and the tempo act like this. No matter how long they are the width doesn't change.\n// 3) Increases the absolute element's width to the right. This doesn't change the center point,\n// but it will increase the minimum distance.\n// 4) Sets the width on both sides. This is the note heads. They are centered on both sides of the absolute element's X coordinate.\n\n// duration - actual musical duration - different from notehead duration in triplets. refer to abcelem to get the notehead duration\n// minspacing - spacing which must be taken on top of the width defined by the duration\n// type is a meta-type for the element. It is not necessary for drawing, but it is useful to make semantic sense of the element. For instance, it can be used in the element's class name.\nvar AbsoluteElement = function AbsoluteElement(abcelem, duration, minspacing, type, tuneNumber, options) {\n\t//\tconsole.log(\"Absolute:\",abcelem, duration, minspacing, type, tuneNumber, options);\n\tif (!options)\n\t\toptions = {};\n\tthis.tuneNumber = tuneNumber;\n\tthis.abcelem = abcelem;\n\tthis.duration = duration;\n\tthis.durationClass = options.durationClassOveride ? options.durationClassOveride : this.duration;\n\tthis.minspacing = minspacing || 0;\n\tthis.x = 0;\n\tthis.children = [];\n\tthis.heads = [];\n\tthis.extra = [];\n\tthis.extraw = 0;\n\tthis.w = 0;\n\tthis.right = [];\n\tthis.invisible = false;\n\tthis.bottom = undefined;\n\tthis.top = undefined;\n\tthis.type = type;\n\n\t// The following are the dimensions of the fixed part of the element.\n\t// That is, the chord text will be a different height depending on lot of factors, but the 8th flag will always be in the same place.\n\tthis.fixed = { w: 0, t: undefined, b: undefined }; // there is no x-coord here, because that is set later.\n\n\t// these are the heights of all of the vertical elements that can't be placed until the end of the line.\n\t// the vertical order of elements that are above is: tempo, part, volume/dynamic, ending/chord, lyric\n\t// the vertical order of elements that are below is: lyric, chord, volume/dynamic\n\tthis.specialY = {\n\t\ttempoHeightAbove: 0,\n\t\tpartHeightAbove: 0,\n\t\tvolumeHeightAbove: 0,\n\t\tdynamicHeightAbove: 0,\n\t\tendingHeightAbove: 0,\n\t\tchordHeightAbove: 0,\n\t\tlyricHeightAbove: 0,\n\n\t\tlyricHeightBelow: 0,\n\t\tchordHeightBelow: 0,\n\t\tvolumeHeightBelow: 0,\n\t\tdynamicHeightBelow: 0\n\t};\n};\n\nAbsoluteElement.prototype.getFixedCoords = function () {\n\treturn { x: this.x, w: this.fixed.w, t: this.fixed.t, b: this.fixed.b };\n};\n\nAbsoluteElement.prototype.addExtra = function (extra) {\n\t// used for accidentals, multi-measure rest text,\n\t// left-side decorations, gracenote heads,\n\t// left annotations, gracenote stems.\n\t// if (!(extra.c && extra.c.indexOf(\"accidentals\") >= 0) &&\n\t// \t!(extra.c && extra.c.indexOf(\"arpeggio\") >= 0) &&\n\t// \textra.type !== \"multimeasure-text\" &&\n\t// \t!(extra.c === \"noteheads.quarter\" && (extra.scalex === 0.6 || extra.scalex === 0.36)) &&\n\t// \t!(extra.type === \"stem\" && extra.linewidth === -0.6) &&\n\t// \textra.position !== \"left\"\n\t// )\n\t// \tconsole.log(\"extra\", extra);\n\n\tthis.fixed.w = Math.max(this.fixed.w, extra.dx + extra.w);\n\tif (this.fixed.t === undefined) this.fixed.t = extra.top; else this.fixed.t = Math.max(this.fixed.t, extra.top);\n\tif (this.fixed.b === undefined) this.fixed.b = extra.bottom; else this.fixed.b = Math.min(this.fixed.b, extra.bottom);\n\tif (extra.dx < this.extraw) this.extraw = extra.dx;\n\tthis.extra[this.extra.length] = extra;\n\tthis._addChild(extra);\n};\n\nAbsoluteElement.prototype.addHead = function (head) {\n\tif (head.dx < this.extraw) this.extraw = head.dx;\n\tthis.heads[this.heads.length] = head;\n\tthis.addRight(head);\n};\n\nAbsoluteElement.prototype.addRight = function (right) {\n\t// // used for clefs, note heads, bar lines, stems, key-signature accidentals, non-beamed flags, dots\n\t// if (!(right.c && right.c.indexOf(\"clefs\") >= 0) &&\n\t// \t!(right.c && right.c.indexOf(\"noteheads\") >= 0) &&\n\t// \t!(right.c && right.c.indexOf(\"flags\") >= 0) &&\n\t// \t!(right.c && right.c.indexOf(\"rests\") >= 0) &&\n\t// \t!(right.c && right.c.indexOf(\"dots.dot\") >= 0) &&\n\t// \tright.type !== \"stem\" &&\n\t// \tright.type !== \"bar\" &&\n\t// \tright.type !== \"none\" && // used when an invisible anchor is needed.\n\t// \t!(this.type.indexOf(\"clef\") >= -1 && right.c === \"8\") &&\n\t// \tthis.type.indexOf(\"key-signature\") === -1 &&\n\t// \tthis.type.indexOf(\"time-signature\") === -1 &&\n\t// \t!(this.abcelem && this.abcelem.rest && this.abcelem.rest.type === \"spacer\") &&\n\t// \t!(this.abcelem && this.abcelem.rest && this.abcelem.rest.type === \"invisible\") &&\n\t// \t!(right.type === \"text\" && right.position === \"relative\") &&\n\t// \t!(right.type === \"text\" && right.position === \"right\") &&\n\t// \t!(right.type === \"text\" && right.position === \"above\") &&\n\t// \t!(right.type === \"text\" && right.position === \"below\")\n\t// )\n\t// \tconsole.log(\"right\", right);\n\t// These are the elements that are the fixed part.\n\tthis.fixed.w = Math.max(this.fixed.w, right.dx + right.w);\n\tif (right.top !== undefined) {\n\t\tif (this.fixed.t === undefined) this.fixed.t = right.top; else this.fixed.t = Math.max(this.fixed.t, right.top);\n\t}\n\tif (right.bottom !== undefined) {\n\t\tif (this.fixed.b === undefined) this.fixed.b = right.bottom; else this.fixed.b = Math.min(this.fixed.b, right.bottom);\n\t}\n\t// if (isNaN(this.fixed.t) || isNaN(this.fixed.b))\n\t// \tdebugger;\n\tif (right.dx + right.w > this.w) this.w = right.dx + right.w;\n\tthis.right[this.right.length] = right;\n\tthis._addChild(right);\n};\n\nAbsoluteElement.prototype.addFixed = function (elem) {\n\t// used for elements that can't move relative to other elements after they have been placed.\n\t// used for ledger lines, bar numbers, debug msgs, clef, key sigs, time sigs\n\tthis._addChild(elem);\n};\n\nAbsoluteElement.prototype.addFixedX = function (elem) {\n\t// used for elements that can't move horizontally relative to other elements after they have been placed.\n\t// used for parts, tempo, decorations\n\tthis._addChild(elem);\n};\n\nAbsoluteElement.prototype.addCentered = function (elem) {\n\t// // used for chord labels, lyrics\n\t// if (!(elem.type === \"chord\" && elem.position === \"above\") &&\n\t// \t!(elem.type === \"chord\" && elem.position === \"below\") &&\n\t// \telem.type !== 'lyric'\n\t// )\n\t// \tconsole.log(\"centered\", elem);\n\tvar half = elem.w / 2;\n\tif (-half < this.extraw) this.extraw = -half;\n\tthis.extra[this.extra.length] = elem;\n\tif (elem.dx + half > this.w) this.w = elem.dx + half;\n\tthis.right[this.right.length] = elem;\n\tthis._addChild(elem);\n};\n\nAbsoluteElement.prototype.setLimit = function (member, child) {\n\tif (!child[member]) return;\n\tif (!this.specialY[member])\n\t\tthis.specialY[member] = child[member];\n\telse\n\t\tthis.specialY[member] = Math.max(this.specialY[member], child[member]);\n};\n\nAbsoluteElement.prototype._addChild = function (child) {\n  //  console.log(\"Relative:\",child);\n  \n  // MAE 30 Sep 2024 - To avoid extra space for chords if there is only a bar number on the clef\n  var okToPushTop = true;\n  if ((this.abcelem.el_type == \"clef\") && (child.type == \"barNumber\")){\n    okToPushTop = false;\n  }\n\n  child.parent = this;\n  this.children[this.children.length] = child;\n\n  if (okToPushTop){\n    this.pushTop(child.top);\n  }\n  \n  this.pushBottom(child.bottom);\n  this.setLimit('tempoHeightAbove', child);\n  this.setLimit('partHeightAbove', child);\n  this.setLimit('volumeHeightAbove', child);\n  this.setLimit('dynamicHeightAbove', child);\n  this.setLimit('endingHeightAbove', child);\n  this.setLimit('chordHeightAbove', child);\n  this.setLimit('lyricHeightAbove', child);\n  this.setLimit('lyricHeightBelow', child);\n  this.setLimit('chordHeightBelow', child);\n  this.setLimit('volumeHeightBelow', child);\n  this.setLimit('dynamicHeightBelow', child);\n};\n\nAbsoluteElement.prototype.pushTop = function (top) {\n\tif (top !== undefined) {\n\t\tif (this.top === undefined)\n\t\t\tthis.top = top;\n\t\telse\n\t\t\tthis.top = Math.max(top, this.top);\n\t}\n};\n\nAbsoluteElement.prototype.pushBottom = function (bottom) {\n\tif (bottom !== undefined) {\n\t\tif (this.bottom === undefined)\n\t\t\tthis.bottom = bottom;\n\t\telse\n\t\t\tthis.bottom = Math.min(bottom, this.bottom);\n\t}\n};\n\nAbsoluteElement.prototype.setX = function (x) {\n\tthis.x = x;\n\tfor (var i = 0; i < this.children.length; i++)\n\t\tthis.children[i].setX(x);\n};\n\nAbsoluteElement.prototype.center = function (before, after) {\n\t// Used to center whole rests\n\tvar midpoint = (after.x - before.x) / 2 + before.x;\n\tthis.x = midpoint - this.w / 2;\n\tfor (var k = 0; k < this.children.length; k++)\n\t\tthis.children[k].setX(this.x);\n};\n\nAbsoluteElement.prototype.setHint = function () {\n\tthis.hint = true;\n};\n\nAbsoluteElement.prototype.highlight = function (klass, color) {\n\thighlight.bind(this)(klass, color);\n};\n\nAbsoluteElement.prototype.unhighlight = function (klass, color) {\n\tunhighlight.bind(this)(klass, color);\n};\n\nmodule.exports = AbsoluteElement;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL2Fic29sdXRlLWVsZW1lbnQuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsZ0JBQWdCLG1CQUFPLENBQUMsa0dBQTZCO0FBQ3JELGtCQUFrQixtQkFBTyxDQUFDLHNHQUErQjs7QUFFekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0Isb0NBQW9DOztBQUVwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVU7QUFDVjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwyREFBMkQ7QUFDM0QsOERBQThEO0FBQzlEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTREO0FBQzVEO0FBQ0E7QUFDQSwrREFBK0Q7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsMEJBQTBCO0FBQzNDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMEJBQTBCO0FBQzNDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvY3JlYXRpb24vZWxlbWVudHMvYWJzb2x1dGUtZWxlbWVudC5qcz83MGIxIl0sInNvdXJjZXNDb250ZW50IjpbIi8vICAgIGFiY19hYnNvbHV0ZV9lbGVtZW50LmpzOiBEZWZpbml0aW9uIG9mIHRoZSBBYnNvbHV0ZUVsZW1lbnQgY2xhc3MuXG5cbnZhciBoaWdobGlnaHQgPSByZXF1aXJlKFwiLi4vLi4vaW50ZXJhY3RpdmUvaGlnaGxpZ2h0XCIpO1xudmFyIHVuaGlnaGxpZ2h0ID0gcmVxdWlyZShcIi4uLy4uL2ludGVyYWN0aXZlL3VuaGlnaGxpZ2h0XCIpO1xuXG4vLyBFdmVyeXRoaW5nIHRoYXQgaXMgcGxhY2VkIGluIHRoZSBTVkcgaXMgZmlyc3QgY3JlYXRlZCBhcyBhbiBhYnNvbHV0ZSBlbGVtZW50LiBUaGlzIGlzIG9uZSB1bml0IG9mIGdyYXBoaWMgaW5mb3JtYXRpb24uXG4vLyBUaGF0IGlzLCBpdCBlbWJvZGllcyBhIGNvbmNlcHQ6IGEgY2xlZiwgYSB0aW1lIHNpZ25hdHVyZSwgYSBiYXIgbGluZSxldGMuIG9yIG1vc3QgY29tcGxleGx5OlxuLy8gYSBub3RlIHdpdGggaXRzIGFjY2lkZW50YWwsIGdyYWNlIG5vdGUsIGNob3JkIHN5bWJvbCwgdHJpbGwsIHN0ZW0sIGVpZ2h0aCBmbGFncywgZXRjLlxuLy8gSW4gdGhlIGxhcmdlc3Qgc2Vuc2UsIHRoZXNlIGFyZSBwbGFjZWQgb24gdGhlIHBhZ2UgYXQgYSBwYXJ0aWN1bGFyIHBsYWNlIHRoYXQgaXMgZGV0ZXJtaW5lZCBkdXJpbmcgdGhlIGxheW91dCBwaGFzZS5cbi8vIFRoaXMgb2JqZWN0IGRvZXNuJ3QgY29udGFpbiBhbnkgb2YgdGhlIGRyYXdpbmcgaW5mb3JtYXRpb24sIHRob3VnaC4gVGhhdCBpbmZvcm1hdGlvbiBpcyBjb250YWluZWQgaW4gYW4gYXJyYXkgb2Zcbi8vIFJlbGF0aXZlRWxlbWVudHMgYXMgdGhlIFwiY2hpbGRyZW5cIiBvZiB0aGlzIGNsYXNzLlxuLy8gRHVyaW5nIHRoZSBsYXlvdXQgcGhhc2UsIHRoZSB3aWR0aCBvZiBhbGwgdGhlIGNoaWxkcmVuIGlzIGNhbGN1bGF0ZWQgYW5kIHRoZSBYIGNvb3JkaW5hdGUgb2YgdGhlIGFic29sdXRlIGVsZW1lbnQgaXMgc2V0LlxuLy9cbi8vIFNvLCBhZnRlciB0aGUgQWJzb2x1dGVFbGVtZW50IGlzIHBsYWNlZCwgdGhlbiBpdHMgY2hpbGRyZW4gY2FuIGJlIHBsYWNlZCByZWxhdGl2ZSB0byB0aGF0LiBUaGVyZSBhcmUgZGlmZmVyZW50IHR5cGVzIG9mXG4vLyByZWxhdGl2ZSBlbGVtZW50cyB0aGF0IGFyZSBwbGFjZWQgd2l0aCBkaWZmZXJlbnQgcnVsZXM6XG4vLyAxKSBGaXhlZCAtIHRoZXNlIGVsZW1lbnRzIGRvbid0IG1vdmUgcmVsYXRpdmUgdG8gdGhlIGFic29sdXRlIGVsZW1lbnQncyBjb29yZGluYXRlcy4gVGhlc2UgYXJlIHRoaW5ncyBsaWtlIHRoZSBub3RlaGVhZCxcbi8vIGFueSBsZWRnZXIgbGluZXMsIGFjY2lkZW50YWxzLCBldGMuXG4vLyAyKSBTbG90dGVkIC0gdGhlc2UgZWxlbWVudHMgY2FuIG1vdmUgdmVydGljYWxseSBhbmQgZG9uJ3QgZ2V0IFkgY29vcmRpbmF0ZXMgdW50aWwgYWZ0ZXIgdGhlIGFic29sdXRlIGVsZW1lbnQgaXMgcGxhY2VkLlxuLy8gVGhlc2UgYXJlIHRoaW5ncyBsaWtlIHRoZSBjaG9yZCBzeW1ib2wsIG1hbnkgZGVjb3JhdGlvbnMsIHRoZSBseXJpY3MsIGV0Yy5cbi8vXG4vLyBSZWxhdGl2ZSBlbGVtZW50cyBhcmUgYWxzbyBjbGFzc2lmaWVkIGJ5IGhvdyB0aGV5IGFyZSByZWxhdGVkLiBUaGlzIGNvdWxkIGJlOlxuLy8gMSkgSW5jcmVhc2VzIHRoZSBhYnNvbHV0ZSBlbGVtZW50J3Mgd2lkdGggdG8gdGhlIGxlZnQuIFRoaXMgZG9lc24ndCBjaGFuZ2UgdGhlIGNlbnRlciBwb2ludCBvZlxuLy8gdGhlIGFic29sdXRlIGVsZW1lbnQsIHNvIGFkZGluZyBhIHNoYXJwIHRvIHRoZSBub3RlIHdvbid0IG1vdmUgaXQgdG8gdGhlIHJpZ2h0LiBIb3dldmVyLCBpZiB0aGUgZWxlbWVudHNcbi8vIGFyZSBjbG9zZSB0b2dldGhlciB0aGVuIHRoaXMgZW5mb3JjZXMgYSBtaW5pbXVtIGRpc3RhbmNlLlxuLy8gMikgSGFzIG5vIGVmZmVjdCBvbiB0aGUgd2lkdGguIEFubm90YXRpb25zIGFuZCB0aGUgdGVtcG8gYWN0IGxpa2UgdGhpcy4gTm8gbWF0dGVyIGhvdyBsb25nIHRoZXkgYXJlIHRoZSB3aWR0aCBkb2Vzbid0IGNoYW5nZS5cbi8vIDMpIEluY3JlYXNlcyB0aGUgYWJzb2x1dGUgZWxlbWVudCdzIHdpZHRoIHRvIHRoZSByaWdodC4gVGhpcyBkb2Vzbid0IGNoYW5nZSB0aGUgY2VudGVyIHBvaW50LFxuLy8gYnV0IGl0IHdpbGwgaW5jcmVhc2UgdGhlIG1pbmltdW0gZGlzdGFuY2UuXG4vLyA0KSBTZXRzIHRoZSB3aWR0aCBvbiBib3RoIHNpZGVzLiBUaGlzIGlzIHRoZSBub3RlIGhlYWRzLiBUaGV5IGFyZSBjZW50ZXJlZCBvbiBib3RoIHNpZGVzIG9mIHRoZSBhYnNvbHV0ZSBlbGVtZW50J3MgWCBjb29yZGluYXRlLlxuXG4vLyBkdXJhdGlvbiAtIGFjdHVhbCBtdXNpY2FsIGR1cmF0aW9uIC0gZGlmZmVyZW50IGZyb20gbm90ZWhlYWQgZHVyYXRpb24gaW4gdHJpcGxldHMuIHJlZmVyIHRvIGFiY2VsZW0gdG8gZ2V0IHRoZSBub3RlaGVhZCBkdXJhdGlvblxuLy8gbWluc3BhY2luZyAtIHNwYWNpbmcgd2hpY2ggbXVzdCBiZSB0YWtlbiBvbiB0b3Agb2YgdGhlIHdpZHRoIGRlZmluZWQgYnkgdGhlIGR1cmF0aW9uXG4vLyB0eXBlIGlzIGEgbWV0YS10eXBlIGZvciB0aGUgZWxlbWVudC4gSXQgaXMgbm90IG5lY2Vzc2FyeSBmb3IgZHJhd2luZywgYnV0IGl0IGlzIHVzZWZ1bCB0byBtYWtlIHNlbWFudGljIHNlbnNlIG9mIHRoZSBlbGVtZW50LiBGb3IgaW5zdGFuY2UsIGl0IGNhbiBiZSB1c2VkIGluIHRoZSBlbGVtZW50J3MgY2xhc3MgbmFtZS5cbnZhciBBYnNvbHV0ZUVsZW1lbnQgPSBmdW5jdGlvbiBBYnNvbHV0ZUVsZW1lbnQoYWJjZWxlbSwgZHVyYXRpb24sIG1pbnNwYWNpbmcsIHR5cGUsIHR1bmVOdW1iZXIsIG9wdGlvbnMpIHtcblx0Ly9cdGNvbnNvbGUubG9nKFwiQWJzb2x1dGU6XCIsYWJjZWxlbSwgZHVyYXRpb24sIG1pbnNwYWNpbmcsIHR5cGUsIHR1bmVOdW1iZXIsIG9wdGlvbnMpO1xuXHRpZiAoIW9wdGlvbnMpXG5cdFx0b3B0aW9ucyA9IHt9O1xuXHR0aGlzLnR1bmVOdW1iZXIgPSB0dW5lTnVtYmVyO1xuXHR0aGlzLmFiY2VsZW0gPSBhYmNlbGVtO1xuXHR0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XG5cdHRoaXMuZHVyYXRpb25DbGFzcyA9IG9wdGlvbnMuZHVyYXRpb25DbGFzc092ZXJpZGUgPyBvcHRpb25zLmR1cmF0aW9uQ2xhc3NPdmVyaWRlIDogdGhpcy5kdXJhdGlvbjtcblx0dGhpcy5taW5zcGFjaW5nID0gbWluc3BhY2luZyB8fCAwO1xuXHR0aGlzLnggPSAwO1xuXHR0aGlzLmNoaWxkcmVuID0gW107XG5cdHRoaXMuaGVhZHMgPSBbXTtcblx0dGhpcy5leHRyYSA9IFtdO1xuXHR0aGlzLmV4dHJhdyA9IDA7XG5cdHRoaXMudyA9IDA7XG5cdHRoaXMucmlnaHQgPSBbXTtcblx0dGhpcy5pbnZpc2libGUgPSBmYWxzZTtcblx0dGhpcy5ib3R0b20gPSB1bmRlZmluZWQ7XG5cdHRoaXMudG9wID0gdW5kZWZpbmVkO1xuXHR0aGlzLnR5cGUgPSB0eXBlO1xuXG5cdC8vIFRoZSBmb2xsb3dpbmcgYXJlIHRoZSBkaW1lbnNpb25zIG9mIHRoZSBmaXhlZCBwYXJ0IG9mIHRoZSBlbGVtZW50LlxuXHQvLyBUaGF0IGlzLCB0aGUgY2hvcmQgdGV4dCB3aWxsIGJlIGEgZGlmZmVyZW50IGhlaWdodCBkZXBlbmRpbmcgb24gbG90IG9mIGZhY3RvcnMsIGJ1dCB0aGUgOHRoIGZsYWcgd2lsbCBhbHdheXMgYmUgaW4gdGhlIHNhbWUgcGxhY2UuXG5cdHRoaXMuZml4ZWQgPSB7IHc6IDAsIHQ6IHVuZGVmaW5lZCwgYjogdW5kZWZpbmVkIH07IC8vIHRoZXJlIGlzIG5vIHgtY29vcmQgaGVyZSwgYmVjYXVzZSB0aGF0IGlzIHNldCBsYXRlci5cblxuXHQvLyB0aGVzZSBhcmUgdGhlIGhlaWdodHMgb2YgYWxsIG9mIHRoZSB2ZXJ0aWNhbCBlbGVtZW50cyB0aGF0IGNhbid0IGJlIHBsYWNlZCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBsaW5lLlxuXHQvLyB0aGUgdmVydGljYWwgb3JkZXIgb2YgZWxlbWVudHMgdGhhdCBhcmUgYWJvdmUgaXM6IHRlbXBvLCBwYXJ0LCB2b2x1bWUvZHluYW1pYywgZW5kaW5nL2Nob3JkLCBseXJpY1xuXHQvLyB0aGUgdmVydGljYWwgb3JkZXIgb2YgZWxlbWVudHMgdGhhdCBhcmUgYmVsb3cgaXM6IGx5cmljLCBjaG9yZCwgdm9sdW1lL2R5bmFtaWNcblx0dGhpcy5zcGVjaWFsWSA9IHtcblx0XHR0ZW1wb0hlaWdodEFib3ZlOiAwLFxuXHRcdHBhcnRIZWlnaHRBYm92ZTogMCxcblx0XHR2b2x1bWVIZWlnaHRBYm92ZTogMCxcblx0XHRkeW5hbWljSGVpZ2h0QWJvdmU6IDAsXG5cdFx0ZW5kaW5nSGVpZ2h0QWJvdmU6IDAsXG5cdFx0Y2hvcmRIZWlnaHRBYm92ZTogMCxcblx0XHRseXJpY0hlaWdodEFib3ZlOiAwLFxuXG5cdFx0bHlyaWNIZWlnaHRCZWxvdzogMCxcblx0XHRjaG9yZEhlaWdodEJlbG93OiAwLFxuXHRcdHZvbHVtZUhlaWdodEJlbG93OiAwLFxuXHRcdGR5bmFtaWNIZWlnaHRCZWxvdzogMFxuXHR9O1xufTtcblxuQWJzb2x1dGVFbGVtZW50LnByb3RvdHlwZS5nZXRGaXhlZENvb3JkcyA9IGZ1bmN0aW9uICgpIHtcblx0cmV0dXJuIHsgeDogdGhpcy54LCB3OiB0aGlzLmZpeGVkLncsIHQ6IHRoaXMuZml4ZWQudCwgYjogdGhpcy5maXhlZC5iIH07XG59O1xuXG5BYnNvbHV0ZUVsZW1lbnQucHJvdG90eXBlLmFkZEV4dHJhID0gZnVuY3Rpb24gKGV4dHJhKSB7XG5cdC8vIHVzZWQgZm9yIGFjY2lkZW50YWxzLCBtdWx0aS1tZWFzdXJlIHJlc3QgdGV4dCxcblx0Ly8gbGVmdC1zaWRlIGRlY29yYXRpb25zLCBncmFjZW5vdGUgaGVhZHMsXG5cdC8vIGxlZnQgYW5ub3RhdGlvbnMsIGdyYWNlbm90ZSBzdGVtcy5cblx0Ly8gaWYgKCEoZXh0cmEuYyAmJiBleHRyYS5jLmluZGV4T2YoXCJhY2NpZGVudGFsc1wiKSA+PSAwKSAmJlxuXHQvLyBcdCEoZXh0cmEuYyAmJiBleHRyYS5jLmluZGV4T2YoXCJhcnBlZ2dpb1wiKSA+PSAwKSAmJlxuXHQvLyBcdGV4dHJhLnR5cGUgIT09IFwibXVsdGltZWFzdXJlLXRleHRcIiAmJlxuXHQvLyBcdCEoZXh0cmEuYyA9PT0gXCJub3RlaGVhZHMucXVhcnRlclwiICYmIChleHRyYS5zY2FsZXggPT09IDAuNiB8fCBleHRyYS5zY2FsZXggPT09IDAuMzYpKSAmJlxuXHQvLyBcdCEoZXh0cmEudHlwZSA9PT0gXCJzdGVtXCIgJiYgZXh0cmEubGluZXdpZHRoID09PSAtMC42KSAmJlxuXHQvLyBcdGV4dHJhLnBvc2l0aW9uICE9PSBcImxlZnRcIlxuXHQvLyApXG5cdC8vIFx0Y29uc29sZS5sb2coXCJleHRyYVwiLCBleHRyYSk7XG5cblx0dGhpcy5maXhlZC53ID0gTWF0aC5tYXgodGhpcy5maXhlZC53LCBleHRyYS5keCArIGV4dHJhLncpO1xuXHRpZiAodGhpcy5maXhlZC50ID09PSB1bmRlZmluZWQpIHRoaXMuZml4ZWQudCA9IGV4dHJhLnRvcDsgZWxzZSB0aGlzLmZpeGVkLnQgPSBNYXRoLm1heCh0aGlzLmZpeGVkLnQsIGV4dHJhLnRvcCk7XG5cdGlmICh0aGlzLmZpeGVkLmIgPT09IHVuZGVmaW5lZCkgdGhpcy5maXhlZC5iID0gZXh0cmEuYm90dG9tOyBlbHNlIHRoaXMuZml4ZWQuYiA9IE1hdGgubWluKHRoaXMuZml4ZWQuYiwgZXh0cmEuYm90dG9tKTtcblx0aWYgKGV4dHJhLmR4IDwgdGhpcy5leHRyYXcpIHRoaXMuZXh0cmF3ID0gZXh0cmEuZHg7XG5cdHRoaXMuZXh0cmFbdGhpcy5leHRyYS5sZW5ndGhdID0gZXh0cmE7XG5cdHRoaXMuX2FkZENoaWxkKGV4dHJhKTtcbn07XG5cbkFic29sdXRlRWxlbWVudC5wcm90b3R5cGUuYWRkSGVhZCA9IGZ1bmN0aW9uIChoZWFkKSB7XG5cdGlmIChoZWFkLmR4IDwgdGhpcy5leHRyYXcpIHRoaXMuZXh0cmF3ID0gaGVhZC5keDtcblx0dGhpcy5oZWFkc1t0aGlzLmhlYWRzLmxlbmd0aF0gPSBoZWFkO1xuXHR0aGlzLmFkZFJpZ2h0KGhlYWQpO1xufTtcblxuQWJzb2x1dGVFbGVtZW50LnByb3RvdHlwZS5hZGRSaWdodCA9IGZ1bmN0aW9uIChyaWdodCkge1xuXHQvLyAvLyB1c2VkIGZvciBjbGVmcywgbm90ZSBoZWFkcywgYmFyIGxpbmVzLCBzdGVtcywga2V5LXNpZ25hdHVyZSBhY2NpZGVudGFscywgbm9uLWJlYW1lZCBmbGFncywgZG90c1xuXHQvLyBpZiAoIShyaWdodC5jICYmIHJpZ2h0LmMuaW5kZXhPZihcImNsZWZzXCIpID49IDApICYmXG5cdC8vIFx0IShyaWdodC5jICYmIHJpZ2h0LmMuaW5kZXhPZihcIm5vdGVoZWFkc1wiKSA+PSAwKSAmJlxuXHQvLyBcdCEocmlnaHQuYyAmJiByaWdodC5jLmluZGV4T2YoXCJmbGFnc1wiKSA+PSAwKSAmJlxuXHQvLyBcdCEocmlnaHQuYyAmJiByaWdodC5jLmluZGV4T2YoXCJyZXN0c1wiKSA+PSAwKSAmJlxuXHQvLyBcdCEocmlnaHQuYyAmJiByaWdodC5jLmluZGV4T2YoXCJkb3RzLmRvdFwiKSA+PSAwKSAmJlxuXHQvLyBcdHJpZ2h0LnR5cGUgIT09IFwic3RlbVwiICYmXG5cdC8vIFx0cmlnaHQudHlwZSAhPT0gXCJiYXJcIiAmJlxuXHQvLyBcdHJpZ2h0LnR5cGUgIT09IFwibm9uZVwiICYmIC8vIHVzZWQgd2hlbiBhbiBpbnZpc2libGUgYW5jaG9yIGlzIG5lZWRlZC5cblx0Ly8gXHQhKHRoaXMudHlwZS5pbmRleE9mKFwiY2xlZlwiKSA+PSAtMSAmJiByaWdodC5jID09PSBcIjhcIikgJiZcblx0Ly8gXHR0aGlzLnR5cGUuaW5kZXhPZihcImtleS1zaWduYXR1cmVcIikgPT09IC0xICYmXG5cdC8vIFx0dGhpcy50eXBlLmluZGV4T2YoXCJ0aW1lLXNpZ25hdHVyZVwiKSA9PT0gLTEgJiZcblx0Ly8gXHQhKHRoaXMuYWJjZWxlbSAmJiB0aGlzLmFiY2VsZW0ucmVzdCAmJiB0aGlzLmFiY2VsZW0ucmVzdC50eXBlID09PSBcInNwYWNlclwiKSAmJlxuXHQvLyBcdCEodGhpcy5hYmNlbGVtICYmIHRoaXMuYWJjZWxlbS5yZXN0ICYmIHRoaXMuYWJjZWxlbS5yZXN0LnR5cGUgPT09IFwiaW52aXNpYmxlXCIpICYmXG5cdC8vIFx0IShyaWdodC50eXBlID09PSBcInRleHRcIiAmJiByaWdodC5wb3NpdGlvbiA9PT0gXCJyZWxhdGl2ZVwiKSAmJlxuXHQvLyBcdCEocmlnaHQudHlwZSA9PT0gXCJ0ZXh0XCIgJiYgcmlnaHQucG9zaXRpb24gPT09IFwicmlnaHRcIikgJiZcblx0Ly8gXHQhKHJpZ2h0LnR5cGUgPT09IFwidGV4dFwiICYmIHJpZ2h0LnBvc2l0aW9uID09PSBcImFib3ZlXCIpICYmXG5cdC8vIFx0IShyaWdodC50eXBlID09PSBcInRleHRcIiAmJiByaWdodC5wb3NpdGlvbiA9PT0gXCJiZWxvd1wiKVxuXHQvLyApXG5cdC8vIFx0Y29uc29sZS5sb2coXCJyaWdodFwiLCByaWdodCk7XG5cdC8vIFRoZXNlIGFyZSB0aGUgZWxlbWVudHMgdGhhdCBhcmUgdGhlIGZpeGVkIHBhcnQuXG5cdHRoaXMuZml4ZWQudyA9IE1hdGgubWF4KHRoaXMuZml4ZWQudywgcmlnaHQuZHggKyByaWdodC53KTtcblx0aWYgKHJpZ2h0LnRvcCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0aWYgKHRoaXMuZml4ZWQudCA9PT0gdW5kZWZpbmVkKSB0aGlzLmZpeGVkLnQgPSByaWdodC50b3A7IGVsc2UgdGhpcy5maXhlZC50ID0gTWF0aC5tYXgodGhpcy5maXhlZC50LCByaWdodC50b3ApO1xuXHR9XG5cdGlmIChyaWdodC5ib3R0b20gIT09IHVuZGVmaW5lZCkge1xuXHRcdGlmICh0aGlzLmZpeGVkLmIgPT09IHVuZGVmaW5lZCkgdGhpcy5maXhlZC5iID0gcmlnaHQuYm90dG9tOyBlbHNlIHRoaXMuZml4ZWQuYiA9IE1hdGgubWluKHRoaXMuZml4ZWQuYiwgcmlnaHQuYm90dG9tKTtcblx0fVxuXHQvLyBpZiAoaXNOYU4odGhpcy5maXhlZC50KSB8fCBpc05hTih0aGlzLmZpeGVkLmIpKVxuXHQvLyBcdGRlYnVnZ2VyO1xuXHRpZiAocmlnaHQuZHggKyByaWdodC53ID4gdGhpcy53KSB0aGlzLncgPSByaWdodC5keCArIHJpZ2h0Lnc7XG5cdHRoaXMucmlnaHRbdGhpcy5yaWdodC5sZW5ndGhdID0gcmlnaHQ7XG5cdHRoaXMuX2FkZENoaWxkKHJpZ2h0KTtcbn07XG5cbkFic29sdXRlRWxlbWVudC5wcm90b3R5cGUuYWRkRml4ZWQgPSBmdW5jdGlvbiAoZWxlbSkge1xuXHQvLyB1c2VkIGZvciBlbGVtZW50cyB0aGF0IGNhbid0IG1vdmUgcmVsYXRpdmUgdG8gb3RoZXIgZWxlbWVudHMgYWZ0ZXIgdGhleSBoYXZlIGJlZW4gcGxhY2VkLlxuXHQvLyB1c2VkIGZvciBsZWRnZXIgbGluZXMsIGJhciBudW1iZXJzLCBkZWJ1ZyBtc2dzLCBjbGVmLCBrZXkgc2lncywgdGltZSBzaWdzXG5cdHRoaXMuX2FkZENoaWxkKGVsZW0pO1xufTtcblxuQWJzb2x1dGVFbGVtZW50LnByb3RvdHlwZS5hZGRGaXhlZFggPSBmdW5jdGlvbiAoZWxlbSkge1xuXHQvLyB1c2VkIGZvciBlbGVtZW50cyB0aGF0IGNhbid0IG1vdmUgaG9yaXpvbnRhbGx5IHJlbGF0aXZlIHRvIG90aGVyIGVsZW1lbnRzIGFmdGVyIHRoZXkgaGF2ZSBiZWVuIHBsYWNlZC5cblx0Ly8gdXNlZCBmb3IgcGFydHMsIHRlbXBvLCBkZWNvcmF0aW9uc1xuXHR0aGlzLl9hZGRDaGlsZChlbGVtKTtcbn07XG5cbkFic29sdXRlRWxlbWVudC5wcm90b3R5cGUuYWRkQ2VudGVyZWQgPSBmdW5jdGlvbiAoZWxlbSkge1xuXHQvLyAvLyB1c2VkIGZvciBjaG9yZCBsYWJlbHMsIGx5cmljc1xuXHQvLyBpZiAoIShlbGVtLnR5cGUgPT09IFwiY2hvcmRcIiAmJiBlbGVtLnBvc2l0aW9uID09PSBcImFib3ZlXCIpICYmXG5cdC8vIFx0IShlbGVtLnR5cGUgPT09IFwiY2hvcmRcIiAmJiBlbGVtLnBvc2l0aW9uID09PSBcImJlbG93XCIpICYmXG5cdC8vIFx0ZWxlbS50eXBlICE9PSAnbHlyaWMnXG5cdC8vIClcblx0Ly8gXHRjb25zb2xlLmxvZyhcImNlbnRlcmVkXCIsIGVsZW0pO1xuXHR2YXIgaGFsZiA9IGVsZW0udyAvIDI7XG5cdGlmICgtaGFsZiA8IHRoaXMuZXh0cmF3KSB0aGlzLmV4dHJhdyA9IC1oYWxmO1xuXHR0aGlzLmV4dHJhW3RoaXMuZXh0cmEubGVuZ3RoXSA9IGVsZW07XG5cdGlmIChlbGVtLmR4ICsgaGFsZiA+IHRoaXMudykgdGhpcy53ID0gZWxlbS5keCArIGhhbGY7XG5cdHRoaXMucmlnaHRbdGhpcy5yaWdodC5sZW5ndGhdID0gZWxlbTtcblx0dGhpcy5fYWRkQ2hpbGQoZWxlbSk7XG59O1xuXG5BYnNvbHV0ZUVsZW1lbnQucHJvdG90eXBlLnNldExpbWl0ID0gZnVuY3Rpb24gKG1lbWJlciwgY2hpbGQpIHtcblx0aWYgKCFjaGlsZFttZW1iZXJdKSByZXR1cm47XG5cdGlmICghdGhpcy5zcGVjaWFsWVttZW1iZXJdKVxuXHRcdHRoaXMuc3BlY2lhbFlbbWVtYmVyXSA9IGNoaWxkW21lbWJlcl07XG5cdGVsc2Vcblx0XHR0aGlzLnNwZWNpYWxZW21lbWJlcl0gPSBNYXRoLm1heCh0aGlzLnNwZWNpYWxZW21lbWJlcl0sIGNoaWxkW21lbWJlcl0pO1xufTtcblxuQWJzb2x1dGVFbGVtZW50LnByb3RvdHlwZS5fYWRkQ2hpbGQgPSBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgLy8gIGNvbnNvbGUubG9nKFwiUmVsYXRpdmU6XCIsY2hpbGQpO1xuICBcbiAgLy8gTUFFIDMwIFNlcCAyMDI0IC0gVG8gYXZvaWQgZXh0cmEgc3BhY2UgZm9yIGNob3JkcyBpZiB0aGVyZSBpcyBvbmx5IGEgYmFyIG51bWJlciBvbiB0aGUgY2xlZlxuICB2YXIgb2tUb1B1c2hUb3AgPSB0cnVlO1xuICBpZiAoKHRoaXMuYWJjZWxlbS5lbF90eXBlID09IFwiY2xlZlwiKSAmJiAoY2hpbGQudHlwZSA9PSBcImJhck51bWJlclwiKSl7XG4gICAgb2tUb1B1c2hUb3AgPSBmYWxzZTtcbiAgfVxuXG4gIGNoaWxkLnBhcmVudCA9IHRoaXM7XG4gIHRoaXMuY2hpbGRyZW5bdGhpcy5jaGlsZHJlbi5sZW5ndGhdID0gY2hpbGQ7XG5cbiAgaWYgKG9rVG9QdXNoVG9wKXtcbiAgICB0aGlzLnB1c2hUb3AoY2hpbGQudG9wKTtcbiAgfVxuICBcbiAgdGhpcy5wdXNoQm90dG9tKGNoaWxkLmJvdHRvbSk7XG4gIHRoaXMuc2V0TGltaXQoJ3RlbXBvSGVpZ2h0QWJvdmUnLCBjaGlsZCk7XG4gIHRoaXMuc2V0TGltaXQoJ3BhcnRIZWlnaHRBYm92ZScsIGNoaWxkKTtcbiAgdGhpcy5zZXRMaW1pdCgndm9sdW1lSGVpZ2h0QWJvdmUnLCBjaGlsZCk7XG4gIHRoaXMuc2V0TGltaXQoJ2R5bmFtaWNIZWlnaHRBYm92ZScsIGNoaWxkKTtcbiAgdGhpcy5zZXRMaW1pdCgnZW5kaW5nSGVpZ2h0QWJvdmUnLCBjaGlsZCk7XG4gIHRoaXMuc2V0TGltaXQoJ2Nob3JkSGVpZ2h0QWJvdmUnLCBjaGlsZCk7XG4gIHRoaXMuc2V0TGltaXQoJ2x5cmljSGVpZ2h0QWJvdmUnLCBjaGlsZCk7XG4gIHRoaXMuc2V0TGltaXQoJ2x5cmljSGVpZ2h0QmVsb3cnLCBjaGlsZCk7XG4gIHRoaXMuc2V0TGltaXQoJ2Nob3JkSGVpZ2h0QmVsb3cnLCBjaGlsZCk7XG4gIHRoaXMuc2V0TGltaXQoJ3ZvbHVtZUhlaWdodEJlbG93JywgY2hpbGQpO1xuICB0aGlzLnNldExpbWl0KCdkeW5hbWljSGVpZ2h0QmVsb3cnLCBjaGlsZCk7XG59O1xuXG5BYnNvbHV0ZUVsZW1lbnQucHJvdG90eXBlLnB1c2hUb3AgPSBmdW5jdGlvbiAodG9wKSB7XG5cdGlmICh0b3AgIT09IHVuZGVmaW5lZCkge1xuXHRcdGlmICh0aGlzLnRvcCA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0dGhpcy50b3AgPSB0b3A7XG5cdFx0ZWxzZVxuXHRcdFx0dGhpcy50b3AgPSBNYXRoLm1heCh0b3AsIHRoaXMudG9wKTtcblx0fVxufTtcblxuQWJzb2x1dGVFbGVtZW50LnByb3RvdHlwZS5wdXNoQm90dG9tID0gZnVuY3Rpb24gKGJvdHRvbSkge1xuXHRpZiAoYm90dG9tICE9PSB1bmRlZmluZWQpIHtcblx0XHRpZiAodGhpcy5ib3R0b20gPT09IHVuZGVmaW5lZClcblx0XHRcdHRoaXMuYm90dG9tID0gYm90dG9tO1xuXHRcdGVsc2Vcblx0XHRcdHRoaXMuYm90dG9tID0gTWF0aC5taW4oYm90dG9tLCB0aGlzLmJvdHRvbSk7XG5cdH1cbn07XG5cbkFic29sdXRlRWxlbWVudC5wcm90b3R5cGUuc2V0WCA9IGZ1bmN0aW9uICh4KSB7XG5cdHRoaXMueCA9IHg7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKylcblx0XHR0aGlzLmNoaWxkcmVuW2ldLnNldFgoeCk7XG59O1xuXG5BYnNvbHV0ZUVsZW1lbnQucHJvdG90eXBlLmNlbnRlciA9IGZ1bmN0aW9uIChiZWZvcmUsIGFmdGVyKSB7XG5cdC8vIFVzZWQgdG8gY2VudGVyIHdob2xlIHJlc3RzXG5cdHZhciBtaWRwb2ludCA9IChhZnRlci54IC0gYmVmb3JlLngpIC8gMiArIGJlZm9yZS54O1xuXHR0aGlzLnggPSBtaWRwb2ludCAtIHRoaXMudyAvIDI7XG5cdGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGsrKylcblx0XHR0aGlzLmNoaWxkcmVuW2tdLnNldFgodGhpcy54KTtcbn07XG5cbkFic29sdXRlRWxlbWVudC5wcm90b3R5cGUuc2V0SGludCA9IGZ1bmN0aW9uICgpIHtcblx0dGhpcy5oaW50ID0gdHJ1ZTtcbn07XG5cbkFic29sdXRlRWxlbWVudC5wcm90b3R5cGUuaGlnaGxpZ2h0ID0gZnVuY3Rpb24gKGtsYXNzLCBjb2xvcikge1xuXHRoaWdobGlnaHQuYmluZCh0aGlzKShrbGFzcywgY29sb3IpO1xufTtcblxuQWJzb2x1dGVFbGVtZW50LnByb3RvdHlwZS51bmhpZ2hsaWdodCA9IGZ1bmN0aW9uIChrbGFzcywgY29sb3IpIHtcblx0dW5oaWdobGlnaHQuYmluZCh0aGlzKShrbGFzcywgY29sb3IpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBBYnNvbHV0ZUVsZW1lbnQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/absolute-element.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/beam-element.js":
/*!************************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/beam-element.js ***!
  \************************************************************************/
/***/ ((module) => {

eval("//    abc_beam_element.js: Definition of the BeamElem class.\n\n// Most elements on the page are related to a particular absolute element -- notes, rests, bars, etc. Beams, however, span multiple elements.\n// This means that beams can't be laid out until the absolute elements are placed. There is the further complication that the stems for beamed\n// notes can't be laid out until the beams are because we don't know how long they will be until we know the slope of the beam and the horizontal\n// spacing of the absolute elements.\n//\n// So, when a beam is detected, a BeamElem is created, then all notes belonging to that beam are added to it. These notes are not given stems at that time.\n// Then, after the horizontal layout is complete, all of the BeamElem are iterated to set the beam position, then all of the notes that are beamed are given\n// stems. After that, we are ready for the drawing step.\n\n// There are three phases: the setup phase, when new elements are being discovered, the layout phase, when everything is calculated, and the drawing phase,\n// when the object is not changed, but is used to put the elements on the page.\n\n//\n// Setup phase\n//\nvar BeamElem = function BeamElem(stemHeight, type, flat, firstElement) {\n\t// type is \"grace\", \"up\", \"down\", or undefined. flat is used to force flat beams, as it commonly found in the grace notes of bagpipe music.\n\tthis.type = \"BeamElem\";\n\tthis.isflat = !!flat;\n\tthis.isgrace = !!(type && type === \"grace\");\n\tthis.forceup = !!(this.isgrace || (type && type === \"up\"));\n\tthis.forcedown = !!(type && type === \"down\");\n\tthis.elems = []; // all the AbsoluteElements that this beam touches. It may include embedded rests.\n\tthis.total = 0;\n\tthis.average = 6; // use middle line as start for average.\n\tthis.allrests = true;\n\tthis.stemHeight = stemHeight;\n\tthis.beams = []; // During the layout phase, this will become a list of the beams that need to be drawn.\n\tif (firstElement && firstElement.duration) {\n\t\tthis.duration = firstElement.duration;\n\t\tif (firstElement.startTriplet) {\n\t\t\tthis.duration *= firstElement.tripletMultiplier;\n\t\t}\n\t\tthis.duration = Math.round(this.duration * 1000) / 1000;\n\t} else\n\t\tthis.duration = 0;\n};\n\nBeamElem.prototype.setHint = function () {\n\tthis.hint = true;\n};\n\nBeamElem.prototype.runningDirection = function (abcelem) {\n\tvar pitch = abcelem.averagepitch;\n\tif (pitch === undefined) return; // don't include elements like spacers in beams\n\tthis.total = Math.round(this.total + pitch);\n\tif (!this.count)\n\t\tthis.count = 0;\n\tthis.count++\n};\n\nBeamElem.prototype.add = function (abselem) {\n\tvar pitch = abselem.abcelem.averagepitch;\n\tif (pitch === undefined) return; // don't include elements like spacers in beams\n\tif (!abselem.abcelem.rest)\n\t\tthis.allrests = false;\n\tabselem.beam = this;\n\tthis.elems.push(abselem);\n\tthis.total = Math.round(this.total + pitch);\n\tif (this.min === undefined || abselem.abcelem.minpitch < this.min) {\n\t\tthis.min = abselem.abcelem.minpitch;\n\t}\n\tif (this.max === undefined || abselem.abcelem.maxpitch > this.max) {\n\t\tthis.max = abselem.abcelem.maxpitch;\n\t}\n};\n\nBeamElem.prototype.addBeam = function (beam) {\n\tthis.beams.push(beam);\n};\n\nBeamElem.prototype.setStemDirection = function () {\n\t// Have to figure this out before the notes are placed because placing the notes also places the decorations.\n\tthis.average = calcAverage(this.total, this.count);\n\tif (this.forceup) {\n\t\tthis.stemsUp = true;\n\t} else if (this.forcedown) {\n\t\tthis.stemsUp = false;\n\t} else {\n\t\tvar middleLine = 6;\t// hardcoded 6 is B\n\t\tthis.stemsUp = this.average < middleLine; // true is up, false is down;\n\t}\n\tdelete this.count;\n\tthis.total = 0;\n};\n\nBeamElem.prototype.calcDir = function () {\n\tthis.average = calcAverage(this.total, this.elems.length);\n\tif (this.forceup) {\n\t\tthis.stemsUp = true;\n\t} else if (this.forcedown) {\n\t\tthis.stemsUp = false;\n\t} else {\n\t\tvar middleLine = 6;\t// hardcoded 6 is B\n\t\tthis.stemsUp = this.average < middleLine; // true is up, false is down;\n\t}\n\tvar dir = this.stemsUp ? 'up' : 'down';\n\tfor (var i = 0; i < this.elems.length; i++) {\n\t\tfor (var j = 0; j < this.elems[i].heads.length; j++) {\n\t\t\tthis.elems[i].heads[j].stemDir = dir;\n\t\t}\n\t}\n};\n\nfunction calcAverage(total, numElements) {\n\tif (!numElements)\n\t\treturn 0;\n\treturn total / numElements;\n}\n\nmodule.exports = BeamElem;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL2JlYW0tZWxlbWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNILHNCQUFzQjtBQUN0Qiw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0gsc0JBQXNCO0FBQ3RCLDRDQUE0QztBQUM1QztBQUNBO0FBQ0EsaUJBQWlCLHVCQUF1QjtBQUN4QyxrQkFBa0IsZ0NBQWdDO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvY3JlYXRpb24vZWxlbWVudHMvYmVhbS1lbGVtZW50LmpzPzBkYzciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gICAgYWJjX2JlYW1fZWxlbWVudC5qczogRGVmaW5pdGlvbiBvZiB0aGUgQmVhbUVsZW0gY2xhc3MuXG5cbi8vIE1vc3QgZWxlbWVudHMgb24gdGhlIHBhZ2UgYXJlIHJlbGF0ZWQgdG8gYSBwYXJ0aWN1bGFyIGFic29sdXRlIGVsZW1lbnQgLS0gbm90ZXMsIHJlc3RzLCBiYXJzLCBldGMuIEJlYW1zLCBob3dldmVyLCBzcGFuIG11bHRpcGxlIGVsZW1lbnRzLlxuLy8gVGhpcyBtZWFucyB0aGF0IGJlYW1zIGNhbid0IGJlIGxhaWQgb3V0IHVudGlsIHRoZSBhYnNvbHV0ZSBlbGVtZW50cyBhcmUgcGxhY2VkLiBUaGVyZSBpcyB0aGUgZnVydGhlciBjb21wbGljYXRpb24gdGhhdCB0aGUgc3RlbXMgZm9yIGJlYW1lZFxuLy8gbm90ZXMgY2FuJ3QgYmUgbGFpZCBvdXQgdW50aWwgdGhlIGJlYW1zIGFyZSBiZWNhdXNlIHdlIGRvbid0IGtub3cgaG93IGxvbmcgdGhleSB3aWxsIGJlIHVudGlsIHdlIGtub3cgdGhlIHNsb3BlIG9mIHRoZSBiZWFtIGFuZCB0aGUgaG9yaXpvbnRhbFxuLy8gc3BhY2luZyBvZiB0aGUgYWJzb2x1dGUgZWxlbWVudHMuXG4vL1xuLy8gU28sIHdoZW4gYSBiZWFtIGlzIGRldGVjdGVkLCBhIEJlYW1FbGVtIGlzIGNyZWF0ZWQsIHRoZW4gYWxsIG5vdGVzIGJlbG9uZ2luZyB0byB0aGF0IGJlYW0gYXJlIGFkZGVkIHRvIGl0LiBUaGVzZSBub3RlcyBhcmUgbm90IGdpdmVuIHN0ZW1zIGF0IHRoYXQgdGltZS5cbi8vIFRoZW4sIGFmdGVyIHRoZSBob3Jpem9udGFsIGxheW91dCBpcyBjb21wbGV0ZSwgYWxsIG9mIHRoZSBCZWFtRWxlbSBhcmUgaXRlcmF0ZWQgdG8gc2V0IHRoZSBiZWFtIHBvc2l0aW9uLCB0aGVuIGFsbCBvZiB0aGUgbm90ZXMgdGhhdCBhcmUgYmVhbWVkIGFyZSBnaXZlblxuLy8gc3RlbXMuIEFmdGVyIHRoYXQsIHdlIGFyZSByZWFkeSBmb3IgdGhlIGRyYXdpbmcgc3RlcC5cblxuLy8gVGhlcmUgYXJlIHRocmVlIHBoYXNlczogdGhlIHNldHVwIHBoYXNlLCB3aGVuIG5ldyBlbGVtZW50cyBhcmUgYmVpbmcgZGlzY292ZXJlZCwgdGhlIGxheW91dCBwaGFzZSwgd2hlbiBldmVyeXRoaW5nIGlzIGNhbGN1bGF0ZWQsIGFuZCB0aGUgZHJhd2luZyBwaGFzZSxcbi8vIHdoZW4gdGhlIG9iamVjdCBpcyBub3QgY2hhbmdlZCwgYnV0IGlzIHVzZWQgdG8gcHV0IHRoZSBlbGVtZW50cyBvbiB0aGUgcGFnZS5cblxuLy9cbi8vIFNldHVwIHBoYXNlXG4vL1xudmFyIEJlYW1FbGVtID0gZnVuY3Rpb24gQmVhbUVsZW0oc3RlbUhlaWdodCwgdHlwZSwgZmxhdCwgZmlyc3RFbGVtZW50KSB7XG5cdC8vIHR5cGUgaXMgXCJncmFjZVwiLCBcInVwXCIsIFwiZG93blwiLCBvciB1bmRlZmluZWQuIGZsYXQgaXMgdXNlZCB0byBmb3JjZSBmbGF0IGJlYW1zLCBhcyBpdCBjb21tb25seSBmb3VuZCBpbiB0aGUgZ3JhY2Ugbm90ZXMgb2YgYmFncGlwZSBtdXNpYy5cblx0dGhpcy50eXBlID0gXCJCZWFtRWxlbVwiO1xuXHR0aGlzLmlzZmxhdCA9ICEhZmxhdDtcblx0dGhpcy5pc2dyYWNlID0gISEodHlwZSAmJiB0eXBlID09PSBcImdyYWNlXCIpO1xuXHR0aGlzLmZvcmNldXAgPSAhISh0aGlzLmlzZ3JhY2UgfHwgKHR5cGUgJiYgdHlwZSA9PT0gXCJ1cFwiKSk7XG5cdHRoaXMuZm9yY2Vkb3duID0gISEodHlwZSAmJiB0eXBlID09PSBcImRvd25cIik7XG5cdHRoaXMuZWxlbXMgPSBbXTsgLy8gYWxsIHRoZSBBYnNvbHV0ZUVsZW1lbnRzIHRoYXQgdGhpcyBiZWFtIHRvdWNoZXMuIEl0IG1heSBpbmNsdWRlIGVtYmVkZGVkIHJlc3RzLlxuXHR0aGlzLnRvdGFsID0gMDtcblx0dGhpcy5hdmVyYWdlID0gNjsgLy8gdXNlIG1pZGRsZSBsaW5lIGFzIHN0YXJ0IGZvciBhdmVyYWdlLlxuXHR0aGlzLmFsbHJlc3RzID0gdHJ1ZTtcblx0dGhpcy5zdGVtSGVpZ2h0ID0gc3RlbUhlaWdodDtcblx0dGhpcy5iZWFtcyA9IFtdOyAvLyBEdXJpbmcgdGhlIGxheW91dCBwaGFzZSwgdGhpcyB3aWxsIGJlY29tZSBhIGxpc3Qgb2YgdGhlIGJlYW1zIHRoYXQgbmVlZCB0byBiZSBkcmF3bi5cblx0aWYgKGZpcnN0RWxlbWVudCAmJiBmaXJzdEVsZW1lbnQuZHVyYXRpb24pIHtcblx0XHR0aGlzLmR1cmF0aW9uID0gZmlyc3RFbGVtZW50LmR1cmF0aW9uO1xuXHRcdGlmIChmaXJzdEVsZW1lbnQuc3RhcnRUcmlwbGV0KSB7XG5cdFx0XHR0aGlzLmR1cmF0aW9uICo9IGZpcnN0RWxlbWVudC50cmlwbGV0TXVsdGlwbGllcjtcblx0XHR9XG5cdFx0dGhpcy5kdXJhdGlvbiA9IE1hdGgucm91bmQodGhpcy5kdXJhdGlvbiAqIDEwMDApIC8gMTAwMDtcblx0fSBlbHNlXG5cdFx0dGhpcy5kdXJhdGlvbiA9IDA7XG59O1xuXG5CZWFtRWxlbS5wcm90b3R5cGUuc2V0SGludCA9IGZ1bmN0aW9uICgpIHtcblx0dGhpcy5oaW50ID0gdHJ1ZTtcbn07XG5cbkJlYW1FbGVtLnByb3RvdHlwZS5ydW5uaW5nRGlyZWN0aW9uID0gZnVuY3Rpb24gKGFiY2VsZW0pIHtcblx0dmFyIHBpdGNoID0gYWJjZWxlbS5hdmVyYWdlcGl0Y2g7XG5cdGlmIChwaXRjaCA9PT0gdW5kZWZpbmVkKSByZXR1cm47IC8vIGRvbid0IGluY2x1ZGUgZWxlbWVudHMgbGlrZSBzcGFjZXJzIGluIGJlYW1zXG5cdHRoaXMudG90YWwgPSBNYXRoLnJvdW5kKHRoaXMudG90YWwgKyBwaXRjaCk7XG5cdGlmICghdGhpcy5jb3VudClcblx0XHR0aGlzLmNvdW50ID0gMDtcblx0dGhpcy5jb3VudCsrXG59O1xuXG5CZWFtRWxlbS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGFic2VsZW0pIHtcblx0dmFyIHBpdGNoID0gYWJzZWxlbS5hYmNlbGVtLmF2ZXJhZ2VwaXRjaDtcblx0aWYgKHBpdGNoID09PSB1bmRlZmluZWQpIHJldHVybjsgLy8gZG9uJ3QgaW5jbHVkZSBlbGVtZW50cyBsaWtlIHNwYWNlcnMgaW4gYmVhbXNcblx0aWYgKCFhYnNlbGVtLmFiY2VsZW0ucmVzdClcblx0XHR0aGlzLmFsbHJlc3RzID0gZmFsc2U7XG5cdGFic2VsZW0uYmVhbSA9IHRoaXM7XG5cdHRoaXMuZWxlbXMucHVzaChhYnNlbGVtKTtcblx0dGhpcy50b3RhbCA9IE1hdGgucm91bmQodGhpcy50b3RhbCArIHBpdGNoKTtcblx0aWYgKHRoaXMubWluID09PSB1bmRlZmluZWQgfHwgYWJzZWxlbS5hYmNlbGVtLm1pbnBpdGNoIDwgdGhpcy5taW4pIHtcblx0XHR0aGlzLm1pbiA9IGFic2VsZW0uYWJjZWxlbS5taW5waXRjaDtcblx0fVxuXHRpZiAodGhpcy5tYXggPT09IHVuZGVmaW5lZCB8fCBhYnNlbGVtLmFiY2VsZW0ubWF4cGl0Y2ggPiB0aGlzLm1heCkge1xuXHRcdHRoaXMubWF4ID0gYWJzZWxlbS5hYmNlbGVtLm1heHBpdGNoO1xuXHR9XG59O1xuXG5CZWFtRWxlbS5wcm90b3R5cGUuYWRkQmVhbSA9IGZ1bmN0aW9uIChiZWFtKSB7XG5cdHRoaXMuYmVhbXMucHVzaChiZWFtKTtcbn07XG5cbkJlYW1FbGVtLnByb3RvdHlwZS5zZXRTdGVtRGlyZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuXHQvLyBIYXZlIHRvIGZpZ3VyZSB0aGlzIG91dCBiZWZvcmUgdGhlIG5vdGVzIGFyZSBwbGFjZWQgYmVjYXVzZSBwbGFjaW5nIHRoZSBub3RlcyBhbHNvIHBsYWNlcyB0aGUgZGVjb3JhdGlvbnMuXG5cdHRoaXMuYXZlcmFnZSA9IGNhbGNBdmVyYWdlKHRoaXMudG90YWwsIHRoaXMuY291bnQpO1xuXHRpZiAodGhpcy5mb3JjZXVwKSB7XG5cdFx0dGhpcy5zdGVtc1VwID0gdHJ1ZTtcblx0fSBlbHNlIGlmICh0aGlzLmZvcmNlZG93bikge1xuXHRcdHRoaXMuc3RlbXNVcCA9IGZhbHNlO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBtaWRkbGVMaW5lID0gNjtcdC8vIGhhcmRjb2RlZCA2IGlzIEJcblx0XHR0aGlzLnN0ZW1zVXAgPSB0aGlzLmF2ZXJhZ2UgPCBtaWRkbGVMaW5lOyAvLyB0cnVlIGlzIHVwLCBmYWxzZSBpcyBkb3duO1xuXHR9XG5cdGRlbGV0ZSB0aGlzLmNvdW50O1xuXHR0aGlzLnRvdGFsID0gMDtcbn07XG5cbkJlYW1FbGVtLnByb3RvdHlwZS5jYWxjRGlyID0gZnVuY3Rpb24gKCkge1xuXHR0aGlzLmF2ZXJhZ2UgPSBjYWxjQXZlcmFnZSh0aGlzLnRvdGFsLCB0aGlzLmVsZW1zLmxlbmd0aCk7XG5cdGlmICh0aGlzLmZvcmNldXApIHtcblx0XHR0aGlzLnN0ZW1zVXAgPSB0cnVlO1xuXHR9IGVsc2UgaWYgKHRoaXMuZm9yY2Vkb3duKSB7XG5cdFx0dGhpcy5zdGVtc1VwID0gZmFsc2U7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIG1pZGRsZUxpbmUgPSA2O1x0Ly8gaGFyZGNvZGVkIDYgaXMgQlxuXHRcdHRoaXMuc3RlbXNVcCA9IHRoaXMuYXZlcmFnZSA8IG1pZGRsZUxpbmU7IC8vIHRydWUgaXMgdXAsIGZhbHNlIGlzIGRvd247XG5cdH1cblx0dmFyIGRpciA9IHRoaXMuc3RlbXNVcCA/ICd1cCcgOiAnZG93bic7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5lbGVtcy5sZW5ndGg7IGkrKykge1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5lbGVtc1tpXS5oZWFkcy5sZW5ndGg7IGorKykge1xuXHRcdFx0dGhpcy5lbGVtc1tpXS5oZWFkc1tqXS5zdGVtRGlyID0gZGlyO1xuXHRcdH1cblx0fVxufTtcblxuZnVuY3Rpb24gY2FsY0F2ZXJhZ2UodG90YWwsIG51bUVsZW1lbnRzKSB7XG5cdGlmICghbnVtRWxlbWVudHMpXG5cdFx0cmV0dXJuIDA7XG5cdHJldHVybiB0b3RhbCAvIG51bUVsZW1lbnRzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEJlYW1FbGVtO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/beam-element.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/bottom-text.js":
/*!***********************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/bottom-text.js ***!
  \***********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const addTextIf = __webpack_require__(/*! ../add-text-if */ \"(ssr)/./node_modules/abcjs/src/write/creation/add-text-if.js\");\nconst richText = __webpack_require__(/*! ./rich-text */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/rich-text.js\");\n\nfunction BottomText(metaText, width, isPrint, paddingLeft, spacing, shouldAddClasses, getTextSize) {\n\tthis.rows = [];\n\tif (metaText.unalignedWords && metaText.unalignedWords.length > 0)\n\t\tthis.unalignedWords(metaText.unalignedWords, paddingLeft, spacing, shouldAddClasses, getTextSize);\n\tthis.extraText(metaText, paddingLeft, spacing, shouldAddClasses, getTextSize);\n\tif (metaText.footer && isPrint)\n\t\tthis.footer(metaText.footer, width, paddingLeft, getTextSize);\n}\n\nBottomText.prototype.unalignedWords = function (unalignedWords, marginLeft, spacing, shouldAddClasses, getTextSize) {\n\tvar klass = shouldAddClasses ? 'abcjs-unaligned-words' : ''\n\tvar defFont = 'wordsfont';\n\tvar space = getTextSize.calc(\"i\", defFont, klass);\n\t\n\tthis.rows.push({ move: spacing.words });\n\t\n\taddMultiLine(this.rows, '', unalignedWords, marginLeft, defFont, \"unalignedWords\", \"unalignedWords\", klass, \"unalignedWords\", spacing, shouldAddClasses, getTextSize)\n\tthis.rows.push({ move: space.height });\n}\n\nfunction addSingleLine(rows, preface, text, marginLeft, klass, shouldAddClasses, getTextSize) {\n\tif (text) {\n\t\tif (preface) {\n\t\t\tif (typeof text === 'string')\n\t\t\t\ttext = preface + text\n\t\t\telse\n\t\t\t\ttext = [{text: preface}].concat(text)\n\t\t}\n\t\tklass = shouldAddClasses ? 'abcjs-extra-text '+klass : ''\n\t\trichText(rows, text, 'historyfont', klass, \"description\", marginLeft, {absElemType: \"extraText\", anchor: 'start'}, getTextSize)\n\t}\n\n}\n\nfunction addMultiLine(rows, preface, content, marginLeft, defFont, absElemType, groupName, klass, name, spacing, shouldAddClasses, getTextSize) {\n\tif (content) {\n\t\tklass = shouldAddClasses ? 'abcjs-extra-text '+klass : ''\n\t\tvar size = getTextSize.calc(\"A\", defFont, klass);\n\t\tif (typeof content === 'string') {\n\t\t\tif (preface)\n\t\t\t\tcontent = preface + \"\\n\" + content\n\t\t\taddTextIf(rows, { marginLeft: marginLeft, text: content, font: defFont, absElemType: \"extraText\", name: name, 'dominant-baseline': 'middle', klass: klass }, getTextSize);\n\t\t\t//rows.push({move: size.height*3/4})\n\t\t} else {\n\t\t\trows.push({ startGroup: groupName, klass: klass, name: name });\n\t\t\trows.push({move: spacing.info})\n\t\t\tif (preface) {\n\t\t\t\taddTextIf(rows, { marginLeft: marginLeft, text: preface, font: defFont, absElemType: \"extraText\", name: name, 'dominant-baseline': 'middle' }, getTextSize);\n\t\t\t\trows.push({move: size.height*3/4})\n\t\t\t}\n\n\t\t\tfor (var j = 0; j < content.length; j++) {\n\t\t\t\trichText(rows, content[j], defFont, '', name, marginLeft, {anchor: 'start'}, getTextSize)\n\t\t\t\t// TODO-PER: Hack! the string and rich lines should have used up the same amount of space without this.\n\t\t\t\tif (j < content.length-1 && typeof content[j] === 'string' && typeof content[j+1] !== 'string')\n\t\t\t\t\trows.push({move: size.height*3/4})\n\t\t\t}\n\t\t\trows.push({ endGroup: groupName, absElemType: absElemType, startChar: -1, endChar: -1, name: name });\n\t\t\trows.push({move: size.height})\n\t\t}\n\t}\n}\nBottomText.prototype.extraText = function (metaText, marginLeft, spacing, shouldAddClasses, getTextSize) {\n\taddSingleLine(this.rows, \"Book: \", metaText.book, marginLeft, 'abcjs-book', shouldAddClasses, getTextSize)\n\taddSingleLine(this.rows, \"Source: \", metaText.source, marginLeft, 'abcjs-source', shouldAddClasses, getTextSize)\n\taddSingleLine(this.rows, \"Discography: \", metaText.discography, marginLeft, 'abcjs-discography', shouldAddClasses, getTextSize)\n\n\taddMultiLine(this.rows, 'Notes:', metaText.notes, marginLeft, 'historyfont', \"extraText\", \"notes\", 'abcjs-notes', \"description\", spacing, shouldAddClasses, getTextSize)\n\n\taddSingleLine(this.rows, \"Transcription: \", metaText.transcription, marginLeft, 'abcjs-transcription', shouldAddClasses, getTextSize)\n\n\taddMultiLine(this.rows, \"History:\", metaText.history, marginLeft, 'historyfont', \"extraText\", \"history\", 'abcjs-history', \"description\", spacing, shouldAddClasses, getTextSize)\n\n\taddSingleLine(this.rows, \"Copyright: \", metaText['abc-copyright'], marginLeft, 'abcjs-copyright', shouldAddClasses, getTextSize)\n\taddSingleLine(this.rows, \"Creator: \", metaText['abc-creator'], marginLeft, 'abcjs-creator', shouldAddClasses, getTextSize)\n\taddSingleLine(this.rows, \"Edited By: \", metaText['abc-edited-by'], marginLeft, 'abcjs-edited-by', shouldAddClasses, getTextSize)\n\n}\n\nBottomText.prototype.footer = function (footer, width, paddingLeft, getTextSize) {\n\tvar klass = 'header meta-bottom';\n\tvar font = \"footerfont\";\n\tthis.rows.push({ startGroup: \"footer\", klass: klass });\n\t// Note: whether there is a footer or not doesn't change any other positioning, so this doesn't change the Y-coordinate.\n\taddTextIf(this.rows, { marginLeft: paddingLeft, text: footer.left, font: font, klass: klass, name: \"footer\" }, getTextSize);\n\taddTextIf(this.rows, { marginLeft: paddingLeft + width / 2, text: footer.center, font: font, klass: klass, anchor: 'middle', name: \"footer\" }, getTextSize);\n\taddTextIf(this.rows, { marginLeft: paddingLeft + width, text: footer.right, font: font, klass: klass, anchor: 'end', name: \"footer\" }, getTextSize);\n}\n\nmodule.exports = BottomText;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL2JvdHRvbS10ZXh0LmpzIiwibWFwcGluZ3MiOiJBQUFBLGtCQUFrQixtQkFBTyxDQUFDLG9GQUFnQjtBQUMxQyxpQkFBaUIsbUJBQU8sQ0FBQyx3RkFBYTs7QUFFdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHFCQUFxQjtBQUN2QztBQUNBO0FBQ0Esa0JBQWtCLG9CQUFvQjtBQUN0Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGNBQWM7QUFDM0I7QUFDQTtBQUNBLHlFQUF5RSwwQ0FBMEM7QUFDbkg7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIseUlBQXlJO0FBQzlKLGdCQUFnQixzQkFBc0I7QUFDdEMsSUFBSTtBQUNKLGVBQWUsaURBQWlEO0FBQ2hFLGNBQWMsbUJBQW1CO0FBQ2pDO0FBQ0Esc0JBQXNCLDJIQUEySDtBQUNqSixlQUFlLHNCQUFzQjtBQUNyQzs7QUFFQSxtQkFBbUIsb0JBQW9CO0FBQ3ZDLCtEQUErRCxnQkFBZ0I7QUFDL0U7QUFDQTtBQUNBLGdCQUFnQixzQkFBc0I7QUFDdEM7QUFDQSxlQUFlLHVGQUF1RjtBQUN0RyxjQUFjLGtCQUFrQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG9DQUFvQztBQUN0RDtBQUNBLHdCQUF3QixzRkFBc0Y7QUFDOUcsd0JBQXdCLHNIQUFzSDtBQUM5SSx3QkFBd0IsOEdBQThHO0FBQ3RJOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL2JvdHRvbS10ZXh0LmpzPzA3NzMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYWRkVGV4dElmID0gcmVxdWlyZShcIi4uL2FkZC10ZXh0LWlmXCIpO1xuY29uc3QgcmljaFRleHQgPSByZXF1aXJlKFwiLi9yaWNoLXRleHRcIik7XG5cbmZ1bmN0aW9uIEJvdHRvbVRleHQobWV0YVRleHQsIHdpZHRoLCBpc1ByaW50LCBwYWRkaW5nTGVmdCwgc3BhY2luZywgc2hvdWxkQWRkQ2xhc3NlcywgZ2V0VGV4dFNpemUpIHtcblx0dGhpcy5yb3dzID0gW107XG5cdGlmIChtZXRhVGV4dC51bmFsaWduZWRXb3JkcyAmJiBtZXRhVGV4dC51bmFsaWduZWRXb3Jkcy5sZW5ndGggPiAwKVxuXHRcdHRoaXMudW5hbGlnbmVkV29yZHMobWV0YVRleHQudW5hbGlnbmVkV29yZHMsIHBhZGRpbmdMZWZ0LCBzcGFjaW5nLCBzaG91bGRBZGRDbGFzc2VzLCBnZXRUZXh0U2l6ZSk7XG5cdHRoaXMuZXh0cmFUZXh0KG1ldGFUZXh0LCBwYWRkaW5nTGVmdCwgc3BhY2luZywgc2hvdWxkQWRkQ2xhc3NlcywgZ2V0VGV4dFNpemUpO1xuXHRpZiAobWV0YVRleHQuZm9vdGVyICYmIGlzUHJpbnQpXG5cdFx0dGhpcy5mb290ZXIobWV0YVRleHQuZm9vdGVyLCB3aWR0aCwgcGFkZGluZ0xlZnQsIGdldFRleHRTaXplKTtcbn1cblxuQm90dG9tVGV4dC5wcm90b3R5cGUudW5hbGlnbmVkV29yZHMgPSBmdW5jdGlvbiAodW5hbGlnbmVkV29yZHMsIG1hcmdpbkxlZnQsIHNwYWNpbmcsIHNob3VsZEFkZENsYXNzZXMsIGdldFRleHRTaXplKSB7XG5cdHZhciBrbGFzcyA9IHNob3VsZEFkZENsYXNzZXMgPyAnYWJjanMtdW5hbGlnbmVkLXdvcmRzJyA6ICcnXG5cdHZhciBkZWZGb250ID0gJ3dvcmRzZm9udCc7XG5cdHZhciBzcGFjZSA9IGdldFRleHRTaXplLmNhbGMoXCJpXCIsIGRlZkZvbnQsIGtsYXNzKTtcblx0XG5cdHRoaXMucm93cy5wdXNoKHsgbW92ZTogc3BhY2luZy53b3JkcyB9KTtcblx0XG5cdGFkZE11bHRpTGluZSh0aGlzLnJvd3MsICcnLCB1bmFsaWduZWRXb3JkcywgbWFyZ2luTGVmdCwgZGVmRm9udCwgXCJ1bmFsaWduZWRXb3Jkc1wiLCBcInVuYWxpZ25lZFdvcmRzXCIsIGtsYXNzLCBcInVuYWxpZ25lZFdvcmRzXCIsIHNwYWNpbmcsIHNob3VsZEFkZENsYXNzZXMsIGdldFRleHRTaXplKVxuXHR0aGlzLnJvd3MucHVzaCh7IG1vdmU6IHNwYWNlLmhlaWdodCB9KTtcbn1cblxuZnVuY3Rpb24gYWRkU2luZ2xlTGluZShyb3dzLCBwcmVmYWNlLCB0ZXh0LCBtYXJnaW5MZWZ0LCBrbGFzcywgc2hvdWxkQWRkQ2xhc3NlcywgZ2V0VGV4dFNpemUpIHtcblx0aWYgKHRleHQpIHtcblx0XHRpZiAocHJlZmFjZSkge1xuXHRcdFx0aWYgKHR5cGVvZiB0ZXh0ID09PSAnc3RyaW5nJylcblx0XHRcdFx0dGV4dCA9IHByZWZhY2UgKyB0ZXh0XG5cdFx0XHRlbHNlXG5cdFx0XHRcdHRleHQgPSBbe3RleHQ6IHByZWZhY2V9XS5jb25jYXQodGV4dClcblx0XHR9XG5cdFx0a2xhc3MgPSBzaG91bGRBZGRDbGFzc2VzID8gJ2FiY2pzLWV4dHJhLXRleHQgJytrbGFzcyA6ICcnXG5cdFx0cmljaFRleHQocm93cywgdGV4dCwgJ2hpc3Rvcnlmb250Jywga2xhc3MsIFwiZGVzY3JpcHRpb25cIiwgbWFyZ2luTGVmdCwge2Fic0VsZW1UeXBlOiBcImV4dHJhVGV4dFwiLCBhbmNob3I6ICdzdGFydCd9LCBnZXRUZXh0U2l6ZSlcblx0fVxuXG59XG5cbmZ1bmN0aW9uIGFkZE11bHRpTGluZShyb3dzLCBwcmVmYWNlLCBjb250ZW50LCBtYXJnaW5MZWZ0LCBkZWZGb250LCBhYnNFbGVtVHlwZSwgZ3JvdXBOYW1lLCBrbGFzcywgbmFtZSwgc3BhY2luZywgc2hvdWxkQWRkQ2xhc3NlcywgZ2V0VGV4dFNpemUpIHtcblx0aWYgKGNvbnRlbnQpIHtcblx0XHRrbGFzcyA9IHNob3VsZEFkZENsYXNzZXMgPyAnYWJjanMtZXh0cmEtdGV4dCAnK2tsYXNzIDogJydcblx0XHR2YXIgc2l6ZSA9IGdldFRleHRTaXplLmNhbGMoXCJBXCIsIGRlZkZvbnQsIGtsYXNzKTtcblx0XHRpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRpZiAocHJlZmFjZSlcblx0XHRcdFx0Y29udGVudCA9IHByZWZhY2UgKyBcIlxcblwiICsgY29udGVudFxuXHRcdFx0YWRkVGV4dElmKHJvd3MsIHsgbWFyZ2luTGVmdDogbWFyZ2luTGVmdCwgdGV4dDogY29udGVudCwgZm9udDogZGVmRm9udCwgYWJzRWxlbVR5cGU6IFwiZXh0cmFUZXh0XCIsIG5hbWU6IG5hbWUsICdkb21pbmFudC1iYXNlbGluZSc6ICdtaWRkbGUnLCBrbGFzczoga2xhc3MgfSwgZ2V0VGV4dFNpemUpO1xuXHRcdFx0Ly9yb3dzLnB1c2goe21vdmU6IHNpemUuaGVpZ2h0KjMvNH0pXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJvd3MucHVzaCh7IHN0YXJ0R3JvdXA6IGdyb3VwTmFtZSwga2xhc3M6IGtsYXNzLCBuYW1lOiBuYW1lIH0pO1xuXHRcdFx0cm93cy5wdXNoKHttb3ZlOiBzcGFjaW5nLmluZm99KVxuXHRcdFx0aWYgKHByZWZhY2UpIHtcblx0XHRcdFx0YWRkVGV4dElmKHJvd3MsIHsgbWFyZ2luTGVmdDogbWFyZ2luTGVmdCwgdGV4dDogcHJlZmFjZSwgZm9udDogZGVmRm9udCwgYWJzRWxlbVR5cGU6IFwiZXh0cmFUZXh0XCIsIG5hbWU6IG5hbWUsICdkb21pbmFudC1iYXNlbGluZSc6ICdtaWRkbGUnIH0sIGdldFRleHRTaXplKTtcblx0XHRcdFx0cm93cy5wdXNoKHttb3ZlOiBzaXplLmhlaWdodCozLzR9KVxuXHRcdFx0fVxuXG5cdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNvbnRlbnQubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0cmljaFRleHQocm93cywgY29udGVudFtqXSwgZGVmRm9udCwgJycsIG5hbWUsIG1hcmdpbkxlZnQsIHthbmNob3I6ICdzdGFydCd9LCBnZXRUZXh0U2l6ZSlcblx0XHRcdFx0Ly8gVE9ETy1QRVI6IEhhY2shIHRoZSBzdHJpbmcgYW5kIHJpY2ggbGluZXMgc2hvdWxkIGhhdmUgdXNlZCB1cCB0aGUgc2FtZSBhbW91bnQgb2Ygc3BhY2Ugd2l0aG91dCB0aGlzLlxuXHRcdFx0XHRpZiAoaiA8IGNvbnRlbnQubGVuZ3RoLTEgJiYgdHlwZW9mIGNvbnRlbnRbal0gPT09ICdzdHJpbmcnICYmIHR5cGVvZiBjb250ZW50W2orMV0gIT09ICdzdHJpbmcnKVxuXHRcdFx0XHRcdHJvd3MucHVzaCh7bW92ZTogc2l6ZS5oZWlnaHQqMy80fSlcblx0XHRcdH1cblx0XHRcdHJvd3MucHVzaCh7IGVuZEdyb3VwOiBncm91cE5hbWUsIGFic0VsZW1UeXBlOiBhYnNFbGVtVHlwZSwgc3RhcnRDaGFyOiAtMSwgZW5kQ2hhcjogLTEsIG5hbWU6IG5hbWUgfSk7XG5cdFx0XHRyb3dzLnB1c2goe21vdmU6IHNpemUuaGVpZ2h0fSlcblx0XHR9XG5cdH1cbn1cbkJvdHRvbVRleHQucHJvdG90eXBlLmV4dHJhVGV4dCA9IGZ1bmN0aW9uIChtZXRhVGV4dCwgbWFyZ2luTGVmdCwgc3BhY2luZywgc2hvdWxkQWRkQ2xhc3NlcywgZ2V0VGV4dFNpemUpIHtcblx0YWRkU2luZ2xlTGluZSh0aGlzLnJvd3MsIFwiQm9vazogXCIsIG1ldGFUZXh0LmJvb2ssIG1hcmdpbkxlZnQsICdhYmNqcy1ib29rJywgc2hvdWxkQWRkQ2xhc3NlcywgZ2V0VGV4dFNpemUpXG5cdGFkZFNpbmdsZUxpbmUodGhpcy5yb3dzLCBcIlNvdXJjZTogXCIsIG1ldGFUZXh0LnNvdXJjZSwgbWFyZ2luTGVmdCwgJ2FiY2pzLXNvdXJjZScsIHNob3VsZEFkZENsYXNzZXMsIGdldFRleHRTaXplKVxuXHRhZGRTaW5nbGVMaW5lKHRoaXMucm93cywgXCJEaXNjb2dyYXBoeTogXCIsIG1ldGFUZXh0LmRpc2NvZ3JhcGh5LCBtYXJnaW5MZWZ0LCAnYWJjanMtZGlzY29ncmFwaHknLCBzaG91bGRBZGRDbGFzc2VzLCBnZXRUZXh0U2l6ZSlcblxuXHRhZGRNdWx0aUxpbmUodGhpcy5yb3dzLCAnTm90ZXM6JywgbWV0YVRleHQubm90ZXMsIG1hcmdpbkxlZnQsICdoaXN0b3J5Zm9udCcsIFwiZXh0cmFUZXh0XCIsIFwibm90ZXNcIiwgJ2FiY2pzLW5vdGVzJywgXCJkZXNjcmlwdGlvblwiLCBzcGFjaW5nLCBzaG91bGRBZGRDbGFzc2VzLCBnZXRUZXh0U2l6ZSlcblxuXHRhZGRTaW5nbGVMaW5lKHRoaXMucm93cywgXCJUcmFuc2NyaXB0aW9uOiBcIiwgbWV0YVRleHQudHJhbnNjcmlwdGlvbiwgbWFyZ2luTGVmdCwgJ2FiY2pzLXRyYW5zY3JpcHRpb24nLCBzaG91bGRBZGRDbGFzc2VzLCBnZXRUZXh0U2l6ZSlcblxuXHRhZGRNdWx0aUxpbmUodGhpcy5yb3dzLCBcIkhpc3Rvcnk6XCIsIG1ldGFUZXh0Lmhpc3RvcnksIG1hcmdpbkxlZnQsICdoaXN0b3J5Zm9udCcsIFwiZXh0cmFUZXh0XCIsIFwiaGlzdG9yeVwiLCAnYWJjanMtaGlzdG9yeScsIFwiZGVzY3JpcHRpb25cIiwgc3BhY2luZywgc2hvdWxkQWRkQ2xhc3NlcywgZ2V0VGV4dFNpemUpXG5cblx0YWRkU2luZ2xlTGluZSh0aGlzLnJvd3MsIFwiQ29weXJpZ2h0OiBcIiwgbWV0YVRleHRbJ2FiYy1jb3B5cmlnaHQnXSwgbWFyZ2luTGVmdCwgJ2FiY2pzLWNvcHlyaWdodCcsIHNob3VsZEFkZENsYXNzZXMsIGdldFRleHRTaXplKVxuXHRhZGRTaW5nbGVMaW5lKHRoaXMucm93cywgXCJDcmVhdG9yOiBcIiwgbWV0YVRleHRbJ2FiYy1jcmVhdG9yJ10sIG1hcmdpbkxlZnQsICdhYmNqcy1jcmVhdG9yJywgc2hvdWxkQWRkQ2xhc3NlcywgZ2V0VGV4dFNpemUpXG5cdGFkZFNpbmdsZUxpbmUodGhpcy5yb3dzLCBcIkVkaXRlZCBCeTogXCIsIG1ldGFUZXh0WydhYmMtZWRpdGVkLWJ5J10sIG1hcmdpbkxlZnQsICdhYmNqcy1lZGl0ZWQtYnknLCBzaG91bGRBZGRDbGFzc2VzLCBnZXRUZXh0U2l6ZSlcblxufVxuXG5Cb3R0b21UZXh0LnByb3RvdHlwZS5mb290ZXIgPSBmdW5jdGlvbiAoZm9vdGVyLCB3aWR0aCwgcGFkZGluZ0xlZnQsIGdldFRleHRTaXplKSB7XG5cdHZhciBrbGFzcyA9ICdoZWFkZXIgbWV0YS1ib3R0b20nO1xuXHR2YXIgZm9udCA9IFwiZm9vdGVyZm9udFwiO1xuXHR0aGlzLnJvd3MucHVzaCh7IHN0YXJ0R3JvdXA6IFwiZm9vdGVyXCIsIGtsYXNzOiBrbGFzcyB9KTtcblx0Ly8gTm90ZTogd2hldGhlciB0aGVyZSBpcyBhIGZvb3RlciBvciBub3QgZG9lc24ndCBjaGFuZ2UgYW55IG90aGVyIHBvc2l0aW9uaW5nLCBzbyB0aGlzIGRvZXNuJ3QgY2hhbmdlIHRoZSBZLWNvb3JkaW5hdGUuXG5cdGFkZFRleHRJZih0aGlzLnJvd3MsIHsgbWFyZ2luTGVmdDogcGFkZGluZ0xlZnQsIHRleHQ6IGZvb3Rlci5sZWZ0LCBmb250OiBmb250LCBrbGFzczoga2xhc3MsIG5hbWU6IFwiZm9vdGVyXCIgfSwgZ2V0VGV4dFNpemUpO1xuXHRhZGRUZXh0SWYodGhpcy5yb3dzLCB7IG1hcmdpbkxlZnQ6IHBhZGRpbmdMZWZ0ICsgd2lkdGggLyAyLCB0ZXh0OiBmb290ZXIuY2VudGVyLCBmb250OiBmb250LCBrbGFzczoga2xhc3MsIGFuY2hvcjogJ21pZGRsZScsIG5hbWU6IFwiZm9vdGVyXCIgfSwgZ2V0VGV4dFNpemUpO1xuXHRhZGRUZXh0SWYodGhpcy5yb3dzLCB7IG1hcmdpbkxlZnQ6IHBhZGRpbmdMZWZ0ICsgd2lkdGgsIHRleHQ6IGZvb3Rlci5yaWdodCwgZm9udDogZm9udCwga2xhc3M6IGtsYXNzLCBhbmNob3I6ICdlbmQnLCBuYW1lOiBcImZvb3RlclwiIH0sIGdldFRleHRTaXplKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBCb3R0b21UZXh0O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/bottom-text.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/brace-element.js":
/*!*************************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/brace-element.js ***!
  \*************************************************************************/
/***/ ((module) => {

eval("//    abc_brace_element.js: Definition of the BraceElement class.\n\nvar BraceElem = function BraceElem(voice, type) {\n\tthis.startVoice = voice;\n\tthis.type = type;\n};\n\nBraceElem.prototype.setBottomStaff = function (voice) {\n\tthis.endVoice = voice;\n\t// If only the start brace has a name then the name belongs to the brace instead of the staff.\n\tif (this.startVoice.header && !this.endVoice.header) {\n\t\tthis.header = this.startVoice.header;\n\t\tdelete this.startVoice.header;\n\t}\n};\n\nBraceElem.prototype.continuing = function (voice) {\n\t// If the final staff isn't present, then use the last one we saw.\n\tthis.lastContinuedVoice = voice;\n};\n\nBraceElem.prototype.getWidth = function () {\n\treturn 10; // TODO-PER: right now the drawing function doesn't vary the width at all. If it does in the future then this will change.\n};\n\nBraceElem.prototype.isStartVoice = function (voice) {\n\tif (this.startVoice && this.startVoice.staff && this.startVoice.staff.voices.length > 0 && this.startVoice.staff.voices[0] === voice)\n\t\treturn true;\n\treturn false;\n};\n\nmodule.exports = BraceElem;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL2JyYWNlLWVsZW1lbnQuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFlBQVk7QUFDWjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL2JyYWNlLWVsZW1lbnQuanM/MDJkMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAgICBhYmNfYnJhY2VfZWxlbWVudC5qczogRGVmaW5pdGlvbiBvZiB0aGUgQnJhY2VFbGVtZW50IGNsYXNzLlxuXG52YXIgQnJhY2VFbGVtID0gZnVuY3Rpb24gQnJhY2VFbGVtKHZvaWNlLCB0eXBlKSB7XG5cdHRoaXMuc3RhcnRWb2ljZSA9IHZvaWNlO1xuXHR0aGlzLnR5cGUgPSB0eXBlO1xufTtcblxuQnJhY2VFbGVtLnByb3RvdHlwZS5zZXRCb3R0b21TdGFmZiA9IGZ1bmN0aW9uICh2b2ljZSkge1xuXHR0aGlzLmVuZFZvaWNlID0gdm9pY2U7XG5cdC8vIElmIG9ubHkgdGhlIHN0YXJ0IGJyYWNlIGhhcyBhIG5hbWUgdGhlbiB0aGUgbmFtZSBiZWxvbmdzIHRvIHRoZSBicmFjZSBpbnN0ZWFkIG9mIHRoZSBzdGFmZi5cblx0aWYgKHRoaXMuc3RhcnRWb2ljZS5oZWFkZXIgJiYgIXRoaXMuZW5kVm9pY2UuaGVhZGVyKSB7XG5cdFx0dGhpcy5oZWFkZXIgPSB0aGlzLnN0YXJ0Vm9pY2UuaGVhZGVyO1xuXHRcdGRlbGV0ZSB0aGlzLnN0YXJ0Vm9pY2UuaGVhZGVyO1xuXHR9XG59O1xuXG5CcmFjZUVsZW0ucHJvdG90eXBlLmNvbnRpbnVpbmcgPSBmdW5jdGlvbiAodm9pY2UpIHtcblx0Ly8gSWYgdGhlIGZpbmFsIHN0YWZmIGlzbid0IHByZXNlbnQsIHRoZW4gdXNlIHRoZSBsYXN0IG9uZSB3ZSBzYXcuXG5cdHRoaXMubGFzdENvbnRpbnVlZFZvaWNlID0gdm9pY2U7XG59O1xuXG5CcmFjZUVsZW0ucHJvdG90eXBlLmdldFdpZHRoID0gZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gMTA7IC8vIFRPRE8tUEVSOiByaWdodCBub3cgdGhlIGRyYXdpbmcgZnVuY3Rpb24gZG9lc24ndCB2YXJ5IHRoZSB3aWR0aCBhdCBhbGwuIElmIGl0IGRvZXMgaW4gdGhlIGZ1dHVyZSB0aGVuIHRoaXMgd2lsbCBjaGFuZ2UuXG59O1xuXG5CcmFjZUVsZW0ucHJvdG90eXBlLmlzU3RhcnRWb2ljZSA9IGZ1bmN0aW9uICh2b2ljZSkge1xuXHRpZiAodGhpcy5zdGFydFZvaWNlICYmIHRoaXMuc3RhcnRWb2ljZS5zdGFmZiAmJiB0aGlzLnN0YXJ0Vm9pY2Uuc3RhZmYudm9pY2VzLmxlbmd0aCA+IDAgJiYgdGhpcy5zdGFydFZvaWNlLnN0YWZmLnZvaWNlc1swXSA9PT0gdm9pY2UpXG5cdFx0cmV0dXJuIHRydWU7XG5cdHJldHVybiBmYWxzZTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQnJhY2VFbGVtO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/brace-element.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/crescendo-element.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/crescendo-element.js ***!
  \*****************************************************************************/
/***/ ((module) => {

eval("//    abc_crescendo_element.js: Definition of the CrescendoElem class.\n\nvar CrescendoElem = function CrescendoElem(anchor1, anchor2, dir, positioning) {\n\tthis.type = \"CrescendoElem\";\n\tthis.anchor1 = anchor1; // must have a .x and a .parent property or be null (means starts at the \"beginning\" of the line - after keysig)\n\tthis.anchor2 = anchor2; // must have a .x property or be null (means ends at the end of the line)\n\tthis.dir = dir; // either \"<\" or \">\"\n\tif (positioning === 'above')\n\t\tthis.dynamicHeightAbove = 6;\n\telse\n\t\tthis.dynamicHeightBelow = 6;\n\tthis.pitch = undefined; // This will be set later\n};\n\nmodule.exports = CrescendoElem;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL2NyZXNjZW5kby1lbGVtZW50LmpzIiwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIseUJBQXlCO0FBQ3pCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9jcmVhdGlvbi9lbGVtZW50cy9jcmVzY2VuZG8tZWxlbWVudC5qcz9mODUyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vICAgIGFiY19jcmVzY2VuZG9fZWxlbWVudC5qczogRGVmaW5pdGlvbiBvZiB0aGUgQ3Jlc2NlbmRvRWxlbSBjbGFzcy5cblxudmFyIENyZXNjZW5kb0VsZW0gPSBmdW5jdGlvbiBDcmVzY2VuZG9FbGVtKGFuY2hvcjEsIGFuY2hvcjIsIGRpciwgcG9zaXRpb25pbmcpIHtcblx0dGhpcy50eXBlID0gXCJDcmVzY2VuZG9FbGVtXCI7XG5cdHRoaXMuYW5jaG9yMSA9IGFuY2hvcjE7IC8vIG11c3QgaGF2ZSBhIC54IGFuZCBhIC5wYXJlbnQgcHJvcGVydHkgb3IgYmUgbnVsbCAobWVhbnMgc3RhcnRzIGF0IHRoZSBcImJlZ2lubmluZ1wiIG9mIHRoZSBsaW5lIC0gYWZ0ZXIga2V5c2lnKVxuXHR0aGlzLmFuY2hvcjIgPSBhbmNob3IyOyAvLyBtdXN0IGhhdmUgYSAueCBwcm9wZXJ0eSBvciBiZSBudWxsIChtZWFucyBlbmRzIGF0IHRoZSBlbmQgb2YgdGhlIGxpbmUpXG5cdHRoaXMuZGlyID0gZGlyOyAvLyBlaXRoZXIgXCI8XCIgb3IgXCI+XCJcblx0aWYgKHBvc2l0aW9uaW5nID09PSAnYWJvdmUnKVxuXHRcdHRoaXMuZHluYW1pY0hlaWdodEFib3ZlID0gNjtcblx0ZWxzZVxuXHRcdHRoaXMuZHluYW1pY0hlaWdodEJlbG93ID0gNjtcblx0dGhpcy5waXRjaCA9IHVuZGVmaW5lZDsgLy8gVGhpcyB3aWxsIGJlIHNldCBsYXRlclxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDcmVzY2VuZG9FbGVtO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/crescendo-element.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/dynamic-decoration.js":
/*!******************************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/dynamic-decoration.js ***!
  \******************************************************************************/
/***/ ((module) => {

eval("//    abc_dynamic_decoration.js: Definition of the DynamicDecoration class.\n\nvar DynamicDecoration = function DynamicDecoration(anchor, dec, position) {\n\tthis.type = \"DynamicDecoration\";\n\tthis.anchor = anchor;\n\tthis.dec = dec;\n\tif (position === 'below')\n\t\tthis.volumeHeightBelow = 6;\n\telse\n\t\tthis.volumeHeightAbove = 6;\n\tthis.pitch = undefined; // This will be set later\n};\n\nmodule.exports = DynamicDecoration;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL2R5bmFtaWMtZGVjb3JhdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL2R5bmFtaWMtZGVjb3JhdGlvbi5qcz8wOTM2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vICAgIGFiY19keW5hbWljX2RlY29yYXRpb24uanM6IERlZmluaXRpb24gb2YgdGhlIER5bmFtaWNEZWNvcmF0aW9uIGNsYXNzLlxuXG52YXIgRHluYW1pY0RlY29yYXRpb24gPSBmdW5jdGlvbiBEeW5hbWljRGVjb3JhdGlvbihhbmNob3IsIGRlYywgcG9zaXRpb24pIHtcblx0dGhpcy50eXBlID0gXCJEeW5hbWljRGVjb3JhdGlvblwiO1xuXHR0aGlzLmFuY2hvciA9IGFuY2hvcjtcblx0dGhpcy5kZWMgPSBkZWM7XG5cdGlmIChwb3NpdGlvbiA9PT0gJ2JlbG93Jylcblx0XHR0aGlzLnZvbHVtZUhlaWdodEJlbG93ID0gNjtcblx0ZWxzZVxuXHRcdHRoaXMudm9sdW1lSGVpZ2h0QWJvdmUgPSA2O1xuXHR0aGlzLnBpdGNoID0gdW5kZWZpbmVkOyAvLyBUaGlzIHdpbGwgYmUgc2V0IGxhdGVyXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IER5bmFtaWNEZWNvcmF0aW9uO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/dynamic-decoration.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/ending-element.js":
/*!**************************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/ending-element.js ***!
  \**************************************************************************/
/***/ ((module) => {

eval("//    abc_ending_element.js: Definition of the EndingElement class.\n\nvar EndingElem = function EndingElem(text, anchor1, anchor2) {\n\tthis.type = \"EndingElem\";\n\tthis.text = text; // text to be displayed top left\n\tthis.anchor1 = anchor1; // must have a .x property or be null (means starts at the \"beginning\" of the line - after keysig)\n\tthis.anchor2 = anchor2; // must have a .x property or be null (means ends at the end of the line)\n\tthis.endingHeightAbove = 5;\n\tthis.pitch = undefined; // This will be set later\n};\n\nmodule.exports = EndingElem;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL2VuZGluZy1lbGVtZW50LmpzIiwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkIseUJBQXlCO0FBQ3pCLHlCQUF5QjtBQUN6QjtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9jcmVhdGlvbi9lbGVtZW50cy9lbmRpbmctZWxlbWVudC5qcz9mOGJiIl0sInNvdXJjZXNDb250ZW50IjpbIi8vICAgIGFiY19lbmRpbmdfZWxlbWVudC5qczogRGVmaW5pdGlvbiBvZiB0aGUgRW5kaW5nRWxlbWVudCBjbGFzcy5cblxudmFyIEVuZGluZ0VsZW0gPSBmdW5jdGlvbiBFbmRpbmdFbGVtKHRleHQsIGFuY2hvcjEsIGFuY2hvcjIpIHtcblx0dGhpcy50eXBlID0gXCJFbmRpbmdFbGVtXCI7XG5cdHRoaXMudGV4dCA9IHRleHQ7IC8vIHRleHQgdG8gYmUgZGlzcGxheWVkIHRvcCBsZWZ0XG5cdHRoaXMuYW5jaG9yMSA9IGFuY2hvcjE7IC8vIG11c3QgaGF2ZSBhIC54IHByb3BlcnR5IG9yIGJlIG51bGwgKG1lYW5zIHN0YXJ0cyBhdCB0aGUgXCJiZWdpbm5pbmdcIiBvZiB0aGUgbGluZSAtIGFmdGVyIGtleXNpZylcblx0dGhpcy5hbmNob3IyID0gYW5jaG9yMjsgLy8gbXVzdCBoYXZlIGEgLnggcHJvcGVydHkgb3IgYmUgbnVsbCAobWVhbnMgZW5kcyBhdCB0aGUgZW5kIG9mIHRoZSBsaW5lKVxuXHR0aGlzLmVuZGluZ0hlaWdodEFib3ZlID0gNTtcblx0dGhpcy5waXRjaCA9IHVuZGVmaW5lZDsgLy8gVGhpcyB3aWxsIGJlIHNldCBsYXRlclxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFbmRpbmdFbGVtO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/ending-element.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/free-text.js":
/*!*********************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/free-text.js ***!
  \*********************************************************************/
/***/ ((module) => {

eval("function FreeText(info, vskip, getFontAndAttr, paddingLeft, width, getTextSize) {\n\tvar text = info.text;\n\tthis.rows = [];\n\tvar size;\n\tif (vskip)\n\t\tthis.rows.push({ move: vskip });\n\tvar hash = getFontAndAttr.calc('textfont', 'defined-text');\n\tif (text === \"\") {\t// we do want to print out blank lines if they have been specified.\n\t\tthis.rows.push({ move: hash.attr['font-size'] * 2 }); // move the distance of the line, plus the distance of the margin, which is also one line.\n\t} else if (typeof text === 'string') {\n\t\tthis.rows.push({ move: hash.attr['font-size'] / 2 }); // TODO-PER: move down some - the y location should be the top of the text, but we output text specifying the center line.\n\t\tthis.rows.push({ left: paddingLeft, text: text, font: 'textfont', klass: 'defined-text', anchor: \"start\", startChar: info.startChar, endChar: info.endChar, absElemType: \"freeText\", name: \"free-text\" });\n\t    // MAE 9 May 2025 - Force blank text lines in a text block to have height\n\t    function replaceStandaloneNewlinesForTextBlocks(input) {\n\t      return input.replace(/^[ \\t]*\\n/gm, 'X\\n');;\n\t    }\n\t    var textForSize = replaceStandaloneNewlinesForTextBlocks(text);\n\t    size = getTextSize.calc(textForSize, 'textfont', 'defined-text'); // was text\n\t\tthis.rows.push({ move: size.height });\n\t} else if (text) {\n\t\tvar maxHeight = 0;\n\t\tvar leftSide = paddingLeft;\n\t\tvar currentFont = 'textfont';\n\t\tfor (var i = 0; i < text.length; i++) {\n\t\t\tif (text[i].font) {\n\t\t\t\tcurrentFont = text[i].font;\n\t\t\t} else\n\t\t\t\tcurrentFont = 'textfont';\n\t\t\tthis.rows.push({ left: leftSide, text: text[i].text, font: currentFont, klass: 'defined-text', anchor: 'start', startChar: info.startChar, endChar: info.endChar, absElemType: \"freeText\", name: \"free-text\" });\n\t\t\tsize = getTextSize.calc(text[i].text, getFontAndAttr.calc(currentFont, 'defined-text').font, 'defined-text');\n\t\t\tleftSide += size.width + size.height / 2; // add a little padding to the right side. The height of the font is probably a close enough approximation.\n\t\t\tmaxHeight = Math.max(maxHeight, size.height)\n\t\t}\n\t\tthis.rows.push({ move: maxHeight });\n\t} else {\n\t\t// The structure is wrong here: it requires an array to do centering, but it shouldn't have.\n\t\tif (info.length === 1) {\n\t\t\tvar x = width / 2;\n\t\t\tthis.rows.push({ left: x, text: info[0].text, font: 'textfont', klass: 'defined-text', anchor: 'middle', startChar: info.startChar, endChar: info.endChar, absElemType: \"freeText\", name: \"free-text\" });\n\t\t\tsize = getTextSize.calc(info[0].text, 'textfont', 'defined-text');\n\t\t\tthis.rows.push({ move: size.height });\n\t\t}\n\t}\n}\n\nmodule.exports = FreeText;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL2ZyZWUtdGV4dC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGFBQWE7QUFDaEM7QUFDQSxvQkFBb0I7QUFDcEIsbUJBQW1CLGtDQUFrQyxHQUFHO0FBQ3hELEdBQUc7QUFDSCxtQkFBbUIsa0NBQWtDLEdBQUc7QUFDeEQsbUJBQW1CLHVMQUF1TDtBQUMxTTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFO0FBQ3ZFLG1CQUFtQixtQkFBbUI7QUFDdEMsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpQkFBaUI7QUFDbkM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLG9CQUFvQiw2TEFBNkw7QUFDak47QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBLG1CQUFtQixpQkFBaUI7QUFDcEMsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixzTEFBc0w7QUFDMU07QUFDQSxvQkFBb0IsbUJBQW1CO0FBQ3ZDO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9jcmVhdGlvbi9lbGVtZW50cy9mcmVlLXRleHQuanM/NGFmYyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBGcmVlVGV4dChpbmZvLCB2c2tpcCwgZ2V0Rm9udEFuZEF0dHIsIHBhZGRpbmdMZWZ0LCB3aWR0aCwgZ2V0VGV4dFNpemUpIHtcblx0dmFyIHRleHQgPSBpbmZvLnRleHQ7XG5cdHRoaXMucm93cyA9IFtdO1xuXHR2YXIgc2l6ZTtcblx0aWYgKHZza2lwKVxuXHRcdHRoaXMucm93cy5wdXNoKHsgbW92ZTogdnNraXAgfSk7XG5cdHZhciBoYXNoID0gZ2V0Rm9udEFuZEF0dHIuY2FsYygndGV4dGZvbnQnLCAnZGVmaW5lZC10ZXh0Jyk7XG5cdGlmICh0ZXh0ID09PSBcIlwiKSB7XHQvLyB3ZSBkbyB3YW50IHRvIHByaW50IG91dCBibGFuayBsaW5lcyBpZiB0aGV5IGhhdmUgYmVlbiBzcGVjaWZpZWQuXG5cdFx0dGhpcy5yb3dzLnB1c2goeyBtb3ZlOiBoYXNoLmF0dHJbJ2ZvbnQtc2l6ZSddICogMiB9KTsgLy8gbW92ZSB0aGUgZGlzdGFuY2Ugb2YgdGhlIGxpbmUsIHBsdXMgdGhlIGRpc3RhbmNlIG9mIHRoZSBtYXJnaW4sIHdoaWNoIGlzIGFsc28gb25lIGxpbmUuXG5cdH0gZWxzZSBpZiAodHlwZW9mIHRleHQgPT09ICdzdHJpbmcnKSB7XG5cdFx0dGhpcy5yb3dzLnB1c2goeyBtb3ZlOiBoYXNoLmF0dHJbJ2ZvbnQtc2l6ZSddIC8gMiB9KTsgLy8gVE9ETy1QRVI6IG1vdmUgZG93biBzb21lIC0gdGhlIHkgbG9jYXRpb24gc2hvdWxkIGJlIHRoZSB0b3Agb2YgdGhlIHRleHQsIGJ1dCB3ZSBvdXRwdXQgdGV4dCBzcGVjaWZ5aW5nIHRoZSBjZW50ZXIgbGluZS5cblx0XHR0aGlzLnJvd3MucHVzaCh7IGxlZnQ6IHBhZGRpbmdMZWZ0LCB0ZXh0OiB0ZXh0LCBmb250OiAndGV4dGZvbnQnLCBrbGFzczogJ2RlZmluZWQtdGV4dCcsIGFuY2hvcjogXCJzdGFydFwiLCBzdGFydENoYXI6IGluZm8uc3RhcnRDaGFyLCBlbmRDaGFyOiBpbmZvLmVuZENoYXIsIGFic0VsZW1UeXBlOiBcImZyZWVUZXh0XCIsIG5hbWU6IFwiZnJlZS10ZXh0XCIgfSk7XG5cdCAgICAvLyBNQUUgOSBNYXkgMjAyNSAtIEZvcmNlIGJsYW5rIHRleHQgbGluZXMgaW4gYSB0ZXh0IGJsb2NrIHRvIGhhdmUgaGVpZ2h0XG5cdCAgICBmdW5jdGlvbiByZXBsYWNlU3RhbmRhbG9uZU5ld2xpbmVzRm9yVGV4dEJsb2NrcyhpbnB1dCkge1xuXHQgICAgICByZXR1cm4gaW5wdXQucmVwbGFjZSgvXlsgXFx0XSpcXG4vZ20sICdYXFxuJyk7O1xuXHQgICAgfVxuXHQgICAgdmFyIHRleHRGb3JTaXplID0gcmVwbGFjZVN0YW5kYWxvbmVOZXdsaW5lc0ZvclRleHRCbG9ja3ModGV4dCk7XG5cdCAgICBzaXplID0gZ2V0VGV4dFNpemUuY2FsYyh0ZXh0Rm9yU2l6ZSwgJ3RleHRmb250JywgJ2RlZmluZWQtdGV4dCcpOyAvLyB3YXMgdGV4dFxuXHRcdHRoaXMucm93cy5wdXNoKHsgbW92ZTogc2l6ZS5oZWlnaHQgfSk7XG5cdH0gZWxzZSBpZiAodGV4dCkge1xuXHRcdHZhciBtYXhIZWlnaHQgPSAwO1xuXHRcdHZhciBsZWZ0U2lkZSA9IHBhZGRpbmdMZWZ0O1xuXHRcdHZhciBjdXJyZW50Rm9udCA9ICd0ZXh0Zm9udCc7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0ZXh0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAodGV4dFtpXS5mb250KSB7XG5cdFx0XHRcdGN1cnJlbnRGb250ID0gdGV4dFtpXS5mb250O1xuXHRcdFx0fSBlbHNlXG5cdFx0XHRcdGN1cnJlbnRGb250ID0gJ3RleHRmb250Jztcblx0XHRcdHRoaXMucm93cy5wdXNoKHsgbGVmdDogbGVmdFNpZGUsIHRleHQ6IHRleHRbaV0udGV4dCwgZm9udDogY3VycmVudEZvbnQsIGtsYXNzOiAnZGVmaW5lZC10ZXh0JywgYW5jaG9yOiAnc3RhcnQnLCBzdGFydENoYXI6IGluZm8uc3RhcnRDaGFyLCBlbmRDaGFyOiBpbmZvLmVuZENoYXIsIGFic0VsZW1UeXBlOiBcImZyZWVUZXh0XCIsIG5hbWU6IFwiZnJlZS10ZXh0XCIgfSk7XG5cdFx0XHRzaXplID0gZ2V0VGV4dFNpemUuY2FsYyh0ZXh0W2ldLnRleHQsIGdldEZvbnRBbmRBdHRyLmNhbGMoY3VycmVudEZvbnQsICdkZWZpbmVkLXRleHQnKS5mb250LCAnZGVmaW5lZC10ZXh0Jyk7XG5cdFx0XHRsZWZ0U2lkZSArPSBzaXplLndpZHRoICsgc2l6ZS5oZWlnaHQgLyAyOyAvLyBhZGQgYSBsaXR0bGUgcGFkZGluZyB0byB0aGUgcmlnaHQgc2lkZS4gVGhlIGhlaWdodCBvZiB0aGUgZm9udCBpcyBwcm9iYWJseSBhIGNsb3NlIGVub3VnaCBhcHByb3hpbWF0aW9uLlxuXHRcdFx0bWF4SGVpZ2h0ID0gTWF0aC5tYXgobWF4SGVpZ2h0LCBzaXplLmhlaWdodClcblx0XHR9XG5cdFx0dGhpcy5yb3dzLnB1c2goeyBtb3ZlOiBtYXhIZWlnaHQgfSk7XG5cdH0gZWxzZSB7XG5cdFx0Ly8gVGhlIHN0cnVjdHVyZSBpcyB3cm9uZyBoZXJlOiBpdCByZXF1aXJlcyBhbiBhcnJheSB0byBkbyBjZW50ZXJpbmcsIGJ1dCBpdCBzaG91bGRuJ3QgaGF2ZS5cblx0XHRpZiAoaW5mby5sZW5ndGggPT09IDEpIHtcblx0XHRcdHZhciB4ID0gd2lkdGggLyAyO1xuXHRcdFx0dGhpcy5yb3dzLnB1c2goeyBsZWZ0OiB4LCB0ZXh0OiBpbmZvWzBdLnRleHQsIGZvbnQ6ICd0ZXh0Zm9udCcsIGtsYXNzOiAnZGVmaW5lZC10ZXh0JywgYW5jaG9yOiAnbWlkZGxlJywgc3RhcnRDaGFyOiBpbmZvLnN0YXJ0Q2hhciwgZW5kQ2hhcjogaW5mby5lbmRDaGFyLCBhYnNFbGVtVHlwZTogXCJmcmVlVGV4dFwiLCBuYW1lOiBcImZyZWUtdGV4dFwiIH0pO1xuXHRcdFx0c2l6ZSA9IGdldFRleHRTaXplLmNhbGMoaW5mb1swXS50ZXh0LCAndGV4dGZvbnQnLCAnZGVmaW5lZC10ZXh0Jyk7XG5cdFx0XHR0aGlzLnJvd3MucHVzaCh7IG1vdmU6IHNpemUuaGVpZ2h0IH0pO1xuXHRcdH1cblx0fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEZyZWVUZXh0O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/free-text.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/glissando-element.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/glissando-element.js ***!
  \*****************************************************************************/
/***/ ((module) => {

eval("var GlissandoElem = function GlissandoElem(anchor1, anchor2) {\n\tthis.type = \"GlissandoElem\";\n\tthis.anchor1 = anchor1; // must have a .x and a .parent property or be null (means starts at the \"beginning\" of the line - after keysig)\n\tthis.anchor2 = anchor2; // must have a .x property or be null (means ends at the end of the line)\n};\n\nmodule.exports = GlissandoElem;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL2dsaXNzYW5kby1lbGVtZW50LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIseUJBQXlCO0FBQ3pCOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL2dsaXNzYW5kby1lbGVtZW50LmpzP2U4YjMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIEdsaXNzYW5kb0VsZW0gPSBmdW5jdGlvbiBHbGlzc2FuZG9FbGVtKGFuY2hvcjEsIGFuY2hvcjIpIHtcblx0dGhpcy50eXBlID0gXCJHbGlzc2FuZG9FbGVtXCI7XG5cdHRoaXMuYW5jaG9yMSA9IGFuY2hvcjE7IC8vIG11c3QgaGF2ZSBhIC54IGFuZCBhIC5wYXJlbnQgcHJvcGVydHkgb3IgYmUgbnVsbCAobWVhbnMgc3RhcnRzIGF0IHRoZSBcImJlZ2lubmluZ1wiIG9mIHRoZSBsaW5lIC0gYWZ0ZXIga2V5c2lnKVxuXHR0aGlzLmFuY2hvcjIgPSBhbmNob3IyOyAvLyBtdXN0IGhhdmUgYSAueCBwcm9wZXJ0eSBvciBiZSBudWxsIChtZWFucyBlbmRzIGF0IHRoZSBlbmQgb2YgdGhlIGxpbmUpXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEdsaXNzYW5kb0VsZW07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/glissando-element.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/relative-element.js":
/*!****************************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/relative-element.js ***!
  \****************************************************************************/
/***/ ((module) => {

eval("//    abc_relative_element.js: Definition of the RelativeElement class.\n\nvar RelativeElement = function RelativeElement(c, dx, w, pitch, opt) {\n\topt = opt || {};\n\tthis.x = 0;\n\tthis.c = c;      // character or path or string\n\tthis.dx = dx;    // relative x position\n\tthis.w = w;      // minimum width taken up by this element (can include gratuitous space)\n\tthis.pitch = pitch; // relative y position by pitch\n\tthis.scalex = opt.scalex || 1; // should the character/path be scaled?\n\tthis.scaley = opt.scaley || 1; // should the character/path be scaled?\n\tthis.type = opt.type || \"symbol\"; // cheap types.\n\tthis.pitch2 = opt.pitch2;\n\tthis.linewidth = opt.linewidth;\n\tthis.klass = opt.klass;\n\tthis.anchor = opt.anchor ? opt.anchor : 'middle'\n\tthis.top = pitch;\n\tif (this.pitch2 !== undefined && this.pitch2 > this.top) this.top = this.pitch2;\n\tthis.bottom = pitch;\n\tif (this.pitch2 !== undefined && this.pitch2 < this.bottom) this.bottom = this.pitch2;\n\tif (opt.thickness) {\n\t\tthis.top += opt.thickness / 2;\n\t\tthis.bottom -= opt.thickness / 2;\n\t}\n\tif (opt.stemHeight) {\n\t\tif (opt.stemHeight > 0)\n\t\t\tthis.top += opt.stemHeight;\n\t\telse\n\t\t\tthis.bottom += opt.stemHeight;\n\t}\n\tif (opt.dim)\n\t\tthis.dim = opt.dim;\n\tif (opt.position)\n\t\tthis.position = opt.position;\n\tthis.height = opt.height ? opt.height : 4; // The +1 is to give a little bit of padding.\n\tif (opt.top)\n\t\tthis.top = opt.top;\n\tif (opt.bottom)\n\t\tthis.bottom = opt.bottom;\n\tif (opt.name)\n\t\tthis.name = opt.name;\n\telse if (this.c)\n\t\tthis.name = this.c;\n\telse\n\t\tthis.name = this.type;\n\tif (opt.realWidth)\n\t\tthis.realWidth = opt.realWidth;\n\telse\n\t\tthis.realWidth = this.w;\n\tthis.centerVertically = false;\n\tswitch (this.type) {\n\t\tcase \"debug\":\n\t\t\tthis.chordHeightAbove = this.height;\n\t\t\tbreak;\n\t\tcase \"lyric\":\n\t\t\tif (opt.position && opt.position === 'below')\n\t\t\t\tthis.lyricHeightBelow = this.height;\n\t\t\telse\n\t\t\t\tthis.lyricHeightAbove = this.height;\n\t\t\tbreak;\n\t\tcase \"chord\":\n\t\t\tif (opt.position && opt.position === 'below')\n\t\t\t\tthis.chordHeightBelow = this.height;\n\t\t\telse\n\t\t\t\tthis.chordHeightAbove = this.height;\n\t\t\tbreak;\n\t\tcase \"text\":\n\t\t\tif (this.pitch === undefined) {\n\t\t\t\tif (opt.position && opt.position === 'below')\n\t\t\t\t\tthis.chordHeightBelow = this.height;\n\t\t\t\telse\n\t\t\t\t\tthis.chordHeightAbove = this.height;\n\t\t\t} else\n\t\t\t\tthis.centerVertically = true;\n\t\t\tbreak;\n\t\tcase \"part\": this.partHeightAbove = this.height; break;\n\t}\n};\n\nRelativeElement.prototype.getChordDim = function () {\n\tif (this.type === \"debug\")\n\t\treturn null;\n\tif (!this.chordHeightAbove && !this.chordHeightBelow)\n\t\treturn null;\n\t// Chords are centered, annotations are left justified.\n\t// NOTE: the font reports extra space to the left and right anyway, so there is a built in margin.\n\t// We add a little margin so that items can't touch - we use half the font size as the margin, so that is 1/4 on each side.\n\t// if there is only one character that we're printing, use half of that margin.\n\t// var margin = this.dim.font.size/4;\n\t// if (this.c.length === 1)\n\t// \tmargin = margin / 2;\n\tvar margin = 0;\n\n\tvar offset = this.type === \"chord\" ? this.realWidth / 2 : 0;\n\tvar left = this.x - offset - margin;\n\tvar right = left + this.realWidth + margin;\n\treturn { left: left, right: right };\n};\n\nRelativeElement.prototype.invertLane = function (total) {\n\tif (this.lane === undefined)\n\t\tthis.lane = 0;\n\tthis.lane = total - this.lane - 1;\n};\n\nRelativeElement.prototype.putChordInLane = function (i) {\n\tthis.lane = i;\n\t// Add some extra space to account for the character's descenders.\n\tif (this.chordHeightAbove)\n\t\tthis.chordHeightAbove = (this.height * 1.25) * this.lane;\n\telse\n\t\tthis.chordHeightBelow = (this.height * 1.25) * this.lane;\n};\n\nRelativeElement.prototype.getLane = function () {\n\tif (this.lane === undefined)\n\t\treturn 0;\n\treturn this.lane;\n};\n\nRelativeElement.prototype.setX = function (x) {\n\tthis.x = x + this.dx;\n};\n\nmodule.exports = RelativeElement;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3JlbGF0aXZlLWVsZW1lbnQuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLGtCQUFrQjtBQUNsQixrQkFBa0I7QUFDbEIscUJBQXFCO0FBQ3JCLGdDQUFnQztBQUNoQyxnQ0FBZ0M7QUFDaEMsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3JlbGF0aXZlLWVsZW1lbnQuanM/MjcxYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAgICBhYmNfcmVsYXRpdmVfZWxlbWVudC5qczogRGVmaW5pdGlvbiBvZiB0aGUgUmVsYXRpdmVFbGVtZW50IGNsYXNzLlxuXG52YXIgUmVsYXRpdmVFbGVtZW50ID0gZnVuY3Rpb24gUmVsYXRpdmVFbGVtZW50KGMsIGR4LCB3LCBwaXRjaCwgb3B0KSB7XG5cdG9wdCA9IG9wdCB8fCB7fTtcblx0dGhpcy54ID0gMDtcblx0dGhpcy5jID0gYzsgICAgICAvLyBjaGFyYWN0ZXIgb3IgcGF0aCBvciBzdHJpbmdcblx0dGhpcy5keCA9IGR4OyAgICAvLyByZWxhdGl2ZSB4IHBvc2l0aW9uXG5cdHRoaXMudyA9IHc7ICAgICAgLy8gbWluaW11bSB3aWR0aCB0YWtlbiB1cCBieSB0aGlzIGVsZW1lbnQgKGNhbiBpbmNsdWRlIGdyYXR1aXRvdXMgc3BhY2UpXG5cdHRoaXMucGl0Y2ggPSBwaXRjaDsgLy8gcmVsYXRpdmUgeSBwb3NpdGlvbiBieSBwaXRjaFxuXHR0aGlzLnNjYWxleCA9IG9wdC5zY2FsZXggfHwgMTsgLy8gc2hvdWxkIHRoZSBjaGFyYWN0ZXIvcGF0aCBiZSBzY2FsZWQ/XG5cdHRoaXMuc2NhbGV5ID0gb3B0LnNjYWxleSB8fCAxOyAvLyBzaG91bGQgdGhlIGNoYXJhY3Rlci9wYXRoIGJlIHNjYWxlZD9cblx0dGhpcy50eXBlID0gb3B0LnR5cGUgfHwgXCJzeW1ib2xcIjsgLy8gY2hlYXAgdHlwZXMuXG5cdHRoaXMucGl0Y2gyID0gb3B0LnBpdGNoMjtcblx0dGhpcy5saW5ld2lkdGggPSBvcHQubGluZXdpZHRoO1xuXHR0aGlzLmtsYXNzID0gb3B0LmtsYXNzO1xuXHR0aGlzLmFuY2hvciA9IG9wdC5hbmNob3IgPyBvcHQuYW5jaG9yIDogJ21pZGRsZSdcblx0dGhpcy50b3AgPSBwaXRjaDtcblx0aWYgKHRoaXMucGl0Y2gyICE9PSB1bmRlZmluZWQgJiYgdGhpcy5waXRjaDIgPiB0aGlzLnRvcCkgdGhpcy50b3AgPSB0aGlzLnBpdGNoMjtcblx0dGhpcy5ib3R0b20gPSBwaXRjaDtcblx0aWYgKHRoaXMucGl0Y2gyICE9PSB1bmRlZmluZWQgJiYgdGhpcy5waXRjaDIgPCB0aGlzLmJvdHRvbSkgdGhpcy5ib3R0b20gPSB0aGlzLnBpdGNoMjtcblx0aWYgKG9wdC50aGlja25lc3MpIHtcblx0XHR0aGlzLnRvcCArPSBvcHQudGhpY2tuZXNzIC8gMjtcblx0XHR0aGlzLmJvdHRvbSAtPSBvcHQudGhpY2tuZXNzIC8gMjtcblx0fVxuXHRpZiAob3B0LnN0ZW1IZWlnaHQpIHtcblx0XHRpZiAob3B0LnN0ZW1IZWlnaHQgPiAwKVxuXHRcdFx0dGhpcy50b3AgKz0gb3B0LnN0ZW1IZWlnaHQ7XG5cdFx0ZWxzZVxuXHRcdFx0dGhpcy5ib3R0b20gKz0gb3B0LnN0ZW1IZWlnaHQ7XG5cdH1cblx0aWYgKG9wdC5kaW0pXG5cdFx0dGhpcy5kaW0gPSBvcHQuZGltO1xuXHRpZiAob3B0LnBvc2l0aW9uKVxuXHRcdHRoaXMucG9zaXRpb24gPSBvcHQucG9zaXRpb247XG5cdHRoaXMuaGVpZ2h0ID0gb3B0LmhlaWdodCA/IG9wdC5oZWlnaHQgOiA0OyAvLyBUaGUgKzEgaXMgdG8gZ2l2ZSBhIGxpdHRsZSBiaXQgb2YgcGFkZGluZy5cblx0aWYgKG9wdC50b3ApXG5cdFx0dGhpcy50b3AgPSBvcHQudG9wO1xuXHRpZiAob3B0LmJvdHRvbSlcblx0XHR0aGlzLmJvdHRvbSA9IG9wdC5ib3R0b207XG5cdGlmIChvcHQubmFtZSlcblx0XHR0aGlzLm5hbWUgPSBvcHQubmFtZTtcblx0ZWxzZSBpZiAodGhpcy5jKVxuXHRcdHRoaXMubmFtZSA9IHRoaXMuYztcblx0ZWxzZVxuXHRcdHRoaXMubmFtZSA9IHRoaXMudHlwZTtcblx0aWYgKG9wdC5yZWFsV2lkdGgpXG5cdFx0dGhpcy5yZWFsV2lkdGggPSBvcHQucmVhbFdpZHRoO1xuXHRlbHNlXG5cdFx0dGhpcy5yZWFsV2lkdGggPSB0aGlzLnc7XG5cdHRoaXMuY2VudGVyVmVydGljYWxseSA9IGZhbHNlO1xuXHRzd2l0Y2ggKHRoaXMudHlwZSkge1xuXHRcdGNhc2UgXCJkZWJ1Z1wiOlxuXHRcdFx0dGhpcy5jaG9yZEhlaWdodEFib3ZlID0gdGhpcy5oZWlnaHQ7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwibHlyaWNcIjpcblx0XHRcdGlmIChvcHQucG9zaXRpb24gJiYgb3B0LnBvc2l0aW9uID09PSAnYmVsb3cnKVxuXHRcdFx0XHR0aGlzLmx5cmljSGVpZ2h0QmVsb3cgPSB0aGlzLmhlaWdodDtcblx0XHRcdGVsc2Vcblx0XHRcdFx0dGhpcy5seXJpY0hlaWdodEFib3ZlID0gdGhpcy5oZWlnaHQ7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwiY2hvcmRcIjpcblx0XHRcdGlmIChvcHQucG9zaXRpb24gJiYgb3B0LnBvc2l0aW9uID09PSAnYmVsb3cnKVxuXHRcdFx0XHR0aGlzLmNob3JkSGVpZ2h0QmVsb3cgPSB0aGlzLmhlaWdodDtcblx0XHRcdGVsc2Vcblx0XHRcdFx0dGhpcy5jaG9yZEhlaWdodEFib3ZlID0gdGhpcy5oZWlnaHQ7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwidGV4dFwiOlxuXHRcdFx0aWYgKHRoaXMucGl0Y2ggPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRpZiAob3B0LnBvc2l0aW9uICYmIG9wdC5wb3NpdGlvbiA9PT0gJ2JlbG93Jylcblx0XHRcdFx0XHR0aGlzLmNob3JkSGVpZ2h0QmVsb3cgPSB0aGlzLmhlaWdodDtcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHRoaXMuY2hvcmRIZWlnaHRBYm92ZSA9IHRoaXMuaGVpZ2h0O1xuXHRcdFx0fSBlbHNlXG5cdFx0XHRcdHRoaXMuY2VudGVyVmVydGljYWxseSA9IHRydWU7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwicGFydFwiOiB0aGlzLnBhcnRIZWlnaHRBYm92ZSA9IHRoaXMuaGVpZ2h0OyBicmVhaztcblx0fVxufTtcblxuUmVsYXRpdmVFbGVtZW50LnByb3RvdHlwZS5nZXRDaG9yZERpbSA9IGZ1bmN0aW9uICgpIHtcblx0aWYgKHRoaXMudHlwZSA9PT0gXCJkZWJ1Z1wiKVxuXHRcdHJldHVybiBudWxsO1xuXHRpZiAoIXRoaXMuY2hvcmRIZWlnaHRBYm92ZSAmJiAhdGhpcy5jaG9yZEhlaWdodEJlbG93KVxuXHRcdHJldHVybiBudWxsO1xuXHQvLyBDaG9yZHMgYXJlIGNlbnRlcmVkLCBhbm5vdGF0aW9ucyBhcmUgbGVmdCBqdXN0aWZpZWQuXG5cdC8vIE5PVEU6IHRoZSBmb250IHJlcG9ydHMgZXh0cmEgc3BhY2UgdG8gdGhlIGxlZnQgYW5kIHJpZ2h0IGFueXdheSwgc28gdGhlcmUgaXMgYSBidWlsdCBpbiBtYXJnaW4uXG5cdC8vIFdlIGFkZCBhIGxpdHRsZSBtYXJnaW4gc28gdGhhdCBpdGVtcyBjYW4ndCB0b3VjaCAtIHdlIHVzZSBoYWxmIHRoZSBmb250IHNpemUgYXMgdGhlIG1hcmdpbiwgc28gdGhhdCBpcyAxLzQgb24gZWFjaCBzaWRlLlxuXHQvLyBpZiB0aGVyZSBpcyBvbmx5IG9uZSBjaGFyYWN0ZXIgdGhhdCB3ZSdyZSBwcmludGluZywgdXNlIGhhbGYgb2YgdGhhdCBtYXJnaW4uXG5cdC8vIHZhciBtYXJnaW4gPSB0aGlzLmRpbS5mb250LnNpemUvNDtcblx0Ly8gaWYgKHRoaXMuYy5sZW5ndGggPT09IDEpXG5cdC8vIFx0bWFyZ2luID0gbWFyZ2luIC8gMjtcblx0dmFyIG1hcmdpbiA9IDA7XG5cblx0dmFyIG9mZnNldCA9IHRoaXMudHlwZSA9PT0gXCJjaG9yZFwiID8gdGhpcy5yZWFsV2lkdGggLyAyIDogMDtcblx0dmFyIGxlZnQgPSB0aGlzLnggLSBvZmZzZXQgLSBtYXJnaW47XG5cdHZhciByaWdodCA9IGxlZnQgKyB0aGlzLnJlYWxXaWR0aCArIG1hcmdpbjtcblx0cmV0dXJuIHsgbGVmdDogbGVmdCwgcmlnaHQ6IHJpZ2h0IH07XG59O1xuXG5SZWxhdGl2ZUVsZW1lbnQucHJvdG90eXBlLmludmVydExhbmUgPSBmdW5jdGlvbiAodG90YWwpIHtcblx0aWYgKHRoaXMubGFuZSA9PT0gdW5kZWZpbmVkKVxuXHRcdHRoaXMubGFuZSA9IDA7XG5cdHRoaXMubGFuZSA9IHRvdGFsIC0gdGhpcy5sYW5lIC0gMTtcbn07XG5cblJlbGF0aXZlRWxlbWVudC5wcm90b3R5cGUucHV0Q2hvcmRJbkxhbmUgPSBmdW5jdGlvbiAoaSkge1xuXHR0aGlzLmxhbmUgPSBpO1xuXHQvLyBBZGQgc29tZSBleHRyYSBzcGFjZSB0byBhY2NvdW50IGZvciB0aGUgY2hhcmFjdGVyJ3MgZGVzY2VuZGVycy5cblx0aWYgKHRoaXMuY2hvcmRIZWlnaHRBYm92ZSlcblx0XHR0aGlzLmNob3JkSGVpZ2h0QWJvdmUgPSAodGhpcy5oZWlnaHQgKiAxLjI1KSAqIHRoaXMubGFuZTtcblx0ZWxzZVxuXHRcdHRoaXMuY2hvcmRIZWlnaHRCZWxvdyA9ICh0aGlzLmhlaWdodCAqIDEuMjUpICogdGhpcy5sYW5lO1xufTtcblxuUmVsYXRpdmVFbGVtZW50LnByb3RvdHlwZS5nZXRMYW5lID0gZnVuY3Rpb24gKCkge1xuXHRpZiAodGhpcy5sYW5lID09PSB1bmRlZmluZWQpXG5cdFx0cmV0dXJuIDA7XG5cdHJldHVybiB0aGlzLmxhbmU7XG59O1xuXG5SZWxhdGl2ZUVsZW1lbnQucHJvdG90eXBlLnNldFggPSBmdW5jdGlvbiAoeCkge1xuXHR0aGlzLnggPSB4ICsgdGhpcy5keDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVsYXRpdmVFbGVtZW50O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/relative-element.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/rich-text.js":
/*!*********************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/rich-text.js ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const addTextIf = __webpack_require__(/*! ../add-text-if */ \"(ssr)/./node_modules/abcjs/src/write/creation/add-text-if.js\");\n\nfunction richText(rows, str, defFont, klass, name, paddingLeft, attr, getTextSize) {\n\tvar space = getTextSize.calc(\"i\", defFont, klass);\n\tif (str === '') {\n\t\trows.push({ move: space.height });\n\t} else {\n\t\tif (typeof str === 'string') {\n\t\t\taddTextIf(rows, { marginLeft: paddingLeft, text: str, font: defFont, klass: klass, marginTop: attr.marginTop, anchor: attr.anchor, absElemType: attr.absElemType, info: attr.info, name: name }, getTextSize);\n\t\t\treturn\n\t\t}\n\t\tif (attr.marginTop)\n\t\t\trows.push({move: attr.marginTop})\n\n\t\tvar largestY = 0;\n\t\tvar gap = 0;\n\t\tvar row = {\n\t\t\tleft: paddingLeft,\n\t\t\tanchor: attr.anchor,\n\t\t\tphrases: []\n\t\t}\n\t\tif (klass)\n\t\t\trow.klass = klass\n\t\trows.push(row)\n\t\tfor (var k = 0; k < str.length; k++) {\n\t\t\tvar thisWord = str[k];\n\t\t\tvar font = (thisWord.font) ? thisWord.font : getTextSize.attr(defFont, klass).font;\n\t\t\tvar phrase = {\n\t\t\t\tcontent: thisWord.text,\n\t\t\t}\n\t\t\tif (font)\n\t\t\t\tphrase.attrs = {\n\t\t\t\t\t\"font-family\": getTextSize.getFamily(font.face),\n\t\t\t\t\t\"font-size\": font.size,\n\t\t\t\t\t\"font-weight\": font.weight,\n\t\t\t\t\t\"font-style\": font.style,\n\t\t\t\t\t\"font-decoration\": font.decoration,\n\t\t\t}\n\t\t\t//if (thisWord.text) {\n\t\t\t\trow.phrases.push(phrase);\n\t\t\t\tvar size = getTextSize.calc(thisWord.text, font, klass);\n\t\t\t\tlargestY = Math.max(largestY, size.height);\n\t\t\t\tif (thisWord.text[thisWord.text.length - 1] === ' ') {\n\t\t\t\t\tgap = space.width\n\t\t\t\t}\n\t\t}\n\t\trows.push({ move: largestY });\n\t}\n}\n\nmodule.exports = richText;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3JpY2gtdGV4dC5qcyIsIm1hcHBpbmdzIjoiQUFBQSxrQkFBa0IsbUJBQU8sQ0FBQyxvRkFBZ0I7O0FBRTFDO0FBQ0E7QUFDQTtBQUNBLGNBQWMsb0JBQW9CO0FBQ2xDLEdBQUc7QUFDSDtBQUNBLHFCQUFxQiw2S0FBNks7QUFDbE07QUFDQTtBQUNBO0FBQ0EsY0FBYyxxQkFBcUI7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGdCQUFnQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGdCQUFnQjtBQUM5QjtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3JpY2gtdGV4dC5qcz83YzFkIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGFkZFRleHRJZiA9IHJlcXVpcmUoXCIuLi9hZGQtdGV4dC1pZlwiKTtcblxuZnVuY3Rpb24gcmljaFRleHQocm93cywgc3RyLCBkZWZGb250LCBrbGFzcywgbmFtZSwgcGFkZGluZ0xlZnQsIGF0dHIsIGdldFRleHRTaXplKSB7XG5cdHZhciBzcGFjZSA9IGdldFRleHRTaXplLmNhbGMoXCJpXCIsIGRlZkZvbnQsIGtsYXNzKTtcblx0aWYgKHN0ciA9PT0gJycpIHtcblx0XHRyb3dzLnB1c2goeyBtb3ZlOiBzcGFjZS5oZWlnaHQgfSk7XG5cdH0gZWxzZSB7XG5cdFx0aWYgKHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRhZGRUZXh0SWYocm93cywgeyBtYXJnaW5MZWZ0OiBwYWRkaW5nTGVmdCwgdGV4dDogc3RyLCBmb250OiBkZWZGb250LCBrbGFzczoga2xhc3MsIG1hcmdpblRvcDogYXR0ci5tYXJnaW5Ub3AsIGFuY2hvcjogYXR0ci5hbmNob3IsIGFic0VsZW1UeXBlOiBhdHRyLmFic0VsZW1UeXBlLCBpbmZvOiBhdHRyLmluZm8sIG5hbWU6IG5hbWUgfSwgZ2V0VGV4dFNpemUpO1xuXHRcdFx0cmV0dXJuXG5cdFx0fVxuXHRcdGlmIChhdHRyLm1hcmdpblRvcClcblx0XHRcdHJvd3MucHVzaCh7bW92ZTogYXR0ci5tYXJnaW5Ub3B9KVxuXG5cdFx0dmFyIGxhcmdlc3RZID0gMDtcblx0XHR2YXIgZ2FwID0gMDtcblx0XHR2YXIgcm93ID0ge1xuXHRcdFx0bGVmdDogcGFkZGluZ0xlZnQsXG5cdFx0XHRhbmNob3I6IGF0dHIuYW5jaG9yLFxuXHRcdFx0cGhyYXNlczogW11cblx0XHR9XG5cdFx0aWYgKGtsYXNzKVxuXHRcdFx0cm93LmtsYXNzID0ga2xhc3Ncblx0XHRyb3dzLnB1c2gocm93KVxuXHRcdGZvciAodmFyIGsgPSAwOyBrIDwgc3RyLmxlbmd0aDsgaysrKSB7XG5cdFx0XHR2YXIgdGhpc1dvcmQgPSBzdHJba107XG5cdFx0XHR2YXIgZm9udCA9ICh0aGlzV29yZC5mb250KSA/IHRoaXNXb3JkLmZvbnQgOiBnZXRUZXh0U2l6ZS5hdHRyKGRlZkZvbnQsIGtsYXNzKS5mb250O1xuXHRcdFx0dmFyIHBocmFzZSA9IHtcblx0XHRcdFx0Y29udGVudDogdGhpc1dvcmQudGV4dCxcblx0XHRcdH1cblx0XHRcdGlmIChmb250KVxuXHRcdFx0XHRwaHJhc2UuYXR0cnMgPSB7XG5cdFx0XHRcdFx0XCJmb250LWZhbWlseVwiOiBnZXRUZXh0U2l6ZS5nZXRGYW1pbHkoZm9udC5mYWNlKSxcblx0XHRcdFx0XHRcImZvbnQtc2l6ZVwiOiBmb250LnNpemUsXG5cdFx0XHRcdFx0XCJmb250LXdlaWdodFwiOiBmb250LndlaWdodCxcblx0XHRcdFx0XHRcImZvbnQtc3R5bGVcIjogZm9udC5zdHlsZSxcblx0XHRcdFx0XHRcImZvbnQtZGVjb3JhdGlvblwiOiBmb250LmRlY29yYXRpb24sXG5cdFx0XHR9XG5cdFx0XHQvL2lmICh0aGlzV29yZC50ZXh0KSB7XG5cdFx0XHRcdHJvdy5waHJhc2VzLnB1c2gocGhyYXNlKTtcblx0XHRcdFx0dmFyIHNpemUgPSBnZXRUZXh0U2l6ZS5jYWxjKHRoaXNXb3JkLnRleHQsIGZvbnQsIGtsYXNzKTtcblx0XHRcdFx0bGFyZ2VzdFkgPSBNYXRoLm1heChsYXJnZXN0WSwgc2l6ZS5oZWlnaHQpO1xuXHRcdFx0XHRpZiAodGhpc1dvcmQudGV4dFt0aGlzV29yZC50ZXh0Lmxlbmd0aCAtIDFdID09PSAnICcpIHtcblx0XHRcdFx0XHRnYXAgPSBzcGFjZS53aWR0aFxuXHRcdFx0XHR9XG5cdFx0fVxuXHRcdHJvd3MucHVzaCh7IG1vdmU6IGxhcmdlc3RZIH0pO1xuXHR9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmljaFRleHQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/rich-text.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/separator.js":
/*!*********************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/separator.js ***!
  \*********************************************************************/
/***/ ((module) => {

eval("function Separator(spaceAbove, lineLength, spaceBelow) {\n\tthis.rows = [];\n\tif (spaceAbove)\n\t\tthis.rows.push({ move: spaceAbove });\n\tthis.rows.push({ separator: lineLength, absElemType: \"separator\" });\n\tif (spaceBelow)\n\t\tthis.rows.push({ move: spaceBelow });\n}\n\nmodule.exports = Separator;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3NlcGFyYXRvci5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsa0JBQWtCO0FBQ3JDLGtCQUFrQixpREFBaUQ7QUFDbkU7QUFDQSxtQkFBbUIsa0JBQWtCO0FBQ3JDOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3NlcGFyYXRvci5qcz9kNzk0Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIFNlcGFyYXRvcihzcGFjZUFib3ZlLCBsaW5lTGVuZ3RoLCBzcGFjZUJlbG93KSB7XG5cdHRoaXMucm93cyA9IFtdO1xuXHRpZiAoc3BhY2VBYm92ZSlcblx0XHR0aGlzLnJvd3MucHVzaCh7IG1vdmU6IHNwYWNlQWJvdmUgfSk7XG5cdHRoaXMucm93cy5wdXNoKHsgc2VwYXJhdG9yOiBsaW5lTGVuZ3RoLCBhYnNFbGVtVHlwZTogXCJzZXBhcmF0b3JcIiB9KTtcblx0aWYgKHNwYWNlQmVsb3cpXG5cdFx0dGhpcy5yb3dzLnB1c2goeyBtb3ZlOiBzcGFjZUJlbG93IH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFNlcGFyYXRvcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/separator.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/staff-group-element.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/staff-group-element.js ***!
  \*******************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_staff_group_element.js: Definition of the StaffGroupElement class.\n\n// StaffGroupElement contains all the elements that go together to make one line of music.\n// That might be multiple staves that are tied together, and it might be multiple voices on one staff.\n//\n// Methods:\n// constructor: some basic initialization\n// addVoice(): Called once for each voice. May add a new staff if needed.\n// finished(): Called only internally by layout()\n// layout(): This does all the layout. It sets the following: spacingunits, startx, minspace, w, and the x-coordinate of each element in each voice.\n// draw(): Calls the underlying methods on the voice objects to do the drawing. Sets y and height.\n//\n// Members:\n// staffs: an array of all the staves in this group. Each staff contains the following elements:\n//    { top, bottom, highest, lowest, y }\n// voices: array of VoiceElement objects. This is mostly passed in, but the VoiceElement objects are modified here.\n//\n// spacingunits: number of relative x-units in the line. Used by the calling function to pass back in as the \"spacing\" input parameter.\n// TODO-PER: This should actually be passed back as a return value.\n// minspace: smallest space between two notes. Used by the calling function to pass back in as the \"spacing\" input parameter.\n// TODO-PER: This should actually be passed back as a return value.\n// startx: The left edge, taking the margin and the optional voice name. Used by the draw() method.\n// w: The width of the line. Used by calling function to pass back in as the \"spacing\" input parameter, and the draw() method.\n// TODO-PER: This should actually be passed back as a return value.  (TODO-PER: in pixels or spacing units?)\n// y: The top of the staff group, in pixels. This is set in the draw method.\n// TODO-PER: Where is that used? It looks like it might not be needed.\n// height: Set in the draw() method to the height actually used. Used by the calling function to know where to start the next staff group.\n// TODO-PER: This should actually be set in the layout method and passed back as a return value.\nvar calcHeight = __webpack_require__(/*! ../calc-height */ \"(ssr)/./node_modules/abcjs/src/write/creation/calc-height.js\");\n\nvar StaffGroupElement = function (getTextSize) {\n\tthis.getTextSize = getTextSize;\n\tthis.voices = [];\n\tthis.staffs = [];\n\tthis.brace = undefined; //tony\n\tthis.bracket = undefined;\n};\n\nStaffGroupElement.prototype.setLimit = function (member, voice) {\n\tif (!voice.specialY[member]) return;\n\tif (!voice.staff.specialY[member])\n\t\tvoice.staff.specialY[member] = voice.specialY[member];\n\telse\n\t\tvoice.staff.specialY[member] = Math.max(voice.staff.specialY[member], voice.specialY[member]);\n};\n\nStaffGroupElement.prototype.addVoice = function (voice, staffnumber, stafflines) {\n\tvar voiceNum = this.voices.length;\n\tthis.voices[voiceNum] = voice;\n\tif (this.staffs[staffnumber])\n\t\tthis.staffs[staffnumber].voices.push(voiceNum);\n\telse {\n\t\t// TODO-PER: how does the min/max change when stafflines is not 5?\n\t\tthis.staffs[this.staffs.length] = {\n\t\t\ttop: 10,\n\t\t\tbottom: 2,\n\t\t\tlines: stafflines,\n\t\t\tvoices: [voiceNum],\n\t\t\tspecialY: {\n\t\t\t\ttempoHeightAbove: 0,\n\t\t\t\tpartHeightAbove: 0,\n\t\t\t\tvolumeHeightAbove: 0,\n\t\t\t\tdynamicHeightAbove: 0,\n\t\t\t\tendingHeightAbove: 0,\n\t\t\t\tchordHeightAbove: 0,\n\t\t\t\tlyricHeightAbove: 0,\n\n\t\t\t\tlyricHeightBelow: 0,\n\t\t\t\tchordHeightBelow: 0,\n\t\t\t\tvolumeHeightBelow: 0,\n\t\t\t\tdynamicHeightBelow: 0\n\t\t\t}\n\t\t};\n\t}\n\tvoice.staff = this.staffs[staffnumber];\n};\n\nStaffGroupElement.prototype.setHeight = function () {\n\tthis.height = calcHeight(this);\n};\n\nStaffGroupElement.prototype.setWidth = function (width) {\n\tthis.w = width;\n\tfor (var i = 0; i < this.voices.length; i++) {\n\t\tthis.voices[i].setWidth(width);\n\t}\n};\n\nStaffGroupElement.prototype.setStaffLimits = function (voice) {\n\tvoice.staff.top = Math.max(voice.staff.top, voice.top);\n\tvoice.staff.bottom = Math.min(voice.staff.bottom, voice.bottom);\n\tthis.setLimit('tempoHeightAbove', voice);\n\tthis.setLimit('partHeightAbove', voice);\n\tthis.setLimit('volumeHeightAbove', voice);\n\tthis.setLimit('dynamicHeightAbove', voice);\n\tthis.setLimit('endingHeightAbove', voice);\n\tthis.setLimit('chordHeightAbove', voice);\n\tthis.setLimit('lyricHeightAbove', voice);\n\tthis.setLimit('lyricHeightBelow', voice);\n\tthis.setLimit('chordHeightBelow', voice);\n\tthis.setLimit('volumeHeightBelow', voice);\n\tthis.setLimit('dynamicHeightBelow', voice);\n};\n\nmodule.exports = StaffGroupElement;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3N0YWZmLWdyb3VwLWVsZW1lbnQuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG1CQUFPLENBQUMsb0ZBQWdCOztBQUV6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLHdCQUF3QjtBQUN6QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3N0YWZmLWdyb3VwLWVsZW1lbnQuanM/NzA3NiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAgICBhYmNfc3RhZmZfZ3JvdXBfZWxlbWVudC5qczogRGVmaW5pdGlvbiBvZiB0aGUgU3RhZmZHcm91cEVsZW1lbnQgY2xhc3MuXG5cbi8vIFN0YWZmR3JvdXBFbGVtZW50IGNvbnRhaW5zIGFsbCB0aGUgZWxlbWVudHMgdGhhdCBnbyB0b2dldGhlciB0byBtYWtlIG9uZSBsaW5lIG9mIG11c2ljLlxuLy8gVGhhdCBtaWdodCBiZSBtdWx0aXBsZSBzdGF2ZXMgdGhhdCBhcmUgdGllZCB0b2dldGhlciwgYW5kIGl0IG1pZ2h0IGJlIG11bHRpcGxlIHZvaWNlcyBvbiBvbmUgc3RhZmYuXG4vL1xuLy8gTWV0aG9kczpcbi8vIGNvbnN0cnVjdG9yOiBzb21lIGJhc2ljIGluaXRpYWxpemF0aW9uXG4vLyBhZGRWb2ljZSgpOiBDYWxsZWQgb25jZSBmb3IgZWFjaCB2b2ljZS4gTWF5IGFkZCBhIG5ldyBzdGFmZiBpZiBuZWVkZWQuXG4vLyBmaW5pc2hlZCgpOiBDYWxsZWQgb25seSBpbnRlcm5hbGx5IGJ5IGxheW91dCgpXG4vLyBsYXlvdXQoKTogVGhpcyBkb2VzIGFsbCB0aGUgbGF5b3V0LiBJdCBzZXRzIHRoZSBmb2xsb3dpbmc6IHNwYWNpbmd1bml0cywgc3RhcnR4LCBtaW5zcGFjZSwgdywgYW5kIHRoZSB4LWNvb3JkaW5hdGUgb2YgZWFjaCBlbGVtZW50IGluIGVhY2ggdm9pY2UuXG4vLyBkcmF3KCk6IENhbGxzIHRoZSB1bmRlcmx5aW5nIG1ldGhvZHMgb24gdGhlIHZvaWNlIG9iamVjdHMgdG8gZG8gdGhlIGRyYXdpbmcuIFNldHMgeSBhbmQgaGVpZ2h0LlxuLy9cbi8vIE1lbWJlcnM6XG4vLyBzdGFmZnM6IGFuIGFycmF5IG9mIGFsbCB0aGUgc3RhdmVzIGluIHRoaXMgZ3JvdXAuIEVhY2ggc3RhZmYgY29udGFpbnMgdGhlIGZvbGxvd2luZyBlbGVtZW50czpcbi8vICAgIHsgdG9wLCBib3R0b20sIGhpZ2hlc3QsIGxvd2VzdCwgeSB9XG4vLyB2b2ljZXM6IGFycmF5IG9mIFZvaWNlRWxlbWVudCBvYmplY3RzLiBUaGlzIGlzIG1vc3RseSBwYXNzZWQgaW4sIGJ1dCB0aGUgVm9pY2VFbGVtZW50IG9iamVjdHMgYXJlIG1vZGlmaWVkIGhlcmUuXG4vL1xuLy8gc3BhY2luZ3VuaXRzOiBudW1iZXIgb2YgcmVsYXRpdmUgeC11bml0cyBpbiB0aGUgbGluZS4gVXNlZCBieSB0aGUgY2FsbGluZyBmdW5jdGlvbiB0byBwYXNzIGJhY2sgaW4gYXMgdGhlIFwic3BhY2luZ1wiIGlucHV0IHBhcmFtZXRlci5cbi8vIFRPRE8tUEVSOiBUaGlzIHNob3VsZCBhY3R1YWxseSBiZSBwYXNzZWQgYmFjayBhcyBhIHJldHVybiB2YWx1ZS5cbi8vIG1pbnNwYWNlOiBzbWFsbGVzdCBzcGFjZSBiZXR3ZWVuIHR3byBub3Rlcy4gVXNlZCBieSB0aGUgY2FsbGluZyBmdW5jdGlvbiB0byBwYXNzIGJhY2sgaW4gYXMgdGhlIFwic3BhY2luZ1wiIGlucHV0IHBhcmFtZXRlci5cbi8vIFRPRE8tUEVSOiBUaGlzIHNob3VsZCBhY3R1YWxseSBiZSBwYXNzZWQgYmFjayBhcyBhIHJldHVybiB2YWx1ZS5cbi8vIHN0YXJ0eDogVGhlIGxlZnQgZWRnZSwgdGFraW5nIHRoZSBtYXJnaW4gYW5kIHRoZSBvcHRpb25hbCB2b2ljZSBuYW1lLiBVc2VkIGJ5IHRoZSBkcmF3KCkgbWV0aG9kLlxuLy8gdzogVGhlIHdpZHRoIG9mIHRoZSBsaW5lLiBVc2VkIGJ5IGNhbGxpbmcgZnVuY3Rpb24gdG8gcGFzcyBiYWNrIGluIGFzIHRoZSBcInNwYWNpbmdcIiBpbnB1dCBwYXJhbWV0ZXIsIGFuZCB0aGUgZHJhdygpIG1ldGhvZC5cbi8vIFRPRE8tUEVSOiBUaGlzIHNob3VsZCBhY3R1YWxseSBiZSBwYXNzZWQgYmFjayBhcyBhIHJldHVybiB2YWx1ZS4gIChUT0RPLVBFUjogaW4gcGl4ZWxzIG9yIHNwYWNpbmcgdW5pdHM/KVxuLy8geTogVGhlIHRvcCBvZiB0aGUgc3RhZmYgZ3JvdXAsIGluIHBpeGVscy4gVGhpcyBpcyBzZXQgaW4gdGhlIGRyYXcgbWV0aG9kLlxuLy8gVE9ETy1QRVI6IFdoZXJlIGlzIHRoYXQgdXNlZD8gSXQgbG9va3MgbGlrZSBpdCBtaWdodCBub3QgYmUgbmVlZGVkLlxuLy8gaGVpZ2h0OiBTZXQgaW4gdGhlIGRyYXcoKSBtZXRob2QgdG8gdGhlIGhlaWdodCBhY3R1YWxseSB1c2VkLiBVc2VkIGJ5IHRoZSBjYWxsaW5nIGZ1bmN0aW9uIHRvIGtub3cgd2hlcmUgdG8gc3RhcnQgdGhlIG5leHQgc3RhZmYgZ3JvdXAuXG4vLyBUT0RPLVBFUjogVGhpcyBzaG91bGQgYWN0dWFsbHkgYmUgc2V0IGluIHRoZSBsYXlvdXQgbWV0aG9kIGFuZCBwYXNzZWQgYmFjayBhcyBhIHJldHVybiB2YWx1ZS5cbnZhciBjYWxjSGVpZ2h0ID0gcmVxdWlyZSgnLi4vY2FsYy1oZWlnaHQnKTtcblxudmFyIFN0YWZmR3JvdXBFbGVtZW50ID0gZnVuY3Rpb24gKGdldFRleHRTaXplKSB7XG5cdHRoaXMuZ2V0VGV4dFNpemUgPSBnZXRUZXh0U2l6ZTtcblx0dGhpcy52b2ljZXMgPSBbXTtcblx0dGhpcy5zdGFmZnMgPSBbXTtcblx0dGhpcy5icmFjZSA9IHVuZGVmaW5lZDsgLy90b255XG5cdHRoaXMuYnJhY2tldCA9IHVuZGVmaW5lZDtcbn07XG5cblN0YWZmR3JvdXBFbGVtZW50LnByb3RvdHlwZS5zZXRMaW1pdCA9IGZ1bmN0aW9uIChtZW1iZXIsIHZvaWNlKSB7XG5cdGlmICghdm9pY2Uuc3BlY2lhbFlbbWVtYmVyXSkgcmV0dXJuO1xuXHRpZiAoIXZvaWNlLnN0YWZmLnNwZWNpYWxZW21lbWJlcl0pXG5cdFx0dm9pY2Uuc3RhZmYuc3BlY2lhbFlbbWVtYmVyXSA9IHZvaWNlLnNwZWNpYWxZW21lbWJlcl07XG5cdGVsc2Vcblx0XHR2b2ljZS5zdGFmZi5zcGVjaWFsWVttZW1iZXJdID0gTWF0aC5tYXgodm9pY2Uuc3RhZmYuc3BlY2lhbFlbbWVtYmVyXSwgdm9pY2Uuc3BlY2lhbFlbbWVtYmVyXSk7XG59O1xuXG5TdGFmZkdyb3VwRWxlbWVudC5wcm90b3R5cGUuYWRkVm9pY2UgPSBmdW5jdGlvbiAodm9pY2UsIHN0YWZmbnVtYmVyLCBzdGFmZmxpbmVzKSB7XG5cdHZhciB2b2ljZU51bSA9IHRoaXMudm9pY2VzLmxlbmd0aDtcblx0dGhpcy52b2ljZXNbdm9pY2VOdW1dID0gdm9pY2U7XG5cdGlmICh0aGlzLnN0YWZmc1tzdGFmZm51bWJlcl0pXG5cdFx0dGhpcy5zdGFmZnNbc3RhZmZudW1iZXJdLnZvaWNlcy5wdXNoKHZvaWNlTnVtKTtcblx0ZWxzZSB7XG5cdFx0Ly8gVE9ETy1QRVI6IGhvdyBkb2VzIHRoZSBtaW4vbWF4IGNoYW5nZSB3aGVuIHN0YWZmbGluZXMgaXMgbm90IDU/XG5cdFx0dGhpcy5zdGFmZnNbdGhpcy5zdGFmZnMubGVuZ3RoXSA9IHtcblx0XHRcdHRvcDogMTAsXG5cdFx0XHRib3R0b206IDIsXG5cdFx0XHRsaW5lczogc3RhZmZsaW5lcyxcblx0XHRcdHZvaWNlczogW3ZvaWNlTnVtXSxcblx0XHRcdHNwZWNpYWxZOiB7XG5cdFx0XHRcdHRlbXBvSGVpZ2h0QWJvdmU6IDAsXG5cdFx0XHRcdHBhcnRIZWlnaHRBYm92ZTogMCxcblx0XHRcdFx0dm9sdW1lSGVpZ2h0QWJvdmU6IDAsXG5cdFx0XHRcdGR5bmFtaWNIZWlnaHRBYm92ZTogMCxcblx0XHRcdFx0ZW5kaW5nSGVpZ2h0QWJvdmU6IDAsXG5cdFx0XHRcdGNob3JkSGVpZ2h0QWJvdmU6IDAsXG5cdFx0XHRcdGx5cmljSGVpZ2h0QWJvdmU6IDAsXG5cblx0XHRcdFx0bHlyaWNIZWlnaHRCZWxvdzogMCxcblx0XHRcdFx0Y2hvcmRIZWlnaHRCZWxvdzogMCxcblx0XHRcdFx0dm9sdW1lSGVpZ2h0QmVsb3c6IDAsXG5cdFx0XHRcdGR5bmFtaWNIZWlnaHRCZWxvdzogMFxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblx0dm9pY2Uuc3RhZmYgPSB0aGlzLnN0YWZmc1tzdGFmZm51bWJlcl07XG59O1xuXG5TdGFmZkdyb3VwRWxlbWVudC5wcm90b3R5cGUuc2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuXHR0aGlzLmhlaWdodCA9IGNhbGNIZWlnaHQodGhpcyk7XG59O1xuXG5TdGFmZkdyb3VwRWxlbWVudC5wcm90b3R5cGUuc2V0V2lkdGggPSBmdW5jdGlvbiAod2lkdGgpIHtcblx0dGhpcy53ID0gd2lkdGg7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy52b2ljZXMubGVuZ3RoOyBpKyspIHtcblx0XHR0aGlzLnZvaWNlc1tpXS5zZXRXaWR0aCh3aWR0aCk7XG5cdH1cbn07XG5cblN0YWZmR3JvdXBFbGVtZW50LnByb3RvdHlwZS5zZXRTdGFmZkxpbWl0cyA9IGZ1bmN0aW9uICh2b2ljZSkge1xuXHR2b2ljZS5zdGFmZi50b3AgPSBNYXRoLm1heCh2b2ljZS5zdGFmZi50b3AsIHZvaWNlLnRvcCk7XG5cdHZvaWNlLnN0YWZmLmJvdHRvbSA9IE1hdGgubWluKHZvaWNlLnN0YWZmLmJvdHRvbSwgdm9pY2UuYm90dG9tKTtcblx0dGhpcy5zZXRMaW1pdCgndGVtcG9IZWlnaHRBYm92ZScsIHZvaWNlKTtcblx0dGhpcy5zZXRMaW1pdCgncGFydEhlaWdodEFib3ZlJywgdm9pY2UpO1xuXHR0aGlzLnNldExpbWl0KCd2b2x1bWVIZWlnaHRBYm92ZScsIHZvaWNlKTtcblx0dGhpcy5zZXRMaW1pdCgnZHluYW1pY0hlaWdodEFib3ZlJywgdm9pY2UpO1xuXHR0aGlzLnNldExpbWl0KCdlbmRpbmdIZWlnaHRBYm92ZScsIHZvaWNlKTtcblx0dGhpcy5zZXRMaW1pdCgnY2hvcmRIZWlnaHRBYm92ZScsIHZvaWNlKTtcblx0dGhpcy5zZXRMaW1pdCgnbHlyaWNIZWlnaHRBYm92ZScsIHZvaWNlKTtcblx0dGhpcy5zZXRMaW1pdCgnbHlyaWNIZWlnaHRCZWxvdycsIHZvaWNlKTtcblx0dGhpcy5zZXRMaW1pdCgnY2hvcmRIZWlnaHRCZWxvdycsIHZvaWNlKTtcblx0dGhpcy5zZXRMaW1pdCgndm9sdW1lSGVpZ2h0QmVsb3cnLCB2b2ljZSk7XG5cdHRoaXMuc2V0TGltaXQoJ2R5bmFtaWNIZWlnaHRCZWxvdycsIHZvaWNlKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU3RhZmZHcm91cEVsZW1lbnQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/staff-group-element.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/subtitle.js":
/*!********************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/subtitle.js ***!
  \********************************************************************/
/***/ ((module) => {

eval("function Subtitle(spaceAbove, formatting, info, center, paddingLeft, getTextSize) {\n\tthis.rows = [];\n\tif (spaceAbove)\n\t\tthis.rows.push({ move: spaceAbove });\n\tvar tAnchor = formatting.titleleft ? 'start' : 'middle';\n\tvar tLeft = formatting.titleleft ? paddingLeft : center;\n\tthis.rows.push({ left: tLeft, text: info.text, font: 'subtitlefont', klass: 'text subtitle', anchor: tAnchor, startChar: info.startChar, endChar: info.endChar, absElemType: \"subtitle\", name: \"subtitle\" });\n\tvar size = getTextSize.calc(info.text, 'subtitlefont', 'text subtitle');\n\tthis.rows.push({ move: size.height });\n}\n\nmodule.exports = Subtitle;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3N1YnRpdGxlLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixrQkFBa0I7QUFDckM7QUFDQTtBQUNBLGtCQUFrQiwwTEFBMEw7QUFDNU07QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3N1YnRpdGxlLmpzPzhlNTciXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gU3VidGl0bGUoc3BhY2VBYm92ZSwgZm9ybWF0dGluZywgaW5mbywgY2VudGVyLCBwYWRkaW5nTGVmdCwgZ2V0VGV4dFNpemUpIHtcblx0dGhpcy5yb3dzID0gW107XG5cdGlmIChzcGFjZUFib3ZlKVxuXHRcdHRoaXMucm93cy5wdXNoKHsgbW92ZTogc3BhY2VBYm92ZSB9KTtcblx0dmFyIHRBbmNob3IgPSBmb3JtYXR0aW5nLnRpdGxlbGVmdCA/ICdzdGFydCcgOiAnbWlkZGxlJztcblx0dmFyIHRMZWZ0ID0gZm9ybWF0dGluZy50aXRsZWxlZnQgPyBwYWRkaW5nTGVmdCA6IGNlbnRlcjtcblx0dGhpcy5yb3dzLnB1c2goeyBsZWZ0OiB0TGVmdCwgdGV4dDogaW5mby50ZXh0LCBmb250OiAnc3VidGl0bGVmb250Jywga2xhc3M6ICd0ZXh0IHN1YnRpdGxlJywgYW5jaG9yOiB0QW5jaG9yLCBzdGFydENoYXI6IGluZm8uc3RhcnRDaGFyLCBlbmRDaGFyOiBpbmZvLmVuZENoYXIsIGFic0VsZW1UeXBlOiBcInN1YnRpdGxlXCIsIG5hbWU6IFwic3VidGl0bGVcIiB9KTtcblx0dmFyIHNpemUgPSBnZXRUZXh0U2l6ZS5jYWxjKGluZm8udGV4dCwgJ3N1YnRpdGxlZm9udCcsICd0ZXh0IHN1YnRpdGxlJyk7XG5cdHRoaXMucm93cy5wdXNoKHsgbW92ZTogc2l6ZS5oZWlnaHQgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gU3VidGl0bGU7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/subtitle.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/tempo-element.js":
/*!*************************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/tempo-element.js ***!
  \*************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_tempo_element.js: Definition of the TempoElement class.\n\nvar AbsoluteElement = __webpack_require__(/*! ./absolute-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/absolute-element.js\");\nvar RelativeElement = __webpack_require__(/*! ./relative-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/relative-element.js\");\n\nvar TempoElement = function TempoElement(tempo, tuneNumber, createNoteHead) {\n\tthis.type = \"TempoElement\";\n\tthis.tempo = tempo;\n\tthis.tempo.type = \"tempo\"; /// TODO-PER: this should be set earlier, in the parser, probably.\n\tthis.tuneNumber = tuneNumber;\n\t// TODO: can these two properties be merged?\n\tthis.totalHeightInPitches = 6;\n\tthis.tempoHeightAbove = this.totalHeightInPitches;\n\tthis.pitch = undefined; // This will be set later\n\tif (this.tempo.duration && !this.tempo.suppressBpm) {\n\t\tthis.note = this.createNote(createNoteHead, tempo, tuneNumber);\n\t}\n};\n\nTempoElement.prototype.setX = function (x) {\n\tthis.x = x;\n};\n\nTempoElement.prototype.createNote = function (createNoteHead, tempo, tuneNumber) {\n\tvar temposcale = 0.75;\n\tvar duration = tempo.duration[0]; // TODO when multiple durations\n\tvar absElem = new AbsoluteElement(tempo, duration, 1, 'tempo', tuneNumber);\n\t// There aren't an infinite number of note values, but we are passed a float, so just in case something is off upstream,\n\t// merge all of the in between points.\n\tvar dot;\n\tvar flag;\n\tvar note;\n\tif (duration <= 1 / 32) { note = \"noteheads.quarter\"; flag = \"flags.u32nd\"; dot = 0; }\n\telse if (duration <= 1 / 16) { note = \"noteheads.quarter\"; flag = \"flags.u16th\"; dot = 0; }\n\telse if (duration <= 3 / 32) { note = \"noteheads.quarter\"; flag = \"flags.u16nd\"; dot = 1; }\n\telse if (duration <= 1 / 8) { note = \"noteheads.quarter\"; flag = \"flags.u8th\"; dot = 0; }\n\telse if (duration <= 3 / 16) { note = \"noteheads.quarter\"; flag = \"flags.u8th\"; dot = 1; }\n\telse if (duration <= 1 / 4) { note = \"noteheads.quarter\"; dot = 0; }\n\telse if (duration <= 3 / 8) { note = \"noteheads.quarter\"; dot = 1; }\n\telse if (duration <= 1 / 2) { note = \"noteheads.half\"; dot = 0; }\n\telse if (duration <= 3 / 4) { note = \"noteheads.half\"; dot = 1; }\n\telse if (duration <= 1) { note = \"noteheads.whole\"; dot = 0; }\n\telse if (duration <= 1.5) { note = \"noteheads.whole\"; dot = 1; }\n\telse if (duration <= 2) { note = \"noteheads.dbl\"; dot = 0; }\n\telse { note = \"noteheads.dbl\"; dot = 1; }\n\n\tvar ret = createNoteHead(absElem, note, { verticalPos: 0 }, // This is just temporary: we'll offset the vertical positioning when we get the actual vertical spot.\n\t\t{ dir: \"up\", flag: flag, dot: dot, scale: temposcale });\n\tvar tempoNote = ret.notehead;\n\tabsElem.addHead(tempoNote);\n\tvar stem;\n\tif (note !== \"noteheads.whole\" && note !== \"noteheads.dbl\") {\n\t\tvar p1 = 1 / 3 * temposcale;\n\t\tvar p2 = 5 * temposcale;\n\t\tvar dx = tempoNote.dx + tempoNote.w;\n\t\tvar width = -0.6;\n\t\tstem = new RelativeElement(null, dx, 0, p1, { \"type\": \"stem\", \"pitch2\": p2, linewidth: width });\n\t\tabsElem.addRight(stem);\n\t}\n\treturn absElem;\n};\n\nmodule.exports = TempoElement;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3RlbXBvLWVsZW1lbnQuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsc0JBQXNCLG1CQUFPLENBQUMsc0dBQW9CO0FBQ2xELHNCQUFzQixtQkFBTyxDQUFDLHNHQUFvQjs7QUFFbEQ7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw0QkFBNEIsc0JBQXNCO0FBQzdFLGdDQUFnQyw0QkFBNEIsc0JBQXNCO0FBQ2xGLGdDQUFnQyw0QkFBNEIsc0JBQXNCO0FBQ2xGLCtCQUErQiw0QkFBNEIscUJBQXFCO0FBQ2hGLGdDQUFnQyw0QkFBNEIscUJBQXFCO0FBQ2pGLCtCQUErQiw0QkFBNEI7QUFDM0QsK0JBQStCLDRCQUE0QjtBQUMzRCwrQkFBK0IseUJBQXlCO0FBQ3hELCtCQUErQix5QkFBeUI7QUFDeEQsMkJBQTJCLDBCQUEwQjtBQUNyRCw2QkFBNkIsMEJBQTBCO0FBQ3ZELDJCQUEyQix3QkFBd0I7QUFDbkQsUUFBUSx3QkFBd0I7O0FBRWhDLDJDQUEyQyxnQkFBZ0I7QUFDM0QsSUFBSSxvREFBb0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxnREFBZ0Q7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvY3JlYXRpb24vZWxlbWVudHMvdGVtcG8tZWxlbWVudC5qcz8yZDZjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vICAgIGFiY190ZW1wb19lbGVtZW50LmpzOiBEZWZpbml0aW9uIG9mIHRoZSBUZW1wb0VsZW1lbnQgY2xhc3MuXG5cbnZhciBBYnNvbHV0ZUVsZW1lbnQgPSByZXF1aXJlKCcuL2Fic29sdXRlLWVsZW1lbnQnKTtcbnZhciBSZWxhdGl2ZUVsZW1lbnQgPSByZXF1aXJlKCcuL3JlbGF0aXZlLWVsZW1lbnQnKTtcblxudmFyIFRlbXBvRWxlbWVudCA9IGZ1bmN0aW9uIFRlbXBvRWxlbWVudCh0ZW1wbywgdHVuZU51bWJlciwgY3JlYXRlTm90ZUhlYWQpIHtcblx0dGhpcy50eXBlID0gXCJUZW1wb0VsZW1lbnRcIjtcblx0dGhpcy50ZW1wbyA9IHRlbXBvO1xuXHR0aGlzLnRlbXBvLnR5cGUgPSBcInRlbXBvXCI7IC8vLyBUT0RPLVBFUjogdGhpcyBzaG91bGQgYmUgc2V0IGVhcmxpZXIsIGluIHRoZSBwYXJzZXIsIHByb2JhYmx5LlxuXHR0aGlzLnR1bmVOdW1iZXIgPSB0dW5lTnVtYmVyO1xuXHQvLyBUT0RPOiBjYW4gdGhlc2UgdHdvIHByb3BlcnRpZXMgYmUgbWVyZ2VkP1xuXHR0aGlzLnRvdGFsSGVpZ2h0SW5QaXRjaGVzID0gNjtcblx0dGhpcy50ZW1wb0hlaWdodEFib3ZlID0gdGhpcy50b3RhbEhlaWdodEluUGl0Y2hlcztcblx0dGhpcy5waXRjaCA9IHVuZGVmaW5lZDsgLy8gVGhpcyB3aWxsIGJlIHNldCBsYXRlclxuXHRpZiAodGhpcy50ZW1wby5kdXJhdGlvbiAmJiAhdGhpcy50ZW1wby5zdXBwcmVzc0JwbSkge1xuXHRcdHRoaXMubm90ZSA9IHRoaXMuY3JlYXRlTm90ZShjcmVhdGVOb3RlSGVhZCwgdGVtcG8sIHR1bmVOdW1iZXIpO1xuXHR9XG59O1xuXG5UZW1wb0VsZW1lbnQucHJvdG90eXBlLnNldFggPSBmdW5jdGlvbiAoeCkge1xuXHR0aGlzLnggPSB4O1xufTtcblxuVGVtcG9FbGVtZW50LnByb3RvdHlwZS5jcmVhdGVOb3RlID0gZnVuY3Rpb24gKGNyZWF0ZU5vdGVIZWFkLCB0ZW1wbywgdHVuZU51bWJlcikge1xuXHR2YXIgdGVtcG9zY2FsZSA9IDAuNzU7XG5cdHZhciBkdXJhdGlvbiA9IHRlbXBvLmR1cmF0aW9uWzBdOyAvLyBUT0RPIHdoZW4gbXVsdGlwbGUgZHVyYXRpb25zXG5cdHZhciBhYnNFbGVtID0gbmV3IEFic29sdXRlRWxlbWVudCh0ZW1wbywgZHVyYXRpb24sIDEsICd0ZW1wbycsIHR1bmVOdW1iZXIpO1xuXHQvLyBUaGVyZSBhcmVuJ3QgYW4gaW5maW5pdGUgbnVtYmVyIG9mIG5vdGUgdmFsdWVzLCBidXQgd2UgYXJlIHBhc3NlZCBhIGZsb2F0LCBzbyBqdXN0IGluIGNhc2Ugc29tZXRoaW5nIGlzIG9mZiB1cHN0cmVhbSxcblx0Ly8gbWVyZ2UgYWxsIG9mIHRoZSBpbiBiZXR3ZWVuIHBvaW50cy5cblx0dmFyIGRvdDtcblx0dmFyIGZsYWc7XG5cdHZhciBub3RlO1xuXHRpZiAoZHVyYXRpb24gPD0gMSAvIDMyKSB7IG5vdGUgPSBcIm5vdGVoZWFkcy5xdWFydGVyXCI7IGZsYWcgPSBcImZsYWdzLnUzMm5kXCI7IGRvdCA9IDA7IH1cblx0ZWxzZSBpZiAoZHVyYXRpb24gPD0gMSAvIDE2KSB7IG5vdGUgPSBcIm5vdGVoZWFkcy5xdWFydGVyXCI7IGZsYWcgPSBcImZsYWdzLnUxNnRoXCI7IGRvdCA9IDA7IH1cblx0ZWxzZSBpZiAoZHVyYXRpb24gPD0gMyAvIDMyKSB7IG5vdGUgPSBcIm5vdGVoZWFkcy5xdWFydGVyXCI7IGZsYWcgPSBcImZsYWdzLnUxNm5kXCI7IGRvdCA9IDE7IH1cblx0ZWxzZSBpZiAoZHVyYXRpb24gPD0gMSAvIDgpIHsgbm90ZSA9IFwibm90ZWhlYWRzLnF1YXJ0ZXJcIjsgZmxhZyA9IFwiZmxhZ3MudTh0aFwiOyBkb3QgPSAwOyB9XG5cdGVsc2UgaWYgKGR1cmF0aW9uIDw9IDMgLyAxNikgeyBub3RlID0gXCJub3RlaGVhZHMucXVhcnRlclwiOyBmbGFnID0gXCJmbGFncy51OHRoXCI7IGRvdCA9IDE7IH1cblx0ZWxzZSBpZiAoZHVyYXRpb24gPD0gMSAvIDQpIHsgbm90ZSA9IFwibm90ZWhlYWRzLnF1YXJ0ZXJcIjsgZG90ID0gMDsgfVxuXHRlbHNlIGlmIChkdXJhdGlvbiA8PSAzIC8gOCkgeyBub3RlID0gXCJub3RlaGVhZHMucXVhcnRlclwiOyBkb3QgPSAxOyB9XG5cdGVsc2UgaWYgKGR1cmF0aW9uIDw9IDEgLyAyKSB7IG5vdGUgPSBcIm5vdGVoZWFkcy5oYWxmXCI7IGRvdCA9IDA7IH1cblx0ZWxzZSBpZiAoZHVyYXRpb24gPD0gMyAvIDQpIHsgbm90ZSA9IFwibm90ZWhlYWRzLmhhbGZcIjsgZG90ID0gMTsgfVxuXHRlbHNlIGlmIChkdXJhdGlvbiA8PSAxKSB7IG5vdGUgPSBcIm5vdGVoZWFkcy53aG9sZVwiOyBkb3QgPSAwOyB9XG5cdGVsc2UgaWYgKGR1cmF0aW9uIDw9IDEuNSkgeyBub3RlID0gXCJub3RlaGVhZHMud2hvbGVcIjsgZG90ID0gMTsgfVxuXHRlbHNlIGlmIChkdXJhdGlvbiA8PSAyKSB7IG5vdGUgPSBcIm5vdGVoZWFkcy5kYmxcIjsgZG90ID0gMDsgfVxuXHRlbHNlIHsgbm90ZSA9IFwibm90ZWhlYWRzLmRibFwiOyBkb3QgPSAxOyB9XG5cblx0dmFyIHJldCA9IGNyZWF0ZU5vdGVIZWFkKGFic0VsZW0sIG5vdGUsIHsgdmVydGljYWxQb3M6IDAgfSwgLy8gVGhpcyBpcyBqdXN0IHRlbXBvcmFyeTogd2UnbGwgb2Zmc2V0IHRoZSB2ZXJ0aWNhbCBwb3NpdGlvbmluZyB3aGVuIHdlIGdldCB0aGUgYWN0dWFsIHZlcnRpY2FsIHNwb3QuXG5cdFx0eyBkaXI6IFwidXBcIiwgZmxhZzogZmxhZywgZG90OiBkb3QsIHNjYWxlOiB0ZW1wb3NjYWxlIH0pO1xuXHR2YXIgdGVtcG9Ob3RlID0gcmV0Lm5vdGVoZWFkO1xuXHRhYnNFbGVtLmFkZEhlYWQodGVtcG9Ob3RlKTtcblx0dmFyIHN0ZW07XG5cdGlmIChub3RlICE9PSBcIm5vdGVoZWFkcy53aG9sZVwiICYmIG5vdGUgIT09IFwibm90ZWhlYWRzLmRibFwiKSB7XG5cdFx0dmFyIHAxID0gMSAvIDMgKiB0ZW1wb3NjYWxlO1xuXHRcdHZhciBwMiA9IDUgKiB0ZW1wb3NjYWxlO1xuXHRcdHZhciBkeCA9IHRlbXBvTm90ZS5keCArIHRlbXBvTm90ZS53O1xuXHRcdHZhciB3aWR0aCA9IC0wLjY7XG5cdFx0c3RlbSA9IG5ldyBSZWxhdGl2ZUVsZW1lbnQobnVsbCwgZHgsIDAsIHAxLCB7IFwidHlwZVwiOiBcInN0ZW1cIiwgXCJwaXRjaDJcIjogcDIsIGxpbmV3aWR0aDogd2lkdGggfSk7XG5cdFx0YWJzRWxlbS5hZGRSaWdodChzdGVtKTtcblx0fVxuXHRyZXR1cm4gYWJzRWxlbTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVGVtcG9FbGVtZW50O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/tempo-element.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/tie-element.js":
/*!***********************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/tie-element.js ***!
  \***********************************************************************/
/***/ ((module) => {

eval("//    abc_tie_element.js: Definition of the TieElement class.\n\nvar TieElem = function TieElem(options) {\n\tthis.type = \"TieElem\";\n\t//\tconsole.log(\"constructor\", options.anchor1 ? options.anchor1.pitch : \"N/A\", options.anchor2 ? options.anchor2.pitch : \"N/A\", options.isTie, options.isGrace);\n\tthis.anchor1 = options.anchor1; // must have a .x and a .pitch, and a .parent property or be null (means starts at the \"beginning\" of the line - after keysig)\n\tthis.anchor2 = options.anchor2; // must have a .x and a .pitch property or be null (means ends at the end of the line)\n\tif (options.isGrace)\n\t\tthis.isGrace = true;\n\tif (options.fixedY)\n\t\tthis.fixedY = true;\n\tif (options.stemDir)\n\t\tthis.stemDir = options.stemDir;\n\tif (options.voiceNumber !== undefined)\n\t\tthis.voiceNumber = options.voiceNumber;\n\tif (options.style !== undefined)\n\t\tthis.dotted = true;\n\tthis.internalNotes = [];\n};\n\nTieElem.prototype.addInternalNote = function (note) {\n\tthis.internalNotes.push(note);\n};\n\nTieElem.prototype.setEndAnchor = function (anchor2) {\n\t//\tconsole.log(\"end\", this.anchor1 ? this.anchor1.pitch : \"N/A\", anchor2 ? anchor2.pitch : \"N/A\", this.isTie, this.isGrace);\n\tthis.anchor2 = anchor2; // must have a .x and a .pitch property or be null (means ends at the end of the line)\n\n\t// we don't really have enough info to know what the vertical extent is yet and we won't until drawing. This will just give it enough\n\t// room on either side (we don't even know if the slur will be above yet). We need to set this so that we can make sure the voice has\n\t// at least enough room that the line doesn't get cut off if the tie or slur is the lowest thing.\n\tif (this.anchor1) {\n\t\tthis.top = Math.max(this.anchor1.pitch, this.anchor2.pitch) + 4\n\t\tthis.bottom = Math.min(this.anchor1.pitch, this.anchor2.pitch) - 4\n\t} else {\n\t\tthis.top = this.anchor2.pitch + 4\n\t\tthis.bottom = this.anchor2.pitch - 4\n\t}\n};\n\n// If we encounter a repeat sign, then we don't want to extend either a tie or a slur past it, so these are called to be a limit.\nTieElem.prototype.setStartX = function (startLimitElem) {\n\tthis.startLimitX = startLimitElem;\n};\n\nTieElem.prototype.setEndX = function (endLimitElem) {\n\tthis.endLimitX = endLimitElem;\n};\n\nTieElem.prototype.setHint = function () {\n\tthis.hint = true;\n};\n\nTieElem.prototype.calcTieDirection = function () {\n\t// The rules:\n\t// 1) If it is in a grace note group, then the direction is always BELOW.\n\t// 2) If it is in a single voice, then the direction is always OPPOSITE of the stem (or where the stem would have been in the case of whole notes.)\n\t// 3) If the stem direction is forced (probably because there are two voices on the same line), then the direction is the SAME as the stem direction.\n\n\tif (this.isGrace)\n\t\tthis.above = false;\n\telse if (this.voiceNumber === 0)\n\t\tthis.above = true;\n\telse if (this.voiceNumber > 0)\n\t\tthis.above = false;\n\telse {\n\t\tvar referencePitch;\n\t\tif (this.anchor1)\n\t\t\treferencePitch = this.anchor1.pitch;\n\t\telse if (this.anchor2)\n\t\t\treferencePitch = this.anchor2.pitch;\n\t\telse\n\t\t\treferencePitch = 14; // TODO-PER: this can't really happen normally. This would imply that a tie crossed over three lines, something like \"C-\\nz\\nC\"\n\t\t// Put the arc in the opposite direction of the stem. That isn't always the pitch if one or both of the notes are beamed with something that affects its stem.\n\t\tif ((this.anchor1 && this.anchor1.stemDir === 'down') && (this.anchor2 && this.anchor2.stemDir === \"down\"))\n\t\t\tthis.above = true;\n\t\telse if ((this.anchor1 && this.anchor1.stemDir === 'up') && (this.anchor2 && this.anchor2.stemDir === \"up\"))\n\t\t\tthis.above = false;\n\t\telse if (this.anchor1 && this.anchor2)\n\t\t\tthis.above = referencePitch >= 6;\n\t\telse if (this.anchor1)\n\t\t\tthis.above = this.anchor1.stemDir === \"down\";\n\t\telse if (this.anchor2)\n\t\t\tthis.above = this.anchor2.stemDir === \"down\";\n\t\telse\n\t\t\tthis.above = referencePitch >= 6;\n\t}\n};\n\n// From \"standard music notation practice\" by Music Publishers Association:\n// 1) Slurs are placed under the note heads if all stems go up.\n// 2) Slurs are placed over the note heads if all stems go down.\n// 3) If there are both up stems and down stems, prefer placing the slur over.\n// 4) When the staff has opposite stemmed voices, all slurs should be on the stemmed side.\n\nTieElem.prototype.calcSlurDirection = function () {\n\tif (this.isGrace)\n\t\tthis.above = false;\n\telse if (this.voiceNumber === 0)\n\t\tthis.above = true;\n\telse if (this.voiceNumber > 0)\n\t\tthis.above = false;\n\telse {\n\t\tvar hasDownStem = false;\n\t\tif (this.anchor1 && this.anchor1.stemDir === \"down\")\n\t\t\thasDownStem = true;\n\t\tif (this.anchor2 && this.anchor2.stemDir === \"down\")\n\t\t\thasDownStem = true;\n\t\tfor (var i = 0; i < this.internalNotes.length; i++) {\n\t\t\tvar n = this.internalNotes[i];\n\t\t\tif (n.stemDir === \"down\")\n\t\t\t\thasDownStem = true;\n\t\t}\n\t\tthis.above = hasDownStem;\n\t}\n};\n\nTieElem.prototype.calcX = function (lineStartX, lineEndX) {\n\tif (this.anchor1) {\n\t\tthis.startX = this.anchor1.x; // The normal case where there is a starting element to attach to.\n\t\tif (this.anchor1.scalex < 1) // this is a grace note - don't offset the tie as much.\n\t\t\tthis.startX -= 3;\n\t} else if (this.startLimitX)\n\t\tthis.startX = this.startLimitX.x + this.startLimitX.w; // if there is no start element, but there is a repeat mark before the start of the line.\n\telse {\n\t\tif (this.anchor2)\n\t\t\tthis.startX = this.anchor2.x - 20; // There is no element and no repeat mark: make a small arc\n\t\telse\n\t\t\tthis.startX = lineStartX; // Don't have any guidance, so extend to beginning of line\n\t}\n\tif (!this.anchor1 && this.dotted)\n\t\tthis.startX -= 3; // The arc needs to be long enough to tell that it is dotted.\n\n\tif (this.anchor2)\n\t\tthis.endX = this.anchor2.x; // The normal case where there is a starting element to attach to.\n\telse if (this.endLimitX)\n\t\tthis.endX = this.endLimitX.x; // if there is no start element, but there is a repeat mark before the start of the line.\n\telse\n\t\tthis.endX = lineEndX; // There is no element and no repeat mark: extend to the beginning of the line.\n};\n\nTieElem.prototype.calcTieY = function () {\n\t// If the tie comes from another line, then one or both anchors will be missing.\n\tif (this.anchor1)\n\t\tthis.startY = this.anchor1.pitch;\n\telse if (this.anchor2)\n\t\tthis.startY = this.anchor2.pitch;\n\telse\n\t\tthis.startY = this.above ? 14 : 0;\n\n\tif (this.anchor2)\n\t\tthis.endY = this.anchor2.pitch;\n\telse if (this.anchor1)\n\t\tthis.endY = this.anchor1.pitch;\n\telse\n\t\tthis.endY = this.above ? 14 : 0;\n};\n\n// From \"standard music notation practice\" by Music Publishers Association:\n// 1) If the anchor note is down stem, the slur points to the note head.\n// 2) If the anchor note is up stem, and the slur is over, then point to middle of stem.\n\nTieElem.prototype.calcSlurY = function () {\n\tif (this.anchor1 && this.anchor2) {\n\t\tif (this.above && this.anchor1.stemDir === \"up\" && !this.fixedY) {\n\t\t\tthis.startY = (this.anchor1.highestVert + this.anchor1.pitch) / 2;\n\t\t\tthis.startX += this.anchor1.w / 2; // When going to the middle of the stem, bump the line to the right a little bit to make it look right.\n\t\t} else\n\t\t\tthis.startY = this.anchor1.pitch;\n\n\t\t// If the closing note has an up stem, and it is beamed, and it isn't the first note in the beam, then the beam will get in the way.\n\t\tvar beamInterferes = this.anchor2.parent.beam && this.anchor2.parent.beam.stemsUp && this.anchor2.parent.beam.elems[0] !== this.anchor2.parent;\n\t\tvar midPoint = (this.anchor2.highestVert + this.anchor2.pitch) / 2;\n\t\tif (this.above && this.anchor2.stemDir === \"up\" && !this.fixedY && !beamInterferes && (midPoint < this.startY)) {\n\t\t\tthis.endY = midPoint;\n\t\t\tthis.endX += Math.round(this.anchor2.w / 2); // When going to the middle of the stem, bump the line to the right a little bit to make it look right.\n\t\t} else\n\t\t\tthis.endY = this.above && beamInterferes ? this.anchor2.highestVert : this.anchor2.pitch;\n\n\t\tif (this.anchor1.scalex === 1) { // Need a way to tell if this is a grace note - if so then keep the slur as close as possible. TODO-PER-HACK: this should be more declaratively determined.\n\t\t\tvar hasBeam1 = !!this.anchor1.parent.beam\n\t\t\tvar hasBeam2 = !!this.anchor2.parent.beam\n\t\t\tif (hasBeam1) {\n\t\t\t\tvar isLastInBeam = this.anchor1.parent === this.anchor1.parent.beam.elems[this.anchor1.parent.beam.elems.length-1]\n\t\t\t\tif (!isLastInBeam) {\n\t\t\t\t\t\tif (this.above)\n\t\t\t\t\t\tthis.startY = this.anchor1.parent.fixed.t\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.startY = this.anchor1.parent.fixed.b\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (hasBeam2) {\n\t\t\t\tvar isFirstInBeam = this.anchor2.parent === this.anchor2.parent.beam.elems[0]\n\t\t\t\tif (!isFirstInBeam) {\n\t\t\t\t\tif (this.above)\n\t\t\t\t\t\tthis.endY = this.anchor2.parent.fixed.t\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.endY = this.anchor2.parent.fixed.b\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else if (this.anchor1) {\n\t\tthis.startY = this.endY = this.anchor1.pitch;\n\t} else if (this.anchor2) {\n\t\tthis.startY = this.endY = this.anchor2.pitch;\n\t} else {\n\t\t// This is the case where the slur covers the entire line.\n\t\t// TODO-PER: figure out where the real top and bottom of the line are.\n\t\tthis.startY = this.above ? 14 : 0;\n\t\tthis.endY = this.above ? 14 : 0;\n\t}\n};\n\nTieElem.prototype.avoidCollisionAbove = function () {\n\t// Double check that an interior note in the slur isn't so high that it interferes.\n\tif (this.above) {\n\t\tvar maxInnerHeight = -50;\n\t\tfor (var i = 0; i < this.internalNotes.length; i++) {\n\t\t\tif (this.internalNotes[i].highestVert > maxInnerHeight)\n\t\t\t\tmaxInnerHeight = this.internalNotes[i].highestVert;\n\t\t}\n\t\tif (maxInnerHeight > this.startY && maxInnerHeight > this.endY)\n\t\t\tthis.startY = this.endY = maxInnerHeight - 1;\n\t}\n};\n\nTieElem.prototype.getYBounds = function () {\n\tvar lineStartX = 10 // TODO-PER: I'm not sure where to get this number from but it probably doesn't matter much\n\tvar lineEndX = 1000 // TODO-PER: I'm not sure where to get this number from but it probably doesn't matter much\n\tif (this.isTie) {\n\t\tthis.calcTieDirection();\n\t\tthis.calcX(lineStartX, lineEndX);\n\t\tthis.calcTieY();\n\n\t} else {\n\t\tthis.calcSlurDirection();\n\t\tthis.calcX(lineStartX, lineEndX);\n\t\tthis.calcSlurY();\n\t}\n\tvar top;\n\tvar bottom;\n\t// TODO-PER: It's hard to tell how far the arc is, so I'm just using 3 as the max\n\tif (this.above) {\n\t\tbottom = Math.min(this.startY, this.endY)\n\t\ttop = bottom + 3\n\t} else {\n\t\ttop = Math.min(this.startY, this.endY)\n\t\tbottom = top - 3\n\t}\n\treturn [ top, bottom ]\n};\n\nmodule.exports = TieElem;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3RpZS1lbGVtZW50LmpzIiwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EseUJBQXlCOztBQUV6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLCtCQUErQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxHQUFHO0FBQ0gseURBQXlEO0FBQ3pEO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBLG9CQUFvQjs7QUFFcEI7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQSx3QkFBd0I7QUFDeEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEMsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQsSUFBSTtBQUNKOztBQUVBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwrQkFBK0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvY3JlYXRpb24vZWxlbWVudHMvdGllLWVsZW1lbnQuanM/MTNjNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAgICBhYmNfdGllX2VsZW1lbnQuanM6IERlZmluaXRpb24gb2YgdGhlIFRpZUVsZW1lbnQgY2xhc3MuXG5cbnZhciBUaWVFbGVtID0gZnVuY3Rpb24gVGllRWxlbShvcHRpb25zKSB7XG5cdHRoaXMudHlwZSA9IFwiVGllRWxlbVwiO1xuXHQvL1x0Y29uc29sZS5sb2coXCJjb25zdHJ1Y3RvclwiLCBvcHRpb25zLmFuY2hvcjEgPyBvcHRpb25zLmFuY2hvcjEucGl0Y2ggOiBcIk4vQVwiLCBvcHRpb25zLmFuY2hvcjIgPyBvcHRpb25zLmFuY2hvcjIucGl0Y2ggOiBcIk4vQVwiLCBvcHRpb25zLmlzVGllLCBvcHRpb25zLmlzR3JhY2UpO1xuXHR0aGlzLmFuY2hvcjEgPSBvcHRpb25zLmFuY2hvcjE7IC8vIG11c3QgaGF2ZSBhIC54IGFuZCBhIC5waXRjaCwgYW5kIGEgLnBhcmVudCBwcm9wZXJ0eSBvciBiZSBudWxsIChtZWFucyBzdGFydHMgYXQgdGhlIFwiYmVnaW5uaW5nXCIgb2YgdGhlIGxpbmUgLSBhZnRlciBrZXlzaWcpXG5cdHRoaXMuYW5jaG9yMiA9IG9wdGlvbnMuYW5jaG9yMjsgLy8gbXVzdCBoYXZlIGEgLnggYW5kIGEgLnBpdGNoIHByb3BlcnR5IG9yIGJlIG51bGwgKG1lYW5zIGVuZHMgYXQgdGhlIGVuZCBvZiB0aGUgbGluZSlcblx0aWYgKG9wdGlvbnMuaXNHcmFjZSlcblx0XHR0aGlzLmlzR3JhY2UgPSB0cnVlO1xuXHRpZiAob3B0aW9ucy5maXhlZFkpXG5cdFx0dGhpcy5maXhlZFkgPSB0cnVlO1xuXHRpZiAob3B0aW9ucy5zdGVtRGlyKVxuXHRcdHRoaXMuc3RlbURpciA9IG9wdGlvbnMuc3RlbURpcjtcblx0aWYgKG9wdGlvbnMudm9pY2VOdW1iZXIgIT09IHVuZGVmaW5lZClcblx0XHR0aGlzLnZvaWNlTnVtYmVyID0gb3B0aW9ucy52b2ljZU51bWJlcjtcblx0aWYgKG9wdGlvbnMuc3R5bGUgIT09IHVuZGVmaW5lZClcblx0XHR0aGlzLmRvdHRlZCA9IHRydWU7XG5cdHRoaXMuaW50ZXJuYWxOb3RlcyA9IFtdO1xufTtcblxuVGllRWxlbS5wcm90b3R5cGUuYWRkSW50ZXJuYWxOb3RlID0gZnVuY3Rpb24gKG5vdGUpIHtcblx0dGhpcy5pbnRlcm5hbE5vdGVzLnB1c2gobm90ZSk7XG59O1xuXG5UaWVFbGVtLnByb3RvdHlwZS5zZXRFbmRBbmNob3IgPSBmdW5jdGlvbiAoYW5jaG9yMikge1xuXHQvL1x0Y29uc29sZS5sb2coXCJlbmRcIiwgdGhpcy5hbmNob3IxID8gdGhpcy5hbmNob3IxLnBpdGNoIDogXCJOL0FcIiwgYW5jaG9yMiA/IGFuY2hvcjIucGl0Y2ggOiBcIk4vQVwiLCB0aGlzLmlzVGllLCB0aGlzLmlzR3JhY2UpO1xuXHR0aGlzLmFuY2hvcjIgPSBhbmNob3IyOyAvLyBtdXN0IGhhdmUgYSAueCBhbmQgYSAucGl0Y2ggcHJvcGVydHkgb3IgYmUgbnVsbCAobWVhbnMgZW5kcyBhdCB0aGUgZW5kIG9mIHRoZSBsaW5lKVxuXG5cdC8vIHdlIGRvbid0IHJlYWxseSBoYXZlIGVub3VnaCBpbmZvIHRvIGtub3cgd2hhdCB0aGUgdmVydGljYWwgZXh0ZW50IGlzIHlldCBhbmQgd2Ugd29uJ3QgdW50aWwgZHJhd2luZy4gVGhpcyB3aWxsIGp1c3QgZ2l2ZSBpdCBlbm91Z2hcblx0Ly8gcm9vbSBvbiBlaXRoZXIgc2lkZSAod2UgZG9uJ3QgZXZlbiBrbm93IGlmIHRoZSBzbHVyIHdpbGwgYmUgYWJvdmUgeWV0KS4gV2UgbmVlZCB0byBzZXQgdGhpcyBzbyB0aGF0IHdlIGNhbiBtYWtlIHN1cmUgdGhlIHZvaWNlIGhhc1xuXHQvLyBhdCBsZWFzdCBlbm91Z2ggcm9vbSB0aGF0IHRoZSBsaW5lIGRvZXNuJ3QgZ2V0IGN1dCBvZmYgaWYgdGhlIHRpZSBvciBzbHVyIGlzIHRoZSBsb3dlc3QgdGhpbmcuXG5cdGlmICh0aGlzLmFuY2hvcjEpIHtcblx0XHR0aGlzLnRvcCA9IE1hdGgubWF4KHRoaXMuYW5jaG9yMS5waXRjaCwgdGhpcy5hbmNob3IyLnBpdGNoKSArIDRcblx0XHR0aGlzLmJvdHRvbSA9IE1hdGgubWluKHRoaXMuYW5jaG9yMS5waXRjaCwgdGhpcy5hbmNob3IyLnBpdGNoKSAtIDRcblx0fSBlbHNlIHtcblx0XHR0aGlzLnRvcCA9IHRoaXMuYW5jaG9yMi5waXRjaCArIDRcblx0XHR0aGlzLmJvdHRvbSA9IHRoaXMuYW5jaG9yMi5waXRjaCAtIDRcblx0fVxufTtcblxuLy8gSWYgd2UgZW5jb3VudGVyIGEgcmVwZWF0IHNpZ24sIHRoZW4gd2UgZG9uJ3Qgd2FudCB0byBleHRlbmQgZWl0aGVyIGEgdGllIG9yIGEgc2x1ciBwYXN0IGl0LCBzbyB0aGVzZSBhcmUgY2FsbGVkIHRvIGJlIGEgbGltaXQuXG5UaWVFbGVtLnByb3RvdHlwZS5zZXRTdGFydFggPSBmdW5jdGlvbiAoc3RhcnRMaW1pdEVsZW0pIHtcblx0dGhpcy5zdGFydExpbWl0WCA9IHN0YXJ0TGltaXRFbGVtO1xufTtcblxuVGllRWxlbS5wcm90b3R5cGUuc2V0RW5kWCA9IGZ1bmN0aW9uIChlbmRMaW1pdEVsZW0pIHtcblx0dGhpcy5lbmRMaW1pdFggPSBlbmRMaW1pdEVsZW07XG59O1xuXG5UaWVFbGVtLnByb3RvdHlwZS5zZXRIaW50ID0gZnVuY3Rpb24gKCkge1xuXHR0aGlzLmhpbnQgPSB0cnVlO1xufTtcblxuVGllRWxlbS5wcm90b3R5cGUuY2FsY1RpZURpcmVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0Ly8gVGhlIHJ1bGVzOlxuXHQvLyAxKSBJZiBpdCBpcyBpbiBhIGdyYWNlIG5vdGUgZ3JvdXAsIHRoZW4gdGhlIGRpcmVjdGlvbiBpcyBhbHdheXMgQkVMT1cuXG5cdC8vIDIpIElmIGl0IGlzIGluIGEgc2luZ2xlIHZvaWNlLCB0aGVuIHRoZSBkaXJlY3Rpb24gaXMgYWx3YXlzIE9QUE9TSVRFIG9mIHRoZSBzdGVtIChvciB3aGVyZSB0aGUgc3RlbSB3b3VsZCBoYXZlIGJlZW4gaW4gdGhlIGNhc2Ugb2Ygd2hvbGUgbm90ZXMuKVxuXHQvLyAzKSBJZiB0aGUgc3RlbSBkaXJlY3Rpb24gaXMgZm9yY2VkIChwcm9iYWJseSBiZWNhdXNlIHRoZXJlIGFyZSB0d28gdm9pY2VzIG9uIHRoZSBzYW1lIGxpbmUpLCB0aGVuIHRoZSBkaXJlY3Rpb24gaXMgdGhlIFNBTUUgYXMgdGhlIHN0ZW0gZGlyZWN0aW9uLlxuXG5cdGlmICh0aGlzLmlzR3JhY2UpXG5cdFx0dGhpcy5hYm92ZSA9IGZhbHNlO1xuXHRlbHNlIGlmICh0aGlzLnZvaWNlTnVtYmVyID09PSAwKVxuXHRcdHRoaXMuYWJvdmUgPSB0cnVlO1xuXHRlbHNlIGlmICh0aGlzLnZvaWNlTnVtYmVyID4gMClcblx0XHR0aGlzLmFib3ZlID0gZmFsc2U7XG5cdGVsc2Uge1xuXHRcdHZhciByZWZlcmVuY2VQaXRjaDtcblx0XHRpZiAodGhpcy5hbmNob3IxKVxuXHRcdFx0cmVmZXJlbmNlUGl0Y2ggPSB0aGlzLmFuY2hvcjEucGl0Y2g7XG5cdFx0ZWxzZSBpZiAodGhpcy5hbmNob3IyKVxuXHRcdFx0cmVmZXJlbmNlUGl0Y2ggPSB0aGlzLmFuY2hvcjIucGl0Y2g7XG5cdFx0ZWxzZVxuXHRcdFx0cmVmZXJlbmNlUGl0Y2ggPSAxNDsgLy8gVE9ETy1QRVI6IHRoaXMgY2FuJ3QgcmVhbGx5IGhhcHBlbiBub3JtYWxseS4gVGhpcyB3b3VsZCBpbXBseSB0aGF0IGEgdGllIGNyb3NzZWQgb3ZlciB0aHJlZSBsaW5lcywgc29tZXRoaW5nIGxpa2UgXCJDLVxcbnpcXG5DXCJcblx0XHQvLyBQdXQgdGhlIGFyYyBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uIG9mIHRoZSBzdGVtLiBUaGF0IGlzbid0IGFsd2F5cyB0aGUgcGl0Y2ggaWYgb25lIG9yIGJvdGggb2YgdGhlIG5vdGVzIGFyZSBiZWFtZWQgd2l0aCBzb21ldGhpbmcgdGhhdCBhZmZlY3RzIGl0cyBzdGVtLlxuXHRcdGlmICgodGhpcy5hbmNob3IxICYmIHRoaXMuYW5jaG9yMS5zdGVtRGlyID09PSAnZG93bicpICYmICh0aGlzLmFuY2hvcjIgJiYgdGhpcy5hbmNob3IyLnN0ZW1EaXIgPT09IFwiZG93blwiKSlcblx0XHRcdHRoaXMuYWJvdmUgPSB0cnVlO1xuXHRcdGVsc2UgaWYgKCh0aGlzLmFuY2hvcjEgJiYgdGhpcy5hbmNob3IxLnN0ZW1EaXIgPT09ICd1cCcpICYmICh0aGlzLmFuY2hvcjIgJiYgdGhpcy5hbmNob3IyLnN0ZW1EaXIgPT09IFwidXBcIikpXG5cdFx0XHR0aGlzLmFib3ZlID0gZmFsc2U7XG5cdFx0ZWxzZSBpZiAodGhpcy5hbmNob3IxICYmIHRoaXMuYW5jaG9yMilcblx0XHRcdHRoaXMuYWJvdmUgPSByZWZlcmVuY2VQaXRjaCA+PSA2O1xuXHRcdGVsc2UgaWYgKHRoaXMuYW5jaG9yMSlcblx0XHRcdHRoaXMuYWJvdmUgPSB0aGlzLmFuY2hvcjEuc3RlbURpciA9PT0gXCJkb3duXCI7XG5cdFx0ZWxzZSBpZiAodGhpcy5hbmNob3IyKVxuXHRcdFx0dGhpcy5hYm92ZSA9IHRoaXMuYW5jaG9yMi5zdGVtRGlyID09PSBcImRvd25cIjtcblx0XHRlbHNlXG5cdFx0XHR0aGlzLmFib3ZlID0gcmVmZXJlbmNlUGl0Y2ggPj0gNjtcblx0fVxufTtcblxuLy8gRnJvbSBcInN0YW5kYXJkIG11c2ljIG5vdGF0aW9uIHByYWN0aWNlXCIgYnkgTXVzaWMgUHVibGlzaGVyc+KAmSBBc3NvY2lhdGlvbjpcbi8vIDEpIFNsdXJzIGFyZSBwbGFjZWQgdW5kZXIgdGhlIG5vdGUgaGVhZHMgaWYgYWxsIHN0ZW1zIGdvIHVwLlxuLy8gMikgU2x1cnMgYXJlIHBsYWNlZCBvdmVyIHRoZSBub3RlIGhlYWRzIGlmIGFsbCBzdGVtcyBnbyBkb3duLlxuLy8gMykgSWYgdGhlcmUgYXJlIGJvdGggdXAgc3RlbXMgYW5kIGRvd24gc3RlbXMsIHByZWZlciBwbGFjaW5nIHRoZSBzbHVyIG92ZXIuXG4vLyA0KSBXaGVuIHRoZSBzdGFmZiBoYXMgb3Bwb3NpdGUgc3RlbW1lZCB2b2ljZXMsIGFsbCBzbHVycyBzaG91bGQgYmUgb24gdGhlIHN0ZW1tZWQgc2lkZS5cblxuVGllRWxlbS5wcm90b3R5cGUuY2FsY1NsdXJEaXJlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG5cdGlmICh0aGlzLmlzR3JhY2UpXG5cdFx0dGhpcy5hYm92ZSA9IGZhbHNlO1xuXHRlbHNlIGlmICh0aGlzLnZvaWNlTnVtYmVyID09PSAwKVxuXHRcdHRoaXMuYWJvdmUgPSB0cnVlO1xuXHRlbHNlIGlmICh0aGlzLnZvaWNlTnVtYmVyID4gMClcblx0XHR0aGlzLmFib3ZlID0gZmFsc2U7XG5cdGVsc2Uge1xuXHRcdHZhciBoYXNEb3duU3RlbSA9IGZhbHNlO1xuXHRcdGlmICh0aGlzLmFuY2hvcjEgJiYgdGhpcy5hbmNob3IxLnN0ZW1EaXIgPT09IFwiZG93blwiKVxuXHRcdFx0aGFzRG93blN0ZW0gPSB0cnVlO1xuXHRcdGlmICh0aGlzLmFuY2hvcjIgJiYgdGhpcy5hbmNob3IyLnN0ZW1EaXIgPT09IFwiZG93blwiKVxuXHRcdFx0aGFzRG93blN0ZW0gPSB0cnVlO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pbnRlcm5hbE5vdGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgbiA9IHRoaXMuaW50ZXJuYWxOb3Rlc1tpXTtcblx0XHRcdGlmIChuLnN0ZW1EaXIgPT09IFwiZG93blwiKVxuXHRcdFx0XHRoYXNEb3duU3RlbSA9IHRydWU7XG5cdFx0fVxuXHRcdHRoaXMuYWJvdmUgPSBoYXNEb3duU3RlbTtcblx0fVxufTtcblxuVGllRWxlbS5wcm90b3R5cGUuY2FsY1ggPSBmdW5jdGlvbiAobGluZVN0YXJ0WCwgbGluZUVuZFgpIHtcblx0aWYgKHRoaXMuYW5jaG9yMSkge1xuXHRcdHRoaXMuc3RhcnRYID0gdGhpcy5hbmNob3IxLng7IC8vIFRoZSBub3JtYWwgY2FzZSB3aGVyZSB0aGVyZSBpcyBhIHN0YXJ0aW5nIGVsZW1lbnQgdG8gYXR0YWNoIHRvLlxuXHRcdGlmICh0aGlzLmFuY2hvcjEuc2NhbGV4IDwgMSkgLy8gdGhpcyBpcyBhIGdyYWNlIG5vdGUgLSBkb24ndCBvZmZzZXQgdGhlIHRpZSBhcyBtdWNoLlxuXHRcdFx0dGhpcy5zdGFydFggLT0gMztcblx0fSBlbHNlIGlmICh0aGlzLnN0YXJ0TGltaXRYKVxuXHRcdHRoaXMuc3RhcnRYID0gdGhpcy5zdGFydExpbWl0WC54ICsgdGhpcy5zdGFydExpbWl0WC53OyAvLyBpZiB0aGVyZSBpcyBubyBzdGFydCBlbGVtZW50LCBidXQgdGhlcmUgaXMgYSByZXBlYXQgbWFyayBiZWZvcmUgdGhlIHN0YXJ0IG9mIHRoZSBsaW5lLlxuXHRlbHNlIHtcblx0XHRpZiAodGhpcy5hbmNob3IyKVxuXHRcdFx0dGhpcy5zdGFydFggPSB0aGlzLmFuY2hvcjIueCAtIDIwOyAvLyBUaGVyZSBpcyBubyBlbGVtZW50IGFuZCBubyByZXBlYXQgbWFyazogbWFrZSBhIHNtYWxsIGFyY1xuXHRcdGVsc2Vcblx0XHRcdHRoaXMuc3RhcnRYID0gbGluZVN0YXJ0WDsgLy8gRG9uJ3QgaGF2ZSBhbnkgZ3VpZGFuY2UsIHNvIGV4dGVuZCB0byBiZWdpbm5pbmcgb2YgbGluZVxuXHR9XG5cdGlmICghdGhpcy5hbmNob3IxICYmIHRoaXMuZG90dGVkKVxuXHRcdHRoaXMuc3RhcnRYIC09IDM7IC8vIFRoZSBhcmMgbmVlZHMgdG8gYmUgbG9uZyBlbm91Z2ggdG8gdGVsbCB0aGF0IGl0IGlzIGRvdHRlZC5cblxuXHRpZiAodGhpcy5hbmNob3IyKVxuXHRcdHRoaXMuZW5kWCA9IHRoaXMuYW5jaG9yMi54OyAvLyBUaGUgbm9ybWFsIGNhc2Ugd2hlcmUgdGhlcmUgaXMgYSBzdGFydGluZyBlbGVtZW50IHRvIGF0dGFjaCB0by5cblx0ZWxzZSBpZiAodGhpcy5lbmRMaW1pdFgpXG5cdFx0dGhpcy5lbmRYID0gdGhpcy5lbmRMaW1pdFgueDsgLy8gaWYgdGhlcmUgaXMgbm8gc3RhcnQgZWxlbWVudCwgYnV0IHRoZXJlIGlzIGEgcmVwZWF0IG1hcmsgYmVmb3JlIHRoZSBzdGFydCBvZiB0aGUgbGluZS5cblx0ZWxzZVxuXHRcdHRoaXMuZW5kWCA9IGxpbmVFbmRYOyAvLyBUaGVyZSBpcyBubyBlbGVtZW50IGFuZCBubyByZXBlYXQgbWFyazogZXh0ZW5kIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGxpbmUuXG59O1xuXG5UaWVFbGVtLnByb3RvdHlwZS5jYWxjVGllWSA9IGZ1bmN0aW9uICgpIHtcblx0Ly8gSWYgdGhlIHRpZSBjb21lcyBmcm9tIGFub3RoZXIgbGluZSwgdGhlbiBvbmUgb3IgYm90aCBhbmNob3JzIHdpbGwgYmUgbWlzc2luZy5cblx0aWYgKHRoaXMuYW5jaG9yMSlcblx0XHR0aGlzLnN0YXJ0WSA9IHRoaXMuYW5jaG9yMS5waXRjaDtcblx0ZWxzZSBpZiAodGhpcy5hbmNob3IyKVxuXHRcdHRoaXMuc3RhcnRZID0gdGhpcy5hbmNob3IyLnBpdGNoO1xuXHRlbHNlXG5cdFx0dGhpcy5zdGFydFkgPSB0aGlzLmFib3ZlID8gMTQgOiAwO1xuXG5cdGlmICh0aGlzLmFuY2hvcjIpXG5cdFx0dGhpcy5lbmRZID0gdGhpcy5hbmNob3IyLnBpdGNoO1xuXHRlbHNlIGlmICh0aGlzLmFuY2hvcjEpXG5cdFx0dGhpcy5lbmRZID0gdGhpcy5hbmNob3IxLnBpdGNoO1xuXHRlbHNlXG5cdFx0dGhpcy5lbmRZID0gdGhpcy5hYm92ZSA/IDE0IDogMDtcbn07XG5cbi8vIEZyb20gXCJzdGFuZGFyZCBtdXNpYyBub3RhdGlvbiBwcmFjdGljZVwiIGJ5IE11c2ljIFB1Ymxpc2hlcnPigJkgQXNzb2NpYXRpb246XG4vLyAxKSBJZiB0aGUgYW5jaG9yIG5vdGUgaXMgZG93biBzdGVtLCB0aGUgc2x1ciBwb2ludHMgdG8gdGhlIG5vdGUgaGVhZC5cbi8vIDIpIElmIHRoZSBhbmNob3Igbm90ZSBpcyB1cCBzdGVtLCBhbmQgdGhlIHNsdXIgaXMgb3ZlciwgdGhlbiBwb2ludCB0byBtaWRkbGUgb2Ygc3RlbS5cblxuVGllRWxlbS5wcm90b3R5cGUuY2FsY1NsdXJZID0gZnVuY3Rpb24gKCkge1xuXHRpZiAodGhpcy5hbmNob3IxICYmIHRoaXMuYW5jaG9yMikge1xuXHRcdGlmICh0aGlzLmFib3ZlICYmIHRoaXMuYW5jaG9yMS5zdGVtRGlyID09PSBcInVwXCIgJiYgIXRoaXMuZml4ZWRZKSB7XG5cdFx0XHR0aGlzLnN0YXJ0WSA9ICh0aGlzLmFuY2hvcjEuaGlnaGVzdFZlcnQgKyB0aGlzLmFuY2hvcjEucGl0Y2gpIC8gMjtcblx0XHRcdHRoaXMuc3RhcnRYICs9IHRoaXMuYW5jaG9yMS53IC8gMjsgLy8gV2hlbiBnb2luZyB0byB0aGUgbWlkZGxlIG9mIHRoZSBzdGVtLCBidW1wIHRoZSBsaW5lIHRvIHRoZSByaWdodCBhIGxpdHRsZSBiaXQgdG8gbWFrZSBpdCBsb29rIHJpZ2h0LlxuXHRcdH0gZWxzZVxuXHRcdFx0dGhpcy5zdGFydFkgPSB0aGlzLmFuY2hvcjEucGl0Y2g7XG5cblx0XHQvLyBJZiB0aGUgY2xvc2luZyBub3RlIGhhcyBhbiB1cCBzdGVtLCBhbmQgaXQgaXMgYmVhbWVkLCBhbmQgaXQgaXNuJ3QgdGhlIGZpcnN0IG5vdGUgaW4gdGhlIGJlYW0sIHRoZW4gdGhlIGJlYW0gd2lsbCBnZXQgaW4gdGhlIHdheS5cblx0XHR2YXIgYmVhbUludGVyZmVyZXMgPSB0aGlzLmFuY2hvcjIucGFyZW50LmJlYW0gJiYgdGhpcy5hbmNob3IyLnBhcmVudC5iZWFtLnN0ZW1zVXAgJiYgdGhpcy5hbmNob3IyLnBhcmVudC5iZWFtLmVsZW1zWzBdICE9PSB0aGlzLmFuY2hvcjIucGFyZW50O1xuXHRcdHZhciBtaWRQb2ludCA9ICh0aGlzLmFuY2hvcjIuaGlnaGVzdFZlcnQgKyB0aGlzLmFuY2hvcjIucGl0Y2gpIC8gMjtcblx0XHRpZiAodGhpcy5hYm92ZSAmJiB0aGlzLmFuY2hvcjIuc3RlbURpciA9PT0gXCJ1cFwiICYmICF0aGlzLmZpeGVkWSAmJiAhYmVhbUludGVyZmVyZXMgJiYgKG1pZFBvaW50IDwgdGhpcy5zdGFydFkpKSB7XG5cdFx0XHR0aGlzLmVuZFkgPSBtaWRQb2ludDtcblx0XHRcdHRoaXMuZW5kWCArPSBNYXRoLnJvdW5kKHRoaXMuYW5jaG9yMi53IC8gMik7IC8vIFdoZW4gZ29pbmcgdG8gdGhlIG1pZGRsZSBvZiB0aGUgc3RlbSwgYnVtcCB0aGUgbGluZSB0byB0aGUgcmlnaHQgYSBsaXR0bGUgYml0IHRvIG1ha2UgaXQgbG9vayByaWdodC5cblx0XHR9IGVsc2Vcblx0XHRcdHRoaXMuZW5kWSA9IHRoaXMuYWJvdmUgJiYgYmVhbUludGVyZmVyZXMgPyB0aGlzLmFuY2hvcjIuaGlnaGVzdFZlcnQgOiB0aGlzLmFuY2hvcjIucGl0Y2g7XG5cblx0XHRpZiAodGhpcy5hbmNob3IxLnNjYWxleCA9PT0gMSkgeyAvLyBOZWVkIGEgd2F5IHRvIHRlbGwgaWYgdGhpcyBpcyBhIGdyYWNlIG5vdGUgLSBpZiBzbyB0aGVuIGtlZXAgdGhlIHNsdXIgYXMgY2xvc2UgYXMgcG9zc2libGUuIFRPRE8tUEVSLUhBQ0s6IHRoaXMgc2hvdWxkIGJlIG1vcmUgZGVjbGFyYXRpdmVseSBkZXRlcm1pbmVkLlxuXHRcdFx0dmFyIGhhc0JlYW0xID0gISF0aGlzLmFuY2hvcjEucGFyZW50LmJlYW1cblx0XHRcdHZhciBoYXNCZWFtMiA9ICEhdGhpcy5hbmNob3IyLnBhcmVudC5iZWFtXG5cdFx0XHRpZiAoaGFzQmVhbTEpIHtcblx0XHRcdFx0dmFyIGlzTGFzdEluQmVhbSA9IHRoaXMuYW5jaG9yMS5wYXJlbnQgPT09IHRoaXMuYW5jaG9yMS5wYXJlbnQuYmVhbS5lbGVtc1t0aGlzLmFuY2hvcjEucGFyZW50LmJlYW0uZWxlbXMubGVuZ3RoLTFdXG5cdFx0XHRcdGlmICghaXNMYXN0SW5CZWFtKSB7XG5cdFx0XHRcdFx0XHRpZiAodGhpcy5hYm92ZSlcblx0XHRcdFx0XHRcdHRoaXMuc3RhcnRZID0gdGhpcy5hbmNob3IxLnBhcmVudC5maXhlZC50XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0dGhpcy5zdGFydFkgPSB0aGlzLmFuY2hvcjEucGFyZW50LmZpeGVkLmJcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoaGFzQmVhbTIpIHtcblx0XHRcdFx0dmFyIGlzRmlyc3RJbkJlYW0gPSB0aGlzLmFuY2hvcjIucGFyZW50ID09PSB0aGlzLmFuY2hvcjIucGFyZW50LmJlYW0uZWxlbXNbMF1cblx0XHRcdFx0aWYgKCFpc0ZpcnN0SW5CZWFtKSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuYWJvdmUpXG5cdFx0XHRcdFx0XHR0aGlzLmVuZFkgPSB0aGlzLmFuY2hvcjIucGFyZW50LmZpeGVkLnRcblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHR0aGlzLmVuZFkgPSB0aGlzLmFuY2hvcjIucGFyZW50LmZpeGVkLmJcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSBlbHNlIGlmICh0aGlzLmFuY2hvcjEpIHtcblx0XHR0aGlzLnN0YXJ0WSA9IHRoaXMuZW5kWSA9IHRoaXMuYW5jaG9yMS5waXRjaDtcblx0fSBlbHNlIGlmICh0aGlzLmFuY2hvcjIpIHtcblx0XHR0aGlzLnN0YXJ0WSA9IHRoaXMuZW5kWSA9IHRoaXMuYW5jaG9yMi5waXRjaDtcblx0fSBlbHNlIHtcblx0XHQvLyBUaGlzIGlzIHRoZSBjYXNlIHdoZXJlIHRoZSBzbHVyIGNvdmVycyB0aGUgZW50aXJlIGxpbmUuXG5cdFx0Ly8gVE9ETy1QRVI6IGZpZ3VyZSBvdXQgd2hlcmUgdGhlIHJlYWwgdG9wIGFuZCBib3R0b20gb2YgdGhlIGxpbmUgYXJlLlxuXHRcdHRoaXMuc3RhcnRZID0gdGhpcy5hYm92ZSA/IDE0IDogMDtcblx0XHR0aGlzLmVuZFkgPSB0aGlzLmFib3ZlID8gMTQgOiAwO1xuXHR9XG59O1xuXG5UaWVFbGVtLnByb3RvdHlwZS5hdm9pZENvbGxpc2lvbkFib3ZlID0gZnVuY3Rpb24gKCkge1xuXHQvLyBEb3VibGUgY2hlY2sgdGhhdCBhbiBpbnRlcmlvciBub3RlIGluIHRoZSBzbHVyIGlzbid0IHNvIGhpZ2ggdGhhdCBpdCBpbnRlcmZlcmVzLlxuXHRpZiAodGhpcy5hYm92ZSkge1xuXHRcdHZhciBtYXhJbm5lckhlaWdodCA9IC01MDtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaW50ZXJuYWxOb3Rlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKHRoaXMuaW50ZXJuYWxOb3Rlc1tpXS5oaWdoZXN0VmVydCA+IG1heElubmVySGVpZ2h0KVxuXHRcdFx0XHRtYXhJbm5lckhlaWdodCA9IHRoaXMuaW50ZXJuYWxOb3Rlc1tpXS5oaWdoZXN0VmVydDtcblx0XHR9XG5cdFx0aWYgKG1heElubmVySGVpZ2h0ID4gdGhpcy5zdGFydFkgJiYgbWF4SW5uZXJIZWlnaHQgPiB0aGlzLmVuZFkpXG5cdFx0XHR0aGlzLnN0YXJ0WSA9IHRoaXMuZW5kWSA9IG1heElubmVySGVpZ2h0IC0gMTtcblx0fVxufTtcblxuVGllRWxlbS5wcm90b3R5cGUuZ2V0WUJvdW5kcyA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIGxpbmVTdGFydFggPSAxMCAvLyBUT0RPLVBFUjogSSdtIG5vdCBzdXJlIHdoZXJlIHRvIGdldCB0aGlzIG51bWJlciBmcm9tIGJ1dCBpdCBwcm9iYWJseSBkb2Vzbid0IG1hdHRlciBtdWNoXG5cdHZhciBsaW5lRW5kWCA9IDEwMDAgLy8gVE9ETy1QRVI6IEknbSBub3Qgc3VyZSB3aGVyZSB0byBnZXQgdGhpcyBudW1iZXIgZnJvbSBidXQgaXQgcHJvYmFibHkgZG9lc24ndCBtYXR0ZXIgbXVjaFxuXHRpZiAodGhpcy5pc1RpZSkge1xuXHRcdHRoaXMuY2FsY1RpZURpcmVjdGlvbigpO1xuXHRcdHRoaXMuY2FsY1gobGluZVN0YXJ0WCwgbGluZUVuZFgpO1xuXHRcdHRoaXMuY2FsY1RpZVkoKTtcblxuXHR9IGVsc2Uge1xuXHRcdHRoaXMuY2FsY1NsdXJEaXJlY3Rpb24oKTtcblx0XHR0aGlzLmNhbGNYKGxpbmVTdGFydFgsIGxpbmVFbmRYKTtcblx0XHR0aGlzLmNhbGNTbHVyWSgpO1xuXHR9XG5cdHZhciB0b3A7XG5cdHZhciBib3R0b207XG5cdC8vIFRPRE8tUEVSOiBJdCdzIGhhcmQgdG8gdGVsbCBob3cgZmFyIHRoZSBhcmMgaXMsIHNvIEknbSBqdXN0IHVzaW5nIDMgYXMgdGhlIG1heFxuXHRpZiAodGhpcy5hYm92ZSkge1xuXHRcdGJvdHRvbSA9IE1hdGgubWluKHRoaXMuc3RhcnRZLCB0aGlzLmVuZFkpXG5cdFx0dG9wID0gYm90dG9tICsgM1xuXHR9IGVsc2Uge1xuXHRcdHRvcCA9IE1hdGgubWluKHRoaXMuc3RhcnRZLCB0aGlzLmVuZFkpXG5cdFx0Ym90dG9tID0gdG9wIC0gM1xuXHR9XG5cdHJldHVybiBbIHRvcCwgYm90dG9tIF1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVGllRWxlbTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/tie-element.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/top-text.js":
/*!********************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/top-text.js ***!
  \********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const addTextIf = __webpack_require__(/*! ../add-text-if */ \"(ssr)/./node_modules/abcjs/src/write/creation/add-text-if.js\");\nconst richText = __webpack_require__(/*! ./rich-text */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/rich-text.js\");\n\nfunction TopText(metaText, metaTextInfo, formatting, lines, width, isPrint, paddingLeft, spacing, shouldAddClasses, getTextSize) {\n\tthis.rows = [];\n\n\tif (metaText.header && isPrint) {\n\t\t// Note: whether there is a header or not doesn't change any other positioning, so this doesn't change the Y-coordinate.\n\t\t// This text goes above the margin, so we'll temporarily move up.\n\t\tvar headerTextHeight = getTextSize.calc(\"X\", \"headerfont\", 'abcjs-header abcjs-meta-top').height;\n\t\taddTextIf(this.rows, { marginLeft: paddingLeft, text: metaText.header.left, font: 'headerfont', klass: 'header meta-top', marginTop: -headerTextHeight, info: metaTextInfo.header, name: \"header\" }, getTextSize);\n\t\taddTextIf(this.rows, { marginLeft: paddingLeft + width / 2, text: metaText.header.center, font: 'headerfont', klass: 'header meta-top', marginTop: -headerTextHeight, anchor: 'middle', info: metaTextInfo.header, name: \"header\" }, getTextSize);\n\t\taddTextIf(this.rows, { marginLeft: paddingLeft + width, text: metaText.header.right, font: 'headerfont', klass: 'header meta-top', marginTop: -headerTextHeight, anchor: 'end', info: metaTextInfo.header, name: \"header\" }, getTextSize);\n\n\t\t//\t\tTopText.prototype.addTextIf = function (marginLeft, text, font, klass, marginTop, marginBottom, anchor, getTextSize, absElemType, noMove) {\n\t}\n\tif (isPrint)\n\t\tthis.rows.push({ move: spacing.top });\n\tvar tAnchor = formatting.titleleft ? 'start' : 'middle';\n\tvar tLeft = formatting.titleleft ? paddingLeft : paddingLeft + width / 2;\n\tif (metaText.title) {\n\t\tvar klass = shouldAddClasses ? 'abcjs-title' : ''\n\t\trichText(this.rows, metaText.title, \"titlefont\", klass, 'title', tLeft, {marginTop: spacing.title, anchor: tAnchor, absElemType: \"title\", info: metaTextInfo.title},  getTextSize)\n\t}\n\tif (lines.length) {\n\t\tvar index = 0;\n\t\twhile (index < lines.length && lines[index].subtitle) {\n\t\t\tvar klass = shouldAddClasses ? 'abcjs-text abcjs-subtitle' : ''\n\t\t\trichText(this.rows, lines[index].subtitle.text, \"subtitlefont\", klass, 'subtitle', tLeft, {marginTop: spacing.subtitle, anchor: tAnchor, absElemType: \"subtitle\", info: lines[index].subtitle},  getTextSize)\n\t\t\tindex++;\n\t\t}\n\t}\n\n\tif (metaText.rhythm || metaText.origin || metaText.composer) {\n\t\tthis.rows.push({ move: spacing.composer });\n\t\tif (metaText.rhythm && metaText.rhythm.length > 0) {\n\t\t\tvar noMove = !!(metaText.composer || metaText.origin);\n\t\t\tvar klass = shouldAddClasses ? 'abcjs-rhythm' : ''\n\t\t\taddTextIf(this.rows, { marginLeft: paddingLeft, text: metaText.rhythm, font: 'infofont', klass: klass, absElemType: \"rhythm\", noMove: noMove, info: metaTextInfo.rhythm, name: \"rhythm\" }, getTextSize);\n\t\t}\n\t\tvar hasSimpleComposerLine = true\n\t\tif (metaText.composer && typeof metaText.composer !== 'string')\n\t\t\thasSimpleComposerLine = false\n\t\tif (metaText.origin && typeof metaText.origin !== 'string')\n\t\t\thasSimpleComposerLine = false\n\t\t\t\n\t\tvar composerLine = metaText.composer ? metaText.composer : '';\n\t\tif (metaText.origin) {\n\t\t\tif (typeof composerLine === 'string' && typeof metaText.origin === 'string')\n\t\t\t\tcomposerLine += ' (' + metaText.origin + ')';\n\t\t\telse if (typeof composerLine === 'string' && typeof metaText.origin !== 'string') {\n\t\t\t\tcomposerLine = [{text:composerLine}]\n\t\t\t\tcomposerLine.push({text:\" (\"})\n\t\t\t\tcomposerLine = composerLine.concat(metaText.origin)\n\t\t\t\tcomposerLine.push({text:\")\"})\n\t\t\t} else {\n\t\t\t\tcomposerLine.push({text:\" (\"})\n\t\t\t\tcomposerLine = composerLine.concat(metaText.origin)\n\t\t\t\tcomposerLine.push({text:\")\"})\n\t\t\t}\n\t\t}\n\t\tif (composerLine) {\n\t\t\tvar klass = shouldAddClasses ? 'abcjs-composer' : ''\n\t\t\trichText(this.rows, composerLine, 'composerfont', klass, \"composer\", paddingLeft+width, {anchor: \"end\", absElemType: \"composer\", info: metaTextInfo.composer, ingroup: true}, getTextSize)\n\t\t}\n\t}\n\n\tif (metaText.author && metaText.author.length > 0) {\n\t\tvar klass = shouldAddClasses ? 'abcjs-author' : ''\n\t\trichText(this.rows, metaText.author, 'composerfont', klass, \"author\", paddingLeft+width, {anchor: \"end\", absElemType: \"author\", info: metaTextInfo.author}, getTextSize)\n\t}\n\n\tif (metaText.partOrder && metaText.partOrder.length > 0) {\n\t\tvar klass = shouldAddClasses ? 'abcjs-part-order' : ''\n\t\trichText(this.rows, metaText.partOrder, 'partsfont', klass, \"part-order\", paddingLeft, {absElemType: \"partOrder\", info: metaTextInfo.partOrder, anchor: 'start'}, getTextSize)\n\n\t}\n}\n\nmodule.exports = TopText;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3RvcC10ZXh0LmpzIiwibWFwcGluZ3MiOiJBQUFBLGtCQUFrQixtQkFBTyxDQUFDLG9GQUFnQjtBQUMxQyxpQkFBaUIsbUJBQU8sQ0FBQyx3RkFBYTs7QUFFdEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw0S0FBNEs7QUFDck0seUJBQXlCLDRNQUE0TTtBQUNyTyx5QkFBeUIsb01BQW9NOztBQUU3TjtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsbUJBQW1CO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLDBGQUEwRjtBQUNySztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEZBQThGLG1HQUFtRztBQUNqTTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUIsd0JBQXdCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixrS0FBa0s7QUFDNUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGtCQUFrQjtBQUN2Qyx1QkFBdUIsVUFBVTtBQUNqQztBQUNBLHVCQUF1QixTQUFTO0FBQ2hDLEtBQUs7QUFDTCx1QkFBdUIsVUFBVTtBQUNqQztBQUNBLHVCQUF1QixTQUFTO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEZBQTRGLG1GQUFtRjtBQUMvSztBQUNBOztBQUVBO0FBQ0E7QUFDQSw0RkFBNEYsZ0VBQWdFO0FBQzVKOztBQUVBO0FBQ0E7QUFDQSwwRkFBMEYsd0VBQXdFOztBQUVsSztBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3RvcC10ZXh0LmpzP2E5MjYiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYWRkVGV4dElmID0gcmVxdWlyZShcIi4uL2FkZC10ZXh0LWlmXCIpO1xuY29uc3QgcmljaFRleHQgPSByZXF1aXJlKFwiLi9yaWNoLXRleHRcIik7XG5cbmZ1bmN0aW9uIFRvcFRleHQobWV0YVRleHQsIG1ldGFUZXh0SW5mbywgZm9ybWF0dGluZywgbGluZXMsIHdpZHRoLCBpc1ByaW50LCBwYWRkaW5nTGVmdCwgc3BhY2luZywgc2hvdWxkQWRkQ2xhc3NlcywgZ2V0VGV4dFNpemUpIHtcblx0dGhpcy5yb3dzID0gW107XG5cblx0aWYgKG1ldGFUZXh0LmhlYWRlciAmJiBpc1ByaW50KSB7XG5cdFx0Ly8gTm90ZTogd2hldGhlciB0aGVyZSBpcyBhIGhlYWRlciBvciBub3QgZG9lc24ndCBjaGFuZ2UgYW55IG90aGVyIHBvc2l0aW9uaW5nLCBzbyB0aGlzIGRvZXNuJ3QgY2hhbmdlIHRoZSBZLWNvb3JkaW5hdGUuXG5cdFx0Ly8gVGhpcyB0ZXh0IGdvZXMgYWJvdmUgdGhlIG1hcmdpbiwgc28gd2UnbGwgdGVtcG9yYXJpbHkgbW92ZSB1cC5cblx0XHR2YXIgaGVhZGVyVGV4dEhlaWdodCA9IGdldFRleHRTaXplLmNhbGMoXCJYXCIsIFwiaGVhZGVyZm9udFwiLCAnYWJjanMtaGVhZGVyIGFiY2pzLW1ldGEtdG9wJykuaGVpZ2h0O1xuXHRcdGFkZFRleHRJZih0aGlzLnJvd3MsIHsgbWFyZ2luTGVmdDogcGFkZGluZ0xlZnQsIHRleHQ6IG1ldGFUZXh0LmhlYWRlci5sZWZ0LCBmb250OiAnaGVhZGVyZm9udCcsIGtsYXNzOiAnaGVhZGVyIG1ldGEtdG9wJywgbWFyZ2luVG9wOiAtaGVhZGVyVGV4dEhlaWdodCwgaW5mbzogbWV0YVRleHRJbmZvLmhlYWRlciwgbmFtZTogXCJoZWFkZXJcIiB9LCBnZXRUZXh0U2l6ZSk7XG5cdFx0YWRkVGV4dElmKHRoaXMucm93cywgeyBtYXJnaW5MZWZ0OiBwYWRkaW5nTGVmdCArIHdpZHRoIC8gMiwgdGV4dDogbWV0YVRleHQuaGVhZGVyLmNlbnRlciwgZm9udDogJ2hlYWRlcmZvbnQnLCBrbGFzczogJ2hlYWRlciBtZXRhLXRvcCcsIG1hcmdpblRvcDogLWhlYWRlclRleHRIZWlnaHQsIGFuY2hvcjogJ21pZGRsZScsIGluZm86IG1ldGFUZXh0SW5mby5oZWFkZXIsIG5hbWU6IFwiaGVhZGVyXCIgfSwgZ2V0VGV4dFNpemUpO1xuXHRcdGFkZFRleHRJZih0aGlzLnJvd3MsIHsgbWFyZ2luTGVmdDogcGFkZGluZ0xlZnQgKyB3aWR0aCwgdGV4dDogbWV0YVRleHQuaGVhZGVyLnJpZ2h0LCBmb250OiAnaGVhZGVyZm9udCcsIGtsYXNzOiAnaGVhZGVyIG1ldGEtdG9wJywgbWFyZ2luVG9wOiAtaGVhZGVyVGV4dEhlaWdodCwgYW5jaG9yOiAnZW5kJywgaW5mbzogbWV0YVRleHRJbmZvLmhlYWRlciwgbmFtZTogXCJoZWFkZXJcIiB9LCBnZXRUZXh0U2l6ZSk7XG5cblx0XHQvL1x0XHRUb3BUZXh0LnByb3RvdHlwZS5hZGRUZXh0SWYgPSBmdW5jdGlvbiAobWFyZ2luTGVmdCwgdGV4dCwgZm9udCwga2xhc3MsIG1hcmdpblRvcCwgbWFyZ2luQm90dG9tLCBhbmNob3IsIGdldFRleHRTaXplLCBhYnNFbGVtVHlwZSwgbm9Nb3ZlKSB7XG5cdH1cblx0aWYgKGlzUHJpbnQpXG5cdFx0dGhpcy5yb3dzLnB1c2goeyBtb3ZlOiBzcGFjaW5nLnRvcCB9KTtcblx0dmFyIHRBbmNob3IgPSBmb3JtYXR0aW5nLnRpdGxlbGVmdCA/ICdzdGFydCcgOiAnbWlkZGxlJztcblx0dmFyIHRMZWZ0ID0gZm9ybWF0dGluZy50aXRsZWxlZnQgPyBwYWRkaW5nTGVmdCA6IHBhZGRpbmdMZWZ0ICsgd2lkdGggLyAyO1xuXHRpZiAobWV0YVRleHQudGl0bGUpIHtcblx0XHR2YXIga2xhc3MgPSBzaG91bGRBZGRDbGFzc2VzID8gJ2FiY2pzLXRpdGxlJyA6ICcnXG5cdFx0cmljaFRleHQodGhpcy5yb3dzLCBtZXRhVGV4dC50aXRsZSwgXCJ0aXRsZWZvbnRcIiwga2xhc3MsICd0aXRsZScsIHRMZWZ0LCB7bWFyZ2luVG9wOiBzcGFjaW5nLnRpdGxlLCBhbmNob3I6IHRBbmNob3IsIGFic0VsZW1UeXBlOiBcInRpdGxlXCIsIGluZm86IG1ldGFUZXh0SW5mby50aXRsZX0sICBnZXRUZXh0U2l6ZSlcblx0fVxuXHRpZiAobGluZXMubGVuZ3RoKSB7XG5cdFx0dmFyIGluZGV4ID0gMDtcblx0XHR3aGlsZSAoaW5kZXggPCBsaW5lcy5sZW5ndGggJiYgbGluZXNbaW5kZXhdLnN1YnRpdGxlKSB7XG5cdFx0XHR2YXIga2xhc3MgPSBzaG91bGRBZGRDbGFzc2VzID8gJ2FiY2pzLXRleHQgYWJjanMtc3VidGl0bGUnIDogJydcblx0XHRcdHJpY2hUZXh0KHRoaXMucm93cywgbGluZXNbaW5kZXhdLnN1YnRpdGxlLnRleHQsIFwic3VidGl0bGVmb250XCIsIGtsYXNzLCAnc3VidGl0bGUnLCB0TGVmdCwge21hcmdpblRvcDogc3BhY2luZy5zdWJ0aXRsZSwgYW5jaG9yOiB0QW5jaG9yLCBhYnNFbGVtVHlwZTogXCJzdWJ0aXRsZVwiLCBpbmZvOiBsaW5lc1tpbmRleF0uc3VidGl0bGV9LCAgZ2V0VGV4dFNpemUpXG5cdFx0XHRpbmRleCsrO1xuXHRcdH1cblx0fVxuXG5cdGlmIChtZXRhVGV4dC5yaHl0aG0gfHwgbWV0YVRleHQub3JpZ2luIHx8IG1ldGFUZXh0LmNvbXBvc2VyKSB7XG5cdFx0dGhpcy5yb3dzLnB1c2goeyBtb3ZlOiBzcGFjaW5nLmNvbXBvc2VyIH0pO1xuXHRcdGlmIChtZXRhVGV4dC5yaHl0aG0gJiYgbWV0YVRleHQucmh5dGhtLmxlbmd0aCA+IDApIHtcblx0XHRcdHZhciBub01vdmUgPSAhIShtZXRhVGV4dC5jb21wb3NlciB8fCBtZXRhVGV4dC5vcmlnaW4pO1xuXHRcdFx0dmFyIGtsYXNzID0gc2hvdWxkQWRkQ2xhc3NlcyA/ICdhYmNqcy1yaHl0aG0nIDogJydcblx0XHRcdGFkZFRleHRJZih0aGlzLnJvd3MsIHsgbWFyZ2luTGVmdDogcGFkZGluZ0xlZnQsIHRleHQ6IG1ldGFUZXh0LnJoeXRobSwgZm9udDogJ2luZm9mb250Jywga2xhc3M6IGtsYXNzLCBhYnNFbGVtVHlwZTogXCJyaHl0aG1cIiwgbm9Nb3ZlOiBub01vdmUsIGluZm86IG1ldGFUZXh0SW5mby5yaHl0aG0sIG5hbWU6IFwicmh5dGhtXCIgfSwgZ2V0VGV4dFNpemUpO1xuXHRcdH1cblx0XHR2YXIgaGFzU2ltcGxlQ29tcG9zZXJMaW5lID0gdHJ1ZVxuXHRcdGlmIChtZXRhVGV4dC5jb21wb3NlciAmJiB0eXBlb2YgbWV0YVRleHQuY29tcG9zZXIgIT09ICdzdHJpbmcnKVxuXHRcdFx0aGFzU2ltcGxlQ29tcG9zZXJMaW5lID0gZmFsc2Vcblx0XHRpZiAobWV0YVRleHQub3JpZ2luICYmIHR5cGVvZiBtZXRhVGV4dC5vcmlnaW4gIT09ICdzdHJpbmcnKVxuXHRcdFx0aGFzU2ltcGxlQ29tcG9zZXJMaW5lID0gZmFsc2Vcblx0XHRcdFxuXHRcdHZhciBjb21wb3NlckxpbmUgPSBtZXRhVGV4dC5jb21wb3NlciA/IG1ldGFUZXh0LmNvbXBvc2VyIDogJyc7XG5cdFx0aWYgKG1ldGFUZXh0Lm9yaWdpbikge1xuXHRcdFx0aWYgKHR5cGVvZiBjb21wb3NlckxpbmUgPT09ICdzdHJpbmcnICYmIHR5cGVvZiBtZXRhVGV4dC5vcmlnaW4gPT09ICdzdHJpbmcnKVxuXHRcdFx0XHRjb21wb3NlckxpbmUgKz0gJyAoJyArIG1ldGFUZXh0Lm9yaWdpbiArICcpJztcblx0XHRcdGVsc2UgaWYgKHR5cGVvZiBjb21wb3NlckxpbmUgPT09ICdzdHJpbmcnICYmIHR5cGVvZiBtZXRhVGV4dC5vcmlnaW4gIT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdGNvbXBvc2VyTGluZSA9IFt7dGV4dDpjb21wb3NlckxpbmV9XVxuXHRcdFx0XHRjb21wb3NlckxpbmUucHVzaCh7dGV4dDpcIiAoXCJ9KVxuXHRcdFx0XHRjb21wb3NlckxpbmUgPSBjb21wb3NlckxpbmUuY29uY2F0KG1ldGFUZXh0Lm9yaWdpbilcblx0XHRcdFx0Y29tcG9zZXJMaW5lLnB1c2goe3RleHQ6XCIpXCJ9KVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29tcG9zZXJMaW5lLnB1c2goe3RleHQ6XCIgKFwifSlcblx0XHRcdFx0Y29tcG9zZXJMaW5lID0gY29tcG9zZXJMaW5lLmNvbmNhdChtZXRhVGV4dC5vcmlnaW4pXG5cdFx0XHRcdGNvbXBvc2VyTGluZS5wdXNoKHt0ZXh0OlwiKVwifSlcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKGNvbXBvc2VyTGluZSkge1xuXHRcdFx0dmFyIGtsYXNzID0gc2hvdWxkQWRkQ2xhc3NlcyA/ICdhYmNqcy1jb21wb3NlcicgOiAnJ1xuXHRcdFx0cmljaFRleHQodGhpcy5yb3dzLCBjb21wb3NlckxpbmUsICdjb21wb3NlcmZvbnQnLCBrbGFzcywgXCJjb21wb3NlclwiLCBwYWRkaW5nTGVmdCt3aWR0aCwge2FuY2hvcjogXCJlbmRcIiwgYWJzRWxlbVR5cGU6IFwiY29tcG9zZXJcIiwgaW5mbzogbWV0YVRleHRJbmZvLmNvbXBvc2VyLCBpbmdyb3VwOiB0cnVlfSwgZ2V0VGV4dFNpemUpXG5cdFx0fVxuXHR9XG5cblx0aWYgKG1ldGFUZXh0LmF1dGhvciAmJiBtZXRhVGV4dC5hdXRob3IubGVuZ3RoID4gMCkge1xuXHRcdHZhciBrbGFzcyA9IHNob3VsZEFkZENsYXNzZXMgPyAnYWJjanMtYXV0aG9yJyA6ICcnXG5cdFx0cmljaFRleHQodGhpcy5yb3dzLCBtZXRhVGV4dC5hdXRob3IsICdjb21wb3NlcmZvbnQnLCBrbGFzcywgXCJhdXRob3JcIiwgcGFkZGluZ0xlZnQrd2lkdGgsIHthbmNob3I6IFwiZW5kXCIsIGFic0VsZW1UeXBlOiBcImF1dGhvclwiLCBpbmZvOiBtZXRhVGV4dEluZm8uYXV0aG9yfSwgZ2V0VGV4dFNpemUpXG5cdH1cblxuXHRpZiAobWV0YVRleHQucGFydE9yZGVyICYmIG1ldGFUZXh0LnBhcnRPcmRlci5sZW5ndGggPiAwKSB7XG5cdFx0dmFyIGtsYXNzID0gc2hvdWxkQWRkQ2xhc3NlcyA/ICdhYmNqcy1wYXJ0LW9yZGVyJyA6ICcnXG5cdFx0cmljaFRleHQodGhpcy5yb3dzLCBtZXRhVGV4dC5wYXJ0T3JkZXIsICdwYXJ0c2ZvbnQnLCBrbGFzcywgXCJwYXJ0LW9yZGVyXCIsIHBhZGRpbmdMZWZ0LCB7YWJzRWxlbVR5cGU6IFwicGFydE9yZGVyXCIsIGluZm86IG1ldGFUZXh0SW5mby5wYXJ0T3JkZXIsIGFuY2hvcjogJ3N0YXJ0J30sIGdldFRleHRTaXplKVxuXG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBUb3BUZXh0O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/top-text.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/triplet-element.js":
/*!***************************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/triplet-element.js ***!
  \***************************************************************************/
/***/ ((module) => {

eval("//    abc_triplet_element.js: Definition of the TripletElem class.\n\nvar TripletElem = function TripletElem(number, anchor1, options) {\n\tthis.type = \"TripletElem\";\n\tthis.anchor1 = anchor1; // must have a .x and a .parent property or be null (means starts at the \"beginning\" of the line - after key signature)\n\tthis.number = number;\n\tthis.durationClass = ('d' + (Math.round(anchor1.parent.durationClass * 1000) / 1000)).replace(/\\./, '-');\n\tthis.middleElems = []; // This is to calculate the highest interior pitch. It is used to make sure that the drawn bracket never crosses a really high middle note.\n\tthis.flatBeams = options.flatBeams;\n};\n\nTripletElem.prototype.isClosed = function () {\n\treturn !!this.anchor2;\n};\n\nTripletElem.prototype.middleNote = function (elem) {\n\tthis.middleElems.push(elem);\n};\n\nTripletElem.prototype.setCloseAnchor = function (anchor2) {\n\tthis.anchor2 = anchor2;\n\t// TODO-PER: This used to be just for beamed triplets but it looks like bracketed triplets need extra room, too. The only one that doesn't is stem down and beamed\n\t//if (this.anchor1.parent.beam)\n\tif (!this.anchor1.parent.beam || this.anchor1.stemDir === 'up')\n\t\tthis.endingHeightAbove = 4;\n};\n\nmodule.exports = TripletElem;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3RyaXBsZXQtZWxlbWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3RyaXBsZXQtZWxlbWVudC5qcz83MmQ5Il0sInNvdXJjZXNDb250ZW50IjpbIi8vICAgIGFiY190cmlwbGV0X2VsZW1lbnQuanM6IERlZmluaXRpb24gb2YgdGhlIFRyaXBsZXRFbGVtIGNsYXNzLlxuXG52YXIgVHJpcGxldEVsZW0gPSBmdW5jdGlvbiBUcmlwbGV0RWxlbShudW1iZXIsIGFuY2hvcjEsIG9wdGlvbnMpIHtcblx0dGhpcy50eXBlID0gXCJUcmlwbGV0RWxlbVwiO1xuXHR0aGlzLmFuY2hvcjEgPSBhbmNob3IxOyAvLyBtdXN0IGhhdmUgYSAueCBhbmQgYSAucGFyZW50IHByb3BlcnR5IG9yIGJlIG51bGwgKG1lYW5zIHN0YXJ0cyBhdCB0aGUgXCJiZWdpbm5pbmdcIiBvZiB0aGUgbGluZSAtIGFmdGVyIGtleSBzaWduYXR1cmUpXG5cdHRoaXMubnVtYmVyID0gbnVtYmVyO1xuXHR0aGlzLmR1cmF0aW9uQ2xhc3MgPSAoJ2QnICsgKE1hdGgucm91bmQoYW5jaG9yMS5wYXJlbnQuZHVyYXRpb25DbGFzcyAqIDEwMDApIC8gMTAwMCkpLnJlcGxhY2UoL1xcLi8sICctJyk7XG5cdHRoaXMubWlkZGxlRWxlbXMgPSBbXTsgLy8gVGhpcyBpcyB0byBjYWxjdWxhdGUgdGhlIGhpZ2hlc3QgaW50ZXJpb3IgcGl0Y2guIEl0IGlzIHVzZWQgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGRyYXduIGJyYWNrZXQgbmV2ZXIgY3Jvc3NlcyBhIHJlYWxseSBoaWdoIG1pZGRsZSBub3RlLlxuXHR0aGlzLmZsYXRCZWFtcyA9IG9wdGlvbnMuZmxhdEJlYW1zO1xufTtcblxuVHJpcGxldEVsZW0ucHJvdG90eXBlLmlzQ2xvc2VkID0gZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gISF0aGlzLmFuY2hvcjI7XG59O1xuXG5UcmlwbGV0RWxlbS5wcm90b3R5cGUubWlkZGxlTm90ZSA9IGZ1bmN0aW9uIChlbGVtKSB7XG5cdHRoaXMubWlkZGxlRWxlbXMucHVzaChlbGVtKTtcbn07XG5cblRyaXBsZXRFbGVtLnByb3RvdHlwZS5zZXRDbG9zZUFuY2hvciA9IGZ1bmN0aW9uIChhbmNob3IyKSB7XG5cdHRoaXMuYW5jaG9yMiA9IGFuY2hvcjI7XG5cdC8vIFRPRE8tUEVSOiBUaGlzIHVzZWQgdG8gYmUganVzdCBmb3IgYmVhbWVkIHRyaXBsZXRzIGJ1dCBpdCBsb29rcyBsaWtlIGJyYWNrZXRlZCB0cmlwbGV0cyBuZWVkIGV4dHJhIHJvb20sIHRvby4gVGhlIG9ubHkgb25lIHRoYXQgZG9lc24ndCBpcyBzdGVtIGRvd24gYW5kIGJlYW1lZFxuXHQvL2lmICh0aGlzLmFuY2hvcjEucGFyZW50LmJlYW0pXG5cdGlmICghdGhpcy5hbmNob3IxLnBhcmVudC5iZWFtIHx8IHRoaXMuYW5jaG9yMS5zdGVtRGlyID09PSAndXAnKVxuXHRcdHRoaXMuZW5kaW5nSGVpZ2h0QWJvdmUgPSA0O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBUcmlwbGV0RWxlbTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/triplet-element.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/elements/voice-element.js":
/*!*************************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/elements/voice-element.js ***!
  \*************************************************************************/
/***/ ((module) => {

eval("//    abc_voice_element.js: Definition of the VoiceElement class.\n\nvar VoiceElement = function VoiceElement(voicenumber, voicetotal) {\n\tthis.children = [];\n\tthis.beams = [];\n\tthis.otherchildren = []; // ties, slurs, triplets\n\tthis.w = 0;\n\tthis.duplicate = false;\n\tthis.voicenumber = voicenumber; //number of the voice on a given stave (not staffgroup)\n\tthis.voicetotal = voicetotal;\n\tthis.bottom = 7;\n\tthis.top = 7;\n\tthis.specialY = {\n\t\ttempoHeightAbove: 0,\n\t\tpartHeightAbove: 0,\n\t\tvolumeHeightAbove: 0,\n\t\tdynamicHeightAbove: 0,\n\t\tendingHeightAbove: 0,\n\t\tchordHeightAbove: 0,\n\t\tlyricHeightAbove: 0,\n\n\t\tlyricHeightBelow: 0,\n\t\tchordHeightBelow: 0,\n\t\tvolumeHeightBelow: 0,\n\t\tdynamicHeightBelow: 0\n\t};\n};\n\nVoiceElement.prototype.addChild = function (absElem) {\n\t// This is always passed an AbsoluteElement\n\tif (absElem.type === 'bar') {\n\t\tvar firstItem = true;\n\t\tfor (var i = 0; firstItem && i < this.children.length; i++) {\n\t\t\tif (this.children[i].type.indexOf(\"staff-extra\") < 0 && this.children[i].type !== \"tempo\")\n\t\t\t\tfirstItem = false;\n\t\t}\n\t\tif (!firstItem) {\n\t\t\tthis.beams.push(\"bar\");\n\t\t\tthis.otherchildren.push(\"bar\");\n\t\t}\n\t}\n\tthis.children[this.children.length] = absElem;\n\tthis.setRange(absElem);\n};\n\nVoiceElement.prototype.setLimit = function (member, child) {\n\t// Sometimes we get an absolute element in here and sometimes we get some type of relative element.\n\t// If there is a \"specialY\" element, then assume it is an absolute element. If that doesn't exist, look for the\n\t// same members at the top level, because that's where they are in relative elements.\n\tvar specialY = child.specialY;\n\tif (!specialY) specialY = child;\n\tif (!specialY[member]) return;\n\tif (!this.specialY[member])\n\t\tthis.specialY[member] = specialY[member];\n\telse\n\t\tthis.specialY[member] = Math.max(this.specialY[member], specialY[member]);\n};\n\nVoiceElement.prototype.adjustRange = function (child) {\n\tif (child.bottom !== undefined)\n\t\tthis.bottom = Math.min(this.bottom, child.bottom);\n\tif (child.top !== undefined)\n\t\tthis.top = Math.max(this.top, child.top);\n};\n\nVoiceElement.prototype.setRange = function (child) {\n\tthis.adjustRange(child);\n\tthis.setLimit('tempoHeightAbove', child);\n\tthis.setLimit('partHeightAbove', child);\n\tthis.setLimit('volumeHeightAbove', child);\n\tthis.setLimit('dynamicHeightAbove', child);\n\tthis.setLimit('endingHeightAbove', child);\n\tthis.setLimit('chordHeightAbove', child);\n\tthis.setLimit('lyricHeightAbove', child);\n\tthis.setLimit('lyricHeightBelow', child);\n\tthis.setLimit('chordHeightBelow', child);\n\tthis.setLimit('volumeHeightBelow', child);\n\tthis.setLimit('dynamicHeightBelow', child);\n};\n\nVoiceElement.prototype.addOther = function (child) {\n\tthis.otherchildren.push(child);\n\tthis.setRange(child);\n};\n\nVoiceElement.prototype.addBeam = function (child) {\n\tthis.beams.push(child);\n};\n\nVoiceElement.prototype.setWidth = function (width) {\n\tthis.w = width;\n};\n\nmodule.exports = VoiceElement;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2VsZW1lbnRzL3ZvaWNlLWVsZW1lbnQuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdUNBQXVDO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvY3JlYXRpb24vZWxlbWVudHMvdm9pY2UtZWxlbWVudC5qcz8zMjkwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vICAgIGFiY192b2ljZV9lbGVtZW50LmpzOiBEZWZpbml0aW9uIG9mIHRoZSBWb2ljZUVsZW1lbnQgY2xhc3MuXG5cbnZhciBWb2ljZUVsZW1lbnQgPSBmdW5jdGlvbiBWb2ljZUVsZW1lbnQodm9pY2VudW1iZXIsIHZvaWNldG90YWwpIHtcblx0dGhpcy5jaGlsZHJlbiA9IFtdO1xuXHR0aGlzLmJlYW1zID0gW107XG5cdHRoaXMub3RoZXJjaGlsZHJlbiA9IFtdOyAvLyB0aWVzLCBzbHVycywgdHJpcGxldHNcblx0dGhpcy53ID0gMDtcblx0dGhpcy5kdXBsaWNhdGUgPSBmYWxzZTtcblx0dGhpcy52b2ljZW51bWJlciA9IHZvaWNlbnVtYmVyOyAvL251bWJlciBvZiB0aGUgdm9pY2Ugb24gYSBnaXZlbiBzdGF2ZSAobm90IHN0YWZmZ3JvdXApXG5cdHRoaXMudm9pY2V0b3RhbCA9IHZvaWNldG90YWw7XG5cdHRoaXMuYm90dG9tID0gNztcblx0dGhpcy50b3AgPSA3O1xuXHR0aGlzLnNwZWNpYWxZID0ge1xuXHRcdHRlbXBvSGVpZ2h0QWJvdmU6IDAsXG5cdFx0cGFydEhlaWdodEFib3ZlOiAwLFxuXHRcdHZvbHVtZUhlaWdodEFib3ZlOiAwLFxuXHRcdGR5bmFtaWNIZWlnaHRBYm92ZTogMCxcblx0XHRlbmRpbmdIZWlnaHRBYm92ZTogMCxcblx0XHRjaG9yZEhlaWdodEFib3ZlOiAwLFxuXHRcdGx5cmljSGVpZ2h0QWJvdmU6IDAsXG5cblx0XHRseXJpY0hlaWdodEJlbG93OiAwLFxuXHRcdGNob3JkSGVpZ2h0QmVsb3c6IDAsXG5cdFx0dm9sdW1lSGVpZ2h0QmVsb3c6IDAsXG5cdFx0ZHluYW1pY0hlaWdodEJlbG93OiAwXG5cdH07XG59O1xuXG5Wb2ljZUVsZW1lbnQucHJvdG90eXBlLmFkZENoaWxkID0gZnVuY3Rpb24gKGFic0VsZW0pIHtcblx0Ly8gVGhpcyBpcyBhbHdheXMgcGFzc2VkIGFuIEFic29sdXRlRWxlbWVudFxuXHRpZiAoYWJzRWxlbS50eXBlID09PSAnYmFyJykge1xuXHRcdHZhciBmaXJzdEl0ZW0gPSB0cnVlO1xuXHRcdGZvciAodmFyIGkgPSAwOyBmaXJzdEl0ZW0gJiYgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmICh0aGlzLmNoaWxkcmVuW2ldLnR5cGUuaW5kZXhPZihcInN0YWZmLWV4dHJhXCIpIDwgMCAmJiB0aGlzLmNoaWxkcmVuW2ldLnR5cGUgIT09IFwidGVtcG9cIilcblx0XHRcdFx0Zmlyc3RJdGVtID0gZmFsc2U7XG5cdFx0fVxuXHRcdGlmICghZmlyc3RJdGVtKSB7XG5cdFx0XHR0aGlzLmJlYW1zLnB1c2goXCJiYXJcIik7XG5cdFx0XHR0aGlzLm90aGVyY2hpbGRyZW4ucHVzaChcImJhclwiKTtcblx0XHR9XG5cdH1cblx0dGhpcy5jaGlsZHJlblt0aGlzLmNoaWxkcmVuLmxlbmd0aF0gPSBhYnNFbGVtO1xuXHR0aGlzLnNldFJhbmdlKGFic0VsZW0pO1xufTtcblxuVm9pY2VFbGVtZW50LnByb3RvdHlwZS5zZXRMaW1pdCA9IGZ1bmN0aW9uIChtZW1iZXIsIGNoaWxkKSB7XG5cdC8vIFNvbWV0aW1lcyB3ZSBnZXQgYW4gYWJzb2x1dGUgZWxlbWVudCBpbiBoZXJlIGFuZCBzb21ldGltZXMgd2UgZ2V0IHNvbWUgdHlwZSBvZiByZWxhdGl2ZSBlbGVtZW50LlxuXHQvLyBJZiB0aGVyZSBpcyBhIFwic3BlY2lhbFlcIiBlbGVtZW50LCB0aGVuIGFzc3VtZSBpdCBpcyBhbiBhYnNvbHV0ZSBlbGVtZW50LiBJZiB0aGF0IGRvZXNuJ3QgZXhpc3QsIGxvb2sgZm9yIHRoZVxuXHQvLyBzYW1lIG1lbWJlcnMgYXQgdGhlIHRvcCBsZXZlbCwgYmVjYXVzZSB0aGF0J3Mgd2hlcmUgdGhleSBhcmUgaW4gcmVsYXRpdmUgZWxlbWVudHMuXG5cdHZhciBzcGVjaWFsWSA9IGNoaWxkLnNwZWNpYWxZO1xuXHRpZiAoIXNwZWNpYWxZKSBzcGVjaWFsWSA9IGNoaWxkO1xuXHRpZiAoIXNwZWNpYWxZW21lbWJlcl0pIHJldHVybjtcblx0aWYgKCF0aGlzLnNwZWNpYWxZW21lbWJlcl0pXG5cdFx0dGhpcy5zcGVjaWFsWVttZW1iZXJdID0gc3BlY2lhbFlbbWVtYmVyXTtcblx0ZWxzZVxuXHRcdHRoaXMuc3BlY2lhbFlbbWVtYmVyXSA9IE1hdGgubWF4KHRoaXMuc3BlY2lhbFlbbWVtYmVyXSwgc3BlY2lhbFlbbWVtYmVyXSk7XG59O1xuXG5Wb2ljZUVsZW1lbnQucHJvdG90eXBlLmFkanVzdFJhbmdlID0gZnVuY3Rpb24gKGNoaWxkKSB7XG5cdGlmIChjaGlsZC5ib3R0b20gIT09IHVuZGVmaW5lZClcblx0XHR0aGlzLmJvdHRvbSA9IE1hdGgubWluKHRoaXMuYm90dG9tLCBjaGlsZC5ib3R0b20pO1xuXHRpZiAoY2hpbGQudG9wICE9PSB1bmRlZmluZWQpXG5cdFx0dGhpcy50b3AgPSBNYXRoLm1heCh0aGlzLnRvcCwgY2hpbGQudG9wKTtcbn07XG5cblZvaWNlRWxlbWVudC5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoY2hpbGQpIHtcblx0dGhpcy5hZGp1c3RSYW5nZShjaGlsZCk7XG5cdHRoaXMuc2V0TGltaXQoJ3RlbXBvSGVpZ2h0QWJvdmUnLCBjaGlsZCk7XG5cdHRoaXMuc2V0TGltaXQoJ3BhcnRIZWlnaHRBYm92ZScsIGNoaWxkKTtcblx0dGhpcy5zZXRMaW1pdCgndm9sdW1lSGVpZ2h0QWJvdmUnLCBjaGlsZCk7XG5cdHRoaXMuc2V0TGltaXQoJ2R5bmFtaWNIZWlnaHRBYm92ZScsIGNoaWxkKTtcblx0dGhpcy5zZXRMaW1pdCgnZW5kaW5nSGVpZ2h0QWJvdmUnLCBjaGlsZCk7XG5cdHRoaXMuc2V0TGltaXQoJ2Nob3JkSGVpZ2h0QWJvdmUnLCBjaGlsZCk7XG5cdHRoaXMuc2V0TGltaXQoJ2x5cmljSGVpZ2h0QWJvdmUnLCBjaGlsZCk7XG5cdHRoaXMuc2V0TGltaXQoJ2x5cmljSGVpZ2h0QmVsb3cnLCBjaGlsZCk7XG5cdHRoaXMuc2V0TGltaXQoJ2Nob3JkSGVpZ2h0QmVsb3cnLCBjaGlsZCk7XG5cdHRoaXMuc2V0TGltaXQoJ3ZvbHVtZUhlaWdodEJlbG93JywgY2hpbGQpO1xuXHR0aGlzLnNldExpbWl0KCdkeW5hbWljSGVpZ2h0QmVsb3cnLCBjaGlsZCk7XG59O1xuXG5Wb2ljZUVsZW1lbnQucHJvdG90eXBlLmFkZE90aGVyID0gZnVuY3Rpb24gKGNoaWxkKSB7XG5cdHRoaXMub3RoZXJjaGlsZHJlbi5wdXNoKGNoaWxkKTtcblx0dGhpcy5zZXRSYW5nZShjaGlsZCk7XG59O1xuXG5Wb2ljZUVsZW1lbnQucHJvdG90eXBlLmFkZEJlYW0gPSBmdW5jdGlvbiAoY2hpbGQpIHtcblx0dGhpcy5iZWFtcy5wdXNoKGNoaWxkKTtcbn07XG5cblZvaWNlRWxlbWVudC5wcm90b3R5cGUuc2V0V2lkdGggPSBmdW5jdGlvbiAod2lkdGgpIHtcblx0dGhpcy53ID0gd2lkdGg7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZvaWNlRWxlbWVudDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/elements/voice-element.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/glyphs.js":
/*!*********************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/glyphs.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var spacing = __webpack_require__(/*! ../helpers/spacing */ \"(ssr)/./node_modules/abcjs/src/write/helpers/spacing.js\");\n\n/**\n * Glyphs and some methods to adjust for their x and y baseline\n */\nvar glyphs =\n{\n\t'0': { d: [['M', 4.83, -14.97], ['c', 0.33, -0.03, 1.11, 0.00, 1.47, 0.06], ['c', 1.68, 0.36, 2.97, 1.59, 3.78, 3.60], ['c', 1.20, 2.97, 0.81, 6.96, -0.90, 9.27], ['c', -0.78, 1.08, -1.71, 1.71, -2.91, 1.95], ['c', -0.45, 0.09, -1.32, 0.09, -1.77, 0.00], ['c', -0.81, -0.18, -1.47, -0.51, -2.07, -1.02], ['c', -2.34, -2.07, -3.15, -6.72, -1.74, -10.20], ['c', 0.87, -2.16, 2.28, -3.42, 4.14, -3.66], ['z'], ['m', 1.11, 0.87], ['c', -0.21, -0.06, -0.69, -0.09, -0.87, -0.06], ['c', -0.54, 0.12, -0.87, 0.42, -1.17, 0.99], ['c', -0.36, 0.66, -0.51, 1.56, -0.60, 3.00], ['c', -0.03, 0.75, -0.03, 4.59, 0.00, 5.31], ['c', 0.09, 1.50, 0.27, 2.40, 0.60, 3.06], ['c', 0.24, 0.48, 0.57, 0.78, 0.96, 0.90], ['c', 0.27, 0.09, 0.78, 0.09, 1.05, 0.00], ['c', 0.39, -0.12, 0.72, -0.42, 0.96, -0.90], ['c', 0.33, -0.66, 0.51, -1.56, 0.60, -3.06], ['c', 0.03, -0.72, 0.03, -4.56, 0.00, -5.31], ['c', -0.09, -1.47, -0.27, -2.37, -0.60, -3.03], ['c', -0.24, -0.48, -0.54, -0.78, -0.93, -0.90], ['z']], w: 10.78, h: 14.959 },\n\t'1': { d: [['M', 3.30, -15.06], ['c', 0.06, -0.06, 0.21, -0.03, 0.66, 0.15], ['c', 0.81, 0.39, 1.08, 0.39, 1.83, 0.03], ['c', 0.21, -0.09, 0.39, -0.15, 0.42, -0.15], ['c', 0.12, 0.00, 0.21, 0.09, 0.27, 0.21], ['c', 0.06, 0.12, 0.06, 0.33, 0.06, 5.94], ['c', 0.00, 3.93, 0.00, 5.85, 0.03, 6.03], ['c', 0.06, 0.36, 0.15, 0.69, 0.27, 0.96], ['c', 0.36, 0.75, 0.93, 1.17, 1.68, 1.26], ['c', 0.30, 0.03, 0.39, 0.09, 0.39, 0.30], ['c', 0.00, 0.15, -0.03, 0.18, -0.09, 0.24], ['c', -0.06, 0.06, -0.09, 0.06, -0.48, 0.06], ['c', -0.42, 0.00, -0.69, -0.03, -2.10, -0.24], ['c', -0.90, -0.15, -1.77, -0.15, -2.67, 0.00], ['c', -1.41, 0.21, -1.68, 0.24, -2.10, 0.24], ['c', -0.39, 0.00, -0.42, 0.00, -0.48, -0.06], ['c', -0.06, -0.06, -0.06, -0.09, -0.06, -0.24], ['c', 0.00, -0.21, 0.06, -0.27, 0.36, -0.30], ['c', 0.75, -0.09, 1.32, -0.51, 1.68, -1.26], ['c', 0.12, -0.27, 0.21, -0.60, 0.27, -0.96], ['c', 0.03, -0.18, 0.03, -1.59, 0.03, -4.29], ['c', 0.00, -3.87, 0.00, -4.05, -0.06, -4.14], ['c', -0.09, -0.15, -0.18, -0.24, -0.39, -0.24], ['c', -0.12, 0.00, -0.15, 0.03, -0.21, 0.06], ['c', -0.03, 0.06, -0.45, 0.99, -0.96, 2.13], ['c', -0.48, 1.14, -0.90, 2.10, -0.93, 2.16], ['c', -0.06, 0.15, -0.21, 0.24, -0.33, 0.24], ['c', -0.24, 0.00, -0.42, -0.18, -0.42, -0.39], ['c', 0.00, -0.06, 3.27, -7.62, 3.33, -7.74], ['z']], w: 8.94, h: 15.058 },\n\t'2': { d: [['M', 4.23, -14.97], ['c', 0.57, -0.06, 1.68, 0.00, 2.34, 0.18], ['c', 0.69, 0.18, 1.50, 0.54, 2.01, 0.90], ['c', 1.35, 0.96, 1.95, 2.25, 1.77, 3.81], ['c', -0.15, 1.35, -0.66, 2.34, -1.68, 3.15], ['c', -0.60, 0.48, -1.44, 0.93, -3.12, 1.65], ['c', -1.32, 0.57, -1.80, 0.81, -2.37, 1.14], ['c', -0.57, 0.33, -0.57, 0.33, -0.24, 0.27], ['c', 0.39, -0.09, 1.26, -0.09, 1.68, 0.00], ['c', 0.72, 0.15, 1.41, 0.45, 2.10, 0.90], ['c', 0.99, 0.63, 1.86, 0.87, 2.55, 0.75], ['c', 0.24, -0.06, 0.42, -0.15, 0.57, -0.30], ['c', 0.12, -0.09, 0.30, -0.42, 0.30, -0.51], ['c', 0.00, -0.09, 0.12, -0.21, 0.24, -0.24], ['c', 0.18, -0.03, 0.39, 0.12, 0.39, 0.30], ['c', 0.00, 0.12, -0.15, 0.57, -0.30, 0.87], ['c', -0.54, 1.02, -1.56, 1.74, -2.79, 2.01], ['c', -0.42, 0.09, -1.23, 0.09, -1.62, 0.03], ['c', -0.81, -0.18, -1.32, -0.45, -2.01, -1.11], ['c', -0.45, -0.45, -0.63, -0.57, -0.96, -0.69], ['c', -0.84, -0.27, -1.89, 0.12, -2.25, 0.90], ['c', -0.12, 0.21, -0.21, 0.54, -0.21, 0.72], ['c', 0.00, 0.12, -0.12, 0.21, -0.27, 0.24], ['c', -0.15, 0.00, -0.27, -0.03, -0.33, -0.15], ['c', -0.09, -0.21, 0.09, -1.08, 0.33, -1.71], ['c', 0.24, -0.66, 0.66, -1.26, 1.29, -1.89], ['c', 0.45, -0.45, 0.90, -0.81, 1.92, -1.56], ['c', 1.29, -0.93, 1.89, -1.44, 2.34, -1.98], ['c', 0.87, -1.05, 1.26, -2.19, 1.20, -3.63], ['c', -0.06, -1.29, -0.39, -2.31, -0.96, -2.91], ['c', -0.36, -0.33, -0.72, -0.51, -1.17, -0.54], ['c', -0.84, -0.03, -1.53, 0.42, -1.59, 1.05], ['c', -0.03, 0.33, 0.12, 0.60, 0.57, 1.14], ['c', 0.45, 0.54, 0.54, 0.87, 0.42, 1.41], ['c', -0.15, 0.63, -0.54, 1.11, -1.08, 1.38], ['c', -0.63, 0.33, -1.20, 0.33, -1.83, 0.00], ['c', -0.24, -0.12, -0.33, -0.18, -0.54, -0.39], ['c', -0.18, -0.18, -0.27, -0.30, -0.36, -0.51], ['c', -0.24, -0.45, -0.27, -0.84, -0.21, -1.38], ['c', 0.12, -0.75, 0.45, -1.41, 1.02, -1.98], ['c', 0.72, -0.72, 1.74, -1.17, 2.85, -1.32], ['z']], w: 10.764, h: 14.97 },\n\t'3': { d: [['M', 3.78, -14.97], ['c', 0.30, -0.03, 1.41, 0.00, 1.83, 0.06], ['c', 2.22, 0.30, 3.51, 1.32, 3.72, 2.91], ['c', 0.03, 0.33, 0.03, 1.26, -0.03, 1.65], ['c', -0.12, 0.84, -0.48, 1.47, -1.05, 1.77], ['c', -0.27, 0.15, -0.36, 0.24, -0.45, 0.39], ['c', -0.09, 0.21, -0.09, 0.36, 0.00, 0.57], ['c', 0.09, 0.15, 0.18, 0.24, 0.51, 0.39], ['c', 0.75, 0.42, 1.23, 1.14, 1.41, 2.13], ['c', 0.06, 0.42, 0.06, 1.35, 0.00, 1.71], ['c', -0.18, 0.81, -0.48, 1.38, -1.02, 1.95], ['c', -0.75, 0.72, -1.80, 1.20, -3.18, 1.38], ['c', -0.42, 0.06, -1.56, 0.06, -1.95, 0.00], ['c', -1.89, -0.33, -3.18, -1.29, -3.51, -2.64], ['c', -0.03, -0.12, -0.03, -0.33, -0.03, -0.60], ['c', 0.00, -0.36, 0.00, -0.42, 0.06, -0.63], ['c', 0.12, -0.30, 0.27, -0.51, 0.51, -0.75], ['c', 0.24, -0.24, 0.45, -0.39, 0.75, -0.51], ['c', 0.21, -0.06, 0.27, -0.06, 0.60, -0.06], ['c', 0.33, 0.00, 0.39, 0.00, 0.60, 0.06], ['c', 0.30, 0.12, 0.51, 0.27, 0.75, 0.51], ['c', 0.36, 0.33, 0.57, 0.75, 0.60, 1.20], ['c', 0.00, 0.21, 0.00, 0.27, -0.06, 0.42], ['c', -0.09, 0.18, -0.12, 0.24, -0.54, 0.54], ['c', -0.51, 0.36, -0.63, 0.54, -0.60, 0.87], ['c', 0.06, 0.54, 0.54, 0.90, 1.38, 0.99], ['c', 0.36, 0.06, 0.72, 0.03, 0.96, -0.06], ['c', 0.81, -0.27, 1.29, -1.23, 1.44, -2.79], ['c', 0.03, -0.45, 0.03, -1.95, -0.03, -2.37], ['c', -0.09, -0.75, -0.33, -1.23, -0.75, -1.44], ['c', -0.33, -0.18, -0.45, -0.18, -1.98, -0.18], ['c', -1.35, 0.00, -1.41, 0.00, -1.50, -0.06], ['c', -0.18, -0.12, -0.24, -0.39, -0.12, -0.60], ['c', 0.12, -0.15, 0.15, -0.15, 1.68, -0.15], ['c', 1.50, 0.00, 1.62, 0.00, 1.89, -0.15], ['c', 0.18, -0.09, 0.42, -0.36, 0.54, -0.57], ['c', 0.18, -0.42, 0.27, -0.90, 0.30, -1.95], ['c', 0.03, -1.20, -0.06, -1.80, -0.36, -2.37], ['c', -0.24, -0.48, -0.63, -0.81, -1.14, -0.96], ['c', -0.30, -0.06, -1.08, -0.06, -1.38, 0.03], ['c', -0.60, 0.15, -0.90, 0.42, -0.96, 0.84], ['c', -0.03, 0.30, 0.06, 0.45, 0.63, 0.84], ['c', 0.33, 0.24, 0.42, 0.39, 0.45, 0.63], ['c', 0.03, 0.72, -0.57, 1.50, -1.32, 1.65], ['c', -1.05, 0.27, -2.10, -0.57, -2.10, -1.65], ['c', 0.00, -0.45, 0.15, -0.96, 0.39, -1.38], ['c', 0.12, -0.21, 0.54, -0.63, 0.81, -0.81], ['c', 0.57, -0.42, 1.38, -0.69, 2.25, -0.81], ['z']], w: 9.735, h: 14.967 },\n\t'4': { d: [['M', 8.64, -14.94], ['c', 0.27, -0.09, 0.42, -0.12, 0.54, -0.03], ['c', 0.09, 0.06, 0.15, 0.21, 0.15, 0.30], ['c', -0.03, 0.06, -1.92, 2.31, -4.23, 5.04], ['c', -2.31, 2.73, -4.23, 4.98, -4.26, 5.01], ['c', -0.03, 0.06, 0.12, 0.06, 2.55, 0.06], ['l', 2.61, 0.00], ['l', 0.00, -2.37], ['c', 0.00, -2.19, 0.03, -2.37, 0.06, -2.46], ['c', 0.03, -0.06, 0.21, -0.18, 0.57, -0.42], ['c', 1.08, -0.72, 1.38, -1.08, 1.86, -2.16], ['c', 0.12, -0.30, 0.24, -0.54, 0.27, -0.57], ['c', 0.12, -0.12, 0.39, -0.06, 0.45, 0.12], ['c', 0.06, 0.09, 0.06, 0.57, 0.06, 3.96], ['l', 0.00, 3.90], ['l', 1.08, 0.00], ['c', 1.05, 0.00, 1.11, 0.00, 1.20, 0.06], ['c', 0.24, 0.15, 0.24, 0.54, 0.00, 0.69], ['c', -0.09, 0.06, -0.15, 0.06, -1.20, 0.06], ['l', -1.08, 0.00], ['l', 0.00, 0.33], ['c', 0.00, 0.57, 0.09, 1.11, 0.30, 1.53], ['c', 0.36, 0.75, 0.93, 1.17, 1.68, 1.26], ['c', 0.30, 0.03, 0.39, 0.09, 0.39, 0.30], ['c', 0.00, 0.15, -0.03, 0.18, -0.09, 0.24], ['c', -0.06, 0.06, -0.09, 0.06, -0.48, 0.06], ['c', -0.42, 0.00, -0.69, -0.03, -2.10, -0.24], ['c', -0.90, -0.15, -1.77, -0.15, -2.67, 0.00], ['c', -1.41, 0.21, -1.68, 0.24, -2.10, 0.24], ['c', -0.39, 0.00, -0.42, 0.00, -0.48, -0.06], ['c', -0.06, -0.06, -0.06, -0.09, -0.06, -0.24], ['c', 0.00, -0.21, 0.06, -0.27, 0.36, -0.30], ['c', 0.75, -0.09, 1.32, -0.51, 1.68, -1.26], ['c', 0.21, -0.42, 0.30, -0.96, 0.30, -1.53], ['l', 0.00, -0.33], ['l', -2.70, 0.00], ['c', -2.91, 0.00, -2.85, 0.00, -3.09, -0.15], ['c', -0.18, -0.12, -0.30, -0.39, -0.27, -0.54], ['c', 0.03, -0.06, 0.18, -0.24, 0.33, -0.45], ['c', 0.75, -0.90, 1.59, -2.07, 2.13, -3.03], ['c', 0.33, -0.54, 0.84, -1.62, 1.05, -2.16], ['c', 0.57, -1.41, 0.84, -2.64, 0.90, -4.05], ['c', 0.03, -0.63, 0.06, -0.72, 0.24, -0.81], ['l', 0.12, -0.06], ['l', 0.45, 0.12], ['c', 0.66, 0.18, 1.02, 0.24, 1.47, 0.27], ['c', 0.60, 0.03, 1.23, -0.09, 2.01, -0.33], ['z']], w: 11.795, h: 14.994 },\n\t'5': { d: [['M', 1.02, -14.94], ['c', 0.12, -0.09, 0.03, -0.09, 1.08, 0.06], ['c', 2.49, 0.36, 4.35, 0.36, 6.96, -0.06], ['c', 0.57, -0.09, 0.66, -0.06, 0.81, 0.06], ['c', 0.15, 0.18, 0.12, 0.24, -0.15, 0.51], ['c', -1.29, 1.26, -3.24, 2.04, -5.58, 2.31], ['c', -0.60, 0.09, -1.20, 0.12, -1.71, 0.12], ['c', -0.39, 0.00, -0.45, 0.00, -0.57, 0.06], ['c', -0.09, 0.06, -0.15, 0.12, -0.21, 0.21], ['l', -0.06, 0.12], ['l', 0.00, 1.65], ['l', 0.00, 1.65], ['l', 0.21, -0.21], ['c', 0.66, -0.57, 1.41, -0.96, 2.19, -1.14], ['c', 0.33, -0.06, 1.41, -0.06, 1.95, 0.00], ['c', 2.61, 0.36, 4.02, 1.74, 4.26, 4.14], ['c', 0.03, 0.45, 0.03, 1.08, -0.03, 1.44], ['c', -0.18, 1.02, -0.78, 2.01, -1.59, 2.70], ['c', -0.72, 0.57, -1.62, 1.02, -2.49, 1.20], ['c', -1.38, 0.27, -3.03, 0.06, -4.20, -0.54], ['c', -1.08, -0.54, -1.71, -1.32, -1.86, -2.28], ['c', -0.09, -0.69, 0.09, -1.29, 0.57, -1.74], ['c', 0.24, -0.24, 0.45, -0.39, 0.75, -0.51], ['c', 0.21, -0.06, 0.27, -0.06, 0.60, -0.06], ['c', 0.33, 0.00, 0.39, 0.00, 0.60, 0.06], ['c', 0.30, 0.12, 0.51, 0.27, 0.75, 0.51], ['c', 0.36, 0.33, 0.57, 0.75, 0.60, 1.20], ['c', 0.00, 0.21, 0.00, 0.27, -0.06, 0.42], ['c', -0.09, 0.18, -0.12, 0.24, -0.54, 0.54], ['c', -0.18, 0.12, -0.36, 0.30, -0.42, 0.33], ['c', -0.36, 0.42, -0.18, 0.99, 0.36, 1.26], ['c', 0.51, 0.27, 1.47, 0.36, 2.01, 0.27], ['c', 0.93, -0.21, 1.47, -1.17, 1.65, -2.91], ['c', 0.06, -0.45, 0.06, -1.89, 0.00, -2.31], ['c', -0.15, -1.20, -0.51, -2.10, -1.05, -2.55], ['c', -0.21, -0.18, -0.54, -0.36, -0.81, -0.39], ['c', -0.30, -0.06, -0.84, -0.03, -1.26, 0.06], ['c', -0.93, 0.18, -1.65, 0.60, -2.16, 1.20], ['c', -0.15, 0.21, -0.27, 0.30, -0.39, 0.30], ['c', -0.15, 0.00, -0.30, -0.09, -0.36, -0.18], ['c', -0.06, -0.09, -0.06, -0.15, -0.06, -3.66], ['c', 0.00, -3.39, 0.00, -3.57, 0.06, -3.66], ['c', 0.03, -0.06, 0.09, -0.15, 0.15, -0.18], ['z']], w: 10.212, h: 14.997 },\n\t'6': { d: [['M', 4.98, -14.97], ['c', 0.36, -0.03, 1.20, 0.00, 1.59, 0.06], ['c', 0.90, 0.15, 1.68, 0.51, 2.25, 1.05], ['c', 0.57, 0.51, 0.87, 1.23, 0.84, 1.98], ['c', -0.03, 0.51, -0.21, 0.90, -0.60, 1.26], ['c', -0.24, 0.24, -0.45, 0.39, -0.75, 0.51], ['c', -0.21, 0.06, -0.27, 0.06, -0.60, 0.06], ['c', -0.33, 0.00, -0.39, 0.00, -0.60, -0.06], ['c', -0.30, -0.12, -0.51, -0.27, -0.75, -0.51], ['c', -0.39, -0.36, -0.57, -0.78, -0.57, -1.26], ['c', 0.00, -0.27, 0.00, -0.30, 0.09, -0.42], ['c', 0.03, -0.09, 0.18, -0.21, 0.30, -0.30], ['c', 0.12, -0.09, 0.30, -0.21, 0.39, -0.27], ['c', 0.09, -0.06, 0.21, -0.18, 0.27, -0.24], ['c', 0.06, -0.12, 0.09, -0.15, 0.09, -0.33], ['c', 0.00, -0.18, -0.03, -0.24, -0.09, -0.36], ['c', -0.24, -0.39, -0.75, -0.60, -1.38, -0.57], ['c', -0.54, 0.03, -0.90, 0.18, -1.23, 0.48], ['c', -0.81, 0.72, -1.08, 2.16, -0.96, 5.37], ['l', 0.00, 0.63], ['l', 0.30, -0.12], ['c', 0.78, -0.27, 1.29, -0.33, 2.10, -0.27], ['c', 1.47, 0.12, 2.49, 0.54, 3.27, 1.29], ['c', 0.48, 0.51, 0.81, 1.11, 0.96, 1.89], ['c', 0.06, 0.27, 0.06, 0.42, 0.06, 0.93], ['c', 0.00, 0.54, 0.00, 0.69, -0.06, 0.96], ['c', -0.15, 0.78, -0.48, 1.38, -0.96, 1.89], ['c', -0.54, 0.51, -1.17, 0.87, -1.98, 1.08], ['c', -1.14, 0.30, -2.40, 0.33, -3.24, 0.03], ['c', -1.50, -0.48, -2.64, -1.89, -3.27, -4.02], ['c', -0.36, -1.23, -0.51, -2.82, -0.42, -4.08], ['c', 0.30, -3.66, 2.28, -6.30, 4.95, -6.66], ['z'], ['m', 0.66, 7.41], ['c', -0.27, -0.09, -0.81, -0.12, -1.08, -0.06], ['c', -0.72, 0.18, -1.08, 0.69, -1.23, 1.71], ['c', -0.06, 0.54, -0.06, 3.00, 0.00, 3.54], ['c', 0.18, 1.26, 0.72, 1.77, 1.80, 1.74], ['c', 0.39, -0.03, 0.63, -0.09, 0.90, -0.27], ['c', 0.66, -0.42, 0.90, -1.32, 0.90, -3.24], ['c', 0.00, -2.22, -0.36, -3.12, -1.29, -3.42], ['z']], w: 9.956, h: 14.982 },\n\t'7': { d: [['M', 0.21, -14.97], ['c', 0.21, -0.06, 0.45, 0.00, 0.54, 0.15], ['c', 0.06, 0.09, 0.06, 0.15, 0.06, 0.39], ['c', 0.00, 0.24, 0.00, 0.33, 0.06, 0.42], ['c', 0.06, 0.12, 0.21, 0.24, 0.27, 0.24], ['c', 0.03, 0.00, 0.12, -0.12, 0.24, -0.21], ['c', 0.96, -1.20, 2.58, -1.35, 3.99, -0.42], ['c', 0.15, 0.12, 0.42, 0.30, 0.54, 0.45], ['c', 0.48, 0.39, 0.81, 0.57, 1.29, 0.60], ['c', 0.69, 0.03, 1.50, -0.30, 2.13, -0.87], ['c', 0.09, -0.09, 0.27, -0.30, 0.39, -0.45], ['c', 0.12, -0.15, 0.24, -0.27, 0.30, -0.30], ['c', 0.18, -0.06, 0.39, 0.03, 0.51, 0.21], ['c', 0.06, 0.18, 0.06, 0.24, -0.27, 0.72], ['c', -0.18, 0.24, -0.54, 0.78, -0.78, 1.17], ['c', -2.37, 3.54, -3.54, 6.27, -3.87, 9.00], ['c', -0.03, 0.33, -0.03, 0.66, -0.03, 1.26], ['c', 0.00, 0.90, 0.00, 1.08, 0.15, 1.89], ['c', 0.06, 0.45, 0.06, 0.48, 0.03, 0.60], ['c', -0.06, 0.09, -0.21, 0.21, -0.30, 0.21], ['c', -0.03, 0.00, -0.27, -0.06, -0.54, -0.15], ['c', -0.84, -0.27, -1.11, -0.30, -1.65, -0.30], ['c', -0.57, 0.00, -0.84, 0.03, -1.56, 0.27], ['c', -0.60, 0.18, -0.69, 0.21, -0.81, 0.15], ['c', -0.12, -0.06, -0.21, -0.18, -0.21, -0.30], ['c', 0.00, -0.15, 0.60, -1.44, 1.20, -2.61], ['c', 1.14, -2.22, 2.73, -4.68, 5.10, -8.01], ['c', 0.21, -0.27, 0.36, -0.48, 0.33, -0.48], ['c', 0.00, 0.00, -0.12, 0.06, -0.27, 0.12], ['c', -0.54, 0.30, -0.99, 0.39, -1.56, 0.39], ['c', -0.75, 0.03, -1.20, -0.18, -1.83, -0.75], ['c', -0.99, -0.90, -1.83, -1.17, -2.31, -0.72], ['c', -0.18, 0.15, -0.36, 0.51, -0.45, 0.84], ['c', -0.06, 0.24, -0.06, 0.33, -0.09, 1.98], ['c', 0.00, 1.62, -0.03, 1.74, -0.06, 1.80], ['c', -0.15, 0.24, -0.54, 0.24, -0.69, 0.00], ['c', -0.06, -0.09, -0.06, -0.15, -0.06, -3.57], ['c', 0.00, -3.42, 0.00, -3.48, 0.06, -3.57], ['c', 0.03, -0.06, 0.09, -0.12, 0.15, -0.15], ['z']], w: 10.561, h: 15.093 },\n\t'8': { d: [['M', 4.98, -14.97], ['c', 0.33, -0.03, 1.02, -0.03, 1.32, 0.00], ['c', 1.32, 0.12, 2.49, 0.60, 3.21, 1.32], ['c', 0.39, 0.39, 0.66, 0.81, 0.78, 1.29], ['c', 0.09, 0.36, 0.09, 1.08, 0.00, 1.44], ['c', -0.21, 0.84, -0.66, 1.59, -1.59, 2.55], ['l', -0.30, 0.30], ['l', 0.27, 0.18], ['c', 1.47, 0.93, 2.31, 2.31, 2.25, 3.75], ['c', -0.03, 0.75, -0.24, 1.35, -0.63, 1.95], ['c', -0.45, 0.66, -1.02, 1.14, -1.83, 1.53], ['c', -1.80, 0.87, -4.20, 0.87, -6.00, 0.03], ['c', -1.62, -0.78, -2.52, -2.16, -2.46, -3.66], ['c', 0.06, -0.99, 0.54, -1.77, 1.80, -2.97], ['c', 0.54, -0.51, 0.54, -0.54, 0.48, -0.57], ['c', -0.39, -0.27, -0.96, -0.78, -1.20, -1.14], ['c', -0.75, -1.11, -0.87, -2.40, -0.30, -3.60], ['c', 0.69, -1.35, 2.25, -2.25, 4.20, -2.40], ['z'], ['m', 1.53, 0.69], ['c', -0.42, -0.09, -1.11, -0.12, -1.38, -0.06], ['c', -0.30, 0.06, -0.60, 0.18, -0.81, 0.30], ['c', -0.21, 0.12, -0.60, 0.51, -0.72, 0.72], ['c', -0.51, 0.87, -0.42, 1.89, 0.21, 2.52], ['c', 0.21, 0.21, 0.36, 0.30, 1.95, 1.23], ['c', 0.96, 0.54, 1.74, 0.99, 1.77, 1.02], ['c', 0.09, 0.00, 0.63, -0.60, 0.99, -1.11], ['c', 0.21, -0.36, 0.48, -0.87, 0.57, -1.23], ['c', 0.06, -0.24, 0.06, -0.36, 0.06, -0.72], ['c', 0.00, -0.45, -0.03, -0.66, -0.15, -0.99], ['c', -0.39, -0.81, -1.29, -1.44, -2.49, -1.68], ['z'], ['m', -1.44, 8.07], ['l', -1.89, -1.08], ['c', -0.03, 0.00, -0.18, 0.15, -0.39, 0.33], ['c', -1.20, 1.08, -1.65, 1.95, -1.59, 3.00], ['c', 0.09, 1.59, 1.35, 2.85, 3.21, 3.24], ['c', 0.33, 0.06, 0.45, 0.06, 0.93, 0.06], ['c', 0.63, 0.00, 0.81, -0.03, 1.29, -0.27], ['c', 0.90, -0.42, 1.47, -1.41, 1.41, -2.40], ['c', -0.06, -0.66, -0.39, -1.29, -0.90, -1.65], ['c', -0.12, -0.09, -1.05, -0.63, -2.07, -1.23], ['z']], w: 10.926, h: 14.989 },\n\t'9': { d: [['M', 4.23, -14.97], ['c', 0.42, -0.03, 1.29, 0.00, 1.62, 0.06], ['c', 0.51, 0.12, 0.93, 0.30, 1.38, 0.57], ['c', 1.53, 1.02, 2.52, 3.24, 2.73, 5.94], ['c', 0.18, 2.55, -0.48, 4.98, -1.83, 6.57], ['c', -1.05, 1.26, -2.40, 1.89, -3.93, 1.83], ['c', -1.23, -0.06, -2.31, -0.45, -3.03, -1.14], ['c', -0.57, -0.51, -0.87, -1.23, -0.84, -1.98], ['c', 0.03, -0.51, 0.21, -0.90, 0.60, -1.26], ['c', 0.24, -0.24, 0.45, -0.39, 0.75, -0.51], ['c', 0.21, -0.06, 0.27, -0.06, 0.60, -0.06], ['c', 0.33, 0.00, 0.39, 0.00, 0.60, 0.06], ['c', 0.30, 0.12, 0.51, 0.27, 0.75, 0.51], ['c', 0.39, 0.36, 0.57, 0.78, 0.57, 1.26], ['c', 0.00, 0.27, 0.00, 0.30, -0.09, 0.42], ['c', -0.03, 0.09, -0.18, 0.21, -0.30, 0.30], ['c', -0.12, 0.09, -0.30, 0.21, -0.39, 0.27], ['c', -0.09, 0.06, -0.21, 0.18, -0.27, 0.24], ['c', -0.06, 0.12, -0.06, 0.15, -0.06, 0.33], ['c', 0.00, 0.18, 0.00, 0.24, 0.06, 0.36], ['c', 0.24, 0.39, 0.75, 0.60, 1.38, 0.57], ['c', 0.54, -0.03, 0.90, -0.18, 1.23, -0.48], ['c', 0.81, -0.72, 1.08, -2.16, 0.96, -5.37], ['l', 0.00, -0.63], ['l', -0.30, 0.12], ['c', -0.78, 0.27, -1.29, 0.33, -2.10, 0.27], ['c', -1.47, -0.12, -2.49, -0.54, -3.27, -1.29], ['c', -0.48, -0.51, -0.81, -1.11, -0.96, -1.89], ['c', -0.06, -0.27, -0.06, -0.42, -0.06, -0.96], ['c', 0.00, -0.51, 0.00, -0.66, 0.06, -0.93], ['c', 0.15, -0.78, 0.48, -1.38, 0.96, -1.89], ['c', 0.15, -0.12, 0.33, -0.27, 0.42, -0.36], ['c', 0.69, -0.51, 1.62, -0.81, 2.76, -0.93], ['z'], ['m', 1.17, 0.66], ['c', -0.21, -0.06, -0.57, -0.06, -0.81, -0.03], ['c', -0.78, 0.12, -1.26, 0.69, -1.41, 1.74], ['c', -0.12, 0.63, -0.15, 1.95, -0.09, 2.79], ['c', 0.12, 1.71, 0.63, 2.40, 1.77, 2.46], ['c', 1.08, 0.03, 1.62, -0.48, 1.80, -1.74], ['c', 0.06, -0.54, 0.06, -3.00, 0.00, -3.54], ['c', -0.15, -1.05, -0.51, -1.53, -1.26, -1.68], ['z']], w: 9.959, h: 14.986 },\n\t'rests.multimeasure': { d: [['M', 0, -4], ['l', 0, 16], ['l', 1, 0], ['l', 0, -5], ['l', 40, 0], ['l', 0, 5], ['l', 1, 0], ['l', 0, -16], ['l', -1, 0], ['l', 0, 5], ['l', -40, 0], ['l', 0, -5], ['z']], w: 42, h: 18 },\n\t'rests.whole': { d: [['M', 0.06, 0.03], ['l', 0.09, -0.06], ['l', 5.46, 0.00], ['l', 5.49, 0.00], ['l', 0.09, 0.06], ['l', 0.06, 0.09], ['l', 0.00, 2.19], ['l', 0.00, 2.19], ['l', -0.06, 0.09], ['l', -0.09, 0.06], ['l', -5.49, 0.00], ['l', -5.46, 0.00], ['l', -0.09, -0.06], ['l', -0.06, -0.09], ['l', 0.00, -2.19], ['l', 0.00, -2.19], ['z']], w: 11.25, h: 4.68 },\n\t'rests.half': { d: [['M', 0.06, -4.62], ['l', 0.09, -0.06], ['l', 5.46, 0.00], ['l', 5.49, 0.00], ['l', 0.09, 0.06], ['l', 0.06, 0.09], ['l', 0.00, 2.19], ['l', 0.00, 2.19], ['l', -0.06, 0.09], ['l', -0.09, 0.06], ['l', -5.49, 0.00], ['l', -5.46, 0.00], ['l', -0.09, -0.06], ['l', -0.06, -0.09], ['l', 0.00, -2.19], ['l', 0.00, -2.19], ['z']], w: 11.25, h: 4.68 },\n\t'rests.quarter': { d: [['M', 1.89, -11.82], ['c', 0.12, -0.06, 0.24, -0.06, 0.36, -0.03], ['c', 0.09, 0.06, 4.74, 5.58, 4.86, 5.82], ['c', 0.21, 0.39, 0.15, 0.78, -0.15, 1.26], ['c', -0.24, 0.33, -0.72, 0.81, -1.62, 1.56], ['c', -0.45, 0.36, -0.87, 0.75, -0.96, 0.84], ['c', -0.93, 0.99, -1.14, 2.49, -0.60, 3.63], ['c', 0.18, 0.39, 0.27, 0.48, 1.32, 1.68], ['c', 1.92, 2.25, 1.83, 2.16, 1.83, 2.34], ['c', 0.00, 0.18, -0.18, 0.36, -0.36, 0.39], ['c', -0.15, 0.00, -0.27, -0.06, -0.48, -0.27], ['c', -0.75, -0.75, -2.46, -1.29, -3.39, -1.08], ['c', -0.45, 0.09, -0.69, 0.27, -0.90, 0.69], ['c', -0.12, 0.30, -0.21, 0.66, -0.24, 1.14], ['c', -0.03, 0.66, 0.09, 1.35, 0.30, 2.01], ['c', 0.15, 0.42, 0.24, 0.66, 0.45, 0.96], ['c', 0.18, 0.24, 0.18, 0.33, 0.03, 0.42], ['c', -0.12, 0.06, -0.18, 0.03, -0.45, -0.30], ['c', -1.08, -1.38, -2.07, -3.36, -2.40, -4.83], ['c', -0.27, -1.05, -0.15, -1.77, 0.27, -2.07], ['c', 0.21, -0.12, 0.42, -0.15, 0.87, -0.15], ['c', 0.87, 0.06, 2.10, 0.39, 3.30, 0.90], ['l', 0.39, 0.18], ['l', -1.65, -1.95], ['c', -2.52, -2.97, -2.61, -3.09, -2.70, -3.27], ['c', -0.09, -0.24, -0.12, -0.48, -0.03, -0.75], ['c', 0.15, -0.48, 0.57, -0.96, 1.83, -2.01], ['c', 0.45, -0.36, 0.84, -0.72, 0.93, -0.78], ['c', 0.69, -0.75, 1.02, -1.80, 0.90, -2.79], ['c', -0.06, -0.33, -0.21, -0.84, -0.39, -1.11], ['c', -0.09, -0.15, -0.45, -0.60, -0.81, -1.05], ['c', -0.36, -0.42, -0.69, -0.81, -0.72, -0.87], ['c', -0.09, -0.18, 0.00, -0.42, 0.21, -0.51], ['z']], w: 7.888, h: 21.435 },\n\t'rests.8th': { d: [['M', 1.68, -6.12], ['c', 0.66, -0.09, 1.23, 0.09, 1.68, 0.51], ['c', 0.27, 0.30, 0.39, 0.54, 0.57, 1.26], ['c', 0.09, 0.33, 0.18, 0.66, 0.21, 0.72], ['c', 0.12, 0.27, 0.33, 0.45, 0.60, 0.48], ['c', 0.12, 0.00, 0.18, 0.00, 0.33, -0.09], ['c', 0.39, -0.18, 1.32, -1.29, 1.68, -1.98], ['c', 0.09, -0.21, 0.24, -0.30, 0.39, -0.30], ['c', 0.12, 0.00, 0.27, 0.09, 0.33, 0.18], ['c', 0.03, 0.06, -0.27, 1.11, -1.86, 6.42], ['c', -1.02, 3.48, -1.89, 6.39, -1.92, 6.42], ['c', 0.00, 0.03, -0.12, 0.12, -0.24, 0.15], ['c', -0.18, 0.09, -0.21, 0.09, -0.45, 0.09], ['c', -0.24, 0.00, -0.30, 0.00, -0.48, -0.06], ['c', -0.09, -0.06, -0.21, -0.12, -0.21, -0.15], ['c', -0.06, -0.03, 0.15, -0.57, 1.68, -4.92], ['c', 0.96, -2.67, 1.74, -4.89, 1.71, -4.89], ['l', -0.51, 0.15], ['c', -1.08, 0.36, -1.74, 0.48, -2.55, 0.48], ['c', -0.66, 0.00, -0.84, -0.03, -1.32, -0.27], ['c', -1.32, -0.63, -1.77, -2.16, -1.02, -3.30], ['c', 0.33, -0.45, 0.84, -0.81, 1.38, -0.90], ['z']], w: 7.534, h: 13.883 },\n\t'rests.16th': { d: [['M', 3.33, -6.12], ['c', 0.66, -0.09, 1.23, 0.09, 1.68, 0.51], ['c', 0.27, 0.30, 0.39, 0.54, 0.57, 1.26], ['c', 0.09, 0.33, 0.18, 0.66, 0.21, 0.72], ['c', 0.15, 0.39, 0.57, 0.57, 0.87, 0.42], ['c', 0.39, -0.18, 1.20, -1.23, 1.62, -2.07], ['c', 0.06, -0.15, 0.24, -0.24, 0.36, -0.24], ['c', 0.12, 0.00, 0.27, 0.09, 0.33, 0.18], ['c', 0.03, 0.06, -0.45, 1.86, -2.67, 10.17], ['c', -1.50, 5.55, -2.73, 10.14, -2.76, 10.17], ['c', -0.03, 0.03, -0.12, 0.12, -0.24, 0.15], ['c', -0.18, 0.09, -0.21, 0.09, -0.45, 0.09], ['c', -0.24, 0.00, -0.30, 0.00, -0.48, -0.06], ['c', -0.09, -0.06, -0.21, -0.12, -0.21, -0.15], ['c', -0.06, -0.03, 0.12, -0.57, 1.44, -4.92], ['c', 0.81, -2.67, 1.47, -4.86, 1.47, -4.89], ['c', -0.03, 0.00, -0.27, 0.06, -0.54, 0.15], ['c', -1.08, 0.36, -1.77, 0.48, -2.58, 0.48], ['c', -0.66, 0.00, -0.84, -0.03, -1.32, -0.27], ['c', -1.32, -0.63, -1.77, -2.16, -1.02, -3.30], ['c', 0.72, -1.05, 2.22, -1.23, 3.06, -0.42], ['c', 0.30, 0.33, 0.42, 0.60, 0.60, 1.38], ['c', 0.09, 0.45, 0.21, 0.78, 0.33, 0.90], ['c', 0.09, 0.09, 0.27, 0.18, 0.45, 0.21], ['c', 0.12, 0.00, 0.18, 0.00, 0.33, -0.09], ['c', 0.33, -0.15, 1.02, -0.93, 1.41, -1.59], ['c', 0.12, -0.21, 0.18, -0.39, 0.39, -1.08], ['c', 0.66, -2.10, 1.17, -3.84, 1.17, -3.87], ['c', 0.00, 0.00, -0.21, 0.06, -0.42, 0.15], ['c', -0.51, 0.15, -1.20, 0.33, -1.68, 0.42], ['c', -0.33, 0.06, -0.51, 0.06, -0.96, 0.06], ['c', -0.66, 0.00, -0.84, -0.03, -1.32, -0.27], ['c', -1.32, -0.63, -1.77, -2.16, -1.02, -3.30], ['c', 0.33, -0.45, 0.84, -0.81, 1.38, -0.90], ['z']], w: 9.724, h: 21.383 },\n\t'rests.32nd': { d: [['M', 4.23, -13.62], ['c', 0.66, -0.09, 1.23, 0.09, 1.68, 0.51], ['c', 0.27, 0.30, 0.39, 0.54, 0.57, 1.26], ['c', 0.09, 0.33, 0.18, 0.66, 0.21, 0.72], ['c', 0.12, 0.27, 0.33, 0.45, 0.60, 0.48], ['c', 0.12, 0.00, 0.18, 0.00, 0.27, -0.06], ['c', 0.33, -0.21, 0.99, -1.11, 1.44, -1.98], ['c', 0.09, -0.24, 0.21, -0.33, 0.39, -0.33], ['c', 0.12, 0.00, 0.27, 0.09, 0.33, 0.18], ['c', 0.03, 0.06, -0.57, 2.67, -3.21, 13.89], ['c', -1.80, 7.62, -3.30, 13.89, -3.30, 13.92], ['c', -0.03, 0.06, -0.12, 0.12, -0.24, 0.18], ['c', -0.21, 0.09, -0.24, 0.09, -0.48, 0.09], ['c', -0.24, 0.00, -0.30, 0.00, -0.48, -0.06], ['c', -0.09, -0.06, -0.21, -0.12, -0.21, -0.15], ['c', -0.06, -0.03, 0.09, -0.57, 1.23, -4.92], ['c', 0.69, -2.67, 1.26, -4.86, 1.29, -4.89], ['c', 0.00, -0.03, -0.12, -0.03, -0.48, 0.12], ['c', -1.17, 0.39, -2.22, 0.57, -3.00, 0.54], ['c', -0.42, -0.03, -0.75, -0.12, -1.11, -0.30], ['c', -1.32, -0.63, -1.77, -2.16, -1.02, -3.30], ['c', 0.72, -1.05, 2.22, -1.23, 3.06, -0.42], ['c', 0.30, 0.33, 0.42, 0.60, 0.60, 1.38], ['c', 0.09, 0.45, 0.21, 0.78, 0.33, 0.90], ['c', 0.12, 0.09, 0.30, 0.18, 0.48, 0.21], ['c', 0.12, 0.00, 0.18, 0.00, 0.30, -0.09], ['c', 0.42, -0.21, 1.29, -1.29, 1.56, -1.89], ['c', 0.03, -0.12, 1.23, -4.59, 1.23, -4.65], ['c', 0.00, -0.03, -0.18, 0.03, -0.39, 0.12], ['c', -0.63, 0.18, -1.20, 0.36, -1.74, 0.45], ['c', -0.39, 0.06, -0.54, 0.06, -1.02, 0.06], ['c', -0.66, 0.00, -0.84, -0.03, -1.32, -0.27], ['c', -1.32, -0.63, -1.77, -2.16, -1.02, -3.30], ['c', 0.72, -1.05, 2.22, -1.23, 3.06, -0.42], ['c', 0.30, 0.33, 0.42, 0.60, 0.60, 1.38], ['c', 0.09, 0.45, 0.21, 0.78, 0.33, 0.90], ['c', 0.18, 0.18, 0.51, 0.27, 0.72, 0.15], ['c', 0.30, -0.12, 0.69, -0.57, 1.08, -1.17], ['c', 0.42, -0.60, 0.39, -0.51, 1.05, -3.03], ['c', 0.33, -1.26, 0.60, -2.31, 0.60, -2.34], ['c', 0.00, 0.00, -0.21, 0.03, -0.45, 0.12], ['c', -0.57, 0.18, -1.14, 0.33, -1.62, 0.42], ['c', -0.33, 0.06, -0.51, 0.06, -0.96, 0.06], ['c', -0.66, 0.00, -0.84, -0.03, -1.32, -0.27], ['c', -1.32, -0.63, -1.77, -2.16, -1.02, -3.30], ['c', 0.33, -0.45, 0.84, -0.81, 1.38, -0.90], ['z']], w: 11.373, h: 28.883 },\n\t'rests.64th': { d: [['M', 5.13, -13.62], ['c', 0.66, -0.09, 1.23, 0.09, 1.68, 0.51], ['c', 0.27, 0.30, 0.39, 0.54, 0.57, 1.26], ['c', 0.15, 0.63, 0.21, 0.81, 0.33, 0.96], ['c', 0.18, 0.21, 0.54, 0.30, 0.75, 0.18], ['c', 0.24, -0.12, 0.63, -0.66, 1.08, -1.56], ['c', 0.33, -0.66, 0.39, -0.72, 0.60, -0.72], ['c', 0.12, 0.00, 0.27, 0.09, 0.33, 0.18], ['c', 0.03, 0.06, -0.69, 3.66, -3.54, 17.64], ['c', -1.95, 9.66, -3.57, 17.61, -3.57, 17.64], ['c', -0.03, 0.06, -0.12, 0.12, -0.24, 0.18], ['c', -0.21, 0.09, -0.24, 0.09, -0.48, 0.09], ['c', -0.24, 0.00, -0.30, 0.00, -0.48, -0.06], ['c', -0.09, -0.06, -0.21, -0.12, -0.21, -0.15], ['c', -0.06, -0.03, 0.06, -0.57, 1.05, -4.95], ['c', 0.60, -2.70, 1.08, -4.89, 1.08, -4.92], ['c', 0.00, 0.00, -0.24, 0.06, -0.51, 0.15], ['c', -0.66, 0.24, -1.20, 0.36, -1.77, 0.48], ['c', -0.42, 0.06, -0.57, 0.06, -1.05, 0.06], ['c', -0.69, 0.00, -0.87, -0.03, -1.35, -0.27], ['c', -1.32, -0.63, -1.77, -2.16, -1.02, -3.30], ['c', 0.72, -1.05, 2.22, -1.23, 3.06, -0.42], ['c', 0.30, 0.33, 0.42, 0.60, 0.60, 1.38], ['c', 0.09, 0.45, 0.21, 0.78, 0.33, 0.90], ['c', 0.09, 0.09, 0.27, 0.18, 0.45, 0.21], ['c', 0.21, 0.03, 0.39, -0.09, 0.72, -0.42], ['c', 0.45, -0.45, 1.02, -1.26, 1.17, -1.65], ['c', 0.03, -0.09, 0.27, -1.14, 0.54, -2.34], ['c', 0.27, -1.20, 0.48, -2.19, 0.51, -2.22], ['c', 0.00, -0.03, -0.09, -0.03, -0.48, 0.12], ['c', -1.17, 0.39, -2.22, 0.57, -3.00, 0.54], ['c', -0.42, -0.03, -0.75, -0.12, -1.11, -0.30], ['c', -1.32, -0.63, -1.77, -2.16, -1.02, -3.30], ['c', 0.36, -0.54, 0.96, -0.87, 1.65, -0.93], ['c', 0.54, -0.03, 1.02, 0.15, 1.41, 0.54], ['c', 0.27, 0.30, 0.39, 0.54, 0.57, 1.26], ['c', 0.09, 0.33, 0.18, 0.66, 0.21, 0.72], ['c', 0.15, 0.39, 0.57, 0.57, 0.90, 0.42], ['c', 0.36, -0.18, 1.20, -1.26, 1.47, -1.89], ['c', 0.03, -0.09, 0.30, -1.20, 0.57, -2.43], ['l', 0.51, -2.28], ['l', -0.54, 0.18], ['c', -1.11, 0.36, -1.80, 0.48, -2.61, 0.48], ['c', -0.66, 0.00, -0.84, -0.03, -1.32, -0.27], ['c', -1.32, -0.63, -1.77, -2.16, -1.02, -3.30], ['c', 0.36, -0.54, 0.96, -0.87, 1.65, -0.93], ['c', 0.54, -0.03, 1.02, 0.15, 1.41, 0.54], ['c', 0.27, 0.30, 0.39, 0.54, 0.57, 1.26], ['c', 0.15, 0.63, 0.21, 0.81, 0.33, 0.96], ['c', 0.21, 0.21, 0.54, 0.30, 0.75, 0.18], ['c', 0.36, -0.18, 0.93, -0.93, 1.29, -1.68], ['c', 0.12, -0.24, 0.18, -0.48, 0.63, -2.55], ['l', 0.51, -2.31], ['c', 0.00, -0.03, -0.18, 0.03, -0.39, 0.12], ['c', -1.14, 0.36, -2.10, 0.54, -2.82, 0.51], ['c', -0.42, -0.03, -0.75, -0.12, -1.11, -0.30], ['c', -1.32, -0.63, -1.77, -2.16, -1.02, -3.30], ['c', 0.33, -0.45, 0.84, -0.81, 1.38, -0.90], ['z']], w: 12.453, h: 36.383 },\n\t'rests.128th': { d: [['M', 6.03, -21.12], ['c', 0.66, -0.09, 1.23, 0.09, 1.68, 0.51], ['c', 0.27, 0.30, 0.39, 0.54, 0.57, 1.26], ['c', 0.09, 0.33, 0.18, 0.66, 0.21, 0.72], ['c', 0.12, 0.27, 0.33, 0.45, 0.60, 0.48], ['c', 0.21, 0.00, 0.33, -0.06, 0.54, -0.36], ['c', 0.15, -0.21, 0.54, -0.93, 0.78, -1.47], ['c', 0.15, -0.33, 0.18, -0.39, 0.30, -0.48], ['c', 0.18, -0.09, 0.45, 0.00, 0.51, 0.15], ['c', 0.03, 0.09, -7.11, 42.75, -7.17, 42.84], ['c', -0.03, 0.03, -0.15, 0.09, -0.24, 0.15], ['c', -0.18, 0.06, -0.24, 0.06, -0.45, 0.06], ['c', -0.24, 0.00, -0.30, 0.00, -0.48, -0.06], ['c', -0.09, -0.06, -0.21, -0.12, -0.21, -0.15], ['c', -0.06, -0.03, 0.03, -0.57, 0.84, -4.98], ['c', 0.51, -2.70, 0.93, -4.92, 0.90, -4.92], ['c', 0.00, 0.00, -0.15, 0.06, -0.36, 0.12], ['c', -0.78, 0.27, -1.62, 0.48, -2.31, 0.57], ['c', -0.15, 0.03, -0.54, 0.03, -0.81, 0.03], ['c', -0.66, 0.00, -0.84, -0.03, -1.32, -0.27], ['c', -1.32, -0.63, -1.77, -2.16, -1.02, -3.30], ['c', 0.36, -0.54, 0.96, -0.87, 1.65, -0.93], ['c', 0.54, -0.03, 1.02, 0.15, 1.41, 0.54], ['c', 0.27, 0.30, 0.39, 0.54, 0.57, 1.26], ['c', 0.09, 0.33, 0.18, 0.66, 0.21, 0.72], ['c', 0.12, 0.27, 0.33, 0.45, 0.63, 0.48], ['c', 0.12, 0.00, 0.18, 0.00, 0.30, -0.09], ['c', 0.42, -0.21, 1.14, -1.11, 1.50, -1.83], ['c', 0.12, -0.27, 0.12, -0.27, 0.54, -2.52], ['c', 0.24, -1.23, 0.42, -2.25, 0.39, -2.25], ['c', 0.00, 0.00, -0.24, 0.06, -0.51, 0.18], ['c', -1.26, 0.39, -2.25, 0.57, -3.06, 0.54], ['c', -0.42, -0.03, -0.75, -0.12, -1.11, -0.30], ['c', -1.32, -0.63, -1.77, -2.16, -1.02, -3.30], ['c', 0.36, -0.54, 0.96, -0.87, 1.65, -0.93], ['c', 0.54, -0.03, 1.02, 0.15, 1.41, 0.54], ['c', 0.27, 0.30, 0.39, 0.54, 0.57, 1.26], ['c', 0.15, 0.63, 0.21, 0.81, 0.33, 0.96], ['c', 0.18, 0.21, 0.51, 0.30, 0.75, 0.18], ['c', 0.36, -0.15, 1.05, -0.99, 1.41, -1.77], ['l', 0.15, -0.30], ['l', 0.42, -2.25], ['c', 0.21, -1.26, 0.42, -2.28, 0.39, -2.28], ['l', -0.51, 0.15], ['c', -1.11, 0.39, -1.89, 0.51, -2.70, 0.51], ['c', -0.66, 0.00, -0.84, -0.03, -1.32, -0.27], ['c', -1.32, -0.63, -1.77, -2.16, -1.02, -3.30], ['c', 0.36, -0.54, 0.96, -0.87, 1.65, -0.93], ['c', 0.54, -0.03, 1.02, 0.15, 1.41, 0.54], ['c', 0.27, 0.30, 0.39, 0.54, 0.57, 1.26], ['c', 0.15, 0.63, 0.21, 0.81, 0.33, 0.96], ['c', 0.18, 0.18, 0.48, 0.27, 0.72, 0.21], ['c', 0.33, -0.12, 1.14, -1.26, 1.41, -1.95], ['c', 0.00, -0.09, 0.21, -1.11, 0.45, -2.34], ['c', 0.21, -1.20, 0.39, -2.22, 0.39, -2.28], ['c', 0.03, -0.03, 0.00, -0.03, -0.45, 0.12], ['c', -0.57, 0.18, -1.20, 0.33, -1.71, 0.42], ['c', -0.30, 0.06, -0.51, 0.06, -0.93, 0.06], ['c', -0.66, 0.00, -0.84, -0.03, -1.32, -0.27], ['c', -1.32, -0.63, -1.77, -2.16, -1.02, -3.30], ['c', 0.36, -0.54, 0.96, -0.87, 1.65, -0.93], ['c', 0.54, -0.03, 1.02, 0.15, 1.41, 0.54], ['c', 0.27, 0.30, 0.39, 0.54, 0.57, 1.26], ['c', 0.09, 0.33, 0.18, 0.66, 0.21, 0.72], ['c', 0.12, 0.27, 0.33, 0.45, 0.60, 0.48], ['c', 0.18, 0.00, 0.36, -0.09, 0.57, -0.33], ['c', 0.33, -0.36, 0.78, -1.14, 0.93, -1.56], ['c', 0.03, -0.12, 0.24, -1.20, 0.45, -2.40], ['c', 0.24, -1.20, 0.42, -2.22, 0.42, -2.28], ['c', 0.03, -0.03, 0.00, -0.03, -0.39, 0.09], ['c', -1.05, 0.36, -1.80, 0.48, -2.58, 0.48], ['c', -0.63, 0.00, -0.84, -0.03, -1.29, -0.27], ['c', -1.32, -0.63, -1.77, -2.16, -1.02, -3.30], ['c', 0.33, -0.45, 0.84, -0.81, 1.38, -0.90], ['z']], w: 12.992, h: 43.883 },\n\t'accidentals.sharp': { d: [['M', 5.73, -11.19], ['c', 0.21, -0.12, 0.54, -0.03, 0.66, 0.24], ['c', 0.06, 0.12, 0.06, 0.21, 0.06, 2.31], ['c', 0.00, 1.23, 0.00, 2.22, 0.03, 2.22], ['c', 0.00, 0.00, 0.27, -0.12, 0.60, -0.24], ['c', 0.69, -0.27, 0.78, -0.30, 0.96, -0.15], ['c', 0.21, 0.15, 0.21, 0.18, 0.21, 1.38], ['c', 0.00, 1.02, 0.00, 1.11, -0.06, 1.20], ['c', -0.03, 0.06, -0.09, 0.12, -0.12, 0.15], ['c', -0.06, 0.03, -0.42, 0.21, -0.84, 0.36], ['l', -0.75, 0.33], ['l', -0.03, 2.43], ['c', 0.00, 1.32, 0.00, 2.43, 0.03, 2.43], ['c', 0.00, 0.00, 0.27, -0.12, 0.60, -0.24], ['c', 0.69, -0.27, 0.78, -0.30, 0.96, -0.15], ['c', 0.21, 0.15, 0.21, 0.18, 0.21, 1.38], ['c', 0.00, 1.02, 0.00, 1.11, -0.06, 1.20], ['c', -0.03, 0.06, -0.09, 0.12, -0.12, 0.15], ['c', -0.06, 0.03, -0.42, 0.21, -0.84, 0.36], ['l', -0.75, 0.33], ['l', -0.03, 2.52], ['c', 0.00, 2.28, -0.03, 2.55, -0.06, 2.64], ['c', -0.21, 0.36, -0.72, 0.36, -0.93, 0.00], ['c', -0.03, -0.09, -0.06, -0.33, -0.06, -2.43], ['l', 0.00, -2.31], ['l', -1.29, 0.51], ['l', -1.26, 0.51], ['l', 0.00, 2.43], ['c', 0.00, 2.58, 0.00, 2.52, -0.15, 2.67], ['c', -0.06, 0.09, -0.27, 0.18, -0.36, 0.18], ['c', -0.12, 0.00, -0.33, -0.09, -0.39, -0.18], ['c', -0.15, -0.15, -0.15, -0.09, -0.15, -2.43], ['c', 0.00, -1.23, 0.00, -2.22, -0.03, -2.22], ['c', 0.00, 0.00, -0.27, 0.12, -0.60, 0.24], ['c', -0.69, 0.27, -0.78, 0.30, -0.96, 0.15], ['c', -0.21, -0.15, -0.21, -0.18, -0.21, -1.38], ['c', 0.00, -1.02, 0.00, -1.11, 0.06, -1.20], ['c', 0.03, -0.06, 0.09, -0.12, 0.12, -0.15], ['c', 0.06, -0.03, 0.42, -0.21, 0.84, -0.36], ['l', 0.78, -0.33], ['l', 0.00, -2.43], ['c', 0.00, -1.32, 0.00, -2.43, -0.03, -2.43], ['c', 0.00, 0.00, -0.27, 0.12, -0.60, 0.24], ['c', -0.69, 0.27, -0.78, 0.30, -0.96, 0.15], ['c', -0.21, -0.15, -0.21, -0.18, -0.21, -1.38], ['c', 0.00, -1.02, 0.00, -1.11, 0.06, -1.20], ['c', 0.03, -0.06, 0.09, -0.12, 0.12, -0.15], ['c', 0.06, -0.03, 0.42, -0.21, 0.84, -0.36], ['l', 0.78, -0.33], ['l', 0.00, -2.52], ['c', 0.00, -2.28, 0.03, -2.55, 0.06, -2.64], ['c', 0.21, -0.36, 0.72, -0.36, 0.93, 0.00], ['c', 0.03, 0.09, 0.06, 0.33, 0.06, 2.43], ['l', 0.03, 2.31], ['l', 1.26, -0.51], ['l', 1.26, -0.51], ['l', 0.00, -2.43], ['c', 0.00, -2.28, 0.00, -2.43, 0.06, -2.55], ['c', 0.06, -0.12, 0.12, -0.18, 0.27, -0.24], ['z'], ['m', -0.33, 10.65], ['l', 0.00, -2.43], ['l', -1.29, 0.51], ['l', -1.26, 0.51], ['l', 0.00, 2.46], ['l', 0.00, 2.43], ['l', 0.09, -0.03], ['c', 0.06, -0.03, 0.63, -0.27, 1.29, -0.51], ['l', 1.17, -0.48], ['l', 0.00, -2.46], ['z']], w: 8.25, h: 22.462 },\n\t'accidentals.halfsharp': { d: [['M', 2.43, -10.05], ['c', 0.21, -0.12, 0.54, -0.03, 0.66, 0.24], ['c', 0.06, 0.12, 0.06, 0.21, 0.06, 2.01], ['c', 0.00, 1.05, 0.00, 1.89, 0.03, 1.89], ['l', 0.72, -0.48], ['c', 0.69, -0.48, 0.69, -0.51, 0.87, -0.51], ['c', 0.15, 0.00, 0.18, 0.03, 0.27, 0.09], ['c', 0.21, 0.15, 0.21, 0.18, 0.21, 1.41], ['c', 0.00, 1.11, -0.03, 1.14, -0.09, 1.23], ['c', -0.03, 0.03, -0.48, 0.39, -1.02, 0.75], ['l', -0.99, 0.66], ['l', 0.00, 2.37], ['c', 0.00, 1.32, 0.00, 2.37, 0.03, 2.37], ['l', 0.72, -0.48], ['c', 0.69, -0.48, 0.69, -0.51, 0.87, -0.51], ['c', 0.15, 0.00, 0.18, 0.03, 0.27, 0.09], ['c', 0.21, 0.15, 0.21, 0.18, 0.21, 1.41], ['c', 0.00, 1.11, -0.03, 1.14, -0.09, 1.23], ['c', -0.03, 0.03, -0.48, 0.39, -1.02, 0.75], ['l', -0.99, 0.66], ['l', 0.00, 2.25], ['c', 0.00, 1.95, 0.00, 2.28, -0.06, 2.37], ['c', -0.06, 0.12, -0.12, 0.21, -0.24, 0.27], ['c', -0.27, 0.12, -0.54, 0.03, -0.69, -0.24], ['c', -0.06, -0.12, -0.06, -0.21, -0.06, -2.01], ['c', 0.00, -1.05, 0.00, -1.89, -0.03, -1.89], ['l', -0.72, 0.48], ['c', -0.69, 0.48, -0.69, 0.48, -0.87, 0.48], ['c', -0.15, 0.00, -0.18, 0.00, -0.27, -0.06], ['c', -0.21, -0.15, -0.21, -0.18, -0.21, -1.41], ['c', 0.00, -1.11, 0.03, -1.14, 0.09, -1.23], ['c', 0.03, -0.03, 0.48, -0.39, 1.02, -0.75], ['l', 0.99, -0.66], ['l', 0.00, -2.37], ['c', 0.00, -1.32, 0.00, -2.37, -0.03, -2.37], ['l', -0.72, 0.48], ['c', -0.69, 0.48, -0.69, 0.48, -0.87, 0.48], ['c', -0.15, 0.00, -0.18, 0.00, -0.27, -0.06], ['c', -0.21, -0.15, -0.21, -0.18, -0.21, -1.41], ['c', 0.00, -1.11, 0.03, -1.14, 0.09, -1.23], ['c', 0.03, -0.03, 0.48, -0.39, 1.02, -0.75], ['l', 0.99, -0.66], ['l', 0.00, -2.25], ['c', 0.00, -2.13, 0.00, -2.28, 0.06, -2.40], ['c', 0.06, -0.12, 0.12, -0.18, 0.27, -0.24], ['z']], w: 5.25, h: 20.174 },\n\t'accidentals.nat': { d: [['M', 0.21, -11.40], ['c', 0.24, -0.06, 0.78, 0.00, 0.99, 0.15], ['c', 0.03, 0.03, 0.03, 0.48, 0.00, 2.61], ['c', -0.03, 1.44, -0.03, 2.61, -0.03, 2.61], ['c', 0.00, 0.03, 0.75, -0.09, 1.68, -0.24], ['c', 0.96, -0.18, 1.71, -0.27, 1.74, -0.27], ['c', 0.15, 0.03, 0.27, 0.15, 0.36, 0.30], ['l', 0.06, 0.12], ['l', 0.09, 8.67], ['c', 0.09, 6.96, 0.12, 8.67, 0.09, 8.67], ['c', -0.03, 0.03, -0.12, 0.06, -0.21, 0.09], ['c', -0.24, 0.09, -0.72, 0.09, -0.96, 0.00], ['c', -0.09, -0.03, -0.18, -0.06, -0.21, -0.09], ['c', -0.03, -0.03, -0.03, -0.48, 0.00, -2.61], ['c', 0.03, -1.44, 0.03, -2.61, 0.03, -2.61], ['c', 0.00, -0.03, -0.75, 0.09, -1.68, 0.24], ['c', -0.96, 0.18, -1.71, 0.27, -1.74, 0.27], ['c', -0.15, -0.03, -0.27, -0.15, -0.36, -0.30], ['l', -0.06, -0.15], ['l', -0.09, -7.53], ['c', -0.06, -4.14, -0.09, -8.04, -0.12, -8.67], ['l', 0.00, -1.11], ['l', 0.15, -0.06], ['c', 0.09, -0.03, 0.21, -0.06, 0.27, -0.09], ['z'], ['m', 3.75, 8.40], ['c', 0.00, -0.33, 0.00, -0.42, -0.03, -0.42], ['c', -0.12, 0.00, -2.79, 0.45, -2.79, 0.48], ['c', -0.03, 0.00, -0.09, 6.30, -0.09, 6.33], ['c', 0.03, 0.00, 2.79, -0.45, 2.82, -0.48], ['c', 0.00, 0.00, 0.09, -4.53, 0.09, -5.91], ['z']], w: 5.4, h: 22.8 },\n\t'accidentals.flat': { d: [['M', -0.36, -14.07], ['c', 0.33, -0.06, 0.87, 0.00, 1.08, 0.15], ['c', 0.06, 0.03, 0.06, 0.36, -0.03, 5.25], ['c', -0.06, 2.85, -0.09, 5.19, -0.09, 5.19], ['c', 0.00, 0.03, 0.12, -0.03, 0.24, -0.12], ['c', 0.63, -0.42, 1.41, -0.66, 2.19, -0.72], ['c', 0.81, -0.03, 1.47, 0.21, 2.04, 0.78], ['c', 0.57, 0.54, 0.87, 1.26, 0.93, 2.04], ['c', 0.03, 0.57, -0.09, 1.08, -0.36, 1.62], ['c', -0.42, 0.81, -1.02, 1.38, -2.82, 2.61], ['c', -1.14, 0.78, -1.44, 1.02, -1.80, 1.44], ['c', -0.18, 0.18, -0.39, 0.39, -0.45, 0.42], ['c', -0.27, 0.18, -0.57, 0.15, -0.81, -0.06], ['c', -0.06, -0.09, -0.12, -0.18, -0.15, -0.27], ['c', -0.03, -0.06, -0.09, -3.27, -0.18, -8.34], ['c', -0.09, -4.53, -0.15, -8.58, -0.18, -9.03], ['l', 0.00, -0.78], ['l', 0.12, -0.06], ['c', 0.06, -0.03, 0.18, -0.09, 0.27, -0.12], ['z'], ['m', 3.18, 11.01], ['c', -0.21, -0.12, -0.54, -0.15, -0.81, -0.06], ['c', -0.54, 0.15, -0.99, 0.63, -1.17, 1.26], ['c', -0.06, 0.30, -0.12, 2.88, -0.06, 3.87], ['c', 0.03, 0.42, 0.03, 0.81, 0.06, 0.90], ['l', 0.03, 0.12], ['l', 0.45, -0.39], ['c', 0.63, -0.54, 1.26, -1.17, 1.56, -1.59], ['c', 0.30, -0.42, 0.60, -0.99, 0.72, -1.41], ['c', 0.18, -0.69, 0.09, -1.47, -0.18, -2.07], ['c', -0.15, -0.30, -0.33, -0.51, -0.60, -0.63], ['z']], w: 6.75, h: 18.801 },\n\t'accidentals.halfflat': { d: [['M', 4.83, -14.07], ['c', 0.33, -0.06, 0.87, 0.00, 1.08, 0.15], ['c', 0.06, 0.03, 0.06, 0.60, -0.12, 9.06], ['c', -0.09, 5.55, -0.15, 9.06, -0.18, 9.12], ['c', -0.03, 0.09, -0.09, 0.18, -0.15, 0.27], ['c', -0.24, 0.21, -0.54, 0.24, -0.81, 0.06], ['c', -0.06, -0.03, -0.27, -0.24, -0.45, -0.42], ['c', -0.36, -0.42, -0.66, -0.66, -1.80, -1.44], ['c', -1.23, -0.84, -1.83, -1.32, -2.25, -1.77], ['c', -0.66, -0.78, -0.96, -1.56, -0.93, -2.46], ['c', 0.09, -1.41, 1.11, -2.58, 2.40, -2.79], ['c', 0.30, -0.06, 0.84, -0.03, 1.23, 0.06], ['c', 0.54, 0.12, 1.08, 0.33, 1.53, 0.63], ['c', 0.12, 0.09, 0.24, 0.15, 0.24, 0.12], ['c', 0.00, 0.00, -0.12, -8.37, -0.18, -9.75], ['l', 0.00, -0.66], ['l', 0.12, -0.06], ['c', 0.06, -0.03, 0.18, -0.09, 0.27, -0.12], ['z'], ['m', -1.65, 10.95], ['c', -0.60, -0.18, -1.08, 0.09, -1.38, 0.69], ['c', -0.27, 0.60, -0.36, 1.38, -0.18, 2.07], ['c', 0.12, 0.42, 0.42, 0.99, 0.72, 1.41], ['c', 0.30, 0.42, 0.93, 1.05, 1.56, 1.59], ['l', 0.48, 0.39], ['l', 0.00, -0.12], ['c', 0.03, -0.09, 0.03, -0.48, 0.06, -0.90], ['c', 0.03, -0.57, 0.03, -1.08, 0.00, -2.22], ['c', -0.03, -1.62, -0.03, -1.62, -0.24, -2.07], ['c', -0.21, -0.42, -0.60, -0.75, -1.02, -0.84], ['z']], w: 6.728, h: 18.801 },\n\t'accidentals.dblflat': { d: [['M', -0.36, -14.07], ['c', 0.33, -0.06, 0.87, 0.00, 1.08, 0.15], ['c', 0.06, 0.03, 0.06, 0.36, -0.03, 5.25], ['c', -0.06, 2.85, -0.09, 5.19, -0.09, 5.19], ['c', 0.00, 0.03, 0.12, -0.03, 0.24, -0.12], ['c', 0.63, -0.42, 1.41, -0.66, 2.19, -0.72], ['c', 0.81, -0.03, 1.47, 0.21, 2.04, 0.78], ['c', 0.57, 0.54, 0.87, 1.26, 0.93, 2.04], ['c', 0.03, 0.57, -0.09, 1.08, -0.36, 1.62], ['c', -0.42, 0.81, -1.02, 1.38, -2.82, 2.61], ['c', -1.14, 0.78, -1.44, 1.02, -1.80, 1.44], ['c', -0.18, 0.18, -0.39, 0.39, -0.45, 0.42], ['c', -0.27, 0.18, -0.57, 0.15, -0.81, -0.06], ['c', -0.06, -0.09, -0.12, -0.18, -0.15, -0.27], ['c', -0.03, -0.06, -0.09, -3.27, -0.18, -8.34], ['c', -0.09, -4.53, -0.15, -8.58, -0.18, -9.03], ['l', 0.00, -0.78], ['l', 0.12, -0.06], ['c', 0.06, -0.03, 0.18, -0.09, 0.27, -0.12], ['z'], ['m', 3.18, 11.01], ['c', -0.21, -0.12, -0.54, -0.15, -0.81, -0.06], ['c', -0.54, 0.15, -0.99, 0.63, -1.17, 1.26], ['c', -0.06, 0.30, -0.12, 2.88, -0.06, 3.87], ['c', 0.03, 0.42, 0.03, 0.81, 0.06, 0.90], ['l', 0.03, 0.12], ['l', 0.45, -0.39], ['c', 0.63, -0.54, 1.26, -1.17, 1.56, -1.59], ['c', 0.30, -0.42, 0.60, -0.99, 0.72, -1.41], ['c', 0.18, -0.69, 0.09, -1.47, -0.18, -2.07], ['c', -0.15, -0.30, -0.33, -0.51, -0.60, -0.63], ['z'], ['m', 3, -11], ['c', 0.33, -0.06, 0.87, 0.00, 1.08, 0.15], ['c', 0.06, 0.03, 0.06, 0.36, -0.03, 5.25], ['c', -0.06, 2.85, -0.09, 5.19, -0.09, 5.19], ['c', 0.00, 0.03, 0.12, -0.03, 0.24, -0.12], ['c', 0.63, -0.42, 1.41, -0.66, 2.19, -0.72], ['c', 0.81, -0.03, 1.47, 0.21, 2.04, 0.78], ['c', 0.57, 0.54, 0.87, 1.26, 0.93, 2.04], ['c', 0.03, 0.57, -0.09, 1.08, -0.36, 1.62], ['c', -0.42, 0.81, -1.02, 1.38, -2.82, 2.61], ['c', -1.14, 0.78, -1.44, 1.02, -1.80, 1.44], ['c', -0.18, 0.18, -0.39, 0.39, -0.45, 0.42], ['c', -0.27, 0.18, -0.57, 0.15, -0.81, -0.06], ['c', -0.06, -0.09, -0.12, -0.18, -0.15, -0.27], ['c', -0.03, -0.06, -0.09, -3.27, -0.18, -8.34], ['c', -0.09, -4.53, -0.15, -8.58, -0.18, -9.03], ['l', 0.00, -0.78], ['l', 0.12, -0.06], ['c', 0.06, -0.03, 0.18, -0.09, 0.27, -0.12], ['z'], ['m', 3.18, 11.01], ['c', -0.21, -0.12, -0.54, -0.15, -0.81, -0.06], ['c', -0.54, 0.15, -0.99, 0.63, -1.17, 1.26], ['c', -0.06, 0.30, -0.12, 2.88, -0.06, 3.87], ['c', 0.03, 0.42, 0.03, 0.81, 0.06, 0.90], ['l', 0.03, 0.12], ['l', 0.45, -0.39], ['c', 0.63, -0.54, 1.26, -1.17, 1.56, -1.59], ['c', 0.30, -0.42, 0.60, -0.99, 0.72, -1.41], ['c', 0.18, -0.69, 0.09, -1.47, -0.18, -2.07], ['c', -0.15, -0.30, -0.33, -0.51, -0.60, -0.63], ['z']], w: 12.1, h: 18.804 },\n\t'accidentals.dblsharp': { d: [['M', -0.18, -3.96], ['c', 0.06, -0.03, 0.12, -0.06, 0.15, -0.06], ['c', 0.09, 0.00, 2.76, 0.27, 2.79, 0.30], ['c', 0.12, 0.03, 0.15, 0.12, 0.15, 0.51], ['c', 0.06, 0.96, 0.24, 1.59, 0.57, 2.10], ['c', 0.06, 0.09, 0.15, 0.21, 0.18, 0.24], ['l', 0.09, 0.06], ['l', 0.09, -0.06], ['c', 0.03, -0.03, 0.12, -0.15, 0.18, -0.24], ['c', 0.33, -0.51, 0.51, -1.14, 0.57, -2.10], ['c', 0.00, -0.39, 0.03, -0.45, 0.12, -0.51], ['c', 0.03, 0.00, 0.66, -0.09, 1.44, -0.15], ['c', 1.47, -0.15, 1.50, -0.15, 1.56, -0.03], ['c', 0.03, 0.06, 0.00, 0.42, -0.09, 1.44], ['c', -0.09, 0.72, -0.15, 1.35, -0.15, 1.38], ['c', 0.00, 0.03, -0.03, 0.09, -0.06, 0.12], ['c', -0.06, 0.06, -0.12, 0.09, -0.51, 0.09], ['c', -1.08, 0.06, -1.80, 0.30, -2.28, 0.75], ['l', -0.12, 0.09], ['l', 0.09, 0.09], ['c', 0.12, 0.15, 0.39, 0.33, 0.63, 0.45], ['c', 0.42, 0.18, 0.96, 0.27, 1.68, 0.33], ['c', 0.39, 0.00, 0.45, 0.03, 0.51, 0.09], ['c', 0.03, 0.03, 0.06, 0.09, 0.06, 0.12], ['c', 0.00, 0.03, 0.06, 0.66, 0.15, 1.38], ['c', 0.09, 1.02, 0.12, 1.38, 0.09, 1.44], ['c', -0.06, 0.12, -0.09, 0.12, -1.56, -0.03], ['c', -0.78, -0.06, -1.41, -0.15, -1.44, -0.15], ['c', -0.09, -0.06, -0.12, -0.12, -0.12, -0.54], ['c', -0.06, -0.93, -0.24, -1.56, -0.57, -2.07], ['c', -0.06, -0.09, -0.15, -0.21, -0.18, -0.24], ['l', -0.09, -0.06], ['l', -0.09, 0.06], ['c', -0.03, 0.03, -0.12, 0.15, -0.18, 0.24], ['c', -0.33, 0.51, -0.51, 1.14, -0.57, 2.07], ['c', 0.00, 0.42, -0.03, 0.48, -0.12, 0.54], ['c', -0.03, 0.00, -0.66, 0.09, -1.44, 0.15], ['c', -1.47, 0.15, -1.50, 0.15, -1.56, 0.03], ['c', -0.03, -0.06, 0.00, -0.42, 0.09, -1.44], ['c', 0.09, -0.72, 0.15, -1.35, 0.15, -1.38], ['c', 0.00, -0.03, 0.03, -0.09, 0.06, -0.12], ['c', 0.06, -0.06, 0.12, -0.09, 0.51, -0.09], ['c', 0.72, -0.06, 1.26, -0.15, 1.68, -0.33], ['c', 0.24, -0.12, 0.51, -0.30, 0.63, -0.45], ['l', 0.09, -0.09], ['l', -0.12, -0.09], ['c', -0.48, -0.45, -1.20, -0.69, -2.28, -0.75], ['c', -0.39, 0.00, -0.45, -0.03, -0.51, -0.09], ['c', -0.03, -0.03, -0.06, -0.09, -0.06, -0.12], ['c', 0.00, -0.03, -0.06, -0.63, -0.12, -1.38], ['c', -0.09, -0.72, -0.15, -1.35, -0.15, -1.38], ['z']], w: 7.95, h: 7.977 },\n\t'dots.dot': { d: [['M', 1.32, -1.68], ['c', 0.09, -0.03, 0.27, -0.06, 0.39, -0.06], ['c', 0.96, 0.00, 1.74, 0.78, 1.74, 1.71], ['c', 0.00, 0.96, -0.78, 1.74, -1.71, 1.74], ['c', -0.96, 0.00, -1.74, -0.78, -1.74, -1.71], ['c', 0.00, -0.78, 0.54, -1.50, 1.32, -1.68], ['z']], w: 3.45, h: 3.45 },\n\t'noteheads.dbl': { d: [['M', -0.69, -4.02], ['c', 0.18, -0.09, 0.36, -0.09, 0.54, 0.00], ['c', 0.18, 0.09, 0.24, 0.15, 0.33, 0.30], ['c', 0.06, 0.15, 0.06, 0.18, 0.06, 1.41], ['l', 0.00, 1.23], ['l', 0.12, -0.18], ['c', 0.72, -1.26, 2.64, -2.31, 4.86, -2.64], ['c', 0.81, -0.15, 1.11, -0.15, 2.13, -0.15], ['c', 0.99, 0.00, 1.29, 0.00, 2.10, 0.15], ['c', 0.75, 0.12, 1.38, 0.27, 2.04, 0.54], ['c', 1.35, 0.51, 2.34, 1.26, 2.82, 2.10], ['l', 0.12, 0.18], ['l', 0.00, -1.23], ['c', 0.00, -1.20, 0.00, -1.26, 0.06, -1.38], ['c', 0.09, -0.18, 0.15, -0.24, 0.33, -0.33], ['c', 0.18, -0.09, 0.36, -0.09, 0.54, 0.00], ['c', 0.18, 0.09, 0.24, 0.15, 0.33, 0.30], ['l', 0.06, 0.15], ['l', 0.00, 3.54], ['l', 0.00, 3.54], ['l', -0.06, 0.15], ['c', -0.09, 0.18, -0.15, 0.24, -0.33, 0.33], ['c', -0.18, 0.09, -0.36, 0.09, -0.54, 0.00], ['c', -0.18, -0.09, -0.24, -0.15, -0.33, -0.33], ['c', -0.06, -0.12, -0.06, -0.18, -0.06, -1.38], ['l', 0.00, -1.23], ['l', -0.12, 0.18], ['c', -0.48, 0.84, -1.47, 1.59, -2.82, 2.10], ['c', -0.84, 0.33, -1.71, 0.54, -2.85, 0.66], ['c', -0.45, 0.06, -2.16, 0.06, -2.61, 0.00], ['c', -1.14, -0.12, -2.01, -0.33, -2.85, -0.66], ['c', -1.35, -0.51, -2.34, -1.26, -2.82, -2.10], ['l', -0.12, -0.18], ['l', 0.00, 1.23], ['c', 0.00, 1.23, 0.00, 1.26, -0.06, 1.38], ['c', -0.09, 0.18, -0.15, 0.24, -0.33, 0.33], ['c', -0.18, 0.09, -0.36, 0.09, -0.54, 0.00], ['c', -0.18, -0.09, -0.24, -0.15, -0.33, -0.33], ['l', -0.06, -0.15], ['l', 0.00, -3.54], ['c', 0.00, -3.48, 0.00, -3.54, 0.06, -3.66], ['c', 0.09, -0.18, 0.15, -0.24, 0.33, -0.33], ['z'], ['m', 7.71, 0.63], ['c', -0.36, -0.06, -0.90, -0.06, -1.14, 0.00], ['c', -0.30, 0.03, -0.66, 0.24, -0.87, 0.42], ['c', -0.60, 0.54, -0.90, 1.62, -0.75, 2.82], ['c', 0.12, 0.93, 0.51, 1.68, 1.11, 2.31], ['c', 0.75, 0.72, 1.83, 1.20, 2.85, 1.26], ['c', 1.05, 0.06, 1.83, -0.54, 2.10, -1.65], ['c', 0.21, -0.90, 0.12, -1.95, -0.24, -2.82], ['c', -0.36, -0.81, -1.08, -1.53, -1.95, -1.95], ['c', -0.30, -0.15, -0.78, -0.30, -1.11, -0.39], ['z']], w: 16.83, h: 8.145 },\n\t'noteheads.whole': { d: [['M', 6.51, -4.05], ['c', 0.51, -0.03, 2.01, 0.00, 2.52, 0.03], ['c', 1.41, 0.18, 2.64, 0.51, 3.72, 1.08], ['c', 1.20, 0.63, 1.95, 1.41, 2.19, 2.31], ['c', 0.09, 0.33, 0.09, 0.90, 0.00, 1.23], ['c', -0.24, 0.90, -0.99, 1.68, -2.19, 2.31], ['c', -1.08, 0.57, -2.28, 0.90, -3.75, 1.08], ['c', -0.66, 0.06, -2.31, 0.06, -2.97, 0.00], ['c', -1.47, -0.18, -2.67, -0.51, -3.75, -1.08], ['c', -1.20, -0.63, -1.95, -1.41, -2.19, -2.31], ['c', -0.09, -0.33, -0.09, -0.90, 0.00, -1.23], ['c', 0.24, -0.90, 0.99, -1.68, 2.19, -2.31], ['c', 1.20, -0.63, 2.61, -0.99, 4.23, -1.11], ['z'], ['m', 0.57, 0.66], ['c', -0.87, -0.15, -1.53, 0.00, -2.04, 0.51], ['c', -0.15, 0.15, -0.24, 0.27, -0.33, 0.48], ['c', -0.24, 0.51, -0.36, 1.08, -0.33, 1.77], ['c', 0.03, 0.69, 0.18, 1.26, 0.42, 1.77], ['c', 0.60, 1.17, 1.74, 1.98, 3.18, 2.22], ['c', 1.11, 0.21, 1.95, -0.15, 2.34, -0.99], ['c', 0.24, -0.51, 0.36, -1.08, 0.33, -1.80], ['c', -0.06, -1.11, -0.45, -2.04, -1.17, -2.76], ['c', -0.63, -0.63, -1.47, -1.05, -2.40, -1.20], ['z']], w: 14.985, h: 8.097 },\n\t'noteheads.half': { d: [['M', 7.44, -4.05], ['c', 0.06, -0.03, 0.27, -0.03, 0.48, -0.03], ['c', 1.05, 0.00, 1.71, 0.24, 2.10, 0.81], ['c', 0.42, 0.60, 0.45, 1.35, 0.18, 2.40], ['c', -0.42, 1.59, -1.14, 2.73, -2.16, 3.39], ['c', -1.41, 0.93, -3.18, 1.44, -5.40, 1.53], ['c', -1.17, 0.03, -1.89, -0.21, -2.28, -0.81], ['c', -0.42, -0.60, -0.45, -1.35, -0.18, -2.40], ['c', 0.42, -1.59, 1.14, -2.73, 2.16, -3.39], ['c', 0.63, -0.42, 1.23, -0.72, 1.98, -0.96], ['c', 0.90, -0.30, 1.65, -0.42, 3.12, -0.54], ['z'], ['m', 1.29, 0.87], ['c', -0.27, -0.09, -0.63, -0.12, -0.90, -0.03], ['c', -0.72, 0.24, -1.53, 0.69, -3.27, 1.80], ['c', -2.34, 1.50, -3.30, 2.25, -3.57, 2.79], ['c', -0.36, 0.72, -0.06, 1.50, 0.66, 1.77], ['c', 0.24, 0.12, 0.69, 0.09, 0.99, 0.00], ['c', 0.84, -0.30, 1.92, -0.93, 4.14, -2.37], ['c', 1.62, -1.08, 2.37, -1.71, 2.61, -2.19], ['c', 0.36, -0.72, 0.06, -1.50, -0.66, -1.77], ['z']], w: 10.37, h: 8.132 },\n\t'noteheads.quarter': { d: [['M', 6.09, -4.05], ['c', 0.36, -0.03, 1.20, 0.00, 1.53, 0.06], ['c', 1.17, 0.24, 1.89, 0.84, 2.16, 1.83], ['c', 0.06, 0.18, 0.06, 0.30, 0.06, 0.66], ['c', 0.00, 0.45, 0.00, 0.63, -0.15, 1.08], ['c', -0.66, 2.04, -3.06, 3.93, -5.52, 4.38], ['c', -0.54, 0.09, -1.44, 0.09, -1.83, 0.03], ['c', -1.23, -0.27, -1.98, -0.87, -2.25, -1.86], ['c', -0.06, -0.18, -0.06, -0.30, -0.06, -0.66], ['c', 0.00, -0.45, 0.00, -0.63, 0.15, -1.08], ['c', 0.24, -0.78, 0.75, -1.53, 1.44, -2.22], ['c', 1.20, -1.20, 2.85, -2.01, 4.47, -2.22], ['z']], w: 9.81, h: 8.094 },\n\t'noteheads.slash.nostem': { d: [['M', 9.30, -7.77], ['c', 0.06, -0.06, 0.18, -0.06, 1.71, -0.06], ['l', 1.65, 0.00], ['l', 0.09, 0.09], ['c', 0.06, 0.06, 0.06, 0.09, 0.06, 0.15], ['c', -0.03, 0.12, -9.21, 15.24, -9.30, 15.33], ['c', -0.06, 0.06, -0.18, 0.06, -1.71, 0.06], ['l', -1.65, 0.00], ['l', -0.09, -0.09], ['c', -0.06, -0.06, -0.06, -0.09, -0.06, -0.15], ['c', 0.03, -0.12, 9.21, -15.24, 9.30, -15.33], ['z']], w: 12.81, h: 15.63 },\n\t'noteheads.indeterminate': { d: [['M', 0.78, -4.05], ['c', 0.12, -0.03, 0.24, -0.03, 0.36, 0.03], ['c', 0.03, 0.03, 0.93, 0.72, 1.95, 1.56], ['l', 1.86, 1.50], ['l', 1.86, -1.50], ['c', 1.02, -0.84, 1.92, -1.53, 1.95, -1.56], ['c', 0.21, -0.12, 0.33, -0.09, 0.75, 0.24], ['c', 0.30, 0.27, 0.36, 0.36, 0.36, 0.54], ['c', 0.00, 0.03, -0.03, 0.12, -0.06, 0.18], ['c', -0.03, 0.06, -0.90, 0.75, -1.89, 1.56], ['l', -1.80, 1.47], ['c', 0.00, 0.03, 0.81, 0.69, 1.80, 1.50], ['c', 0.99, 0.81, 1.86, 1.50, 1.89, 1.56], ['c', 0.03, 0.06, 0.06, 0.15, 0.06, 0.18], ['c', 0.00, 0.18, -0.06, 0.27, -0.36, 0.54], ['c', -0.42, 0.33, -0.54, 0.36, -0.75, 0.24], ['c', -0.03, -0.03, -0.93, -0.72, -1.95, -1.56], ['l', -1.86, -1.50], ['l', -1.86, 1.50], ['c', -1.02, 0.84, -1.92, 1.53, -1.95, 1.56], ['c', -0.21, 0.12, -0.33, 0.09, -0.75, -0.24], ['c', -0.30, -0.27, -0.36, -0.36, -0.36, -0.54], ['c', 0.00, -0.03, 0.03, -0.12, 0.06, -0.18], ['c', 0.03, -0.06, 0.90, -0.75, 1.89, -1.56], ['l', 1.80, -1.47], ['c', 0.00, -0.03, -0.81, -0.69, -1.80, -1.50], ['c', -0.99, -0.81, -1.86, -1.50, -1.89, -1.56], ['c', -0.06, -0.12, -0.09, -0.21, -0.03, -0.36], ['c', 0.03, -0.09, 0.57, -0.57, 0.72, -0.63], ['z']], w: 9.843, h: 8.139 },\n\t'scripts.ufermata': { d: [['M', -0.75, -10.77], ['c', 0.12, 0.00, 0.45, -0.03, 0.69, -0.03], ['c', 2.91, -0.03, 5.55, 1.53, 7.41, 4.35], ['c', 1.17, 1.71, 1.95, 3.72, 2.43, 6.03], ['c', 0.12, 0.51, 0.12, 0.57, 0.03, 0.69], ['c', -0.12, 0.21, -0.48, 0.27, -0.69, 0.12], ['c', -0.12, -0.09, -0.18, -0.24, -0.27, -0.69], ['c', -0.78, -3.63, -3.42, -6.54, -6.78, -7.38], ['c', -0.78, -0.21, -1.20, -0.24, -2.07, -0.24], ['c', -0.63, 0.00, -0.84, 0.00, -1.20, 0.06], ['c', -1.83, 0.27, -3.42, 1.08, -4.80, 2.37], ['c', -1.41, 1.35, -2.40, 3.21, -2.85, 5.19], ['c', -0.09, 0.45, -0.15, 0.60, -0.27, 0.69], ['c', -0.21, 0.15, -0.57, 0.09, -0.69, -0.12], ['c', -0.09, -0.12, -0.09, -0.18, 0.03, -0.69], ['c', 0.33, -1.62, 0.78, -3.00, 1.47, -4.38], ['c', 1.77, -3.54, 4.44, -5.67, 7.56, -5.97], ['z'], ['m', 0.33, 7.47], ['c', 1.38, -0.30, 2.58, 0.90, 2.31, 2.25], ['c', -0.15, 0.72, -0.78, 1.35, -1.47, 1.50], ['c', -1.38, 0.27, -2.58, -0.93, -2.31, -2.31], ['c', 0.15, -0.69, 0.78, -1.29, 1.47, -1.44], ['z']], w: 19.748, h: 11.289 },\n\t'scripts.dfermata': { d: [['M', -9.63, -0.42], ['c', 0.15, -0.09, 0.36, -0.06, 0.51, 0.03], ['c', 0.12, 0.09, 0.18, 0.24, 0.27, 0.66], ['c', 0.78, 3.66, 3.42, 6.57, 6.78, 7.41], ['c', 0.78, 0.21, 1.20, 0.24, 2.07, 0.24], ['c', 0.63, 0.00, 0.84, 0.00, 1.20, -0.06], ['c', 1.83, -0.27, 3.42, -1.08, 4.80, -2.37], ['c', 1.41, -1.35, 2.40, -3.21, 2.85, -5.22], ['c', 0.09, -0.42, 0.15, -0.57, 0.27, -0.66], ['c', 0.21, -0.15, 0.57, -0.09, 0.69, 0.12], ['c', 0.09, 0.12, 0.09, 0.18, -0.03, 0.69], ['c', -0.33, 1.62, -0.78, 3.00, -1.47, 4.38], ['c', -1.92, 3.84, -4.89, 6.00, -8.31, 6.00], ['c', -3.42, 0.00, -6.39, -2.16, -8.31, -6.00], ['c', -0.48, -0.96, -0.84, -1.92, -1.14, -2.97], ['c', -0.18, -0.69, -0.42, -1.74, -0.42, -1.92], ['c', 0.00, -0.12, 0.09, -0.27, 0.24, -0.33], ['z'], ['m', 9.21, 0.00], ['c', 1.20, -0.27, 2.34, 0.63, 2.34, 1.86], ['c', 0.00, 0.90, -0.66, 1.68, -1.50, 1.89], ['c', -1.38, 0.27, -2.58, -0.93, -2.31, -2.31], ['c', 0.15, -0.69, 0.78, -1.29, 1.47, -1.44], ['z']], w: 19.744, h: 11.274 },\n\t'scripts.sforzato': { d: [['M', -6.45, -3.69], ['c', 0.06, -0.03, 0.15, -0.06, 0.18, -0.06], ['c', 0.06, 0.00, 2.85, 0.72, 6.24, 1.59], ['l', 6.33, 1.65], ['c', 0.33, 0.06, 0.45, 0.21, 0.45, 0.51], ['c', 0.00, 0.30, -0.12, 0.45, -0.45, 0.51], ['l', -6.33, 1.65], ['c', -3.39, 0.87, -6.18, 1.59, -6.21, 1.59], ['c', -0.21, 0.00, -0.48, -0.24, -0.51, -0.45], ['c', 0.00, -0.15, 0.06, -0.36, 0.18, -0.45], ['c', 0.09, -0.06, 0.87, -0.27, 3.84, -1.05], ['c', 2.04, -0.54, 3.84, -0.99, 4.02, -1.02], ['c', 0.15, -0.06, 1.14, -0.24, 2.22, -0.42], ['c', 1.05, -0.18, 1.92, -0.36, 1.92, -0.36], ['c', 0.00, 0.00, -0.87, -0.18, -1.92, -0.36], ['c', -1.08, -0.18, -2.07, -0.36, -2.22, -0.42], ['c', -0.18, -0.03, -1.98, -0.48, -4.02, -1.02], ['c', -2.97, -0.78, -3.75, -0.99, -3.84, -1.05], ['c', -0.12, -0.09, -0.18, -0.30, -0.18, -0.45], ['c', 0.03, -0.15, 0.15, -0.30, 0.30, -0.39], ['z']], w: 13.5, h: 7.5 },\n\t'scripts.staccato': { d: [['M', -0.36, -1.47], ['c', 0.93, -0.21, 1.86, 0.51, 1.86, 1.47], ['c', 0.00, 0.93, -0.87, 1.65, -1.80, 1.47], ['c', -0.54, -0.12, -1.02, -0.57, -1.14, -1.08], ['c', -0.21, -0.81, 0.27, -1.65, 1.08, -1.86], ['z']], w: 2.989, h: 3.004 },\n\t'scripts.tenuto': { d: [['M', -4.20, -0.48], ['l', 0.12, -0.06], ['l', 4.08, 0.00], ['l', 4.08, 0.00], ['l', 0.12, 0.06], ['c', 0.39, 0.21, 0.39, 0.75, 0.00, 0.96], ['l', -0.12, 0.06], ['l', -4.08, 0.00], ['l', -4.08, 0.00], ['l', -0.12, -0.06], ['c', -0.39, -0.21, -0.39, -0.75, 0.00, -0.96], ['z']], w: 8.985, h: 1.08 },\n\t'scripts.umarcato': { d: [['M', -0.15, -8.19], ['c', 0.15, -0.12, 0.36, -0.03, 0.45, 0.15], ['c', 0.21, 0.42, 3.45, 7.65, 3.45, 7.71], ['c', 0.00, 0.12, -0.12, 0.27, -0.21, 0.30], ['c', -0.03, 0.03, -0.51, 0.03, -1.14, 0.03], ['c', -1.05, 0.00, -1.08, 0.00, -1.17, -0.06], ['c', -0.09, -0.06, -0.24, -0.36, -1.17, -2.40], ['c', -0.57, -1.29, -1.05, -2.34, -1.08, -2.34], ['c', 0.00, -0.03, -0.51, 1.02, -1.08, 2.34], ['c', -0.93, 2.07, -1.08, 2.34, -1.14, 2.40], ['c', -0.06, 0.03, -0.15, 0.06, -0.18, 0.06], ['c', -0.15, 0.00, -0.33, -0.18, -0.33, -0.33], ['c', 0.00, -0.06, 3.24, -7.32, 3.45, -7.71], ['c', 0.03, -0.06, 0.09, -0.15, 0.15, -0.15], ['z']], w: 7.5, h: 8.245 },\n\t'scripts.dmarcato': { d: [['M', -3.57, 0.03], ['c', 0.03, 0.00, 0.57, -0.03, 1.17, -0.03], ['c', 1.05, 0.00, 1.08, 0.00, 1.17, 0.06], ['c', 0.09, 0.06, 0.24, 0.36, 1.17, 2.40], ['c', 0.57, 1.29, 1.05, 2.34, 1.08, 2.34], ['c', 0.00, 0.03, 0.51, -1.02, 1.08, -2.34], ['c', 0.93, -2.07, 1.08, -2.34, 1.14, -2.40], ['c', 0.06, -0.03, 0.15, -0.06, 0.18, -0.06], ['c', 0.15, 0.00, 0.33, 0.18, 0.33, 0.33], ['c', 0.00, 0.09, -3.45, 7.74, -3.54, 7.83], ['c', -0.12, 0.12, -0.30, 0.12, -0.42, 0.00], ['c', -0.09, -0.09, -3.54, -7.74, -3.54, -7.83], ['c', 0.00, -0.09, 0.12, -0.27, 0.18, -0.30], ['z']], w: 7.5, h: 8.25 },\n\t'scripts.stopped': { d: [['M', -0.27, -4.08], ['c', 0.18, -0.09, 0.36, -0.09, 0.54, 0.00], ['c', 0.18, 0.09, 0.24, 0.15, 0.33, 0.30], ['l', 0.06, 0.15], ['l', 0.00, 1.50], ['l', 0.00, 1.47], ['l', 1.47, 0.00], ['l', 1.50, 0.00], ['l', 0.15, 0.06], ['c', 0.15, 0.09, 0.21, 0.15, 0.30, 0.33], ['c', 0.09, 0.18, 0.09, 0.36, 0.00, 0.54], ['c', -0.09, 0.18, -0.15, 0.24, -0.33, 0.33], ['c', -0.12, 0.06, -0.18, 0.06, -1.62, 0.06], ['l', -1.47, 0.00], ['l', 0.00, 1.47], ['l', 0.00, 1.47], ['l', -0.06, 0.15], ['c', -0.09, 0.18, -0.15, 0.24, -0.33, 0.33], ['c', -0.18, 0.09, -0.36, 0.09, -0.54, 0.00], ['c', -0.18, -0.09, -0.24, -0.15, -0.33, -0.33], ['l', -0.06, -0.15], ['l', 0.00, -1.47], ['l', 0.00, -1.47], ['l', -1.47, 0.00], ['c', -1.44, 0.00, -1.50, 0.00, -1.62, -0.06], ['c', -0.18, -0.09, -0.24, -0.15, -0.33, -0.33], ['c', -0.09, -0.18, -0.09, -0.36, 0.00, -0.54], ['c', 0.09, -0.18, 0.15, -0.24, 0.33, -0.33], ['l', 0.15, -0.06], ['l', 1.47, 0.00], ['l', 1.47, 0.00], ['l', 0.00, -1.47], ['c', 0.00, -1.44, 0.00, -1.50, 0.06, -1.62], ['c', 0.09, -0.18, 0.15, -0.24, 0.33, -0.33], ['z']], w: 8.295, h: 8.295 },\n\t'scripts.upbow': { d: [['M', -4.65, -15.54], ['c', 0.12, -0.09, 0.36, -0.06, 0.48, 0.03], ['c', 0.03, 0.03, 0.09, 0.09, 0.12, 0.15], ['c', 0.03, 0.06, 0.66, 2.13, 1.41, 4.62], ['c', 1.35, 4.41, 1.38, 4.56, 2.01, 6.96], ['l', 0.63, 2.46], ['l', 0.63, -2.46], ['c', 0.63, -2.40, 0.66, -2.55, 2.01, -6.96], ['c', 0.75, -2.49, 1.38, -4.56, 1.41, -4.62], ['c', 0.06, -0.15, 0.18, -0.21, 0.36, -0.24], ['c', 0.15, 0.00, 0.30, 0.06, 0.39, 0.18], ['c', 0.15, 0.21, 0.24, -0.18, -2.10, 7.56], ['c', -1.20, 3.96, -2.22, 7.32, -2.25, 7.41], ['c', 0.00, 0.12, -0.06, 0.27, -0.09, 0.30], ['c', -0.12, 0.21, -0.60, 0.21, -0.72, 0.00], ['c', -0.03, -0.03, -0.09, -0.18, -0.09, -0.30], ['c', -0.03, -0.09, -1.05, -3.45, -2.25, -7.41], ['c', -2.34, -7.74, -2.25, -7.35, -2.10, -7.56], ['c', 0.03, -0.03, 0.09, -0.09, 0.15, -0.12], ['z']], w: 9.73, h: 15.608 },\n\t'scripts.downbow': { d: [['M', -5.55, -9.93], ['l', 0.09, -0.06], ['l', 5.46, 0.00], ['l', 5.46, 0.00], ['l', 0.09, 0.06], ['l', 0.06, 0.09], ['l', 0.00, 4.77], ['c', 0.00, 5.28, 0.00, 4.89, -0.18, 5.01], ['c', -0.18, 0.12, -0.42, 0.06, -0.54, -0.12], ['c', -0.06, -0.09, -0.06, -0.18, -0.06, -2.97], ['l', 0.00, -2.85], ['l', -4.83, 0.00], ['l', -4.83, 0.00], ['l', 0.00, 2.85], ['c', 0.00, 2.79, 0.00, 2.88, -0.06, 2.97], ['c', -0.15, 0.24, -0.51, 0.24, -0.66, 0.00], ['c', -0.06, -0.09, -0.06, -0.21, -0.06, -4.89], ['l', 0.00, -4.77], ['z']], w: 11.22, h: 9.992 },\n\t'scripts.turn': { d: [['M', -4.77, -3.90], ['c', 0.36, -0.06, 1.05, -0.06, 1.44, 0.03], ['c', 0.78, 0.15, 1.50, 0.51, 2.34, 1.14], ['c', 0.60, 0.45, 1.05, 0.87, 2.22, 2.01], ['c', 1.11, 1.08, 1.62, 1.50, 2.22, 1.86], ['c', 0.60, 0.36, 1.32, 0.57, 1.92, 0.57], ['c', 0.90, 0.00, 1.71, -0.57, 1.89, -1.35], ['c', 0.24, -0.93, -0.39, -1.89, -1.35, -2.10], ['l', -0.15, -0.06], ['l', -0.09, 0.15], ['c', -0.03, 0.09, -0.15, 0.24, -0.24, 0.33], ['c', -0.72, 0.72, -2.04, 0.54, -2.49, -0.36], ['c', -0.48, -0.93, 0.03, -1.86, 1.17, -2.19], ['c', 0.30, -0.09, 1.02, -0.09, 1.35, 0.00], ['c', 0.99, 0.27, 1.74, 0.87, 2.25, 1.83], ['c', 0.69, 1.41, 0.63, 3.00, -0.21, 4.26], ['c', -0.21, 0.30, -0.69, 0.81, -0.99, 1.02], ['c', -0.30, 0.21, -0.84, 0.45, -1.17, 0.54], ['c', -1.23, 0.36, -2.49, 0.15, -3.72, -0.60], ['c', -0.75, -0.48, -1.41, -1.02, -2.85, -2.46], ['c', -1.11, -1.08, -1.62, -1.50, -2.22, -1.86], ['c', -0.60, -0.36, -1.32, -0.57, -1.92, -0.57], ['c', -0.90, 0.00, -1.71, 0.57, -1.89, 1.35], ['c', -0.24, 0.93, 0.39, 1.89, 1.35, 2.10], ['l', 0.15, 0.06], ['l', 0.09, -0.15], ['c', 0.03, -0.09, 0.15, -0.24, 0.24, -0.33], ['c', 0.72, -0.72, 2.04, -0.54, 2.49, 0.36], ['c', 0.48, 0.93, -0.03, 1.86, -1.17, 2.19], ['c', -0.30, 0.09, -1.02, 0.09, -1.35, 0.00], ['c', -0.99, -0.27, -1.74, -0.87, -2.25, -1.83], ['c', -0.69, -1.41, -0.63, -3.00, 0.21, -4.26], ['c', 0.21, -0.30, 0.69, -0.81, 0.99, -1.02], ['c', 0.48, -0.33, 1.11, -0.57, 1.74, -0.66], ['z']], w: 16.366, h: 7.893 },\n\t'scripts.trill': { d: [['M', -0.51, -16.02], ['c', 0.12, -0.09, 0.21, -0.18, 0.21, -0.18], ['l', -0.81, 4.02], ['l', -0.81, 4.02], ['c', 0.03, 0.00, 0.51, -0.27, 1.08, -0.60], ['c', 0.60, -0.30, 1.14, -0.63, 1.26, -0.66], ['c', 1.14, -0.54, 2.31, -0.60, 3.09, -0.18], ['c', 0.27, 0.15, 0.54, 0.36, 0.60, 0.51], ['l', 0.06, 0.12], ['l', 0.21, -0.21], ['c', 0.90, -0.81, 2.22, -0.99, 3.12, -0.42], ['c', 0.60, 0.42, 0.90, 1.14, 0.78, 2.07], ['c', -0.15, 1.29, -1.05, 2.31, -1.95, 2.25], ['c', -0.48, -0.03, -0.78, -0.30, -0.96, -0.81], ['c', -0.09, -0.27, -0.09, -0.90, -0.03, -1.20], ['c', 0.21, -0.75, 0.81, -1.23, 1.59, -1.32], ['l', 0.24, -0.03], ['l', -0.09, -0.12], ['c', -0.51, -0.66, -1.62, -0.63, -2.31, 0.03], ['c', -0.39, 0.42, -0.30, 0.09, -1.23, 4.77], ['l', -0.81, 4.14], ['c', -0.03, 0.00, -0.12, -0.03, -0.21, -0.09], ['c', -0.33, -0.15, -0.54, -0.18, -0.99, -0.18], ['c', -0.42, 0.00, -0.66, 0.03, -1.05, 0.18], ['c', -0.12, 0.06, -0.21, 0.09, -0.21, 0.09], ['c', 0.00, -0.03, 0.36, -1.86, 0.81, -4.11], ['c', 0.90, -4.47, 0.87, -4.26, 0.69, -4.53], ['c', -0.21, -0.36, -0.66, -0.51, -1.17, -0.36], ['c', -0.15, 0.06, -2.22, 1.14, -2.58, 1.38], ['c', -0.12, 0.09, -0.12, 0.09, -0.21, 0.60], ['l', -0.09, 0.51], ['l', 0.21, 0.24], ['c', 0.63, 0.75, 1.02, 1.47, 1.20, 2.19], ['c', 0.06, 0.27, 0.06, 0.36, 0.06, 0.81], ['c', 0.00, 0.42, 0.00, 0.54, -0.06, 0.78], ['c', -0.15, 0.54, -0.33, 0.93, -0.63, 1.35], ['c', -0.18, 0.24, -0.57, 0.63, -0.81, 0.78], ['c', -0.24, 0.15, -0.63, 0.36, -0.84, 0.42], ['c', -0.27, 0.06, -0.66, 0.06, -0.87, 0.03], ['c', -0.81, -0.18, -1.32, -1.05, -1.38, -2.46], ['c', -0.03, -0.60, 0.03, -0.99, 0.33, -2.46], ['c', 0.21, -1.08, 0.24, -1.32, 0.21, -1.29], ['c', -1.20, 0.48, -2.40, 0.75, -3.21, 0.72], ['c', -0.69, -0.06, -1.17, -0.30, -1.41, -0.72], ['c', -0.39, -0.75, -0.12, -1.80, 0.66, -2.46], ['c', 0.24, -0.18, 0.69, -0.42, 1.02, -0.51], ['c', 0.69, -0.18, 1.53, -0.15, 2.31, 0.09], ['c', 0.30, 0.09, 0.75, 0.30, 0.99, 0.45], ['c', 0.12, 0.09, 0.15, 0.09, 0.15, 0.03], ['c', 0.03, -0.03, 0.33, -1.59, 0.72, -3.45], ['c', 0.36, -1.86, 0.66, -3.42, 0.69, -3.45], ['c', 0.00, -0.03, 0.03, -0.03, 0.21, 0.03], ['c', 0.21, 0.06, 0.27, 0.06, 0.48, 0.06], ['c', 0.42, -0.03, 0.78, -0.18, 1.26, -0.48], ['c', 0.15, -0.12, 0.36, -0.27, 0.48, -0.39], ['z'], ['m', -5.73, 7.68], ['c', -0.27, -0.03, -0.96, -0.06, -1.20, -0.03], ['c', -0.81, 0.12, -1.35, 0.57, -1.50, 1.20], ['c', -0.18, 0.66, 0.12, 1.14, 0.75, 1.29], ['c', 0.66, 0.12, 1.92, -0.12, 3.18, -0.66], ['l', 0.33, -0.15], ['l', 0.09, -0.39], ['c', 0.06, -0.21, 0.09, -0.42, 0.09, -0.45], ['c', 0.00, -0.03, -0.45, -0.30, -0.75, -0.45], ['c', -0.27, -0.15, -0.66, -0.27, -0.99, -0.36], ['z'], ['m', 4.29, 3.63], ['c', -0.24, -0.39, -0.51, -0.75, -0.51, -0.69], ['c', -0.06, 0.12, -0.39, 1.92, -0.45, 2.28], ['c', -0.09, 0.54, -0.12, 1.14, -0.06, 1.38], ['c', 0.06, 0.42, 0.21, 0.60, 0.51, 0.57], ['c', 0.39, -0.06, 0.75, -0.48, 0.93, -1.14], ['c', 0.09, -0.33, 0.09, -1.05, 0.00, -1.38], ['c', -0.09, -0.39, -0.24, -0.69, -0.42, -1.02], ['z']], w: 17.963, h: 16.49 },\n\t'scripts.segno': { d: [['M', -3.72, -11.22], ['c', 0.78, -0.09, 1.59, 0.03, 2.31, 0.42], ['c', 1.20, 0.60, 2.01, 1.71, 2.31, 3.09], ['c', 0.09, 0.42, 0.09, 1.20, 0.03, 1.50], ['c', -0.15, 0.45, -0.39, 0.81, -0.66, 0.93], ['c', -0.33, 0.18, -0.84, 0.21, -1.23, 0.15], ['c', -0.81, -0.18, -1.32, -0.93, -1.26, -1.89], ['c', 0.03, -0.36, 0.09, -0.57, 0.24, -0.90], ['c', 0.15, -0.33, 0.45, -0.60, 0.72, -0.75], ['c', 0.12, -0.06, 0.18, -0.09, 0.18, -0.12], ['c', 0.00, -0.03, -0.03, -0.15, -0.09, -0.24], ['c', -0.18, -0.45, -0.54, -0.87, -0.96, -1.08], ['c', -1.11, -0.57, -2.34, -0.18, -2.88, 0.90], ['c', -0.24, 0.51, -0.33, 1.11, -0.24, 1.83], ['c', 0.27, 1.92, 1.50, 3.54, 3.93, 5.13], ['c', 0.48, 0.33, 1.26, 0.78, 1.29, 0.78], ['c', 0.03, 0.00, 1.35, -2.19, 2.94, -4.89], ['l', 2.88, -4.89], ['l', 0.84, 0.00], ['l', 0.87, 0.00], ['l', -0.03, 0.06], ['c', -0.15, 0.21, -6.15, 10.41, -6.15, 10.44], ['c', 0.00, 0.00, 0.21, 0.15, 0.48, 0.27], ['c', 2.61, 1.47, 4.35, 3.03, 5.13, 4.65], ['c', 1.14, 2.34, 0.51, 5.07, -1.44, 6.39], ['c', -0.66, 0.42, -1.32, 0.63, -2.13, 0.69], ['c', -2.01, 0.09, -3.81, -1.41, -4.26, -3.54], ['c', -0.09, -0.42, -0.09, -1.20, -0.03, -1.50], ['c', 0.15, -0.45, 0.39, -0.81, 0.66, -0.93], ['c', 0.33, -0.18, 0.84, -0.21, 1.23, -0.15], ['c', 0.81, 0.18, 1.32, 0.93, 1.26, 1.89], ['c', -0.03, 0.36, -0.09, 0.57, -0.24, 0.90], ['c', -0.15, 0.33, -0.45, 0.60, -0.72, 0.75], ['c', -0.12, 0.06, -0.18, 0.09, -0.18, 0.12], ['c', 0.00, 0.03, 0.03, 0.15, 0.09, 0.24], ['c', 0.18, 0.45, 0.54, 0.87, 0.96, 1.08], ['c', 1.11, 0.57, 2.34, 0.18, 2.88, -0.90], ['c', 0.24, -0.51, 0.33, -1.11, 0.24, -1.83], ['c', -0.27, -1.92, -1.50, -3.54, -3.93, -5.13], ['c', -0.48, -0.33, -1.26, -0.78, -1.29, -0.78], ['c', -0.03, 0.00, -1.35, 2.19, -2.91, 4.89], ['l', -2.88, 4.89], ['l', -0.87, 0.00], ['l', -0.87, 0.00], ['l', 0.03, -0.06], ['c', 0.15, -0.21, 6.15, -10.41, 6.15, -10.44], ['c', 0.00, 0.00, -0.21, -0.15, -0.48, -0.30], ['c', -2.61, -1.44, -4.35, -3.00, -5.13, -4.62], ['c', -0.90, -1.89, -0.72, -4.02, 0.48, -5.52], ['c', 0.69, -0.84, 1.68, -1.41, 2.73, -1.53], ['z'], ['m', 8.76, 9.09], ['c', 0.03, -0.03, 0.15, -0.03, 0.27, -0.03], ['c', 0.33, 0.03, 0.57, 0.18, 0.72, 0.48], ['c', 0.09, 0.18, 0.09, 0.57, 0.00, 0.75], ['c', -0.09, 0.18, -0.21, 0.30, -0.36, 0.39], ['c', -0.15, 0.06, -0.21, 0.06, -0.39, 0.06], ['c', -0.21, 0.00, -0.27, 0.00, -0.39, -0.06], ['c', -0.30, -0.15, -0.48, -0.45, -0.48, -0.75], ['c', 0.00, -0.39, 0.24, -0.72, 0.63, -0.84], ['z'], ['m', -10.53, 2.61], ['c', 0.03, -0.03, 0.15, -0.03, 0.27, -0.03], ['c', 0.33, 0.03, 0.57, 0.18, 0.72, 0.48], ['c', 0.09, 0.18, 0.09, 0.57, 0.00, 0.75], ['c', -0.09, 0.18, -0.21, 0.30, -0.36, 0.39], ['c', -0.15, 0.06, -0.21, 0.06, -0.39, 0.06], ['c', -0.21, 0.00, -0.27, 0.00, -0.39, -0.06], ['c', -0.30, -0.15, -0.48, -0.45, -0.48, -0.75], ['c', 0.00, -0.39, 0.24, -0.72, 0.63, -0.84], ['z']], w: 15, h: 22.504 },\n\t'scripts.coda': { d: [['M', -0.21, -10.47], ['c', 0.18, -0.12, 0.42, -0.06, 0.54, 0.12], ['c', 0.06, 0.09, 0.06, 0.18, 0.06, 1.50], ['l', 0.00, 1.38], ['l', 0.18, 0.00], ['c', 0.39, 0.06, 0.96, 0.24, 1.38, 0.48], ['c', 1.68, 0.93, 2.82, 3.24, 3.03, 6.12], ['c', 0.03, 0.24, 0.03, 0.45, 0.03, 0.45], ['c', 0.00, 0.03, 0.60, 0.03, 1.35, 0.03], ['c', 1.50, 0.00, 1.47, 0.00, 1.59, 0.18], ['c', 0.09, 0.12, 0.09, 0.30, 0.00, 0.42], ['c', -0.12, 0.18, -0.09, 0.18, -1.59, 0.18], ['c', -0.75, 0.00, -1.35, 0.00, -1.35, 0.03], ['c', 0.00, 0.00, 0.00, 0.21, -0.03, 0.42], ['c', -0.24, 3.15, -1.53, 5.58, -3.45, 6.36], ['c', -0.27, 0.12, -0.72, 0.24, -0.96, 0.27], ['l', -0.18, 0.00], ['l', 0.00, 1.38], ['c', 0.00, 1.32, 0.00, 1.41, -0.06, 1.50], ['c', -0.15, 0.24, -0.51, 0.24, -0.66, 0.00], ['c', -0.06, -0.09, -0.06, -0.18, -0.06, -1.50], ['l', 0.00, -1.38], ['l', -0.18, 0.00], ['c', -0.39, -0.06, -0.96, -0.24, -1.38, -0.48], ['c', -1.68, -0.93, -2.82, -3.24, -3.03, -6.15], ['c', -0.03, -0.21, -0.03, -0.42, -0.03, -0.42], ['c', 0.00, -0.03, -0.60, -0.03, -1.35, -0.03], ['c', -1.50, 0.00, -1.47, 0.00, -1.59, -0.18], ['c', -0.09, -0.12, -0.09, -0.30, 0.00, -0.42], ['c', 0.12, -0.18, 0.09, -0.18, 1.59, -0.18], ['c', 0.75, 0.00, 1.35, 0.00, 1.35, -0.03], ['c', 0.00, 0.00, 0.00, -0.21, 0.03, -0.45], ['c', 0.24, -3.12, 1.53, -5.55, 3.45, -6.33], ['c', 0.27, -0.12, 0.72, -0.24, 0.96, -0.27], ['l', 0.18, 0.00], ['l', 0.00, -1.38], ['c', 0.00, -1.53, 0.00, -1.50, 0.18, -1.62], ['z'], ['m', -0.18, 6.93], ['c', 0.00, -2.97, 0.00, -3.15, -0.06, -3.15], ['c', -0.09, 0.00, -0.51, 0.15, -0.66, 0.21], ['c', -0.87, 0.51, -1.38, 1.62, -1.56, 3.51], ['c', -0.06, 0.54, -0.12, 1.59, -0.12, 2.16], ['l', 0.00, 0.42], ['l', 1.20, 0.00], ['l', 1.20, 0.00], ['l', 0.00, -3.15], ['z'], ['m', 1.17, -3.06], ['c', -0.09, -0.03, -0.21, -0.06, -0.27, -0.09], ['l', -0.12, 0.00], ['l', 0.00, 3.15], ['l', 0.00, 3.15], ['l', 1.20, 0.00], ['l', 1.20, 0.00], ['l', 0.00, -0.81], ['c', -0.06, -2.40, -0.33, -3.69, -0.93, -4.59], ['c', -0.27, -0.39, -0.66, -0.69, -1.08, -0.81], ['z'], ['m', -1.17, 10.14], ['l', 0.00, -3.15], ['l', -1.20, 0.00], ['l', -1.20, 0.00], ['l', 0.00, 0.81], ['c', 0.03, 0.96, 0.06, 1.47, 0.15, 2.13], ['c', 0.24, 2.04, 0.96, 3.12, 2.13, 3.36], ['l', 0.12, 0.00], ['l', 0.00, -3.15], ['z'], ['m', 3.18, -2.34], ['l', 0.00, -0.81], ['l', -1.20, 0.00], ['l', -1.20, 0.00], ['l', 0.00, 3.15], ['l', 0.00, 3.15], ['l', 0.12, 0.00], ['c', 1.17, -0.24, 1.89, -1.32, 2.13, -3.36], ['c', 0.09, -0.66, 0.12, -1.17, 0.15, -2.13], ['z']], w: 16.035, h: 21.062 },\n\t'scripts.comma': { d: [['M', 1.14, -4.62], ['c', 0.30, -0.12, 0.69, -0.03, 0.93, 0.15], ['c', 0.12, 0.12, 0.36, 0.45, 0.51, 0.78], ['c', 0.90, 1.77, 0.54, 4.05, -1.08, 6.75], ['c', -0.36, 0.63, -0.87, 1.38, -0.96, 1.44], ['c', -0.18, 0.12, -0.42, 0.06, -0.54, -0.12], ['c', -0.09, -0.18, -0.09, -0.30, 0.12, -0.60], ['c', 0.96, -1.44, 1.44, -2.97, 1.38, -4.35], ['c', -0.06, -0.93, -0.30, -1.68, -0.78, -2.46], ['c', -0.27, -0.39, -0.33, -0.63, -0.24, -0.96], ['c', 0.09, -0.27, 0.36, -0.54, 0.66, -0.63], ['z']], w: 3.042, h: 9.237 },\n\t'scripts.roll': { d: [['M', 1.95, -6.00], ['c', 0.21, -0.09, 0.36, -0.09, 0.57, 0.00], ['c', 0.39, 0.15, 0.63, 0.39, 1.47, 1.35], ['c', 0.66, 0.75, 0.78, 0.87, 1.08, 1.05], ['c', 0.75, 0.45, 1.65, 0.42, 2.40, -0.06], ['c', 0.12, -0.09, 0.27, -0.27, 0.54, -0.60], ['c', 0.42, -0.54, 0.51, -0.63, 0.69, -0.63], ['c', 0.09, 0.00, 0.30, 0.12, 0.36, 0.21], ['c', 0.09, 0.12, 0.12, 0.30, 0.03, 0.42], ['c', -0.06, 0.12, -3.15, 3.90, -3.30, 4.08], ['c', -0.06, 0.06, -0.18, 0.12, -0.27, 0.18], ['c', -0.27, 0.12, -0.60, 0.06, -0.99, -0.27], ['c', -0.27, -0.21, -0.42, -0.39, -1.08, -1.14], ['c', -0.63, -0.72, -0.81, -0.90, -1.17, -1.08], ['c', -0.36, -0.18, -0.57, -0.21, -0.99, -0.21], ['c', -0.39, 0.00, -0.63, 0.03, -0.93, 0.18], ['c', -0.36, 0.15, -0.51, 0.27, -0.90, 0.81], ['c', -0.24, 0.27, -0.45, 0.51, -0.48, 0.54], ['c', -0.12, 0.09, -0.27, 0.06, -0.39, 0.00], ['c', -0.24, -0.15, -0.33, -0.39, -0.21, -0.60], ['c', 0.09, -0.12, 3.18, -3.87, 3.33, -4.02], ['c', 0.06, -0.06, 0.18, -0.15, 0.24, -0.21], ['z']], w: 10.817, h: 6.125 },\n\t'scripts.prall': { d: [['M', -4.38, -3.69], ['c', 0.06, -0.03, 0.18, -0.06, 0.24, -0.06], ['c', 0.30, 0.00, 0.27, -0.03, 1.89, 1.95], ['l', 1.53, 1.83], ['c', 0.03, 0.00, 0.57, -0.84, 1.23, -1.83], ['c', 1.14, -1.68, 1.23, -1.83, 1.35, -1.89], ['c', 0.06, -0.03, 0.18, -0.06, 0.24, -0.06], ['c', 0.30, 0.00, 0.27, -0.03, 1.89, 1.95], ['l', 1.53, 1.83], ['l', 0.48, -0.69], ['c', 0.51, -0.78, 0.54, -0.84, 0.69, -0.90], ['c', 0.42, -0.18, 0.87, 0.15, 0.81, 0.60], ['c', -0.03, 0.12, -0.30, 0.51, -1.50, 2.37], ['c', -1.38, 2.07, -1.50, 2.22, -1.62, 2.28], ['c', -0.06, 0.03, -0.18, 0.06, -0.24, 0.06], ['c', -0.30, 0.00, -0.27, 0.03, -1.89, -1.95], ['l', -1.53, -1.83], ['c', -0.03, 0.00, -0.57, 0.84, -1.23, 1.83], ['c', -1.14, 1.68, -1.23, 1.83, -1.35, 1.89], ['c', -0.06, 0.03, -0.18, 0.06, -0.24, 0.06], ['c', -0.30, 0.00, -0.27, 0.03, -1.89, -1.95], ['l', -1.53, -1.83], ['l', -0.48, 0.69], ['c', -0.51, 0.78, -0.54, 0.84, -0.69, 0.90], ['c', -0.42, 0.18, -0.87, -0.15, -0.81, -0.60], ['c', 0.03, -0.12, 0.30, -0.51, 1.50, -2.37], ['c', 1.38, -2.07, 1.50, -2.22, 1.62, -2.28], ['z']], w: 15.011, h: 7.5 },\n\t'scripts.arpeggio': { d: [['M', 1.5, 0], ['c', 1.5, 2, 1.5, 3, 1.5, 3], ['s', 0, 1, -2, 1.5], ['s', -0.5, 3, 1, 5.5], ['l', 1.5, 0], ['s', -1.75, -2, -1.9, -3.25], ['s', 2.15, -0.6, 2.95, -1.6], ['s', 0.45, -1, 0.5, -1.25], ['s', 0, -1, -2, -3.9], ['l', -1.5, 0], ['z']], w: 5, h: 10 },\n\t'scripts.mordent': { d: [['M', -0.21, -4.95], ['c', 0.27, -0.15, 0.63, 0.00, 0.75, 0.27], ['c', 0.06, 0.12, 0.06, 0.24, 0.06, 1.44], ['l', 0.00, 1.29], ['l', 0.57, -0.84], ['c', 0.51, -0.75, 0.57, -0.84, 0.69, -0.90], ['c', 0.06, -0.03, 0.18, -0.06, 0.24, -0.06], ['c', 0.30, 0.00, 0.27, -0.03, 1.89, 1.95], ['l', 1.53, 1.83], ['l', 0.48, -0.69], ['c', 0.51, -0.78, 0.54, -0.84, 0.69, -0.90], ['c', 0.42, -0.18, 0.87, 0.15, 0.81, 0.60], ['c', -0.03, 0.12, -0.30, 0.51, -1.50, 2.37], ['c', -1.38, 2.07, -1.50, 2.22, -1.62, 2.28], ['c', -0.06, 0.03, -0.18, 0.06, -0.24, 0.06], ['c', -0.30, 0.00, -0.27, 0.03, -1.83, -1.89], ['c', -0.81, -0.99, -1.50, -1.80, -1.53, -1.86], ['c', -0.06, -0.03, -0.06, -0.03, -0.12, 0.03], ['c', -0.06, 0.06, -0.06, 0.15, -0.06, 2.28], ['c', 0.00, 1.95, 0.00, 2.25, -0.06, 2.34], ['c', -0.18, 0.45, -0.81, 0.48, -1.05, 0.03], ['c', -0.03, -0.06, -0.06, -0.24, -0.06, -1.41], ['l', 0.00, -1.35], ['l', -0.57, 0.84], ['c', -0.54, 0.78, -0.60, 0.87, -0.72, 0.93], ['c', -0.06, 0.03, -0.18, 0.06, -0.24, 0.06], ['c', -0.30, 0.00, -0.27, 0.03, -1.89, -1.95], ['l', -1.53, -1.83], ['l', -0.48, 0.69], ['c', -0.51, 0.78, -0.54, 0.84, -0.69, 0.90], ['c', -0.42, 0.18, -0.87, -0.15, -0.81, -0.60], ['c', 0.03, -0.12, 0.30, -0.51, 1.50, -2.37], ['c', 1.38, -2.07, 1.50, -2.22, 1.62, -2.28], ['c', 0.06, -0.03, 0.18, -0.06, 0.24, -0.06], ['c', 0.30, 0.00, 0.27, -0.03, 1.89, 1.95], ['l', 1.53, 1.83], ['c', 0.03, 0.00, 0.06, -0.06, 0.09, -0.09], ['c', 0.06, -0.12, 0.06, -0.15, 0.06, -2.28], ['c', 0.00, -1.92, 0.00, -2.22, 0.06, -2.31], ['c', 0.06, -0.15, 0.15, -0.24, 0.30, -0.30], ['z']], w: 15.011, h: 10.012 },\n\t'flags.u8th': { d: [['M', -0.42, 3.75], ['l', 0.00, -3.75], ['l', 0.21, 0.00], ['l', 0.21, 0.00], ['l', 0.00, 0.18], ['c', 0.00, 0.30, 0.06, 0.84, 0.12, 1.23], ['c', 0.24, 1.53, 0.90, 3.12, 2.13, 5.16], ['l', 0.99, 1.59], ['c', 0.87, 1.44, 1.38, 2.34, 1.77, 3.09], ['c', 0.81, 1.68, 1.20, 3.06, 1.26, 4.53], ['c', 0.03, 1.53, -0.21, 3.27, -0.75, 5.01], ['c', -0.21, 0.69, -0.51, 1.50, -0.60, 1.59], ['c', -0.09, 0.12, -0.27, 0.21, -0.42, 0.21], ['c', -0.15, 0.00, -0.42, -0.12, -0.51, -0.21], ['c', -0.15, -0.18, -0.18, -0.42, -0.09, -0.66], ['c', 0.15, -0.33, 0.45, -1.20, 0.57, -1.62], ['c', 0.42, -1.38, 0.60, -2.58, 0.60, -3.90], ['c', 0.00, -0.66, 0.00, -0.81, -0.06, -1.11], ['c', -0.39, -2.07, -1.80, -4.26, -4.59, -7.14], ['l', -0.42, -0.45], ['l', -0.21, 0.00], ['l', -0.21, 0.00], ['l', 0.00, -3.75], ['z']], w: 6.692, h: 22.59 },\n\t'flags.u16th': { d: [['M', -0.42, 7.50], ['l', 0.00, -7.50], ['l', 0.21, 0.00], ['l', 0.21, 0.00], ['l', 0.00, 0.39], ['c', 0.06, 1.08, 0.39, 2.19, 0.99, 3.39], ['c', 0.45, 0.90, 0.87, 1.59, 1.95, 3.12], ['c', 1.29, 1.86, 1.77, 2.64, 2.22, 3.57], ['c', 0.45, 0.93, 0.72, 1.80, 0.87, 2.64], ['c', 0.06, 0.51, 0.06, 1.50, 0.00, 1.92], ['c', -0.12, 0.60, -0.30, 1.20, -0.54, 1.71], ['l', -0.09, 0.24], ['l', 0.18, 0.45], ['c', 0.51, 1.20, 0.72, 2.22, 0.69, 3.42], ['c', -0.06, 1.53, -0.39, 3.03, -0.99, 4.53], ['c', -0.30, 0.75, -0.36, 0.81, -0.57, 0.90], ['c', -0.15, 0.09, -0.33, 0.06, -0.48, 0.00], ['c', -0.18, -0.09, -0.27, -0.18, -0.33, -0.33], ['c', -0.09, -0.18, -0.06, -0.30, 0.12, -0.75], ['c', 0.66, -1.41, 1.02, -2.88, 1.08, -4.32], ['c', 0.00, -0.60, -0.03, -1.05, -0.18, -1.59], ['c', -0.30, -1.20, -0.99, -2.40, -2.25, -3.87], ['c', -0.42, -0.48, -1.53, -1.62, -2.19, -2.22], ['l', -0.45, -0.42], ['l', -0.03, 1.11], ['l', 0.00, 1.11], ['l', -0.21, 0.00], ['l', -0.21, 0.00], ['l', 0.00, -7.50], ['z'], ['m', 1.65, 0.09], ['c', -0.30, -0.30, -0.69, -0.72, -0.90, -0.87], ['l', -0.33, -0.33], ['l', 0.00, 0.15], ['c', 0.00, 0.30, 0.06, 0.81, 0.15, 1.26], ['c', 0.27, 1.29, 0.87, 2.61, 2.04, 4.29], ['c', 0.15, 0.24, 0.60, 0.87, 0.96, 1.38], ['l', 1.08, 1.53], ['l', 0.42, 0.63], ['c', 0.03, 0.00, 0.12, -0.36, 0.21, -0.72], ['c', 0.06, -0.33, 0.06, -1.20, 0.00, -1.62], ['c', -0.33, -1.71, -1.44, -3.48, -3.63, -5.70], ['z']], w: 6.693, h: 26.337 },\n\t'flags.u32nd': { d: [['M', -0.42, 11.25], ['l', 0.00, -11.25], ['l', 0.21, 0.00], ['l', 0.21, 0.00], ['l', 0.00, 0.36], ['c', 0.09, 1.68, 0.69, 3.27, 2.07, 5.46], ['l', 0.87, 1.35], ['c', 1.02, 1.62, 1.47, 2.37, 1.86, 3.18], ['c', 0.48, 1.02, 0.78, 1.92, 0.93, 2.88], ['c', 0.06, 0.48, 0.06, 1.50, 0.00, 1.89], ['c', -0.09, 0.42, -0.21, 0.87, -0.36, 1.26], ['l', -0.12, 0.30], ['l', 0.15, 0.39], ['c', 0.69, 1.56, 0.84, 2.88, 0.54, 4.38], ['c', -0.09, 0.45, -0.27, 1.08, -0.45, 1.47], ['l', -0.12, 0.24], ['l', 0.18, 0.36], ['c', 0.33, 0.72, 0.57, 1.56, 0.69, 2.34], ['c', 0.12, 1.02, -0.06, 2.52, -0.42, 3.84], ['c', -0.27, 0.93, -0.75, 2.13, -0.93, 2.31], ['c', -0.18, 0.15, -0.45, 0.18, -0.66, 0.09], ['c', -0.18, -0.09, -0.27, -0.18, -0.33, -0.33], ['c', -0.09, -0.18, -0.06, -0.30, 0.06, -0.60], ['c', 0.21, -0.36, 0.42, -0.90, 0.57, -1.38], ['c', 0.51, -1.41, 0.69, -3.06, 0.48, -4.08], ['c', -0.15, -0.81, -0.57, -1.68, -1.20, -2.55], ['c', -0.72, -0.99, -1.83, -2.13, -3.30, -3.33], ['l', -0.48, -0.42], ['l', -0.03, 1.53], ['l', 0.00, 1.56], ['l', -0.21, 0.00], ['l', -0.21, 0.00], ['l', 0.00, -11.25], ['z'], ['m', 1.26, -3.96], ['c', -0.27, -0.30, -0.54, -0.60, -0.66, -0.72], ['l', -0.18, -0.21], ['l', 0.00, 0.42], ['c', 0.06, 0.87, 0.24, 1.74, 0.66, 2.67], ['c', 0.36, 0.87, 0.96, 1.86, 1.92, 3.18], ['c', 0.21, 0.33, 0.63, 0.87, 0.87, 1.23], ['c', 0.27, 0.39, 0.60, 0.84, 0.75, 1.08], ['l', 0.27, 0.39], ['l', 0.03, -0.12], ['c', 0.12, -0.45, 0.15, -1.05, 0.09, -1.59], ['c', -0.27, -1.86, -1.38, -3.78, -3.75, -6.33], ['z'], ['m', -0.27, 6.09], ['c', -0.27, -0.21, -0.48, -0.42, -0.51, -0.45], ['c', -0.06, -0.03, -0.06, -0.03, -0.06, 0.21], ['c', 0.00, 0.90, 0.30, 2.04, 0.81, 3.09], ['c', 0.48, 1.02, 0.96, 1.77, 2.37, 3.63], ['c', 0.60, 0.78, 1.05, 1.44, 1.29, 1.77], ['c', 0.06, 0.12, 0.15, 0.21, 0.15, 0.18], ['c', 0.03, -0.03, 0.18, -0.57, 0.24, -0.87], ['c', 0.06, -0.45, 0.06, -1.32, -0.03, -1.74], ['c', -0.09, -0.48, -0.24, -0.90, -0.51, -1.44], ['c', -0.66, -1.35, -1.83, -2.70, -3.75, -4.38], ['z']], w: 6.697, h: 32.145 },\n\t'flags.u64th': { d: [['M', -0.42, 15.00], ['l', 0.00, -15.00], ['l', 0.21, 0.00], ['l', 0.21, 0.00], ['l', 0.00, 0.36], ['c', 0.06, 1.20, 0.39, 2.37, 1.02, 3.66], ['c', 0.39, 0.81, 0.84, 1.56, 1.80, 3.09], ['c', 0.81, 1.26, 1.05, 1.68, 1.35, 2.22], ['c', 0.87, 1.50, 1.35, 2.79, 1.56, 4.08], ['c', 0.06, 0.54, 0.06, 1.56, -0.03, 2.04], ['c', -0.09, 0.48, -0.21, 0.99, -0.36, 1.35], ['l', -0.12, 0.27], ['l', 0.12, 0.27], ['c', 0.09, 0.15, 0.21, 0.45, 0.27, 0.66], ['c', 0.69, 1.89, 0.63, 3.66, -0.18, 5.46], ['l', -0.18, 0.39], ['l', 0.15, 0.33], ['c', 0.30, 0.66, 0.51, 1.44, 0.63, 2.10], ['c', 0.06, 0.48, 0.06, 1.35, 0.00, 1.71], ['c', -0.15, 0.57, -0.42, 1.20, -0.78, 1.68], ['l', -0.21, 0.27], ['l', 0.18, 0.33], ['c', 0.57, 1.05, 0.93, 2.13, 1.02, 3.18], ['c', 0.06, 0.72, 0.00, 1.83, -0.21, 2.79], ['c', -0.18, 1.02, -0.63, 2.34, -1.02, 3.09], ['c', -0.15, 0.33, -0.48, 0.45, -0.78, 0.30], ['c', -0.18, -0.09, -0.27, -0.18, -0.33, -0.33], ['c', -0.09, -0.18, -0.06, -0.30, 0.03, -0.54], ['c', 0.75, -1.50, 1.23, -3.45, 1.17, -4.89], ['c', -0.06, -1.02, -0.42, -2.01, -1.17, -3.15], ['c', -0.48, -0.72, -1.02, -1.35, -1.89, -2.22], ['c', -0.57, -0.57, -1.56, -1.50, -1.92, -1.77], ['l', -0.12, -0.09], ['l', 0.00, 1.68], ['l', 0.00, 1.68], ['l', -0.21, 0.00], ['l', -0.21, 0.00], ['l', 0.00, -15.00], ['z'], ['m', 0.93, -8.07], ['c', -0.27, -0.30, -0.48, -0.54, -0.51, -0.54], ['c', 0.00, 0.00, 0.00, 0.69, 0.03, 1.02], ['c', 0.15, 1.47, 0.75, 2.94, 2.04, 4.83], ['l', 1.08, 1.53], ['c', 0.39, 0.57, 0.84, 1.20, 0.99, 1.44], ['c', 0.15, 0.24, 0.30, 0.45, 0.30, 0.45], ['c', 0.00, 0.00, 0.03, -0.09, 0.06, -0.21], ['c', 0.36, -1.59, -0.15, -3.33, -1.47, -5.40], ['c', -0.63, -0.93, -1.35, -1.83, -2.52, -3.12], ['z'], ['m', 0.06, 6.72], ['c', -0.24, -0.21, -0.48, -0.42, -0.51, -0.45], ['l', -0.06, -0.06], ['l', 0.00, 0.33], ['c', 0.00, 1.20, 0.30, 2.34, 0.93, 3.60], ['c', 0.45, 0.90, 0.96, 1.68, 2.25, 3.51], ['c', 0.39, 0.54, 0.84, 1.17, 1.02, 1.44], ['c', 0.21, 0.33, 0.33, 0.51, 0.33, 0.48], ['c', 0.06, -0.09, 0.21, -0.63, 0.30, -0.99], ['c', 0.06, -0.33, 0.06, -0.45, 0.06, -0.96], ['c', 0.00, -0.60, -0.03, -0.84, -0.18, -1.35], ['c', -0.30, -1.08, -1.02, -2.28, -2.13, -3.57], ['c', -0.39, -0.45, -1.44, -1.47, -2.01, -1.98], ['z'], ['m', 0.00, 6.72], ['c', -0.24, -0.21, -0.48, -0.39, -0.51, -0.42], ['l', -0.06, -0.06], ['l', 0.00, 0.33], ['c', 0.00, 1.41, 0.45, 2.82, 1.38, 4.35], ['c', 0.42, 0.72, 0.72, 1.14, 1.86, 2.73], ['c', 0.36, 0.45, 0.75, 0.99, 0.87, 1.20], ['c', 0.15, 0.21, 0.30, 0.36, 0.30, 0.36], ['c', 0.06, 0.00, 0.30, -0.48, 0.39, -0.75], ['c', 0.09, -0.36, 0.12, -0.63, 0.12, -1.05], ['c', -0.06, -1.05, -0.45, -2.04, -1.20, -3.18], ['c', -0.57, -0.87, -1.11, -1.53, -2.07, -2.49], ['c', -0.36, -0.33, -0.84, -0.78, -1.08, -1.02], ['z']], w: 6.682, h: 39.694 },\n\t'flags.d8th': { d: [['M', 5.67, -21.63], ['c', 0.24, -0.12, 0.54, -0.06, 0.69, 0.15], ['c', 0.06, 0.06, 0.21, 0.36, 0.39, 0.66], ['c', 0.84, 1.77, 1.26, 3.36, 1.32, 5.10], ['c', 0.03, 1.29, -0.21, 2.37, -0.81, 3.63], ['c', -0.60, 1.23, -1.26, 2.13, -3.21, 4.38], ['c', -1.35, 1.53, -1.86, 2.19, -2.40, 2.97], ['c', -0.63, 0.93, -1.11, 1.92, -1.38, 2.79], ['c', -0.15, 0.54, -0.27, 1.35, -0.27, 1.80], ['l', 0.00, 0.15], ['l', -0.21, 0.00], ['l', -0.21, 0.00], ['l', 0.00, -3.75], ['l', 0.00, -3.75], ['l', 0.21, 0.00], ['l', 0.21, 0.00], ['l', 0.48, -0.30], ['c', 1.83, -1.11, 3.12, -2.10, 4.17, -3.12], ['c', 0.78, -0.81, 1.32, -1.53, 1.71, -2.31], ['c', 0.45, -0.93, 0.60, -1.74, 0.51, -2.88], ['c', -0.12, -1.56, -0.63, -3.18, -1.47, -4.68], ['c', -0.12, -0.21, -0.15, -0.33, -0.06, -0.51], ['c', 0.06, -0.15, 0.15, -0.24, 0.33, -0.33], ['z']], w: 8.492, h: 21.691 },\n\t'flags.ugrace': { d: [['M', 6.03, 6.93], ['c', 0.15, -0.09, 0.33, -0.06, 0.51, 0.00], ['c', 0.15, 0.09, 0.21, 0.15, 0.30, 0.33], ['c', 0.09, 0.18, 0.06, 0.39, -0.03, 0.54], ['c', -0.06, 0.15, -10.89, 8.88, -11.07, 8.97], ['c', -0.15, 0.09, -0.33, 0.06, -0.48, 0.00], ['c', -0.18, -0.09, -0.24, -0.15, -0.33, -0.33], ['c', -0.09, -0.18, -0.06, -0.39, 0.03, -0.54], ['c', 0.06, -0.15, 10.89, -8.88, 11.07, -8.97], ['z']], w: 12.019, h: 9.954 },\n\t'flags.dgrace': { d: [['M', -6.06, -15.93], ['c', 0.18, -0.09, 0.33, -0.12, 0.48, -0.06], ['c', 0.18, 0.09, 14.01, 8.04, 14.10, 8.10], ['c', 0.12, 0.12, 0.18, 0.33, 0.18, 0.51], ['c', -0.03, 0.21, -0.15, 0.39, -0.36, 0.48], ['c', -0.18, 0.09, -0.33, 0.12, -0.48, 0.06], ['c', -0.18, -0.09, -14.01, -8.04, -14.10, -8.10], ['c', -0.12, -0.12, -0.18, -0.33, -0.18, -0.51], ['c', 0.03, -0.21, 0.15, -0.39, 0.36, -0.48], ['z']], w: 15.12, h: 9.212 },\n\t'flags.d16th': { d: [['M', 6.84, -22.53], ['c', 0.27, -0.12, 0.57, -0.06, 0.72, 0.15], ['c', 0.15, 0.15, 0.33, 0.87, 0.45, 1.56], ['c', 0.06, 0.33, 0.06, 1.35, 0.00, 1.65], ['c', -0.06, 0.33, -0.15, 0.78, -0.27, 1.11], ['c', -0.12, 0.33, -0.45, 0.96, -0.66, 1.32], ['l', -0.18, 0.27], ['l', 0.09, 0.18], ['c', 0.48, 1.02, 0.72, 2.25, 0.69, 3.30], ['c', -0.06, 1.23, -0.42, 2.28, -1.26, 3.45], ['c', -0.57, 0.87, -0.99, 1.32, -3.00, 3.39], ['c', -1.56, 1.56, -2.22, 2.40, -2.76, 3.45], ['c', -0.42, 0.84, -0.66, 1.80, -0.66, 2.55], ['l', 0.00, 0.15], ['l', -0.21, 0.00], ['l', -0.21, 0.00], ['l', 0.00, -7.50], ['l', 0.00, -7.50], ['l', 0.21, 0.00], ['l', 0.21, 0.00], ['l', 0.00, 1.14], ['l', 0.00, 1.11], ['l', 0.27, -0.15], ['c', 1.11, -0.57, 1.77, -0.99, 2.52, -1.47], ['c', 2.37, -1.56, 3.69, -3.15, 4.05, -4.83], ['c', 0.03, -0.18, 0.03, -0.39, 0.03, -0.78], ['c', 0.00, -0.60, -0.03, -0.93, -0.24, -1.50], ['c', -0.06, -0.18, -0.12, -0.39, -0.15, -0.45], ['c', -0.03, -0.24, 0.12, -0.48, 0.36, -0.60], ['z'], ['m', -0.63, 7.50], ['c', -0.06, -0.18, -0.15, -0.36, -0.15, -0.36], ['c', -0.03, 0.00, -0.03, 0.03, -0.06, 0.06], ['c', -0.06, 0.12, -0.96, 1.02, -1.95, 1.98], ['c', -0.63, 0.57, -1.26, 1.17, -1.44, 1.35], ['c', -1.53, 1.62, -2.28, 2.85, -2.55, 4.32], ['c', -0.03, 0.18, -0.03, 0.54, -0.06, 0.99], ['l', 0.00, 0.69], ['l', 0.18, -0.09], ['c', 0.93, -0.54, 2.10, -1.29, 2.82, -1.83], ['c', 0.69, -0.51, 1.02, -0.81, 1.53, -1.29], ['c', 1.86, -1.89, 2.37, -3.66, 1.68, -5.82], ['z']], w: 8.475, h: 22.591 },\n\t'flags.d32nd': { d: [['M', 6.84, -29.13], ['c', 0.27, -0.12, 0.57, -0.06, 0.72, 0.15], ['c', 0.12, 0.12, 0.27, 0.63, 0.36, 1.11], ['c', 0.33, 1.59, 0.06, 3.06, -0.81, 4.47], ['l', -0.18, 0.27], ['l', 0.09, 0.15], ['c', 0.12, 0.24, 0.33, 0.69, 0.45, 1.05], ['c', 0.63, 1.83, 0.45, 3.57, -0.57, 5.22], ['l', -0.18, 0.30], ['l', 0.15, 0.27], ['c', 0.42, 0.87, 0.60, 1.71, 0.57, 2.61], ['c', -0.06, 1.29, -0.48, 2.46, -1.35, 3.78], ['c', -0.54, 0.81, -0.93, 1.29, -2.46, 3.00], ['c', -0.51, 0.54, -1.05, 1.17, -1.26, 1.41], ['c', -1.56, 1.86, -2.25, 3.36, -2.37, 5.01], ['l', 0.00, 0.33], ['l', -0.21, 0.00], ['l', -0.21, 0.00], ['l', 0.00, -11.25], ['l', 0.00, -11.25], ['l', 0.21, 0.00], ['l', 0.21, 0.00], ['l', 0.00, 1.35], ['l', 0.03, 1.35], ['l', 0.78, -0.39], ['c', 1.38, -0.69, 2.34, -1.26, 3.24, -1.92], ['c', 1.38, -1.02, 2.28, -2.13, 2.64, -3.21], ['c', 0.15, -0.48, 0.18, -0.72, 0.18, -1.29], ['c', 0.00, -0.57, -0.06, -0.90, -0.24, -1.47], ['c', -0.06, -0.18, -0.12, -0.39, -0.15, -0.45], ['c', -0.03, -0.24, 0.12, -0.48, 0.36, -0.60], ['z'], ['m', -0.63, 7.20], ['c', -0.09, -0.18, -0.12, -0.21, -0.12, -0.15], ['c', -0.03, 0.09, -1.02, 1.08, -2.04, 2.04], ['c', -1.17, 1.08, -1.65, 1.56, -2.07, 2.04], ['c', -0.84, 0.96, -1.38, 1.86, -1.68, 2.76], ['c', -0.21, 0.57, -0.27, 0.99, -0.30, 1.65], ['l', 0.00, 0.54], ['l', 0.66, -0.33], ['c', 3.57, -1.86, 5.49, -3.69, 5.94, -5.70], ['c', 0.06, -0.39, 0.06, -1.20, -0.03, -1.65], ['c', -0.06, -0.39, -0.24, -0.90, -0.36, -1.20], ['z'], ['m', -0.06, 7.20], ['c', -0.06, -0.15, -0.12, -0.33, -0.15, -0.45], ['l', -0.06, -0.18], ['l', -0.18, 0.21], ['l', -1.83, 1.83], ['c', -0.87, 0.90, -1.77, 1.80, -1.95, 2.01], ['c', -1.08, 1.29, -1.62, 2.31, -1.89, 3.51], ['c', -0.06, 0.30, -0.06, 0.51, -0.09, 0.93], ['l', 0.00, 0.57], ['l', 0.09, -0.06], ['c', 0.75, -0.45, 1.89, -1.26, 2.52, -1.74], ['c', 0.81, -0.66, 1.74, -1.53, 2.22, -2.16], ['c', 1.26, -1.53, 1.68, -3.06, 1.32, -4.47], ['z']], w: 8.385, h: 29.191 },\n\t'flags.d64th': { d: [['M', 7.08, -32.88], ['c', 0.30, -0.12, 0.66, -0.03, 0.78, 0.24], ['c', 0.18, 0.33, 0.27, 2.10, 0.15, 2.64], ['c', -0.09, 0.39, -0.21, 0.78, -0.39, 1.08], ['l', -0.15, 0.30], ['l', 0.09, 0.27], ['c', 0.03, 0.12, 0.09, 0.45, 0.12, 0.69], ['c', 0.27, 1.44, 0.18, 2.55, -0.30, 3.60], ['l', -0.12, 0.33], ['l', 0.06, 0.42], ['c', 0.27, 1.35, 0.33, 2.82, 0.21, 3.63], ['c', -0.12, 0.60, -0.30, 1.23, -0.57, 1.80], ['l', -0.15, 0.27], ['l', 0.03, 0.42], ['c', 0.06, 1.02, 0.06, 2.70, 0.03, 3.06], ['c', -0.15, 1.47, -0.66, 2.76, -1.74, 4.41], ['c', -0.45, 0.69, -0.75, 1.11, -1.74, 2.37], ['c', -1.05, 1.38, -1.50, 1.98, -1.95, 2.73], ['c', -0.93, 1.50, -1.38, 2.82, -1.44, 4.20], ['l', 0.00, 0.42], ['l', -0.21, 0.00], ['l', -0.21, 0.00], ['l', 0.00, -15.00], ['l', 0.00, -15.00], ['l', 0.21, 0.00], ['l', 0.21, 0.00], ['l', 0.00, 1.86], ['l', 0.00, 1.89], ['c', 0.00, 0.00, 0.21, -0.03, 0.45, -0.09], ['c', 2.22, -0.39, 4.08, -1.11, 5.19, -2.01], ['c', 0.63, -0.54, 1.02, -1.14, 1.20, -1.80], ['c', 0.06, -0.30, 0.06, -1.14, -0.03, -1.65], ['c', -0.03, -0.18, -0.06, -0.39, -0.09, -0.48], ['c', -0.03, -0.24, 0.12, -0.48, 0.36, -0.60], ['z'], ['m', -0.45, 6.15], ['c', -0.03, -0.18, -0.06, -0.42, -0.06, -0.54], ['l', -0.03, -0.18], ['l', -0.33, 0.30], ['c', -0.42, 0.36, -0.87, 0.72, -1.68, 1.29], ['c', -1.98, 1.38, -2.25, 1.59, -2.85, 2.16], ['c', -0.75, 0.69, -1.23, 1.44, -1.47, 2.19], ['c', -0.15, 0.45, -0.18, 0.63, -0.21, 1.35], ['l', 0.00, 0.66], ['l', 0.39, -0.18], ['c', 1.83, -0.90, 3.45, -1.95, 4.47, -2.91], ['c', 0.93, -0.90, 1.53, -1.83, 1.74, -2.82], ['c', 0.06, -0.33, 0.06, -0.87, 0.03, -1.32], ['z'], ['m', -0.27, 4.86], ['c', -0.03, -0.21, -0.06, -0.36, -0.06, -0.36], ['c', 0.00, -0.03, -0.12, 0.09, -0.24, 0.24], ['c', -0.39, 0.48, -0.99, 1.08, -2.16, 2.19], ['c', -1.47, 1.38, -1.92, 1.83, -2.46, 2.49], ['c', -0.66, 0.87, -1.08, 1.74, -1.29, 2.58], ['c', -0.09, 0.42, -0.15, 0.87, -0.15, 1.44], ['l', 0.00, 0.54], ['l', 0.48, -0.33], ['c', 1.50, -1.02, 2.58, -1.89, 3.51, -2.82], ['c', 1.47, -1.47, 2.25, -2.85, 2.40, -4.26], ['c', 0.03, -0.39, 0.03, -1.17, -0.03, -1.71], ['z'], ['m', -0.66, 7.68], ['c', 0.03, -0.15, 0.03, -0.60, 0.03, -0.99], ['l', 0.00, -0.72], ['l', -0.27, 0.33], ['l', -1.74, 1.98], ['c', -1.77, 1.92, -2.43, 2.76, -2.97, 3.90], ['c', -0.51, 1.02, -0.72, 1.77, -0.75, 2.91], ['c', 0.00, 0.63, 0.00, 0.63, 0.06, 0.60], ['c', 0.03, -0.03, 0.30, -0.27, 0.63, -0.54], ['c', 0.66, -0.60, 1.86, -1.80, 2.31, -2.31], ['c', 1.65, -1.89, 2.52, -3.54, 2.70, -5.16], ['z']], w: 8.485, h: 32.932 },\n\t'clefs.C': { d: [['M', 0.06, -14.94], ['l', 0.09, -0.06], ['l', 1.92, 0.00], ['l', 1.92, 0.00], ['l', 0.09, 0.06], ['l', 0.06, 0.09], ['l', 0.00, 14.85], ['l', 0.00, 14.82], ['l', -0.06, 0.09], ['l', -0.09, 0.06], ['l', -1.92, 0.00], ['l', -1.92, 0.00], ['l', -0.09, -0.06], ['l', -0.06, -0.09], ['l', 0.00, -14.82], ['l', 0.00, -14.85], ['z'], ['m', 5.37, 0.00], ['c', 0.09, -0.06, 0.09, -0.06, 0.57, -0.06], ['c', 0.45, 0.00, 0.45, 0.00, 0.54, 0.06], ['l', 0.06, 0.09], ['l', 0.00, 7.14], ['l', 0.00, 7.11], ['l', 0.09, -0.06], ['c', 0.18, -0.18, 0.72, -0.84, 0.96, -1.20], ['c', 0.30, -0.45, 0.66, -1.17, 0.84, -1.65], ['c', 0.36, -0.90, 0.57, -1.83, 0.60, -2.79], ['c', 0.03, -0.48, 0.03, -0.54, 0.09, -0.63], ['c', 0.12, -0.18, 0.36, -0.21, 0.54, -0.12], ['c', 0.18, 0.09, 0.21, 0.15, 0.24, 0.66], ['c', 0.06, 0.87, 0.21, 1.56, 0.57, 2.22], ['c', 0.51, 1.02, 1.26, 1.68, 2.22, 1.92], ['c', 0.21, 0.06, 0.33, 0.06, 0.78, 0.06], ['c', 0.45, 0.00, 0.57, 0.00, 0.84, -0.06], ['c', 0.45, -0.12, 0.81, -0.33, 1.08, -0.60], ['c', 0.57, -0.57, 0.87, -1.41, 0.99, -2.88], ['c', 0.06, -0.54, 0.06, -3.00, 0.00, -3.57], ['c', -0.21, -2.58, -0.84, -3.87, -2.16, -4.50], ['c', -0.48, -0.21, -1.17, -0.36, -1.77, -0.36], ['c', -0.69, 0.00, -1.29, 0.27, -1.50, 0.72], ['c', -0.06, 0.15, -0.06, 0.21, -0.06, 0.42], ['c', 0.00, 0.24, 0.00, 0.30, 0.06, 0.45], ['c', 0.12, 0.24, 0.24, 0.39, 0.63, 0.66], ['c', 0.42, 0.30, 0.57, 0.48, 0.69, 0.72], ['c', 0.06, 0.15, 0.06, 0.21, 0.06, 0.48], ['c', 0.00, 0.39, -0.03, 0.63, -0.21, 0.96], ['c', -0.30, 0.60, -0.87, 1.08, -1.50, 1.26], ['c', -0.27, 0.06, -0.87, 0.06, -1.14, 0.00], ['c', -0.78, -0.24, -1.44, -0.87, -1.65, -1.68], ['c', -0.12, -0.42, -0.09, -1.17, 0.09, -1.71], ['c', 0.51, -1.65, 1.98, -2.82, 3.81, -3.09], ['c', 0.84, -0.09, 2.46, 0.03, 3.51, 0.27], ['c', 2.22, 0.57, 3.69, 1.80, 4.44, 3.75], ['c', 0.36, 0.93, 0.57, 2.13, 0.57, 3.36], ['c', 0.00, 1.44, -0.48, 2.73, -1.38, 3.81], ['c', -1.26, 1.50, -3.27, 2.43, -5.28, 2.43], ['c', -0.48, 0.00, -0.51, 0.00, -0.75, -0.09], ['c', -0.15, -0.03, -0.48, -0.21, -0.78, -0.36], ['c', -0.69, -0.36, -0.87, -0.42, -1.26, -0.42], ['c', -0.27, 0.00, -0.30, 0.00, -0.51, 0.09], ['c', -0.57, 0.30, -0.81, 0.90, -0.81, 2.10], ['c', 0.00, 1.23, 0.24, 1.83, 0.81, 2.13], ['c', 0.21, 0.09, 0.24, 0.09, 0.51, 0.09], ['c', 0.39, 0.00, 0.57, -0.06, 1.26, -0.42], ['c', 0.30, -0.15, 0.63, -0.33, 0.78, -0.36], ['c', 0.24, -0.09, 0.27, -0.09, 0.75, -0.09], ['c', 2.01, 0.00, 4.02, 0.93, 5.28, 2.40], ['c', 0.90, 1.11, 1.38, 2.40, 1.38, 3.84], ['c', 0.00, 1.50, -0.30, 2.88, -0.84, 3.96], ['c', -0.78, 1.59, -2.19, 2.64, -4.17, 3.15], ['c', -1.05, 0.24, -2.67, 0.36, -3.51, 0.27], ['c', -1.83, -0.27, -3.30, -1.44, -3.81, -3.09], ['c', -0.18, -0.54, -0.21, -1.29, -0.09, -1.74], ['c', 0.15, -0.60, 0.63, -1.20, 1.23, -1.47], ['c', 0.36, -0.18, 0.57, -0.21, 0.99, -0.21], ['c', 0.42, 0.00, 0.63, 0.03, 1.02, 0.21], ['c', 0.42, 0.21, 0.84, 0.63, 1.05, 1.05], ['c', 0.18, 0.36, 0.21, 0.60, 0.21, 0.96], ['c', 0.00, 0.30, 0.00, 0.36, -0.06, 0.51], ['c', -0.12, 0.24, -0.27, 0.42, -0.69, 0.72], ['c', -0.57, 0.42, -0.69, 0.63, -0.69, 1.08], ['c', 0.00, 0.24, 0.00, 0.30, 0.06, 0.45], ['c', 0.12, 0.21, 0.30, 0.39, 0.57, 0.54], ['c', 0.42, 0.18, 0.87, 0.21, 1.53, 0.15], ['c', 1.08, -0.15, 1.80, -0.57, 2.34, -1.32], ['c', 0.54, -0.75, 0.84, -1.83, 0.99, -3.51], ['c', 0.06, -0.57, 0.06, -3.03, 0.00, -3.57], ['c', -0.12, -1.47, -0.42, -2.31, -0.99, -2.88], ['c', -0.27, -0.27, -0.63, -0.48, -1.08, -0.60], ['c', -0.27, -0.06, -0.39, -0.06, -0.84, -0.06], ['c', -0.45, 0.00, -0.57, 0.00, -0.78, 0.06], ['c', -1.14, 0.27, -2.01, 1.17, -2.46, 2.49], ['c', -0.21, 0.57, -0.30, 0.99, -0.33, 1.65], ['c', -0.03, 0.51, -0.06, 0.57, -0.24, 0.66], ['c', -0.12, 0.06, -0.27, 0.06, -0.39, 0.00], ['c', -0.21, -0.09, -0.21, -0.15, -0.24, -0.75], ['c', -0.09, -1.92, -0.78, -3.72, -2.01, -5.19], ['c', -0.18, -0.21, -0.36, -0.42, -0.39, -0.45], ['l', -0.09, -0.06], ['l', 0.00, 7.11], ['l', 0.00, 7.14], ['l', -0.06, 0.09], ['c', -0.09, 0.06, -0.09, 0.06, -0.54, 0.06], ['c', -0.48, 0.00, -0.48, 0.00, -0.57, -0.06], ['l', -0.06, -0.09], ['l', 0.00, -14.82], ['l', 0.00, -14.85], ['z']], w: 20.31, h: 29.97 },\n\t'clefs.F': { d: [['M', 6.30, -7.80], ['c', 0.36, -0.03, 1.65, 0.00, 2.13, 0.03], ['c', 3.60, 0.42, 6.03, 2.10, 6.93, 4.86], ['c', 0.27, 0.84, 0.36, 1.50, 0.36, 2.58], ['c', 0.00, 0.90, -0.03, 1.35, -0.18, 2.16], ['c', -0.78, 3.78, -3.54, 7.08, -8.37, 9.96], ['c', -1.74, 1.05, -3.87, 2.13, -6.18, 3.12], ['c', -0.39, 0.18, -0.75, 0.33, -0.81, 0.36], ['c', -0.06, 0.03, -0.15, 0.06, -0.18, 0.06], ['c', -0.15, 0.00, -0.33, -0.18, -0.33, -0.33], ['c', 0.00, -0.15, 0.06, -0.21, 0.51, -0.48], ['c', 3.00, -1.77, 5.13, -3.21, 6.84, -4.74], ['c', 0.51, -0.45, 1.59, -1.50, 1.95, -1.95], ['c', 1.89, -2.19, 2.88, -4.32, 3.15, -6.78], ['c', 0.06, -0.42, 0.06, -1.77, 0.00, -2.19], ['c', -0.24, -2.01, -0.93, -3.63, -2.04, -4.71], ['c', -0.63, -0.63, -1.29, -1.02, -2.07, -1.20], ['c', -1.62, -0.39, -3.36, 0.15, -4.56, 1.44], ['c', -0.54, 0.60, -1.05, 1.47, -1.32, 2.22], ['l', -0.09, 0.21], ['l', 0.24, -0.12], ['c', 0.39, -0.21, 0.63, -0.24, 1.11, -0.24], ['c', 0.30, 0.00, 0.45, 0.00, 0.66, 0.06], ['c', 1.92, 0.48, 2.85, 2.55, 1.95, 4.38], ['c', -0.45, 0.99, -1.41, 1.62, -2.46, 1.71], ['c', -1.47, 0.09, -2.91, -0.87, -3.39, -2.25], ['c', -0.18, -0.57, -0.21, -1.32, -0.03, -2.28], ['c', 0.39, -2.25, 1.83, -4.20, 3.81, -5.19], ['c', 0.69, -0.36, 1.59, -0.60, 2.37, -0.69], ['z'], ['m', 11.58, 2.52], ['c', 0.84, -0.21, 1.71, 0.30, 1.89, 1.14], ['c', 0.30, 1.17, -0.72, 2.19, -1.89, 1.89], ['c', -0.99, -0.21, -1.50, -1.32, -1.02, -2.25], ['c', 0.18, -0.39, 0.60, -0.69, 1.02, -0.78], ['z'], ['m', 0.00, 7.50], ['c', 0.84, -0.21, 1.71, 0.30, 1.89, 1.14], ['c', 0.21, 0.87, -0.30, 1.71, -1.14, 1.89], ['c', -0.87, 0.21, -1.71, -0.30, -1.89, -1.14], ['c', -0.21, -0.84, 0.30, -1.71, 1.14, -1.89], ['z']], w: 20.153, h: 23.142 },\n\t'clefs.G': { d: [['M', 9.69, -37.41], ['c', 0.09, -0.09, 0.24, -0.06, 0.36, 0.00], ['c', 0.12, 0.09, 0.57, 0.60, 0.96, 1.11], ['c', 1.77, 2.34, 3.21, 5.85, 3.57, 8.73], ['c', 0.21, 1.56, 0.03, 3.27, -0.45, 4.86], ['c', -0.69, 2.31, -1.92, 4.47, -4.23, 7.44], ['c', -0.30, 0.39, -0.57, 0.72, -0.60, 0.75], ['c', -0.03, 0.06, 0.00, 0.15, 0.18, 0.78], ['c', 0.54, 1.68, 1.38, 4.44, 1.68, 5.49], ['l', 0.09, 0.42], ['l', 0.39, 0.00], ['c', 1.47, 0.09, 2.76, 0.51, 3.96, 1.29], ['c', 1.83, 1.23, 3.06, 3.21, 3.39, 5.52], ['c', 0.09, 0.45, 0.12, 1.29, 0.06, 1.74], ['c', -0.09, 1.02, -0.33, 1.83, -0.75, 2.73], ['c', -0.84, 1.71, -2.28, 3.06, -4.02, 3.72], ['l', -0.33, 0.12], ['l', 0.03, 1.26], ['c', 0.00, 1.74, -0.06, 3.63, -0.21, 4.62], ['c', -0.45, 3.06, -2.19, 5.49, -4.47, 6.21], ['c', -0.57, 0.18, -0.90, 0.21, -1.59, 0.21], ['c', -0.69, 0.00, -1.02, -0.03, -1.65, -0.21], ['c', -1.14, -0.27, -2.13, -0.84, -2.94, -1.65], ['c', -0.99, -0.99, -1.56, -2.16, -1.71, -3.54], ['c', -0.09, -0.81, 0.06, -1.53, 0.45, -2.13], ['c', 0.63, -0.99, 1.83, -1.56, 3.00, -1.53], ['c', 1.50, 0.09, 2.64, 1.32, 2.73, 2.94], ['c', 0.06, 1.47, -0.93, 2.70, -2.37, 2.97], ['c', -0.45, 0.06, -0.84, 0.03, -1.29, -0.09], ['l', -0.21, -0.09], ['l', 0.09, 0.12], ['c', 0.39, 0.54, 0.78, 0.93, 1.32, 1.26], ['c', 1.35, 0.87, 3.06, 1.02, 4.35, 0.36], ['c', 1.44, -0.72, 2.52, -2.28, 2.97, -4.35], ['c', 0.15, -0.66, 0.24, -1.50, 0.30, -3.03], ['c', 0.03, -0.84, 0.03, -2.94, 0.00, -3.00], ['c', -0.03, 0.00, -0.18, 0.00, -0.36, 0.03], ['c', -0.66, 0.12, -0.99, 0.12, -1.83, 0.12], ['c', -1.05, 0.00, -1.71, -0.06, -2.61, -0.30], ['c', -4.02, -0.99, -7.11, -4.35, -7.80, -8.46], ['c', -0.12, -0.66, -0.12, -0.99, -0.12, -1.83], ['c', 0.00, -0.84, 0.00, -1.14, 0.15, -1.92], ['c', 0.36, -2.28, 1.41, -4.62, 3.30, -7.29], ['l', 2.79, -3.60], ['c', 0.54, -0.66, 0.96, -1.20, 0.96, -1.23], ['c', 0.00, -0.03, -0.09, -0.33, -0.18, -0.69], ['c', -0.96, -3.21, -1.41, -5.28, -1.59, -7.68], ['c', -0.12, -1.38, -0.15, -3.09, -0.06, -3.96], ['c', 0.33, -2.67, 1.38, -5.07, 3.12, -7.08], ['c', 0.36, -0.42, 0.99, -1.05, 1.17, -1.14], ['z'], ['m', 2.01, 4.71], ['c', -0.15, -0.30, -0.30, -0.54, -0.30, -0.54], ['c', -0.03, 0.00, -0.18, 0.09, -0.30, 0.21], ['c', -2.40, 1.74, -3.87, 4.20, -4.26, 7.11], ['c', -0.06, 0.54, -0.06, 1.41, -0.03, 1.89], ['c', 0.09, 1.29, 0.48, 3.12, 1.08, 5.22], ['c', 0.15, 0.42, 0.24, 0.78, 0.24, 0.81], ['c', 0.00, 0.03, 0.84, -1.11, 1.23, -1.68], ['c', 1.89, -2.73, 2.88, -5.07, 3.15, -7.53], ['c', 0.09, -0.57, 0.12, -1.74, 0.06, -2.37], ['c', -0.09, -1.23, -0.27, -1.92, -0.87, -3.12], ['z'], ['m', -2.94, 20.70], ['c', -0.21, -0.72, -0.39, -1.32, -0.42, -1.32], ['c', 0.00, 0.00, -1.20, 1.47, -1.86, 2.37], ['c', -2.79, 3.63, -4.02, 6.30, -4.35, 9.30], ['c', -0.03, 0.21, -0.03, 0.69, -0.03, 1.08], ['c', 0.00, 0.69, 0.00, 0.75, 0.06, 1.11], ['c', 0.12, 0.54, 0.27, 0.99, 0.51, 1.47], ['c', 0.69, 1.38, 1.83, 2.55, 3.42, 3.42], ['c', 0.96, 0.54, 2.07, 0.90, 3.21, 1.08], ['c', 0.78, 0.12, 2.04, 0.12, 2.94, -0.03], ['c', 0.51, -0.06, 0.45, -0.03, 0.42, -0.30], ['c', -0.24, -3.33, -0.72, -6.33, -1.62, -10.08], ['c', -0.09, -0.39, -0.18, -0.75, -0.18, -0.78], ['c', -0.03, -0.03, -0.42, 0.00, -0.81, 0.09], ['c', -0.90, 0.18, -1.65, 0.57, -2.22, 1.14], ['c', -0.72, 0.72, -1.08, 1.65, -1.05, 2.64], ['c', 0.06, 0.96, 0.48, 1.83, 1.23, 2.58], ['c', 0.36, 0.36, 0.72, 0.63, 1.17, 0.90], ['c', 0.33, 0.18, 0.36, 0.21, 0.42, 0.33], ['c', 0.18, 0.42, -0.18, 0.90, -0.60, 0.87], ['c', -0.18, -0.03, -0.84, -0.36, -1.26, -0.63], ['c', -0.78, -0.51, -1.38, -1.11, -1.86, -1.83], ['c', -1.77, -2.70, -0.99, -6.42, 1.71, -8.19], ['c', 0.30, -0.21, 0.81, -0.48, 1.17, -0.63], ['c', 0.30, -0.09, 1.02, -0.30, 1.14, -0.30], ['c', 0.06, 0.00, 0.09, 0.00, 0.09, -0.03], ['c', 0.03, -0.03, -0.51, -1.92, -1.23, -4.26], ['z'], ['m', 3.78, 7.41], ['c', -0.18, -0.03, -0.36, -0.06, -0.39, -0.06], ['c', -0.03, 0.00, 0.00, 0.21, 0.18, 1.02], ['c', 0.75, 3.18, 1.26, 6.30, 1.50, 9.09], ['c', 0.06, 0.72, 0.00, 0.69, 0.51, 0.42], ['c', 0.78, -0.36, 1.44, -0.96, 1.98, -1.77], ['c', 1.08, -1.62, 1.20, -3.69, 0.30, -5.55], ['c', -0.81, -1.62, -2.31, -2.79, -4.08, -3.15], ['z']], w: 19.051, h: 57.057 },\n\t'clefs.perc': { d: [['M', 5.07, -7.44], ['l', 0.09, -0.06], ['l', 1.53, 0.00], ['l', 1.53, 0.00], ['l', 0.09, 0.06], ['l', 0.06, 0.09], ['l', 0.00, 7.35], ['l', 0.00, 7.32], ['l', -0.06, 0.09], ['l', -0.09, 0.06], ['l', -1.53, 0.00], ['l', -1.53, 0.00], ['l', -0.09, -0.06], ['l', -0.06, -0.09], ['l', 0.00, -7.32], ['l', 0.00, -7.35], ['z'], ['m', 6.63, 0.00], ['l', 0.09, -0.06], ['l', 1.53, 0.00], ['l', 1.53, 0.00], ['l', 0.09, 0.06], ['l', 0.06, 0.09], ['l', 0.00, 7.35], ['l', 0.00, 7.32], ['l', -0.06, 0.09], ['l', -0.09, 0.06], ['l', -1.53, 0.00], ['l', -1.53, 0.00], ['l', -0.09, -0.06], ['l', -0.06, -0.09], ['l', 0.00, -7.32], ['l', 0.00, -7.35], ['z']], w: 21, h: 14.97 },\n\t'tab.big': { d: [['M', 20.16, -21.66], ['c', 0.24, -0.09, 0.66, 0.09, 0.78, 0.36], ['c', 0.09, 0.21, 0.09, 0.24, -0.18, 0.54], ['c', -0.78, 0.81, -1.86, 1.44, -2.94, 1.71], ['c', -0.87, 0.24, -1.71, 0.24, -2.55, 0.03], ['l', -0.06, -0.03], ['l', -0.18, 0.99], ['c', -0.33, 1.98, -0.75, 4.26, -0.96, 5.04], ['c', -0.42, 1.65, -1.26, 3.18, -2.28, 4.14], ['c', -0.57, 0.57, -1.17, 0.90, -1.86, 1.08], ['c', -0.18, 0.06, -0.33, 0.06, -0.66, 0.06], ['c', -0.54, 0.00, -0.78, -0.03, -1.23, -0.27], ['c', -0.39, -0.18, -0.66, -0.39, -1.38, -0.99], ['c', -0.30, -0.24, -0.66, -0.51, -0.75, -0.57], ['c', -0.21, -0.15, -0.27, -0.24, -0.24, -0.45], ['c', 0.06, -0.27, 0.36, -0.60, 0.60, -0.66], ['c', 0.18, -0.03, 0.33, 0.06, 0.90, 0.57], ['c', 0.48, 0.42, 0.72, 0.57, 0.93, 0.69], ['c', 0.66, 0.33, 1.38, 0.21, 1.95, -0.36], ['c', 0.63, -0.60, 1.05, -1.62, 1.23, -3.00], ['c', 0.03, -0.18, 0.09, -0.66, 0.09, -1.11], ['c', 0.09, -1.56, 0.33, -3.81, 0.57, -5.49], ['c', 0.06, -0.33, 0.09, -0.63, 0.09, -0.63], ['c', -0.03, -0.03, -0.81, -0.12, -1.02, -0.12], ['c', -0.57, 0.00, -1.32, 0.12, -1.80, 0.33], ['c', -0.87, 0.30, -1.35, 0.78, -1.50, 1.41], ['c', -0.18, 0.63, 0.09, 1.26, 0.66, 1.65], ['c', 0.12, 0.06, 0.15, 0.12, 0.18, 0.24], ['c', 0.09, 0.27, 0.06, 0.57, -0.09, 0.75], ['c', -0.03, 0.06, -0.12, 0.09, -0.27, 0.15], ['c', -0.72, 0.21, -1.44, 0.15, -2.10, -0.18], ['c', -0.54, -0.27, -0.96, -0.66, -1.20, -1.14], ['c', -0.39, -0.75, -0.33, -1.74, 0.15, -2.52], ['c', 0.27, -0.42, 0.84, -0.93, 1.41, -1.23], ['c', 1.17, -0.57, 2.88, -0.90, 4.80, -0.90], ['c', 0.69, 0.00, 0.78, 0.00, 1.08, 0.06], ['c', 0.45, 0.09, 1.11, 0.30, 2.07, 0.60], ['c', 1.47, 0.48, 1.83, 0.57, 2.55, 0.54], ['c', 1.02, -0.06, 2.04, -0.45, 2.94, -1.11], ['c', 0.12, -0.09, 0.24, -0.18, 0.27, -0.18], ['z'], ['m', -5.88, 13.05], ['c', 0.21, -0.03, 0.81, 0.00, 1.08, 0.06], ['c', 0.48, 0.12, 0.90, 0.42, 0.99, 0.69], ['c', 0.03, 0.09, 0.03, 0.15, 0.00, 0.27], ['c', 0.00, 0.09, -0.03, 0.57, -0.06, 1.08], ['c', -0.09, 2.19, -0.24, 5.76, -0.39, 8.28], ['c', -0.06, 1.53, -0.06, 1.77, 0.03, 2.01], ['c', 0.09, 0.18, 0.15, 0.24, 0.30, 0.30], ['c', 0.24, 0.12, 0.54, 0.06, 1.23, -0.27], ['c', 0.57, -0.27, 0.66, -0.30, 0.75, -0.24], ['c', 0.09, 0.06, 0.18, 0.30, 0.18, 0.45], ['c', 0.00, 0.33, -0.15, 0.51, -0.45, 0.63], ['c', -0.12, 0.03, -0.39, 0.15, -0.60, 0.27], ['c', -1.17, 0.60, -1.38, 0.69, -1.80, 0.72], ['c', -0.45, 0.03, -0.78, -0.09, -1.08, -0.39], ['c', -0.39, -0.42, -0.66, -1.20, -1.02, -3.12], ['c', -0.24, -1.23, -0.36, -2.07, -0.54, -3.75], ['l', 0.00, -0.18], ['l', -0.36, 0.45], ['c', -0.60, 0.75, -1.32, 1.59, -1.95, 2.25], ['c', -0.15, 0.18, -0.27, 0.30, -0.27, 0.33], ['c', 0.00, 0.00, 0.06, 0.09, 0.15, 0.18], ['c', 0.24, 0.33, 0.60, 0.57, 1.05, 0.69], ['c', 0.18, 0.06, 0.30, 0.06, 0.69, 0.06], ['l', 0.48, 0.03], ['l', 0.06, 0.12], ['c', 0.15, 0.27, 0.03, 0.72, -0.21, 0.90], ['c', -0.18, 0.12, -0.93, 0.27, -1.41, 0.27], ['c', -0.84, 0.00, -1.59, -0.30, -1.98, -0.84], ['l', -0.12, -0.15], ['l', -0.45, 0.42], ['c', -0.99, 0.87, -1.53, 1.32, -2.16, 1.74], ['c', -0.78, 0.51, -1.50, 0.84, -2.10, 0.93], ['c', -0.69, 0.12, -1.20, 0.03, -1.95, -0.42], ['c', -0.21, -0.12, -0.51, -0.27, -0.66, -0.36], ['c', -0.24, -0.12, -0.30, -0.18, -0.33, -0.24], ['c', -0.12, -0.27, 0.15, -0.78, 0.45, -0.93], ['c', 0.24, -0.12, 0.33, -0.09, 0.90, 0.18], ['c', 0.60, 0.30, 0.84, 0.39, 1.20, 0.36], ['c', 0.87, -0.09, 1.77, -0.69, 3.24, -2.31], ['c', 2.67, -2.85, 4.59, -5.94, 5.70, -9.15], ['c', 0.15, -0.45, 0.24, -0.63, 0.42, -0.81], ['c', 0.21, -0.24, 0.60, -0.45, 0.99, -0.51], ['z'], ['m', -3.99, 16.05], ['c', 0.18, 0.00, 0.69, -0.03, 1.17, 0.00], ['c', 3.27, 0.03, 5.37, 0.75, 6.00, 2.07], ['c', 0.45, 0.99, 0.12, 2.40, -0.81, 3.42], ['c', -0.24, 0.27, -0.57, 0.57, -0.84, 0.75], ['c', -0.09, 0.06, -0.18, 0.09, -0.18, 0.12], ['c', 0.00, 0.00, 0.18, 0.03, 0.42, 0.09], ['c', 1.23, 0.30, 2.01, 0.81, 2.37, 1.59], ['c', 0.27, 0.54, 0.30, 1.32, 0.09, 2.10], ['c', -0.12, 0.36, -0.45, 1.05, -0.69, 1.35], ['c', -0.87, 1.17, -2.10, 1.92, -3.54, 2.25], ['c', -0.36, 0.06, -0.48, 0.06, -0.96, 0.06], ['c', -0.45, 0.00, -0.66, 0.00, -0.84, -0.03], ['c', -0.84, -0.18, -1.47, -0.51, -2.07, -1.11], ['c', -0.33, -0.33, -0.45, -0.51, -0.45, -0.63], ['c', 0.00, -0.06, 0.03, -0.15, 0.06, -0.24], ['c', 0.18, -0.33, 0.69, -0.60, 0.93, -0.48], ['c', 0.03, 0.03, 0.15, 0.12, 0.27, 0.24], ['c', 0.39, 0.42, 0.99, 0.57, 1.62, 0.45], ['c', 1.05, -0.21, 1.98, -1.02, 2.31, -2.01], ['c', 0.48, -1.53, -0.48, -2.55, -2.58, -2.67], ['c', -0.21, 0.00, -0.36, -0.03, -0.42, -0.06], ['c', -0.15, -0.09, -0.21, -0.51, -0.06, -0.78], ['c', 0.12, -0.27, 0.24, -0.33, 0.60, -0.36], ['c', 0.57, -0.06, 1.11, -0.42, 1.50, -0.99], ['c', 0.48, -0.72, 0.54, -1.59, 0.18, -2.31], ['c', -0.12, -0.21, -0.45, -0.54, -0.69, -0.69], ['c', -0.33, -0.21, -0.93, -0.45, -1.35, -0.51], ['l', -0.12, -0.03], ['l', -0.06, 0.48], ['c', -0.54, 2.94, -1.14, 6.24, -1.29, 6.75], ['c', -0.33, 1.35, -0.93, 2.61, -1.65, 3.60], ['c', -0.30, 0.36, -0.81, 0.90, -1.14, 1.14], ['c', -0.30, 0.24, -0.84, 0.48, -1.14, 0.57], ['c', -0.33, 0.09, -0.96, 0.09, -1.26, 0.03], ['c', -0.45, -0.12, -0.87, -0.39, -1.53, -0.96], ['c', -0.24, -0.15, -0.51, -0.39, -0.63, -0.48], ['c', -0.30, -0.21, -0.33, -0.33, -0.21, -0.63], ['c', 0.12, -0.18, 0.27, -0.36, 0.42, -0.45], ['c', 0.27, -0.12, 0.36, -0.09, 0.87, 0.33], ['c', 0.78, 0.60, 1.08, 0.75, 1.65, 0.72], ['c', 0.45, -0.03, 0.81, -0.21, 1.17, -0.54], ['c', 0.87, -0.90, 1.38, -2.85, 1.38, -5.37], ['c', 0.00, -0.60, 0.03, -1.11, 0.12, -2.04], ['c', 0.06, -0.69, 0.24, -2.01, 0.33, -2.58], ['c', 0.06, -0.24, 0.06, -0.42, 0.06, -0.42], ['c', 0.00, 0.00, -0.12, 0.03, -0.21, 0.09], ['c', -1.44, 0.57, -2.16, 1.65, -1.74, 2.55], ['c', 0.09, 0.15, 0.18, 0.24, 0.27, 0.33], ['c', 0.24, 0.21, 0.30, 0.27, 0.33, 0.39], ['c', 0.06, 0.24, 0.00, 0.63, -0.15, 0.78], ['c', -0.09, 0.12, -0.54, 0.21, -0.96, 0.24], ['c', -1.02, 0.03, -2.01, -0.48, -2.43, -1.32], ['c', -0.21, -0.45, -0.27, -0.90, -0.15, -1.44], ['c', 0.06, -0.27, 0.21, -0.66, 0.39, -0.93], ['c', 0.87, -1.29, 3.00, -2.22, 5.64, -2.43], ['z']], w: 19.643, h: 43.325 },\n\t'tab.tiny': { d: [['M', 16.02, -17.25], ['c', 0.12, -0.09, 0.15, -0.09, 0.27, -0.09], ['c', 0.21, 0.03, 0.51, 0.30, 0.51, 0.45], ['c', 0.00, 0.06, -0.12, 0.18, -0.30, 0.36], ['c', -1.11, 1.08, -2.55, 1.59, -3.84, 1.41], ['c', -0.15, -0.03, -0.33, -0.06, -0.39, -0.09], ['c', -0.06, -0.03, -0.09, -0.03, -0.12, -0.03], ['c', 0.00, 0.00, -0.06, 0.42, -0.15, 0.93], ['c', -0.33, 2.01, -0.66, 3.69, -0.84, 4.26], ['c', -0.42, 1.41, -1.23, 2.67, -2.16, 3.33], ['c', -0.27, 0.18, -0.75, 0.42, -0.99, 0.48], ['c', -0.30, 0.09, -0.72, 0.09, -1.02, 0.06], ['c', -0.45, -0.09, -0.84, -0.33, -1.53, -0.90], ['c', -0.21, -0.18, -0.51, -0.39, -0.63, -0.48], ['c', -0.27, -0.21, -0.30, -0.24, -0.30, -0.36], ['c', 0.00, -0.12, 0.09, -0.36, 0.18, -0.45], ['c', 0.09, -0.09, 0.27, -0.18, 0.36, -0.18], ['c', 0.12, 0.00, 0.30, 0.12, 0.66, 0.45], ['c', 0.57, 0.51, 0.87, 0.69, 1.23, 0.72], ['c', 0.93, 0.06, 1.68, -0.78, 1.98, -2.37], ['c', 0.09, -0.39, 0.15, -0.75, 0.18, -1.53], ['c', 0.06, -0.99, 0.24, -2.79, 0.42, -4.05], ['c', 0.03, -0.30, 0.06, -0.57, 0.06, -0.60], ['c', 0.00, -0.06, -0.03, -0.09, -0.15, -0.12], ['c', -0.90, -0.18, -2.13, 0.06, -2.76, 0.57], ['c', -0.36, 0.30, -0.51, 0.60, -0.51, 1.02], ['c', 0.00, 0.45, 0.15, 0.75, 0.48, 0.99], ['c', 0.06, 0.06, 0.15, 0.18, 0.18, 0.24], ['c', 0.12, 0.24, 0.03, 0.63, -0.15, 0.69], ['c', -0.24, 0.12, -0.60, 0.15, -0.90, 0.15], ['c', -0.36, -0.03, -0.57, -0.09, -0.87, -0.24], ['c', -0.78, -0.36, -1.23, -1.11, -1.20, -1.92], ['c', 0.12, -1.53, 1.74, -2.49, 4.62, -2.70], ['c', 1.20, -0.09, 1.47, -0.03, 3.33, 0.57], ['c', 0.90, 0.30, 1.14, 0.36, 1.56, 0.39], ['c', 0.45, 0.00, 0.93, -0.06, 1.38, -0.21], ['c', 0.51, -0.18, 0.81, -0.33, 1.41, -0.75], ['z'], ['m', -4.68, 10.38], ['c', 0.39, -0.06, 0.84, 0.00, 1.20, 0.15], ['c', 0.24, 0.12, 0.36, 0.21, 0.45, 0.36], ['l', 0.09, 0.09], ['l', -0.06, 1.41], ['c', -0.09, 2.19, -0.18, 3.96, -0.27, 5.49], ['c', -0.03, 0.78, -0.06, 1.59, -0.06, 1.86], ['c', 0.00, 0.42, 0.00, 0.48, 0.06, 0.57], ['c', 0.06, 0.18, 0.18, 0.24, 0.36, 0.27], ['c', 0.18, 0.00, 0.39, -0.06, 0.84, -0.27], ['c', 0.45, -0.21, 0.54, -0.24, 0.63, -0.18], ['c', 0.12, 0.12, 0.15, 0.54, 0.03, 0.69], ['c', -0.03, 0.03, -0.15, 0.12, -0.27, 0.18], ['c', -0.15, 0.03, -0.30, 0.12, -0.36, 0.15], ['c', -0.87, 0.45, -1.02, 0.51, -1.26, 0.57], ['c', -0.33, 0.09, -0.60, 0.06, -0.84, -0.06], ['c', -0.42, -0.18, -0.63, -0.60, -0.87, -1.44], ['c', -0.30, -1.23, -0.57, -2.97, -0.66, -4.08], ['c', 0.00, -0.18, -0.03, -0.30, -0.03, -0.33], ['l', -0.06, 0.06], ['c', -0.18, 0.27, -1.11, 1.38, -1.68, 2.01], ['l', -0.33, 0.33], ['l', 0.06, 0.09], ['c', 0.06, 0.15, 0.27, 0.33, 0.48, 0.42], ['c', 0.27, 0.18, 0.51, 0.24, 0.96, 0.27], ['l', 0.39, 0.00], ['l', 0.03, 0.12], ['c', 0.12, 0.21, 0.03, 0.57, -0.15, 0.69], ['c', -0.03, 0.03, -0.21, 0.09, -0.36, 0.15], ['c', -0.27, 0.06, -0.39, 0.06, -0.75, 0.06], ['c', -0.48, 0.00, -0.75, -0.03, -1.08, -0.21], ['c', -0.21, -0.12, -0.51, -0.36, -0.57, -0.48], ['l', -0.03, -0.09], ['l', -0.39, 0.36], ['c', -1.47, 1.35, -2.49, 1.98, -3.42, 2.13], ['c', -0.54, 0.09, -0.96, -0.03, -1.62, -0.39], ['c', -0.21, -0.15, -0.45, -0.27, -0.54, -0.30], ['c', -0.18, -0.09, -0.21, -0.21, -0.12, -0.45], ['c', 0.06, -0.27, 0.33, -0.48, 0.54, -0.48], ['c', 0.03, 0.00, 0.27, 0.09, 0.48, 0.21], ['c', 0.48, 0.24, 0.69, 0.27, 0.99, 0.27], ['c', 0.60, -0.06, 1.17, -0.42, 2.10, -1.35], ['c', 2.22, -2.22, 4.02, -4.98, 4.95, -7.59], ['c', 0.21, -0.57, 0.30, -0.78, 0.48, -0.93], ['c', 0.15, -0.15, 0.42, -0.27, 0.66, -0.33], ['z'], ['m', -3.06, 12.84], ['c', 0.27, -0.03, 1.68, 0.00, 2.01, 0.03], ['c', 1.92, 0.18, 3.15, 0.69, 3.63, 1.50], ['c', 0.18, 0.33, 0.24, 0.51, 0.21, 0.93], ['c', 0.00, 0.45, -0.06, 0.72, -0.24, 1.11], ['c', -0.24, 0.51, -0.69, 1.02, -1.17, 1.35], ['c', -0.21, 0.15, -0.21, 0.15, -0.12, 0.18], ['c', 0.72, 0.15, 1.11, 0.30, 1.50, 0.57], ['c', 0.39, 0.24, 0.63, 0.57, 0.75, 0.96], ['c', 0.09, 0.30, 0.09, 0.96, 0.00, 1.29], ['c', -0.15, 0.57, -0.39, 1.05, -0.78, 1.50], ['c', -0.66, 0.75, -1.62, 1.32, -2.61, 1.53], ['c', -0.27, 0.06, -0.42, 0.06, -0.84, 0.06], ['c', -0.48, 0.00, -0.57, 0.00, -0.81, -0.06], ['c', -0.60, -0.18, -1.05, -0.42, -1.47, -0.81], ['c', -0.36, -0.39, -0.42, -0.51, -0.30, -0.75], ['c', 0.12, -0.21, 0.39, -0.39, 0.60, -0.39], ['c', 0.09, 0.00, 0.15, 0.03, 0.33, 0.18], ['c', 0.12, 0.12, 0.27, 0.24, 0.36, 0.27], ['c', 0.96, 0.48, 2.46, -0.33, 2.82, -1.50], ['c', 0.24, -0.81, -0.03, -1.44, -0.69, -1.77], ['c', -0.39, -0.21, -1.02, -0.33, -1.53, -0.33], ['c', -0.18, 0.00, -0.21, 0.00, -0.27, -0.09], ['c', -0.06, -0.09, -0.06, -0.30, -0.03, -0.48], ['c', 0.06, -0.18, 0.18, -0.36, 0.33, -0.36], ['c', 0.39, -0.06, 0.51, -0.09, 0.72, -0.18], ['c', 0.69, -0.36, 1.11, -1.23, 0.99, -2.01], ['c', -0.09, -0.51, -0.42, -0.90, -0.93, -1.17], ['c', -0.24, -0.12, -0.60, -0.27, -0.87, -0.30], ['c', -0.09, -0.03, -0.09, -0.03, -0.12, 0.12], ['c', 0.00, 0.09, -0.21, 1.11, -0.42, 2.25], ['c', -0.66, 3.75, -0.72, 3.99, -1.26, 5.07], ['c', -0.90, 1.89, -2.25, 2.85, -3.48, 2.61], ['c', -0.39, -0.09, -0.69, -0.27, -1.38, -0.84], ['c', -0.63, -0.51, -0.63, -0.48, -0.63, -0.60], ['c', 0.00, -0.18, 0.18, -0.48, 0.39, -0.57], ['c', 0.21, -0.12, 0.30, -0.09, 0.81, 0.33], ['c', 0.15, 0.15, 0.39, 0.30, 0.54, 0.36], ['c', 0.18, 0.12, 0.27, 0.12, 0.48, 0.15], ['c', 0.99, 0.06, 1.71, -0.78, 2.04, -2.46], ['c', 0.12, -0.66, 0.18, -1.14, 0.21, -2.22], ['c', 0.03, -1.23, 0.12, -2.25, 0.36, -3.63], ['c', 0.03, -0.24, 0.06, -0.45, 0.06, -0.48], ['c', -0.06, -0.03, -0.66, 0.27, -0.90, 0.42], ['c', -0.06, 0.06, -0.21, 0.18, -0.33, 0.30], ['c', -0.57, 0.57, -0.60, 1.35, -0.06, 1.74], ['c', 0.18, 0.12, 0.24, 0.24, 0.21, 0.51], ['c', -0.03, 0.30, -0.15, 0.42, -0.57, 0.48], ['c', -1.11, 0.24, -2.22, -0.42, -2.43, -1.38], ['c', -0.09, -0.45, 0.03, -1.02, 0.30, -1.47], ['c', 0.18, -0.24, 0.60, -0.63, 0.90, -0.84], ['c', 0.90, -0.60, 2.28, -1.02, 3.69, -1.11], ['z']], w: 15.709, h: 34.656 },\n\t'timesig.common': { d: [['M', 6.66, -7.83], ['c', 0.72, -0.06, 1.41, -0.03, 1.98, 0.09], ['c', 1.20, 0.27, 2.34, 0.96, 3.09, 1.92], ['c', 0.63, 0.81, 1.08, 1.86, 1.14, 2.73], ['c', 0.06, 1.02, -0.51, 1.92, -1.44, 2.22], ['c', -0.24, 0.09, -0.30, 0.09, -0.63, 0.09], ['c', -0.33, 0.00, -0.42, 0.00, -0.63, -0.06], ['c', -0.66, -0.24, -1.14, -0.63, -1.41, -1.20], ['c', -0.15, -0.30, -0.21, -0.51, -0.24, -0.90], ['c', -0.06, -1.08, 0.57, -2.04, 1.56, -2.37], ['c', 0.18, -0.06, 0.27, -0.06, 0.63, -0.06], ['l', 0.45, 0.00], ['c', 0.06, 0.03, 0.09, 0.03, 0.09, 0.00], ['c', 0.00, 0.00, -0.09, -0.12, -0.24, -0.27], ['c', -1.02, -1.11, -2.55, -1.68, -4.08, -1.50], ['c', -1.29, 0.15, -2.04, 0.69, -2.40, 1.74], ['c', -0.36, 0.93, -0.42, 1.89, -0.42, 5.37], ['c', 0.00, 2.97, 0.06, 3.96, 0.24, 4.77], ['c', 0.24, 1.08, 0.63, 1.68, 1.41, 2.07], ['c', 0.81, 0.39, 2.16, 0.45, 3.18, 0.09], ['c', 1.29, -0.45, 2.37, -1.53, 3.03, -2.97], ['c', 0.15, -0.33, 0.33, -0.87, 0.39, -1.17], ['c', 0.09, -0.24, 0.15, -0.36, 0.30, -0.39], ['c', 0.21, -0.03, 0.42, 0.15, 0.39, 0.36], ['c', -0.06, 0.39, -0.42, 1.38, -0.69, 1.89], ['c', -0.96, 1.80, -2.49, 2.94, -4.23, 3.18], ['c', -0.99, 0.12, -2.58, -0.06, -3.63, -0.45], ['c', -0.96, -0.36, -1.71, -0.84, -2.40, -1.50], ['c', -1.11, -1.11, -1.80, -2.61, -2.04, -4.56], ['c', -0.06, -0.60, -0.06, -2.01, 0.00, -2.61], ['c', 0.24, -1.95, 0.90, -3.45, 2.01, -4.56], ['c', 0.69, -0.66, 1.44, -1.11, 2.37, -1.47], ['c', 0.63, -0.24, 1.47, -0.42, 2.22, -0.48], ['z']], w: 13.038, h: 15.689 },\n\t'timesig.cut': { d: [['M', 6.24, -10.44], ['c', 0.09, -0.06, 0.09, -0.06, 0.48, -0.06], ['c', 0.36, 0.00, 0.36, 0.00, 0.45, 0.06], ['l', 0.06, 0.09], ['l', 0.00, 1.23], ['l', 0.00, 1.26], ['l', 0.27, 0.00], ['c', 1.26, 0.00, 2.49, 0.45, 3.48, 1.29], ['c', 1.05, 0.87, 1.80, 2.28, 1.89, 3.48], ['c', 0.06, 1.02, -0.51, 1.92, -1.44, 2.22], ['c', -0.24, 0.09, -0.30, 0.09, -0.63, 0.09], ['c', -0.33, 0.00, -0.42, 0.00, -0.63, -0.06], ['c', -0.66, -0.24, -1.14, -0.63, -1.41, -1.20], ['c', -0.15, -0.30, -0.21, -0.51, -0.24, -0.90], ['c', -0.06, -1.08, 0.57, -2.04, 1.56, -2.37], ['c', 0.18, -0.06, 0.27, -0.06, 0.63, -0.06], ['l', 0.45, 0.00], ['c', 0.06, 0.03, 0.09, 0.03, 0.09, 0.00], ['c', 0.00, -0.03, -0.45, -0.51, -0.66, -0.69], ['c', -0.87, -0.69, -1.83, -1.05, -2.94, -1.11], ['l', -0.42, 0.00], ['l', 0.00, 7.17], ['l', 0.00, 7.14], ['l', 0.42, 0.00], ['c', 0.69, -0.03, 1.23, -0.18, 1.86, -0.51], ['c', 1.05, -0.51, 1.89, -1.47, 2.46, -2.70], ['c', 0.15, -0.33, 0.33, -0.87, 0.39, -1.17], ['c', 0.09, -0.24, 0.15, -0.36, 0.30, -0.39], ['c', 0.21, -0.03, 0.42, 0.15, 0.39, 0.36], ['c', -0.03, 0.24, -0.21, 0.78, -0.39, 1.20], ['c', -0.96, 2.37, -2.94, 3.90, -5.13, 3.90], ['l', -0.30, 0.00], ['l', 0.00, 1.26], ['l', 0.00, 1.23], ['l', -0.06, 0.09], ['c', -0.09, 0.06, -0.09, 0.06, -0.45, 0.06], ['c', -0.39, 0.00, -0.39, 0.00, -0.48, -0.06], ['l', -0.06, -0.09], ['l', 0.00, -1.29], ['l', 0.00, -1.29], ['l', -0.21, -0.03], ['c', -1.23, -0.21, -2.31, -0.63, -3.21, -1.29], ['c', -0.15, -0.09, -0.45, -0.36, -0.66, -0.57], ['c', -1.11, -1.11, -1.80, -2.61, -2.04, -4.56], ['c', -0.06, -0.60, -0.06, -2.01, 0.00, -2.61], ['c', 0.24, -1.95, 0.93, -3.45, 2.04, -4.59], ['c', 0.42, -0.39, 0.78, -0.66, 1.26, -0.93], ['c', 0.75, -0.45, 1.65, -0.75, 2.61, -0.90], ['l', 0.21, -0.03], ['l', 0.00, -1.29], ['l', 0.00, -1.29], ['z'], ['m', -0.06, 10.44], ['c', 0.00, -5.58, 0.00, -6.99, -0.03, -6.99], ['c', -0.15, 0.00, -0.63, 0.27, -0.87, 0.45], ['c', -0.45, 0.36, -0.75, 0.93, -0.93, 1.77], ['c', -0.18, 0.81, -0.24, 1.80, -0.24, 4.74], ['c', 0.00, 2.97, 0.06, 3.96, 0.24, 4.77], ['c', 0.24, 1.08, 0.66, 1.68, 1.41, 2.07], ['c', 0.12, 0.06, 0.30, 0.12, 0.33, 0.15], ['l', 0.09, 0.00], ['l', 0.00, -6.96], ['z']], w: 13.038, h: 20.97 },\n\t'timesig.imperfectum': { d: [['M', 13, -5], ['a', 8, 8, 0, 1, 0, 0, 10]], w: 13.038, h: 20.97 },\n\t'timesig.imperfectum2': { d: [['M', 13, -5], ['a', 8, 8, 0, 1, 0, 0, 10]], w: 13.038, h: 20.97 },\n\t'timesig.perfectum': { d: [['M', 13, -5], ['a', 8, 8, 0, 1, 0, 0, 10]], w: 13.038, h: 20.97 },\n\t'timesig.perfectum2': { d: [['M', 13, -5], ['a', 8, 8, 0, 1, 0, 0, 10]], w: 13.038, h: 20.97 },\n\t'f': { d: [['M', 9.93, -14.28], ['c', 1.53, -0.18, 2.88, 0.45, 3.12, 1.50], ['c', 0.12, 0.51, 0.00, 1.32, -0.27, 1.86], ['c', -0.15, 0.30, -0.42, 0.57, -0.63, 0.69], ['c', -0.69, 0.36, -1.56, 0.03, -1.83, -0.69], ['c', -0.09, -0.24, -0.09, -0.69, 0.00, -0.87], ['c', 0.06, -0.12, 0.21, -0.24, 0.45, -0.42], ['c', 0.42, -0.24, 0.57, -0.45, 0.60, -0.72], ['c', 0.03, -0.33, -0.09, -0.39, -0.63, -0.42], ['c', -0.30, 0.00, -0.45, 0.00, -0.60, 0.03], ['c', -0.81, 0.21, -1.35, 0.93, -1.74, 2.46], ['c', -0.06, 0.27, -0.48, 2.25, -0.48, 2.31], ['c', 0.00, 0.03, 0.39, 0.03, 0.90, 0.03], ['c', 0.72, 0.00, 0.90, 0.00, 0.99, 0.06], ['c', 0.42, 0.15, 0.45, 0.72, 0.03, 0.90], ['c', -0.12, 0.06, -0.24, 0.06, -1.17, 0.06], ['l', -1.05, 0.00], ['l', -0.78, 2.55], ['c', -0.45, 1.41, -0.87, 2.79, -0.96, 3.06], ['c', -0.87, 2.37, -2.37, 4.74, -3.78, 5.91], ['c', -1.05, 0.90, -2.04, 1.23, -3.09, 1.08], ['c', -1.11, -0.18, -1.89, -0.78, -2.04, -1.59], ['c', -0.12, -0.66, 0.15, -1.71, 0.54, -2.19], ['c', 0.69, -0.75, 1.86, -0.54, 2.22, 0.39], ['c', 0.06, 0.15, 0.09, 0.27, 0.09, 0.48], ['c', 0.00, 0.24, -0.03, 0.27, -0.12, 0.42], ['c', -0.03, 0.09, -0.15, 0.18, -0.27, 0.27], ['c', -0.09, 0.06, -0.27, 0.21, -0.36, 0.27], ['c', -0.24, 0.18, -0.36, 0.36, -0.39, 0.60], ['c', -0.03, 0.33, 0.09, 0.39, 0.63, 0.42], ['c', 0.42, 0.00, 0.63, -0.03, 0.90, -0.15], ['c', 0.60, -0.30, 0.96, -0.96, 1.38, -2.64], ['c', 0.09, -0.42, 0.63, -2.55, 1.17, -4.77], ['l', 1.02, -4.08], ['c', 0.00, -0.03, -0.36, -0.03, -0.81, -0.03], ['c', -0.72, 0.00, -0.81, 0.00, -0.93, -0.06], ['c', -0.42, -0.18, -0.39, -0.75, 0.03, -0.90], ['c', 0.09, -0.06, 0.27, -0.06, 1.05, -0.06], ['l', 0.96, 0.00], ['l', 0.00, -0.09], ['c', 0.06, -0.18, 0.30, -0.72, 0.51, -1.17], ['c', 1.20, -2.46, 3.30, -4.23, 5.34, -4.50], ['z']], w: 16.155, h: 19.445 },\n\t'm': { d: [['M', 2.79, -8.91], ['c', 0.09, 0.00, 0.30, -0.03, 0.45, -0.03], ['c', 0.24, 0.03, 0.30, 0.03, 0.45, 0.12], ['c', 0.36, 0.15, 0.63, 0.54, 0.75, 1.02], ['l', 0.03, 0.21], ['l', 0.33, -0.30], ['c', 0.69, -0.69, 1.38, -1.02, 2.07, -1.02], ['c', 0.27, 0.00, 0.33, 0.00, 0.48, 0.06], ['c', 0.21, 0.09, 0.48, 0.36, 0.63, 0.60], ['c', 0.03, 0.09, 0.12, 0.27, 0.18, 0.42], ['c', 0.03, 0.15, 0.09, 0.27, 0.12, 0.27], ['c', 0.00, 0.00, 0.09, -0.09, 0.18, -0.21], ['c', 0.33, -0.39, 0.87, -0.81, 1.29, -0.99], ['c', 0.78, -0.33, 1.47, -0.21, 2.01, 0.33], ['c', 0.30, 0.33, 0.48, 0.69, 0.60, 1.14], ['c', 0.09, 0.42, 0.06, 0.54, -0.54, 3.06], ['c', -0.33, 1.29, -0.57, 2.40, -0.57, 2.43], ['c', 0.00, 0.12, 0.09, 0.21, 0.21, 0.21], ['c', 0.24, 0.00, 0.75, -0.30, 1.20, -0.72], ['c', 0.45, -0.39, 0.60, -0.45, 0.78, -0.27], ['c', 0.18, 0.18, 0.09, 0.36, -0.45, 0.87], ['c', -1.05, 0.96, -1.83, 1.47, -2.58, 1.71], ['c', -0.93, 0.33, -1.53, 0.21, -1.80, -0.33], ['c', -0.06, -0.15, -0.06, -0.21, -0.06, -0.45], ['c', 0.00, -0.24, 0.03, -0.48, 0.60, -2.82], ['c', 0.42, -1.71, 0.60, -2.64, 0.63, -2.79], ['c', 0.03, -0.57, -0.30, -0.75, -0.84, -0.48], ['c', -0.24, 0.12, -0.54, 0.39, -0.66, 0.63], ['c', -0.03, 0.09, -0.42, 1.38, -0.90, 3.00], ['c', -0.90, 3.15, -0.84, 3.00, -1.14, 3.15], ['l', -0.15, 0.09], ['l', -0.78, 0.00], ['c', -0.60, 0.00, -0.78, 0.00, -0.84, -0.06], ['c', -0.09, -0.03, -0.18, -0.18, -0.18, -0.27], ['c', 0.00, -0.03, 0.36, -1.38, 0.84, -2.97], ['c', 0.57, -2.04, 0.81, -2.97, 0.84, -3.12], ['c', 0.03, -0.54, -0.30, -0.72, -0.84, -0.45], ['c', -0.24, 0.12, -0.57, 0.42, -0.66, 0.63], ['c', -0.06, 0.09, -0.51, 1.44, -1.05, 2.97], ['c', -0.51, 1.56, -0.99, 2.85, -0.99, 2.91], ['c', -0.06, 0.12, -0.21, 0.24, -0.36, 0.30], ['c', -0.12, 0.06, -0.21, 0.06, -0.90, 0.06], ['c', -0.60, 0.00, -0.78, 0.00, -0.84, -0.06], ['c', -0.09, -0.03, -0.18, -0.18, -0.18, -0.27], ['c', 0.00, -0.03, 0.45, -1.38, 0.99, -2.97], ['c', 1.05, -3.18, 1.05, -3.18, 0.93, -3.45], ['c', -0.12, -0.27, -0.39, -0.30, -0.72, -0.15], ['c', -0.54, 0.27, -1.14, 1.17, -1.56, 2.40], ['c', -0.06, 0.15, -0.15, 0.30, -0.18, 0.36], ['c', -0.21, 0.21, -0.57, 0.27, -0.72, 0.09], ['c', -0.09, -0.09, -0.06, -0.21, 0.06, -0.63], ['c', 0.48, -1.26, 1.26, -2.46, 2.01, -3.21], ['c', 0.57, -0.54, 1.20, -0.87, 1.83, -1.02], ['z']], w: 14.687, h: 9.126 },\n\t'p': { d: [['M', 1.92, -8.70], ['c', 0.27, -0.09, 0.81, -0.06, 1.11, 0.03], ['c', 0.54, 0.18, 0.93, 0.51, 1.17, 0.99], ['c', 0.09, 0.15, 0.15, 0.33, 0.18, 0.36], ['l', 0.00, 0.12], ['l', 0.30, -0.27], ['c', 0.66, -0.60, 1.35, -1.02, 2.13, -1.20], ['c', 0.21, -0.06, 0.33, -0.06, 0.78, -0.06], ['c', 0.45, 0.00, 0.51, 0.00, 0.84, 0.09], ['c', 1.29, 0.33, 2.07, 1.32, 2.25, 2.79], ['c', 0.09, 0.81, -0.09, 2.01, -0.45, 2.79], ['c', -0.54, 1.26, -1.86, 2.55, -3.18, 3.03], ['c', -0.45, 0.18, -0.81, 0.24, -1.29, 0.24], ['c', -0.69, -0.03, -1.35, -0.18, -1.86, -0.45], ['c', -0.30, -0.15, -0.51, -0.18, -0.69, -0.09], ['c', -0.09, 0.03, -0.18, 0.09, -0.18, 0.12], ['c', -0.09, 0.12, -1.05, 2.94, -1.05, 3.06], ['c', 0.00, 0.24, 0.18, 0.48, 0.51, 0.63], ['c', 0.18, 0.06, 0.54, 0.15, 0.75, 0.15], ['c', 0.21, 0.00, 0.36, 0.06, 0.42, 0.18], ['c', 0.12, 0.18, 0.06, 0.42, -0.12, 0.54], ['c', -0.09, 0.03, -0.15, 0.03, -0.78, 0.00], ['c', -1.98, -0.15, -3.81, -0.15, -5.79, 0.00], ['c', -0.63, 0.03, -0.69, 0.03, -0.78, 0.00], ['c', -0.24, -0.15, -0.24, -0.57, 0.03, -0.66], ['c', 0.06, -0.03, 0.48, -0.09, 0.99, -0.12], ['c', 0.87, -0.06, 1.11, -0.09, 1.35, -0.21], ['c', 0.18, -0.06, 0.33, -0.18, 0.39, -0.30], ['c', 0.06, -0.12, 3.24, -9.42, 3.27, -9.60], ['c', 0.06, -0.33, 0.03, -0.57, -0.15, -0.69], ['c', -0.09, -0.06, -0.12, -0.06, -0.30, -0.06], ['c', -0.69, 0.06, -1.53, 1.02, -2.28, 2.61], ['c', -0.09, 0.21, -0.21, 0.45, -0.27, 0.51], ['c', -0.09, 0.12, -0.33, 0.24, -0.48, 0.24], ['c', -0.18, 0.00, -0.36, -0.15, -0.36, -0.30], ['c', 0.00, -0.24, 0.78, -1.83, 1.26, -2.55], ['c', 0.72, -1.11, 1.47, -1.74, 2.28, -1.92], ['z'], ['m', 5.37, 1.47], ['c', -0.27, -0.12, -0.75, -0.03, -1.14, 0.21], ['c', -0.75, 0.48, -1.47, 1.68, -1.89, 3.15], ['c', -0.45, 1.47, -0.42, 2.34, 0.00, 2.70], ['c', 0.45, 0.39, 1.26, 0.21, 1.83, -0.36], ['c', 0.51, -0.51, 0.99, -1.68, 1.38, -3.27], ['c', 0.30, -1.17, 0.33, -1.74, 0.15, -2.13], ['c', -0.09, -0.15, -0.15, -0.21, -0.33, -0.30], ['z']], w: 14.689, h: 13.127 },\n\t'r': { d: [['M', 6.33, -9.12], ['c', 0.27, -0.03, 0.93, 0.00, 1.20, 0.06], ['c', 0.84, 0.21, 1.23, 0.81, 1.02, 1.53], ['c', -0.24, 0.75, -0.90, 1.17, -1.56, 0.96], ['c', -0.33, -0.09, -0.51, -0.30, -0.66, -0.75], ['c', -0.03, -0.12, -0.09, -0.24, -0.12, -0.30], ['c', -0.09, -0.15, -0.30, -0.24, -0.48, -0.24], ['c', -0.57, 0.00, -1.38, 0.54, -1.65, 1.08], ['c', -0.06, 0.15, -0.33, 1.17, -0.90, 3.27], ['c', -0.57, 2.31, -0.81, 3.12, -0.87, 3.21], ['c', -0.03, 0.06, -0.12, 0.15, -0.18, 0.21], ['l', -0.12, 0.06], ['l', -0.81, 0.03], ['c', -0.69, 0.00, -0.81, 0.00, -0.90, -0.03], ['c', -0.09, -0.06, -0.18, -0.21, -0.18, -0.30], ['c', 0.00, -0.06, 0.39, -1.62, 0.90, -3.51], ['c', 0.84, -3.24, 0.87, -3.45, 0.87, -3.72], ['c', 0.00, -0.21, 0.00, -0.27, -0.03, -0.36], ['c', -0.12, -0.15, -0.21, -0.24, -0.42, -0.24], ['c', -0.24, 0.00, -0.45, 0.15, -0.78, 0.42], ['c', -0.33, 0.36, -0.45, 0.54, -0.72, 1.14], ['c', -0.03, 0.12, -0.21, 0.24, -0.36, 0.27], ['c', -0.12, 0.00, -0.15, 0.00, -0.24, -0.06], ['c', -0.18, -0.12, -0.18, -0.21, -0.06, -0.54], ['c', 0.21, -0.57, 0.42, -0.93, 0.78, -1.32], ['c', 0.54, -0.51, 1.20, -0.81, 1.95, -0.87], ['c', 0.81, -0.03, 1.53, 0.30, 1.92, 0.87], ['l', 0.12, 0.18], ['l', 0.09, -0.09], ['c', 0.57, -0.45, 1.41, -0.84, 2.19, -0.96], ['z']], w: 9.41, h: 9.132 },\n\t's': { d: [['M', 4.47, -8.73], ['c', 0.09, 0.00, 0.36, -0.03, 0.57, -0.03], ['c', 0.75, 0.03, 1.29, 0.24, 1.71, 0.63], ['c', 0.51, 0.54, 0.66, 1.26, 0.36, 1.83], ['c', -0.24, 0.42, -0.63, 0.57, -1.11, 0.42], ['c', -0.33, -0.09, -0.60, -0.36, -0.60, -0.57], ['c', 0.00, -0.03, 0.06, -0.21, 0.15, -0.39], ['c', 0.12, -0.21, 0.15, -0.33, 0.18, -0.48], ['c', 0.00, -0.24, -0.06, -0.48, -0.15, -0.60], ['c', -0.15, -0.21, -0.42, -0.24, -0.75, -0.15], ['c', -0.27, 0.06, -0.48, 0.18, -0.69, 0.36], ['c', -0.39, 0.39, -0.51, 0.96, -0.33, 1.38], ['c', 0.09, 0.21, 0.42, 0.51, 0.78, 0.72], ['c', 1.11, 0.69, 1.59, 1.11, 1.89, 1.68], ['c', 0.21, 0.39, 0.24, 0.78, 0.15, 1.29], ['c', -0.18, 1.20, -1.17, 2.16, -2.52, 2.52], ['c', -1.02, 0.24, -1.95, 0.12, -2.70, -0.42], ['c', -0.72, -0.51, -0.99, -1.47, -0.60, -2.19], ['c', 0.24, -0.48, 0.72, -0.63, 1.17, -0.42], ['c', 0.33, 0.18, 0.54, 0.45, 0.57, 0.81], ['c', 0.00, 0.21, -0.03, 0.30, -0.33, 0.51], ['c', -0.33, 0.24, -0.39, 0.42, -0.27, 0.69], ['c', 0.06, 0.15, 0.21, 0.27, 0.45, 0.33], ['c', 0.30, 0.09, 0.87, 0.09, 1.20, 0.00], ['c', 0.75, -0.21, 1.23, -0.72, 1.29, -1.35], ['c', 0.03, -0.42, -0.15, -0.81, -0.54, -1.20], ['c', -0.24, -0.24, -0.48, -0.42, -1.41, -1.02], ['c', -0.69, -0.42, -1.05, -0.93, -1.05, -1.47], ['c', 0.00, -0.39, 0.12, -0.87, 0.30, -1.23], ['c', 0.27, -0.57, 0.78, -1.05, 1.38, -1.35], ['c', 0.24, -0.12, 0.63, -0.27, 0.90, -0.30], ['z']], w: 6.632, h: 8.758 },\n\t'z': { d: [['M', 2.64, -7.95], ['c', 0.36, -0.09, 0.81, -0.03, 1.71, 0.27], ['c', 0.78, 0.21, 0.96, 0.27, 1.74, 0.30], ['c', 0.87, 0.06, 1.02, 0.03, 1.38, -0.21], ['c', 0.21, -0.15, 0.33, -0.15, 0.48, -0.06], ['c', 0.15, 0.09, 0.21, 0.30, 0.15, 0.45], ['c', -0.03, 0.06, -1.26, 1.26, -2.76, 2.67], ['l', -2.73, 2.55], ['l', 0.54, 0.03], ['c', 0.54, 0.03, 0.72, 0.03, 2.01, 0.15], ['c', 0.36, 0.03, 0.90, 0.06, 1.20, 0.09], ['c', 0.66, 0.00, 0.81, -0.03, 1.02, -0.24], ['c', 0.30, -0.30, 0.39, -0.72, 0.27, -1.23], ['c', -0.06, -0.27, -0.06, -0.27, -0.03, -0.39], ['c', 0.15, -0.30, 0.54, -0.27, 0.69, 0.03], ['c', 0.15, 0.33, 0.27, 1.02, 0.27, 1.50], ['c', 0.00, 1.47, -1.11, 2.70, -2.52, 2.79], ['c', -0.57, 0.03, -1.02, -0.09, -2.01, -0.51], ['c', -1.02, -0.42, -1.23, -0.48, -2.13, -0.54], ['c', -0.81, -0.06, -0.96, -0.03, -1.26, 0.18], ['c', -0.12, 0.06, -0.24, 0.12, -0.27, 0.12], ['c', -0.27, 0.00, -0.45, -0.30, -0.36, -0.51], ['c', 0.03, -0.06, 1.32, -1.32, 2.91, -2.79], ['l', 2.88, -2.73], ['c', -0.03, 0.00, -0.21, 0.03, -0.42, 0.06], ['c', -0.21, 0.03, -0.78, 0.09, -1.23, 0.12], ['c', -1.11, 0.12, -1.23, 0.15, -1.95, 0.27], ['c', -0.72, 0.15, -1.17, 0.18, -1.29, 0.09], ['c', -0.27, -0.18, -0.21, -0.75, 0.12, -1.26], ['c', 0.39, -0.60, 0.93, -1.02, 1.59, -1.20], ['z']], w: 8.573, h: 8.743 },\n\t'+': { d: [['M', 3.48, -9.3], ['c', 0.18, -0.09, 0.36, -0.09, 0.54, 0.00], ['c', 0.18, 0.09, 0.24, 0.15, 0.33, 0.30], ['l', 0.06, 0.15], ['l', 0.00, 1.29], ['l', 0.00, 1.29], ['l', 1.29, 0.00], ['c', 1.23, 0.00, 1.29, 0.00, 1.41, 0.06], ['c', 0.06, 0.03, 0.15, 0.09, 0.18, 0.12], ['c', 0.12, 0.09, 0.21, 0.33, 0.21, 0.48], ['c', 0.00, 0.15, -0.09, 0.39, -0.21, 0.48], ['c', -0.03, 0.03, -0.12, 0.09, -0.18, 0.12], ['c', -0.12, 0.06, -0.18, 0.06, -1.41, 0.06], ['l', -1.29, 0.00], ['l', 0.00, 1.29], ['c', 0.00, 1.23, 0.00, 1.29, -0.06, 1.41], ['c', -0.09, 0.18, -0.15, 0.24, -0.30, 0.33], ['c', -0.21, 0.09, -0.39, 0.09, -0.57, 0.00], ['c', -0.18, -0.09, -0.24, -0.15, -0.33, -0.33], ['c', -0.06, -0.12, -0.06, -0.18, -0.06, -1.41], ['l', 0.00, -1.29], ['l', -1.29, 0.00], ['c', -1.23, 0.00, -1.29, 0.00, -1.41, -0.06], ['c', -0.18, -0.09, -0.24, -0.15, -0.33, -0.33], ['c', -0.09, -0.18, -0.09, -0.36, 0.00, -0.54], ['c', 0.09, -0.18, 0.15, -0.24, 0.33, -0.33], ['l', 0.15, -0.06], ['l', 1.26, 0.00], ['l', 1.29, 0.00], ['l', 0.00, -1.29], ['c', 0.00, -1.23, 0.00, -1.29, 0.06, -1.41], ['c', 0.09, -0.18, 0.15, -0.24, 0.33, -0.33], ['z']], w: 7.507, h: 7.515 },\n\t',': { d: [['M', 1.85, -3.36], ['c', 0.57, -0.15, 1.17, 0.03, 1.59, 0.45], ['c', 0.45, 0.45, 0.60, 0.96, 0.51, 1.89], ['c', -0.09, 1.23, -0.42, 2.46, -0.99, 3.93], ['c', -0.30, 0.72, -0.72, 1.62, -0.78, 1.68], ['c', -0.18, 0.21, -0.51, 0.18, -0.66, -0.06], ['c', -0.03, -0.06, -0.06, -0.15, -0.06, -0.18], ['c', 0.00, -0.06, 0.12, -0.33, 0.24, -0.63], ['c', 0.84, -1.80, 1.02, -2.61, 0.69, -3.24], ['c', -0.12, -0.24, -0.27, -0.36, -0.75, -0.60], ['c', -0.36, -0.15, -0.42, -0.21, -0.60, -0.39], ['c', -0.69, -0.69, -0.69, -1.71, 0.00, -2.40], ['c', 0.21, -0.21, 0.51, -0.39, 0.81, -0.45], ['z']], w: 3.452, h: 8.143 },\n\t'-': { d: [['M', 0.18, -5.34], ['c', 0.09, -0.06, 0.15, -0.06, 2.31, -0.06], ['c', 2.46, 0.00, 2.37, 0.00, 2.46, 0.21], ['c', 0.12, 0.21, 0.03, 0.42, -0.15, 0.54], ['c', -0.09, 0.06, -0.15, 0.06, -2.28, 0.06], ['c', -2.16, 0.00, -2.22, 0.00, -2.31, -0.06], ['c', -0.27, -0.15, -0.27, -0.54, -0.03, -0.69], ['z']], w: 5.001, h: 0.81 },\n\t'.': { d: [['M', 1.32, -3.36], ['c', 1.05, -0.27, 2.10, 0.57, 2.10, 1.65], ['c', 0.00, 1.08, -1.05, 1.92, -2.10, 1.65], ['c', -0.90, -0.21, -1.50, -1.14, -1.26, -2.04], ['c', 0.12, -0.63, 0.63, -1.11, 1.26, -1.26], ['z']], w: 3.413, h: 3.402 },\n\t'scripts.wedge': { d: [['M', -3.66, -7.44], ['c', 0.06, -0.09, 0.00, -0.09, 0.81, 0.03], ['c', 1.86, 0.30, 3.84, 0.30, 5.73, 0.00], ['c', 0.78, -0.12, 0.72, -0.12, 0.78, -0.03], ['c', 0.15, 0.15, 0.12, 0.24, -0.24, 0.60], ['c', -0.93, 0.93, -1.98, 2.76, -2.67, 4.62], ['c', -0.30, 0.78, -0.51, 1.71, -0.51, 2.13], ['c', 0.00, 0.15, 0.00, 0.18, -0.06, 0.27], ['c', -0.12, 0.09, -0.24, 0.09, -0.36, 0.00], ['c', -0.06, -0.09, -0.06, -0.12, -0.06, -0.27], ['c', 0.00, -0.42, -0.21, -1.35, -0.51, -2.13], ['c', -0.69, -1.86, -1.74, -3.69, -2.67, -4.62], ['c', -0.36, -0.36, -0.39, -0.45, -0.24, -0.60], ['z']], w: 7.49, h: 7.752 },\n\t'scripts.thumb': { d: [['M', -0.54, -3.69], ['c', 0.15, -0.03, 0.36, -0.06, 0.51, -0.06], ['c', 1.44, 0.00, 2.58, 1.11, 2.94, 2.85], ['c', 0.09, 0.48, 0.09, 1.32, 0.00, 1.80], ['c', -0.27, 1.41, -1.08, 2.43, -2.16, 2.73], ['l', -0.18, 0.06], ['l', 0.00, 0.12], ['c', 0.03, 0.06, 0.06, 0.45, 0.09, 0.87], ['c', 0.03, 0.57, 0.03, 0.78, 0.00, 0.84], ['c', -0.09, 0.27, -0.39, 0.48, -0.66, 0.48], ['c', -0.27, 0.00, -0.57, -0.21, -0.66, -0.48], ['c', -0.03, -0.06, -0.03, -0.27, 0.00, -0.84], ['c', 0.03, -0.42, 0.06, -0.81, 0.09, -0.87], ['l', 0.00, -0.12], ['l', -0.18, -0.06], ['c', -1.08, -0.30, -1.89, -1.32, -2.16, -2.73], ['c', -0.09, -0.48, -0.09, -1.32, 0.00, -1.80], ['c', 0.15, -0.84, 0.51, -1.53, 1.02, -2.04], ['c', 0.39, -0.39, 0.84, -0.63, 1.35, -0.75], ['z'], ['m', 1.05, 0.90], ['c', -0.15, -0.09, -0.21, -0.09, -0.45, -0.12], ['c', -0.15, 0.00, -0.30, 0.03, -0.39, 0.03], ['c', -0.57, 0.18, -0.90, 0.72, -1.08, 1.74], ['c', -0.06, 0.48, -0.06, 1.80, 0.00, 2.28], ['c', 0.15, 0.90, 0.42, 1.44, 0.90, 1.65], ['c', 0.18, 0.09, 0.21, 0.09, 0.51, 0.09], ['c', 0.30, 0.00, 0.33, 0.00, 0.51, -0.09], ['c', 0.48, -0.21, 0.75, -0.75, 0.90, -1.65], ['c', 0.03, -0.27, 0.03, -0.54, 0.03, -1.14], ['c', 0.00, -0.60, 0.00, -0.87, -0.03, -1.14], ['c', -0.15, -0.90, -0.45, -1.44, -0.90, -1.65], ['z']], w: 5.955, h: 9.75 },\n\t'scripts.open': { d: [['M', -0.54, -3.69], ['c', 0.15, -0.03, 0.36, -0.06, 0.51, -0.06], ['c', 1.44, 0.00, 2.58, 1.11, 2.94, 2.85], ['c', 0.09, 0.48, 0.09, 1.32, 0.00, 1.80], ['c', -0.33, 1.74, -1.47, 2.85, -2.91, 2.85], ['c', -1.44, 0.00, -2.58, -1.11, -2.91, -2.85], ['c', -0.09, -0.48, -0.09, -1.32, 0.00, -1.80], ['c', 0.15, -0.84, 0.51, -1.53, 1.02, -2.04], ['c', 0.39, -0.39, 0.84, -0.63, 1.35, -0.75], ['z'], ['m', 1.11, 0.90], ['c', -0.21, -0.09, -0.27, -0.09, -0.51, -0.12], ['c', -0.30, 0.00, -0.42, 0.03, -0.66, 0.15], ['c', -0.24, 0.12, -0.51, 0.39, -0.66, 0.63], ['c', -0.54, 0.93, -0.63, 2.64, -0.21, 3.81], ['c', 0.21, 0.54, 0.51, 0.90, 0.93, 1.11], ['c', 0.21, 0.09, 0.24, 0.09, 0.54, 0.09], ['c', 0.30, 0.00, 0.33, 0.00, 0.54, -0.09], ['c', 0.42, -0.21, 0.72, -0.57, 0.93, -1.11], ['c', 0.36, -0.99, 0.36, -2.37, 0.00, -3.36], ['c', -0.21, -0.54, -0.51, -0.90, -0.90, -1.11], ['z']], w: 5.955, h: 7.5 },\n\t'scripts.longphrase': { d: [['M', 1.47, -15.09], ['c', 0.36, -0.09, 0.66, -0.18, 0.69, -0.18], ['c', 0.06, 0.00, 0.06, 0.54, 0.06, 11.25], ['l', 0.00, 11.25], ['l', -0.63, 0.15], ['c', -0.66, 0.18, -1.44, 0.39, -1.50, 0.39], ['c', -0.03, 0.00, -0.03, -3.39, -0.03, -11.25], ['l', 0.00, -11.25], ['l', 0.36, -0.09], ['c', 0.21, -0.06, 0.66, -0.18, 1.05, -0.27], ['z']], w: 2.16, h: 23.04 },\n\t'scripts.mediumphrase': { d: [['M', 1.47, -7.59], ['c', 0.36, -0.09, 0.66, -0.18, 0.69, -0.18], ['c', 0.06, 0.00, 0.06, 0.39, 0.06, 7.50], ['l', 0.00, 7.50], ['l', -0.63, 0.15], ['c', -0.66, 0.18, -1.44, 0.39, -1.50, 0.39], ['c', -0.03, 0.00, -0.03, -2.28, -0.03, -7.50], ['l', 0.00, -7.50], ['l', 0.36, -0.09], ['c', 0.21, -0.06, 0.66, -0.18, 1.05, -0.27], ['z']], w: 2.16, h: 15.54 },\n\t'scripts.shortphrase': { d: [['M', 1.47, -7.59], ['c', 0.36, -0.09, 0.66, -0.18, 0.69, -0.18], ['c', 0.06, 0.00, 0.06, 0.21, 0.06, 3.75], ['l', 0.00, 3.75], ['l', -0.42, 0.09], ['c', -0.57, 0.18, -1.65, 0.45, -1.71, 0.45], ['c', -0.03, 0.00, -0.03, -0.72, -0.03, -3.75], ['l', 0.00, -3.75], ['l', 0.36, -0.09], ['c', 0.21, -0.06, 0.66, -0.18, 1.05, -0.27], ['z']], w: 2.16, h: 8.04 },\n\t'scripts.snap': { d: [['M', 4.50, -3.39], ['c', 0.36, -0.03, 0.96, -0.03, 1.35, 0.00], ['c', 1.56, 0.15, 3.15, 0.90, 4.20, 2.01], ['c', 0.24, 0.27, 0.33, 0.42, 0.33, 0.60], ['c', 0.00, 0.27, 0.03, 0.24, -2.46, 2.22], ['c', -1.29, 1.02, -2.40, 1.86, -2.49, 1.92], ['c', -0.18, 0.09, -0.30, 0.09, -0.48, 0.00], ['c', -0.09, -0.06, -1.20, -0.90, -2.49, -1.92], ['c', -2.49, -1.98, -2.46, -1.95, -2.46, -2.22], ['c', 0.00, -0.18, 0.09, -0.33, 0.33, -0.60], ['c', 1.05, -1.08, 2.64, -1.86, 4.17, -2.01], ['z'], ['m', 1.29, 1.17], ['c', -1.47, -0.15, -2.97, 0.30, -4.14, 1.20], ['l', -0.18, 0.15], ['l', 0.06, 0.09], ['c', 0.15, 0.12, 3.63, 2.85, 3.66, 2.85], ['c', 0.03, 0.00, 3.51, -2.73, 3.66, -2.85], ['l', 0.06, -0.09], ['l', -0.18, -0.15], ['c', -0.84, -0.66, -1.89, -1.08, -2.94, -1.20], ['z']], w: 10.38, h: 6.84 }\n};\n\n// Custom characters that weren't generated from the font:\nglyphs['noteheads.slash.whole'] = { d: [['M', 5, -5], ['l', 1, 1], ['l', -5, 5], ['l', -1, -1], ['z'], ['m', 4, 6], ['l', -5, -5], ['l', 2, -2], ['l', 5, 5], ['z'], ['m', 0, -2], ['l', 1, 1], ['l', -5, 5], ['l', -1, -1], ['z'], ['m', -4, 6], ['l', -5, -5], ['l', 2, -2], ['l', 5, 5], ['z']], w: 10.81, h: 15.63 };\n\nglyphs['noteheads.slash.quarter'] = { d: [['M', 9, -6], ['l', 0, 4], ['l', -9, 9], ['l', 0, -4], ['z']], w: 9, h: 9 };\n\nglyphs['noteheads.harmonic.quarter'] = { d: [['M', 3.63, -4.02], ['c', 0.09, -0.06, 0.18, -0.09, 0.24, -0.03], ['c', 0.03, 0.03, 0.87, 0.93, 1.83, 2.01], ['c', 1.50, 1.65, 1.80, 1.98, 1.80, 2.04], ['c', 0.00, 0.06, -0.30, 0.39, -1.80, 2.04], ['c', -0.96, 1.08, -1.80, 1.98, -1.83, 2.01], ['c', -0.06, 0.06, -0.15, 0.03, -0.24, -0.03], ['c', -0.12, -0.09, -3.54, -3.84, -3.60, -3.93], ['c', -0.03, -0.03, -0.03, -0.09, -0.03, -0.15], ['c', 0.03, -0.06, 3.45, -3.84, 3.63, -3.96], ['z']], w: 7.5, h: 8.165 };\n\nglyphs['noteheads.triangle.quarter'] = { d: [['M', 0, 4], ['l', 9, 0], ['l', -4.5, -9], ['z']], w: 9, h: 9 };\n\nvar pathClone = function (pathArray) {\n\tvar res = [];\n\tfor (var i = 0, ii = pathArray.length; i < ii; i++) {\n\t\tres[i] = [];\n\t\tfor (var j = 0, jj = pathArray[i].length; j < jj; j++) {\n\t\t\tres[i][j] = pathArray[i][j];\n\t\t}\n\t}\n\treturn res;\n};\n\nvar pathScale = function (pathArray, kx, ky) {\n\tfor (var i = 0, ii = pathArray.length; i < ii; i++) {\n\t\tvar p = pathArray[i];\n\t\tvar j, jj;\n\t\tfor (j = 1, jj = p.length; j < jj; j++) {\n\t\t\tp[j] *= (j % 2) ? kx : ky;\n\t\t}\n\t}\n};\n\nvar Glyphs = {\n\tprintSymbol: function (x, y, symb, paper, attrs) {\n\t\tif (!glyphs[symb]) return null;\n\t\tvar pathArray = pathClone(glyphs[symb].d);\n\t\tpathArray[0][1] += x;\n\t\tpathArray[0][2] += y;\n\t\tvar path = \"\";\n\t\tfor (var i = 0; i < pathArray.length; i++)\n\t\t\tpath += pathArray[i].join(\" \");\n\t\tattrs.path = path;\n\t\treturn paper.path(attrs);\n\t},\n\n\tgetPathForSymbol: function (x, y, symb, scalex, scaley) {\n\t\tscalex = scalex || 1;\n\t\tscaley = scaley || 1;\n\t\tif (!glyphs[symb]) return null;\n\t\tvar pathArray = pathClone(glyphs[symb].d);\n\t\tif (scalex !== 1 || scaley !== 1) pathScale(pathArray, scalex, scaley);\n\t\tpathArray[0][1] += x;\n\t\tpathArray[0][2] += y;\n\n\t\treturn pathArray;\n\t},\n\n\tgetSymbolWidth: function (symbol) {\n\t\tif (glyphs[symbol]) return glyphs[symbol].w;\n\t\treturn 0;\n\t},\n\n\tsymbolHeightInPitches: function (symbol) {\n\t\tvar height = glyphs[symbol] ? glyphs[symbol].h : 0;\n\t\treturn height / spacing.STEP;\n\t},\n\n\tgetSymbolAlign: function (symbol) {\n\t\tif (symbol.substring(0, 7) === \"scripts\" &&\n\t\t\tsymbol !== \"scripts.roll\") {\n\t\t\treturn \"center\";\n\t\t}\n\t\treturn \"left\";\n\t},\n\n\tgetYCorr: function (symbol) {\n\t\tswitch (symbol) {\n\t\t\tcase \"0\":\n\t\t\tcase \"1\":\n\t\t\tcase \"2\":\n\t\t\tcase \"3\":\n\t\t\tcase \"4\":\n\t\t\tcase \"5\":\n\t\t\tcase \"6\":\n\t\t\tcase \"7\":\n\t\t\tcase \"8\":\n\t\t\tcase \"9\":\n\t\t\tcase \"+\": return -2;\n\t\t\tcase \"timesig.common\":\n\t\t\tcase \"timesig.cut\": return 0;\n\t\t\tcase \"flags.d32nd\": return -1;\n\t\t\tcase \"flags.d64th\": return -2;\n\t\t\tcase \"flags.u32nd\": return 1;\n\t\t\tcase \"flags.u64th\": return 3;\n\t\t\tcase \"rests.whole\": return 1;\n\t\t\tcase \"rests.half\": return -1;\n\t\t\tcase \"rests.8th\": return -1;\n\t\t\tcase \"rests.quarter\": return -1;\n\t\t\tcase \"rests.16th\": return -1;\n\t\t\tcase \"rests.32nd\": return -1;\n\t\t\tcase \"rests.64th\": return -1;\n\t\t\tcase \"f\":\n\t\t\tcase \"m\":\n\t\t\tcase \"p\":\n\t\t\tcase \"s\":\n\t\t\tcase \"z\":\n\t\t\t\treturn -4;\n\t\t\tcase \"scripts.trill\":\n\t\t\tcase \"scripts.upbow\":\n\t\t\tcase \"scripts.downbow\":\n\t\t\t\treturn -2;\n\t\t\tcase \"scripts.ufermata\":\n\t\t\tcase \"scripts.wedge\":\n\t\t\tcase \"scripts.roll\":\n\t\t\tcase \"scripts.shortphrase\":\n\t\t\tcase \"scripts.longphrase\":\n\t\t\t\treturn -1;\n\t\t\tcase \"scripts.dfermata\":\n\t\t\t\treturn 1;\n\t\t\tdefault: return 0;\n\t\t}\n\t},\n\tsetSymbol: function (name, path) {\n\t\tglyphs[name] = path;\n\t}\n};\n\nmodule.exports = Glyphs; // we need the glyphs for layout information\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2dseXBocy5qcyIsIm1hcHBpbmdzIjoiQUFBQSxjQUFjLG1CQUFPLENBQUMsbUZBQW9COztBQUUxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1K0JBQXUrQjtBQUMvK0IsUUFBUSxvekNBQW96QztBQUM1ekMsUUFBUSx3MkRBQXcyRDtBQUNoM0QsUUFBUSx5cEVBQXlwRTtBQUNqcUUsUUFBUSxpMkRBQWkyRDtBQUN6MkQsUUFBUSxnMURBQWcxRDtBQUN4MUQsUUFBUSwrdURBQSt1RDtBQUN2dkQsUUFBUSw0dkRBQTR2RDtBQUNwd0QsUUFBUSwrckRBQStyRDtBQUN2c0QsUUFBUSxxeERBQXF4RDtBQUM3eEQseUJBQXlCLGdNQUFnTTtBQUN6TixrQkFBa0IsMFZBQTBWO0FBQzVXLGlCQUFpQiwyVkFBMlY7QUFDNVcsb0JBQW9CLHM4Q0FBczhDO0FBQzE5QyxnQkFBZ0IseTlCQUF5OUI7QUFDeitCLGlCQUFpQiwwaERBQTBoRDtBQUMzaUQsaUJBQWlCLGdrRUFBZ2tFO0FBQ2psRSxpQkFBaUIsc2hGQUFzaEY7QUFDdmlGLGtCQUFrQix3dUdBQXd1RztBQUMxdkcsd0JBQXdCLHc5RUFBdzlFO0FBQ2gvRSw0QkFBNEIsdXREQUF1dEQ7QUFDbnZELHNCQUFzQixzckNBQXNyQztBQUM1c0MsdUJBQXVCLG12Q0FBbXZDO0FBQzF3QywyQkFBMkIsc3NDQUFzc0M7QUFDanVDLDBCQUEwQixzOEVBQXM4RTtBQUNoK0UsMkJBQTJCLHdsRUFBd2xFO0FBQ25uRSxlQUFlLHNSQUFzUjtBQUNyUyxvQkFBb0IsczlEQUFzOUQ7QUFDMStELHNCQUFzQixraENBQWtoQztBQUN4aUMscUJBQXFCLHk0QkFBeTRCO0FBQzk1Qix3QkFBd0IseWlCQUF5aUI7QUFDamtCLDZCQUE2QiwyWkFBMlo7QUFDeGIsOEJBQThCLDRwQ0FBNHBDO0FBQzFyQyx1QkFBdUIsNitCQUE2K0I7QUFDcGdDLHVCQUF1QixpK0JBQWkrQjtBQUN4L0IsdUJBQXVCLCsyQkFBKzJCO0FBQ3Q0Qix1QkFBdUIsOE9BQThPO0FBQ3JRLHFCQUFxQiw2U0FBNlM7QUFDbFUsdUJBQXVCLDZvQkFBNm9CO0FBQ3BxQix1QkFBdUIsNmtCQUE2a0I7QUFDcG1CLHNCQUFzQixxa0NBQXFrQztBQUMzbEMsb0JBQW9CLHV6QkFBdXpCO0FBQzMwQixzQkFBc0Isa2lCQUFraUI7QUFDeGpCLG1CQUFtQix1N0NBQXU3QztBQUMxOEMsb0JBQW9CLHcrRkFBdytGO0FBQzUvRixvQkFBb0IsK3pGQUErekY7QUFDbjFGLG1CQUFtQix1K0VBQXUrRTtBQUMxL0Usb0JBQW9CLG1nQkFBbWdCO0FBQ3ZoQixtQkFBbUIseS9CQUF5L0I7QUFDNWdDLG9CQUFvQixpa0NBQWlrQztBQUNybEMsdUJBQXVCLHVRQUF1UTtBQUM5UixzQkFBc0IsMmtEQUEya0Q7QUFDam1ELGlCQUFpQix1ekJBQXV6QjtBQUN4MEIsa0JBQWtCLGs2Q0FBazZDO0FBQ3A3QyxrQkFBa0IsaS9EQUFpL0Q7QUFDbmdFLGtCQUFrQiwwdEZBQTB0RjtBQUM1dUYsaUJBQWlCLHExQkFBcTFCO0FBQ3QyQixtQkFBbUIsdWFBQXVhO0FBQzFiLG1CQUFtQiwwYUFBMGE7QUFDN2Isa0JBQWtCLCs5Q0FBKzlDO0FBQ2ovQyxrQkFBa0IsODVEQUE4NUQ7QUFDaDdELGtCQUFrQixxK0VBQXErRTtBQUN2L0UsY0FBYyw0aklBQTRqSTtBQUMxa0ksY0FBYyw4cURBQThxRDtBQUM1ckQsY0FBYyxxa0lBQXFrSTtBQUNubEksaUJBQWlCLDJwQkFBMnBCO0FBQzVxQixjQUFjLHE4TEFBcThMO0FBQ245TCxlQUFlLGt3TEFBa3dMO0FBQ2p4TCxxQkFBcUIsMjlDQUEyOUM7QUFDaC9DLGtCQUFrQix5cUVBQXlxRTtBQUMzckUsMEJBQTBCLHNFQUFzRTtBQUNoRywyQkFBMkIsc0VBQXNFO0FBQ2pHLHdCQUF3QixzRUFBc0U7QUFDOUYseUJBQXlCLHNFQUFzRTtBQUMvRixRQUFRLDJ3REFBMndEO0FBQ254RCxRQUFRLHl4RUFBeXhFO0FBQ2p5RSxRQUFRLDg4REFBODhEO0FBQ3Q5RCxRQUFRLDh3Q0FBOHdDO0FBQ3R4QyxRQUFRLGs1Q0FBazVDO0FBQzE1QyxRQUFRLG94Q0FBb3hDO0FBQzV4QyxRQUFRLGtvQ0FBa29DO0FBQzFvQyxRQUFRLG1tQkFBbW1CO0FBQzNtQixRQUFRLHNVQUFzVTtBQUM5VSxRQUFRLDRPQUE0TztBQUNwUCxvQkFBb0IsK2xCQUErbEI7QUFDbm5CLG9CQUFvQix1eENBQXV4QztBQUMzeUMsbUJBQW1CLHE0QkFBcTRCO0FBQ3g1Qix5QkFBeUIsNFdBQTRXO0FBQ3JZLDJCQUEyQix1V0FBdVc7QUFDbFksMEJBQTBCLHNXQUFzVztBQUNoWSxtQkFBbUI7QUFDbkI7O0FBRUE7QUFDQSxvQ0FBb0M7O0FBRXBDLHNDQUFzQzs7QUFFdEMseUNBQXlDOztBQUV6Qyx5Q0FBeUM7O0FBRXpDO0FBQ0E7QUFDQSx3Q0FBd0MsUUFBUTtBQUNoRDtBQUNBLDRDQUE0QyxRQUFRO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3Q0FBd0MsUUFBUTtBQUNoRDtBQUNBO0FBQ0EsNkJBQTZCLFFBQVE7QUFDckM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0JBQXNCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUEseUJBQXlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL2dseXBocy5qcz8yMGZhIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBzcGFjaW5nID0gcmVxdWlyZSgnLi4vaGVscGVycy9zcGFjaW5nJyk7XG5cbi8qKlxuICogR2x5cGhzIGFuZCBzb21lIG1ldGhvZHMgdG8gYWRqdXN0IGZvciB0aGVpciB4IGFuZCB5IGJhc2VsaW5lXG4gKi9cbnZhciBnbHlwaHMgPVxue1xuXHQnMCc6IHsgZDogW1snTScsIDQuODMsIC0xNC45N10sIFsnYycsIDAuMzMsIC0wLjAzLCAxLjExLCAwLjAwLCAxLjQ3LCAwLjA2XSwgWydjJywgMS42OCwgMC4zNiwgMi45NywgMS41OSwgMy43OCwgMy42MF0sIFsnYycsIDEuMjAsIDIuOTcsIDAuODEsIDYuOTYsIC0wLjkwLCA5LjI3XSwgWydjJywgLTAuNzgsIDEuMDgsIC0xLjcxLCAxLjcxLCAtMi45MSwgMS45NV0sIFsnYycsIC0wLjQ1LCAwLjA5LCAtMS4zMiwgMC4wOSwgLTEuNzcsIDAuMDBdLCBbJ2MnLCAtMC44MSwgLTAuMTgsIC0xLjQ3LCAtMC41MSwgLTIuMDcsIC0xLjAyXSwgWydjJywgLTIuMzQsIC0yLjA3LCAtMy4xNSwgLTYuNzIsIC0xLjc0LCAtMTAuMjBdLCBbJ2MnLCAwLjg3LCAtMi4xNiwgMi4yOCwgLTMuNDIsIDQuMTQsIC0zLjY2XSwgWyd6J10sIFsnbScsIDEuMTEsIDAuODddLCBbJ2MnLCAtMC4yMSwgLTAuMDYsIC0wLjY5LCAtMC4wOSwgLTAuODcsIC0wLjA2XSwgWydjJywgLTAuNTQsIDAuMTIsIC0wLjg3LCAwLjQyLCAtMS4xNywgMC45OV0sIFsnYycsIC0wLjM2LCAwLjY2LCAtMC41MSwgMS41NiwgLTAuNjAsIDMuMDBdLCBbJ2MnLCAtMC4wMywgMC43NSwgLTAuMDMsIDQuNTksIDAuMDAsIDUuMzFdLCBbJ2MnLCAwLjA5LCAxLjUwLCAwLjI3LCAyLjQwLCAwLjYwLCAzLjA2XSwgWydjJywgMC4yNCwgMC40OCwgMC41NywgMC43OCwgMC45NiwgMC45MF0sIFsnYycsIDAuMjcsIDAuMDksIDAuNzgsIDAuMDksIDEuMDUsIDAuMDBdLCBbJ2MnLCAwLjM5LCAtMC4xMiwgMC43MiwgLTAuNDIsIDAuOTYsIC0wLjkwXSwgWydjJywgMC4zMywgLTAuNjYsIDAuNTEsIC0xLjU2LCAwLjYwLCAtMy4wNl0sIFsnYycsIDAuMDMsIC0wLjcyLCAwLjAzLCAtNC41NiwgMC4wMCwgLTUuMzFdLCBbJ2MnLCAtMC4wOSwgLTEuNDcsIC0wLjI3LCAtMi4zNywgLTAuNjAsIC0zLjAzXSwgWydjJywgLTAuMjQsIC0wLjQ4LCAtMC41NCwgLTAuNzgsIC0wLjkzLCAtMC45MF0sIFsneiddXSwgdzogMTAuNzgsIGg6IDE0Ljk1OSB9LFxuXHQnMSc6IHsgZDogW1snTScsIDMuMzAsIC0xNS4wNl0sIFsnYycsIDAuMDYsIC0wLjA2LCAwLjIxLCAtMC4wMywgMC42NiwgMC4xNV0sIFsnYycsIDAuODEsIDAuMzksIDEuMDgsIDAuMzksIDEuODMsIDAuMDNdLCBbJ2MnLCAwLjIxLCAtMC4wOSwgMC4zOSwgLTAuMTUsIDAuNDIsIC0wLjE1XSwgWydjJywgMC4xMiwgMC4wMCwgMC4yMSwgMC4wOSwgMC4yNywgMC4yMV0sIFsnYycsIDAuMDYsIDAuMTIsIDAuMDYsIDAuMzMsIDAuMDYsIDUuOTRdLCBbJ2MnLCAwLjAwLCAzLjkzLCAwLjAwLCA1Ljg1LCAwLjAzLCA2LjAzXSwgWydjJywgMC4wNiwgMC4zNiwgMC4xNSwgMC42OSwgMC4yNywgMC45Nl0sIFsnYycsIDAuMzYsIDAuNzUsIDAuOTMsIDEuMTcsIDEuNjgsIDEuMjZdLCBbJ2MnLCAwLjMwLCAwLjAzLCAwLjM5LCAwLjA5LCAwLjM5LCAwLjMwXSwgWydjJywgMC4wMCwgMC4xNSwgLTAuMDMsIDAuMTgsIC0wLjA5LCAwLjI0XSwgWydjJywgLTAuMDYsIDAuMDYsIC0wLjA5LCAwLjA2LCAtMC40OCwgMC4wNl0sIFsnYycsIC0wLjQyLCAwLjAwLCAtMC42OSwgLTAuMDMsIC0yLjEwLCAtMC4yNF0sIFsnYycsIC0wLjkwLCAtMC4xNSwgLTEuNzcsIC0wLjE1LCAtMi42NywgMC4wMF0sIFsnYycsIC0xLjQxLCAwLjIxLCAtMS42OCwgMC4yNCwgLTIuMTAsIDAuMjRdLCBbJ2MnLCAtMC4zOSwgMC4wMCwgLTAuNDIsIDAuMDAsIC0wLjQ4LCAtMC4wNl0sIFsnYycsIC0wLjA2LCAtMC4wNiwgLTAuMDYsIC0wLjA5LCAtMC4wNiwgLTAuMjRdLCBbJ2MnLCAwLjAwLCAtMC4yMSwgMC4wNiwgLTAuMjcsIDAuMzYsIC0wLjMwXSwgWydjJywgMC43NSwgLTAuMDksIDEuMzIsIC0wLjUxLCAxLjY4LCAtMS4yNl0sIFsnYycsIDAuMTIsIC0wLjI3LCAwLjIxLCAtMC42MCwgMC4yNywgLTAuOTZdLCBbJ2MnLCAwLjAzLCAtMC4xOCwgMC4wMywgLTEuNTksIDAuMDMsIC00LjI5XSwgWydjJywgMC4wMCwgLTMuODcsIDAuMDAsIC00LjA1LCAtMC4wNiwgLTQuMTRdLCBbJ2MnLCAtMC4wOSwgLTAuMTUsIC0wLjE4LCAtMC4yNCwgLTAuMzksIC0wLjI0XSwgWydjJywgLTAuMTIsIDAuMDAsIC0wLjE1LCAwLjAzLCAtMC4yMSwgMC4wNl0sIFsnYycsIC0wLjAzLCAwLjA2LCAtMC40NSwgMC45OSwgLTAuOTYsIDIuMTNdLCBbJ2MnLCAtMC40OCwgMS4xNCwgLTAuOTAsIDIuMTAsIC0wLjkzLCAyLjE2XSwgWydjJywgLTAuMDYsIDAuMTUsIC0wLjIxLCAwLjI0LCAtMC4zMywgMC4yNF0sIFsnYycsIC0wLjI0LCAwLjAwLCAtMC40MiwgLTAuMTgsIC0wLjQyLCAtMC4zOV0sIFsnYycsIDAuMDAsIC0wLjA2LCAzLjI3LCAtNy42MiwgMy4zMywgLTcuNzRdLCBbJ3onXV0sIHc6IDguOTQsIGg6IDE1LjA1OCB9LFxuXHQnMic6IHsgZDogW1snTScsIDQuMjMsIC0xNC45N10sIFsnYycsIDAuNTcsIC0wLjA2LCAxLjY4LCAwLjAwLCAyLjM0LCAwLjE4XSwgWydjJywgMC42OSwgMC4xOCwgMS41MCwgMC41NCwgMi4wMSwgMC45MF0sIFsnYycsIDEuMzUsIDAuOTYsIDEuOTUsIDIuMjUsIDEuNzcsIDMuODFdLCBbJ2MnLCAtMC4xNSwgMS4zNSwgLTAuNjYsIDIuMzQsIC0xLjY4LCAzLjE1XSwgWydjJywgLTAuNjAsIDAuNDgsIC0xLjQ0LCAwLjkzLCAtMy4xMiwgMS42NV0sIFsnYycsIC0xLjMyLCAwLjU3LCAtMS44MCwgMC44MSwgLTIuMzcsIDEuMTRdLCBbJ2MnLCAtMC41NywgMC4zMywgLTAuNTcsIDAuMzMsIC0wLjI0LCAwLjI3XSwgWydjJywgMC4zOSwgLTAuMDksIDEuMjYsIC0wLjA5LCAxLjY4LCAwLjAwXSwgWydjJywgMC43MiwgMC4xNSwgMS40MSwgMC40NSwgMi4xMCwgMC45MF0sIFsnYycsIDAuOTksIDAuNjMsIDEuODYsIDAuODcsIDIuNTUsIDAuNzVdLCBbJ2MnLCAwLjI0LCAtMC4wNiwgMC40MiwgLTAuMTUsIDAuNTcsIC0wLjMwXSwgWydjJywgMC4xMiwgLTAuMDksIDAuMzAsIC0wLjQyLCAwLjMwLCAtMC41MV0sIFsnYycsIDAuMDAsIC0wLjA5LCAwLjEyLCAtMC4yMSwgMC4yNCwgLTAuMjRdLCBbJ2MnLCAwLjE4LCAtMC4wMywgMC4zOSwgMC4xMiwgMC4zOSwgMC4zMF0sIFsnYycsIDAuMDAsIDAuMTIsIC0wLjE1LCAwLjU3LCAtMC4zMCwgMC44N10sIFsnYycsIC0wLjU0LCAxLjAyLCAtMS41NiwgMS43NCwgLTIuNzksIDIuMDFdLCBbJ2MnLCAtMC40MiwgMC4wOSwgLTEuMjMsIDAuMDksIC0xLjYyLCAwLjAzXSwgWydjJywgLTAuODEsIC0wLjE4LCAtMS4zMiwgLTAuNDUsIC0yLjAxLCAtMS4xMV0sIFsnYycsIC0wLjQ1LCAtMC40NSwgLTAuNjMsIC0wLjU3LCAtMC45NiwgLTAuNjldLCBbJ2MnLCAtMC44NCwgLTAuMjcsIC0xLjg5LCAwLjEyLCAtMi4yNSwgMC45MF0sIFsnYycsIC0wLjEyLCAwLjIxLCAtMC4yMSwgMC41NCwgLTAuMjEsIDAuNzJdLCBbJ2MnLCAwLjAwLCAwLjEyLCAtMC4xMiwgMC4yMSwgLTAuMjcsIDAuMjRdLCBbJ2MnLCAtMC4xNSwgMC4wMCwgLTAuMjcsIC0wLjAzLCAtMC4zMywgLTAuMTVdLCBbJ2MnLCAtMC4wOSwgLTAuMjEsIDAuMDksIC0xLjA4LCAwLjMzLCAtMS43MV0sIFsnYycsIDAuMjQsIC0wLjY2LCAwLjY2LCAtMS4yNiwgMS4yOSwgLTEuODldLCBbJ2MnLCAwLjQ1LCAtMC40NSwgMC45MCwgLTAuODEsIDEuOTIsIC0xLjU2XSwgWydjJywgMS4yOSwgLTAuOTMsIDEuODksIC0xLjQ0LCAyLjM0LCAtMS45OF0sIFsnYycsIDAuODcsIC0xLjA1LCAxLjI2LCAtMi4xOSwgMS4yMCwgLTMuNjNdLCBbJ2MnLCAtMC4wNiwgLTEuMjksIC0wLjM5LCAtMi4zMSwgLTAuOTYsIC0yLjkxXSwgWydjJywgLTAuMzYsIC0wLjMzLCAtMC43MiwgLTAuNTEsIC0xLjE3LCAtMC41NF0sIFsnYycsIC0wLjg0LCAtMC4wMywgLTEuNTMsIDAuNDIsIC0xLjU5LCAxLjA1XSwgWydjJywgLTAuMDMsIDAuMzMsIDAuMTIsIDAuNjAsIDAuNTcsIDEuMTRdLCBbJ2MnLCAwLjQ1LCAwLjU0LCAwLjU0LCAwLjg3LCAwLjQyLCAxLjQxXSwgWydjJywgLTAuMTUsIDAuNjMsIC0wLjU0LCAxLjExLCAtMS4wOCwgMS4zOF0sIFsnYycsIC0wLjYzLCAwLjMzLCAtMS4yMCwgMC4zMywgLTEuODMsIDAuMDBdLCBbJ2MnLCAtMC4yNCwgLTAuMTIsIC0wLjMzLCAtMC4xOCwgLTAuNTQsIC0wLjM5XSwgWydjJywgLTAuMTgsIC0wLjE4LCAtMC4yNywgLTAuMzAsIC0wLjM2LCAtMC41MV0sIFsnYycsIC0wLjI0LCAtMC40NSwgLTAuMjcsIC0wLjg0LCAtMC4yMSwgLTEuMzhdLCBbJ2MnLCAwLjEyLCAtMC43NSwgMC40NSwgLTEuNDEsIDEuMDIsIC0xLjk4XSwgWydjJywgMC43MiwgLTAuNzIsIDEuNzQsIC0xLjE3LCAyLjg1LCAtMS4zMl0sIFsneiddXSwgdzogMTAuNzY0LCBoOiAxNC45NyB9LFxuXHQnMyc6IHsgZDogW1snTScsIDMuNzgsIC0xNC45N10sIFsnYycsIDAuMzAsIC0wLjAzLCAxLjQxLCAwLjAwLCAxLjgzLCAwLjA2XSwgWydjJywgMi4yMiwgMC4zMCwgMy41MSwgMS4zMiwgMy43MiwgMi45MV0sIFsnYycsIDAuMDMsIDAuMzMsIDAuMDMsIDEuMjYsIC0wLjAzLCAxLjY1XSwgWydjJywgLTAuMTIsIDAuODQsIC0wLjQ4LCAxLjQ3LCAtMS4wNSwgMS43N10sIFsnYycsIC0wLjI3LCAwLjE1LCAtMC4zNiwgMC4yNCwgLTAuNDUsIDAuMzldLCBbJ2MnLCAtMC4wOSwgMC4yMSwgLTAuMDksIDAuMzYsIDAuMDAsIDAuNTddLCBbJ2MnLCAwLjA5LCAwLjE1LCAwLjE4LCAwLjI0LCAwLjUxLCAwLjM5XSwgWydjJywgMC43NSwgMC40MiwgMS4yMywgMS4xNCwgMS40MSwgMi4xM10sIFsnYycsIDAuMDYsIDAuNDIsIDAuMDYsIDEuMzUsIDAuMDAsIDEuNzFdLCBbJ2MnLCAtMC4xOCwgMC44MSwgLTAuNDgsIDEuMzgsIC0xLjAyLCAxLjk1XSwgWydjJywgLTAuNzUsIDAuNzIsIC0xLjgwLCAxLjIwLCAtMy4xOCwgMS4zOF0sIFsnYycsIC0wLjQyLCAwLjA2LCAtMS41NiwgMC4wNiwgLTEuOTUsIDAuMDBdLCBbJ2MnLCAtMS44OSwgLTAuMzMsIC0zLjE4LCAtMS4yOSwgLTMuNTEsIC0yLjY0XSwgWydjJywgLTAuMDMsIC0wLjEyLCAtMC4wMywgLTAuMzMsIC0wLjAzLCAtMC42MF0sIFsnYycsIDAuMDAsIC0wLjM2LCAwLjAwLCAtMC40MiwgMC4wNiwgLTAuNjNdLCBbJ2MnLCAwLjEyLCAtMC4zMCwgMC4yNywgLTAuNTEsIDAuNTEsIC0wLjc1XSwgWydjJywgMC4yNCwgLTAuMjQsIDAuNDUsIC0wLjM5LCAwLjc1LCAtMC41MV0sIFsnYycsIDAuMjEsIC0wLjA2LCAwLjI3LCAtMC4wNiwgMC42MCwgLTAuMDZdLCBbJ2MnLCAwLjMzLCAwLjAwLCAwLjM5LCAwLjAwLCAwLjYwLCAwLjA2XSwgWydjJywgMC4zMCwgMC4xMiwgMC41MSwgMC4yNywgMC43NSwgMC41MV0sIFsnYycsIDAuMzYsIDAuMzMsIDAuNTcsIDAuNzUsIDAuNjAsIDEuMjBdLCBbJ2MnLCAwLjAwLCAwLjIxLCAwLjAwLCAwLjI3LCAtMC4wNiwgMC40Ml0sIFsnYycsIC0wLjA5LCAwLjE4LCAtMC4xMiwgMC4yNCwgLTAuNTQsIDAuNTRdLCBbJ2MnLCAtMC41MSwgMC4zNiwgLTAuNjMsIDAuNTQsIC0wLjYwLCAwLjg3XSwgWydjJywgMC4wNiwgMC41NCwgMC41NCwgMC45MCwgMS4zOCwgMC45OV0sIFsnYycsIDAuMzYsIDAuMDYsIDAuNzIsIDAuMDMsIDAuOTYsIC0wLjA2XSwgWydjJywgMC44MSwgLTAuMjcsIDEuMjksIC0xLjIzLCAxLjQ0LCAtMi43OV0sIFsnYycsIDAuMDMsIC0wLjQ1LCAwLjAzLCAtMS45NSwgLTAuMDMsIC0yLjM3XSwgWydjJywgLTAuMDksIC0wLjc1LCAtMC4zMywgLTEuMjMsIC0wLjc1LCAtMS40NF0sIFsnYycsIC0wLjMzLCAtMC4xOCwgLTAuNDUsIC0wLjE4LCAtMS45OCwgLTAuMThdLCBbJ2MnLCAtMS4zNSwgMC4wMCwgLTEuNDEsIDAuMDAsIC0xLjUwLCAtMC4wNl0sIFsnYycsIC0wLjE4LCAtMC4xMiwgLTAuMjQsIC0wLjM5LCAtMC4xMiwgLTAuNjBdLCBbJ2MnLCAwLjEyLCAtMC4xNSwgMC4xNSwgLTAuMTUsIDEuNjgsIC0wLjE1XSwgWydjJywgMS41MCwgMC4wMCwgMS42MiwgMC4wMCwgMS44OSwgLTAuMTVdLCBbJ2MnLCAwLjE4LCAtMC4wOSwgMC40MiwgLTAuMzYsIDAuNTQsIC0wLjU3XSwgWydjJywgMC4xOCwgLTAuNDIsIDAuMjcsIC0wLjkwLCAwLjMwLCAtMS45NV0sIFsnYycsIDAuMDMsIC0xLjIwLCAtMC4wNiwgLTEuODAsIC0wLjM2LCAtMi4zN10sIFsnYycsIC0wLjI0LCAtMC40OCwgLTAuNjMsIC0wLjgxLCAtMS4xNCwgLTAuOTZdLCBbJ2MnLCAtMC4zMCwgLTAuMDYsIC0xLjA4LCAtMC4wNiwgLTEuMzgsIDAuMDNdLCBbJ2MnLCAtMC42MCwgMC4xNSwgLTAuOTAsIDAuNDIsIC0wLjk2LCAwLjg0XSwgWydjJywgLTAuMDMsIDAuMzAsIDAuMDYsIDAuNDUsIDAuNjMsIDAuODRdLCBbJ2MnLCAwLjMzLCAwLjI0LCAwLjQyLCAwLjM5LCAwLjQ1LCAwLjYzXSwgWydjJywgMC4wMywgMC43MiwgLTAuNTcsIDEuNTAsIC0xLjMyLCAxLjY1XSwgWydjJywgLTEuMDUsIDAuMjcsIC0yLjEwLCAtMC41NywgLTIuMTAsIC0xLjY1XSwgWydjJywgMC4wMCwgLTAuNDUsIDAuMTUsIC0wLjk2LCAwLjM5LCAtMS4zOF0sIFsnYycsIDAuMTIsIC0wLjIxLCAwLjU0LCAtMC42MywgMC44MSwgLTAuODFdLCBbJ2MnLCAwLjU3LCAtMC40MiwgMS4zOCwgLTAuNjksIDIuMjUsIC0wLjgxXSwgWyd6J11dLCB3OiA5LjczNSwgaDogMTQuOTY3IH0sXG5cdCc0JzogeyBkOiBbWydNJywgOC42NCwgLTE0Ljk0XSwgWydjJywgMC4yNywgLTAuMDksIDAuNDIsIC0wLjEyLCAwLjU0LCAtMC4wM10sIFsnYycsIDAuMDksIDAuMDYsIDAuMTUsIDAuMjEsIDAuMTUsIDAuMzBdLCBbJ2MnLCAtMC4wMywgMC4wNiwgLTEuOTIsIDIuMzEsIC00LjIzLCA1LjA0XSwgWydjJywgLTIuMzEsIDIuNzMsIC00LjIzLCA0Ljk4LCAtNC4yNiwgNS4wMV0sIFsnYycsIC0wLjAzLCAwLjA2LCAwLjEyLCAwLjA2LCAyLjU1LCAwLjA2XSwgWydsJywgMi42MSwgMC4wMF0sIFsnbCcsIDAuMDAsIC0yLjM3XSwgWydjJywgMC4wMCwgLTIuMTksIDAuMDMsIC0yLjM3LCAwLjA2LCAtMi40Nl0sIFsnYycsIDAuMDMsIC0wLjA2LCAwLjIxLCAtMC4xOCwgMC41NywgLTAuNDJdLCBbJ2MnLCAxLjA4LCAtMC43MiwgMS4zOCwgLTEuMDgsIDEuODYsIC0yLjE2XSwgWydjJywgMC4xMiwgLTAuMzAsIDAuMjQsIC0wLjU0LCAwLjI3LCAtMC41N10sIFsnYycsIDAuMTIsIC0wLjEyLCAwLjM5LCAtMC4wNiwgMC40NSwgMC4xMl0sIFsnYycsIDAuMDYsIDAuMDksIDAuMDYsIDAuNTcsIDAuMDYsIDMuOTZdLCBbJ2wnLCAwLjAwLCAzLjkwXSwgWydsJywgMS4wOCwgMC4wMF0sIFsnYycsIDEuMDUsIDAuMDAsIDEuMTEsIDAuMDAsIDEuMjAsIDAuMDZdLCBbJ2MnLCAwLjI0LCAwLjE1LCAwLjI0LCAwLjU0LCAwLjAwLCAwLjY5XSwgWydjJywgLTAuMDksIDAuMDYsIC0wLjE1LCAwLjA2LCAtMS4yMCwgMC4wNl0sIFsnbCcsIC0xLjA4LCAwLjAwXSwgWydsJywgMC4wMCwgMC4zM10sIFsnYycsIDAuMDAsIDAuNTcsIDAuMDksIDEuMTEsIDAuMzAsIDEuNTNdLCBbJ2MnLCAwLjM2LCAwLjc1LCAwLjkzLCAxLjE3LCAxLjY4LCAxLjI2XSwgWydjJywgMC4zMCwgMC4wMywgMC4zOSwgMC4wOSwgMC4zOSwgMC4zMF0sIFsnYycsIDAuMDAsIDAuMTUsIC0wLjAzLCAwLjE4LCAtMC4wOSwgMC4yNF0sIFsnYycsIC0wLjA2LCAwLjA2LCAtMC4wOSwgMC4wNiwgLTAuNDgsIDAuMDZdLCBbJ2MnLCAtMC40MiwgMC4wMCwgLTAuNjksIC0wLjAzLCAtMi4xMCwgLTAuMjRdLCBbJ2MnLCAtMC45MCwgLTAuMTUsIC0xLjc3LCAtMC4xNSwgLTIuNjcsIDAuMDBdLCBbJ2MnLCAtMS40MSwgMC4yMSwgLTEuNjgsIDAuMjQsIC0yLjEwLCAwLjI0XSwgWydjJywgLTAuMzksIDAuMDAsIC0wLjQyLCAwLjAwLCAtMC40OCwgLTAuMDZdLCBbJ2MnLCAtMC4wNiwgLTAuMDYsIC0wLjA2LCAtMC4wOSwgLTAuMDYsIC0wLjI0XSwgWydjJywgMC4wMCwgLTAuMjEsIDAuMDYsIC0wLjI3LCAwLjM2LCAtMC4zMF0sIFsnYycsIDAuNzUsIC0wLjA5LCAxLjMyLCAtMC41MSwgMS42OCwgLTEuMjZdLCBbJ2MnLCAwLjIxLCAtMC40MiwgMC4zMCwgLTAuOTYsIDAuMzAsIC0xLjUzXSwgWydsJywgMC4wMCwgLTAuMzNdLCBbJ2wnLCAtMi43MCwgMC4wMF0sIFsnYycsIC0yLjkxLCAwLjAwLCAtMi44NSwgMC4wMCwgLTMuMDksIC0wLjE1XSwgWydjJywgLTAuMTgsIC0wLjEyLCAtMC4zMCwgLTAuMzksIC0wLjI3LCAtMC41NF0sIFsnYycsIDAuMDMsIC0wLjA2LCAwLjE4LCAtMC4yNCwgMC4zMywgLTAuNDVdLCBbJ2MnLCAwLjc1LCAtMC45MCwgMS41OSwgLTIuMDcsIDIuMTMsIC0zLjAzXSwgWydjJywgMC4zMywgLTAuNTQsIDAuODQsIC0xLjYyLCAxLjA1LCAtMi4xNl0sIFsnYycsIDAuNTcsIC0xLjQxLCAwLjg0LCAtMi42NCwgMC45MCwgLTQuMDVdLCBbJ2MnLCAwLjAzLCAtMC42MywgMC4wNiwgLTAuNzIsIDAuMjQsIC0wLjgxXSwgWydsJywgMC4xMiwgLTAuMDZdLCBbJ2wnLCAwLjQ1LCAwLjEyXSwgWydjJywgMC42NiwgMC4xOCwgMS4wMiwgMC4yNCwgMS40NywgMC4yN10sIFsnYycsIDAuNjAsIDAuMDMsIDEuMjMsIC0wLjA5LCAyLjAxLCAtMC4zM10sIFsneiddXSwgdzogMTEuNzk1LCBoOiAxNC45OTQgfSxcblx0JzUnOiB7IGQ6IFtbJ00nLCAxLjAyLCAtMTQuOTRdLCBbJ2MnLCAwLjEyLCAtMC4wOSwgMC4wMywgLTAuMDksIDEuMDgsIDAuMDZdLCBbJ2MnLCAyLjQ5LCAwLjM2LCA0LjM1LCAwLjM2LCA2Ljk2LCAtMC4wNl0sIFsnYycsIDAuNTcsIC0wLjA5LCAwLjY2LCAtMC4wNiwgMC44MSwgMC4wNl0sIFsnYycsIDAuMTUsIDAuMTgsIDAuMTIsIDAuMjQsIC0wLjE1LCAwLjUxXSwgWydjJywgLTEuMjksIDEuMjYsIC0zLjI0LCAyLjA0LCAtNS41OCwgMi4zMV0sIFsnYycsIC0wLjYwLCAwLjA5LCAtMS4yMCwgMC4xMiwgLTEuNzEsIDAuMTJdLCBbJ2MnLCAtMC4zOSwgMC4wMCwgLTAuNDUsIDAuMDAsIC0wLjU3LCAwLjA2XSwgWydjJywgLTAuMDksIDAuMDYsIC0wLjE1LCAwLjEyLCAtMC4yMSwgMC4yMV0sIFsnbCcsIC0wLjA2LCAwLjEyXSwgWydsJywgMC4wMCwgMS42NV0sIFsnbCcsIDAuMDAsIDEuNjVdLCBbJ2wnLCAwLjIxLCAtMC4yMV0sIFsnYycsIDAuNjYsIC0wLjU3LCAxLjQxLCAtMC45NiwgMi4xOSwgLTEuMTRdLCBbJ2MnLCAwLjMzLCAtMC4wNiwgMS40MSwgLTAuMDYsIDEuOTUsIDAuMDBdLCBbJ2MnLCAyLjYxLCAwLjM2LCA0LjAyLCAxLjc0LCA0LjI2LCA0LjE0XSwgWydjJywgMC4wMywgMC40NSwgMC4wMywgMS4wOCwgLTAuMDMsIDEuNDRdLCBbJ2MnLCAtMC4xOCwgMS4wMiwgLTAuNzgsIDIuMDEsIC0xLjU5LCAyLjcwXSwgWydjJywgLTAuNzIsIDAuNTcsIC0xLjYyLCAxLjAyLCAtMi40OSwgMS4yMF0sIFsnYycsIC0xLjM4LCAwLjI3LCAtMy4wMywgMC4wNiwgLTQuMjAsIC0wLjU0XSwgWydjJywgLTEuMDgsIC0wLjU0LCAtMS43MSwgLTEuMzIsIC0xLjg2LCAtMi4yOF0sIFsnYycsIC0wLjA5LCAtMC42OSwgMC4wOSwgLTEuMjksIDAuNTcsIC0xLjc0XSwgWydjJywgMC4yNCwgLTAuMjQsIDAuNDUsIC0wLjM5LCAwLjc1LCAtMC41MV0sIFsnYycsIDAuMjEsIC0wLjA2LCAwLjI3LCAtMC4wNiwgMC42MCwgLTAuMDZdLCBbJ2MnLCAwLjMzLCAwLjAwLCAwLjM5LCAwLjAwLCAwLjYwLCAwLjA2XSwgWydjJywgMC4zMCwgMC4xMiwgMC41MSwgMC4yNywgMC43NSwgMC41MV0sIFsnYycsIDAuMzYsIDAuMzMsIDAuNTcsIDAuNzUsIDAuNjAsIDEuMjBdLCBbJ2MnLCAwLjAwLCAwLjIxLCAwLjAwLCAwLjI3LCAtMC4wNiwgMC40Ml0sIFsnYycsIC0wLjA5LCAwLjE4LCAtMC4xMiwgMC4yNCwgLTAuNTQsIDAuNTRdLCBbJ2MnLCAtMC4xOCwgMC4xMiwgLTAuMzYsIDAuMzAsIC0wLjQyLCAwLjMzXSwgWydjJywgLTAuMzYsIDAuNDIsIC0wLjE4LCAwLjk5LCAwLjM2LCAxLjI2XSwgWydjJywgMC41MSwgMC4yNywgMS40NywgMC4zNiwgMi4wMSwgMC4yN10sIFsnYycsIDAuOTMsIC0wLjIxLCAxLjQ3LCAtMS4xNywgMS42NSwgLTIuOTFdLCBbJ2MnLCAwLjA2LCAtMC40NSwgMC4wNiwgLTEuODksIDAuMDAsIC0yLjMxXSwgWydjJywgLTAuMTUsIC0xLjIwLCAtMC41MSwgLTIuMTAsIC0xLjA1LCAtMi41NV0sIFsnYycsIC0wLjIxLCAtMC4xOCwgLTAuNTQsIC0wLjM2LCAtMC44MSwgLTAuMzldLCBbJ2MnLCAtMC4zMCwgLTAuMDYsIC0wLjg0LCAtMC4wMywgLTEuMjYsIDAuMDZdLCBbJ2MnLCAtMC45MywgMC4xOCwgLTEuNjUsIDAuNjAsIC0yLjE2LCAxLjIwXSwgWydjJywgLTAuMTUsIDAuMjEsIC0wLjI3LCAwLjMwLCAtMC4zOSwgMC4zMF0sIFsnYycsIC0wLjE1LCAwLjAwLCAtMC4zMCwgLTAuMDksIC0wLjM2LCAtMC4xOF0sIFsnYycsIC0wLjA2LCAtMC4wOSwgLTAuMDYsIC0wLjE1LCAtMC4wNiwgLTMuNjZdLCBbJ2MnLCAwLjAwLCAtMy4zOSwgMC4wMCwgLTMuNTcsIDAuMDYsIC0zLjY2XSwgWydjJywgMC4wMywgLTAuMDYsIDAuMDksIC0wLjE1LCAwLjE1LCAtMC4xOF0sIFsneiddXSwgdzogMTAuMjEyLCBoOiAxNC45OTcgfSxcblx0JzYnOiB7IGQ6IFtbJ00nLCA0Ljk4LCAtMTQuOTddLCBbJ2MnLCAwLjM2LCAtMC4wMywgMS4yMCwgMC4wMCwgMS41OSwgMC4wNl0sIFsnYycsIDAuOTAsIDAuMTUsIDEuNjgsIDAuNTEsIDIuMjUsIDEuMDVdLCBbJ2MnLCAwLjU3LCAwLjUxLCAwLjg3LCAxLjIzLCAwLjg0LCAxLjk4XSwgWydjJywgLTAuMDMsIDAuNTEsIC0wLjIxLCAwLjkwLCAtMC42MCwgMS4yNl0sIFsnYycsIC0wLjI0LCAwLjI0LCAtMC40NSwgMC4zOSwgLTAuNzUsIDAuNTFdLCBbJ2MnLCAtMC4yMSwgMC4wNiwgLTAuMjcsIDAuMDYsIC0wLjYwLCAwLjA2XSwgWydjJywgLTAuMzMsIDAuMDAsIC0wLjM5LCAwLjAwLCAtMC42MCwgLTAuMDZdLCBbJ2MnLCAtMC4zMCwgLTAuMTIsIC0wLjUxLCAtMC4yNywgLTAuNzUsIC0wLjUxXSwgWydjJywgLTAuMzksIC0wLjM2LCAtMC41NywgLTAuNzgsIC0wLjU3LCAtMS4yNl0sIFsnYycsIDAuMDAsIC0wLjI3LCAwLjAwLCAtMC4zMCwgMC4wOSwgLTAuNDJdLCBbJ2MnLCAwLjAzLCAtMC4wOSwgMC4xOCwgLTAuMjEsIDAuMzAsIC0wLjMwXSwgWydjJywgMC4xMiwgLTAuMDksIDAuMzAsIC0wLjIxLCAwLjM5LCAtMC4yN10sIFsnYycsIDAuMDksIC0wLjA2LCAwLjIxLCAtMC4xOCwgMC4yNywgLTAuMjRdLCBbJ2MnLCAwLjA2LCAtMC4xMiwgMC4wOSwgLTAuMTUsIDAuMDksIC0wLjMzXSwgWydjJywgMC4wMCwgLTAuMTgsIC0wLjAzLCAtMC4yNCwgLTAuMDksIC0wLjM2XSwgWydjJywgLTAuMjQsIC0wLjM5LCAtMC43NSwgLTAuNjAsIC0xLjM4LCAtMC41N10sIFsnYycsIC0wLjU0LCAwLjAzLCAtMC45MCwgMC4xOCwgLTEuMjMsIDAuNDhdLCBbJ2MnLCAtMC44MSwgMC43MiwgLTEuMDgsIDIuMTYsIC0wLjk2LCA1LjM3XSwgWydsJywgMC4wMCwgMC42M10sIFsnbCcsIDAuMzAsIC0wLjEyXSwgWydjJywgMC43OCwgLTAuMjcsIDEuMjksIC0wLjMzLCAyLjEwLCAtMC4yN10sIFsnYycsIDEuNDcsIDAuMTIsIDIuNDksIDAuNTQsIDMuMjcsIDEuMjldLCBbJ2MnLCAwLjQ4LCAwLjUxLCAwLjgxLCAxLjExLCAwLjk2LCAxLjg5XSwgWydjJywgMC4wNiwgMC4yNywgMC4wNiwgMC40MiwgMC4wNiwgMC45M10sIFsnYycsIDAuMDAsIDAuNTQsIDAuMDAsIDAuNjksIC0wLjA2LCAwLjk2XSwgWydjJywgLTAuMTUsIDAuNzgsIC0wLjQ4LCAxLjM4LCAtMC45NiwgMS44OV0sIFsnYycsIC0wLjU0LCAwLjUxLCAtMS4xNywgMC44NywgLTEuOTgsIDEuMDhdLCBbJ2MnLCAtMS4xNCwgMC4zMCwgLTIuNDAsIDAuMzMsIC0zLjI0LCAwLjAzXSwgWydjJywgLTEuNTAsIC0wLjQ4LCAtMi42NCwgLTEuODksIC0zLjI3LCAtNC4wMl0sIFsnYycsIC0wLjM2LCAtMS4yMywgLTAuNTEsIC0yLjgyLCAtMC40MiwgLTQuMDhdLCBbJ2MnLCAwLjMwLCAtMy42NiwgMi4yOCwgLTYuMzAsIDQuOTUsIC02LjY2XSwgWyd6J10sIFsnbScsIDAuNjYsIDcuNDFdLCBbJ2MnLCAtMC4yNywgLTAuMDksIC0wLjgxLCAtMC4xMiwgLTEuMDgsIC0wLjA2XSwgWydjJywgLTAuNzIsIDAuMTgsIC0xLjA4LCAwLjY5LCAtMS4yMywgMS43MV0sIFsnYycsIC0wLjA2LCAwLjU0LCAtMC4wNiwgMy4wMCwgMC4wMCwgMy41NF0sIFsnYycsIDAuMTgsIDEuMjYsIDAuNzIsIDEuNzcsIDEuODAsIDEuNzRdLCBbJ2MnLCAwLjM5LCAtMC4wMywgMC42MywgLTAuMDksIDAuOTAsIC0wLjI3XSwgWydjJywgMC42NiwgLTAuNDIsIDAuOTAsIC0xLjMyLCAwLjkwLCAtMy4yNF0sIFsnYycsIDAuMDAsIC0yLjIyLCAtMC4zNiwgLTMuMTIsIC0xLjI5LCAtMy40Ml0sIFsneiddXSwgdzogOS45NTYsIGg6IDE0Ljk4MiB9LFxuXHQnNyc6IHsgZDogW1snTScsIDAuMjEsIC0xNC45N10sIFsnYycsIDAuMjEsIC0wLjA2LCAwLjQ1LCAwLjAwLCAwLjU0LCAwLjE1XSwgWydjJywgMC4wNiwgMC4wOSwgMC4wNiwgMC4xNSwgMC4wNiwgMC4zOV0sIFsnYycsIDAuMDAsIDAuMjQsIDAuMDAsIDAuMzMsIDAuMDYsIDAuNDJdLCBbJ2MnLCAwLjA2LCAwLjEyLCAwLjIxLCAwLjI0LCAwLjI3LCAwLjI0XSwgWydjJywgMC4wMywgMC4wMCwgMC4xMiwgLTAuMTIsIDAuMjQsIC0wLjIxXSwgWydjJywgMC45NiwgLTEuMjAsIDIuNTgsIC0xLjM1LCAzLjk5LCAtMC40Ml0sIFsnYycsIDAuMTUsIDAuMTIsIDAuNDIsIDAuMzAsIDAuNTQsIDAuNDVdLCBbJ2MnLCAwLjQ4LCAwLjM5LCAwLjgxLCAwLjU3LCAxLjI5LCAwLjYwXSwgWydjJywgMC42OSwgMC4wMywgMS41MCwgLTAuMzAsIDIuMTMsIC0wLjg3XSwgWydjJywgMC4wOSwgLTAuMDksIDAuMjcsIC0wLjMwLCAwLjM5LCAtMC40NV0sIFsnYycsIDAuMTIsIC0wLjE1LCAwLjI0LCAtMC4yNywgMC4zMCwgLTAuMzBdLCBbJ2MnLCAwLjE4LCAtMC4wNiwgMC4zOSwgMC4wMywgMC41MSwgMC4yMV0sIFsnYycsIDAuMDYsIDAuMTgsIDAuMDYsIDAuMjQsIC0wLjI3LCAwLjcyXSwgWydjJywgLTAuMTgsIDAuMjQsIC0wLjU0LCAwLjc4LCAtMC43OCwgMS4xN10sIFsnYycsIC0yLjM3LCAzLjU0LCAtMy41NCwgNi4yNywgLTMuODcsIDkuMDBdLCBbJ2MnLCAtMC4wMywgMC4zMywgLTAuMDMsIDAuNjYsIC0wLjAzLCAxLjI2XSwgWydjJywgMC4wMCwgMC45MCwgMC4wMCwgMS4wOCwgMC4xNSwgMS44OV0sIFsnYycsIDAuMDYsIDAuNDUsIDAuMDYsIDAuNDgsIDAuMDMsIDAuNjBdLCBbJ2MnLCAtMC4wNiwgMC4wOSwgLTAuMjEsIDAuMjEsIC0wLjMwLCAwLjIxXSwgWydjJywgLTAuMDMsIDAuMDAsIC0wLjI3LCAtMC4wNiwgLTAuNTQsIC0wLjE1XSwgWydjJywgLTAuODQsIC0wLjI3LCAtMS4xMSwgLTAuMzAsIC0xLjY1LCAtMC4zMF0sIFsnYycsIC0wLjU3LCAwLjAwLCAtMC44NCwgMC4wMywgLTEuNTYsIDAuMjddLCBbJ2MnLCAtMC42MCwgMC4xOCwgLTAuNjksIDAuMjEsIC0wLjgxLCAwLjE1XSwgWydjJywgLTAuMTIsIC0wLjA2LCAtMC4yMSwgLTAuMTgsIC0wLjIxLCAtMC4zMF0sIFsnYycsIDAuMDAsIC0wLjE1LCAwLjYwLCAtMS40NCwgMS4yMCwgLTIuNjFdLCBbJ2MnLCAxLjE0LCAtMi4yMiwgMi43MywgLTQuNjgsIDUuMTAsIC04LjAxXSwgWydjJywgMC4yMSwgLTAuMjcsIDAuMzYsIC0wLjQ4LCAwLjMzLCAtMC40OF0sIFsnYycsIDAuMDAsIDAuMDAsIC0wLjEyLCAwLjA2LCAtMC4yNywgMC4xMl0sIFsnYycsIC0wLjU0LCAwLjMwLCAtMC45OSwgMC4zOSwgLTEuNTYsIDAuMzldLCBbJ2MnLCAtMC43NSwgMC4wMywgLTEuMjAsIC0wLjE4LCAtMS44MywgLTAuNzVdLCBbJ2MnLCAtMC45OSwgLTAuOTAsIC0xLjgzLCAtMS4xNywgLTIuMzEsIC0wLjcyXSwgWydjJywgLTAuMTgsIDAuMTUsIC0wLjM2LCAwLjUxLCAtMC40NSwgMC44NF0sIFsnYycsIC0wLjA2LCAwLjI0LCAtMC4wNiwgMC4zMywgLTAuMDksIDEuOThdLCBbJ2MnLCAwLjAwLCAxLjYyLCAtMC4wMywgMS43NCwgLTAuMDYsIDEuODBdLCBbJ2MnLCAtMC4xNSwgMC4yNCwgLTAuNTQsIDAuMjQsIC0wLjY5LCAwLjAwXSwgWydjJywgLTAuMDYsIC0wLjA5LCAtMC4wNiwgLTAuMTUsIC0wLjA2LCAtMy41N10sIFsnYycsIDAuMDAsIC0zLjQyLCAwLjAwLCAtMy40OCwgMC4wNiwgLTMuNTddLCBbJ2MnLCAwLjAzLCAtMC4wNiwgMC4wOSwgLTAuMTIsIDAuMTUsIC0wLjE1XSwgWyd6J11dLCB3OiAxMC41NjEsIGg6IDE1LjA5MyB9LFxuXHQnOCc6IHsgZDogW1snTScsIDQuOTgsIC0xNC45N10sIFsnYycsIDAuMzMsIC0wLjAzLCAxLjAyLCAtMC4wMywgMS4zMiwgMC4wMF0sIFsnYycsIDEuMzIsIDAuMTIsIDIuNDksIDAuNjAsIDMuMjEsIDEuMzJdLCBbJ2MnLCAwLjM5LCAwLjM5LCAwLjY2LCAwLjgxLCAwLjc4LCAxLjI5XSwgWydjJywgMC4wOSwgMC4zNiwgMC4wOSwgMS4wOCwgMC4wMCwgMS40NF0sIFsnYycsIC0wLjIxLCAwLjg0LCAtMC42NiwgMS41OSwgLTEuNTksIDIuNTVdLCBbJ2wnLCAtMC4zMCwgMC4zMF0sIFsnbCcsIDAuMjcsIDAuMThdLCBbJ2MnLCAxLjQ3LCAwLjkzLCAyLjMxLCAyLjMxLCAyLjI1LCAzLjc1XSwgWydjJywgLTAuMDMsIDAuNzUsIC0wLjI0LCAxLjM1LCAtMC42MywgMS45NV0sIFsnYycsIC0wLjQ1LCAwLjY2LCAtMS4wMiwgMS4xNCwgLTEuODMsIDEuNTNdLCBbJ2MnLCAtMS44MCwgMC44NywgLTQuMjAsIDAuODcsIC02LjAwLCAwLjAzXSwgWydjJywgLTEuNjIsIC0wLjc4LCAtMi41MiwgLTIuMTYsIC0yLjQ2LCAtMy42Nl0sIFsnYycsIDAuMDYsIC0wLjk5LCAwLjU0LCAtMS43NywgMS44MCwgLTIuOTddLCBbJ2MnLCAwLjU0LCAtMC41MSwgMC41NCwgLTAuNTQsIDAuNDgsIC0wLjU3XSwgWydjJywgLTAuMzksIC0wLjI3LCAtMC45NiwgLTAuNzgsIC0xLjIwLCAtMS4xNF0sIFsnYycsIC0wLjc1LCAtMS4xMSwgLTAuODcsIC0yLjQwLCAtMC4zMCwgLTMuNjBdLCBbJ2MnLCAwLjY5LCAtMS4zNSwgMi4yNSwgLTIuMjUsIDQuMjAsIC0yLjQwXSwgWyd6J10sIFsnbScsIDEuNTMsIDAuNjldLCBbJ2MnLCAtMC40MiwgLTAuMDksIC0xLjExLCAtMC4xMiwgLTEuMzgsIC0wLjA2XSwgWydjJywgLTAuMzAsIDAuMDYsIC0wLjYwLCAwLjE4LCAtMC44MSwgMC4zMF0sIFsnYycsIC0wLjIxLCAwLjEyLCAtMC42MCwgMC41MSwgLTAuNzIsIDAuNzJdLCBbJ2MnLCAtMC41MSwgMC44NywgLTAuNDIsIDEuODksIDAuMjEsIDIuNTJdLCBbJ2MnLCAwLjIxLCAwLjIxLCAwLjM2LCAwLjMwLCAxLjk1LCAxLjIzXSwgWydjJywgMC45NiwgMC41NCwgMS43NCwgMC45OSwgMS43NywgMS4wMl0sIFsnYycsIDAuMDksIDAuMDAsIDAuNjMsIC0wLjYwLCAwLjk5LCAtMS4xMV0sIFsnYycsIDAuMjEsIC0wLjM2LCAwLjQ4LCAtMC44NywgMC41NywgLTEuMjNdLCBbJ2MnLCAwLjA2LCAtMC4yNCwgMC4wNiwgLTAuMzYsIDAuMDYsIC0wLjcyXSwgWydjJywgMC4wMCwgLTAuNDUsIC0wLjAzLCAtMC42NiwgLTAuMTUsIC0wLjk5XSwgWydjJywgLTAuMzksIC0wLjgxLCAtMS4yOSwgLTEuNDQsIC0yLjQ5LCAtMS42OF0sIFsneiddLCBbJ20nLCAtMS40NCwgOC4wN10sIFsnbCcsIC0xLjg5LCAtMS4wOF0sIFsnYycsIC0wLjAzLCAwLjAwLCAtMC4xOCwgMC4xNSwgLTAuMzksIDAuMzNdLCBbJ2MnLCAtMS4yMCwgMS4wOCwgLTEuNjUsIDEuOTUsIC0xLjU5LCAzLjAwXSwgWydjJywgMC4wOSwgMS41OSwgMS4zNSwgMi44NSwgMy4yMSwgMy4yNF0sIFsnYycsIDAuMzMsIDAuMDYsIDAuNDUsIDAuMDYsIDAuOTMsIDAuMDZdLCBbJ2MnLCAwLjYzLCAwLjAwLCAwLjgxLCAtMC4wMywgMS4yOSwgLTAuMjddLCBbJ2MnLCAwLjkwLCAtMC40MiwgMS40NywgLTEuNDEsIDEuNDEsIC0yLjQwXSwgWydjJywgLTAuMDYsIC0wLjY2LCAtMC4zOSwgLTEuMjksIC0wLjkwLCAtMS42NV0sIFsnYycsIC0wLjEyLCAtMC4wOSwgLTEuMDUsIC0wLjYzLCAtMi4wNywgLTEuMjNdLCBbJ3onXV0sIHc6IDEwLjkyNiwgaDogMTQuOTg5IH0sXG5cdCc5JzogeyBkOiBbWydNJywgNC4yMywgLTE0Ljk3XSwgWydjJywgMC40MiwgLTAuMDMsIDEuMjksIDAuMDAsIDEuNjIsIDAuMDZdLCBbJ2MnLCAwLjUxLCAwLjEyLCAwLjkzLCAwLjMwLCAxLjM4LCAwLjU3XSwgWydjJywgMS41MywgMS4wMiwgMi41MiwgMy4yNCwgMi43MywgNS45NF0sIFsnYycsIDAuMTgsIDIuNTUsIC0wLjQ4LCA0Ljk4LCAtMS44MywgNi41N10sIFsnYycsIC0xLjA1LCAxLjI2LCAtMi40MCwgMS44OSwgLTMuOTMsIDEuODNdLCBbJ2MnLCAtMS4yMywgLTAuMDYsIC0yLjMxLCAtMC40NSwgLTMuMDMsIC0xLjE0XSwgWydjJywgLTAuNTcsIC0wLjUxLCAtMC44NywgLTEuMjMsIC0wLjg0LCAtMS45OF0sIFsnYycsIDAuMDMsIC0wLjUxLCAwLjIxLCAtMC45MCwgMC42MCwgLTEuMjZdLCBbJ2MnLCAwLjI0LCAtMC4yNCwgMC40NSwgLTAuMzksIDAuNzUsIC0wLjUxXSwgWydjJywgMC4yMSwgLTAuMDYsIDAuMjcsIC0wLjA2LCAwLjYwLCAtMC4wNl0sIFsnYycsIDAuMzMsIDAuMDAsIDAuMzksIDAuMDAsIDAuNjAsIDAuMDZdLCBbJ2MnLCAwLjMwLCAwLjEyLCAwLjUxLCAwLjI3LCAwLjc1LCAwLjUxXSwgWydjJywgMC4zOSwgMC4zNiwgMC41NywgMC43OCwgMC41NywgMS4yNl0sIFsnYycsIDAuMDAsIDAuMjcsIDAuMDAsIDAuMzAsIC0wLjA5LCAwLjQyXSwgWydjJywgLTAuMDMsIDAuMDksIC0wLjE4LCAwLjIxLCAtMC4zMCwgMC4zMF0sIFsnYycsIC0wLjEyLCAwLjA5LCAtMC4zMCwgMC4yMSwgLTAuMzksIDAuMjddLCBbJ2MnLCAtMC4wOSwgMC4wNiwgLTAuMjEsIDAuMTgsIC0wLjI3LCAwLjI0XSwgWydjJywgLTAuMDYsIDAuMTIsIC0wLjA2LCAwLjE1LCAtMC4wNiwgMC4zM10sIFsnYycsIDAuMDAsIDAuMTgsIDAuMDAsIDAuMjQsIDAuMDYsIDAuMzZdLCBbJ2MnLCAwLjI0LCAwLjM5LCAwLjc1LCAwLjYwLCAxLjM4LCAwLjU3XSwgWydjJywgMC41NCwgLTAuMDMsIDAuOTAsIC0wLjE4LCAxLjIzLCAtMC40OF0sIFsnYycsIDAuODEsIC0wLjcyLCAxLjA4LCAtMi4xNiwgMC45NiwgLTUuMzddLCBbJ2wnLCAwLjAwLCAtMC42M10sIFsnbCcsIC0wLjMwLCAwLjEyXSwgWydjJywgLTAuNzgsIDAuMjcsIC0xLjI5LCAwLjMzLCAtMi4xMCwgMC4yN10sIFsnYycsIC0xLjQ3LCAtMC4xMiwgLTIuNDksIC0wLjU0LCAtMy4yNywgLTEuMjldLCBbJ2MnLCAtMC40OCwgLTAuNTEsIC0wLjgxLCAtMS4xMSwgLTAuOTYsIC0xLjg5XSwgWydjJywgLTAuMDYsIC0wLjI3LCAtMC4wNiwgLTAuNDIsIC0wLjA2LCAtMC45Nl0sIFsnYycsIDAuMDAsIC0wLjUxLCAwLjAwLCAtMC42NiwgMC4wNiwgLTAuOTNdLCBbJ2MnLCAwLjE1LCAtMC43OCwgMC40OCwgLTEuMzgsIDAuOTYsIC0xLjg5XSwgWydjJywgMC4xNSwgLTAuMTIsIDAuMzMsIC0wLjI3LCAwLjQyLCAtMC4zNl0sIFsnYycsIDAuNjksIC0wLjUxLCAxLjYyLCAtMC44MSwgMi43NiwgLTAuOTNdLCBbJ3onXSwgWydtJywgMS4xNywgMC42Nl0sIFsnYycsIC0wLjIxLCAtMC4wNiwgLTAuNTcsIC0wLjA2LCAtMC44MSwgLTAuMDNdLCBbJ2MnLCAtMC43OCwgMC4xMiwgLTEuMjYsIDAuNjksIC0xLjQxLCAxLjc0XSwgWydjJywgLTAuMTIsIDAuNjMsIC0wLjE1LCAxLjk1LCAtMC4wOSwgMi43OV0sIFsnYycsIDAuMTIsIDEuNzEsIDAuNjMsIDIuNDAsIDEuNzcsIDIuNDZdLCBbJ2MnLCAxLjA4LCAwLjAzLCAxLjYyLCAtMC40OCwgMS44MCwgLTEuNzRdLCBbJ2MnLCAwLjA2LCAtMC41NCwgMC4wNiwgLTMuMDAsIDAuMDAsIC0zLjU0XSwgWydjJywgLTAuMTUsIC0xLjA1LCAtMC41MSwgLTEuNTMsIC0xLjI2LCAtMS42OF0sIFsneiddXSwgdzogOS45NTksIGg6IDE0Ljk4NiB9LFxuXHQncmVzdHMubXVsdGltZWFzdXJlJzogeyBkOiBbWydNJywgMCwgLTRdLCBbJ2wnLCAwLCAxNl0sIFsnbCcsIDEsIDBdLCBbJ2wnLCAwLCAtNV0sIFsnbCcsIDQwLCAwXSwgWydsJywgMCwgNV0sIFsnbCcsIDEsIDBdLCBbJ2wnLCAwLCAtMTZdLCBbJ2wnLCAtMSwgMF0sIFsnbCcsIDAsIDVdLCBbJ2wnLCAtNDAsIDBdLCBbJ2wnLCAwLCAtNV0sIFsneiddXSwgdzogNDIsIGg6IDE4IH0sXG5cdCdyZXN0cy53aG9sZSc6IHsgZDogW1snTScsIDAuMDYsIDAuMDNdLCBbJ2wnLCAwLjA5LCAtMC4wNl0sIFsnbCcsIDUuNDYsIDAuMDBdLCBbJ2wnLCA1LjQ5LCAwLjAwXSwgWydsJywgMC4wOSwgMC4wNl0sIFsnbCcsIDAuMDYsIDAuMDldLCBbJ2wnLCAwLjAwLCAyLjE5XSwgWydsJywgMC4wMCwgMi4xOV0sIFsnbCcsIC0wLjA2LCAwLjA5XSwgWydsJywgLTAuMDksIDAuMDZdLCBbJ2wnLCAtNS40OSwgMC4wMF0sIFsnbCcsIC01LjQ2LCAwLjAwXSwgWydsJywgLTAuMDksIC0wLjA2XSwgWydsJywgLTAuMDYsIC0wLjA5XSwgWydsJywgMC4wMCwgLTIuMTldLCBbJ2wnLCAwLjAwLCAtMi4xOV0sIFsneiddXSwgdzogMTEuMjUsIGg6IDQuNjggfSxcblx0J3Jlc3RzLmhhbGYnOiB7IGQ6IFtbJ00nLCAwLjA2LCAtNC42Ml0sIFsnbCcsIDAuMDksIC0wLjA2XSwgWydsJywgNS40NiwgMC4wMF0sIFsnbCcsIDUuNDksIDAuMDBdLCBbJ2wnLCAwLjA5LCAwLjA2XSwgWydsJywgMC4wNiwgMC4wOV0sIFsnbCcsIDAuMDAsIDIuMTldLCBbJ2wnLCAwLjAwLCAyLjE5XSwgWydsJywgLTAuMDYsIDAuMDldLCBbJ2wnLCAtMC4wOSwgMC4wNl0sIFsnbCcsIC01LjQ5LCAwLjAwXSwgWydsJywgLTUuNDYsIDAuMDBdLCBbJ2wnLCAtMC4wOSwgLTAuMDZdLCBbJ2wnLCAtMC4wNiwgLTAuMDldLCBbJ2wnLCAwLjAwLCAtMi4xOV0sIFsnbCcsIDAuMDAsIC0yLjE5XSwgWyd6J11dLCB3OiAxMS4yNSwgaDogNC42OCB9LFxuXHQncmVzdHMucXVhcnRlcic6IHsgZDogW1snTScsIDEuODksIC0xMS44Ml0sIFsnYycsIDAuMTIsIC0wLjA2LCAwLjI0LCAtMC4wNiwgMC4zNiwgLTAuMDNdLCBbJ2MnLCAwLjA5LCAwLjA2LCA0Ljc0LCA1LjU4LCA0Ljg2LCA1LjgyXSwgWydjJywgMC4yMSwgMC4zOSwgMC4xNSwgMC43OCwgLTAuMTUsIDEuMjZdLCBbJ2MnLCAtMC4yNCwgMC4zMywgLTAuNzIsIDAuODEsIC0xLjYyLCAxLjU2XSwgWydjJywgLTAuNDUsIDAuMzYsIC0wLjg3LCAwLjc1LCAtMC45NiwgMC44NF0sIFsnYycsIC0wLjkzLCAwLjk5LCAtMS4xNCwgMi40OSwgLTAuNjAsIDMuNjNdLCBbJ2MnLCAwLjE4LCAwLjM5LCAwLjI3LCAwLjQ4LCAxLjMyLCAxLjY4XSwgWydjJywgMS45MiwgMi4yNSwgMS44MywgMi4xNiwgMS44MywgMi4zNF0sIFsnYycsIDAuMDAsIDAuMTgsIC0wLjE4LCAwLjM2LCAtMC4zNiwgMC4zOV0sIFsnYycsIC0wLjE1LCAwLjAwLCAtMC4yNywgLTAuMDYsIC0wLjQ4LCAtMC4yN10sIFsnYycsIC0wLjc1LCAtMC43NSwgLTIuNDYsIC0xLjI5LCAtMy4zOSwgLTEuMDhdLCBbJ2MnLCAtMC40NSwgMC4wOSwgLTAuNjksIDAuMjcsIC0wLjkwLCAwLjY5XSwgWydjJywgLTAuMTIsIDAuMzAsIC0wLjIxLCAwLjY2LCAtMC4yNCwgMS4xNF0sIFsnYycsIC0wLjAzLCAwLjY2LCAwLjA5LCAxLjM1LCAwLjMwLCAyLjAxXSwgWydjJywgMC4xNSwgMC40MiwgMC4yNCwgMC42NiwgMC40NSwgMC45Nl0sIFsnYycsIDAuMTgsIDAuMjQsIDAuMTgsIDAuMzMsIDAuMDMsIDAuNDJdLCBbJ2MnLCAtMC4xMiwgMC4wNiwgLTAuMTgsIDAuMDMsIC0wLjQ1LCAtMC4zMF0sIFsnYycsIC0xLjA4LCAtMS4zOCwgLTIuMDcsIC0zLjM2LCAtMi40MCwgLTQuODNdLCBbJ2MnLCAtMC4yNywgLTEuMDUsIC0wLjE1LCAtMS43NywgMC4yNywgLTIuMDddLCBbJ2MnLCAwLjIxLCAtMC4xMiwgMC40MiwgLTAuMTUsIDAuODcsIC0wLjE1XSwgWydjJywgMC44NywgMC4wNiwgMi4xMCwgMC4zOSwgMy4zMCwgMC45MF0sIFsnbCcsIDAuMzksIDAuMThdLCBbJ2wnLCAtMS42NSwgLTEuOTVdLCBbJ2MnLCAtMi41MiwgLTIuOTcsIC0yLjYxLCAtMy4wOSwgLTIuNzAsIC0zLjI3XSwgWydjJywgLTAuMDksIC0wLjI0LCAtMC4xMiwgLTAuNDgsIC0wLjAzLCAtMC43NV0sIFsnYycsIDAuMTUsIC0wLjQ4LCAwLjU3LCAtMC45NiwgMS44MywgLTIuMDFdLCBbJ2MnLCAwLjQ1LCAtMC4zNiwgMC44NCwgLTAuNzIsIDAuOTMsIC0wLjc4XSwgWydjJywgMC42OSwgLTAuNzUsIDEuMDIsIC0xLjgwLCAwLjkwLCAtMi43OV0sIFsnYycsIC0wLjA2LCAtMC4zMywgLTAuMjEsIC0wLjg0LCAtMC4zOSwgLTEuMTFdLCBbJ2MnLCAtMC4wOSwgLTAuMTUsIC0wLjQ1LCAtMC42MCwgLTAuODEsIC0xLjA1XSwgWydjJywgLTAuMzYsIC0wLjQyLCAtMC42OSwgLTAuODEsIC0wLjcyLCAtMC44N10sIFsnYycsIC0wLjA5LCAtMC4xOCwgMC4wMCwgLTAuNDIsIDAuMjEsIC0wLjUxXSwgWyd6J11dLCB3OiA3Ljg4OCwgaDogMjEuNDM1IH0sXG5cdCdyZXN0cy44dGgnOiB7IGQ6IFtbJ00nLCAxLjY4LCAtNi4xMl0sIFsnYycsIDAuNjYsIC0wLjA5LCAxLjIzLCAwLjA5LCAxLjY4LCAwLjUxXSwgWydjJywgMC4yNywgMC4zMCwgMC4zOSwgMC41NCwgMC41NywgMS4yNl0sIFsnYycsIDAuMDksIDAuMzMsIDAuMTgsIDAuNjYsIDAuMjEsIDAuNzJdLCBbJ2MnLCAwLjEyLCAwLjI3LCAwLjMzLCAwLjQ1LCAwLjYwLCAwLjQ4XSwgWydjJywgMC4xMiwgMC4wMCwgMC4xOCwgMC4wMCwgMC4zMywgLTAuMDldLCBbJ2MnLCAwLjM5LCAtMC4xOCwgMS4zMiwgLTEuMjksIDEuNjgsIC0xLjk4XSwgWydjJywgMC4wOSwgLTAuMjEsIDAuMjQsIC0wLjMwLCAwLjM5LCAtMC4zMF0sIFsnYycsIDAuMTIsIDAuMDAsIDAuMjcsIDAuMDksIDAuMzMsIDAuMThdLCBbJ2MnLCAwLjAzLCAwLjA2LCAtMC4yNywgMS4xMSwgLTEuODYsIDYuNDJdLCBbJ2MnLCAtMS4wMiwgMy40OCwgLTEuODksIDYuMzksIC0xLjkyLCA2LjQyXSwgWydjJywgMC4wMCwgMC4wMywgLTAuMTIsIDAuMTIsIC0wLjI0LCAwLjE1XSwgWydjJywgLTAuMTgsIDAuMDksIC0wLjIxLCAwLjA5LCAtMC40NSwgMC4wOV0sIFsnYycsIC0wLjI0LCAwLjAwLCAtMC4zMCwgMC4wMCwgLTAuNDgsIC0wLjA2XSwgWydjJywgLTAuMDksIC0wLjA2LCAtMC4yMSwgLTAuMTIsIC0wLjIxLCAtMC4xNV0sIFsnYycsIC0wLjA2LCAtMC4wMywgMC4xNSwgLTAuNTcsIDEuNjgsIC00LjkyXSwgWydjJywgMC45NiwgLTIuNjcsIDEuNzQsIC00Ljg5LCAxLjcxLCAtNC44OV0sIFsnbCcsIC0wLjUxLCAwLjE1XSwgWydjJywgLTEuMDgsIDAuMzYsIC0xLjc0LCAwLjQ4LCAtMi41NSwgMC40OF0sIFsnYycsIC0wLjY2LCAwLjAwLCAtMC44NCwgLTAuMDMsIC0xLjMyLCAtMC4yN10sIFsnYycsIC0xLjMyLCAtMC42MywgLTEuNzcsIC0yLjE2LCAtMS4wMiwgLTMuMzBdLCBbJ2MnLCAwLjMzLCAtMC40NSwgMC44NCwgLTAuODEsIDEuMzgsIC0wLjkwXSwgWyd6J11dLCB3OiA3LjUzNCwgaDogMTMuODgzIH0sXG5cdCdyZXN0cy4xNnRoJzogeyBkOiBbWydNJywgMy4zMywgLTYuMTJdLCBbJ2MnLCAwLjY2LCAtMC4wOSwgMS4yMywgMC4wOSwgMS42OCwgMC41MV0sIFsnYycsIDAuMjcsIDAuMzAsIDAuMzksIDAuNTQsIDAuNTcsIDEuMjZdLCBbJ2MnLCAwLjA5LCAwLjMzLCAwLjE4LCAwLjY2LCAwLjIxLCAwLjcyXSwgWydjJywgMC4xNSwgMC4zOSwgMC41NywgMC41NywgMC44NywgMC40Ml0sIFsnYycsIDAuMzksIC0wLjE4LCAxLjIwLCAtMS4yMywgMS42MiwgLTIuMDddLCBbJ2MnLCAwLjA2LCAtMC4xNSwgMC4yNCwgLTAuMjQsIDAuMzYsIC0wLjI0XSwgWydjJywgMC4xMiwgMC4wMCwgMC4yNywgMC4wOSwgMC4zMywgMC4xOF0sIFsnYycsIDAuMDMsIDAuMDYsIC0wLjQ1LCAxLjg2LCAtMi42NywgMTAuMTddLCBbJ2MnLCAtMS41MCwgNS41NSwgLTIuNzMsIDEwLjE0LCAtMi43NiwgMTAuMTddLCBbJ2MnLCAtMC4wMywgMC4wMywgLTAuMTIsIDAuMTIsIC0wLjI0LCAwLjE1XSwgWydjJywgLTAuMTgsIDAuMDksIC0wLjIxLCAwLjA5LCAtMC40NSwgMC4wOV0sIFsnYycsIC0wLjI0LCAwLjAwLCAtMC4zMCwgMC4wMCwgLTAuNDgsIC0wLjA2XSwgWydjJywgLTAuMDksIC0wLjA2LCAtMC4yMSwgLTAuMTIsIC0wLjIxLCAtMC4xNV0sIFsnYycsIC0wLjA2LCAtMC4wMywgMC4xMiwgLTAuNTcsIDEuNDQsIC00LjkyXSwgWydjJywgMC44MSwgLTIuNjcsIDEuNDcsIC00Ljg2LCAxLjQ3LCAtNC44OV0sIFsnYycsIC0wLjAzLCAwLjAwLCAtMC4yNywgMC4wNiwgLTAuNTQsIDAuMTVdLCBbJ2MnLCAtMS4wOCwgMC4zNiwgLTEuNzcsIDAuNDgsIC0yLjU4LCAwLjQ4XSwgWydjJywgLTAuNjYsIDAuMDAsIC0wLjg0LCAtMC4wMywgLTEuMzIsIC0wLjI3XSwgWydjJywgLTEuMzIsIC0wLjYzLCAtMS43NywgLTIuMTYsIC0xLjAyLCAtMy4zMF0sIFsnYycsIDAuNzIsIC0xLjA1LCAyLjIyLCAtMS4yMywgMy4wNiwgLTAuNDJdLCBbJ2MnLCAwLjMwLCAwLjMzLCAwLjQyLCAwLjYwLCAwLjYwLCAxLjM4XSwgWydjJywgMC4wOSwgMC40NSwgMC4yMSwgMC43OCwgMC4zMywgMC45MF0sIFsnYycsIDAuMDksIDAuMDksIDAuMjcsIDAuMTgsIDAuNDUsIDAuMjFdLCBbJ2MnLCAwLjEyLCAwLjAwLCAwLjE4LCAwLjAwLCAwLjMzLCAtMC4wOV0sIFsnYycsIDAuMzMsIC0wLjE1LCAxLjAyLCAtMC45MywgMS40MSwgLTEuNTldLCBbJ2MnLCAwLjEyLCAtMC4yMSwgMC4xOCwgLTAuMzksIDAuMzksIC0xLjA4XSwgWydjJywgMC42NiwgLTIuMTAsIDEuMTcsIC0zLjg0LCAxLjE3LCAtMy44N10sIFsnYycsIDAuMDAsIDAuMDAsIC0wLjIxLCAwLjA2LCAtMC40MiwgMC4xNV0sIFsnYycsIC0wLjUxLCAwLjE1LCAtMS4yMCwgMC4zMywgLTEuNjgsIDAuNDJdLCBbJ2MnLCAtMC4zMywgMC4wNiwgLTAuNTEsIDAuMDYsIC0wLjk2LCAwLjA2XSwgWydjJywgLTAuNjYsIDAuMDAsIC0wLjg0LCAtMC4wMywgLTEuMzIsIC0wLjI3XSwgWydjJywgLTEuMzIsIC0wLjYzLCAtMS43NywgLTIuMTYsIC0xLjAyLCAtMy4zMF0sIFsnYycsIDAuMzMsIC0wLjQ1LCAwLjg0LCAtMC44MSwgMS4zOCwgLTAuOTBdLCBbJ3onXV0sIHc6IDkuNzI0LCBoOiAyMS4zODMgfSxcblx0J3Jlc3RzLjMybmQnOiB7IGQ6IFtbJ00nLCA0LjIzLCAtMTMuNjJdLCBbJ2MnLCAwLjY2LCAtMC4wOSwgMS4yMywgMC4wOSwgMS42OCwgMC41MV0sIFsnYycsIDAuMjcsIDAuMzAsIDAuMzksIDAuNTQsIDAuNTcsIDEuMjZdLCBbJ2MnLCAwLjA5LCAwLjMzLCAwLjE4LCAwLjY2LCAwLjIxLCAwLjcyXSwgWydjJywgMC4xMiwgMC4yNywgMC4zMywgMC40NSwgMC42MCwgMC40OF0sIFsnYycsIDAuMTIsIDAuMDAsIDAuMTgsIDAuMDAsIDAuMjcsIC0wLjA2XSwgWydjJywgMC4zMywgLTAuMjEsIDAuOTksIC0xLjExLCAxLjQ0LCAtMS45OF0sIFsnYycsIDAuMDksIC0wLjI0LCAwLjIxLCAtMC4zMywgMC4zOSwgLTAuMzNdLCBbJ2MnLCAwLjEyLCAwLjAwLCAwLjI3LCAwLjA5LCAwLjMzLCAwLjE4XSwgWydjJywgMC4wMywgMC4wNiwgLTAuNTcsIDIuNjcsIC0zLjIxLCAxMy44OV0sIFsnYycsIC0xLjgwLCA3LjYyLCAtMy4zMCwgMTMuODksIC0zLjMwLCAxMy45Ml0sIFsnYycsIC0wLjAzLCAwLjA2LCAtMC4xMiwgMC4xMiwgLTAuMjQsIDAuMThdLCBbJ2MnLCAtMC4yMSwgMC4wOSwgLTAuMjQsIDAuMDksIC0wLjQ4LCAwLjA5XSwgWydjJywgLTAuMjQsIDAuMDAsIC0wLjMwLCAwLjAwLCAtMC40OCwgLTAuMDZdLCBbJ2MnLCAtMC4wOSwgLTAuMDYsIC0wLjIxLCAtMC4xMiwgLTAuMjEsIC0wLjE1XSwgWydjJywgLTAuMDYsIC0wLjAzLCAwLjA5LCAtMC41NywgMS4yMywgLTQuOTJdLCBbJ2MnLCAwLjY5LCAtMi42NywgMS4yNiwgLTQuODYsIDEuMjksIC00Ljg5XSwgWydjJywgMC4wMCwgLTAuMDMsIC0wLjEyLCAtMC4wMywgLTAuNDgsIDAuMTJdLCBbJ2MnLCAtMS4xNywgMC4zOSwgLTIuMjIsIDAuNTcsIC0zLjAwLCAwLjU0XSwgWydjJywgLTAuNDIsIC0wLjAzLCAtMC43NSwgLTAuMTIsIC0xLjExLCAtMC4zMF0sIFsnYycsIC0xLjMyLCAtMC42MywgLTEuNzcsIC0yLjE2LCAtMS4wMiwgLTMuMzBdLCBbJ2MnLCAwLjcyLCAtMS4wNSwgMi4yMiwgLTEuMjMsIDMuMDYsIC0wLjQyXSwgWydjJywgMC4zMCwgMC4zMywgMC40MiwgMC42MCwgMC42MCwgMS4zOF0sIFsnYycsIDAuMDksIDAuNDUsIDAuMjEsIDAuNzgsIDAuMzMsIDAuOTBdLCBbJ2MnLCAwLjEyLCAwLjA5LCAwLjMwLCAwLjE4LCAwLjQ4LCAwLjIxXSwgWydjJywgMC4xMiwgMC4wMCwgMC4xOCwgMC4wMCwgMC4zMCwgLTAuMDldLCBbJ2MnLCAwLjQyLCAtMC4yMSwgMS4yOSwgLTEuMjksIDEuNTYsIC0xLjg5XSwgWydjJywgMC4wMywgLTAuMTIsIDEuMjMsIC00LjU5LCAxLjIzLCAtNC42NV0sIFsnYycsIDAuMDAsIC0wLjAzLCAtMC4xOCwgMC4wMywgLTAuMzksIDAuMTJdLCBbJ2MnLCAtMC42MywgMC4xOCwgLTEuMjAsIDAuMzYsIC0xLjc0LCAwLjQ1XSwgWydjJywgLTAuMzksIDAuMDYsIC0wLjU0LCAwLjA2LCAtMS4wMiwgMC4wNl0sIFsnYycsIC0wLjY2LCAwLjAwLCAtMC44NCwgLTAuMDMsIC0xLjMyLCAtMC4yN10sIFsnYycsIC0xLjMyLCAtMC42MywgLTEuNzcsIC0yLjE2LCAtMS4wMiwgLTMuMzBdLCBbJ2MnLCAwLjcyLCAtMS4wNSwgMi4yMiwgLTEuMjMsIDMuMDYsIC0wLjQyXSwgWydjJywgMC4zMCwgMC4zMywgMC40MiwgMC42MCwgMC42MCwgMS4zOF0sIFsnYycsIDAuMDksIDAuNDUsIDAuMjEsIDAuNzgsIDAuMzMsIDAuOTBdLCBbJ2MnLCAwLjE4LCAwLjE4LCAwLjUxLCAwLjI3LCAwLjcyLCAwLjE1XSwgWydjJywgMC4zMCwgLTAuMTIsIDAuNjksIC0wLjU3LCAxLjA4LCAtMS4xN10sIFsnYycsIDAuNDIsIC0wLjYwLCAwLjM5LCAtMC41MSwgMS4wNSwgLTMuMDNdLCBbJ2MnLCAwLjMzLCAtMS4yNiwgMC42MCwgLTIuMzEsIDAuNjAsIC0yLjM0XSwgWydjJywgMC4wMCwgMC4wMCwgLTAuMjEsIDAuMDMsIC0wLjQ1LCAwLjEyXSwgWydjJywgLTAuNTcsIDAuMTgsIC0xLjE0LCAwLjMzLCAtMS42MiwgMC40Ml0sIFsnYycsIC0wLjMzLCAwLjA2LCAtMC41MSwgMC4wNiwgLTAuOTYsIDAuMDZdLCBbJ2MnLCAtMC42NiwgMC4wMCwgLTAuODQsIC0wLjAzLCAtMS4zMiwgLTAuMjddLCBbJ2MnLCAtMS4zMiwgLTAuNjMsIC0xLjc3LCAtMi4xNiwgLTEuMDIsIC0zLjMwXSwgWydjJywgMC4zMywgLTAuNDUsIDAuODQsIC0wLjgxLCAxLjM4LCAtMC45MF0sIFsneiddXSwgdzogMTEuMzczLCBoOiAyOC44ODMgfSxcblx0J3Jlc3RzLjY0dGgnOiB7IGQ6IFtbJ00nLCA1LjEzLCAtMTMuNjJdLCBbJ2MnLCAwLjY2LCAtMC4wOSwgMS4yMywgMC4wOSwgMS42OCwgMC41MV0sIFsnYycsIDAuMjcsIDAuMzAsIDAuMzksIDAuNTQsIDAuNTcsIDEuMjZdLCBbJ2MnLCAwLjE1LCAwLjYzLCAwLjIxLCAwLjgxLCAwLjMzLCAwLjk2XSwgWydjJywgMC4xOCwgMC4yMSwgMC41NCwgMC4zMCwgMC43NSwgMC4xOF0sIFsnYycsIDAuMjQsIC0wLjEyLCAwLjYzLCAtMC42NiwgMS4wOCwgLTEuNTZdLCBbJ2MnLCAwLjMzLCAtMC42NiwgMC4zOSwgLTAuNzIsIDAuNjAsIC0wLjcyXSwgWydjJywgMC4xMiwgMC4wMCwgMC4yNywgMC4wOSwgMC4zMywgMC4xOF0sIFsnYycsIDAuMDMsIDAuMDYsIC0wLjY5LCAzLjY2LCAtMy41NCwgMTcuNjRdLCBbJ2MnLCAtMS45NSwgOS42NiwgLTMuNTcsIDE3LjYxLCAtMy41NywgMTcuNjRdLCBbJ2MnLCAtMC4wMywgMC4wNiwgLTAuMTIsIDAuMTIsIC0wLjI0LCAwLjE4XSwgWydjJywgLTAuMjEsIDAuMDksIC0wLjI0LCAwLjA5LCAtMC40OCwgMC4wOV0sIFsnYycsIC0wLjI0LCAwLjAwLCAtMC4zMCwgMC4wMCwgLTAuNDgsIC0wLjA2XSwgWydjJywgLTAuMDksIC0wLjA2LCAtMC4yMSwgLTAuMTIsIC0wLjIxLCAtMC4xNV0sIFsnYycsIC0wLjA2LCAtMC4wMywgMC4wNiwgLTAuNTcsIDEuMDUsIC00Ljk1XSwgWydjJywgMC42MCwgLTIuNzAsIDEuMDgsIC00Ljg5LCAxLjA4LCAtNC45Ml0sIFsnYycsIDAuMDAsIDAuMDAsIC0wLjI0LCAwLjA2LCAtMC41MSwgMC4xNV0sIFsnYycsIC0wLjY2LCAwLjI0LCAtMS4yMCwgMC4zNiwgLTEuNzcsIDAuNDhdLCBbJ2MnLCAtMC40MiwgMC4wNiwgLTAuNTcsIDAuMDYsIC0xLjA1LCAwLjA2XSwgWydjJywgLTAuNjksIDAuMDAsIC0wLjg3LCAtMC4wMywgLTEuMzUsIC0wLjI3XSwgWydjJywgLTEuMzIsIC0wLjYzLCAtMS43NywgLTIuMTYsIC0xLjAyLCAtMy4zMF0sIFsnYycsIDAuNzIsIC0xLjA1LCAyLjIyLCAtMS4yMywgMy4wNiwgLTAuNDJdLCBbJ2MnLCAwLjMwLCAwLjMzLCAwLjQyLCAwLjYwLCAwLjYwLCAxLjM4XSwgWydjJywgMC4wOSwgMC40NSwgMC4yMSwgMC43OCwgMC4zMywgMC45MF0sIFsnYycsIDAuMDksIDAuMDksIDAuMjcsIDAuMTgsIDAuNDUsIDAuMjFdLCBbJ2MnLCAwLjIxLCAwLjAzLCAwLjM5LCAtMC4wOSwgMC43MiwgLTAuNDJdLCBbJ2MnLCAwLjQ1LCAtMC40NSwgMS4wMiwgLTEuMjYsIDEuMTcsIC0xLjY1XSwgWydjJywgMC4wMywgLTAuMDksIDAuMjcsIC0xLjE0LCAwLjU0LCAtMi4zNF0sIFsnYycsIDAuMjcsIC0xLjIwLCAwLjQ4LCAtMi4xOSwgMC41MSwgLTIuMjJdLCBbJ2MnLCAwLjAwLCAtMC4wMywgLTAuMDksIC0wLjAzLCAtMC40OCwgMC4xMl0sIFsnYycsIC0xLjE3LCAwLjM5LCAtMi4yMiwgMC41NywgLTMuMDAsIDAuNTRdLCBbJ2MnLCAtMC40MiwgLTAuMDMsIC0wLjc1LCAtMC4xMiwgLTEuMTEsIC0wLjMwXSwgWydjJywgLTEuMzIsIC0wLjYzLCAtMS43NywgLTIuMTYsIC0xLjAyLCAtMy4zMF0sIFsnYycsIDAuMzYsIC0wLjU0LCAwLjk2LCAtMC44NywgMS42NSwgLTAuOTNdLCBbJ2MnLCAwLjU0LCAtMC4wMywgMS4wMiwgMC4xNSwgMS40MSwgMC41NF0sIFsnYycsIDAuMjcsIDAuMzAsIDAuMzksIDAuNTQsIDAuNTcsIDEuMjZdLCBbJ2MnLCAwLjA5LCAwLjMzLCAwLjE4LCAwLjY2LCAwLjIxLCAwLjcyXSwgWydjJywgMC4xNSwgMC4zOSwgMC41NywgMC41NywgMC45MCwgMC40Ml0sIFsnYycsIDAuMzYsIC0wLjE4LCAxLjIwLCAtMS4yNiwgMS40NywgLTEuODldLCBbJ2MnLCAwLjAzLCAtMC4wOSwgMC4zMCwgLTEuMjAsIDAuNTcsIC0yLjQzXSwgWydsJywgMC41MSwgLTIuMjhdLCBbJ2wnLCAtMC41NCwgMC4xOF0sIFsnYycsIC0xLjExLCAwLjM2LCAtMS44MCwgMC40OCwgLTIuNjEsIDAuNDhdLCBbJ2MnLCAtMC42NiwgMC4wMCwgLTAuODQsIC0wLjAzLCAtMS4zMiwgLTAuMjddLCBbJ2MnLCAtMS4zMiwgLTAuNjMsIC0xLjc3LCAtMi4xNiwgLTEuMDIsIC0zLjMwXSwgWydjJywgMC4zNiwgLTAuNTQsIDAuOTYsIC0wLjg3LCAxLjY1LCAtMC45M10sIFsnYycsIDAuNTQsIC0wLjAzLCAxLjAyLCAwLjE1LCAxLjQxLCAwLjU0XSwgWydjJywgMC4yNywgMC4zMCwgMC4zOSwgMC41NCwgMC41NywgMS4yNl0sIFsnYycsIDAuMTUsIDAuNjMsIDAuMjEsIDAuODEsIDAuMzMsIDAuOTZdLCBbJ2MnLCAwLjIxLCAwLjIxLCAwLjU0LCAwLjMwLCAwLjc1LCAwLjE4XSwgWydjJywgMC4zNiwgLTAuMTgsIDAuOTMsIC0wLjkzLCAxLjI5LCAtMS42OF0sIFsnYycsIDAuMTIsIC0wLjI0LCAwLjE4LCAtMC40OCwgMC42MywgLTIuNTVdLCBbJ2wnLCAwLjUxLCAtMi4zMV0sIFsnYycsIDAuMDAsIC0wLjAzLCAtMC4xOCwgMC4wMywgLTAuMzksIDAuMTJdLCBbJ2MnLCAtMS4xNCwgMC4zNiwgLTIuMTAsIDAuNTQsIC0yLjgyLCAwLjUxXSwgWydjJywgLTAuNDIsIC0wLjAzLCAtMC43NSwgLTAuMTIsIC0xLjExLCAtMC4zMF0sIFsnYycsIC0xLjMyLCAtMC42MywgLTEuNzcsIC0yLjE2LCAtMS4wMiwgLTMuMzBdLCBbJ2MnLCAwLjMzLCAtMC40NSwgMC44NCwgLTAuODEsIDEuMzgsIC0wLjkwXSwgWyd6J11dLCB3OiAxMi40NTMsIGg6IDM2LjM4MyB9LFxuXHQncmVzdHMuMTI4dGgnOiB7IGQ6IFtbJ00nLCA2LjAzLCAtMjEuMTJdLCBbJ2MnLCAwLjY2LCAtMC4wOSwgMS4yMywgMC4wOSwgMS42OCwgMC41MV0sIFsnYycsIDAuMjcsIDAuMzAsIDAuMzksIDAuNTQsIDAuNTcsIDEuMjZdLCBbJ2MnLCAwLjA5LCAwLjMzLCAwLjE4LCAwLjY2LCAwLjIxLCAwLjcyXSwgWydjJywgMC4xMiwgMC4yNywgMC4zMywgMC40NSwgMC42MCwgMC40OF0sIFsnYycsIDAuMjEsIDAuMDAsIDAuMzMsIC0wLjA2LCAwLjU0LCAtMC4zNl0sIFsnYycsIDAuMTUsIC0wLjIxLCAwLjU0LCAtMC45MywgMC43OCwgLTEuNDddLCBbJ2MnLCAwLjE1LCAtMC4zMywgMC4xOCwgLTAuMzksIDAuMzAsIC0wLjQ4XSwgWydjJywgMC4xOCwgLTAuMDksIDAuNDUsIDAuMDAsIDAuNTEsIDAuMTVdLCBbJ2MnLCAwLjAzLCAwLjA5LCAtNy4xMSwgNDIuNzUsIC03LjE3LCA0Mi44NF0sIFsnYycsIC0wLjAzLCAwLjAzLCAtMC4xNSwgMC4wOSwgLTAuMjQsIDAuMTVdLCBbJ2MnLCAtMC4xOCwgMC4wNiwgLTAuMjQsIDAuMDYsIC0wLjQ1LCAwLjA2XSwgWydjJywgLTAuMjQsIDAuMDAsIC0wLjMwLCAwLjAwLCAtMC40OCwgLTAuMDZdLCBbJ2MnLCAtMC4wOSwgLTAuMDYsIC0wLjIxLCAtMC4xMiwgLTAuMjEsIC0wLjE1XSwgWydjJywgLTAuMDYsIC0wLjAzLCAwLjAzLCAtMC41NywgMC44NCwgLTQuOThdLCBbJ2MnLCAwLjUxLCAtMi43MCwgMC45MywgLTQuOTIsIDAuOTAsIC00LjkyXSwgWydjJywgMC4wMCwgMC4wMCwgLTAuMTUsIDAuMDYsIC0wLjM2LCAwLjEyXSwgWydjJywgLTAuNzgsIDAuMjcsIC0xLjYyLCAwLjQ4LCAtMi4zMSwgMC41N10sIFsnYycsIC0wLjE1LCAwLjAzLCAtMC41NCwgMC4wMywgLTAuODEsIDAuMDNdLCBbJ2MnLCAtMC42NiwgMC4wMCwgLTAuODQsIC0wLjAzLCAtMS4zMiwgLTAuMjddLCBbJ2MnLCAtMS4zMiwgLTAuNjMsIC0xLjc3LCAtMi4xNiwgLTEuMDIsIC0zLjMwXSwgWydjJywgMC4zNiwgLTAuNTQsIDAuOTYsIC0wLjg3LCAxLjY1LCAtMC45M10sIFsnYycsIDAuNTQsIC0wLjAzLCAxLjAyLCAwLjE1LCAxLjQxLCAwLjU0XSwgWydjJywgMC4yNywgMC4zMCwgMC4zOSwgMC41NCwgMC41NywgMS4yNl0sIFsnYycsIDAuMDksIDAuMzMsIDAuMTgsIDAuNjYsIDAuMjEsIDAuNzJdLCBbJ2MnLCAwLjEyLCAwLjI3LCAwLjMzLCAwLjQ1LCAwLjYzLCAwLjQ4XSwgWydjJywgMC4xMiwgMC4wMCwgMC4xOCwgMC4wMCwgMC4zMCwgLTAuMDldLCBbJ2MnLCAwLjQyLCAtMC4yMSwgMS4xNCwgLTEuMTEsIDEuNTAsIC0xLjgzXSwgWydjJywgMC4xMiwgLTAuMjcsIDAuMTIsIC0wLjI3LCAwLjU0LCAtMi41Ml0sIFsnYycsIDAuMjQsIC0xLjIzLCAwLjQyLCAtMi4yNSwgMC4zOSwgLTIuMjVdLCBbJ2MnLCAwLjAwLCAwLjAwLCAtMC4yNCwgMC4wNiwgLTAuNTEsIDAuMThdLCBbJ2MnLCAtMS4yNiwgMC4zOSwgLTIuMjUsIDAuNTcsIC0zLjA2LCAwLjU0XSwgWydjJywgLTAuNDIsIC0wLjAzLCAtMC43NSwgLTAuMTIsIC0xLjExLCAtMC4zMF0sIFsnYycsIC0xLjMyLCAtMC42MywgLTEuNzcsIC0yLjE2LCAtMS4wMiwgLTMuMzBdLCBbJ2MnLCAwLjM2LCAtMC41NCwgMC45NiwgLTAuODcsIDEuNjUsIC0wLjkzXSwgWydjJywgMC41NCwgLTAuMDMsIDEuMDIsIDAuMTUsIDEuNDEsIDAuNTRdLCBbJ2MnLCAwLjI3LCAwLjMwLCAwLjM5LCAwLjU0LCAwLjU3LCAxLjI2XSwgWydjJywgMC4xNSwgMC42MywgMC4yMSwgMC44MSwgMC4zMywgMC45Nl0sIFsnYycsIDAuMTgsIDAuMjEsIDAuNTEsIDAuMzAsIDAuNzUsIDAuMThdLCBbJ2MnLCAwLjM2LCAtMC4xNSwgMS4wNSwgLTAuOTksIDEuNDEsIC0xLjc3XSwgWydsJywgMC4xNSwgLTAuMzBdLCBbJ2wnLCAwLjQyLCAtMi4yNV0sIFsnYycsIDAuMjEsIC0xLjI2LCAwLjQyLCAtMi4yOCwgMC4zOSwgLTIuMjhdLCBbJ2wnLCAtMC41MSwgMC4xNV0sIFsnYycsIC0xLjExLCAwLjM5LCAtMS44OSwgMC41MSwgLTIuNzAsIDAuNTFdLCBbJ2MnLCAtMC42NiwgMC4wMCwgLTAuODQsIC0wLjAzLCAtMS4zMiwgLTAuMjddLCBbJ2MnLCAtMS4zMiwgLTAuNjMsIC0xLjc3LCAtMi4xNiwgLTEuMDIsIC0zLjMwXSwgWydjJywgMC4zNiwgLTAuNTQsIDAuOTYsIC0wLjg3LCAxLjY1LCAtMC45M10sIFsnYycsIDAuNTQsIC0wLjAzLCAxLjAyLCAwLjE1LCAxLjQxLCAwLjU0XSwgWydjJywgMC4yNywgMC4zMCwgMC4zOSwgMC41NCwgMC41NywgMS4yNl0sIFsnYycsIDAuMTUsIDAuNjMsIDAuMjEsIDAuODEsIDAuMzMsIDAuOTZdLCBbJ2MnLCAwLjE4LCAwLjE4LCAwLjQ4LCAwLjI3LCAwLjcyLCAwLjIxXSwgWydjJywgMC4zMywgLTAuMTIsIDEuMTQsIC0xLjI2LCAxLjQxLCAtMS45NV0sIFsnYycsIDAuMDAsIC0wLjA5LCAwLjIxLCAtMS4xMSwgMC40NSwgLTIuMzRdLCBbJ2MnLCAwLjIxLCAtMS4yMCwgMC4zOSwgLTIuMjIsIDAuMzksIC0yLjI4XSwgWydjJywgMC4wMywgLTAuMDMsIDAuMDAsIC0wLjAzLCAtMC40NSwgMC4xMl0sIFsnYycsIC0wLjU3LCAwLjE4LCAtMS4yMCwgMC4zMywgLTEuNzEsIDAuNDJdLCBbJ2MnLCAtMC4zMCwgMC4wNiwgLTAuNTEsIDAuMDYsIC0wLjkzLCAwLjA2XSwgWydjJywgLTAuNjYsIDAuMDAsIC0wLjg0LCAtMC4wMywgLTEuMzIsIC0wLjI3XSwgWydjJywgLTEuMzIsIC0wLjYzLCAtMS43NywgLTIuMTYsIC0xLjAyLCAtMy4zMF0sIFsnYycsIDAuMzYsIC0wLjU0LCAwLjk2LCAtMC44NywgMS42NSwgLTAuOTNdLCBbJ2MnLCAwLjU0LCAtMC4wMywgMS4wMiwgMC4xNSwgMS40MSwgMC41NF0sIFsnYycsIDAuMjcsIDAuMzAsIDAuMzksIDAuNTQsIDAuNTcsIDEuMjZdLCBbJ2MnLCAwLjA5LCAwLjMzLCAwLjE4LCAwLjY2LCAwLjIxLCAwLjcyXSwgWydjJywgMC4xMiwgMC4yNywgMC4zMywgMC40NSwgMC42MCwgMC40OF0sIFsnYycsIDAuMTgsIDAuMDAsIDAuMzYsIC0wLjA5LCAwLjU3LCAtMC4zM10sIFsnYycsIDAuMzMsIC0wLjM2LCAwLjc4LCAtMS4xNCwgMC45MywgLTEuNTZdLCBbJ2MnLCAwLjAzLCAtMC4xMiwgMC4yNCwgLTEuMjAsIDAuNDUsIC0yLjQwXSwgWydjJywgMC4yNCwgLTEuMjAsIDAuNDIsIC0yLjIyLCAwLjQyLCAtMi4yOF0sIFsnYycsIDAuMDMsIC0wLjAzLCAwLjAwLCAtMC4wMywgLTAuMzksIDAuMDldLCBbJ2MnLCAtMS4wNSwgMC4zNiwgLTEuODAsIDAuNDgsIC0yLjU4LCAwLjQ4XSwgWydjJywgLTAuNjMsIDAuMDAsIC0wLjg0LCAtMC4wMywgLTEuMjksIC0wLjI3XSwgWydjJywgLTEuMzIsIC0wLjYzLCAtMS43NywgLTIuMTYsIC0xLjAyLCAtMy4zMF0sIFsnYycsIDAuMzMsIC0wLjQ1LCAwLjg0LCAtMC44MSwgMS4zOCwgLTAuOTBdLCBbJ3onXV0sIHc6IDEyLjk5MiwgaDogNDMuODgzIH0sXG5cdCdhY2NpZGVudGFscy5zaGFycCc6IHsgZDogW1snTScsIDUuNzMsIC0xMS4xOV0sIFsnYycsIDAuMjEsIC0wLjEyLCAwLjU0LCAtMC4wMywgMC42NiwgMC4yNF0sIFsnYycsIDAuMDYsIDAuMTIsIDAuMDYsIDAuMjEsIDAuMDYsIDIuMzFdLCBbJ2MnLCAwLjAwLCAxLjIzLCAwLjAwLCAyLjIyLCAwLjAzLCAyLjIyXSwgWydjJywgMC4wMCwgMC4wMCwgMC4yNywgLTAuMTIsIDAuNjAsIC0wLjI0XSwgWydjJywgMC42OSwgLTAuMjcsIDAuNzgsIC0wLjMwLCAwLjk2LCAtMC4xNV0sIFsnYycsIDAuMjEsIDAuMTUsIDAuMjEsIDAuMTgsIDAuMjEsIDEuMzhdLCBbJ2MnLCAwLjAwLCAxLjAyLCAwLjAwLCAxLjExLCAtMC4wNiwgMS4yMF0sIFsnYycsIC0wLjAzLCAwLjA2LCAtMC4wOSwgMC4xMiwgLTAuMTIsIDAuMTVdLCBbJ2MnLCAtMC4wNiwgMC4wMywgLTAuNDIsIDAuMjEsIC0wLjg0LCAwLjM2XSwgWydsJywgLTAuNzUsIDAuMzNdLCBbJ2wnLCAtMC4wMywgMi40M10sIFsnYycsIDAuMDAsIDEuMzIsIDAuMDAsIDIuNDMsIDAuMDMsIDIuNDNdLCBbJ2MnLCAwLjAwLCAwLjAwLCAwLjI3LCAtMC4xMiwgMC42MCwgLTAuMjRdLCBbJ2MnLCAwLjY5LCAtMC4yNywgMC43OCwgLTAuMzAsIDAuOTYsIC0wLjE1XSwgWydjJywgMC4yMSwgMC4xNSwgMC4yMSwgMC4xOCwgMC4yMSwgMS4zOF0sIFsnYycsIDAuMDAsIDEuMDIsIDAuMDAsIDEuMTEsIC0wLjA2LCAxLjIwXSwgWydjJywgLTAuMDMsIDAuMDYsIC0wLjA5LCAwLjEyLCAtMC4xMiwgMC4xNV0sIFsnYycsIC0wLjA2LCAwLjAzLCAtMC40MiwgMC4yMSwgLTAuODQsIDAuMzZdLCBbJ2wnLCAtMC43NSwgMC4zM10sIFsnbCcsIC0wLjAzLCAyLjUyXSwgWydjJywgMC4wMCwgMi4yOCwgLTAuMDMsIDIuNTUsIC0wLjA2LCAyLjY0XSwgWydjJywgLTAuMjEsIDAuMzYsIC0wLjcyLCAwLjM2LCAtMC45MywgMC4wMF0sIFsnYycsIC0wLjAzLCAtMC4wOSwgLTAuMDYsIC0wLjMzLCAtMC4wNiwgLTIuNDNdLCBbJ2wnLCAwLjAwLCAtMi4zMV0sIFsnbCcsIC0xLjI5LCAwLjUxXSwgWydsJywgLTEuMjYsIDAuNTFdLCBbJ2wnLCAwLjAwLCAyLjQzXSwgWydjJywgMC4wMCwgMi41OCwgMC4wMCwgMi41MiwgLTAuMTUsIDIuNjddLCBbJ2MnLCAtMC4wNiwgMC4wOSwgLTAuMjcsIDAuMTgsIC0wLjM2LCAwLjE4XSwgWydjJywgLTAuMTIsIDAuMDAsIC0wLjMzLCAtMC4wOSwgLTAuMzksIC0wLjE4XSwgWydjJywgLTAuMTUsIC0wLjE1LCAtMC4xNSwgLTAuMDksIC0wLjE1LCAtMi40M10sIFsnYycsIDAuMDAsIC0xLjIzLCAwLjAwLCAtMi4yMiwgLTAuMDMsIC0yLjIyXSwgWydjJywgMC4wMCwgMC4wMCwgLTAuMjcsIDAuMTIsIC0wLjYwLCAwLjI0XSwgWydjJywgLTAuNjksIDAuMjcsIC0wLjc4LCAwLjMwLCAtMC45NiwgMC4xNV0sIFsnYycsIC0wLjIxLCAtMC4xNSwgLTAuMjEsIC0wLjE4LCAtMC4yMSwgLTEuMzhdLCBbJ2MnLCAwLjAwLCAtMS4wMiwgMC4wMCwgLTEuMTEsIDAuMDYsIC0xLjIwXSwgWydjJywgMC4wMywgLTAuMDYsIDAuMDksIC0wLjEyLCAwLjEyLCAtMC4xNV0sIFsnYycsIDAuMDYsIC0wLjAzLCAwLjQyLCAtMC4yMSwgMC44NCwgLTAuMzZdLCBbJ2wnLCAwLjc4LCAtMC4zM10sIFsnbCcsIDAuMDAsIC0yLjQzXSwgWydjJywgMC4wMCwgLTEuMzIsIDAuMDAsIC0yLjQzLCAtMC4wMywgLTIuNDNdLCBbJ2MnLCAwLjAwLCAwLjAwLCAtMC4yNywgMC4xMiwgLTAuNjAsIDAuMjRdLCBbJ2MnLCAtMC42OSwgMC4yNywgLTAuNzgsIDAuMzAsIC0wLjk2LCAwLjE1XSwgWydjJywgLTAuMjEsIC0wLjE1LCAtMC4yMSwgLTAuMTgsIC0wLjIxLCAtMS4zOF0sIFsnYycsIDAuMDAsIC0xLjAyLCAwLjAwLCAtMS4xMSwgMC4wNiwgLTEuMjBdLCBbJ2MnLCAwLjAzLCAtMC4wNiwgMC4wOSwgLTAuMTIsIDAuMTIsIC0wLjE1XSwgWydjJywgMC4wNiwgLTAuMDMsIDAuNDIsIC0wLjIxLCAwLjg0LCAtMC4zNl0sIFsnbCcsIDAuNzgsIC0wLjMzXSwgWydsJywgMC4wMCwgLTIuNTJdLCBbJ2MnLCAwLjAwLCAtMi4yOCwgMC4wMywgLTIuNTUsIDAuMDYsIC0yLjY0XSwgWydjJywgMC4yMSwgLTAuMzYsIDAuNzIsIC0wLjM2LCAwLjkzLCAwLjAwXSwgWydjJywgMC4wMywgMC4wOSwgMC4wNiwgMC4zMywgMC4wNiwgMi40M10sIFsnbCcsIDAuMDMsIDIuMzFdLCBbJ2wnLCAxLjI2LCAtMC41MV0sIFsnbCcsIDEuMjYsIC0wLjUxXSwgWydsJywgMC4wMCwgLTIuNDNdLCBbJ2MnLCAwLjAwLCAtMi4yOCwgMC4wMCwgLTIuNDMsIDAuMDYsIC0yLjU1XSwgWydjJywgMC4wNiwgLTAuMTIsIDAuMTIsIC0wLjE4LCAwLjI3LCAtMC4yNF0sIFsneiddLCBbJ20nLCAtMC4zMywgMTAuNjVdLCBbJ2wnLCAwLjAwLCAtMi40M10sIFsnbCcsIC0xLjI5LCAwLjUxXSwgWydsJywgLTEuMjYsIDAuNTFdLCBbJ2wnLCAwLjAwLCAyLjQ2XSwgWydsJywgMC4wMCwgMi40M10sIFsnbCcsIDAuMDksIC0wLjAzXSwgWydjJywgMC4wNiwgLTAuMDMsIDAuNjMsIC0wLjI3LCAxLjI5LCAtMC41MV0sIFsnbCcsIDEuMTcsIC0wLjQ4XSwgWydsJywgMC4wMCwgLTIuNDZdLCBbJ3onXV0sIHc6IDguMjUsIGg6IDIyLjQ2MiB9LFxuXHQnYWNjaWRlbnRhbHMuaGFsZnNoYXJwJzogeyBkOiBbWydNJywgMi40MywgLTEwLjA1XSwgWydjJywgMC4yMSwgLTAuMTIsIDAuNTQsIC0wLjAzLCAwLjY2LCAwLjI0XSwgWydjJywgMC4wNiwgMC4xMiwgMC4wNiwgMC4yMSwgMC4wNiwgMi4wMV0sIFsnYycsIDAuMDAsIDEuMDUsIDAuMDAsIDEuODksIDAuMDMsIDEuODldLCBbJ2wnLCAwLjcyLCAtMC40OF0sIFsnYycsIDAuNjksIC0wLjQ4LCAwLjY5LCAtMC41MSwgMC44NywgLTAuNTFdLCBbJ2MnLCAwLjE1LCAwLjAwLCAwLjE4LCAwLjAzLCAwLjI3LCAwLjA5XSwgWydjJywgMC4yMSwgMC4xNSwgMC4yMSwgMC4xOCwgMC4yMSwgMS40MV0sIFsnYycsIDAuMDAsIDEuMTEsIC0wLjAzLCAxLjE0LCAtMC4wOSwgMS4yM10sIFsnYycsIC0wLjAzLCAwLjAzLCAtMC40OCwgMC4zOSwgLTEuMDIsIDAuNzVdLCBbJ2wnLCAtMC45OSwgMC42Nl0sIFsnbCcsIDAuMDAsIDIuMzddLCBbJ2MnLCAwLjAwLCAxLjMyLCAwLjAwLCAyLjM3LCAwLjAzLCAyLjM3XSwgWydsJywgMC43MiwgLTAuNDhdLCBbJ2MnLCAwLjY5LCAtMC40OCwgMC42OSwgLTAuNTEsIDAuODcsIC0wLjUxXSwgWydjJywgMC4xNSwgMC4wMCwgMC4xOCwgMC4wMywgMC4yNywgMC4wOV0sIFsnYycsIDAuMjEsIDAuMTUsIDAuMjEsIDAuMTgsIDAuMjEsIDEuNDFdLCBbJ2MnLCAwLjAwLCAxLjExLCAtMC4wMywgMS4xNCwgLTAuMDksIDEuMjNdLCBbJ2MnLCAtMC4wMywgMC4wMywgLTAuNDgsIDAuMzksIC0xLjAyLCAwLjc1XSwgWydsJywgLTAuOTksIDAuNjZdLCBbJ2wnLCAwLjAwLCAyLjI1XSwgWydjJywgMC4wMCwgMS45NSwgMC4wMCwgMi4yOCwgLTAuMDYsIDIuMzddLCBbJ2MnLCAtMC4wNiwgMC4xMiwgLTAuMTIsIDAuMjEsIC0wLjI0LCAwLjI3XSwgWydjJywgLTAuMjcsIDAuMTIsIC0wLjU0LCAwLjAzLCAtMC42OSwgLTAuMjRdLCBbJ2MnLCAtMC4wNiwgLTAuMTIsIC0wLjA2LCAtMC4yMSwgLTAuMDYsIC0yLjAxXSwgWydjJywgMC4wMCwgLTEuMDUsIDAuMDAsIC0xLjg5LCAtMC4wMywgLTEuODldLCBbJ2wnLCAtMC43MiwgMC40OF0sIFsnYycsIC0wLjY5LCAwLjQ4LCAtMC42OSwgMC40OCwgLTAuODcsIDAuNDhdLCBbJ2MnLCAtMC4xNSwgMC4wMCwgLTAuMTgsIDAuMDAsIC0wLjI3LCAtMC4wNl0sIFsnYycsIC0wLjIxLCAtMC4xNSwgLTAuMjEsIC0wLjE4LCAtMC4yMSwgLTEuNDFdLCBbJ2MnLCAwLjAwLCAtMS4xMSwgMC4wMywgLTEuMTQsIDAuMDksIC0xLjIzXSwgWydjJywgMC4wMywgLTAuMDMsIDAuNDgsIC0wLjM5LCAxLjAyLCAtMC43NV0sIFsnbCcsIDAuOTksIC0wLjY2XSwgWydsJywgMC4wMCwgLTIuMzddLCBbJ2MnLCAwLjAwLCAtMS4zMiwgMC4wMCwgLTIuMzcsIC0wLjAzLCAtMi4zN10sIFsnbCcsIC0wLjcyLCAwLjQ4XSwgWydjJywgLTAuNjksIDAuNDgsIC0wLjY5LCAwLjQ4LCAtMC44NywgMC40OF0sIFsnYycsIC0wLjE1LCAwLjAwLCAtMC4xOCwgMC4wMCwgLTAuMjcsIC0wLjA2XSwgWydjJywgLTAuMjEsIC0wLjE1LCAtMC4yMSwgLTAuMTgsIC0wLjIxLCAtMS40MV0sIFsnYycsIDAuMDAsIC0xLjExLCAwLjAzLCAtMS4xNCwgMC4wOSwgLTEuMjNdLCBbJ2MnLCAwLjAzLCAtMC4wMywgMC40OCwgLTAuMzksIDEuMDIsIC0wLjc1XSwgWydsJywgMC45OSwgLTAuNjZdLCBbJ2wnLCAwLjAwLCAtMi4yNV0sIFsnYycsIDAuMDAsIC0yLjEzLCAwLjAwLCAtMi4yOCwgMC4wNiwgLTIuNDBdLCBbJ2MnLCAwLjA2LCAtMC4xMiwgMC4xMiwgLTAuMTgsIDAuMjcsIC0wLjI0XSwgWyd6J11dLCB3OiA1LjI1LCBoOiAyMC4xNzQgfSxcblx0J2FjY2lkZW50YWxzLm5hdCc6IHsgZDogW1snTScsIDAuMjEsIC0xMS40MF0sIFsnYycsIDAuMjQsIC0wLjA2LCAwLjc4LCAwLjAwLCAwLjk5LCAwLjE1XSwgWydjJywgMC4wMywgMC4wMywgMC4wMywgMC40OCwgMC4wMCwgMi42MV0sIFsnYycsIC0wLjAzLCAxLjQ0LCAtMC4wMywgMi42MSwgLTAuMDMsIDIuNjFdLCBbJ2MnLCAwLjAwLCAwLjAzLCAwLjc1LCAtMC4wOSwgMS42OCwgLTAuMjRdLCBbJ2MnLCAwLjk2LCAtMC4xOCwgMS43MSwgLTAuMjcsIDEuNzQsIC0wLjI3XSwgWydjJywgMC4xNSwgMC4wMywgMC4yNywgMC4xNSwgMC4zNiwgMC4zMF0sIFsnbCcsIDAuMDYsIDAuMTJdLCBbJ2wnLCAwLjA5LCA4LjY3XSwgWydjJywgMC4wOSwgNi45NiwgMC4xMiwgOC42NywgMC4wOSwgOC42N10sIFsnYycsIC0wLjAzLCAwLjAzLCAtMC4xMiwgMC4wNiwgLTAuMjEsIDAuMDldLCBbJ2MnLCAtMC4yNCwgMC4wOSwgLTAuNzIsIDAuMDksIC0wLjk2LCAwLjAwXSwgWydjJywgLTAuMDksIC0wLjAzLCAtMC4xOCwgLTAuMDYsIC0wLjIxLCAtMC4wOV0sIFsnYycsIC0wLjAzLCAtMC4wMywgLTAuMDMsIC0wLjQ4LCAwLjAwLCAtMi42MV0sIFsnYycsIDAuMDMsIC0xLjQ0LCAwLjAzLCAtMi42MSwgMC4wMywgLTIuNjFdLCBbJ2MnLCAwLjAwLCAtMC4wMywgLTAuNzUsIDAuMDksIC0xLjY4LCAwLjI0XSwgWydjJywgLTAuOTYsIDAuMTgsIC0xLjcxLCAwLjI3LCAtMS43NCwgMC4yN10sIFsnYycsIC0wLjE1LCAtMC4wMywgLTAuMjcsIC0wLjE1LCAtMC4zNiwgLTAuMzBdLCBbJ2wnLCAtMC4wNiwgLTAuMTVdLCBbJ2wnLCAtMC4wOSwgLTcuNTNdLCBbJ2MnLCAtMC4wNiwgLTQuMTQsIC0wLjA5LCAtOC4wNCwgLTAuMTIsIC04LjY3XSwgWydsJywgMC4wMCwgLTEuMTFdLCBbJ2wnLCAwLjE1LCAtMC4wNl0sIFsnYycsIDAuMDksIC0wLjAzLCAwLjIxLCAtMC4wNiwgMC4yNywgLTAuMDldLCBbJ3onXSwgWydtJywgMy43NSwgOC40MF0sIFsnYycsIDAuMDAsIC0wLjMzLCAwLjAwLCAtMC40MiwgLTAuMDMsIC0wLjQyXSwgWydjJywgLTAuMTIsIDAuMDAsIC0yLjc5LCAwLjQ1LCAtMi43OSwgMC40OF0sIFsnYycsIC0wLjAzLCAwLjAwLCAtMC4wOSwgNi4zMCwgLTAuMDksIDYuMzNdLCBbJ2MnLCAwLjAzLCAwLjAwLCAyLjc5LCAtMC40NSwgMi44MiwgLTAuNDhdLCBbJ2MnLCAwLjAwLCAwLjAwLCAwLjA5LCAtNC41MywgMC4wOSwgLTUuOTFdLCBbJ3onXV0sIHc6IDUuNCwgaDogMjIuOCB9LFxuXHQnYWNjaWRlbnRhbHMuZmxhdCc6IHsgZDogW1snTScsIC0wLjM2LCAtMTQuMDddLCBbJ2MnLCAwLjMzLCAtMC4wNiwgMC44NywgMC4wMCwgMS4wOCwgMC4xNV0sIFsnYycsIDAuMDYsIDAuMDMsIDAuMDYsIDAuMzYsIC0wLjAzLCA1LjI1XSwgWydjJywgLTAuMDYsIDIuODUsIC0wLjA5LCA1LjE5LCAtMC4wOSwgNS4xOV0sIFsnYycsIDAuMDAsIDAuMDMsIDAuMTIsIC0wLjAzLCAwLjI0LCAtMC4xMl0sIFsnYycsIDAuNjMsIC0wLjQyLCAxLjQxLCAtMC42NiwgMi4xOSwgLTAuNzJdLCBbJ2MnLCAwLjgxLCAtMC4wMywgMS40NywgMC4yMSwgMi4wNCwgMC43OF0sIFsnYycsIDAuNTcsIDAuNTQsIDAuODcsIDEuMjYsIDAuOTMsIDIuMDRdLCBbJ2MnLCAwLjAzLCAwLjU3LCAtMC4wOSwgMS4wOCwgLTAuMzYsIDEuNjJdLCBbJ2MnLCAtMC40MiwgMC44MSwgLTEuMDIsIDEuMzgsIC0yLjgyLCAyLjYxXSwgWydjJywgLTEuMTQsIDAuNzgsIC0xLjQ0LCAxLjAyLCAtMS44MCwgMS40NF0sIFsnYycsIC0wLjE4LCAwLjE4LCAtMC4zOSwgMC4zOSwgLTAuNDUsIDAuNDJdLCBbJ2MnLCAtMC4yNywgMC4xOCwgLTAuNTcsIDAuMTUsIC0wLjgxLCAtMC4wNl0sIFsnYycsIC0wLjA2LCAtMC4wOSwgLTAuMTIsIC0wLjE4LCAtMC4xNSwgLTAuMjddLCBbJ2MnLCAtMC4wMywgLTAuMDYsIC0wLjA5LCAtMy4yNywgLTAuMTgsIC04LjM0XSwgWydjJywgLTAuMDksIC00LjUzLCAtMC4xNSwgLTguNTgsIC0wLjE4LCAtOS4wM10sIFsnbCcsIDAuMDAsIC0wLjc4XSwgWydsJywgMC4xMiwgLTAuMDZdLCBbJ2MnLCAwLjA2LCAtMC4wMywgMC4xOCwgLTAuMDksIDAuMjcsIC0wLjEyXSwgWyd6J10sIFsnbScsIDMuMTgsIDExLjAxXSwgWydjJywgLTAuMjEsIC0wLjEyLCAtMC41NCwgLTAuMTUsIC0wLjgxLCAtMC4wNl0sIFsnYycsIC0wLjU0LCAwLjE1LCAtMC45OSwgMC42MywgLTEuMTcsIDEuMjZdLCBbJ2MnLCAtMC4wNiwgMC4zMCwgLTAuMTIsIDIuODgsIC0wLjA2LCAzLjg3XSwgWydjJywgMC4wMywgMC40MiwgMC4wMywgMC44MSwgMC4wNiwgMC45MF0sIFsnbCcsIDAuMDMsIDAuMTJdLCBbJ2wnLCAwLjQ1LCAtMC4zOV0sIFsnYycsIDAuNjMsIC0wLjU0LCAxLjI2LCAtMS4xNywgMS41NiwgLTEuNTldLCBbJ2MnLCAwLjMwLCAtMC40MiwgMC42MCwgLTAuOTksIDAuNzIsIC0xLjQxXSwgWydjJywgMC4xOCwgLTAuNjksIDAuMDksIC0xLjQ3LCAtMC4xOCwgLTIuMDddLCBbJ2MnLCAtMC4xNSwgLTAuMzAsIC0wLjMzLCAtMC41MSwgLTAuNjAsIC0wLjYzXSwgWyd6J11dLCB3OiA2Ljc1LCBoOiAxOC44MDEgfSxcblx0J2FjY2lkZW50YWxzLmhhbGZmbGF0JzogeyBkOiBbWydNJywgNC44MywgLTE0LjA3XSwgWydjJywgMC4zMywgLTAuMDYsIDAuODcsIDAuMDAsIDEuMDgsIDAuMTVdLCBbJ2MnLCAwLjA2LCAwLjAzLCAwLjA2LCAwLjYwLCAtMC4xMiwgOS4wNl0sIFsnYycsIC0wLjA5LCA1LjU1LCAtMC4xNSwgOS4wNiwgLTAuMTgsIDkuMTJdLCBbJ2MnLCAtMC4wMywgMC4wOSwgLTAuMDksIDAuMTgsIC0wLjE1LCAwLjI3XSwgWydjJywgLTAuMjQsIDAuMjEsIC0wLjU0LCAwLjI0LCAtMC44MSwgMC4wNl0sIFsnYycsIC0wLjA2LCAtMC4wMywgLTAuMjcsIC0wLjI0LCAtMC40NSwgLTAuNDJdLCBbJ2MnLCAtMC4zNiwgLTAuNDIsIC0wLjY2LCAtMC42NiwgLTEuODAsIC0xLjQ0XSwgWydjJywgLTEuMjMsIC0wLjg0LCAtMS44MywgLTEuMzIsIC0yLjI1LCAtMS43N10sIFsnYycsIC0wLjY2LCAtMC43OCwgLTAuOTYsIC0xLjU2LCAtMC45MywgLTIuNDZdLCBbJ2MnLCAwLjA5LCAtMS40MSwgMS4xMSwgLTIuNTgsIDIuNDAsIC0yLjc5XSwgWydjJywgMC4zMCwgLTAuMDYsIDAuODQsIC0wLjAzLCAxLjIzLCAwLjA2XSwgWydjJywgMC41NCwgMC4xMiwgMS4wOCwgMC4zMywgMS41MywgMC42M10sIFsnYycsIDAuMTIsIDAuMDksIDAuMjQsIDAuMTUsIDAuMjQsIDAuMTJdLCBbJ2MnLCAwLjAwLCAwLjAwLCAtMC4xMiwgLTguMzcsIC0wLjE4LCAtOS43NV0sIFsnbCcsIDAuMDAsIC0wLjY2XSwgWydsJywgMC4xMiwgLTAuMDZdLCBbJ2MnLCAwLjA2LCAtMC4wMywgMC4xOCwgLTAuMDksIDAuMjcsIC0wLjEyXSwgWyd6J10sIFsnbScsIC0xLjY1LCAxMC45NV0sIFsnYycsIC0wLjYwLCAtMC4xOCwgLTEuMDgsIDAuMDksIC0xLjM4LCAwLjY5XSwgWydjJywgLTAuMjcsIDAuNjAsIC0wLjM2LCAxLjM4LCAtMC4xOCwgMi4wN10sIFsnYycsIDAuMTIsIDAuNDIsIDAuNDIsIDAuOTksIDAuNzIsIDEuNDFdLCBbJ2MnLCAwLjMwLCAwLjQyLCAwLjkzLCAxLjA1LCAxLjU2LCAxLjU5XSwgWydsJywgMC40OCwgMC4zOV0sIFsnbCcsIDAuMDAsIC0wLjEyXSwgWydjJywgMC4wMywgLTAuMDksIDAuMDMsIC0wLjQ4LCAwLjA2LCAtMC45MF0sIFsnYycsIDAuMDMsIC0wLjU3LCAwLjAzLCAtMS4wOCwgMC4wMCwgLTIuMjJdLCBbJ2MnLCAtMC4wMywgLTEuNjIsIC0wLjAzLCAtMS42MiwgLTAuMjQsIC0yLjA3XSwgWydjJywgLTAuMjEsIC0wLjQyLCAtMC42MCwgLTAuNzUsIC0xLjAyLCAtMC44NF0sIFsneiddXSwgdzogNi43MjgsIGg6IDE4LjgwMSB9LFxuXHQnYWNjaWRlbnRhbHMuZGJsZmxhdCc6IHsgZDogW1snTScsIC0wLjM2LCAtMTQuMDddLCBbJ2MnLCAwLjMzLCAtMC4wNiwgMC44NywgMC4wMCwgMS4wOCwgMC4xNV0sIFsnYycsIDAuMDYsIDAuMDMsIDAuMDYsIDAuMzYsIC0wLjAzLCA1LjI1XSwgWydjJywgLTAuMDYsIDIuODUsIC0wLjA5LCA1LjE5LCAtMC4wOSwgNS4xOV0sIFsnYycsIDAuMDAsIDAuMDMsIDAuMTIsIC0wLjAzLCAwLjI0LCAtMC4xMl0sIFsnYycsIDAuNjMsIC0wLjQyLCAxLjQxLCAtMC42NiwgMi4xOSwgLTAuNzJdLCBbJ2MnLCAwLjgxLCAtMC4wMywgMS40NywgMC4yMSwgMi4wNCwgMC43OF0sIFsnYycsIDAuNTcsIDAuNTQsIDAuODcsIDEuMjYsIDAuOTMsIDIuMDRdLCBbJ2MnLCAwLjAzLCAwLjU3LCAtMC4wOSwgMS4wOCwgLTAuMzYsIDEuNjJdLCBbJ2MnLCAtMC40MiwgMC44MSwgLTEuMDIsIDEuMzgsIC0yLjgyLCAyLjYxXSwgWydjJywgLTEuMTQsIDAuNzgsIC0xLjQ0LCAxLjAyLCAtMS44MCwgMS40NF0sIFsnYycsIC0wLjE4LCAwLjE4LCAtMC4zOSwgMC4zOSwgLTAuNDUsIDAuNDJdLCBbJ2MnLCAtMC4yNywgMC4xOCwgLTAuNTcsIDAuMTUsIC0wLjgxLCAtMC4wNl0sIFsnYycsIC0wLjA2LCAtMC4wOSwgLTAuMTIsIC0wLjE4LCAtMC4xNSwgLTAuMjddLCBbJ2MnLCAtMC4wMywgLTAuMDYsIC0wLjA5LCAtMy4yNywgLTAuMTgsIC04LjM0XSwgWydjJywgLTAuMDksIC00LjUzLCAtMC4xNSwgLTguNTgsIC0wLjE4LCAtOS4wM10sIFsnbCcsIDAuMDAsIC0wLjc4XSwgWydsJywgMC4xMiwgLTAuMDZdLCBbJ2MnLCAwLjA2LCAtMC4wMywgMC4xOCwgLTAuMDksIDAuMjcsIC0wLjEyXSwgWyd6J10sIFsnbScsIDMuMTgsIDExLjAxXSwgWydjJywgLTAuMjEsIC0wLjEyLCAtMC41NCwgLTAuMTUsIC0wLjgxLCAtMC4wNl0sIFsnYycsIC0wLjU0LCAwLjE1LCAtMC45OSwgMC42MywgLTEuMTcsIDEuMjZdLCBbJ2MnLCAtMC4wNiwgMC4zMCwgLTAuMTIsIDIuODgsIC0wLjA2LCAzLjg3XSwgWydjJywgMC4wMywgMC40MiwgMC4wMywgMC44MSwgMC4wNiwgMC45MF0sIFsnbCcsIDAuMDMsIDAuMTJdLCBbJ2wnLCAwLjQ1LCAtMC4zOV0sIFsnYycsIDAuNjMsIC0wLjU0LCAxLjI2LCAtMS4xNywgMS41NiwgLTEuNTldLCBbJ2MnLCAwLjMwLCAtMC40MiwgMC42MCwgLTAuOTksIDAuNzIsIC0xLjQxXSwgWydjJywgMC4xOCwgLTAuNjksIDAuMDksIC0xLjQ3LCAtMC4xOCwgLTIuMDddLCBbJ2MnLCAtMC4xNSwgLTAuMzAsIC0wLjMzLCAtMC41MSwgLTAuNjAsIC0wLjYzXSwgWyd6J10sIFsnbScsIDMsIC0xMV0sIFsnYycsIDAuMzMsIC0wLjA2LCAwLjg3LCAwLjAwLCAxLjA4LCAwLjE1XSwgWydjJywgMC4wNiwgMC4wMywgMC4wNiwgMC4zNiwgLTAuMDMsIDUuMjVdLCBbJ2MnLCAtMC4wNiwgMi44NSwgLTAuMDksIDUuMTksIC0wLjA5LCA1LjE5XSwgWydjJywgMC4wMCwgMC4wMywgMC4xMiwgLTAuMDMsIDAuMjQsIC0wLjEyXSwgWydjJywgMC42MywgLTAuNDIsIDEuNDEsIC0wLjY2LCAyLjE5LCAtMC43Ml0sIFsnYycsIDAuODEsIC0wLjAzLCAxLjQ3LCAwLjIxLCAyLjA0LCAwLjc4XSwgWydjJywgMC41NywgMC41NCwgMC44NywgMS4yNiwgMC45MywgMi4wNF0sIFsnYycsIDAuMDMsIDAuNTcsIC0wLjA5LCAxLjA4LCAtMC4zNiwgMS42Ml0sIFsnYycsIC0wLjQyLCAwLjgxLCAtMS4wMiwgMS4zOCwgLTIuODIsIDIuNjFdLCBbJ2MnLCAtMS4xNCwgMC43OCwgLTEuNDQsIDEuMDIsIC0xLjgwLCAxLjQ0XSwgWydjJywgLTAuMTgsIDAuMTgsIC0wLjM5LCAwLjM5LCAtMC40NSwgMC40Ml0sIFsnYycsIC0wLjI3LCAwLjE4LCAtMC41NywgMC4xNSwgLTAuODEsIC0wLjA2XSwgWydjJywgLTAuMDYsIC0wLjA5LCAtMC4xMiwgLTAuMTgsIC0wLjE1LCAtMC4yN10sIFsnYycsIC0wLjAzLCAtMC4wNiwgLTAuMDksIC0zLjI3LCAtMC4xOCwgLTguMzRdLCBbJ2MnLCAtMC4wOSwgLTQuNTMsIC0wLjE1LCAtOC41OCwgLTAuMTgsIC05LjAzXSwgWydsJywgMC4wMCwgLTAuNzhdLCBbJ2wnLCAwLjEyLCAtMC4wNl0sIFsnYycsIDAuMDYsIC0wLjAzLCAwLjE4LCAtMC4wOSwgMC4yNywgLTAuMTJdLCBbJ3onXSwgWydtJywgMy4xOCwgMTEuMDFdLCBbJ2MnLCAtMC4yMSwgLTAuMTIsIC0wLjU0LCAtMC4xNSwgLTAuODEsIC0wLjA2XSwgWydjJywgLTAuNTQsIDAuMTUsIC0wLjk5LCAwLjYzLCAtMS4xNywgMS4yNl0sIFsnYycsIC0wLjA2LCAwLjMwLCAtMC4xMiwgMi44OCwgLTAuMDYsIDMuODddLCBbJ2MnLCAwLjAzLCAwLjQyLCAwLjAzLCAwLjgxLCAwLjA2LCAwLjkwXSwgWydsJywgMC4wMywgMC4xMl0sIFsnbCcsIDAuNDUsIC0wLjM5XSwgWydjJywgMC42MywgLTAuNTQsIDEuMjYsIC0xLjE3LCAxLjU2LCAtMS41OV0sIFsnYycsIDAuMzAsIC0wLjQyLCAwLjYwLCAtMC45OSwgMC43MiwgLTEuNDFdLCBbJ2MnLCAwLjE4LCAtMC42OSwgMC4wOSwgLTEuNDcsIC0wLjE4LCAtMi4wN10sIFsnYycsIC0wLjE1LCAtMC4zMCwgLTAuMzMsIC0wLjUxLCAtMC42MCwgLTAuNjNdLCBbJ3onXV0sIHc6IDEyLjEsIGg6IDE4LjgwNCB9LFxuXHQnYWNjaWRlbnRhbHMuZGJsc2hhcnAnOiB7IGQ6IFtbJ00nLCAtMC4xOCwgLTMuOTZdLCBbJ2MnLCAwLjA2LCAtMC4wMywgMC4xMiwgLTAuMDYsIDAuMTUsIC0wLjA2XSwgWydjJywgMC4wOSwgMC4wMCwgMi43NiwgMC4yNywgMi43OSwgMC4zMF0sIFsnYycsIDAuMTIsIDAuMDMsIDAuMTUsIDAuMTIsIDAuMTUsIDAuNTFdLCBbJ2MnLCAwLjA2LCAwLjk2LCAwLjI0LCAxLjU5LCAwLjU3LCAyLjEwXSwgWydjJywgMC4wNiwgMC4wOSwgMC4xNSwgMC4yMSwgMC4xOCwgMC4yNF0sIFsnbCcsIDAuMDksIDAuMDZdLCBbJ2wnLCAwLjA5LCAtMC4wNl0sIFsnYycsIDAuMDMsIC0wLjAzLCAwLjEyLCAtMC4xNSwgMC4xOCwgLTAuMjRdLCBbJ2MnLCAwLjMzLCAtMC41MSwgMC41MSwgLTEuMTQsIDAuNTcsIC0yLjEwXSwgWydjJywgMC4wMCwgLTAuMzksIDAuMDMsIC0wLjQ1LCAwLjEyLCAtMC41MV0sIFsnYycsIDAuMDMsIDAuMDAsIDAuNjYsIC0wLjA5LCAxLjQ0LCAtMC4xNV0sIFsnYycsIDEuNDcsIC0wLjE1LCAxLjUwLCAtMC4xNSwgMS41NiwgLTAuMDNdLCBbJ2MnLCAwLjAzLCAwLjA2LCAwLjAwLCAwLjQyLCAtMC4wOSwgMS40NF0sIFsnYycsIC0wLjA5LCAwLjcyLCAtMC4xNSwgMS4zNSwgLTAuMTUsIDEuMzhdLCBbJ2MnLCAwLjAwLCAwLjAzLCAtMC4wMywgMC4wOSwgLTAuMDYsIDAuMTJdLCBbJ2MnLCAtMC4wNiwgMC4wNiwgLTAuMTIsIDAuMDksIC0wLjUxLCAwLjA5XSwgWydjJywgLTEuMDgsIDAuMDYsIC0xLjgwLCAwLjMwLCAtMi4yOCwgMC43NV0sIFsnbCcsIC0wLjEyLCAwLjA5XSwgWydsJywgMC4wOSwgMC4wOV0sIFsnYycsIDAuMTIsIDAuMTUsIDAuMzksIDAuMzMsIDAuNjMsIDAuNDVdLCBbJ2MnLCAwLjQyLCAwLjE4LCAwLjk2LCAwLjI3LCAxLjY4LCAwLjMzXSwgWydjJywgMC4zOSwgMC4wMCwgMC40NSwgMC4wMywgMC41MSwgMC4wOV0sIFsnYycsIDAuMDMsIDAuMDMsIDAuMDYsIDAuMDksIDAuMDYsIDAuMTJdLCBbJ2MnLCAwLjAwLCAwLjAzLCAwLjA2LCAwLjY2LCAwLjE1LCAxLjM4XSwgWydjJywgMC4wOSwgMS4wMiwgMC4xMiwgMS4zOCwgMC4wOSwgMS40NF0sIFsnYycsIC0wLjA2LCAwLjEyLCAtMC4wOSwgMC4xMiwgLTEuNTYsIC0wLjAzXSwgWydjJywgLTAuNzgsIC0wLjA2LCAtMS40MSwgLTAuMTUsIC0xLjQ0LCAtMC4xNV0sIFsnYycsIC0wLjA5LCAtMC4wNiwgLTAuMTIsIC0wLjEyLCAtMC4xMiwgLTAuNTRdLCBbJ2MnLCAtMC4wNiwgLTAuOTMsIC0wLjI0LCAtMS41NiwgLTAuNTcsIC0yLjA3XSwgWydjJywgLTAuMDYsIC0wLjA5LCAtMC4xNSwgLTAuMjEsIC0wLjE4LCAtMC4yNF0sIFsnbCcsIC0wLjA5LCAtMC4wNl0sIFsnbCcsIC0wLjA5LCAwLjA2XSwgWydjJywgLTAuMDMsIDAuMDMsIC0wLjEyLCAwLjE1LCAtMC4xOCwgMC4yNF0sIFsnYycsIC0wLjMzLCAwLjUxLCAtMC41MSwgMS4xNCwgLTAuNTcsIDIuMDddLCBbJ2MnLCAwLjAwLCAwLjQyLCAtMC4wMywgMC40OCwgLTAuMTIsIDAuNTRdLCBbJ2MnLCAtMC4wMywgMC4wMCwgLTAuNjYsIDAuMDksIC0xLjQ0LCAwLjE1XSwgWydjJywgLTEuNDcsIDAuMTUsIC0xLjUwLCAwLjE1LCAtMS41NiwgMC4wM10sIFsnYycsIC0wLjAzLCAtMC4wNiwgMC4wMCwgLTAuNDIsIDAuMDksIC0xLjQ0XSwgWydjJywgMC4wOSwgLTAuNzIsIDAuMTUsIC0xLjM1LCAwLjE1LCAtMS4zOF0sIFsnYycsIDAuMDAsIC0wLjAzLCAwLjAzLCAtMC4wOSwgMC4wNiwgLTAuMTJdLCBbJ2MnLCAwLjA2LCAtMC4wNiwgMC4xMiwgLTAuMDksIDAuNTEsIC0wLjA5XSwgWydjJywgMC43MiwgLTAuMDYsIDEuMjYsIC0wLjE1LCAxLjY4LCAtMC4zM10sIFsnYycsIDAuMjQsIC0wLjEyLCAwLjUxLCAtMC4zMCwgMC42MywgLTAuNDVdLCBbJ2wnLCAwLjA5LCAtMC4wOV0sIFsnbCcsIC0wLjEyLCAtMC4wOV0sIFsnYycsIC0wLjQ4LCAtMC40NSwgLTEuMjAsIC0wLjY5LCAtMi4yOCwgLTAuNzVdLCBbJ2MnLCAtMC4zOSwgMC4wMCwgLTAuNDUsIC0wLjAzLCAtMC41MSwgLTAuMDldLCBbJ2MnLCAtMC4wMywgLTAuMDMsIC0wLjA2LCAtMC4wOSwgLTAuMDYsIC0wLjEyXSwgWydjJywgMC4wMCwgLTAuMDMsIC0wLjA2LCAtMC42MywgLTAuMTIsIC0xLjM4XSwgWydjJywgLTAuMDksIC0wLjcyLCAtMC4xNSwgLTEuMzUsIC0wLjE1LCAtMS4zOF0sIFsneiddXSwgdzogNy45NSwgaDogNy45NzcgfSxcblx0J2RvdHMuZG90JzogeyBkOiBbWydNJywgMS4zMiwgLTEuNjhdLCBbJ2MnLCAwLjA5LCAtMC4wMywgMC4yNywgLTAuMDYsIDAuMzksIC0wLjA2XSwgWydjJywgMC45NiwgMC4wMCwgMS43NCwgMC43OCwgMS43NCwgMS43MV0sIFsnYycsIDAuMDAsIDAuOTYsIC0wLjc4LCAxLjc0LCAtMS43MSwgMS43NF0sIFsnYycsIC0wLjk2LCAwLjAwLCAtMS43NCwgLTAuNzgsIC0xLjc0LCAtMS43MV0sIFsnYycsIDAuMDAsIC0wLjc4LCAwLjU0LCAtMS41MCwgMS4zMiwgLTEuNjhdLCBbJ3onXV0sIHc6IDMuNDUsIGg6IDMuNDUgfSxcblx0J25vdGVoZWFkcy5kYmwnOiB7IGQ6IFtbJ00nLCAtMC42OSwgLTQuMDJdLCBbJ2MnLCAwLjE4LCAtMC4wOSwgMC4zNiwgLTAuMDksIDAuNTQsIDAuMDBdLCBbJ2MnLCAwLjE4LCAwLjA5LCAwLjI0LCAwLjE1LCAwLjMzLCAwLjMwXSwgWydjJywgMC4wNiwgMC4xNSwgMC4wNiwgMC4xOCwgMC4wNiwgMS40MV0sIFsnbCcsIDAuMDAsIDEuMjNdLCBbJ2wnLCAwLjEyLCAtMC4xOF0sIFsnYycsIDAuNzIsIC0xLjI2LCAyLjY0LCAtMi4zMSwgNC44NiwgLTIuNjRdLCBbJ2MnLCAwLjgxLCAtMC4xNSwgMS4xMSwgLTAuMTUsIDIuMTMsIC0wLjE1XSwgWydjJywgMC45OSwgMC4wMCwgMS4yOSwgMC4wMCwgMi4xMCwgMC4xNV0sIFsnYycsIDAuNzUsIDAuMTIsIDEuMzgsIDAuMjcsIDIuMDQsIDAuNTRdLCBbJ2MnLCAxLjM1LCAwLjUxLCAyLjM0LCAxLjI2LCAyLjgyLCAyLjEwXSwgWydsJywgMC4xMiwgMC4xOF0sIFsnbCcsIDAuMDAsIC0xLjIzXSwgWydjJywgMC4wMCwgLTEuMjAsIDAuMDAsIC0xLjI2LCAwLjA2LCAtMS4zOF0sIFsnYycsIDAuMDksIC0wLjE4LCAwLjE1LCAtMC4yNCwgMC4zMywgLTAuMzNdLCBbJ2MnLCAwLjE4LCAtMC4wOSwgMC4zNiwgLTAuMDksIDAuNTQsIDAuMDBdLCBbJ2MnLCAwLjE4LCAwLjA5LCAwLjI0LCAwLjE1LCAwLjMzLCAwLjMwXSwgWydsJywgMC4wNiwgMC4xNV0sIFsnbCcsIDAuMDAsIDMuNTRdLCBbJ2wnLCAwLjAwLCAzLjU0XSwgWydsJywgLTAuMDYsIDAuMTVdLCBbJ2MnLCAtMC4wOSwgMC4xOCwgLTAuMTUsIDAuMjQsIC0wLjMzLCAwLjMzXSwgWydjJywgLTAuMTgsIDAuMDksIC0wLjM2LCAwLjA5LCAtMC41NCwgMC4wMF0sIFsnYycsIC0wLjE4LCAtMC4wOSwgLTAuMjQsIC0wLjE1LCAtMC4zMywgLTAuMzNdLCBbJ2MnLCAtMC4wNiwgLTAuMTIsIC0wLjA2LCAtMC4xOCwgLTAuMDYsIC0xLjM4XSwgWydsJywgMC4wMCwgLTEuMjNdLCBbJ2wnLCAtMC4xMiwgMC4xOF0sIFsnYycsIC0wLjQ4LCAwLjg0LCAtMS40NywgMS41OSwgLTIuODIsIDIuMTBdLCBbJ2MnLCAtMC44NCwgMC4zMywgLTEuNzEsIDAuNTQsIC0yLjg1LCAwLjY2XSwgWydjJywgLTAuNDUsIDAuMDYsIC0yLjE2LCAwLjA2LCAtMi42MSwgMC4wMF0sIFsnYycsIC0xLjE0LCAtMC4xMiwgLTIuMDEsIC0wLjMzLCAtMi44NSwgLTAuNjZdLCBbJ2MnLCAtMS4zNSwgLTAuNTEsIC0yLjM0LCAtMS4yNiwgLTIuODIsIC0yLjEwXSwgWydsJywgLTAuMTIsIC0wLjE4XSwgWydsJywgMC4wMCwgMS4yM10sIFsnYycsIDAuMDAsIDEuMjMsIDAuMDAsIDEuMjYsIC0wLjA2LCAxLjM4XSwgWydjJywgLTAuMDksIDAuMTgsIC0wLjE1LCAwLjI0LCAtMC4zMywgMC4zM10sIFsnYycsIC0wLjE4LCAwLjA5LCAtMC4zNiwgMC4wOSwgLTAuNTQsIDAuMDBdLCBbJ2MnLCAtMC4xOCwgLTAuMDksIC0wLjI0LCAtMC4xNSwgLTAuMzMsIC0wLjMzXSwgWydsJywgLTAuMDYsIC0wLjE1XSwgWydsJywgMC4wMCwgLTMuNTRdLCBbJ2MnLCAwLjAwLCAtMy40OCwgMC4wMCwgLTMuNTQsIDAuMDYsIC0zLjY2XSwgWydjJywgMC4wOSwgLTAuMTgsIDAuMTUsIC0wLjI0LCAwLjMzLCAtMC4zM10sIFsneiddLCBbJ20nLCA3LjcxLCAwLjYzXSwgWydjJywgLTAuMzYsIC0wLjA2LCAtMC45MCwgLTAuMDYsIC0xLjE0LCAwLjAwXSwgWydjJywgLTAuMzAsIDAuMDMsIC0wLjY2LCAwLjI0LCAtMC44NywgMC40Ml0sIFsnYycsIC0wLjYwLCAwLjU0LCAtMC45MCwgMS42MiwgLTAuNzUsIDIuODJdLCBbJ2MnLCAwLjEyLCAwLjkzLCAwLjUxLCAxLjY4LCAxLjExLCAyLjMxXSwgWydjJywgMC43NSwgMC43MiwgMS44MywgMS4yMCwgMi44NSwgMS4yNl0sIFsnYycsIDEuMDUsIDAuMDYsIDEuODMsIC0wLjU0LCAyLjEwLCAtMS42NV0sIFsnYycsIDAuMjEsIC0wLjkwLCAwLjEyLCAtMS45NSwgLTAuMjQsIC0yLjgyXSwgWydjJywgLTAuMzYsIC0wLjgxLCAtMS4wOCwgLTEuNTMsIC0xLjk1LCAtMS45NV0sIFsnYycsIC0wLjMwLCAtMC4xNSwgLTAuNzgsIC0wLjMwLCAtMS4xMSwgLTAuMzldLCBbJ3onXV0sIHc6IDE2LjgzLCBoOiA4LjE0NSB9LFxuXHQnbm90ZWhlYWRzLndob2xlJzogeyBkOiBbWydNJywgNi41MSwgLTQuMDVdLCBbJ2MnLCAwLjUxLCAtMC4wMywgMi4wMSwgMC4wMCwgMi41MiwgMC4wM10sIFsnYycsIDEuNDEsIDAuMTgsIDIuNjQsIDAuNTEsIDMuNzIsIDEuMDhdLCBbJ2MnLCAxLjIwLCAwLjYzLCAxLjk1LCAxLjQxLCAyLjE5LCAyLjMxXSwgWydjJywgMC4wOSwgMC4zMywgMC4wOSwgMC45MCwgMC4wMCwgMS4yM10sIFsnYycsIC0wLjI0LCAwLjkwLCAtMC45OSwgMS42OCwgLTIuMTksIDIuMzFdLCBbJ2MnLCAtMS4wOCwgMC41NywgLTIuMjgsIDAuOTAsIC0zLjc1LCAxLjA4XSwgWydjJywgLTAuNjYsIDAuMDYsIC0yLjMxLCAwLjA2LCAtMi45NywgMC4wMF0sIFsnYycsIC0xLjQ3LCAtMC4xOCwgLTIuNjcsIC0wLjUxLCAtMy43NSwgLTEuMDhdLCBbJ2MnLCAtMS4yMCwgLTAuNjMsIC0xLjk1LCAtMS40MSwgLTIuMTksIC0yLjMxXSwgWydjJywgLTAuMDksIC0wLjMzLCAtMC4wOSwgLTAuOTAsIDAuMDAsIC0xLjIzXSwgWydjJywgMC4yNCwgLTAuOTAsIDAuOTksIC0xLjY4LCAyLjE5LCAtMi4zMV0sIFsnYycsIDEuMjAsIC0wLjYzLCAyLjYxLCAtMC45OSwgNC4yMywgLTEuMTFdLCBbJ3onXSwgWydtJywgMC41NywgMC42Nl0sIFsnYycsIC0wLjg3LCAtMC4xNSwgLTEuNTMsIDAuMDAsIC0yLjA0LCAwLjUxXSwgWydjJywgLTAuMTUsIDAuMTUsIC0wLjI0LCAwLjI3LCAtMC4zMywgMC40OF0sIFsnYycsIC0wLjI0LCAwLjUxLCAtMC4zNiwgMS4wOCwgLTAuMzMsIDEuNzddLCBbJ2MnLCAwLjAzLCAwLjY5LCAwLjE4LCAxLjI2LCAwLjQyLCAxLjc3XSwgWydjJywgMC42MCwgMS4xNywgMS43NCwgMS45OCwgMy4xOCwgMi4yMl0sIFsnYycsIDEuMTEsIDAuMjEsIDEuOTUsIC0wLjE1LCAyLjM0LCAtMC45OV0sIFsnYycsIDAuMjQsIC0wLjUxLCAwLjM2LCAtMS4wOCwgMC4zMywgLTEuODBdLCBbJ2MnLCAtMC4wNiwgLTEuMTEsIC0wLjQ1LCAtMi4wNCwgLTEuMTcsIC0yLjc2XSwgWydjJywgLTAuNjMsIC0wLjYzLCAtMS40NywgLTEuMDUsIC0yLjQwLCAtMS4yMF0sIFsneiddXSwgdzogMTQuOTg1LCBoOiA4LjA5NyB9LFxuXHQnbm90ZWhlYWRzLmhhbGYnOiB7IGQ6IFtbJ00nLCA3LjQ0LCAtNC4wNV0sIFsnYycsIDAuMDYsIC0wLjAzLCAwLjI3LCAtMC4wMywgMC40OCwgLTAuMDNdLCBbJ2MnLCAxLjA1LCAwLjAwLCAxLjcxLCAwLjI0LCAyLjEwLCAwLjgxXSwgWydjJywgMC40MiwgMC42MCwgMC40NSwgMS4zNSwgMC4xOCwgMi40MF0sIFsnYycsIC0wLjQyLCAxLjU5LCAtMS4xNCwgMi43MywgLTIuMTYsIDMuMzldLCBbJ2MnLCAtMS40MSwgMC45MywgLTMuMTgsIDEuNDQsIC01LjQwLCAxLjUzXSwgWydjJywgLTEuMTcsIDAuMDMsIC0xLjg5LCAtMC4yMSwgLTIuMjgsIC0wLjgxXSwgWydjJywgLTAuNDIsIC0wLjYwLCAtMC40NSwgLTEuMzUsIC0wLjE4LCAtMi40MF0sIFsnYycsIDAuNDIsIC0xLjU5LCAxLjE0LCAtMi43MywgMi4xNiwgLTMuMzldLCBbJ2MnLCAwLjYzLCAtMC40MiwgMS4yMywgLTAuNzIsIDEuOTgsIC0wLjk2XSwgWydjJywgMC45MCwgLTAuMzAsIDEuNjUsIC0wLjQyLCAzLjEyLCAtMC41NF0sIFsneiddLCBbJ20nLCAxLjI5LCAwLjg3XSwgWydjJywgLTAuMjcsIC0wLjA5LCAtMC42MywgLTAuMTIsIC0wLjkwLCAtMC4wM10sIFsnYycsIC0wLjcyLCAwLjI0LCAtMS41MywgMC42OSwgLTMuMjcsIDEuODBdLCBbJ2MnLCAtMi4zNCwgMS41MCwgLTMuMzAsIDIuMjUsIC0zLjU3LCAyLjc5XSwgWydjJywgLTAuMzYsIDAuNzIsIC0wLjA2LCAxLjUwLCAwLjY2LCAxLjc3XSwgWydjJywgMC4yNCwgMC4xMiwgMC42OSwgMC4wOSwgMC45OSwgMC4wMF0sIFsnYycsIDAuODQsIC0wLjMwLCAxLjkyLCAtMC45MywgNC4xNCwgLTIuMzddLCBbJ2MnLCAxLjYyLCAtMS4wOCwgMi4zNywgLTEuNzEsIDIuNjEsIC0yLjE5XSwgWydjJywgMC4zNiwgLTAuNzIsIDAuMDYsIC0xLjUwLCAtMC42NiwgLTEuNzddLCBbJ3onXV0sIHc6IDEwLjM3LCBoOiA4LjEzMiB9LFxuXHQnbm90ZWhlYWRzLnF1YXJ0ZXInOiB7IGQ6IFtbJ00nLCA2LjA5LCAtNC4wNV0sIFsnYycsIDAuMzYsIC0wLjAzLCAxLjIwLCAwLjAwLCAxLjUzLCAwLjA2XSwgWydjJywgMS4xNywgMC4yNCwgMS44OSwgMC44NCwgMi4xNiwgMS44M10sIFsnYycsIDAuMDYsIDAuMTgsIDAuMDYsIDAuMzAsIDAuMDYsIDAuNjZdLCBbJ2MnLCAwLjAwLCAwLjQ1LCAwLjAwLCAwLjYzLCAtMC4xNSwgMS4wOF0sIFsnYycsIC0wLjY2LCAyLjA0LCAtMy4wNiwgMy45MywgLTUuNTIsIDQuMzhdLCBbJ2MnLCAtMC41NCwgMC4wOSwgLTEuNDQsIDAuMDksIC0xLjgzLCAwLjAzXSwgWydjJywgLTEuMjMsIC0wLjI3LCAtMS45OCwgLTAuODcsIC0yLjI1LCAtMS44Nl0sIFsnYycsIC0wLjA2LCAtMC4xOCwgLTAuMDYsIC0wLjMwLCAtMC4wNiwgLTAuNjZdLCBbJ2MnLCAwLjAwLCAtMC40NSwgMC4wMCwgLTAuNjMsIDAuMTUsIC0xLjA4XSwgWydjJywgMC4yNCwgLTAuNzgsIDAuNzUsIC0xLjUzLCAxLjQ0LCAtMi4yMl0sIFsnYycsIDEuMjAsIC0xLjIwLCAyLjg1LCAtMi4wMSwgNC40NywgLTIuMjJdLCBbJ3onXV0sIHc6IDkuODEsIGg6IDguMDk0IH0sXG5cdCdub3RlaGVhZHMuc2xhc2gubm9zdGVtJzogeyBkOiBbWydNJywgOS4zMCwgLTcuNzddLCBbJ2MnLCAwLjA2LCAtMC4wNiwgMC4xOCwgLTAuMDYsIDEuNzEsIC0wLjA2XSwgWydsJywgMS42NSwgMC4wMF0sIFsnbCcsIDAuMDksIDAuMDldLCBbJ2MnLCAwLjA2LCAwLjA2LCAwLjA2LCAwLjA5LCAwLjA2LCAwLjE1XSwgWydjJywgLTAuMDMsIDAuMTIsIC05LjIxLCAxNS4yNCwgLTkuMzAsIDE1LjMzXSwgWydjJywgLTAuMDYsIDAuMDYsIC0wLjE4LCAwLjA2LCAtMS43MSwgMC4wNl0sIFsnbCcsIC0xLjY1LCAwLjAwXSwgWydsJywgLTAuMDksIC0wLjA5XSwgWydjJywgLTAuMDYsIC0wLjA2LCAtMC4wNiwgLTAuMDksIC0wLjA2LCAtMC4xNV0sIFsnYycsIDAuMDMsIC0wLjEyLCA5LjIxLCAtMTUuMjQsIDkuMzAsIC0xNS4zM10sIFsneiddXSwgdzogMTIuODEsIGg6IDE1LjYzIH0sXG5cdCdub3RlaGVhZHMuaW5kZXRlcm1pbmF0ZSc6IHsgZDogW1snTScsIDAuNzgsIC00LjA1XSwgWydjJywgMC4xMiwgLTAuMDMsIDAuMjQsIC0wLjAzLCAwLjM2LCAwLjAzXSwgWydjJywgMC4wMywgMC4wMywgMC45MywgMC43MiwgMS45NSwgMS41Nl0sIFsnbCcsIDEuODYsIDEuNTBdLCBbJ2wnLCAxLjg2LCAtMS41MF0sIFsnYycsIDEuMDIsIC0wLjg0LCAxLjkyLCAtMS41MywgMS45NSwgLTEuNTZdLCBbJ2MnLCAwLjIxLCAtMC4xMiwgMC4zMywgLTAuMDksIDAuNzUsIDAuMjRdLCBbJ2MnLCAwLjMwLCAwLjI3LCAwLjM2LCAwLjM2LCAwLjM2LCAwLjU0XSwgWydjJywgMC4wMCwgMC4wMywgLTAuMDMsIDAuMTIsIC0wLjA2LCAwLjE4XSwgWydjJywgLTAuMDMsIDAuMDYsIC0wLjkwLCAwLjc1LCAtMS44OSwgMS41Nl0sIFsnbCcsIC0xLjgwLCAxLjQ3XSwgWydjJywgMC4wMCwgMC4wMywgMC44MSwgMC42OSwgMS44MCwgMS41MF0sIFsnYycsIDAuOTksIDAuODEsIDEuODYsIDEuNTAsIDEuODksIDEuNTZdLCBbJ2MnLCAwLjAzLCAwLjA2LCAwLjA2LCAwLjE1LCAwLjA2LCAwLjE4XSwgWydjJywgMC4wMCwgMC4xOCwgLTAuMDYsIDAuMjcsIC0wLjM2LCAwLjU0XSwgWydjJywgLTAuNDIsIDAuMzMsIC0wLjU0LCAwLjM2LCAtMC43NSwgMC4yNF0sIFsnYycsIC0wLjAzLCAtMC4wMywgLTAuOTMsIC0wLjcyLCAtMS45NSwgLTEuNTZdLCBbJ2wnLCAtMS44NiwgLTEuNTBdLCBbJ2wnLCAtMS44NiwgMS41MF0sIFsnYycsIC0xLjAyLCAwLjg0LCAtMS45MiwgMS41MywgLTEuOTUsIDEuNTZdLCBbJ2MnLCAtMC4yMSwgMC4xMiwgLTAuMzMsIDAuMDksIC0wLjc1LCAtMC4yNF0sIFsnYycsIC0wLjMwLCAtMC4yNywgLTAuMzYsIC0wLjM2LCAtMC4zNiwgLTAuNTRdLCBbJ2MnLCAwLjAwLCAtMC4wMywgMC4wMywgLTAuMTIsIDAuMDYsIC0wLjE4XSwgWydjJywgMC4wMywgLTAuMDYsIDAuOTAsIC0wLjc1LCAxLjg5LCAtMS41Nl0sIFsnbCcsIDEuODAsIC0xLjQ3XSwgWydjJywgMC4wMCwgLTAuMDMsIC0wLjgxLCAtMC42OSwgLTEuODAsIC0xLjUwXSwgWydjJywgLTAuOTksIC0wLjgxLCAtMS44NiwgLTEuNTAsIC0xLjg5LCAtMS41Nl0sIFsnYycsIC0wLjA2LCAtMC4xMiwgLTAuMDksIC0wLjIxLCAtMC4wMywgLTAuMzZdLCBbJ2MnLCAwLjAzLCAtMC4wOSwgMC41NywgLTAuNTcsIDAuNzIsIC0wLjYzXSwgWyd6J11dLCB3OiA5Ljg0MywgaDogOC4xMzkgfSxcblx0J3NjcmlwdHMudWZlcm1hdGEnOiB7IGQ6IFtbJ00nLCAtMC43NSwgLTEwLjc3XSwgWydjJywgMC4xMiwgMC4wMCwgMC40NSwgLTAuMDMsIDAuNjksIC0wLjAzXSwgWydjJywgMi45MSwgLTAuMDMsIDUuNTUsIDEuNTMsIDcuNDEsIDQuMzVdLCBbJ2MnLCAxLjE3LCAxLjcxLCAxLjk1LCAzLjcyLCAyLjQzLCA2LjAzXSwgWydjJywgMC4xMiwgMC41MSwgMC4xMiwgMC41NywgMC4wMywgMC42OV0sIFsnYycsIC0wLjEyLCAwLjIxLCAtMC40OCwgMC4yNywgLTAuNjksIDAuMTJdLCBbJ2MnLCAtMC4xMiwgLTAuMDksIC0wLjE4LCAtMC4yNCwgLTAuMjcsIC0wLjY5XSwgWydjJywgLTAuNzgsIC0zLjYzLCAtMy40MiwgLTYuNTQsIC02Ljc4LCAtNy4zOF0sIFsnYycsIC0wLjc4LCAtMC4yMSwgLTEuMjAsIC0wLjI0LCAtMi4wNywgLTAuMjRdLCBbJ2MnLCAtMC42MywgMC4wMCwgLTAuODQsIDAuMDAsIC0xLjIwLCAwLjA2XSwgWydjJywgLTEuODMsIDAuMjcsIC0zLjQyLCAxLjA4LCAtNC44MCwgMi4zN10sIFsnYycsIC0xLjQxLCAxLjM1LCAtMi40MCwgMy4yMSwgLTIuODUsIDUuMTldLCBbJ2MnLCAtMC4wOSwgMC40NSwgLTAuMTUsIDAuNjAsIC0wLjI3LCAwLjY5XSwgWydjJywgLTAuMjEsIDAuMTUsIC0wLjU3LCAwLjA5LCAtMC42OSwgLTAuMTJdLCBbJ2MnLCAtMC4wOSwgLTAuMTIsIC0wLjA5LCAtMC4xOCwgMC4wMywgLTAuNjldLCBbJ2MnLCAwLjMzLCAtMS42MiwgMC43OCwgLTMuMDAsIDEuNDcsIC00LjM4XSwgWydjJywgMS43NywgLTMuNTQsIDQuNDQsIC01LjY3LCA3LjU2LCAtNS45N10sIFsneiddLCBbJ20nLCAwLjMzLCA3LjQ3XSwgWydjJywgMS4zOCwgLTAuMzAsIDIuNTgsIDAuOTAsIDIuMzEsIDIuMjVdLCBbJ2MnLCAtMC4xNSwgMC43MiwgLTAuNzgsIDEuMzUsIC0xLjQ3LCAxLjUwXSwgWydjJywgLTEuMzgsIDAuMjcsIC0yLjU4LCAtMC45MywgLTIuMzEsIC0yLjMxXSwgWydjJywgMC4xNSwgLTAuNjksIDAuNzgsIC0xLjI5LCAxLjQ3LCAtMS40NF0sIFsneiddXSwgdzogMTkuNzQ4LCBoOiAxMS4yODkgfSxcblx0J3NjcmlwdHMuZGZlcm1hdGEnOiB7IGQ6IFtbJ00nLCAtOS42MywgLTAuNDJdLCBbJ2MnLCAwLjE1LCAtMC4wOSwgMC4zNiwgLTAuMDYsIDAuNTEsIDAuMDNdLCBbJ2MnLCAwLjEyLCAwLjA5LCAwLjE4LCAwLjI0LCAwLjI3LCAwLjY2XSwgWydjJywgMC43OCwgMy42NiwgMy40MiwgNi41NywgNi43OCwgNy40MV0sIFsnYycsIDAuNzgsIDAuMjEsIDEuMjAsIDAuMjQsIDIuMDcsIDAuMjRdLCBbJ2MnLCAwLjYzLCAwLjAwLCAwLjg0LCAwLjAwLCAxLjIwLCAtMC4wNl0sIFsnYycsIDEuODMsIC0wLjI3LCAzLjQyLCAtMS4wOCwgNC44MCwgLTIuMzddLCBbJ2MnLCAxLjQxLCAtMS4zNSwgMi40MCwgLTMuMjEsIDIuODUsIC01LjIyXSwgWydjJywgMC4wOSwgLTAuNDIsIDAuMTUsIC0wLjU3LCAwLjI3LCAtMC42Nl0sIFsnYycsIDAuMjEsIC0wLjE1LCAwLjU3LCAtMC4wOSwgMC42OSwgMC4xMl0sIFsnYycsIDAuMDksIDAuMTIsIDAuMDksIDAuMTgsIC0wLjAzLCAwLjY5XSwgWydjJywgLTAuMzMsIDEuNjIsIC0wLjc4LCAzLjAwLCAtMS40NywgNC4zOF0sIFsnYycsIC0xLjkyLCAzLjg0LCAtNC44OSwgNi4wMCwgLTguMzEsIDYuMDBdLCBbJ2MnLCAtMy40MiwgMC4wMCwgLTYuMzksIC0yLjE2LCAtOC4zMSwgLTYuMDBdLCBbJ2MnLCAtMC40OCwgLTAuOTYsIC0wLjg0LCAtMS45MiwgLTEuMTQsIC0yLjk3XSwgWydjJywgLTAuMTgsIC0wLjY5LCAtMC40MiwgLTEuNzQsIC0wLjQyLCAtMS45Ml0sIFsnYycsIDAuMDAsIC0wLjEyLCAwLjA5LCAtMC4yNywgMC4yNCwgLTAuMzNdLCBbJ3onXSwgWydtJywgOS4yMSwgMC4wMF0sIFsnYycsIDEuMjAsIC0wLjI3LCAyLjM0LCAwLjYzLCAyLjM0LCAxLjg2XSwgWydjJywgMC4wMCwgMC45MCwgLTAuNjYsIDEuNjgsIC0xLjUwLCAxLjg5XSwgWydjJywgLTEuMzgsIDAuMjcsIC0yLjU4LCAtMC45MywgLTIuMzEsIC0yLjMxXSwgWydjJywgMC4xNSwgLTAuNjksIDAuNzgsIC0xLjI5LCAxLjQ3LCAtMS40NF0sIFsneiddXSwgdzogMTkuNzQ0LCBoOiAxMS4yNzQgfSxcblx0J3NjcmlwdHMuc2ZvcnphdG8nOiB7IGQ6IFtbJ00nLCAtNi40NSwgLTMuNjldLCBbJ2MnLCAwLjA2LCAtMC4wMywgMC4xNSwgLTAuMDYsIDAuMTgsIC0wLjA2XSwgWydjJywgMC4wNiwgMC4wMCwgMi44NSwgMC43MiwgNi4yNCwgMS41OV0sIFsnbCcsIDYuMzMsIDEuNjVdLCBbJ2MnLCAwLjMzLCAwLjA2LCAwLjQ1LCAwLjIxLCAwLjQ1LCAwLjUxXSwgWydjJywgMC4wMCwgMC4zMCwgLTAuMTIsIDAuNDUsIC0wLjQ1LCAwLjUxXSwgWydsJywgLTYuMzMsIDEuNjVdLCBbJ2MnLCAtMy4zOSwgMC44NywgLTYuMTgsIDEuNTksIC02LjIxLCAxLjU5XSwgWydjJywgLTAuMjEsIDAuMDAsIC0wLjQ4LCAtMC4yNCwgLTAuNTEsIC0wLjQ1XSwgWydjJywgMC4wMCwgLTAuMTUsIDAuMDYsIC0wLjM2LCAwLjE4LCAtMC40NV0sIFsnYycsIDAuMDksIC0wLjA2LCAwLjg3LCAtMC4yNywgMy44NCwgLTEuMDVdLCBbJ2MnLCAyLjA0LCAtMC41NCwgMy44NCwgLTAuOTksIDQuMDIsIC0xLjAyXSwgWydjJywgMC4xNSwgLTAuMDYsIDEuMTQsIC0wLjI0LCAyLjIyLCAtMC40Ml0sIFsnYycsIDEuMDUsIC0wLjE4LCAxLjkyLCAtMC4zNiwgMS45MiwgLTAuMzZdLCBbJ2MnLCAwLjAwLCAwLjAwLCAtMC44NywgLTAuMTgsIC0xLjkyLCAtMC4zNl0sIFsnYycsIC0xLjA4LCAtMC4xOCwgLTIuMDcsIC0wLjM2LCAtMi4yMiwgLTAuNDJdLCBbJ2MnLCAtMC4xOCwgLTAuMDMsIC0xLjk4LCAtMC40OCwgLTQuMDIsIC0xLjAyXSwgWydjJywgLTIuOTcsIC0wLjc4LCAtMy43NSwgLTAuOTksIC0zLjg0LCAtMS4wNV0sIFsnYycsIC0wLjEyLCAtMC4wOSwgLTAuMTgsIC0wLjMwLCAtMC4xOCwgLTAuNDVdLCBbJ2MnLCAwLjAzLCAtMC4xNSwgMC4xNSwgLTAuMzAsIDAuMzAsIC0wLjM5XSwgWyd6J11dLCB3OiAxMy41LCBoOiA3LjUgfSxcblx0J3NjcmlwdHMuc3RhY2NhdG8nOiB7IGQ6IFtbJ00nLCAtMC4zNiwgLTEuNDddLCBbJ2MnLCAwLjkzLCAtMC4yMSwgMS44NiwgMC41MSwgMS44NiwgMS40N10sIFsnYycsIDAuMDAsIDAuOTMsIC0wLjg3LCAxLjY1LCAtMS44MCwgMS40N10sIFsnYycsIC0wLjU0LCAtMC4xMiwgLTEuMDIsIC0wLjU3LCAtMS4xNCwgLTEuMDhdLCBbJ2MnLCAtMC4yMSwgLTAuODEsIDAuMjcsIC0xLjY1LCAxLjA4LCAtMS44Nl0sIFsneiddXSwgdzogMi45ODksIGg6IDMuMDA0IH0sXG5cdCdzY3JpcHRzLnRlbnV0byc6IHsgZDogW1snTScsIC00LjIwLCAtMC40OF0sIFsnbCcsIDAuMTIsIC0wLjA2XSwgWydsJywgNC4wOCwgMC4wMF0sIFsnbCcsIDQuMDgsIDAuMDBdLCBbJ2wnLCAwLjEyLCAwLjA2XSwgWydjJywgMC4zOSwgMC4yMSwgMC4zOSwgMC43NSwgMC4wMCwgMC45Nl0sIFsnbCcsIC0wLjEyLCAwLjA2XSwgWydsJywgLTQuMDgsIDAuMDBdLCBbJ2wnLCAtNC4wOCwgMC4wMF0sIFsnbCcsIC0wLjEyLCAtMC4wNl0sIFsnYycsIC0wLjM5LCAtMC4yMSwgLTAuMzksIC0wLjc1LCAwLjAwLCAtMC45Nl0sIFsneiddXSwgdzogOC45ODUsIGg6IDEuMDggfSxcblx0J3NjcmlwdHMudW1hcmNhdG8nOiB7IGQ6IFtbJ00nLCAtMC4xNSwgLTguMTldLCBbJ2MnLCAwLjE1LCAtMC4xMiwgMC4zNiwgLTAuMDMsIDAuNDUsIDAuMTVdLCBbJ2MnLCAwLjIxLCAwLjQyLCAzLjQ1LCA3LjY1LCAzLjQ1LCA3LjcxXSwgWydjJywgMC4wMCwgMC4xMiwgLTAuMTIsIDAuMjcsIC0wLjIxLCAwLjMwXSwgWydjJywgLTAuMDMsIDAuMDMsIC0wLjUxLCAwLjAzLCAtMS4xNCwgMC4wM10sIFsnYycsIC0xLjA1LCAwLjAwLCAtMS4wOCwgMC4wMCwgLTEuMTcsIC0wLjA2XSwgWydjJywgLTAuMDksIC0wLjA2LCAtMC4yNCwgLTAuMzYsIC0xLjE3LCAtMi40MF0sIFsnYycsIC0wLjU3LCAtMS4yOSwgLTEuMDUsIC0yLjM0LCAtMS4wOCwgLTIuMzRdLCBbJ2MnLCAwLjAwLCAtMC4wMywgLTAuNTEsIDEuMDIsIC0xLjA4LCAyLjM0XSwgWydjJywgLTAuOTMsIDIuMDcsIC0xLjA4LCAyLjM0LCAtMS4xNCwgMi40MF0sIFsnYycsIC0wLjA2LCAwLjAzLCAtMC4xNSwgMC4wNiwgLTAuMTgsIDAuMDZdLCBbJ2MnLCAtMC4xNSwgMC4wMCwgLTAuMzMsIC0wLjE4LCAtMC4zMywgLTAuMzNdLCBbJ2MnLCAwLjAwLCAtMC4wNiwgMy4yNCwgLTcuMzIsIDMuNDUsIC03LjcxXSwgWydjJywgMC4wMywgLTAuMDYsIDAuMDksIC0wLjE1LCAwLjE1LCAtMC4xNV0sIFsneiddXSwgdzogNy41LCBoOiA4LjI0NSB9LFxuXHQnc2NyaXB0cy5kbWFyY2F0byc6IHsgZDogW1snTScsIC0zLjU3LCAwLjAzXSwgWydjJywgMC4wMywgMC4wMCwgMC41NywgLTAuMDMsIDEuMTcsIC0wLjAzXSwgWydjJywgMS4wNSwgMC4wMCwgMS4wOCwgMC4wMCwgMS4xNywgMC4wNl0sIFsnYycsIDAuMDksIDAuMDYsIDAuMjQsIDAuMzYsIDEuMTcsIDIuNDBdLCBbJ2MnLCAwLjU3LCAxLjI5LCAxLjA1LCAyLjM0LCAxLjA4LCAyLjM0XSwgWydjJywgMC4wMCwgMC4wMywgMC41MSwgLTEuMDIsIDEuMDgsIC0yLjM0XSwgWydjJywgMC45MywgLTIuMDcsIDEuMDgsIC0yLjM0LCAxLjE0LCAtMi40MF0sIFsnYycsIDAuMDYsIC0wLjAzLCAwLjE1LCAtMC4wNiwgMC4xOCwgLTAuMDZdLCBbJ2MnLCAwLjE1LCAwLjAwLCAwLjMzLCAwLjE4LCAwLjMzLCAwLjMzXSwgWydjJywgMC4wMCwgMC4wOSwgLTMuNDUsIDcuNzQsIC0zLjU0LCA3LjgzXSwgWydjJywgLTAuMTIsIDAuMTIsIC0wLjMwLCAwLjEyLCAtMC40MiwgMC4wMF0sIFsnYycsIC0wLjA5LCAtMC4wOSwgLTMuNTQsIC03Ljc0LCAtMy41NCwgLTcuODNdLCBbJ2MnLCAwLjAwLCAtMC4wOSwgMC4xMiwgLTAuMjcsIDAuMTgsIC0wLjMwXSwgWyd6J11dLCB3OiA3LjUsIGg6IDguMjUgfSxcblx0J3NjcmlwdHMuc3RvcHBlZCc6IHsgZDogW1snTScsIC0wLjI3LCAtNC4wOF0sIFsnYycsIDAuMTgsIC0wLjA5LCAwLjM2LCAtMC4wOSwgMC41NCwgMC4wMF0sIFsnYycsIDAuMTgsIDAuMDksIDAuMjQsIDAuMTUsIDAuMzMsIDAuMzBdLCBbJ2wnLCAwLjA2LCAwLjE1XSwgWydsJywgMC4wMCwgMS41MF0sIFsnbCcsIDAuMDAsIDEuNDddLCBbJ2wnLCAxLjQ3LCAwLjAwXSwgWydsJywgMS41MCwgMC4wMF0sIFsnbCcsIDAuMTUsIDAuMDZdLCBbJ2MnLCAwLjE1LCAwLjA5LCAwLjIxLCAwLjE1LCAwLjMwLCAwLjMzXSwgWydjJywgMC4wOSwgMC4xOCwgMC4wOSwgMC4zNiwgMC4wMCwgMC41NF0sIFsnYycsIC0wLjA5LCAwLjE4LCAtMC4xNSwgMC4yNCwgLTAuMzMsIDAuMzNdLCBbJ2MnLCAtMC4xMiwgMC4wNiwgLTAuMTgsIDAuMDYsIC0xLjYyLCAwLjA2XSwgWydsJywgLTEuNDcsIDAuMDBdLCBbJ2wnLCAwLjAwLCAxLjQ3XSwgWydsJywgMC4wMCwgMS40N10sIFsnbCcsIC0wLjA2LCAwLjE1XSwgWydjJywgLTAuMDksIDAuMTgsIC0wLjE1LCAwLjI0LCAtMC4zMywgMC4zM10sIFsnYycsIC0wLjE4LCAwLjA5LCAtMC4zNiwgMC4wOSwgLTAuNTQsIDAuMDBdLCBbJ2MnLCAtMC4xOCwgLTAuMDksIC0wLjI0LCAtMC4xNSwgLTAuMzMsIC0wLjMzXSwgWydsJywgLTAuMDYsIC0wLjE1XSwgWydsJywgMC4wMCwgLTEuNDddLCBbJ2wnLCAwLjAwLCAtMS40N10sIFsnbCcsIC0xLjQ3LCAwLjAwXSwgWydjJywgLTEuNDQsIDAuMDAsIC0xLjUwLCAwLjAwLCAtMS42MiwgLTAuMDZdLCBbJ2MnLCAtMC4xOCwgLTAuMDksIC0wLjI0LCAtMC4xNSwgLTAuMzMsIC0wLjMzXSwgWydjJywgLTAuMDksIC0wLjE4LCAtMC4wOSwgLTAuMzYsIDAuMDAsIC0wLjU0XSwgWydjJywgMC4wOSwgLTAuMTgsIDAuMTUsIC0wLjI0LCAwLjMzLCAtMC4zM10sIFsnbCcsIDAuMTUsIC0wLjA2XSwgWydsJywgMS40NywgMC4wMF0sIFsnbCcsIDEuNDcsIDAuMDBdLCBbJ2wnLCAwLjAwLCAtMS40N10sIFsnYycsIDAuMDAsIC0xLjQ0LCAwLjAwLCAtMS41MCwgMC4wNiwgLTEuNjJdLCBbJ2MnLCAwLjA5LCAtMC4xOCwgMC4xNSwgLTAuMjQsIDAuMzMsIC0wLjMzXSwgWyd6J11dLCB3OiA4LjI5NSwgaDogOC4yOTUgfSxcblx0J3NjcmlwdHMudXBib3cnOiB7IGQ6IFtbJ00nLCAtNC42NSwgLTE1LjU0XSwgWydjJywgMC4xMiwgLTAuMDksIDAuMzYsIC0wLjA2LCAwLjQ4LCAwLjAzXSwgWydjJywgMC4wMywgMC4wMywgMC4wOSwgMC4wOSwgMC4xMiwgMC4xNV0sIFsnYycsIDAuMDMsIDAuMDYsIDAuNjYsIDIuMTMsIDEuNDEsIDQuNjJdLCBbJ2MnLCAxLjM1LCA0LjQxLCAxLjM4LCA0LjU2LCAyLjAxLCA2Ljk2XSwgWydsJywgMC42MywgMi40Nl0sIFsnbCcsIDAuNjMsIC0yLjQ2XSwgWydjJywgMC42MywgLTIuNDAsIDAuNjYsIC0yLjU1LCAyLjAxLCAtNi45Nl0sIFsnYycsIDAuNzUsIC0yLjQ5LCAxLjM4LCAtNC41NiwgMS40MSwgLTQuNjJdLCBbJ2MnLCAwLjA2LCAtMC4xNSwgMC4xOCwgLTAuMjEsIDAuMzYsIC0wLjI0XSwgWydjJywgMC4xNSwgMC4wMCwgMC4zMCwgMC4wNiwgMC4zOSwgMC4xOF0sIFsnYycsIDAuMTUsIDAuMjEsIDAuMjQsIC0wLjE4LCAtMi4xMCwgNy41Nl0sIFsnYycsIC0xLjIwLCAzLjk2LCAtMi4yMiwgNy4zMiwgLTIuMjUsIDcuNDFdLCBbJ2MnLCAwLjAwLCAwLjEyLCAtMC4wNiwgMC4yNywgLTAuMDksIDAuMzBdLCBbJ2MnLCAtMC4xMiwgMC4yMSwgLTAuNjAsIDAuMjEsIC0wLjcyLCAwLjAwXSwgWydjJywgLTAuMDMsIC0wLjAzLCAtMC4wOSwgLTAuMTgsIC0wLjA5LCAtMC4zMF0sIFsnYycsIC0wLjAzLCAtMC4wOSwgLTEuMDUsIC0zLjQ1LCAtMi4yNSwgLTcuNDFdLCBbJ2MnLCAtMi4zNCwgLTcuNzQsIC0yLjI1LCAtNy4zNSwgLTIuMTAsIC03LjU2XSwgWydjJywgMC4wMywgLTAuMDMsIDAuMDksIC0wLjA5LCAwLjE1LCAtMC4xMl0sIFsneiddXSwgdzogOS43MywgaDogMTUuNjA4IH0sXG5cdCdzY3JpcHRzLmRvd25ib3cnOiB7IGQ6IFtbJ00nLCAtNS41NSwgLTkuOTNdLCBbJ2wnLCAwLjA5LCAtMC4wNl0sIFsnbCcsIDUuNDYsIDAuMDBdLCBbJ2wnLCA1LjQ2LCAwLjAwXSwgWydsJywgMC4wOSwgMC4wNl0sIFsnbCcsIDAuMDYsIDAuMDldLCBbJ2wnLCAwLjAwLCA0Ljc3XSwgWydjJywgMC4wMCwgNS4yOCwgMC4wMCwgNC44OSwgLTAuMTgsIDUuMDFdLCBbJ2MnLCAtMC4xOCwgMC4xMiwgLTAuNDIsIDAuMDYsIC0wLjU0LCAtMC4xMl0sIFsnYycsIC0wLjA2LCAtMC4wOSwgLTAuMDYsIC0wLjE4LCAtMC4wNiwgLTIuOTddLCBbJ2wnLCAwLjAwLCAtMi44NV0sIFsnbCcsIC00LjgzLCAwLjAwXSwgWydsJywgLTQuODMsIDAuMDBdLCBbJ2wnLCAwLjAwLCAyLjg1XSwgWydjJywgMC4wMCwgMi43OSwgMC4wMCwgMi44OCwgLTAuMDYsIDIuOTddLCBbJ2MnLCAtMC4xNSwgMC4yNCwgLTAuNTEsIDAuMjQsIC0wLjY2LCAwLjAwXSwgWydjJywgLTAuMDYsIC0wLjA5LCAtMC4wNiwgLTAuMjEsIC0wLjA2LCAtNC44OV0sIFsnbCcsIDAuMDAsIC00Ljc3XSwgWyd6J11dLCB3OiAxMS4yMiwgaDogOS45OTIgfSxcblx0J3NjcmlwdHMudHVybic6IHsgZDogW1snTScsIC00Ljc3LCAtMy45MF0sIFsnYycsIDAuMzYsIC0wLjA2LCAxLjA1LCAtMC4wNiwgMS40NCwgMC4wM10sIFsnYycsIDAuNzgsIDAuMTUsIDEuNTAsIDAuNTEsIDIuMzQsIDEuMTRdLCBbJ2MnLCAwLjYwLCAwLjQ1LCAxLjA1LCAwLjg3LCAyLjIyLCAyLjAxXSwgWydjJywgMS4xMSwgMS4wOCwgMS42MiwgMS41MCwgMi4yMiwgMS44Nl0sIFsnYycsIDAuNjAsIDAuMzYsIDEuMzIsIDAuNTcsIDEuOTIsIDAuNTddLCBbJ2MnLCAwLjkwLCAwLjAwLCAxLjcxLCAtMC41NywgMS44OSwgLTEuMzVdLCBbJ2MnLCAwLjI0LCAtMC45MywgLTAuMzksIC0xLjg5LCAtMS4zNSwgLTIuMTBdLCBbJ2wnLCAtMC4xNSwgLTAuMDZdLCBbJ2wnLCAtMC4wOSwgMC4xNV0sIFsnYycsIC0wLjAzLCAwLjA5LCAtMC4xNSwgMC4yNCwgLTAuMjQsIDAuMzNdLCBbJ2MnLCAtMC43MiwgMC43MiwgLTIuMDQsIDAuNTQsIC0yLjQ5LCAtMC4zNl0sIFsnYycsIC0wLjQ4LCAtMC45MywgMC4wMywgLTEuODYsIDEuMTcsIC0yLjE5XSwgWydjJywgMC4zMCwgLTAuMDksIDEuMDIsIC0wLjA5LCAxLjM1LCAwLjAwXSwgWydjJywgMC45OSwgMC4yNywgMS43NCwgMC44NywgMi4yNSwgMS44M10sIFsnYycsIDAuNjksIDEuNDEsIDAuNjMsIDMuMDAsIC0wLjIxLCA0LjI2XSwgWydjJywgLTAuMjEsIDAuMzAsIC0wLjY5LCAwLjgxLCAtMC45OSwgMS4wMl0sIFsnYycsIC0wLjMwLCAwLjIxLCAtMC44NCwgMC40NSwgLTEuMTcsIDAuNTRdLCBbJ2MnLCAtMS4yMywgMC4zNiwgLTIuNDksIDAuMTUsIC0zLjcyLCAtMC42MF0sIFsnYycsIC0wLjc1LCAtMC40OCwgLTEuNDEsIC0xLjAyLCAtMi44NSwgLTIuNDZdLCBbJ2MnLCAtMS4xMSwgLTEuMDgsIC0xLjYyLCAtMS41MCwgLTIuMjIsIC0xLjg2XSwgWydjJywgLTAuNjAsIC0wLjM2LCAtMS4zMiwgLTAuNTcsIC0xLjkyLCAtMC41N10sIFsnYycsIC0wLjkwLCAwLjAwLCAtMS43MSwgMC41NywgLTEuODksIDEuMzVdLCBbJ2MnLCAtMC4yNCwgMC45MywgMC4zOSwgMS44OSwgMS4zNSwgMi4xMF0sIFsnbCcsIDAuMTUsIDAuMDZdLCBbJ2wnLCAwLjA5LCAtMC4xNV0sIFsnYycsIDAuMDMsIC0wLjA5LCAwLjE1LCAtMC4yNCwgMC4yNCwgLTAuMzNdLCBbJ2MnLCAwLjcyLCAtMC43MiwgMi4wNCwgLTAuNTQsIDIuNDksIDAuMzZdLCBbJ2MnLCAwLjQ4LCAwLjkzLCAtMC4wMywgMS44NiwgLTEuMTcsIDIuMTldLCBbJ2MnLCAtMC4zMCwgMC4wOSwgLTEuMDIsIDAuMDksIC0xLjM1LCAwLjAwXSwgWydjJywgLTAuOTksIC0wLjI3LCAtMS43NCwgLTAuODcsIC0yLjI1LCAtMS44M10sIFsnYycsIC0wLjY5LCAtMS40MSwgLTAuNjMsIC0zLjAwLCAwLjIxLCAtNC4yNl0sIFsnYycsIDAuMjEsIC0wLjMwLCAwLjY5LCAtMC44MSwgMC45OSwgLTEuMDJdLCBbJ2MnLCAwLjQ4LCAtMC4zMywgMS4xMSwgLTAuNTcsIDEuNzQsIC0wLjY2XSwgWyd6J11dLCB3OiAxNi4zNjYsIGg6IDcuODkzIH0sXG5cdCdzY3JpcHRzLnRyaWxsJzogeyBkOiBbWydNJywgLTAuNTEsIC0xNi4wMl0sIFsnYycsIDAuMTIsIC0wLjA5LCAwLjIxLCAtMC4xOCwgMC4yMSwgLTAuMThdLCBbJ2wnLCAtMC44MSwgNC4wMl0sIFsnbCcsIC0wLjgxLCA0LjAyXSwgWydjJywgMC4wMywgMC4wMCwgMC41MSwgLTAuMjcsIDEuMDgsIC0wLjYwXSwgWydjJywgMC42MCwgLTAuMzAsIDEuMTQsIC0wLjYzLCAxLjI2LCAtMC42Nl0sIFsnYycsIDEuMTQsIC0wLjU0LCAyLjMxLCAtMC42MCwgMy4wOSwgLTAuMThdLCBbJ2MnLCAwLjI3LCAwLjE1LCAwLjU0LCAwLjM2LCAwLjYwLCAwLjUxXSwgWydsJywgMC4wNiwgMC4xMl0sIFsnbCcsIDAuMjEsIC0wLjIxXSwgWydjJywgMC45MCwgLTAuODEsIDIuMjIsIC0wLjk5LCAzLjEyLCAtMC40Ml0sIFsnYycsIDAuNjAsIDAuNDIsIDAuOTAsIDEuMTQsIDAuNzgsIDIuMDddLCBbJ2MnLCAtMC4xNSwgMS4yOSwgLTEuMDUsIDIuMzEsIC0xLjk1LCAyLjI1XSwgWydjJywgLTAuNDgsIC0wLjAzLCAtMC43OCwgLTAuMzAsIC0wLjk2LCAtMC44MV0sIFsnYycsIC0wLjA5LCAtMC4yNywgLTAuMDksIC0wLjkwLCAtMC4wMywgLTEuMjBdLCBbJ2MnLCAwLjIxLCAtMC43NSwgMC44MSwgLTEuMjMsIDEuNTksIC0xLjMyXSwgWydsJywgMC4yNCwgLTAuMDNdLCBbJ2wnLCAtMC4wOSwgLTAuMTJdLCBbJ2MnLCAtMC41MSwgLTAuNjYsIC0xLjYyLCAtMC42MywgLTIuMzEsIDAuMDNdLCBbJ2MnLCAtMC4zOSwgMC40MiwgLTAuMzAsIDAuMDksIC0xLjIzLCA0Ljc3XSwgWydsJywgLTAuODEsIDQuMTRdLCBbJ2MnLCAtMC4wMywgMC4wMCwgLTAuMTIsIC0wLjAzLCAtMC4yMSwgLTAuMDldLCBbJ2MnLCAtMC4zMywgLTAuMTUsIC0wLjU0LCAtMC4xOCwgLTAuOTksIC0wLjE4XSwgWydjJywgLTAuNDIsIDAuMDAsIC0wLjY2LCAwLjAzLCAtMS4wNSwgMC4xOF0sIFsnYycsIC0wLjEyLCAwLjA2LCAtMC4yMSwgMC4wOSwgLTAuMjEsIDAuMDldLCBbJ2MnLCAwLjAwLCAtMC4wMywgMC4zNiwgLTEuODYsIDAuODEsIC00LjExXSwgWydjJywgMC45MCwgLTQuNDcsIDAuODcsIC00LjI2LCAwLjY5LCAtNC41M10sIFsnYycsIC0wLjIxLCAtMC4zNiwgLTAuNjYsIC0wLjUxLCAtMS4xNywgLTAuMzZdLCBbJ2MnLCAtMC4xNSwgMC4wNiwgLTIuMjIsIDEuMTQsIC0yLjU4LCAxLjM4XSwgWydjJywgLTAuMTIsIDAuMDksIC0wLjEyLCAwLjA5LCAtMC4yMSwgMC42MF0sIFsnbCcsIC0wLjA5LCAwLjUxXSwgWydsJywgMC4yMSwgMC4yNF0sIFsnYycsIDAuNjMsIDAuNzUsIDEuMDIsIDEuNDcsIDEuMjAsIDIuMTldLCBbJ2MnLCAwLjA2LCAwLjI3LCAwLjA2LCAwLjM2LCAwLjA2LCAwLjgxXSwgWydjJywgMC4wMCwgMC40MiwgMC4wMCwgMC41NCwgLTAuMDYsIDAuNzhdLCBbJ2MnLCAtMC4xNSwgMC41NCwgLTAuMzMsIDAuOTMsIC0wLjYzLCAxLjM1XSwgWydjJywgLTAuMTgsIDAuMjQsIC0wLjU3LCAwLjYzLCAtMC44MSwgMC43OF0sIFsnYycsIC0wLjI0LCAwLjE1LCAtMC42MywgMC4zNiwgLTAuODQsIDAuNDJdLCBbJ2MnLCAtMC4yNywgMC4wNiwgLTAuNjYsIDAuMDYsIC0wLjg3LCAwLjAzXSwgWydjJywgLTAuODEsIC0wLjE4LCAtMS4zMiwgLTEuMDUsIC0xLjM4LCAtMi40Nl0sIFsnYycsIC0wLjAzLCAtMC42MCwgMC4wMywgLTAuOTksIDAuMzMsIC0yLjQ2XSwgWydjJywgMC4yMSwgLTEuMDgsIDAuMjQsIC0xLjMyLCAwLjIxLCAtMS4yOV0sIFsnYycsIC0xLjIwLCAwLjQ4LCAtMi40MCwgMC43NSwgLTMuMjEsIDAuNzJdLCBbJ2MnLCAtMC42OSwgLTAuMDYsIC0xLjE3LCAtMC4zMCwgLTEuNDEsIC0wLjcyXSwgWydjJywgLTAuMzksIC0wLjc1LCAtMC4xMiwgLTEuODAsIDAuNjYsIC0yLjQ2XSwgWydjJywgMC4yNCwgLTAuMTgsIDAuNjksIC0wLjQyLCAxLjAyLCAtMC41MV0sIFsnYycsIDAuNjksIC0wLjE4LCAxLjUzLCAtMC4xNSwgMi4zMSwgMC4wOV0sIFsnYycsIDAuMzAsIDAuMDksIDAuNzUsIDAuMzAsIDAuOTksIDAuNDVdLCBbJ2MnLCAwLjEyLCAwLjA5LCAwLjE1LCAwLjA5LCAwLjE1LCAwLjAzXSwgWydjJywgMC4wMywgLTAuMDMsIDAuMzMsIC0xLjU5LCAwLjcyLCAtMy40NV0sIFsnYycsIDAuMzYsIC0xLjg2LCAwLjY2LCAtMy40MiwgMC42OSwgLTMuNDVdLCBbJ2MnLCAwLjAwLCAtMC4wMywgMC4wMywgLTAuMDMsIDAuMjEsIDAuMDNdLCBbJ2MnLCAwLjIxLCAwLjA2LCAwLjI3LCAwLjA2LCAwLjQ4LCAwLjA2XSwgWydjJywgMC40MiwgLTAuMDMsIDAuNzgsIC0wLjE4LCAxLjI2LCAtMC40OF0sIFsnYycsIDAuMTUsIC0wLjEyLCAwLjM2LCAtMC4yNywgMC40OCwgLTAuMzldLCBbJ3onXSwgWydtJywgLTUuNzMsIDcuNjhdLCBbJ2MnLCAtMC4yNywgLTAuMDMsIC0wLjk2LCAtMC4wNiwgLTEuMjAsIC0wLjAzXSwgWydjJywgLTAuODEsIDAuMTIsIC0xLjM1LCAwLjU3LCAtMS41MCwgMS4yMF0sIFsnYycsIC0wLjE4LCAwLjY2LCAwLjEyLCAxLjE0LCAwLjc1LCAxLjI5XSwgWydjJywgMC42NiwgMC4xMiwgMS45MiwgLTAuMTIsIDMuMTgsIC0wLjY2XSwgWydsJywgMC4zMywgLTAuMTVdLCBbJ2wnLCAwLjA5LCAtMC4zOV0sIFsnYycsIDAuMDYsIC0wLjIxLCAwLjA5LCAtMC40MiwgMC4wOSwgLTAuNDVdLCBbJ2MnLCAwLjAwLCAtMC4wMywgLTAuNDUsIC0wLjMwLCAtMC43NSwgLTAuNDVdLCBbJ2MnLCAtMC4yNywgLTAuMTUsIC0wLjY2LCAtMC4yNywgLTAuOTksIC0wLjM2XSwgWyd6J10sIFsnbScsIDQuMjksIDMuNjNdLCBbJ2MnLCAtMC4yNCwgLTAuMzksIC0wLjUxLCAtMC43NSwgLTAuNTEsIC0wLjY5XSwgWydjJywgLTAuMDYsIDAuMTIsIC0wLjM5LCAxLjkyLCAtMC40NSwgMi4yOF0sIFsnYycsIC0wLjA5LCAwLjU0LCAtMC4xMiwgMS4xNCwgLTAuMDYsIDEuMzhdLCBbJ2MnLCAwLjA2LCAwLjQyLCAwLjIxLCAwLjYwLCAwLjUxLCAwLjU3XSwgWydjJywgMC4zOSwgLTAuMDYsIDAuNzUsIC0wLjQ4LCAwLjkzLCAtMS4xNF0sIFsnYycsIDAuMDksIC0wLjMzLCAwLjA5LCAtMS4wNSwgMC4wMCwgLTEuMzhdLCBbJ2MnLCAtMC4wOSwgLTAuMzksIC0wLjI0LCAtMC42OSwgLTAuNDIsIC0xLjAyXSwgWyd6J11dLCB3OiAxNy45NjMsIGg6IDE2LjQ5IH0sXG5cdCdzY3JpcHRzLnNlZ25vJzogeyBkOiBbWydNJywgLTMuNzIsIC0xMS4yMl0sIFsnYycsIDAuNzgsIC0wLjA5LCAxLjU5LCAwLjAzLCAyLjMxLCAwLjQyXSwgWydjJywgMS4yMCwgMC42MCwgMi4wMSwgMS43MSwgMi4zMSwgMy4wOV0sIFsnYycsIDAuMDksIDAuNDIsIDAuMDksIDEuMjAsIDAuMDMsIDEuNTBdLCBbJ2MnLCAtMC4xNSwgMC40NSwgLTAuMzksIDAuODEsIC0wLjY2LCAwLjkzXSwgWydjJywgLTAuMzMsIDAuMTgsIC0wLjg0LCAwLjIxLCAtMS4yMywgMC4xNV0sIFsnYycsIC0wLjgxLCAtMC4xOCwgLTEuMzIsIC0wLjkzLCAtMS4yNiwgLTEuODldLCBbJ2MnLCAwLjAzLCAtMC4zNiwgMC4wOSwgLTAuNTcsIDAuMjQsIC0wLjkwXSwgWydjJywgMC4xNSwgLTAuMzMsIDAuNDUsIC0wLjYwLCAwLjcyLCAtMC43NV0sIFsnYycsIDAuMTIsIC0wLjA2LCAwLjE4LCAtMC4wOSwgMC4xOCwgLTAuMTJdLCBbJ2MnLCAwLjAwLCAtMC4wMywgLTAuMDMsIC0wLjE1LCAtMC4wOSwgLTAuMjRdLCBbJ2MnLCAtMC4xOCwgLTAuNDUsIC0wLjU0LCAtMC44NywgLTAuOTYsIC0xLjA4XSwgWydjJywgLTEuMTEsIC0wLjU3LCAtMi4zNCwgLTAuMTgsIC0yLjg4LCAwLjkwXSwgWydjJywgLTAuMjQsIDAuNTEsIC0wLjMzLCAxLjExLCAtMC4yNCwgMS44M10sIFsnYycsIDAuMjcsIDEuOTIsIDEuNTAsIDMuNTQsIDMuOTMsIDUuMTNdLCBbJ2MnLCAwLjQ4LCAwLjMzLCAxLjI2LCAwLjc4LCAxLjI5LCAwLjc4XSwgWydjJywgMC4wMywgMC4wMCwgMS4zNSwgLTIuMTksIDIuOTQsIC00Ljg5XSwgWydsJywgMi44OCwgLTQuODldLCBbJ2wnLCAwLjg0LCAwLjAwXSwgWydsJywgMC44NywgMC4wMF0sIFsnbCcsIC0wLjAzLCAwLjA2XSwgWydjJywgLTAuMTUsIDAuMjEsIC02LjE1LCAxMC40MSwgLTYuMTUsIDEwLjQ0XSwgWydjJywgMC4wMCwgMC4wMCwgMC4yMSwgMC4xNSwgMC40OCwgMC4yN10sIFsnYycsIDIuNjEsIDEuNDcsIDQuMzUsIDMuMDMsIDUuMTMsIDQuNjVdLCBbJ2MnLCAxLjE0LCAyLjM0LCAwLjUxLCA1LjA3LCAtMS40NCwgNi4zOV0sIFsnYycsIC0wLjY2LCAwLjQyLCAtMS4zMiwgMC42MywgLTIuMTMsIDAuNjldLCBbJ2MnLCAtMi4wMSwgMC4wOSwgLTMuODEsIC0xLjQxLCAtNC4yNiwgLTMuNTRdLCBbJ2MnLCAtMC4wOSwgLTAuNDIsIC0wLjA5LCAtMS4yMCwgLTAuMDMsIC0xLjUwXSwgWydjJywgMC4xNSwgLTAuNDUsIDAuMzksIC0wLjgxLCAwLjY2LCAtMC45M10sIFsnYycsIDAuMzMsIC0wLjE4LCAwLjg0LCAtMC4yMSwgMS4yMywgLTAuMTVdLCBbJ2MnLCAwLjgxLCAwLjE4LCAxLjMyLCAwLjkzLCAxLjI2LCAxLjg5XSwgWydjJywgLTAuMDMsIDAuMzYsIC0wLjA5LCAwLjU3LCAtMC4yNCwgMC45MF0sIFsnYycsIC0wLjE1LCAwLjMzLCAtMC40NSwgMC42MCwgLTAuNzIsIDAuNzVdLCBbJ2MnLCAtMC4xMiwgMC4wNiwgLTAuMTgsIDAuMDksIC0wLjE4LCAwLjEyXSwgWydjJywgMC4wMCwgMC4wMywgMC4wMywgMC4xNSwgMC4wOSwgMC4yNF0sIFsnYycsIDAuMTgsIDAuNDUsIDAuNTQsIDAuODcsIDAuOTYsIDEuMDhdLCBbJ2MnLCAxLjExLCAwLjU3LCAyLjM0LCAwLjE4LCAyLjg4LCAtMC45MF0sIFsnYycsIDAuMjQsIC0wLjUxLCAwLjMzLCAtMS4xMSwgMC4yNCwgLTEuODNdLCBbJ2MnLCAtMC4yNywgLTEuOTIsIC0xLjUwLCAtMy41NCwgLTMuOTMsIC01LjEzXSwgWydjJywgLTAuNDgsIC0wLjMzLCAtMS4yNiwgLTAuNzgsIC0xLjI5LCAtMC43OF0sIFsnYycsIC0wLjAzLCAwLjAwLCAtMS4zNSwgMi4xOSwgLTIuOTEsIDQuODldLCBbJ2wnLCAtMi44OCwgNC44OV0sIFsnbCcsIC0wLjg3LCAwLjAwXSwgWydsJywgLTAuODcsIDAuMDBdLCBbJ2wnLCAwLjAzLCAtMC4wNl0sIFsnYycsIDAuMTUsIC0wLjIxLCA2LjE1LCAtMTAuNDEsIDYuMTUsIC0xMC40NF0sIFsnYycsIDAuMDAsIDAuMDAsIC0wLjIxLCAtMC4xNSwgLTAuNDgsIC0wLjMwXSwgWydjJywgLTIuNjEsIC0xLjQ0LCAtNC4zNSwgLTMuMDAsIC01LjEzLCAtNC42Ml0sIFsnYycsIC0wLjkwLCAtMS44OSwgLTAuNzIsIC00LjAyLCAwLjQ4LCAtNS41Ml0sIFsnYycsIDAuNjksIC0wLjg0LCAxLjY4LCAtMS40MSwgMi43MywgLTEuNTNdLCBbJ3onXSwgWydtJywgOC43NiwgOS4wOV0sIFsnYycsIDAuMDMsIC0wLjAzLCAwLjE1LCAtMC4wMywgMC4yNywgLTAuMDNdLCBbJ2MnLCAwLjMzLCAwLjAzLCAwLjU3LCAwLjE4LCAwLjcyLCAwLjQ4XSwgWydjJywgMC4wOSwgMC4xOCwgMC4wOSwgMC41NywgMC4wMCwgMC43NV0sIFsnYycsIC0wLjA5LCAwLjE4LCAtMC4yMSwgMC4zMCwgLTAuMzYsIDAuMzldLCBbJ2MnLCAtMC4xNSwgMC4wNiwgLTAuMjEsIDAuMDYsIC0wLjM5LCAwLjA2XSwgWydjJywgLTAuMjEsIDAuMDAsIC0wLjI3LCAwLjAwLCAtMC4zOSwgLTAuMDZdLCBbJ2MnLCAtMC4zMCwgLTAuMTUsIC0wLjQ4LCAtMC40NSwgLTAuNDgsIC0wLjc1XSwgWydjJywgMC4wMCwgLTAuMzksIDAuMjQsIC0wLjcyLCAwLjYzLCAtMC44NF0sIFsneiddLCBbJ20nLCAtMTAuNTMsIDIuNjFdLCBbJ2MnLCAwLjAzLCAtMC4wMywgMC4xNSwgLTAuMDMsIDAuMjcsIC0wLjAzXSwgWydjJywgMC4zMywgMC4wMywgMC41NywgMC4xOCwgMC43MiwgMC40OF0sIFsnYycsIDAuMDksIDAuMTgsIDAuMDksIDAuNTcsIDAuMDAsIDAuNzVdLCBbJ2MnLCAtMC4wOSwgMC4xOCwgLTAuMjEsIDAuMzAsIC0wLjM2LCAwLjM5XSwgWydjJywgLTAuMTUsIDAuMDYsIC0wLjIxLCAwLjA2LCAtMC4zOSwgMC4wNl0sIFsnYycsIC0wLjIxLCAwLjAwLCAtMC4yNywgMC4wMCwgLTAuMzksIC0wLjA2XSwgWydjJywgLTAuMzAsIC0wLjE1LCAtMC40OCwgLTAuNDUsIC0wLjQ4LCAtMC43NV0sIFsnYycsIDAuMDAsIC0wLjM5LCAwLjI0LCAtMC43MiwgMC42MywgLTAuODRdLCBbJ3onXV0sIHc6IDE1LCBoOiAyMi41MDQgfSxcblx0J3NjcmlwdHMuY29kYSc6IHsgZDogW1snTScsIC0wLjIxLCAtMTAuNDddLCBbJ2MnLCAwLjE4LCAtMC4xMiwgMC40MiwgLTAuMDYsIDAuNTQsIDAuMTJdLCBbJ2MnLCAwLjA2LCAwLjA5LCAwLjA2LCAwLjE4LCAwLjA2LCAxLjUwXSwgWydsJywgMC4wMCwgMS4zOF0sIFsnbCcsIDAuMTgsIDAuMDBdLCBbJ2MnLCAwLjM5LCAwLjA2LCAwLjk2LCAwLjI0LCAxLjM4LCAwLjQ4XSwgWydjJywgMS42OCwgMC45MywgMi44MiwgMy4yNCwgMy4wMywgNi4xMl0sIFsnYycsIDAuMDMsIDAuMjQsIDAuMDMsIDAuNDUsIDAuMDMsIDAuNDVdLCBbJ2MnLCAwLjAwLCAwLjAzLCAwLjYwLCAwLjAzLCAxLjM1LCAwLjAzXSwgWydjJywgMS41MCwgMC4wMCwgMS40NywgMC4wMCwgMS41OSwgMC4xOF0sIFsnYycsIDAuMDksIDAuMTIsIDAuMDksIDAuMzAsIDAuMDAsIDAuNDJdLCBbJ2MnLCAtMC4xMiwgMC4xOCwgLTAuMDksIDAuMTgsIC0xLjU5LCAwLjE4XSwgWydjJywgLTAuNzUsIDAuMDAsIC0xLjM1LCAwLjAwLCAtMS4zNSwgMC4wM10sIFsnYycsIDAuMDAsIDAuMDAsIDAuMDAsIDAuMjEsIC0wLjAzLCAwLjQyXSwgWydjJywgLTAuMjQsIDMuMTUsIC0xLjUzLCA1LjU4LCAtMy40NSwgNi4zNl0sIFsnYycsIC0wLjI3LCAwLjEyLCAtMC43MiwgMC4yNCwgLTAuOTYsIDAuMjddLCBbJ2wnLCAtMC4xOCwgMC4wMF0sIFsnbCcsIDAuMDAsIDEuMzhdLCBbJ2MnLCAwLjAwLCAxLjMyLCAwLjAwLCAxLjQxLCAtMC4wNiwgMS41MF0sIFsnYycsIC0wLjE1LCAwLjI0LCAtMC41MSwgMC4yNCwgLTAuNjYsIDAuMDBdLCBbJ2MnLCAtMC4wNiwgLTAuMDksIC0wLjA2LCAtMC4xOCwgLTAuMDYsIC0xLjUwXSwgWydsJywgMC4wMCwgLTEuMzhdLCBbJ2wnLCAtMC4xOCwgMC4wMF0sIFsnYycsIC0wLjM5LCAtMC4wNiwgLTAuOTYsIC0wLjI0LCAtMS4zOCwgLTAuNDhdLCBbJ2MnLCAtMS42OCwgLTAuOTMsIC0yLjgyLCAtMy4yNCwgLTMuMDMsIC02LjE1XSwgWydjJywgLTAuMDMsIC0wLjIxLCAtMC4wMywgLTAuNDIsIC0wLjAzLCAtMC40Ml0sIFsnYycsIDAuMDAsIC0wLjAzLCAtMC42MCwgLTAuMDMsIC0xLjM1LCAtMC4wM10sIFsnYycsIC0xLjUwLCAwLjAwLCAtMS40NywgMC4wMCwgLTEuNTksIC0wLjE4XSwgWydjJywgLTAuMDksIC0wLjEyLCAtMC4wOSwgLTAuMzAsIDAuMDAsIC0wLjQyXSwgWydjJywgMC4xMiwgLTAuMTgsIDAuMDksIC0wLjE4LCAxLjU5LCAtMC4xOF0sIFsnYycsIDAuNzUsIDAuMDAsIDEuMzUsIDAuMDAsIDEuMzUsIC0wLjAzXSwgWydjJywgMC4wMCwgMC4wMCwgMC4wMCwgLTAuMjEsIDAuMDMsIC0wLjQ1XSwgWydjJywgMC4yNCwgLTMuMTIsIDEuNTMsIC01LjU1LCAzLjQ1LCAtNi4zM10sIFsnYycsIDAuMjcsIC0wLjEyLCAwLjcyLCAtMC4yNCwgMC45NiwgLTAuMjddLCBbJ2wnLCAwLjE4LCAwLjAwXSwgWydsJywgMC4wMCwgLTEuMzhdLCBbJ2MnLCAwLjAwLCAtMS41MywgMC4wMCwgLTEuNTAsIDAuMTgsIC0xLjYyXSwgWyd6J10sIFsnbScsIC0wLjE4LCA2LjkzXSwgWydjJywgMC4wMCwgLTIuOTcsIDAuMDAsIC0zLjE1LCAtMC4wNiwgLTMuMTVdLCBbJ2MnLCAtMC4wOSwgMC4wMCwgLTAuNTEsIDAuMTUsIC0wLjY2LCAwLjIxXSwgWydjJywgLTAuODcsIDAuNTEsIC0xLjM4LCAxLjYyLCAtMS41NiwgMy41MV0sIFsnYycsIC0wLjA2LCAwLjU0LCAtMC4xMiwgMS41OSwgLTAuMTIsIDIuMTZdLCBbJ2wnLCAwLjAwLCAwLjQyXSwgWydsJywgMS4yMCwgMC4wMF0sIFsnbCcsIDEuMjAsIDAuMDBdLCBbJ2wnLCAwLjAwLCAtMy4xNV0sIFsneiddLCBbJ20nLCAxLjE3LCAtMy4wNl0sIFsnYycsIC0wLjA5LCAtMC4wMywgLTAuMjEsIC0wLjA2LCAtMC4yNywgLTAuMDldLCBbJ2wnLCAtMC4xMiwgMC4wMF0sIFsnbCcsIDAuMDAsIDMuMTVdLCBbJ2wnLCAwLjAwLCAzLjE1XSwgWydsJywgMS4yMCwgMC4wMF0sIFsnbCcsIDEuMjAsIDAuMDBdLCBbJ2wnLCAwLjAwLCAtMC44MV0sIFsnYycsIC0wLjA2LCAtMi40MCwgLTAuMzMsIC0zLjY5LCAtMC45MywgLTQuNTldLCBbJ2MnLCAtMC4yNywgLTAuMzksIC0wLjY2LCAtMC42OSwgLTEuMDgsIC0wLjgxXSwgWyd6J10sIFsnbScsIC0xLjE3LCAxMC4xNF0sIFsnbCcsIDAuMDAsIC0zLjE1XSwgWydsJywgLTEuMjAsIDAuMDBdLCBbJ2wnLCAtMS4yMCwgMC4wMF0sIFsnbCcsIDAuMDAsIDAuODFdLCBbJ2MnLCAwLjAzLCAwLjk2LCAwLjA2LCAxLjQ3LCAwLjE1LCAyLjEzXSwgWydjJywgMC4yNCwgMi4wNCwgMC45NiwgMy4xMiwgMi4xMywgMy4zNl0sIFsnbCcsIDAuMTIsIDAuMDBdLCBbJ2wnLCAwLjAwLCAtMy4xNV0sIFsneiddLCBbJ20nLCAzLjE4LCAtMi4zNF0sIFsnbCcsIDAuMDAsIC0wLjgxXSwgWydsJywgLTEuMjAsIDAuMDBdLCBbJ2wnLCAtMS4yMCwgMC4wMF0sIFsnbCcsIDAuMDAsIDMuMTVdLCBbJ2wnLCAwLjAwLCAzLjE1XSwgWydsJywgMC4xMiwgMC4wMF0sIFsnYycsIDEuMTcsIC0wLjI0LCAxLjg5LCAtMS4zMiwgMi4xMywgLTMuMzZdLCBbJ2MnLCAwLjA5LCAtMC42NiwgMC4xMiwgLTEuMTcsIDAuMTUsIC0yLjEzXSwgWyd6J11dLCB3OiAxNi4wMzUsIGg6IDIxLjA2MiB9LFxuXHQnc2NyaXB0cy5jb21tYSc6IHsgZDogW1snTScsIDEuMTQsIC00LjYyXSwgWydjJywgMC4zMCwgLTAuMTIsIDAuNjksIC0wLjAzLCAwLjkzLCAwLjE1XSwgWydjJywgMC4xMiwgMC4xMiwgMC4zNiwgMC40NSwgMC41MSwgMC43OF0sIFsnYycsIDAuOTAsIDEuNzcsIDAuNTQsIDQuMDUsIC0xLjA4LCA2Ljc1XSwgWydjJywgLTAuMzYsIDAuNjMsIC0wLjg3LCAxLjM4LCAtMC45NiwgMS40NF0sIFsnYycsIC0wLjE4LCAwLjEyLCAtMC40MiwgMC4wNiwgLTAuNTQsIC0wLjEyXSwgWydjJywgLTAuMDksIC0wLjE4LCAtMC4wOSwgLTAuMzAsIDAuMTIsIC0wLjYwXSwgWydjJywgMC45NiwgLTEuNDQsIDEuNDQsIC0yLjk3LCAxLjM4LCAtNC4zNV0sIFsnYycsIC0wLjA2LCAtMC45MywgLTAuMzAsIC0xLjY4LCAtMC43OCwgLTIuNDZdLCBbJ2MnLCAtMC4yNywgLTAuMzksIC0wLjMzLCAtMC42MywgLTAuMjQsIC0wLjk2XSwgWydjJywgMC4wOSwgLTAuMjcsIDAuMzYsIC0wLjU0LCAwLjY2LCAtMC42M10sIFsneiddXSwgdzogMy4wNDIsIGg6IDkuMjM3IH0sXG5cdCdzY3JpcHRzLnJvbGwnOiB7IGQ6IFtbJ00nLCAxLjk1LCAtNi4wMF0sIFsnYycsIDAuMjEsIC0wLjA5LCAwLjM2LCAtMC4wOSwgMC41NywgMC4wMF0sIFsnYycsIDAuMzksIDAuMTUsIDAuNjMsIDAuMzksIDEuNDcsIDEuMzVdLCBbJ2MnLCAwLjY2LCAwLjc1LCAwLjc4LCAwLjg3LCAxLjA4LCAxLjA1XSwgWydjJywgMC43NSwgMC40NSwgMS42NSwgMC40MiwgMi40MCwgLTAuMDZdLCBbJ2MnLCAwLjEyLCAtMC4wOSwgMC4yNywgLTAuMjcsIDAuNTQsIC0wLjYwXSwgWydjJywgMC40MiwgLTAuNTQsIDAuNTEsIC0wLjYzLCAwLjY5LCAtMC42M10sIFsnYycsIDAuMDksIDAuMDAsIDAuMzAsIDAuMTIsIDAuMzYsIDAuMjFdLCBbJ2MnLCAwLjA5LCAwLjEyLCAwLjEyLCAwLjMwLCAwLjAzLCAwLjQyXSwgWydjJywgLTAuMDYsIDAuMTIsIC0zLjE1LCAzLjkwLCAtMy4zMCwgNC4wOF0sIFsnYycsIC0wLjA2LCAwLjA2LCAtMC4xOCwgMC4xMiwgLTAuMjcsIDAuMThdLCBbJ2MnLCAtMC4yNywgMC4xMiwgLTAuNjAsIDAuMDYsIC0wLjk5LCAtMC4yN10sIFsnYycsIC0wLjI3LCAtMC4yMSwgLTAuNDIsIC0wLjM5LCAtMS4wOCwgLTEuMTRdLCBbJ2MnLCAtMC42MywgLTAuNzIsIC0wLjgxLCAtMC45MCwgLTEuMTcsIC0xLjA4XSwgWydjJywgLTAuMzYsIC0wLjE4LCAtMC41NywgLTAuMjEsIC0wLjk5LCAtMC4yMV0sIFsnYycsIC0wLjM5LCAwLjAwLCAtMC42MywgMC4wMywgLTAuOTMsIDAuMThdLCBbJ2MnLCAtMC4zNiwgMC4xNSwgLTAuNTEsIDAuMjcsIC0wLjkwLCAwLjgxXSwgWydjJywgLTAuMjQsIDAuMjcsIC0wLjQ1LCAwLjUxLCAtMC40OCwgMC41NF0sIFsnYycsIC0wLjEyLCAwLjA5LCAtMC4yNywgMC4wNiwgLTAuMzksIDAuMDBdLCBbJ2MnLCAtMC4yNCwgLTAuMTUsIC0wLjMzLCAtMC4zOSwgLTAuMjEsIC0wLjYwXSwgWydjJywgMC4wOSwgLTAuMTIsIDMuMTgsIC0zLjg3LCAzLjMzLCAtNC4wMl0sIFsnYycsIDAuMDYsIC0wLjA2LCAwLjE4LCAtMC4xNSwgMC4yNCwgLTAuMjFdLCBbJ3onXV0sIHc6IDEwLjgxNywgaDogNi4xMjUgfSxcblx0J3NjcmlwdHMucHJhbGwnOiB7IGQ6IFtbJ00nLCAtNC4zOCwgLTMuNjldLCBbJ2MnLCAwLjA2LCAtMC4wMywgMC4xOCwgLTAuMDYsIDAuMjQsIC0wLjA2XSwgWydjJywgMC4zMCwgMC4wMCwgMC4yNywgLTAuMDMsIDEuODksIDEuOTVdLCBbJ2wnLCAxLjUzLCAxLjgzXSwgWydjJywgMC4wMywgMC4wMCwgMC41NywgLTAuODQsIDEuMjMsIC0xLjgzXSwgWydjJywgMS4xNCwgLTEuNjgsIDEuMjMsIC0xLjgzLCAxLjM1LCAtMS44OV0sIFsnYycsIDAuMDYsIC0wLjAzLCAwLjE4LCAtMC4wNiwgMC4yNCwgLTAuMDZdLCBbJ2MnLCAwLjMwLCAwLjAwLCAwLjI3LCAtMC4wMywgMS44OSwgMS45NV0sIFsnbCcsIDEuNTMsIDEuODNdLCBbJ2wnLCAwLjQ4LCAtMC42OV0sIFsnYycsIDAuNTEsIC0wLjc4LCAwLjU0LCAtMC44NCwgMC42OSwgLTAuOTBdLCBbJ2MnLCAwLjQyLCAtMC4xOCwgMC44NywgMC4xNSwgMC44MSwgMC42MF0sIFsnYycsIC0wLjAzLCAwLjEyLCAtMC4zMCwgMC41MSwgLTEuNTAsIDIuMzddLCBbJ2MnLCAtMS4zOCwgMi4wNywgLTEuNTAsIDIuMjIsIC0xLjYyLCAyLjI4XSwgWydjJywgLTAuMDYsIDAuMDMsIC0wLjE4LCAwLjA2LCAtMC4yNCwgMC4wNl0sIFsnYycsIC0wLjMwLCAwLjAwLCAtMC4yNywgMC4wMywgLTEuODksIC0xLjk1XSwgWydsJywgLTEuNTMsIC0xLjgzXSwgWydjJywgLTAuMDMsIDAuMDAsIC0wLjU3LCAwLjg0LCAtMS4yMywgMS44M10sIFsnYycsIC0xLjE0LCAxLjY4LCAtMS4yMywgMS44MywgLTEuMzUsIDEuODldLCBbJ2MnLCAtMC4wNiwgMC4wMywgLTAuMTgsIDAuMDYsIC0wLjI0LCAwLjA2XSwgWydjJywgLTAuMzAsIDAuMDAsIC0wLjI3LCAwLjAzLCAtMS44OSwgLTEuOTVdLCBbJ2wnLCAtMS41MywgLTEuODNdLCBbJ2wnLCAtMC40OCwgMC42OV0sIFsnYycsIC0wLjUxLCAwLjc4LCAtMC41NCwgMC44NCwgLTAuNjksIDAuOTBdLCBbJ2MnLCAtMC40MiwgMC4xOCwgLTAuODcsIC0wLjE1LCAtMC44MSwgLTAuNjBdLCBbJ2MnLCAwLjAzLCAtMC4xMiwgMC4zMCwgLTAuNTEsIDEuNTAsIC0yLjM3XSwgWydjJywgMS4zOCwgLTIuMDcsIDEuNTAsIC0yLjIyLCAxLjYyLCAtMi4yOF0sIFsneiddXSwgdzogMTUuMDExLCBoOiA3LjUgfSxcblx0J3NjcmlwdHMuYXJwZWdnaW8nOiB7IGQ6IFtbJ00nLCAxLjUsIDBdLCBbJ2MnLCAxLjUsIDIsIDEuNSwgMywgMS41LCAzXSwgWydzJywgMCwgMSwgLTIsIDEuNV0sIFsncycsIC0wLjUsIDMsIDEsIDUuNV0sIFsnbCcsIDEuNSwgMF0sIFsncycsIC0xLjc1LCAtMiwgLTEuOSwgLTMuMjVdLCBbJ3MnLCAyLjE1LCAtMC42LCAyLjk1LCAtMS42XSwgWydzJywgMC40NSwgLTEsIDAuNSwgLTEuMjVdLCBbJ3MnLCAwLCAtMSwgLTIsIC0zLjldLCBbJ2wnLCAtMS41LCAwXSwgWyd6J11dLCB3OiA1LCBoOiAxMCB9LFxuXHQnc2NyaXB0cy5tb3JkZW50JzogeyBkOiBbWydNJywgLTAuMjEsIC00Ljk1XSwgWydjJywgMC4yNywgLTAuMTUsIDAuNjMsIDAuMDAsIDAuNzUsIDAuMjddLCBbJ2MnLCAwLjA2LCAwLjEyLCAwLjA2LCAwLjI0LCAwLjA2LCAxLjQ0XSwgWydsJywgMC4wMCwgMS4yOV0sIFsnbCcsIDAuNTcsIC0wLjg0XSwgWydjJywgMC41MSwgLTAuNzUsIDAuNTcsIC0wLjg0LCAwLjY5LCAtMC45MF0sIFsnYycsIDAuMDYsIC0wLjAzLCAwLjE4LCAtMC4wNiwgMC4yNCwgLTAuMDZdLCBbJ2MnLCAwLjMwLCAwLjAwLCAwLjI3LCAtMC4wMywgMS44OSwgMS45NV0sIFsnbCcsIDEuNTMsIDEuODNdLCBbJ2wnLCAwLjQ4LCAtMC42OV0sIFsnYycsIDAuNTEsIC0wLjc4LCAwLjU0LCAtMC44NCwgMC42OSwgLTAuOTBdLCBbJ2MnLCAwLjQyLCAtMC4xOCwgMC44NywgMC4xNSwgMC44MSwgMC42MF0sIFsnYycsIC0wLjAzLCAwLjEyLCAtMC4zMCwgMC41MSwgLTEuNTAsIDIuMzddLCBbJ2MnLCAtMS4zOCwgMi4wNywgLTEuNTAsIDIuMjIsIC0xLjYyLCAyLjI4XSwgWydjJywgLTAuMDYsIDAuMDMsIC0wLjE4LCAwLjA2LCAtMC4yNCwgMC4wNl0sIFsnYycsIC0wLjMwLCAwLjAwLCAtMC4yNywgMC4wMywgLTEuODMsIC0xLjg5XSwgWydjJywgLTAuODEsIC0wLjk5LCAtMS41MCwgLTEuODAsIC0xLjUzLCAtMS44Nl0sIFsnYycsIC0wLjA2LCAtMC4wMywgLTAuMDYsIC0wLjAzLCAtMC4xMiwgMC4wM10sIFsnYycsIC0wLjA2LCAwLjA2LCAtMC4wNiwgMC4xNSwgLTAuMDYsIDIuMjhdLCBbJ2MnLCAwLjAwLCAxLjk1LCAwLjAwLCAyLjI1LCAtMC4wNiwgMi4zNF0sIFsnYycsIC0wLjE4LCAwLjQ1LCAtMC44MSwgMC40OCwgLTEuMDUsIDAuMDNdLCBbJ2MnLCAtMC4wMywgLTAuMDYsIC0wLjA2LCAtMC4yNCwgLTAuMDYsIC0xLjQxXSwgWydsJywgMC4wMCwgLTEuMzVdLCBbJ2wnLCAtMC41NywgMC44NF0sIFsnYycsIC0wLjU0LCAwLjc4LCAtMC42MCwgMC44NywgLTAuNzIsIDAuOTNdLCBbJ2MnLCAtMC4wNiwgMC4wMywgLTAuMTgsIDAuMDYsIC0wLjI0LCAwLjA2XSwgWydjJywgLTAuMzAsIDAuMDAsIC0wLjI3LCAwLjAzLCAtMS44OSwgLTEuOTVdLCBbJ2wnLCAtMS41MywgLTEuODNdLCBbJ2wnLCAtMC40OCwgMC42OV0sIFsnYycsIC0wLjUxLCAwLjc4LCAtMC41NCwgMC44NCwgLTAuNjksIDAuOTBdLCBbJ2MnLCAtMC40MiwgMC4xOCwgLTAuODcsIC0wLjE1LCAtMC44MSwgLTAuNjBdLCBbJ2MnLCAwLjAzLCAtMC4xMiwgMC4zMCwgLTAuNTEsIDEuNTAsIC0yLjM3XSwgWydjJywgMS4zOCwgLTIuMDcsIDEuNTAsIC0yLjIyLCAxLjYyLCAtMi4yOF0sIFsnYycsIDAuMDYsIC0wLjAzLCAwLjE4LCAtMC4wNiwgMC4yNCwgLTAuMDZdLCBbJ2MnLCAwLjMwLCAwLjAwLCAwLjI3LCAtMC4wMywgMS44OSwgMS45NV0sIFsnbCcsIDEuNTMsIDEuODNdLCBbJ2MnLCAwLjAzLCAwLjAwLCAwLjA2LCAtMC4wNiwgMC4wOSwgLTAuMDldLCBbJ2MnLCAwLjA2LCAtMC4xMiwgMC4wNiwgLTAuMTUsIDAuMDYsIC0yLjI4XSwgWydjJywgMC4wMCwgLTEuOTIsIDAuMDAsIC0yLjIyLCAwLjA2LCAtMi4zMV0sIFsnYycsIDAuMDYsIC0wLjE1LCAwLjE1LCAtMC4yNCwgMC4zMCwgLTAuMzBdLCBbJ3onXV0sIHc6IDE1LjAxMSwgaDogMTAuMDEyIH0sXG5cdCdmbGFncy51OHRoJzogeyBkOiBbWydNJywgLTAuNDIsIDMuNzVdLCBbJ2wnLCAwLjAwLCAtMy43NV0sIFsnbCcsIDAuMjEsIDAuMDBdLCBbJ2wnLCAwLjIxLCAwLjAwXSwgWydsJywgMC4wMCwgMC4xOF0sIFsnYycsIDAuMDAsIDAuMzAsIDAuMDYsIDAuODQsIDAuMTIsIDEuMjNdLCBbJ2MnLCAwLjI0LCAxLjUzLCAwLjkwLCAzLjEyLCAyLjEzLCA1LjE2XSwgWydsJywgMC45OSwgMS41OV0sIFsnYycsIDAuODcsIDEuNDQsIDEuMzgsIDIuMzQsIDEuNzcsIDMuMDldLCBbJ2MnLCAwLjgxLCAxLjY4LCAxLjIwLCAzLjA2LCAxLjI2LCA0LjUzXSwgWydjJywgMC4wMywgMS41MywgLTAuMjEsIDMuMjcsIC0wLjc1LCA1LjAxXSwgWydjJywgLTAuMjEsIDAuNjksIC0wLjUxLCAxLjUwLCAtMC42MCwgMS41OV0sIFsnYycsIC0wLjA5LCAwLjEyLCAtMC4yNywgMC4yMSwgLTAuNDIsIDAuMjFdLCBbJ2MnLCAtMC4xNSwgMC4wMCwgLTAuNDIsIC0wLjEyLCAtMC41MSwgLTAuMjFdLCBbJ2MnLCAtMC4xNSwgLTAuMTgsIC0wLjE4LCAtMC40MiwgLTAuMDksIC0wLjY2XSwgWydjJywgMC4xNSwgLTAuMzMsIDAuNDUsIC0xLjIwLCAwLjU3LCAtMS42Ml0sIFsnYycsIDAuNDIsIC0xLjM4LCAwLjYwLCAtMi41OCwgMC42MCwgLTMuOTBdLCBbJ2MnLCAwLjAwLCAtMC42NiwgMC4wMCwgLTAuODEsIC0wLjA2LCAtMS4xMV0sIFsnYycsIC0wLjM5LCAtMi4wNywgLTEuODAsIC00LjI2LCAtNC41OSwgLTcuMTRdLCBbJ2wnLCAtMC40MiwgLTAuNDVdLCBbJ2wnLCAtMC4yMSwgMC4wMF0sIFsnbCcsIC0wLjIxLCAwLjAwXSwgWydsJywgMC4wMCwgLTMuNzVdLCBbJ3onXV0sIHc6IDYuNjkyLCBoOiAyMi41OSB9LFxuXHQnZmxhZ3MudTE2dGgnOiB7IGQ6IFtbJ00nLCAtMC40MiwgNy41MF0sIFsnbCcsIDAuMDAsIC03LjUwXSwgWydsJywgMC4yMSwgMC4wMF0sIFsnbCcsIDAuMjEsIDAuMDBdLCBbJ2wnLCAwLjAwLCAwLjM5XSwgWydjJywgMC4wNiwgMS4wOCwgMC4zOSwgMi4xOSwgMC45OSwgMy4zOV0sIFsnYycsIDAuNDUsIDAuOTAsIDAuODcsIDEuNTksIDEuOTUsIDMuMTJdLCBbJ2MnLCAxLjI5LCAxLjg2LCAxLjc3LCAyLjY0LCAyLjIyLCAzLjU3XSwgWydjJywgMC40NSwgMC45MywgMC43MiwgMS44MCwgMC44NywgMi42NF0sIFsnYycsIDAuMDYsIDAuNTEsIDAuMDYsIDEuNTAsIDAuMDAsIDEuOTJdLCBbJ2MnLCAtMC4xMiwgMC42MCwgLTAuMzAsIDEuMjAsIC0wLjU0LCAxLjcxXSwgWydsJywgLTAuMDksIDAuMjRdLCBbJ2wnLCAwLjE4LCAwLjQ1XSwgWydjJywgMC41MSwgMS4yMCwgMC43MiwgMi4yMiwgMC42OSwgMy40Ml0sIFsnYycsIC0wLjA2LCAxLjUzLCAtMC4zOSwgMy4wMywgLTAuOTksIDQuNTNdLCBbJ2MnLCAtMC4zMCwgMC43NSwgLTAuMzYsIDAuODEsIC0wLjU3LCAwLjkwXSwgWydjJywgLTAuMTUsIDAuMDksIC0wLjMzLCAwLjA2LCAtMC40OCwgMC4wMF0sIFsnYycsIC0wLjE4LCAtMC4wOSwgLTAuMjcsIC0wLjE4LCAtMC4zMywgLTAuMzNdLCBbJ2MnLCAtMC4wOSwgLTAuMTgsIC0wLjA2LCAtMC4zMCwgMC4xMiwgLTAuNzVdLCBbJ2MnLCAwLjY2LCAtMS40MSwgMS4wMiwgLTIuODgsIDEuMDgsIC00LjMyXSwgWydjJywgMC4wMCwgLTAuNjAsIC0wLjAzLCAtMS4wNSwgLTAuMTgsIC0xLjU5XSwgWydjJywgLTAuMzAsIC0xLjIwLCAtMC45OSwgLTIuNDAsIC0yLjI1LCAtMy44N10sIFsnYycsIC0wLjQyLCAtMC40OCwgLTEuNTMsIC0xLjYyLCAtMi4xOSwgLTIuMjJdLCBbJ2wnLCAtMC40NSwgLTAuNDJdLCBbJ2wnLCAtMC4wMywgMS4xMV0sIFsnbCcsIDAuMDAsIDEuMTFdLCBbJ2wnLCAtMC4yMSwgMC4wMF0sIFsnbCcsIC0wLjIxLCAwLjAwXSwgWydsJywgMC4wMCwgLTcuNTBdLCBbJ3onXSwgWydtJywgMS42NSwgMC4wOV0sIFsnYycsIC0wLjMwLCAtMC4zMCwgLTAuNjksIC0wLjcyLCAtMC45MCwgLTAuODddLCBbJ2wnLCAtMC4zMywgLTAuMzNdLCBbJ2wnLCAwLjAwLCAwLjE1XSwgWydjJywgMC4wMCwgMC4zMCwgMC4wNiwgMC44MSwgMC4xNSwgMS4yNl0sIFsnYycsIDAuMjcsIDEuMjksIDAuODcsIDIuNjEsIDIuMDQsIDQuMjldLCBbJ2MnLCAwLjE1LCAwLjI0LCAwLjYwLCAwLjg3LCAwLjk2LCAxLjM4XSwgWydsJywgMS4wOCwgMS41M10sIFsnbCcsIDAuNDIsIDAuNjNdLCBbJ2MnLCAwLjAzLCAwLjAwLCAwLjEyLCAtMC4zNiwgMC4yMSwgLTAuNzJdLCBbJ2MnLCAwLjA2LCAtMC4zMywgMC4wNiwgLTEuMjAsIDAuMDAsIC0xLjYyXSwgWydjJywgLTAuMzMsIC0xLjcxLCAtMS40NCwgLTMuNDgsIC0zLjYzLCAtNS43MF0sIFsneiddXSwgdzogNi42OTMsIGg6IDI2LjMzNyB9LFxuXHQnZmxhZ3MudTMybmQnOiB7IGQ6IFtbJ00nLCAtMC40MiwgMTEuMjVdLCBbJ2wnLCAwLjAwLCAtMTEuMjVdLCBbJ2wnLCAwLjIxLCAwLjAwXSwgWydsJywgMC4yMSwgMC4wMF0sIFsnbCcsIDAuMDAsIDAuMzZdLCBbJ2MnLCAwLjA5LCAxLjY4LCAwLjY5LCAzLjI3LCAyLjA3LCA1LjQ2XSwgWydsJywgMC44NywgMS4zNV0sIFsnYycsIDEuMDIsIDEuNjIsIDEuNDcsIDIuMzcsIDEuODYsIDMuMThdLCBbJ2MnLCAwLjQ4LCAxLjAyLCAwLjc4LCAxLjkyLCAwLjkzLCAyLjg4XSwgWydjJywgMC4wNiwgMC40OCwgMC4wNiwgMS41MCwgMC4wMCwgMS44OV0sIFsnYycsIC0wLjA5LCAwLjQyLCAtMC4yMSwgMC44NywgLTAuMzYsIDEuMjZdLCBbJ2wnLCAtMC4xMiwgMC4zMF0sIFsnbCcsIDAuMTUsIDAuMzldLCBbJ2MnLCAwLjY5LCAxLjU2LCAwLjg0LCAyLjg4LCAwLjU0LCA0LjM4XSwgWydjJywgLTAuMDksIDAuNDUsIC0wLjI3LCAxLjA4LCAtMC40NSwgMS40N10sIFsnbCcsIC0wLjEyLCAwLjI0XSwgWydsJywgMC4xOCwgMC4zNl0sIFsnYycsIDAuMzMsIDAuNzIsIDAuNTcsIDEuNTYsIDAuNjksIDIuMzRdLCBbJ2MnLCAwLjEyLCAxLjAyLCAtMC4wNiwgMi41MiwgLTAuNDIsIDMuODRdLCBbJ2MnLCAtMC4yNywgMC45MywgLTAuNzUsIDIuMTMsIC0wLjkzLCAyLjMxXSwgWydjJywgLTAuMTgsIDAuMTUsIC0wLjQ1LCAwLjE4LCAtMC42NiwgMC4wOV0sIFsnYycsIC0wLjE4LCAtMC4wOSwgLTAuMjcsIC0wLjE4LCAtMC4zMywgLTAuMzNdLCBbJ2MnLCAtMC4wOSwgLTAuMTgsIC0wLjA2LCAtMC4zMCwgMC4wNiwgLTAuNjBdLCBbJ2MnLCAwLjIxLCAtMC4zNiwgMC40MiwgLTAuOTAsIDAuNTcsIC0xLjM4XSwgWydjJywgMC41MSwgLTEuNDEsIDAuNjksIC0zLjA2LCAwLjQ4LCAtNC4wOF0sIFsnYycsIC0wLjE1LCAtMC44MSwgLTAuNTcsIC0xLjY4LCAtMS4yMCwgLTIuNTVdLCBbJ2MnLCAtMC43MiwgLTAuOTksIC0xLjgzLCAtMi4xMywgLTMuMzAsIC0zLjMzXSwgWydsJywgLTAuNDgsIC0wLjQyXSwgWydsJywgLTAuMDMsIDEuNTNdLCBbJ2wnLCAwLjAwLCAxLjU2XSwgWydsJywgLTAuMjEsIDAuMDBdLCBbJ2wnLCAtMC4yMSwgMC4wMF0sIFsnbCcsIDAuMDAsIC0xMS4yNV0sIFsneiddLCBbJ20nLCAxLjI2LCAtMy45Nl0sIFsnYycsIC0wLjI3LCAtMC4zMCwgLTAuNTQsIC0wLjYwLCAtMC42NiwgLTAuNzJdLCBbJ2wnLCAtMC4xOCwgLTAuMjFdLCBbJ2wnLCAwLjAwLCAwLjQyXSwgWydjJywgMC4wNiwgMC44NywgMC4yNCwgMS43NCwgMC42NiwgMi42N10sIFsnYycsIDAuMzYsIDAuODcsIDAuOTYsIDEuODYsIDEuOTIsIDMuMThdLCBbJ2MnLCAwLjIxLCAwLjMzLCAwLjYzLCAwLjg3LCAwLjg3LCAxLjIzXSwgWydjJywgMC4yNywgMC4zOSwgMC42MCwgMC44NCwgMC43NSwgMS4wOF0sIFsnbCcsIDAuMjcsIDAuMzldLCBbJ2wnLCAwLjAzLCAtMC4xMl0sIFsnYycsIDAuMTIsIC0wLjQ1LCAwLjE1LCAtMS4wNSwgMC4wOSwgLTEuNTldLCBbJ2MnLCAtMC4yNywgLTEuODYsIC0xLjM4LCAtMy43OCwgLTMuNzUsIC02LjMzXSwgWyd6J10sIFsnbScsIC0wLjI3LCA2LjA5XSwgWydjJywgLTAuMjcsIC0wLjIxLCAtMC40OCwgLTAuNDIsIC0wLjUxLCAtMC40NV0sIFsnYycsIC0wLjA2LCAtMC4wMywgLTAuMDYsIC0wLjAzLCAtMC4wNiwgMC4yMV0sIFsnYycsIDAuMDAsIDAuOTAsIDAuMzAsIDIuMDQsIDAuODEsIDMuMDldLCBbJ2MnLCAwLjQ4LCAxLjAyLCAwLjk2LCAxLjc3LCAyLjM3LCAzLjYzXSwgWydjJywgMC42MCwgMC43OCwgMS4wNSwgMS40NCwgMS4yOSwgMS43N10sIFsnYycsIDAuMDYsIDAuMTIsIDAuMTUsIDAuMjEsIDAuMTUsIDAuMThdLCBbJ2MnLCAwLjAzLCAtMC4wMywgMC4xOCwgLTAuNTcsIDAuMjQsIC0wLjg3XSwgWydjJywgMC4wNiwgLTAuNDUsIDAuMDYsIC0xLjMyLCAtMC4wMywgLTEuNzRdLCBbJ2MnLCAtMC4wOSwgLTAuNDgsIC0wLjI0LCAtMC45MCwgLTAuNTEsIC0xLjQ0XSwgWydjJywgLTAuNjYsIC0xLjM1LCAtMS44MywgLTIuNzAsIC0zLjc1LCAtNC4zOF0sIFsneiddXSwgdzogNi42OTcsIGg6IDMyLjE0NSB9LFxuXHQnZmxhZ3MudTY0dGgnOiB7IGQ6IFtbJ00nLCAtMC40MiwgMTUuMDBdLCBbJ2wnLCAwLjAwLCAtMTUuMDBdLCBbJ2wnLCAwLjIxLCAwLjAwXSwgWydsJywgMC4yMSwgMC4wMF0sIFsnbCcsIDAuMDAsIDAuMzZdLCBbJ2MnLCAwLjA2LCAxLjIwLCAwLjM5LCAyLjM3LCAxLjAyLCAzLjY2XSwgWydjJywgMC4zOSwgMC44MSwgMC44NCwgMS41NiwgMS44MCwgMy4wOV0sIFsnYycsIDAuODEsIDEuMjYsIDEuMDUsIDEuNjgsIDEuMzUsIDIuMjJdLCBbJ2MnLCAwLjg3LCAxLjUwLCAxLjM1LCAyLjc5LCAxLjU2LCA0LjA4XSwgWydjJywgMC4wNiwgMC41NCwgMC4wNiwgMS41NiwgLTAuMDMsIDIuMDRdLCBbJ2MnLCAtMC4wOSwgMC40OCwgLTAuMjEsIDAuOTksIC0wLjM2LCAxLjM1XSwgWydsJywgLTAuMTIsIDAuMjddLCBbJ2wnLCAwLjEyLCAwLjI3XSwgWydjJywgMC4wOSwgMC4xNSwgMC4yMSwgMC40NSwgMC4yNywgMC42Nl0sIFsnYycsIDAuNjksIDEuODksIDAuNjMsIDMuNjYsIC0wLjE4LCA1LjQ2XSwgWydsJywgLTAuMTgsIDAuMzldLCBbJ2wnLCAwLjE1LCAwLjMzXSwgWydjJywgMC4zMCwgMC42NiwgMC41MSwgMS40NCwgMC42MywgMi4xMF0sIFsnYycsIDAuMDYsIDAuNDgsIDAuMDYsIDEuMzUsIDAuMDAsIDEuNzFdLCBbJ2MnLCAtMC4xNSwgMC41NywgLTAuNDIsIDEuMjAsIC0wLjc4LCAxLjY4XSwgWydsJywgLTAuMjEsIDAuMjddLCBbJ2wnLCAwLjE4LCAwLjMzXSwgWydjJywgMC41NywgMS4wNSwgMC45MywgMi4xMywgMS4wMiwgMy4xOF0sIFsnYycsIDAuMDYsIDAuNzIsIDAuMDAsIDEuODMsIC0wLjIxLCAyLjc5XSwgWydjJywgLTAuMTgsIDEuMDIsIC0wLjYzLCAyLjM0LCAtMS4wMiwgMy4wOV0sIFsnYycsIC0wLjE1LCAwLjMzLCAtMC40OCwgMC40NSwgLTAuNzgsIDAuMzBdLCBbJ2MnLCAtMC4xOCwgLTAuMDksIC0wLjI3LCAtMC4xOCwgLTAuMzMsIC0wLjMzXSwgWydjJywgLTAuMDksIC0wLjE4LCAtMC4wNiwgLTAuMzAsIDAuMDMsIC0wLjU0XSwgWydjJywgMC43NSwgLTEuNTAsIDEuMjMsIC0zLjQ1LCAxLjE3LCAtNC44OV0sIFsnYycsIC0wLjA2LCAtMS4wMiwgLTAuNDIsIC0yLjAxLCAtMS4xNywgLTMuMTVdLCBbJ2MnLCAtMC40OCwgLTAuNzIsIC0xLjAyLCAtMS4zNSwgLTEuODksIC0yLjIyXSwgWydjJywgLTAuNTcsIC0wLjU3LCAtMS41NiwgLTEuNTAsIC0xLjkyLCAtMS43N10sIFsnbCcsIC0wLjEyLCAtMC4wOV0sIFsnbCcsIDAuMDAsIDEuNjhdLCBbJ2wnLCAwLjAwLCAxLjY4XSwgWydsJywgLTAuMjEsIDAuMDBdLCBbJ2wnLCAtMC4yMSwgMC4wMF0sIFsnbCcsIDAuMDAsIC0xNS4wMF0sIFsneiddLCBbJ20nLCAwLjkzLCAtOC4wN10sIFsnYycsIC0wLjI3LCAtMC4zMCwgLTAuNDgsIC0wLjU0LCAtMC41MSwgLTAuNTRdLCBbJ2MnLCAwLjAwLCAwLjAwLCAwLjAwLCAwLjY5LCAwLjAzLCAxLjAyXSwgWydjJywgMC4xNSwgMS40NywgMC43NSwgMi45NCwgMi4wNCwgNC44M10sIFsnbCcsIDEuMDgsIDEuNTNdLCBbJ2MnLCAwLjM5LCAwLjU3LCAwLjg0LCAxLjIwLCAwLjk5LCAxLjQ0XSwgWydjJywgMC4xNSwgMC4yNCwgMC4zMCwgMC40NSwgMC4zMCwgMC40NV0sIFsnYycsIDAuMDAsIDAuMDAsIDAuMDMsIC0wLjA5LCAwLjA2LCAtMC4yMV0sIFsnYycsIDAuMzYsIC0xLjU5LCAtMC4xNSwgLTMuMzMsIC0xLjQ3LCAtNS40MF0sIFsnYycsIC0wLjYzLCAtMC45MywgLTEuMzUsIC0xLjgzLCAtMi41MiwgLTMuMTJdLCBbJ3onXSwgWydtJywgMC4wNiwgNi43Ml0sIFsnYycsIC0wLjI0LCAtMC4yMSwgLTAuNDgsIC0wLjQyLCAtMC41MSwgLTAuNDVdLCBbJ2wnLCAtMC4wNiwgLTAuMDZdLCBbJ2wnLCAwLjAwLCAwLjMzXSwgWydjJywgMC4wMCwgMS4yMCwgMC4zMCwgMi4zNCwgMC45MywgMy42MF0sIFsnYycsIDAuNDUsIDAuOTAsIDAuOTYsIDEuNjgsIDIuMjUsIDMuNTFdLCBbJ2MnLCAwLjM5LCAwLjU0LCAwLjg0LCAxLjE3LCAxLjAyLCAxLjQ0XSwgWydjJywgMC4yMSwgMC4zMywgMC4zMywgMC41MSwgMC4zMywgMC40OF0sIFsnYycsIDAuMDYsIC0wLjA5LCAwLjIxLCAtMC42MywgMC4zMCwgLTAuOTldLCBbJ2MnLCAwLjA2LCAtMC4zMywgMC4wNiwgLTAuNDUsIDAuMDYsIC0wLjk2XSwgWydjJywgMC4wMCwgLTAuNjAsIC0wLjAzLCAtMC44NCwgLTAuMTgsIC0xLjM1XSwgWydjJywgLTAuMzAsIC0xLjA4LCAtMS4wMiwgLTIuMjgsIC0yLjEzLCAtMy41N10sIFsnYycsIC0wLjM5LCAtMC40NSwgLTEuNDQsIC0xLjQ3LCAtMi4wMSwgLTEuOThdLCBbJ3onXSwgWydtJywgMC4wMCwgNi43Ml0sIFsnYycsIC0wLjI0LCAtMC4yMSwgLTAuNDgsIC0wLjM5LCAtMC41MSwgLTAuNDJdLCBbJ2wnLCAtMC4wNiwgLTAuMDZdLCBbJ2wnLCAwLjAwLCAwLjMzXSwgWydjJywgMC4wMCwgMS40MSwgMC40NSwgMi44MiwgMS4zOCwgNC4zNV0sIFsnYycsIDAuNDIsIDAuNzIsIDAuNzIsIDEuMTQsIDEuODYsIDIuNzNdLCBbJ2MnLCAwLjM2LCAwLjQ1LCAwLjc1LCAwLjk5LCAwLjg3LCAxLjIwXSwgWydjJywgMC4xNSwgMC4yMSwgMC4zMCwgMC4zNiwgMC4zMCwgMC4zNl0sIFsnYycsIDAuMDYsIDAuMDAsIDAuMzAsIC0wLjQ4LCAwLjM5LCAtMC43NV0sIFsnYycsIDAuMDksIC0wLjM2LCAwLjEyLCAtMC42MywgMC4xMiwgLTEuMDVdLCBbJ2MnLCAtMC4wNiwgLTEuMDUsIC0wLjQ1LCAtMi4wNCwgLTEuMjAsIC0zLjE4XSwgWydjJywgLTAuNTcsIC0wLjg3LCAtMS4xMSwgLTEuNTMsIC0yLjA3LCAtMi40OV0sIFsnYycsIC0wLjM2LCAtMC4zMywgLTAuODQsIC0wLjc4LCAtMS4wOCwgLTEuMDJdLCBbJ3onXV0sIHc6IDYuNjgyLCBoOiAzOS42OTQgfSxcblx0J2ZsYWdzLmQ4dGgnOiB7IGQ6IFtbJ00nLCA1LjY3LCAtMjEuNjNdLCBbJ2MnLCAwLjI0LCAtMC4xMiwgMC41NCwgLTAuMDYsIDAuNjksIDAuMTVdLCBbJ2MnLCAwLjA2LCAwLjA2LCAwLjIxLCAwLjM2LCAwLjM5LCAwLjY2XSwgWydjJywgMC44NCwgMS43NywgMS4yNiwgMy4zNiwgMS4zMiwgNS4xMF0sIFsnYycsIDAuMDMsIDEuMjksIC0wLjIxLCAyLjM3LCAtMC44MSwgMy42M10sIFsnYycsIC0wLjYwLCAxLjIzLCAtMS4yNiwgMi4xMywgLTMuMjEsIDQuMzhdLCBbJ2MnLCAtMS4zNSwgMS41MywgLTEuODYsIDIuMTksIC0yLjQwLCAyLjk3XSwgWydjJywgLTAuNjMsIDAuOTMsIC0xLjExLCAxLjkyLCAtMS4zOCwgMi43OV0sIFsnYycsIC0wLjE1LCAwLjU0LCAtMC4yNywgMS4zNSwgLTAuMjcsIDEuODBdLCBbJ2wnLCAwLjAwLCAwLjE1XSwgWydsJywgLTAuMjEsIDAuMDBdLCBbJ2wnLCAtMC4yMSwgMC4wMF0sIFsnbCcsIDAuMDAsIC0zLjc1XSwgWydsJywgMC4wMCwgLTMuNzVdLCBbJ2wnLCAwLjIxLCAwLjAwXSwgWydsJywgMC4yMSwgMC4wMF0sIFsnbCcsIDAuNDgsIC0wLjMwXSwgWydjJywgMS44MywgLTEuMTEsIDMuMTIsIC0yLjEwLCA0LjE3LCAtMy4xMl0sIFsnYycsIDAuNzgsIC0wLjgxLCAxLjMyLCAtMS41MywgMS43MSwgLTIuMzFdLCBbJ2MnLCAwLjQ1LCAtMC45MywgMC42MCwgLTEuNzQsIDAuNTEsIC0yLjg4XSwgWydjJywgLTAuMTIsIC0xLjU2LCAtMC42MywgLTMuMTgsIC0xLjQ3LCAtNC42OF0sIFsnYycsIC0wLjEyLCAtMC4yMSwgLTAuMTUsIC0wLjMzLCAtMC4wNiwgLTAuNTFdLCBbJ2MnLCAwLjA2LCAtMC4xNSwgMC4xNSwgLTAuMjQsIDAuMzMsIC0wLjMzXSwgWyd6J11dLCB3OiA4LjQ5MiwgaDogMjEuNjkxIH0sXG5cdCdmbGFncy51Z3JhY2UnOiB7IGQ6IFtbJ00nLCA2LjAzLCA2LjkzXSwgWydjJywgMC4xNSwgLTAuMDksIDAuMzMsIC0wLjA2LCAwLjUxLCAwLjAwXSwgWydjJywgMC4xNSwgMC4wOSwgMC4yMSwgMC4xNSwgMC4zMCwgMC4zM10sIFsnYycsIDAuMDksIDAuMTgsIDAuMDYsIDAuMzksIC0wLjAzLCAwLjU0XSwgWydjJywgLTAuMDYsIDAuMTUsIC0xMC44OSwgOC44OCwgLTExLjA3LCA4Ljk3XSwgWydjJywgLTAuMTUsIDAuMDksIC0wLjMzLCAwLjA2LCAtMC40OCwgMC4wMF0sIFsnYycsIC0wLjE4LCAtMC4wOSwgLTAuMjQsIC0wLjE1LCAtMC4zMywgLTAuMzNdLCBbJ2MnLCAtMC4wOSwgLTAuMTgsIC0wLjA2LCAtMC4zOSwgMC4wMywgLTAuNTRdLCBbJ2MnLCAwLjA2LCAtMC4xNSwgMTAuODksIC04Ljg4LCAxMS4wNywgLTguOTddLCBbJ3onXV0sIHc6IDEyLjAxOSwgaDogOS45NTQgfSxcblx0J2ZsYWdzLmRncmFjZSc6IHsgZDogW1snTScsIC02LjA2LCAtMTUuOTNdLCBbJ2MnLCAwLjE4LCAtMC4wOSwgMC4zMywgLTAuMTIsIDAuNDgsIC0wLjA2XSwgWydjJywgMC4xOCwgMC4wOSwgMTQuMDEsIDguMDQsIDE0LjEwLCA4LjEwXSwgWydjJywgMC4xMiwgMC4xMiwgMC4xOCwgMC4zMywgMC4xOCwgMC41MV0sIFsnYycsIC0wLjAzLCAwLjIxLCAtMC4xNSwgMC4zOSwgLTAuMzYsIDAuNDhdLCBbJ2MnLCAtMC4xOCwgMC4wOSwgLTAuMzMsIDAuMTIsIC0wLjQ4LCAwLjA2XSwgWydjJywgLTAuMTgsIC0wLjA5LCAtMTQuMDEsIC04LjA0LCAtMTQuMTAsIC04LjEwXSwgWydjJywgLTAuMTIsIC0wLjEyLCAtMC4xOCwgLTAuMzMsIC0wLjE4LCAtMC41MV0sIFsnYycsIDAuMDMsIC0wLjIxLCAwLjE1LCAtMC4zOSwgMC4zNiwgLTAuNDhdLCBbJ3onXV0sIHc6IDE1LjEyLCBoOiA5LjIxMiB9LFxuXHQnZmxhZ3MuZDE2dGgnOiB7IGQ6IFtbJ00nLCA2Ljg0LCAtMjIuNTNdLCBbJ2MnLCAwLjI3LCAtMC4xMiwgMC41NywgLTAuMDYsIDAuNzIsIDAuMTVdLCBbJ2MnLCAwLjE1LCAwLjE1LCAwLjMzLCAwLjg3LCAwLjQ1LCAxLjU2XSwgWydjJywgMC4wNiwgMC4zMywgMC4wNiwgMS4zNSwgMC4wMCwgMS42NV0sIFsnYycsIC0wLjA2LCAwLjMzLCAtMC4xNSwgMC43OCwgLTAuMjcsIDEuMTFdLCBbJ2MnLCAtMC4xMiwgMC4zMywgLTAuNDUsIDAuOTYsIC0wLjY2LCAxLjMyXSwgWydsJywgLTAuMTgsIDAuMjddLCBbJ2wnLCAwLjA5LCAwLjE4XSwgWydjJywgMC40OCwgMS4wMiwgMC43MiwgMi4yNSwgMC42OSwgMy4zMF0sIFsnYycsIC0wLjA2LCAxLjIzLCAtMC40MiwgMi4yOCwgLTEuMjYsIDMuNDVdLCBbJ2MnLCAtMC41NywgMC44NywgLTAuOTksIDEuMzIsIC0zLjAwLCAzLjM5XSwgWydjJywgLTEuNTYsIDEuNTYsIC0yLjIyLCAyLjQwLCAtMi43NiwgMy40NV0sIFsnYycsIC0wLjQyLCAwLjg0LCAtMC42NiwgMS44MCwgLTAuNjYsIDIuNTVdLCBbJ2wnLCAwLjAwLCAwLjE1XSwgWydsJywgLTAuMjEsIDAuMDBdLCBbJ2wnLCAtMC4yMSwgMC4wMF0sIFsnbCcsIDAuMDAsIC03LjUwXSwgWydsJywgMC4wMCwgLTcuNTBdLCBbJ2wnLCAwLjIxLCAwLjAwXSwgWydsJywgMC4yMSwgMC4wMF0sIFsnbCcsIDAuMDAsIDEuMTRdLCBbJ2wnLCAwLjAwLCAxLjExXSwgWydsJywgMC4yNywgLTAuMTVdLCBbJ2MnLCAxLjExLCAtMC41NywgMS43NywgLTAuOTksIDIuNTIsIC0xLjQ3XSwgWydjJywgMi4zNywgLTEuNTYsIDMuNjksIC0zLjE1LCA0LjA1LCAtNC44M10sIFsnYycsIDAuMDMsIC0wLjE4LCAwLjAzLCAtMC4zOSwgMC4wMywgLTAuNzhdLCBbJ2MnLCAwLjAwLCAtMC42MCwgLTAuMDMsIC0wLjkzLCAtMC4yNCwgLTEuNTBdLCBbJ2MnLCAtMC4wNiwgLTAuMTgsIC0wLjEyLCAtMC4zOSwgLTAuMTUsIC0wLjQ1XSwgWydjJywgLTAuMDMsIC0wLjI0LCAwLjEyLCAtMC40OCwgMC4zNiwgLTAuNjBdLCBbJ3onXSwgWydtJywgLTAuNjMsIDcuNTBdLCBbJ2MnLCAtMC4wNiwgLTAuMTgsIC0wLjE1LCAtMC4zNiwgLTAuMTUsIC0wLjM2XSwgWydjJywgLTAuMDMsIDAuMDAsIC0wLjAzLCAwLjAzLCAtMC4wNiwgMC4wNl0sIFsnYycsIC0wLjA2LCAwLjEyLCAtMC45NiwgMS4wMiwgLTEuOTUsIDEuOThdLCBbJ2MnLCAtMC42MywgMC41NywgLTEuMjYsIDEuMTcsIC0xLjQ0LCAxLjM1XSwgWydjJywgLTEuNTMsIDEuNjIsIC0yLjI4LCAyLjg1LCAtMi41NSwgNC4zMl0sIFsnYycsIC0wLjAzLCAwLjE4LCAtMC4wMywgMC41NCwgLTAuMDYsIDAuOTldLCBbJ2wnLCAwLjAwLCAwLjY5XSwgWydsJywgMC4xOCwgLTAuMDldLCBbJ2MnLCAwLjkzLCAtMC41NCwgMi4xMCwgLTEuMjksIDIuODIsIC0xLjgzXSwgWydjJywgMC42OSwgLTAuNTEsIDEuMDIsIC0wLjgxLCAxLjUzLCAtMS4yOV0sIFsnYycsIDEuODYsIC0xLjg5LCAyLjM3LCAtMy42NiwgMS42OCwgLTUuODJdLCBbJ3onXV0sIHc6IDguNDc1LCBoOiAyMi41OTEgfSxcblx0J2ZsYWdzLmQzMm5kJzogeyBkOiBbWydNJywgNi44NCwgLTI5LjEzXSwgWydjJywgMC4yNywgLTAuMTIsIDAuNTcsIC0wLjA2LCAwLjcyLCAwLjE1XSwgWydjJywgMC4xMiwgMC4xMiwgMC4yNywgMC42MywgMC4zNiwgMS4xMV0sIFsnYycsIDAuMzMsIDEuNTksIDAuMDYsIDMuMDYsIC0wLjgxLCA0LjQ3XSwgWydsJywgLTAuMTgsIDAuMjddLCBbJ2wnLCAwLjA5LCAwLjE1XSwgWydjJywgMC4xMiwgMC4yNCwgMC4zMywgMC42OSwgMC40NSwgMS4wNV0sIFsnYycsIDAuNjMsIDEuODMsIDAuNDUsIDMuNTcsIC0wLjU3LCA1LjIyXSwgWydsJywgLTAuMTgsIDAuMzBdLCBbJ2wnLCAwLjE1LCAwLjI3XSwgWydjJywgMC40MiwgMC44NywgMC42MCwgMS43MSwgMC41NywgMi42MV0sIFsnYycsIC0wLjA2LCAxLjI5LCAtMC40OCwgMi40NiwgLTEuMzUsIDMuNzhdLCBbJ2MnLCAtMC41NCwgMC44MSwgLTAuOTMsIDEuMjksIC0yLjQ2LCAzLjAwXSwgWydjJywgLTAuNTEsIDAuNTQsIC0xLjA1LCAxLjE3LCAtMS4yNiwgMS40MV0sIFsnYycsIC0xLjU2LCAxLjg2LCAtMi4yNSwgMy4zNiwgLTIuMzcsIDUuMDFdLCBbJ2wnLCAwLjAwLCAwLjMzXSwgWydsJywgLTAuMjEsIDAuMDBdLCBbJ2wnLCAtMC4yMSwgMC4wMF0sIFsnbCcsIDAuMDAsIC0xMS4yNV0sIFsnbCcsIDAuMDAsIC0xMS4yNV0sIFsnbCcsIDAuMjEsIDAuMDBdLCBbJ2wnLCAwLjIxLCAwLjAwXSwgWydsJywgMC4wMCwgMS4zNV0sIFsnbCcsIDAuMDMsIDEuMzVdLCBbJ2wnLCAwLjc4LCAtMC4zOV0sIFsnYycsIDEuMzgsIC0wLjY5LCAyLjM0LCAtMS4yNiwgMy4yNCwgLTEuOTJdLCBbJ2MnLCAxLjM4LCAtMS4wMiwgMi4yOCwgLTIuMTMsIDIuNjQsIC0zLjIxXSwgWydjJywgMC4xNSwgLTAuNDgsIDAuMTgsIC0wLjcyLCAwLjE4LCAtMS4yOV0sIFsnYycsIDAuMDAsIC0wLjU3LCAtMC4wNiwgLTAuOTAsIC0wLjI0LCAtMS40N10sIFsnYycsIC0wLjA2LCAtMC4xOCwgLTAuMTIsIC0wLjM5LCAtMC4xNSwgLTAuNDVdLCBbJ2MnLCAtMC4wMywgLTAuMjQsIDAuMTIsIC0wLjQ4LCAwLjM2LCAtMC42MF0sIFsneiddLCBbJ20nLCAtMC42MywgNy4yMF0sIFsnYycsIC0wLjA5LCAtMC4xOCwgLTAuMTIsIC0wLjIxLCAtMC4xMiwgLTAuMTVdLCBbJ2MnLCAtMC4wMywgMC4wOSwgLTEuMDIsIDEuMDgsIC0yLjA0LCAyLjA0XSwgWydjJywgLTEuMTcsIDEuMDgsIC0xLjY1LCAxLjU2LCAtMi4wNywgMi4wNF0sIFsnYycsIC0wLjg0LCAwLjk2LCAtMS4zOCwgMS44NiwgLTEuNjgsIDIuNzZdLCBbJ2MnLCAtMC4yMSwgMC41NywgLTAuMjcsIDAuOTksIC0wLjMwLCAxLjY1XSwgWydsJywgMC4wMCwgMC41NF0sIFsnbCcsIDAuNjYsIC0wLjMzXSwgWydjJywgMy41NywgLTEuODYsIDUuNDksIC0zLjY5LCA1Ljk0LCAtNS43MF0sIFsnYycsIDAuMDYsIC0wLjM5LCAwLjA2LCAtMS4yMCwgLTAuMDMsIC0xLjY1XSwgWydjJywgLTAuMDYsIC0wLjM5LCAtMC4yNCwgLTAuOTAsIC0wLjM2LCAtMS4yMF0sIFsneiddLCBbJ20nLCAtMC4wNiwgNy4yMF0sIFsnYycsIC0wLjA2LCAtMC4xNSwgLTAuMTIsIC0wLjMzLCAtMC4xNSwgLTAuNDVdLCBbJ2wnLCAtMC4wNiwgLTAuMThdLCBbJ2wnLCAtMC4xOCwgMC4yMV0sIFsnbCcsIC0xLjgzLCAxLjgzXSwgWydjJywgLTAuODcsIDAuOTAsIC0xLjc3LCAxLjgwLCAtMS45NSwgMi4wMV0sIFsnYycsIC0xLjA4LCAxLjI5LCAtMS42MiwgMi4zMSwgLTEuODksIDMuNTFdLCBbJ2MnLCAtMC4wNiwgMC4zMCwgLTAuMDYsIDAuNTEsIC0wLjA5LCAwLjkzXSwgWydsJywgMC4wMCwgMC41N10sIFsnbCcsIDAuMDksIC0wLjA2XSwgWydjJywgMC43NSwgLTAuNDUsIDEuODksIC0xLjI2LCAyLjUyLCAtMS43NF0sIFsnYycsIDAuODEsIC0wLjY2LCAxLjc0LCAtMS41MywgMi4yMiwgLTIuMTZdLCBbJ2MnLCAxLjI2LCAtMS41MywgMS42OCwgLTMuMDYsIDEuMzIsIC00LjQ3XSwgWyd6J11dLCB3OiA4LjM4NSwgaDogMjkuMTkxIH0sXG5cdCdmbGFncy5kNjR0aCc6IHsgZDogW1snTScsIDcuMDgsIC0zMi44OF0sIFsnYycsIDAuMzAsIC0wLjEyLCAwLjY2LCAtMC4wMywgMC43OCwgMC4yNF0sIFsnYycsIDAuMTgsIDAuMzMsIDAuMjcsIDIuMTAsIDAuMTUsIDIuNjRdLCBbJ2MnLCAtMC4wOSwgMC4zOSwgLTAuMjEsIDAuNzgsIC0wLjM5LCAxLjA4XSwgWydsJywgLTAuMTUsIDAuMzBdLCBbJ2wnLCAwLjA5LCAwLjI3XSwgWydjJywgMC4wMywgMC4xMiwgMC4wOSwgMC40NSwgMC4xMiwgMC42OV0sIFsnYycsIDAuMjcsIDEuNDQsIDAuMTgsIDIuNTUsIC0wLjMwLCAzLjYwXSwgWydsJywgLTAuMTIsIDAuMzNdLCBbJ2wnLCAwLjA2LCAwLjQyXSwgWydjJywgMC4yNywgMS4zNSwgMC4zMywgMi44MiwgMC4yMSwgMy42M10sIFsnYycsIC0wLjEyLCAwLjYwLCAtMC4zMCwgMS4yMywgLTAuNTcsIDEuODBdLCBbJ2wnLCAtMC4xNSwgMC4yN10sIFsnbCcsIDAuMDMsIDAuNDJdLCBbJ2MnLCAwLjA2LCAxLjAyLCAwLjA2LCAyLjcwLCAwLjAzLCAzLjA2XSwgWydjJywgLTAuMTUsIDEuNDcsIC0wLjY2LCAyLjc2LCAtMS43NCwgNC40MV0sIFsnYycsIC0wLjQ1LCAwLjY5LCAtMC43NSwgMS4xMSwgLTEuNzQsIDIuMzddLCBbJ2MnLCAtMS4wNSwgMS4zOCwgLTEuNTAsIDEuOTgsIC0xLjk1LCAyLjczXSwgWydjJywgLTAuOTMsIDEuNTAsIC0xLjM4LCAyLjgyLCAtMS40NCwgNC4yMF0sIFsnbCcsIDAuMDAsIDAuNDJdLCBbJ2wnLCAtMC4yMSwgMC4wMF0sIFsnbCcsIC0wLjIxLCAwLjAwXSwgWydsJywgMC4wMCwgLTE1LjAwXSwgWydsJywgMC4wMCwgLTE1LjAwXSwgWydsJywgMC4yMSwgMC4wMF0sIFsnbCcsIDAuMjEsIDAuMDBdLCBbJ2wnLCAwLjAwLCAxLjg2XSwgWydsJywgMC4wMCwgMS44OV0sIFsnYycsIDAuMDAsIDAuMDAsIDAuMjEsIC0wLjAzLCAwLjQ1LCAtMC4wOV0sIFsnYycsIDIuMjIsIC0wLjM5LCA0LjA4LCAtMS4xMSwgNS4xOSwgLTIuMDFdLCBbJ2MnLCAwLjYzLCAtMC41NCwgMS4wMiwgLTEuMTQsIDEuMjAsIC0xLjgwXSwgWydjJywgMC4wNiwgLTAuMzAsIDAuMDYsIC0xLjE0LCAtMC4wMywgLTEuNjVdLCBbJ2MnLCAtMC4wMywgLTAuMTgsIC0wLjA2LCAtMC4zOSwgLTAuMDksIC0wLjQ4XSwgWydjJywgLTAuMDMsIC0wLjI0LCAwLjEyLCAtMC40OCwgMC4zNiwgLTAuNjBdLCBbJ3onXSwgWydtJywgLTAuNDUsIDYuMTVdLCBbJ2MnLCAtMC4wMywgLTAuMTgsIC0wLjA2LCAtMC40MiwgLTAuMDYsIC0wLjU0XSwgWydsJywgLTAuMDMsIC0wLjE4XSwgWydsJywgLTAuMzMsIDAuMzBdLCBbJ2MnLCAtMC40MiwgMC4zNiwgLTAuODcsIDAuNzIsIC0xLjY4LCAxLjI5XSwgWydjJywgLTEuOTgsIDEuMzgsIC0yLjI1LCAxLjU5LCAtMi44NSwgMi4xNl0sIFsnYycsIC0wLjc1LCAwLjY5LCAtMS4yMywgMS40NCwgLTEuNDcsIDIuMTldLCBbJ2MnLCAtMC4xNSwgMC40NSwgLTAuMTgsIDAuNjMsIC0wLjIxLCAxLjM1XSwgWydsJywgMC4wMCwgMC42Nl0sIFsnbCcsIDAuMzksIC0wLjE4XSwgWydjJywgMS44MywgLTAuOTAsIDMuNDUsIC0xLjk1LCA0LjQ3LCAtMi45MV0sIFsnYycsIDAuOTMsIC0wLjkwLCAxLjUzLCAtMS44MywgMS43NCwgLTIuODJdLCBbJ2MnLCAwLjA2LCAtMC4zMywgMC4wNiwgLTAuODcsIDAuMDMsIC0xLjMyXSwgWyd6J10sIFsnbScsIC0wLjI3LCA0Ljg2XSwgWydjJywgLTAuMDMsIC0wLjIxLCAtMC4wNiwgLTAuMzYsIC0wLjA2LCAtMC4zNl0sIFsnYycsIDAuMDAsIC0wLjAzLCAtMC4xMiwgMC4wOSwgLTAuMjQsIDAuMjRdLCBbJ2MnLCAtMC4zOSwgMC40OCwgLTAuOTksIDEuMDgsIC0yLjE2LCAyLjE5XSwgWydjJywgLTEuNDcsIDEuMzgsIC0xLjkyLCAxLjgzLCAtMi40NiwgMi40OV0sIFsnYycsIC0wLjY2LCAwLjg3LCAtMS4wOCwgMS43NCwgLTEuMjksIDIuNThdLCBbJ2MnLCAtMC4wOSwgMC40MiwgLTAuMTUsIDAuODcsIC0wLjE1LCAxLjQ0XSwgWydsJywgMC4wMCwgMC41NF0sIFsnbCcsIDAuNDgsIC0wLjMzXSwgWydjJywgMS41MCwgLTEuMDIsIDIuNTgsIC0xLjg5LCAzLjUxLCAtMi44Ml0sIFsnYycsIDEuNDcsIC0xLjQ3LCAyLjI1LCAtMi44NSwgMi40MCwgLTQuMjZdLCBbJ2MnLCAwLjAzLCAtMC4zOSwgMC4wMywgLTEuMTcsIC0wLjAzLCAtMS43MV0sIFsneiddLCBbJ20nLCAtMC42NiwgNy42OF0sIFsnYycsIDAuMDMsIC0wLjE1LCAwLjAzLCAtMC42MCwgMC4wMywgLTAuOTldLCBbJ2wnLCAwLjAwLCAtMC43Ml0sIFsnbCcsIC0wLjI3LCAwLjMzXSwgWydsJywgLTEuNzQsIDEuOThdLCBbJ2MnLCAtMS43NywgMS45MiwgLTIuNDMsIDIuNzYsIC0yLjk3LCAzLjkwXSwgWydjJywgLTAuNTEsIDEuMDIsIC0wLjcyLCAxLjc3LCAtMC43NSwgMi45MV0sIFsnYycsIDAuMDAsIDAuNjMsIDAuMDAsIDAuNjMsIDAuMDYsIDAuNjBdLCBbJ2MnLCAwLjAzLCAtMC4wMywgMC4zMCwgLTAuMjcsIDAuNjMsIC0wLjU0XSwgWydjJywgMC42NiwgLTAuNjAsIDEuODYsIC0xLjgwLCAyLjMxLCAtMi4zMV0sIFsnYycsIDEuNjUsIC0xLjg5LCAyLjUyLCAtMy41NCwgMi43MCwgLTUuMTZdLCBbJ3onXV0sIHc6IDguNDg1LCBoOiAzMi45MzIgfSxcblx0J2NsZWZzLkMnOiB7IGQ6IFtbJ00nLCAwLjA2LCAtMTQuOTRdLCBbJ2wnLCAwLjA5LCAtMC4wNl0sIFsnbCcsIDEuOTIsIDAuMDBdLCBbJ2wnLCAxLjkyLCAwLjAwXSwgWydsJywgMC4wOSwgMC4wNl0sIFsnbCcsIDAuMDYsIDAuMDldLCBbJ2wnLCAwLjAwLCAxNC44NV0sIFsnbCcsIDAuMDAsIDE0LjgyXSwgWydsJywgLTAuMDYsIDAuMDldLCBbJ2wnLCAtMC4wOSwgMC4wNl0sIFsnbCcsIC0xLjkyLCAwLjAwXSwgWydsJywgLTEuOTIsIDAuMDBdLCBbJ2wnLCAtMC4wOSwgLTAuMDZdLCBbJ2wnLCAtMC4wNiwgLTAuMDldLCBbJ2wnLCAwLjAwLCAtMTQuODJdLCBbJ2wnLCAwLjAwLCAtMTQuODVdLCBbJ3onXSwgWydtJywgNS4zNywgMC4wMF0sIFsnYycsIDAuMDksIC0wLjA2LCAwLjA5LCAtMC4wNiwgMC41NywgLTAuMDZdLCBbJ2MnLCAwLjQ1LCAwLjAwLCAwLjQ1LCAwLjAwLCAwLjU0LCAwLjA2XSwgWydsJywgMC4wNiwgMC4wOV0sIFsnbCcsIDAuMDAsIDcuMTRdLCBbJ2wnLCAwLjAwLCA3LjExXSwgWydsJywgMC4wOSwgLTAuMDZdLCBbJ2MnLCAwLjE4LCAtMC4xOCwgMC43MiwgLTAuODQsIDAuOTYsIC0xLjIwXSwgWydjJywgMC4zMCwgLTAuNDUsIDAuNjYsIC0xLjE3LCAwLjg0LCAtMS42NV0sIFsnYycsIDAuMzYsIC0wLjkwLCAwLjU3LCAtMS44MywgMC42MCwgLTIuNzldLCBbJ2MnLCAwLjAzLCAtMC40OCwgMC4wMywgLTAuNTQsIDAuMDksIC0wLjYzXSwgWydjJywgMC4xMiwgLTAuMTgsIDAuMzYsIC0wLjIxLCAwLjU0LCAtMC4xMl0sIFsnYycsIDAuMTgsIDAuMDksIDAuMjEsIDAuMTUsIDAuMjQsIDAuNjZdLCBbJ2MnLCAwLjA2LCAwLjg3LCAwLjIxLCAxLjU2LCAwLjU3LCAyLjIyXSwgWydjJywgMC41MSwgMS4wMiwgMS4yNiwgMS42OCwgMi4yMiwgMS45Ml0sIFsnYycsIDAuMjEsIDAuMDYsIDAuMzMsIDAuMDYsIDAuNzgsIDAuMDZdLCBbJ2MnLCAwLjQ1LCAwLjAwLCAwLjU3LCAwLjAwLCAwLjg0LCAtMC4wNl0sIFsnYycsIDAuNDUsIC0wLjEyLCAwLjgxLCAtMC4zMywgMS4wOCwgLTAuNjBdLCBbJ2MnLCAwLjU3LCAtMC41NywgMC44NywgLTEuNDEsIDAuOTksIC0yLjg4XSwgWydjJywgMC4wNiwgLTAuNTQsIDAuMDYsIC0zLjAwLCAwLjAwLCAtMy41N10sIFsnYycsIC0wLjIxLCAtMi41OCwgLTAuODQsIC0zLjg3LCAtMi4xNiwgLTQuNTBdLCBbJ2MnLCAtMC40OCwgLTAuMjEsIC0xLjE3LCAtMC4zNiwgLTEuNzcsIC0wLjM2XSwgWydjJywgLTAuNjksIDAuMDAsIC0xLjI5LCAwLjI3LCAtMS41MCwgMC43Ml0sIFsnYycsIC0wLjA2LCAwLjE1LCAtMC4wNiwgMC4yMSwgLTAuMDYsIDAuNDJdLCBbJ2MnLCAwLjAwLCAwLjI0LCAwLjAwLCAwLjMwLCAwLjA2LCAwLjQ1XSwgWydjJywgMC4xMiwgMC4yNCwgMC4yNCwgMC4zOSwgMC42MywgMC42Nl0sIFsnYycsIDAuNDIsIDAuMzAsIDAuNTcsIDAuNDgsIDAuNjksIDAuNzJdLCBbJ2MnLCAwLjA2LCAwLjE1LCAwLjA2LCAwLjIxLCAwLjA2LCAwLjQ4XSwgWydjJywgMC4wMCwgMC4zOSwgLTAuMDMsIDAuNjMsIC0wLjIxLCAwLjk2XSwgWydjJywgLTAuMzAsIDAuNjAsIC0wLjg3LCAxLjA4LCAtMS41MCwgMS4yNl0sIFsnYycsIC0wLjI3LCAwLjA2LCAtMC44NywgMC4wNiwgLTEuMTQsIDAuMDBdLCBbJ2MnLCAtMC43OCwgLTAuMjQsIC0xLjQ0LCAtMC44NywgLTEuNjUsIC0xLjY4XSwgWydjJywgLTAuMTIsIC0wLjQyLCAtMC4wOSwgLTEuMTcsIDAuMDksIC0xLjcxXSwgWydjJywgMC41MSwgLTEuNjUsIDEuOTgsIC0yLjgyLCAzLjgxLCAtMy4wOV0sIFsnYycsIDAuODQsIC0wLjA5LCAyLjQ2LCAwLjAzLCAzLjUxLCAwLjI3XSwgWydjJywgMi4yMiwgMC41NywgMy42OSwgMS44MCwgNC40NCwgMy43NV0sIFsnYycsIDAuMzYsIDAuOTMsIDAuNTcsIDIuMTMsIDAuNTcsIDMuMzZdLCBbJ2MnLCAwLjAwLCAxLjQ0LCAtMC40OCwgMi43MywgLTEuMzgsIDMuODFdLCBbJ2MnLCAtMS4yNiwgMS41MCwgLTMuMjcsIDIuNDMsIC01LjI4LCAyLjQzXSwgWydjJywgLTAuNDgsIDAuMDAsIC0wLjUxLCAwLjAwLCAtMC43NSwgLTAuMDldLCBbJ2MnLCAtMC4xNSwgLTAuMDMsIC0wLjQ4LCAtMC4yMSwgLTAuNzgsIC0wLjM2XSwgWydjJywgLTAuNjksIC0wLjM2LCAtMC44NywgLTAuNDIsIC0xLjI2LCAtMC40Ml0sIFsnYycsIC0wLjI3LCAwLjAwLCAtMC4zMCwgMC4wMCwgLTAuNTEsIDAuMDldLCBbJ2MnLCAtMC41NywgMC4zMCwgLTAuODEsIDAuOTAsIC0wLjgxLCAyLjEwXSwgWydjJywgMC4wMCwgMS4yMywgMC4yNCwgMS44MywgMC44MSwgMi4xM10sIFsnYycsIDAuMjEsIDAuMDksIDAuMjQsIDAuMDksIDAuNTEsIDAuMDldLCBbJ2MnLCAwLjM5LCAwLjAwLCAwLjU3LCAtMC4wNiwgMS4yNiwgLTAuNDJdLCBbJ2MnLCAwLjMwLCAtMC4xNSwgMC42MywgLTAuMzMsIDAuNzgsIC0wLjM2XSwgWydjJywgMC4yNCwgLTAuMDksIDAuMjcsIC0wLjA5LCAwLjc1LCAtMC4wOV0sIFsnYycsIDIuMDEsIDAuMDAsIDQuMDIsIDAuOTMsIDUuMjgsIDIuNDBdLCBbJ2MnLCAwLjkwLCAxLjExLCAxLjM4LCAyLjQwLCAxLjM4LCAzLjg0XSwgWydjJywgMC4wMCwgMS41MCwgLTAuMzAsIDIuODgsIC0wLjg0LCAzLjk2XSwgWydjJywgLTAuNzgsIDEuNTksIC0yLjE5LCAyLjY0LCAtNC4xNywgMy4xNV0sIFsnYycsIC0xLjA1LCAwLjI0LCAtMi42NywgMC4zNiwgLTMuNTEsIDAuMjddLCBbJ2MnLCAtMS44MywgLTAuMjcsIC0zLjMwLCAtMS40NCwgLTMuODEsIC0zLjA5XSwgWydjJywgLTAuMTgsIC0wLjU0LCAtMC4yMSwgLTEuMjksIC0wLjA5LCAtMS43NF0sIFsnYycsIDAuMTUsIC0wLjYwLCAwLjYzLCAtMS4yMCwgMS4yMywgLTEuNDddLCBbJ2MnLCAwLjM2LCAtMC4xOCwgMC41NywgLTAuMjEsIDAuOTksIC0wLjIxXSwgWydjJywgMC40MiwgMC4wMCwgMC42MywgMC4wMywgMS4wMiwgMC4yMV0sIFsnYycsIDAuNDIsIDAuMjEsIDAuODQsIDAuNjMsIDEuMDUsIDEuMDVdLCBbJ2MnLCAwLjE4LCAwLjM2LCAwLjIxLCAwLjYwLCAwLjIxLCAwLjk2XSwgWydjJywgMC4wMCwgMC4zMCwgMC4wMCwgMC4zNiwgLTAuMDYsIDAuNTFdLCBbJ2MnLCAtMC4xMiwgMC4yNCwgLTAuMjcsIDAuNDIsIC0wLjY5LCAwLjcyXSwgWydjJywgLTAuNTcsIDAuNDIsIC0wLjY5LCAwLjYzLCAtMC42OSwgMS4wOF0sIFsnYycsIDAuMDAsIDAuMjQsIDAuMDAsIDAuMzAsIDAuMDYsIDAuNDVdLCBbJ2MnLCAwLjEyLCAwLjIxLCAwLjMwLCAwLjM5LCAwLjU3LCAwLjU0XSwgWydjJywgMC40MiwgMC4xOCwgMC44NywgMC4yMSwgMS41MywgMC4xNV0sIFsnYycsIDEuMDgsIC0wLjE1LCAxLjgwLCAtMC41NywgMi4zNCwgLTEuMzJdLCBbJ2MnLCAwLjU0LCAtMC43NSwgMC44NCwgLTEuODMsIDAuOTksIC0zLjUxXSwgWydjJywgMC4wNiwgLTAuNTcsIDAuMDYsIC0zLjAzLCAwLjAwLCAtMy41N10sIFsnYycsIC0wLjEyLCAtMS40NywgLTAuNDIsIC0yLjMxLCAtMC45OSwgLTIuODhdLCBbJ2MnLCAtMC4yNywgLTAuMjcsIC0wLjYzLCAtMC40OCwgLTEuMDgsIC0wLjYwXSwgWydjJywgLTAuMjcsIC0wLjA2LCAtMC4zOSwgLTAuMDYsIC0wLjg0LCAtMC4wNl0sIFsnYycsIC0wLjQ1LCAwLjAwLCAtMC41NywgMC4wMCwgLTAuNzgsIDAuMDZdLCBbJ2MnLCAtMS4xNCwgMC4yNywgLTIuMDEsIDEuMTcsIC0yLjQ2LCAyLjQ5XSwgWydjJywgLTAuMjEsIDAuNTcsIC0wLjMwLCAwLjk5LCAtMC4zMywgMS42NV0sIFsnYycsIC0wLjAzLCAwLjUxLCAtMC4wNiwgMC41NywgLTAuMjQsIDAuNjZdLCBbJ2MnLCAtMC4xMiwgMC4wNiwgLTAuMjcsIDAuMDYsIC0wLjM5LCAwLjAwXSwgWydjJywgLTAuMjEsIC0wLjA5LCAtMC4yMSwgLTAuMTUsIC0wLjI0LCAtMC43NV0sIFsnYycsIC0wLjA5LCAtMS45MiwgLTAuNzgsIC0zLjcyLCAtMi4wMSwgLTUuMTldLCBbJ2MnLCAtMC4xOCwgLTAuMjEsIC0wLjM2LCAtMC40MiwgLTAuMzksIC0wLjQ1XSwgWydsJywgLTAuMDksIC0wLjA2XSwgWydsJywgMC4wMCwgNy4xMV0sIFsnbCcsIDAuMDAsIDcuMTRdLCBbJ2wnLCAtMC4wNiwgMC4wOV0sIFsnYycsIC0wLjA5LCAwLjA2LCAtMC4wOSwgMC4wNiwgLTAuNTQsIDAuMDZdLCBbJ2MnLCAtMC40OCwgMC4wMCwgLTAuNDgsIDAuMDAsIC0wLjU3LCAtMC4wNl0sIFsnbCcsIC0wLjA2LCAtMC4wOV0sIFsnbCcsIDAuMDAsIC0xNC44Ml0sIFsnbCcsIDAuMDAsIC0xNC44NV0sIFsneiddXSwgdzogMjAuMzEsIGg6IDI5Ljk3IH0sXG5cdCdjbGVmcy5GJzogeyBkOiBbWydNJywgNi4zMCwgLTcuODBdLCBbJ2MnLCAwLjM2LCAtMC4wMywgMS42NSwgMC4wMCwgMi4xMywgMC4wM10sIFsnYycsIDMuNjAsIDAuNDIsIDYuMDMsIDIuMTAsIDYuOTMsIDQuODZdLCBbJ2MnLCAwLjI3LCAwLjg0LCAwLjM2LCAxLjUwLCAwLjM2LCAyLjU4XSwgWydjJywgMC4wMCwgMC45MCwgLTAuMDMsIDEuMzUsIC0wLjE4LCAyLjE2XSwgWydjJywgLTAuNzgsIDMuNzgsIC0zLjU0LCA3LjA4LCAtOC4zNywgOS45Nl0sIFsnYycsIC0xLjc0LCAxLjA1LCAtMy44NywgMi4xMywgLTYuMTgsIDMuMTJdLCBbJ2MnLCAtMC4zOSwgMC4xOCwgLTAuNzUsIDAuMzMsIC0wLjgxLCAwLjM2XSwgWydjJywgLTAuMDYsIDAuMDMsIC0wLjE1LCAwLjA2LCAtMC4xOCwgMC4wNl0sIFsnYycsIC0wLjE1LCAwLjAwLCAtMC4zMywgLTAuMTgsIC0wLjMzLCAtMC4zM10sIFsnYycsIDAuMDAsIC0wLjE1LCAwLjA2LCAtMC4yMSwgMC41MSwgLTAuNDhdLCBbJ2MnLCAzLjAwLCAtMS43NywgNS4xMywgLTMuMjEsIDYuODQsIC00Ljc0XSwgWydjJywgMC41MSwgLTAuNDUsIDEuNTksIC0xLjUwLCAxLjk1LCAtMS45NV0sIFsnYycsIDEuODksIC0yLjE5LCAyLjg4LCAtNC4zMiwgMy4xNSwgLTYuNzhdLCBbJ2MnLCAwLjA2LCAtMC40MiwgMC4wNiwgLTEuNzcsIDAuMDAsIC0yLjE5XSwgWydjJywgLTAuMjQsIC0yLjAxLCAtMC45MywgLTMuNjMsIC0yLjA0LCAtNC43MV0sIFsnYycsIC0wLjYzLCAtMC42MywgLTEuMjksIC0xLjAyLCAtMi4wNywgLTEuMjBdLCBbJ2MnLCAtMS42MiwgLTAuMzksIC0zLjM2LCAwLjE1LCAtNC41NiwgMS40NF0sIFsnYycsIC0wLjU0LCAwLjYwLCAtMS4wNSwgMS40NywgLTEuMzIsIDIuMjJdLCBbJ2wnLCAtMC4wOSwgMC4yMV0sIFsnbCcsIDAuMjQsIC0wLjEyXSwgWydjJywgMC4zOSwgLTAuMjEsIDAuNjMsIC0wLjI0LCAxLjExLCAtMC4yNF0sIFsnYycsIDAuMzAsIDAuMDAsIDAuNDUsIDAuMDAsIDAuNjYsIDAuMDZdLCBbJ2MnLCAxLjkyLCAwLjQ4LCAyLjg1LCAyLjU1LCAxLjk1LCA0LjM4XSwgWydjJywgLTAuNDUsIDAuOTksIC0xLjQxLCAxLjYyLCAtMi40NiwgMS43MV0sIFsnYycsIC0xLjQ3LCAwLjA5LCAtMi45MSwgLTAuODcsIC0zLjM5LCAtMi4yNV0sIFsnYycsIC0wLjE4LCAtMC41NywgLTAuMjEsIC0xLjMyLCAtMC4wMywgLTIuMjhdLCBbJ2MnLCAwLjM5LCAtMi4yNSwgMS44MywgLTQuMjAsIDMuODEsIC01LjE5XSwgWydjJywgMC42OSwgLTAuMzYsIDEuNTksIC0wLjYwLCAyLjM3LCAtMC42OV0sIFsneiddLCBbJ20nLCAxMS41OCwgMi41Ml0sIFsnYycsIDAuODQsIC0wLjIxLCAxLjcxLCAwLjMwLCAxLjg5LCAxLjE0XSwgWydjJywgMC4zMCwgMS4xNywgLTAuNzIsIDIuMTksIC0xLjg5LCAxLjg5XSwgWydjJywgLTAuOTksIC0wLjIxLCAtMS41MCwgLTEuMzIsIC0xLjAyLCAtMi4yNV0sIFsnYycsIDAuMTgsIC0wLjM5LCAwLjYwLCAtMC42OSwgMS4wMiwgLTAuNzhdLCBbJ3onXSwgWydtJywgMC4wMCwgNy41MF0sIFsnYycsIDAuODQsIC0wLjIxLCAxLjcxLCAwLjMwLCAxLjg5LCAxLjE0XSwgWydjJywgMC4yMSwgMC44NywgLTAuMzAsIDEuNzEsIC0xLjE0LCAxLjg5XSwgWydjJywgLTAuODcsIDAuMjEsIC0xLjcxLCAtMC4zMCwgLTEuODksIC0xLjE0XSwgWydjJywgLTAuMjEsIC0wLjg0LCAwLjMwLCAtMS43MSwgMS4xNCwgLTEuODldLCBbJ3onXV0sIHc6IDIwLjE1MywgaDogMjMuMTQyIH0sXG5cdCdjbGVmcy5HJzogeyBkOiBbWydNJywgOS42OSwgLTM3LjQxXSwgWydjJywgMC4wOSwgLTAuMDksIDAuMjQsIC0wLjA2LCAwLjM2LCAwLjAwXSwgWydjJywgMC4xMiwgMC4wOSwgMC41NywgMC42MCwgMC45NiwgMS4xMV0sIFsnYycsIDEuNzcsIDIuMzQsIDMuMjEsIDUuODUsIDMuNTcsIDguNzNdLCBbJ2MnLCAwLjIxLCAxLjU2LCAwLjAzLCAzLjI3LCAtMC40NSwgNC44Nl0sIFsnYycsIC0wLjY5LCAyLjMxLCAtMS45MiwgNC40NywgLTQuMjMsIDcuNDRdLCBbJ2MnLCAtMC4zMCwgMC4zOSwgLTAuNTcsIDAuNzIsIC0wLjYwLCAwLjc1XSwgWydjJywgLTAuMDMsIDAuMDYsIDAuMDAsIDAuMTUsIDAuMTgsIDAuNzhdLCBbJ2MnLCAwLjU0LCAxLjY4LCAxLjM4LCA0LjQ0LCAxLjY4LCA1LjQ5XSwgWydsJywgMC4wOSwgMC40Ml0sIFsnbCcsIDAuMzksIDAuMDBdLCBbJ2MnLCAxLjQ3LCAwLjA5LCAyLjc2LCAwLjUxLCAzLjk2LCAxLjI5XSwgWydjJywgMS44MywgMS4yMywgMy4wNiwgMy4yMSwgMy4zOSwgNS41Ml0sIFsnYycsIDAuMDksIDAuNDUsIDAuMTIsIDEuMjksIDAuMDYsIDEuNzRdLCBbJ2MnLCAtMC4wOSwgMS4wMiwgLTAuMzMsIDEuODMsIC0wLjc1LCAyLjczXSwgWydjJywgLTAuODQsIDEuNzEsIC0yLjI4LCAzLjA2LCAtNC4wMiwgMy43Ml0sIFsnbCcsIC0wLjMzLCAwLjEyXSwgWydsJywgMC4wMywgMS4yNl0sIFsnYycsIDAuMDAsIDEuNzQsIC0wLjA2LCAzLjYzLCAtMC4yMSwgNC42Ml0sIFsnYycsIC0wLjQ1LCAzLjA2LCAtMi4xOSwgNS40OSwgLTQuNDcsIDYuMjFdLCBbJ2MnLCAtMC41NywgMC4xOCwgLTAuOTAsIDAuMjEsIC0xLjU5LCAwLjIxXSwgWydjJywgLTAuNjksIDAuMDAsIC0xLjAyLCAtMC4wMywgLTEuNjUsIC0wLjIxXSwgWydjJywgLTEuMTQsIC0wLjI3LCAtMi4xMywgLTAuODQsIC0yLjk0LCAtMS42NV0sIFsnYycsIC0wLjk5LCAtMC45OSwgLTEuNTYsIC0yLjE2LCAtMS43MSwgLTMuNTRdLCBbJ2MnLCAtMC4wOSwgLTAuODEsIDAuMDYsIC0xLjUzLCAwLjQ1LCAtMi4xM10sIFsnYycsIDAuNjMsIC0wLjk5LCAxLjgzLCAtMS41NiwgMy4wMCwgLTEuNTNdLCBbJ2MnLCAxLjUwLCAwLjA5LCAyLjY0LCAxLjMyLCAyLjczLCAyLjk0XSwgWydjJywgMC4wNiwgMS40NywgLTAuOTMsIDIuNzAsIC0yLjM3LCAyLjk3XSwgWydjJywgLTAuNDUsIDAuMDYsIC0wLjg0LCAwLjAzLCAtMS4yOSwgLTAuMDldLCBbJ2wnLCAtMC4yMSwgLTAuMDldLCBbJ2wnLCAwLjA5LCAwLjEyXSwgWydjJywgMC4zOSwgMC41NCwgMC43OCwgMC45MywgMS4zMiwgMS4yNl0sIFsnYycsIDEuMzUsIDAuODcsIDMuMDYsIDEuMDIsIDQuMzUsIDAuMzZdLCBbJ2MnLCAxLjQ0LCAtMC43MiwgMi41MiwgLTIuMjgsIDIuOTcsIC00LjM1XSwgWydjJywgMC4xNSwgLTAuNjYsIDAuMjQsIC0xLjUwLCAwLjMwLCAtMy4wM10sIFsnYycsIDAuMDMsIC0wLjg0LCAwLjAzLCAtMi45NCwgMC4wMCwgLTMuMDBdLCBbJ2MnLCAtMC4wMywgMC4wMCwgLTAuMTgsIDAuMDAsIC0wLjM2LCAwLjAzXSwgWydjJywgLTAuNjYsIDAuMTIsIC0wLjk5LCAwLjEyLCAtMS44MywgMC4xMl0sIFsnYycsIC0xLjA1LCAwLjAwLCAtMS43MSwgLTAuMDYsIC0yLjYxLCAtMC4zMF0sIFsnYycsIC00LjAyLCAtMC45OSwgLTcuMTEsIC00LjM1LCAtNy44MCwgLTguNDZdLCBbJ2MnLCAtMC4xMiwgLTAuNjYsIC0wLjEyLCAtMC45OSwgLTAuMTIsIC0xLjgzXSwgWydjJywgMC4wMCwgLTAuODQsIDAuMDAsIC0xLjE0LCAwLjE1LCAtMS45Ml0sIFsnYycsIDAuMzYsIC0yLjI4LCAxLjQxLCAtNC42MiwgMy4zMCwgLTcuMjldLCBbJ2wnLCAyLjc5LCAtMy42MF0sIFsnYycsIDAuNTQsIC0wLjY2LCAwLjk2LCAtMS4yMCwgMC45NiwgLTEuMjNdLCBbJ2MnLCAwLjAwLCAtMC4wMywgLTAuMDksIC0wLjMzLCAtMC4xOCwgLTAuNjldLCBbJ2MnLCAtMC45NiwgLTMuMjEsIC0xLjQxLCAtNS4yOCwgLTEuNTksIC03LjY4XSwgWydjJywgLTAuMTIsIC0xLjM4LCAtMC4xNSwgLTMuMDksIC0wLjA2LCAtMy45Nl0sIFsnYycsIDAuMzMsIC0yLjY3LCAxLjM4LCAtNS4wNywgMy4xMiwgLTcuMDhdLCBbJ2MnLCAwLjM2LCAtMC40MiwgMC45OSwgLTEuMDUsIDEuMTcsIC0xLjE0XSwgWyd6J10sIFsnbScsIDIuMDEsIDQuNzFdLCBbJ2MnLCAtMC4xNSwgLTAuMzAsIC0wLjMwLCAtMC41NCwgLTAuMzAsIC0wLjU0XSwgWydjJywgLTAuMDMsIDAuMDAsIC0wLjE4LCAwLjA5LCAtMC4zMCwgMC4yMV0sIFsnYycsIC0yLjQwLCAxLjc0LCAtMy44NywgNC4yMCwgLTQuMjYsIDcuMTFdLCBbJ2MnLCAtMC4wNiwgMC41NCwgLTAuMDYsIDEuNDEsIC0wLjAzLCAxLjg5XSwgWydjJywgMC4wOSwgMS4yOSwgMC40OCwgMy4xMiwgMS4wOCwgNS4yMl0sIFsnYycsIDAuMTUsIDAuNDIsIDAuMjQsIDAuNzgsIDAuMjQsIDAuODFdLCBbJ2MnLCAwLjAwLCAwLjAzLCAwLjg0LCAtMS4xMSwgMS4yMywgLTEuNjhdLCBbJ2MnLCAxLjg5LCAtMi43MywgMi44OCwgLTUuMDcsIDMuMTUsIC03LjUzXSwgWydjJywgMC4wOSwgLTAuNTcsIDAuMTIsIC0xLjc0LCAwLjA2LCAtMi4zN10sIFsnYycsIC0wLjA5LCAtMS4yMywgLTAuMjcsIC0xLjkyLCAtMC44NywgLTMuMTJdLCBbJ3onXSwgWydtJywgLTIuOTQsIDIwLjcwXSwgWydjJywgLTAuMjEsIC0wLjcyLCAtMC4zOSwgLTEuMzIsIC0wLjQyLCAtMS4zMl0sIFsnYycsIDAuMDAsIDAuMDAsIC0xLjIwLCAxLjQ3LCAtMS44NiwgMi4zN10sIFsnYycsIC0yLjc5LCAzLjYzLCAtNC4wMiwgNi4zMCwgLTQuMzUsIDkuMzBdLCBbJ2MnLCAtMC4wMywgMC4yMSwgLTAuMDMsIDAuNjksIC0wLjAzLCAxLjA4XSwgWydjJywgMC4wMCwgMC42OSwgMC4wMCwgMC43NSwgMC4wNiwgMS4xMV0sIFsnYycsIDAuMTIsIDAuNTQsIDAuMjcsIDAuOTksIDAuNTEsIDEuNDddLCBbJ2MnLCAwLjY5LCAxLjM4LCAxLjgzLCAyLjU1LCAzLjQyLCAzLjQyXSwgWydjJywgMC45NiwgMC41NCwgMi4wNywgMC45MCwgMy4yMSwgMS4wOF0sIFsnYycsIDAuNzgsIDAuMTIsIDIuMDQsIDAuMTIsIDIuOTQsIC0wLjAzXSwgWydjJywgMC41MSwgLTAuMDYsIDAuNDUsIC0wLjAzLCAwLjQyLCAtMC4zMF0sIFsnYycsIC0wLjI0LCAtMy4zMywgLTAuNzIsIC02LjMzLCAtMS42MiwgLTEwLjA4XSwgWydjJywgLTAuMDksIC0wLjM5LCAtMC4xOCwgLTAuNzUsIC0wLjE4LCAtMC43OF0sIFsnYycsIC0wLjAzLCAtMC4wMywgLTAuNDIsIDAuMDAsIC0wLjgxLCAwLjA5XSwgWydjJywgLTAuOTAsIDAuMTgsIC0xLjY1LCAwLjU3LCAtMi4yMiwgMS4xNF0sIFsnYycsIC0wLjcyLCAwLjcyLCAtMS4wOCwgMS42NSwgLTEuMDUsIDIuNjRdLCBbJ2MnLCAwLjA2LCAwLjk2LCAwLjQ4LCAxLjgzLCAxLjIzLCAyLjU4XSwgWydjJywgMC4zNiwgMC4zNiwgMC43MiwgMC42MywgMS4xNywgMC45MF0sIFsnYycsIDAuMzMsIDAuMTgsIDAuMzYsIDAuMjEsIDAuNDIsIDAuMzNdLCBbJ2MnLCAwLjE4LCAwLjQyLCAtMC4xOCwgMC45MCwgLTAuNjAsIDAuODddLCBbJ2MnLCAtMC4xOCwgLTAuMDMsIC0wLjg0LCAtMC4zNiwgLTEuMjYsIC0wLjYzXSwgWydjJywgLTAuNzgsIC0wLjUxLCAtMS4zOCwgLTEuMTEsIC0xLjg2LCAtMS44M10sIFsnYycsIC0xLjc3LCAtMi43MCwgLTAuOTksIC02LjQyLCAxLjcxLCAtOC4xOV0sIFsnYycsIDAuMzAsIC0wLjIxLCAwLjgxLCAtMC40OCwgMS4xNywgLTAuNjNdLCBbJ2MnLCAwLjMwLCAtMC4wOSwgMS4wMiwgLTAuMzAsIDEuMTQsIC0wLjMwXSwgWydjJywgMC4wNiwgMC4wMCwgMC4wOSwgMC4wMCwgMC4wOSwgLTAuMDNdLCBbJ2MnLCAwLjAzLCAtMC4wMywgLTAuNTEsIC0xLjkyLCAtMS4yMywgLTQuMjZdLCBbJ3onXSwgWydtJywgMy43OCwgNy40MV0sIFsnYycsIC0wLjE4LCAtMC4wMywgLTAuMzYsIC0wLjA2LCAtMC4zOSwgLTAuMDZdLCBbJ2MnLCAtMC4wMywgMC4wMCwgMC4wMCwgMC4yMSwgMC4xOCwgMS4wMl0sIFsnYycsIDAuNzUsIDMuMTgsIDEuMjYsIDYuMzAsIDEuNTAsIDkuMDldLCBbJ2MnLCAwLjA2LCAwLjcyLCAwLjAwLCAwLjY5LCAwLjUxLCAwLjQyXSwgWydjJywgMC43OCwgLTAuMzYsIDEuNDQsIC0wLjk2LCAxLjk4LCAtMS43N10sIFsnYycsIDEuMDgsIC0xLjYyLCAxLjIwLCAtMy42OSwgMC4zMCwgLTUuNTVdLCBbJ2MnLCAtMC44MSwgLTEuNjIsIC0yLjMxLCAtMi43OSwgLTQuMDgsIC0zLjE1XSwgWyd6J11dLCB3OiAxOS4wNTEsIGg6IDU3LjA1NyB9LFxuXHQnY2xlZnMucGVyYyc6IHsgZDogW1snTScsIDUuMDcsIC03LjQ0XSwgWydsJywgMC4wOSwgLTAuMDZdLCBbJ2wnLCAxLjUzLCAwLjAwXSwgWydsJywgMS41MywgMC4wMF0sIFsnbCcsIDAuMDksIDAuMDZdLCBbJ2wnLCAwLjA2LCAwLjA5XSwgWydsJywgMC4wMCwgNy4zNV0sIFsnbCcsIDAuMDAsIDcuMzJdLCBbJ2wnLCAtMC4wNiwgMC4wOV0sIFsnbCcsIC0wLjA5LCAwLjA2XSwgWydsJywgLTEuNTMsIDAuMDBdLCBbJ2wnLCAtMS41MywgMC4wMF0sIFsnbCcsIC0wLjA5LCAtMC4wNl0sIFsnbCcsIC0wLjA2LCAtMC4wOV0sIFsnbCcsIDAuMDAsIC03LjMyXSwgWydsJywgMC4wMCwgLTcuMzVdLCBbJ3onXSwgWydtJywgNi42MywgMC4wMF0sIFsnbCcsIDAuMDksIC0wLjA2XSwgWydsJywgMS41MywgMC4wMF0sIFsnbCcsIDEuNTMsIDAuMDBdLCBbJ2wnLCAwLjA5LCAwLjA2XSwgWydsJywgMC4wNiwgMC4wOV0sIFsnbCcsIDAuMDAsIDcuMzVdLCBbJ2wnLCAwLjAwLCA3LjMyXSwgWydsJywgLTAuMDYsIDAuMDldLCBbJ2wnLCAtMC4wOSwgMC4wNl0sIFsnbCcsIC0xLjUzLCAwLjAwXSwgWydsJywgLTEuNTMsIDAuMDBdLCBbJ2wnLCAtMC4wOSwgLTAuMDZdLCBbJ2wnLCAtMC4wNiwgLTAuMDldLCBbJ2wnLCAwLjAwLCAtNy4zMl0sIFsnbCcsIDAuMDAsIC03LjM1XSwgWyd6J11dLCB3OiAyMSwgaDogMTQuOTcgfSxcblx0J3RhYi5iaWcnOiB7IGQ6IFtbJ00nLCAyMC4xNiwgLTIxLjY2XSwgWydjJywgMC4yNCwgLTAuMDksIDAuNjYsIDAuMDksIDAuNzgsIDAuMzZdLCBbJ2MnLCAwLjA5LCAwLjIxLCAwLjA5LCAwLjI0LCAtMC4xOCwgMC41NF0sIFsnYycsIC0wLjc4LCAwLjgxLCAtMS44NiwgMS40NCwgLTIuOTQsIDEuNzFdLCBbJ2MnLCAtMC44NywgMC4yNCwgLTEuNzEsIDAuMjQsIC0yLjU1LCAwLjAzXSwgWydsJywgLTAuMDYsIC0wLjAzXSwgWydsJywgLTAuMTgsIDAuOTldLCBbJ2MnLCAtMC4zMywgMS45OCwgLTAuNzUsIDQuMjYsIC0wLjk2LCA1LjA0XSwgWydjJywgLTAuNDIsIDEuNjUsIC0xLjI2LCAzLjE4LCAtMi4yOCwgNC4xNF0sIFsnYycsIC0wLjU3LCAwLjU3LCAtMS4xNywgMC45MCwgLTEuODYsIDEuMDhdLCBbJ2MnLCAtMC4xOCwgMC4wNiwgLTAuMzMsIDAuMDYsIC0wLjY2LCAwLjA2XSwgWydjJywgLTAuNTQsIDAuMDAsIC0wLjc4LCAtMC4wMywgLTEuMjMsIC0wLjI3XSwgWydjJywgLTAuMzksIC0wLjE4LCAtMC42NiwgLTAuMzksIC0xLjM4LCAtMC45OV0sIFsnYycsIC0wLjMwLCAtMC4yNCwgLTAuNjYsIC0wLjUxLCAtMC43NSwgLTAuNTddLCBbJ2MnLCAtMC4yMSwgLTAuMTUsIC0wLjI3LCAtMC4yNCwgLTAuMjQsIC0wLjQ1XSwgWydjJywgMC4wNiwgLTAuMjcsIDAuMzYsIC0wLjYwLCAwLjYwLCAtMC42Nl0sIFsnYycsIDAuMTgsIC0wLjAzLCAwLjMzLCAwLjA2LCAwLjkwLCAwLjU3XSwgWydjJywgMC40OCwgMC40MiwgMC43MiwgMC41NywgMC45MywgMC42OV0sIFsnYycsIDAuNjYsIDAuMzMsIDEuMzgsIDAuMjEsIDEuOTUsIC0wLjM2XSwgWydjJywgMC42MywgLTAuNjAsIDEuMDUsIC0xLjYyLCAxLjIzLCAtMy4wMF0sIFsnYycsIDAuMDMsIC0wLjE4LCAwLjA5LCAtMC42NiwgMC4wOSwgLTEuMTFdLCBbJ2MnLCAwLjA5LCAtMS41NiwgMC4zMywgLTMuODEsIDAuNTcsIC01LjQ5XSwgWydjJywgMC4wNiwgLTAuMzMsIDAuMDksIC0wLjYzLCAwLjA5LCAtMC42M10sIFsnYycsIC0wLjAzLCAtMC4wMywgLTAuODEsIC0wLjEyLCAtMS4wMiwgLTAuMTJdLCBbJ2MnLCAtMC41NywgMC4wMCwgLTEuMzIsIDAuMTIsIC0xLjgwLCAwLjMzXSwgWydjJywgLTAuODcsIDAuMzAsIC0xLjM1LCAwLjc4LCAtMS41MCwgMS40MV0sIFsnYycsIC0wLjE4LCAwLjYzLCAwLjA5LCAxLjI2LCAwLjY2LCAxLjY1XSwgWydjJywgMC4xMiwgMC4wNiwgMC4xNSwgMC4xMiwgMC4xOCwgMC4yNF0sIFsnYycsIDAuMDksIDAuMjcsIDAuMDYsIDAuNTcsIC0wLjA5LCAwLjc1XSwgWydjJywgLTAuMDMsIDAuMDYsIC0wLjEyLCAwLjA5LCAtMC4yNywgMC4xNV0sIFsnYycsIC0wLjcyLCAwLjIxLCAtMS40NCwgMC4xNSwgLTIuMTAsIC0wLjE4XSwgWydjJywgLTAuNTQsIC0wLjI3LCAtMC45NiwgLTAuNjYsIC0xLjIwLCAtMS4xNF0sIFsnYycsIC0wLjM5LCAtMC43NSwgLTAuMzMsIC0xLjc0LCAwLjE1LCAtMi41Ml0sIFsnYycsIDAuMjcsIC0wLjQyLCAwLjg0LCAtMC45MywgMS40MSwgLTEuMjNdLCBbJ2MnLCAxLjE3LCAtMC41NywgMi44OCwgLTAuOTAsIDQuODAsIC0wLjkwXSwgWydjJywgMC42OSwgMC4wMCwgMC43OCwgMC4wMCwgMS4wOCwgMC4wNl0sIFsnYycsIDAuNDUsIDAuMDksIDEuMTEsIDAuMzAsIDIuMDcsIDAuNjBdLCBbJ2MnLCAxLjQ3LCAwLjQ4LCAxLjgzLCAwLjU3LCAyLjU1LCAwLjU0XSwgWydjJywgMS4wMiwgLTAuMDYsIDIuMDQsIC0wLjQ1LCAyLjk0LCAtMS4xMV0sIFsnYycsIDAuMTIsIC0wLjA5LCAwLjI0LCAtMC4xOCwgMC4yNywgLTAuMThdLCBbJ3onXSwgWydtJywgLTUuODgsIDEzLjA1XSwgWydjJywgMC4yMSwgLTAuMDMsIDAuODEsIDAuMDAsIDEuMDgsIDAuMDZdLCBbJ2MnLCAwLjQ4LCAwLjEyLCAwLjkwLCAwLjQyLCAwLjk5LCAwLjY5XSwgWydjJywgMC4wMywgMC4wOSwgMC4wMywgMC4xNSwgMC4wMCwgMC4yN10sIFsnYycsIDAuMDAsIDAuMDksIC0wLjAzLCAwLjU3LCAtMC4wNiwgMS4wOF0sIFsnYycsIC0wLjA5LCAyLjE5LCAtMC4yNCwgNS43NiwgLTAuMzksIDguMjhdLCBbJ2MnLCAtMC4wNiwgMS41MywgLTAuMDYsIDEuNzcsIDAuMDMsIDIuMDFdLCBbJ2MnLCAwLjA5LCAwLjE4LCAwLjE1LCAwLjI0LCAwLjMwLCAwLjMwXSwgWydjJywgMC4yNCwgMC4xMiwgMC41NCwgMC4wNiwgMS4yMywgLTAuMjddLCBbJ2MnLCAwLjU3LCAtMC4yNywgMC42NiwgLTAuMzAsIDAuNzUsIC0wLjI0XSwgWydjJywgMC4wOSwgMC4wNiwgMC4xOCwgMC4zMCwgMC4xOCwgMC40NV0sIFsnYycsIDAuMDAsIDAuMzMsIC0wLjE1LCAwLjUxLCAtMC40NSwgMC42M10sIFsnYycsIC0wLjEyLCAwLjAzLCAtMC4zOSwgMC4xNSwgLTAuNjAsIDAuMjddLCBbJ2MnLCAtMS4xNywgMC42MCwgLTEuMzgsIDAuNjksIC0xLjgwLCAwLjcyXSwgWydjJywgLTAuNDUsIDAuMDMsIC0wLjc4LCAtMC4wOSwgLTEuMDgsIC0wLjM5XSwgWydjJywgLTAuMzksIC0wLjQyLCAtMC42NiwgLTEuMjAsIC0xLjAyLCAtMy4xMl0sIFsnYycsIC0wLjI0LCAtMS4yMywgLTAuMzYsIC0yLjA3LCAtMC41NCwgLTMuNzVdLCBbJ2wnLCAwLjAwLCAtMC4xOF0sIFsnbCcsIC0wLjM2LCAwLjQ1XSwgWydjJywgLTAuNjAsIDAuNzUsIC0xLjMyLCAxLjU5LCAtMS45NSwgMi4yNV0sIFsnYycsIC0wLjE1LCAwLjE4LCAtMC4yNywgMC4zMCwgLTAuMjcsIDAuMzNdLCBbJ2MnLCAwLjAwLCAwLjAwLCAwLjA2LCAwLjA5LCAwLjE1LCAwLjE4XSwgWydjJywgMC4yNCwgMC4zMywgMC42MCwgMC41NywgMS4wNSwgMC42OV0sIFsnYycsIDAuMTgsIDAuMDYsIDAuMzAsIDAuMDYsIDAuNjksIDAuMDZdLCBbJ2wnLCAwLjQ4LCAwLjAzXSwgWydsJywgMC4wNiwgMC4xMl0sIFsnYycsIDAuMTUsIDAuMjcsIDAuMDMsIDAuNzIsIC0wLjIxLCAwLjkwXSwgWydjJywgLTAuMTgsIDAuMTIsIC0wLjkzLCAwLjI3LCAtMS40MSwgMC4yN10sIFsnYycsIC0wLjg0LCAwLjAwLCAtMS41OSwgLTAuMzAsIC0xLjk4LCAtMC44NF0sIFsnbCcsIC0wLjEyLCAtMC4xNV0sIFsnbCcsIC0wLjQ1LCAwLjQyXSwgWydjJywgLTAuOTksIDAuODcsIC0xLjUzLCAxLjMyLCAtMi4xNiwgMS43NF0sIFsnYycsIC0wLjc4LCAwLjUxLCAtMS41MCwgMC44NCwgLTIuMTAsIDAuOTNdLCBbJ2MnLCAtMC42OSwgMC4xMiwgLTEuMjAsIDAuMDMsIC0xLjk1LCAtMC40Ml0sIFsnYycsIC0wLjIxLCAtMC4xMiwgLTAuNTEsIC0wLjI3LCAtMC42NiwgLTAuMzZdLCBbJ2MnLCAtMC4yNCwgLTAuMTIsIC0wLjMwLCAtMC4xOCwgLTAuMzMsIC0wLjI0XSwgWydjJywgLTAuMTIsIC0wLjI3LCAwLjE1LCAtMC43OCwgMC40NSwgLTAuOTNdLCBbJ2MnLCAwLjI0LCAtMC4xMiwgMC4zMywgLTAuMDksIDAuOTAsIDAuMThdLCBbJ2MnLCAwLjYwLCAwLjMwLCAwLjg0LCAwLjM5LCAxLjIwLCAwLjM2XSwgWydjJywgMC44NywgLTAuMDksIDEuNzcsIC0wLjY5LCAzLjI0LCAtMi4zMV0sIFsnYycsIDIuNjcsIC0yLjg1LCA0LjU5LCAtNS45NCwgNS43MCwgLTkuMTVdLCBbJ2MnLCAwLjE1LCAtMC40NSwgMC4yNCwgLTAuNjMsIDAuNDIsIC0wLjgxXSwgWydjJywgMC4yMSwgLTAuMjQsIDAuNjAsIC0wLjQ1LCAwLjk5LCAtMC41MV0sIFsneiddLCBbJ20nLCAtMy45OSwgMTYuMDVdLCBbJ2MnLCAwLjE4LCAwLjAwLCAwLjY5LCAtMC4wMywgMS4xNywgMC4wMF0sIFsnYycsIDMuMjcsIDAuMDMsIDUuMzcsIDAuNzUsIDYuMDAsIDIuMDddLCBbJ2MnLCAwLjQ1LCAwLjk5LCAwLjEyLCAyLjQwLCAtMC44MSwgMy40Ml0sIFsnYycsIC0wLjI0LCAwLjI3LCAtMC41NywgMC41NywgLTAuODQsIDAuNzVdLCBbJ2MnLCAtMC4wOSwgMC4wNiwgLTAuMTgsIDAuMDksIC0wLjE4LCAwLjEyXSwgWydjJywgMC4wMCwgMC4wMCwgMC4xOCwgMC4wMywgMC40MiwgMC4wOV0sIFsnYycsIDEuMjMsIDAuMzAsIDIuMDEsIDAuODEsIDIuMzcsIDEuNTldLCBbJ2MnLCAwLjI3LCAwLjU0LCAwLjMwLCAxLjMyLCAwLjA5LCAyLjEwXSwgWydjJywgLTAuMTIsIDAuMzYsIC0wLjQ1LCAxLjA1LCAtMC42OSwgMS4zNV0sIFsnYycsIC0wLjg3LCAxLjE3LCAtMi4xMCwgMS45MiwgLTMuNTQsIDIuMjVdLCBbJ2MnLCAtMC4zNiwgMC4wNiwgLTAuNDgsIDAuMDYsIC0wLjk2LCAwLjA2XSwgWydjJywgLTAuNDUsIDAuMDAsIC0wLjY2LCAwLjAwLCAtMC44NCwgLTAuMDNdLCBbJ2MnLCAtMC44NCwgLTAuMTgsIC0xLjQ3LCAtMC41MSwgLTIuMDcsIC0xLjExXSwgWydjJywgLTAuMzMsIC0wLjMzLCAtMC40NSwgLTAuNTEsIC0wLjQ1LCAtMC42M10sIFsnYycsIDAuMDAsIC0wLjA2LCAwLjAzLCAtMC4xNSwgMC4wNiwgLTAuMjRdLCBbJ2MnLCAwLjE4LCAtMC4zMywgMC42OSwgLTAuNjAsIDAuOTMsIC0wLjQ4XSwgWydjJywgMC4wMywgMC4wMywgMC4xNSwgMC4xMiwgMC4yNywgMC4yNF0sIFsnYycsIDAuMzksIDAuNDIsIDAuOTksIDAuNTcsIDEuNjIsIDAuNDVdLCBbJ2MnLCAxLjA1LCAtMC4yMSwgMS45OCwgLTEuMDIsIDIuMzEsIC0yLjAxXSwgWydjJywgMC40OCwgLTEuNTMsIC0wLjQ4LCAtMi41NSwgLTIuNTgsIC0yLjY3XSwgWydjJywgLTAuMjEsIDAuMDAsIC0wLjM2LCAtMC4wMywgLTAuNDIsIC0wLjA2XSwgWydjJywgLTAuMTUsIC0wLjA5LCAtMC4yMSwgLTAuNTEsIC0wLjA2LCAtMC43OF0sIFsnYycsIDAuMTIsIC0wLjI3LCAwLjI0LCAtMC4zMywgMC42MCwgLTAuMzZdLCBbJ2MnLCAwLjU3LCAtMC4wNiwgMS4xMSwgLTAuNDIsIDEuNTAsIC0wLjk5XSwgWydjJywgMC40OCwgLTAuNzIsIDAuNTQsIC0xLjU5LCAwLjE4LCAtMi4zMV0sIFsnYycsIC0wLjEyLCAtMC4yMSwgLTAuNDUsIC0wLjU0LCAtMC42OSwgLTAuNjldLCBbJ2MnLCAtMC4zMywgLTAuMjEsIC0wLjkzLCAtMC40NSwgLTEuMzUsIC0wLjUxXSwgWydsJywgLTAuMTIsIC0wLjAzXSwgWydsJywgLTAuMDYsIDAuNDhdLCBbJ2MnLCAtMC41NCwgMi45NCwgLTEuMTQsIDYuMjQsIC0xLjI5LCA2Ljc1XSwgWydjJywgLTAuMzMsIDEuMzUsIC0wLjkzLCAyLjYxLCAtMS42NSwgMy42MF0sIFsnYycsIC0wLjMwLCAwLjM2LCAtMC44MSwgMC45MCwgLTEuMTQsIDEuMTRdLCBbJ2MnLCAtMC4zMCwgMC4yNCwgLTAuODQsIDAuNDgsIC0xLjE0LCAwLjU3XSwgWydjJywgLTAuMzMsIDAuMDksIC0wLjk2LCAwLjA5LCAtMS4yNiwgMC4wM10sIFsnYycsIC0wLjQ1LCAtMC4xMiwgLTAuODcsIC0wLjM5LCAtMS41MywgLTAuOTZdLCBbJ2MnLCAtMC4yNCwgLTAuMTUsIC0wLjUxLCAtMC4zOSwgLTAuNjMsIC0wLjQ4XSwgWydjJywgLTAuMzAsIC0wLjIxLCAtMC4zMywgLTAuMzMsIC0wLjIxLCAtMC42M10sIFsnYycsIDAuMTIsIC0wLjE4LCAwLjI3LCAtMC4zNiwgMC40MiwgLTAuNDVdLCBbJ2MnLCAwLjI3LCAtMC4xMiwgMC4zNiwgLTAuMDksIDAuODcsIDAuMzNdLCBbJ2MnLCAwLjc4LCAwLjYwLCAxLjA4LCAwLjc1LCAxLjY1LCAwLjcyXSwgWydjJywgMC40NSwgLTAuMDMsIDAuODEsIC0wLjIxLCAxLjE3LCAtMC41NF0sIFsnYycsIDAuODcsIC0wLjkwLCAxLjM4LCAtMi44NSwgMS4zOCwgLTUuMzddLCBbJ2MnLCAwLjAwLCAtMC42MCwgMC4wMywgLTEuMTEsIDAuMTIsIC0yLjA0XSwgWydjJywgMC4wNiwgLTAuNjksIDAuMjQsIC0yLjAxLCAwLjMzLCAtMi41OF0sIFsnYycsIDAuMDYsIC0wLjI0LCAwLjA2LCAtMC40MiwgMC4wNiwgLTAuNDJdLCBbJ2MnLCAwLjAwLCAwLjAwLCAtMC4xMiwgMC4wMywgLTAuMjEsIDAuMDldLCBbJ2MnLCAtMS40NCwgMC41NywgLTIuMTYsIDEuNjUsIC0xLjc0LCAyLjU1XSwgWydjJywgMC4wOSwgMC4xNSwgMC4xOCwgMC4yNCwgMC4yNywgMC4zM10sIFsnYycsIDAuMjQsIDAuMjEsIDAuMzAsIDAuMjcsIDAuMzMsIDAuMzldLCBbJ2MnLCAwLjA2LCAwLjI0LCAwLjAwLCAwLjYzLCAtMC4xNSwgMC43OF0sIFsnYycsIC0wLjA5LCAwLjEyLCAtMC41NCwgMC4yMSwgLTAuOTYsIDAuMjRdLCBbJ2MnLCAtMS4wMiwgMC4wMywgLTIuMDEsIC0wLjQ4LCAtMi40MywgLTEuMzJdLCBbJ2MnLCAtMC4yMSwgLTAuNDUsIC0wLjI3LCAtMC45MCwgLTAuMTUsIC0xLjQ0XSwgWydjJywgMC4wNiwgLTAuMjcsIDAuMjEsIC0wLjY2LCAwLjM5LCAtMC45M10sIFsnYycsIDAuODcsIC0xLjI5LCAzLjAwLCAtMi4yMiwgNS42NCwgLTIuNDNdLCBbJ3onXV0sIHc6IDE5LjY0MywgaDogNDMuMzI1IH0sXG5cdCd0YWIudGlueSc6IHsgZDogW1snTScsIDE2LjAyLCAtMTcuMjVdLCBbJ2MnLCAwLjEyLCAtMC4wOSwgMC4xNSwgLTAuMDksIDAuMjcsIC0wLjA5XSwgWydjJywgMC4yMSwgMC4wMywgMC41MSwgMC4zMCwgMC41MSwgMC40NV0sIFsnYycsIDAuMDAsIDAuMDYsIC0wLjEyLCAwLjE4LCAtMC4zMCwgMC4zNl0sIFsnYycsIC0xLjExLCAxLjA4LCAtMi41NSwgMS41OSwgLTMuODQsIDEuNDFdLCBbJ2MnLCAtMC4xNSwgLTAuMDMsIC0wLjMzLCAtMC4wNiwgLTAuMzksIC0wLjA5XSwgWydjJywgLTAuMDYsIC0wLjAzLCAtMC4wOSwgLTAuMDMsIC0wLjEyLCAtMC4wM10sIFsnYycsIDAuMDAsIDAuMDAsIC0wLjA2LCAwLjQyLCAtMC4xNSwgMC45M10sIFsnYycsIC0wLjMzLCAyLjAxLCAtMC42NiwgMy42OSwgLTAuODQsIDQuMjZdLCBbJ2MnLCAtMC40MiwgMS40MSwgLTEuMjMsIDIuNjcsIC0yLjE2LCAzLjMzXSwgWydjJywgLTAuMjcsIDAuMTgsIC0wLjc1LCAwLjQyLCAtMC45OSwgMC40OF0sIFsnYycsIC0wLjMwLCAwLjA5LCAtMC43MiwgMC4wOSwgLTEuMDIsIDAuMDZdLCBbJ2MnLCAtMC40NSwgLTAuMDksIC0wLjg0LCAtMC4zMywgLTEuNTMsIC0wLjkwXSwgWydjJywgLTAuMjEsIC0wLjE4LCAtMC41MSwgLTAuMzksIC0wLjYzLCAtMC40OF0sIFsnYycsIC0wLjI3LCAtMC4yMSwgLTAuMzAsIC0wLjI0LCAtMC4zMCwgLTAuMzZdLCBbJ2MnLCAwLjAwLCAtMC4xMiwgMC4wOSwgLTAuMzYsIDAuMTgsIC0wLjQ1XSwgWydjJywgMC4wOSwgLTAuMDksIDAuMjcsIC0wLjE4LCAwLjM2LCAtMC4xOF0sIFsnYycsIDAuMTIsIDAuMDAsIDAuMzAsIDAuMTIsIDAuNjYsIDAuNDVdLCBbJ2MnLCAwLjU3LCAwLjUxLCAwLjg3LCAwLjY5LCAxLjIzLCAwLjcyXSwgWydjJywgMC45MywgMC4wNiwgMS42OCwgLTAuNzgsIDEuOTgsIC0yLjM3XSwgWydjJywgMC4wOSwgLTAuMzksIDAuMTUsIC0wLjc1LCAwLjE4LCAtMS41M10sIFsnYycsIDAuMDYsIC0wLjk5LCAwLjI0LCAtMi43OSwgMC40MiwgLTQuMDVdLCBbJ2MnLCAwLjAzLCAtMC4zMCwgMC4wNiwgLTAuNTcsIDAuMDYsIC0wLjYwXSwgWydjJywgMC4wMCwgLTAuMDYsIC0wLjAzLCAtMC4wOSwgLTAuMTUsIC0wLjEyXSwgWydjJywgLTAuOTAsIC0wLjE4LCAtMi4xMywgMC4wNiwgLTIuNzYsIDAuNTddLCBbJ2MnLCAtMC4zNiwgMC4zMCwgLTAuNTEsIDAuNjAsIC0wLjUxLCAxLjAyXSwgWydjJywgMC4wMCwgMC40NSwgMC4xNSwgMC43NSwgMC40OCwgMC45OV0sIFsnYycsIDAuMDYsIDAuMDYsIDAuMTUsIDAuMTgsIDAuMTgsIDAuMjRdLCBbJ2MnLCAwLjEyLCAwLjI0LCAwLjAzLCAwLjYzLCAtMC4xNSwgMC42OV0sIFsnYycsIC0wLjI0LCAwLjEyLCAtMC42MCwgMC4xNSwgLTAuOTAsIDAuMTVdLCBbJ2MnLCAtMC4zNiwgLTAuMDMsIC0wLjU3LCAtMC4wOSwgLTAuODcsIC0wLjI0XSwgWydjJywgLTAuNzgsIC0wLjM2LCAtMS4yMywgLTEuMTEsIC0xLjIwLCAtMS45Ml0sIFsnYycsIDAuMTIsIC0xLjUzLCAxLjc0LCAtMi40OSwgNC42MiwgLTIuNzBdLCBbJ2MnLCAxLjIwLCAtMC4wOSwgMS40NywgLTAuMDMsIDMuMzMsIDAuNTddLCBbJ2MnLCAwLjkwLCAwLjMwLCAxLjE0LCAwLjM2LCAxLjU2LCAwLjM5XSwgWydjJywgMC40NSwgMC4wMCwgMC45MywgLTAuMDYsIDEuMzgsIC0wLjIxXSwgWydjJywgMC41MSwgLTAuMTgsIDAuODEsIC0wLjMzLCAxLjQxLCAtMC43NV0sIFsneiddLCBbJ20nLCAtNC42OCwgMTAuMzhdLCBbJ2MnLCAwLjM5LCAtMC4wNiwgMC44NCwgMC4wMCwgMS4yMCwgMC4xNV0sIFsnYycsIDAuMjQsIDAuMTIsIDAuMzYsIDAuMjEsIDAuNDUsIDAuMzZdLCBbJ2wnLCAwLjA5LCAwLjA5XSwgWydsJywgLTAuMDYsIDEuNDFdLCBbJ2MnLCAtMC4wOSwgMi4xOSwgLTAuMTgsIDMuOTYsIC0wLjI3LCA1LjQ5XSwgWydjJywgLTAuMDMsIDAuNzgsIC0wLjA2LCAxLjU5LCAtMC4wNiwgMS44Nl0sIFsnYycsIDAuMDAsIDAuNDIsIDAuMDAsIDAuNDgsIDAuMDYsIDAuNTddLCBbJ2MnLCAwLjA2LCAwLjE4LCAwLjE4LCAwLjI0LCAwLjM2LCAwLjI3XSwgWydjJywgMC4xOCwgMC4wMCwgMC4zOSwgLTAuMDYsIDAuODQsIC0wLjI3XSwgWydjJywgMC40NSwgLTAuMjEsIDAuNTQsIC0wLjI0LCAwLjYzLCAtMC4xOF0sIFsnYycsIDAuMTIsIDAuMTIsIDAuMTUsIDAuNTQsIDAuMDMsIDAuNjldLCBbJ2MnLCAtMC4wMywgMC4wMywgLTAuMTUsIDAuMTIsIC0wLjI3LCAwLjE4XSwgWydjJywgLTAuMTUsIDAuMDMsIC0wLjMwLCAwLjEyLCAtMC4zNiwgMC4xNV0sIFsnYycsIC0wLjg3LCAwLjQ1LCAtMS4wMiwgMC41MSwgLTEuMjYsIDAuNTddLCBbJ2MnLCAtMC4zMywgMC4wOSwgLTAuNjAsIDAuMDYsIC0wLjg0LCAtMC4wNl0sIFsnYycsIC0wLjQyLCAtMC4xOCwgLTAuNjMsIC0wLjYwLCAtMC44NywgLTEuNDRdLCBbJ2MnLCAtMC4zMCwgLTEuMjMsIC0wLjU3LCAtMi45NywgLTAuNjYsIC00LjA4XSwgWydjJywgMC4wMCwgLTAuMTgsIC0wLjAzLCAtMC4zMCwgLTAuMDMsIC0wLjMzXSwgWydsJywgLTAuMDYsIDAuMDZdLCBbJ2MnLCAtMC4xOCwgMC4yNywgLTEuMTEsIDEuMzgsIC0xLjY4LCAyLjAxXSwgWydsJywgLTAuMzMsIDAuMzNdLCBbJ2wnLCAwLjA2LCAwLjA5XSwgWydjJywgMC4wNiwgMC4xNSwgMC4yNywgMC4zMywgMC40OCwgMC40Ml0sIFsnYycsIDAuMjcsIDAuMTgsIDAuNTEsIDAuMjQsIDAuOTYsIDAuMjddLCBbJ2wnLCAwLjM5LCAwLjAwXSwgWydsJywgMC4wMywgMC4xMl0sIFsnYycsIDAuMTIsIDAuMjEsIDAuMDMsIDAuNTcsIC0wLjE1LCAwLjY5XSwgWydjJywgLTAuMDMsIDAuMDMsIC0wLjIxLCAwLjA5LCAtMC4zNiwgMC4xNV0sIFsnYycsIC0wLjI3LCAwLjA2LCAtMC4zOSwgMC4wNiwgLTAuNzUsIDAuMDZdLCBbJ2MnLCAtMC40OCwgMC4wMCwgLTAuNzUsIC0wLjAzLCAtMS4wOCwgLTAuMjFdLCBbJ2MnLCAtMC4yMSwgLTAuMTIsIC0wLjUxLCAtMC4zNiwgLTAuNTcsIC0wLjQ4XSwgWydsJywgLTAuMDMsIC0wLjA5XSwgWydsJywgLTAuMzksIDAuMzZdLCBbJ2MnLCAtMS40NywgMS4zNSwgLTIuNDksIDEuOTgsIC0zLjQyLCAyLjEzXSwgWydjJywgLTAuNTQsIDAuMDksIC0wLjk2LCAtMC4wMywgLTEuNjIsIC0wLjM5XSwgWydjJywgLTAuMjEsIC0wLjE1LCAtMC40NSwgLTAuMjcsIC0wLjU0LCAtMC4zMF0sIFsnYycsIC0wLjE4LCAtMC4wOSwgLTAuMjEsIC0wLjIxLCAtMC4xMiwgLTAuNDVdLCBbJ2MnLCAwLjA2LCAtMC4yNywgMC4zMywgLTAuNDgsIDAuNTQsIC0wLjQ4XSwgWydjJywgMC4wMywgMC4wMCwgMC4yNywgMC4wOSwgMC40OCwgMC4yMV0sIFsnYycsIDAuNDgsIDAuMjQsIDAuNjksIDAuMjcsIDAuOTksIDAuMjddLCBbJ2MnLCAwLjYwLCAtMC4wNiwgMS4xNywgLTAuNDIsIDIuMTAsIC0xLjM1XSwgWydjJywgMi4yMiwgLTIuMjIsIDQuMDIsIC00Ljk4LCA0Ljk1LCAtNy41OV0sIFsnYycsIDAuMjEsIC0wLjU3LCAwLjMwLCAtMC43OCwgMC40OCwgLTAuOTNdLCBbJ2MnLCAwLjE1LCAtMC4xNSwgMC40MiwgLTAuMjcsIDAuNjYsIC0wLjMzXSwgWyd6J10sIFsnbScsIC0zLjA2LCAxMi44NF0sIFsnYycsIDAuMjcsIC0wLjAzLCAxLjY4LCAwLjAwLCAyLjAxLCAwLjAzXSwgWydjJywgMS45MiwgMC4xOCwgMy4xNSwgMC42OSwgMy42MywgMS41MF0sIFsnYycsIDAuMTgsIDAuMzMsIDAuMjQsIDAuNTEsIDAuMjEsIDAuOTNdLCBbJ2MnLCAwLjAwLCAwLjQ1LCAtMC4wNiwgMC43MiwgLTAuMjQsIDEuMTFdLCBbJ2MnLCAtMC4yNCwgMC41MSwgLTAuNjksIDEuMDIsIC0xLjE3LCAxLjM1XSwgWydjJywgLTAuMjEsIDAuMTUsIC0wLjIxLCAwLjE1LCAtMC4xMiwgMC4xOF0sIFsnYycsIDAuNzIsIDAuMTUsIDEuMTEsIDAuMzAsIDEuNTAsIDAuNTddLCBbJ2MnLCAwLjM5LCAwLjI0LCAwLjYzLCAwLjU3LCAwLjc1LCAwLjk2XSwgWydjJywgMC4wOSwgMC4zMCwgMC4wOSwgMC45NiwgMC4wMCwgMS4yOV0sIFsnYycsIC0wLjE1LCAwLjU3LCAtMC4zOSwgMS4wNSwgLTAuNzgsIDEuNTBdLCBbJ2MnLCAtMC42NiwgMC43NSwgLTEuNjIsIDEuMzIsIC0yLjYxLCAxLjUzXSwgWydjJywgLTAuMjcsIDAuMDYsIC0wLjQyLCAwLjA2LCAtMC44NCwgMC4wNl0sIFsnYycsIC0wLjQ4LCAwLjAwLCAtMC41NywgMC4wMCwgLTAuODEsIC0wLjA2XSwgWydjJywgLTAuNjAsIC0wLjE4LCAtMS4wNSwgLTAuNDIsIC0xLjQ3LCAtMC44MV0sIFsnYycsIC0wLjM2LCAtMC4zOSwgLTAuNDIsIC0wLjUxLCAtMC4zMCwgLTAuNzVdLCBbJ2MnLCAwLjEyLCAtMC4yMSwgMC4zOSwgLTAuMzksIDAuNjAsIC0wLjM5XSwgWydjJywgMC4wOSwgMC4wMCwgMC4xNSwgMC4wMywgMC4zMywgMC4xOF0sIFsnYycsIDAuMTIsIDAuMTIsIDAuMjcsIDAuMjQsIDAuMzYsIDAuMjddLCBbJ2MnLCAwLjk2LCAwLjQ4LCAyLjQ2LCAtMC4zMywgMi44MiwgLTEuNTBdLCBbJ2MnLCAwLjI0LCAtMC44MSwgLTAuMDMsIC0xLjQ0LCAtMC42OSwgLTEuNzddLCBbJ2MnLCAtMC4zOSwgLTAuMjEsIC0xLjAyLCAtMC4zMywgLTEuNTMsIC0wLjMzXSwgWydjJywgLTAuMTgsIDAuMDAsIC0wLjIxLCAwLjAwLCAtMC4yNywgLTAuMDldLCBbJ2MnLCAtMC4wNiwgLTAuMDksIC0wLjA2LCAtMC4zMCwgLTAuMDMsIC0wLjQ4XSwgWydjJywgMC4wNiwgLTAuMTgsIDAuMTgsIC0wLjM2LCAwLjMzLCAtMC4zNl0sIFsnYycsIDAuMzksIC0wLjA2LCAwLjUxLCAtMC4wOSwgMC43MiwgLTAuMThdLCBbJ2MnLCAwLjY5LCAtMC4zNiwgMS4xMSwgLTEuMjMsIDAuOTksIC0yLjAxXSwgWydjJywgLTAuMDksIC0wLjUxLCAtMC40MiwgLTAuOTAsIC0wLjkzLCAtMS4xN10sIFsnYycsIC0wLjI0LCAtMC4xMiwgLTAuNjAsIC0wLjI3LCAtMC44NywgLTAuMzBdLCBbJ2MnLCAtMC4wOSwgLTAuMDMsIC0wLjA5LCAtMC4wMywgLTAuMTIsIDAuMTJdLCBbJ2MnLCAwLjAwLCAwLjA5LCAtMC4yMSwgMS4xMSwgLTAuNDIsIDIuMjVdLCBbJ2MnLCAtMC42NiwgMy43NSwgLTAuNzIsIDMuOTksIC0xLjI2LCA1LjA3XSwgWydjJywgLTAuOTAsIDEuODksIC0yLjI1LCAyLjg1LCAtMy40OCwgMi42MV0sIFsnYycsIC0wLjM5LCAtMC4wOSwgLTAuNjksIC0wLjI3LCAtMS4zOCwgLTAuODRdLCBbJ2MnLCAtMC42MywgLTAuNTEsIC0wLjYzLCAtMC40OCwgLTAuNjMsIC0wLjYwXSwgWydjJywgMC4wMCwgLTAuMTgsIDAuMTgsIC0wLjQ4LCAwLjM5LCAtMC41N10sIFsnYycsIDAuMjEsIC0wLjEyLCAwLjMwLCAtMC4wOSwgMC44MSwgMC4zM10sIFsnYycsIDAuMTUsIDAuMTUsIDAuMzksIDAuMzAsIDAuNTQsIDAuMzZdLCBbJ2MnLCAwLjE4LCAwLjEyLCAwLjI3LCAwLjEyLCAwLjQ4LCAwLjE1XSwgWydjJywgMC45OSwgMC4wNiwgMS43MSwgLTAuNzgsIDIuMDQsIC0yLjQ2XSwgWydjJywgMC4xMiwgLTAuNjYsIDAuMTgsIC0xLjE0LCAwLjIxLCAtMi4yMl0sIFsnYycsIDAuMDMsIC0xLjIzLCAwLjEyLCAtMi4yNSwgMC4zNiwgLTMuNjNdLCBbJ2MnLCAwLjAzLCAtMC4yNCwgMC4wNiwgLTAuNDUsIDAuMDYsIC0wLjQ4XSwgWydjJywgLTAuMDYsIC0wLjAzLCAtMC42NiwgMC4yNywgLTAuOTAsIDAuNDJdLCBbJ2MnLCAtMC4wNiwgMC4wNiwgLTAuMjEsIDAuMTgsIC0wLjMzLCAwLjMwXSwgWydjJywgLTAuNTcsIDAuNTcsIC0wLjYwLCAxLjM1LCAtMC4wNiwgMS43NF0sIFsnYycsIDAuMTgsIDAuMTIsIDAuMjQsIDAuMjQsIDAuMjEsIDAuNTFdLCBbJ2MnLCAtMC4wMywgMC4zMCwgLTAuMTUsIDAuNDIsIC0wLjU3LCAwLjQ4XSwgWydjJywgLTEuMTEsIDAuMjQsIC0yLjIyLCAtMC40MiwgLTIuNDMsIC0xLjM4XSwgWydjJywgLTAuMDksIC0wLjQ1LCAwLjAzLCAtMS4wMiwgMC4zMCwgLTEuNDddLCBbJ2MnLCAwLjE4LCAtMC4yNCwgMC42MCwgLTAuNjMsIDAuOTAsIC0wLjg0XSwgWydjJywgMC45MCwgLTAuNjAsIDIuMjgsIC0xLjAyLCAzLjY5LCAtMS4xMV0sIFsneiddXSwgdzogMTUuNzA5LCBoOiAzNC42NTYgfSxcblx0J3RpbWVzaWcuY29tbW9uJzogeyBkOiBbWydNJywgNi42NiwgLTcuODNdLCBbJ2MnLCAwLjcyLCAtMC4wNiwgMS40MSwgLTAuMDMsIDEuOTgsIDAuMDldLCBbJ2MnLCAxLjIwLCAwLjI3LCAyLjM0LCAwLjk2LCAzLjA5LCAxLjkyXSwgWydjJywgMC42MywgMC44MSwgMS4wOCwgMS44NiwgMS4xNCwgMi43M10sIFsnYycsIDAuMDYsIDEuMDIsIC0wLjUxLCAxLjkyLCAtMS40NCwgMi4yMl0sIFsnYycsIC0wLjI0LCAwLjA5LCAtMC4zMCwgMC4wOSwgLTAuNjMsIDAuMDldLCBbJ2MnLCAtMC4zMywgMC4wMCwgLTAuNDIsIDAuMDAsIC0wLjYzLCAtMC4wNl0sIFsnYycsIC0wLjY2LCAtMC4yNCwgLTEuMTQsIC0wLjYzLCAtMS40MSwgLTEuMjBdLCBbJ2MnLCAtMC4xNSwgLTAuMzAsIC0wLjIxLCAtMC41MSwgLTAuMjQsIC0wLjkwXSwgWydjJywgLTAuMDYsIC0xLjA4LCAwLjU3LCAtMi4wNCwgMS41NiwgLTIuMzddLCBbJ2MnLCAwLjE4LCAtMC4wNiwgMC4yNywgLTAuMDYsIDAuNjMsIC0wLjA2XSwgWydsJywgMC40NSwgMC4wMF0sIFsnYycsIDAuMDYsIDAuMDMsIDAuMDksIDAuMDMsIDAuMDksIDAuMDBdLCBbJ2MnLCAwLjAwLCAwLjAwLCAtMC4wOSwgLTAuMTIsIC0wLjI0LCAtMC4yN10sIFsnYycsIC0xLjAyLCAtMS4xMSwgLTIuNTUsIC0xLjY4LCAtNC4wOCwgLTEuNTBdLCBbJ2MnLCAtMS4yOSwgMC4xNSwgLTIuMDQsIDAuNjksIC0yLjQwLCAxLjc0XSwgWydjJywgLTAuMzYsIDAuOTMsIC0wLjQyLCAxLjg5LCAtMC40MiwgNS4zN10sIFsnYycsIDAuMDAsIDIuOTcsIDAuMDYsIDMuOTYsIDAuMjQsIDQuNzddLCBbJ2MnLCAwLjI0LCAxLjA4LCAwLjYzLCAxLjY4LCAxLjQxLCAyLjA3XSwgWydjJywgMC44MSwgMC4zOSwgMi4xNiwgMC40NSwgMy4xOCwgMC4wOV0sIFsnYycsIDEuMjksIC0wLjQ1LCAyLjM3LCAtMS41MywgMy4wMywgLTIuOTddLCBbJ2MnLCAwLjE1LCAtMC4zMywgMC4zMywgLTAuODcsIDAuMzksIC0xLjE3XSwgWydjJywgMC4wOSwgLTAuMjQsIDAuMTUsIC0wLjM2LCAwLjMwLCAtMC4zOV0sIFsnYycsIDAuMjEsIC0wLjAzLCAwLjQyLCAwLjE1LCAwLjM5LCAwLjM2XSwgWydjJywgLTAuMDYsIDAuMzksIC0wLjQyLCAxLjM4LCAtMC42OSwgMS44OV0sIFsnYycsIC0wLjk2LCAxLjgwLCAtMi40OSwgMi45NCwgLTQuMjMsIDMuMThdLCBbJ2MnLCAtMC45OSwgMC4xMiwgLTIuNTgsIC0wLjA2LCAtMy42MywgLTAuNDVdLCBbJ2MnLCAtMC45NiwgLTAuMzYsIC0xLjcxLCAtMC44NCwgLTIuNDAsIC0xLjUwXSwgWydjJywgLTEuMTEsIC0xLjExLCAtMS44MCwgLTIuNjEsIC0yLjA0LCAtNC41Nl0sIFsnYycsIC0wLjA2LCAtMC42MCwgLTAuMDYsIC0yLjAxLCAwLjAwLCAtMi42MV0sIFsnYycsIDAuMjQsIC0xLjk1LCAwLjkwLCAtMy40NSwgMi4wMSwgLTQuNTZdLCBbJ2MnLCAwLjY5LCAtMC42NiwgMS40NCwgLTEuMTEsIDIuMzcsIC0xLjQ3XSwgWydjJywgMC42MywgLTAuMjQsIDEuNDcsIC0wLjQyLCAyLjIyLCAtMC40OF0sIFsneiddXSwgdzogMTMuMDM4LCBoOiAxNS42ODkgfSxcblx0J3RpbWVzaWcuY3V0JzogeyBkOiBbWydNJywgNi4yNCwgLTEwLjQ0XSwgWydjJywgMC4wOSwgLTAuMDYsIDAuMDksIC0wLjA2LCAwLjQ4LCAtMC4wNl0sIFsnYycsIDAuMzYsIDAuMDAsIDAuMzYsIDAuMDAsIDAuNDUsIDAuMDZdLCBbJ2wnLCAwLjA2LCAwLjA5XSwgWydsJywgMC4wMCwgMS4yM10sIFsnbCcsIDAuMDAsIDEuMjZdLCBbJ2wnLCAwLjI3LCAwLjAwXSwgWydjJywgMS4yNiwgMC4wMCwgMi40OSwgMC40NSwgMy40OCwgMS4yOV0sIFsnYycsIDEuMDUsIDAuODcsIDEuODAsIDIuMjgsIDEuODksIDMuNDhdLCBbJ2MnLCAwLjA2LCAxLjAyLCAtMC41MSwgMS45MiwgLTEuNDQsIDIuMjJdLCBbJ2MnLCAtMC4yNCwgMC4wOSwgLTAuMzAsIDAuMDksIC0wLjYzLCAwLjA5XSwgWydjJywgLTAuMzMsIDAuMDAsIC0wLjQyLCAwLjAwLCAtMC42MywgLTAuMDZdLCBbJ2MnLCAtMC42NiwgLTAuMjQsIC0xLjE0LCAtMC42MywgLTEuNDEsIC0xLjIwXSwgWydjJywgLTAuMTUsIC0wLjMwLCAtMC4yMSwgLTAuNTEsIC0wLjI0LCAtMC45MF0sIFsnYycsIC0wLjA2LCAtMS4wOCwgMC41NywgLTIuMDQsIDEuNTYsIC0yLjM3XSwgWydjJywgMC4xOCwgLTAuMDYsIDAuMjcsIC0wLjA2LCAwLjYzLCAtMC4wNl0sIFsnbCcsIDAuNDUsIDAuMDBdLCBbJ2MnLCAwLjA2LCAwLjAzLCAwLjA5LCAwLjAzLCAwLjA5LCAwLjAwXSwgWydjJywgMC4wMCwgLTAuMDMsIC0wLjQ1LCAtMC41MSwgLTAuNjYsIC0wLjY5XSwgWydjJywgLTAuODcsIC0wLjY5LCAtMS44MywgLTEuMDUsIC0yLjk0LCAtMS4xMV0sIFsnbCcsIC0wLjQyLCAwLjAwXSwgWydsJywgMC4wMCwgNy4xN10sIFsnbCcsIDAuMDAsIDcuMTRdLCBbJ2wnLCAwLjQyLCAwLjAwXSwgWydjJywgMC42OSwgLTAuMDMsIDEuMjMsIC0wLjE4LCAxLjg2LCAtMC41MV0sIFsnYycsIDEuMDUsIC0wLjUxLCAxLjg5LCAtMS40NywgMi40NiwgLTIuNzBdLCBbJ2MnLCAwLjE1LCAtMC4zMywgMC4zMywgLTAuODcsIDAuMzksIC0xLjE3XSwgWydjJywgMC4wOSwgLTAuMjQsIDAuMTUsIC0wLjM2LCAwLjMwLCAtMC4zOV0sIFsnYycsIDAuMjEsIC0wLjAzLCAwLjQyLCAwLjE1LCAwLjM5LCAwLjM2XSwgWydjJywgLTAuMDMsIDAuMjQsIC0wLjIxLCAwLjc4LCAtMC4zOSwgMS4yMF0sIFsnYycsIC0wLjk2LCAyLjM3LCAtMi45NCwgMy45MCwgLTUuMTMsIDMuOTBdLCBbJ2wnLCAtMC4zMCwgMC4wMF0sIFsnbCcsIDAuMDAsIDEuMjZdLCBbJ2wnLCAwLjAwLCAxLjIzXSwgWydsJywgLTAuMDYsIDAuMDldLCBbJ2MnLCAtMC4wOSwgMC4wNiwgLTAuMDksIDAuMDYsIC0wLjQ1LCAwLjA2XSwgWydjJywgLTAuMzksIDAuMDAsIC0wLjM5LCAwLjAwLCAtMC40OCwgLTAuMDZdLCBbJ2wnLCAtMC4wNiwgLTAuMDldLCBbJ2wnLCAwLjAwLCAtMS4yOV0sIFsnbCcsIDAuMDAsIC0xLjI5XSwgWydsJywgLTAuMjEsIC0wLjAzXSwgWydjJywgLTEuMjMsIC0wLjIxLCAtMi4zMSwgLTAuNjMsIC0zLjIxLCAtMS4yOV0sIFsnYycsIC0wLjE1LCAtMC4wOSwgLTAuNDUsIC0wLjM2LCAtMC42NiwgLTAuNTddLCBbJ2MnLCAtMS4xMSwgLTEuMTEsIC0xLjgwLCAtMi42MSwgLTIuMDQsIC00LjU2XSwgWydjJywgLTAuMDYsIC0wLjYwLCAtMC4wNiwgLTIuMDEsIDAuMDAsIC0yLjYxXSwgWydjJywgMC4yNCwgLTEuOTUsIDAuOTMsIC0zLjQ1LCAyLjA0LCAtNC41OV0sIFsnYycsIDAuNDIsIC0wLjM5LCAwLjc4LCAtMC42NiwgMS4yNiwgLTAuOTNdLCBbJ2MnLCAwLjc1LCAtMC40NSwgMS42NSwgLTAuNzUsIDIuNjEsIC0wLjkwXSwgWydsJywgMC4yMSwgLTAuMDNdLCBbJ2wnLCAwLjAwLCAtMS4yOV0sIFsnbCcsIDAuMDAsIC0xLjI5XSwgWyd6J10sIFsnbScsIC0wLjA2LCAxMC40NF0sIFsnYycsIDAuMDAsIC01LjU4LCAwLjAwLCAtNi45OSwgLTAuMDMsIC02Ljk5XSwgWydjJywgLTAuMTUsIDAuMDAsIC0wLjYzLCAwLjI3LCAtMC44NywgMC40NV0sIFsnYycsIC0wLjQ1LCAwLjM2LCAtMC43NSwgMC45MywgLTAuOTMsIDEuNzddLCBbJ2MnLCAtMC4xOCwgMC44MSwgLTAuMjQsIDEuODAsIC0wLjI0LCA0Ljc0XSwgWydjJywgMC4wMCwgMi45NywgMC4wNiwgMy45NiwgMC4yNCwgNC43N10sIFsnYycsIDAuMjQsIDEuMDgsIDAuNjYsIDEuNjgsIDEuNDEsIDIuMDddLCBbJ2MnLCAwLjEyLCAwLjA2LCAwLjMwLCAwLjEyLCAwLjMzLCAwLjE1XSwgWydsJywgMC4wOSwgMC4wMF0sIFsnbCcsIDAuMDAsIC02Ljk2XSwgWyd6J11dLCB3OiAxMy4wMzgsIGg6IDIwLjk3IH0sXG5cdCd0aW1lc2lnLmltcGVyZmVjdHVtJzogeyBkOiBbWydNJywgMTMsIC01XSwgWydhJywgOCwgOCwgMCwgMSwgMCwgMCwgMTBdXSwgdzogMTMuMDM4LCBoOiAyMC45NyB9LFxuXHQndGltZXNpZy5pbXBlcmZlY3R1bTInOiB7IGQ6IFtbJ00nLCAxMywgLTVdLCBbJ2EnLCA4LCA4LCAwLCAxLCAwLCAwLCAxMF1dLCB3OiAxMy4wMzgsIGg6IDIwLjk3IH0sXG5cdCd0aW1lc2lnLnBlcmZlY3R1bSc6IHsgZDogW1snTScsIDEzLCAtNV0sIFsnYScsIDgsIDgsIDAsIDEsIDAsIDAsIDEwXV0sIHc6IDEzLjAzOCwgaDogMjAuOTcgfSxcblx0J3RpbWVzaWcucGVyZmVjdHVtMic6IHsgZDogW1snTScsIDEzLCAtNV0sIFsnYScsIDgsIDgsIDAsIDEsIDAsIDAsIDEwXV0sIHc6IDEzLjAzOCwgaDogMjAuOTcgfSxcblx0J2YnOiB7IGQ6IFtbJ00nLCA5LjkzLCAtMTQuMjhdLCBbJ2MnLCAxLjUzLCAtMC4xOCwgMi44OCwgMC40NSwgMy4xMiwgMS41MF0sIFsnYycsIDAuMTIsIDAuNTEsIDAuMDAsIDEuMzIsIC0wLjI3LCAxLjg2XSwgWydjJywgLTAuMTUsIDAuMzAsIC0wLjQyLCAwLjU3LCAtMC42MywgMC42OV0sIFsnYycsIC0wLjY5LCAwLjM2LCAtMS41NiwgMC4wMywgLTEuODMsIC0wLjY5XSwgWydjJywgLTAuMDksIC0wLjI0LCAtMC4wOSwgLTAuNjksIDAuMDAsIC0wLjg3XSwgWydjJywgMC4wNiwgLTAuMTIsIDAuMjEsIC0wLjI0LCAwLjQ1LCAtMC40Ml0sIFsnYycsIDAuNDIsIC0wLjI0LCAwLjU3LCAtMC40NSwgMC42MCwgLTAuNzJdLCBbJ2MnLCAwLjAzLCAtMC4zMywgLTAuMDksIC0wLjM5LCAtMC42MywgLTAuNDJdLCBbJ2MnLCAtMC4zMCwgMC4wMCwgLTAuNDUsIDAuMDAsIC0wLjYwLCAwLjAzXSwgWydjJywgLTAuODEsIDAuMjEsIC0xLjM1LCAwLjkzLCAtMS43NCwgMi40Nl0sIFsnYycsIC0wLjA2LCAwLjI3LCAtMC40OCwgMi4yNSwgLTAuNDgsIDIuMzFdLCBbJ2MnLCAwLjAwLCAwLjAzLCAwLjM5LCAwLjAzLCAwLjkwLCAwLjAzXSwgWydjJywgMC43MiwgMC4wMCwgMC45MCwgMC4wMCwgMC45OSwgMC4wNl0sIFsnYycsIDAuNDIsIDAuMTUsIDAuNDUsIDAuNzIsIDAuMDMsIDAuOTBdLCBbJ2MnLCAtMC4xMiwgMC4wNiwgLTAuMjQsIDAuMDYsIC0xLjE3LCAwLjA2XSwgWydsJywgLTEuMDUsIDAuMDBdLCBbJ2wnLCAtMC43OCwgMi41NV0sIFsnYycsIC0wLjQ1LCAxLjQxLCAtMC44NywgMi43OSwgLTAuOTYsIDMuMDZdLCBbJ2MnLCAtMC44NywgMi4zNywgLTIuMzcsIDQuNzQsIC0zLjc4LCA1LjkxXSwgWydjJywgLTEuMDUsIDAuOTAsIC0yLjA0LCAxLjIzLCAtMy4wOSwgMS4wOF0sIFsnYycsIC0xLjExLCAtMC4xOCwgLTEuODksIC0wLjc4LCAtMi4wNCwgLTEuNTldLCBbJ2MnLCAtMC4xMiwgLTAuNjYsIDAuMTUsIC0xLjcxLCAwLjU0LCAtMi4xOV0sIFsnYycsIDAuNjksIC0wLjc1LCAxLjg2LCAtMC41NCwgMi4yMiwgMC4zOV0sIFsnYycsIDAuMDYsIDAuMTUsIDAuMDksIDAuMjcsIDAuMDksIDAuNDhdLCBbJ2MnLCAwLjAwLCAwLjI0LCAtMC4wMywgMC4yNywgLTAuMTIsIDAuNDJdLCBbJ2MnLCAtMC4wMywgMC4wOSwgLTAuMTUsIDAuMTgsIC0wLjI3LCAwLjI3XSwgWydjJywgLTAuMDksIDAuMDYsIC0wLjI3LCAwLjIxLCAtMC4zNiwgMC4yN10sIFsnYycsIC0wLjI0LCAwLjE4LCAtMC4zNiwgMC4zNiwgLTAuMzksIDAuNjBdLCBbJ2MnLCAtMC4wMywgMC4zMywgMC4wOSwgMC4zOSwgMC42MywgMC40Ml0sIFsnYycsIDAuNDIsIDAuMDAsIDAuNjMsIC0wLjAzLCAwLjkwLCAtMC4xNV0sIFsnYycsIDAuNjAsIC0wLjMwLCAwLjk2LCAtMC45NiwgMS4zOCwgLTIuNjRdLCBbJ2MnLCAwLjA5LCAtMC40MiwgMC42MywgLTIuNTUsIDEuMTcsIC00Ljc3XSwgWydsJywgMS4wMiwgLTQuMDhdLCBbJ2MnLCAwLjAwLCAtMC4wMywgLTAuMzYsIC0wLjAzLCAtMC44MSwgLTAuMDNdLCBbJ2MnLCAtMC43MiwgMC4wMCwgLTAuODEsIDAuMDAsIC0wLjkzLCAtMC4wNl0sIFsnYycsIC0wLjQyLCAtMC4xOCwgLTAuMzksIC0wLjc1LCAwLjAzLCAtMC45MF0sIFsnYycsIDAuMDksIC0wLjA2LCAwLjI3LCAtMC4wNiwgMS4wNSwgLTAuMDZdLCBbJ2wnLCAwLjk2LCAwLjAwXSwgWydsJywgMC4wMCwgLTAuMDldLCBbJ2MnLCAwLjA2LCAtMC4xOCwgMC4zMCwgLTAuNzIsIDAuNTEsIC0xLjE3XSwgWydjJywgMS4yMCwgLTIuNDYsIDMuMzAsIC00LjIzLCA1LjM0LCAtNC41MF0sIFsneiddXSwgdzogMTYuMTU1LCBoOiAxOS40NDUgfSxcblx0J20nOiB7IGQ6IFtbJ00nLCAyLjc5LCAtOC45MV0sIFsnYycsIDAuMDksIDAuMDAsIDAuMzAsIC0wLjAzLCAwLjQ1LCAtMC4wM10sIFsnYycsIDAuMjQsIDAuMDMsIDAuMzAsIDAuMDMsIDAuNDUsIDAuMTJdLCBbJ2MnLCAwLjM2LCAwLjE1LCAwLjYzLCAwLjU0LCAwLjc1LCAxLjAyXSwgWydsJywgMC4wMywgMC4yMV0sIFsnbCcsIDAuMzMsIC0wLjMwXSwgWydjJywgMC42OSwgLTAuNjksIDEuMzgsIC0xLjAyLCAyLjA3LCAtMS4wMl0sIFsnYycsIDAuMjcsIDAuMDAsIDAuMzMsIDAuMDAsIDAuNDgsIDAuMDZdLCBbJ2MnLCAwLjIxLCAwLjA5LCAwLjQ4LCAwLjM2LCAwLjYzLCAwLjYwXSwgWydjJywgMC4wMywgMC4wOSwgMC4xMiwgMC4yNywgMC4xOCwgMC40Ml0sIFsnYycsIDAuMDMsIDAuMTUsIDAuMDksIDAuMjcsIDAuMTIsIDAuMjddLCBbJ2MnLCAwLjAwLCAwLjAwLCAwLjA5LCAtMC4wOSwgMC4xOCwgLTAuMjFdLCBbJ2MnLCAwLjMzLCAtMC4zOSwgMC44NywgLTAuODEsIDEuMjksIC0wLjk5XSwgWydjJywgMC43OCwgLTAuMzMsIDEuNDcsIC0wLjIxLCAyLjAxLCAwLjMzXSwgWydjJywgMC4zMCwgMC4zMywgMC40OCwgMC42OSwgMC42MCwgMS4xNF0sIFsnYycsIDAuMDksIDAuNDIsIDAuMDYsIDAuNTQsIC0wLjU0LCAzLjA2XSwgWydjJywgLTAuMzMsIDEuMjksIC0wLjU3LCAyLjQwLCAtMC41NywgMi40M10sIFsnYycsIDAuMDAsIDAuMTIsIDAuMDksIDAuMjEsIDAuMjEsIDAuMjFdLCBbJ2MnLCAwLjI0LCAwLjAwLCAwLjc1LCAtMC4zMCwgMS4yMCwgLTAuNzJdLCBbJ2MnLCAwLjQ1LCAtMC4zOSwgMC42MCwgLTAuNDUsIDAuNzgsIC0wLjI3XSwgWydjJywgMC4xOCwgMC4xOCwgMC4wOSwgMC4zNiwgLTAuNDUsIDAuODddLCBbJ2MnLCAtMS4wNSwgMC45NiwgLTEuODMsIDEuNDcsIC0yLjU4LCAxLjcxXSwgWydjJywgLTAuOTMsIDAuMzMsIC0xLjUzLCAwLjIxLCAtMS44MCwgLTAuMzNdLCBbJ2MnLCAtMC4wNiwgLTAuMTUsIC0wLjA2LCAtMC4yMSwgLTAuMDYsIC0wLjQ1XSwgWydjJywgMC4wMCwgLTAuMjQsIDAuMDMsIC0wLjQ4LCAwLjYwLCAtMi44Ml0sIFsnYycsIDAuNDIsIC0xLjcxLCAwLjYwLCAtMi42NCwgMC42MywgLTIuNzldLCBbJ2MnLCAwLjAzLCAtMC41NywgLTAuMzAsIC0wLjc1LCAtMC44NCwgLTAuNDhdLCBbJ2MnLCAtMC4yNCwgMC4xMiwgLTAuNTQsIDAuMzksIC0wLjY2LCAwLjYzXSwgWydjJywgLTAuMDMsIDAuMDksIC0wLjQyLCAxLjM4LCAtMC45MCwgMy4wMF0sIFsnYycsIC0wLjkwLCAzLjE1LCAtMC44NCwgMy4wMCwgLTEuMTQsIDMuMTVdLCBbJ2wnLCAtMC4xNSwgMC4wOV0sIFsnbCcsIC0wLjc4LCAwLjAwXSwgWydjJywgLTAuNjAsIDAuMDAsIC0wLjc4LCAwLjAwLCAtMC44NCwgLTAuMDZdLCBbJ2MnLCAtMC4wOSwgLTAuMDMsIC0wLjE4LCAtMC4xOCwgLTAuMTgsIC0wLjI3XSwgWydjJywgMC4wMCwgLTAuMDMsIDAuMzYsIC0xLjM4LCAwLjg0LCAtMi45N10sIFsnYycsIDAuNTcsIC0yLjA0LCAwLjgxLCAtMi45NywgMC44NCwgLTMuMTJdLCBbJ2MnLCAwLjAzLCAtMC41NCwgLTAuMzAsIC0wLjcyLCAtMC44NCwgLTAuNDVdLCBbJ2MnLCAtMC4yNCwgMC4xMiwgLTAuNTcsIDAuNDIsIC0wLjY2LCAwLjYzXSwgWydjJywgLTAuMDYsIDAuMDksIC0wLjUxLCAxLjQ0LCAtMS4wNSwgMi45N10sIFsnYycsIC0wLjUxLCAxLjU2LCAtMC45OSwgMi44NSwgLTAuOTksIDIuOTFdLCBbJ2MnLCAtMC4wNiwgMC4xMiwgLTAuMjEsIDAuMjQsIC0wLjM2LCAwLjMwXSwgWydjJywgLTAuMTIsIDAuMDYsIC0wLjIxLCAwLjA2LCAtMC45MCwgMC4wNl0sIFsnYycsIC0wLjYwLCAwLjAwLCAtMC43OCwgMC4wMCwgLTAuODQsIC0wLjA2XSwgWydjJywgLTAuMDksIC0wLjAzLCAtMC4xOCwgLTAuMTgsIC0wLjE4LCAtMC4yN10sIFsnYycsIDAuMDAsIC0wLjAzLCAwLjQ1LCAtMS4zOCwgMC45OSwgLTIuOTddLCBbJ2MnLCAxLjA1LCAtMy4xOCwgMS4wNSwgLTMuMTgsIDAuOTMsIC0zLjQ1XSwgWydjJywgLTAuMTIsIC0wLjI3LCAtMC4zOSwgLTAuMzAsIC0wLjcyLCAtMC4xNV0sIFsnYycsIC0wLjU0LCAwLjI3LCAtMS4xNCwgMS4xNywgLTEuNTYsIDIuNDBdLCBbJ2MnLCAtMC4wNiwgMC4xNSwgLTAuMTUsIDAuMzAsIC0wLjE4LCAwLjM2XSwgWydjJywgLTAuMjEsIDAuMjEsIC0wLjU3LCAwLjI3LCAtMC43MiwgMC4wOV0sIFsnYycsIC0wLjA5LCAtMC4wOSwgLTAuMDYsIC0wLjIxLCAwLjA2LCAtMC42M10sIFsnYycsIDAuNDgsIC0xLjI2LCAxLjI2LCAtMi40NiwgMi4wMSwgLTMuMjFdLCBbJ2MnLCAwLjU3LCAtMC41NCwgMS4yMCwgLTAuODcsIDEuODMsIC0xLjAyXSwgWyd6J11dLCB3OiAxNC42ODcsIGg6IDkuMTI2IH0sXG5cdCdwJzogeyBkOiBbWydNJywgMS45MiwgLTguNzBdLCBbJ2MnLCAwLjI3LCAtMC4wOSwgMC44MSwgLTAuMDYsIDEuMTEsIDAuMDNdLCBbJ2MnLCAwLjU0LCAwLjE4LCAwLjkzLCAwLjUxLCAxLjE3LCAwLjk5XSwgWydjJywgMC4wOSwgMC4xNSwgMC4xNSwgMC4zMywgMC4xOCwgMC4zNl0sIFsnbCcsIDAuMDAsIDAuMTJdLCBbJ2wnLCAwLjMwLCAtMC4yN10sIFsnYycsIDAuNjYsIC0wLjYwLCAxLjM1LCAtMS4wMiwgMi4xMywgLTEuMjBdLCBbJ2MnLCAwLjIxLCAtMC4wNiwgMC4zMywgLTAuMDYsIDAuNzgsIC0wLjA2XSwgWydjJywgMC40NSwgMC4wMCwgMC41MSwgMC4wMCwgMC44NCwgMC4wOV0sIFsnYycsIDEuMjksIDAuMzMsIDIuMDcsIDEuMzIsIDIuMjUsIDIuNzldLCBbJ2MnLCAwLjA5LCAwLjgxLCAtMC4wOSwgMi4wMSwgLTAuNDUsIDIuNzldLCBbJ2MnLCAtMC41NCwgMS4yNiwgLTEuODYsIDIuNTUsIC0zLjE4LCAzLjAzXSwgWydjJywgLTAuNDUsIDAuMTgsIC0wLjgxLCAwLjI0LCAtMS4yOSwgMC4yNF0sIFsnYycsIC0wLjY5LCAtMC4wMywgLTEuMzUsIC0wLjE4LCAtMS44NiwgLTAuNDVdLCBbJ2MnLCAtMC4zMCwgLTAuMTUsIC0wLjUxLCAtMC4xOCwgLTAuNjksIC0wLjA5XSwgWydjJywgLTAuMDksIDAuMDMsIC0wLjE4LCAwLjA5LCAtMC4xOCwgMC4xMl0sIFsnYycsIC0wLjA5LCAwLjEyLCAtMS4wNSwgMi45NCwgLTEuMDUsIDMuMDZdLCBbJ2MnLCAwLjAwLCAwLjI0LCAwLjE4LCAwLjQ4LCAwLjUxLCAwLjYzXSwgWydjJywgMC4xOCwgMC4wNiwgMC41NCwgMC4xNSwgMC43NSwgMC4xNV0sIFsnYycsIDAuMjEsIDAuMDAsIDAuMzYsIDAuMDYsIDAuNDIsIDAuMThdLCBbJ2MnLCAwLjEyLCAwLjE4LCAwLjA2LCAwLjQyLCAtMC4xMiwgMC41NF0sIFsnYycsIC0wLjA5LCAwLjAzLCAtMC4xNSwgMC4wMywgLTAuNzgsIDAuMDBdLCBbJ2MnLCAtMS45OCwgLTAuMTUsIC0zLjgxLCAtMC4xNSwgLTUuNzksIDAuMDBdLCBbJ2MnLCAtMC42MywgMC4wMywgLTAuNjksIDAuMDMsIC0wLjc4LCAwLjAwXSwgWydjJywgLTAuMjQsIC0wLjE1LCAtMC4yNCwgLTAuNTcsIDAuMDMsIC0wLjY2XSwgWydjJywgMC4wNiwgLTAuMDMsIDAuNDgsIC0wLjA5LCAwLjk5LCAtMC4xMl0sIFsnYycsIDAuODcsIC0wLjA2LCAxLjExLCAtMC4wOSwgMS4zNSwgLTAuMjFdLCBbJ2MnLCAwLjE4LCAtMC4wNiwgMC4zMywgLTAuMTgsIDAuMzksIC0wLjMwXSwgWydjJywgMC4wNiwgLTAuMTIsIDMuMjQsIC05LjQyLCAzLjI3LCAtOS42MF0sIFsnYycsIDAuMDYsIC0wLjMzLCAwLjAzLCAtMC41NywgLTAuMTUsIC0wLjY5XSwgWydjJywgLTAuMDksIC0wLjA2LCAtMC4xMiwgLTAuMDYsIC0wLjMwLCAtMC4wNl0sIFsnYycsIC0wLjY5LCAwLjA2LCAtMS41MywgMS4wMiwgLTIuMjgsIDIuNjFdLCBbJ2MnLCAtMC4wOSwgMC4yMSwgLTAuMjEsIDAuNDUsIC0wLjI3LCAwLjUxXSwgWydjJywgLTAuMDksIDAuMTIsIC0wLjMzLCAwLjI0LCAtMC40OCwgMC4yNF0sIFsnYycsIC0wLjE4LCAwLjAwLCAtMC4zNiwgLTAuMTUsIC0wLjM2LCAtMC4zMF0sIFsnYycsIDAuMDAsIC0wLjI0LCAwLjc4LCAtMS44MywgMS4yNiwgLTIuNTVdLCBbJ2MnLCAwLjcyLCAtMS4xMSwgMS40NywgLTEuNzQsIDIuMjgsIC0xLjkyXSwgWyd6J10sIFsnbScsIDUuMzcsIDEuNDddLCBbJ2MnLCAtMC4yNywgLTAuMTIsIC0wLjc1LCAtMC4wMywgLTEuMTQsIDAuMjFdLCBbJ2MnLCAtMC43NSwgMC40OCwgLTEuNDcsIDEuNjgsIC0xLjg5LCAzLjE1XSwgWydjJywgLTAuNDUsIDEuNDcsIC0wLjQyLCAyLjM0LCAwLjAwLCAyLjcwXSwgWydjJywgMC40NSwgMC4zOSwgMS4yNiwgMC4yMSwgMS44MywgLTAuMzZdLCBbJ2MnLCAwLjUxLCAtMC41MSwgMC45OSwgLTEuNjgsIDEuMzgsIC0zLjI3XSwgWydjJywgMC4zMCwgLTEuMTcsIDAuMzMsIC0xLjc0LCAwLjE1LCAtMi4xM10sIFsnYycsIC0wLjA5LCAtMC4xNSwgLTAuMTUsIC0wLjIxLCAtMC4zMywgLTAuMzBdLCBbJ3onXV0sIHc6IDE0LjY4OSwgaDogMTMuMTI3IH0sXG5cdCdyJzogeyBkOiBbWydNJywgNi4zMywgLTkuMTJdLCBbJ2MnLCAwLjI3LCAtMC4wMywgMC45MywgMC4wMCwgMS4yMCwgMC4wNl0sIFsnYycsIDAuODQsIDAuMjEsIDEuMjMsIDAuODEsIDEuMDIsIDEuNTNdLCBbJ2MnLCAtMC4yNCwgMC43NSwgLTAuOTAsIDEuMTcsIC0xLjU2LCAwLjk2XSwgWydjJywgLTAuMzMsIC0wLjA5LCAtMC41MSwgLTAuMzAsIC0wLjY2LCAtMC43NV0sIFsnYycsIC0wLjAzLCAtMC4xMiwgLTAuMDksIC0wLjI0LCAtMC4xMiwgLTAuMzBdLCBbJ2MnLCAtMC4wOSwgLTAuMTUsIC0wLjMwLCAtMC4yNCwgLTAuNDgsIC0wLjI0XSwgWydjJywgLTAuNTcsIDAuMDAsIC0xLjM4LCAwLjU0LCAtMS42NSwgMS4wOF0sIFsnYycsIC0wLjA2LCAwLjE1LCAtMC4zMywgMS4xNywgLTAuOTAsIDMuMjddLCBbJ2MnLCAtMC41NywgMi4zMSwgLTAuODEsIDMuMTIsIC0wLjg3LCAzLjIxXSwgWydjJywgLTAuMDMsIDAuMDYsIC0wLjEyLCAwLjE1LCAtMC4xOCwgMC4yMV0sIFsnbCcsIC0wLjEyLCAwLjA2XSwgWydsJywgLTAuODEsIDAuMDNdLCBbJ2MnLCAtMC42OSwgMC4wMCwgLTAuODEsIDAuMDAsIC0wLjkwLCAtMC4wM10sIFsnYycsIC0wLjA5LCAtMC4wNiwgLTAuMTgsIC0wLjIxLCAtMC4xOCwgLTAuMzBdLCBbJ2MnLCAwLjAwLCAtMC4wNiwgMC4zOSwgLTEuNjIsIDAuOTAsIC0zLjUxXSwgWydjJywgMC44NCwgLTMuMjQsIDAuODcsIC0zLjQ1LCAwLjg3LCAtMy43Ml0sIFsnYycsIDAuMDAsIC0wLjIxLCAwLjAwLCAtMC4yNywgLTAuMDMsIC0wLjM2XSwgWydjJywgLTAuMTIsIC0wLjE1LCAtMC4yMSwgLTAuMjQsIC0wLjQyLCAtMC4yNF0sIFsnYycsIC0wLjI0LCAwLjAwLCAtMC40NSwgMC4xNSwgLTAuNzgsIDAuNDJdLCBbJ2MnLCAtMC4zMywgMC4zNiwgLTAuNDUsIDAuNTQsIC0wLjcyLCAxLjE0XSwgWydjJywgLTAuMDMsIDAuMTIsIC0wLjIxLCAwLjI0LCAtMC4zNiwgMC4yN10sIFsnYycsIC0wLjEyLCAwLjAwLCAtMC4xNSwgMC4wMCwgLTAuMjQsIC0wLjA2XSwgWydjJywgLTAuMTgsIC0wLjEyLCAtMC4xOCwgLTAuMjEsIC0wLjA2LCAtMC41NF0sIFsnYycsIDAuMjEsIC0wLjU3LCAwLjQyLCAtMC45MywgMC43OCwgLTEuMzJdLCBbJ2MnLCAwLjU0LCAtMC41MSwgMS4yMCwgLTAuODEsIDEuOTUsIC0wLjg3XSwgWydjJywgMC44MSwgLTAuMDMsIDEuNTMsIDAuMzAsIDEuOTIsIDAuODddLCBbJ2wnLCAwLjEyLCAwLjE4XSwgWydsJywgMC4wOSwgLTAuMDldLCBbJ2MnLCAwLjU3LCAtMC40NSwgMS40MSwgLTAuODQsIDIuMTksIC0wLjk2XSwgWyd6J11dLCB3OiA5LjQxLCBoOiA5LjEzMiB9LFxuXHQncyc6IHsgZDogW1snTScsIDQuNDcsIC04LjczXSwgWydjJywgMC4wOSwgMC4wMCwgMC4zNiwgLTAuMDMsIDAuNTcsIC0wLjAzXSwgWydjJywgMC43NSwgMC4wMywgMS4yOSwgMC4yNCwgMS43MSwgMC42M10sIFsnYycsIDAuNTEsIDAuNTQsIDAuNjYsIDEuMjYsIDAuMzYsIDEuODNdLCBbJ2MnLCAtMC4yNCwgMC40MiwgLTAuNjMsIDAuNTcsIC0xLjExLCAwLjQyXSwgWydjJywgLTAuMzMsIC0wLjA5LCAtMC42MCwgLTAuMzYsIC0wLjYwLCAtMC41N10sIFsnYycsIDAuMDAsIC0wLjAzLCAwLjA2LCAtMC4yMSwgMC4xNSwgLTAuMzldLCBbJ2MnLCAwLjEyLCAtMC4yMSwgMC4xNSwgLTAuMzMsIDAuMTgsIC0wLjQ4XSwgWydjJywgMC4wMCwgLTAuMjQsIC0wLjA2LCAtMC40OCwgLTAuMTUsIC0wLjYwXSwgWydjJywgLTAuMTUsIC0wLjIxLCAtMC40MiwgLTAuMjQsIC0wLjc1LCAtMC4xNV0sIFsnYycsIC0wLjI3LCAwLjA2LCAtMC40OCwgMC4xOCwgLTAuNjksIDAuMzZdLCBbJ2MnLCAtMC4zOSwgMC4zOSwgLTAuNTEsIDAuOTYsIC0wLjMzLCAxLjM4XSwgWydjJywgMC4wOSwgMC4yMSwgMC40MiwgMC41MSwgMC43OCwgMC43Ml0sIFsnYycsIDEuMTEsIDAuNjksIDEuNTksIDEuMTEsIDEuODksIDEuNjhdLCBbJ2MnLCAwLjIxLCAwLjM5LCAwLjI0LCAwLjc4LCAwLjE1LCAxLjI5XSwgWydjJywgLTAuMTgsIDEuMjAsIC0xLjE3LCAyLjE2LCAtMi41MiwgMi41Ml0sIFsnYycsIC0xLjAyLCAwLjI0LCAtMS45NSwgMC4xMiwgLTIuNzAsIC0wLjQyXSwgWydjJywgLTAuNzIsIC0wLjUxLCAtMC45OSwgLTEuNDcsIC0wLjYwLCAtMi4xOV0sIFsnYycsIDAuMjQsIC0wLjQ4LCAwLjcyLCAtMC42MywgMS4xNywgLTAuNDJdLCBbJ2MnLCAwLjMzLCAwLjE4LCAwLjU0LCAwLjQ1LCAwLjU3LCAwLjgxXSwgWydjJywgMC4wMCwgMC4yMSwgLTAuMDMsIDAuMzAsIC0wLjMzLCAwLjUxXSwgWydjJywgLTAuMzMsIDAuMjQsIC0wLjM5LCAwLjQyLCAtMC4yNywgMC42OV0sIFsnYycsIDAuMDYsIDAuMTUsIDAuMjEsIDAuMjcsIDAuNDUsIDAuMzNdLCBbJ2MnLCAwLjMwLCAwLjA5LCAwLjg3LCAwLjA5LCAxLjIwLCAwLjAwXSwgWydjJywgMC43NSwgLTAuMjEsIDEuMjMsIC0wLjcyLCAxLjI5LCAtMS4zNV0sIFsnYycsIDAuMDMsIC0wLjQyLCAtMC4xNSwgLTAuODEsIC0wLjU0LCAtMS4yMF0sIFsnYycsIC0wLjI0LCAtMC4yNCwgLTAuNDgsIC0wLjQyLCAtMS40MSwgLTEuMDJdLCBbJ2MnLCAtMC42OSwgLTAuNDIsIC0xLjA1LCAtMC45MywgLTEuMDUsIC0xLjQ3XSwgWydjJywgMC4wMCwgLTAuMzksIDAuMTIsIC0wLjg3LCAwLjMwLCAtMS4yM10sIFsnYycsIDAuMjcsIC0wLjU3LCAwLjc4LCAtMS4wNSwgMS4zOCwgLTEuMzVdLCBbJ2MnLCAwLjI0LCAtMC4xMiwgMC42MywgLTAuMjcsIDAuOTAsIC0wLjMwXSwgWyd6J11dLCB3OiA2LjYzMiwgaDogOC43NTggfSxcblx0J3onOiB7IGQ6IFtbJ00nLCAyLjY0LCAtNy45NV0sIFsnYycsIDAuMzYsIC0wLjA5LCAwLjgxLCAtMC4wMywgMS43MSwgMC4yN10sIFsnYycsIDAuNzgsIDAuMjEsIDAuOTYsIDAuMjcsIDEuNzQsIDAuMzBdLCBbJ2MnLCAwLjg3LCAwLjA2LCAxLjAyLCAwLjAzLCAxLjM4LCAtMC4yMV0sIFsnYycsIDAuMjEsIC0wLjE1LCAwLjMzLCAtMC4xNSwgMC40OCwgLTAuMDZdLCBbJ2MnLCAwLjE1LCAwLjA5LCAwLjIxLCAwLjMwLCAwLjE1LCAwLjQ1XSwgWydjJywgLTAuMDMsIDAuMDYsIC0xLjI2LCAxLjI2LCAtMi43NiwgMi42N10sIFsnbCcsIC0yLjczLCAyLjU1XSwgWydsJywgMC41NCwgMC4wM10sIFsnYycsIDAuNTQsIDAuMDMsIDAuNzIsIDAuMDMsIDIuMDEsIDAuMTVdLCBbJ2MnLCAwLjM2LCAwLjAzLCAwLjkwLCAwLjA2LCAxLjIwLCAwLjA5XSwgWydjJywgMC42NiwgMC4wMCwgMC44MSwgLTAuMDMsIDEuMDIsIC0wLjI0XSwgWydjJywgMC4zMCwgLTAuMzAsIDAuMzksIC0wLjcyLCAwLjI3LCAtMS4yM10sIFsnYycsIC0wLjA2LCAtMC4yNywgLTAuMDYsIC0wLjI3LCAtMC4wMywgLTAuMzldLCBbJ2MnLCAwLjE1LCAtMC4zMCwgMC41NCwgLTAuMjcsIDAuNjksIDAuMDNdLCBbJ2MnLCAwLjE1LCAwLjMzLCAwLjI3LCAxLjAyLCAwLjI3LCAxLjUwXSwgWydjJywgMC4wMCwgMS40NywgLTEuMTEsIDIuNzAsIC0yLjUyLCAyLjc5XSwgWydjJywgLTAuNTcsIDAuMDMsIC0xLjAyLCAtMC4wOSwgLTIuMDEsIC0wLjUxXSwgWydjJywgLTEuMDIsIC0wLjQyLCAtMS4yMywgLTAuNDgsIC0yLjEzLCAtMC41NF0sIFsnYycsIC0wLjgxLCAtMC4wNiwgLTAuOTYsIC0wLjAzLCAtMS4yNiwgMC4xOF0sIFsnYycsIC0wLjEyLCAwLjA2LCAtMC4yNCwgMC4xMiwgLTAuMjcsIDAuMTJdLCBbJ2MnLCAtMC4yNywgMC4wMCwgLTAuNDUsIC0wLjMwLCAtMC4zNiwgLTAuNTFdLCBbJ2MnLCAwLjAzLCAtMC4wNiwgMS4zMiwgLTEuMzIsIDIuOTEsIC0yLjc5XSwgWydsJywgMi44OCwgLTIuNzNdLCBbJ2MnLCAtMC4wMywgMC4wMCwgLTAuMjEsIDAuMDMsIC0wLjQyLCAwLjA2XSwgWydjJywgLTAuMjEsIDAuMDMsIC0wLjc4LCAwLjA5LCAtMS4yMywgMC4xMl0sIFsnYycsIC0xLjExLCAwLjEyLCAtMS4yMywgMC4xNSwgLTEuOTUsIDAuMjddLCBbJ2MnLCAtMC43MiwgMC4xNSwgLTEuMTcsIDAuMTgsIC0xLjI5LCAwLjA5XSwgWydjJywgLTAuMjcsIC0wLjE4LCAtMC4yMSwgLTAuNzUsIDAuMTIsIC0xLjI2XSwgWydjJywgMC4zOSwgLTAuNjAsIDAuOTMsIC0xLjAyLCAxLjU5LCAtMS4yMF0sIFsneiddXSwgdzogOC41NzMsIGg6IDguNzQzIH0sXG5cdCcrJzogeyBkOiBbWydNJywgMy40OCwgLTkuM10sIFsnYycsIDAuMTgsIC0wLjA5LCAwLjM2LCAtMC4wOSwgMC41NCwgMC4wMF0sIFsnYycsIDAuMTgsIDAuMDksIDAuMjQsIDAuMTUsIDAuMzMsIDAuMzBdLCBbJ2wnLCAwLjA2LCAwLjE1XSwgWydsJywgMC4wMCwgMS4yOV0sIFsnbCcsIDAuMDAsIDEuMjldLCBbJ2wnLCAxLjI5LCAwLjAwXSwgWydjJywgMS4yMywgMC4wMCwgMS4yOSwgMC4wMCwgMS40MSwgMC4wNl0sIFsnYycsIDAuMDYsIDAuMDMsIDAuMTUsIDAuMDksIDAuMTgsIDAuMTJdLCBbJ2MnLCAwLjEyLCAwLjA5LCAwLjIxLCAwLjMzLCAwLjIxLCAwLjQ4XSwgWydjJywgMC4wMCwgMC4xNSwgLTAuMDksIDAuMzksIC0wLjIxLCAwLjQ4XSwgWydjJywgLTAuMDMsIDAuMDMsIC0wLjEyLCAwLjA5LCAtMC4xOCwgMC4xMl0sIFsnYycsIC0wLjEyLCAwLjA2LCAtMC4xOCwgMC4wNiwgLTEuNDEsIDAuMDZdLCBbJ2wnLCAtMS4yOSwgMC4wMF0sIFsnbCcsIDAuMDAsIDEuMjldLCBbJ2MnLCAwLjAwLCAxLjIzLCAwLjAwLCAxLjI5LCAtMC4wNiwgMS40MV0sIFsnYycsIC0wLjA5LCAwLjE4LCAtMC4xNSwgMC4yNCwgLTAuMzAsIDAuMzNdLCBbJ2MnLCAtMC4yMSwgMC4wOSwgLTAuMzksIDAuMDksIC0wLjU3LCAwLjAwXSwgWydjJywgLTAuMTgsIC0wLjA5LCAtMC4yNCwgLTAuMTUsIC0wLjMzLCAtMC4zM10sIFsnYycsIC0wLjA2LCAtMC4xMiwgLTAuMDYsIC0wLjE4LCAtMC4wNiwgLTEuNDFdLCBbJ2wnLCAwLjAwLCAtMS4yOV0sIFsnbCcsIC0xLjI5LCAwLjAwXSwgWydjJywgLTEuMjMsIDAuMDAsIC0xLjI5LCAwLjAwLCAtMS40MSwgLTAuMDZdLCBbJ2MnLCAtMC4xOCwgLTAuMDksIC0wLjI0LCAtMC4xNSwgLTAuMzMsIC0wLjMzXSwgWydjJywgLTAuMDksIC0wLjE4LCAtMC4wOSwgLTAuMzYsIDAuMDAsIC0wLjU0XSwgWydjJywgMC4wOSwgLTAuMTgsIDAuMTUsIC0wLjI0LCAwLjMzLCAtMC4zM10sIFsnbCcsIDAuMTUsIC0wLjA2XSwgWydsJywgMS4yNiwgMC4wMF0sIFsnbCcsIDEuMjksIDAuMDBdLCBbJ2wnLCAwLjAwLCAtMS4yOV0sIFsnYycsIDAuMDAsIC0xLjIzLCAwLjAwLCAtMS4yOSwgMC4wNiwgLTEuNDFdLCBbJ2MnLCAwLjA5LCAtMC4xOCwgMC4xNSwgLTAuMjQsIDAuMzMsIC0wLjMzXSwgWyd6J11dLCB3OiA3LjUwNywgaDogNy41MTUgfSxcblx0JywnOiB7IGQ6IFtbJ00nLCAxLjg1LCAtMy4zNl0sIFsnYycsIDAuNTcsIC0wLjE1LCAxLjE3LCAwLjAzLCAxLjU5LCAwLjQ1XSwgWydjJywgMC40NSwgMC40NSwgMC42MCwgMC45NiwgMC41MSwgMS44OV0sIFsnYycsIC0wLjA5LCAxLjIzLCAtMC40MiwgMi40NiwgLTAuOTksIDMuOTNdLCBbJ2MnLCAtMC4zMCwgMC43MiwgLTAuNzIsIDEuNjIsIC0wLjc4LCAxLjY4XSwgWydjJywgLTAuMTgsIDAuMjEsIC0wLjUxLCAwLjE4LCAtMC42NiwgLTAuMDZdLCBbJ2MnLCAtMC4wMywgLTAuMDYsIC0wLjA2LCAtMC4xNSwgLTAuMDYsIC0wLjE4XSwgWydjJywgMC4wMCwgLTAuMDYsIDAuMTIsIC0wLjMzLCAwLjI0LCAtMC42M10sIFsnYycsIDAuODQsIC0xLjgwLCAxLjAyLCAtMi42MSwgMC42OSwgLTMuMjRdLCBbJ2MnLCAtMC4xMiwgLTAuMjQsIC0wLjI3LCAtMC4zNiwgLTAuNzUsIC0wLjYwXSwgWydjJywgLTAuMzYsIC0wLjE1LCAtMC40MiwgLTAuMjEsIC0wLjYwLCAtMC4zOV0sIFsnYycsIC0wLjY5LCAtMC42OSwgLTAuNjksIC0xLjcxLCAwLjAwLCAtMi40MF0sIFsnYycsIDAuMjEsIC0wLjIxLCAwLjUxLCAtMC4zOSwgMC44MSwgLTAuNDVdLCBbJ3onXV0sIHc6IDMuNDUyLCBoOiA4LjE0MyB9LFxuXHQnLSc6IHsgZDogW1snTScsIDAuMTgsIC01LjM0XSwgWydjJywgMC4wOSwgLTAuMDYsIDAuMTUsIC0wLjA2LCAyLjMxLCAtMC4wNl0sIFsnYycsIDIuNDYsIDAuMDAsIDIuMzcsIDAuMDAsIDIuNDYsIDAuMjFdLCBbJ2MnLCAwLjEyLCAwLjIxLCAwLjAzLCAwLjQyLCAtMC4xNSwgMC41NF0sIFsnYycsIC0wLjA5LCAwLjA2LCAtMC4xNSwgMC4wNiwgLTIuMjgsIDAuMDZdLCBbJ2MnLCAtMi4xNiwgMC4wMCwgLTIuMjIsIDAuMDAsIC0yLjMxLCAtMC4wNl0sIFsnYycsIC0wLjI3LCAtMC4xNSwgLTAuMjcsIC0wLjU0LCAtMC4wMywgLTAuNjldLCBbJ3onXV0sIHc6IDUuMDAxLCBoOiAwLjgxIH0sXG5cdCcuJzogeyBkOiBbWydNJywgMS4zMiwgLTMuMzZdLCBbJ2MnLCAxLjA1LCAtMC4yNywgMi4xMCwgMC41NywgMi4xMCwgMS42NV0sIFsnYycsIDAuMDAsIDEuMDgsIC0xLjA1LCAxLjkyLCAtMi4xMCwgMS42NV0sIFsnYycsIC0wLjkwLCAtMC4yMSwgLTEuNTAsIC0xLjE0LCAtMS4yNiwgLTIuMDRdLCBbJ2MnLCAwLjEyLCAtMC42MywgMC42MywgLTEuMTEsIDEuMjYsIC0xLjI2XSwgWyd6J11dLCB3OiAzLjQxMywgaDogMy40MDIgfSxcblx0J3NjcmlwdHMud2VkZ2UnOiB7IGQ6IFtbJ00nLCAtMy42NiwgLTcuNDRdLCBbJ2MnLCAwLjA2LCAtMC4wOSwgMC4wMCwgLTAuMDksIDAuODEsIDAuMDNdLCBbJ2MnLCAxLjg2LCAwLjMwLCAzLjg0LCAwLjMwLCA1LjczLCAwLjAwXSwgWydjJywgMC43OCwgLTAuMTIsIDAuNzIsIC0wLjEyLCAwLjc4LCAtMC4wM10sIFsnYycsIDAuMTUsIDAuMTUsIDAuMTIsIDAuMjQsIC0wLjI0LCAwLjYwXSwgWydjJywgLTAuOTMsIDAuOTMsIC0xLjk4LCAyLjc2LCAtMi42NywgNC42Ml0sIFsnYycsIC0wLjMwLCAwLjc4LCAtMC41MSwgMS43MSwgLTAuNTEsIDIuMTNdLCBbJ2MnLCAwLjAwLCAwLjE1LCAwLjAwLCAwLjE4LCAtMC4wNiwgMC4yN10sIFsnYycsIC0wLjEyLCAwLjA5LCAtMC4yNCwgMC4wOSwgLTAuMzYsIDAuMDBdLCBbJ2MnLCAtMC4wNiwgLTAuMDksIC0wLjA2LCAtMC4xMiwgLTAuMDYsIC0wLjI3XSwgWydjJywgMC4wMCwgLTAuNDIsIC0wLjIxLCAtMS4zNSwgLTAuNTEsIC0yLjEzXSwgWydjJywgLTAuNjksIC0xLjg2LCAtMS43NCwgLTMuNjksIC0yLjY3LCAtNC42Ml0sIFsnYycsIC0wLjM2LCAtMC4zNiwgLTAuMzksIC0wLjQ1LCAtMC4yNCwgLTAuNjBdLCBbJ3onXV0sIHc6IDcuNDksIGg6IDcuNzUyIH0sXG5cdCdzY3JpcHRzLnRodW1iJzogeyBkOiBbWydNJywgLTAuNTQsIC0zLjY5XSwgWydjJywgMC4xNSwgLTAuMDMsIDAuMzYsIC0wLjA2LCAwLjUxLCAtMC4wNl0sIFsnYycsIDEuNDQsIDAuMDAsIDIuNTgsIDEuMTEsIDIuOTQsIDIuODVdLCBbJ2MnLCAwLjA5LCAwLjQ4LCAwLjA5LCAxLjMyLCAwLjAwLCAxLjgwXSwgWydjJywgLTAuMjcsIDEuNDEsIC0xLjA4LCAyLjQzLCAtMi4xNiwgMi43M10sIFsnbCcsIC0wLjE4LCAwLjA2XSwgWydsJywgMC4wMCwgMC4xMl0sIFsnYycsIDAuMDMsIDAuMDYsIDAuMDYsIDAuNDUsIDAuMDksIDAuODddLCBbJ2MnLCAwLjAzLCAwLjU3LCAwLjAzLCAwLjc4LCAwLjAwLCAwLjg0XSwgWydjJywgLTAuMDksIDAuMjcsIC0wLjM5LCAwLjQ4LCAtMC42NiwgMC40OF0sIFsnYycsIC0wLjI3LCAwLjAwLCAtMC41NywgLTAuMjEsIC0wLjY2LCAtMC40OF0sIFsnYycsIC0wLjAzLCAtMC4wNiwgLTAuMDMsIC0wLjI3LCAwLjAwLCAtMC44NF0sIFsnYycsIDAuMDMsIC0wLjQyLCAwLjA2LCAtMC44MSwgMC4wOSwgLTAuODddLCBbJ2wnLCAwLjAwLCAtMC4xMl0sIFsnbCcsIC0wLjE4LCAtMC4wNl0sIFsnYycsIC0xLjA4LCAtMC4zMCwgLTEuODksIC0xLjMyLCAtMi4xNiwgLTIuNzNdLCBbJ2MnLCAtMC4wOSwgLTAuNDgsIC0wLjA5LCAtMS4zMiwgMC4wMCwgLTEuODBdLCBbJ2MnLCAwLjE1LCAtMC44NCwgMC41MSwgLTEuNTMsIDEuMDIsIC0yLjA0XSwgWydjJywgMC4zOSwgLTAuMzksIDAuODQsIC0wLjYzLCAxLjM1LCAtMC43NV0sIFsneiddLCBbJ20nLCAxLjA1LCAwLjkwXSwgWydjJywgLTAuMTUsIC0wLjA5LCAtMC4yMSwgLTAuMDksIC0wLjQ1LCAtMC4xMl0sIFsnYycsIC0wLjE1LCAwLjAwLCAtMC4zMCwgMC4wMywgLTAuMzksIDAuMDNdLCBbJ2MnLCAtMC41NywgMC4xOCwgLTAuOTAsIDAuNzIsIC0xLjA4LCAxLjc0XSwgWydjJywgLTAuMDYsIDAuNDgsIC0wLjA2LCAxLjgwLCAwLjAwLCAyLjI4XSwgWydjJywgMC4xNSwgMC45MCwgMC40MiwgMS40NCwgMC45MCwgMS42NV0sIFsnYycsIDAuMTgsIDAuMDksIDAuMjEsIDAuMDksIDAuNTEsIDAuMDldLCBbJ2MnLCAwLjMwLCAwLjAwLCAwLjMzLCAwLjAwLCAwLjUxLCAtMC4wOV0sIFsnYycsIDAuNDgsIC0wLjIxLCAwLjc1LCAtMC43NSwgMC45MCwgLTEuNjVdLCBbJ2MnLCAwLjAzLCAtMC4yNywgMC4wMywgLTAuNTQsIDAuMDMsIC0xLjE0XSwgWydjJywgMC4wMCwgLTAuNjAsIDAuMDAsIC0wLjg3LCAtMC4wMywgLTEuMTRdLCBbJ2MnLCAtMC4xNSwgLTAuOTAsIC0wLjQ1LCAtMS40NCwgLTAuOTAsIC0xLjY1XSwgWyd6J11dLCB3OiA1Ljk1NSwgaDogOS43NSB9LFxuXHQnc2NyaXB0cy5vcGVuJzogeyBkOiBbWydNJywgLTAuNTQsIC0zLjY5XSwgWydjJywgMC4xNSwgLTAuMDMsIDAuMzYsIC0wLjA2LCAwLjUxLCAtMC4wNl0sIFsnYycsIDEuNDQsIDAuMDAsIDIuNTgsIDEuMTEsIDIuOTQsIDIuODVdLCBbJ2MnLCAwLjA5LCAwLjQ4LCAwLjA5LCAxLjMyLCAwLjAwLCAxLjgwXSwgWydjJywgLTAuMzMsIDEuNzQsIC0xLjQ3LCAyLjg1LCAtMi45MSwgMi44NV0sIFsnYycsIC0xLjQ0LCAwLjAwLCAtMi41OCwgLTEuMTEsIC0yLjkxLCAtMi44NV0sIFsnYycsIC0wLjA5LCAtMC40OCwgLTAuMDksIC0xLjMyLCAwLjAwLCAtMS44MF0sIFsnYycsIDAuMTUsIC0wLjg0LCAwLjUxLCAtMS41MywgMS4wMiwgLTIuMDRdLCBbJ2MnLCAwLjM5LCAtMC4zOSwgMC44NCwgLTAuNjMsIDEuMzUsIC0wLjc1XSwgWyd6J10sIFsnbScsIDEuMTEsIDAuOTBdLCBbJ2MnLCAtMC4yMSwgLTAuMDksIC0wLjI3LCAtMC4wOSwgLTAuNTEsIC0wLjEyXSwgWydjJywgLTAuMzAsIDAuMDAsIC0wLjQyLCAwLjAzLCAtMC42NiwgMC4xNV0sIFsnYycsIC0wLjI0LCAwLjEyLCAtMC41MSwgMC4zOSwgLTAuNjYsIDAuNjNdLCBbJ2MnLCAtMC41NCwgMC45MywgLTAuNjMsIDIuNjQsIC0wLjIxLCAzLjgxXSwgWydjJywgMC4yMSwgMC41NCwgMC41MSwgMC45MCwgMC45MywgMS4xMV0sIFsnYycsIDAuMjEsIDAuMDksIDAuMjQsIDAuMDksIDAuNTQsIDAuMDldLCBbJ2MnLCAwLjMwLCAwLjAwLCAwLjMzLCAwLjAwLCAwLjU0LCAtMC4wOV0sIFsnYycsIDAuNDIsIC0wLjIxLCAwLjcyLCAtMC41NywgMC45MywgLTEuMTFdLCBbJ2MnLCAwLjM2LCAtMC45OSwgMC4zNiwgLTIuMzcsIDAuMDAsIC0zLjM2XSwgWydjJywgLTAuMjEsIC0wLjU0LCAtMC41MSwgLTAuOTAsIC0wLjkwLCAtMS4xMV0sIFsneiddXSwgdzogNS45NTUsIGg6IDcuNSB9LFxuXHQnc2NyaXB0cy5sb25ncGhyYXNlJzogeyBkOiBbWydNJywgMS40NywgLTE1LjA5XSwgWydjJywgMC4zNiwgLTAuMDksIDAuNjYsIC0wLjE4LCAwLjY5LCAtMC4xOF0sIFsnYycsIDAuMDYsIDAuMDAsIDAuMDYsIDAuNTQsIDAuMDYsIDExLjI1XSwgWydsJywgMC4wMCwgMTEuMjVdLCBbJ2wnLCAtMC42MywgMC4xNV0sIFsnYycsIC0wLjY2LCAwLjE4LCAtMS40NCwgMC4zOSwgLTEuNTAsIDAuMzldLCBbJ2MnLCAtMC4wMywgMC4wMCwgLTAuMDMsIC0zLjM5LCAtMC4wMywgLTExLjI1XSwgWydsJywgMC4wMCwgLTExLjI1XSwgWydsJywgMC4zNiwgLTAuMDldLCBbJ2MnLCAwLjIxLCAtMC4wNiwgMC42NiwgLTAuMTgsIDEuMDUsIC0wLjI3XSwgWyd6J11dLCB3OiAyLjE2LCBoOiAyMy4wNCB9LFxuXHQnc2NyaXB0cy5tZWRpdW1waHJhc2UnOiB7IGQ6IFtbJ00nLCAxLjQ3LCAtNy41OV0sIFsnYycsIDAuMzYsIC0wLjA5LCAwLjY2LCAtMC4xOCwgMC42OSwgLTAuMThdLCBbJ2MnLCAwLjA2LCAwLjAwLCAwLjA2LCAwLjM5LCAwLjA2LCA3LjUwXSwgWydsJywgMC4wMCwgNy41MF0sIFsnbCcsIC0wLjYzLCAwLjE1XSwgWydjJywgLTAuNjYsIDAuMTgsIC0xLjQ0LCAwLjM5LCAtMS41MCwgMC4zOV0sIFsnYycsIC0wLjAzLCAwLjAwLCAtMC4wMywgLTIuMjgsIC0wLjAzLCAtNy41MF0sIFsnbCcsIDAuMDAsIC03LjUwXSwgWydsJywgMC4zNiwgLTAuMDldLCBbJ2MnLCAwLjIxLCAtMC4wNiwgMC42NiwgLTAuMTgsIDEuMDUsIC0wLjI3XSwgWyd6J11dLCB3OiAyLjE2LCBoOiAxNS41NCB9LFxuXHQnc2NyaXB0cy5zaG9ydHBocmFzZSc6IHsgZDogW1snTScsIDEuNDcsIC03LjU5XSwgWydjJywgMC4zNiwgLTAuMDksIDAuNjYsIC0wLjE4LCAwLjY5LCAtMC4xOF0sIFsnYycsIDAuMDYsIDAuMDAsIDAuMDYsIDAuMjEsIDAuMDYsIDMuNzVdLCBbJ2wnLCAwLjAwLCAzLjc1XSwgWydsJywgLTAuNDIsIDAuMDldLCBbJ2MnLCAtMC41NywgMC4xOCwgLTEuNjUsIDAuNDUsIC0xLjcxLCAwLjQ1XSwgWydjJywgLTAuMDMsIDAuMDAsIC0wLjAzLCAtMC43MiwgLTAuMDMsIC0zLjc1XSwgWydsJywgMC4wMCwgLTMuNzVdLCBbJ2wnLCAwLjM2LCAtMC4wOV0sIFsnYycsIDAuMjEsIC0wLjA2LCAwLjY2LCAtMC4xOCwgMS4wNSwgLTAuMjddLCBbJ3onXV0sIHc6IDIuMTYsIGg6IDguMDQgfSxcblx0J3NjcmlwdHMuc25hcCc6IHsgZDogW1snTScsIDQuNTAsIC0zLjM5XSwgWydjJywgMC4zNiwgLTAuMDMsIDAuOTYsIC0wLjAzLCAxLjM1LCAwLjAwXSwgWydjJywgMS41NiwgMC4xNSwgMy4xNSwgMC45MCwgNC4yMCwgMi4wMV0sIFsnYycsIDAuMjQsIDAuMjcsIDAuMzMsIDAuNDIsIDAuMzMsIDAuNjBdLCBbJ2MnLCAwLjAwLCAwLjI3LCAwLjAzLCAwLjI0LCAtMi40NiwgMi4yMl0sIFsnYycsIC0xLjI5LCAxLjAyLCAtMi40MCwgMS44NiwgLTIuNDksIDEuOTJdLCBbJ2MnLCAtMC4xOCwgMC4wOSwgLTAuMzAsIDAuMDksIC0wLjQ4LCAwLjAwXSwgWydjJywgLTAuMDksIC0wLjA2LCAtMS4yMCwgLTAuOTAsIC0yLjQ5LCAtMS45Ml0sIFsnYycsIC0yLjQ5LCAtMS45OCwgLTIuNDYsIC0xLjk1LCAtMi40NiwgLTIuMjJdLCBbJ2MnLCAwLjAwLCAtMC4xOCwgMC4wOSwgLTAuMzMsIDAuMzMsIC0wLjYwXSwgWydjJywgMS4wNSwgLTEuMDgsIDIuNjQsIC0xLjg2LCA0LjE3LCAtMi4wMV0sIFsneiddLCBbJ20nLCAxLjI5LCAxLjE3XSwgWydjJywgLTEuNDcsIC0wLjE1LCAtMi45NywgMC4zMCwgLTQuMTQsIDEuMjBdLCBbJ2wnLCAtMC4xOCwgMC4xNV0sIFsnbCcsIDAuMDYsIDAuMDldLCBbJ2MnLCAwLjE1LCAwLjEyLCAzLjYzLCAyLjg1LCAzLjY2LCAyLjg1XSwgWydjJywgMC4wMywgMC4wMCwgMy41MSwgLTIuNzMsIDMuNjYsIC0yLjg1XSwgWydsJywgMC4wNiwgLTAuMDldLCBbJ2wnLCAtMC4xOCwgLTAuMTVdLCBbJ2MnLCAtMC44NCwgLTAuNjYsIC0xLjg5LCAtMS4wOCwgLTIuOTQsIC0xLjIwXSwgWyd6J11dLCB3OiAxMC4zOCwgaDogNi44NCB9XG59O1xuXG4vLyBDdXN0b20gY2hhcmFjdGVycyB0aGF0IHdlcmVuJ3QgZ2VuZXJhdGVkIGZyb20gdGhlIGZvbnQ6XG5nbHlwaHNbJ25vdGVoZWFkcy5zbGFzaC53aG9sZSddID0geyBkOiBbWydNJywgNSwgLTVdLCBbJ2wnLCAxLCAxXSwgWydsJywgLTUsIDVdLCBbJ2wnLCAtMSwgLTFdLCBbJ3onXSwgWydtJywgNCwgNl0sIFsnbCcsIC01LCAtNV0sIFsnbCcsIDIsIC0yXSwgWydsJywgNSwgNV0sIFsneiddLCBbJ20nLCAwLCAtMl0sIFsnbCcsIDEsIDFdLCBbJ2wnLCAtNSwgNV0sIFsnbCcsIC0xLCAtMV0sIFsneiddLCBbJ20nLCAtNCwgNl0sIFsnbCcsIC01LCAtNV0sIFsnbCcsIDIsIC0yXSwgWydsJywgNSwgNV0sIFsneiddXSwgdzogMTAuODEsIGg6IDE1LjYzIH07XG5cbmdseXBoc1snbm90ZWhlYWRzLnNsYXNoLnF1YXJ0ZXInXSA9IHsgZDogW1snTScsIDksIC02XSwgWydsJywgMCwgNF0sIFsnbCcsIC05LCA5XSwgWydsJywgMCwgLTRdLCBbJ3onXV0sIHc6IDksIGg6IDkgfTtcblxuZ2x5cGhzWydub3RlaGVhZHMuaGFybW9uaWMucXVhcnRlciddID0geyBkOiBbWydNJywgMy42MywgLTQuMDJdLCBbJ2MnLCAwLjA5LCAtMC4wNiwgMC4xOCwgLTAuMDksIDAuMjQsIC0wLjAzXSwgWydjJywgMC4wMywgMC4wMywgMC44NywgMC45MywgMS44MywgMi4wMV0sIFsnYycsIDEuNTAsIDEuNjUsIDEuODAsIDEuOTgsIDEuODAsIDIuMDRdLCBbJ2MnLCAwLjAwLCAwLjA2LCAtMC4zMCwgMC4zOSwgLTEuODAsIDIuMDRdLCBbJ2MnLCAtMC45NiwgMS4wOCwgLTEuODAsIDEuOTgsIC0xLjgzLCAyLjAxXSwgWydjJywgLTAuMDYsIDAuMDYsIC0wLjE1LCAwLjAzLCAtMC4yNCwgLTAuMDNdLCBbJ2MnLCAtMC4xMiwgLTAuMDksIC0zLjU0LCAtMy44NCwgLTMuNjAsIC0zLjkzXSwgWydjJywgLTAuMDMsIC0wLjAzLCAtMC4wMywgLTAuMDksIC0wLjAzLCAtMC4xNV0sIFsnYycsIDAuMDMsIC0wLjA2LCAzLjQ1LCAtMy44NCwgMy42MywgLTMuOTZdLCBbJ3onXV0sIHc6IDcuNSwgaDogOC4xNjUgfTtcblxuZ2x5cGhzWydub3RlaGVhZHMudHJpYW5nbGUucXVhcnRlciddID0geyBkOiBbWydNJywgMCwgNF0sIFsnbCcsIDksIDBdLCBbJ2wnLCAtNC41LCAtOV0sIFsneiddXSwgdzogOSwgaDogOSB9O1xuXG52YXIgcGF0aENsb25lID0gZnVuY3Rpb24gKHBhdGhBcnJheSkge1xuXHR2YXIgcmVzID0gW107XG5cdGZvciAodmFyIGkgPSAwLCBpaSA9IHBhdGhBcnJheS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG5cdFx0cmVzW2ldID0gW107XG5cdFx0Zm9yICh2YXIgaiA9IDAsIGpqID0gcGF0aEFycmF5W2ldLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcblx0XHRcdHJlc1tpXVtqXSA9IHBhdGhBcnJheVtpXVtqXTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlcztcbn07XG5cbnZhciBwYXRoU2NhbGUgPSBmdW5jdGlvbiAocGF0aEFycmF5LCBreCwga3kpIHtcblx0Zm9yICh2YXIgaSA9IDAsIGlpID0gcGF0aEFycmF5Lmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcblx0XHR2YXIgcCA9IHBhdGhBcnJheVtpXTtcblx0XHR2YXIgaiwgamo7XG5cdFx0Zm9yIChqID0gMSwgamogPSBwLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcblx0XHRcdHBbal0gKj0gKGogJSAyKSA/IGt4IDoga3k7XG5cdFx0fVxuXHR9XG59O1xuXG52YXIgR2x5cGhzID0ge1xuXHRwcmludFN5bWJvbDogZnVuY3Rpb24gKHgsIHksIHN5bWIsIHBhcGVyLCBhdHRycykge1xuXHRcdGlmICghZ2x5cGhzW3N5bWJdKSByZXR1cm4gbnVsbDtcblx0XHR2YXIgcGF0aEFycmF5ID0gcGF0aENsb25lKGdseXBoc1tzeW1iXS5kKTtcblx0XHRwYXRoQXJyYXlbMF1bMV0gKz0geDtcblx0XHRwYXRoQXJyYXlbMF1bMl0gKz0geTtcblx0XHR2YXIgcGF0aCA9IFwiXCI7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoQXJyYXkubGVuZ3RoOyBpKyspXG5cdFx0XHRwYXRoICs9IHBhdGhBcnJheVtpXS5qb2luKFwiIFwiKTtcblx0XHRhdHRycy5wYXRoID0gcGF0aDtcblx0XHRyZXR1cm4gcGFwZXIucGF0aChhdHRycyk7XG5cdH0sXG5cblx0Z2V0UGF0aEZvclN5bWJvbDogZnVuY3Rpb24gKHgsIHksIHN5bWIsIHNjYWxleCwgc2NhbGV5KSB7XG5cdFx0c2NhbGV4ID0gc2NhbGV4IHx8IDE7XG5cdFx0c2NhbGV5ID0gc2NhbGV5IHx8IDE7XG5cdFx0aWYgKCFnbHlwaHNbc3ltYl0pIHJldHVybiBudWxsO1xuXHRcdHZhciBwYXRoQXJyYXkgPSBwYXRoQ2xvbmUoZ2x5cGhzW3N5bWJdLmQpO1xuXHRcdGlmIChzY2FsZXggIT09IDEgfHwgc2NhbGV5ICE9PSAxKSBwYXRoU2NhbGUocGF0aEFycmF5LCBzY2FsZXgsIHNjYWxleSk7XG5cdFx0cGF0aEFycmF5WzBdWzFdICs9IHg7XG5cdFx0cGF0aEFycmF5WzBdWzJdICs9IHk7XG5cblx0XHRyZXR1cm4gcGF0aEFycmF5O1xuXHR9LFxuXG5cdGdldFN5bWJvbFdpZHRoOiBmdW5jdGlvbiAoc3ltYm9sKSB7XG5cdFx0aWYgKGdseXBoc1tzeW1ib2xdKSByZXR1cm4gZ2x5cGhzW3N5bWJvbF0udztcblx0XHRyZXR1cm4gMDtcblx0fSxcblxuXHRzeW1ib2xIZWlnaHRJblBpdGNoZXM6IGZ1bmN0aW9uIChzeW1ib2wpIHtcblx0XHR2YXIgaGVpZ2h0ID0gZ2x5cGhzW3N5bWJvbF0gPyBnbHlwaHNbc3ltYm9sXS5oIDogMDtcblx0XHRyZXR1cm4gaGVpZ2h0IC8gc3BhY2luZy5TVEVQO1xuXHR9LFxuXG5cdGdldFN5bWJvbEFsaWduOiBmdW5jdGlvbiAoc3ltYm9sKSB7XG5cdFx0aWYgKHN5bWJvbC5zdWJzdHJpbmcoMCwgNykgPT09IFwic2NyaXB0c1wiICYmXG5cdFx0XHRzeW1ib2wgIT09IFwic2NyaXB0cy5yb2xsXCIpIHtcblx0XHRcdHJldHVybiBcImNlbnRlclwiO1xuXHRcdH1cblx0XHRyZXR1cm4gXCJsZWZ0XCI7XG5cdH0sXG5cblx0Z2V0WUNvcnI6IGZ1bmN0aW9uIChzeW1ib2wpIHtcblx0XHRzd2l0Y2ggKHN5bWJvbCkge1xuXHRcdFx0Y2FzZSBcIjBcIjpcblx0XHRcdGNhc2UgXCIxXCI6XG5cdFx0XHRjYXNlIFwiMlwiOlxuXHRcdFx0Y2FzZSBcIjNcIjpcblx0XHRcdGNhc2UgXCI0XCI6XG5cdFx0XHRjYXNlIFwiNVwiOlxuXHRcdFx0Y2FzZSBcIjZcIjpcblx0XHRcdGNhc2UgXCI3XCI6XG5cdFx0XHRjYXNlIFwiOFwiOlxuXHRcdFx0Y2FzZSBcIjlcIjpcblx0XHRcdGNhc2UgXCIrXCI6IHJldHVybiAtMjtcblx0XHRcdGNhc2UgXCJ0aW1lc2lnLmNvbW1vblwiOlxuXHRcdFx0Y2FzZSBcInRpbWVzaWcuY3V0XCI6IHJldHVybiAwO1xuXHRcdFx0Y2FzZSBcImZsYWdzLmQzMm5kXCI6IHJldHVybiAtMTtcblx0XHRcdGNhc2UgXCJmbGFncy5kNjR0aFwiOiByZXR1cm4gLTI7XG5cdFx0XHRjYXNlIFwiZmxhZ3MudTMybmRcIjogcmV0dXJuIDE7XG5cdFx0XHRjYXNlIFwiZmxhZ3MudTY0dGhcIjogcmV0dXJuIDM7XG5cdFx0XHRjYXNlIFwicmVzdHMud2hvbGVcIjogcmV0dXJuIDE7XG5cdFx0XHRjYXNlIFwicmVzdHMuaGFsZlwiOiByZXR1cm4gLTE7XG5cdFx0XHRjYXNlIFwicmVzdHMuOHRoXCI6IHJldHVybiAtMTtcblx0XHRcdGNhc2UgXCJyZXN0cy5xdWFydGVyXCI6IHJldHVybiAtMTtcblx0XHRcdGNhc2UgXCJyZXN0cy4xNnRoXCI6IHJldHVybiAtMTtcblx0XHRcdGNhc2UgXCJyZXN0cy4zMm5kXCI6IHJldHVybiAtMTtcblx0XHRcdGNhc2UgXCJyZXN0cy42NHRoXCI6IHJldHVybiAtMTtcblx0XHRcdGNhc2UgXCJmXCI6XG5cdFx0XHRjYXNlIFwibVwiOlxuXHRcdFx0Y2FzZSBcInBcIjpcblx0XHRcdGNhc2UgXCJzXCI6XG5cdFx0XHRjYXNlIFwielwiOlxuXHRcdFx0XHRyZXR1cm4gLTQ7XG5cdFx0XHRjYXNlIFwic2NyaXB0cy50cmlsbFwiOlxuXHRcdFx0Y2FzZSBcInNjcmlwdHMudXBib3dcIjpcblx0XHRcdGNhc2UgXCJzY3JpcHRzLmRvd25ib3dcIjpcblx0XHRcdFx0cmV0dXJuIC0yO1xuXHRcdFx0Y2FzZSBcInNjcmlwdHMudWZlcm1hdGFcIjpcblx0XHRcdGNhc2UgXCJzY3JpcHRzLndlZGdlXCI6XG5cdFx0XHRjYXNlIFwic2NyaXB0cy5yb2xsXCI6XG5cdFx0XHRjYXNlIFwic2NyaXB0cy5zaG9ydHBocmFzZVwiOlxuXHRcdFx0Y2FzZSBcInNjcmlwdHMubG9uZ3BocmFzZVwiOlxuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHRjYXNlIFwic2NyaXB0cy5kZmVybWF0YVwiOlxuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdGRlZmF1bHQ6IHJldHVybiAwO1xuXHRcdH1cblx0fSxcblx0c2V0U3ltYm9sOiBmdW5jdGlvbiAobmFtZSwgcGF0aCkge1xuXHRcdGdseXBoc1tuYW1lXSA9IHBhdGg7XG5cdH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gR2x5cGhzOyAvLyB3ZSBuZWVkIHRoZSBnbHlwaHMgZm9yIGxheW91dCBpbmZvcm1hdGlvblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/glyphs.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/creation/translate-chord.js":
/*!******************************************************************!*\
  !*** ./node_modules/abcjs/src/write/creation/translate-chord.js ***!
  \******************************************************************/
/***/ ((module) => {

eval("function germanNote(note) {\n\tswitch (note) {\n\t\tcase \"B#\": return \"H#\";\n\t\tcase \"B\": return \"H\";\n\t\tcase \"B\": return \"H\";\n\t\tcase \"Bb\": return \"B\";\n\t\tcase \"B\": return \"B\";\n\t}\n\treturn note;\n}\n\nfunction translateChord(chordString, jazzchords, germanAlphabet) {\n\tvar lines = chordString.split(\"\\n\");\n\tfor (let i = 0; i < lines.length; i++) {\n\t\tlet chord = lines[i];\n\t\t// If the chord isn't in a recognizable format then just skip it.\n\t\tlet reg = chord.match(/^([ABCDEFG][]?)?([^\\/]+)?(\\/([ABCDEFG][#b]?))?/);\n\t\tif (!reg) {\n\t\t\tcontinue;\n\t\t}\n\t\tlet baseChord = reg[1] || \"\";\n\t\tlet modifier = reg[2] || \"\";\n\t\tlet bassNote = reg[4] || \"\";\n\t\tif (germanAlphabet) {\n\t\t\tbaseChord = germanNote(baseChord);\n\t\t\tbassNote = germanNote(bassNote);\n\t\t}\n\t\t// This puts markers in the pieces of the chord that are read by the svg creator.\n\t\t// After the main part of the chord (the letter, a sharp or flat, and \"m\") a marker is added. Before a slash a marker is added.\n\t\tconst marker = jazzchords ? \"\\x03\" : \"\";\n\t\tconst bass = bassNote ? \"/\" + bassNote : \"\";\n\t\tlines[i] = [baseChord, modifier, bass].join(marker);\n\t}\n\treturn lines.join(\"\\n\");\n}\n\nmodule.exports = translateChord;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2NyZWF0aW9uL3RyYW5zbGF0ZS1jaG9yZC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLGtCQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvY3JlYXRpb24vdHJhbnNsYXRlLWNob3JkLmpzPzhhMzgiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gZ2VybWFuTm90ZShub3RlKSB7XG5cdHN3aXRjaCAobm90ZSkge1xuXHRcdGNhc2UgXCJCI1wiOiByZXR1cm4gXCJII1wiO1xuXHRcdGNhc2UgXCJC4pmvXCI6IHJldHVybiBcIkjima9cIjtcblx0XHRjYXNlIFwiQlwiOiByZXR1cm4gXCJIXCI7XG5cdFx0Y2FzZSBcIkJiXCI6IHJldHVybiBcIkJcIjtcblx0XHRjYXNlIFwiQuKZrVwiOiByZXR1cm4gXCJCXCI7XG5cdH1cblx0cmV0dXJuIG5vdGU7XG59XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZUNob3JkKGNob3JkU3RyaW5nLCBqYXp6Y2hvcmRzLCBnZXJtYW5BbHBoYWJldCkge1xuXHR2YXIgbGluZXMgPSBjaG9yZFN0cmluZy5zcGxpdChcIlxcblwiKTtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdGxldCBjaG9yZCA9IGxpbmVzW2ldO1xuXHRcdC8vIElmIHRoZSBjaG9yZCBpc24ndCBpbiBhIHJlY29nbml6YWJsZSBmb3JtYXQgdGhlbiBqdXN0IHNraXAgaXQuXG5cdFx0bGV0IHJlZyA9IGNob3JkLm1hdGNoKC9eKFtBQkNERUZHXVvima/ima1dPyk/KFteXFwvXSspPyhcXC8oW0FCQ0RFRkddWyNi4pmv4pmtXT8pKT8vKTtcblx0XHRpZiAoIXJlZykge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdGxldCBiYXNlQ2hvcmQgPSByZWdbMV0gfHwgXCJcIjtcblx0XHRsZXQgbW9kaWZpZXIgPSByZWdbMl0gfHwgXCJcIjtcblx0XHRsZXQgYmFzc05vdGUgPSByZWdbNF0gfHwgXCJcIjtcblx0XHRpZiAoZ2VybWFuQWxwaGFiZXQpIHtcblx0XHRcdGJhc2VDaG9yZCA9IGdlcm1hbk5vdGUoYmFzZUNob3JkKTtcblx0XHRcdGJhc3NOb3RlID0gZ2VybWFuTm90ZShiYXNzTm90ZSk7XG5cdFx0fVxuXHRcdC8vIFRoaXMgcHV0cyBtYXJrZXJzIGluIHRoZSBwaWVjZXMgb2YgdGhlIGNob3JkIHRoYXQgYXJlIHJlYWQgYnkgdGhlIHN2ZyBjcmVhdG9yLlxuXHRcdC8vIEFmdGVyIHRoZSBtYWluIHBhcnQgb2YgdGhlIGNob3JkICh0aGUgbGV0dGVyLCBhIHNoYXJwIG9yIGZsYXQsIGFuZCBcIm1cIikgYSBtYXJrZXIgaXMgYWRkZWQuIEJlZm9yZSBhIHNsYXNoIGEgbWFya2VyIGlzIGFkZGVkLlxuXHRcdGNvbnN0IG1hcmtlciA9IGphenpjaG9yZHMgPyBcIlxceDAzXCIgOiBcIlwiO1xuXHRcdGNvbnN0IGJhc3MgPSBiYXNzTm90ZSA/IFwiL1wiICsgYmFzc05vdGUgOiBcIlwiO1xuXHRcdGxpbmVzW2ldID0gW2Jhc2VDaG9yZCwgbW9kaWZpZXIsIGJhc3NdLmpvaW4obWFya2VyKTtcblx0fVxuXHRyZXR1cm4gbGluZXMuam9pbihcIlxcblwiKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0cmFuc2xhdGVDaG9yZDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/creation/translate-chord.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/absolute.js":
/*!*******************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/absolute.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var drawTempo = __webpack_require__(/*! ./tempo */ \"(ssr)/./node_modules/abcjs/src/write/draw/tempo.js\");\nvar drawRelativeElement = __webpack_require__(/*! ./relative */ \"(ssr)/./node_modules/abcjs/src/write/draw/relative.js\");\nvar spacing = __webpack_require__(/*! ../helpers/spacing */ \"(ssr)/./node_modules/abcjs/src/write/helpers/spacing.js\");\nvar setClass = __webpack_require__(/*! ../helpers/set-class */ \"(ssr)/./node_modules/abcjs/src/write/helpers/set-class.js\");\nvar elementGroup = __webpack_require__(/*! ./group-elements */ \"(ssr)/./node_modules/abcjs/src/write/draw/group-elements.js\");\n\nfunction drawAbsolute(renderer, params, bartop, selectables, staffPos) {\n\tif (params.invisible) return;\n\tvar isTempo = params.children.length > 0 && params.children[0].type === \"TempoElement\";\n\tparams.elemset = [];\n\telementGroup.beginGroup(renderer.paper, renderer.controller);\n\tfor (var i = 0; i < params.children.length; i++) {\n\t\tvar child = params.children[i];\n\t\tswitch (child.type) {\n\t\t\tcase \"TempoElement\":\n\t\t\t\tdrawTempo(renderer, child);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tvar el = drawRelativeElement(renderer, child, bartop);\n\t\t\t\tif (child.type === \"symbol\" && child.c && child.c.indexOf('notehead') >= 0) {\n\t\t\t\t\tel.setAttribute('class', 'abcjs-notehead')\n\t\t\t\t}\n\t\t}\n\t}\n\tvar klass = params.type;\n\tif (params.type === 'note' || params.type === 'rest') {\n\t\tparams.counters = renderer.controller.classes.getCurrent();\n\t\tklass += ' d' + Math.round(params.durationClass * 1000) / 1000;\n\t\tklass = klass.replace(/\\./g, '-');\n\t\tif (params.abcelem.pitches) {\n\t\t\tfor (var j = 0; j < params.abcelem.pitches.length; j++) {\n\t\t\t\tklass += ' p' + params.abcelem.pitches[j].pitch;\n\t\t\t}\n\t\t}\n\t}\n\tvar g = elementGroup.endGroup(klass, params.type);\n\tif (g) {\n\t\t// TODO-PER-HACK! This corrects the classes because the tablature is not being created at the right time.\n\t\tif (params.cloned) {\n\t\t\tparams.cloned.overrideClasses = g.className.baseVal\n\t\t}\n\t\tif (params.overrideClasses) {\n\t\t\tvar type = g.classList && g.classList.length > 0 ? g.classList[0] + ' ' : ''\n\t\t\tg.setAttribute(\"class\", type + params.overrideClasses)\n\t\t}\n\t\tif (isTempo) {\n\t\t\tparams.startChar = params.abcelem.startChar;\n\t\t\tparams.endChar = params.abcelem.endChar;\n\t\t\tselectables.add(params, g, false, staffPos);\n\t\t} else {\n\t\t\tparams.elemset.push(g);\n\t\t\tvar isSelectable = false;\n\t\t\tif (params.type === 'note' || params.type === 'tabNumber') {\n\t\t\t\tisSelectable = true;\n\t\t\t}\n\t\t\tselectables.add(params, g, isSelectable, staffPos);\n\t\t}\n\t} else if (params.elemset.length > 0)\n\t\tselectables.add(params, params.elemset[0], params.type === 'note', staffPos);\n\t// If there was no output, then don't add to the selectables. This happens when using the \"y\" spacer, for instance.\n\n\tif (params.klass)\n\t\tsetClass(params.elemset, \"mark\", \"\", \"#00ff00\");\n\tif (params.hint)\n\t\tsetClass(params.elemset, \"abcjs-hint\", \"\", null);\n\tparams.abcelem.abselem = params;\n\n\tif (params.heads && params.heads.length > 0) {\n\t\tparams.notePositions = [];\n\t\tfor (var jj = 0; jj < params.heads.length; jj++) {\n\t\t\tparams.notePositions.push({\n\t\t\t\tx: params.heads[jj].x + params.heads[jj].w / 2,\n\t\t\t\ty: staffPos.zero - params.heads[jj].pitch * spacing.STEP\n\t\t\t});\n\t\t}\n\t}\n}\n\nmodule.exports = drawAbsolute;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvYWJzb2x1dGUuanMiLCJtYXBwaW5ncyI6IkFBQUEsZ0JBQWdCLG1CQUFPLENBQUMsbUVBQVM7QUFDakMsMEJBQTBCLG1CQUFPLENBQUMseUVBQVk7QUFDOUMsY0FBYyxtQkFBTyxDQUFDLG1GQUFvQjtBQUMxQyxlQUFlLG1CQUFPLENBQUMsdUZBQXNCO0FBQzdDLG1CQUFtQixtQkFBTyxDQUFDLHFGQUFrQjs7QUFFN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw0QkFBNEI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG1DQUFtQztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsMEJBQTBCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvZHJhdy9hYnNvbHV0ZS5qcz81ZTg2Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBkcmF3VGVtcG8gPSByZXF1aXJlKCcuL3RlbXBvJyk7XG52YXIgZHJhd1JlbGF0aXZlRWxlbWVudCA9IHJlcXVpcmUoJy4vcmVsYXRpdmUnKTtcbnZhciBzcGFjaW5nID0gcmVxdWlyZSgnLi4vaGVscGVycy9zcGFjaW5nJyk7XG52YXIgc2V0Q2xhc3MgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3NldC1jbGFzcycpO1xudmFyIGVsZW1lbnRHcm91cCA9IHJlcXVpcmUoJy4vZ3JvdXAtZWxlbWVudHMnKTtcblxuZnVuY3Rpb24gZHJhd0Fic29sdXRlKHJlbmRlcmVyLCBwYXJhbXMsIGJhcnRvcCwgc2VsZWN0YWJsZXMsIHN0YWZmUG9zKSB7XG5cdGlmIChwYXJhbXMuaW52aXNpYmxlKSByZXR1cm47XG5cdHZhciBpc1RlbXBvID0gcGFyYW1zLmNoaWxkcmVuLmxlbmd0aCA+IDAgJiYgcGFyYW1zLmNoaWxkcmVuWzBdLnR5cGUgPT09IFwiVGVtcG9FbGVtZW50XCI7XG5cdHBhcmFtcy5lbGVtc2V0ID0gW107XG5cdGVsZW1lbnRHcm91cC5iZWdpbkdyb3VwKHJlbmRlcmVyLnBhcGVyLCByZW5kZXJlci5jb250cm9sbGVyKTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwYXJhbXMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgY2hpbGQgPSBwYXJhbXMuY2hpbGRyZW5baV07XG5cdFx0c3dpdGNoIChjaGlsZC50eXBlKSB7XG5cdFx0XHRjYXNlIFwiVGVtcG9FbGVtZW50XCI6XG5cdFx0XHRcdGRyYXdUZW1wbyhyZW5kZXJlciwgY2hpbGQpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHZhciBlbCA9IGRyYXdSZWxhdGl2ZUVsZW1lbnQocmVuZGVyZXIsIGNoaWxkLCBiYXJ0b3ApO1xuXHRcdFx0XHRpZiAoY2hpbGQudHlwZSA9PT0gXCJzeW1ib2xcIiAmJiBjaGlsZC5jICYmIGNoaWxkLmMuaW5kZXhPZignbm90ZWhlYWQnKSA+PSAwKSB7XG5cdFx0XHRcdFx0ZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsICdhYmNqcy1ub3RlaGVhZCcpXG5cdFx0XHRcdH1cblx0XHR9XG5cdH1cblx0dmFyIGtsYXNzID0gcGFyYW1zLnR5cGU7XG5cdGlmIChwYXJhbXMudHlwZSA9PT0gJ25vdGUnIHx8IHBhcmFtcy50eXBlID09PSAncmVzdCcpIHtcblx0XHRwYXJhbXMuY291bnRlcnMgPSByZW5kZXJlci5jb250cm9sbGVyLmNsYXNzZXMuZ2V0Q3VycmVudCgpO1xuXHRcdGtsYXNzICs9ICcgZCcgKyBNYXRoLnJvdW5kKHBhcmFtcy5kdXJhdGlvbkNsYXNzICogMTAwMCkgLyAxMDAwO1xuXHRcdGtsYXNzID0ga2xhc3MucmVwbGFjZSgvXFwuL2csICctJyk7XG5cdFx0aWYgKHBhcmFtcy5hYmNlbGVtLnBpdGNoZXMpIHtcblx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgcGFyYW1zLmFiY2VsZW0ucGl0Y2hlcy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRrbGFzcyArPSAnIHAnICsgcGFyYW1zLmFiY2VsZW0ucGl0Y2hlc1tqXS5waXRjaDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0dmFyIGcgPSBlbGVtZW50R3JvdXAuZW5kR3JvdXAoa2xhc3MsIHBhcmFtcy50eXBlKTtcblx0aWYgKGcpIHtcblx0XHQvLyBUT0RPLVBFUi1IQUNLISBUaGlzIGNvcnJlY3RzIHRoZSBjbGFzc2VzIGJlY2F1c2UgdGhlIHRhYmxhdHVyZSBpcyBub3QgYmVpbmcgY3JlYXRlZCBhdCB0aGUgcmlnaHQgdGltZS5cblx0XHRpZiAocGFyYW1zLmNsb25lZCkge1xuXHRcdFx0cGFyYW1zLmNsb25lZC5vdmVycmlkZUNsYXNzZXMgPSBnLmNsYXNzTmFtZS5iYXNlVmFsXG5cdFx0fVxuXHRcdGlmIChwYXJhbXMub3ZlcnJpZGVDbGFzc2VzKSB7XG5cdFx0XHR2YXIgdHlwZSA9IGcuY2xhc3NMaXN0ICYmIGcuY2xhc3NMaXN0Lmxlbmd0aCA+IDAgPyBnLmNsYXNzTGlzdFswXSArICcgJyA6ICcnXG5cdFx0XHRnLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHR5cGUgKyBwYXJhbXMub3ZlcnJpZGVDbGFzc2VzKVxuXHRcdH1cblx0XHRpZiAoaXNUZW1wbykge1xuXHRcdFx0cGFyYW1zLnN0YXJ0Q2hhciA9IHBhcmFtcy5hYmNlbGVtLnN0YXJ0Q2hhcjtcblx0XHRcdHBhcmFtcy5lbmRDaGFyID0gcGFyYW1zLmFiY2VsZW0uZW5kQ2hhcjtcblx0XHRcdHNlbGVjdGFibGVzLmFkZChwYXJhbXMsIGcsIGZhbHNlLCBzdGFmZlBvcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHBhcmFtcy5lbGVtc2V0LnB1c2goZyk7XG5cdFx0XHR2YXIgaXNTZWxlY3RhYmxlID0gZmFsc2U7XG5cdFx0XHRpZiAocGFyYW1zLnR5cGUgPT09ICdub3RlJyB8fCBwYXJhbXMudHlwZSA9PT0gJ3RhYk51bWJlcicpIHtcblx0XHRcdFx0aXNTZWxlY3RhYmxlID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdHNlbGVjdGFibGVzLmFkZChwYXJhbXMsIGcsIGlzU2VsZWN0YWJsZSwgc3RhZmZQb3MpO1xuXHRcdH1cblx0fSBlbHNlIGlmIChwYXJhbXMuZWxlbXNldC5sZW5ndGggPiAwKVxuXHRcdHNlbGVjdGFibGVzLmFkZChwYXJhbXMsIHBhcmFtcy5lbGVtc2V0WzBdLCBwYXJhbXMudHlwZSA9PT0gJ25vdGUnLCBzdGFmZlBvcyk7XG5cdC8vIElmIHRoZXJlIHdhcyBubyBvdXRwdXQsIHRoZW4gZG9uJ3QgYWRkIHRvIHRoZSBzZWxlY3RhYmxlcy4gVGhpcyBoYXBwZW5zIHdoZW4gdXNpbmcgdGhlIFwieVwiIHNwYWNlciwgZm9yIGluc3RhbmNlLlxuXG5cdGlmIChwYXJhbXMua2xhc3MpXG5cdFx0c2V0Q2xhc3MocGFyYW1zLmVsZW1zZXQsIFwibWFya1wiLCBcIlwiLCBcIiMwMGZmMDBcIik7XG5cdGlmIChwYXJhbXMuaGludClcblx0XHRzZXRDbGFzcyhwYXJhbXMuZWxlbXNldCwgXCJhYmNqcy1oaW50XCIsIFwiXCIsIG51bGwpO1xuXHRwYXJhbXMuYWJjZWxlbS5hYnNlbGVtID0gcGFyYW1zO1xuXG5cdGlmIChwYXJhbXMuaGVhZHMgJiYgcGFyYW1zLmhlYWRzLmxlbmd0aCA+IDApIHtcblx0XHRwYXJhbXMubm90ZVBvc2l0aW9ucyA9IFtdO1xuXHRcdGZvciAodmFyIGpqID0gMDsgamogPCBwYXJhbXMuaGVhZHMubGVuZ3RoOyBqaisrKSB7XG5cdFx0XHRwYXJhbXMubm90ZVBvc2l0aW9ucy5wdXNoKHtcblx0XHRcdFx0eDogcGFyYW1zLmhlYWRzW2pqXS54ICsgcGFyYW1zLmhlYWRzW2pqXS53IC8gMixcblx0XHRcdFx0eTogc3RhZmZQb3MuemVybyAtIHBhcmFtcy5oZWFkc1tqal0ucGl0Y2ggKiBzcGFjaW5nLlNURVBcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRyYXdBYnNvbHV0ZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/absolute.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/beam.js":
/*!***************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/beam.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var printPath = __webpack_require__(/*! ./print-path */ \"(ssr)/./node_modules/abcjs/src/write/draw/print-path.js\");\nvar roundNumber = __webpack_require__(/*! ./round-number */ \"(ssr)/./node_modules/abcjs/src/write/draw/round-number.js\");\n\nfunction drawBeam(renderer, params) {\n\tif (params.beams.length === 0) return;\n\n\tvar pathString = \"\";\n\tfor (var i = 0; i < params.beams.length; i++) {\n\t\tvar beam = params.beams[i];\n\t\tif (beam.split) {\n\t\t\tvar slope = getSlope(renderer, beam.startX, beam.startY, beam.endX, beam.endY);\n\t\t\tvar xes = [];\n\t\t\tfor (var j = 0; j < beam.split.length; j += 2) {\n\t\t\t\txes.push([beam.split[j], beam.split[j + 1]]);\n\t\t\t}\n\t\t\tfor (j = 0; j < xes.length; j++) {\n\t\t\t\tvar y1 = getY(beam.startX, beam.startY, slope, xes[j][0]);\n\t\t\t\tvar y2 = getY(beam.startX, beam.startY, slope, xes[j][1]);\n\t\t\t\tpathString += draw(renderer, xes[j][0], y1, xes[j][1], y2, beam.dy);\n\t\t\t}\n\t\t} else\n\t\t\tpathString += draw(renderer, beam.startX, beam.startY, beam.endX, beam.endY, beam.dy);\n\t}\n\tvar durationClass = (\"abcjs-d\" + params.duration).replace(/\\./g, \"-\");\n\tvar klasses = renderer.controller.classes.generate('beam-elem ' + durationClass);\n\tvar el = printPath(renderer, {\n\t\tpath: pathString,\n\t\tstroke: \"none\",\n\t\tfill: renderer.foregroundColor,\n\t\t'class': klasses\n\t});\n\treturn [el];\n}\n\nfunction draw(renderer, startX, startY, endX, endY, dy) {\n\t// the X coordinates are actual coordinates, but the Y coordinates are in pitches.\n\tstartY = roundNumber(renderer.calcY(startY));\n\tendY = roundNumber(renderer.calcY(endY));\n\tstartX = roundNumber(startX);\n\tendX = roundNumber(endX);\n\tvar startY2 = roundNumber(startY + dy);\n\tvar endY2 = roundNumber(endY + dy);\n\treturn \"M\" + startX + \" \" + startY + \" L\" + endX + \" \" + endY +\n\t\t\"L\" + endX + \" \" + endY2 + \" L\" + startX + \" \" + startY2 + \"z\";\n}\n\nfunction getSlope(renderer, startX, startY, endX, endY) {\n\treturn (endY - startY) / (endX - startX);\n}\n\nfunction getY(startX, startY, slope, currentX) {\n\tvar x = currentX - startX;\n\treturn startY + x * slope;\n}\n\nmodule.exports = drawBeam;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvYmVhbS5qcyIsIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0IsbUJBQU8sQ0FBQyw2RUFBYztBQUN0QyxrQkFBa0IsbUJBQU8sQ0FBQyxpRkFBZ0I7O0FBRTFDO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUIseUJBQXlCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHVCQUF1QjtBQUMxQztBQUNBO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvZHJhdy9iZWFtLmpzPzkxYmEiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHByaW50UGF0aCA9IHJlcXVpcmUoJy4vcHJpbnQtcGF0aCcpO1xudmFyIHJvdW5kTnVtYmVyID0gcmVxdWlyZShcIi4vcm91bmQtbnVtYmVyXCIpO1xuXG5mdW5jdGlvbiBkcmF3QmVhbShyZW5kZXJlciwgcGFyYW1zKSB7XG5cdGlmIChwYXJhbXMuYmVhbXMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cblx0dmFyIHBhdGhTdHJpbmcgPSBcIlwiO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHBhcmFtcy5iZWFtcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBiZWFtID0gcGFyYW1zLmJlYW1zW2ldO1xuXHRcdGlmIChiZWFtLnNwbGl0KSB7XG5cdFx0XHR2YXIgc2xvcGUgPSBnZXRTbG9wZShyZW5kZXJlciwgYmVhbS5zdGFydFgsIGJlYW0uc3RhcnRZLCBiZWFtLmVuZFgsIGJlYW0uZW5kWSk7XG5cdFx0XHR2YXIgeGVzID0gW107XG5cdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGJlYW0uc3BsaXQubGVuZ3RoOyBqICs9IDIpIHtcblx0XHRcdFx0eGVzLnB1c2goW2JlYW0uc3BsaXRbal0sIGJlYW0uc3BsaXRbaiArIDFdXSk7XG5cdFx0XHR9XG5cdFx0XHRmb3IgKGogPSAwOyBqIDwgeGVzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHZhciB5MSA9IGdldFkoYmVhbS5zdGFydFgsIGJlYW0uc3RhcnRZLCBzbG9wZSwgeGVzW2pdWzBdKTtcblx0XHRcdFx0dmFyIHkyID0gZ2V0WShiZWFtLnN0YXJ0WCwgYmVhbS5zdGFydFksIHNsb3BlLCB4ZXNbal1bMV0pO1xuXHRcdFx0XHRwYXRoU3RyaW5nICs9IGRyYXcocmVuZGVyZXIsIHhlc1tqXVswXSwgeTEsIHhlc1tqXVsxXSwgeTIsIGJlYW0uZHkpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZVxuXHRcdFx0cGF0aFN0cmluZyArPSBkcmF3KHJlbmRlcmVyLCBiZWFtLnN0YXJ0WCwgYmVhbS5zdGFydFksIGJlYW0uZW5kWCwgYmVhbS5lbmRZLCBiZWFtLmR5KTtcblx0fVxuXHR2YXIgZHVyYXRpb25DbGFzcyA9IChcImFiY2pzLWRcIiArIHBhcmFtcy5kdXJhdGlvbikucmVwbGFjZSgvXFwuL2csIFwiLVwiKTtcblx0dmFyIGtsYXNzZXMgPSByZW5kZXJlci5jb250cm9sbGVyLmNsYXNzZXMuZ2VuZXJhdGUoJ2JlYW0tZWxlbSAnICsgZHVyYXRpb25DbGFzcyk7XG5cdHZhciBlbCA9IHByaW50UGF0aChyZW5kZXJlciwge1xuXHRcdHBhdGg6IHBhdGhTdHJpbmcsXG5cdFx0c3Ryb2tlOiBcIm5vbmVcIixcblx0XHRmaWxsOiByZW5kZXJlci5mb3JlZ3JvdW5kQ29sb3IsXG5cdFx0J2NsYXNzJzoga2xhc3Nlc1xuXHR9KTtcblx0cmV0dXJuIFtlbF07XG59XG5cbmZ1bmN0aW9uIGRyYXcocmVuZGVyZXIsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZLCBkeSkge1xuXHQvLyB0aGUgWCBjb29yZGluYXRlcyBhcmUgYWN0dWFsIGNvb3JkaW5hdGVzLCBidXQgdGhlIFkgY29vcmRpbmF0ZXMgYXJlIGluIHBpdGNoZXMuXG5cdHN0YXJ0WSA9IHJvdW5kTnVtYmVyKHJlbmRlcmVyLmNhbGNZKHN0YXJ0WSkpO1xuXHRlbmRZID0gcm91bmROdW1iZXIocmVuZGVyZXIuY2FsY1koZW5kWSkpO1xuXHRzdGFydFggPSByb3VuZE51bWJlcihzdGFydFgpO1xuXHRlbmRYID0gcm91bmROdW1iZXIoZW5kWCk7XG5cdHZhciBzdGFydFkyID0gcm91bmROdW1iZXIoc3RhcnRZICsgZHkpO1xuXHR2YXIgZW5kWTIgPSByb3VuZE51bWJlcihlbmRZICsgZHkpO1xuXHRyZXR1cm4gXCJNXCIgKyBzdGFydFggKyBcIiBcIiArIHN0YXJ0WSArIFwiIExcIiArIGVuZFggKyBcIiBcIiArIGVuZFkgK1xuXHRcdFwiTFwiICsgZW5kWCArIFwiIFwiICsgZW5kWTIgKyBcIiBMXCIgKyBzdGFydFggKyBcIiBcIiArIHN0YXJ0WTIgKyBcInpcIjtcbn1cblxuZnVuY3Rpb24gZ2V0U2xvcGUocmVuZGVyZXIsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKSB7XG5cdHJldHVybiAoZW5kWSAtIHN0YXJ0WSkgLyAoZW5kWCAtIHN0YXJ0WCk7XG59XG5cbmZ1bmN0aW9uIGdldFkoc3RhcnRYLCBzdGFydFksIHNsb3BlLCBjdXJyZW50WCkge1xuXHR2YXIgeCA9IGN1cnJlbnRYIC0gc3RhcnRYO1xuXHRyZXR1cm4gc3RhcnRZICsgeCAqIHNsb3BlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRyYXdCZWFtO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/beam.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/brace.js":
/*!****************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/brace.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var sprintf = __webpack_require__(/*! ./sprintf */ \"(ssr)/./node_modules/abcjs/src/write/draw/sprintf.js\");\nvar spacing = __webpack_require__(/*! ../helpers/spacing */ \"(ssr)/./node_modules/abcjs/src/write/helpers/spacing.js\");\nvar renderText = __webpack_require__(/*! ./text */ \"(ssr)/./node_modules/abcjs/src/write/draw/text.js\");\n\nfunction drawBrace(renderer, params, selectables) {\n\t// The absoluteY number is the spot where the note on the first ledger line is drawn (i.e. middle C if treble clef)\n\t// The STEP offset here moves it to the top and bottom lines\n\tvar startY = params.startVoice.staff.absoluteY - spacing.STEP * 10;\n\tif (params.endVoice && params.endVoice.staff)\n\t\tparams.endY = params.endVoice.staff.absoluteY - spacing.STEP * 2;\n\telse if (params.lastContinuedVoice && params.lastContinuedVoice.staff)\n\t\tparams.endY = params.lastContinuedVoice.staff.absoluteY - spacing.STEP * 2;\n\telse\n\t\tparams.endY = params.startVoice.staff.absoluteY - spacing.STEP * 2;\n\treturn draw(renderer, params.x, startY, params.endY, params.type, params.header, selectables);\n}\n\nfunction straightPath(renderer, xLeft, yTop, yBottom, type) {\n\txLeft += spacing.STEP;\n\tvar xLineWidth = spacing.STEP * 0.75;\n\tvar yOverlap = spacing.STEP * 0.75;\n\tvar height = yBottom - yTop;\n\t// Straight line\n\tvar pathString = sprintf(\"M %f %f l %f %f l %f %f l %f %f z\",\n\t\txLeft, yTop - yOverlap, // top left line\n\t\t0, height + yOverlap * 2, // bottom left line\n\t\txLineWidth, 0, // bottom right line\n\t\t0, - (height + yOverlap * 2) // top right line\n\t);\n\t// Top arm\n\tvar wCurve = spacing.STEP * 2;\n\tvar hCurve = spacing.STEP;\n\tpathString += sprintf(\"M %f %f q %f %f %f %f q %f %f %f %f z\",\n\t\txLeft + xLineWidth, yTop - yOverlap, // top left arm\n\t\twCurve * 0.6, hCurve * 0.2,\n\t\twCurve, -hCurve, // right point\n\t\t-wCurve * 0.1, hCurve * 0.3,\n\t\t-wCurve, hCurve + spacing.STEP // left bottom\n\t);\n\t// Bottom arm\n\tpathString += sprintf(\"M %f %f q %f %f %f %f q %f %f %f %f z\",\n\t\txLeft + xLineWidth, yTop + yOverlap + height, // bottom left arm\n\t\twCurve * 0.6, -hCurve * 0.2,\n\t\twCurve, hCurve, // right point\n\t\t-wCurve * 0.1, -hCurve * 0.3,\n\t\t-wCurve, -hCurve - spacing.STEP // left bottom\n\t);\n\treturn renderer.paper.path({ path: pathString, stroke: renderer.foregroundColor, fill: renderer.foregroundColor, 'class': renderer.controller.classes.generate(type), \"data-name\": type });\n}\n\nfunction curvyPath(renderer, xLeft, yTop, yBottom, type) {\n\tvar yHeight = yBottom - yTop;\n\n\tvar pathString = curve(xLeft,\n\t\tyTop,\n\t\t[7.5, -8, 21, 0, 18.5, -10.5, 7.5],\n\t\t[0, yHeight / 5.5, yHeight / 3.14, yHeight / 2, yHeight / 2.93, yHeight / 4.88, 0]);\n\n\tpathString += curve(xLeft,\n\t\tyTop,\n\t\t[0, 17.5, -7.5, 6.6, -5, 20, 0],\n\t\t[yHeight / 2, yHeight / 1.46, yHeight / 1.22, yHeight, yHeight / 1.19, yHeight / 1.42, yHeight / 2]);\n\n\treturn renderer.paper.path({ path: pathString, stroke: renderer.foregroundColor, fill: renderer.foregroundColor, 'class': renderer.controller.classes.generate(type), \"data-name\": type });\n}\n\nfunction curve(xLeft, yTop, xCurve, yCurve) {\n\treturn sprintf(\"M %f %f C %f %f %f %f %f %f C %f %f %f %f %f %f z\",\n\t\txLeft + xCurve[0], yTop + yCurve[0],\n\t\txLeft + xCurve[1], yTop + yCurve[1],\n\t\txLeft + xCurve[2], yTop + yCurve[2],\n\t\txLeft + xCurve[3], yTop + yCurve[3],\n\t\txLeft + xCurve[4], yTop + yCurve[4],\n\t\txLeft + xCurve[5], yTop + yCurve[5],\n\t\txLeft + xCurve[6], yTop + yCurve[6]);\n}\n\nvar draw = function (renderer, xLeft, yTop, yBottom, type, header, selectables) {//Tony\n\tvar ret;\n\tif (header) {\n\t\trenderer.paper.openGroup({ klass: renderer.controller.classes.generate(\"staff-extra voice-name\"), \"data-name\": type });\n\t\tvar position = yTop + (yBottom - yTop) / 2;\n\t\tposition = position - renderer.controller.getTextSize.baselineToCenter(header, \"voicefont\", 'staff-extra voice-name', 0, 1);\n\n\t\trenderText(renderer, {\n\t\t\tx: renderer.padding.left,\n\t\t\ty: position,\n\t\t\ttext: header,\n\t\t\ttype: 'voicefont',\n\t\t\tklass: 'staff-extra voice-name',\n\t\t\tanchor: 'start',\n\t\t\tcenterVertically: true\n\t\t});\n\t}\n\tif (type === \"brace\")\n\t\tret = curvyPath(renderer, xLeft, yTop, yBottom, type);\n\telse if (type === \"bracket\")\n\t\tret = straightPath(renderer, xLeft, yTop, yBottom, type);\n\tif (header) {\n\t\tret = renderer.paper.closeGroup();\n\t}\n\tselectables.wrapSvgEl({ el_type: type, startChar: -1, endChar: -1 }, ret);\n\n\treturn ret;\n};\nmodule.exports = drawBrace;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvYnJhY2UuanMiLCJtYXBwaW5ncyI6IkFBQUEsY0FBYyxtQkFBTyxDQUFDLHVFQUFXO0FBQ2pDLGNBQWMsbUJBQU8sQ0FBQyxtRkFBb0I7QUFDMUMsaUJBQWlCLG1CQUFPLENBQUMsaUVBQVE7O0FBRWpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsNEpBQTRKO0FBQzFMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsOEJBQThCLDRKQUE0SjtBQUMxTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpRkFBaUY7QUFDakY7QUFDQTtBQUNBLDZCQUE2QiwwRkFBMEY7QUFDdkg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkNBQTJDOztBQUVwRTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvZHJhdy9icmFjZS5qcz8zZTMzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBzcHJpbnRmID0gcmVxdWlyZSgnLi9zcHJpbnRmJyk7XG52YXIgc3BhY2luZyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvc3BhY2luZycpO1xudmFyIHJlbmRlclRleHQgPSByZXF1aXJlKCcuL3RleHQnKTtcblxuZnVuY3Rpb24gZHJhd0JyYWNlKHJlbmRlcmVyLCBwYXJhbXMsIHNlbGVjdGFibGVzKSB7XG5cdC8vIFRoZSBhYnNvbHV0ZVkgbnVtYmVyIGlzIHRoZSBzcG90IHdoZXJlIHRoZSBub3RlIG9uIHRoZSBmaXJzdCBsZWRnZXIgbGluZSBpcyBkcmF3biAoaS5lLiBtaWRkbGUgQyBpZiB0cmVibGUgY2xlZilcblx0Ly8gVGhlIFNURVAgb2Zmc2V0IGhlcmUgbW92ZXMgaXQgdG8gdGhlIHRvcCBhbmQgYm90dG9tIGxpbmVzXG5cdHZhciBzdGFydFkgPSBwYXJhbXMuc3RhcnRWb2ljZS5zdGFmZi5hYnNvbHV0ZVkgLSBzcGFjaW5nLlNURVAgKiAxMDtcblx0aWYgKHBhcmFtcy5lbmRWb2ljZSAmJiBwYXJhbXMuZW5kVm9pY2Uuc3RhZmYpXG5cdFx0cGFyYW1zLmVuZFkgPSBwYXJhbXMuZW5kVm9pY2Uuc3RhZmYuYWJzb2x1dGVZIC0gc3BhY2luZy5TVEVQICogMjtcblx0ZWxzZSBpZiAocGFyYW1zLmxhc3RDb250aW51ZWRWb2ljZSAmJiBwYXJhbXMubGFzdENvbnRpbnVlZFZvaWNlLnN0YWZmKVxuXHRcdHBhcmFtcy5lbmRZID0gcGFyYW1zLmxhc3RDb250aW51ZWRWb2ljZS5zdGFmZi5hYnNvbHV0ZVkgLSBzcGFjaW5nLlNURVAgKiAyO1xuXHRlbHNlXG5cdFx0cGFyYW1zLmVuZFkgPSBwYXJhbXMuc3RhcnRWb2ljZS5zdGFmZi5hYnNvbHV0ZVkgLSBzcGFjaW5nLlNURVAgKiAyO1xuXHRyZXR1cm4gZHJhdyhyZW5kZXJlciwgcGFyYW1zLngsIHN0YXJ0WSwgcGFyYW1zLmVuZFksIHBhcmFtcy50eXBlLCBwYXJhbXMuaGVhZGVyLCBzZWxlY3RhYmxlcyk7XG59XG5cbmZ1bmN0aW9uIHN0cmFpZ2h0UGF0aChyZW5kZXJlciwgeExlZnQsIHlUb3AsIHlCb3R0b20sIHR5cGUpIHtcblx0eExlZnQgKz0gc3BhY2luZy5TVEVQO1xuXHR2YXIgeExpbmVXaWR0aCA9IHNwYWNpbmcuU1RFUCAqIDAuNzU7XG5cdHZhciB5T3ZlcmxhcCA9IHNwYWNpbmcuU1RFUCAqIDAuNzU7XG5cdHZhciBoZWlnaHQgPSB5Qm90dG9tIC0geVRvcDtcblx0Ly8gU3RyYWlnaHQgbGluZVxuXHR2YXIgcGF0aFN0cmluZyA9IHNwcmludGYoXCJNICVmICVmIGwgJWYgJWYgbCAlZiAlZiBsICVmICVmIHpcIixcblx0XHR4TGVmdCwgeVRvcCAtIHlPdmVybGFwLCAvLyB0b3AgbGVmdCBsaW5lXG5cdFx0MCwgaGVpZ2h0ICsgeU92ZXJsYXAgKiAyLCAvLyBib3R0b20gbGVmdCBsaW5lXG5cdFx0eExpbmVXaWR0aCwgMCwgLy8gYm90dG9tIHJpZ2h0IGxpbmVcblx0XHQwLCAtIChoZWlnaHQgKyB5T3ZlcmxhcCAqIDIpIC8vIHRvcCByaWdodCBsaW5lXG5cdCk7XG5cdC8vIFRvcCBhcm1cblx0dmFyIHdDdXJ2ZSA9IHNwYWNpbmcuU1RFUCAqIDI7XG5cdHZhciBoQ3VydmUgPSBzcGFjaW5nLlNURVA7XG5cdHBhdGhTdHJpbmcgKz0gc3ByaW50ZihcIk0gJWYgJWYgcSAlZiAlZiAlZiAlZiBxICVmICVmICVmICVmIHpcIixcblx0XHR4TGVmdCArIHhMaW5lV2lkdGgsIHlUb3AgLSB5T3ZlcmxhcCwgLy8gdG9wIGxlZnQgYXJtXG5cdFx0d0N1cnZlICogMC42LCBoQ3VydmUgKiAwLjIsXG5cdFx0d0N1cnZlLCAtaEN1cnZlLCAvLyByaWdodCBwb2ludFxuXHRcdC13Q3VydmUgKiAwLjEsIGhDdXJ2ZSAqIDAuMyxcblx0XHQtd0N1cnZlLCBoQ3VydmUgKyBzcGFjaW5nLlNURVAgLy8gbGVmdCBib3R0b21cblx0KTtcblx0Ly8gQm90dG9tIGFybVxuXHRwYXRoU3RyaW5nICs9IHNwcmludGYoXCJNICVmICVmIHEgJWYgJWYgJWYgJWYgcSAlZiAlZiAlZiAlZiB6XCIsXG5cdFx0eExlZnQgKyB4TGluZVdpZHRoLCB5VG9wICsgeU92ZXJsYXAgKyBoZWlnaHQsIC8vIGJvdHRvbSBsZWZ0IGFybVxuXHRcdHdDdXJ2ZSAqIDAuNiwgLWhDdXJ2ZSAqIDAuMixcblx0XHR3Q3VydmUsIGhDdXJ2ZSwgLy8gcmlnaHQgcG9pbnRcblx0XHQtd0N1cnZlICogMC4xLCAtaEN1cnZlICogMC4zLFxuXHRcdC13Q3VydmUsIC1oQ3VydmUgLSBzcGFjaW5nLlNURVAgLy8gbGVmdCBib3R0b21cblx0KTtcblx0cmV0dXJuIHJlbmRlcmVyLnBhcGVyLnBhdGgoeyBwYXRoOiBwYXRoU3RyaW5nLCBzdHJva2U6IHJlbmRlcmVyLmZvcmVncm91bmRDb2xvciwgZmlsbDogcmVuZGVyZXIuZm9yZWdyb3VuZENvbG9yLCAnY2xhc3MnOiByZW5kZXJlci5jb250cm9sbGVyLmNsYXNzZXMuZ2VuZXJhdGUodHlwZSksIFwiZGF0YS1uYW1lXCI6IHR5cGUgfSk7XG59XG5cbmZ1bmN0aW9uIGN1cnZ5UGF0aChyZW5kZXJlciwgeExlZnQsIHlUb3AsIHlCb3R0b20sIHR5cGUpIHtcblx0dmFyIHlIZWlnaHQgPSB5Qm90dG9tIC0geVRvcDtcblxuXHR2YXIgcGF0aFN0cmluZyA9IGN1cnZlKHhMZWZ0LFxuXHRcdHlUb3AsXG5cdFx0WzcuNSwgLTgsIDIxLCAwLCAxOC41LCAtMTAuNSwgNy41XSxcblx0XHRbMCwgeUhlaWdodCAvIDUuNSwgeUhlaWdodCAvIDMuMTQsIHlIZWlnaHQgLyAyLCB5SGVpZ2h0IC8gMi45MywgeUhlaWdodCAvIDQuODgsIDBdKTtcblxuXHRwYXRoU3RyaW5nICs9IGN1cnZlKHhMZWZ0LFxuXHRcdHlUb3AsXG5cdFx0WzAsIDE3LjUsIC03LjUsIDYuNiwgLTUsIDIwLCAwXSxcblx0XHRbeUhlaWdodCAvIDIsIHlIZWlnaHQgLyAxLjQ2LCB5SGVpZ2h0IC8gMS4yMiwgeUhlaWdodCwgeUhlaWdodCAvIDEuMTksIHlIZWlnaHQgLyAxLjQyLCB5SGVpZ2h0IC8gMl0pO1xuXG5cdHJldHVybiByZW5kZXJlci5wYXBlci5wYXRoKHsgcGF0aDogcGF0aFN0cmluZywgc3Ryb2tlOiByZW5kZXJlci5mb3JlZ3JvdW5kQ29sb3IsIGZpbGw6IHJlbmRlcmVyLmZvcmVncm91bmRDb2xvciwgJ2NsYXNzJzogcmVuZGVyZXIuY29udHJvbGxlci5jbGFzc2VzLmdlbmVyYXRlKHR5cGUpLCBcImRhdGEtbmFtZVwiOiB0eXBlIH0pO1xufVxuXG5mdW5jdGlvbiBjdXJ2ZSh4TGVmdCwgeVRvcCwgeEN1cnZlLCB5Q3VydmUpIHtcblx0cmV0dXJuIHNwcmludGYoXCJNICVmICVmIEMgJWYgJWYgJWYgJWYgJWYgJWYgQyAlZiAlZiAlZiAlZiAlZiAlZiB6XCIsXG5cdFx0eExlZnQgKyB4Q3VydmVbMF0sIHlUb3AgKyB5Q3VydmVbMF0sXG5cdFx0eExlZnQgKyB4Q3VydmVbMV0sIHlUb3AgKyB5Q3VydmVbMV0sXG5cdFx0eExlZnQgKyB4Q3VydmVbMl0sIHlUb3AgKyB5Q3VydmVbMl0sXG5cdFx0eExlZnQgKyB4Q3VydmVbM10sIHlUb3AgKyB5Q3VydmVbM10sXG5cdFx0eExlZnQgKyB4Q3VydmVbNF0sIHlUb3AgKyB5Q3VydmVbNF0sXG5cdFx0eExlZnQgKyB4Q3VydmVbNV0sIHlUb3AgKyB5Q3VydmVbNV0sXG5cdFx0eExlZnQgKyB4Q3VydmVbNl0sIHlUb3AgKyB5Q3VydmVbNl0pO1xufVxuXG52YXIgZHJhdyA9IGZ1bmN0aW9uIChyZW5kZXJlciwgeExlZnQsIHlUb3AsIHlCb3R0b20sIHR5cGUsIGhlYWRlciwgc2VsZWN0YWJsZXMpIHsvL1Rvbnlcblx0dmFyIHJldDtcblx0aWYgKGhlYWRlcikge1xuXHRcdHJlbmRlcmVyLnBhcGVyLm9wZW5Hcm91cCh7IGtsYXNzOiByZW5kZXJlci5jb250cm9sbGVyLmNsYXNzZXMuZ2VuZXJhdGUoXCJzdGFmZi1leHRyYSB2b2ljZS1uYW1lXCIpLCBcImRhdGEtbmFtZVwiOiB0eXBlIH0pO1xuXHRcdHZhciBwb3NpdGlvbiA9IHlUb3AgKyAoeUJvdHRvbSAtIHlUb3ApIC8gMjtcblx0XHRwb3NpdGlvbiA9IHBvc2l0aW9uIC0gcmVuZGVyZXIuY29udHJvbGxlci5nZXRUZXh0U2l6ZS5iYXNlbGluZVRvQ2VudGVyKGhlYWRlciwgXCJ2b2ljZWZvbnRcIiwgJ3N0YWZmLWV4dHJhIHZvaWNlLW5hbWUnLCAwLCAxKTtcblxuXHRcdHJlbmRlclRleHQocmVuZGVyZXIsIHtcblx0XHRcdHg6IHJlbmRlcmVyLnBhZGRpbmcubGVmdCxcblx0XHRcdHk6IHBvc2l0aW9uLFxuXHRcdFx0dGV4dDogaGVhZGVyLFxuXHRcdFx0dHlwZTogJ3ZvaWNlZm9udCcsXG5cdFx0XHRrbGFzczogJ3N0YWZmLWV4dHJhIHZvaWNlLW5hbWUnLFxuXHRcdFx0YW5jaG9yOiAnc3RhcnQnLFxuXHRcdFx0Y2VudGVyVmVydGljYWxseTogdHJ1ZVxuXHRcdH0pO1xuXHR9XG5cdGlmICh0eXBlID09PSBcImJyYWNlXCIpXG5cdFx0cmV0ID0gY3VydnlQYXRoKHJlbmRlcmVyLCB4TGVmdCwgeVRvcCwgeUJvdHRvbSwgdHlwZSk7XG5cdGVsc2UgaWYgKHR5cGUgPT09IFwiYnJhY2tldFwiKVxuXHRcdHJldCA9IHN0cmFpZ2h0UGF0aChyZW5kZXJlciwgeExlZnQsIHlUb3AsIHlCb3R0b20sIHR5cGUpO1xuXHRpZiAoaGVhZGVyKSB7XG5cdFx0cmV0ID0gcmVuZGVyZXIucGFwZXIuY2xvc2VHcm91cCgpO1xuXHR9XG5cdHNlbGVjdGFibGVzLndyYXBTdmdFbCh7IGVsX3R5cGU6IHR5cGUsIHN0YXJ0Q2hhcjogLTEsIGVuZENoYXI6IC0xIH0sIHJldCk7XG5cblx0cmV0dXJuIHJldDtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IGRyYXdCcmFjZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/brace.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/crescendo.js":
/*!********************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/crescendo.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var sprintf = __webpack_require__(/*! ./sprintf */ \"(ssr)/./node_modules/abcjs/src/write/draw/sprintf.js\");\nvar printPath = __webpack_require__(/*! ./print-path */ \"(ssr)/./node_modules/abcjs/src/write/draw/print-path.js\");\nvar roundNumber = __webpack_require__(/*! ./round-number */ \"(ssr)/./node_modules/abcjs/src/write/draw/round-number.js\");\n\nfunction drawCrescendo(renderer, params, selectables) {\n\tif (params.pitch === undefined)\n\t\twindow.console.error(\"Crescendo Element y-coordinate not set.\");\n\tvar y = renderer.calcY(params.pitch) + 4; // This is the top pixel to use (it is offset a little so that it looks good with the volume marks.)\n\tvar height = 8;\n\n\t// TODO-PER: This is just a quick hack to make the dynamic marks not crash if they are mismatched. See the slur treatment for the way to get the beginning and end.\n\tvar left = params.anchor1 ? params.anchor1.x : 0;\n\tvar right = params.anchor2 ? params.anchor2.x : 800;\n\n\tvar el;\n\tif (params.dir === \"<\") {\n\t\tel = drawLine(renderer, y + height / 2, y, y + height / 2, y + height, left, right);\n\t} else {\n\t\tel = drawLine(renderer, y, y + height / 2, y + height, y + height / 2, left, right);\n\t}\n\tselectables.wrapSvgEl({ el_type: \"dynamicDecoration\", startChar: -1, endChar: -1 }, el);\n\treturn [el];\n}\n\nvar drawLine = function (renderer, y1, y2, y3, y4, left, right) {\n\ty1 = roundNumber(y1);\n\ty2 = roundNumber(y2);\n\ty3 = roundNumber(y3);\n\ty4 = roundNumber(y4);\n\tleft = roundNumber(left);\n\tright = roundNumber(right);\n\n\tvar pathString = sprintf(\"M %f %f L %f %f M %f %f L %f %f\",\n\t\tleft, y1, right, y2, left, y3, right, y4);\n\treturn printPath(renderer, { path: pathString, highlight: \"stroke\", stroke: renderer.foregroundColor, 'class': renderer.controller.classes.generate('dynamics decoration'), \"data-name\": \"dynamics\" });\n};\n\nmodule.exports = drawCrescendo;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvY3Jlc2NlbmRvLmpzIiwibWFwcGluZ3MiOiJBQUFBLGNBQWMsbUJBQU8sQ0FBQyx1RUFBVztBQUNqQyxnQkFBZ0IsbUJBQU8sQ0FBQyw2RUFBYztBQUN0QyxrQkFBa0IsbUJBQU8sQ0FBQyxpRkFBZ0I7O0FBRTFDO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSx5QkFBeUIsMERBQTBEO0FBQ25GO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDhCQUE4Qix3S0FBd0s7QUFDdE07O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvZHJhdy9jcmVzY2VuZG8uanM/MmY3NyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgc3ByaW50ZiA9IHJlcXVpcmUoJy4vc3ByaW50ZicpO1xudmFyIHByaW50UGF0aCA9IHJlcXVpcmUoJy4vcHJpbnQtcGF0aCcpO1xudmFyIHJvdW5kTnVtYmVyID0gcmVxdWlyZShcIi4vcm91bmQtbnVtYmVyXCIpO1xuXG5mdW5jdGlvbiBkcmF3Q3Jlc2NlbmRvKHJlbmRlcmVyLCBwYXJhbXMsIHNlbGVjdGFibGVzKSB7XG5cdGlmIChwYXJhbXMucGl0Y2ggPT09IHVuZGVmaW5lZClcblx0XHR3aW5kb3cuY29uc29sZS5lcnJvcihcIkNyZXNjZW5kbyBFbGVtZW50IHktY29vcmRpbmF0ZSBub3Qgc2V0LlwiKTtcblx0dmFyIHkgPSByZW5kZXJlci5jYWxjWShwYXJhbXMucGl0Y2gpICsgNDsgLy8gVGhpcyBpcyB0aGUgdG9wIHBpeGVsIHRvIHVzZSAoaXQgaXMgb2Zmc2V0IGEgbGl0dGxlIHNvIHRoYXQgaXQgbG9va3MgZ29vZCB3aXRoIHRoZSB2b2x1bWUgbWFya3MuKVxuXHR2YXIgaGVpZ2h0ID0gODtcblxuXHQvLyBUT0RPLVBFUjogVGhpcyBpcyBqdXN0IGEgcXVpY2sgaGFjayB0byBtYWtlIHRoZSBkeW5hbWljIG1hcmtzIG5vdCBjcmFzaCBpZiB0aGV5IGFyZSBtaXNtYXRjaGVkLiBTZWUgdGhlIHNsdXIgdHJlYXRtZW50IGZvciB0aGUgd2F5IHRvIGdldCB0aGUgYmVnaW5uaW5nIGFuZCBlbmQuXG5cdHZhciBsZWZ0ID0gcGFyYW1zLmFuY2hvcjEgPyBwYXJhbXMuYW5jaG9yMS54IDogMDtcblx0dmFyIHJpZ2h0ID0gcGFyYW1zLmFuY2hvcjIgPyBwYXJhbXMuYW5jaG9yMi54IDogODAwO1xuXG5cdHZhciBlbDtcblx0aWYgKHBhcmFtcy5kaXIgPT09IFwiPFwiKSB7XG5cdFx0ZWwgPSBkcmF3TGluZShyZW5kZXJlciwgeSArIGhlaWdodCAvIDIsIHksIHkgKyBoZWlnaHQgLyAyLCB5ICsgaGVpZ2h0LCBsZWZ0LCByaWdodCk7XG5cdH0gZWxzZSB7XG5cdFx0ZWwgPSBkcmF3TGluZShyZW5kZXJlciwgeSwgeSArIGhlaWdodCAvIDIsIHkgKyBoZWlnaHQsIHkgKyBoZWlnaHQgLyAyLCBsZWZ0LCByaWdodCk7XG5cdH1cblx0c2VsZWN0YWJsZXMud3JhcFN2Z0VsKHsgZWxfdHlwZTogXCJkeW5hbWljRGVjb3JhdGlvblwiLCBzdGFydENoYXI6IC0xLCBlbmRDaGFyOiAtMSB9LCBlbCk7XG5cdHJldHVybiBbZWxdO1xufVxuXG52YXIgZHJhd0xpbmUgPSBmdW5jdGlvbiAocmVuZGVyZXIsIHkxLCB5MiwgeTMsIHk0LCBsZWZ0LCByaWdodCkge1xuXHR5MSA9IHJvdW5kTnVtYmVyKHkxKTtcblx0eTIgPSByb3VuZE51bWJlcih5Mik7XG5cdHkzID0gcm91bmROdW1iZXIoeTMpO1xuXHR5NCA9IHJvdW5kTnVtYmVyKHk0KTtcblx0bGVmdCA9IHJvdW5kTnVtYmVyKGxlZnQpO1xuXHRyaWdodCA9IHJvdW5kTnVtYmVyKHJpZ2h0KTtcblxuXHR2YXIgcGF0aFN0cmluZyA9IHNwcmludGYoXCJNICVmICVmIEwgJWYgJWYgTSAlZiAlZiBMICVmICVmXCIsXG5cdFx0bGVmdCwgeTEsIHJpZ2h0LCB5MiwgbGVmdCwgeTMsIHJpZ2h0LCB5NCk7XG5cdHJldHVybiBwcmludFBhdGgocmVuZGVyZXIsIHsgcGF0aDogcGF0aFN0cmluZywgaGlnaGxpZ2h0OiBcInN0cm9rZVwiLCBzdHJva2U6IHJlbmRlcmVyLmZvcmVncm91bmRDb2xvciwgJ2NsYXNzJzogcmVuZGVyZXIuY29udHJvbGxlci5jbGFzc2VzLmdlbmVyYXRlKCdkeW5hbWljcyBkZWNvcmF0aW9uJyksIFwiZGF0YS1uYW1lXCI6IFwiZHluYW1pY3NcIiB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZHJhd0NyZXNjZW5kbztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/crescendo.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/debug-box.js":
/*!********************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/debug-box.js ***!
  \********************************************************/
/***/ ((module) => {

eval("function printDebugBox(renderer, attr, comment) {\n\tvar box = renderer.paper.rectBeneath(attr);\n\tif (comment)\n\t\trenderer.paper.text(comment, { x: 0, y: attr.y + 7, \"text-anchor\": \"start\", \"font-size\": \"14px\", fill: \"rgba(0,0,255,.4)\", stroke: \"rgba(0,0,255,.4)\" });\n\treturn box;\n}\n\nmodule.exports = printDebugBox;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvZGVidWctYm94LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx3SEFBd0g7QUFDeko7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9kcmF3L2RlYnVnLWJveC5qcz9iOTYyIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHByaW50RGVidWdCb3gocmVuZGVyZXIsIGF0dHIsIGNvbW1lbnQpIHtcblx0dmFyIGJveCA9IHJlbmRlcmVyLnBhcGVyLnJlY3RCZW5lYXRoKGF0dHIpO1xuXHRpZiAoY29tbWVudClcblx0XHRyZW5kZXJlci5wYXBlci50ZXh0KGNvbW1lbnQsIHsgeDogMCwgeTogYXR0ci55ICsgNywgXCJ0ZXh0LWFuY2hvclwiOiBcInN0YXJ0XCIsIFwiZm9udC1zaXplXCI6IFwiMTRweFwiLCBmaWxsOiBcInJnYmEoMCwwLDI1NSwuNClcIiwgc3Ryb2tlOiBcInJnYmEoMCwwLDI1NSwuNClcIiB9KTtcblx0cmV0dXJuIGJveDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwcmludERlYnVnQm94O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/debug-box.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/draw.js":
/*!***************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/draw.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var drawStaffGroup = __webpack_require__(/*! ./staff-group */ \"(ssr)/./node_modules/abcjs/src/write/draw/staff-group.js\");\nvar setPaperSize = __webpack_require__(/*! ./set-paper-size */ \"(ssr)/./node_modules/abcjs/src/write/draw/set-paper-size.js\");\nvar nonMusic = __webpack_require__(/*! ./non-music */ \"(ssr)/./node_modules/abcjs/src/write/draw/non-music.js\");\nvar spacing = __webpack_require__(/*! ../helpers/spacing */ \"(ssr)/./node_modules/abcjs/src/write/helpers/spacing.js\");\nvar Selectables = __webpack_require__(/*! ./selectables */ \"(ssr)/./node_modules/abcjs/src/write/draw/selectables.js\");\n\nfunction draw(renderer, classes, abcTune, width, maxWidth, responsive, scale, selectTypes, tuneNumber, lineOffset) {\n\tvar selectables = new Selectables(renderer.paper, selectTypes, tuneNumber);\n\tvar groupClasses = {}\n\tif (classes.shouldAddClasses)\n\t\tgroupClasses.klass = \"abcjs-meta-top\"\n\trenderer.paper.openGroup(groupClasses)\n\trenderer.moveY(renderer.padding.top);\n\tnonMusic(renderer, abcTune.topText, selectables);\n\trenderer.paper.closeGroup()\n\trenderer.moveY(renderer.spacing.music);\n\tvar staffgroups = [];\n\tvar nStaves = 0;\n\tfor (var line = 0; line < abcTune.lines.length; line++) {\n\t\tclasses.incrLine();\n\t\tvar abcLine = abcTune.lines[line];\n\t\tif (abcLine.staff) {\n\t\t\t// MAE 26 May 2025 - for incipits staff count limiting\n\t\t\tnStaves++;\n\t\t\tif (abcTune.formatting.maxStaves){\n\t\t\t\tif (nStaves > abcTune.formatting.maxStaves){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (classes.shouldAddClasses)\n\t\t\t\tgroupClasses.klass = \"abcjs-staff-wrapper abcjs-l\" + classes.lineNumber\n\t\t\trenderer.paper.openGroup(groupClasses)\n\t\t\tif (abcLine.vskip) {\n\t\t\t\trenderer.moveY(abcLine.vskip);\n\t\t\t}\n\t\t\tif (staffgroups.length >= 1)\n\t\t\t\taddStaffPadding(renderer, renderer.spacing.staffSeparation, staffgroups[staffgroups.length - 1], abcLine.staffGroup);\n\t\t\tvar staffgroup = engraveStaffLine(renderer, abcLine.staffGroup, selectables, line);\n\t\t\tstaffgroup.line = lineOffset + line; // If there are non-music lines then the staffgroup array won't line up with the line array, so this keeps track.\n\t\t\tstaffgroups.push(staffgroup);\n\t\t\trenderer.paper.closeGroup()\n\t\t} else if (abcLine.nonMusic) {\n\t\t\tif (classes.shouldAddClasses)\n\t\t\t\tgroupClasses.klass = \"abcjs-non-music\"\n\t\t\trenderer.paper.openGroup(groupClasses)\n\t\t\tnonMusic(renderer, abcLine.nonMusic, selectables);\n\t\t\trenderer.paper.closeGroup()\n\t\t}\n\t}\n\n\tclasses.reset();\n\tif (abcTune.bottomText && abcTune.bottomText.rows && abcTune.bottomText.rows.length > 0) {\n\t\tif (classes.shouldAddClasses)\n\t\t\tgroupClasses.klass = \"abcjs-meta-bottom\"\n\t\trenderer.paper.openGroup(groupClasses)\n\t\trenderer.moveY(24); // TODO-PER: Empirically discovered. What variable should this be?\n\t\tnonMusic(renderer, abcTune.bottomText, selectables);\n\t\trenderer.paper.closeGroup()\n\t}\n\tsetPaperSize(renderer, maxWidth, scale, responsive);\n\treturn { staffgroups: staffgroups, selectables: selectables.getElements() };\n}\n\nfunction engraveStaffLine(renderer, staffGroup, selectables, lineNumber) {\n\tdrawStaffGroup(renderer, staffGroup, selectables, lineNumber);\n\tvar height = staffGroup.height * spacing.STEP;\n\trenderer.y += height;\n\treturn staffGroup;\n}\n\nfunction addStaffPadding(renderer, staffSeparation, lastStaffGroup, thisStaffGroup) {\n\tvar lastStaff = lastStaffGroup.staffs[lastStaffGroup.staffs.length - 1];\n\tvar lastBottomLine = -(lastStaff.bottom - 2); // The 2 is because the scale goes to 2 below the last line.\n\tvar nextTopLine = thisStaffGroup.staffs[0].top - 10; // Because 10 represents the top line.\n\tvar naturalSeparation = nextTopLine + lastBottomLine; // This is how far apart they'd be without extra spacing\n\tvar separationInPixels = naturalSeparation * spacing.STEP;\n\tif (separationInPixels < staffSeparation)\n\t\trenderer.moveY(staffSeparation - separationInPixels);\n}\n\nmodule.exports = draw;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvZHJhdy5qcyIsIm1hcHBpbmdzIjoiQUFBQSxxQkFBcUIsbUJBQU8sQ0FBQywrRUFBZTtBQUM1QyxtQkFBbUIsbUJBQU8sQ0FBQyxxRkFBa0I7QUFDN0MsZUFBZSxtQkFBTyxDQUFDLDJFQUFhO0FBQ3BDLGNBQWMsbUJBQU8sQ0FBQyxtRkFBb0I7QUFDMUMsa0JBQWtCLG1CQUFPLENBQUMsK0VBQWU7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw2QkFBNkI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DLHNEQUFzRDtBQUN0RCx1REFBdUQ7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvZHJhdy9kcmF3LmpzP2FhZjMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRyYXdTdGFmZkdyb3VwID0gcmVxdWlyZSgnLi9zdGFmZi1ncm91cCcpO1xudmFyIHNldFBhcGVyU2l6ZSA9IHJlcXVpcmUoJy4vc2V0LXBhcGVyLXNpemUnKTtcbnZhciBub25NdXNpYyA9IHJlcXVpcmUoJy4vbm9uLW11c2ljJyk7XG52YXIgc3BhY2luZyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvc3BhY2luZycpO1xudmFyIFNlbGVjdGFibGVzID0gcmVxdWlyZSgnLi9zZWxlY3RhYmxlcycpO1xuXG5mdW5jdGlvbiBkcmF3KHJlbmRlcmVyLCBjbGFzc2VzLCBhYmNUdW5lLCB3aWR0aCwgbWF4V2lkdGgsIHJlc3BvbnNpdmUsIHNjYWxlLCBzZWxlY3RUeXBlcywgdHVuZU51bWJlciwgbGluZU9mZnNldCkge1xuXHR2YXIgc2VsZWN0YWJsZXMgPSBuZXcgU2VsZWN0YWJsZXMocmVuZGVyZXIucGFwZXIsIHNlbGVjdFR5cGVzLCB0dW5lTnVtYmVyKTtcblx0dmFyIGdyb3VwQ2xhc3NlcyA9IHt9XG5cdGlmIChjbGFzc2VzLnNob3VsZEFkZENsYXNzZXMpXG5cdFx0Z3JvdXBDbGFzc2VzLmtsYXNzID0gXCJhYmNqcy1tZXRhLXRvcFwiXG5cdHJlbmRlcmVyLnBhcGVyLm9wZW5Hcm91cChncm91cENsYXNzZXMpXG5cdHJlbmRlcmVyLm1vdmVZKHJlbmRlcmVyLnBhZGRpbmcudG9wKTtcblx0bm9uTXVzaWMocmVuZGVyZXIsIGFiY1R1bmUudG9wVGV4dCwgc2VsZWN0YWJsZXMpO1xuXHRyZW5kZXJlci5wYXBlci5jbG9zZUdyb3VwKClcblx0cmVuZGVyZXIubW92ZVkocmVuZGVyZXIuc3BhY2luZy5tdXNpYyk7XG5cdHZhciBzdGFmZmdyb3VwcyA9IFtdO1xuXHR2YXIgblN0YXZlcyA9IDA7XG5cdGZvciAodmFyIGxpbmUgPSAwOyBsaW5lIDwgYWJjVHVuZS5saW5lcy5sZW5ndGg7IGxpbmUrKykge1xuXHRcdGNsYXNzZXMuaW5jckxpbmUoKTtcblx0XHR2YXIgYWJjTGluZSA9IGFiY1R1bmUubGluZXNbbGluZV07XG5cdFx0aWYgKGFiY0xpbmUuc3RhZmYpIHtcblx0XHRcdC8vIE1BRSAyNiBNYXkgMjAyNSAtIGZvciBpbmNpcGl0cyBzdGFmZiBjb3VudCBsaW1pdGluZ1xuXHRcdFx0blN0YXZlcysrO1xuXHRcdFx0aWYgKGFiY1R1bmUuZm9ybWF0dGluZy5tYXhTdGF2ZXMpe1xuXHRcdFx0XHRpZiAoblN0YXZlcyA+IGFiY1R1bmUuZm9ybWF0dGluZy5tYXhTdGF2ZXMpe1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoY2xhc3Nlcy5zaG91bGRBZGRDbGFzc2VzKVxuXHRcdFx0XHRncm91cENsYXNzZXMua2xhc3MgPSBcImFiY2pzLXN0YWZmLXdyYXBwZXIgYWJjanMtbFwiICsgY2xhc3Nlcy5saW5lTnVtYmVyXG5cdFx0XHRyZW5kZXJlci5wYXBlci5vcGVuR3JvdXAoZ3JvdXBDbGFzc2VzKVxuXHRcdFx0aWYgKGFiY0xpbmUudnNraXApIHtcblx0XHRcdFx0cmVuZGVyZXIubW92ZVkoYWJjTGluZS52c2tpcCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoc3RhZmZncm91cHMubGVuZ3RoID49IDEpXG5cdFx0XHRcdGFkZFN0YWZmUGFkZGluZyhyZW5kZXJlciwgcmVuZGVyZXIuc3BhY2luZy5zdGFmZlNlcGFyYXRpb24sIHN0YWZmZ3JvdXBzW3N0YWZmZ3JvdXBzLmxlbmd0aCAtIDFdLCBhYmNMaW5lLnN0YWZmR3JvdXApO1xuXHRcdFx0dmFyIHN0YWZmZ3JvdXAgPSBlbmdyYXZlU3RhZmZMaW5lKHJlbmRlcmVyLCBhYmNMaW5lLnN0YWZmR3JvdXAsIHNlbGVjdGFibGVzLCBsaW5lKTtcblx0XHRcdHN0YWZmZ3JvdXAubGluZSA9IGxpbmVPZmZzZXQgKyBsaW5lOyAvLyBJZiB0aGVyZSBhcmUgbm9uLW11c2ljIGxpbmVzIHRoZW4gdGhlIHN0YWZmZ3JvdXAgYXJyYXkgd29uJ3QgbGluZSB1cCB3aXRoIHRoZSBsaW5lIGFycmF5LCBzbyB0aGlzIGtlZXBzIHRyYWNrLlxuXHRcdFx0c3RhZmZncm91cHMucHVzaChzdGFmZmdyb3VwKTtcblx0XHRcdHJlbmRlcmVyLnBhcGVyLmNsb3NlR3JvdXAoKVxuXHRcdH0gZWxzZSBpZiAoYWJjTGluZS5ub25NdXNpYykge1xuXHRcdFx0aWYgKGNsYXNzZXMuc2hvdWxkQWRkQ2xhc3Nlcylcblx0XHRcdFx0Z3JvdXBDbGFzc2VzLmtsYXNzID0gXCJhYmNqcy1ub24tbXVzaWNcIlxuXHRcdFx0cmVuZGVyZXIucGFwZXIub3Blbkdyb3VwKGdyb3VwQ2xhc3Nlcylcblx0XHRcdG5vbk11c2ljKHJlbmRlcmVyLCBhYmNMaW5lLm5vbk11c2ljLCBzZWxlY3RhYmxlcyk7XG5cdFx0XHRyZW5kZXJlci5wYXBlci5jbG9zZUdyb3VwKClcblx0XHR9XG5cdH1cblxuXHRjbGFzc2VzLnJlc2V0KCk7XG5cdGlmIChhYmNUdW5lLmJvdHRvbVRleHQgJiYgYWJjVHVuZS5ib3R0b21UZXh0LnJvd3MgJiYgYWJjVHVuZS5ib3R0b21UZXh0LnJvd3MubGVuZ3RoID4gMCkge1xuXHRcdGlmIChjbGFzc2VzLnNob3VsZEFkZENsYXNzZXMpXG5cdFx0XHRncm91cENsYXNzZXMua2xhc3MgPSBcImFiY2pzLW1ldGEtYm90dG9tXCJcblx0XHRyZW5kZXJlci5wYXBlci5vcGVuR3JvdXAoZ3JvdXBDbGFzc2VzKVxuXHRcdHJlbmRlcmVyLm1vdmVZKDI0KTsgLy8gVE9ETy1QRVI6IEVtcGlyaWNhbGx5IGRpc2NvdmVyZWQuIFdoYXQgdmFyaWFibGUgc2hvdWxkIHRoaXMgYmU/XG5cdFx0bm9uTXVzaWMocmVuZGVyZXIsIGFiY1R1bmUuYm90dG9tVGV4dCwgc2VsZWN0YWJsZXMpO1xuXHRcdHJlbmRlcmVyLnBhcGVyLmNsb3NlR3JvdXAoKVxuXHR9XG5cdHNldFBhcGVyU2l6ZShyZW5kZXJlciwgbWF4V2lkdGgsIHNjYWxlLCByZXNwb25zaXZlKTtcblx0cmV0dXJuIHsgc3RhZmZncm91cHM6IHN0YWZmZ3JvdXBzLCBzZWxlY3RhYmxlczogc2VsZWN0YWJsZXMuZ2V0RWxlbWVudHMoKSB9O1xufVxuXG5mdW5jdGlvbiBlbmdyYXZlU3RhZmZMaW5lKHJlbmRlcmVyLCBzdGFmZkdyb3VwLCBzZWxlY3RhYmxlcywgbGluZU51bWJlcikge1xuXHRkcmF3U3RhZmZHcm91cChyZW5kZXJlciwgc3RhZmZHcm91cCwgc2VsZWN0YWJsZXMsIGxpbmVOdW1iZXIpO1xuXHR2YXIgaGVpZ2h0ID0gc3RhZmZHcm91cC5oZWlnaHQgKiBzcGFjaW5nLlNURVA7XG5cdHJlbmRlcmVyLnkgKz0gaGVpZ2h0O1xuXHRyZXR1cm4gc3RhZmZHcm91cDtcbn1cblxuZnVuY3Rpb24gYWRkU3RhZmZQYWRkaW5nKHJlbmRlcmVyLCBzdGFmZlNlcGFyYXRpb24sIGxhc3RTdGFmZkdyb3VwLCB0aGlzU3RhZmZHcm91cCkge1xuXHR2YXIgbGFzdFN0YWZmID0gbGFzdFN0YWZmR3JvdXAuc3RhZmZzW2xhc3RTdGFmZkdyb3VwLnN0YWZmcy5sZW5ndGggLSAxXTtcblx0dmFyIGxhc3RCb3R0b21MaW5lID0gLShsYXN0U3RhZmYuYm90dG9tIC0gMik7IC8vIFRoZSAyIGlzIGJlY2F1c2UgdGhlIHNjYWxlIGdvZXMgdG8gMiBiZWxvdyB0aGUgbGFzdCBsaW5lLlxuXHR2YXIgbmV4dFRvcExpbmUgPSB0aGlzU3RhZmZHcm91cC5zdGFmZnNbMF0udG9wIC0gMTA7IC8vIEJlY2F1c2UgMTAgcmVwcmVzZW50cyB0aGUgdG9wIGxpbmUuXG5cdHZhciBuYXR1cmFsU2VwYXJhdGlvbiA9IG5leHRUb3BMaW5lICsgbGFzdEJvdHRvbUxpbmU7IC8vIFRoaXMgaXMgaG93IGZhciBhcGFydCB0aGV5J2QgYmUgd2l0aG91dCBleHRyYSBzcGFjaW5nXG5cdHZhciBzZXBhcmF0aW9uSW5QaXhlbHMgPSBuYXR1cmFsU2VwYXJhdGlvbiAqIHNwYWNpbmcuU1RFUDtcblx0aWYgKHNlcGFyYXRpb25JblBpeGVscyA8IHN0YWZmU2VwYXJhdGlvbilcblx0XHRyZW5kZXJlci5tb3ZlWShzdGFmZlNlcGFyYXRpb24gLSBzZXBhcmF0aW9uSW5QaXhlbHMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRyYXc7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/draw.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/dynamics.js":
/*!*******************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/dynamics.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var printSymbol = __webpack_require__(/*! ./print-symbol */ \"(ssr)/./node_modules/abcjs/src/write/draw/print-symbol.js\");\n\nfunction drawDynamics(renderer, params, selectables) {\n\tif (params.pitch === undefined)\n\t\twindow.console.error(\"Dynamic Element y-coordinate not set.\");\n\tvar scalex = 1;\n\tvar scaley = 1;\n\tvar el = printSymbol(renderer, params.anchor.x, params.pitch, params.dec, {\n\t\tscalex: scalex,\n\t\tscaley: scaley,\n\t\tklass: renderer.controller.classes.generate('decoration dynamics'),\n\t\tfill: renderer.foregroundColor,\n\t\tstroke: \"none\",\n\t\tname: \"dynamics\"\n\t});\n\tselectables.wrapSvgEl({ el_type: \"dynamicDecoration\", startChar: -1, endChar: -1, decoration: params.dec }, el);\n\treturn [el];\n}\n\nmodule.exports = drawDynamics;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvZHluYW1pY3MuanMiLCJtYXBwaW5ncyI6IkFBQUEsa0JBQWtCLG1CQUFPLENBQUMsaUZBQWdCOztBQUUxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YseUJBQXlCLGtGQUFrRjtBQUMzRztBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvZHluYW1pY3MuanM/NTcyMiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcHJpbnRTeW1ib2wgPSByZXF1aXJlKCcuL3ByaW50LXN5bWJvbCcpO1xuXG5mdW5jdGlvbiBkcmF3RHluYW1pY3MocmVuZGVyZXIsIHBhcmFtcywgc2VsZWN0YWJsZXMpIHtcblx0aWYgKHBhcmFtcy5waXRjaCA9PT0gdW5kZWZpbmVkKVxuXHRcdHdpbmRvdy5jb25zb2xlLmVycm9yKFwiRHluYW1pYyBFbGVtZW50IHktY29vcmRpbmF0ZSBub3Qgc2V0LlwiKTtcblx0dmFyIHNjYWxleCA9IDE7XG5cdHZhciBzY2FsZXkgPSAxO1xuXHR2YXIgZWwgPSBwcmludFN5bWJvbChyZW5kZXJlciwgcGFyYW1zLmFuY2hvci54LCBwYXJhbXMucGl0Y2gsIHBhcmFtcy5kZWMsIHtcblx0XHRzY2FsZXg6IHNjYWxleCxcblx0XHRzY2FsZXk6IHNjYWxleSxcblx0XHRrbGFzczogcmVuZGVyZXIuY29udHJvbGxlci5jbGFzc2VzLmdlbmVyYXRlKCdkZWNvcmF0aW9uIGR5bmFtaWNzJyksXG5cdFx0ZmlsbDogcmVuZGVyZXIuZm9yZWdyb3VuZENvbG9yLFxuXHRcdHN0cm9rZTogXCJub25lXCIsXG5cdFx0bmFtZTogXCJkeW5hbWljc1wiXG5cdH0pO1xuXHRzZWxlY3RhYmxlcy53cmFwU3ZnRWwoeyBlbF90eXBlOiBcImR5bmFtaWNEZWNvcmF0aW9uXCIsIHN0YXJ0Q2hhcjogLTEsIGVuZENoYXI6IC0xLCBkZWNvcmF0aW9uOiBwYXJhbXMuZGVjIH0sIGVsKTtcblx0cmV0dXJuIFtlbF07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZHJhd0R5bmFtaWNzO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/dynamics.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/ending.js":
/*!*****************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/ending.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var sprintf = __webpack_require__(/*! ./sprintf */ \"(ssr)/./node_modules/abcjs/src/write/draw/sprintf.js\");\nvar renderText = __webpack_require__(/*! ./text */ \"(ssr)/./node_modules/abcjs/src/write/draw/text.js\");\nvar printPath = __webpack_require__(/*! ./print-path */ \"(ssr)/./node_modules/abcjs/src/write/draw/print-path.js\");\nvar roundNumber = __webpack_require__(/*! ./round-number */ \"(ssr)/./node_modules/abcjs/src/write/draw/round-number.js\");\n\nfunction drawEnding(renderer, params, linestartx, lineendx, selectables) {\n\tif (params.pitch === undefined)\n\t\twindow.console.error(\"Ending Element y-coordinate not set.\");\n\tvar y = roundNumber(renderer.calcY(params.pitch));\n\tvar height = 20;\n\tvar pathString = '';\n\n\tif (params.anchor1) {\n\t\tlinestartx = roundNumber(params.anchor1.x + params.anchor1.w);\n\t\tpathString += sprintf(\"M %f %f L %f %f \",\n\t\t\tlinestartx, y, linestartx, roundNumber(y + height));\n\t}\n\n\tif (params.anchor2) {\n\t\tlineendx = roundNumber(params.anchor2.x);\n\t\tpathString += sprintf(\"M %f %f L %f %f \",\n\t\t\tlineendx, y, lineendx, roundNumber(y + height));\n\t}\n\n\tpathString += sprintf(\"M %f %f L %f %f \",\n\t\tlinestartx, y, lineendx, y);\n\trenderer.paper.openGroup({\n\t\tklass: renderer.controller.classes.generate(\"ending\"),\n\t\t// MAE 17 May 2025 - Ending numbers not being drawn in correct color\n\t\tfill: renderer.foregroundColor,\n\t\t\"data-name\": \"ending\"\n\t});\n\tprintPath(renderer, {\n\t\tpath: pathString,\n\t\tstroke: renderer.foregroundColor,\n\t\tfill: renderer.foregroundColor,\n\t\t\"data-name\": \"line\"\n\t});\n\tif (params.anchor1)\n\t\trenderText(renderer, {\n\t\t\tx: roundNumber(linestartx + 5),\n\t\t\ty: roundNumber(renderer.calcY(params.pitch - 0.5)),\n\t\t\ttext: params.text,\n\t\t\ttype: 'repeatfont',\n\t\t\tklass: 'ending',\n\t\t\tanchor: \"start\",\n\t\t\tnoClass: true,\n\t\t\tname: params.text\n\t\t});\n\tvar g = renderer.paper.closeGroup();\n\tselectables.wrapSvgEl({ el_type: \"ending\", startChar: -1, endChar: -1 }, g);\n\treturn [g];\n}\n\nmodule.exports = drawEnding;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvZW5kaW5nLmpzIiwibWFwcGluZ3MiOiJBQUFBLGNBQWMsbUJBQU8sQ0FBQyx1RUFBVztBQUNqQyxpQkFBaUIsbUJBQU8sQ0FBQyxpRUFBUTtBQUNqQyxnQkFBZ0IsbUJBQU8sQ0FBQyw2RUFBYztBQUN0QyxrQkFBa0IsbUJBQU8sQ0FBQyxpRkFBZ0I7O0FBRTFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHlCQUF5QiwrQ0FBK0M7QUFDeEU7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9kcmF3L2VuZGluZy5qcz9kMjM5Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBzcHJpbnRmID0gcmVxdWlyZSgnLi9zcHJpbnRmJyk7XG52YXIgcmVuZGVyVGV4dCA9IHJlcXVpcmUoJy4vdGV4dCcpO1xudmFyIHByaW50UGF0aCA9IHJlcXVpcmUoJy4vcHJpbnQtcGF0aCcpO1xudmFyIHJvdW5kTnVtYmVyID0gcmVxdWlyZShcIi4vcm91bmQtbnVtYmVyXCIpO1xuXG5mdW5jdGlvbiBkcmF3RW5kaW5nKHJlbmRlcmVyLCBwYXJhbXMsIGxpbmVzdGFydHgsIGxpbmVlbmR4LCBzZWxlY3RhYmxlcykge1xuXHRpZiAocGFyYW1zLnBpdGNoID09PSB1bmRlZmluZWQpXG5cdFx0d2luZG93LmNvbnNvbGUuZXJyb3IoXCJFbmRpbmcgRWxlbWVudCB5LWNvb3JkaW5hdGUgbm90IHNldC5cIik7XG5cdHZhciB5ID0gcm91bmROdW1iZXIocmVuZGVyZXIuY2FsY1kocGFyYW1zLnBpdGNoKSk7XG5cdHZhciBoZWlnaHQgPSAyMDtcblx0dmFyIHBhdGhTdHJpbmcgPSAnJztcblxuXHRpZiAocGFyYW1zLmFuY2hvcjEpIHtcblx0XHRsaW5lc3RhcnR4ID0gcm91bmROdW1iZXIocGFyYW1zLmFuY2hvcjEueCArIHBhcmFtcy5hbmNob3IxLncpO1xuXHRcdHBhdGhTdHJpbmcgKz0gc3ByaW50ZihcIk0gJWYgJWYgTCAlZiAlZiBcIixcblx0XHRcdGxpbmVzdGFydHgsIHksIGxpbmVzdGFydHgsIHJvdW5kTnVtYmVyKHkgKyBoZWlnaHQpKTtcblx0fVxuXG5cdGlmIChwYXJhbXMuYW5jaG9yMikge1xuXHRcdGxpbmVlbmR4ID0gcm91bmROdW1iZXIocGFyYW1zLmFuY2hvcjIueCk7XG5cdFx0cGF0aFN0cmluZyArPSBzcHJpbnRmKFwiTSAlZiAlZiBMICVmICVmIFwiLFxuXHRcdFx0bGluZWVuZHgsIHksIGxpbmVlbmR4LCByb3VuZE51bWJlcih5ICsgaGVpZ2h0KSk7XG5cdH1cblxuXHRwYXRoU3RyaW5nICs9IHNwcmludGYoXCJNICVmICVmIEwgJWYgJWYgXCIsXG5cdFx0bGluZXN0YXJ0eCwgeSwgbGluZWVuZHgsIHkpO1xuXHRyZW5kZXJlci5wYXBlci5vcGVuR3JvdXAoe1xuXHRcdGtsYXNzOiByZW5kZXJlci5jb250cm9sbGVyLmNsYXNzZXMuZ2VuZXJhdGUoXCJlbmRpbmdcIiksXG5cdFx0Ly8gTUFFIDE3IE1heSAyMDI1IC0gRW5kaW5nIG51bWJlcnMgbm90IGJlaW5nIGRyYXduIGluIGNvcnJlY3QgY29sb3Jcblx0XHRmaWxsOiByZW5kZXJlci5mb3JlZ3JvdW5kQ29sb3IsXG5cdFx0XCJkYXRhLW5hbWVcIjogXCJlbmRpbmdcIlxuXHR9KTtcblx0cHJpbnRQYXRoKHJlbmRlcmVyLCB7XG5cdFx0cGF0aDogcGF0aFN0cmluZyxcblx0XHRzdHJva2U6IHJlbmRlcmVyLmZvcmVncm91bmRDb2xvcixcblx0XHRmaWxsOiByZW5kZXJlci5mb3JlZ3JvdW5kQ29sb3IsXG5cdFx0XCJkYXRhLW5hbWVcIjogXCJsaW5lXCJcblx0fSk7XG5cdGlmIChwYXJhbXMuYW5jaG9yMSlcblx0XHRyZW5kZXJUZXh0KHJlbmRlcmVyLCB7XG5cdFx0XHR4OiByb3VuZE51bWJlcihsaW5lc3RhcnR4ICsgNSksXG5cdFx0XHR5OiByb3VuZE51bWJlcihyZW5kZXJlci5jYWxjWShwYXJhbXMucGl0Y2ggLSAwLjUpKSxcblx0XHRcdHRleHQ6IHBhcmFtcy50ZXh0LFxuXHRcdFx0dHlwZTogJ3JlcGVhdGZvbnQnLFxuXHRcdFx0a2xhc3M6ICdlbmRpbmcnLFxuXHRcdFx0YW5jaG9yOiBcInN0YXJ0XCIsXG5cdFx0XHRub0NsYXNzOiB0cnVlLFxuXHRcdFx0bmFtZTogcGFyYW1zLnRleHRcblx0XHR9KTtcblx0dmFyIGcgPSByZW5kZXJlci5wYXBlci5jbG9zZUdyb3VwKCk7XG5cdHNlbGVjdGFibGVzLndyYXBTdmdFbCh7IGVsX3R5cGU6IFwiZW5kaW5nXCIsIHN0YXJ0Q2hhcjogLTEsIGVuZENoYXI6IC0xIH0sIGcpO1xuXHRyZXR1cm4gW2ddO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRyYXdFbmRpbmc7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/ending.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/glissando.js":
/*!********************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/glissando.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var sprintf = __webpack_require__(/*! ./sprintf */ \"(ssr)/./node_modules/abcjs/src/write/draw/sprintf.js\");\nvar printPath = __webpack_require__(/*! ./print-path */ \"(ssr)/./node_modules/abcjs/src/write/draw/print-path.js\");\nvar roundNumber = __webpack_require__(/*! ./round-number */ \"(ssr)/./node_modules/abcjs/src/write/draw/round-number.js\");\n\nfunction drawGlissando(renderer, params, selectables) {\n\tif (!params.anchor1 || !params.anchor2 || !params.anchor1.heads || !params.anchor2.heads || params.anchor1.heads.length === 0 || params.anchor2.heads.length === 0)\n\t\twindow.console.error(\"Glissando Element not set.\");\n\n\tvar margin = 4;\n\tvar leftY = renderer.calcY(params.anchor1.heads[0].pitch)\n\tvar rightY = renderer.calcY(params.anchor2.heads[0].pitch)\n\tvar leftX = params.anchor1.x + params.anchor1.w / 2\n\tvar rightX = params.anchor2.x + params.anchor2.w / 2\n\t\n\tvar len = lineLength(leftX, leftY, rightX, rightY)\n\tvar marginLeft = params.anchor1.w / 2 + margin\n\tvar marginRight = params.anchor2.w / 2 + margin\n\tvar s = slope(leftX, leftY, rightX, rightY)\n\tvar leftYAdj = getY(leftY, s, marginLeft)\n\tvar rightYAdj = getY(rightY, s, -marginRight)\n\tvar num = numSquigglies(len - marginLeft - marginRight)\n\n\tvar el = drawSquiggly(renderer, leftX + marginLeft, leftYAdj, num, s)\n\tselectables.wrapSvgEl({ el_type: \"glissando\", startChar: -1, endChar: -1 }, el);\n\treturn [el];\n}\n\nfunction lineLength(leftX, leftY, rightX, rightY) {\n\t// The length from notehead center to notehead center.\n\tvar w = rightX - leftX\n\tvar h = rightY - leftY\n\treturn Math.sqrt(w * w + h * h)\n}\n\nfunction slope(leftX, leftY, rightX, rightY) {\n\treturn (rightY - leftY) / (rightX - leftX)\n}\n\nfunction getY(y, slope, xOfs) {\n\treturn roundNumber(y + (xOfs) * slope);\n}\n\nfunction numSquigglies(length) {\n\tvar endLen = 5; // The width of the end - that is, the non repeating part\n\treturn Math.max(2, Math.floor((length - endLen * 2) / 6));\n}\n\nvar leftStart = [[3.5, -4.8]]\nvar right = [[1.5, -1], [.3, -.3], [-3.5, 3.8]]\nvar leftEnd = [[-1.5, 2]]\nvar top = [[3, 4], [3, -4]]\nvar bottom = [[-3, 4], [-3, -4]]\n\nfunction segment(arr, slope) {\n\tvar ret = \"\";\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tret += 'l' + arr[i][0] + ' ' + getY(arr[i][1], slope, arr[i][0])\n\t}\n\treturn ret\n}\n\nvar drawSquiggly = function (renderer, x, y, num, slope) {\n\tvar p = sprintf(\"M %f %f\", x, y);\n\tp += segment(leftStart, slope)\n\tvar i\n\tfor (i = 0; i < num; i++) {\n\t\tp += segment(top, slope)\n\t}\n\tp += segment(right, slope)\n\tfor (i = 0; i < num; i++)\n\t\tp += segment(bottom, slope)\n\tp += segment(leftEnd, slope) + 'z'\n\treturn printPath(renderer, { path: p, highlight: \"stroke\", stroke: renderer.foregroundColor, 'class': renderer.controller.classes.generate('decoration'), \"data-name\": \"glissando\" });\n}\n\nmodule.exports = drawGlissando;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvZ2xpc3NhbmRvLmpzIiwibWFwcGluZ3MiOiJBQUFBLGNBQWMsbUJBQU8sQ0FBQyx1RUFBVztBQUNqQyxnQkFBZ0IsbUJBQU8sQ0FBQyw2RUFBYztBQUN0QyxrQkFBa0IsbUJBQU8sQ0FBQyxpRkFBZ0I7O0FBRTFDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QixrREFBa0Q7QUFDM0U7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixnQkFBZ0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQSw4QkFBOEIsdUpBQXVKO0FBQ3JMOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvZ2xpc3NhbmRvLmpzPzcxZDgiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHNwcmludGYgPSByZXF1aXJlKCcuL3NwcmludGYnKTtcbnZhciBwcmludFBhdGggPSByZXF1aXJlKCcuL3ByaW50LXBhdGgnKTtcbnZhciByb3VuZE51bWJlciA9IHJlcXVpcmUoXCIuL3JvdW5kLW51bWJlclwiKTtcblxuZnVuY3Rpb24gZHJhd0dsaXNzYW5kbyhyZW5kZXJlciwgcGFyYW1zLCBzZWxlY3RhYmxlcykge1xuXHRpZiAoIXBhcmFtcy5hbmNob3IxIHx8ICFwYXJhbXMuYW5jaG9yMiB8fCAhcGFyYW1zLmFuY2hvcjEuaGVhZHMgfHwgIXBhcmFtcy5hbmNob3IyLmhlYWRzIHx8IHBhcmFtcy5hbmNob3IxLmhlYWRzLmxlbmd0aCA9PT0gMCB8fCBwYXJhbXMuYW5jaG9yMi5oZWFkcy5sZW5ndGggPT09IDApXG5cdFx0d2luZG93LmNvbnNvbGUuZXJyb3IoXCJHbGlzc2FuZG8gRWxlbWVudCBub3Qgc2V0LlwiKTtcblxuXHR2YXIgbWFyZ2luID0gNDtcblx0dmFyIGxlZnRZID0gcmVuZGVyZXIuY2FsY1kocGFyYW1zLmFuY2hvcjEuaGVhZHNbMF0ucGl0Y2gpXG5cdHZhciByaWdodFkgPSByZW5kZXJlci5jYWxjWShwYXJhbXMuYW5jaG9yMi5oZWFkc1swXS5waXRjaClcblx0dmFyIGxlZnRYID0gcGFyYW1zLmFuY2hvcjEueCArIHBhcmFtcy5hbmNob3IxLncgLyAyXG5cdHZhciByaWdodFggPSBwYXJhbXMuYW5jaG9yMi54ICsgcGFyYW1zLmFuY2hvcjIudyAvIDJcblx0XG5cdHZhciBsZW4gPSBsaW5lTGVuZ3RoKGxlZnRYLCBsZWZ0WSwgcmlnaHRYLCByaWdodFkpXG5cdHZhciBtYXJnaW5MZWZ0ID0gcGFyYW1zLmFuY2hvcjEudyAvIDIgKyBtYXJnaW5cblx0dmFyIG1hcmdpblJpZ2h0ID0gcGFyYW1zLmFuY2hvcjIudyAvIDIgKyBtYXJnaW5cblx0dmFyIHMgPSBzbG9wZShsZWZ0WCwgbGVmdFksIHJpZ2h0WCwgcmlnaHRZKVxuXHR2YXIgbGVmdFlBZGogPSBnZXRZKGxlZnRZLCBzLCBtYXJnaW5MZWZ0KVxuXHR2YXIgcmlnaHRZQWRqID0gZ2V0WShyaWdodFksIHMsIC1tYXJnaW5SaWdodClcblx0dmFyIG51bSA9IG51bVNxdWlnZ2xpZXMobGVuIC0gbWFyZ2luTGVmdCAtIG1hcmdpblJpZ2h0KVxuXG5cdHZhciBlbCA9IGRyYXdTcXVpZ2dseShyZW5kZXJlciwgbGVmdFggKyBtYXJnaW5MZWZ0LCBsZWZ0WUFkaiwgbnVtLCBzKVxuXHRzZWxlY3RhYmxlcy53cmFwU3ZnRWwoeyBlbF90eXBlOiBcImdsaXNzYW5kb1wiLCBzdGFydENoYXI6IC0xLCBlbmRDaGFyOiAtMSB9LCBlbCk7XG5cdHJldHVybiBbZWxdO1xufVxuXG5mdW5jdGlvbiBsaW5lTGVuZ3RoKGxlZnRYLCBsZWZ0WSwgcmlnaHRYLCByaWdodFkpIHtcblx0Ly8gVGhlIGxlbmd0aCBmcm9tIG5vdGVoZWFkIGNlbnRlciB0byBub3RlaGVhZCBjZW50ZXIuXG5cdHZhciB3ID0gcmlnaHRYIC0gbGVmdFhcblx0dmFyIGggPSByaWdodFkgLSBsZWZ0WVxuXHRyZXR1cm4gTWF0aC5zcXJ0KHcgKiB3ICsgaCAqIGgpXG59XG5cbmZ1bmN0aW9uIHNsb3BlKGxlZnRYLCBsZWZ0WSwgcmlnaHRYLCByaWdodFkpIHtcblx0cmV0dXJuIChyaWdodFkgLSBsZWZ0WSkgLyAocmlnaHRYIC0gbGVmdFgpXG59XG5cbmZ1bmN0aW9uIGdldFkoeSwgc2xvcGUsIHhPZnMpIHtcblx0cmV0dXJuIHJvdW5kTnVtYmVyKHkgKyAoeE9mcykgKiBzbG9wZSk7XG59XG5cbmZ1bmN0aW9uIG51bVNxdWlnZ2xpZXMobGVuZ3RoKSB7XG5cdHZhciBlbmRMZW4gPSA1OyAvLyBUaGUgd2lkdGggb2YgdGhlIGVuZCAtIHRoYXQgaXMsIHRoZSBub24gcmVwZWF0aW5nIHBhcnRcblx0cmV0dXJuIE1hdGgubWF4KDIsIE1hdGguZmxvb3IoKGxlbmd0aCAtIGVuZExlbiAqIDIpIC8gNikpO1xufVxuXG52YXIgbGVmdFN0YXJ0ID0gW1szLjUsIC00LjhdXVxudmFyIHJpZ2h0ID0gW1sxLjUsIC0xXSwgWy4zLCAtLjNdLCBbLTMuNSwgMy44XV1cbnZhciBsZWZ0RW5kID0gW1stMS41LCAyXV1cbnZhciB0b3AgPSBbWzMsIDRdLCBbMywgLTRdXVxudmFyIGJvdHRvbSA9IFtbLTMsIDRdLCBbLTMsIC00XV1cblxuZnVuY3Rpb24gc2VnbWVudChhcnIsIHNsb3BlKSB7XG5cdHZhciByZXQgPSBcIlwiO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuXHRcdHJldCArPSAnbCcgKyBhcnJbaV1bMF0gKyAnICcgKyBnZXRZKGFycltpXVsxXSwgc2xvcGUsIGFycltpXVswXSlcblx0fVxuXHRyZXR1cm4gcmV0XG59XG5cbnZhciBkcmF3U3F1aWdnbHkgPSBmdW5jdGlvbiAocmVuZGVyZXIsIHgsIHksIG51bSwgc2xvcGUpIHtcblx0dmFyIHAgPSBzcHJpbnRmKFwiTSAlZiAlZlwiLCB4LCB5KTtcblx0cCArPSBzZWdtZW50KGxlZnRTdGFydCwgc2xvcGUpXG5cdHZhciBpXG5cdGZvciAoaSA9IDA7IGkgPCBudW07IGkrKykge1xuXHRcdHAgKz0gc2VnbWVudCh0b3AsIHNsb3BlKVxuXHR9XG5cdHAgKz0gc2VnbWVudChyaWdodCwgc2xvcGUpXG5cdGZvciAoaSA9IDA7IGkgPCBudW07IGkrKylcblx0XHRwICs9IHNlZ21lbnQoYm90dG9tLCBzbG9wZSlcblx0cCArPSBzZWdtZW50KGxlZnRFbmQsIHNsb3BlKSArICd6J1xuXHRyZXR1cm4gcHJpbnRQYXRoKHJlbmRlcmVyLCB7IHBhdGg6IHAsIGhpZ2hsaWdodDogXCJzdHJva2VcIiwgc3Ryb2tlOiByZW5kZXJlci5mb3JlZ3JvdW5kQ29sb3IsICdjbGFzcyc6IHJlbmRlcmVyLmNvbnRyb2xsZXIuY2xhc3Nlcy5nZW5lcmF0ZSgnZGVjb3JhdGlvbicpLCBcImRhdGEtbmFtZVwiOiBcImdsaXNzYW5kb1wiIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRyYXdHbGlzc2FuZG87XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/glissando.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/group-elements.js":
/*!*************************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/group-elements.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/**\n * Begin a group of glyphs that will always be moved, scaled and highlighted together\n */\n\nvar roundNumber = __webpack_require__(/*! ./round-number */ \"(ssr)/./node_modules/abcjs/src/write/draw/round-number.js\");\n\nfunction Group() {\n\tthis.ingroup = false;\n}\n\nGroup.prototype.beginGroup = function (paper, controller) {\n\tthis.paper = paper;\n\tthis.controller = controller;\n\tthis.path = [];\n\tthis.lastM = [0, 0];\n\tthis.ingroup = true;\n\tthis.paper.openGroup();\n};\n\nGroup.prototype.isInGroup = function () {\n\treturn this.ingroup;\n}\n\nGroup.prototype.addPath = function (path) {\n\tpath = path || [];\n\tif (path.length === 0) return;\n\tpath[0][0] = \"m\";\n\tpath[0][1] = roundNumber(path[0][1] - this.lastM[0]);\n\tpath[0][2] = roundNumber(path[0][2] - this.lastM[1]);\n\tthis.lastM[0] += path[0][1];\n\tthis.lastM[1] += path[0][2];\n\tthis.path.push(path[0]);\n\tfor (var i = 1, ii = path.length; i < ii; i++) {\n\t\tif (path[i][0] === \"m\") {\n\t\t\tthis.lastM[0] += path[i][1];\n\t\t\tthis.lastM[1] += path[i][2];\n\t\t}\n\t\tthis.path.push(path[i]);\n\t}\n};\n\n/**\n * End a group of glyphs that will always be moved, scaled and highlighted together\n */\nGroup.prototype.endGroup = function (klass, name) {\n\tthis.ingroup = false;\n\t//if (this.path.length === 0) return null;\n\tvar path = \"\";\n\tfor (var i = 0; i < this.path.length; i++)\n\t\tpath += this.path[i].join(\" \");\n\tthis.path = [];\n\n\tvar ret = this.paper.closeGroup();\n\tif (ret) {\n\t\tret.setAttribute(\"class\", this.controller.classes.generate(klass))\n\t\tret.setAttribute(\"fill\", this.controller.renderer.foregroundColor)\n\t\tret.setAttribute(\"stroke\", \"none\")\n\t\tret.setAttribute(\"data-name\", name)\n\t}\n\treturn ret;\n};\n\n// There is just a singleton of this object.\nvar elementGroup = new Group();\n\nmodule.exports = elementGroup;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvZ3JvdXAtZWxlbWVudHMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBLGtCQUFrQixtQkFBTyxDQUFDLGlGQUFnQjs7QUFFMUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxRQUFRO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHNCQUFzQjtBQUN2QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvZ3JvdXAtZWxlbWVudHMuanM/ZjJlMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEJlZ2luIGEgZ3JvdXAgb2YgZ2x5cGhzIHRoYXQgd2lsbCBhbHdheXMgYmUgbW92ZWQsIHNjYWxlZCBhbmQgaGlnaGxpZ2h0ZWQgdG9nZXRoZXJcbiAqL1xuXG52YXIgcm91bmROdW1iZXIgPSByZXF1aXJlKFwiLi9yb3VuZC1udW1iZXJcIik7XG5cbmZ1bmN0aW9uIEdyb3VwKCkge1xuXHR0aGlzLmluZ3JvdXAgPSBmYWxzZTtcbn1cblxuR3JvdXAucHJvdG90eXBlLmJlZ2luR3JvdXAgPSBmdW5jdGlvbiAocGFwZXIsIGNvbnRyb2xsZXIpIHtcblx0dGhpcy5wYXBlciA9IHBhcGVyO1xuXHR0aGlzLmNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuXHR0aGlzLnBhdGggPSBbXTtcblx0dGhpcy5sYXN0TSA9IFswLCAwXTtcblx0dGhpcy5pbmdyb3VwID0gdHJ1ZTtcblx0dGhpcy5wYXBlci5vcGVuR3JvdXAoKTtcbn07XG5cbkdyb3VwLnByb3RvdHlwZS5pc0luR3JvdXAgPSBmdW5jdGlvbiAoKSB7XG5cdHJldHVybiB0aGlzLmluZ3JvdXA7XG59XG5cbkdyb3VwLnByb3RvdHlwZS5hZGRQYXRoID0gZnVuY3Rpb24gKHBhdGgpIHtcblx0cGF0aCA9IHBhdGggfHwgW107XG5cdGlmIChwYXRoLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXHRwYXRoWzBdWzBdID0gXCJtXCI7XG5cdHBhdGhbMF1bMV0gPSByb3VuZE51bWJlcihwYXRoWzBdWzFdIC0gdGhpcy5sYXN0TVswXSk7XG5cdHBhdGhbMF1bMl0gPSByb3VuZE51bWJlcihwYXRoWzBdWzJdIC0gdGhpcy5sYXN0TVsxXSk7XG5cdHRoaXMubGFzdE1bMF0gKz0gcGF0aFswXVsxXTtcblx0dGhpcy5sYXN0TVsxXSArPSBwYXRoWzBdWzJdO1xuXHR0aGlzLnBhdGgucHVzaChwYXRoWzBdKTtcblx0Zm9yICh2YXIgaSA9IDEsIGlpID0gcGF0aC5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG5cdFx0aWYgKHBhdGhbaV1bMF0gPT09IFwibVwiKSB7XG5cdFx0XHR0aGlzLmxhc3RNWzBdICs9IHBhdGhbaV1bMV07XG5cdFx0XHR0aGlzLmxhc3RNWzFdICs9IHBhdGhbaV1bMl07XG5cdFx0fVxuXHRcdHRoaXMucGF0aC5wdXNoKHBhdGhbaV0pO1xuXHR9XG59O1xuXG4vKipcbiAqIEVuZCBhIGdyb3VwIG9mIGdseXBocyB0aGF0IHdpbGwgYWx3YXlzIGJlIG1vdmVkLCBzY2FsZWQgYW5kIGhpZ2hsaWdodGVkIHRvZ2V0aGVyXG4gKi9cbkdyb3VwLnByb3RvdHlwZS5lbmRHcm91cCA9IGZ1bmN0aW9uIChrbGFzcywgbmFtZSkge1xuXHR0aGlzLmluZ3JvdXAgPSBmYWxzZTtcblx0Ly9pZiAodGhpcy5wYXRoLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cdHZhciBwYXRoID0gXCJcIjtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhdGgubGVuZ3RoOyBpKyspXG5cdFx0cGF0aCArPSB0aGlzLnBhdGhbaV0uam9pbihcIiBcIik7XG5cdHRoaXMucGF0aCA9IFtdO1xuXG5cdHZhciByZXQgPSB0aGlzLnBhcGVyLmNsb3NlR3JvdXAoKTtcblx0aWYgKHJldCkge1xuXHRcdHJldC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB0aGlzLmNvbnRyb2xsZXIuY2xhc3Nlcy5nZW5lcmF0ZShrbGFzcykpXG5cdFx0cmV0LnNldEF0dHJpYnV0ZShcImZpbGxcIiwgdGhpcy5jb250cm9sbGVyLnJlbmRlcmVyLmZvcmVncm91bmRDb2xvcilcblx0XHRyZXQuc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsIFwibm9uZVwiKVxuXHRcdHJldC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW5hbWVcIiwgbmFtZSlcblx0fVxuXHRyZXR1cm4gcmV0O1xufTtcblxuLy8gVGhlcmUgaXMganVzdCBhIHNpbmdsZXRvbiBvZiB0aGlzIG9iamVjdC5cbnZhciBlbGVtZW50R3JvdXAgPSBuZXcgR3JvdXAoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBlbGVtZW50R3JvdXA7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/group-elements.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/non-music.js":
/*!********************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/non-music.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var drawSeparator = __webpack_require__(/*! ./separator */ \"(ssr)/./node_modules/abcjs/src/write/draw/separator.js\");\nvar renderText = __webpack_require__(/*! ./text */ \"(ssr)/./node_modules/abcjs/src/write/draw/text.js\");\n\nfunction nonMusic(renderer, obj, selectables) {\n\tfor (var i = 0; i < obj.rows.length; i++) {\n\t\tvar row = obj.rows[i];\n\t\tif (row.absmove) {\n\t\t\trenderer.absolutemoveY(row.absmove);\n\t\t} else if (row.move) {\n\t\t\trenderer.moveY(row.move);\n\t\t} else if (row.text || row.phrases) {\n\t\t\tvar x = row.left ? row.left : 0;\n\t\t\tvar el = renderText(renderer, {\n\t\t\t\tx: x,\n\t\t\t\ty: renderer.y,\n\t\t\t\ttext: row.text,\n\t\t\t\tphrases: row.phrases,\n\t\t\t\t'dominant-baseline': row['dominant-baseline'],\n\t\t\t\ttype: row.font,\n\t\t\t\tklass: row.klass,\n\t\t\t\tname: row.name,\n\t\t\t\tanchor: row.anchor\n\t\t\t});\n\t\t\tif (row.absElemType) {\n\t\t\t\tselectables.wrapSvgEl({\n\t\t\t\t\tel_type: row.absElemType,\n\t\t\t\t\tname: row.name,\n\t\t\t\t\tstartChar: row.startChar,\n\t\t\t\t\tendChar: row.endChar,\n\t\t\t\t\ttext: row.text\n\t\t\t\t}, el);\n\t\t\t}\n\t\t} else if (row.separator) {\n\t\t\tdrawSeparator(renderer, row.separator)\n\t\t} else if (row.startGroup) {\n\t\t\trenderer.paper.openGroup({ klass: row.klass, \"data-name\": row.name });\n\t\t} else if (row.endGroup) {\n\t\t\t// TODO-PER: also create a history element with the title \"row.endGroup\"\n\t\t\tvar g = renderer.paper.closeGroup();\n\t\t\tif (row.absElemType)\n\t\t\t\tselectables.wrapSvgEl({\n\t\t\t\t\tel_type: row.absElemType,\n\t\t\t\t\tname: row.name,\n\t\t\t\t\tstartChar: row.startChar,\n\t\t\t\t\tendChar: row.endChar,\n\t\t\t\t\ttext: \"\"\n\t\t\t\t}, g);\n\t\t}\n\t}\n}\n\nmodule.exports = nonMusic;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvbm9uLW11c2ljLmpzIiwibWFwcGluZ3MiOiJBQUFBLG9CQUFvQixtQkFBTyxDQUFDLDJFQUFhO0FBQ3pDLGlCQUFpQixtQkFBTyxDQUFDLGlFQUFROztBQUVqQztBQUNBLGlCQUFpQixxQkFBcUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0osOEJBQThCLHlDQUF5QztBQUN2RSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9kcmF3L25vbi1tdXNpYy5qcz8zODE3Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBkcmF3U2VwYXJhdG9yID0gcmVxdWlyZSgnLi9zZXBhcmF0b3InKTtcbnZhciByZW5kZXJUZXh0ID0gcmVxdWlyZSgnLi90ZXh0Jyk7XG5cbmZ1bmN0aW9uIG5vbk11c2ljKHJlbmRlcmVyLCBvYmosIHNlbGVjdGFibGVzKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLnJvd3MubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgcm93ID0gb2JqLnJvd3NbaV07XG5cdFx0aWYgKHJvdy5hYnNtb3ZlKSB7XG5cdFx0XHRyZW5kZXJlci5hYnNvbHV0ZW1vdmVZKHJvdy5hYnNtb3ZlKTtcblx0XHR9IGVsc2UgaWYgKHJvdy5tb3ZlKSB7XG5cdFx0XHRyZW5kZXJlci5tb3ZlWShyb3cubW92ZSk7XG5cdFx0fSBlbHNlIGlmIChyb3cudGV4dCB8fCByb3cucGhyYXNlcykge1xuXHRcdFx0dmFyIHggPSByb3cubGVmdCA/IHJvdy5sZWZ0IDogMDtcblx0XHRcdHZhciBlbCA9IHJlbmRlclRleHQocmVuZGVyZXIsIHtcblx0XHRcdFx0eDogeCxcblx0XHRcdFx0eTogcmVuZGVyZXIueSxcblx0XHRcdFx0dGV4dDogcm93LnRleHQsXG5cdFx0XHRcdHBocmFzZXM6IHJvdy5waHJhc2VzLFxuXHRcdFx0XHQnZG9taW5hbnQtYmFzZWxpbmUnOiByb3dbJ2RvbWluYW50LWJhc2VsaW5lJ10sXG5cdFx0XHRcdHR5cGU6IHJvdy5mb250LFxuXHRcdFx0XHRrbGFzczogcm93LmtsYXNzLFxuXHRcdFx0XHRuYW1lOiByb3cubmFtZSxcblx0XHRcdFx0YW5jaG9yOiByb3cuYW5jaG9yXG5cdFx0XHR9KTtcblx0XHRcdGlmIChyb3cuYWJzRWxlbVR5cGUpIHtcblx0XHRcdFx0c2VsZWN0YWJsZXMud3JhcFN2Z0VsKHtcblx0XHRcdFx0XHRlbF90eXBlOiByb3cuYWJzRWxlbVR5cGUsXG5cdFx0XHRcdFx0bmFtZTogcm93Lm5hbWUsXG5cdFx0XHRcdFx0c3RhcnRDaGFyOiByb3cuc3RhcnRDaGFyLFxuXHRcdFx0XHRcdGVuZENoYXI6IHJvdy5lbmRDaGFyLFxuXHRcdFx0XHRcdHRleHQ6IHJvdy50ZXh0XG5cdFx0XHRcdH0sIGVsKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKHJvdy5zZXBhcmF0b3IpIHtcblx0XHRcdGRyYXdTZXBhcmF0b3IocmVuZGVyZXIsIHJvdy5zZXBhcmF0b3IpXG5cdFx0fSBlbHNlIGlmIChyb3cuc3RhcnRHcm91cCkge1xuXHRcdFx0cmVuZGVyZXIucGFwZXIub3Blbkdyb3VwKHsga2xhc3M6IHJvdy5rbGFzcywgXCJkYXRhLW5hbWVcIjogcm93Lm5hbWUgfSk7XG5cdFx0fSBlbHNlIGlmIChyb3cuZW5kR3JvdXApIHtcblx0XHRcdC8vIFRPRE8tUEVSOiBhbHNvIGNyZWF0ZSBhIGhpc3RvcnkgZWxlbWVudCB3aXRoIHRoZSB0aXRsZSBcInJvdy5lbmRHcm91cFwiXG5cdFx0XHR2YXIgZyA9IHJlbmRlcmVyLnBhcGVyLmNsb3NlR3JvdXAoKTtcblx0XHRcdGlmIChyb3cuYWJzRWxlbVR5cGUpXG5cdFx0XHRcdHNlbGVjdGFibGVzLndyYXBTdmdFbCh7XG5cdFx0XHRcdFx0ZWxfdHlwZTogcm93LmFic0VsZW1UeXBlLFxuXHRcdFx0XHRcdG5hbWU6IHJvdy5uYW1lLFxuXHRcdFx0XHRcdHN0YXJ0Q2hhcjogcm93LnN0YXJ0Q2hhcixcblx0XHRcdFx0XHRlbmRDaGFyOiByb3cuZW5kQ2hhcixcblx0XHRcdFx0XHR0ZXh0OiBcIlwiXG5cdFx0XHRcdH0sIGcpO1xuXHRcdH1cblx0fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5vbk11c2ljO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/non-music.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/print-line.js":
/*!*********************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/print-line.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var sprintf = __webpack_require__(/*! ./sprintf */ \"(ssr)/./node_modules/abcjs/src/write/draw/sprintf.js\");\nvar roundNumber = __webpack_require__(/*! ./round-number */ \"(ssr)/./node_modules/abcjs/src/write/draw/round-number.js\");\n\nfunction printLine(renderer, x1, x2, y, klass, name, dy) {\n\tvar fill = renderer.foregroundColor;\n\tx1 = roundNumber(x1);\n\tx2 = roundNumber(x2);\n\tvar y1 = roundNumber(y - dy);\n\tvar y2 = roundNumber(y + dy);\n\t// TODO-PER: This fixes a firefox bug where it isn't displayed\n\tif (renderer.firefox112) {\n\t\ty += dy / 2; // Because the y coordinate is the edge of where the line goes but the width widens from the middle.\n\t\tvar attr = {\n\t\t\tx1: x1,\n\t\t\tx2: x2,\n\t\t\ty1: y,\n\t\t\ty2: y,\n\t\t\tstroke: renderer.foregroundColor,\n\t\t\t'stroke-width': Math.abs(dy*2)\n\t\t}\n\t\tif (klass)\n\t\t\tattr['class'] = klass;\n\t\tif (name)\n\t\t\tattr['data-name'] = name;\n\t\t\n\t\treturn renderer.paper.lineToBack(attr);\n\t}\n\n\tvar pathString = sprintf(\"M %f %f L %f %f L %f %f L %f %f z\", x1, y1, x2, y1,\n\t\tx2, y2, x1, y2);\n\tvar options = { path: pathString, stroke: \"none\", fill: fill };\n\tif (name)\n\t\toptions['data-name'] = name;\n\tif (klass)\n\t\toptions['class'] = klass;\n\tvar ret = renderer.paper.pathToBack(options);\n\n\treturn ret;\n}\n\nmodule.exports = printLine;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvcHJpbnQtbGluZS5qcyIsIm1hcHBpbmdzIjoiQUFBQSxjQUFjLG1CQUFPLENBQUMsdUVBQVc7QUFDakMsa0JBQWtCLG1CQUFPLENBQUMsaUZBQWdCOztBQUUxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9kcmF3L3ByaW50LWxpbmUuanM/ZWI0NCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgc3ByaW50ZiA9IHJlcXVpcmUoJy4vc3ByaW50ZicpO1xudmFyIHJvdW5kTnVtYmVyID0gcmVxdWlyZShcIi4vcm91bmQtbnVtYmVyXCIpO1xuXG5mdW5jdGlvbiBwcmludExpbmUocmVuZGVyZXIsIHgxLCB4MiwgeSwga2xhc3MsIG5hbWUsIGR5KSB7XG5cdHZhciBmaWxsID0gcmVuZGVyZXIuZm9yZWdyb3VuZENvbG9yO1xuXHR4MSA9IHJvdW5kTnVtYmVyKHgxKTtcblx0eDIgPSByb3VuZE51bWJlcih4Mik7XG5cdHZhciB5MSA9IHJvdW5kTnVtYmVyKHkgLSBkeSk7XG5cdHZhciB5MiA9IHJvdW5kTnVtYmVyKHkgKyBkeSk7XG5cdC8vIFRPRE8tUEVSOiBUaGlzIGZpeGVzIGEgZmlyZWZveCBidWcgd2hlcmUgaXQgaXNuJ3QgZGlzcGxheWVkXG5cdGlmIChyZW5kZXJlci5maXJlZm94MTEyKSB7XG5cdFx0eSArPSBkeSAvIDI7IC8vIEJlY2F1c2UgdGhlIHkgY29vcmRpbmF0ZSBpcyB0aGUgZWRnZSBvZiB3aGVyZSB0aGUgbGluZSBnb2VzIGJ1dCB0aGUgd2lkdGggd2lkZW5zIGZyb20gdGhlIG1pZGRsZS5cblx0XHR2YXIgYXR0ciA9IHtcblx0XHRcdHgxOiB4MSxcblx0XHRcdHgyOiB4Mixcblx0XHRcdHkxOiB5LFxuXHRcdFx0eTI6IHksXG5cdFx0XHRzdHJva2U6IHJlbmRlcmVyLmZvcmVncm91bmRDb2xvcixcblx0XHRcdCdzdHJva2Utd2lkdGgnOiBNYXRoLmFicyhkeSoyKVxuXHRcdH1cblx0XHRpZiAoa2xhc3MpXG5cdFx0XHRhdHRyWydjbGFzcyddID0ga2xhc3M7XG5cdFx0aWYgKG5hbWUpXG5cdFx0XHRhdHRyWydkYXRhLW5hbWUnXSA9IG5hbWU7XG5cdFx0XG5cdFx0cmV0dXJuIHJlbmRlcmVyLnBhcGVyLmxpbmVUb0JhY2soYXR0cik7XG5cdH1cblxuXHR2YXIgcGF0aFN0cmluZyA9IHNwcmludGYoXCJNICVmICVmIEwgJWYgJWYgTCAlZiAlZiBMICVmICVmIHpcIiwgeDEsIHkxLCB4MiwgeTEsXG5cdFx0eDIsIHkyLCB4MSwgeTIpO1xuXHR2YXIgb3B0aW9ucyA9IHsgcGF0aDogcGF0aFN0cmluZywgc3Ryb2tlOiBcIm5vbmVcIiwgZmlsbDogZmlsbCB9O1xuXHRpZiAobmFtZSlcblx0XHRvcHRpb25zWydkYXRhLW5hbWUnXSA9IG5hbWU7XG5cdGlmIChrbGFzcylcblx0XHRvcHRpb25zWydjbGFzcyddID0ga2xhc3M7XG5cdHZhciByZXQgPSByZW5kZXJlci5wYXBlci5wYXRoVG9CYWNrKG9wdGlvbnMpO1xuXG5cdHJldHVybiByZXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcHJpbnRMaW5lO1xuXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/print-line.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/print-path.js":
/*!*********************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/print-path.js ***!
  \*********************************************************/
/***/ ((module) => {

eval("function printPath(renderer, attrs, params) {\n\tvar ret = renderer.paper.path(attrs);\n\n\treturn ret;\n}\n\nmodule.exports = printPath;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvcHJpbnQtcGF0aC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvZHJhdy9wcmludC1wYXRoLmpzP2QyYWIiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gcHJpbnRQYXRoKHJlbmRlcmVyLCBhdHRycywgcGFyYW1zKSB7XG5cdHZhciByZXQgPSByZW5kZXJlci5wYXBlci5wYXRoKGF0dHJzKTtcblxuXHRyZXR1cm4gcmV0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHByaW50UGF0aDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/print-path.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/print-stem.js":
/*!*********************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/print-stem.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var elementGroup = __webpack_require__(/*! ./group-elements */ \"(ssr)/./node_modules/abcjs/src/write/draw/group-elements.js\");\nvar roundNumber = __webpack_require__(/*! ./round-number */ \"(ssr)/./node_modules/abcjs/src/write/draw/round-number.js\");\n\nfunction printStem(renderer, x, dx, y1, y2, klass, name) {\n\tif (dx < 0 || y1 < y2) { // correct path \"handedness\" for intersection with other elements\n\t\tvar tmp = roundNumber(y2);\n\t\ty2 = roundNumber(y1);\n\t\ty1 = tmp;\n\t} else {\n\t\ty1 = roundNumber(y1);\n\t\ty2 = roundNumber(y2);\n\t}\n\tx = roundNumber(x);\n\tvar x2 = roundNumber(x + dx);\n\t// TODO-PER: This fixes a firefox bug where it isn't displayed\n\tif (renderer.firefox112) {\n\t\tx += dx / 2; // Because the x coordinate is the edge of where the line goes but the width widens from the middle.\n\t\tvar attr = {\n\t\t\tx1: x,\n\t\t\tx2: x,\n\t\t\ty1: y1,\n\t\t\ty2: y2,\n\t\t\tstroke: renderer.foregroundColor,\n\t\t\t'stroke-width': Math.abs(dx)\n\t\t}\n\t\tif (klass)\n\t\t\tattr['class'] = klass;\n\t\tif (name)\n\t\t\tattr['data-name'] = name;\n\t\t\n\t\treturn renderer.paper.lineToBack(attr);\n\t}\n\tvar pathArray = [[\"M\", x, y1], [\"L\", x, y2], [\"L\", x2, y2], [\"L\", x2, y1], [\"z\"]];\n\tvar attr = { path: \"\" };\n\tfor (var i = 0; i < pathArray.length; i++)\n\t\tattr.path += pathArray[i].join(\" \");\n\tif (klass)\n\t\tattr['class'] = klass;\n\tif (name)\n\t\tattr['data-name'] = name;\n\tif (!elementGroup.isInGroup()) {\n\t\tattr.stroke = \"none\";\n\t\tattr.fill = renderer.foregroundColor;\n\t}\n\treturn renderer.paper.pathToBack(attr);\n}\n\nmodule.exports = printStem;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvcHJpbnQtc3RlbS5qcyIsIm1hcHBpbmdzIjoiQUFBQSxtQkFBbUIsbUJBQU8sQ0FBQyxxRkFBa0I7QUFDN0Msa0JBQWtCLG1CQUFPLENBQUMsaUZBQWdCOztBQUUxQztBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsaUJBQWlCLHNCQUFzQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvcHJpbnQtc3RlbS5qcz9iNWQ2Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBlbGVtZW50R3JvdXAgPSByZXF1aXJlKCcuL2dyb3VwLWVsZW1lbnRzJyk7XG52YXIgcm91bmROdW1iZXIgPSByZXF1aXJlKFwiLi9yb3VuZC1udW1iZXJcIik7XG5cbmZ1bmN0aW9uIHByaW50U3RlbShyZW5kZXJlciwgeCwgZHgsIHkxLCB5Miwga2xhc3MsIG5hbWUpIHtcblx0aWYgKGR4IDwgMCB8fCB5MSA8IHkyKSB7IC8vIGNvcnJlY3QgcGF0aCBcImhhbmRlZG5lc3NcIiBmb3IgaW50ZXJzZWN0aW9uIHdpdGggb3RoZXIgZWxlbWVudHNcblx0XHR2YXIgdG1wID0gcm91bmROdW1iZXIoeTIpO1xuXHRcdHkyID0gcm91bmROdW1iZXIoeTEpO1xuXHRcdHkxID0gdG1wO1xuXHR9IGVsc2Uge1xuXHRcdHkxID0gcm91bmROdW1iZXIoeTEpO1xuXHRcdHkyID0gcm91bmROdW1iZXIoeTIpO1xuXHR9XG5cdHggPSByb3VuZE51bWJlcih4KTtcblx0dmFyIHgyID0gcm91bmROdW1iZXIoeCArIGR4KTtcblx0Ly8gVE9ETy1QRVI6IFRoaXMgZml4ZXMgYSBmaXJlZm94IGJ1ZyB3aGVyZSBpdCBpc24ndCBkaXNwbGF5ZWRcblx0aWYgKHJlbmRlcmVyLmZpcmVmb3gxMTIpIHtcblx0XHR4ICs9IGR4IC8gMjsgLy8gQmVjYXVzZSB0aGUgeCBjb29yZGluYXRlIGlzIHRoZSBlZGdlIG9mIHdoZXJlIHRoZSBsaW5lIGdvZXMgYnV0IHRoZSB3aWR0aCB3aWRlbnMgZnJvbSB0aGUgbWlkZGxlLlxuXHRcdHZhciBhdHRyID0ge1xuXHRcdFx0eDE6IHgsXG5cdFx0XHR4MjogeCxcblx0XHRcdHkxOiB5MSxcblx0XHRcdHkyOiB5Mixcblx0XHRcdHN0cm9rZTogcmVuZGVyZXIuZm9yZWdyb3VuZENvbG9yLFxuXHRcdFx0J3N0cm9rZS13aWR0aCc6IE1hdGguYWJzKGR4KVxuXHRcdH1cblx0XHRpZiAoa2xhc3MpXG5cdFx0XHRhdHRyWydjbGFzcyddID0ga2xhc3M7XG5cdFx0aWYgKG5hbWUpXG5cdFx0XHRhdHRyWydkYXRhLW5hbWUnXSA9IG5hbWU7XG5cdFx0XG5cdFx0cmV0dXJuIHJlbmRlcmVyLnBhcGVyLmxpbmVUb0JhY2soYXR0cik7XG5cdH1cblx0dmFyIHBhdGhBcnJheSA9IFtbXCJNXCIsIHgsIHkxXSwgW1wiTFwiLCB4LCB5Ml0sIFtcIkxcIiwgeDIsIHkyXSwgW1wiTFwiLCB4MiwgeTFdLCBbXCJ6XCJdXTtcblx0dmFyIGF0dHIgPSB7IHBhdGg6IFwiXCIgfTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoQXJyYXkubGVuZ3RoOyBpKyspXG5cdFx0YXR0ci5wYXRoICs9IHBhdGhBcnJheVtpXS5qb2luKFwiIFwiKTtcblx0aWYgKGtsYXNzKVxuXHRcdGF0dHJbJ2NsYXNzJ10gPSBrbGFzcztcblx0aWYgKG5hbWUpXG5cdFx0YXR0clsnZGF0YS1uYW1lJ10gPSBuYW1lO1xuXHRpZiAoIWVsZW1lbnRHcm91cC5pc0luR3JvdXAoKSkge1xuXHRcdGF0dHIuc3Ryb2tlID0gXCJub25lXCI7XG5cdFx0YXR0ci5maWxsID0gcmVuZGVyZXIuZm9yZWdyb3VuZENvbG9yO1xuXHR9XG5cdHJldHVybiByZW5kZXJlci5wYXBlci5wYXRoVG9CYWNrKGF0dHIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHByaW50U3RlbTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/print-stem.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/print-symbol.js":
/*!***********************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/print-symbol.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var renderText = __webpack_require__(/*! ./text */ \"(ssr)/./node_modules/abcjs/src/write/draw/text.js\");\nvar glyphs = __webpack_require__(/*! ../creation/glyphs */ \"(ssr)/./node_modules/abcjs/src/write/creation/glyphs.js\");\nvar elementGroup = __webpack_require__(/*! ./group-elements */ \"(ssr)/./node_modules/abcjs/src/write/draw/group-elements.js\");\n\n/**\n * assumes this.y is set appropriately\n * if symbol is a multichar string without a . (as in scripts.staccato) 1 symbol per char is assumed\n * not scaled if not in printgroup\n */\nfunction printSymbol(renderer, x, offset, symbol, options) {\n\t// TODO-PER: what happened to scalex, and scaley? That might have been a bug introduced in refactoring\n\tvar el;\n\tvar ycorr;\n\tif (!symbol) return null;\n\tif (symbol.length > 1 && symbol.indexOf(\".\") < 0) {\n\t\tvar groupClass = elementGroup.isInGroup() ? '' : options.klass // If this is already in a group then don't repeat the classes for the sub-group)\n\t\trenderer.paper.openGroup({ \"data-name\": options.name, klass: groupClass });\n\t\tvar dx = 0;\n\t\tfor (var i = 0; i < symbol.length; i++) {\n\t\t\tvar s = symbol[i];\n\t\t\tycorr = glyphs.getYCorr(s);\n\t\t\tel = glyphs.printSymbol(x + dx, renderer.calcY(offset + ycorr), s, renderer.paper, { stroke: options.stroke, fill: options.fill });\n\t\t\tif (el) {\n\t\t\t\tif (i < symbol.length - 1)\n\t\t\t\t\tdx += kernSymbols(s, symbol[i + 1], glyphs.getSymbolWidth(s));\n\t\t\t} else {\n\t\t\t\trenderText(renderer, { x: x, y: renderer.y, text: \"no symbol:\" + symbol, type: \"debugfont\", klass: 'debug-msg', anchor: 'start' }, false);\n\t\t\t}\n\t\t}\n\t\tvar g = renderer.paper.closeGroup();\n\t\treturn g;\n\t} else {\n\t\tycorr = glyphs.getYCorr(symbol);\n\t\tif (elementGroup.isInGroup()) {\n\t\t\tel = glyphs.printSymbol(x, renderer.calcY(offset + ycorr), symbol, renderer.paper, { \"data-name\": options.name });\n\t\t} else {\n\t\t\tel = glyphs.printSymbol(x, renderer.calcY(offset + ycorr), symbol, renderer.paper, { klass: options.klass, stroke: options.stroke, fill: options.fill, \"data-name\": options.name });\n\t\t}\n\t\tif (el) {\n\t\t\treturn el;\n\t\t}\n\t\trenderText(renderer, { x: x, y: renderer.y, text: \"no symbol:\" + symbol, type: \"debugfont\", klass: 'debug-msg', anchor: 'start' }, false);\n\t\treturn null;\n\t}\n}\n\nfunction kernSymbols(lastSymbol, thisSymbol, lastSymbolWidth) {\n\t// This is just some adjustments to make it look better.\n\tvar width = lastSymbolWidth;\n\tif (lastSymbol === 'f' && thisSymbol === 'f')\n\t\twidth = width * 2 / 3;\n\tif (lastSymbol === 'p' && thisSymbol === 'p')\n\t\twidth = width * 5 / 6;\n\tif (lastSymbol === 'f' && thisSymbol === 'z')\n\t\twidth = width * 5 / 8;\n\treturn width;\n}\n\nmodule.exports = printSymbol;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvcHJpbnQtc3ltYm9sLmpzIiwibWFwcGluZ3MiOiJBQUFBLGlCQUFpQixtQkFBTyxDQUFDLGlFQUFRO0FBQ2pDLGFBQWEsbUJBQU8sQ0FBQyxtRkFBb0I7QUFDekMsbUJBQW1CLG1CQUFPLENBQUMscUZBQWtCOztBQUU3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsOENBQThDO0FBQzNFO0FBQ0Esa0JBQWtCLG1CQUFtQjtBQUNyQztBQUNBO0FBQ0Esd0ZBQXdGLDRDQUE0QztBQUNwSTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsMkJBQTJCLDBHQUEwRztBQUNySTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0Esd0ZBQXdGLDJCQUEyQjtBQUNuSCxJQUFJO0FBQ0osd0ZBQXdGLDZGQUE2RjtBQUNyTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwwR0FBMEc7QUFDbkk7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvZHJhdy9wcmludC1zeW1ib2wuanM/YjJiMSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcmVuZGVyVGV4dCA9IHJlcXVpcmUoJy4vdGV4dCcpO1xudmFyIGdseXBocyA9IHJlcXVpcmUoJy4uL2NyZWF0aW9uL2dseXBocycpO1xudmFyIGVsZW1lbnRHcm91cCA9IHJlcXVpcmUoJy4vZ3JvdXAtZWxlbWVudHMnKTtcblxuLyoqXG4gKiBhc3N1bWVzIHRoaXMueSBpcyBzZXQgYXBwcm9wcmlhdGVseVxuICogaWYgc3ltYm9sIGlzIGEgbXVsdGljaGFyIHN0cmluZyB3aXRob3V0IGEgLiAoYXMgaW4gc2NyaXB0cy5zdGFjY2F0bykgMSBzeW1ib2wgcGVyIGNoYXIgaXMgYXNzdW1lZFxuICogbm90IHNjYWxlZCBpZiBub3QgaW4gcHJpbnRncm91cFxuICovXG5mdW5jdGlvbiBwcmludFN5bWJvbChyZW5kZXJlciwgeCwgb2Zmc2V0LCBzeW1ib2wsIG9wdGlvbnMpIHtcblx0Ly8gVE9ETy1QRVI6IHdoYXQgaGFwcGVuZWQgdG8gc2NhbGV4LCBhbmQgc2NhbGV5PyBUaGF0IG1pZ2h0IGhhdmUgYmVlbiBhIGJ1ZyBpbnRyb2R1Y2VkIGluIHJlZmFjdG9yaW5nXG5cdHZhciBlbDtcblx0dmFyIHljb3JyO1xuXHRpZiAoIXN5bWJvbCkgcmV0dXJuIG51bGw7XG5cdGlmIChzeW1ib2wubGVuZ3RoID4gMSAmJiBzeW1ib2wuaW5kZXhPZihcIi5cIikgPCAwKSB7XG5cdFx0dmFyIGdyb3VwQ2xhc3MgPSBlbGVtZW50R3JvdXAuaXNJbkdyb3VwKCkgPyAnJyA6IG9wdGlvbnMua2xhc3MgLy8gSWYgdGhpcyBpcyBhbHJlYWR5IGluIGEgZ3JvdXAgdGhlbiBkb24ndCByZXBlYXQgdGhlIGNsYXNzZXMgZm9yIHRoZSBzdWItZ3JvdXApXG5cdFx0cmVuZGVyZXIucGFwZXIub3Blbkdyb3VwKHsgXCJkYXRhLW5hbWVcIjogb3B0aW9ucy5uYW1lLCBrbGFzczogZ3JvdXBDbGFzcyB9KTtcblx0XHR2YXIgZHggPSAwO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3ltYm9sLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgcyA9IHN5bWJvbFtpXTtcblx0XHRcdHljb3JyID0gZ2x5cGhzLmdldFlDb3JyKHMpO1xuXHRcdFx0ZWwgPSBnbHlwaHMucHJpbnRTeW1ib2woeCArIGR4LCByZW5kZXJlci5jYWxjWShvZmZzZXQgKyB5Y29yciksIHMsIHJlbmRlcmVyLnBhcGVyLCB7IHN0cm9rZTogb3B0aW9ucy5zdHJva2UsIGZpbGw6IG9wdGlvbnMuZmlsbCB9KTtcblx0XHRcdGlmIChlbCkge1xuXHRcdFx0XHRpZiAoaSA8IHN5bWJvbC5sZW5ndGggLSAxKVxuXHRcdFx0XHRcdGR4ICs9IGtlcm5TeW1ib2xzKHMsIHN5bWJvbFtpICsgMV0sIGdseXBocy5nZXRTeW1ib2xXaWR0aChzKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZW5kZXJUZXh0KHJlbmRlcmVyLCB7IHg6IHgsIHk6IHJlbmRlcmVyLnksIHRleHQ6IFwibm8gc3ltYm9sOlwiICsgc3ltYm9sLCB0eXBlOiBcImRlYnVnZm9udFwiLCBrbGFzczogJ2RlYnVnLW1zZycsIGFuY2hvcjogJ3N0YXJ0JyB9LCBmYWxzZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHZhciBnID0gcmVuZGVyZXIucGFwZXIuY2xvc2VHcm91cCgpO1xuXHRcdHJldHVybiBnO1xuXHR9IGVsc2Uge1xuXHRcdHljb3JyID0gZ2x5cGhzLmdldFlDb3JyKHN5bWJvbCk7XG5cdFx0aWYgKGVsZW1lbnRHcm91cC5pc0luR3JvdXAoKSkge1xuXHRcdFx0ZWwgPSBnbHlwaHMucHJpbnRTeW1ib2woeCwgcmVuZGVyZXIuY2FsY1kob2Zmc2V0ICsgeWNvcnIpLCBzeW1ib2wsIHJlbmRlcmVyLnBhcGVyLCB7IFwiZGF0YS1uYW1lXCI6IG9wdGlvbnMubmFtZSB9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZWwgPSBnbHlwaHMucHJpbnRTeW1ib2woeCwgcmVuZGVyZXIuY2FsY1kob2Zmc2V0ICsgeWNvcnIpLCBzeW1ib2wsIHJlbmRlcmVyLnBhcGVyLCB7IGtsYXNzOiBvcHRpb25zLmtsYXNzLCBzdHJva2U6IG9wdGlvbnMuc3Ryb2tlLCBmaWxsOiBvcHRpb25zLmZpbGwsIFwiZGF0YS1uYW1lXCI6IG9wdGlvbnMubmFtZSB9KTtcblx0XHR9XG5cdFx0aWYgKGVsKSB7XG5cdFx0XHRyZXR1cm4gZWw7XG5cdFx0fVxuXHRcdHJlbmRlclRleHQocmVuZGVyZXIsIHsgeDogeCwgeTogcmVuZGVyZXIueSwgdGV4dDogXCJubyBzeW1ib2w6XCIgKyBzeW1ib2wsIHR5cGU6IFwiZGVidWdmb250XCIsIGtsYXNzOiAnZGVidWctbXNnJywgYW5jaG9yOiAnc3RhcnQnIH0sIGZhbHNlKTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG5mdW5jdGlvbiBrZXJuU3ltYm9scyhsYXN0U3ltYm9sLCB0aGlzU3ltYm9sLCBsYXN0U3ltYm9sV2lkdGgpIHtcblx0Ly8gVGhpcyBpcyBqdXN0IHNvbWUgYWRqdXN0bWVudHMgdG8gbWFrZSBpdCBsb29rIGJldHRlci5cblx0dmFyIHdpZHRoID0gbGFzdFN5bWJvbFdpZHRoO1xuXHRpZiAobGFzdFN5bWJvbCA9PT0gJ2YnICYmIHRoaXNTeW1ib2wgPT09ICdmJylcblx0XHR3aWR0aCA9IHdpZHRoICogMiAvIDM7XG5cdGlmIChsYXN0U3ltYm9sID09PSAncCcgJiYgdGhpc1N5bWJvbCA9PT0gJ3AnKVxuXHRcdHdpZHRoID0gd2lkdGggKiA1IC8gNjtcblx0aWYgKGxhc3RTeW1ib2wgPT09ICdmJyAmJiB0aGlzU3ltYm9sID09PSAneicpXG5cdFx0d2lkdGggPSB3aWR0aCAqIDUgLyA4O1xuXHRyZXR1cm4gd2lkdGg7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcHJpbnRTeW1ib2w7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/print-symbol.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/relative.js":
/*!*******************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/relative.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var renderText = __webpack_require__(/*! ./text */ \"(ssr)/./node_modules/abcjs/src/write/draw/text.js\");\nvar printStem = __webpack_require__(/*! ./print-stem */ \"(ssr)/./node_modules/abcjs/src/write/draw/print-stem.js\");\nvar printStaffLine = __webpack_require__(/*! ./staff-line */ \"(ssr)/./node_modules/abcjs/src/write/draw/staff-line.js\");\nvar printSymbol = __webpack_require__(/*! ./print-symbol */ \"(ssr)/./node_modules/abcjs/src/write/draw/print-symbol.js\");\n\nfunction drawRelativeElement(renderer, params, bartop) {\n\tif (params.pitch === undefined)\n\t\twindow.console.error(params.type + \" Relative Element y-coordinate not set.\");\n\tvar y = renderer.calcY(params.pitch);\n\tswitch (params.type) {\n\t\tcase \"symbol\":\n\t\t\tif (params.c === null) return null;\n\t\t\tvar klass = \"symbol\";\n\t\t\tif (params.klass) klass += \" \" + params.klass;\n\t\t\tparams.graphelem = printSymbol(renderer, params.x, params.pitch, params.c, {\n\t\t\t\tscalex: params.scalex,\n\t\t\t\tscaley: params.scaley,\n\t\t\t\tklass: renderer.controller.classes.generate(klass),\n\t\t\t\t//\t\t\t\tfill:\"none\",\n\t\t\t\t//\t\t\t\tstroke: renderer.foregroundColor,\n\t\t\t\tname: params.name\n\t\t\t});\n\t\t\tbreak;\n\t\tcase \"debug\":\n\t\t\tparams.graphelem = renderText(renderer, { x: params.x, y: renderer.calcY(15), text: \"\" + params.c, type: \"debugfont\", klass: renderer.controller.classes.generate('debug-msg'), anchor: 'start', centerVertically: false, dim: params.dim }, false);\n\t\t\tbreak;\n\t\tcase \"tabNumber\":\n\t\t\tvar hAnchor = \"middle\";\n\t\t\tvar tabFont = \"tabnumberfont\";\n\t\t\tvar tabClass = 'abcjs-tab-number';\n\t\t\tif (params.isGrace) {\n\t\t\t\ttabFont = \"tabgracefont\";\n\t\t\t\ty += 2.5;\n\t\t\t\ttabClass = 'tab-grace'\n\t\t\t}\n\t\t\tparams.graphelem = renderText(renderer, { x: params.x, y: y, text: \"\" + params.c, type: tabFont, klass: renderer.controller.classes.generate(tabClass), anchor: hAnchor, centerVertically: false, dim: params.dim, cursor: 'default' }, false);\n\t\t\tbreak;\n\t\tcase \"barNumber\":\n\t\t\tparams.graphelem = renderText(renderer, { x: params.x, y: y, text: \"\" + params.c, type: \"measurefont\", klass: renderer.controller.classes.generate('bar-number'), anchor: \"middle\", dim: params.dim, name: \"bar-number\" }, true);\n\t\t\tbreak;\n\t\tcase \"lyric\":\n\t\t\tparams.graphelem = renderText(renderer, { x: params.x, y: y, text: params.c, type: \"vocalfont\", klass: renderer.controller.classes.generate('lyric'), anchor: \"middle\", dim: params.dim, name: \"lyric\" }, false);\n\t\t\tbreak;\n\t\tcase \"chord\":\n\t\t\tparams.graphelem = renderText(renderer, { x: params.x, y: y, text: params.c, type: 'gchordfont', klass: renderer.controller.classes.generate(\"chord\"), anchor: \"middle\", dim: params.dim, lane: params.getLane(), name: \"chord\" }, false);\n\t\t\tbreak;\n\t\tcase \"decoration\":\n\t\t\t// The +6 is to compensate for the placement of text in svg: to be on the same row as symbols, the y-coord needs to compensate for the center line.\n\t\t\tparams.graphelem = renderText(renderer, { x: params.x, y: y + 6, text: params.c, type: 'annotationfont', klass: renderer.controller.classes.generate(\"annotation\"), anchor: params.anchor, centerVertically: true, dim: params.dim }, false);\n\t\t\tbreak;\n\t\tcase \"text\":\n\t\t\tparams.graphelem = renderText(renderer, { x: params.x, y: y, text: params.c, type: 'annotationfont', klass: renderer.controller.classes.generate(\"annotation\"), anchor: \"start\", centerVertically: params.centerVertically, dim: params.dim, lane: params.getLane(), name: \"annotation\" }, false);\n\t\t\tbreak;\n\t\tcase \"multimeasure-text\":\n\t\t\tparams.graphelem = renderText(renderer, { x: params.x + params.w / 2, y: y, text: params.c, type: 'tempofont', klass: renderer.controller.classes.generate(\"rest\"), anchor: \"middle\", centerVertically: false, dim: params.dim }, false);\n\t\t\tbreak;\n\t\tcase \"part\":\n\t\t\tparams.graphelem = renderText(renderer, { x: params.x, y: y, text: params.c, type: 'partsfont', klass: renderer.controller.classes.generate(\"part\"), anchor: \"start\", dim: params.dim, name: params.c }, true);\n\t\t\tbreak;\n\t\tcase \"bar\":\n\t\t\tparams.graphelem = printStem(renderer, params.x, params.linewidth + renderer.lineThickness, y, (bartop) ? bartop : renderer.calcY(params.pitch2), null, \"bar\"); break; // bartop can't be 0\n\t\tcase \"stem\":\n\t\t\tvar stemWidth = params.linewidth > 0 ? params.linewidth + renderer.lineThickness : params.linewidth - renderer.lineThickness\n\t\t\tparams.graphelem = printStem(renderer, params.x, stemWidth, y, renderer.calcY(params.pitch2), 'abcjs-stem', 'stem'); break;\n\t\tcase \"ledger\":\n\t\t\tparams.graphelem = printStaffLine(renderer, params.x, params.x + params.w, params.pitch, \"abcjs-ledger\", \"ledger\", 0.35 + renderer.lineThickness); break;\n\t}\n\tif (params.scalex !== 1 && params.graphelem) {\n\t\tscaleExistingElem(renderer.paper, params.graphelem, params.scalex, params.scaley, params.x, y);\n\t}\n\treturn params.graphelem;\n}\n\nfunction scaleExistingElem(paper, elem, scaleX, scaleY, x, y) {\n\tpaper.setAttributeOnElement(elem, { style: \"transform:scale(\" + scaleX + \",\" + scaleY + \");transform-origin:\" + x + \"px \" + y + \"px;\" });\n}\n\nmodule.exports = drawRelativeElement;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvcmVsYXRpdmUuanMiLCJtYXBwaW5ncyI6IkFBQUEsaUJBQWlCLG1CQUFPLENBQUMsaUVBQVE7QUFDakMsZ0JBQWdCLG1CQUFPLENBQUMsNkVBQWM7QUFDdEMscUJBQXFCLG1CQUFPLENBQUMsNkVBQWM7QUFDM0Msa0JBQWtCLG1CQUFPLENBQUMsaUZBQWdCOztBQUUxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsNkNBQTZDLGlNQUFpTTtBQUM5TztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyw0TEFBNEw7QUFDek87QUFDQTtBQUNBLDZDQUE2QywrS0FBK0s7QUFDNU47QUFDQTtBQUNBLDZDQUE2Qyw4SkFBOEo7QUFDM007QUFDQTtBQUNBLDZDQUE2Qyx1TEFBdUw7QUFDcE87QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLDBMQUEwTDtBQUN2TztBQUNBO0FBQ0EsNkNBQTZDLCtPQUErTztBQUM1UjtBQUNBO0FBQ0EsNkNBQTZDLHNMQUFzTDtBQUNuTztBQUNBO0FBQ0EsNkNBQTZDLDZKQUE2SjtBQUMxTTtBQUNBO0FBQ0EsbUtBQW1LLE9BQU87QUFDMUs7QUFDQTtBQUNBLHdIQUF3SDtBQUN4SDtBQUNBLHNKQUFzSjtBQUN0SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxQ0FBcUMsdURBQXVELHlDQUF5QyxHQUFHO0FBQ3hJOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvcmVsYXRpdmUuanM/ZDE2NSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcmVuZGVyVGV4dCA9IHJlcXVpcmUoJy4vdGV4dCcpO1xudmFyIHByaW50U3RlbSA9IHJlcXVpcmUoJy4vcHJpbnQtc3RlbScpO1xudmFyIHByaW50U3RhZmZMaW5lID0gcmVxdWlyZSgnLi9zdGFmZi1saW5lJyk7XG52YXIgcHJpbnRTeW1ib2wgPSByZXF1aXJlKCcuL3ByaW50LXN5bWJvbCcpO1xuXG5mdW5jdGlvbiBkcmF3UmVsYXRpdmVFbGVtZW50KHJlbmRlcmVyLCBwYXJhbXMsIGJhcnRvcCkge1xuXHRpZiAocGFyYW1zLnBpdGNoID09PSB1bmRlZmluZWQpXG5cdFx0d2luZG93LmNvbnNvbGUuZXJyb3IocGFyYW1zLnR5cGUgKyBcIiBSZWxhdGl2ZSBFbGVtZW50IHktY29vcmRpbmF0ZSBub3Qgc2V0LlwiKTtcblx0dmFyIHkgPSByZW5kZXJlci5jYWxjWShwYXJhbXMucGl0Y2gpO1xuXHRzd2l0Y2ggKHBhcmFtcy50eXBlKSB7XG5cdFx0Y2FzZSBcInN5bWJvbFwiOlxuXHRcdFx0aWYgKHBhcmFtcy5jID09PSBudWxsKSByZXR1cm4gbnVsbDtcblx0XHRcdHZhciBrbGFzcyA9IFwic3ltYm9sXCI7XG5cdFx0XHRpZiAocGFyYW1zLmtsYXNzKSBrbGFzcyArPSBcIiBcIiArIHBhcmFtcy5rbGFzcztcblx0XHRcdHBhcmFtcy5ncmFwaGVsZW0gPSBwcmludFN5bWJvbChyZW5kZXJlciwgcGFyYW1zLngsIHBhcmFtcy5waXRjaCwgcGFyYW1zLmMsIHtcblx0XHRcdFx0c2NhbGV4OiBwYXJhbXMuc2NhbGV4LFxuXHRcdFx0XHRzY2FsZXk6IHBhcmFtcy5zY2FsZXksXG5cdFx0XHRcdGtsYXNzOiByZW5kZXJlci5jb250cm9sbGVyLmNsYXNzZXMuZ2VuZXJhdGUoa2xhc3MpLFxuXHRcdFx0XHQvL1x0XHRcdFx0ZmlsbDpcIm5vbmVcIixcblx0XHRcdFx0Ly9cdFx0XHRcdHN0cm9rZTogcmVuZGVyZXIuZm9yZWdyb3VuZENvbG9yLFxuXHRcdFx0XHRuYW1lOiBwYXJhbXMubmFtZVxuXHRcdFx0fSk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwiZGVidWdcIjpcblx0XHRcdHBhcmFtcy5ncmFwaGVsZW0gPSByZW5kZXJUZXh0KHJlbmRlcmVyLCB7IHg6IHBhcmFtcy54LCB5OiByZW5kZXJlci5jYWxjWSgxNSksIHRleHQ6IFwiXCIgKyBwYXJhbXMuYywgdHlwZTogXCJkZWJ1Z2ZvbnRcIiwga2xhc3M6IHJlbmRlcmVyLmNvbnRyb2xsZXIuY2xhc3Nlcy5nZW5lcmF0ZSgnZGVidWctbXNnJyksIGFuY2hvcjogJ3N0YXJ0JywgY2VudGVyVmVydGljYWxseTogZmFsc2UsIGRpbTogcGFyYW1zLmRpbSB9LCBmYWxzZSk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwidGFiTnVtYmVyXCI6XG5cdFx0XHR2YXIgaEFuY2hvciA9IFwibWlkZGxlXCI7XG5cdFx0XHR2YXIgdGFiRm9udCA9IFwidGFibnVtYmVyZm9udFwiO1xuXHRcdFx0dmFyIHRhYkNsYXNzID0gJ2FiY2pzLXRhYi1udW1iZXInO1xuXHRcdFx0aWYgKHBhcmFtcy5pc0dyYWNlKSB7XG5cdFx0XHRcdHRhYkZvbnQgPSBcInRhYmdyYWNlZm9udFwiO1xuXHRcdFx0XHR5ICs9IDIuNTtcblx0XHRcdFx0dGFiQ2xhc3MgPSAndGFiLWdyYWNlJ1xuXHRcdFx0fVxuXHRcdFx0cGFyYW1zLmdyYXBoZWxlbSA9IHJlbmRlclRleHQocmVuZGVyZXIsIHsgeDogcGFyYW1zLngsIHk6IHksIHRleHQ6IFwiXCIgKyBwYXJhbXMuYywgdHlwZTogdGFiRm9udCwga2xhc3M6IHJlbmRlcmVyLmNvbnRyb2xsZXIuY2xhc3Nlcy5nZW5lcmF0ZSh0YWJDbGFzcyksIGFuY2hvcjogaEFuY2hvciwgY2VudGVyVmVydGljYWxseTogZmFsc2UsIGRpbTogcGFyYW1zLmRpbSwgY3Vyc29yOiAnZGVmYXVsdCcgfSwgZmFsc2UpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcImJhck51bWJlclwiOlxuXHRcdFx0cGFyYW1zLmdyYXBoZWxlbSA9IHJlbmRlclRleHQocmVuZGVyZXIsIHsgeDogcGFyYW1zLngsIHk6IHksIHRleHQ6IFwiXCIgKyBwYXJhbXMuYywgdHlwZTogXCJtZWFzdXJlZm9udFwiLCBrbGFzczogcmVuZGVyZXIuY29udHJvbGxlci5jbGFzc2VzLmdlbmVyYXRlKCdiYXItbnVtYmVyJyksIGFuY2hvcjogXCJtaWRkbGVcIiwgZGltOiBwYXJhbXMuZGltLCBuYW1lOiBcImJhci1udW1iZXJcIiB9LCB0cnVlKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJseXJpY1wiOlxuXHRcdFx0cGFyYW1zLmdyYXBoZWxlbSA9IHJlbmRlclRleHQocmVuZGVyZXIsIHsgeDogcGFyYW1zLngsIHk6IHksIHRleHQ6IHBhcmFtcy5jLCB0eXBlOiBcInZvY2FsZm9udFwiLCBrbGFzczogcmVuZGVyZXIuY29udHJvbGxlci5jbGFzc2VzLmdlbmVyYXRlKCdseXJpYycpLCBhbmNob3I6IFwibWlkZGxlXCIsIGRpbTogcGFyYW1zLmRpbSwgbmFtZTogXCJseXJpY1wiIH0sIGZhbHNlKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJjaG9yZFwiOlxuXHRcdFx0cGFyYW1zLmdyYXBoZWxlbSA9IHJlbmRlclRleHQocmVuZGVyZXIsIHsgeDogcGFyYW1zLngsIHk6IHksIHRleHQ6IHBhcmFtcy5jLCB0eXBlOiAnZ2Nob3JkZm9udCcsIGtsYXNzOiByZW5kZXJlci5jb250cm9sbGVyLmNsYXNzZXMuZ2VuZXJhdGUoXCJjaG9yZFwiKSwgYW5jaG9yOiBcIm1pZGRsZVwiLCBkaW06IHBhcmFtcy5kaW0sIGxhbmU6IHBhcmFtcy5nZXRMYW5lKCksIG5hbWU6IFwiY2hvcmRcIiB9LCBmYWxzZSk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwiZGVjb3JhdGlvblwiOlxuXHRcdFx0Ly8gVGhlICs2IGlzIHRvIGNvbXBlbnNhdGUgZm9yIHRoZSBwbGFjZW1lbnQgb2YgdGV4dCBpbiBzdmc6IHRvIGJlIG9uIHRoZSBzYW1lIHJvdyBhcyBzeW1ib2xzLCB0aGUgeS1jb29yZCBuZWVkcyB0byBjb21wZW5zYXRlIGZvciB0aGUgY2VudGVyIGxpbmUuXG5cdFx0XHRwYXJhbXMuZ3JhcGhlbGVtID0gcmVuZGVyVGV4dChyZW5kZXJlciwgeyB4OiBwYXJhbXMueCwgeTogeSArIDYsIHRleHQ6IHBhcmFtcy5jLCB0eXBlOiAnYW5ub3RhdGlvbmZvbnQnLCBrbGFzczogcmVuZGVyZXIuY29udHJvbGxlci5jbGFzc2VzLmdlbmVyYXRlKFwiYW5ub3RhdGlvblwiKSwgYW5jaG9yOiBwYXJhbXMuYW5jaG9yLCBjZW50ZXJWZXJ0aWNhbGx5OiB0cnVlLCBkaW06IHBhcmFtcy5kaW0gfSwgZmFsc2UpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcInRleHRcIjpcblx0XHRcdHBhcmFtcy5ncmFwaGVsZW0gPSByZW5kZXJUZXh0KHJlbmRlcmVyLCB7IHg6IHBhcmFtcy54LCB5OiB5LCB0ZXh0OiBwYXJhbXMuYywgdHlwZTogJ2Fubm90YXRpb25mb250Jywga2xhc3M6IHJlbmRlcmVyLmNvbnRyb2xsZXIuY2xhc3Nlcy5nZW5lcmF0ZShcImFubm90YXRpb25cIiksIGFuY2hvcjogXCJzdGFydFwiLCBjZW50ZXJWZXJ0aWNhbGx5OiBwYXJhbXMuY2VudGVyVmVydGljYWxseSwgZGltOiBwYXJhbXMuZGltLCBsYW5lOiBwYXJhbXMuZ2V0TGFuZSgpLCBuYW1lOiBcImFubm90YXRpb25cIiB9LCBmYWxzZSk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwibXVsdGltZWFzdXJlLXRleHRcIjpcblx0XHRcdHBhcmFtcy5ncmFwaGVsZW0gPSByZW5kZXJUZXh0KHJlbmRlcmVyLCB7IHg6IHBhcmFtcy54ICsgcGFyYW1zLncgLyAyLCB5OiB5LCB0ZXh0OiBwYXJhbXMuYywgdHlwZTogJ3RlbXBvZm9udCcsIGtsYXNzOiByZW5kZXJlci5jb250cm9sbGVyLmNsYXNzZXMuZ2VuZXJhdGUoXCJyZXN0XCIpLCBhbmNob3I6IFwibWlkZGxlXCIsIGNlbnRlclZlcnRpY2FsbHk6IGZhbHNlLCBkaW06IHBhcmFtcy5kaW0gfSwgZmFsc2UpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcInBhcnRcIjpcblx0XHRcdHBhcmFtcy5ncmFwaGVsZW0gPSByZW5kZXJUZXh0KHJlbmRlcmVyLCB7IHg6IHBhcmFtcy54LCB5OiB5LCB0ZXh0OiBwYXJhbXMuYywgdHlwZTogJ3BhcnRzZm9udCcsIGtsYXNzOiByZW5kZXJlci5jb250cm9sbGVyLmNsYXNzZXMuZ2VuZXJhdGUoXCJwYXJ0XCIpLCBhbmNob3I6IFwic3RhcnRcIiwgZGltOiBwYXJhbXMuZGltLCBuYW1lOiBwYXJhbXMuYyB9LCB0cnVlKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJiYXJcIjpcblx0XHRcdHBhcmFtcy5ncmFwaGVsZW0gPSBwcmludFN0ZW0ocmVuZGVyZXIsIHBhcmFtcy54LCBwYXJhbXMubGluZXdpZHRoICsgcmVuZGVyZXIubGluZVRoaWNrbmVzcywgeSwgKGJhcnRvcCkgPyBiYXJ0b3AgOiByZW5kZXJlci5jYWxjWShwYXJhbXMucGl0Y2gyKSwgbnVsbCwgXCJiYXJcIik7IGJyZWFrOyAvLyBiYXJ0b3AgY2FuJ3QgYmUgMFxuXHRcdGNhc2UgXCJzdGVtXCI6XG5cdFx0XHR2YXIgc3RlbVdpZHRoID0gcGFyYW1zLmxpbmV3aWR0aCA+IDAgPyBwYXJhbXMubGluZXdpZHRoICsgcmVuZGVyZXIubGluZVRoaWNrbmVzcyA6IHBhcmFtcy5saW5ld2lkdGggLSByZW5kZXJlci5saW5lVGhpY2tuZXNzXG5cdFx0XHRwYXJhbXMuZ3JhcGhlbGVtID0gcHJpbnRTdGVtKHJlbmRlcmVyLCBwYXJhbXMueCwgc3RlbVdpZHRoLCB5LCByZW5kZXJlci5jYWxjWShwYXJhbXMucGl0Y2gyKSwgJ2FiY2pzLXN0ZW0nLCAnc3RlbScpOyBicmVhaztcblx0XHRjYXNlIFwibGVkZ2VyXCI6XG5cdFx0XHRwYXJhbXMuZ3JhcGhlbGVtID0gcHJpbnRTdGFmZkxpbmUocmVuZGVyZXIsIHBhcmFtcy54LCBwYXJhbXMueCArIHBhcmFtcy53LCBwYXJhbXMucGl0Y2gsIFwiYWJjanMtbGVkZ2VyXCIsIFwibGVkZ2VyXCIsIDAuMzUgKyByZW5kZXJlci5saW5lVGhpY2tuZXNzKTsgYnJlYWs7XG5cdH1cblx0aWYgKHBhcmFtcy5zY2FsZXggIT09IDEgJiYgcGFyYW1zLmdyYXBoZWxlbSkge1xuXHRcdHNjYWxlRXhpc3RpbmdFbGVtKHJlbmRlcmVyLnBhcGVyLCBwYXJhbXMuZ3JhcGhlbGVtLCBwYXJhbXMuc2NhbGV4LCBwYXJhbXMuc2NhbGV5LCBwYXJhbXMueCwgeSk7XG5cdH1cblx0cmV0dXJuIHBhcmFtcy5ncmFwaGVsZW07XG59XG5cbmZ1bmN0aW9uIHNjYWxlRXhpc3RpbmdFbGVtKHBhcGVyLCBlbGVtLCBzY2FsZVgsIHNjYWxlWSwgeCwgeSkge1xuXHRwYXBlci5zZXRBdHRyaWJ1dGVPbkVsZW1lbnQoZWxlbSwgeyBzdHlsZTogXCJ0cmFuc2Zvcm06c2NhbGUoXCIgKyBzY2FsZVggKyBcIixcIiArIHNjYWxlWSArIFwiKTt0cmFuc2Zvcm0tb3JpZ2luOlwiICsgeCArIFwicHggXCIgKyB5ICsgXCJweDtcIiB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkcmF3UmVsYXRpdmVFbGVtZW50O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/relative.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/round-number.js":
/*!***********************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/round-number.js ***!
  \***********************************************************/
/***/ ((module) => {

eval("function roundNumber(x) {\n\treturn parseFloat(x.toFixed(2));\n}\n\nmodule.exports = roundNumber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvcm91bmQtbnVtYmVyLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9kcmF3L3JvdW5kLW51bWJlci5qcz9kZTViIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHJvdW5kTnVtYmVyKHgpIHtcblx0cmV0dXJuIHBhcnNlRmxvYXQoeC50b0ZpeGVkKDIpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSByb3VuZE51bWJlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/round-number.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/selectables.js":
/*!**********************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/selectables.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var highlight = __webpack_require__(/*! ../interactive/highlight */ \"(ssr)/./node_modules/abcjs/src/write/interactive/highlight.js\");\nvar unhighlight = __webpack_require__(/*! ../interactive/unhighlight */ \"(ssr)/./node_modules/abcjs/src/write/interactive/unhighlight.js\");\n\nfunction Selectables(paper, selectTypes, tuneNumber) {\n\tthis.elements = [];\n\tthis.paper = paper;\n\tthis.tuneNumber = tuneNumber;\n\tthis.selectTypes = selectTypes;\n}\n\nSelectables.prototype.getElements = function () {\n\treturn this.elements;\n};\n\nSelectables.prototype.add = function (absEl, svgEl, isNoteOrTabNumber, staffPos) {\n\tif (!this.canSelect(absEl))\n\t\treturn;\n\tvar params;\n\tif (this.selectTypes === undefined)\n\t\tparams = { selectable: false, \"data-index\": this.elements.length }; // This is the old behavior.\n\telse\n\t\tparams = { selectable: true, tabindex: 0, \"data-index\": this.elements.length };\n\tthis.paper.setAttributeOnElement(svgEl, params);\n\tvar sel = { absEl: absEl, svgEl: svgEl, isDraggable: isNoteOrTabNumber };\n\tif (staffPos !== undefined)\n\t\tsel.staffPos = staffPos;\n\tthis.elements.push(sel);\n\n};\n\nSelectables.prototype.canSelect = function (absEl) {\n\tif (this.selectTypes === false)\n\t\treturn false;\n\tif (!absEl || !absEl.abcelem)\n\t\treturn false;\n\tif (this.selectTypes === true)\n\t\treturn true;\n\tif (this.selectTypes === undefined) {\n\t\t// by default, only notes and tab numbers can be clicked.\n\t\tif (absEl.abcelem.el_type === 'note' || absEl.abcelem.el_type === 'tabNumber') {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\treturn this.selectTypes.indexOf(absEl.abcelem.el_type) >= 0;\n};\n\nSelectables.prototype.wrapSvgEl = function (abcelem, el) {\n\tvar absEl = {\n\t\ttuneNumber: this.tuneNumber,\n\t\tabcelem: abcelem,\n\t\telemset: [el],\n\t\thighlight: highlight,\n\t\tunhighlight: unhighlight\n\t};\n\tthis.add(absEl, el, false);\n};\n\nmodule.exports = Selectables;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvc2VsZWN0YWJsZXMuanMiLCJtYXBwaW5ncyI6IkFBQUEsZ0JBQWdCLG1CQUFPLENBQUMsK0ZBQTBCO0FBQ2xELGtCQUFrQixtQkFBTyxDQUFDLG1HQUE0Qjs7QUFFdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx5REFBeUQ7QUFDdEU7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvc2VsZWN0YWJsZXMuanM/Y2I0MiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgaGlnaGxpZ2h0ID0gcmVxdWlyZSgnLi4vaW50ZXJhY3RpdmUvaGlnaGxpZ2h0Jyk7XG52YXIgdW5oaWdobGlnaHQgPSByZXF1aXJlKCcuLi9pbnRlcmFjdGl2ZS91bmhpZ2hsaWdodCcpO1xuXG5mdW5jdGlvbiBTZWxlY3RhYmxlcyhwYXBlciwgc2VsZWN0VHlwZXMsIHR1bmVOdW1iZXIpIHtcblx0dGhpcy5lbGVtZW50cyA9IFtdO1xuXHR0aGlzLnBhcGVyID0gcGFwZXI7XG5cdHRoaXMudHVuZU51bWJlciA9IHR1bmVOdW1iZXI7XG5cdHRoaXMuc2VsZWN0VHlwZXMgPSBzZWxlY3RUeXBlcztcbn1cblxuU2VsZWN0YWJsZXMucHJvdG90eXBlLmdldEVsZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gdGhpcy5lbGVtZW50cztcbn07XG5cblNlbGVjdGFibGVzLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoYWJzRWwsIHN2Z0VsLCBpc05vdGVPclRhYk51bWJlciwgc3RhZmZQb3MpIHtcblx0aWYgKCF0aGlzLmNhblNlbGVjdChhYnNFbCkpXG5cdFx0cmV0dXJuO1xuXHR2YXIgcGFyYW1zO1xuXHRpZiAodGhpcy5zZWxlY3RUeXBlcyA9PT0gdW5kZWZpbmVkKVxuXHRcdHBhcmFtcyA9IHsgc2VsZWN0YWJsZTogZmFsc2UsIFwiZGF0YS1pbmRleFwiOiB0aGlzLmVsZW1lbnRzLmxlbmd0aCB9OyAvLyBUaGlzIGlzIHRoZSBvbGQgYmVoYXZpb3IuXG5cdGVsc2Vcblx0XHRwYXJhbXMgPSB7IHNlbGVjdGFibGU6IHRydWUsIHRhYmluZGV4OiAwLCBcImRhdGEtaW5kZXhcIjogdGhpcy5lbGVtZW50cy5sZW5ndGggfTtcblx0dGhpcy5wYXBlci5zZXRBdHRyaWJ1dGVPbkVsZW1lbnQoc3ZnRWwsIHBhcmFtcyk7XG5cdHZhciBzZWwgPSB7IGFic0VsOiBhYnNFbCwgc3ZnRWw6IHN2Z0VsLCBpc0RyYWdnYWJsZTogaXNOb3RlT3JUYWJOdW1iZXIgfTtcblx0aWYgKHN0YWZmUG9zICE9PSB1bmRlZmluZWQpXG5cdFx0c2VsLnN0YWZmUG9zID0gc3RhZmZQb3M7XG5cdHRoaXMuZWxlbWVudHMucHVzaChzZWwpO1xuXG59O1xuXG5TZWxlY3RhYmxlcy5wcm90b3R5cGUuY2FuU2VsZWN0ID0gZnVuY3Rpb24gKGFic0VsKSB7XG5cdGlmICh0aGlzLnNlbGVjdFR5cGVzID09PSBmYWxzZSlcblx0XHRyZXR1cm4gZmFsc2U7XG5cdGlmICghYWJzRWwgfHwgIWFic0VsLmFiY2VsZW0pXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHRpZiAodGhpcy5zZWxlY3RUeXBlcyA9PT0gdHJ1ZSlcblx0XHRyZXR1cm4gdHJ1ZTtcblx0aWYgKHRoaXMuc2VsZWN0VHlwZXMgPT09IHVuZGVmaW5lZCkge1xuXHRcdC8vIGJ5IGRlZmF1bHQsIG9ubHkgbm90ZXMgYW5kIHRhYiBudW1iZXJzIGNhbiBiZSBjbGlja2VkLlxuXHRcdGlmIChhYnNFbC5hYmNlbGVtLmVsX3R5cGUgPT09ICdub3RlJyB8fCBhYnNFbC5hYmNlbGVtLmVsX3R5cGUgPT09ICd0YWJOdW1iZXInKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdHJldHVybiB0aGlzLnNlbGVjdFR5cGVzLmluZGV4T2YoYWJzRWwuYWJjZWxlbS5lbF90eXBlKSA+PSAwO1xufTtcblxuU2VsZWN0YWJsZXMucHJvdG90eXBlLndyYXBTdmdFbCA9IGZ1bmN0aW9uIChhYmNlbGVtLCBlbCkge1xuXHR2YXIgYWJzRWwgPSB7XG5cdFx0dHVuZU51bWJlcjogdGhpcy50dW5lTnVtYmVyLFxuXHRcdGFiY2VsZW06IGFiY2VsZW0sXG5cdFx0ZWxlbXNldDogW2VsXSxcblx0XHRoaWdobGlnaHQ6IGhpZ2hsaWdodCxcblx0XHR1bmhpZ2hsaWdodDogdW5oaWdobGlnaHRcblx0fTtcblx0dGhpcy5hZGQoYWJzRWwsIGVsLCBmYWxzZSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNlbGVjdGFibGVzO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/selectables.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/separator.js":
/*!********************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/separator.js ***!
  \********************************************************/
/***/ ((module) => {

eval("function drawSeparator(renderer, width) {\n\tvar fill = \"rgba(0,0,0,255)\";\n\tvar stroke = \"rgba(0,0,0,0)\";\n\tvar y = Math.round(renderer.y);\n\tvar staffWidth = renderer.controller.width;\n\tvar x1 = (staffWidth - width) / 2;\n\tvar x2 = x1 + width;\n\tvar pathString = 'M ' + x1 + ' ' + y +\n\t\t' L ' + x2 + ' ' + y +\n\t\t' L ' + x2 + ' ' + (y + 1) +\n\t\t' L ' + x1 + ' ' + (y + 1) +\n\t\t' L ' + x1 + ' ' + y + ' z';\n\trenderer.paper.pathToBack({ path: pathString, stroke: stroke, fill: fill, 'class': renderer.controller.classes.generate('defined-text') });\n}\n\nmodule.exports = drawSeparator;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvc2VwYXJhdG9yLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw2R0FBNkc7QUFDMUk7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvZHJhdy9zZXBhcmF0b3IuanM/NjBhMyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBkcmF3U2VwYXJhdG9yKHJlbmRlcmVyLCB3aWR0aCkge1xuXHR2YXIgZmlsbCA9IFwicmdiYSgwLDAsMCwyNTUpXCI7XG5cdHZhciBzdHJva2UgPSBcInJnYmEoMCwwLDAsMClcIjtcblx0dmFyIHkgPSBNYXRoLnJvdW5kKHJlbmRlcmVyLnkpO1xuXHR2YXIgc3RhZmZXaWR0aCA9IHJlbmRlcmVyLmNvbnRyb2xsZXIud2lkdGg7XG5cdHZhciB4MSA9IChzdGFmZldpZHRoIC0gd2lkdGgpIC8gMjtcblx0dmFyIHgyID0geDEgKyB3aWR0aDtcblx0dmFyIHBhdGhTdHJpbmcgPSAnTSAnICsgeDEgKyAnICcgKyB5ICtcblx0XHQnIEwgJyArIHgyICsgJyAnICsgeSArXG5cdFx0JyBMICcgKyB4MiArICcgJyArICh5ICsgMSkgK1xuXHRcdCcgTCAnICsgeDEgKyAnICcgKyAoeSArIDEpICtcblx0XHQnIEwgJyArIHgxICsgJyAnICsgeSArICcgeic7XG5cdHJlbmRlcmVyLnBhcGVyLnBhdGhUb0JhY2soeyBwYXRoOiBwYXRoU3RyaW5nLCBzdHJva2U6IHN0cm9rZSwgZmlsbDogZmlsbCwgJ2NsYXNzJzogcmVuZGVyZXIuY29udHJvbGxlci5jbGFzc2VzLmdlbmVyYXRlKCdkZWZpbmVkLXRleHQnKSB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkcmF3U2VwYXJhdG9yO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/separator.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/set-paper-size.js":
/*!*************************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/set-paper-size.js ***!
  \*************************************************************/
/***/ ((module) => {

eval("function setPaperSize(renderer, maxwidth, scale, responsive) {\n\tvar w = (maxwidth + renderer.padding.left + renderer.padding.right) * scale;\n\tvar h = (renderer.y + renderer.padding.bottom) * scale;\n\tif (renderer.isPrint)\n\t\th = Math.max(h, 1056); // 11in x 72pt/in x 1.33px/pt\n\t// TODO-PER: We are letting the page get as long as it needs now, but eventually that should go to a second page.\n\n\t// for accessibility\n\tif (renderer.ariaLabel !== '') {\n\t\tvar text = \"Sheet Music\";\n\t\tif (renderer.abctune && renderer.abctune.metaText && renderer.abctune.metaText.title)\n\t\t\ttext += \" for \\\"\" + renderer.abctune.metaText.title + '\"';\n\t\trenderer.paper.setTitle(text);\n\t\tvar label = renderer.ariaLabel ? renderer.ariaLabel : text;\n\t\trenderer.paper.setAttribute(\"aria-label\", label);\n\t}\n\n\t// for dragging - don't select during drag\n\tvar styles = [\n\t\t\"-webkit-touch-callout: none;\",\n\t\t\"-webkit-user-select: none;\",\n\t\t\"-khtml-user-select: none;\",\n\t\t\"-moz-user-select: none;\",\n\t\t\"-ms-user-select: none;\",\n\t\t\"user-select: none;\"\n\t];\n\trenderer.paper.insertStyles(\".abcjs-dragging-in-progress text, .abcjs-dragging-in-progress tspan {\" + styles.join(\" \") + \"}\");\n\n\tvar parentStyles = { overflow: \"hidden\" };\n\tif (responsive === 'resize') {\n\t\trenderer.paper.setResponsiveWidth(w, h);\n\t} else {\n\t\tparentStyles.width = \"\";\n\t\tparentStyles.height = h + \"px\";\n\t\tif (scale < 1) {\n\t\t\tparentStyles.width = w + \"px\";\n\t\t\trenderer.paper.setSize(w / scale, h / scale);\n\t\t} else\n\t\t\trenderer.paper.setSize(w, h);\n\t}\n\trenderer.paper.setScale(scale);\n\trenderer.paper.setParentStyles(parentStyles);\n}\n\nmodule.exports = setPaperSize;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvc2V0LXBhcGVyLXNpemUuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0IsNkJBQTZCO0FBQzdCLDRCQUE0QjtBQUM1QiwwQkFBMEI7QUFDMUIseUJBQXlCO0FBQ3pCLHFCQUFxQjtBQUNyQjtBQUNBLG1HQUFtRyx5QkFBeUI7O0FBRTVILHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9kcmF3L3NldC1wYXBlci1zaXplLmpzP2I2Y2IiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gc2V0UGFwZXJTaXplKHJlbmRlcmVyLCBtYXh3aWR0aCwgc2NhbGUsIHJlc3BvbnNpdmUpIHtcblx0dmFyIHcgPSAobWF4d2lkdGggKyByZW5kZXJlci5wYWRkaW5nLmxlZnQgKyByZW5kZXJlci5wYWRkaW5nLnJpZ2h0KSAqIHNjYWxlO1xuXHR2YXIgaCA9IChyZW5kZXJlci55ICsgcmVuZGVyZXIucGFkZGluZy5ib3R0b20pICogc2NhbGU7XG5cdGlmIChyZW5kZXJlci5pc1ByaW50KVxuXHRcdGggPSBNYXRoLm1heChoLCAxMDU2KTsgLy8gMTFpbiB4IDcycHQvaW4geCAxLjMzcHgvcHRcblx0Ly8gVE9ETy1QRVI6IFdlIGFyZSBsZXR0aW5nIHRoZSBwYWdlIGdldCBhcyBsb25nIGFzIGl0IG5lZWRzIG5vdywgYnV0IGV2ZW50dWFsbHkgdGhhdCBzaG91bGQgZ28gdG8gYSBzZWNvbmQgcGFnZS5cblxuXHQvLyBmb3IgYWNjZXNzaWJpbGl0eVxuXHRpZiAocmVuZGVyZXIuYXJpYUxhYmVsICE9PSAnJykge1xuXHRcdHZhciB0ZXh0ID0gXCJTaGVldCBNdXNpY1wiO1xuXHRcdGlmIChyZW5kZXJlci5hYmN0dW5lICYmIHJlbmRlcmVyLmFiY3R1bmUubWV0YVRleHQgJiYgcmVuZGVyZXIuYWJjdHVuZS5tZXRhVGV4dC50aXRsZSlcblx0XHRcdHRleHQgKz0gXCIgZm9yIFxcXCJcIiArIHJlbmRlcmVyLmFiY3R1bmUubWV0YVRleHQudGl0bGUgKyAnXCInO1xuXHRcdHJlbmRlcmVyLnBhcGVyLnNldFRpdGxlKHRleHQpO1xuXHRcdHZhciBsYWJlbCA9IHJlbmRlcmVyLmFyaWFMYWJlbCA/IHJlbmRlcmVyLmFyaWFMYWJlbCA6IHRleHQ7XG5cdFx0cmVuZGVyZXIucGFwZXIuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBsYWJlbCk7XG5cdH1cblxuXHQvLyBmb3IgZHJhZ2dpbmcgLSBkb24ndCBzZWxlY3QgZHVyaW5nIGRyYWdcblx0dmFyIHN0eWxlcyA9IFtcblx0XHRcIi13ZWJraXQtdG91Y2gtY2FsbG91dDogbm9uZTtcIixcblx0XHRcIi13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XCIsXG5cdFx0XCIta2h0bWwtdXNlci1zZWxlY3Q6IG5vbmU7XCIsXG5cdFx0XCItbW96LXVzZXItc2VsZWN0OiBub25lO1wiLFxuXHRcdFwiLW1zLXVzZXItc2VsZWN0OiBub25lO1wiLFxuXHRcdFwidXNlci1zZWxlY3Q6IG5vbmU7XCJcblx0XTtcblx0cmVuZGVyZXIucGFwZXIuaW5zZXJ0U3R5bGVzKFwiLmFiY2pzLWRyYWdnaW5nLWluLXByb2dyZXNzIHRleHQsIC5hYmNqcy1kcmFnZ2luZy1pbi1wcm9ncmVzcyB0c3BhbiB7XCIgKyBzdHlsZXMuam9pbihcIiBcIikgKyBcIn1cIik7XG5cblx0dmFyIHBhcmVudFN0eWxlcyA9IHsgb3ZlcmZsb3c6IFwiaGlkZGVuXCIgfTtcblx0aWYgKHJlc3BvbnNpdmUgPT09ICdyZXNpemUnKSB7XG5cdFx0cmVuZGVyZXIucGFwZXIuc2V0UmVzcG9uc2l2ZVdpZHRoKHcsIGgpO1xuXHR9IGVsc2Uge1xuXHRcdHBhcmVudFN0eWxlcy53aWR0aCA9IFwiXCI7XG5cdFx0cGFyZW50U3R5bGVzLmhlaWdodCA9IGggKyBcInB4XCI7XG5cdFx0aWYgKHNjYWxlIDwgMSkge1xuXHRcdFx0cGFyZW50U3R5bGVzLndpZHRoID0gdyArIFwicHhcIjtcblx0XHRcdHJlbmRlcmVyLnBhcGVyLnNldFNpemUodyAvIHNjYWxlLCBoIC8gc2NhbGUpO1xuXHRcdH0gZWxzZVxuXHRcdFx0cmVuZGVyZXIucGFwZXIuc2V0U2l6ZSh3LCBoKTtcblx0fVxuXHRyZW5kZXJlci5wYXBlci5zZXRTY2FsZShzY2FsZSk7XG5cdHJlbmRlcmVyLnBhcGVyLnNldFBhcmVudFN0eWxlcyhwYXJlbnRTdHlsZXMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldFBhcGVyU2l6ZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/set-paper-size.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/sprintf.js":
/*!******************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/sprintf.js ***!
  \******************************************************/
/***/ ((module) => {

eval("/**\n * sprintf() for JavaScript v.0.4\n *\n Copyright (c) 2007-present, Alexandru Mrteanu <hello@alexei.ro>\n All rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are met:\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n * Redistributions in binary form must reproduce the above copyright\n notice, this list of conditions and the following disclaimer in the\n documentation and/or other materials provided with the distribution.\n * Neither the name of this software nor the names of its contributors may be\n used to endorse or promote products derived from this software without\n specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n DISCLAIMED. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR\n ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n//function str_repeat(i, m) { for (var o = []; m > 0; o[--m] = i); return(o.join('')); }\n\nvar sprintf = function () {\n\tvar i = 0, a, f = arguments[i++], o = [], m, p, c, x;\n\twhile (f) {\n\t\tif (m = /^[^\\x25]+/.exec(f)) o.push(m[0]);\n\t\telse if (m = /^\\x25{2}/.exec(f)) o.push('%');\n\t\telse if (m = /^\\x25(?:(\\d+)\\$)?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(f)) {\n\t\t\tif (((a = arguments[m[1] || i++]) == null) || (a == undefined)) throw (\"Too few arguments.\");\n\t\t\tif (/[^s]/.test(m[7]) && (typeof (a) != 'number'))\n\t\t\t\tthrow (\"Expecting number but found \" + typeof (a));\n\t\t\tswitch (m[7]) {\n\t\t\t\tcase 'b': a = a.toString(2); break;\n\t\t\t\tcase 'c': a = String.fromCharCode(a); break;\n\t\t\t\tcase 'd': a = parseInt(a); break;\n\t\t\t\tcase 'e': a = m[6] ? a.toExponential(m[6]) : a.toExponential(); break;\n\t\t\t\tcase 'f': a = m[6] ? parseFloat(a).toFixed(m[6]) : parseFloat(a); break;\n\t\t\t\tcase 'o': a = a.toString(8); break;\n\t\t\t\tcase 's': a = ((a = String(a)) && m[6] ? a.substring(0, m[6]) : a); break;\n\t\t\t\tcase 'u': a = Math.abs(a); break;\n\t\t\t\tcase 'x': a = a.toString(16); break;\n\t\t\t\tcase 'X': a = a.toString(16).toUpperCase(); break;\n\t\t\t}\n\t\t\ta = (/[def]/.test(m[7]) && m[2] && a > 0 ? '+' + a : a);\n\t\t\tc = m[3] ? m[3] == '0' ? '0' : m[3][1] : ' ';\n\t\t\tx = m[5] - String(a).length;\n\t\t\tp = m[5] ? str_repeat(c, x) : '';\n\t\t\to.push(m[4] ? a + p : p + a);\n\t\t}\n\t\telse throw (\"Huh ?!\");\n\t\tf = f.substring(m[0].length);\n\t}\n\treturn o.join('');\n};\n\nmodule.exports = sprintf;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvc3ByaW50Zi5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQSw4QkFBOEIsaUJBQWlCLE9BQU8sYUFBYTs7QUFFbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsRUFBRTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLDBDQUEwQztBQUMxQywrQkFBK0I7QUFDL0Isb0VBQW9FO0FBQ3BFLHNFQUFzRTtBQUN0RSxpQ0FBaUM7QUFDakMsd0VBQXdFO0FBQ3hFLCtCQUErQjtBQUMvQixrQ0FBa0M7QUFDbEMsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9kcmF3L3NwcmludGYuanM/MmQ3YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIHNwcmludGYoKSBmb3IgSmF2YVNjcmlwdCB2LjAuNFxuICpcbiBDb3B5cmlnaHQgKGMpIDIwMDctcHJlc2VudCwgQWxleGFuZHJ1IE3Eg3LEg8iZdGVhbnUgPGhlbGxvQGFsZXhlaS5ybz5cbiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXG4gUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG4gbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG4gKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodFxuIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0XG4gbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZVxuIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG4gKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoaXMgc29mdHdhcmUgbm9yIHRoZSBuYW1lcyBvZiBpdHMgY29udHJpYnV0b3JzIG1heSBiZVxuIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXRcbiBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG5cbiBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIiBBTkRcbiBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxuIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbiBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SXG4gQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTXG4gKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTO1xuIExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORFxuIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXG4gKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVNcbiBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiAqL1xuXG4vL2Z1bmN0aW9uIHN0cl9yZXBlYXQoaSwgbSkgeyBmb3IgKHZhciBvID0gW107IG0gPiAwOyBvWy0tbV0gPSBpKTsgcmV0dXJuKG8uam9pbignJykpOyB9XG5cbnZhciBzcHJpbnRmID0gZnVuY3Rpb24gKCkge1xuXHR2YXIgaSA9IDAsIGEsIGYgPSBhcmd1bWVudHNbaSsrXSwgbyA9IFtdLCBtLCBwLCBjLCB4O1xuXHR3aGlsZSAoZikge1xuXHRcdGlmIChtID0gL15bXlxceDI1XSsvLmV4ZWMoZikpIG8ucHVzaChtWzBdKTtcblx0XHRlbHNlIGlmIChtID0gL15cXHgyNXsyfS8uZXhlYyhmKSkgby5wdXNoKCclJyk7XG5cdFx0ZWxzZSBpZiAobSA9IC9eXFx4MjUoPzooXFxkKylcXCQpPyhcXCspPygwfCdbXiRdKT8oLSk/KFxcZCspPyg/OlxcLihcXGQrKSk/KFtiLWZvc3V4WF0pLy5leGVjKGYpKSB7XG5cdFx0XHRpZiAoKChhID0gYXJndW1lbnRzW21bMV0gfHwgaSsrXSkgPT0gbnVsbCkgfHwgKGEgPT0gdW5kZWZpbmVkKSkgdGhyb3cgKFwiVG9vIGZldyBhcmd1bWVudHMuXCIpO1xuXHRcdFx0aWYgKC9bXnNdLy50ZXN0KG1bN10pICYmICh0eXBlb2YgKGEpICE9ICdudW1iZXInKSlcblx0XHRcdFx0dGhyb3cgKFwiRXhwZWN0aW5nIG51bWJlciBidXQgZm91bmQgXCIgKyB0eXBlb2YgKGEpKTtcblx0XHRcdHN3aXRjaCAobVs3XSkge1xuXHRcdFx0XHRjYXNlICdiJzogYSA9IGEudG9TdHJpbmcoMik7IGJyZWFrO1xuXHRcdFx0XHRjYXNlICdjJzogYSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYSk7IGJyZWFrO1xuXHRcdFx0XHRjYXNlICdkJzogYSA9IHBhcnNlSW50KGEpOyBicmVhaztcblx0XHRcdFx0Y2FzZSAnZSc6IGEgPSBtWzZdID8gYS50b0V4cG9uZW50aWFsKG1bNl0pIDogYS50b0V4cG9uZW50aWFsKCk7IGJyZWFrO1xuXHRcdFx0XHRjYXNlICdmJzogYSA9IG1bNl0gPyBwYXJzZUZsb2F0KGEpLnRvRml4ZWQobVs2XSkgOiBwYXJzZUZsb2F0KGEpOyBicmVhaztcblx0XHRcdFx0Y2FzZSAnbyc6IGEgPSBhLnRvU3RyaW5nKDgpOyBicmVhaztcblx0XHRcdFx0Y2FzZSAncyc6IGEgPSAoKGEgPSBTdHJpbmcoYSkpICYmIG1bNl0gPyBhLnN1YnN0cmluZygwLCBtWzZdKSA6IGEpOyBicmVhaztcblx0XHRcdFx0Y2FzZSAndSc6IGEgPSBNYXRoLmFicyhhKTsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgJ3gnOiBhID0gYS50b1N0cmluZygxNik7IGJyZWFrO1xuXHRcdFx0XHRjYXNlICdYJzogYSA9IGEudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7IGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0YSA9ICgvW2RlZl0vLnRlc3QobVs3XSkgJiYgbVsyXSAmJiBhID4gMCA/ICcrJyArIGEgOiBhKTtcblx0XHRcdGMgPSBtWzNdID8gbVszXSA9PSAnMCcgPyAnMCcgOiBtWzNdWzFdIDogJyAnO1xuXHRcdFx0eCA9IG1bNV0gLSBTdHJpbmcoYSkubGVuZ3RoO1xuXHRcdFx0cCA9IG1bNV0gPyBzdHJfcmVwZWF0KGMsIHgpIDogJyc7XG5cdFx0XHRvLnB1c2gobVs0XSA/IGEgKyBwIDogcCArIGEpO1xuXHRcdH1cblx0XHRlbHNlIHRocm93IChcIkh1aCA/IVwiKTtcblx0XHRmID0gZi5zdWJzdHJpbmcobVswXS5sZW5ndGgpO1xuXHR9XG5cdHJldHVybiBvLmpvaW4oJycpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBzcHJpbnRmO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/sprintf.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/staff-group.js":
/*!**********************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/staff-group.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var spacing = __webpack_require__(/*! ../helpers/spacing */ \"(ssr)/./node_modules/abcjs/src/write/helpers/spacing.js\");\nvar drawBrace = __webpack_require__(/*! ./brace */ \"(ssr)/./node_modules/abcjs/src/write/draw/brace.js\");\nvar drawVoice = __webpack_require__(/*! ./voice */ \"(ssr)/./node_modules/abcjs/src/write/draw/voice.js\");\nvar printStaff = __webpack_require__(/*! ./staff */ \"(ssr)/./node_modules/abcjs/src/write/draw/staff.js\");\nvar printDebugBox = __webpack_require__(/*! ./debug-box */ \"(ssr)/./node_modules/abcjs/src/write/draw/debug-box.js\");\nvar printStem = __webpack_require__(/*! ./print-stem */ \"(ssr)/./node_modules/abcjs/src/write/draw/print-stem.js\");\nvar nonMusic = __webpack_require__(/*! ./non-music */ \"(ssr)/./node_modules/abcjs/src/write/draw/non-music.js\");\n\nfunction drawStaffGroup(renderer, params, selectables, lineNumber) {\n\t// We enter this method with renderer.y pointing to the topmost coordinate that we're allowed to draw.\n\t// All of the children that will be drawn have a relative \"pitch\" set, where zero is the first ledger line below the staff.\n\t// renderer.y will be offset at the beginning of each staff by the amount required to make the relative pitch work.\n\t// If there are multiple staves, then renderer.y will be incremented for each new staff.\n\n\tvar colorIndex;\n\n\t// An invisible marker is useful to be able to find where each system starts.\n\t//addInvisibleMarker(renderer, \"abcjs-top-of-system\");\n\n\tvar startY = renderer.y; // So that it can be restored after we're done.\n\t// Set the absolute Y position for each staff here, so the voice drawing below can just use if.\n\tfor (var j = 0; j < params.staffs.length; j++) {\n\t\tvar staff1 = params.staffs[j];\n\t\t//renderer.printHorizontalLine(50, renderer.y, \"start\");\n\t\trenderer.moveY(spacing.STEP, staff1.top);\n\t\tstaff1.absoluteY = renderer.y;\n\t\tif (renderer.showDebug) {\n\t\t\tif (renderer.showDebug.indexOf(\"box\") >= 0 && staff1.voices) {\n\t\t\t\tboxAllElements(renderer, params.voices, staff1.voices);\n\t\t\t}\n\t\t\tif (renderer.showDebug.indexOf(\"grid\") >= 0) {\n\t\t\t\trenderer.paper.dottedLine({ x1: renderer.padding.left, x2: renderer.padding.left + renderer.controller.width, y1: startY, y2: startY, stroke: \"#0000ff\" });\n\t\t\t\tprintDebugBox(renderer,\n\t\t\t\t\t{\n\t\t\t\t\t\tx: renderer.padding.left,\n\t\t\t\t\t\ty: renderer.calcY(staff1.originalTop),\n\t\t\t\t\t\twidth: renderer.controller.width,\n\t\t\t\t\t\theight: renderer.calcY(staff1.originalBottom) - renderer.calcY(staff1.originalTop),\n\t\t\t\t\t\tfill: renderer.foregroundColor,\n\t\t\t\t\t\tstroke: renderer.foregroundColor,\n\t\t\t\t\t\t\"fill-opacity\": 0.1,\n\t\t\t\t\t\t\"stroke-opacity\": 0.1\n\t\t\t\t\t});\n\t\t\t\tcolorIndex = 0;\n\t\t\t\tdebugPrintGridItem(staff1, 'chordHeightAbove');\n\t\t\t\tdebugPrintGridItem(staff1, 'chordHeightBelow');\n\t\t\t\tdebugPrintGridItem(staff1, 'dynamicHeightAbove');\n\t\t\t\tdebugPrintGridItem(staff1, 'dynamicHeightBelow');\n\t\t\t\tdebugPrintGridItem(staff1, 'endingHeightAbove');\n\t\t\t\tdebugPrintGridItem(staff1, 'lyricHeightAbove');\n\t\t\t\tdebugPrintGridItem(staff1, 'lyricHeightBelow');\n\t\t\t\tdebugPrintGridItem(staff1, 'partHeightAbove');\n\t\t\t\tdebugPrintGridItem(staff1, 'tempoHeightAbove');\n\t\t\t\tdebugPrintGridItem(staff1, 'volumeHeightAbove');\n\t\t\t\tdebugPrintGridItem(staff1, 'volumeHeightBelow');\n\t\t\t}\n\t\t}\n\t\trenderer.moveY(spacing.STEP, -staff1.bottom);\n\t\tif (renderer.showDebug) {\n\t\t\tif (renderer.showDebug.indexOf(\"grid\") >= 0) {\n\t\t\t\trenderer.paper.dottedLine({\n\t\t\t\t\tx1: renderer.padding.left,\n\t\t\t\t\tx2: renderer.padding.left + renderer.controller.width,\n\t\t\t\t\ty1: renderer.y,\n\t\t\t\t\ty2: renderer.y,\n\t\t\t\t\tstroke: \"#0000aa\"\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tvar topLine; // these are to connect multiple staves. We need to remember where they are.\n\tvar bottomLine;\n\n\tvar linePitch = 2;\n\tvar bartop = 0;\n\tfor (var i = 0; i < params.voices.length; i++) {\n\t\tvar staff = params.voices[i].staff;\n\t\tvar tabName = params.voices[i].tabNameInfos;\n\t\trenderer.y = staff.absoluteY;\n\t\trenderer.controller.classes.incrVoice();\n\t\t//renderer.y = staff.y;\n\t\t// offset for starting the counting at middle C\n\t\tif (!params.voices[i].duplicate) {\n\t\t\t//\t\t\trenderer.moveY(spacing.STEP, staff.top);\n\t\t\tif (!topLine) topLine = renderer.calcY(10);\n\t\t\tbottomLine = renderer.calcY(linePitch);\n\t\t\tif (staff.lines !== 0) {\n\t\t\t\tif (staff.linePitch) {\n\t\t\t\t\tlinePitch = staff.linePitch;\n\t\t\t\t}\n\t\t\t\trenderer.controller.classes.newMeasure();\n\t\t\t\tvar lines = printStaff(renderer, params.startx, params.w, staff.lines, staff.linePitch, 0.35);\n\t\t\t\tbottomLine = lines[1];\n\t\t\t\tstaff.bottomLine = bottomLine;\n\t\t\t\tstaff.topLine = lines[0];\n\t\t\t\t// rework bartop when tabs are present with current staff\n\t\t\t\tif (staff.hasTab) {\n\t\t\t\t\t// do not link to staff above  (ugly looking)\n\t\t\t\t\tbartop = staff.topLine;\n\t\t\t\t}\n\t\t\t\tif (staff.hasStaff) {\n\t\t\t\t\t// this is a tab\n\t\t\t\t\tbartop = staff.hasStaff.topLine;\n\t\t\t\t\tparams.voices[i].barto = true;\n\t\t\t\t\tparams.voices[i].topLine = topLine;\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tprintBrace(renderer, staff.absoluteY, params.brace, i, selectables);\n\t\t\tprintBrace(renderer, staff.absoluteY, params.bracket, i, selectables);\n\t\t}\n\t\tdrawVoice(renderer, params.voices[i], bartop, selectables, {\n\t\t\ttop: startY,\n\t\t\tzero: renderer.y,\n\t\t\theight: params.height * spacing.STEP\n\t\t});\n\t\tvar tabNameHeight = 0;\n\t\tif (tabName) {\n\t\t\t// print tab infos on staffBottom\n\t\t\tvar r = { rows: [] };\n\t\t\tr.rows.push({ absmove: bottomLine + 2 });\n\t\t\tvar leftMargin = 8;\n\t\t\tr.rows.push({ left: params.startx + leftMargin, text: tabName.name, font: 'tablabelfont', klass: 'text instrument-name', anchor: 'start' });\n\t\t\tr.rows.push({ move: tabName.textSize.height });\n\t\t\tnonMusic(renderer, r);\n\t\t\ttabNameHeight = tabName.textSize.height;\n\t\t}\n\n\t\trenderer.controller.classes.newMeasure();\n\t\tif (!params.voices[i].duplicate) {\n\t\t\tbartop = renderer.calcY(2 + tabNameHeight); // This connects the bar lines between two different staves.\n\t\t\t//\t\t\tif (staff.bottom < 0)\n\t\t\t//\t\t\t\trenderer.moveY(spacing.STEP, -staff.bottom);\n\t\t}\n\t}\n\trenderer.controller.classes.newMeasure();\n\n\t// connect all the staves together with a vertical line\n\tvar staffSize = params.staffs.length;\n\tif (staffSize > 1) {\n\t\ttopLine = params.staffs[0].topLine;\n\t\tbottomLine = params.staffs[staffSize - 1].bottomLine;\n\t\tprintStem(renderer, params.startx, 0.6, topLine, bottomLine, null);\n\t}\n\trenderer.y = startY;\n\n\tfunction debugPrintGridItem(staff, key) {\n\t\tvar colors = [\"rgb(207,27,36)\", \"rgb(168,214,80)\", \"rgb(110,161,224)\", \"rgb(191,119,218)\", \"rgb(195,30,151)\",\n\t\t\t\"rgb(31,170,177)\", \"rgb(220,166,142)\"];\n\t\tif (staff.positionY && staff.positionY[key]) {\n\t\t\tvar height = staff.specialY[key] * spacing.STEP;\n\t\t\tif (key === \"chordHeightAbove\" && staff.specialY.chordLines && staff.specialY.chordLines.above)\n\t\t\t\theight *= staff.specialY.chordLines.above;\n\t\t\tif (key === \"chordHeightBelow\" && staff.specialY.chordLines && staff.specialY.chordLines.below)\n\t\t\t\theight *= staff.specialY.chordLines.below;\n\t\t\tprintDebugBox(renderer,\n\t\t\t\t{\n\t\t\t\t\tx: renderer.padding.left,\n\t\t\t\t\ty: renderer.calcY(staff.positionY[key]),\n\t\t\t\t\twidth: renderer.controller.width,\n\t\t\t\t\theight: height,\n\t\t\t\t\tfill: colors[colorIndex],\n\t\t\t\t\tstroke: colors[colorIndex],\n\t\t\t\t\t\"fill-opacity\": 0.4,\n\t\t\t\t\t\"stroke-opacity\": 0.4\n\t\t\t\t},\n\t\t\t\tkey.substr(0, 4));\n\t\t\tcolorIndex += 1; if (colorIndex > 6) colorIndex = 0;\n\t\t}\n\t}\n}\n\nfunction printBrace(renderer, absoluteY, brace, index, selectables) {\n\tif (brace) {\n\t\tfor (var i = 0; i < brace.length; i++) {\n\t\t\tif (brace[i].isStartVoice(index)) {\n\t\t\t\tbrace[i].startY = absoluteY - spacing.STEP * 10;\n\t\t\t\tbrace[i].elemset = drawBrace(renderer, brace[i], selectables);\n\t\t\t}\n\t\t}\n\t}\n}\n\n// function addInvisibleMarker(renderer, className) {\n// \tvar y = Math.round(renderer.y);\n// \trenderer.paper.pathToBack({path:\"M 0 \" + y + \" L 0 0\", stroke:\"none\", fill:\"none\", \"stroke-opacity\": 0, \"fill-opacity\": 0, 'class': renderer.controller.classes.generate(className), 'data-vertical': y });\n// }\n\nfunction boxAllElements(renderer, voices, which) {\n\tfor (var i = 0; i < which.length; i++) {\n\t\tvar children = voices[which[i]].children;\n\t\tfor (var j = 0; j < children.length; j++) {\n\t\t\tvar elem = children[j];\n\t\t\tvar coords = elem.getFixedCoords();\n\t\t\tif (elem.invisible || coords.t === undefined || coords.b === undefined)\n\t\t\t\tcontinue;\n\t\t\tvar height = (coords.t - coords.b) * spacing.STEP;\n\t\t\tprintDebugBox(renderer,\n\t\t\t\t{\n\t\t\t\t\tx: coords.x,\n\t\t\t\t\ty: renderer.calcY(coords.t),\n\t\t\t\t\twidth: coords.w,\n\t\t\t\t\theight: height,\n\t\t\t\t\tfill: \"#88e888\",\n\t\t\t\t\t\"fill-opacity\": 0.4,\n\t\t\t\t\tstroke: \"#4aa93d\",\n\t\t\t\t\t\"stroke-opacity\": 0.8\n\t\t\t\t});\n\n\t\t\tfor (var k = 0; k < elem.children.length; k++) {\n\t\t\t\tvar relElem = elem.children[k];\n\t\t\t\tvar chord = relElem.getChordDim();\n\t\t\t\tif (chord) {\n\t\t\t\t\tvar y = renderer.calcY(relElem.pitch);\n\t\t\t\t\ty += relElem.dim.font.size * relElem.getLane();\n\t\t\t\t\tprintDebugBox(renderer,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tx: chord.left,\n\t\t\t\t\t\t\ty: y,\n\t\t\t\t\t\t\twidth: chord.right - chord.left,\n\t\t\t\t\t\t\theight: relElem.dim.font.size,\n\t\t\t\t\t\t\tfill: \"none\",\n\t\t\t\t\t\t\tstroke: \"#4aa93d\",\n\t\t\t\t\t\t\t\"stroke-opacity\": 0.8\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nmodule.exports = drawStaffGroup;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvc3RhZmYtZ3JvdXAuanMiLCJtYXBwaW5ncyI6IkFBQUEsY0FBYyxtQkFBTyxDQUFDLG1GQUFvQjtBQUMxQyxnQkFBZ0IsbUJBQU8sQ0FBQyxtRUFBUztBQUNqQyxnQkFBZ0IsbUJBQU8sQ0FBQyxtRUFBUztBQUNqQyxpQkFBaUIsbUJBQU8sQ0FBQyxtRUFBUztBQUNsQyxvQkFBb0IsbUJBQU8sQ0FBQywyRUFBYTtBQUN6QyxnQkFBZ0IsbUJBQU8sQ0FBQyw2RUFBYztBQUN0QyxlQUFlLG1CQUFPLENBQUMsMkVBQWE7O0FBRXBDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSwwQkFBMEI7QUFDMUI7QUFDQSxpQkFBaUIsMEJBQTBCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw2SEFBNkg7QUFDN0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQiwwQkFBMEI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLGlCQUFpQix5QkFBeUI7QUFDMUM7QUFDQSxpQkFBaUIsNEhBQTRIO0FBQzdJLGlCQUFpQiwrQkFBK0I7QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsK0JBQStCLDhLQUE4SztBQUM3TTs7QUFFQTtBQUNBLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQSxrQkFBa0IscUJBQXFCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUwsbUJBQW1CLDBCQUEwQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvZHJhdy9zdGFmZi1ncm91cC5qcz83OGI4Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBzcGFjaW5nID0gcmVxdWlyZSgnLi4vaGVscGVycy9zcGFjaW5nJyk7XG52YXIgZHJhd0JyYWNlID0gcmVxdWlyZSgnLi9icmFjZScpO1xudmFyIGRyYXdWb2ljZSA9IHJlcXVpcmUoJy4vdm9pY2UnKTtcbnZhciBwcmludFN0YWZmID0gcmVxdWlyZSgnLi9zdGFmZicpO1xudmFyIHByaW50RGVidWdCb3ggPSByZXF1aXJlKCcuL2RlYnVnLWJveCcpO1xudmFyIHByaW50U3RlbSA9IHJlcXVpcmUoJy4vcHJpbnQtc3RlbScpO1xudmFyIG5vbk11c2ljID0gcmVxdWlyZSgnLi9ub24tbXVzaWMnKTtcblxuZnVuY3Rpb24gZHJhd1N0YWZmR3JvdXAocmVuZGVyZXIsIHBhcmFtcywgc2VsZWN0YWJsZXMsIGxpbmVOdW1iZXIpIHtcblx0Ly8gV2UgZW50ZXIgdGhpcyBtZXRob2Qgd2l0aCByZW5kZXJlci55IHBvaW50aW5nIHRvIHRoZSB0b3Btb3N0IGNvb3JkaW5hdGUgdGhhdCB3ZSdyZSBhbGxvd2VkIHRvIGRyYXcuXG5cdC8vIEFsbCBvZiB0aGUgY2hpbGRyZW4gdGhhdCB3aWxsIGJlIGRyYXduIGhhdmUgYSByZWxhdGl2ZSBcInBpdGNoXCIgc2V0LCB3aGVyZSB6ZXJvIGlzIHRoZSBmaXJzdCBsZWRnZXIgbGluZSBiZWxvdyB0aGUgc3RhZmYuXG5cdC8vIHJlbmRlcmVyLnkgd2lsbCBiZSBvZmZzZXQgYXQgdGhlIGJlZ2lubmluZyBvZiBlYWNoIHN0YWZmIGJ5IHRoZSBhbW91bnQgcmVxdWlyZWQgdG8gbWFrZSB0aGUgcmVsYXRpdmUgcGl0Y2ggd29yay5cblx0Ly8gSWYgdGhlcmUgYXJlIG11bHRpcGxlIHN0YXZlcywgdGhlbiByZW5kZXJlci55IHdpbGwgYmUgaW5jcmVtZW50ZWQgZm9yIGVhY2ggbmV3IHN0YWZmLlxuXG5cdHZhciBjb2xvckluZGV4O1xuXG5cdC8vIEFuIGludmlzaWJsZSBtYXJrZXIgaXMgdXNlZnVsIHRvIGJlIGFibGUgdG8gZmluZCB3aGVyZSBlYWNoIHN5c3RlbSBzdGFydHMuXG5cdC8vYWRkSW52aXNpYmxlTWFya2VyKHJlbmRlcmVyLCBcImFiY2pzLXRvcC1vZi1zeXN0ZW1cIik7XG5cblx0dmFyIHN0YXJ0WSA9IHJlbmRlcmVyLnk7IC8vIFNvIHRoYXQgaXQgY2FuIGJlIHJlc3RvcmVkIGFmdGVyIHdlJ3JlIGRvbmUuXG5cdC8vIFNldCB0aGUgYWJzb2x1dGUgWSBwb3NpdGlvbiBmb3IgZWFjaCBzdGFmZiBoZXJlLCBzbyB0aGUgdm9pY2UgZHJhd2luZyBiZWxvdyBjYW4ganVzdCB1c2UgaWYuXG5cdGZvciAodmFyIGogPSAwOyBqIDwgcGFyYW1zLnN0YWZmcy5sZW5ndGg7IGorKykge1xuXHRcdHZhciBzdGFmZjEgPSBwYXJhbXMuc3RhZmZzW2pdO1xuXHRcdC8vcmVuZGVyZXIucHJpbnRIb3Jpem9udGFsTGluZSg1MCwgcmVuZGVyZXIueSwgXCJzdGFydFwiKTtcblx0XHRyZW5kZXJlci5tb3ZlWShzcGFjaW5nLlNURVAsIHN0YWZmMS50b3ApO1xuXHRcdHN0YWZmMS5hYnNvbHV0ZVkgPSByZW5kZXJlci55O1xuXHRcdGlmIChyZW5kZXJlci5zaG93RGVidWcpIHtcblx0XHRcdGlmIChyZW5kZXJlci5zaG93RGVidWcuaW5kZXhPZihcImJveFwiKSA+PSAwICYmIHN0YWZmMS52b2ljZXMpIHtcblx0XHRcdFx0Ym94QWxsRWxlbWVudHMocmVuZGVyZXIsIHBhcmFtcy52b2ljZXMsIHN0YWZmMS52b2ljZXMpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHJlbmRlcmVyLnNob3dEZWJ1Zy5pbmRleE9mKFwiZ3JpZFwiKSA+PSAwKSB7XG5cdFx0XHRcdHJlbmRlcmVyLnBhcGVyLmRvdHRlZExpbmUoeyB4MTogcmVuZGVyZXIucGFkZGluZy5sZWZ0LCB4MjogcmVuZGVyZXIucGFkZGluZy5sZWZ0ICsgcmVuZGVyZXIuY29udHJvbGxlci53aWR0aCwgeTE6IHN0YXJ0WSwgeTI6IHN0YXJ0WSwgc3Ryb2tlOiBcIiMwMDAwZmZcIiB9KTtcblx0XHRcdFx0cHJpbnREZWJ1Z0JveChyZW5kZXJlcixcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR4OiByZW5kZXJlci5wYWRkaW5nLmxlZnQsXG5cdFx0XHRcdFx0XHR5OiByZW5kZXJlci5jYWxjWShzdGFmZjEub3JpZ2luYWxUb3ApLFxuXHRcdFx0XHRcdFx0d2lkdGg6IHJlbmRlcmVyLmNvbnRyb2xsZXIud2lkdGgsXG5cdFx0XHRcdFx0XHRoZWlnaHQ6IHJlbmRlcmVyLmNhbGNZKHN0YWZmMS5vcmlnaW5hbEJvdHRvbSkgLSByZW5kZXJlci5jYWxjWShzdGFmZjEub3JpZ2luYWxUb3ApLFxuXHRcdFx0XHRcdFx0ZmlsbDogcmVuZGVyZXIuZm9yZWdyb3VuZENvbG9yLFxuXHRcdFx0XHRcdFx0c3Ryb2tlOiByZW5kZXJlci5mb3JlZ3JvdW5kQ29sb3IsXG5cdFx0XHRcdFx0XHRcImZpbGwtb3BhY2l0eVwiOiAwLjEsXG5cdFx0XHRcdFx0XHRcInN0cm9rZS1vcGFjaXR5XCI6IDAuMVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRjb2xvckluZGV4ID0gMDtcblx0XHRcdFx0ZGVidWdQcmludEdyaWRJdGVtKHN0YWZmMSwgJ2Nob3JkSGVpZ2h0QWJvdmUnKTtcblx0XHRcdFx0ZGVidWdQcmludEdyaWRJdGVtKHN0YWZmMSwgJ2Nob3JkSGVpZ2h0QmVsb3cnKTtcblx0XHRcdFx0ZGVidWdQcmludEdyaWRJdGVtKHN0YWZmMSwgJ2R5bmFtaWNIZWlnaHRBYm92ZScpO1xuXHRcdFx0XHRkZWJ1Z1ByaW50R3JpZEl0ZW0oc3RhZmYxLCAnZHluYW1pY0hlaWdodEJlbG93Jyk7XG5cdFx0XHRcdGRlYnVnUHJpbnRHcmlkSXRlbShzdGFmZjEsICdlbmRpbmdIZWlnaHRBYm92ZScpO1xuXHRcdFx0XHRkZWJ1Z1ByaW50R3JpZEl0ZW0oc3RhZmYxLCAnbHlyaWNIZWlnaHRBYm92ZScpO1xuXHRcdFx0XHRkZWJ1Z1ByaW50R3JpZEl0ZW0oc3RhZmYxLCAnbHlyaWNIZWlnaHRCZWxvdycpO1xuXHRcdFx0XHRkZWJ1Z1ByaW50R3JpZEl0ZW0oc3RhZmYxLCAncGFydEhlaWdodEFib3ZlJyk7XG5cdFx0XHRcdGRlYnVnUHJpbnRHcmlkSXRlbShzdGFmZjEsICd0ZW1wb0hlaWdodEFib3ZlJyk7XG5cdFx0XHRcdGRlYnVnUHJpbnRHcmlkSXRlbShzdGFmZjEsICd2b2x1bWVIZWlnaHRBYm92ZScpO1xuXHRcdFx0XHRkZWJ1Z1ByaW50R3JpZEl0ZW0oc3RhZmYxLCAndm9sdW1lSGVpZ2h0QmVsb3cnKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmVuZGVyZXIubW92ZVkoc3BhY2luZy5TVEVQLCAtc3RhZmYxLmJvdHRvbSk7XG5cdFx0aWYgKHJlbmRlcmVyLnNob3dEZWJ1Zykge1xuXHRcdFx0aWYgKHJlbmRlcmVyLnNob3dEZWJ1Zy5pbmRleE9mKFwiZ3JpZFwiKSA+PSAwKSB7XG5cdFx0XHRcdHJlbmRlcmVyLnBhcGVyLmRvdHRlZExpbmUoe1xuXHRcdFx0XHRcdHgxOiByZW5kZXJlci5wYWRkaW5nLmxlZnQsXG5cdFx0XHRcdFx0eDI6IHJlbmRlcmVyLnBhZGRpbmcubGVmdCArIHJlbmRlcmVyLmNvbnRyb2xsZXIud2lkdGgsXG5cdFx0XHRcdFx0eTE6IHJlbmRlcmVyLnksXG5cdFx0XHRcdFx0eTI6IHJlbmRlcmVyLnksXG5cdFx0XHRcdFx0c3Ryb2tlOiBcIiMwMDAwYWFcIlxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0dmFyIHRvcExpbmU7IC8vIHRoZXNlIGFyZSB0byBjb25uZWN0IG11bHRpcGxlIHN0YXZlcy4gV2UgbmVlZCB0byByZW1lbWJlciB3aGVyZSB0aGV5IGFyZS5cblx0dmFyIGJvdHRvbUxpbmU7XG5cblx0dmFyIGxpbmVQaXRjaCA9IDI7XG5cdHZhciBiYXJ0b3AgPSAwO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHBhcmFtcy52b2ljZXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgc3RhZmYgPSBwYXJhbXMudm9pY2VzW2ldLnN0YWZmO1xuXHRcdHZhciB0YWJOYW1lID0gcGFyYW1zLnZvaWNlc1tpXS50YWJOYW1lSW5mb3M7XG5cdFx0cmVuZGVyZXIueSA9IHN0YWZmLmFic29sdXRlWTtcblx0XHRyZW5kZXJlci5jb250cm9sbGVyLmNsYXNzZXMuaW5jclZvaWNlKCk7XG5cdFx0Ly9yZW5kZXJlci55ID0gc3RhZmYueTtcblx0XHQvLyBvZmZzZXQgZm9yIHN0YXJ0aW5nIHRoZSBjb3VudGluZyBhdCBtaWRkbGUgQ1xuXHRcdGlmICghcGFyYW1zLnZvaWNlc1tpXS5kdXBsaWNhdGUpIHtcblx0XHRcdC8vXHRcdFx0cmVuZGVyZXIubW92ZVkoc3BhY2luZy5TVEVQLCBzdGFmZi50b3ApO1xuXHRcdFx0aWYgKCF0b3BMaW5lKSB0b3BMaW5lID0gcmVuZGVyZXIuY2FsY1koMTApO1xuXHRcdFx0Ym90dG9tTGluZSA9IHJlbmRlcmVyLmNhbGNZKGxpbmVQaXRjaCk7XG5cdFx0XHRpZiAoc3RhZmYubGluZXMgIT09IDApIHtcblx0XHRcdFx0aWYgKHN0YWZmLmxpbmVQaXRjaCkge1xuXHRcdFx0XHRcdGxpbmVQaXRjaCA9IHN0YWZmLmxpbmVQaXRjaDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZW5kZXJlci5jb250cm9sbGVyLmNsYXNzZXMubmV3TWVhc3VyZSgpO1xuXHRcdFx0XHR2YXIgbGluZXMgPSBwcmludFN0YWZmKHJlbmRlcmVyLCBwYXJhbXMuc3RhcnR4LCBwYXJhbXMudywgc3RhZmYubGluZXMsIHN0YWZmLmxpbmVQaXRjaCwgMC4zNSk7XG5cdFx0XHRcdGJvdHRvbUxpbmUgPSBsaW5lc1sxXTtcblx0XHRcdFx0c3RhZmYuYm90dG9tTGluZSA9IGJvdHRvbUxpbmU7XG5cdFx0XHRcdHN0YWZmLnRvcExpbmUgPSBsaW5lc1swXTtcblx0XHRcdFx0Ly8gcmV3b3JrIGJhcnRvcCB3aGVuIHRhYnMgYXJlIHByZXNlbnQgd2l0aCBjdXJyZW50IHN0YWZmXG5cdFx0XHRcdGlmIChzdGFmZi5oYXNUYWIpIHtcblx0XHRcdFx0XHQvLyBkbyBub3QgbGluayB0byBzdGFmZiBhYm92ZSAgKHVnbHkgbG9va2luZylcblx0XHRcdFx0XHRiYXJ0b3AgPSBzdGFmZi50b3BMaW5lO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChzdGFmZi5oYXNTdGFmZikge1xuXHRcdFx0XHRcdC8vIHRoaXMgaXMgYSB0YWJcblx0XHRcdFx0XHRiYXJ0b3AgPSBzdGFmZi5oYXNTdGFmZi50b3BMaW5lO1xuXHRcdFx0XHRcdHBhcmFtcy52b2ljZXNbaV0uYmFydG8gPSB0cnVlO1xuXHRcdFx0XHRcdHBhcmFtcy52b2ljZXNbaV0udG9wTGluZSA9IHRvcExpbmU7XG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXHRcdFx0cHJpbnRCcmFjZShyZW5kZXJlciwgc3RhZmYuYWJzb2x1dGVZLCBwYXJhbXMuYnJhY2UsIGksIHNlbGVjdGFibGVzKTtcblx0XHRcdHByaW50QnJhY2UocmVuZGVyZXIsIHN0YWZmLmFic29sdXRlWSwgcGFyYW1zLmJyYWNrZXQsIGksIHNlbGVjdGFibGVzKTtcblx0XHR9XG5cdFx0ZHJhd1ZvaWNlKHJlbmRlcmVyLCBwYXJhbXMudm9pY2VzW2ldLCBiYXJ0b3AsIHNlbGVjdGFibGVzLCB7XG5cdFx0XHR0b3A6IHN0YXJ0WSxcblx0XHRcdHplcm86IHJlbmRlcmVyLnksXG5cdFx0XHRoZWlnaHQ6IHBhcmFtcy5oZWlnaHQgKiBzcGFjaW5nLlNURVBcblx0XHR9KTtcblx0XHR2YXIgdGFiTmFtZUhlaWdodCA9IDA7XG5cdFx0aWYgKHRhYk5hbWUpIHtcblx0XHRcdC8vIHByaW50IHRhYiBpbmZvcyBvbiBzdGFmZkJvdHRvbVxuXHRcdFx0dmFyIHIgPSB7IHJvd3M6IFtdIH07XG5cdFx0XHRyLnJvd3MucHVzaCh7IGFic21vdmU6IGJvdHRvbUxpbmUgKyAyIH0pO1xuXHRcdFx0dmFyIGxlZnRNYXJnaW4gPSA4O1xuXHRcdFx0ci5yb3dzLnB1c2goeyBsZWZ0OiBwYXJhbXMuc3RhcnR4ICsgbGVmdE1hcmdpbiwgdGV4dDogdGFiTmFtZS5uYW1lLCBmb250OiAndGFibGFiZWxmb250Jywga2xhc3M6ICd0ZXh0IGluc3RydW1lbnQtbmFtZScsIGFuY2hvcjogJ3N0YXJ0JyB9KTtcblx0XHRcdHIucm93cy5wdXNoKHsgbW92ZTogdGFiTmFtZS50ZXh0U2l6ZS5oZWlnaHQgfSk7XG5cdFx0XHRub25NdXNpYyhyZW5kZXJlciwgcik7XG5cdFx0XHR0YWJOYW1lSGVpZ2h0ID0gdGFiTmFtZS50ZXh0U2l6ZS5oZWlnaHQ7XG5cdFx0fVxuXG5cdFx0cmVuZGVyZXIuY29udHJvbGxlci5jbGFzc2VzLm5ld01lYXN1cmUoKTtcblx0XHRpZiAoIXBhcmFtcy52b2ljZXNbaV0uZHVwbGljYXRlKSB7XG5cdFx0XHRiYXJ0b3AgPSByZW5kZXJlci5jYWxjWSgyICsgdGFiTmFtZUhlaWdodCk7IC8vIFRoaXMgY29ubmVjdHMgdGhlIGJhciBsaW5lcyBiZXR3ZWVuIHR3byBkaWZmZXJlbnQgc3RhdmVzLlxuXHRcdFx0Ly9cdFx0XHRpZiAoc3RhZmYuYm90dG9tIDwgMClcblx0XHRcdC8vXHRcdFx0XHRyZW5kZXJlci5tb3ZlWShzcGFjaW5nLlNURVAsIC1zdGFmZi5ib3R0b20pO1xuXHRcdH1cblx0fVxuXHRyZW5kZXJlci5jb250cm9sbGVyLmNsYXNzZXMubmV3TWVhc3VyZSgpO1xuXG5cdC8vIGNvbm5lY3QgYWxsIHRoZSBzdGF2ZXMgdG9nZXRoZXIgd2l0aCBhIHZlcnRpY2FsIGxpbmVcblx0dmFyIHN0YWZmU2l6ZSA9IHBhcmFtcy5zdGFmZnMubGVuZ3RoO1xuXHRpZiAoc3RhZmZTaXplID4gMSkge1xuXHRcdHRvcExpbmUgPSBwYXJhbXMuc3RhZmZzWzBdLnRvcExpbmU7XG5cdFx0Ym90dG9tTGluZSA9IHBhcmFtcy5zdGFmZnNbc3RhZmZTaXplIC0gMV0uYm90dG9tTGluZTtcblx0XHRwcmludFN0ZW0ocmVuZGVyZXIsIHBhcmFtcy5zdGFydHgsIDAuNiwgdG9wTGluZSwgYm90dG9tTGluZSwgbnVsbCk7XG5cdH1cblx0cmVuZGVyZXIueSA9IHN0YXJ0WTtcblxuXHRmdW5jdGlvbiBkZWJ1Z1ByaW50R3JpZEl0ZW0oc3RhZmYsIGtleSkge1xuXHRcdHZhciBjb2xvcnMgPSBbXCJyZ2IoMjA3LDI3LDM2KVwiLCBcInJnYigxNjgsMjE0LDgwKVwiLCBcInJnYigxMTAsMTYxLDIyNClcIiwgXCJyZ2IoMTkxLDExOSwyMTgpXCIsIFwicmdiKDE5NSwzMCwxNTEpXCIsXG5cdFx0XHRcInJnYigzMSwxNzAsMTc3KVwiLCBcInJnYigyMjAsMTY2LDE0MilcIl07XG5cdFx0aWYgKHN0YWZmLnBvc2l0aW9uWSAmJiBzdGFmZi5wb3NpdGlvbllba2V5XSkge1xuXHRcdFx0dmFyIGhlaWdodCA9IHN0YWZmLnNwZWNpYWxZW2tleV0gKiBzcGFjaW5nLlNURVA7XG5cdFx0XHRpZiAoa2V5ID09PSBcImNob3JkSGVpZ2h0QWJvdmVcIiAmJiBzdGFmZi5zcGVjaWFsWS5jaG9yZExpbmVzICYmIHN0YWZmLnNwZWNpYWxZLmNob3JkTGluZXMuYWJvdmUpXG5cdFx0XHRcdGhlaWdodCAqPSBzdGFmZi5zcGVjaWFsWS5jaG9yZExpbmVzLmFib3ZlO1xuXHRcdFx0aWYgKGtleSA9PT0gXCJjaG9yZEhlaWdodEJlbG93XCIgJiYgc3RhZmYuc3BlY2lhbFkuY2hvcmRMaW5lcyAmJiBzdGFmZi5zcGVjaWFsWS5jaG9yZExpbmVzLmJlbG93KVxuXHRcdFx0XHRoZWlnaHQgKj0gc3RhZmYuc3BlY2lhbFkuY2hvcmRMaW5lcy5iZWxvdztcblx0XHRcdHByaW50RGVidWdCb3gocmVuZGVyZXIsXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR4OiByZW5kZXJlci5wYWRkaW5nLmxlZnQsXG5cdFx0XHRcdFx0eTogcmVuZGVyZXIuY2FsY1koc3RhZmYucG9zaXRpb25ZW2tleV0pLFxuXHRcdFx0XHRcdHdpZHRoOiByZW5kZXJlci5jb250cm9sbGVyLndpZHRoLFxuXHRcdFx0XHRcdGhlaWdodDogaGVpZ2h0LFxuXHRcdFx0XHRcdGZpbGw6IGNvbG9yc1tjb2xvckluZGV4XSxcblx0XHRcdFx0XHRzdHJva2U6IGNvbG9yc1tjb2xvckluZGV4XSxcblx0XHRcdFx0XHRcImZpbGwtb3BhY2l0eVwiOiAwLjQsXG5cdFx0XHRcdFx0XCJzdHJva2Utb3BhY2l0eVwiOiAwLjRcblx0XHRcdFx0fSxcblx0XHRcdFx0a2V5LnN1YnN0cigwLCA0KSk7XG5cdFx0XHRjb2xvckluZGV4ICs9IDE7IGlmIChjb2xvckluZGV4ID4gNikgY29sb3JJbmRleCA9IDA7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIHByaW50QnJhY2UocmVuZGVyZXIsIGFic29sdXRlWSwgYnJhY2UsIGluZGV4LCBzZWxlY3RhYmxlcykge1xuXHRpZiAoYnJhY2UpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGJyYWNlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAoYnJhY2VbaV0uaXNTdGFydFZvaWNlKGluZGV4KSkge1xuXHRcdFx0XHRicmFjZVtpXS5zdGFydFkgPSBhYnNvbHV0ZVkgLSBzcGFjaW5nLlNURVAgKiAxMDtcblx0XHRcdFx0YnJhY2VbaV0uZWxlbXNldCA9IGRyYXdCcmFjZShyZW5kZXJlciwgYnJhY2VbaV0sIHNlbGVjdGFibGVzKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuLy8gZnVuY3Rpb24gYWRkSW52aXNpYmxlTWFya2VyKHJlbmRlcmVyLCBjbGFzc05hbWUpIHtcbi8vIFx0dmFyIHkgPSBNYXRoLnJvdW5kKHJlbmRlcmVyLnkpO1xuLy8gXHRyZW5kZXJlci5wYXBlci5wYXRoVG9CYWNrKHtwYXRoOlwiTSAwIFwiICsgeSArIFwiIEwgMCAwXCIsIHN0cm9rZTpcIm5vbmVcIiwgZmlsbDpcIm5vbmVcIiwgXCJzdHJva2Utb3BhY2l0eVwiOiAwLCBcImZpbGwtb3BhY2l0eVwiOiAwLCAnY2xhc3MnOiByZW5kZXJlci5jb250cm9sbGVyLmNsYXNzZXMuZ2VuZXJhdGUoY2xhc3NOYW1lKSwgJ2RhdGEtdmVydGljYWwnOiB5IH0pO1xuLy8gfVxuXG5mdW5jdGlvbiBib3hBbGxFbGVtZW50cyhyZW5kZXJlciwgdm9pY2VzLCB3aGljaCkge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHdoaWNoLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGNoaWxkcmVuID0gdm9pY2VzW3doaWNoW2ldXS5jaGlsZHJlbjtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNoaWxkcmVuLmxlbmd0aDsgaisrKSB7XG5cdFx0XHR2YXIgZWxlbSA9IGNoaWxkcmVuW2pdO1xuXHRcdFx0dmFyIGNvb3JkcyA9IGVsZW0uZ2V0Rml4ZWRDb29yZHMoKTtcblx0XHRcdGlmIChlbGVtLmludmlzaWJsZSB8fCBjb29yZHMudCA9PT0gdW5kZWZpbmVkIHx8IGNvb3Jkcy5iID09PSB1bmRlZmluZWQpXG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0dmFyIGhlaWdodCA9IChjb29yZHMudCAtIGNvb3Jkcy5iKSAqIHNwYWNpbmcuU1RFUDtcblx0XHRcdHByaW50RGVidWdCb3gocmVuZGVyZXIsXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR4OiBjb29yZHMueCxcblx0XHRcdFx0XHR5OiByZW5kZXJlci5jYWxjWShjb29yZHMudCksXG5cdFx0XHRcdFx0d2lkdGg6IGNvb3Jkcy53LFxuXHRcdFx0XHRcdGhlaWdodDogaGVpZ2h0LFxuXHRcdFx0XHRcdGZpbGw6IFwiIzg4ZTg4OFwiLFxuXHRcdFx0XHRcdFwiZmlsbC1vcGFjaXR5XCI6IDAuNCxcblx0XHRcdFx0XHRzdHJva2U6IFwiIzRhYTkzZFwiLFxuXHRcdFx0XHRcdFwic3Ryb2tlLW9wYWNpdHlcIjogMC44XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRmb3IgKHZhciBrID0gMDsgayA8IGVsZW0uY2hpbGRyZW4ubGVuZ3RoOyBrKyspIHtcblx0XHRcdFx0dmFyIHJlbEVsZW0gPSBlbGVtLmNoaWxkcmVuW2tdO1xuXHRcdFx0XHR2YXIgY2hvcmQgPSByZWxFbGVtLmdldENob3JkRGltKCk7XG5cdFx0XHRcdGlmIChjaG9yZCkge1xuXHRcdFx0XHRcdHZhciB5ID0gcmVuZGVyZXIuY2FsY1kocmVsRWxlbS5waXRjaCk7XG5cdFx0XHRcdFx0eSArPSByZWxFbGVtLmRpbS5mb250LnNpemUgKiByZWxFbGVtLmdldExhbmUoKTtcblx0XHRcdFx0XHRwcmludERlYnVnQm94KHJlbmRlcmVyLFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHR4OiBjaG9yZC5sZWZ0LFxuXHRcdFx0XHRcdFx0XHR5OiB5LFxuXHRcdFx0XHRcdFx0XHR3aWR0aDogY2hvcmQucmlnaHQgLSBjaG9yZC5sZWZ0LFxuXHRcdFx0XHRcdFx0XHRoZWlnaHQ6IHJlbEVsZW0uZGltLmZvbnQuc2l6ZSxcblx0XHRcdFx0XHRcdFx0ZmlsbDogXCJub25lXCIsXG5cdFx0XHRcdFx0XHRcdHN0cm9rZTogXCIjNGFhOTNkXCIsXG5cdFx0XHRcdFx0XHRcdFwic3Ryb2tlLW9wYWNpdHlcIjogMC44XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRyYXdTdGFmZkdyb3VwO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/staff-group.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/staff-line.js":
/*!*********************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/staff-line.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var printLine = __webpack_require__(/*! ./print-line */ \"(ssr)/./node_modules/abcjs/src/write/draw/print-line.js\");\n\nfunction printStaffLine(renderer, x1, x2, pitch, klass, name, dy) {\n\tvar y = renderer.calcY(pitch);\n\treturn printLine(renderer, x1, x2, y, klass, name, dy);\n}\n\nmodule.exports = printStaffLine;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvc3RhZmYtbGluZS5qcyIsIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0IsbUJBQU8sQ0FBQyw2RUFBYzs7QUFFdEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvZHJhdy9zdGFmZi1saW5lLmpzPzQwYzAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHByaW50TGluZSA9IHJlcXVpcmUoJy4vcHJpbnQtbGluZScpO1xuXG5mdW5jdGlvbiBwcmludFN0YWZmTGluZShyZW5kZXJlciwgeDEsIHgyLCBwaXRjaCwga2xhc3MsIG5hbWUsIGR5KSB7XG5cdHZhciB5ID0gcmVuZGVyZXIuY2FsY1kocGl0Y2gpO1xuXHRyZXR1cm4gcHJpbnRMaW5lKHJlbmRlcmVyLCB4MSwgeDIsIHksIGtsYXNzLCBuYW1lLCBkeSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcHJpbnRTdGFmZkxpbmU7XG5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/staff-line.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/staff.js":
/*!****************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/staff.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var printStaffLine = __webpack_require__(/*! ./staff-line */ \"(ssr)/./node_modules/abcjs/src/write/draw/staff-line.js\");\n\nfunction printStaff(renderer, startx, endx, numLines, linePitch, dy) {\n\tvar klass = \"abcjs-top-line\";\n\tvar pitch = 2;\n\tif (linePitch) {\n\t\tpitch = linePitch;\n\t}\n\trenderer.paper.openGroup({ prepend: true, klass: renderer.controller.classes.generate(\"abcjs-staff\") });\n\t// If there is one line, it is the B line. Otherwise, the bottom line is the E line.\n\tvar firstYLine = 0;\n\tvar lastYLine = 0;\n\tif (numLines === 1) {\n\t\tprintStaffLine(renderer, startx, endx, 6, klass, null, dy + renderer.lineThickness);\n\t\tfirstYLine = renderer.calcY(10);\n\t\tlastYLine = renderer.calcY(2);\n\t} else {\n\n\t\tfor (var i = numLines - 1; i >= 0; i--) {\n\t\t\tvar curpitch = (i + 1) * pitch;\n\t\t\tlastYLine = renderer.calcY(curpitch);\n\t\t\tif (firstYLine === 0) {\n\t\t\t\tfirstYLine = lastYLine;\n\t\t\t}\n\t\t\tprintStaffLine(renderer, startx, endx, curpitch, klass, null, dy + renderer.lineThickness);\n\t\t\tklass = undefined;\n\t\t}\n\t}\n\trenderer.paper.closeGroup();\n\treturn [firstYLine, lastYLine];\n}\n\nmodule.exports = printStaff;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvc3RhZmYuanMiLCJtYXBwaW5ncyI6IkFBQUEscUJBQXFCLG1CQUFPLENBQUMsNkVBQWM7O0FBRTNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwyRUFBMkU7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVILDZCQUE2QixRQUFRO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9kcmF3L3N0YWZmLmpzPzUzYjEiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHByaW50U3RhZmZMaW5lID0gcmVxdWlyZSgnLi9zdGFmZi1saW5lJyk7XG5cbmZ1bmN0aW9uIHByaW50U3RhZmYocmVuZGVyZXIsIHN0YXJ0eCwgZW5keCwgbnVtTGluZXMsIGxpbmVQaXRjaCwgZHkpIHtcblx0dmFyIGtsYXNzID0gXCJhYmNqcy10b3AtbGluZVwiO1xuXHR2YXIgcGl0Y2ggPSAyO1xuXHRpZiAobGluZVBpdGNoKSB7XG5cdFx0cGl0Y2ggPSBsaW5lUGl0Y2g7XG5cdH1cblx0cmVuZGVyZXIucGFwZXIub3Blbkdyb3VwKHsgcHJlcGVuZDogdHJ1ZSwga2xhc3M6IHJlbmRlcmVyLmNvbnRyb2xsZXIuY2xhc3Nlcy5nZW5lcmF0ZShcImFiY2pzLXN0YWZmXCIpIH0pO1xuXHQvLyBJZiB0aGVyZSBpcyBvbmUgbGluZSwgaXQgaXMgdGhlIEIgbGluZS4gT3RoZXJ3aXNlLCB0aGUgYm90dG9tIGxpbmUgaXMgdGhlIEUgbGluZS5cblx0dmFyIGZpcnN0WUxpbmUgPSAwO1xuXHR2YXIgbGFzdFlMaW5lID0gMDtcblx0aWYgKG51bUxpbmVzID09PSAxKSB7XG5cdFx0cHJpbnRTdGFmZkxpbmUocmVuZGVyZXIsIHN0YXJ0eCwgZW5keCwgNiwga2xhc3MsIG51bGwsIGR5ICsgcmVuZGVyZXIubGluZVRoaWNrbmVzcyk7XG5cdFx0Zmlyc3RZTGluZSA9IHJlbmRlcmVyLmNhbGNZKDEwKTtcblx0XHRsYXN0WUxpbmUgPSByZW5kZXJlci5jYWxjWSgyKTtcblx0fSBlbHNlIHtcblxuXHRcdGZvciAodmFyIGkgPSBudW1MaW5lcyAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHR2YXIgY3VycGl0Y2ggPSAoaSArIDEpICogcGl0Y2g7XG5cdFx0XHRsYXN0WUxpbmUgPSByZW5kZXJlci5jYWxjWShjdXJwaXRjaCk7XG5cdFx0XHRpZiAoZmlyc3RZTGluZSA9PT0gMCkge1xuXHRcdFx0XHRmaXJzdFlMaW5lID0gbGFzdFlMaW5lO1xuXHRcdFx0fVxuXHRcdFx0cHJpbnRTdGFmZkxpbmUocmVuZGVyZXIsIHN0YXJ0eCwgZW5keCwgY3VycGl0Y2gsIGtsYXNzLCBudWxsLCBkeSArIHJlbmRlcmVyLmxpbmVUaGlja25lc3MpO1xuXHRcdFx0a2xhc3MgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHR9XG5cdHJlbmRlcmVyLnBhcGVyLmNsb3NlR3JvdXAoKTtcblx0cmV0dXJuIFtmaXJzdFlMaW5lLCBsYXN0WUxpbmVdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHByaW50U3RhZmY7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/staff.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/tempo.js":
/*!****************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/tempo.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var drawRelativeElement = __webpack_require__(/*! ./relative */ \"(ssr)/./node_modules/abcjs/src/write/draw/relative.js\");\nvar renderText = __webpack_require__(/*! ./text */ \"(ssr)/./node_modules/abcjs/src/write/draw/text.js\");\n\nfunction drawTempo(renderer, params) {\n\tvar x = params.x;\n\tif (params.pitch === undefined)\n\t\twindow.console.error(\"Tempo Element y-coordinate not set.\");\n\n\t//var tempoGroup;\n\tparams.tempo.el_type = \"tempo\";\n\t//\trenderer.wrapInAbsElem(params.tempo, \"abcjs-tempo\", function () {\n\t//renderer.paper.openGroup({klass: renderer.controller.classes.generate(\"tempo wha\")});\n\t// The text is aligned with extra room for descenders but numbers look like they are a little too high, so bump it a little.\n\tvar descenderHeight = 2;\n\tvar y = renderer.calcY(params.pitch) + 2;\n\tvar text;\n\tvar size;\n\tif (params.tempo.preString) {\n\t\ttext = renderText(renderer, { x: x, y: y, text: params.tempo.preString, type: 'tempofont', klass: 'abcjs-tempo', anchor: \"start\", noClass: true, name: \"pre\" }, true);\n\t\tsize = renderer.controller.getTextSize.calc(params.tempo.preString, 'tempofont', 'tempo', text);\n\t\tvar preWidth = size.width;\n\t\tvar charWidth = preWidth / params.tempo.preString.length; // Just get some average number to increase the spacing.\n\t\tx += preWidth + charWidth;\n\t}\n\tif (params.note) {\n\t\tparams.note.setX(x);\n\t\tfor (var i = 0; i < params.note.children.length; i++)\n\t\t\tdrawRelativeElement(renderer, params.note.children[i], x);\n\t\tx += (params.note.w + 5);\n\t\tvar str = \"= \" + params.tempo.bpm;\n\t\ttext = renderText(renderer, { x: x, y: y, text: str, type: 'tempofont', klass: 'abcjs-tempo', anchor: \"start\", noClass: true, name: \"beats\" });\n\t\tsize = renderer.controller.getTextSize.calc(str, 'tempofont', 'tempo', text);\n\t\tvar postWidth = size.width;\n\t\tvar charWidth2 = postWidth / str.length; // Just get some average number to increase the spacing.\n\t\tx += postWidth + charWidth2;\n\t}\n\tif (params.tempo.postString) {\n\t\trenderText(renderer, { x: x, y: y, text: params.tempo.postString, type: 'tempofont', klass: 'abcjs-tempo', anchor: \"start\", noClass: true, name: \"post\" }, true);\n\t}\n\t//tempoGroup = renderer.paper.closeGroup();\n\t//\t});\n\t//return [tempoGroup];\n}\n\nmodule.exports = drawTempo;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvdGVtcG8uanMiLCJtYXBwaW5ncyI6IkFBQUEsMEJBQTBCLG1CQUFPLENBQUMseUVBQVk7QUFDOUMsaUJBQWlCLG1CQUFPLENBQUMsaUVBQVE7O0FBRWpDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix5REFBeUQ7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGdJQUFnSTtBQUNoSztBQUNBO0FBQ0EsNERBQTREO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlDQUFpQztBQUNuRDtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsK0dBQStHO0FBQy9JO0FBQ0E7QUFDQSwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGtJQUFrSTtBQUMzSjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvZHJhdy90ZW1wby5qcz9lMzhmIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBkcmF3UmVsYXRpdmVFbGVtZW50ID0gcmVxdWlyZSgnLi9yZWxhdGl2ZScpO1xudmFyIHJlbmRlclRleHQgPSByZXF1aXJlKCcuL3RleHQnKTtcblxuZnVuY3Rpb24gZHJhd1RlbXBvKHJlbmRlcmVyLCBwYXJhbXMpIHtcblx0dmFyIHggPSBwYXJhbXMueDtcblx0aWYgKHBhcmFtcy5waXRjaCA9PT0gdW5kZWZpbmVkKVxuXHRcdHdpbmRvdy5jb25zb2xlLmVycm9yKFwiVGVtcG8gRWxlbWVudCB5LWNvb3JkaW5hdGUgbm90IHNldC5cIik7XG5cblx0Ly92YXIgdGVtcG9Hcm91cDtcblx0cGFyYW1zLnRlbXBvLmVsX3R5cGUgPSBcInRlbXBvXCI7XG5cdC8vXHRyZW5kZXJlci53cmFwSW5BYnNFbGVtKHBhcmFtcy50ZW1wbywgXCJhYmNqcy10ZW1wb1wiLCBmdW5jdGlvbiAoKSB7XG5cdC8vcmVuZGVyZXIucGFwZXIub3Blbkdyb3VwKHtrbGFzczogcmVuZGVyZXIuY29udHJvbGxlci5jbGFzc2VzLmdlbmVyYXRlKFwidGVtcG8gd2hhXCIpfSk7XG5cdC8vIFRoZSB0ZXh0IGlzIGFsaWduZWQgd2l0aCBleHRyYSByb29tIGZvciBkZXNjZW5kZXJzIGJ1dCBudW1iZXJzIGxvb2sgbGlrZSB0aGV5IGFyZSBhIGxpdHRsZSB0b28gaGlnaCwgc28gYnVtcCBpdCBhIGxpdHRsZS5cblx0dmFyIGRlc2NlbmRlckhlaWdodCA9IDI7XG5cdHZhciB5ID0gcmVuZGVyZXIuY2FsY1kocGFyYW1zLnBpdGNoKSArIDI7XG5cdHZhciB0ZXh0O1xuXHR2YXIgc2l6ZTtcblx0aWYgKHBhcmFtcy50ZW1wby5wcmVTdHJpbmcpIHtcblx0XHR0ZXh0ID0gcmVuZGVyVGV4dChyZW5kZXJlciwgeyB4OiB4LCB5OiB5LCB0ZXh0OiBwYXJhbXMudGVtcG8ucHJlU3RyaW5nLCB0eXBlOiAndGVtcG9mb250Jywga2xhc3M6ICdhYmNqcy10ZW1wbycsIGFuY2hvcjogXCJzdGFydFwiLCBub0NsYXNzOiB0cnVlLCBuYW1lOiBcInByZVwiIH0sIHRydWUpO1xuXHRcdHNpemUgPSByZW5kZXJlci5jb250cm9sbGVyLmdldFRleHRTaXplLmNhbGMocGFyYW1zLnRlbXBvLnByZVN0cmluZywgJ3RlbXBvZm9udCcsICd0ZW1wbycsIHRleHQpO1xuXHRcdHZhciBwcmVXaWR0aCA9IHNpemUud2lkdGg7XG5cdFx0dmFyIGNoYXJXaWR0aCA9IHByZVdpZHRoIC8gcGFyYW1zLnRlbXBvLnByZVN0cmluZy5sZW5ndGg7IC8vIEp1c3QgZ2V0IHNvbWUgYXZlcmFnZSBudW1iZXIgdG8gaW5jcmVhc2UgdGhlIHNwYWNpbmcuXG5cdFx0eCArPSBwcmVXaWR0aCArIGNoYXJXaWR0aDtcblx0fVxuXHRpZiAocGFyYW1zLm5vdGUpIHtcblx0XHRwYXJhbXMubm90ZS5zZXRYKHgpO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYW1zLm5vdGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspXG5cdFx0XHRkcmF3UmVsYXRpdmVFbGVtZW50KHJlbmRlcmVyLCBwYXJhbXMubm90ZS5jaGlsZHJlbltpXSwgeCk7XG5cdFx0eCArPSAocGFyYW1zLm5vdGUudyArIDUpO1xuXHRcdHZhciBzdHIgPSBcIj0gXCIgKyBwYXJhbXMudGVtcG8uYnBtO1xuXHRcdHRleHQgPSByZW5kZXJUZXh0KHJlbmRlcmVyLCB7IHg6IHgsIHk6IHksIHRleHQ6IHN0ciwgdHlwZTogJ3RlbXBvZm9udCcsIGtsYXNzOiAnYWJjanMtdGVtcG8nLCBhbmNob3I6IFwic3RhcnRcIiwgbm9DbGFzczogdHJ1ZSwgbmFtZTogXCJiZWF0c1wiIH0pO1xuXHRcdHNpemUgPSByZW5kZXJlci5jb250cm9sbGVyLmdldFRleHRTaXplLmNhbGMoc3RyLCAndGVtcG9mb250JywgJ3RlbXBvJywgdGV4dCk7XG5cdFx0dmFyIHBvc3RXaWR0aCA9IHNpemUud2lkdGg7XG5cdFx0dmFyIGNoYXJXaWR0aDIgPSBwb3N0V2lkdGggLyBzdHIubGVuZ3RoOyAvLyBKdXN0IGdldCBzb21lIGF2ZXJhZ2UgbnVtYmVyIHRvIGluY3JlYXNlIHRoZSBzcGFjaW5nLlxuXHRcdHggKz0gcG9zdFdpZHRoICsgY2hhcldpZHRoMjtcblx0fVxuXHRpZiAocGFyYW1zLnRlbXBvLnBvc3RTdHJpbmcpIHtcblx0XHRyZW5kZXJUZXh0KHJlbmRlcmVyLCB7IHg6IHgsIHk6IHksIHRleHQ6IHBhcmFtcy50ZW1wby5wb3N0U3RyaW5nLCB0eXBlOiAndGVtcG9mb250Jywga2xhc3M6ICdhYmNqcy10ZW1wbycsIGFuY2hvcjogXCJzdGFydFwiLCBub0NsYXNzOiB0cnVlLCBuYW1lOiBcInBvc3RcIiB9LCB0cnVlKTtcblx0fVxuXHQvL3RlbXBvR3JvdXAgPSByZW5kZXJlci5wYXBlci5jbG9zZUdyb3VwKCk7XG5cdC8vXHR9KTtcblx0Ly9yZXR1cm4gW3RlbXBvR3JvdXBdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRyYXdUZW1wbztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/tempo.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/text.js":
/*!***************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/text.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var roundNumber = __webpack_require__(/*! ./round-number */ \"(ssr)/./node_modules/abcjs/src/write/draw/round-number.js\");\n\nfunction renderText(renderer, params, alreadyInGroup) {\n\tvar y = params.y;\n\n\t// TODO-PER: Probably need to merge the regular text and rich text better. At the least, rich text loses the font box.\n\tif (params.phrases) {\n\t\t//richTextLine = function (phrases, x, y, klass, anchor, target)\n\t\tvar elem = renderer.paper.richTextLine(params.phrases, params.x, params.y, params.klass, params.anchor);\n\t\treturn elem;\n\t}\n\n\tif (params.lane) {\n\t\tvar laneMargin = params.dim.font.size * 0.25;\n\t\ty += (params.dim.font.size + laneMargin) * params.lane;\n\t}\n\n\tvar hash;\n\tif (params.dim) {\n\t\thash = params.dim;\n\t\thash.attr.class = params.klass;\n\t} else\n\t\thash = renderer.controller.getFontAndAttr.calc(params.type, params.klass);\n\tif (params.anchor)\n\t\thash.attr[\"text-anchor\"] = params.anchor;\n\tif (params['dominant-baseline'])\n\t\thash.attr[\"dominant-baseline\"] = params['dominant-baseline'];\n\thash.attr.x = params.x;\n\thash.attr.y = y;\n\tif (!params.centerVertically)\n\t\thash.attr.y += hash.font.size;\n\tif (params.type === 'debugfont') {\n\t\tconsole.log(\"Debug msg: \" + params.text);\n\t\thash.attr.stroke = \"#ff0000\";\n\t}\n\tif (params.cursor) {\n\t\thash.attr.cursor = params.cursor;\n\t}\n\n\t// MAE 9 May 2025 for free text blocks\n\tvar text;\n\tif (params.name == \"free-text\"){\n\t\ttext = params.text.replace(/^[ \\t]*\\n/gm, ' \\n');\n\t}\n\telse{\n\t\ttext = params.text.replace(/\\n\\n/g, \"\\n \\n\");\n\t}\n\ttext = text.replace(/^\\n/, \"\\xA0\\n\");\n\n\tif (hash.font.box) {\n\t\tif (!alreadyInGroup)\n\t\t\trenderer.paper.openGroup({ klass: hash.attr['class'], fill: renderer.foregroundColor, \"data-name\": params.name });\n\t\tif (hash.attr[\"text-anchor\"] === \"end\") {\n\t\t\thash.attr.x -= hash.font.padding;\n\t\t} else if (hash.attr[\"text-anchor\"] === \"start\") {\n\t\t\thash.attr.x += hash.font.padding;\n\t\t}\n\t\thash.attr.y += hash.font.padding;\n\t\tdelete hash.attr['class'];\n\t}\n\tif (params.noClass)\n\t\tdelete hash.attr['class'];\n\thash.attr.x = roundNumber(hash.attr.x);\n\thash.attr.y = roundNumber(hash.attr.y);\n\tif (params.name)\n\t\thash.attr[\"data-name\"] = params.name;\n\tvar elem = renderer.paper.text(text, hash.attr);\n\tif (hash.font.box) {\n\t\tvar size = elem.getBBox();\n\n\t\tvar delta = 0;\n\t\tif (hash.attr[\"text-anchor\"] === \"middle\") {\n\t\t\tdelta = size.width / 2 + hash.font.padding;\n\t\t} else if (hash.attr[\"text-anchor\"] === \"end\") {\n\t\t\tdelta = size.width + hash.font.padding * 2;\n\t\t}\n\t\tvar deltaY = 0;\n\t\tif (params.centerVertically) {\n\t\t\tdeltaY = size.height - hash.font.padding;\n\t\t}\n\t\trenderer.paper.rect({ \"data-name\": \"box\", x: Math.round(params.x - delta), y: Math.round(y - deltaY), width: Math.round(size.width + hash.font.padding * 2), height: Math.round(size.height + hash.font.padding * 2) });\n\t\tif (!alreadyInGroup)\n\t\t\telem = renderer.paper.closeGroup();\n\t}\n\treturn elem;\n}\n\nmodule.exports = renderText;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvdGV4dC5qcyIsIm1hcHBpbmdzIjoiQUFBQSxrQkFBa0IsbUJBQU8sQ0FBQyxpRkFBZ0I7O0FBRTFDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsOEJBQThCLHFGQUFxRjtBQUNuSDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnTUFBZ007QUFDeE47QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9kcmF3L3RleHQuanM/NGIwNCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcm91bmROdW1iZXIgPSByZXF1aXJlKFwiLi9yb3VuZC1udW1iZXJcIik7XG5cbmZ1bmN0aW9uIHJlbmRlclRleHQocmVuZGVyZXIsIHBhcmFtcywgYWxyZWFkeUluR3JvdXApIHtcblx0dmFyIHkgPSBwYXJhbXMueTtcblxuXHQvLyBUT0RPLVBFUjogUHJvYmFibHkgbmVlZCB0byBtZXJnZSB0aGUgcmVndWxhciB0ZXh0IGFuZCByaWNoIHRleHQgYmV0dGVyLiBBdCB0aGUgbGVhc3QsIHJpY2ggdGV4dCBsb3NlcyB0aGUgZm9udCBib3guXG5cdGlmIChwYXJhbXMucGhyYXNlcykge1xuXHRcdC8vcmljaFRleHRMaW5lID0gZnVuY3Rpb24gKHBocmFzZXMsIHgsIHksIGtsYXNzLCBhbmNob3IsIHRhcmdldClcblx0XHR2YXIgZWxlbSA9IHJlbmRlcmVyLnBhcGVyLnJpY2hUZXh0TGluZShwYXJhbXMucGhyYXNlcywgcGFyYW1zLngsIHBhcmFtcy55LCBwYXJhbXMua2xhc3MsIHBhcmFtcy5hbmNob3IpO1xuXHRcdHJldHVybiBlbGVtO1xuXHR9XG5cblx0aWYgKHBhcmFtcy5sYW5lKSB7XG5cdFx0dmFyIGxhbmVNYXJnaW4gPSBwYXJhbXMuZGltLmZvbnQuc2l6ZSAqIDAuMjU7XG5cdFx0eSArPSAocGFyYW1zLmRpbS5mb250LnNpemUgKyBsYW5lTWFyZ2luKSAqIHBhcmFtcy5sYW5lO1xuXHR9XG5cblx0dmFyIGhhc2g7XG5cdGlmIChwYXJhbXMuZGltKSB7XG5cdFx0aGFzaCA9IHBhcmFtcy5kaW07XG5cdFx0aGFzaC5hdHRyLmNsYXNzID0gcGFyYW1zLmtsYXNzO1xuXHR9IGVsc2Vcblx0XHRoYXNoID0gcmVuZGVyZXIuY29udHJvbGxlci5nZXRGb250QW5kQXR0ci5jYWxjKHBhcmFtcy50eXBlLCBwYXJhbXMua2xhc3MpO1xuXHRpZiAocGFyYW1zLmFuY2hvcilcblx0XHRoYXNoLmF0dHJbXCJ0ZXh0LWFuY2hvclwiXSA9IHBhcmFtcy5hbmNob3I7XG5cdGlmIChwYXJhbXNbJ2RvbWluYW50LWJhc2VsaW5lJ10pXG5cdFx0aGFzaC5hdHRyW1wiZG9taW5hbnQtYmFzZWxpbmVcIl0gPSBwYXJhbXNbJ2RvbWluYW50LWJhc2VsaW5lJ107XG5cdGhhc2guYXR0ci54ID0gcGFyYW1zLng7XG5cdGhhc2guYXR0ci55ID0geTtcblx0aWYgKCFwYXJhbXMuY2VudGVyVmVydGljYWxseSlcblx0XHRoYXNoLmF0dHIueSArPSBoYXNoLmZvbnQuc2l6ZTtcblx0aWYgKHBhcmFtcy50eXBlID09PSAnZGVidWdmb250Jykge1xuXHRcdGNvbnNvbGUubG9nKFwiRGVidWcgbXNnOiBcIiArIHBhcmFtcy50ZXh0KTtcblx0XHRoYXNoLmF0dHIuc3Ryb2tlID0gXCIjZmYwMDAwXCI7XG5cdH1cblx0aWYgKHBhcmFtcy5jdXJzb3IpIHtcblx0XHRoYXNoLmF0dHIuY3Vyc29yID0gcGFyYW1zLmN1cnNvcjtcblx0fVxuXG5cdC8vIE1BRSA5IE1heSAyMDI1IGZvciBmcmVlIHRleHQgYmxvY2tzXG5cdHZhciB0ZXh0O1xuXHRpZiAocGFyYW1zLm5hbWUgPT0gXCJmcmVlLXRleHRcIil7XG5cdFx0dGV4dCA9IHBhcmFtcy50ZXh0LnJlcGxhY2UoL15bIFxcdF0qXFxuL2dtLCAnIFxcbicpO1xuXHR9XG5cdGVsc2V7XG5cdFx0dGV4dCA9IHBhcmFtcy50ZXh0LnJlcGxhY2UoL1xcblxcbi9nLCBcIlxcbiBcXG5cIik7XG5cdH1cblx0dGV4dCA9IHRleHQucmVwbGFjZSgvXlxcbi8sIFwiXFx4QTBcXG5cIik7XG5cblx0aWYgKGhhc2guZm9udC5ib3gpIHtcblx0XHRpZiAoIWFscmVhZHlJbkdyb3VwKVxuXHRcdFx0cmVuZGVyZXIucGFwZXIub3Blbkdyb3VwKHsga2xhc3M6IGhhc2guYXR0clsnY2xhc3MnXSwgZmlsbDogcmVuZGVyZXIuZm9yZWdyb3VuZENvbG9yLCBcImRhdGEtbmFtZVwiOiBwYXJhbXMubmFtZSB9KTtcblx0XHRpZiAoaGFzaC5hdHRyW1widGV4dC1hbmNob3JcIl0gPT09IFwiZW5kXCIpIHtcblx0XHRcdGhhc2guYXR0ci54IC09IGhhc2guZm9udC5wYWRkaW5nO1xuXHRcdH0gZWxzZSBpZiAoaGFzaC5hdHRyW1widGV4dC1hbmNob3JcIl0gPT09IFwic3RhcnRcIikge1xuXHRcdFx0aGFzaC5hdHRyLnggKz0gaGFzaC5mb250LnBhZGRpbmc7XG5cdFx0fVxuXHRcdGhhc2guYXR0ci55ICs9IGhhc2guZm9udC5wYWRkaW5nO1xuXHRcdGRlbGV0ZSBoYXNoLmF0dHJbJ2NsYXNzJ107XG5cdH1cblx0aWYgKHBhcmFtcy5ub0NsYXNzKVxuXHRcdGRlbGV0ZSBoYXNoLmF0dHJbJ2NsYXNzJ107XG5cdGhhc2guYXR0ci54ID0gcm91bmROdW1iZXIoaGFzaC5hdHRyLngpO1xuXHRoYXNoLmF0dHIueSA9IHJvdW5kTnVtYmVyKGhhc2guYXR0ci55KTtcblx0aWYgKHBhcmFtcy5uYW1lKVxuXHRcdGhhc2guYXR0cltcImRhdGEtbmFtZVwiXSA9IHBhcmFtcy5uYW1lO1xuXHR2YXIgZWxlbSA9IHJlbmRlcmVyLnBhcGVyLnRleHQodGV4dCwgaGFzaC5hdHRyKTtcblx0aWYgKGhhc2guZm9udC5ib3gpIHtcblx0XHR2YXIgc2l6ZSA9IGVsZW0uZ2V0QkJveCgpO1xuXG5cdFx0dmFyIGRlbHRhID0gMDtcblx0XHRpZiAoaGFzaC5hdHRyW1widGV4dC1hbmNob3JcIl0gPT09IFwibWlkZGxlXCIpIHtcblx0XHRcdGRlbHRhID0gc2l6ZS53aWR0aCAvIDIgKyBoYXNoLmZvbnQucGFkZGluZztcblx0XHR9IGVsc2UgaWYgKGhhc2guYXR0cltcInRleHQtYW5jaG9yXCJdID09PSBcImVuZFwiKSB7XG5cdFx0XHRkZWx0YSA9IHNpemUud2lkdGggKyBoYXNoLmZvbnQucGFkZGluZyAqIDI7XG5cdFx0fVxuXHRcdHZhciBkZWx0YVkgPSAwO1xuXHRcdGlmIChwYXJhbXMuY2VudGVyVmVydGljYWxseSkge1xuXHRcdFx0ZGVsdGFZID0gc2l6ZS5oZWlnaHQgLSBoYXNoLmZvbnQucGFkZGluZztcblx0XHR9XG5cdFx0cmVuZGVyZXIucGFwZXIucmVjdCh7IFwiZGF0YS1uYW1lXCI6IFwiYm94XCIsIHg6IE1hdGgucm91bmQocGFyYW1zLnggLSBkZWx0YSksIHk6IE1hdGgucm91bmQoeSAtIGRlbHRhWSksIHdpZHRoOiBNYXRoLnJvdW5kKHNpemUud2lkdGggKyBoYXNoLmZvbnQucGFkZGluZyAqIDIpLCBoZWlnaHQ6IE1hdGgucm91bmQoc2l6ZS5oZWlnaHQgKyBoYXNoLmZvbnQucGFkZGluZyAqIDIpIH0pO1xuXHRcdGlmICghYWxyZWFkeUluR3JvdXApXG5cdFx0XHRlbGVtID0gcmVuZGVyZXIucGFwZXIuY2xvc2VHcm91cCgpO1xuXHR9XG5cdHJldHVybiBlbGVtO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlbmRlclRleHQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/text.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/tie.js":
/*!**************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/tie.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var sprintf = __webpack_require__(/*! ./sprintf */ \"(ssr)/./node_modules/abcjs/src/write/draw/sprintf.js\");\nvar roundNumber = __webpack_require__(/*! ./round-number */ \"(ssr)/./node_modules/abcjs/src/write/draw/round-number.js\");\n\nfunction drawTie(renderer, params, linestartx, lineendx, selectables) {\n\tlayout(params, linestartx, lineendx);\n\n\tvar klass = '';\n\tif (params.anchor1) {\n\t\tklass += 'abcjs-start-m' + params.anchor1.parent.counters.measure + '-n' + params.anchor1.parent.counters.note;\n\t} else\n\t\tklass += 'abcjs-start-edge';\n\tif (params.anchor2) {\n\t\tklass += ' abcjs-end-m' + params.anchor2.parent.counters.measure + '-n' + params.anchor2.parent.counters.note;\n\t} else\n\t\tklass += ' abcjs-end-edge';\n\tif (params.hint)\n\t\tklass = \"abcjs-hint\";\n\tvar fudgeY = params.fixedY ? 1.5 : 0; // TODO-PER: This just compensates for drawArc, which contains too much knowledge of ties and slurs.\n\tvar el = drawArc(renderer, params.startX, params.endX, params.startY + fudgeY, params.endY + fudgeY, params.above, klass, params.isTie, params.dotted);\n\tvar startChar = -1\n\t// This gets the start and end points of the contents of the slur. We assume that the parenthesis are just to the outside of that.\n\tif (params.anchor1 && !params.isTie)\n\t\tstartChar = params.anchor1.parent.abcelem.startChar - 1\n\tvar endChar = -1\n\tif (params.anchor2 && !params.isTie)\n\t\tendChar = params.anchor2.parent.abcelem.endChar + 1\n\n\tselectables.wrapSvgEl({ el_type: \"slur\", startChar: startChar, endChar: endChar }, el);\n\treturn [el];\n}\n\n// TODO-PER: I think params part should have been done earlier in the layout pass.\nvar layout = function (params, lineStartX, lineEndX) {\n\t// We now have all of the input variables set, so we can figure out the start and ending x,y coordinates, and finalize the direction of the arc.\n\n\t// Ties and slurs are handled a little differently, so do calculations for them separately.\n\tif (!params.anchor1 || !params.anchor2)\n\t\tparams.isTie = true; // if the slur goes off the end of the line, then draw it like a tie\n\telse if (params.anchor1.pitch === params.anchor2.pitch && params.internalNotes.length === 0)\n\t\tparams.isTie = true;\n\telse\n\t\tparams.isTie = false;\n\n\tif (params.isTie) {\n\t\tparams.calcTieDirection();\n\t\tparams.calcX(lineStartX, lineEndX);\n\t\tparams.calcTieY();\n\n\t} else {\n\t\tparams.calcSlurDirection();\n\t\tparams.calcX(lineStartX, lineEndX);\n\t\tparams.calcSlurY();\n\t}\n\tparams.avoidCollisionAbove();\n};\n\nvar drawArc = function (renderer, x1, x2, pitch1, pitch2, above, klass, isTie, dotted) {\n\t// If it is a tie vs. a slur, draw it shallower.\n\tvar spacing = isTie ? 1.2 : 1.5;\n\n\tx1 = roundNumber(x1 + 6);\n\tx2 = roundNumber(x2 + 4);\n\tpitch1 = pitch1 + ((above) ? spacing : -spacing);\n\tpitch2 = pitch2 + ((above) ? spacing : -spacing);\n\tvar y1 = roundNumber(renderer.calcY(pitch1));\n\tvar y2 = roundNumber(renderer.calcY(pitch2));\n\n\t//unit direction vector\n\tvar dx = x2 - x1;\n\tvar dy = y2 - y1;\n\tvar norm = Math.sqrt(dx * dx + dy * dy);\n\tvar ux = dx / norm;\n\tvar uy = dy / norm;\n\n\tvar flatten = norm / 3.5;\n\tvar maxFlatten = isTie ? 10 : 25;  // If it is a tie vs. a slur, draw it shallower.\n\tvar curve = ((above) ? -1 : 1) * Math.min(maxFlatten, Math.max(4, flatten));\n\n\tvar controlx1 = roundNumber(x1 + flatten * ux - curve * uy);\n\tvar controly1 = roundNumber(y1 + flatten * uy + curve * ux);\n\tvar controlx2 = roundNumber(x2 - flatten * ux - curve * uy);\n\tvar controly2 = roundNumber(y2 - flatten * uy + curve * ux);\n\tvar thickness = 2;\n\tif (klass)\n\t\tklass += ' slur';\n\telse\n\t\tklass = 'slur';\n\tklass += isTie ? ' tie' : ' legato';\n\tvar ret;\n\tif (dotted) {\n\t\tklass += ' dotted';\n\t\tvar pathString2 = sprintf(\"M %f %f C %f %f %f %f %f %f\", x1, y1,\n\t\t\tcontrolx1, controly1, controlx2, controly2, x2, y2);\n\t\tret = renderer.paper.path({ path: pathString2, stroke: renderer.foregroundColor, fill: \"none\", 'stroke-dasharray': \"5 5\", 'class': renderer.controller.classes.generate(klass), \"data-name\": isTie ? \"tie\" : \"slur\" });\n\t} else {\n\t\tvar pathString = sprintf(\"M %f %f C %f %f %f %f %f %f C %f %f %f %f %f %f z\", x1, y1,\n\t\t\tcontrolx1, controly1, controlx2, controly2, x2, y2,\n\t\t\troundNumber(controlx2 - thickness * uy), roundNumber(controly2 + thickness * ux), roundNumber(controlx1 - thickness * uy), roundNumber(controly1 + thickness * ux), x1, y1);\n\t\tret = renderer.paper.path({ path: pathString, stroke: \"none\", fill: renderer.foregroundColor, 'class': renderer.controller.classes.generate(klass), \"data-name\": isTie ? \"tie\" : \"slur\" });\n\t}\n\n\treturn ret;\n};\n\nmodule.exports = drawTie;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvdGllLmpzIiwibWFwcGluZ3MiOiJBQUFBLGNBQWMsbUJBQU8sQ0FBQyx1RUFBVztBQUNqQyxrQkFBa0IsbUJBQU8sQ0FBQyxpRkFBZ0I7O0FBRTFDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx5QkFBeUIseURBQXlEO0FBQ2xGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9DQUFvQztBQUNwQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIseUxBQXlMO0FBQ3ZOLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsNkpBQTZKO0FBQzNMOztBQUVBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvZHJhdy90aWUuanM/MTdiZCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgc3ByaW50ZiA9IHJlcXVpcmUoJy4vc3ByaW50ZicpO1xudmFyIHJvdW5kTnVtYmVyID0gcmVxdWlyZShcIi4vcm91bmQtbnVtYmVyXCIpO1xuXG5mdW5jdGlvbiBkcmF3VGllKHJlbmRlcmVyLCBwYXJhbXMsIGxpbmVzdGFydHgsIGxpbmVlbmR4LCBzZWxlY3RhYmxlcykge1xuXHRsYXlvdXQocGFyYW1zLCBsaW5lc3RhcnR4LCBsaW5lZW5keCk7XG5cblx0dmFyIGtsYXNzID0gJyc7XG5cdGlmIChwYXJhbXMuYW5jaG9yMSkge1xuXHRcdGtsYXNzICs9ICdhYmNqcy1zdGFydC1tJyArIHBhcmFtcy5hbmNob3IxLnBhcmVudC5jb3VudGVycy5tZWFzdXJlICsgJy1uJyArIHBhcmFtcy5hbmNob3IxLnBhcmVudC5jb3VudGVycy5ub3RlO1xuXHR9IGVsc2Vcblx0XHRrbGFzcyArPSAnYWJjanMtc3RhcnQtZWRnZSc7XG5cdGlmIChwYXJhbXMuYW5jaG9yMikge1xuXHRcdGtsYXNzICs9ICcgYWJjanMtZW5kLW0nICsgcGFyYW1zLmFuY2hvcjIucGFyZW50LmNvdW50ZXJzLm1lYXN1cmUgKyAnLW4nICsgcGFyYW1zLmFuY2hvcjIucGFyZW50LmNvdW50ZXJzLm5vdGU7XG5cdH0gZWxzZVxuXHRcdGtsYXNzICs9ICcgYWJjanMtZW5kLWVkZ2UnO1xuXHRpZiAocGFyYW1zLmhpbnQpXG5cdFx0a2xhc3MgPSBcImFiY2pzLWhpbnRcIjtcblx0dmFyIGZ1ZGdlWSA9IHBhcmFtcy5maXhlZFkgPyAxLjUgOiAwOyAvLyBUT0RPLVBFUjogVGhpcyBqdXN0IGNvbXBlbnNhdGVzIGZvciBkcmF3QXJjLCB3aGljaCBjb250YWlucyB0b28gbXVjaCBrbm93bGVkZ2Ugb2YgdGllcyBhbmQgc2x1cnMuXG5cdHZhciBlbCA9IGRyYXdBcmMocmVuZGVyZXIsIHBhcmFtcy5zdGFydFgsIHBhcmFtcy5lbmRYLCBwYXJhbXMuc3RhcnRZICsgZnVkZ2VZLCBwYXJhbXMuZW5kWSArIGZ1ZGdlWSwgcGFyYW1zLmFib3ZlLCBrbGFzcywgcGFyYW1zLmlzVGllLCBwYXJhbXMuZG90dGVkKTtcblx0dmFyIHN0YXJ0Q2hhciA9IC0xXG5cdC8vIFRoaXMgZ2V0cyB0aGUgc3RhcnQgYW5kIGVuZCBwb2ludHMgb2YgdGhlIGNvbnRlbnRzIG9mIHRoZSBzbHVyLiBXZSBhc3N1bWUgdGhhdCB0aGUgcGFyZW50aGVzaXMgYXJlIGp1c3QgdG8gdGhlIG91dHNpZGUgb2YgdGhhdC5cblx0aWYgKHBhcmFtcy5hbmNob3IxICYmICFwYXJhbXMuaXNUaWUpXG5cdFx0c3RhcnRDaGFyID0gcGFyYW1zLmFuY2hvcjEucGFyZW50LmFiY2VsZW0uc3RhcnRDaGFyIC0gMVxuXHR2YXIgZW5kQ2hhciA9IC0xXG5cdGlmIChwYXJhbXMuYW5jaG9yMiAmJiAhcGFyYW1zLmlzVGllKVxuXHRcdGVuZENoYXIgPSBwYXJhbXMuYW5jaG9yMi5wYXJlbnQuYWJjZWxlbS5lbmRDaGFyICsgMVxuXG5cdHNlbGVjdGFibGVzLndyYXBTdmdFbCh7IGVsX3R5cGU6IFwic2x1clwiLCBzdGFydENoYXI6IHN0YXJ0Q2hhciwgZW5kQ2hhcjogZW5kQ2hhciB9LCBlbCk7XG5cdHJldHVybiBbZWxdO1xufVxuXG4vLyBUT0RPLVBFUjogSSB0aGluayBwYXJhbXMgcGFydCBzaG91bGQgaGF2ZSBiZWVuIGRvbmUgZWFybGllciBpbiB0aGUgbGF5b3V0IHBhc3MuXG52YXIgbGF5b3V0ID0gZnVuY3Rpb24gKHBhcmFtcywgbGluZVN0YXJ0WCwgbGluZUVuZFgpIHtcblx0Ly8gV2Ugbm93IGhhdmUgYWxsIG9mIHRoZSBpbnB1dCB2YXJpYWJsZXMgc2V0LCBzbyB3ZSBjYW4gZmlndXJlIG91dCB0aGUgc3RhcnQgYW5kIGVuZGluZyB4LHkgY29vcmRpbmF0ZXMsIGFuZCBmaW5hbGl6ZSB0aGUgZGlyZWN0aW9uIG9mIHRoZSBhcmMuXG5cblx0Ly8gVGllcyBhbmQgc2x1cnMgYXJlIGhhbmRsZWQgYSBsaXR0bGUgZGlmZmVyZW50bHksIHNvIGRvIGNhbGN1bGF0aW9ucyBmb3IgdGhlbSBzZXBhcmF0ZWx5LlxuXHRpZiAoIXBhcmFtcy5hbmNob3IxIHx8ICFwYXJhbXMuYW5jaG9yMilcblx0XHRwYXJhbXMuaXNUaWUgPSB0cnVlOyAvLyBpZiB0aGUgc2x1ciBnb2VzIG9mZiB0aGUgZW5kIG9mIHRoZSBsaW5lLCB0aGVuIGRyYXcgaXQgbGlrZSBhIHRpZVxuXHRlbHNlIGlmIChwYXJhbXMuYW5jaG9yMS5waXRjaCA9PT0gcGFyYW1zLmFuY2hvcjIucGl0Y2ggJiYgcGFyYW1zLmludGVybmFsTm90ZXMubGVuZ3RoID09PSAwKVxuXHRcdHBhcmFtcy5pc1RpZSA9IHRydWU7XG5cdGVsc2Vcblx0XHRwYXJhbXMuaXNUaWUgPSBmYWxzZTtcblxuXHRpZiAocGFyYW1zLmlzVGllKSB7XG5cdFx0cGFyYW1zLmNhbGNUaWVEaXJlY3Rpb24oKTtcblx0XHRwYXJhbXMuY2FsY1gobGluZVN0YXJ0WCwgbGluZUVuZFgpO1xuXHRcdHBhcmFtcy5jYWxjVGllWSgpO1xuXG5cdH0gZWxzZSB7XG5cdFx0cGFyYW1zLmNhbGNTbHVyRGlyZWN0aW9uKCk7XG5cdFx0cGFyYW1zLmNhbGNYKGxpbmVTdGFydFgsIGxpbmVFbmRYKTtcblx0XHRwYXJhbXMuY2FsY1NsdXJZKCk7XG5cdH1cblx0cGFyYW1zLmF2b2lkQ29sbGlzaW9uQWJvdmUoKTtcbn07XG5cbnZhciBkcmF3QXJjID0gZnVuY3Rpb24gKHJlbmRlcmVyLCB4MSwgeDIsIHBpdGNoMSwgcGl0Y2gyLCBhYm92ZSwga2xhc3MsIGlzVGllLCBkb3R0ZWQpIHtcblx0Ly8gSWYgaXQgaXMgYSB0aWUgdnMuIGEgc2x1ciwgZHJhdyBpdCBzaGFsbG93ZXIuXG5cdHZhciBzcGFjaW5nID0gaXNUaWUgPyAxLjIgOiAxLjU7XG5cblx0eDEgPSByb3VuZE51bWJlcih4MSArIDYpO1xuXHR4MiA9IHJvdW5kTnVtYmVyKHgyICsgNCk7XG5cdHBpdGNoMSA9IHBpdGNoMSArICgoYWJvdmUpID8gc3BhY2luZyA6IC1zcGFjaW5nKTtcblx0cGl0Y2gyID0gcGl0Y2gyICsgKChhYm92ZSkgPyBzcGFjaW5nIDogLXNwYWNpbmcpO1xuXHR2YXIgeTEgPSByb3VuZE51bWJlcihyZW5kZXJlci5jYWxjWShwaXRjaDEpKTtcblx0dmFyIHkyID0gcm91bmROdW1iZXIocmVuZGVyZXIuY2FsY1kocGl0Y2gyKSk7XG5cblx0Ly91bml0IGRpcmVjdGlvbiB2ZWN0b3Jcblx0dmFyIGR4ID0geDIgLSB4MTtcblx0dmFyIGR5ID0geTIgLSB5MTtcblx0dmFyIG5vcm0gPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuXHR2YXIgdXggPSBkeCAvIG5vcm07XG5cdHZhciB1eSA9IGR5IC8gbm9ybTtcblxuXHR2YXIgZmxhdHRlbiA9IG5vcm0gLyAzLjU7XG5cdHZhciBtYXhGbGF0dGVuID0gaXNUaWUgPyAxMCA6IDI1OyAgLy8gSWYgaXQgaXMgYSB0aWUgdnMuIGEgc2x1ciwgZHJhdyBpdCBzaGFsbG93ZXIuXG5cdHZhciBjdXJ2ZSA9ICgoYWJvdmUpID8gLTEgOiAxKSAqIE1hdGgubWluKG1heEZsYXR0ZW4sIE1hdGgubWF4KDQsIGZsYXR0ZW4pKTtcblxuXHR2YXIgY29udHJvbHgxID0gcm91bmROdW1iZXIoeDEgKyBmbGF0dGVuICogdXggLSBjdXJ2ZSAqIHV5KTtcblx0dmFyIGNvbnRyb2x5MSA9IHJvdW5kTnVtYmVyKHkxICsgZmxhdHRlbiAqIHV5ICsgY3VydmUgKiB1eCk7XG5cdHZhciBjb250cm9seDIgPSByb3VuZE51bWJlcih4MiAtIGZsYXR0ZW4gKiB1eCAtIGN1cnZlICogdXkpO1xuXHR2YXIgY29udHJvbHkyID0gcm91bmROdW1iZXIoeTIgLSBmbGF0dGVuICogdXkgKyBjdXJ2ZSAqIHV4KTtcblx0dmFyIHRoaWNrbmVzcyA9IDI7XG5cdGlmIChrbGFzcylcblx0XHRrbGFzcyArPSAnIHNsdXInO1xuXHRlbHNlXG5cdFx0a2xhc3MgPSAnc2x1cic7XG5cdGtsYXNzICs9IGlzVGllID8gJyB0aWUnIDogJyBsZWdhdG8nO1xuXHR2YXIgcmV0O1xuXHRpZiAoZG90dGVkKSB7XG5cdFx0a2xhc3MgKz0gJyBkb3R0ZWQnO1xuXHRcdHZhciBwYXRoU3RyaW5nMiA9IHNwcmludGYoXCJNICVmICVmIEMgJWYgJWYgJWYgJWYgJWYgJWZcIiwgeDEsIHkxLFxuXHRcdFx0Y29udHJvbHgxLCBjb250cm9seTEsIGNvbnRyb2x4MiwgY29udHJvbHkyLCB4MiwgeTIpO1xuXHRcdHJldCA9IHJlbmRlcmVyLnBhcGVyLnBhdGgoeyBwYXRoOiBwYXRoU3RyaW5nMiwgc3Ryb2tlOiByZW5kZXJlci5mb3JlZ3JvdW5kQ29sb3IsIGZpbGw6IFwibm9uZVwiLCAnc3Ryb2tlLWRhc2hhcnJheSc6IFwiNSA1XCIsICdjbGFzcyc6IHJlbmRlcmVyLmNvbnRyb2xsZXIuY2xhc3Nlcy5nZW5lcmF0ZShrbGFzcyksIFwiZGF0YS1uYW1lXCI6IGlzVGllID8gXCJ0aWVcIiA6IFwic2x1clwiIH0pO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBwYXRoU3RyaW5nID0gc3ByaW50ZihcIk0gJWYgJWYgQyAlZiAlZiAlZiAlZiAlZiAlZiBDICVmICVmICVmICVmICVmICVmIHpcIiwgeDEsIHkxLFxuXHRcdFx0Y29udHJvbHgxLCBjb250cm9seTEsIGNvbnRyb2x4MiwgY29udHJvbHkyLCB4MiwgeTIsXG5cdFx0XHRyb3VuZE51bWJlcihjb250cm9seDIgLSB0aGlja25lc3MgKiB1eSksIHJvdW5kTnVtYmVyKGNvbnRyb2x5MiArIHRoaWNrbmVzcyAqIHV4KSwgcm91bmROdW1iZXIoY29udHJvbHgxIC0gdGhpY2tuZXNzICogdXkpLCByb3VuZE51bWJlcihjb250cm9seTEgKyB0aGlja25lc3MgKiB1eCksIHgxLCB5MSk7XG5cdFx0cmV0ID0gcmVuZGVyZXIucGFwZXIucGF0aCh7IHBhdGg6IHBhdGhTdHJpbmcsIHN0cm9rZTogXCJub25lXCIsIGZpbGw6IHJlbmRlcmVyLmZvcmVncm91bmRDb2xvciwgJ2NsYXNzJzogcmVuZGVyZXIuY29udHJvbGxlci5jbGFzc2VzLmdlbmVyYXRlKGtsYXNzKSwgXCJkYXRhLW5hbWVcIjogaXNUaWUgPyBcInRpZVwiIDogXCJzbHVyXCIgfSk7XG5cdH1cblxuXHRyZXR1cm4gcmV0O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBkcmF3VGllO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/tie.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/triplet.js":
/*!******************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/triplet.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var sprintf = __webpack_require__(/*! ./sprintf */ \"(ssr)/./node_modules/abcjs/src/write/draw/sprintf.js\");\nvar renderText = __webpack_require__(/*! ./text */ \"(ssr)/./node_modules/abcjs/src/write/draw/text.js\");\nvar printPath = __webpack_require__(/*! ./print-path */ \"(ssr)/./node_modules/abcjs/src/write/draw/print-path.js\");\nvar roundNumber = __webpack_require__(/*! ./round-number */ \"(ssr)/./node_modules/abcjs/src/write/draw/round-number.js\");\n\nfunction drawTriplet(renderer, params, selectables) {\n\trenderer.paper.openGroup({ klass: renderer.controller.classes.generate('triplet ' + params.durationClass), \"data-name\": \"triplet\" });\n\tif (!params.hasBeam) {\n\t\tdrawBracket(renderer, params.anchor1.x, params.startNote, params.anchor2.x + params.anchor2.w, params.endNote);\n\t}\n\t// HACK: adjust the position of \"3\". It is too high in all cases so we fudge it by subtracting 1 here.\n\trenderText(renderer, { x: params.xTextPos, y: renderer.calcY(params.yTextPos - 1), text: \"\" + params.number, type: 'tripletfont', anchor: \"middle\", centerVertically: true, noClass: true, name: \"\" + params.number }, true);\n\tvar g = renderer.paper.closeGroup();\n\tselectables.wrapSvgEl({ el_type: \"triplet\", startChar: -1, endChar: -1 }, g);\n\treturn g;\n}\n\nfunction drawLine(l, t, r, b) {\n\treturn sprintf(\"M %f %f L %f %f\", roundNumber(l), roundNumber(t), roundNumber(r), roundNumber(b));\n}\n\nfunction drawBracket(renderer, x1, y1, x2, y2) {\n\ty1 = renderer.calcY(y1);\n\ty2 = renderer.calcY(y2);\n\tvar bracketHeight = 5;\n\n\t// Draw vertical lines at the beginning and end\n\tvar pathString = \"\";\n\tpathString += drawLine(x1, y1, x1, y1 + bracketHeight);\n\tpathString += drawLine(x2, y2, x2, y2 + bracketHeight);\n\n\t// figure out midpoints to draw the broken line.\n\tvar midX = x1 + (x2 - x1) / 2;\n\t//var midY = y1 + (y2-y1)/2;\n\tvar gapWidth = 8;\n\tvar slope = (y2 - y1) / (x2 - x1);\n\tvar leftEndX = midX - gapWidth;\n\tvar leftEndY = y1 + (leftEndX - x1) * slope;\n\tpathString += drawLine(x1, y1, leftEndX, leftEndY);\n\tvar rightStartX = midX + gapWidth;\n\tvar rightStartY = y1 + (rightStartX - x1) * slope;\n\tpathString += drawLine(rightStartX, rightStartY, x2, y2);\n\tprintPath(renderer, { path: pathString, stroke: renderer.foregroundColor, \"data-name\": \"triplet-bracket\" });\n}\n\nmodule.exports = drawTriplet;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvdHJpcGxldC5qcyIsIm1hcHBpbmdzIjoiQUFBQSxjQUFjLG1CQUFPLENBQUMsdUVBQVc7QUFDakMsaUJBQWlCLG1CQUFPLENBQUMsaUVBQVE7QUFDakMsZ0JBQWdCLG1CQUFPLENBQUMsNkVBQWM7QUFDdEMsa0JBQWtCLG1CQUFPLENBQUMsaUZBQWdCOztBQUUxQztBQUNBLDRCQUE0Qix3R0FBd0c7QUFDcEk7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsOExBQThMO0FBQ3ROO0FBQ0EseUJBQXlCLGdEQUFnRDtBQUN6RTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9GQUFvRjtBQUMzRzs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9kcmF3L3RyaXBsZXQuanM/YzIyNiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgc3ByaW50ZiA9IHJlcXVpcmUoJy4vc3ByaW50ZicpO1xudmFyIHJlbmRlclRleHQgPSByZXF1aXJlKCcuL3RleHQnKTtcbnZhciBwcmludFBhdGggPSByZXF1aXJlKCcuL3ByaW50LXBhdGgnKTtcbnZhciByb3VuZE51bWJlciA9IHJlcXVpcmUoXCIuL3JvdW5kLW51bWJlclwiKTtcblxuZnVuY3Rpb24gZHJhd1RyaXBsZXQocmVuZGVyZXIsIHBhcmFtcywgc2VsZWN0YWJsZXMpIHtcblx0cmVuZGVyZXIucGFwZXIub3Blbkdyb3VwKHsga2xhc3M6IHJlbmRlcmVyLmNvbnRyb2xsZXIuY2xhc3Nlcy5nZW5lcmF0ZSgndHJpcGxldCAnICsgcGFyYW1zLmR1cmF0aW9uQ2xhc3MpLCBcImRhdGEtbmFtZVwiOiBcInRyaXBsZXRcIiB9KTtcblx0aWYgKCFwYXJhbXMuaGFzQmVhbSkge1xuXHRcdGRyYXdCcmFja2V0KHJlbmRlcmVyLCBwYXJhbXMuYW5jaG9yMS54LCBwYXJhbXMuc3RhcnROb3RlLCBwYXJhbXMuYW5jaG9yMi54ICsgcGFyYW1zLmFuY2hvcjIudywgcGFyYW1zLmVuZE5vdGUpO1xuXHR9XG5cdC8vIEhBQ0s6IGFkanVzdCB0aGUgcG9zaXRpb24gb2YgXCIzXCIuIEl0IGlzIHRvbyBoaWdoIGluIGFsbCBjYXNlcyBzbyB3ZSBmdWRnZSBpdCBieSBzdWJ0cmFjdGluZyAxIGhlcmUuXG5cdHJlbmRlclRleHQocmVuZGVyZXIsIHsgeDogcGFyYW1zLnhUZXh0UG9zLCB5OiByZW5kZXJlci5jYWxjWShwYXJhbXMueVRleHRQb3MgLSAxKSwgdGV4dDogXCJcIiArIHBhcmFtcy5udW1iZXIsIHR5cGU6ICd0cmlwbGV0Zm9udCcsIGFuY2hvcjogXCJtaWRkbGVcIiwgY2VudGVyVmVydGljYWxseTogdHJ1ZSwgbm9DbGFzczogdHJ1ZSwgbmFtZTogXCJcIiArIHBhcmFtcy5udW1iZXIgfSwgdHJ1ZSk7XG5cdHZhciBnID0gcmVuZGVyZXIucGFwZXIuY2xvc2VHcm91cCgpO1xuXHRzZWxlY3RhYmxlcy53cmFwU3ZnRWwoeyBlbF90eXBlOiBcInRyaXBsZXRcIiwgc3RhcnRDaGFyOiAtMSwgZW5kQ2hhcjogLTEgfSwgZyk7XG5cdHJldHVybiBnO1xufVxuXG5mdW5jdGlvbiBkcmF3TGluZShsLCB0LCByLCBiKSB7XG5cdHJldHVybiBzcHJpbnRmKFwiTSAlZiAlZiBMICVmICVmXCIsIHJvdW5kTnVtYmVyKGwpLCByb3VuZE51bWJlcih0KSwgcm91bmROdW1iZXIociksIHJvdW5kTnVtYmVyKGIpKTtcbn1cblxuZnVuY3Rpb24gZHJhd0JyYWNrZXQocmVuZGVyZXIsIHgxLCB5MSwgeDIsIHkyKSB7XG5cdHkxID0gcmVuZGVyZXIuY2FsY1koeTEpO1xuXHR5MiA9IHJlbmRlcmVyLmNhbGNZKHkyKTtcblx0dmFyIGJyYWNrZXRIZWlnaHQgPSA1O1xuXG5cdC8vIERyYXcgdmVydGljYWwgbGluZXMgYXQgdGhlIGJlZ2lubmluZyBhbmQgZW5kXG5cdHZhciBwYXRoU3RyaW5nID0gXCJcIjtcblx0cGF0aFN0cmluZyArPSBkcmF3TGluZSh4MSwgeTEsIHgxLCB5MSArIGJyYWNrZXRIZWlnaHQpO1xuXHRwYXRoU3RyaW5nICs9IGRyYXdMaW5lKHgyLCB5MiwgeDIsIHkyICsgYnJhY2tldEhlaWdodCk7XG5cblx0Ly8gZmlndXJlIG91dCBtaWRwb2ludHMgdG8gZHJhdyB0aGUgYnJva2VuIGxpbmUuXG5cdHZhciBtaWRYID0geDEgKyAoeDIgLSB4MSkgLyAyO1xuXHQvL3ZhciBtaWRZID0geTEgKyAoeTIteTEpLzI7XG5cdHZhciBnYXBXaWR0aCA9IDg7XG5cdHZhciBzbG9wZSA9ICh5MiAtIHkxKSAvICh4MiAtIHgxKTtcblx0dmFyIGxlZnRFbmRYID0gbWlkWCAtIGdhcFdpZHRoO1xuXHR2YXIgbGVmdEVuZFkgPSB5MSArIChsZWZ0RW5kWCAtIHgxKSAqIHNsb3BlO1xuXHRwYXRoU3RyaW5nICs9IGRyYXdMaW5lKHgxLCB5MSwgbGVmdEVuZFgsIGxlZnRFbmRZKTtcblx0dmFyIHJpZ2h0U3RhcnRYID0gbWlkWCArIGdhcFdpZHRoO1xuXHR2YXIgcmlnaHRTdGFydFkgPSB5MSArIChyaWdodFN0YXJ0WCAtIHgxKSAqIHNsb3BlO1xuXHRwYXRoU3RyaW5nICs9IGRyYXdMaW5lKHJpZ2h0U3RhcnRYLCByaWdodFN0YXJ0WSwgeDIsIHkyKTtcblx0cHJpbnRQYXRoKHJlbmRlcmVyLCB7IHBhdGg6IHBhdGhTdHJpbmcsIHN0cm9rZTogcmVuZGVyZXIuZm9yZWdyb3VuZENvbG9yLCBcImRhdGEtbmFtZVwiOiBcInRyaXBsZXQtYnJhY2tldFwiIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRyYXdUcmlwbGV0O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/triplet.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/draw/voice.js":
/*!****************************************************!*\
  !*** ./node_modules/abcjs/src/write/draw/voice.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var drawGlissando = __webpack_require__(/*! ./glissando */ \"(ssr)/./node_modules/abcjs/src/write/draw/glissando.js\");\nvar drawCrescendo = __webpack_require__(/*! ./crescendo */ \"(ssr)/./node_modules/abcjs/src/write/draw/crescendo.js\");\nvar drawDynamics = __webpack_require__(/*! ./dynamics */ \"(ssr)/./node_modules/abcjs/src/write/draw/dynamics.js\");\nvar drawTriplet = __webpack_require__(/*! ./triplet */ \"(ssr)/./node_modules/abcjs/src/write/draw/triplet.js\");\nvar drawEnding = __webpack_require__(/*! ./ending */ \"(ssr)/./node_modules/abcjs/src/write/draw/ending.js\");\nvar drawTie = __webpack_require__(/*! ./tie */ \"(ssr)/./node_modules/abcjs/src/write/draw/tie.js\");\nvar drawBeam = __webpack_require__(/*! ./beam */ \"(ssr)/./node_modules/abcjs/src/write/draw/beam.js\");\nvar renderText = __webpack_require__(/*! ./text */ \"(ssr)/./node_modules/abcjs/src/write/draw/text.js\");\nvar drawAbsolute = __webpack_require__(/*! ./absolute */ \"(ssr)/./node_modules/abcjs/src/write/draw/absolute.js\");\n\nfunction drawVoice(renderer, params, bartop, selectables, staffPos) {\n\tvar width = params.w - 1;\n\trenderer.staffbottom = params.staff.bottom;\n\tvar saveColor = renderer.foregroundColor\n\tif (params.color)\n\t\trenderer.foregroundColor = params.color\n\n\tif (params.header) { // print voice name\n\t\tvar textEl = renderText(renderer, { x: renderer.padding.left, y: renderer.calcY(params.headerPosition), text: params.header, type: 'voicefont', klass: 'staff-extra voice-name', anchor: 'start', centerVertically: true, name: \"voice-name\" }, true);\n\t\tselectables.wrapSvgEl({ el_type: \"voiceName\", startChar: -1, endChar: -1, text: params.header }, textEl);\n\t}\n\n\tvar i;\n\tvar child;\n\tvar foundNote = false;\n\tfor (i = 0; i < params.children.length; i++) {\n\t\tchild = params.children[i];\n\t\tif (child.type === 'note' || child.type === 'rest')\n\t\t\tfoundNote = true;\n\t\tvar justInitializedMeasureNumber = false;\n\t\tif (child.type !== 'staff-extra' && !renderer.controller.classes.isInMeasure()) {\n\t\t\trenderer.controller.classes.startMeasure();\n\t\t\tjustInitializedMeasureNumber = true;\n\t\t}\n\t\tif (params.staff.isTabStaff) {\n\t\t\tchild.invisible = false;\n\t\t\tif (child.type == 'bar') {\n\t\t\t\tif (child.abcelem.lastBar) {\n\t\t\t\t\tbartop = params.topLine;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdrawAbsolute(renderer, child, (params.barto || i === params.children.length - 1) ? bartop : 0, selectables, staffPos);\n\n\t\tif (child.type === 'note' || isNonSpacerRest(child))\n\t\t\trenderer.controller.classes.incrNote();\n\t\tif (child.type === 'bar' && !justInitializedMeasureNumber && foundNote) {\n\t\t\trenderer.controller.classes.incrMeasure();\n\t\t}\n\t}\n\n\trenderer.controller.classes.startMeasure();\n\n\tfor (i = 0; i < params.beams.length; i++) {\n\t\tvar beam = params.beams[i];\n\t\tif (beam === 'bar') {\n\t\t\trenderer.controller.classes.incrMeasure();\n\t\t} else\n\t\t\tdrawBeam(renderer, beam, selectables); // beams must be drawn first for proper printing of triplets, slurs and ties.\n\t}\n\n\trenderer.controller.classes.startMeasure();\n\tfor (i = 0; i < params.otherchildren.length; i++) {\n\t\tchild = params.otherchildren[i];\n\t\tif (child === 'bar') {\n\t\t\trenderer.controller.classes.incrMeasure();\n\t\t} else {\n\t\t\tswitch (child.type) {\n\t\t\t\tcase \"GlissandoElem\":\n\t\t\t\t\tchild.elemset = drawGlissando(renderer, child, selectables);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"CrescendoElem\":\n\t\t\t\t\tchild.elemset = drawCrescendo(renderer, child, selectables);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"DynamicDecoration\":\n\t\t\t\t\tchild.elemset = drawDynamics(renderer, child, selectables);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"TripletElem\":\n\t\t\t\t\tdrawTriplet(renderer, child, selectables);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"EndingElem\":\n\t\t\t\t\tchild.elemset = drawEnding(renderer, child, params.startx + 10, width, selectables);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"TieElem\":\n\t\t\t\t\tchild.elemset = drawTie(renderer, child, params.startx + 10, width, selectables);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log(child);\n\t\t\t\t\tdrawAbsolute(renderer, child, params.startx + 10, width, selectables, staffPos);\n\t\t\t}\n\t\t}\n\t}\n\trenderer.foregroundColor = saveColor\n\n}\n\nfunction isNonSpacerRest(elem) {\n\tif (elem.type !== 'rest')\n\t\treturn false;\n\tif (elem.abcelem && elem.abcelem.rest && elem.abcelem.rest.type !== 'spacer')\n\t\treturn true;\n\treturn false;\n}\n\nmodule.exports = drawVoice;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvdm9pY2UuanMiLCJtYXBwaW5ncyI6IkFBQUEsb0JBQW9CLG1CQUFPLENBQUMsMkVBQWE7QUFDekMsb0JBQW9CLG1CQUFPLENBQUMsMkVBQWE7QUFDekMsbUJBQW1CLG1CQUFPLENBQUMseUVBQVk7QUFDdkMsa0JBQWtCLG1CQUFPLENBQUMsdUVBQVc7QUFDckMsaUJBQWlCLG1CQUFPLENBQUMscUVBQVU7QUFDbkMsY0FBYyxtQkFBTyxDQUFDLCtEQUFPO0FBQzdCLGVBQWUsbUJBQU8sQ0FBQyxpRUFBUTtBQUMvQixpQkFBaUIsbUJBQU8sQ0FBQyxpRUFBUTtBQUNqQyxtQkFBbUIsbUJBQU8sQ0FBQyx5RUFBWTs7QUFFdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNCQUFzQjtBQUN0QixzQ0FBc0MsME1BQTBNO0FBQ2hQLDBCQUEwQix1RUFBdUU7QUFDakc7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSw0QkFBNEI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsYUFBYSx5QkFBeUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLDBDQUEwQztBQUMxQzs7QUFFQTtBQUNBLGFBQWEsaUNBQWlDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2RyYXcvdm9pY2UuanM/MDg3MCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZHJhd0dsaXNzYW5kbyA9IHJlcXVpcmUoJy4vZ2xpc3NhbmRvJyk7XG52YXIgZHJhd0NyZXNjZW5kbyA9IHJlcXVpcmUoJy4vY3Jlc2NlbmRvJyk7XG52YXIgZHJhd0R5bmFtaWNzID0gcmVxdWlyZSgnLi9keW5hbWljcycpO1xudmFyIGRyYXdUcmlwbGV0ID0gcmVxdWlyZSgnLi90cmlwbGV0Jyk7XG52YXIgZHJhd0VuZGluZyA9IHJlcXVpcmUoJy4vZW5kaW5nJyk7XG52YXIgZHJhd1RpZSA9IHJlcXVpcmUoJy4vdGllJyk7XG52YXIgZHJhd0JlYW0gPSByZXF1aXJlKCcuL2JlYW0nKTtcbnZhciByZW5kZXJUZXh0ID0gcmVxdWlyZSgnLi90ZXh0Jyk7XG52YXIgZHJhd0Fic29sdXRlID0gcmVxdWlyZSgnLi9hYnNvbHV0ZScpO1xuXG5mdW5jdGlvbiBkcmF3Vm9pY2UocmVuZGVyZXIsIHBhcmFtcywgYmFydG9wLCBzZWxlY3RhYmxlcywgc3RhZmZQb3MpIHtcblx0dmFyIHdpZHRoID0gcGFyYW1zLncgLSAxO1xuXHRyZW5kZXJlci5zdGFmZmJvdHRvbSA9IHBhcmFtcy5zdGFmZi5ib3R0b207XG5cdHZhciBzYXZlQ29sb3IgPSByZW5kZXJlci5mb3JlZ3JvdW5kQ29sb3Jcblx0aWYgKHBhcmFtcy5jb2xvcilcblx0XHRyZW5kZXJlci5mb3JlZ3JvdW5kQ29sb3IgPSBwYXJhbXMuY29sb3JcblxuXHRpZiAocGFyYW1zLmhlYWRlcikgeyAvLyBwcmludCB2b2ljZSBuYW1lXG5cdFx0dmFyIHRleHRFbCA9IHJlbmRlclRleHQocmVuZGVyZXIsIHsgeDogcmVuZGVyZXIucGFkZGluZy5sZWZ0LCB5OiByZW5kZXJlci5jYWxjWShwYXJhbXMuaGVhZGVyUG9zaXRpb24pLCB0ZXh0OiBwYXJhbXMuaGVhZGVyLCB0eXBlOiAndm9pY2Vmb250Jywga2xhc3M6ICdzdGFmZi1leHRyYSB2b2ljZS1uYW1lJywgYW5jaG9yOiAnc3RhcnQnLCBjZW50ZXJWZXJ0aWNhbGx5OiB0cnVlLCBuYW1lOiBcInZvaWNlLW5hbWVcIiB9LCB0cnVlKTtcblx0XHRzZWxlY3RhYmxlcy53cmFwU3ZnRWwoeyBlbF90eXBlOiBcInZvaWNlTmFtZVwiLCBzdGFydENoYXI6IC0xLCBlbmRDaGFyOiAtMSwgdGV4dDogcGFyYW1zLmhlYWRlciB9LCB0ZXh0RWwpO1xuXHR9XG5cblx0dmFyIGk7XG5cdHZhciBjaGlsZDtcblx0dmFyIGZvdW5kTm90ZSA9IGZhbHNlO1xuXHRmb3IgKGkgPSAwOyBpIDwgcGFyYW1zLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2hpbGQgPSBwYXJhbXMuY2hpbGRyZW5baV07XG5cdFx0aWYgKGNoaWxkLnR5cGUgPT09ICdub3RlJyB8fCBjaGlsZC50eXBlID09PSAncmVzdCcpXG5cdFx0XHRmb3VuZE5vdGUgPSB0cnVlO1xuXHRcdHZhciBqdXN0SW5pdGlhbGl6ZWRNZWFzdXJlTnVtYmVyID0gZmFsc2U7XG5cdFx0aWYgKGNoaWxkLnR5cGUgIT09ICdzdGFmZi1leHRyYScgJiYgIXJlbmRlcmVyLmNvbnRyb2xsZXIuY2xhc3Nlcy5pc0luTWVhc3VyZSgpKSB7XG5cdFx0XHRyZW5kZXJlci5jb250cm9sbGVyLmNsYXNzZXMuc3RhcnRNZWFzdXJlKCk7XG5cdFx0XHRqdXN0SW5pdGlhbGl6ZWRNZWFzdXJlTnVtYmVyID0gdHJ1ZTtcblx0XHR9XG5cdFx0aWYgKHBhcmFtcy5zdGFmZi5pc1RhYlN0YWZmKSB7XG5cdFx0XHRjaGlsZC5pbnZpc2libGUgPSBmYWxzZTtcblx0XHRcdGlmIChjaGlsZC50eXBlID09ICdiYXInKSB7XG5cdFx0XHRcdGlmIChjaGlsZC5hYmNlbGVtLmxhc3RCYXIpIHtcblx0XHRcdFx0XHRiYXJ0b3AgPSBwYXJhbXMudG9wTGluZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRkcmF3QWJzb2x1dGUocmVuZGVyZXIsIGNoaWxkLCAocGFyYW1zLmJhcnRvIHx8IGkgPT09IHBhcmFtcy5jaGlsZHJlbi5sZW5ndGggLSAxKSA/IGJhcnRvcCA6IDAsIHNlbGVjdGFibGVzLCBzdGFmZlBvcyk7XG5cblx0XHRpZiAoY2hpbGQudHlwZSA9PT0gJ25vdGUnIHx8IGlzTm9uU3BhY2VyUmVzdChjaGlsZCkpXG5cdFx0XHRyZW5kZXJlci5jb250cm9sbGVyLmNsYXNzZXMuaW5jck5vdGUoKTtcblx0XHRpZiAoY2hpbGQudHlwZSA9PT0gJ2JhcicgJiYgIWp1c3RJbml0aWFsaXplZE1lYXN1cmVOdW1iZXIgJiYgZm91bmROb3RlKSB7XG5cdFx0XHRyZW5kZXJlci5jb250cm9sbGVyLmNsYXNzZXMuaW5jck1lYXN1cmUoKTtcblx0XHR9XG5cdH1cblxuXHRyZW5kZXJlci5jb250cm9sbGVyLmNsYXNzZXMuc3RhcnRNZWFzdXJlKCk7XG5cblx0Zm9yIChpID0gMDsgaSA8IHBhcmFtcy5iZWFtcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBiZWFtID0gcGFyYW1zLmJlYW1zW2ldO1xuXHRcdGlmIChiZWFtID09PSAnYmFyJykge1xuXHRcdFx0cmVuZGVyZXIuY29udHJvbGxlci5jbGFzc2VzLmluY3JNZWFzdXJlKCk7XG5cdFx0fSBlbHNlXG5cdFx0XHRkcmF3QmVhbShyZW5kZXJlciwgYmVhbSwgc2VsZWN0YWJsZXMpOyAvLyBiZWFtcyBtdXN0IGJlIGRyYXduIGZpcnN0IGZvciBwcm9wZXIgcHJpbnRpbmcgb2YgdHJpcGxldHMsIHNsdXJzIGFuZCB0aWVzLlxuXHR9XG5cblx0cmVuZGVyZXIuY29udHJvbGxlci5jbGFzc2VzLnN0YXJ0TWVhc3VyZSgpO1xuXHRmb3IgKGkgPSAwOyBpIDwgcGFyYW1zLm90aGVyY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0XHRjaGlsZCA9IHBhcmFtcy5vdGhlcmNoaWxkcmVuW2ldO1xuXHRcdGlmIChjaGlsZCA9PT0gJ2JhcicpIHtcblx0XHRcdHJlbmRlcmVyLmNvbnRyb2xsZXIuY2xhc3Nlcy5pbmNyTWVhc3VyZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzd2l0Y2ggKGNoaWxkLnR5cGUpIHtcblx0XHRcdFx0Y2FzZSBcIkdsaXNzYW5kb0VsZW1cIjpcblx0XHRcdFx0XHRjaGlsZC5lbGVtc2V0ID0gZHJhd0dsaXNzYW5kbyhyZW5kZXJlciwgY2hpbGQsIHNlbGVjdGFibGVzKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcIkNyZXNjZW5kb0VsZW1cIjpcblx0XHRcdFx0XHRjaGlsZC5lbGVtc2V0ID0gZHJhd0NyZXNjZW5kbyhyZW5kZXJlciwgY2hpbGQsIHNlbGVjdGFibGVzKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcIkR5bmFtaWNEZWNvcmF0aW9uXCI6XG5cdFx0XHRcdFx0Y2hpbGQuZWxlbXNldCA9IGRyYXdEeW5hbWljcyhyZW5kZXJlciwgY2hpbGQsIHNlbGVjdGFibGVzKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcIlRyaXBsZXRFbGVtXCI6XG5cdFx0XHRcdFx0ZHJhd1RyaXBsZXQocmVuZGVyZXIsIGNoaWxkLCBzZWxlY3RhYmxlcyk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJFbmRpbmdFbGVtXCI6XG5cdFx0XHRcdFx0Y2hpbGQuZWxlbXNldCA9IGRyYXdFbmRpbmcocmVuZGVyZXIsIGNoaWxkLCBwYXJhbXMuc3RhcnR4ICsgMTAsIHdpZHRoLCBzZWxlY3RhYmxlcyk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJUaWVFbGVtXCI6XG5cdFx0XHRcdFx0Y2hpbGQuZWxlbXNldCA9IGRyYXdUaWUocmVuZGVyZXIsIGNoaWxkLCBwYXJhbXMuc3RhcnR4ICsgMTAsIHdpZHRoLCBzZWxlY3RhYmxlcyk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coY2hpbGQpO1xuXHRcdFx0XHRcdGRyYXdBYnNvbHV0ZShyZW5kZXJlciwgY2hpbGQsIHBhcmFtcy5zdGFydHggKyAxMCwgd2lkdGgsIHNlbGVjdGFibGVzLCBzdGFmZlBvcyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJlbmRlcmVyLmZvcmVncm91bmRDb2xvciA9IHNhdmVDb2xvclxuXG59XG5cbmZ1bmN0aW9uIGlzTm9uU3BhY2VyUmVzdChlbGVtKSB7XG5cdGlmIChlbGVtLnR5cGUgIT09ICdyZXN0Jylcblx0XHRyZXR1cm4gZmFsc2U7XG5cdGlmIChlbGVtLmFiY2VsZW0gJiYgZWxlbS5hYmNlbGVtLnJlc3QgJiYgZWxlbS5hYmNlbGVtLnJlc3QudHlwZSAhPT0gJ3NwYWNlcicpXG5cdFx0cmV0dXJuIHRydWU7XG5cdHJldHVybiBmYWxzZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkcmF3Vm9pY2U7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/draw/voice.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/engraver-controller.js":
/*!*************************************************************!*\
  !*** ./node_modules/abcjs/src/write/engraver-controller.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_engraver_controller.js: Controls the engraving process of an ABCJS abstract syntax tree as produced by ABCJS/parse\n\n/*global Math */\n\nvar spacing = __webpack_require__(/*! ./helpers/spacing */ \"(ssr)/./node_modules/abcjs/src/write/helpers/spacing.js\");\nvar AbstractEngraver = __webpack_require__(/*! ./creation/abstract-engraver */ \"(ssr)/./node_modules/abcjs/src/write/creation/abstract-engraver.js\");\nvar Renderer = __webpack_require__(/*! ./renderer */ \"(ssr)/./node_modules/abcjs/src/write/renderer.js\");\nvar FreeText = __webpack_require__(/*! ./creation/elements/free-text */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/free-text.js\");\nvar Separator = __webpack_require__(/*! ./creation/elements/separator */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/separator.js\");\nvar Subtitle = __webpack_require__(/*! ./creation/elements/subtitle */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/subtitle.js\");\nvar TopText = __webpack_require__(/*! ./creation/elements/top-text */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/top-text.js\");\nvar BottomText = __webpack_require__(/*! ./creation/elements/bottom-text */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/bottom-text.js\");\nvar setupSelection = __webpack_require__(/*! ./interactive/selection */ \"(ssr)/./node_modules/abcjs/src/write/interactive/selection.js\");\nvar layout = __webpack_require__(/*! ./layout/layout */ \"(ssr)/./node_modules/abcjs/src/write/layout/layout.js\");\nvar Classes = __webpack_require__(/*! ./helpers/classes */ \"(ssr)/./node_modules/abcjs/src/write/helpers/classes.js\");\nvar GetFontAndAttr = __webpack_require__(/*! ./helpers/get-font-and-attr */ \"(ssr)/./node_modules/abcjs/src/write/helpers/get-font-and-attr.js\");\nvar GetTextSize = __webpack_require__(/*! ./helpers/get-text-size */ \"(ssr)/./node_modules/abcjs/src/write/helpers/get-text-size.js\");\nvar draw = __webpack_require__(/*! ./draw/draw */ \"(ssr)/./node_modules/abcjs/src/write/draw/draw.js\");\nvar tablatures = __webpack_require__(/*! ../tablatures/abc_tablatures */ \"(ssr)/./node_modules/abcjs/src/tablatures/abc_tablatures.js\");\nvar findSelectableElement = __webpack_require__(/*! ./interactive/find-selectable-element */ \"(ssr)/./node_modules/abcjs/src/write/interactive/find-selectable-element.js\");\n\n/**\n * @class\n * Controls the engraving process, from ABCJS Abstract Syntax Tree (ABCJS AST) to rendered score sheet\n *\n * Call engraveABC to run the process. This creates a graphelems ABCJS Abstract Engraving Structure (ABCJS AES) that can be accessed through this.staffgroups\n * this data structure is first laid out (giving the graphelems x and y coordinates) and then drawn onto the renderer\n * each ABCJS AES represents a single staffgroup - all elements that are not in a staffgroup are rendered directly by the controller\n *\n * elements in ABCJS AES know their \"source data\" in the ABCJS AST, and their \"target shape\"\n * in the renderer for highlighting purposes\n *\n */\nvar EngraverController = function (paper, params) {\n\tparams = params || {};\n\tthis.findSelectableElement = findSelectableElement;\n\tthis.oneSvgPerLine = params.oneSvgPerLine;\n\tthis.selectionColor = params.selectionColor;\n\tthis.dragColor = params.dragColor ? params.dragColor : params.selectionColor;\n\tthis.dragging = !!params.dragging;\n\tthis.selectTypes = params.selectTypes;\n\tthis.responsive = params.responsive;\n\tthis.space = 3 * spacing.SPACE;\n\tthis.initialClef = params.initialClef;\n\tthis.timeBasedLayout = params.timeBasedLayout;\n\tthis.expandToWidest = !!params.expandToWidest;\n\tthis.scale = params.scale ? parseFloat(params.scale) : 0;\n\tthis.classes = new Classes({ shouldAddClasses: params.add_classes });\n\tif (!(this.scale > 0.1))\n\t\tthis.scale = undefined;\n\n\tif (params.staffwidth) {\n\t\t// Note: Normally all measurements to the engraver are in POINTS. However, if a person is formatting for the\n\t\t// screen and directly inputting the width, then it is more logical to have the measurement in pixels.\n\t\tthis.staffwidthScreen = params.staffwidth;\n\t\tthis.staffwidthPrint = params.staffwidth;\n\t} else {\n\t\tthis.staffwidthScreen = 740; // TODO-PER: Not sure where this number comes from, but this is how it's always been.\n\t\tthis.staffwidthPrint = 680; // The number of pixels in 8.5\", after 1cm of margin has been removed.\n\t}\n\tthis.listeners = [];\n\tif (params.clickListener)\n\t\tthis.addSelectListener(params.clickListener);\n\n\tthis.renderer = new Renderer(paper);\n\tthis.renderer.setPaddingOverride(params);\n\tif (params.showDebug)\n\t\tthis.renderer.showDebug = params.showDebug;\n\tif (params.jazzchords)\n\t\tthis.jazzchords = params.jazzchords;\n\tif (params.accentAbove)\n\t\tthis.accentAbove = params.accentAbove;\n\tif (params.germanAlphabet)\n\t\tthis.germanAlphabet = params.germanAlphabet;\n\tif (params.lineThickness)\n\t\tthis.lineThickness = params.lineThickness;\n\tthis.renderer.controller = this; // TODO-GD needed for highlighting\n\tthis.renderer.foregroundColor = params.foregroundColor ? params.foregroundColor : \"currentColor\";\n\tif (params.ariaLabel !== undefined)\n\t\tthis.renderer.ariaLabel = params.ariaLabel;\n\tthis.renderer.minPadding = params.minPadding ? params.minPadding : 0;\n\n\tthis.reset();\n};\n\nEngraverController.prototype.reset = function () {\n\tthis.selected = [];\n\tthis.staffgroups = [];\n\tif (this.engraver)\n\t\tthis.engraver.reset();\n\tthis.engraver = null;\n\tthis.renderer.reset();\n\tthis.dragTarget = null;\n\tthis.dragIndex = -1;\n\tthis.dragMouseStart = { x: -1, y: -1 };\n\tthis.dragYStep = 0;\n\tif (this.lineThickness)\n\t\tthis.renderer.setLineThickness(this.lineThickness)\n};\n\n/**\n * run the engraving process\n */\nEngraverController.prototype.engraveABC = function (abctunes, tuneNumber, lineOffset) {\n\tif (abctunes[0] === undefined) {\n\t\tabctunes = [abctunes];\n\t}\n\tthis.reset();\n\n\tfor (var i = 0; i < abctunes.length; i++) {\n\t\tif (tuneNumber === undefined)\n\t\t\ttuneNumber = i;\n\t\tthis.getFontAndAttr = new GetFontAndAttr(abctunes[i].formatting, this.classes);\n\t\tthis.getTextSize = new GetTextSize(this.getFontAndAttr, this.renderer.paper);\n\t\tthis.engraveTune(abctunes[i], tuneNumber, lineOffset);\n\t}\n};\n\n/**\n * Some of the items on the page are not scaled, so adjust them in the opposite direction of scaling to cancel out the scaling.\n */\nEngraverController.prototype.adjustNonScaledItems = function (scale) {\n\tthis.width /= scale;\n\tthis.renderer.adjustNonScaledItems(scale);\n};\n\nEngraverController.prototype.getMeasureWidths = function (abcTune) {\n\tthis.reset();\n\tthis.getFontAndAttr = new GetFontAndAttr(abcTune.formatting, this.classes);\n\tthis.getTextSize = new GetTextSize(this.getFontAndAttr, this.renderer.paper);\n\tvar origJazzChords = this.jazzchords\n\n\tthis.setupTune(abcTune, 0);\n\tthis.constructTuneElements(abcTune);\n\t// layout() sets the x-coordinate of the abcTune element here:\n\t// abcTune.lines[0].staffGroup.voices[0].children[0].x\n\tlayout(this.renderer, abcTune, 0, this.space, this.timeBasedLayout);\n\n\tvar ret = [];\n\tvar section;\n\n\tvar needNewSection = true;\n\tfor (var i = 0; i < abcTune.lines.length; i++) {\n\t\tvar abcLine = abcTune.lines[i];\n\t\tif (abcLine.staff) {\n\t\t\tif (needNewSection) {\n\t\t\t\tsection = {\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tmeasureWidths: [],\n\t\t\t\t\t//height: this.renderer.padding.top + this.renderer.spacing.music + this.renderer.padding.bottom + 24, // the 24 is the empirical value added to the bottom of all tunes.\n\t\t\t\t\ttotal: 0\n\t\t\t\t};\n\t\t\t\tret.push(section);\n\t\t\t\tneedNewSection = false;\n\t\t\t}\n\t\t\t// At this point, the voices are laid out so that the bar lines are even with each other. So we just need to get the placement of the first voice.\n\t\t\tif (abcLine.staffGroup.voices.length > 0) {\n\t\t\t\tvar voice = abcLine.staffGroup.voices[0];\n\t\t\t\tvar foundNotStaffExtra = false;\n\t\t\t\tvar lastXPosition = 0;\n\t\t\t\tfor (var k = 0; k < voice.children.length; k++) {\n\t\t\t\t\tvar child = voice.children[k];\n\t\t\t\t\tif (!foundNotStaffExtra && !child.isClef && !child.isKeySig) {\n\t\t\t\t\t\tfoundNotStaffExtra = true;\n\t\t\t\t\t\tsection.left = child.x;\n\t\t\t\t\t\tlastXPosition = child.x;\n\t\t\t\t\t}\n\t\t\t\t\tif (child.type === 'bar') {\n\t\t\t\t\t\tsection.measureWidths.push(child.x - lastXPosition);\n\t\t\t\t\t\tsection.total += (child.x - lastXPosition);\n\t\t\t\t\t\tlastXPosition = child.x;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t//section.height += calcHeight(abcLine.staffGroup) * spacing.STEP;\n\t\t} else\n\t\t\tneedNewSection = true;\n\t}\n\tthis.jazzchords = origJazzChords\n\treturn ret;\n};\n\nEngraverController.prototype.setupTune = function (abcTune, tuneNumber) {\n\tthis.classes.reset();\n\n\tif (abcTune.formatting.jazzchords !== undefined)\n\t\tthis.jazzchords = abcTune.formatting.jazzchords;\n\tif (abcTune.formatting.accentAbove !== undefined)\n\t\tthis.accentAbove = abcTune.formatting.accentAbove;\n\n\tthis.renderer.newTune(abcTune);\n\tthis.engraver = new AbstractEngraver(this.getTextSize, tuneNumber, {\n\t\tbagpipes: abcTune.formatting.bagpipes,\n\t\tflatbeams: abcTune.formatting.flatbeams,\n\t\tgraceSlurs: abcTune.formatting.graceSlurs !== false, // undefined is the default, which is true\n\t\tpercmap: abcTune.formatting.percmap,\n\t\tinitialClef: this.initialClef,\n\t\tjazzchords: this.jazzchords,\n\t\ttimeBasedLayout: this.timeBasedLayout,\n\t\taccentAbove: this.accentAbove,\n\t\tgermanAlphabet: this.germanAlphabet\n\t});\n\tthis.engraver.setStemHeight(this.renderer.spacing.stemHeight);\n\tthis.engraver.measureLength = abcTune.getMeterFraction().num / abcTune.getMeterFraction().den;\n\tif (abcTune.formatting.staffwidth) {\n\t\tthis.width = abcTune.formatting.staffwidth * 1.33; // The width is expressed in pt; convert to px.\n\t} else {\n\t\tthis.width = this.renderer.isPrint ? this.staffwidthPrint : this.staffwidthScreen;\n\t}\n\n\tvar scale = abcTune.formatting.scale ? abcTune.formatting.scale : this.scale;\n\tif (this.responsive === \"resize\") // The resizing will mess with the scaling, so just don't do it explicitly.\n\t\tscale = undefined;\n\tif (scale === undefined) scale = this.renderer.isPrint ? 0.75 : 1;\n\tthis.adjustNonScaledItems(scale);\n\treturn scale;\n};\n\nEngraverController.prototype.constructTuneElements = function (abcTune) {\n\tabcTune.topText = new TopText(abcTune.metaText, abcTune.metaTextInfo, abcTune.formatting, abcTune.lines, this.width, this.renderer.isPrint, this.renderer.padding.left, this.renderer.spacing, this.classes.shouldAddClasses, this.getTextSize);\n\n\t// Generate the raw staff line data\n\tvar i;\n\tvar abcLine;\n\tvar hasPrintedTempo = false;\n\tvar hasSeenNonSubtitle = false;\n\tfor (i = 0; i < abcTune.lines.length; i++) {\n\t\tabcLine = abcTune.lines[i];\n\t\tif (abcLine.staff) {\n\t\t\thasSeenNonSubtitle = true;\n\t\t\tabcLine.staffGroup = this.engraver.createABCLine(abcLine.staff, !hasPrintedTempo ? abcTune.metaText.tempo : null, i);\n\t\t\thasPrintedTempo = true;\n\t\t} else if (abcLine.subtitle) {\n\t\t\t// If the subtitle is at the top, then it was already accounted for. So skip all subtitles until the first non-subtitle line.\n\t\t\tif (hasSeenNonSubtitle) {\n\t\t\t\tvar center = this.width / 2 + this.renderer.padding.left;\n\t\t\t\tabcLine.nonMusic = new Subtitle(this.renderer.spacing.subtitle, abcTune.formatting, abcLine.subtitle, center, this.renderer.padding.left, this.getTextSize);\n\t\t\t}\n\t\t} else if (abcLine.text !== undefined) {\n\t\t\thasSeenNonSubtitle = true;\n\t\t\tabcLine.nonMusic = new FreeText(abcLine.text, abcLine.vskip, this.getFontAndAttr, this.renderer.padding.left, this.width, this.getTextSize);\n\t\t} else if (abcLine.separator !== undefined && abcLine.separator.lineLength) {\n\t\t\thasSeenNonSubtitle = true;\n\t\t\tabcLine.nonMusic = new Separator(abcLine.separator.spaceAbove, abcLine.separator.lineLength, abcLine.separator.spaceBelow);\n\t\t}\n\t}\n\tabcTune.bottomText = new BottomText(abcTune.metaText, this.width, this.renderer.isPrint, this.renderer.padding.left, this.renderer.spacing, this.classes.shouldAddClasses, this.getTextSize);\n};\n\nEngraverController.prototype.engraveTune = function (abcTune, tuneNumber, lineOffset) {\n\n\tvar origJazzChords = this.jazzchords\n\tvar scale = this.setupTune(abcTune, tuneNumber);\n  \n\t// Create all of the element objects that will appear on the page.\n\tthis.constructTuneElements(abcTune);\n  \n\t//Set the top text now that we know the width\n  \n\t// Do all the positioning, both horizontally and vertically\n\tvar maxWidth = layout(this.renderer, abcTune, this.width, this.space, this.expandToWidest, this.timeBasedLayout);\n  \n\t//Set the top text now that we know the width\n\tif (this.expandToWidest && maxWidth > this.width + 1) {\n  \n\t\tabcTune.topText = new TopText(abcTune.metaText, abcTune.metaTextInfo, abcTune.formatting, abcTune.lines, maxWidth, this.renderer.isPrint, this.renderer.padding.left, this.renderer.spacing, this.classes.shouldAddClasses, this.getTextSize);\n  \n\t\tif ((abcTune.lines)&&(abcTune.lines.length > 0)){\n\t\t\tvar nlines = abcTune.lines.length;\n\n\t\t\tfor (var i=0;i<nlines;++i){\n\t\t\t\tvar entry = abcTune.lines[i];\n\t\t\t\tif (entry.nonMusic){\n\t\t\t\t\tif ((entry.nonMusic.rows) && (entry.nonMusic.rows.length > 0)){\n\t\t\t\t\t\tvar nRows = entry.nonMusic.rows.length;\n\t\t\t\t\t\tfor (var j=0;j<nRows;++j){\n\t\t\t\t\t\t\tvar thisRow = entry.nonMusic.rows[j];\n\t\t\t\t\t\t\t// Recenter the element if it's a subtitle or centered text \n\t\t\t\t\t\t\tif (thisRow.left){\n\t\t\t\t\t\t\t\tif (entry.subtitle){\n\t\t\t\t\t\t\t\t\tthisRow.left = (maxWidth/2) + this.renderer.padding.left;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif ((entry.text)&&(entry.text.length>0)){\n\t\t\t\t\t\t\t\t\t\tif (entry.text[0].center){\n\t\t\t\t\t\t\t\t\t\t\tthisRow.left = (maxWidth/2) + this.renderer.padding.left;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Deal with tablature for staff\n\tif (abcTune.tablatures) {\n\t  tablatures.layoutTablatures(this.renderer, abcTune);\n\t}\n  \n\t// Do all the writing to the SVG\n\tvar ret = draw(this.renderer, this.classes, abcTune, this.width, maxWidth, this.responsive, scale, this.selectTypes, tuneNumber, lineOffset);\n\tthis.staffgroups = ret.staffgroups;\n\tthis.selectables = ret.selectables;\n\tif (this.oneSvgPerLine) {\n\t  var div = this.renderer.paper.svg.parentNode;\n\t  this.svgs = splitSvgIntoLines(this.renderer, div, abcTune.metaText.title, this.responsive, scale);\n\t} else {\n\t  this.svgs = [this.renderer.paper.svg];\n\t}\n\tsetupSelection(this, this.svgs);\n\t\n\tthis.jazzchords = origJazzChords\n};\n\nfunction splitSvgIntoLines(renderer, output, title, responsive, scale) {\n\t// Each line is a top level <g> in the svg. To split it into separate\n\t// svgs iterate through each of those and put them in a new svg. Since\n\t// they are placed absolutely, the viewBox needs to be manipulated to\n\t// get the correct vertical positioning.\n\t// We copy all the attributes from the original svg except for the aria-label\n\t// since we want that to include a count. And the height is now a fraction of the original svg.\n\tif (!title) title = \"Untitled\"\n\tvar source = output.querySelector(\"svg\")\n\tif (responsive === 'resize')\n\t\toutput.style.paddingBottom = ''\n\tvar style = source.querySelector(\"style\")\n\tvar width = responsive === 'resize' ? source.viewBox.baseVal.width : source.getAttribute(\"width\")\n\tvar sections = output.querySelectorAll(\"svg > g\") // each section is a line, or the top matter or the bottom matter, or text that has been inserted.\n\tvar nextTop = 0 // There are often gaps between the elements for spacing, so the actual top and height needs to be inferred.\n\tvar wrappers = [] // Create all the elements and place them at once because we use the current svg to get data. It would disappear after placing the first line.\n\tvar svgs = []\n\tfor (var i = 0; i < sections.length; i++) {\n\t\tvar section = sections[i]\n\t\tvar box = section.getBBox()\n\t\tvar gapBetweenLines = box.y - nextTop // take the margin into account\n\t\tvar height = box.height + gapBetweenLines;\n\t\tvar wrapper = document.createElement(\"div\");\n\t\tvar divStyles = \"overflow: hidden;\"\n\t\tif (responsive !== 'resize')\n\t\t\tdivStyles += \"height:\" + (height * scale) + \"px;\"\n\t\twrapper.setAttribute(\"style\", divStyles)\n\t\tvar svg = duplicateSvg(source)\n\t\tvar fullTitle = \"Sheet Music for \\\"\" + title + \"\\\" section \" + (i + 1)\n\t\tsvg.setAttribute(\"aria-label\", fullTitle)\n\t\tif (responsive !== 'resize')\n\t\t\tsvg.setAttribute(\"height\", height)\n\t\tif (responsive === 'resize')\n\t\t\tsvg.style.position = ''\n\t\t// TODO-PER: Hack! Not sure why this is needed.\n\t\tvar viewBoxHeight = renderer.firefox112 ? height+1 : height\n\t\tsvg.setAttribute(\"viewBox\", \"0 \" + nextTop + \" \" + width + \" \" + viewBoxHeight)\n\t\tsvg.appendChild(style.cloneNode(true))\n\t\tvar titleEl = document.createElement(\"title\")\n\t\ttitleEl.innerText = fullTitle\n\t\tsvg.appendChild(titleEl)\n\t\tsvg.appendChild(section)\n\n\t\twrapper.appendChild(svg)\n\t\tsvgs.push(svg)\n\t\toutput.appendChild(wrapper)\n\t\t//wrappers.push(wrapper)\n\t\tnextTop = box.y + box.height\n\t}\n\t// for (i = 0; i < wrappers.length; i++)\n\t// \toutput.appendChild(wrappers[i])\n\toutput.removeChild(source)\n\treturn svgs;\n}\n\nfunction duplicateSvg(source) {\n\tvar svgNS = \"http://www.w3.org/2000/svg\";\n\tvar svg = document.createElementNS(svgNS, \"svg\");\n\tfor (var i = 0; i < source.attributes.length; i++) {\n\t\tvar attr = source.attributes[i];\n\t\tif (attr.name !== \"height\" && attr.name != \"aria-label\")\n\t\t\tsvg.setAttribute(attr.name, attr.value)\n\t}\n\treturn svg;\n}\n\nEngraverController.prototype.getDim = function (historyEl) {\n\t// Get the dimensions on demand because the getBBox call is expensive.\n\tif (!historyEl.dim) {\n\t\tvar box = historyEl.svgEl.getBBox();\n\t\thistoryEl.dim = { left: Math.round(box.x), top: Math.round(box.y), right: Math.round(box.x + box.width), bottom: Math.round(box.y + box.height) };\n\t}\n\treturn historyEl.dim;\n};\n\nEngraverController.prototype.addSelectListener = function (clickListener) {\n\tthis.listeners[this.listeners.length] = clickListener;\n};\n\nmodule.exports = EngraverController;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2VuZ3JhdmVyLWNvbnRyb2xsZXIuanMiLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7O0FBRUEsY0FBYyxtQkFBTyxDQUFDLGtGQUFtQjtBQUN6Qyx1QkFBdUIsbUJBQU8sQ0FBQyx3R0FBOEI7QUFDN0QsZUFBZSxtQkFBTyxDQUFDLG9FQUFZO0FBQ25DLGVBQWUsbUJBQU8sQ0FBQywwR0FBK0I7QUFDdEQsZ0JBQWdCLG1CQUFPLENBQUMsMEdBQStCO0FBQ3ZELGVBQWUsbUJBQU8sQ0FBQyx3R0FBOEI7QUFDckQsY0FBYyxtQkFBTyxDQUFDLHdHQUE4QjtBQUNwRCxpQkFBaUIsbUJBQU8sQ0FBQyw4R0FBaUM7QUFDMUQscUJBQXFCLG1CQUFPLENBQUMsOEZBQXlCO0FBQ3RELGFBQWEsbUJBQU8sQ0FBQyw4RUFBaUI7QUFDdEMsY0FBYyxtQkFBTyxDQUFDLGtGQUFtQjtBQUN6QyxxQkFBcUIsbUJBQU8sQ0FBQyxzR0FBNkI7QUFDMUQsa0JBQWtCLG1CQUFPLENBQUMsOEZBQXlCO0FBQ25ELFdBQVcsbUJBQU8sQ0FBQyxzRUFBYTtBQUNoQyxpQkFBaUIsbUJBQU8sQ0FBQyxpR0FBOEI7QUFDdkQsNEJBQTRCLG1CQUFPLENBQUMsMEhBQXVDOztBQUUzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHNDQUFzQztBQUNwRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsK0JBQStCO0FBQy9CLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIscUJBQXFCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLDBCQUEwQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDJCQUEyQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxpQ0FBaUM7QUFDdEYsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSwwQkFBMEI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxnQkFBZ0IsU0FBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixRQUFRO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHFCQUFxQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixxQkFBcUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDhCQUE4QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9lbmdyYXZlci1jb250cm9sbGVyLmpzPzIxZTgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gICAgYWJjX2VuZ3JhdmVyX2NvbnRyb2xsZXIuanM6IENvbnRyb2xzIHRoZSBlbmdyYXZpbmcgcHJvY2VzcyBvZiBhbiBBQkNKUyBhYnN0cmFjdCBzeW50YXggdHJlZSBhcyBwcm9kdWNlZCBieSBBQkNKUy9wYXJzZVxuXG4vKmdsb2JhbCBNYXRoICovXG5cbnZhciBzcGFjaW5nID0gcmVxdWlyZSgnLi9oZWxwZXJzL3NwYWNpbmcnKTtcbnZhciBBYnN0cmFjdEVuZ3JhdmVyID0gcmVxdWlyZSgnLi9jcmVhdGlvbi9hYnN0cmFjdC1lbmdyYXZlcicpO1xudmFyIFJlbmRlcmVyID0gcmVxdWlyZSgnLi9yZW5kZXJlcicpO1xudmFyIEZyZWVUZXh0ID0gcmVxdWlyZSgnLi9jcmVhdGlvbi9lbGVtZW50cy9mcmVlLXRleHQnKTtcbnZhciBTZXBhcmF0b3IgPSByZXF1aXJlKCcuL2NyZWF0aW9uL2VsZW1lbnRzL3NlcGFyYXRvcicpO1xudmFyIFN1YnRpdGxlID0gcmVxdWlyZSgnLi9jcmVhdGlvbi9lbGVtZW50cy9zdWJ0aXRsZScpO1xudmFyIFRvcFRleHQgPSByZXF1aXJlKCcuL2NyZWF0aW9uL2VsZW1lbnRzL3RvcC10ZXh0Jyk7XG52YXIgQm90dG9tVGV4dCA9IHJlcXVpcmUoJy4vY3JlYXRpb24vZWxlbWVudHMvYm90dG9tLXRleHQnKTtcbnZhciBzZXR1cFNlbGVjdGlvbiA9IHJlcXVpcmUoJy4vaW50ZXJhY3RpdmUvc2VsZWN0aW9uJyk7XG52YXIgbGF5b3V0ID0gcmVxdWlyZSgnLi9sYXlvdXQvbGF5b3V0Jyk7XG52YXIgQ2xhc3NlcyA9IHJlcXVpcmUoJy4vaGVscGVycy9jbGFzc2VzJyk7XG52YXIgR2V0Rm9udEFuZEF0dHIgPSByZXF1aXJlKCcuL2hlbHBlcnMvZ2V0LWZvbnQtYW5kLWF0dHInKTtcbnZhciBHZXRUZXh0U2l6ZSA9IHJlcXVpcmUoJy4vaGVscGVycy9nZXQtdGV4dC1zaXplJyk7XG52YXIgZHJhdyA9IHJlcXVpcmUoJy4vZHJhdy9kcmF3Jyk7XG52YXIgdGFibGF0dXJlcyA9IHJlcXVpcmUoJy4uL3RhYmxhdHVyZXMvYWJjX3RhYmxhdHVyZXMnKTtcbnZhciBmaW5kU2VsZWN0YWJsZUVsZW1lbnQgPSByZXF1aXJlKCcuL2ludGVyYWN0aXZlL2ZpbmQtc2VsZWN0YWJsZS1lbGVtZW50Jyk7XG5cbi8qKlxuICogQGNsYXNzXG4gKiBDb250cm9scyB0aGUgZW5ncmF2aW5nIHByb2Nlc3MsIGZyb20gQUJDSlMgQWJzdHJhY3QgU3ludGF4IFRyZWUgKEFCQ0pTIEFTVCkgdG8gcmVuZGVyZWQgc2NvcmUgc2hlZXRcbiAqXG4gKiBDYWxsIGVuZ3JhdmVBQkMgdG8gcnVuIHRoZSBwcm9jZXNzLiBUaGlzIGNyZWF0ZXMgYSBncmFwaGVsZW1zIEFCQ0pTIEFic3RyYWN0IEVuZ3JhdmluZyBTdHJ1Y3R1cmUgKEFCQ0pTIEFFUykgdGhhdCBjYW4gYmUgYWNjZXNzZWQgdGhyb3VnaCB0aGlzLnN0YWZmZ3JvdXBzXG4gKiB0aGlzIGRhdGEgc3RydWN0dXJlIGlzIGZpcnN0IGxhaWQgb3V0IChnaXZpbmcgdGhlIGdyYXBoZWxlbXMgeCBhbmQgeSBjb29yZGluYXRlcykgYW5kIHRoZW4gZHJhd24gb250byB0aGUgcmVuZGVyZXJcbiAqIGVhY2ggQUJDSlMgQUVTIHJlcHJlc2VudHMgYSBzaW5nbGUgc3RhZmZncm91cCAtIGFsbCBlbGVtZW50cyB0aGF0IGFyZSBub3QgaW4gYSBzdGFmZmdyb3VwIGFyZSByZW5kZXJlZCBkaXJlY3RseSBieSB0aGUgY29udHJvbGxlclxuICpcbiAqIGVsZW1lbnRzIGluIEFCQ0pTIEFFUyBrbm93IHRoZWlyIFwic291cmNlIGRhdGFcIiBpbiB0aGUgQUJDSlMgQVNULCBhbmQgdGhlaXIgXCJ0YXJnZXQgc2hhcGVcIlxuICogaW4gdGhlIHJlbmRlcmVyIGZvciBoaWdobGlnaHRpbmcgcHVycG9zZXNcbiAqXG4gKi9cbnZhciBFbmdyYXZlckNvbnRyb2xsZXIgPSBmdW5jdGlvbiAocGFwZXIsIHBhcmFtcykge1xuXHRwYXJhbXMgPSBwYXJhbXMgfHwge307XG5cdHRoaXMuZmluZFNlbGVjdGFibGVFbGVtZW50ID0gZmluZFNlbGVjdGFibGVFbGVtZW50O1xuXHR0aGlzLm9uZVN2Z1BlckxpbmUgPSBwYXJhbXMub25lU3ZnUGVyTGluZTtcblx0dGhpcy5zZWxlY3Rpb25Db2xvciA9IHBhcmFtcy5zZWxlY3Rpb25Db2xvcjtcblx0dGhpcy5kcmFnQ29sb3IgPSBwYXJhbXMuZHJhZ0NvbG9yID8gcGFyYW1zLmRyYWdDb2xvciA6IHBhcmFtcy5zZWxlY3Rpb25Db2xvcjtcblx0dGhpcy5kcmFnZ2luZyA9ICEhcGFyYW1zLmRyYWdnaW5nO1xuXHR0aGlzLnNlbGVjdFR5cGVzID0gcGFyYW1zLnNlbGVjdFR5cGVzO1xuXHR0aGlzLnJlc3BvbnNpdmUgPSBwYXJhbXMucmVzcG9uc2l2ZTtcblx0dGhpcy5zcGFjZSA9IDMgKiBzcGFjaW5nLlNQQUNFO1xuXHR0aGlzLmluaXRpYWxDbGVmID0gcGFyYW1zLmluaXRpYWxDbGVmO1xuXHR0aGlzLnRpbWVCYXNlZExheW91dCA9IHBhcmFtcy50aW1lQmFzZWRMYXlvdXQ7XG5cdHRoaXMuZXhwYW5kVG9XaWRlc3QgPSAhIXBhcmFtcy5leHBhbmRUb1dpZGVzdDtcblx0dGhpcy5zY2FsZSA9IHBhcmFtcy5zY2FsZSA/IHBhcnNlRmxvYXQocGFyYW1zLnNjYWxlKSA6IDA7XG5cdHRoaXMuY2xhc3NlcyA9IG5ldyBDbGFzc2VzKHsgc2hvdWxkQWRkQ2xhc3NlczogcGFyYW1zLmFkZF9jbGFzc2VzIH0pO1xuXHRpZiAoISh0aGlzLnNjYWxlID4gMC4xKSlcblx0XHR0aGlzLnNjYWxlID0gdW5kZWZpbmVkO1xuXG5cdGlmIChwYXJhbXMuc3RhZmZ3aWR0aCkge1xuXHRcdC8vIE5vdGU6IE5vcm1hbGx5IGFsbCBtZWFzdXJlbWVudHMgdG8gdGhlIGVuZ3JhdmVyIGFyZSBpbiBQT0lOVFMuIEhvd2V2ZXIsIGlmIGEgcGVyc29uIGlzIGZvcm1hdHRpbmcgZm9yIHRoZVxuXHRcdC8vIHNjcmVlbiBhbmQgZGlyZWN0bHkgaW5wdXR0aW5nIHRoZSB3aWR0aCwgdGhlbiBpdCBpcyBtb3JlIGxvZ2ljYWwgdG8gaGF2ZSB0aGUgbWVhc3VyZW1lbnQgaW4gcGl4ZWxzLlxuXHRcdHRoaXMuc3RhZmZ3aWR0aFNjcmVlbiA9IHBhcmFtcy5zdGFmZndpZHRoO1xuXHRcdHRoaXMuc3RhZmZ3aWR0aFByaW50ID0gcGFyYW1zLnN0YWZmd2lkdGg7XG5cdH0gZWxzZSB7XG5cdFx0dGhpcy5zdGFmZndpZHRoU2NyZWVuID0gNzQwOyAvLyBUT0RPLVBFUjogTm90IHN1cmUgd2hlcmUgdGhpcyBudW1iZXIgY29tZXMgZnJvbSwgYnV0IHRoaXMgaXMgaG93IGl0J3MgYWx3YXlzIGJlZW4uXG5cdFx0dGhpcy5zdGFmZndpZHRoUHJpbnQgPSA2ODA7IC8vIFRoZSBudW1iZXIgb2YgcGl4ZWxzIGluIDguNVwiLCBhZnRlciAxY20gb2YgbWFyZ2luIGhhcyBiZWVuIHJlbW92ZWQuXG5cdH1cblx0dGhpcy5saXN0ZW5lcnMgPSBbXTtcblx0aWYgKHBhcmFtcy5jbGlja0xpc3RlbmVyKVxuXHRcdHRoaXMuYWRkU2VsZWN0TGlzdGVuZXIocGFyYW1zLmNsaWNrTGlzdGVuZXIpO1xuXG5cdHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIocGFwZXIpO1xuXHR0aGlzLnJlbmRlcmVyLnNldFBhZGRpbmdPdmVycmlkZShwYXJhbXMpO1xuXHRpZiAocGFyYW1zLnNob3dEZWJ1Zylcblx0XHR0aGlzLnJlbmRlcmVyLnNob3dEZWJ1ZyA9IHBhcmFtcy5zaG93RGVidWc7XG5cdGlmIChwYXJhbXMuamF6emNob3Jkcylcblx0XHR0aGlzLmphenpjaG9yZHMgPSBwYXJhbXMuamF6emNob3Jkcztcblx0aWYgKHBhcmFtcy5hY2NlbnRBYm92ZSlcblx0XHR0aGlzLmFjY2VudEFib3ZlID0gcGFyYW1zLmFjY2VudEFib3ZlO1xuXHRpZiAocGFyYW1zLmdlcm1hbkFscGhhYmV0KVxuXHRcdHRoaXMuZ2VybWFuQWxwaGFiZXQgPSBwYXJhbXMuZ2VybWFuQWxwaGFiZXQ7XG5cdGlmIChwYXJhbXMubGluZVRoaWNrbmVzcylcblx0XHR0aGlzLmxpbmVUaGlja25lc3MgPSBwYXJhbXMubGluZVRoaWNrbmVzcztcblx0dGhpcy5yZW5kZXJlci5jb250cm9sbGVyID0gdGhpczsgLy8gVE9ETy1HRCBuZWVkZWQgZm9yIGhpZ2hsaWdodGluZ1xuXHR0aGlzLnJlbmRlcmVyLmZvcmVncm91bmRDb2xvciA9IHBhcmFtcy5mb3JlZ3JvdW5kQ29sb3IgPyBwYXJhbXMuZm9yZWdyb3VuZENvbG9yIDogXCJjdXJyZW50Q29sb3JcIjtcblx0aWYgKHBhcmFtcy5hcmlhTGFiZWwgIT09IHVuZGVmaW5lZClcblx0XHR0aGlzLnJlbmRlcmVyLmFyaWFMYWJlbCA9IHBhcmFtcy5hcmlhTGFiZWw7XG5cdHRoaXMucmVuZGVyZXIubWluUGFkZGluZyA9IHBhcmFtcy5taW5QYWRkaW5nID8gcGFyYW1zLm1pblBhZGRpbmcgOiAwO1xuXG5cdHRoaXMucmVzZXQoKTtcbn07XG5cbkVuZ3JhdmVyQ29udHJvbGxlci5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMuc2VsZWN0ZWQgPSBbXTtcblx0dGhpcy5zdGFmZmdyb3VwcyA9IFtdO1xuXHRpZiAodGhpcy5lbmdyYXZlcilcblx0XHR0aGlzLmVuZ3JhdmVyLnJlc2V0KCk7XG5cdHRoaXMuZW5ncmF2ZXIgPSBudWxsO1xuXHR0aGlzLnJlbmRlcmVyLnJlc2V0KCk7XG5cdHRoaXMuZHJhZ1RhcmdldCA9IG51bGw7XG5cdHRoaXMuZHJhZ0luZGV4ID0gLTE7XG5cdHRoaXMuZHJhZ01vdXNlU3RhcnQgPSB7IHg6IC0xLCB5OiAtMSB9O1xuXHR0aGlzLmRyYWdZU3RlcCA9IDA7XG5cdGlmICh0aGlzLmxpbmVUaGlja25lc3MpXG5cdFx0dGhpcy5yZW5kZXJlci5zZXRMaW5lVGhpY2tuZXNzKHRoaXMubGluZVRoaWNrbmVzcylcbn07XG5cbi8qKlxuICogcnVuIHRoZSBlbmdyYXZpbmcgcHJvY2Vzc1xuICovXG5FbmdyYXZlckNvbnRyb2xsZXIucHJvdG90eXBlLmVuZ3JhdmVBQkMgPSBmdW5jdGlvbiAoYWJjdHVuZXMsIHR1bmVOdW1iZXIsIGxpbmVPZmZzZXQpIHtcblx0aWYgKGFiY3R1bmVzWzBdID09PSB1bmRlZmluZWQpIHtcblx0XHRhYmN0dW5lcyA9IFthYmN0dW5lc107XG5cdH1cblx0dGhpcy5yZXNldCgpO1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgYWJjdHVuZXMubGVuZ3RoOyBpKyspIHtcblx0XHRpZiAodHVuZU51bWJlciA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0dHVuZU51bWJlciA9IGk7XG5cdFx0dGhpcy5nZXRGb250QW5kQXR0ciA9IG5ldyBHZXRGb250QW5kQXR0cihhYmN0dW5lc1tpXS5mb3JtYXR0aW5nLCB0aGlzLmNsYXNzZXMpO1xuXHRcdHRoaXMuZ2V0VGV4dFNpemUgPSBuZXcgR2V0VGV4dFNpemUodGhpcy5nZXRGb250QW5kQXR0ciwgdGhpcy5yZW5kZXJlci5wYXBlcik7XG5cdFx0dGhpcy5lbmdyYXZlVHVuZShhYmN0dW5lc1tpXSwgdHVuZU51bWJlciwgbGluZU9mZnNldCk7XG5cdH1cbn07XG5cbi8qKlxuICogU29tZSBvZiB0aGUgaXRlbXMgb24gdGhlIHBhZ2UgYXJlIG5vdCBzY2FsZWQsIHNvIGFkanVzdCB0aGVtIGluIHRoZSBvcHBvc2l0ZSBkaXJlY3Rpb24gb2Ygc2NhbGluZyB0byBjYW5jZWwgb3V0IHRoZSBzY2FsaW5nLlxuICovXG5FbmdyYXZlckNvbnRyb2xsZXIucHJvdG90eXBlLmFkanVzdE5vblNjYWxlZEl0ZW1zID0gZnVuY3Rpb24gKHNjYWxlKSB7XG5cdHRoaXMud2lkdGggLz0gc2NhbGU7XG5cdHRoaXMucmVuZGVyZXIuYWRqdXN0Tm9uU2NhbGVkSXRlbXMoc2NhbGUpO1xufTtcblxuRW5ncmF2ZXJDb250cm9sbGVyLnByb3RvdHlwZS5nZXRNZWFzdXJlV2lkdGhzID0gZnVuY3Rpb24gKGFiY1R1bmUpIHtcblx0dGhpcy5yZXNldCgpO1xuXHR0aGlzLmdldEZvbnRBbmRBdHRyID0gbmV3IEdldEZvbnRBbmRBdHRyKGFiY1R1bmUuZm9ybWF0dGluZywgdGhpcy5jbGFzc2VzKTtcblx0dGhpcy5nZXRUZXh0U2l6ZSA9IG5ldyBHZXRUZXh0U2l6ZSh0aGlzLmdldEZvbnRBbmRBdHRyLCB0aGlzLnJlbmRlcmVyLnBhcGVyKTtcblx0dmFyIG9yaWdKYXp6Q2hvcmRzID0gdGhpcy5qYXp6Y2hvcmRzXG5cblx0dGhpcy5zZXR1cFR1bmUoYWJjVHVuZSwgMCk7XG5cdHRoaXMuY29uc3RydWN0VHVuZUVsZW1lbnRzKGFiY1R1bmUpO1xuXHQvLyBsYXlvdXQoKSBzZXRzIHRoZSB4LWNvb3JkaW5hdGUgb2YgdGhlIGFiY1R1bmUgZWxlbWVudCBoZXJlOlxuXHQvLyBhYmNUdW5lLmxpbmVzWzBdLnN0YWZmR3JvdXAudm9pY2VzWzBdLmNoaWxkcmVuWzBdLnhcblx0bGF5b3V0KHRoaXMucmVuZGVyZXIsIGFiY1R1bmUsIDAsIHRoaXMuc3BhY2UsIHRoaXMudGltZUJhc2VkTGF5b3V0KTtcblxuXHR2YXIgcmV0ID0gW107XG5cdHZhciBzZWN0aW9uO1xuXG5cdHZhciBuZWVkTmV3U2VjdGlvbiA9IHRydWU7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgYWJjVHVuZS5saW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBhYmNMaW5lID0gYWJjVHVuZS5saW5lc1tpXTtcblx0XHRpZiAoYWJjTGluZS5zdGFmZikge1xuXHRcdFx0aWYgKG5lZWROZXdTZWN0aW9uKSB7XG5cdFx0XHRcdHNlY3Rpb24gPSB7XG5cdFx0XHRcdFx0bGVmdDogMCxcblx0XHRcdFx0XHRtZWFzdXJlV2lkdGhzOiBbXSxcblx0XHRcdFx0XHQvL2hlaWdodDogdGhpcy5yZW5kZXJlci5wYWRkaW5nLnRvcCArIHRoaXMucmVuZGVyZXIuc3BhY2luZy5tdXNpYyArIHRoaXMucmVuZGVyZXIucGFkZGluZy5ib3R0b20gKyAyNCwgLy8gdGhlIDI0IGlzIHRoZSBlbXBpcmljYWwgdmFsdWUgYWRkZWQgdG8gdGhlIGJvdHRvbSBvZiBhbGwgdHVuZXMuXG5cdFx0XHRcdFx0dG90YWw6IDBcblx0XHRcdFx0fTtcblx0XHRcdFx0cmV0LnB1c2goc2VjdGlvbik7XG5cdFx0XHRcdG5lZWROZXdTZWN0aW9uID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCB0aGUgdm9pY2VzIGFyZSBsYWlkIG91dCBzbyB0aGF0IHRoZSBiYXIgbGluZXMgYXJlIGV2ZW4gd2l0aCBlYWNoIG90aGVyLiBTbyB3ZSBqdXN0IG5lZWQgdG8gZ2V0IHRoZSBwbGFjZW1lbnQgb2YgdGhlIGZpcnN0IHZvaWNlLlxuXHRcdFx0aWYgKGFiY0xpbmUuc3RhZmZHcm91cC52b2ljZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHR2YXIgdm9pY2UgPSBhYmNMaW5lLnN0YWZmR3JvdXAudm9pY2VzWzBdO1xuXHRcdFx0XHR2YXIgZm91bmROb3RTdGFmZkV4dHJhID0gZmFsc2U7XG5cdFx0XHRcdHZhciBsYXN0WFBvc2l0aW9uID0gMDtcblx0XHRcdFx0Zm9yICh2YXIgayA9IDA7IGsgPCB2b2ljZS5jaGlsZHJlbi5sZW5ndGg7IGsrKykge1xuXHRcdFx0XHRcdHZhciBjaGlsZCA9IHZvaWNlLmNoaWxkcmVuW2tdO1xuXHRcdFx0XHRcdGlmICghZm91bmROb3RTdGFmZkV4dHJhICYmICFjaGlsZC5pc0NsZWYgJiYgIWNoaWxkLmlzS2V5U2lnKSB7XG5cdFx0XHRcdFx0XHRmb3VuZE5vdFN0YWZmRXh0cmEgPSB0cnVlO1xuXHRcdFx0XHRcdFx0c2VjdGlvbi5sZWZ0ID0gY2hpbGQueDtcblx0XHRcdFx0XHRcdGxhc3RYUG9zaXRpb24gPSBjaGlsZC54O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoY2hpbGQudHlwZSA9PT0gJ2JhcicpIHtcblx0XHRcdFx0XHRcdHNlY3Rpb24ubWVhc3VyZVdpZHRocy5wdXNoKGNoaWxkLnggLSBsYXN0WFBvc2l0aW9uKTtcblx0XHRcdFx0XHRcdHNlY3Rpb24udG90YWwgKz0gKGNoaWxkLnggLSBsYXN0WFBvc2l0aW9uKTtcblx0XHRcdFx0XHRcdGxhc3RYUG9zaXRpb24gPSBjaGlsZC54O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly9zZWN0aW9uLmhlaWdodCArPSBjYWxjSGVpZ2h0KGFiY0xpbmUuc3RhZmZHcm91cCkgKiBzcGFjaW5nLlNURVA7XG5cdFx0fSBlbHNlXG5cdFx0XHRuZWVkTmV3U2VjdGlvbiA9IHRydWU7XG5cdH1cblx0dGhpcy5qYXp6Y2hvcmRzID0gb3JpZ0phenpDaG9yZHNcblx0cmV0dXJuIHJldDtcbn07XG5cbkVuZ3JhdmVyQ29udHJvbGxlci5wcm90b3R5cGUuc2V0dXBUdW5lID0gZnVuY3Rpb24gKGFiY1R1bmUsIHR1bmVOdW1iZXIpIHtcblx0dGhpcy5jbGFzc2VzLnJlc2V0KCk7XG5cblx0aWYgKGFiY1R1bmUuZm9ybWF0dGluZy5qYXp6Y2hvcmRzICE9PSB1bmRlZmluZWQpXG5cdFx0dGhpcy5qYXp6Y2hvcmRzID0gYWJjVHVuZS5mb3JtYXR0aW5nLmphenpjaG9yZHM7XG5cdGlmIChhYmNUdW5lLmZvcm1hdHRpbmcuYWNjZW50QWJvdmUgIT09IHVuZGVmaW5lZClcblx0XHR0aGlzLmFjY2VudEFib3ZlID0gYWJjVHVuZS5mb3JtYXR0aW5nLmFjY2VudEFib3ZlO1xuXG5cdHRoaXMucmVuZGVyZXIubmV3VHVuZShhYmNUdW5lKTtcblx0dGhpcy5lbmdyYXZlciA9IG5ldyBBYnN0cmFjdEVuZ3JhdmVyKHRoaXMuZ2V0VGV4dFNpemUsIHR1bmVOdW1iZXIsIHtcblx0XHRiYWdwaXBlczogYWJjVHVuZS5mb3JtYXR0aW5nLmJhZ3BpcGVzLFxuXHRcdGZsYXRiZWFtczogYWJjVHVuZS5mb3JtYXR0aW5nLmZsYXRiZWFtcyxcblx0XHRncmFjZVNsdXJzOiBhYmNUdW5lLmZvcm1hdHRpbmcuZ3JhY2VTbHVycyAhPT0gZmFsc2UsIC8vIHVuZGVmaW5lZCBpcyB0aGUgZGVmYXVsdCwgd2hpY2ggaXMgdHJ1ZVxuXHRcdHBlcmNtYXA6IGFiY1R1bmUuZm9ybWF0dGluZy5wZXJjbWFwLFxuXHRcdGluaXRpYWxDbGVmOiB0aGlzLmluaXRpYWxDbGVmLFxuXHRcdGphenpjaG9yZHM6IHRoaXMuamF6emNob3Jkcyxcblx0XHR0aW1lQmFzZWRMYXlvdXQ6IHRoaXMudGltZUJhc2VkTGF5b3V0LFxuXHRcdGFjY2VudEFib3ZlOiB0aGlzLmFjY2VudEFib3ZlLFxuXHRcdGdlcm1hbkFscGhhYmV0OiB0aGlzLmdlcm1hbkFscGhhYmV0XG5cdH0pO1xuXHR0aGlzLmVuZ3JhdmVyLnNldFN0ZW1IZWlnaHQodGhpcy5yZW5kZXJlci5zcGFjaW5nLnN0ZW1IZWlnaHQpO1xuXHR0aGlzLmVuZ3JhdmVyLm1lYXN1cmVMZW5ndGggPSBhYmNUdW5lLmdldE1ldGVyRnJhY3Rpb24oKS5udW0gLyBhYmNUdW5lLmdldE1ldGVyRnJhY3Rpb24oKS5kZW47XG5cdGlmIChhYmNUdW5lLmZvcm1hdHRpbmcuc3RhZmZ3aWR0aCkge1xuXHRcdHRoaXMud2lkdGggPSBhYmNUdW5lLmZvcm1hdHRpbmcuc3RhZmZ3aWR0aCAqIDEuMzM7IC8vIFRoZSB3aWR0aCBpcyBleHByZXNzZWQgaW4gcHQ7IGNvbnZlcnQgdG8gcHguXG5cdH0gZWxzZSB7XG5cdFx0dGhpcy53aWR0aCA9IHRoaXMucmVuZGVyZXIuaXNQcmludCA/IHRoaXMuc3RhZmZ3aWR0aFByaW50IDogdGhpcy5zdGFmZndpZHRoU2NyZWVuO1xuXHR9XG5cblx0dmFyIHNjYWxlID0gYWJjVHVuZS5mb3JtYXR0aW5nLnNjYWxlID8gYWJjVHVuZS5mb3JtYXR0aW5nLnNjYWxlIDogdGhpcy5zY2FsZTtcblx0aWYgKHRoaXMucmVzcG9uc2l2ZSA9PT0gXCJyZXNpemVcIikgLy8gVGhlIHJlc2l6aW5nIHdpbGwgbWVzcyB3aXRoIHRoZSBzY2FsaW5nLCBzbyBqdXN0IGRvbid0IGRvIGl0IGV4cGxpY2l0bHkuXG5cdFx0c2NhbGUgPSB1bmRlZmluZWQ7XG5cdGlmIChzY2FsZSA9PT0gdW5kZWZpbmVkKSBzY2FsZSA9IHRoaXMucmVuZGVyZXIuaXNQcmludCA/IDAuNzUgOiAxO1xuXHR0aGlzLmFkanVzdE5vblNjYWxlZEl0ZW1zKHNjYWxlKTtcblx0cmV0dXJuIHNjYWxlO1xufTtcblxuRW5ncmF2ZXJDb250cm9sbGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RUdW5lRWxlbWVudHMgPSBmdW5jdGlvbiAoYWJjVHVuZSkge1xuXHRhYmNUdW5lLnRvcFRleHQgPSBuZXcgVG9wVGV4dChhYmNUdW5lLm1ldGFUZXh0LCBhYmNUdW5lLm1ldGFUZXh0SW5mbywgYWJjVHVuZS5mb3JtYXR0aW5nLCBhYmNUdW5lLmxpbmVzLCB0aGlzLndpZHRoLCB0aGlzLnJlbmRlcmVyLmlzUHJpbnQsIHRoaXMucmVuZGVyZXIucGFkZGluZy5sZWZ0LCB0aGlzLnJlbmRlcmVyLnNwYWNpbmcsIHRoaXMuY2xhc3Nlcy5zaG91bGRBZGRDbGFzc2VzLCB0aGlzLmdldFRleHRTaXplKTtcblxuXHQvLyBHZW5lcmF0ZSB0aGUgcmF3IHN0YWZmIGxpbmUgZGF0YVxuXHR2YXIgaTtcblx0dmFyIGFiY0xpbmU7XG5cdHZhciBoYXNQcmludGVkVGVtcG8gPSBmYWxzZTtcblx0dmFyIGhhc1NlZW5Ob25TdWJ0aXRsZSA9IGZhbHNlO1xuXHRmb3IgKGkgPSAwOyBpIDwgYWJjVHVuZS5saW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdGFiY0xpbmUgPSBhYmNUdW5lLmxpbmVzW2ldO1xuXHRcdGlmIChhYmNMaW5lLnN0YWZmKSB7XG5cdFx0XHRoYXNTZWVuTm9uU3VidGl0bGUgPSB0cnVlO1xuXHRcdFx0YWJjTGluZS5zdGFmZkdyb3VwID0gdGhpcy5lbmdyYXZlci5jcmVhdGVBQkNMaW5lKGFiY0xpbmUuc3RhZmYsICFoYXNQcmludGVkVGVtcG8gPyBhYmNUdW5lLm1ldGFUZXh0LnRlbXBvIDogbnVsbCwgaSk7XG5cdFx0XHRoYXNQcmludGVkVGVtcG8gPSB0cnVlO1xuXHRcdH0gZWxzZSBpZiAoYWJjTGluZS5zdWJ0aXRsZSkge1xuXHRcdFx0Ly8gSWYgdGhlIHN1YnRpdGxlIGlzIGF0IHRoZSB0b3AsIHRoZW4gaXQgd2FzIGFscmVhZHkgYWNjb3VudGVkIGZvci4gU28gc2tpcCBhbGwgc3VidGl0bGVzIHVudGlsIHRoZSBmaXJzdCBub24tc3VidGl0bGUgbGluZS5cblx0XHRcdGlmIChoYXNTZWVuTm9uU3VidGl0bGUpIHtcblx0XHRcdFx0dmFyIGNlbnRlciA9IHRoaXMud2lkdGggLyAyICsgdGhpcy5yZW5kZXJlci5wYWRkaW5nLmxlZnQ7XG5cdFx0XHRcdGFiY0xpbmUubm9uTXVzaWMgPSBuZXcgU3VidGl0bGUodGhpcy5yZW5kZXJlci5zcGFjaW5nLnN1YnRpdGxlLCBhYmNUdW5lLmZvcm1hdHRpbmcsIGFiY0xpbmUuc3VidGl0bGUsIGNlbnRlciwgdGhpcy5yZW5kZXJlci5wYWRkaW5nLmxlZnQsIHRoaXMuZ2V0VGV4dFNpemUpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoYWJjTGluZS50ZXh0ICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdGhhc1NlZW5Ob25TdWJ0aXRsZSA9IHRydWU7XG5cdFx0XHRhYmNMaW5lLm5vbk11c2ljID0gbmV3IEZyZWVUZXh0KGFiY0xpbmUudGV4dCwgYWJjTGluZS52c2tpcCwgdGhpcy5nZXRGb250QW5kQXR0ciwgdGhpcy5yZW5kZXJlci5wYWRkaW5nLmxlZnQsIHRoaXMud2lkdGgsIHRoaXMuZ2V0VGV4dFNpemUpO1xuXHRcdH0gZWxzZSBpZiAoYWJjTGluZS5zZXBhcmF0b3IgIT09IHVuZGVmaW5lZCAmJiBhYmNMaW5lLnNlcGFyYXRvci5saW5lTGVuZ3RoKSB7XG5cdFx0XHRoYXNTZWVuTm9uU3VidGl0bGUgPSB0cnVlO1xuXHRcdFx0YWJjTGluZS5ub25NdXNpYyA9IG5ldyBTZXBhcmF0b3IoYWJjTGluZS5zZXBhcmF0b3Iuc3BhY2VBYm92ZSwgYWJjTGluZS5zZXBhcmF0b3IubGluZUxlbmd0aCwgYWJjTGluZS5zZXBhcmF0b3Iuc3BhY2VCZWxvdyk7XG5cdFx0fVxuXHR9XG5cdGFiY1R1bmUuYm90dG9tVGV4dCA9IG5ldyBCb3R0b21UZXh0KGFiY1R1bmUubWV0YVRleHQsIHRoaXMud2lkdGgsIHRoaXMucmVuZGVyZXIuaXNQcmludCwgdGhpcy5yZW5kZXJlci5wYWRkaW5nLmxlZnQsIHRoaXMucmVuZGVyZXIuc3BhY2luZywgdGhpcy5jbGFzc2VzLnNob3VsZEFkZENsYXNzZXMsIHRoaXMuZ2V0VGV4dFNpemUpO1xufTtcblxuRW5ncmF2ZXJDb250cm9sbGVyLnByb3RvdHlwZS5lbmdyYXZlVHVuZSA9IGZ1bmN0aW9uIChhYmNUdW5lLCB0dW5lTnVtYmVyLCBsaW5lT2Zmc2V0KSB7XG5cblx0dmFyIG9yaWdKYXp6Q2hvcmRzID0gdGhpcy5qYXp6Y2hvcmRzXG5cdHZhciBzY2FsZSA9IHRoaXMuc2V0dXBUdW5lKGFiY1R1bmUsIHR1bmVOdW1iZXIpO1xuICBcblx0Ly8gQ3JlYXRlIGFsbCBvZiB0aGUgZWxlbWVudCBvYmplY3RzIHRoYXQgd2lsbCBhcHBlYXIgb24gdGhlIHBhZ2UuXG5cdHRoaXMuY29uc3RydWN0VHVuZUVsZW1lbnRzKGFiY1R1bmUpO1xuICBcblx0Ly9TZXQgdGhlIHRvcCB0ZXh0IG5vdyB0aGF0IHdlIGtub3cgdGhlIHdpZHRoXG4gIFxuXHQvLyBEbyBhbGwgdGhlIHBvc2l0aW9uaW5nLCBib3RoIGhvcml6b250YWxseSBhbmQgdmVydGljYWxseVxuXHR2YXIgbWF4V2lkdGggPSBsYXlvdXQodGhpcy5yZW5kZXJlciwgYWJjVHVuZSwgdGhpcy53aWR0aCwgdGhpcy5zcGFjZSwgdGhpcy5leHBhbmRUb1dpZGVzdCwgdGhpcy50aW1lQmFzZWRMYXlvdXQpO1xuICBcblx0Ly9TZXQgdGhlIHRvcCB0ZXh0IG5vdyB0aGF0IHdlIGtub3cgdGhlIHdpZHRoXG5cdGlmICh0aGlzLmV4cGFuZFRvV2lkZXN0ICYmIG1heFdpZHRoID4gdGhpcy53aWR0aCArIDEpIHtcbiAgXG5cdFx0YWJjVHVuZS50b3BUZXh0ID0gbmV3IFRvcFRleHQoYWJjVHVuZS5tZXRhVGV4dCwgYWJjVHVuZS5tZXRhVGV4dEluZm8sIGFiY1R1bmUuZm9ybWF0dGluZywgYWJjVHVuZS5saW5lcywgbWF4V2lkdGgsIHRoaXMucmVuZGVyZXIuaXNQcmludCwgdGhpcy5yZW5kZXJlci5wYWRkaW5nLmxlZnQsIHRoaXMucmVuZGVyZXIuc3BhY2luZywgdGhpcy5jbGFzc2VzLnNob3VsZEFkZENsYXNzZXMsIHRoaXMuZ2V0VGV4dFNpemUpO1xuICBcblx0XHRpZiAoKGFiY1R1bmUubGluZXMpJiYoYWJjVHVuZS5saW5lcy5sZW5ndGggPiAwKSl7XG5cdFx0XHR2YXIgbmxpbmVzID0gYWJjVHVuZS5saW5lcy5sZW5ndGg7XG5cblx0XHRcdGZvciAodmFyIGk9MDtpPG5saW5lczsrK2kpe1xuXHRcdFx0XHR2YXIgZW50cnkgPSBhYmNUdW5lLmxpbmVzW2ldO1xuXHRcdFx0XHRpZiAoZW50cnkubm9uTXVzaWMpe1xuXHRcdFx0XHRcdGlmICgoZW50cnkubm9uTXVzaWMucm93cykgJiYgKGVudHJ5Lm5vbk11c2ljLnJvd3MubGVuZ3RoID4gMCkpe1xuXHRcdFx0XHRcdFx0dmFyIG5Sb3dzID0gZW50cnkubm9uTXVzaWMucm93cy5sZW5ndGg7XG5cdFx0XHRcdFx0XHRmb3IgKHZhciBqPTA7ajxuUm93czsrK2ope1xuXHRcdFx0XHRcdFx0XHR2YXIgdGhpc1JvdyA9IGVudHJ5Lm5vbk11c2ljLnJvd3Nbal07XG5cdFx0XHRcdFx0XHRcdC8vIFJlY2VudGVyIHRoZSBlbGVtZW50IGlmIGl0J3MgYSBzdWJ0aXRsZSBvciBjZW50ZXJlZCB0ZXh0IFxuXHRcdFx0XHRcdFx0XHRpZiAodGhpc1Jvdy5sZWZ0KXtcblx0XHRcdFx0XHRcdFx0XHRpZiAoZW50cnkuc3VidGl0bGUpe1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpc1Jvdy5sZWZ0ID0gKG1heFdpZHRoLzIpICsgdGhpcy5yZW5kZXJlci5wYWRkaW5nLmxlZnQ7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICgoZW50cnkudGV4dCkmJihlbnRyeS50ZXh0Lmxlbmd0aD4wKSl7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlbnRyeS50ZXh0WzBdLmNlbnRlcil7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpc1Jvdy5sZWZ0ID0gKG1heFdpZHRoLzIpICsgdGhpcy5yZW5kZXJlci5wYWRkaW5nLmxlZnQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBEZWFsIHdpdGggdGFibGF0dXJlIGZvciBzdGFmZlxuXHRpZiAoYWJjVHVuZS50YWJsYXR1cmVzKSB7XG5cdCAgdGFibGF0dXJlcy5sYXlvdXRUYWJsYXR1cmVzKHRoaXMucmVuZGVyZXIsIGFiY1R1bmUpO1xuXHR9XG4gIFxuXHQvLyBEbyBhbGwgdGhlIHdyaXRpbmcgdG8gdGhlIFNWR1xuXHR2YXIgcmV0ID0gZHJhdyh0aGlzLnJlbmRlcmVyLCB0aGlzLmNsYXNzZXMsIGFiY1R1bmUsIHRoaXMud2lkdGgsIG1heFdpZHRoLCB0aGlzLnJlc3BvbnNpdmUsIHNjYWxlLCB0aGlzLnNlbGVjdFR5cGVzLCB0dW5lTnVtYmVyLCBsaW5lT2Zmc2V0KTtcblx0dGhpcy5zdGFmZmdyb3VwcyA9IHJldC5zdGFmZmdyb3Vwcztcblx0dGhpcy5zZWxlY3RhYmxlcyA9IHJldC5zZWxlY3RhYmxlcztcblx0aWYgKHRoaXMub25lU3ZnUGVyTGluZSkge1xuXHQgIHZhciBkaXYgPSB0aGlzLnJlbmRlcmVyLnBhcGVyLnN2Zy5wYXJlbnROb2RlO1xuXHQgIHRoaXMuc3ZncyA9IHNwbGl0U3ZnSW50b0xpbmVzKHRoaXMucmVuZGVyZXIsIGRpdiwgYWJjVHVuZS5tZXRhVGV4dC50aXRsZSwgdGhpcy5yZXNwb25zaXZlLCBzY2FsZSk7XG5cdH0gZWxzZSB7XG5cdCAgdGhpcy5zdmdzID0gW3RoaXMucmVuZGVyZXIucGFwZXIuc3ZnXTtcblx0fVxuXHRzZXR1cFNlbGVjdGlvbih0aGlzLCB0aGlzLnN2Z3MpO1xuXHRcblx0dGhpcy5qYXp6Y2hvcmRzID0gb3JpZ0phenpDaG9yZHNcbn07XG5cbmZ1bmN0aW9uIHNwbGl0U3ZnSW50b0xpbmVzKHJlbmRlcmVyLCBvdXRwdXQsIHRpdGxlLCByZXNwb25zaXZlLCBzY2FsZSkge1xuXHQvLyBFYWNoIGxpbmUgaXMgYSB0b3AgbGV2ZWwgPGc+IGluIHRoZSBzdmcuIFRvIHNwbGl0IGl0IGludG8gc2VwYXJhdGVcblx0Ly8gc3ZncyBpdGVyYXRlIHRocm91Z2ggZWFjaCBvZiB0aG9zZSBhbmQgcHV0IHRoZW0gaW4gYSBuZXcgc3ZnLiBTaW5jZVxuXHQvLyB0aGV5IGFyZSBwbGFjZWQgYWJzb2x1dGVseSwgdGhlIHZpZXdCb3ggbmVlZHMgdG8gYmUgbWFuaXB1bGF0ZWQgdG9cblx0Ly8gZ2V0IHRoZSBjb3JyZWN0IHZlcnRpY2FsIHBvc2l0aW9uaW5nLlxuXHQvLyBXZSBjb3B5IGFsbCB0aGUgYXR0cmlidXRlcyBmcm9tIHRoZSBvcmlnaW5hbCBzdmcgZXhjZXB0IGZvciB0aGUgYXJpYS1sYWJlbFxuXHQvLyBzaW5jZSB3ZSB3YW50IHRoYXQgdG8gaW5jbHVkZSBhIGNvdW50LiBBbmQgdGhlIGhlaWdodCBpcyBub3cgYSBmcmFjdGlvbiBvZiB0aGUgb3JpZ2luYWwgc3ZnLlxuXHRpZiAoIXRpdGxlKSB0aXRsZSA9IFwiVW50aXRsZWRcIlxuXHR2YXIgc291cmNlID0gb3V0cHV0LnF1ZXJ5U2VsZWN0b3IoXCJzdmdcIilcblx0aWYgKHJlc3BvbnNpdmUgPT09ICdyZXNpemUnKVxuXHRcdG91dHB1dC5zdHlsZS5wYWRkaW5nQm90dG9tID0gJydcblx0dmFyIHN0eWxlID0gc291cmNlLnF1ZXJ5U2VsZWN0b3IoXCJzdHlsZVwiKVxuXHR2YXIgd2lkdGggPSByZXNwb25zaXZlID09PSAncmVzaXplJyA/IHNvdXJjZS52aWV3Qm94LmJhc2VWYWwud2lkdGggOiBzb3VyY2UuZ2V0QXR0cmlidXRlKFwid2lkdGhcIilcblx0dmFyIHNlY3Rpb25zID0gb3V0cHV0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJzdmcgPiBnXCIpIC8vIGVhY2ggc2VjdGlvbiBpcyBhIGxpbmUsIG9yIHRoZSB0b3AgbWF0dGVyIG9yIHRoZSBib3R0b20gbWF0dGVyLCBvciB0ZXh0IHRoYXQgaGFzIGJlZW4gaW5zZXJ0ZWQuXG5cdHZhciBuZXh0VG9wID0gMCAvLyBUaGVyZSBhcmUgb2Z0ZW4gZ2FwcyBiZXR3ZWVuIHRoZSBlbGVtZW50cyBmb3Igc3BhY2luZywgc28gdGhlIGFjdHVhbCB0b3AgYW5kIGhlaWdodCBuZWVkcyB0byBiZSBpbmZlcnJlZC5cblx0dmFyIHdyYXBwZXJzID0gW10gLy8gQ3JlYXRlIGFsbCB0aGUgZWxlbWVudHMgYW5kIHBsYWNlIHRoZW0gYXQgb25jZSBiZWNhdXNlIHdlIHVzZSB0aGUgY3VycmVudCBzdmcgdG8gZ2V0IGRhdGEuIEl0IHdvdWxkIGRpc2FwcGVhciBhZnRlciBwbGFjaW5nIHRoZSBmaXJzdCBsaW5lLlxuXHR2YXIgc3ZncyA9IFtdXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgc2VjdGlvbiA9IHNlY3Rpb25zW2ldXG5cdFx0dmFyIGJveCA9IHNlY3Rpb24uZ2V0QkJveCgpXG5cdFx0dmFyIGdhcEJldHdlZW5MaW5lcyA9IGJveC55IC0gbmV4dFRvcCAvLyB0YWtlIHRoZSBtYXJnaW4gaW50byBhY2NvdW50XG5cdFx0dmFyIGhlaWdodCA9IGJveC5oZWlnaHQgKyBnYXBCZXR3ZWVuTGluZXM7XG5cdFx0dmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdHZhciBkaXZTdHlsZXMgPSBcIm92ZXJmbG93OiBoaWRkZW47XCJcblx0XHRpZiAocmVzcG9uc2l2ZSAhPT0gJ3Jlc2l6ZScpXG5cdFx0XHRkaXZTdHlsZXMgKz0gXCJoZWlnaHQ6XCIgKyAoaGVpZ2h0ICogc2NhbGUpICsgXCJweDtcIlxuXHRcdHdyYXBwZXIuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgZGl2U3R5bGVzKVxuXHRcdHZhciBzdmcgPSBkdXBsaWNhdGVTdmcoc291cmNlKVxuXHRcdHZhciBmdWxsVGl0bGUgPSBcIlNoZWV0IE11c2ljIGZvciBcXFwiXCIgKyB0aXRsZSArIFwiXFxcIiBzZWN0aW9uIFwiICsgKGkgKyAxKVxuXHRcdHN2Zy5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIGZ1bGxUaXRsZSlcblx0XHRpZiAocmVzcG9uc2l2ZSAhPT0gJ3Jlc2l6ZScpXG5cdFx0XHRzdmcuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIGhlaWdodClcblx0XHRpZiAocmVzcG9uc2l2ZSA9PT0gJ3Jlc2l6ZScpXG5cdFx0XHRzdmcuc3R5bGUucG9zaXRpb24gPSAnJ1xuXHRcdC8vIFRPRE8tUEVSOiBIYWNrISBOb3Qgc3VyZSB3aHkgdGhpcyBpcyBuZWVkZWQuXG5cdFx0dmFyIHZpZXdCb3hIZWlnaHQgPSByZW5kZXJlci5maXJlZm94MTEyID8gaGVpZ2h0KzEgOiBoZWlnaHRcblx0XHRzdmcuc2V0QXR0cmlidXRlKFwidmlld0JveFwiLCBcIjAgXCIgKyBuZXh0VG9wICsgXCIgXCIgKyB3aWR0aCArIFwiIFwiICsgdmlld0JveEhlaWdodClcblx0XHRzdmcuYXBwZW5kQ2hpbGQoc3R5bGUuY2xvbmVOb2RlKHRydWUpKVxuXHRcdHZhciB0aXRsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRpdGxlXCIpXG5cdFx0dGl0bGVFbC5pbm5lclRleHQgPSBmdWxsVGl0bGVcblx0XHRzdmcuYXBwZW5kQ2hpbGQodGl0bGVFbClcblx0XHRzdmcuYXBwZW5kQ2hpbGQoc2VjdGlvbilcblxuXHRcdHdyYXBwZXIuYXBwZW5kQ2hpbGQoc3ZnKVxuXHRcdHN2Z3MucHVzaChzdmcpXG5cdFx0b3V0cHV0LmFwcGVuZENoaWxkKHdyYXBwZXIpXG5cdFx0Ly93cmFwcGVycy5wdXNoKHdyYXBwZXIpXG5cdFx0bmV4dFRvcCA9IGJveC55ICsgYm94LmhlaWdodFxuXHR9XG5cdC8vIGZvciAoaSA9IDA7IGkgPCB3cmFwcGVycy5sZW5ndGg7IGkrKylcblx0Ly8gXHRvdXRwdXQuYXBwZW5kQ2hpbGQod3JhcHBlcnNbaV0pXG5cdG91dHB1dC5yZW1vdmVDaGlsZChzb3VyY2UpXG5cdHJldHVybiBzdmdzO1xufVxuXG5mdW5jdGlvbiBkdXBsaWNhdGVTdmcoc291cmNlKSB7XG5cdHZhciBzdmdOUyA9IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIjtcblx0dmFyIHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzdmdOUywgXCJzdmdcIik7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc291cmNlLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgYXR0ciA9IHNvdXJjZS5hdHRyaWJ1dGVzW2ldO1xuXHRcdGlmIChhdHRyLm5hbWUgIT09IFwiaGVpZ2h0XCIgJiYgYXR0ci5uYW1lICE9IFwiYXJpYS1sYWJlbFwiKVxuXHRcdFx0c3ZnLnNldEF0dHJpYnV0ZShhdHRyLm5hbWUsIGF0dHIudmFsdWUpXG5cdH1cblx0cmV0dXJuIHN2Zztcbn1cblxuRW5ncmF2ZXJDb250cm9sbGVyLnByb3RvdHlwZS5nZXREaW0gPSBmdW5jdGlvbiAoaGlzdG9yeUVsKSB7XG5cdC8vIEdldCB0aGUgZGltZW5zaW9ucyBvbiBkZW1hbmQgYmVjYXVzZSB0aGUgZ2V0QkJveCBjYWxsIGlzIGV4cGVuc2l2ZS5cblx0aWYgKCFoaXN0b3J5RWwuZGltKSB7XG5cdFx0dmFyIGJveCA9IGhpc3RvcnlFbC5zdmdFbC5nZXRCQm94KCk7XG5cdFx0aGlzdG9yeUVsLmRpbSA9IHsgbGVmdDogTWF0aC5yb3VuZChib3gueCksIHRvcDogTWF0aC5yb3VuZChib3gueSksIHJpZ2h0OiBNYXRoLnJvdW5kKGJveC54ICsgYm94LndpZHRoKSwgYm90dG9tOiBNYXRoLnJvdW5kKGJveC55ICsgYm94LmhlaWdodCkgfTtcblx0fVxuXHRyZXR1cm4gaGlzdG9yeUVsLmRpbTtcbn07XG5cbkVuZ3JhdmVyQ29udHJvbGxlci5wcm90b3R5cGUuYWRkU2VsZWN0TGlzdGVuZXIgPSBmdW5jdGlvbiAoY2xpY2tMaXN0ZW5lcikge1xuXHR0aGlzLmxpc3RlbmVyc1t0aGlzLmxpc3RlbmVycy5sZW5ndGhdID0gY2xpY2tMaXN0ZW5lcjtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRW5ncmF2ZXJDb250cm9sbGVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/engraver-controller.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/helpers/classes.js":
/*!*********************************************************!*\
  !*** ./node_modules/abcjs/src/write/helpers/classes.js ***!
  \*********************************************************/
/***/ ((module) => {

eval("var Classes = function Classes(options) {\n\tthis.shouldAddClasses = options.shouldAddClasses;\n\tthis.reset();\n}\n\nClasses.prototype.reset = function () {\n\tthis.lineNumber = null;\n\tthis.voiceNumber = null;\n\tthis.measureNumber = null;\n\tthis.measureTotalPerLine = [];\n\tthis.noteNumber = null;\n}\n\nClasses.prototype.incrLine = function () {\n\tif (this.lineNumber === null)\n\t\tthis.lineNumber = 0;\n\telse\n\t\tthis.lineNumber++;\n\tthis.voiceNumber = null;\n\tthis.measureNumber = null;\n\tthis.noteNumber = null;\n};\n\nClasses.prototype.incrVoice = function () {\n\tif (this.voiceNumber === null)\n\t\tthis.voiceNumber = 0;\n\telse\n\t\tthis.voiceNumber++;\n\tthis.measureNumber = null;\n\tthis.noteNumber = null;\n};\n\nClasses.prototype.isInMeasure = function () {\n\treturn this.measureNumber !== null;\n};\n\nClasses.prototype.newMeasure = function () {\n\tif (this.measureNumber)\n\t\tthis.measureTotalPerLine[this.lineNumber] = this.measureNumber;\n\tthis.measureNumber = null;\n\tthis.noteNumber = null;\n};\n\nClasses.prototype.startMeasure = function () {\n\tthis.measureNumber = 0;\n\tthis.noteNumber = 0;\n};\n\nClasses.prototype.incrMeasure = function () {\n\tthis.measureNumber++;\n\tthis.noteNumber = 0;\n};\n\nClasses.prototype.incrNote = function () {\n\tthis.noteNumber++;\n};\n\nClasses.prototype.measureTotal = function () {\n\tvar total = 0;\n\tfor (var i = 0; i < this.lineNumber; i++)\n\t\ttotal += this.measureTotalPerLine[i] ? this.measureTotalPerLine[i] : 0; // This can be null when non-music things are present.\n\tif (this.measureNumber)\n\t\ttotal += this.measureNumber;\n\treturn total;\n};\n\nClasses.prototype.getCurrent = function (c) {\n\treturn {\n\t\tline: this.lineNumber,\n\t\tmeasure: this.measureNumber,\n\t\tmeasureTotal: this.measureTotal(),\n\t\tvoice: this.voiceNumber,\n\t\tnote: this.noteNumber\n\t};\n};\n\nClasses.prototype.generate = function (c) {\n\tif (!this.shouldAddClasses)\n\t\treturn \"\";\n\tvar ret = [];\n\tif (c && c.length > 0) ret.push(c);\n\tif (c === \"abcjs-tab-number\") // TODO-PER-HACK! straighten out the tablature\n\t\treturn ret.join(' ')\n\tif (c === \"text instrument-name\")\n\t\treturn \"abcjs-text abcjs-instrument-name\"\n\tif (this.lineNumber !== null) ret.push(\"l\" + this.lineNumber);\n\tif (this.measureNumber !== null) ret.push(\"m\" + this.measureNumber);\n\tif (this.measureNumber !== null) ret.push(\"mm\" + this.measureTotal()); // measureNumber is null between measures so this is still the test for measureTotal\n\tif (this.voiceNumber !== null) ret.push(\"v\" + this.voiceNumber);\n\tif (c && (c.indexOf('note') >= 0 || c.indexOf('rest') >= 0 || c.indexOf('lyric') >= 0) && this.noteNumber !== null) ret.push(\"n\" + this.noteNumber);\n\t// add a prefix to all classes that abcjs adds.\n\tif (ret.length > 0) {\n\t\tret = ret.join(' '); // Some strings are compound classes - that is, specify more than one class in a string.\n\t\tret = ret.split(' ');\n\t\tfor (var i = 0; i < ret.length; i++) {\n\t\t\tif (ret[i].indexOf('abcjs-') !== 0 && ret[i].length > 0) // if the prefix doesn't already exist and the class is not blank.\n\t\t\t\tret[i] = 'abcjs-' + ret[i];\n\t\t}\n\t}\n\treturn ret.join(' ');\n};\n\n\nmodule.exports = Classes;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2hlbHBlcnMvY2xhc3Nlcy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLHFCQUFxQjtBQUN0QywwRUFBMEU7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0U7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQSxrQkFBa0IsZ0JBQWdCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvaGVscGVycy9jbGFzc2VzLmpzP2Q5YjMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIENsYXNzZXMgPSBmdW5jdGlvbiBDbGFzc2VzKG9wdGlvbnMpIHtcblx0dGhpcy5zaG91bGRBZGRDbGFzc2VzID0gb3B0aW9ucy5zaG91bGRBZGRDbGFzc2VzO1xuXHR0aGlzLnJlc2V0KCk7XG59XG5cbkNsYXNzZXMucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuXHR0aGlzLmxpbmVOdW1iZXIgPSBudWxsO1xuXHR0aGlzLnZvaWNlTnVtYmVyID0gbnVsbDtcblx0dGhpcy5tZWFzdXJlTnVtYmVyID0gbnVsbDtcblx0dGhpcy5tZWFzdXJlVG90YWxQZXJMaW5lID0gW107XG5cdHRoaXMubm90ZU51bWJlciA9IG51bGw7XG59XG5cbkNsYXNzZXMucHJvdG90eXBlLmluY3JMaW5lID0gZnVuY3Rpb24gKCkge1xuXHRpZiAodGhpcy5saW5lTnVtYmVyID09PSBudWxsKVxuXHRcdHRoaXMubGluZU51bWJlciA9IDA7XG5cdGVsc2Vcblx0XHR0aGlzLmxpbmVOdW1iZXIrKztcblx0dGhpcy52b2ljZU51bWJlciA9IG51bGw7XG5cdHRoaXMubWVhc3VyZU51bWJlciA9IG51bGw7XG5cdHRoaXMubm90ZU51bWJlciA9IG51bGw7XG59O1xuXG5DbGFzc2VzLnByb3RvdHlwZS5pbmNyVm9pY2UgPSBmdW5jdGlvbiAoKSB7XG5cdGlmICh0aGlzLnZvaWNlTnVtYmVyID09PSBudWxsKVxuXHRcdHRoaXMudm9pY2VOdW1iZXIgPSAwO1xuXHRlbHNlXG5cdFx0dGhpcy52b2ljZU51bWJlcisrO1xuXHR0aGlzLm1lYXN1cmVOdW1iZXIgPSBudWxsO1xuXHR0aGlzLm5vdGVOdW1iZXIgPSBudWxsO1xufTtcblxuQ2xhc3Nlcy5wcm90b3R5cGUuaXNJbk1lYXN1cmUgPSBmdW5jdGlvbiAoKSB7XG5cdHJldHVybiB0aGlzLm1lYXN1cmVOdW1iZXIgIT09IG51bGw7XG59O1xuXG5DbGFzc2VzLnByb3RvdHlwZS5uZXdNZWFzdXJlID0gZnVuY3Rpb24gKCkge1xuXHRpZiAodGhpcy5tZWFzdXJlTnVtYmVyKVxuXHRcdHRoaXMubWVhc3VyZVRvdGFsUGVyTGluZVt0aGlzLmxpbmVOdW1iZXJdID0gdGhpcy5tZWFzdXJlTnVtYmVyO1xuXHR0aGlzLm1lYXN1cmVOdW1iZXIgPSBudWxsO1xuXHR0aGlzLm5vdGVOdW1iZXIgPSBudWxsO1xufTtcblxuQ2xhc3Nlcy5wcm90b3R5cGUuc3RhcnRNZWFzdXJlID0gZnVuY3Rpb24gKCkge1xuXHR0aGlzLm1lYXN1cmVOdW1iZXIgPSAwO1xuXHR0aGlzLm5vdGVOdW1iZXIgPSAwO1xufTtcblxuQ2xhc3Nlcy5wcm90b3R5cGUuaW5jck1lYXN1cmUgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMubWVhc3VyZU51bWJlcisrO1xuXHR0aGlzLm5vdGVOdW1iZXIgPSAwO1xufTtcblxuQ2xhc3Nlcy5wcm90b3R5cGUuaW5jck5vdGUgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMubm90ZU51bWJlcisrO1xufTtcblxuQ2xhc3Nlcy5wcm90b3R5cGUubWVhc3VyZVRvdGFsID0gZnVuY3Rpb24gKCkge1xuXHR2YXIgdG90YWwgPSAwO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGluZU51bWJlcjsgaSsrKVxuXHRcdHRvdGFsICs9IHRoaXMubWVhc3VyZVRvdGFsUGVyTGluZVtpXSA/IHRoaXMubWVhc3VyZVRvdGFsUGVyTGluZVtpXSA6IDA7IC8vIFRoaXMgY2FuIGJlIG51bGwgd2hlbiBub24tbXVzaWMgdGhpbmdzIGFyZSBwcmVzZW50LlxuXHRpZiAodGhpcy5tZWFzdXJlTnVtYmVyKVxuXHRcdHRvdGFsICs9IHRoaXMubWVhc3VyZU51bWJlcjtcblx0cmV0dXJuIHRvdGFsO1xufTtcblxuQ2xhc3Nlcy5wcm90b3R5cGUuZ2V0Q3VycmVudCA9IGZ1bmN0aW9uIChjKSB7XG5cdHJldHVybiB7XG5cdFx0bGluZTogdGhpcy5saW5lTnVtYmVyLFxuXHRcdG1lYXN1cmU6IHRoaXMubWVhc3VyZU51bWJlcixcblx0XHRtZWFzdXJlVG90YWw6IHRoaXMubWVhc3VyZVRvdGFsKCksXG5cdFx0dm9pY2U6IHRoaXMudm9pY2VOdW1iZXIsXG5cdFx0bm90ZTogdGhpcy5ub3RlTnVtYmVyXG5cdH07XG59O1xuXG5DbGFzc2VzLnByb3RvdHlwZS5nZW5lcmF0ZSA9IGZ1bmN0aW9uIChjKSB7XG5cdGlmICghdGhpcy5zaG91bGRBZGRDbGFzc2VzKVxuXHRcdHJldHVybiBcIlwiO1xuXHR2YXIgcmV0ID0gW107XG5cdGlmIChjICYmIGMubGVuZ3RoID4gMCkgcmV0LnB1c2goYyk7XG5cdGlmIChjID09PSBcImFiY2pzLXRhYi1udW1iZXJcIikgLy8gVE9ETy1QRVItSEFDSyEgc3RyYWlnaHRlbiBvdXQgdGhlIHRhYmxhdHVyZVxuXHRcdHJldHVybiByZXQuam9pbignICcpXG5cdGlmIChjID09PSBcInRleHQgaW5zdHJ1bWVudC1uYW1lXCIpXG5cdFx0cmV0dXJuIFwiYWJjanMtdGV4dCBhYmNqcy1pbnN0cnVtZW50LW5hbWVcIlxuXHRpZiAodGhpcy5saW5lTnVtYmVyICE9PSBudWxsKSByZXQucHVzaChcImxcIiArIHRoaXMubGluZU51bWJlcik7XG5cdGlmICh0aGlzLm1lYXN1cmVOdW1iZXIgIT09IG51bGwpIHJldC5wdXNoKFwibVwiICsgdGhpcy5tZWFzdXJlTnVtYmVyKTtcblx0aWYgKHRoaXMubWVhc3VyZU51bWJlciAhPT0gbnVsbCkgcmV0LnB1c2goXCJtbVwiICsgdGhpcy5tZWFzdXJlVG90YWwoKSk7IC8vIG1lYXN1cmVOdW1iZXIgaXMgbnVsbCBiZXR3ZWVuIG1lYXN1cmVzIHNvIHRoaXMgaXMgc3RpbGwgdGhlIHRlc3QgZm9yIG1lYXN1cmVUb3RhbFxuXHRpZiAodGhpcy52b2ljZU51bWJlciAhPT0gbnVsbCkgcmV0LnB1c2goXCJ2XCIgKyB0aGlzLnZvaWNlTnVtYmVyKTtcblx0aWYgKGMgJiYgKGMuaW5kZXhPZignbm90ZScpID49IDAgfHwgYy5pbmRleE9mKCdyZXN0JykgPj0gMCB8fCBjLmluZGV4T2YoJ2x5cmljJykgPj0gMCkgJiYgdGhpcy5ub3RlTnVtYmVyICE9PSBudWxsKSByZXQucHVzaChcIm5cIiArIHRoaXMubm90ZU51bWJlcik7XG5cdC8vIGFkZCBhIHByZWZpeCB0byBhbGwgY2xhc3NlcyB0aGF0IGFiY2pzIGFkZHMuXG5cdGlmIChyZXQubGVuZ3RoID4gMCkge1xuXHRcdHJldCA9IHJldC5qb2luKCcgJyk7IC8vIFNvbWUgc3RyaW5ncyBhcmUgY29tcG91bmQgY2xhc3NlcyAtIHRoYXQgaXMsIHNwZWNpZnkgbW9yZSB0aGFuIG9uZSBjbGFzcyBpbiBhIHN0cmluZy5cblx0XHRyZXQgPSByZXQuc3BsaXQoJyAnKTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHJldC5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKHJldFtpXS5pbmRleE9mKCdhYmNqcy0nKSAhPT0gMCAmJiByZXRbaV0ubGVuZ3RoID4gMCkgLy8gaWYgdGhlIHByZWZpeCBkb2Vzbid0IGFscmVhZHkgZXhpc3QgYW5kIHRoZSBjbGFzcyBpcyBub3QgYmxhbmsuXG5cdFx0XHRcdHJldFtpXSA9ICdhYmNqcy0nICsgcmV0W2ldO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmV0LmpvaW4oJyAnKTtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBDbGFzc2VzO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/helpers/classes.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/helpers/get-font-and-attr.js":
/*!*******************************************************************!*\
  !*** ./node_modules/abcjs/src/write/helpers/get-font-and-attr.js ***!
  \*******************************************************************/
/***/ ((module) => {

eval("var GetFontAndAttr = function GetFontAndAttr(formatting, classes) {\n\tthis.formatting = formatting;\n\tthis.classes = classes;\n};\n\nGetFontAndAttr.prototype.updateFonts = function (fontOverrides) {\n\tif (fontOverrides.gchordfont)\n\t\tthis.formatting.gchordfont = fontOverrides.gchordfont;\n\tif (fontOverrides.tripletfont)\n\t\tthis.formatting.tripletfont = fontOverrides.tripletfont;\n\tif (fontOverrides.annotationfont)\n\t\tthis.formatting.annotationfont = fontOverrides.annotationfont;\n\tif (fontOverrides.vocalfont)\n\t\tthis.formatting.vocalfont = fontOverrides.vocalfont;\n};\n\nGetFontAndAttr.prototype.getFamily = function (type) {\n\tif (type[0] === '\"' && type[type.length-1] === '\"') {\n\t\treturn type.substring(1, type.length-1)\n\t}\n\treturn type\n};\n\nGetFontAndAttr.prototype.calc = function (type, klass) {\n\tvar font;\n\tif (typeof type === 'string') {\n\t\tfont = this.formatting[type];\n\t\t// Raphael deliberately changes the font units to pixels for some reason, so we need to change points to pixels here.\n\t\tif (font)\n\t\t\tfont = { face: font.face, size: Math.round(font.size * 4 / 3), decoration: font.decoration, style: font.style, weight: font.weight, box: font.box };\n\t\telse\n\t\t\tfont = { face: \"Arial\", size: Math.round(12 * 4 / 3), decoration: \"underline\", style: \"normal\", weight: \"normal\" };\n\t} else\n\t\tfont = { face: type.face, size: Math.round(type.size * 4 / 3), decoration: type.decoration, style: type.style, weight: type.weight, box: type.box };\n\tvar paddingPercent = this.formatting.fontboxpadding ? this.formatting.fontboxpadding : 0.1\n\tfont.padding = font.size * paddingPercent;\n\n\tvar attr = {\n\t\t\"font-size\": font.size, 'font-style': font.style,\n\t\t\"font-family\": this.getFamily(font.face), 'font-weight': font.weight, 'text-decoration': font.decoration,\n\t\t'class': this.classes.generate(klass)\n\t};\n\treturn { font: font, attr: attr };\n};\n\nmodule.exports = GetFontAndAttr;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2hlbHBlcnMvZ2V0LWZvbnQtYW5kLWF0dHIuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBLFlBQVk7QUFDWixHQUFHO0FBQ0gsV0FBVztBQUNYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9oZWxwZXJzL2dldC1mb250LWFuZC1hdHRyLmpzPzI1NmEiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIEdldEZvbnRBbmRBdHRyID0gZnVuY3Rpb24gR2V0Rm9udEFuZEF0dHIoZm9ybWF0dGluZywgY2xhc3Nlcykge1xuXHR0aGlzLmZvcm1hdHRpbmcgPSBmb3JtYXR0aW5nO1xuXHR0aGlzLmNsYXNzZXMgPSBjbGFzc2VzO1xufTtcblxuR2V0Rm9udEFuZEF0dHIucHJvdG90eXBlLnVwZGF0ZUZvbnRzID0gZnVuY3Rpb24gKGZvbnRPdmVycmlkZXMpIHtcblx0aWYgKGZvbnRPdmVycmlkZXMuZ2Nob3JkZm9udClcblx0XHR0aGlzLmZvcm1hdHRpbmcuZ2Nob3JkZm9udCA9IGZvbnRPdmVycmlkZXMuZ2Nob3JkZm9udDtcblx0aWYgKGZvbnRPdmVycmlkZXMudHJpcGxldGZvbnQpXG5cdFx0dGhpcy5mb3JtYXR0aW5nLnRyaXBsZXRmb250ID0gZm9udE92ZXJyaWRlcy50cmlwbGV0Zm9udDtcblx0aWYgKGZvbnRPdmVycmlkZXMuYW5ub3RhdGlvbmZvbnQpXG5cdFx0dGhpcy5mb3JtYXR0aW5nLmFubm90YXRpb25mb250ID0gZm9udE92ZXJyaWRlcy5hbm5vdGF0aW9uZm9udDtcblx0aWYgKGZvbnRPdmVycmlkZXMudm9jYWxmb250KVxuXHRcdHRoaXMuZm9ybWF0dGluZy52b2NhbGZvbnQgPSBmb250T3ZlcnJpZGVzLnZvY2FsZm9udDtcbn07XG5cbkdldEZvbnRBbmRBdHRyLnByb3RvdHlwZS5nZXRGYW1pbHkgPSBmdW5jdGlvbiAodHlwZSkge1xuXHRpZiAodHlwZVswXSA9PT0gJ1wiJyAmJiB0eXBlW3R5cGUubGVuZ3RoLTFdID09PSAnXCInKSB7XG5cdFx0cmV0dXJuIHR5cGUuc3Vic3RyaW5nKDEsIHR5cGUubGVuZ3RoLTEpXG5cdH1cblx0cmV0dXJuIHR5cGVcbn07XG5cbkdldEZvbnRBbmRBdHRyLnByb3RvdHlwZS5jYWxjID0gZnVuY3Rpb24gKHR5cGUsIGtsYXNzKSB7XG5cdHZhciBmb250O1xuXHRpZiAodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnKSB7XG5cdFx0Zm9udCA9IHRoaXMuZm9ybWF0dGluZ1t0eXBlXTtcblx0XHQvLyBSYXBoYWVsIGRlbGliZXJhdGVseSBjaGFuZ2VzIHRoZSBmb250IHVuaXRzIHRvIHBpeGVscyBmb3Igc29tZSByZWFzb24sIHNvIHdlIG5lZWQgdG8gY2hhbmdlIHBvaW50cyB0byBwaXhlbHMgaGVyZS5cblx0XHRpZiAoZm9udClcblx0XHRcdGZvbnQgPSB7IGZhY2U6IGZvbnQuZmFjZSwgc2l6ZTogTWF0aC5yb3VuZChmb250LnNpemUgKiA0IC8gMyksIGRlY29yYXRpb246IGZvbnQuZGVjb3JhdGlvbiwgc3R5bGU6IGZvbnQuc3R5bGUsIHdlaWdodDogZm9udC53ZWlnaHQsIGJveDogZm9udC5ib3ggfTtcblx0XHRlbHNlXG5cdFx0XHRmb250ID0geyBmYWNlOiBcIkFyaWFsXCIsIHNpemU6IE1hdGgucm91bmQoMTIgKiA0IC8gMyksIGRlY29yYXRpb246IFwidW5kZXJsaW5lXCIsIHN0eWxlOiBcIm5vcm1hbFwiLCB3ZWlnaHQ6IFwibm9ybWFsXCIgfTtcblx0fSBlbHNlXG5cdFx0Zm9udCA9IHsgZmFjZTogdHlwZS5mYWNlLCBzaXplOiBNYXRoLnJvdW5kKHR5cGUuc2l6ZSAqIDQgLyAzKSwgZGVjb3JhdGlvbjogdHlwZS5kZWNvcmF0aW9uLCBzdHlsZTogdHlwZS5zdHlsZSwgd2VpZ2h0OiB0eXBlLndlaWdodCwgYm94OiB0eXBlLmJveCB9O1xuXHR2YXIgcGFkZGluZ1BlcmNlbnQgPSB0aGlzLmZvcm1hdHRpbmcuZm9udGJveHBhZGRpbmcgPyB0aGlzLmZvcm1hdHRpbmcuZm9udGJveHBhZGRpbmcgOiAwLjFcblx0Zm9udC5wYWRkaW5nID0gZm9udC5zaXplICogcGFkZGluZ1BlcmNlbnQ7XG5cblx0dmFyIGF0dHIgPSB7XG5cdFx0XCJmb250LXNpemVcIjogZm9udC5zaXplLCAnZm9udC1zdHlsZSc6IGZvbnQuc3R5bGUsXG5cdFx0XCJmb250LWZhbWlseVwiOiB0aGlzLmdldEZhbWlseShmb250LmZhY2UpLCAnZm9udC13ZWlnaHQnOiBmb250LndlaWdodCwgJ3RleHQtZGVjb3JhdGlvbic6IGZvbnQuZGVjb3JhdGlvbixcblx0XHQnY2xhc3MnOiB0aGlzLmNsYXNzZXMuZ2VuZXJhdGUoa2xhc3MpXG5cdH07XG5cdHJldHVybiB7IGZvbnQ6IGZvbnQsIGF0dHI6IGF0dHIgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gR2V0Rm9udEFuZEF0dHI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/helpers/get-font-and-attr.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/helpers/get-text-size.js":
/*!***************************************************************!*\
  !*** ./node_modules/abcjs/src/write/helpers/get-text-size.js ***!
  \***************************************************************/
/***/ ((module) => {

eval("var GetTextSize = function GetTextSize(getFontAndAttr, svg) {\n\tthis.getFontAndAttr = getFontAndAttr;\n\tthis.svg = svg;\n};\n\nGetTextSize.prototype.updateFonts = function (fontOverrides) {\n\tthis.getFontAndAttr.updateFonts(fontOverrides);\n};\n\nGetTextSize.prototype.attr = function (type, klass) {\n\treturn this.getFontAndAttr.calc(type, klass);\n};\n\nGetTextSize.prototype.getFamily = function (type) {\n\tif (type[0] === '\"' && type[type.length-1] === '\"') {\n\t\treturn type.substring(1, type.length-1)\n\t}\n\treturn type\n};\n\nGetTextSize.prototype.calc = function (text, type, klass, el) {\n\tvar hash;\n\t// This can be passed in either a string or a font. If it is a string it names one of the standard fonts.\n\tif (typeof type === 'string')\n\t\thash = this.attr(type, klass);\n\telse {\n\t\thash = {\n\t\t\tfont: {\n\t\t\t\tface: type.face,\n\t\t\t\tsize: type.size,\n\t\t\t\tdecoration: type.decoration,\n\t\t\t\tstyle: type.style,\n\t\t\t\tweight: type.weight\n\t\t\t},\n\t\t\tattr: {\n\t\t\t\t\"font-size\": type.size,\n\t\t\t\t\"font-style\": type.style,\n\t\t\t\t\"font-family\": this.getFamily(type.face),\n\t\t\t\t\"font-weight\": type.weight,\n\t\t\t\t\"text-decoration\": type.decoration,\n\t\t\t\t\"class\": this.getFontAndAttr.classes.generate(klass)\n\t\t\t}\n\t\t}\n\t}\n\tvar size = this.svg.getTextSize(text, hash.attr, el);\n\tif (hash.font.box) {\n\t\t// Add padding and an equal margin to each side.\n\t\treturn { height: size.height + hash.font.padding * 4, width: size.width + hash.font.padding * 4 };\n\t}\n\treturn size;\n};\n\nGetTextSize.prototype.baselineToCenter = function (text, type, klass, index, total) {\n\t// This is for the case where SVG wants to use the baseline of the first line as the Y coordinate.\n\t// If there are multiple lines of text or there is an array of text then that will not be centered so this adjusts it.\n\tvar height = this.calc(text, type, klass).height;\n\tvar fontHeight = this.attr(type, klass).font.size;\n\n\treturn height * 0.5 + (total - index - 2) * fontHeight;\n};\n\n\nmodule.exports = GetTextSize;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2hlbHBlcnMvZ2V0LXRleHQtc2l6ZS5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9oZWxwZXJzL2dldC10ZXh0LXNpemUuanM/NzdiNiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgR2V0VGV4dFNpemUgPSBmdW5jdGlvbiBHZXRUZXh0U2l6ZShnZXRGb250QW5kQXR0ciwgc3ZnKSB7XG5cdHRoaXMuZ2V0Rm9udEFuZEF0dHIgPSBnZXRGb250QW5kQXR0cjtcblx0dGhpcy5zdmcgPSBzdmc7XG59O1xuXG5HZXRUZXh0U2l6ZS5wcm90b3R5cGUudXBkYXRlRm9udHMgPSBmdW5jdGlvbiAoZm9udE92ZXJyaWRlcykge1xuXHR0aGlzLmdldEZvbnRBbmRBdHRyLnVwZGF0ZUZvbnRzKGZvbnRPdmVycmlkZXMpO1xufTtcblxuR2V0VGV4dFNpemUucHJvdG90eXBlLmF0dHIgPSBmdW5jdGlvbiAodHlwZSwga2xhc3MpIHtcblx0cmV0dXJuIHRoaXMuZ2V0Rm9udEFuZEF0dHIuY2FsYyh0eXBlLCBrbGFzcyk7XG59O1xuXG5HZXRUZXh0U2l6ZS5wcm90b3R5cGUuZ2V0RmFtaWx5ID0gZnVuY3Rpb24gKHR5cGUpIHtcblx0aWYgKHR5cGVbMF0gPT09ICdcIicgJiYgdHlwZVt0eXBlLmxlbmd0aC0xXSA9PT0gJ1wiJykge1xuXHRcdHJldHVybiB0eXBlLnN1YnN0cmluZygxLCB0eXBlLmxlbmd0aC0xKVxuXHR9XG5cdHJldHVybiB0eXBlXG59O1xuXG5HZXRUZXh0U2l6ZS5wcm90b3R5cGUuY2FsYyA9IGZ1bmN0aW9uICh0ZXh0LCB0eXBlLCBrbGFzcywgZWwpIHtcblx0dmFyIGhhc2g7XG5cdC8vIFRoaXMgY2FuIGJlIHBhc3NlZCBpbiBlaXRoZXIgYSBzdHJpbmcgb3IgYSBmb250LiBJZiBpdCBpcyBhIHN0cmluZyBpdCBuYW1lcyBvbmUgb2YgdGhlIHN0YW5kYXJkIGZvbnRzLlxuXHRpZiAodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnKVxuXHRcdGhhc2ggPSB0aGlzLmF0dHIodHlwZSwga2xhc3MpO1xuXHRlbHNlIHtcblx0XHRoYXNoID0ge1xuXHRcdFx0Zm9udDoge1xuXHRcdFx0XHRmYWNlOiB0eXBlLmZhY2UsXG5cdFx0XHRcdHNpemU6IHR5cGUuc2l6ZSxcblx0XHRcdFx0ZGVjb3JhdGlvbjogdHlwZS5kZWNvcmF0aW9uLFxuXHRcdFx0XHRzdHlsZTogdHlwZS5zdHlsZSxcblx0XHRcdFx0d2VpZ2h0OiB0eXBlLndlaWdodFxuXHRcdFx0fSxcblx0XHRcdGF0dHI6IHtcblx0XHRcdFx0XCJmb250LXNpemVcIjogdHlwZS5zaXplLFxuXHRcdFx0XHRcImZvbnQtc3R5bGVcIjogdHlwZS5zdHlsZSxcblx0XHRcdFx0XCJmb250LWZhbWlseVwiOiB0aGlzLmdldEZhbWlseSh0eXBlLmZhY2UpLFxuXHRcdFx0XHRcImZvbnQtd2VpZ2h0XCI6IHR5cGUud2VpZ2h0LFxuXHRcdFx0XHRcInRleHQtZGVjb3JhdGlvblwiOiB0eXBlLmRlY29yYXRpb24sXG5cdFx0XHRcdFwiY2xhc3NcIjogdGhpcy5nZXRGb250QW5kQXR0ci5jbGFzc2VzLmdlbmVyYXRlKGtsYXNzKVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHR2YXIgc2l6ZSA9IHRoaXMuc3ZnLmdldFRleHRTaXplKHRleHQsIGhhc2guYXR0ciwgZWwpO1xuXHRpZiAoaGFzaC5mb250LmJveCkge1xuXHRcdC8vIEFkZCBwYWRkaW5nIGFuZCBhbiBlcXVhbCBtYXJnaW4gdG8gZWFjaCBzaWRlLlxuXHRcdHJldHVybiB7IGhlaWdodDogc2l6ZS5oZWlnaHQgKyBoYXNoLmZvbnQucGFkZGluZyAqIDQsIHdpZHRoOiBzaXplLndpZHRoICsgaGFzaC5mb250LnBhZGRpbmcgKiA0IH07XG5cdH1cblx0cmV0dXJuIHNpemU7XG59O1xuXG5HZXRUZXh0U2l6ZS5wcm90b3R5cGUuYmFzZWxpbmVUb0NlbnRlciA9IGZ1bmN0aW9uICh0ZXh0LCB0eXBlLCBrbGFzcywgaW5kZXgsIHRvdGFsKSB7XG5cdC8vIFRoaXMgaXMgZm9yIHRoZSBjYXNlIHdoZXJlIFNWRyB3YW50cyB0byB1c2UgdGhlIGJhc2VsaW5lIG9mIHRoZSBmaXJzdCBsaW5lIGFzIHRoZSBZIGNvb3JkaW5hdGUuXG5cdC8vIElmIHRoZXJlIGFyZSBtdWx0aXBsZSBsaW5lcyBvZiB0ZXh0IG9yIHRoZXJlIGlzIGFuIGFycmF5IG9mIHRleHQgdGhlbiB0aGF0IHdpbGwgbm90IGJlIGNlbnRlcmVkIHNvIHRoaXMgYWRqdXN0cyBpdC5cblx0dmFyIGhlaWdodCA9IHRoaXMuY2FsYyh0ZXh0LCB0eXBlLCBrbGFzcykuaGVpZ2h0O1xuXHR2YXIgZm9udEhlaWdodCA9IHRoaXMuYXR0cih0eXBlLCBrbGFzcykuZm9udC5zaXplO1xuXG5cdHJldHVybiBoZWlnaHQgKiAwLjUgKyAodG90YWwgLSBpbmRleCAtIDIpICogZm9udEhlaWdodDtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBHZXRUZXh0U2l6ZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/helpers/get-text-size.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/helpers/set-class.js":
/*!***********************************************************!*\
  !*** ./node_modules/abcjs/src/write/helpers/set-class.js ***!
  \***********************************************************/
/***/ ((module) => {

eval("var setClass = function (elemset, addClass, removeClass, color) {\n\tif (!elemset)\n\t\treturn;\n\tfor (var i = 0; i < elemset.length; i++) {\n\t\tvar el = elemset[i];\n\t\tvar attr = el.getAttribute(\"highlight\");\n\t\tif (!attr) attr = \"fill\";\n\t\tel.setAttribute(attr, color);\n\t\tvar kls = el.getAttribute(\"class\");\n\t\tif (!kls) kls = \"\";\n\t\tkls = kls.replace(removeClass, \"\");\n\t\tkls = kls.replace(addClass, \"\");\n\t\tif (addClass.length > 0) {\n\t\t\tif (kls.length > 0 && kls[kls.length - 1] !== ' ') kls += \" \";\n\t\t\tkls += addClass;\n\t\t}\n\t\tel.setAttribute(\"class\", kls);\n\t}\n};\n\nmodule.exports = setClass;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2hlbHBlcnMvc2V0LWNsYXNzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixvQkFBb0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2hlbHBlcnMvc2V0LWNsYXNzLmpzP2JjNmIiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHNldENsYXNzID0gZnVuY3Rpb24gKGVsZW1zZXQsIGFkZENsYXNzLCByZW1vdmVDbGFzcywgY29sb3IpIHtcblx0aWYgKCFlbGVtc2V0KVxuXHRcdHJldHVybjtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtc2V0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGVsID0gZWxlbXNldFtpXTtcblx0XHR2YXIgYXR0ciA9IGVsLmdldEF0dHJpYnV0ZShcImhpZ2hsaWdodFwiKTtcblx0XHRpZiAoIWF0dHIpIGF0dHIgPSBcImZpbGxcIjtcblx0XHRlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgY29sb3IpO1xuXHRcdHZhciBrbHMgPSBlbC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcblx0XHRpZiAoIWtscykga2xzID0gXCJcIjtcblx0XHRrbHMgPSBrbHMucmVwbGFjZShyZW1vdmVDbGFzcywgXCJcIik7XG5cdFx0a2xzID0ga2xzLnJlcGxhY2UoYWRkQ2xhc3MsIFwiXCIpO1xuXHRcdGlmIChhZGRDbGFzcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRpZiAoa2xzLmxlbmd0aCA+IDAgJiYga2xzW2tscy5sZW5ndGggLSAxXSAhPT0gJyAnKSBrbHMgKz0gXCIgXCI7XG5cdFx0XHRrbHMgKz0gYWRkQ2xhc3M7XG5cdFx0fVxuXHRcdGVsLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIGtscyk7XG5cdH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0Q2xhc3M7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/helpers/set-class.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/helpers/spacing.js":
/*!*********************************************************!*\
  !*** ./node_modules/abcjs/src/write/helpers/spacing.js ***!
  \*********************************************************/
/***/ ((module) => {

eval("var spacing = {};\n\nspacing.FONTEM = 360;\nspacing.FONTSIZE = 30;\nspacing.STEP = spacing.FONTSIZE * 93 / 720;\nspacing.SPACE = 10;\nspacing.TOPNOTE = 15;\nspacing.STAVEHEIGHT = 100;\nspacing.INDENT = 50;\n\nmodule.exports = spacing;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2hlbHBlcnMvc3BhY2luZy5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9oZWxwZXJzL3NwYWNpbmcuanM/MjZlYiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgc3BhY2luZyA9IHt9O1xuXG5zcGFjaW5nLkZPTlRFTSA9IDM2MDtcbnNwYWNpbmcuRk9OVFNJWkUgPSAzMDtcbnNwYWNpbmcuU1RFUCA9IHNwYWNpbmcuRk9OVFNJWkUgKiA5MyAvIDcyMDtcbnNwYWNpbmcuU1BBQ0UgPSAxMDtcbnNwYWNpbmcuVE9QTk9URSA9IDE1O1xuc3BhY2luZy5TVEFWRUhFSUdIVCA9IDEwMDtcbnNwYWNpbmcuSU5ERU5UID0gNTA7XG5cbm1vZHVsZS5leHBvcnRzID0gc3BhY2luZztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/helpers/spacing.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/interactive/create-analysis.js":
/*!*********************************************************************!*\
  !*** ./node_modules/abcjs/src/write/interactive/create-analysis.js ***!
  \*********************************************************************/
/***/ ((module) => {

eval("function findNumber(klass, match, target, name) {\n\tif (klass.indexOf(match) === 0) {\n\t\tvar value = klass.replace(match, '');\n\t\tvar num = parseInt(value, 10);\n\t\tif ('' + num === value)\n\t\t\ttarget[name] = num;\n\t}\n}\n\nfunction createAnalysis(target, ev) {\n\tvar classes = [];\n\tif (target.absEl.elemset) {\n\t\tvar classObj = {};\n\t\tfor (var j = 0; j < target.absEl.elemset.length; j++) {\n\t\t\tvar es = target.absEl.elemset[j];\n\t\t\tif (es) {\n\t\t\t\tvar klass = es.getAttribute(\"class\").split(' ');\n\t\t\t\tfor (var k = 0; k < klass.length; k++)\n\t\t\t\t\tclassObj[klass[k]] = true;\n\t\t\t}\n\t\t}\n\t\tfor (var kk = 0; kk < Object.keys(classObj).length; kk++)\n\t\t\tclasses.push(Object.keys(classObj)[kk]);\n\t}\n\tvar analysis = {};\n\tfor (var ii = 0; ii < classes.length; ii++) {\n\t\tfindNumber(classes[ii], \"abcjs-v\", analysis, \"voice\");\n\t\tfindNumber(classes[ii], \"abcjs-l\", analysis, \"line\");\n\t\tfindNumber(classes[ii], \"abcjs-m\", analysis, \"measure\");\n\t}\n\tif (target.staffPos)\n\t\tanalysis.staffPos = target.staffPos;\n\tvar closest = ev.target;\n\twhile (closest && closest.dataset && !closest.dataset.name && closest.tagName.toLowerCase() !== 'svg')\n\t\tclosest = closest.parentNode;\n\tvar parent = ev.target;\n\twhile (parent && parent.dataset && !parent.dataset.index && parent.tagName.toLowerCase() !== 'svg')\n\t\tparent = parent.parentNode;\n\tif (parent && parent.dataset) {\n\t\tanalysis.name = parent.dataset.name;\n\t\tanalysis.clickedName = closest.dataset.name;\n\t\tanalysis.parentClasses = parent.classList;\n\t}\n\tif (closest && closest.classList)\n\t\tanalysis.clickedClasses = closest.classList;\n\tanalysis.selectableElement = target.svgEl;\n\treturn {classes: classes, analysis: analysis}\n}\n\nmodule.exports = createAnalysis;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2ludGVyYWN0aXZlL2NyZWF0ZS1hbmFseXNpcy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlDQUFpQztBQUNuRDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixtQ0FBbUM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHFCQUFxQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2ludGVyYWN0aXZlL2NyZWF0ZS1hbmFseXNpcy5qcz9hODE1Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGZpbmROdW1iZXIoa2xhc3MsIG1hdGNoLCB0YXJnZXQsIG5hbWUpIHtcblx0aWYgKGtsYXNzLmluZGV4T2YobWF0Y2gpID09PSAwKSB7XG5cdFx0dmFyIHZhbHVlID0ga2xhc3MucmVwbGFjZShtYXRjaCwgJycpO1xuXHRcdHZhciBudW0gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuXHRcdGlmICgnJyArIG51bSA9PT0gdmFsdWUpXG5cdFx0XHR0YXJnZXRbbmFtZV0gPSBudW07XG5cdH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlQW5hbHlzaXModGFyZ2V0LCBldikge1xuXHR2YXIgY2xhc3NlcyA9IFtdO1xuXHRpZiAodGFyZ2V0LmFic0VsLmVsZW1zZXQpIHtcblx0XHR2YXIgY2xhc3NPYmogPSB7fTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHRhcmdldC5hYnNFbC5lbGVtc2V0Lmxlbmd0aDsgaisrKSB7XG5cdFx0XHR2YXIgZXMgPSB0YXJnZXQuYWJzRWwuZWxlbXNldFtqXTtcblx0XHRcdGlmIChlcykge1xuXHRcdFx0XHR2YXIga2xhc3MgPSBlcy5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKS5zcGxpdCgnICcpO1xuXHRcdFx0XHRmb3IgKHZhciBrID0gMDsgayA8IGtsYXNzLmxlbmd0aDsgaysrKVxuXHRcdFx0XHRcdGNsYXNzT2JqW2tsYXNzW2tdXSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGZvciAodmFyIGtrID0gMDsga2sgPCBPYmplY3Qua2V5cyhjbGFzc09iaikubGVuZ3RoOyBraysrKVxuXHRcdFx0Y2xhc3Nlcy5wdXNoKE9iamVjdC5rZXlzKGNsYXNzT2JqKVtra10pO1xuXHR9XG5cdHZhciBhbmFseXNpcyA9IHt9O1xuXHRmb3IgKHZhciBpaSA9IDA7IGlpIDwgY2xhc3Nlcy5sZW5ndGg7IGlpKyspIHtcblx0XHRmaW5kTnVtYmVyKGNsYXNzZXNbaWldLCBcImFiY2pzLXZcIiwgYW5hbHlzaXMsIFwidm9pY2VcIik7XG5cdFx0ZmluZE51bWJlcihjbGFzc2VzW2lpXSwgXCJhYmNqcy1sXCIsIGFuYWx5c2lzLCBcImxpbmVcIik7XG5cdFx0ZmluZE51bWJlcihjbGFzc2VzW2lpXSwgXCJhYmNqcy1tXCIsIGFuYWx5c2lzLCBcIm1lYXN1cmVcIik7XG5cdH1cblx0aWYgKHRhcmdldC5zdGFmZlBvcylcblx0XHRhbmFseXNpcy5zdGFmZlBvcyA9IHRhcmdldC5zdGFmZlBvcztcblx0dmFyIGNsb3Nlc3QgPSBldi50YXJnZXQ7XG5cdHdoaWxlIChjbG9zZXN0ICYmIGNsb3Nlc3QuZGF0YXNldCAmJiAhY2xvc2VzdC5kYXRhc2V0Lm5hbWUgJiYgY2xvc2VzdC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICdzdmcnKVxuXHRcdGNsb3Nlc3QgPSBjbG9zZXN0LnBhcmVudE5vZGU7XG5cdHZhciBwYXJlbnQgPSBldi50YXJnZXQ7XG5cdHdoaWxlIChwYXJlbnQgJiYgcGFyZW50LmRhdGFzZXQgJiYgIXBhcmVudC5kYXRhc2V0LmluZGV4ICYmIHBhcmVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICdzdmcnKVxuXHRcdHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlO1xuXHRpZiAocGFyZW50ICYmIHBhcmVudC5kYXRhc2V0KSB7XG5cdFx0YW5hbHlzaXMubmFtZSA9IHBhcmVudC5kYXRhc2V0Lm5hbWU7XG5cdFx0YW5hbHlzaXMuY2xpY2tlZE5hbWUgPSBjbG9zZXN0LmRhdGFzZXQubmFtZTtcblx0XHRhbmFseXNpcy5wYXJlbnRDbGFzc2VzID0gcGFyZW50LmNsYXNzTGlzdDtcblx0fVxuXHRpZiAoY2xvc2VzdCAmJiBjbG9zZXN0LmNsYXNzTGlzdClcblx0XHRhbmFseXNpcy5jbGlja2VkQ2xhc3NlcyA9IGNsb3Nlc3QuY2xhc3NMaXN0O1xuXHRhbmFseXNpcy5zZWxlY3RhYmxlRWxlbWVudCA9IHRhcmdldC5zdmdFbDtcblx0cmV0dXJuIHtjbGFzc2VzOiBjbGFzc2VzLCBhbmFseXNpczogYW5hbHlzaXN9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlQW5hbHlzaXM7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/interactive/create-analysis.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/interactive/find-selectable-element.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/abcjs/src/write/interactive/find-selectable-element.js ***!
  \*****************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var createAnalysis = __webpack_require__(/*! ./create-analysis */ \"(ssr)/./node_modules/abcjs/src/write/interactive/create-analysis.js\");\n\nfunction findSelectableElement(event) {\n\tvar selectable = event\n\twhile (selectable && selectable.attributes && selectable.tagName.toLowerCase() !== 'svg' && !selectable.attributes.selectable) {\n\t\tselectable = selectable.parentNode\n\t}\n\tif (selectable && selectable.attributes && selectable.attributes.selectable) {\n\t\tvar index = selectable.attributes['data-index'].nodeValue\n\t\tif (index) {\n\t\t\tindex = parseInt(index, 10)\n\t\t\tif (index >= 0 && index < this.selectables.length) {\n\t\t\t\tvar element = this.selectables[index]\n\t\t\t\tvar ret = createAnalysis(element, event)\n\t\t\t\tret.index = index\n\t\t\t\tret.element = element\n\t\t\t\treturn ret\n\t\t\t}\n\t\t}\n\t}\n\treturn null\n}\n\nmodule.exports = findSelectableElement;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2ludGVyYWN0aXZlL2ZpbmQtc2VsZWN0YWJsZS1lbGVtZW50LmpzIiwibWFwcGluZ3MiOiJBQUFBLHFCQUFxQixtQkFBTyxDQUFDLDhGQUFtQjs7QUFFaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9pbnRlcmFjdGl2ZS9maW5kLXNlbGVjdGFibGUtZWxlbWVudC5qcz8yOTQ2Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBjcmVhdGVBbmFseXNpcyA9IHJlcXVpcmUoJy4vY3JlYXRlLWFuYWx5c2lzJyk7XG5cbmZ1bmN0aW9uIGZpbmRTZWxlY3RhYmxlRWxlbWVudChldmVudCkge1xuXHR2YXIgc2VsZWN0YWJsZSA9IGV2ZW50XG5cdHdoaWxlIChzZWxlY3RhYmxlICYmIHNlbGVjdGFibGUuYXR0cmlidXRlcyAmJiBzZWxlY3RhYmxlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ3N2ZycgJiYgIXNlbGVjdGFibGUuYXR0cmlidXRlcy5zZWxlY3RhYmxlKSB7XG5cdFx0c2VsZWN0YWJsZSA9IHNlbGVjdGFibGUucGFyZW50Tm9kZVxuXHR9XG5cdGlmIChzZWxlY3RhYmxlICYmIHNlbGVjdGFibGUuYXR0cmlidXRlcyAmJiBzZWxlY3RhYmxlLmF0dHJpYnV0ZXMuc2VsZWN0YWJsZSkge1xuXHRcdHZhciBpbmRleCA9IHNlbGVjdGFibGUuYXR0cmlidXRlc1snZGF0YS1pbmRleCddLm5vZGVWYWx1ZVxuXHRcdGlmIChpbmRleCkge1xuXHRcdFx0aW5kZXggPSBwYXJzZUludChpbmRleCwgMTApXG5cdFx0XHRpZiAoaW5kZXggPj0gMCAmJiBpbmRleCA8IHRoaXMuc2VsZWN0YWJsZXMubGVuZ3RoKSB7XG5cdFx0XHRcdHZhciBlbGVtZW50ID0gdGhpcy5zZWxlY3RhYmxlc1tpbmRleF1cblx0XHRcdFx0dmFyIHJldCA9IGNyZWF0ZUFuYWx5c2lzKGVsZW1lbnQsIGV2ZW50KVxuXHRcdFx0XHRyZXQuaW5kZXggPSBpbmRleFxuXHRcdFx0XHRyZXQuZWxlbWVudCA9IGVsZW1lbnRcblx0XHRcdFx0cmV0dXJuIHJldFxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gbnVsbFxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZpbmRTZWxlY3RhYmxlRWxlbWVudDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/interactive/find-selectable-element.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/interactive/highlight.js":
/*!***************************************************************!*\
  !*** ./node_modules/abcjs/src/write/interactive/highlight.js ***!
  \***************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var setClass = __webpack_require__(/*! ../helpers/set-class */ \"(ssr)/./node_modules/abcjs/src/write/helpers/set-class.js\");\n\nvar highlight = function (klass, color) {\n\tif (klass === undefined)\n\t\tklass = \"abcjs-note_selected\";\n\tif (color === undefined)\n\t\tcolor = \"#ff0000\";\n\tsetClass(this.elemset, klass, \"\", color);\n};\n\nmodule.exports = highlight;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2ludGVyYWN0aXZlL2hpZ2hsaWdodC5qcyIsIm1hcHBpbmdzIjoiQUFBQSxlQUFlLG1CQUFPLENBQUMsdUZBQXNCOztBQUU3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9pbnRlcmFjdGl2ZS9oaWdobGlnaHQuanM/MDk1NCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgc2V0Q2xhc3MgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3NldC1jbGFzcycpO1xuXG52YXIgaGlnaGxpZ2h0ID0gZnVuY3Rpb24gKGtsYXNzLCBjb2xvcikge1xuXHRpZiAoa2xhc3MgPT09IHVuZGVmaW5lZClcblx0XHRrbGFzcyA9IFwiYWJjanMtbm90ZV9zZWxlY3RlZFwiO1xuXHRpZiAoY29sb3IgPT09IHVuZGVmaW5lZClcblx0XHRjb2xvciA9IFwiI2ZmMDAwMFwiO1xuXHRzZXRDbGFzcyh0aGlzLmVsZW1zZXQsIGtsYXNzLCBcIlwiLCBjb2xvcik7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGhpZ2hsaWdodDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/interactive/highlight.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/interactive/selection.js":
/*!***************************************************************!*\
  !*** ./node_modules/abcjs/src/write/interactive/selection.js ***!
  \***************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var spacing = __webpack_require__(/*! ../helpers/spacing */ \"(ssr)/./node_modules/abcjs/src/write/helpers/spacing.js\");\nvar createAnalysis = __webpack_require__(/*! ./create-analysis */ \"(ssr)/./node_modules/abcjs/src/write/interactive/create-analysis.js\");\n\nfunction setupSelection(engraver, svgs) {\n\tengraver.rangeHighlight = rangeHighlight;\n\tif (engraver.dragging) {\n\t\tfor (var h = 0; h < engraver.selectables.length; h++) {\n\t\t\tvar hist = engraver.selectables[h];\n\t\t\tif (hist.svgEl.getAttribute(\"selectable\") === \"true\") {\n\t\t\t\thist.svgEl.setAttribute(\"tabindex\", 0);\n\t\t\t\thist.svgEl.setAttribute(\"data-index\", h);\n\t\t\t\thist.svgEl.addEventListener(\"keydown\", keyboardDown.bind(engraver));\n\t\t\t\thist.svgEl.addEventListener(\"keyup\", keyboardSelection.bind(engraver));\n\t\t\t\thist.svgEl.addEventListener(\"focus\", elementFocused.bind(engraver));\n\t\t\t}\n\t\t}\n\t}\n\tfor (var i = 0; i < svgs.length; i++) {\n\t\tsvgs[i].addEventListener('touchstart', mouseDown.bind(engraver), { passive: true });\n\t\tsvgs[i].addEventListener('touchmove', mouseMove.bind(engraver), { passive: true });\n\t\tsvgs[i].addEventListener('touchend', mouseUp.bind(engraver), { passive: true });\n\t\tsvgs[i].addEventListener('mousedown', mouseDown.bind(engraver));\n\t\tsvgs[i].addEventListener('mousemove', mouseMove.bind(engraver));\n\t\tsvgs[i].addEventListener('mouseup', mouseUp.bind(engraver));\n\t}\n}\n\nfunction getCoord(ev) {\n\tvar scaleX = 1;\n\tvar scaleY = 1;\n\tvar svg = ev.target.closest('svg')\n\tvar yOffset = 0\n\n\t// when renderer.options.responsive === 'resize' the click coords are in relation to the HTML\n\t// element, we need to convert to the SVG viewBox coords\n\tif (svg && svg.viewBox && svg.viewBox.baseVal) { // Firefox passes null to this when no viewBox is given\n\t\t// Chrome makes these values null when no viewBox is given.\n\t\tif (svg.viewBox.baseVal.width !== 0)\n\t\t\tscaleX = svg.viewBox.baseVal.width / svg.clientWidth\n\t\tif (svg.viewBox.baseVal.height !== 0)\n\t\t\tscaleY = svg.viewBox.baseVal.height / svg.clientHeight\n\t\tyOffset = svg.viewBox.baseVal.y\n\t}\n\n\tvar svgClicked = ev.target && ev.target.tagName === \"svg\";\n\tvar x;\n\tvar y;\n\tif (svgClicked) {\n\t\tx = ev.offsetX;\n\t\ty = ev.offsetY;\n\t} else {\n\t\tx = ev.layerX;\n\t\ty = ev.layerY;\n\t}\n\n\tx = x * scaleX;\n\ty = y * scaleY;\n\t//console.log(x, y)\n\n\treturn [x, y + yOffset];\n}\n\nfunction elementFocused(ev) {\n\t// If there had been another element focused and is being dragged, then report that before setting the new element up.\n\tif (this.dragMechanism === \"keyboard\" && this.dragYStep !== 0 && this.dragTarget)\n\t\tnotifySelect.bind(this)(this.dragTarget, this.dragYStep, this.selectables.length, this.dragIndex, ev);\n\n\tthis.dragYStep = 0;\n}\n\nfunction keyboardDown(ev) {\n\t// Swallow the up and down arrow events - they will be used for dragging with the keyboard\n\tswitch (ev.keyCode) {\n\t\tcase 38:\n\t\tcase 40:\n\t\t\tev.preventDefault();\n\t}\n}\n\nfunction keyboardSelection(ev) {\n\t// \"this\" is the EngraverController because of the bind(this) when setting the event listener.\n\tvar handled = false;\n\tvar index = ev.target.dataset.index;\n\tswitch (ev.keyCode) {\n\t\tcase 13:\n\t\tcase 32:\n\t\t\thandled = true;\n\t\t\tthis.dragTarget = this.selectables[index];\n\t\t\tthis.dragIndex = index;\n\t\t\tthis.dragMechanism = \"keyboard\";\n\t\t\tmouseUp.bind(this)(ev);\n\t\t\tbreak;\n\t\tcase 38: // arrow up\n\t\t\thandled = true;\n\t\t\tthis.dragTarget = this.selectables[index];\n\t\t\tthis.dragIndex = index;\n\t\t\tif (this.dragTarget && this.dragTarget.isDraggable) {\n\t\t\t\tif (this.dragging && this.dragTarget.isDraggable)\n\t\t\t\t\tthis.dragTarget.absEl.highlight(undefined, this.dragColor);\n\t\t\t\tthis.dragYStep--;\n\t\t\t\tthis.dragTarget.svgEl.setAttribute(\"transform\", \"translate(0,\" + (this.dragYStep * spacing.STEP) + \")\");\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 40: // arrow down\n\t\t\thandled = true;\n\t\t\tthis.dragTarget = this.selectables[index];\n\t\t\tthis.dragIndex = index;\n\t\t\tthis.dragMechanism = \"keyboard\";\n\t\t\tif (this.dragTarget && this.dragTarget.isDraggable) {\n\t\t\t\tif (this.dragging && this.dragTarget.isDraggable)\n\t\t\t\t\tthis.dragTarget.absEl.highlight(undefined, this.dragColor);\n\t\t\t\tthis.dragYStep++;\n\t\t\t\tthis.dragTarget.svgEl.setAttribute(\"transform\", \"translate(0,\" + (this.dragYStep * spacing.STEP) + \")\");\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 9: // tab\n\t\t\t// This is losing focus - if there had been dragging, then do the callback\n\t\t\tif (this.dragYStep !== 0) {\n\t\t\t\tmouseUp.bind(this)(ev);\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t//console.log(ev);\n\t\t\tbreak;\n\t}\n\tif (handled)\n\t\tev.preventDefault();\n}\n\nfunction findElementInHistory(selectables, el) {\n\tif (!el)\n\t\treturn -1;\n\t// This should always exist, but it occasionally causes an exception, so check first.\n\tvar dataset = el.dataset\n\tif (!dataset)\n\t\treturn -1\n\tvar index = dataset.index\n\tfor (var i = 0; i < selectables.length; i++) {\n\t\tvar svgDataset = selectables[i].svgEl.dataset\n\t\tif (svgDataset && index === svgDataset.index)\n\t\t\treturn i;\n\t}\n\treturn -1;\n}\n\nfunction findElementByCoord(self, x, y) {\n\tvar minDistance = 9999999;\n\tvar closestIndex = -1;\n\tfor (var i = 0; i < self.selectables.length && minDistance > 0; i++) {\n\t\tvar el = self.selectables[i];\n\n\t\tself.getDim(el);\n\t\tif (el.dim.left < x && el.dim.right > x && el.dim.top < y && el.dim.bottom > y) {\n\t\t\t// See if it is a direct hit on an element - if so, definitely take it (there are no overlapping elements)\n\t\t\tclosestIndex = i;\n\t\t\tminDistance = 0;\n\t\t} else if (el.dim.top < y && el.dim.bottom > y) {\n\t\t\t// See if it is the same vertical as the element. Then the distance is the x difference\n\t\t\tvar horiz = Math.min(Math.abs(el.dim.left - x), Math.abs(el.dim.right - x));\n\t\t\tif (horiz < minDistance) {\n\t\t\t\tminDistance = horiz;\n\t\t\t\tclosestIndex = i;\n\t\t\t}\n\t\t} else if (el.dim.left < x && el.dim.right > x) {\n\t\t\t// See if it is the same horizontal as the element. Then the distance is the y difference\n\t\t\tvar vert = Math.min(Math.abs(el.dim.top - y), Math.abs(el.dim.bottom - y));\n\t\t\tif (vert < minDistance) {\n\t\t\t\tminDistance = vert;\n\t\t\t\tclosestIndex = i;\n\t\t\t}\n\t\t} else {\n\t\t\t// figure out the distance to this element.\n\t\t\tvar dx = Math.abs(x - el.dim.left) > Math.abs(x - el.dim.right) ? Math.abs(x - el.dim.right) : Math.abs(x - el.dim.left);\n\t\t\tvar dy = Math.abs(y - el.dim.top) > Math.abs(y - el.dim.bottom) ? Math.abs(y - el.dim.bottom) : Math.abs(y - el.dim.top);\n\t\t\tvar hypotenuse = Math.sqrt(dx * dx + dy * dy);\n\t\t\tif (hypotenuse < minDistance) {\n\t\t\t\tminDistance = hypotenuse;\n\t\t\t\tclosestIndex = i;\n\t\t\t}\n\t\t}\n\t}\n\treturn (closestIndex >= 0 && minDistance <= 12) ? closestIndex : -1;\n}\n\nfunction getBestMatchCoordinates(dim, ev, scale) {\n\t// Different browsers have conflicting meanings for the coordinates that are returned.\n\t// If the item we want is clicked on directly, then we will just see what is the best match.\n\t// This seems like less of a hack than browser sniffing.\n\tif (dim.x <= ev.offsetX && dim.x + dim.width >= ev.offsetX &&\n\t\tdim.y <= ev.offsetY && dim.y + dim.height >= ev.offsetY)\n\t\treturn [ev.offsetX, ev.offsetY];\n\t// Firefox returns a weird value for offset, but layer is correct.\n\t// Safari and Chrome return the correct value for offset, but layer is multiplied by the scale (that is, if it were rendered with { scale: 2 })\n\t// For instance (if scale is 2):\n\t// Firefox: { offsetY: 5, layerY: 335 }\n\t// Others: {offsetY: 335, layerY: 670} (there could be a little rounding, so the number might not be exactly 2x)\n\t// So, if layerY/scale is approx. offsetY, then use offsetY, otherwise use layerY\n\tvar epsilon = Math.abs(ev.layerY / scale - ev.offsetY);\n\tif (epsilon < 3)\n\t\treturn [ev.offsetX, ev.offsetY];\n\telse\n\t\treturn [ev.layerX, ev.layerY];\n}\n\nfunction getTarget(target) {\n\t// This searches up the dom for the first item containing the attribute \"selectable\", or stopping at the SVG.\n\tif (!target)\n\t\treturn null;\n\tif (target.tagName === \"svg\")\n\t\treturn target;\n\n\tif (!target.getAttribute)\n\t\treturn null;\t\n\tvar found = target.getAttribute(\"selectable\");\n\twhile (!found) {\n\t\tif (!target.parentElement)\n\t\t\tfound = true;\n\t\telse {\n\t\t\ttarget = target.parentElement;\n\t\t\tif (target.tagName === \"svg\")\n\t\t\t\tfound = true;\n\t\t\telse\n\t\t\t\tfound = target.getAttribute(\"selectable\");\n\t\t}\n\t}\n\treturn target;\n}\n\nfunction getMousePosition(self, ev) {\n\t// if the user clicked exactly on an element that we're interested in, then we already have the answer.\n\t// This is more reliable than the calculations because firefox returns different coords for offsetX, offsetY\n\tvar x;\n\tvar y;\n\tvar box;\n\tvar clickedOn = findElementInHistory(self.selectables, getTarget(ev.target));\n\tif (clickedOn >= 0) {\n\t\t// There was a direct hit on an element.\n\t\tbox = getBestMatchCoordinates(self.selectables[clickedOn].svgEl.getBBox(), ev, self.scale);\n\t\tx = box[0];\n\t\ty = box[1];\n\t\t//console.log(\"clicked on\", clickedOn, x, y, self.selectables[clickedOn].svgEl.getBBox(), ev.target.getBBox());\n\t} else {\n\t\t// See if they clicked close to an element.\n\t\tbox = getCoord(ev);\n\t\tx = box[0];\n\t\ty = box[1];\n\t\tclickedOn = findElementByCoord(self, x, y);\n\t\t//console.log(\"clicked near\", clickedOn, x, y, printEl(ev.target));\n\t}\n\treturn { x: x, y: y, clickedOn: clickedOn };\n}\n\nfunction attachMissingTouchEventAttributes(touchEv) {\n\tif (!touchEv || !touchEv.target || !touchEv.touches || touchEv.touches.length < 1)\n\t\treturn\n\tvar rect = touchEv.target.getBoundingClientRect();\n\tvar offsetX = touchEv.touches[0].pageX - rect.left;\n\tvar offsetY = touchEv.touches[0].pageY - rect.top;\n\n\ttouchEv.touches[0].offsetX = offsetX;\n\ttouchEv.touches[0].offsetY = offsetY;\n\n\ttouchEv.touches[0].layerX = touchEv.touches[0].pageX;\n\ttouchEv.touches[0].layerY = touchEv.touches[0].pageY;\n}\n\nfunction mouseDown(ev) {\n\t// \"this\" is the EngraverController because of the bind(this) when setting the event listener.\n\tvar _ev = ev;\n\tif (ev.type === 'touchstart') {\n\t\tattachMissingTouchEventAttributes(ev);\n\t\tif (ev.touches.length > 0)\n\t\t\t_ev = ev.touches[0];\n\t}\n\n\tvar positioning = getMousePosition(this, _ev);\n\n\t// Only start dragging if the user clicked close enough to an element and clicked with the main mouse button.\n\tif (positioning.clickedOn >= 0 && (ev.type === 'touchstart' || ev.button === 0) && this.selectables[positioning.clickedOn]) {\n\t\tthis.dragTarget = this.selectables[positioning.clickedOn];\n\t\tthis.dragIndex = positioning.clickedOn;\n\t\tthis.dragMechanism = \"mouse\";\n\t\tthis.dragMouseStart = { x: positioning.x, y: positioning.y };\n\t\tif (this.dragging && this.dragTarget.isDraggable) {\n\t\t\taddGlobalClass(this.renderer.paper, \"abcjs-dragging-in-progress\");\n\t\t\tthis.dragTarget.absEl.highlight(undefined, this.dragColor);\n\t\t}\n\t}\n}\n\nfunction mouseMove(ev) {\n\tvar _ev = ev;\n\tif (ev.type === 'touchmove') {\n\t\tattachMissingTouchEventAttributes(ev);\n\t\tif (ev.touches.length > 0)\n\t\t\t_ev = ev.touches[0];\n\t}\n\tthis.lastTouchMove = ev;\n\t// \"this\" is the EngraverController because of the bind(this) when setting the event listener.\n\n\tif (!this.dragTarget || !this.dragging || !this.dragTarget.isDraggable || this.dragMechanism !== 'mouse' || !this.dragMouseStart)\n\t\treturn;\n\n\tvar positioning = getMousePosition(this, _ev);\n\n\tvar yDist = Math.round((positioning.y - this.dragMouseStart.y) / spacing.STEP);\n\tif (yDist !== this.dragYStep) {\n\t\tthis.dragYStep = yDist;\n\t\tthis.dragTarget.svgEl.setAttribute(\"transform\", \"translate(0,\" + (yDist * spacing.STEP) + \")\");\n\t}\n}\n\nfunction mouseUp(ev) {\n\t// \"this\" is the EngraverController because of the bind(this) when setting the event listener.\n\tvar _ev = ev;\n\tif (ev.type === 'touchend' && this.lastTouchMove) {\n\t\tattachMissingTouchEventAttributes(this.lastTouchMove);\n\t\tif (this.lastTouchMove && this.lastTouchMove.touches && this.lastTouchMove.touches.length > 0)\n\t\t\t_ev = this.lastTouchMove.touches[0];\n\t}\n\n\tif (!this.dragTarget)\n\t\treturn;\n\n\tclearSelection.bind(this)();\n\tif (this.dragTarget.absEl && this.dragTarget.absEl.highlight) {\n\t\tthis.selected = [this.dragTarget.absEl];\n\t\tthis.dragTarget.absEl.highlight(undefined, this.selectionColor);\n\t}\n\n\tnotifySelect.bind(this)(this.dragTarget, this.dragYStep, this.selectables.length, this.dragIndex, _ev);\n\tif (this.dragTarget.svgEl && this.dragTarget.svgEl.focus) {\n\t\tthis.dragTarget.svgEl.focus();\n\t\tthis.dragTarget = null;\n\t\tthis.dragIndex = -1;\n\t}\n\tremoveGlobalClass(this.renderer.svg, \"abcjs-dragging-in-progress\");\n}\n\nfunction setSelection(dragIndex) {\n\tif (dragIndex >= 0 && dragIndex < this.selectables.length) {\n\t\tthis.dragTarget = this.selectables[dragIndex];\n\t\tthis.dragIndex = dragIndex;\n\t\tthis.dragMechanism = \"keyboard\";\n\t\tmouseUp.bind(this)({ target: this.dragTarget.svgEl });\n\t}\n}\n\n\nfunction notifySelect(target, dragStep, dragMax, dragIndex, ev) {\n\tvar ret = createAnalysis(target, ev)\n\tvar classes = ret.classes\n\tvar analysis = ret.analysis\n\n\tfor (var i = 0; i < this.listeners.length; i++) {\n\t\tthis.listeners[i](target.absEl.abcelem, target.absEl.tuneNumber, classes.join(' '), analysis, { step: dragStep, max: dragMax, index: dragIndex, setSelection: setSelection.bind(this) }, ev);\n\t}\n}\n\nfunction clearSelection() {\n\tfor (var i = 0; i < this.selected.length; i++) {\n\t\tthis.selected[i].unhighlight(undefined, this.renderer.foregroundColor);\n\t}\n\tthis.selected = [];\n}\n\nfunction rangeHighlight(start, end) {\n\tclearSelection.bind(this)();\n\tfor (var line = 0; line < this.staffgroups.length; line++) {\n\t\tvar voices = this.staffgroups[line].voices;\n\t\tfor (var voice = 0; voice < voices.length; voice++) {\n\t\t\tvar elems = voices[voice].children;\n\t\t\tfor (var elem = 0; elem < elems.length; elem++) {\n\t\t\t\t// Since the user can highlight more than an element, or part of an element, a hit is if any of the endpoints\n\t\t\t\t// is inside the other range.\n\t\t\t\tvar elStart = elems[elem].abcelem.startChar;\n\t\t\t\tvar elEnd = elems[elem].abcelem.endChar;\n\t\t\t\tif ((end > elStart && start < elEnd) || ((end === start) && end === elEnd)) {\n\t\t\t\t\t//\t\tif (elems[elem].abcelem.startChar>=start && elems[elem].abcelem.endChar<=end) {\n\t\t\t\t\tthis.selected[this.selected.length] = elems[elem];\n\t\t\t\t\telems[elem].highlight(undefined, this.selectionColor);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction getClassSet(el) {\n\tvar oldClass = el.getAttribute('class');\n\tif (!oldClass)\n\t\toldClass = \"\";\n\tvar klasses = oldClass.split(\" \");\n\tvar obj = {};\n\tfor (var i = 0; i < klasses.length; i++)\n\t\tobj[klasses[i]] = true;\n\treturn obj;\n}\n\nfunction setClassSet(el, klassSet) {\n\tvar klasses = [];\n\tfor (var key in klassSet) {\n\t\tif (klassSet.hasOwnProperty(key))\n\t\t\tklasses.push(key);\n\t}\n\tel.setAttribute('class', klasses.join(' '));\n}\n\nfunction addGlobalClass(svg, klass) {\n\tif (svg) {\n\t\tvar obj = getClassSet(svg.svg);\n\t\tobj[klass] = true;\n\t\tsetClassSet(svg.svg, obj);\n\t}\n}\n\nfunction removeGlobalClass(svg, klass) {\n\tif (svg) {\n\t\tvar obj = getClassSet(svg.svg);\n\t\tdelete obj[klass];\n\t\tsetClassSet(svg.svg, obj);\n\t}\n}\n\nmodule.exports = setupSelection;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2ludGVyYWN0aXZlL3NlbGVjdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBQSxjQUFjLG1CQUFPLENBQUMsbUZBQW9CO0FBQzFDLHFCQUFxQixtQkFBTyxDQUFDLDhGQUFtQjs7QUFFaEQ7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlDQUFpQztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixpQkFBaUI7QUFDbEMscUVBQXFFLGVBQWU7QUFDcEYsb0VBQW9FLGVBQWU7QUFDbkYsaUVBQWlFLGVBQWU7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix3QkFBd0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixnREFBZ0Q7QUFDakU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUlBQXFJLFVBQVU7QUFDL0k7QUFDQSxlQUFlO0FBQ2YsYUFBYSwyQkFBMkI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsK0JBQStCO0FBQ3REO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlCQUFpQiwyQkFBMkI7QUFDNUMsa0dBQWtHLHVGQUF1RjtBQUN6TDtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLDBCQUEwQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLGdDQUFnQztBQUNwRDtBQUNBLHNCQUFzQix1QkFBdUI7QUFDN0M7QUFDQSxzQkFBc0IscUJBQXFCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixvQkFBb0I7QUFDckM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvaW50ZXJhY3RpdmUvc2VsZWN0aW9uLmpzPzIyMDkiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHNwYWNpbmcgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3NwYWNpbmcnKTtcbnZhciBjcmVhdGVBbmFseXNpcyA9IHJlcXVpcmUoJy4vY3JlYXRlLWFuYWx5c2lzJyk7XG5cbmZ1bmN0aW9uIHNldHVwU2VsZWN0aW9uKGVuZ3JhdmVyLCBzdmdzKSB7XG5cdGVuZ3JhdmVyLnJhbmdlSGlnaGxpZ2h0ID0gcmFuZ2VIaWdobGlnaHQ7XG5cdGlmIChlbmdyYXZlci5kcmFnZ2luZykge1xuXHRcdGZvciAodmFyIGggPSAwOyBoIDwgZW5ncmF2ZXIuc2VsZWN0YWJsZXMubGVuZ3RoOyBoKyspIHtcblx0XHRcdHZhciBoaXN0ID0gZW5ncmF2ZXIuc2VsZWN0YWJsZXNbaF07XG5cdFx0XHRpZiAoaGlzdC5zdmdFbC5nZXRBdHRyaWJ1dGUoXCJzZWxlY3RhYmxlXCIpID09PSBcInRydWVcIikge1xuXHRcdFx0XHRoaXN0LnN2Z0VsLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIDApO1xuXHRcdFx0XHRoaXN0LnN2Z0VsLnNldEF0dHJpYnV0ZShcImRhdGEtaW5kZXhcIiwgaCk7XG5cdFx0XHRcdGhpc3Quc3ZnRWwuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwga2V5Ym9hcmREb3duLmJpbmQoZW5ncmF2ZXIpKTtcblx0XHRcdFx0aGlzdC5zdmdFbC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwga2V5Ym9hcmRTZWxlY3Rpb24uYmluZChlbmdyYXZlcikpO1xuXHRcdFx0XHRoaXN0LnN2Z0VsLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBlbGVtZW50Rm9jdXNlZC5iaW5kKGVuZ3JhdmVyKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc3Zncy5sZW5ndGg7IGkrKykge1xuXHRcdHN2Z3NbaV0uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG1vdXNlRG93bi5iaW5kKGVuZ3JhdmVyKSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuXHRcdHN2Z3NbaV0uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgbW91c2VNb3ZlLmJpbmQoZW5ncmF2ZXIpLCB7IHBhc3NpdmU6IHRydWUgfSk7XG5cdFx0c3Znc1tpXS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG1vdXNlVXAuYmluZChlbmdyYXZlciksIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcblx0XHRzdmdzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG1vdXNlRG93bi5iaW5kKGVuZ3JhdmVyKSk7XG5cdFx0c3Znc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3VzZU1vdmUuYmluZChlbmdyYXZlcikpO1xuXHRcdHN2Z3NbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNlVXAuYmluZChlbmdyYXZlcikpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGdldENvb3JkKGV2KSB7XG5cdHZhciBzY2FsZVggPSAxO1xuXHR2YXIgc2NhbGVZID0gMTtcblx0dmFyIHN2ZyA9IGV2LnRhcmdldC5jbG9zZXN0KCdzdmcnKVxuXHR2YXIgeU9mZnNldCA9IDBcblxuXHQvLyB3aGVuIHJlbmRlcmVyLm9wdGlvbnMucmVzcG9uc2l2ZSA9PT0gJ3Jlc2l6ZScgdGhlIGNsaWNrIGNvb3JkcyBhcmUgaW4gcmVsYXRpb24gdG8gdGhlIEhUTUxcblx0Ly8gZWxlbWVudCwgd2UgbmVlZCB0byBjb252ZXJ0IHRvIHRoZSBTVkcgdmlld0JveCBjb29yZHNcblx0aWYgKHN2ZyAmJiBzdmcudmlld0JveCAmJiBzdmcudmlld0JveC5iYXNlVmFsKSB7IC8vIEZpcmVmb3ggcGFzc2VzIG51bGwgdG8gdGhpcyB3aGVuIG5vIHZpZXdCb3ggaXMgZ2l2ZW5cblx0XHQvLyBDaHJvbWUgbWFrZXMgdGhlc2UgdmFsdWVzIG51bGwgd2hlbiBubyB2aWV3Qm94IGlzIGdpdmVuLlxuXHRcdGlmIChzdmcudmlld0JveC5iYXNlVmFsLndpZHRoICE9PSAwKVxuXHRcdFx0c2NhbGVYID0gc3ZnLnZpZXdCb3guYmFzZVZhbC53aWR0aCAvIHN2Zy5jbGllbnRXaWR0aFxuXHRcdGlmIChzdmcudmlld0JveC5iYXNlVmFsLmhlaWdodCAhPT0gMClcblx0XHRcdHNjYWxlWSA9IHN2Zy52aWV3Qm94LmJhc2VWYWwuaGVpZ2h0IC8gc3ZnLmNsaWVudEhlaWdodFxuXHRcdHlPZmZzZXQgPSBzdmcudmlld0JveC5iYXNlVmFsLnlcblx0fVxuXG5cdHZhciBzdmdDbGlja2VkID0gZXYudGFyZ2V0ICYmIGV2LnRhcmdldC50YWdOYW1lID09PSBcInN2Z1wiO1xuXHR2YXIgeDtcblx0dmFyIHk7XG5cdGlmIChzdmdDbGlja2VkKSB7XG5cdFx0eCA9IGV2Lm9mZnNldFg7XG5cdFx0eSA9IGV2Lm9mZnNldFk7XG5cdH0gZWxzZSB7XG5cdFx0eCA9IGV2LmxheWVyWDtcblx0XHR5ID0gZXYubGF5ZXJZO1xuXHR9XG5cblx0eCA9IHggKiBzY2FsZVg7XG5cdHkgPSB5ICogc2NhbGVZO1xuXHQvL2NvbnNvbGUubG9nKHgsIHkpXG5cblx0cmV0dXJuIFt4LCB5ICsgeU9mZnNldF07XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRGb2N1c2VkKGV2KSB7XG5cdC8vIElmIHRoZXJlIGhhZCBiZWVuIGFub3RoZXIgZWxlbWVudCBmb2N1c2VkIGFuZCBpcyBiZWluZyBkcmFnZ2VkLCB0aGVuIHJlcG9ydCB0aGF0IGJlZm9yZSBzZXR0aW5nIHRoZSBuZXcgZWxlbWVudCB1cC5cblx0aWYgKHRoaXMuZHJhZ01lY2hhbmlzbSA9PT0gXCJrZXlib2FyZFwiICYmIHRoaXMuZHJhZ1lTdGVwICE9PSAwICYmIHRoaXMuZHJhZ1RhcmdldClcblx0XHRub3RpZnlTZWxlY3QuYmluZCh0aGlzKSh0aGlzLmRyYWdUYXJnZXQsIHRoaXMuZHJhZ1lTdGVwLCB0aGlzLnNlbGVjdGFibGVzLmxlbmd0aCwgdGhpcy5kcmFnSW5kZXgsIGV2KTtcblxuXHR0aGlzLmRyYWdZU3RlcCA9IDA7XG59XG5cbmZ1bmN0aW9uIGtleWJvYXJkRG93bihldikge1xuXHQvLyBTd2FsbG93IHRoZSB1cCBhbmQgZG93biBhcnJvdyBldmVudHMgLSB0aGV5IHdpbGwgYmUgdXNlZCBmb3IgZHJhZ2dpbmcgd2l0aCB0aGUga2V5Ym9hcmRcblx0c3dpdGNoIChldi5rZXlDb2RlKSB7XG5cdFx0Y2FzZSAzODpcblx0XHRjYXNlIDQwOlxuXHRcdFx0ZXYucHJldmVudERlZmF1bHQoKTtcblx0fVxufVxuXG5mdW5jdGlvbiBrZXlib2FyZFNlbGVjdGlvbihldikge1xuXHQvLyBcInRoaXNcIiBpcyB0aGUgRW5ncmF2ZXJDb250cm9sbGVyIGJlY2F1c2Ugb2YgdGhlIGJpbmQodGhpcykgd2hlbiBzZXR0aW5nIHRoZSBldmVudCBsaXN0ZW5lci5cblx0dmFyIGhhbmRsZWQgPSBmYWxzZTtcblx0dmFyIGluZGV4ID0gZXYudGFyZ2V0LmRhdGFzZXQuaW5kZXg7XG5cdHN3aXRjaCAoZXYua2V5Q29kZSkge1xuXHRcdGNhc2UgMTM6XG5cdFx0Y2FzZSAzMjpcblx0XHRcdGhhbmRsZWQgPSB0cnVlO1xuXHRcdFx0dGhpcy5kcmFnVGFyZ2V0ID0gdGhpcy5zZWxlY3RhYmxlc1tpbmRleF07XG5cdFx0XHR0aGlzLmRyYWdJbmRleCA9IGluZGV4O1xuXHRcdFx0dGhpcy5kcmFnTWVjaGFuaXNtID0gXCJrZXlib2FyZFwiO1xuXHRcdFx0bW91c2VVcC5iaW5kKHRoaXMpKGV2KTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgMzg6IC8vIGFycm93IHVwXG5cdFx0XHRoYW5kbGVkID0gdHJ1ZTtcblx0XHRcdHRoaXMuZHJhZ1RhcmdldCA9IHRoaXMuc2VsZWN0YWJsZXNbaW5kZXhdO1xuXHRcdFx0dGhpcy5kcmFnSW5kZXggPSBpbmRleDtcblx0XHRcdGlmICh0aGlzLmRyYWdUYXJnZXQgJiYgdGhpcy5kcmFnVGFyZ2V0LmlzRHJhZ2dhYmxlKSB7XG5cdFx0XHRcdGlmICh0aGlzLmRyYWdnaW5nICYmIHRoaXMuZHJhZ1RhcmdldC5pc0RyYWdnYWJsZSlcblx0XHRcdFx0XHR0aGlzLmRyYWdUYXJnZXQuYWJzRWwuaGlnaGxpZ2h0KHVuZGVmaW5lZCwgdGhpcy5kcmFnQ29sb3IpO1xuXHRcdFx0XHR0aGlzLmRyYWdZU3RlcC0tO1xuXHRcdFx0XHR0aGlzLmRyYWdUYXJnZXQuc3ZnRWwuc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyAodGhpcy5kcmFnWVN0ZXAgKiBzcGFjaW5nLlNURVApICsgXCIpXCIpO1xuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSA0MDogLy8gYXJyb3cgZG93blxuXHRcdFx0aGFuZGxlZCA9IHRydWU7XG5cdFx0XHR0aGlzLmRyYWdUYXJnZXQgPSB0aGlzLnNlbGVjdGFibGVzW2luZGV4XTtcblx0XHRcdHRoaXMuZHJhZ0luZGV4ID0gaW5kZXg7XG5cdFx0XHR0aGlzLmRyYWdNZWNoYW5pc20gPSBcImtleWJvYXJkXCI7XG5cdFx0XHRpZiAodGhpcy5kcmFnVGFyZ2V0ICYmIHRoaXMuZHJhZ1RhcmdldC5pc0RyYWdnYWJsZSkge1xuXHRcdFx0XHRpZiAodGhpcy5kcmFnZ2luZyAmJiB0aGlzLmRyYWdUYXJnZXQuaXNEcmFnZ2FibGUpXG5cdFx0XHRcdFx0dGhpcy5kcmFnVGFyZ2V0LmFic0VsLmhpZ2hsaWdodCh1bmRlZmluZWQsIHRoaXMuZHJhZ0NvbG9yKTtcblx0XHRcdFx0dGhpcy5kcmFnWVN0ZXArKztcblx0XHRcdFx0dGhpcy5kcmFnVGFyZ2V0LnN2Z0VsLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgKHRoaXMuZHJhZ1lTdGVwICogc3BhY2luZy5TVEVQKSArIFwiKVwiKTtcblx0XHRcdH1cblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgOTogLy8gdGFiXG5cdFx0XHQvLyBUaGlzIGlzIGxvc2luZyBmb2N1cyAtIGlmIHRoZXJlIGhhZCBiZWVuIGRyYWdnaW5nLCB0aGVuIGRvIHRoZSBjYWxsYmFja1xuXHRcdFx0aWYgKHRoaXMuZHJhZ1lTdGVwICE9PSAwKSB7XG5cdFx0XHRcdG1vdXNlVXAuYmluZCh0aGlzKShldik7XG5cdFx0XHR9XG5cdFx0XHRicmVhaztcblx0XHRkZWZhdWx0OlxuXHRcdFx0Ly9jb25zb2xlLmxvZyhldik7XG5cdFx0XHRicmVhaztcblx0fVxuXHRpZiAoaGFuZGxlZClcblx0XHRldi5wcmV2ZW50RGVmYXVsdCgpO1xufVxuXG5mdW5jdGlvbiBmaW5kRWxlbWVudEluSGlzdG9yeShzZWxlY3RhYmxlcywgZWwpIHtcblx0aWYgKCFlbClcblx0XHRyZXR1cm4gLTE7XG5cdC8vIFRoaXMgc2hvdWxkIGFsd2F5cyBleGlzdCwgYnV0IGl0IG9jY2FzaW9uYWxseSBjYXVzZXMgYW4gZXhjZXB0aW9uLCBzbyBjaGVjayBmaXJzdC5cblx0dmFyIGRhdGFzZXQgPSBlbC5kYXRhc2V0XG5cdGlmICghZGF0YXNldClcblx0XHRyZXR1cm4gLTFcblx0dmFyIGluZGV4ID0gZGF0YXNldC5pbmRleFxuXHRmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdGFibGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIHN2Z0RhdGFzZXQgPSBzZWxlY3RhYmxlc1tpXS5zdmdFbC5kYXRhc2V0XG5cdFx0aWYgKHN2Z0RhdGFzZXQgJiYgaW5kZXggPT09IHN2Z0RhdGFzZXQuaW5kZXgpXG5cdFx0XHRyZXR1cm4gaTtcblx0fVxuXHRyZXR1cm4gLTE7XG59XG5cbmZ1bmN0aW9uIGZpbmRFbGVtZW50QnlDb29yZChzZWxmLCB4LCB5KSB7XG5cdHZhciBtaW5EaXN0YW5jZSA9IDk5OTk5OTk7XG5cdHZhciBjbG9zZXN0SW5kZXggPSAtMTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLnNlbGVjdGFibGVzLmxlbmd0aCAmJiBtaW5EaXN0YW5jZSA+IDA7IGkrKykge1xuXHRcdHZhciBlbCA9IHNlbGYuc2VsZWN0YWJsZXNbaV07XG5cblx0XHRzZWxmLmdldERpbShlbCk7XG5cdFx0aWYgKGVsLmRpbS5sZWZ0IDwgeCAmJiBlbC5kaW0ucmlnaHQgPiB4ICYmIGVsLmRpbS50b3AgPCB5ICYmIGVsLmRpbS5ib3R0b20gPiB5KSB7XG5cdFx0XHQvLyBTZWUgaWYgaXQgaXMgYSBkaXJlY3QgaGl0IG9uIGFuIGVsZW1lbnQgLSBpZiBzbywgZGVmaW5pdGVseSB0YWtlIGl0ICh0aGVyZSBhcmUgbm8gb3ZlcmxhcHBpbmcgZWxlbWVudHMpXG5cdFx0XHRjbG9zZXN0SW5kZXggPSBpO1xuXHRcdFx0bWluRGlzdGFuY2UgPSAwO1xuXHRcdH0gZWxzZSBpZiAoZWwuZGltLnRvcCA8IHkgJiYgZWwuZGltLmJvdHRvbSA+IHkpIHtcblx0XHRcdC8vIFNlZSBpZiBpdCBpcyB0aGUgc2FtZSB2ZXJ0aWNhbCBhcyB0aGUgZWxlbWVudC4gVGhlbiB0aGUgZGlzdGFuY2UgaXMgdGhlIHggZGlmZmVyZW5jZVxuXHRcdFx0dmFyIGhvcml6ID0gTWF0aC5taW4oTWF0aC5hYnMoZWwuZGltLmxlZnQgLSB4KSwgTWF0aC5hYnMoZWwuZGltLnJpZ2h0IC0geCkpO1xuXHRcdFx0aWYgKGhvcml6IDwgbWluRGlzdGFuY2UpIHtcblx0XHRcdFx0bWluRGlzdGFuY2UgPSBob3Jpejtcblx0XHRcdFx0Y2xvc2VzdEluZGV4ID0gaTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGVsLmRpbS5sZWZ0IDwgeCAmJiBlbC5kaW0ucmlnaHQgPiB4KSB7XG5cdFx0XHQvLyBTZWUgaWYgaXQgaXMgdGhlIHNhbWUgaG9yaXpvbnRhbCBhcyB0aGUgZWxlbWVudC4gVGhlbiB0aGUgZGlzdGFuY2UgaXMgdGhlIHkgZGlmZmVyZW5jZVxuXHRcdFx0dmFyIHZlcnQgPSBNYXRoLm1pbihNYXRoLmFicyhlbC5kaW0udG9wIC0geSksIE1hdGguYWJzKGVsLmRpbS5ib3R0b20gLSB5KSk7XG5cdFx0XHRpZiAodmVydCA8IG1pbkRpc3RhbmNlKSB7XG5cdFx0XHRcdG1pbkRpc3RhbmNlID0gdmVydDtcblx0XHRcdFx0Y2xvc2VzdEluZGV4ID0gaTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gZmlndXJlIG91dCB0aGUgZGlzdGFuY2UgdG8gdGhpcyBlbGVtZW50LlxuXHRcdFx0dmFyIGR4ID0gTWF0aC5hYnMoeCAtIGVsLmRpbS5sZWZ0KSA+IE1hdGguYWJzKHggLSBlbC5kaW0ucmlnaHQpID8gTWF0aC5hYnMoeCAtIGVsLmRpbS5yaWdodCkgOiBNYXRoLmFicyh4IC0gZWwuZGltLmxlZnQpO1xuXHRcdFx0dmFyIGR5ID0gTWF0aC5hYnMoeSAtIGVsLmRpbS50b3ApID4gTWF0aC5hYnMoeSAtIGVsLmRpbS5ib3R0b20pID8gTWF0aC5hYnMoeSAtIGVsLmRpbS5ib3R0b20pIDogTWF0aC5hYnMoeSAtIGVsLmRpbS50b3ApO1xuXHRcdFx0dmFyIGh5cG90ZW51c2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuXHRcdFx0aWYgKGh5cG90ZW51c2UgPCBtaW5EaXN0YW5jZSkge1xuXHRcdFx0XHRtaW5EaXN0YW5jZSA9IGh5cG90ZW51c2U7XG5cdFx0XHRcdGNsb3Nlc3RJbmRleCA9IGk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiAoY2xvc2VzdEluZGV4ID49IDAgJiYgbWluRGlzdGFuY2UgPD0gMTIpID8gY2xvc2VzdEluZGV4IDogLTE7XG59XG5cbmZ1bmN0aW9uIGdldEJlc3RNYXRjaENvb3JkaW5hdGVzKGRpbSwgZXYsIHNjYWxlKSB7XG5cdC8vIERpZmZlcmVudCBicm93c2VycyBoYXZlIGNvbmZsaWN0aW5nIG1lYW5pbmdzIGZvciB0aGUgY29vcmRpbmF0ZXMgdGhhdCBhcmUgcmV0dXJuZWQuXG5cdC8vIElmIHRoZSBpdGVtIHdlIHdhbnQgaXMgY2xpY2tlZCBvbiBkaXJlY3RseSwgdGhlbiB3ZSB3aWxsIGp1c3Qgc2VlIHdoYXQgaXMgdGhlIGJlc3QgbWF0Y2guXG5cdC8vIFRoaXMgc2VlbXMgbGlrZSBsZXNzIG9mIGEgaGFjayB0aGFuIGJyb3dzZXIgc25pZmZpbmcuXG5cdGlmIChkaW0ueCA8PSBldi5vZmZzZXRYICYmIGRpbS54ICsgZGltLndpZHRoID49IGV2Lm9mZnNldFggJiZcblx0XHRkaW0ueSA8PSBldi5vZmZzZXRZICYmIGRpbS55ICsgZGltLmhlaWdodCA+PSBldi5vZmZzZXRZKVxuXHRcdHJldHVybiBbZXYub2Zmc2V0WCwgZXYub2Zmc2V0WV07XG5cdC8vIEZpcmVmb3ggcmV0dXJucyBhIHdlaXJkIHZhbHVlIGZvciBvZmZzZXQsIGJ1dCBsYXllciBpcyBjb3JyZWN0LlxuXHQvLyBTYWZhcmkgYW5kIENocm9tZSByZXR1cm4gdGhlIGNvcnJlY3QgdmFsdWUgZm9yIG9mZnNldCwgYnV0IGxheWVyIGlzIG11bHRpcGxpZWQgYnkgdGhlIHNjYWxlICh0aGF0IGlzLCBpZiBpdCB3ZXJlIHJlbmRlcmVkIHdpdGggeyBzY2FsZTogMiB9KVxuXHQvLyBGb3IgaW5zdGFuY2UgKGlmIHNjYWxlIGlzIDIpOlxuXHQvLyBGaXJlZm94OiB7IG9mZnNldFk6IDUsIGxheWVyWTogMzM1IH1cblx0Ly8gT3RoZXJzOiB7b2Zmc2V0WTogMzM1LCBsYXllclk6IDY3MH0gKHRoZXJlIGNvdWxkIGJlIGEgbGl0dGxlIHJvdW5kaW5nLCBzbyB0aGUgbnVtYmVyIG1pZ2h0IG5vdCBiZSBleGFjdGx5IDJ4KVxuXHQvLyBTbywgaWYgbGF5ZXJZL3NjYWxlIGlzIGFwcHJveC4gb2Zmc2V0WSwgdGhlbiB1c2Ugb2Zmc2V0WSwgb3RoZXJ3aXNlIHVzZSBsYXllcllcblx0dmFyIGVwc2lsb24gPSBNYXRoLmFicyhldi5sYXllclkgLyBzY2FsZSAtIGV2Lm9mZnNldFkpO1xuXHRpZiAoZXBzaWxvbiA8IDMpXG5cdFx0cmV0dXJuIFtldi5vZmZzZXRYLCBldi5vZmZzZXRZXTtcblx0ZWxzZVxuXHRcdHJldHVybiBbZXYubGF5ZXJYLCBldi5sYXllclldO1xufVxuXG5mdW5jdGlvbiBnZXRUYXJnZXQodGFyZ2V0KSB7XG5cdC8vIFRoaXMgc2VhcmNoZXMgdXAgdGhlIGRvbSBmb3IgdGhlIGZpcnN0IGl0ZW0gY29udGFpbmluZyB0aGUgYXR0cmlidXRlIFwic2VsZWN0YWJsZVwiLCBvciBzdG9wcGluZyBhdCB0aGUgU1ZHLlxuXHRpZiAoIXRhcmdldClcblx0XHRyZXR1cm4gbnVsbDtcblx0aWYgKHRhcmdldC50YWdOYW1lID09PSBcInN2Z1wiKVxuXHRcdHJldHVybiB0YXJnZXQ7XG5cblx0aWYgKCF0YXJnZXQuZ2V0QXR0cmlidXRlKVxuXHRcdHJldHVybiBudWxsO1x0XG5cdHZhciBmb3VuZCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJzZWxlY3RhYmxlXCIpO1xuXHR3aGlsZSAoIWZvdW5kKSB7XG5cdFx0aWYgKCF0YXJnZXQucGFyZW50RWxlbWVudClcblx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHRlbHNlIHtcblx0XHRcdHRhcmdldCA9IHRhcmdldC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0aWYgKHRhcmdldC50YWdOYW1lID09PSBcInN2Z1wiKVxuXHRcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdGZvdW5kID0gdGFyZ2V0LmdldEF0dHJpYnV0ZShcInNlbGVjdGFibGVcIik7XG5cdFx0fVxuXHR9XG5cdHJldHVybiB0YXJnZXQ7XG59XG5cbmZ1bmN0aW9uIGdldE1vdXNlUG9zaXRpb24oc2VsZiwgZXYpIHtcblx0Ly8gaWYgdGhlIHVzZXIgY2xpY2tlZCBleGFjdGx5IG9uIGFuIGVsZW1lbnQgdGhhdCB3ZSdyZSBpbnRlcmVzdGVkIGluLCB0aGVuIHdlIGFscmVhZHkgaGF2ZSB0aGUgYW5zd2VyLlxuXHQvLyBUaGlzIGlzIG1vcmUgcmVsaWFibGUgdGhhbiB0aGUgY2FsY3VsYXRpb25zIGJlY2F1c2UgZmlyZWZveCByZXR1cm5zIGRpZmZlcmVudCBjb29yZHMgZm9yIG9mZnNldFgsIG9mZnNldFlcblx0dmFyIHg7XG5cdHZhciB5O1xuXHR2YXIgYm94O1xuXHR2YXIgY2xpY2tlZE9uID0gZmluZEVsZW1lbnRJbkhpc3Rvcnkoc2VsZi5zZWxlY3RhYmxlcywgZ2V0VGFyZ2V0KGV2LnRhcmdldCkpO1xuXHRpZiAoY2xpY2tlZE9uID49IDApIHtcblx0XHQvLyBUaGVyZSB3YXMgYSBkaXJlY3QgaGl0IG9uIGFuIGVsZW1lbnQuXG5cdFx0Ym94ID0gZ2V0QmVzdE1hdGNoQ29vcmRpbmF0ZXMoc2VsZi5zZWxlY3RhYmxlc1tjbGlja2VkT25dLnN2Z0VsLmdldEJCb3goKSwgZXYsIHNlbGYuc2NhbGUpO1xuXHRcdHggPSBib3hbMF07XG5cdFx0eSA9IGJveFsxXTtcblx0XHQvL2NvbnNvbGUubG9nKFwiY2xpY2tlZCBvblwiLCBjbGlja2VkT24sIHgsIHksIHNlbGYuc2VsZWN0YWJsZXNbY2xpY2tlZE9uXS5zdmdFbC5nZXRCQm94KCksIGV2LnRhcmdldC5nZXRCQm94KCkpO1xuXHR9IGVsc2Uge1xuXHRcdC8vIFNlZSBpZiB0aGV5IGNsaWNrZWQgY2xvc2UgdG8gYW4gZWxlbWVudC5cblx0XHRib3ggPSBnZXRDb29yZChldik7XG5cdFx0eCA9IGJveFswXTtcblx0XHR5ID0gYm94WzFdO1xuXHRcdGNsaWNrZWRPbiA9IGZpbmRFbGVtZW50QnlDb29yZChzZWxmLCB4LCB5KTtcblx0XHQvL2NvbnNvbGUubG9nKFwiY2xpY2tlZCBuZWFyXCIsIGNsaWNrZWRPbiwgeCwgeSwgcHJpbnRFbChldi50YXJnZXQpKTtcblx0fVxuXHRyZXR1cm4geyB4OiB4LCB5OiB5LCBjbGlja2VkT246IGNsaWNrZWRPbiB9O1xufVxuXG5mdW5jdGlvbiBhdHRhY2hNaXNzaW5nVG91Y2hFdmVudEF0dHJpYnV0ZXModG91Y2hFdikge1xuXHRpZiAoIXRvdWNoRXYgfHwgIXRvdWNoRXYudGFyZ2V0IHx8ICF0b3VjaEV2LnRvdWNoZXMgfHwgdG91Y2hFdi50b3VjaGVzLmxlbmd0aCA8IDEpXG5cdFx0cmV0dXJuXG5cdHZhciByZWN0ID0gdG91Y2hFdi50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdHZhciBvZmZzZXRYID0gdG91Y2hFdi50b3VjaGVzWzBdLnBhZ2VYIC0gcmVjdC5sZWZ0O1xuXHR2YXIgb2Zmc2V0WSA9IHRvdWNoRXYudG91Y2hlc1swXS5wYWdlWSAtIHJlY3QudG9wO1xuXG5cdHRvdWNoRXYudG91Y2hlc1swXS5vZmZzZXRYID0gb2Zmc2V0WDtcblx0dG91Y2hFdi50b3VjaGVzWzBdLm9mZnNldFkgPSBvZmZzZXRZO1xuXG5cdHRvdWNoRXYudG91Y2hlc1swXS5sYXllclggPSB0b3VjaEV2LnRvdWNoZXNbMF0ucGFnZVg7XG5cdHRvdWNoRXYudG91Y2hlc1swXS5sYXllclkgPSB0b3VjaEV2LnRvdWNoZXNbMF0ucGFnZVk7XG59XG5cbmZ1bmN0aW9uIG1vdXNlRG93bihldikge1xuXHQvLyBcInRoaXNcIiBpcyB0aGUgRW5ncmF2ZXJDb250cm9sbGVyIGJlY2F1c2Ugb2YgdGhlIGJpbmQodGhpcykgd2hlbiBzZXR0aW5nIHRoZSBldmVudCBsaXN0ZW5lci5cblx0dmFyIF9ldiA9IGV2O1xuXHRpZiAoZXYudHlwZSA9PT0gJ3RvdWNoc3RhcnQnKSB7XG5cdFx0YXR0YWNoTWlzc2luZ1RvdWNoRXZlbnRBdHRyaWJ1dGVzKGV2KTtcblx0XHRpZiAoZXYudG91Y2hlcy5sZW5ndGggPiAwKVxuXHRcdFx0X2V2ID0gZXYudG91Y2hlc1swXTtcblx0fVxuXG5cdHZhciBwb3NpdGlvbmluZyA9IGdldE1vdXNlUG9zaXRpb24odGhpcywgX2V2KTtcblxuXHQvLyBPbmx5IHN0YXJ0IGRyYWdnaW5nIGlmIHRoZSB1c2VyIGNsaWNrZWQgY2xvc2UgZW5vdWdoIHRvIGFuIGVsZW1lbnQgYW5kIGNsaWNrZWQgd2l0aCB0aGUgbWFpbiBtb3VzZSBidXR0b24uXG5cdGlmIChwb3NpdGlvbmluZy5jbGlja2VkT24gPj0gMCAmJiAoZXYudHlwZSA9PT0gJ3RvdWNoc3RhcnQnIHx8IGV2LmJ1dHRvbiA9PT0gMCkgJiYgdGhpcy5zZWxlY3RhYmxlc1twb3NpdGlvbmluZy5jbGlja2VkT25dKSB7XG5cdFx0dGhpcy5kcmFnVGFyZ2V0ID0gdGhpcy5zZWxlY3RhYmxlc1twb3NpdGlvbmluZy5jbGlja2VkT25dO1xuXHRcdHRoaXMuZHJhZ0luZGV4ID0gcG9zaXRpb25pbmcuY2xpY2tlZE9uO1xuXHRcdHRoaXMuZHJhZ01lY2hhbmlzbSA9IFwibW91c2VcIjtcblx0XHR0aGlzLmRyYWdNb3VzZVN0YXJ0ID0geyB4OiBwb3NpdGlvbmluZy54LCB5OiBwb3NpdGlvbmluZy55IH07XG5cdFx0aWYgKHRoaXMuZHJhZ2dpbmcgJiYgdGhpcy5kcmFnVGFyZ2V0LmlzRHJhZ2dhYmxlKSB7XG5cdFx0XHRhZGRHbG9iYWxDbGFzcyh0aGlzLnJlbmRlcmVyLnBhcGVyLCBcImFiY2pzLWRyYWdnaW5nLWluLXByb2dyZXNzXCIpO1xuXHRcdFx0dGhpcy5kcmFnVGFyZ2V0LmFic0VsLmhpZ2hsaWdodCh1bmRlZmluZWQsIHRoaXMuZHJhZ0NvbG9yKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gbW91c2VNb3ZlKGV2KSB7XG5cdHZhciBfZXYgPSBldjtcblx0aWYgKGV2LnR5cGUgPT09ICd0b3VjaG1vdmUnKSB7XG5cdFx0YXR0YWNoTWlzc2luZ1RvdWNoRXZlbnRBdHRyaWJ1dGVzKGV2KTtcblx0XHRpZiAoZXYudG91Y2hlcy5sZW5ndGggPiAwKVxuXHRcdFx0X2V2ID0gZXYudG91Y2hlc1swXTtcblx0fVxuXHR0aGlzLmxhc3RUb3VjaE1vdmUgPSBldjtcblx0Ly8gXCJ0aGlzXCIgaXMgdGhlIEVuZ3JhdmVyQ29udHJvbGxlciBiZWNhdXNlIG9mIHRoZSBiaW5kKHRoaXMpIHdoZW4gc2V0dGluZyB0aGUgZXZlbnQgbGlzdGVuZXIuXG5cblx0aWYgKCF0aGlzLmRyYWdUYXJnZXQgfHwgIXRoaXMuZHJhZ2dpbmcgfHwgIXRoaXMuZHJhZ1RhcmdldC5pc0RyYWdnYWJsZSB8fCB0aGlzLmRyYWdNZWNoYW5pc20gIT09ICdtb3VzZScgfHwgIXRoaXMuZHJhZ01vdXNlU3RhcnQpXG5cdFx0cmV0dXJuO1xuXG5cdHZhciBwb3NpdGlvbmluZyA9IGdldE1vdXNlUG9zaXRpb24odGhpcywgX2V2KTtcblxuXHR2YXIgeURpc3QgPSBNYXRoLnJvdW5kKChwb3NpdGlvbmluZy55IC0gdGhpcy5kcmFnTW91c2VTdGFydC55KSAvIHNwYWNpbmcuU1RFUCk7XG5cdGlmICh5RGlzdCAhPT0gdGhpcy5kcmFnWVN0ZXApIHtcblx0XHR0aGlzLmRyYWdZU3RlcCA9IHlEaXN0O1xuXHRcdHRoaXMuZHJhZ1RhcmdldC5zdmdFbC5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArICh5RGlzdCAqIHNwYWNpbmcuU1RFUCkgKyBcIilcIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gbW91c2VVcChldikge1xuXHQvLyBcInRoaXNcIiBpcyB0aGUgRW5ncmF2ZXJDb250cm9sbGVyIGJlY2F1c2Ugb2YgdGhlIGJpbmQodGhpcykgd2hlbiBzZXR0aW5nIHRoZSBldmVudCBsaXN0ZW5lci5cblx0dmFyIF9ldiA9IGV2O1xuXHRpZiAoZXYudHlwZSA9PT0gJ3RvdWNoZW5kJyAmJiB0aGlzLmxhc3RUb3VjaE1vdmUpIHtcblx0XHRhdHRhY2hNaXNzaW5nVG91Y2hFdmVudEF0dHJpYnV0ZXModGhpcy5sYXN0VG91Y2hNb3ZlKTtcblx0XHRpZiAodGhpcy5sYXN0VG91Y2hNb3ZlICYmIHRoaXMubGFzdFRvdWNoTW92ZS50b3VjaGVzICYmIHRoaXMubGFzdFRvdWNoTW92ZS50b3VjaGVzLmxlbmd0aCA+IDApXG5cdFx0XHRfZXYgPSB0aGlzLmxhc3RUb3VjaE1vdmUudG91Y2hlc1swXTtcblx0fVxuXG5cdGlmICghdGhpcy5kcmFnVGFyZ2V0KVxuXHRcdHJldHVybjtcblxuXHRjbGVhclNlbGVjdGlvbi5iaW5kKHRoaXMpKCk7XG5cdGlmICh0aGlzLmRyYWdUYXJnZXQuYWJzRWwgJiYgdGhpcy5kcmFnVGFyZ2V0LmFic0VsLmhpZ2hsaWdodCkge1xuXHRcdHRoaXMuc2VsZWN0ZWQgPSBbdGhpcy5kcmFnVGFyZ2V0LmFic0VsXTtcblx0XHR0aGlzLmRyYWdUYXJnZXQuYWJzRWwuaGlnaGxpZ2h0KHVuZGVmaW5lZCwgdGhpcy5zZWxlY3Rpb25Db2xvcik7XG5cdH1cblxuXHRub3RpZnlTZWxlY3QuYmluZCh0aGlzKSh0aGlzLmRyYWdUYXJnZXQsIHRoaXMuZHJhZ1lTdGVwLCB0aGlzLnNlbGVjdGFibGVzLmxlbmd0aCwgdGhpcy5kcmFnSW5kZXgsIF9ldik7XG5cdGlmICh0aGlzLmRyYWdUYXJnZXQuc3ZnRWwgJiYgdGhpcy5kcmFnVGFyZ2V0LnN2Z0VsLmZvY3VzKSB7XG5cdFx0dGhpcy5kcmFnVGFyZ2V0LnN2Z0VsLmZvY3VzKCk7XG5cdFx0dGhpcy5kcmFnVGFyZ2V0ID0gbnVsbDtcblx0XHR0aGlzLmRyYWdJbmRleCA9IC0xO1xuXHR9XG5cdHJlbW92ZUdsb2JhbENsYXNzKHRoaXMucmVuZGVyZXIuc3ZnLCBcImFiY2pzLWRyYWdnaW5nLWluLXByb2dyZXNzXCIpO1xufVxuXG5mdW5jdGlvbiBzZXRTZWxlY3Rpb24oZHJhZ0luZGV4KSB7XG5cdGlmIChkcmFnSW5kZXggPj0gMCAmJiBkcmFnSW5kZXggPCB0aGlzLnNlbGVjdGFibGVzLmxlbmd0aCkge1xuXHRcdHRoaXMuZHJhZ1RhcmdldCA9IHRoaXMuc2VsZWN0YWJsZXNbZHJhZ0luZGV4XTtcblx0XHR0aGlzLmRyYWdJbmRleCA9IGRyYWdJbmRleDtcblx0XHR0aGlzLmRyYWdNZWNoYW5pc20gPSBcImtleWJvYXJkXCI7XG5cdFx0bW91c2VVcC5iaW5kKHRoaXMpKHsgdGFyZ2V0OiB0aGlzLmRyYWdUYXJnZXQuc3ZnRWwgfSk7XG5cdH1cbn1cblxuXG5mdW5jdGlvbiBub3RpZnlTZWxlY3QodGFyZ2V0LCBkcmFnU3RlcCwgZHJhZ01heCwgZHJhZ0luZGV4LCBldikge1xuXHR2YXIgcmV0ID0gY3JlYXRlQW5hbHlzaXModGFyZ2V0LCBldilcblx0dmFyIGNsYXNzZXMgPSByZXQuY2xhc3Nlc1xuXHR2YXIgYW5hbHlzaXMgPSByZXQuYW5hbHlzaXNcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dGhpcy5saXN0ZW5lcnNbaV0odGFyZ2V0LmFic0VsLmFiY2VsZW0sIHRhcmdldC5hYnNFbC50dW5lTnVtYmVyLCBjbGFzc2VzLmpvaW4oJyAnKSwgYW5hbHlzaXMsIHsgc3RlcDogZHJhZ1N0ZXAsIG1heDogZHJhZ01heCwgaW5kZXg6IGRyYWdJbmRleCwgc2V0U2VsZWN0aW9uOiBzZXRTZWxlY3Rpb24uYmluZCh0aGlzKSB9LCBldik7XG5cdH1cbn1cblxuZnVuY3Rpb24gY2xlYXJTZWxlY3Rpb24oKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zZWxlY3RlZC5sZW5ndGg7IGkrKykge1xuXHRcdHRoaXMuc2VsZWN0ZWRbaV0udW5oaWdobGlnaHQodW5kZWZpbmVkLCB0aGlzLnJlbmRlcmVyLmZvcmVncm91bmRDb2xvcik7XG5cdH1cblx0dGhpcy5zZWxlY3RlZCA9IFtdO1xufVxuXG5mdW5jdGlvbiByYW5nZUhpZ2hsaWdodChzdGFydCwgZW5kKSB7XG5cdGNsZWFyU2VsZWN0aW9uLmJpbmQodGhpcykoKTtcblx0Zm9yICh2YXIgbGluZSA9IDA7IGxpbmUgPCB0aGlzLnN0YWZmZ3JvdXBzLmxlbmd0aDsgbGluZSsrKSB7XG5cdFx0dmFyIHZvaWNlcyA9IHRoaXMuc3RhZmZncm91cHNbbGluZV0udm9pY2VzO1xuXHRcdGZvciAodmFyIHZvaWNlID0gMDsgdm9pY2UgPCB2b2ljZXMubGVuZ3RoOyB2b2ljZSsrKSB7XG5cdFx0XHR2YXIgZWxlbXMgPSB2b2ljZXNbdm9pY2VdLmNoaWxkcmVuO1xuXHRcdFx0Zm9yICh2YXIgZWxlbSA9IDA7IGVsZW0gPCBlbGVtcy5sZW5ndGg7IGVsZW0rKykge1xuXHRcdFx0XHQvLyBTaW5jZSB0aGUgdXNlciBjYW4gaGlnaGxpZ2h0IG1vcmUgdGhhbiBhbiBlbGVtZW50LCBvciBwYXJ0IG9mIGFuIGVsZW1lbnQsIGEgaGl0IGlzIGlmIGFueSBvZiB0aGUgZW5kcG9pbnRzXG5cdFx0XHRcdC8vIGlzIGluc2lkZSB0aGUgb3RoZXIgcmFuZ2UuXG5cdFx0XHRcdHZhciBlbFN0YXJ0ID0gZWxlbXNbZWxlbV0uYWJjZWxlbS5zdGFydENoYXI7XG5cdFx0XHRcdHZhciBlbEVuZCA9IGVsZW1zW2VsZW1dLmFiY2VsZW0uZW5kQ2hhcjtcblx0XHRcdFx0aWYgKChlbmQgPiBlbFN0YXJ0ICYmIHN0YXJ0IDwgZWxFbmQpIHx8ICgoZW5kID09PSBzdGFydCkgJiYgZW5kID09PSBlbEVuZCkpIHtcblx0XHRcdFx0XHQvL1x0XHRpZiAoZWxlbXNbZWxlbV0uYWJjZWxlbS5zdGFydENoYXI+PXN0YXJ0ICYmIGVsZW1zW2VsZW1dLmFiY2VsZW0uZW5kQ2hhcjw9ZW5kKSB7XG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RlZFt0aGlzLnNlbGVjdGVkLmxlbmd0aF0gPSBlbGVtc1tlbGVtXTtcblx0XHRcdFx0XHRlbGVtc1tlbGVtXS5oaWdobGlnaHQodW5kZWZpbmVkLCB0aGlzLnNlbGVjdGlvbkNvbG9yKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBnZXRDbGFzc1NldChlbCkge1xuXHR2YXIgb2xkQ2xhc3MgPSBlbC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyk7XG5cdGlmICghb2xkQ2xhc3MpXG5cdFx0b2xkQ2xhc3MgPSBcIlwiO1xuXHR2YXIga2xhc3NlcyA9IG9sZENsYXNzLnNwbGl0KFwiIFwiKTtcblx0dmFyIG9iaiA9IHt9O1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGtsYXNzZXMubGVuZ3RoOyBpKyspXG5cdFx0b2JqW2tsYXNzZXNbaV1dID0gdHJ1ZTtcblx0cmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gc2V0Q2xhc3NTZXQoZWwsIGtsYXNzU2V0KSB7XG5cdHZhciBrbGFzc2VzID0gW107XG5cdGZvciAodmFyIGtleSBpbiBrbGFzc1NldCkge1xuXHRcdGlmIChrbGFzc1NldC5oYXNPd25Qcm9wZXJ0eShrZXkpKVxuXHRcdFx0a2xhc3Nlcy5wdXNoKGtleSk7XG5cdH1cblx0ZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGtsYXNzZXMuam9pbignICcpKTtcbn1cblxuZnVuY3Rpb24gYWRkR2xvYmFsQ2xhc3Moc3ZnLCBrbGFzcykge1xuXHRpZiAoc3ZnKSB7XG5cdFx0dmFyIG9iaiA9IGdldENsYXNzU2V0KHN2Zy5zdmcpO1xuXHRcdG9ialtrbGFzc10gPSB0cnVlO1xuXHRcdHNldENsYXNzU2V0KHN2Zy5zdmcsIG9iaik7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlR2xvYmFsQ2xhc3Moc3ZnLCBrbGFzcykge1xuXHRpZiAoc3ZnKSB7XG5cdFx0dmFyIG9iaiA9IGdldENsYXNzU2V0KHN2Zy5zdmcpO1xuXHRcdGRlbGV0ZSBvYmpba2xhc3NdO1xuXHRcdHNldENsYXNzU2V0KHN2Zy5zdmcsIG9iaik7XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXR1cFNlbGVjdGlvbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/interactive/selection.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/interactive/unhighlight.js":
/*!*****************************************************************!*\
  !*** ./node_modules/abcjs/src/write/interactive/unhighlight.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var setClass = __webpack_require__(/*! ../helpers/set-class */ \"(ssr)/./node_modules/abcjs/src/write/helpers/set-class.js\");\n\nvar unhighlight = function (klass, color) {\n\tif (klass === undefined)\n\t\tklass = \"abcjs-note_selected\";\n\tif (color === undefined)\n\t\tcolor = \"#000000\";\n\tsetClass(this.elemset, \"\", klass, color);\n};\n\nmodule.exports = unhighlight;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2ludGVyYWN0aXZlL3VuaGlnaGxpZ2h0LmpzIiwibWFwcGluZ3MiOiJBQUFBLGVBQWUsbUJBQU8sQ0FBQyx1RkFBc0I7O0FBRTdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2ludGVyYWN0aXZlL3VuaGlnaGxpZ2h0LmpzP2JhOWMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHNldENsYXNzID0gcmVxdWlyZSgnLi4vaGVscGVycy9zZXQtY2xhc3MnKTtcblxudmFyIHVuaGlnaGxpZ2h0ID0gZnVuY3Rpb24gKGtsYXNzLCBjb2xvcikge1xuXHRpZiAoa2xhc3MgPT09IHVuZGVmaW5lZClcblx0XHRrbGFzcyA9IFwiYWJjanMtbm90ZV9zZWxlY3RlZFwiO1xuXHRpZiAoY29sb3IgPT09IHVuZGVmaW5lZClcblx0XHRjb2xvciA9IFwiIzAwMDAwMFwiO1xuXHRzZXRDbGFzcyh0aGlzLmVsZW1zZXQsIFwiXCIsIGtsYXNzLCBjb2xvcik7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHVuaGlnaGxpZ2h0O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/interactive/unhighlight.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/layout/beam.js":
/*!*****************************************************!*\
  !*** ./node_modules/abcjs/src/write/layout/beam.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var RelativeElement = __webpack_require__(/*! ../creation/elements/relative-element */ \"(ssr)/./node_modules/abcjs/src/write/creation/elements/relative-element.js\");\nvar spacing = __webpack_require__(/*! ../helpers/spacing */ \"(ssr)/./node_modules/abcjs/src/write/helpers/spacing.js\");\nvar getBarYAt = __webpack_require__(/*! ./get-bar-y-at */ \"(ssr)/./node_modules/abcjs/src/write/layout/get-bar-y-at.js\");\n\nvar layoutBeam = function (beam) {\n\tif (beam.elems.length === 0 || beam.allrests) return;\n\n\tvar dy = calcDy(beam.stemsUp, beam.isgrace); // This is the width of the beam line.\n\n\t// create the main beam\n\tvar firstElement = beam.elems[0];\n\tvar lastElement = beam.elems[beam.elems.length - 1];\n\tvar minStemHeight = 0; // The following is to leave space for \"!///!\" marks.\n\tvar referencePitch = beam.stemsUp ? firstElement.abcelem.maxpitch : firstElement.abcelem.minpitch;\n\tminStemHeight = minStem(firstElement, beam.stemsUp, referencePitch, minStemHeight);\n\tminStemHeight = minStem(lastElement, beam.stemsUp, referencePitch, minStemHeight);\n\tminStemHeight = Math.max(beam.stemHeight, minStemHeight + 3); // TODO-PER: The 3 is the width of a 16th beam. The actual height of the beam should be used instead.\n\tvar yPos = calcYPos(beam.average, beam.elems.length, minStemHeight, beam.stemsUp, firstElement.abcelem.averagepitch, lastElement.abcelem.averagepitch, beam.isflat, beam.min, beam.max, beam.isgrace);\n\tvar xPos = calcXPos(beam.stemsUp, firstElement, lastElement);\n\tbeam.addBeam({ startX: xPos[0], endX: xPos[1], startY: yPos[0], endY: yPos[1], dy: dy });\n\n\t// create the rest of the beams (in the case of 1/16th notes, etc.\n\tvar beams = createAdditionalBeams(beam.elems, beam.stemsUp, beam.beams[0], beam.isgrace, dy);\n\tfor (var i = 0; i < beams.length; i++)\n\t\tbeam.addBeam(beams[i]);\n\n\t// Now that the main beam is defined, we know how tall the stems should be, so create them and attach them to the original notes.\n\tcreateStems(beam.elems, beam.stemsUp, beam.beams[0], dy, beam.mainNote);\n};\n\nvar getDurlog = function (duration) {\n\t// TODO-PER: This is a hack to prevent a Chrome lockup. Duration should have been defined already,\n\t// but there's definitely a case where it isn't. [Probably something to do with triplets.]\n\tif (duration === undefined) {\n\t\treturn 0;\n\t}\n\t//        console.log(\"getDurlog: \" + duration);\n\treturn Math.floor(Math.log(duration) / Math.log(2));\n};\n\n//\n// private functions\n//\nfunction minStem(element, stemsUp, referencePitch, minStemHeight) {\n\tif (!element.children)\n\t\treturn minStemHeight;\n\tfor (var i = 0; i < element.children.length; i++) {\n\t\tvar elem = element.children[i];\n\t\tif (stemsUp && elem.top !== undefined && elem.c === \"flags.ugrace\")\n\t\t\tminStemHeight = Math.max(minStemHeight, elem.top - referencePitch);\n\t\telse if (!stemsUp && elem.bottom !== undefined && elem.c === \"flags.ugrace\")\n\t\t\tminStemHeight = Math.max(minStemHeight, referencePitch - elem.bottom + 7); // The extra 7 is because we are measuring the slash from the top.\n\t}\n\treturn minStemHeight;\n}\n\nfunction calcSlant(leftAveragePitch, rightAveragePitch, numStems, isFlat) {\n\tif (isFlat)\n\t\treturn 0;\n\tvar slant = leftAveragePitch - rightAveragePitch;\n\tvar maxSlant = numStems / 2;\n\n\tif (slant > maxSlant) slant = maxSlant;\n\tif (slant < -maxSlant) slant = -maxSlant;\n\treturn slant;\n}\n\nfunction calcDy(asc, isGrace) {\n\tvar dy = (asc) ? spacing.STEP : -spacing.STEP;\n\tif (isGrace) dy = dy * 0.4;\n\treturn dy;\n}\n\nfunction calcXPos(asc, firstElement, lastElement) {\n\tvar starthead = firstElement.heads[asc ? 0 : firstElement.heads.length - 1];\n\tvar endhead = lastElement.heads[asc ? 0 : lastElement.heads.length - 1];\n\tvar startX = starthead.x;\n\tif (asc) startX += starthead.w - 0.6;\n\tvar endX = endhead.x;\n\tendX += (asc) ? endhead.w : 0.6;\n\treturn [startX, endX];\n}\n\nfunction calcYPos(average, numElements, stemHeight, asc, firstAveragePitch, lastAveragePitch, isFlat, minPitch, maxPitch, isGrace) {\n\tvar barpos = stemHeight - 2; // (isGrace)? 5:7;\n\tvar barminpos = stemHeight - 2;\n\tvar pos = Math.round(asc ? Math.max(average + barpos, maxPitch + barminpos) : Math.min(average - barpos, minPitch - barminpos));\n\n\tvar slant = calcSlant(firstAveragePitch, lastAveragePitch, numElements, isFlat);\n\tvar startY = pos + Math.floor(slant / 2);\n\tvar endY = pos + Math.floor(-slant / 2);\n\n\t// If the notes are too high or too low, make the beam go down to the middle\n\tif (!isGrace) {\n\t\tif (asc && pos < 6) {\n\t\t\tstartY = 6;\n\t\t\tendY = 6;\n\t\t} else if (!asc && pos > 6) {\n\t\t\tstartY = 6;\n\t\t\tendY = 6;\n\t\t}\n\t}\n\n\treturn [startY, endY];\n}\n\nfunction createStems(elems, asc, beam, dy, mainNote) {\n\tfor (var i = 0; i < elems.length; i++) {\n\t\tvar elem = elems[i];\n\t\tif (elem.abcelem.rest)\n\t\t\tcontinue;\n\t\t// TODO-PER: This is odd. If it is a regular beam then elems is an array of AbsoluteElements, if it is a grace beam then it is an array of objects , so we directly attach the element to the parent. We tell it if is a grace note because they are passed in as a generic object instead of an AbsoluteElement.\n\t\tvar isGrace = elem.addExtra ? false : true;\n\t\tvar parent = isGrace ? mainNote : elem;\n\t\tvar furthestHead = elem.heads[(asc) ? 0 : elem.heads.length - 1];\n\t\tvar ovalDelta = 1 / 5;//(isGrace)?1/3:1/5;\n\t\tvar pitch = furthestHead.pitch + ((asc) ? ovalDelta : -ovalDelta);\n\t\tvar dx = asc ? furthestHead.w : 0; // down-pointing stems start on the left side of the note, up-pointing stems start on the right side, so we offset by the note width.\n\t\tif (!isGrace)\n\t\t\tdx += furthestHead.dx;\n\t\tvar x = furthestHead.x + dx; // this is now the actual x location in pixels.\n\t\tvar bary = getBarYAt(beam.startX, beam.startY, beam.endX, beam.endY, x);\n\t\tvar lineWidth = (asc) ? -0.6 : 0.6;\n\t\tif (!asc)\n\t\t\tbary -= (dy / 2) / spacing.STEP;\t// TODO-PER: This is just a fudge factor so the down-pointing stems don't overlap.\n\t\tif (isGrace)\n\t\t\tdx += elem.heads[0].dx;\n\t\t// TODO-PER-HACK: One type of note head has a different placement of the stem. This should be more generically calculated:\n\t\tif (furthestHead.c === 'noteheads.slash.quarter') {\n\t\t\tif (asc)\n\t\t\t\tpitch += 1;\n\t\t\telse\n\t\t\t\tpitch -= 1;\n\t\t}\n\t\tvar stem = new RelativeElement(null, dx, 0, pitch, {\n\t\t\t\"type\": \"stem\",\n\t\t\t\"pitch2\": bary,\n\t\t\tlinewidth: lineWidth\n\t\t});\n\t\tstem.setX(parent.x); // This is after the x coordinates were set, so we have to set it directly.\n\t\tparent.addRight(stem);\n\t}\n\n}\n\nfunction createAdditionalBeams(elems, asc, beam, isGrace, dy) {\n\tvar beams = [];\n\tvar auxBeams = [];  // auxbeam will be {x, y, durlog, single} auxbeam[0] should match with durlog=-4 (16th) (j=-4-durlog)\n\tfor (var i = 0; i < elems.length; i++) {\n\t\tvar elem = elems[i];\n\t\tif (elem.abcelem.rest)\n\t\t\tcontinue;\n\t\tvar furthestHead = elem.heads[(asc) ? 0 : elem.heads.length - 1];\n\t\tvar x = furthestHead.x + ((asc) ? furthestHead.w : 0);\n\t\tvar bary = getBarYAt(beam.startX, beam.startY, beam.endX, beam.endY, x);\n\n\t\tvar sy = (asc) ? -1.5 : 1.5;\n\t\tif (isGrace) sy = sy * 2 / 3; // This makes the second beam on grace notes closer to the first one.\n\t\tvar duration = elem.abcelem.duration; // get the duration via abcelem because of triplets\n\t\tif (duration === 0) duration = 0.25; // if this is stemless, then we use quarter note as the duration.\n\t\tfor (var durlog = getDurlog(duration); durlog < -3; durlog++) {\n\t\t\tvar index = -4 - durlog;\n\t\t\tif (auxBeams[index]) {\n\t\t\t\tauxBeams[index].single = false;\n\t\t\t} else {\n\t\t\t\tauxBeams[index] = {\n\t\t\t\t\tx: x + ((asc) ? -0.6 : 0), y: bary + sy * (index + 1),\n\t\t\t\t\tdurlog: durlog, single: true\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (i > 0 && elem.abcelem.beambr && elem.abcelem.beambr <= (index + 1)) {\n\t\t\t\tif (!auxBeams[index].split)\n\t\t\t\t\tauxBeams[index].split = [auxBeams[index].x];\n\t\t\t\tvar xPos = calcXPos(asc, elems[i - 1], elem);\n\t\t\t\tif (auxBeams[index].split[auxBeams[index].split.length - 1] >= xPos[0]) {\n\t\t\t\t\t// the reduction in beams leaves a note unattached so create a small flag for it.\n\t\t\t\t\txPos[0] += elem.w;\n\t\t\t\t}\n\t\t\t\tauxBeams[index].split.push(xPos[0]);\n\t\t\t\tauxBeams[index].split.push(xPos[1]);\n\t\t\t}\n\t\t}\n\n\t\tfor (var j = auxBeams.length - 1; j >= 0; j--) {\n\t\t\tif (i === elems.length - 1 || getDurlog(elems[i + 1].abcelem.duration) > (-j - 4)) {\n\n\t\t\t\tvar auxBeamEndX = x;\n\t\t\t\tvar auxBeamEndY = bary + sy * (j + 1);\n\n\n\t\t\t\tif (auxBeams[j].single) {\n\t\t\t\t\tauxBeamEndX = (i === 0) ? x + 5 : x - 5;\n\t\t\t\t\tauxBeamEndY = getBarYAt(beam.startX, beam.startY, beam.endX, beam.endY, auxBeamEndX) + sy * (j + 1);\n\t\t\t\t}\n\t\t\t\tvar b = { startX: auxBeams[j].x, endX: auxBeamEndX, startY: auxBeams[j].y, endY: auxBeamEndY, dy: dy }\n\t\t\t\tif (auxBeams[j].split !== undefined) {\n\t\t\t\t\tvar split = auxBeams[j].split;\n\t\t\t\t\tif (b.endX <= split[split.length - 1]) {\n\t\t\t\t\t\t// the reduction in beams leaves the last note by itself, so create a little flag for it\n\t\t\t\t\t\tsplit[split.length - 1] -= elem.w;\n\t\t\t\t\t}\n\t\t\t\t\tsplit.push(b.endX);\n\t\t\t\t\tb.split = auxBeams[j].split;\n\t\t\t\t}\n\t\t\t\tbeams.push(b);\n\t\t\t\tauxBeams = auxBeams.slice(0, j);\n\t\t\t}\n\t\t}\n\t}\n\treturn beams;\n}\n\nmodule.exports = layoutBeam;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2xheW91dC9iZWFtLmpzIiwibWFwcGluZ3MiOiJBQUFBLHNCQUFzQixtQkFBTyxDQUFDLHlIQUF1QztBQUNyRSxjQUFjLG1CQUFPLENBQUMsbUZBQW9CO0FBQzFDLGdCQUFnQixtQkFBTyxDQUFDLG1GQUFnQjs7QUFFeEM7QUFDQTs7QUFFQSw4Q0FBOEM7O0FBRTlDO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSwrREFBK0Q7QUFDL0Q7QUFDQTtBQUNBLGdCQUFnQix3RUFBd0U7O0FBRXhGO0FBQ0E7QUFDQSxpQkFBaUIsa0JBQWtCO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDZCQUE2QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RTtBQUM5RTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHVCQUF1QjtBQUN2QjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxxQkFBcUIsb0JBQW9CLHNCQUFzQjtBQUMvRCxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdDQUFnQztBQUNoQyx3Q0FBd0M7QUFDeEMsdUNBQXVDO0FBQ3ZDLHlDQUF5QyxhQUFhO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9DQUFvQyxRQUFRO0FBQzVDOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2xheW91dC9iZWFtLmpzP2I3NjQiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIFJlbGF0aXZlRWxlbWVudCA9IHJlcXVpcmUoJy4uL2NyZWF0aW9uL2VsZW1lbnRzL3JlbGF0aXZlLWVsZW1lbnQnKTtcbnZhciBzcGFjaW5nID0gcmVxdWlyZSgnLi4vaGVscGVycy9zcGFjaW5nJyk7XG52YXIgZ2V0QmFyWUF0ID0gcmVxdWlyZSgnLi9nZXQtYmFyLXktYXQnKTtcblxudmFyIGxheW91dEJlYW0gPSBmdW5jdGlvbiAoYmVhbSkge1xuXHRpZiAoYmVhbS5lbGVtcy5sZW5ndGggPT09IDAgfHwgYmVhbS5hbGxyZXN0cykgcmV0dXJuO1xuXG5cdHZhciBkeSA9IGNhbGNEeShiZWFtLnN0ZW1zVXAsIGJlYW0uaXNncmFjZSk7IC8vIFRoaXMgaXMgdGhlIHdpZHRoIG9mIHRoZSBiZWFtIGxpbmUuXG5cblx0Ly8gY3JlYXRlIHRoZSBtYWluIGJlYW1cblx0dmFyIGZpcnN0RWxlbWVudCA9IGJlYW0uZWxlbXNbMF07XG5cdHZhciBsYXN0RWxlbWVudCA9IGJlYW0uZWxlbXNbYmVhbS5lbGVtcy5sZW5ndGggLSAxXTtcblx0dmFyIG1pblN0ZW1IZWlnaHQgPSAwOyAvLyBUaGUgZm9sbG93aW5nIGlzIHRvIGxlYXZlIHNwYWNlIGZvciBcIiEvLy8hXCIgbWFya3MuXG5cdHZhciByZWZlcmVuY2VQaXRjaCA9IGJlYW0uc3RlbXNVcCA/IGZpcnN0RWxlbWVudC5hYmNlbGVtLm1heHBpdGNoIDogZmlyc3RFbGVtZW50LmFiY2VsZW0ubWlucGl0Y2g7XG5cdG1pblN0ZW1IZWlnaHQgPSBtaW5TdGVtKGZpcnN0RWxlbWVudCwgYmVhbS5zdGVtc1VwLCByZWZlcmVuY2VQaXRjaCwgbWluU3RlbUhlaWdodCk7XG5cdG1pblN0ZW1IZWlnaHQgPSBtaW5TdGVtKGxhc3RFbGVtZW50LCBiZWFtLnN0ZW1zVXAsIHJlZmVyZW5jZVBpdGNoLCBtaW5TdGVtSGVpZ2h0KTtcblx0bWluU3RlbUhlaWdodCA9IE1hdGgubWF4KGJlYW0uc3RlbUhlaWdodCwgbWluU3RlbUhlaWdodCArIDMpOyAvLyBUT0RPLVBFUjogVGhlIDMgaXMgdGhlIHdpZHRoIG9mIGEgMTZ0aCBiZWFtLiBUaGUgYWN0dWFsIGhlaWdodCBvZiB0aGUgYmVhbSBzaG91bGQgYmUgdXNlZCBpbnN0ZWFkLlxuXHR2YXIgeVBvcyA9IGNhbGNZUG9zKGJlYW0uYXZlcmFnZSwgYmVhbS5lbGVtcy5sZW5ndGgsIG1pblN0ZW1IZWlnaHQsIGJlYW0uc3RlbXNVcCwgZmlyc3RFbGVtZW50LmFiY2VsZW0uYXZlcmFnZXBpdGNoLCBsYXN0RWxlbWVudC5hYmNlbGVtLmF2ZXJhZ2VwaXRjaCwgYmVhbS5pc2ZsYXQsIGJlYW0ubWluLCBiZWFtLm1heCwgYmVhbS5pc2dyYWNlKTtcblx0dmFyIHhQb3MgPSBjYWxjWFBvcyhiZWFtLnN0ZW1zVXAsIGZpcnN0RWxlbWVudCwgbGFzdEVsZW1lbnQpO1xuXHRiZWFtLmFkZEJlYW0oeyBzdGFydFg6IHhQb3NbMF0sIGVuZFg6IHhQb3NbMV0sIHN0YXJ0WTogeVBvc1swXSwgZW5kWTogeVBvc1sxXSwgZHk6IGR5IH0pO1xuXG5cdC8vIGNyZWF0ZSB0aGUgcmVzdCBvZiB0aGUgYmVhbXMgKGluIHRoZSBjYXNlIG9mIDEvMTZ0aCBub3RlcywgZXRjLlxuXHR2YXIgYmVhbXMgPSBjcmVhdGVBZGRpdGlvbmFsQmVhbXMoYmVhbS5lbGVtcywgYmVhbS5zdGVtc1VwLCBiZWFtLmJlYW1zWzBdLCBiZWFtLmlzZ3JhY2UsIGR5KTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBiZWFtcy5sZW5ndGg7IGkrKylcblx0XHRiZWFtLmFkZEJlYW0oYmVhbXNbaV0pO1xuXG5cdC8vIE5vdyB0aGF0IHRoZSBtYWluIGJlYW0gaXMgZGVmaW5lZCwgd2Uga25vdyBob3cgdGFsbCB0aGUgc3RlbXMgc2hvdWxkIGJlLCBzbyBjcmVhdGUgdGhlbSBhbmQgYXR0YWNoIHRoZW0gdG8gdGhlIG9yaWdpbmFsIG5vdGVzLlxuXHRjcmVhdGVTdGVtcyhiZWFtLmVsZW1zLCBiZWFtLnN0ZW1zVXAsIGJlYW0uYmVhbXNbMF0sIGR5LCBiZWFtLm1haW5Ob3RlKTtcbn07XG5cbnZhciBnZXREdXJsb2cgPSBmdW5jdGlvbiAoZHVyYXRpb24pIHtcblx0Ly8gVE9ETy1QRVI6IFRoaXMgaXMgYSBoYWNrIHRvIHByZXZlbnQgYSBDaHJvbWUgbG9ja3VwLiBEdXJhdGlvbiBzaG91bGQgaGF2ZSBiZWVuIGRlZmluZWQgYWxyZWFkeSxcblx0Ly8gYnV0IHRoZXJlJ3MgZGVmaW5pdGVseSBhIGNhc2Ugd2hlcmUgaXQgaXNuJ3QuIFtQcm9iYWJseSBzb21ldGhpbmcgdG8gZG8gd2l0aCB0cmlwbGV0cy5dXG5cdGlmIChkdXJhdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIDA7XG5cdH1cblx0Ly8gICAgICAgIGNvbnNvbGUubG9nKFwiZ2V0RHVybG9nOiBcIiArIGR1cmF0aW9uKTtcblx0cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5sb2coZHVyYXRpb24pIC8gTWF0aC5sb2coMikpO1xufTtcblxuLy9cbi8vIHByaXZhdGUgZnVuY3Rpb25zXG4vL1xuZnVuY3Rpb24gbWluU3RlbShlbGVtZW50LCBzdGVtc1VwLCByZWZlcmVuY2VQaXRjaCwgbWluU3RlbUhlaWdodCkge1xuXHRpZiAoIWVsZW1lbnQuY2hpbGRyZW4pXG5cdFx0cmV0dXJuIG1pblN0ZW1IZWlnaHQ7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBlbGVtID0gZWxlbWVudC5jaGlsZHJlbltpXTtcblx0XHRpZiAoc3RlbXNVcCAmJiBlbGVtLnRvcCAhPT0gdW5kZWZpbmVkICYmIGVsZW0uYyA9PT0gXCJmbGFncy51Z3JhY2VcIilcblx0XHRcdG1pblN0ZW1IZWlnaHQgPSBNYXRoLm1heChtaW5TdGVtSGVpZ2h0LCBlbGVtLnRvcCAtIHJlZmVyZW5jZVBpdGNoKTtcblx0XHRlbHNlIGlmICghc3RlbXNVcCAmJiBlbGVtLmJvdHRvbSAhPT0gdW5kZWZpbmVkICYmIGVsZW0uYyA9PT0gXCJmbGFncy51Z3JhY2VcIilcblx0XHRcdG1pblN0ZW1IZWlnaHQgPSBNYXRoLm1heChtaW5TdGVtSGVpZ2h0LCByZWZlcmVuY2VQaXRjaCAtIGVsZW0uYm90dG9tICsgNyk7IC8vIFRoZSBleHRyYSA3IGlzIGJlY2F1c2Ugd2UgYXJlIG1lYXN1cmluZyB0aGUgc2xhc2ggZnJvbSB0aGUgdG9wLlxuXHR9XG5cdHJldHVybiBtaW5TdGVtSGVpZ2h0O1xufVxuXG5mdW5jdGlvbiBjYWxjU2xhbnQobGVmdEF2ZXJhZ2VQaXRjaCwgcmlnaHRBdmVyYWdlUGl0Y2gsIG51bVN0ZW1zLCBpc0ZsYXQpIHtcblx0aWYgKGlzRmxhdClcblx0XHRyZXR1cm4gMDtcblx0dmFyIHNsYW50ID0gbGVmdEF2ZXJhZ2VQaXRjaCAtIHJpZ2h0QXZlcmFnZVBpdGNoO1xuXHR2YXIgbWF4U2xhbnQgPSBudW1TdGVtcyAvIDI7XG5cblx0aWYgKHNsYW50ID4gbWF4U2xhbnQpIHNsYW50ID0gbWF4U2xhbnQ7XG5cdGlmIChzbGFudCA8IC1tYXhTbGFudCkgc2xhbnQgPSAtbWF4U2xhbnQ7XG5cdHJldHVybiBzbGFudDtcbn1cblxuZnVuY3Rpb24gY2FsY0R5KGFzYywgaXNHcmFjZSkge1xuXHR2YXIgZHkgPSAoYXNjKSA/IHNwYWNpbmcuU1RFUCA6IC1zcGFjaW5nLlNURVA7XG5cdGlmIChpc0dyYWNlKSBkeSA9IGR5ICogMC40O1xuXHRyZXR1cm4gZHk7XG59XG5cbmZ1bmN0aW9uIGNhbGNYUG9zKGFzYywgZmlyc3RFbGVtZW50LCBsYXN0RWxlbWVudCkge1xuXHR2YXIgc3RhcnRoZWFkID0gZmlyc3RFbGVtZW50LmhlYWRzW2FzYyA/IDAgOiBmaXJzdEVsZW1lbnQuaGVhZHMubGVuZ3RoIC0gMV07XG5cdHZhciBlbmRoZWFkID0gbGFzdEVsZW1lbnQuaGVhZHNbYXNjID8gMCA6IGxhc3RFbGVtZW50LmhlYWRzLmxlbmd0aCAtIDFdO1xuXHR2YXIgc3RhcnRYID0gc3RhcnRoZWFkLng7XG5cdGlmIChhc2MpIHN0YXJ0WCArPSBzdGFydGhlYWQudyAtIDAuNjtcblx0dmFyIGVuZFggPSBlbmRoZWFkLng7XG5cdGVuZFggKz0gKGFzYykgPyBlbmRoZWFkLncgOiAwLjY7XG5cdHJldHVybiBbc3RhcnRYLCBlbmRYXTtcbn1cblxuZnVuY3Rpb24gY2FsY1lQb3MoYXZlcmFnZSwgbnVtRWxlbWVudHMsIHN0ZW1IZWlnaHQsIGFzYywgZmlyc3RBdmVyYWdlUGl0Y2gsIGxhc3RBdmVyYWdlUGl0Y2gsIGlzRmxhdCwgbWluUGl0Y2gsIG1heFBpdGNoLCBpc0dyYWNlKSB7XG5cdHZhciBiYXJwb3MgPSBzdGVtSGVpZ2h0IC0gMjsgLy8gKGlzR3JhY2UpPyA1Ojc7XG5cdHZhciBiYXJtaW5wb3MgPSBzdGVtSGVpZ2h0IC0gMjtcblx0dmFyIHBvcyA9IE1hdGgucm91bmQoYXNjID8gTWF0aC5tYXgoYXZlcmFnZSArIGJhcnBvcywgbWF4UGl0Y2ggKyBiYXJtaW5wb3MpIDogTWF0aC5taW4oYXZlcmFnZSAtIGJhcnBvcywgbWluUGl0Y2ggLSBiYXJtaW5wb3MpKTtcblxuXHR2YXIgc2xhbnQgPSBjYWxjU2xhbnQoZmlyc3RBdmVyYWdlUGl0Y2gsIGxhc3RBdmVyYWdlUGl0Y2gsIG51bUVsZW1lbnRzLCBpc0ZsYXQpO1xuXHR2YXIgc3RhcnRZID0gcG9zICsgTWF0aC5mbG9vcihzbGFudCAvIDIpO1xuXHR2YXIgZW5kWSA9IHBvcyArIE1hdGguZmxvb3IoLXNsYW50IC8gMik7XG5cblx0Ly8gSWYgdGhlIG5vdGVzIGFyZSB0b28gaGlnaCBvciB0b28gbG93LCBtYWtlIHRoZSBiZWFtIGdvIGRvd24gdG8gdGhlIG1pZGRsZVxuXHRpZiAoIWlzR3JhY2UpIHtcblx0XHRpZiAoYXNjICYmIHBvcyA8IDYpIHtcblx0XHRcdHN0YXJ0WSA9IDY7XG5cdFx0XHRlbmRZID0gNjtcblx0XHR9IGVsc2UgaWYgKCFhc2MgJiYgcG9zID4gNikge1xuXHRcdFx0c3RhcnRZID0gNjtcblx0XHRcdGVuZFkgPSA2O1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBbc3RhcnRZLCBlbmRZXTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU3RlbXMoZWxlbXMsIGFzYywgYmVhbSwgZHksIG1haW5Ob3RlKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgZWxlbSA9IGVsZW1zW2ldO1xuXHRcdGlmIChlbGVtLmFiY2VsZW0ucmVzdClcblx0XHRcdGNvbnRpbnVlO1xuXHRcdC8vIFRPRE8tUEVSOiBUaGlzIGlzIG9kZC4gSWYgaXQgaXMgYSByZWd1bGFyIGJlYW0gdGhlbiBlbGVtcyBpcyBhbiBhcnJheSBvZiBBYnNvbHV0ZUVsZW1lbnRzLCBpZiBpdCBpcyBhIGdyYWNlIGJlYW0gdGhlbiBpdCBpcyBhbiBhcnJheSBvZiBvYmplY3RzICwgc28gd2UgZGlyZWN0bHkgYXR0YWNoIHRoZSBlbGVtZW50IHRvIHRoZSBwYXJlbnQuIFdlIHRlbGwgaXQgaWYgaXMgYSBncmFjZSBub3RlIGJlY2F1c2UgdGhleSBhcmUgcGFzc2VkIGluIGFzIGEgZ2VuZXJpYyBvYmplY3QgaW5zdGVhZCBvZiBhbiBBYnNvbHV0ZUVsZW1lbnQuXG5cdFx0dmFyIGlzR3JhY2UgPSBlbGVtLmFkZEV4dHJhID8gZmFsc2UgOiB0cnVlO1xuXHRcdHZhciBwYXJlbnQgPSBpc0dyYWNlID8gbWFpbk5vdGUgOiBlbGVtO1xuXHRcdHZhciBmdXJ0aGVzdEhlYWQgPSBlbGVtLmhlYWRzWyhhc2MpID8gMCA6IGVsZW0uaGVhZHMubGVuZ3RoIC0gMV07XG5cdFx0dmFyIG92YWxEZWx0YSA9IDEgLyA1Oy8vKGlzR3JhY2UpPzEvMzoxLzU7XG5cdFx0dmFyIHBpdGNoID0gZnVydGhlc3RIZWFkLnBpdGNoICsgKChhc2MpID8gb3ZhbERlbHRhIDogLW92YWxEZWx0YSk7XG5cdFx0dmFyIGR4ID0gYXNjID8gZnVydGhlc3RIZWFkLncgOiAwOyAvLyBkb3duLXBvaW50aW5nIHN0ZW1zIHN0YXJ0IG9uIHRoZSBsZWZ0IHNpZGUgb2YgdGhlIG5vdGUsIHVwLXBvaW50aW5nIHN0ZW1zIHN0YXJ0IG9uIHRoZSByaWdodCBzaWRlLCBzbyB3ZSBvZmZzZXQgYnkgdGhlIG5vdGUgd2lkdGguXG5cdFx0aWYgKCFpc0dyYWNlKVxuXHRcdFx0ZHggKz0gZnVydGhlc3RIZWFkLmR4O1xuXHRcdHZhciB4ID0gZnVydGhlc3RIZWFkLnggKyBkeDsgLy8gdGhpcyBpcyBub3cgdGhlIGFjdHVhbCB4IGxvY2F0aW9uIGluIHBpeGVscy5cblx0XHR2YXIgYmFyeSA9IGdldEJhcllBdChiZWFtLnN0YXJ0WCwgYmVhbS5zdGFydFksIGJlYW0uZW5kWCwgYmVhbS5lbmRZLCB4KTtcblx0XHR2YXIgbGluZVdpZHRoID0gKGFzYykgPyAtMC42IDogMC42O1xuXHRcdGlmICghYXNjKVxuXHRcdFx0YmFyeSAtPSAoZHkgLyAyKSAvIHNwYWNpbmcuU1RFUDtcdC8vIFRPRE8tUEVSOiBUaGlzIGlzIGp1c3QgYSBmdWRnZSBmYWN0b3Igc28gdGhlIGRvd24tcG9pbnRpbmcgc3RlbXMgZG9uJ3Qgb3ZlcmxhcC5cblx0XHRpZiAoaXNHcmFjZSlcblx0XHRcdGR4ICs9IGVsZW0uaGVhZHNbMF0uZHg7XG5cdFx0Ly8gVE9ETy1QRVItSEFDSzogT25lIHR5cGUgb2Ygbm90ZSBoZWFkIGhhcyBhIGRpZmZlcmVudCBwbGFjZW1lbnQgb2YgdGhlIHN0ZW0uIFRoaXMgc2hvdWxkIGJlIG1vcmUgZ2VuZXJpY2FsbHkgY2FsY3VsYXRlZDpcblx0XHRpZiAoZnVydGhlc3RIZWFkLmMgPT09ICdub3RlaGVhZHMuc2xhc2gucXVhcnRlcicpIHtcblx0XHRcdGlmIChhc2MpXG5cdFx0XHRcdHBpdGNoICs9IDE7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdHBpdGNoIC09IDE7XG5cdFx0fVxuXHRcdHZhciBzdGVtID0gbmV3IFJlbGF0aXZlRWxlbWVudChudWxsLCBkeCwgMCwgcGl0Y2gsIHtcblx0XHRcdFwidHlwZVwiOiBcInN0ZW1cIixcblx0XHRcdFwicGl0Y2gyXCI6IGJhcnksXG5cdFx0XHRsaW5ld2lkdGg6IGxpbmVXaWR0aFxuXHRcdH0pO1xuXHRcdHN0ZW0uc2V0WChwYXJlbnQueCk7IC8vIFRoaXMgaXMgYWZ0ZXIgdGhlIHggY29vcmRpbmF0ZXMgd2VyZSBzZXQsIHNvIHdlIGhhdmUgdG8gc2V0IGl0IGRpcmVjdGx5LlxuXHRcdHBhcmVudC5hZGRSaWdodChzdGVtKTtcblx0fVxuXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFkZGl0aW9uYWxCZWFtcyhlbGVtcywgYXNjLCBiZWFtLCBpc0dyYWNlLCBkeSkge1xuXHR2YXIgYmVhbXMgPSBbXTtcblx0dmFyIGF1eEJlYW1zID0gW107ICAvLyBhdXhiZWFtIHdpbGwgYmUge3gsIHksIGR1cmxvZywgc2luZ2xlfSBhdXhiZWFtWzBdIHNob3VsZCBtYXRjaCB3aXRoIGR1cmxvZz0tNCAoMTZ0aCkgKGo9LTQtZHVybG9nKVxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1zLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGVsZW0gPSBlbGVtc1tpXTtcblx0XHRpZiAoZWxlbS5hYmNlbGVtLnJlc3QpXG5cdFx0XHRjb250aW51ZTtcblx0XHR2YXIgZnVydGhlc3RIZWFkID0gZWxlbS5oZWFkc1soYXNjKSA/IDAgOiBlbGVtLmhlYWRzLmxlbmd0aCAtIDFdO1xuXHRcdHZhciB4ID0gZnVydGhlc3RIZWFkLnggKyAoKGFzYykgPyBmdXJ0aGVzdEhlYWQudyA6IDApO1xuXHRcdHZhciBiYXJ5ID0gZ2V0QmFyWUF0KGJlYW0uc3RhcnRYLCBiZWFtLnN0YXJ0WSwgYmVhbS5lbmRYLCBiZWFtLmVuZFksIHgpO1xuXG5cdFx0dmFyIHN5ID0gKGFzYykgPyAtMS41IDogMS41O1xuXHRcdGlmIChpc0dyYWNlKSBzeSA9IHN5ICogMiAvIDM7IC8vIFRoaXMgbWFrZXMgdGhlIHNlY29uZCBiZWFtIG9uIGdyYWNlIG5vdGVzIGNsb3NlciB0byB0aGUgZmlyc3Qgb25lLlxuXHRcdHZhciBkdXJhdGlvbiA9IGVsZW0uYWJjZWxlbS5kdXJhdGlvbjsgLy8gZ2V0IHRoZSBkdXJhdGlvbiB2aWEgYWJjZWxlbSBiZWNhdXNlIG9mIHRyaXBsZXRzXG5cdFx0aWYgKGR1cmF0aW9uID09PSAwKSBkdXJhdGlvbiA9IDAuMjU7IC8vIGlmIHRoaXMgaXMgc3RlbWxlc3MsIHRoZW4gd2UgdXNlIHF1YXJ0ZXIgbm90ZSBhcyB0aGUgZHVyYXRpb24uXG5cdFx0Zm9yICh2YXIgZHVybG9nID0gZ2V0RHVybG9nKGR1cmF0aW9uKTsgZHVybG9nIDwgLTM7IGR1cmxvZysrKSB7XG5cdFx0XHR2YXIgaW5kZXggPSAtNCAtIGR1cmxvZztcblx0XHRcdGlmIChhdXhCZWFtc1tpbmRleF0pIHtcblx0XHRcdFx0YXV4QmVhbXNbaW5kZXhdLnNpbmdsZSA9IGZhbHNlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YXV4QmVhbXNbaW5kZXhdID0ge1xuXHRcdFx0XHRcdHg6IHggKyAoKGFzYykgPyAtMC42IDogMCksIHk6IGJhcnkgKyBzeSAqIChpbmRleCArIDEpLFxuXHRcdFx0XHRcdGR1cmxvZzogZHVybG9nLCBzaW5nbGU6IHRydWVcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdGlmIChpID4gMCAmJiBlbGVtLmFiY2VsZW0uYmVhbWJyICYmIGVsZW0uYWJjZWxlbS5iZWFtYnIgPD0gKGluZGV4ICsgMSkpIHtcblx0XHRcdFx0aWYgKCFhdXhCZWFtc1tpbmRleF0uc3BsaXQpXG5cdFx0XHRcdFx0YXV4QmVhbXNbaW5kZXhdLnNwbGl0ID0gW2F1eEJlYW1zW2luZGV4XS54XTtcblx0XHRcdFx0dmFyIHhQb3MgPSBjYWxjWFBvcyhhc2MsIGVsZW1zW2kgLSAxXSwgZWxlbSk7XG5cdFx0XHRcdGlmIChhdXhCZWFtc1tpbmRleF0uc3BsaXRbYXV4QmVhbXNbaW5kZXhdLnNwbGl0Lmxlbmd0aCAtIDFdID49IHhQb3NbMF0pIHtcblx0XHRcdFx0XHQvLyB0aGUgcmVkdWN0aW9uIGluIGJlYW1zIGxlYXZlcyBhIG5vdGUgdW5hdHRhY2hlZCBzbyBjcmVhdGUgYSBzbWFsbCBmbGFnIGZvciBpdC5cblx0XHRcdFx0XHR4UG9zWzBdICs9IGVsZW0udztcblx0XHRcdFx0fVxuXHRcdFx0XHRhdXhCZWFtc1tpbmRleF0uc3BsaXQucHVzaCh4UG9zWzBdKTtcblx0XHRcdFx0YXV4QmVhbXNbaW5kZXhdLnNwbGl0LnB1c2goeFBvc1sxXSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Zm9yICh2YXIgaiA9IGF1eEJlYW1zLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG5cdFx0XHRpZiAoaSA9PT0gZWxlbXMubGVuZ3RoIC0gMSB8fCBnZXREdXJsb2coZWxlbXNbaSArIDFdLmFiY2VsZW0uZHVyYXRpb24pID4gKC1qIC0gNCkpIHtcblxuXHRcdFx0XHR2YXIgYXV4QmVhbUVuZFggPSB4O1xuXHRcdFx0XHR2YXIgYXV4QmVhbUVuZFkgPSBiYXJ5ICsgc3kgKiAoaiArIDEpO1xuXG5cblx0XHRcdFx0aWYgKGF1eEJlYW1zW2pdLnNpbmdsZSkge1xuXHRcdFx0XHRcdGF1eEJlYW1FbmRYID0gKGkgPT09IDApID8geCArIDUgOiB4IC0gNTtcblx0XHRcdFx0XHRhdXhCZWFtRW5kWSA9IGdldEJhcllBdChiZWFtLnN0YXJ0WCwgYmVhbS5zdGFydFksIGJlYW0uZW5kWCwgYmVhbS5lbmRZLCBhdXhCZWFtRW5kWCkgKyBzeSAqIChqICsgMSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dmFyIGIgPSB7IHN0YXJ0WDogYXV4QmVhbXNbal0ueCwgZW5kWDogYXV4QmVhbUVuZFgsIHN0YXJ0WTogYXV4QmVhbXNbal0ueSwgZW5kWTogYXV4QmVhbUVuZFksIGR5OiBkeSB9XG5cdFx0XHRcdGlmIChhdXhCZWFtc1tqXS5zcGxpdCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0dmFyIHNwbGl0ID0gYXV4QmVhbXNbal0uc3BsaXQ7XG5cdFx0XHRcdFx0aWYgKGIuZW5kWCA8PSBzcGxpdFtzcGxpdC5sZW5ndGggLSAxXSkge1xuXHRcdFx0XHRcdFx0Ly8gdGhlIHJlZHVjdGlvbiBpbiBiZWFtcyBsZWF2ZXMgdGhlIGxhc3Qgbm90ZSBieSBpdHNlbGYsIHNvIGNyZWF0ZSBhIGxpdHRsZSBmbGFnIGZvciBpdFxuXHRcdFx0XHRcdFx0c3BsaXRbc3BsaXQubGVuZ3RoIC0gMV0gLT0gZWxlbS53O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzcGxpdC5wdXNoKGIuZW5kWCk7XG5cdFx0XHRcdFx0Yi5zcGxpdCA9IGF1eEJlYW1zW2pdLnNwbGl0O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJlYW1zLnB1c2goYik7XG5cdFx0XHRcdGF1eEJlYW1zID0gYXV4QmVhbXMuc2xpY2UoMCwgaik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiBiZWFtcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBsYXlvdXRCZWFtO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/layout/beam.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/layout/get-bar-y-at.js":
/*!*************************************************************!*\
  !*** ./node_modules/abcjs/src/write/layout/get-bar-y-at.js ***!
  \*************************************************************/
/***/ ((module) => {

eval("function getBarYAt(startx, starty, endx, endy, x) {\n\treturn starty + (endy - starty) / (endx - startx) * (x - startx);\n}\n\nmodule.exports = getBarYAt;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2xheW91dC9nZXQtYmFyLXktYXQuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2xheW91dC9nZXQtYmFyLXktYXQuanM/YjQ0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBnZXRCYXJZQXQoc3RhcnR4LCBzdGFydHksIGVuZHgsIGVuZHksIHgpIHtcblx0cmV0dXJuIHN0YXJ0eSArIChlbmR5IC0gc3RhcnR5KSAvIChlbmR4IC0gc3RhcnR4KSAqICh4IC0gc3RhcnR4KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRCYXJZQXQ7XG5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/layout/get-bar-y-at.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/layout/get-left-edge-of-staff.js":
/*!***********************************************************************!*\
  !*** ./node_modules/abcjs/src/write/layout/get-left-edge-of-staff.js ***!
  \***********************************************************************/
/***/ ((module) => {

eval("function getLeftEdgeOfStaff(renderer, getTextSize, voices, brace, bracket) {\n\tvar x = renderer.padding.left;\n\n\t// find out how much space will be taken up by voice headers\n\tvar voiceheaderw = 0;\n\tvar i;\n\tvar size;\n\tfor (i = 0; i < voices.length; i++) {\n\t\tif (voices[i].header) {\n\t\t\tsize = getTextSize.calc(voices[i].header, 'voicefont', '');\n\t\t\tvoiceheaderw = Math.max(voiceheaderw, size.width);\n\t\t}\n\t}\n\tvoiceheaderw = addBraceSize(voiceheaderw, brace, getTextSize);\n\tvoiceheaderw = addBraceSize(voiceheaderw, bracket, getTextSize);\n\n\tif (voiceheaderw) {\n\t\t// Give enough spacing to the right - we use the width of an A for the amount of spacing.\n\t\tvar sizeW = getTextSize.calc(\"A\", 'voicefont', '');\n\t\tvoiceheaderw += sizeW.width;\n\t}\n\tx += voiceheaderw;\n\n\tvar ofs = 0;\n\tofs = setBraceLocation(brace, x, ofs);\n\tofs = setBraceLocation(bracket, x, ofs);\n\treturn x + ofs;\n}\n\nfunction addBraceSize(voiceheaderw, brace, getTextSize) {\n\tif (brace) {\n\t\tfor (var i = 0; i < brace.length; i++) {\n\t\t\tif (brace[i].header) {\n\t\t\t\tvar size = getTextSize.calc(brace[i].header, 'voicefont', '');\n\t\t\t\tvoiceheaderw = Math.max(voiceheaderw, size.width);\n\t\t\t}\n\t\t}\n\t}\n\treturn voiceheaderw;\n}\n\nfunction setBraceLocation(brace, x, ofs) {\n\tif (brace) {\n\t\tfor (var i = 0; i < brace.length; i++) {\n\t\t\tsetLocation(x, brace[i]);\n\t\t\tofs = Math.max(ofs, brace[i].getWidth());\n\t\t}\n\t}\n\treturn ofs;\n}\n\nfunction setLocation(x, element) {\n\telement.x = x;\n}\n\nmodule.exports = getLeftEdgeOfStaff;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2xheW91dC9nZXQtbGVmdC1lZGdlLW9mLXN0YWZmLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLG1CQUFtQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvbGF5b3V0L2dldC1sZWZ0LWVkZ2Utb2Ytc3RhZmYuanM/N2MzMSJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBnZXRMZWZ0RWRnZU9mU3RhZmYocmVuZGVyZXIsIGdldFRleHRTaXplLCB2b2ljZXMsIGJyYWNlLCBicmFja2V0KSB7XG5cdHZhciB4ID0gcmVuZGVyZXIucGFkZGluZy5sZWZ0O1xuXG5cdC8vIGZpbmQgb3V0IGhvdyBtdWNoIHNwYWNlIHdpbGwgYmUgdGFrZW4gdXAgYnkgdm9pY2UgaGVhZGVyc1xuXHR2YXIgdm9pY2VoZWFkZXJ3ID0gMDtcblx0dmFyIGk7XG5cdHZhciBzaXplO1xuXHRmb3IgKGkgPSAwOyBpIDwgdm9pY2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0aWYgKHZvaWNlc1tpXS5oZWFkZXIpIHtcblx0XHRcdHNpemUgPSBnZXRUZXh0U2l6ZS5jYWxjKHZvaWNlc1tpXS5oZWFkZXIsICd2b2ljZWZvbnQnLCAnJyk7XG5cdFx0XHR2b2ljZWhlYWRlcncgPSBNYXRoLm1heCh2b2ljZWhlYWRlcncsIHNpemUud2lkdGgpO1xuXHRcdH1cblx0fVxuXHR2b2ljZWhlYWRlcncgPSBhZGRCcmFjZVNpemUodm9pY2VoZWFkZXJ3LCBicmFjZSwgZ2V0VGV4dFNpemUpO1xuXHR2b2ljZWhlYWRlcncgPSBhZGRCcmFjZVNpemUodm9pY2VoZWFkZXJ3LCBicmFja2V0LCBnZXRUZXh0U2l6ZSk7XG5cblx0aWYgKHZvaWNlaGVhZGVydykge1xuXHRcdC8vIEdpdmUgZW5vdWdoIHNwYWNpbmcgdG8gdGhlIHJpZ2h0IC0gd2UgdXNlIHRoZSB3aWR0aCBvZiBhbiBBIGZvciB0aGUgYW1vdW50IG9mIHNwYWNpbmcuXG5cdFx0dmFyIHNpemVXID0gZ2V0VGV4dFNpemUuY2FsYyhcIkFcIiwgJ3ZvaWNlZm9udCcsICcnKTtcblx0XHR2b2ljZWhlYWRlcncgKz0gc2l6ZVcud2lkdGg7XG5cdH1cblx0eCArPSB2b2ljZWhlYWRlcnc7XG5cblx0dmFyIG9mcyA9IDA7XG5cdG9mcyA9IHNldEJyYWNlTG9jYXRpb24oYnJhY2UsIHgsIG9mcyk7XG5cdG9mcyA9IHNldEJyYWNlTG9jYXRpb24oYnJhY2tldCwgeCwgb2ZzKTtcblx0cmV0dXJuIHggKyBvZnM7XG59XG5cbmZ1bmN0aW9uIGFkZEJyYWNlU2l6ZSh2b2ljZWhlYWRlcncsIGJyYWNlLCBnZXRUZXh0U2l6ZSkge1xuXHRpZiAoYnJhY2UpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGJyYWNlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAoYnJhY2VbaV0uaGVhZGVyKSB7XG5cdFx0XHRcdHZhciBzaXplID0gZ2V0VGV4dFNpemUuY2FsYyhicmFjZVtpXS5oZWFkZXIsICd2b2ljZWZvbnQnLCAnJyk7XG5cdFx0XHRcdHZvaWNlaGVhZGVydyA9IE1hdGgubWF4KHZvaWNlaGVhZGVydywgc2l6ZS53aWR0aCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiB2b2ljZWhlYWRlcnc7XG59XG5cbmZ1bmN0aW9uIHNldEJyYWNlTG9jYXRpb24oYnJhY2UsIHgsIG9mcykge1xuXHRpZiAoYnJhY2UpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGJyYWNlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRzZXRMb2NhdGlvbih4LCBicmFjZVtpXSk7XG5cdFx0XHRvZnMgPSBNYXRoLm1heChvZnMsIGJyYWNlW2ldLmdldFdpZHRoKCkpO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gb2ZzO1xufVxuXG5mdW5jdGlvbiBzZXRMb2NhdGlvbih4LCBlbGVtZW50KSB7XG5cdGVsZW1lbnQueCA9IHg7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0TGVmdEVkZ2VPZlN0YWZmO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/layout/get-left-edge-of-staff.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/layout/layout-in-grid.js":
/*!***************************************************************!*\
  !*** ./node_modules/abcjs/src/write/layout/layout-in-grid.js ***!
  \***************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var getLeftEdgeOfStaff = __webpack_require__(/*! ./get-left-edge-of-staff */ \"(ssr)/./node_modules/abcjs/src/write/layout/get-left-edge-of-staff.js\");\n\nfunction layoutInGrid(renderer, staffGroup, timeBasedLayout) {\n\tvar leftEdge = getLeftEdgeOfStaff(renderer, staffGroup.getTextSize, staffGroup.voices, staffGroup.brace, staffGroup.bracket);\n\tvar ret = getTotalDuration(staffGroup, timeBasedLayout.minPadding)\n\tvar totalDuration = ret.totalDuration\n\tvar minSpacing = ret.minSpacing\n\tvar totalWidth = minSpacing * totalDuration\n\tif (timeBasedLayout.minWidth)\n\t\ttotalWidth = Math.max(totalWidth, timeBasedLayout.minWidth)\n\tvar leftAlignPadding = timeBasedLayout.minPadding ? timeBasedLayout.minPadding/2 : 2 // If the padding isn't specified still give it some\n\n\tstaffGroup.startx = leftEdge\n\tstaffGroup.w = totalWidth + leftEdge\n\tfor (var i = 0; i < staffGroup.voices.length; i++) {\n\t\tvar voice = staffGroup.voices[i]\n\t\tvoice.startx = leftEdge\n\t\tvoice.w = totalWidth + leftEdge\n\n\t\tvar x = leftEdge\n\t\tvar afterFixedLeft = false\n\t\tvar durationUnit = 0\n\t\tfor (var j = 0; j < voice.children.length; j++) {\n\t\t\tvar child = voice.children[j]\n\t\t\tif (!afterFixedLeft) {\n\t\t\t\tif (child.duration !== 0) {\n\t\t\t\t\t// We got to the first music element on the line\n\t\t\t\t\tafterFixedLeft = true\n\t\t\t\t\tdurationUnit = (totalWidth + leftEdge - x) / totalDuration\n\t\t\t\t\tstaffGroup.gridStart = x\n\t\t\t\t} else {\n\t\t\t\t\t// We are still doing the preliminary stuff - clef, time sig, etc.\n\t\t\t\t\tchild.x = x\n\t\t\t\t\tx += child.w + child.minspacing\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (afterFixedLeft) {\n\t\t\t\tif (timeBasedLayout.align === 'center')\n\t\t\t\t\tchild.x = x + (child.duration * durationUnit) / 2 - child.w / 2\n\t\t\t\telse {\n\t\t\t\t\t// left align with padding - but no padding for barlines, they should be right aligned.\n\t\t\t\t\t// TODO-PER: it looks better to move bar lines one pixel to right. Not sure why.\n\t\t\t\t\tif (child.duration === 0) {\n\t\t\t\t\t\tchild.x = x + 1 - child.w\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// child.extraw has the width of the accidentals - push the note to the right to take that into consideration. It will be 0 if there is nothing to the left.\n\t\t\t\t\t\tchild.x = x + leftAlignPadding - child.extraw\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tx += child.duration * durationUnit\n\t\t\t}\n\t\t\tfor (var k = 0; k < child.children.length; k++) {\n\t\t\t\tvar grandchild = child.children[k]\n\t\t\t\t// some elements don't have a dx - Tempo, for instance\n\t\t\t\tvar dx = grandchild.dx ? grandchild.dx : 0\n\t\t\t\tgrandchild.x = child.x + dx\n\t\t\t}\n\t\t}\n\t\tstaffGroup.gridEnd = x\n\t}\n\treturn totalWidth\n}\n\nfunction getTotalDuration(staffGroup, timeBasedLayout) {\n\tvar maxSpacing = 0\n\tvar maxCount = 0\n\tfor (var i = 0; i < staffGroup.voices.length; i++) {\n\t\tvar count = 0\n\t\tvar voice = staffGroup.voices[i]\n\t\tfor (var j = 0; j < voice.children.length; j++) {\n\t\t\tvar element = voice.children[j]\n\t\t\tcount += element.duration\n\t\t\tif (element.duration) {\n\t\t\t\tvar width = (element.w+timeBasedLayout) / element.duration\n\t\t\t\tmaxSpacing = Math.max(maxSpacing, width)\n\t\t\t}\n\t\t}\n\t\tmaxCount = Math.max(maxCount, count)\n\t}\n\treturn { totalDuration: maxCount, minSpacing: maxSpacing}\n}\n\nmodule.exports = layoutInGrid;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2xheW91dC9sYXlvdXQtaW4tZ3JpZC5qcyIsIm1hcHBpbmdzIjoiQUFBQSx5QkFBeUIsbUJBQU8sQ0FBQyx1R0FBMEI7O0FBRTNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLDhCQUE4QjtBQUMvQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDJCQUEyQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsMkJBQTJCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw4QkFBOEI7QUFDL0M7QUFDQTtBQUNBLGtCQUFrQiwyQkFBMkI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2xheW91dC9sYXlvdXQtaW4tZ3JpZC5qcz85M2QyIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBnZXRMZWZ0RWRnZU9mU3RhZmYgPSByZXF1aXJlKCcuL2dldC1sZWZ0LWVkZ2Utb2Ytc3RhZmYnKTtcblxuZnVuY3Rpb24gbGF5b3V0SW5HcmlkKHJlbmRlcmVyLCBzdGFmZkdyb3VwLCB0aW1lQmFzZWRMYXlvdXQpIHtcblx0dmFyIGxlZnRFZGdlID0gZ2V0TGVmdEVkZ2VPZlN0YWZmKHJlbmRlcmVyLCBzdGFmZkdyb3VwLmdldFRleHRTaXplLCBzdGFmZkdyb3VwLnZvaWNlcywgc3RhZmZHcm91cC5icmFjZSwgc3RhZmZHcm91cC5icmFja2V0KTtcblx0dmFyIHJldCA9IGdldFRvdGFsRHVyYXRpb24oc3RhZmZHcm91cCwgdGltZUJhc2VkTGF5b3V0Lm1pblBhZGRpbmcpXG5cdHZhciB0b3RhbER1cmF0aW9uID0gcmV0LnRvdGFsRHVyYXRpb25cblx0dmFyIG1pblNwYWNpbmcgPSByZXQubWluU3BhY2luZ1xuXHR2YXIgdG90YWxXaWR0aCA9IG1pblNwYWNpbmcgKiB0b3RhbER1cmF0aW9uXG5cdGlmICh0aW1lQmFzZWRMYXlvdXQubWluV2lkdGgpXG5cdFx0dG90YWxXaWR0aCA9IE1hdGgubWF4KHRvdGFsV2lkdGgsIHRpbWVCYXNlZExheW91dC5taW5XaWR0aClcblx0dmFyIGxlZnRBbGlnblBhZGRpbmcgPSB0aW1lQmFzZWRMYXlvdXQubWluUGFkZGluZyA/IHRpbWVCYXNlZExheW91dC5taW5QYWRkaW5nLzIgOiAyIC8vIElmIHRoZSBwYWRkaW5nIGlzbid0IHNwZWNpZmllZCBzdGlsbCBnaXZlIGl0IHNvbWVcblxuXHRzdGFmZkdyb3VwLnN0YXJ0eCA9IGxlZnRFZGdlXG5cdHN0YWZmR3JvdXAudyA9IHRvdGFsV2lkdGggKyBsZWZ0RWRnZVxuXHRmb3IgKHZhciBpID0gMDsgaSA8IHN0YWZmR3JvdXAudm9pY2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIHZvaWNlID0gc3RhZmZHcm91cC52b2ljZXNbaV1cblx0XHR2b2ljZS5zdGFydHggPSBsZWZ0RWRnZVxuXHRcdHZvaWNlLncgPSB0b3RhbFdpZHRoICsgbGVmdEVkZ2VcblxuXHRcdHZhciB4ID0gbGVmdEVkZ2Vcblx0XHR2YXIgYWZ0ZXJGaXhlZExlZnQgPSBmYWxzZVxuXHRcdHZhciBkdXJhdGlvblVuaXQgPSAwXG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCB2b2ljZS5jaGlsZHJlbi5sZW5ndGg7IGorKykge1xuXHRcdFx0dmFyIGNoaWxkID0gdm9pY2UuY2hpbGRyZW5bal1cblx0XHRcdGlmICghYWZ0ZXJGaXhlZExlZnQpIHtcblx0XHRcdFx0aWYgKGNoaWxkLmR1cmF0aW9uICE9PSAwKSB7XG5cdFx0XHRcdFx0Ly8gV2UgZ290IHRvIHRoZSBmaXJzdCBtdXNpYyBlbGVtZW50IG9uIHRoZSBsaW5lXG5cdFx0XHRcdFx0YWZ0ZXJGaXhlZExlZnQgPSB0cnVlXG5cdFx0XHRcdFx0ZHVyYXRpb25Vbml0ID0gKHRvdGFsV2lkdGggKyBsZWZ0RWRnZSAtIHgpIC8gdG90YWxEdXJhdGlvblxuXHRcdFx0XHRcdHN0YWZmR3JvdXAuZ3JpZFN0YXJ0ID0geFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIFdlIGFyZSBzdGlsbCBkb2luZyB0aGUgcHJlbGltaW5hcnkgc3R1ZmYgLSBjbGVmLCB0aW1lIHNpZywgZXRjLlxuXHRcdFx0XHRcdGNoaWxkLnggPSB4XG5cdFx0XHRcdFx0eCArPSBjaGlsZC53ICsgY2hpbGQubWluc3BhY2luZ1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoYWZ0ZXJGaXhlZExlZnQpIHtcblx0XHRcdFx0aWYgKHRpbWVCYXNlZExheW91dC5hbGlnbiA9PT0gJ2NlbnRlcicpXG5cdFx0XHRcdFx0Y2hpbGQueCA9IHggKyAoY2hpbGQuZHVyYXRpb24gKiBkdXJhdGlvblVuaXQpIC8gMiAtIGNoaWxkLncgLyAyXG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdC8vIGxlZnQgYWxpZ24gd2l0aCBwYWRkaW5nIC0gYnV0IG5vIHBhZGRpbmcgZm9yIGJhcmxpbmVzLCB0aGV5IHNob3VsZCBiZSByaWdodCBhbGlnbmVkLlxuXHRcdFx0XHRcdC8vIFRPRE8tUEVSOiBpdCBsb29rcyBiZXR0ZXIgdG8gbW92ZSBiYXIgbGluZXMgb25lIHBpeGVsIHRvIHJpZ2h0LiBOb3Qgc3VyZSB3aHkuXG5cdFx0XHRcdFx0aWYgKGNoaWxkLmR1cmF0aW9uID09PSAwKSB7XG5cdFx0XHRcdFx0XHRjaGlsZC54ID0geCArIDEgLSBjaGlsZC53XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIGNoaWxkLmV4dHJhdyBoYXMgdGhlIHdpZHRoIG9mIHRoZSBhY2NpZGVudGFscyAtIHB1c2ggdGhlIG5vdGUgdG8gdGhlIHJpZ2h0IHRvIHRha2UgdGhhdCBpbnRvIGNvbnNpZGVyYXRpb24uIEl0IHdpbGwgYmUgMCBpZiB0aGVyZSBpcyBub3RoaW5nIHRvIHRoZSBsZWZ0LlxuXHRcdFx0XHRcdFx0Y2hpbGQueCA9IHggKyBsZWZ0QWxpZ25QYWRkaW5nIC0gY2hpbGQuZXh0cmF3XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHggKz0gY2hpbGQuZHVyYXRpb24gKiBkdXJhdGlvblVuaXRcblx0XHRcdH1cblx0XHRcdGZvciAodmFyIGsgPSAwOyBrIDwgY2hpbGQuY2hpbGRyZW4ubGVuZ3RoOyBrKyspIHtcblx0XHRcdFx0dmFyIGdyYW5kY2hpbGQgPSBjaGlsZC5jaGlsZHJlbltrXVxuXHRcdFx0XHQvLyBzb21lIGVsZW1lbnRzIGRvbid0IGhhdmUgYSBkeCAtIFRlbXBvLCBmb3IgaW5zdGFuY2Vcblx0XHRcdFx0dmFyIGR4ID0gZ3JhbmRjaGlsZC5keCA/IGdyYW5kY2hpbGQuZHggOiAwXG5cdFx0XHRcdGdyYW5kY2hpbGQueCA9IGNoaWxkLnggKyBkeFxuXHRcdFx0fVxuXHRcdH1cblx0XHRzdGFmZkdyb3VwLmdyaWRFbmQgPSB4XG5cdH1cblx0cmV0dXJuIHRvdGFsV2lkdGhcbn1cblxuZnVuY3Rpb24gZ2V0VG90YWxEdXJhdGlvbihzdGFmZkdyb3VwLCB0aW1lQmFzZWRMYXlvdXQpIHtcblx0dmFyIG1heFNwYWNpbmcgPSAwXG5cdHZhciBtYXhDb3VudCA9IDBcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdGFmZkdyb3VwLnZvaWNlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBjb3VudCA9IDBcblx0XHR2YXIgdm9pY2UgPSBzdGFmZkdyb3VwLnZvaWNlc1tpXVxuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgdm9pY2UuY2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcblx0XHRcdHZhciBlbGVtZW50ID0gdm9pY2UuY2hpbGRyZW5bal1cblx0XHRcdGNvdW50ICs9IGVsZW1lbnQuZHVyYXRpb25cblx0XHRcdGlmIChlbGVtZW50LmR1cmF0aW9uKSB7XG5cdFx0XHRcdHZhciB3aWR0aCA9IChlbGVtZW50LncrdGltZUJhc2VkTGF5b3V0KSAvIGVsZW1lbnQuZHVyYXRpb25cblx0XHRcdFx0bWF4U3BhY2luZyA9IE1hdGgubWF4KG1heFNwYWNpbmcsIHdpZHRoKVxuXHRcdFx0fVxuXHRcdH1cblx0XHRtYXhDb3VudCA9IE1hdGgubWF4KG1heENvdW50LCBjb3VudClcblx0fVxuXHRyZXR1cm4geyB0b3RhbER1cmF0aW9uOiBtYXhDb3VudCwgbWluU3BhY2luZzogbWF4U3BhY2luZ31cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBsYXlvdXRJbkdyaWQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/layout/layout-in-grid.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/layout/layout.js":
/*!*******************************************************!*\
  !*** ./node_modules/abcjs/src/write/layout/layout.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var layoutVoice = __webpack_require__(/*! ./voice */ \"(ssr)/./node_modules/abcjs/src/write/layout/voice.js\");\nvar setUpperAndLowerElements = __webpack_require__(/*! ./set-upper-and-lower-elements */ \"(ssr)/./node_modules/abcjs/src/write/layout/set-upper-and-lower-elements.js\");\nvar layoutStaffGroup = __webpack_require__(/*! ./staff-group */ \"(ssr)/./node_modules/abcjs/src/write/layout/staff-group.js\");\nvar getLeftEdgeOfStaff = __webpack_require__(/*! ./get-left-edge-of-staff */ \"(ssr)/./node_modules/abcjs/src/write/layout/get-left-edge-of-staff.js\");\nvar layoutInGrid = __webpack_require__(/*! ./layout-in-grid */ \"(ssr)/./node_modules/abcjs/src/write/layout/layout-in-grid.js\");\n\n// This sets the \"x\" attribute on all the children in abctune.lines\n// It also sets the \"w\" and \"startx\" attributes on \"voices\"\n// It also sets the \"w\" and \"startx\" attributes on \"voices.children\"\nvar layout = function (renderer, abctune, width, space, expandToWidest, timeBasedLayout) {\n\tvar i;\n\tvar abcLine;\n\t// Adjust the x-coordinates to their absolute positions\n\tvar maxWidth = width;\n\tfor (i = 0; i < abctune.lines.length; i++) {\n\t\tabcLine = abctune.lines[i];\n\t\tif (abcLine.staff) {\n\t\t\t// console.log(\"=== line\", i)\n\t\t\tvar thisWidth;\n\t\t\tif (timeBasedLayout !== undefined)\n\t\t\t\tthisWidth = layoutInGrid(renderer, abcLine.staffGroup, timeBasedLayout);\n\t\t\telse\n\t\t\t\tthisWidth = setXSpacing(renderer, maxWidth, space, abcLine.staffGroup, abctune.formatting, i === abctune.lines.length - 1, false);\n\t\t\t// console.log(thisWidth, maxWidth)\n\t\t\tif (Math.round(thisWidth) > Math.round(maxWidth)) { // to take care of floating point weirdness\n\t\t\t\tmaxWidth = thisWidth\n\t\t\t\tif (expandToWidest)\n\t\t\t\t\ti = -1 // do the calculations over with the new width\n\t\t\t}\n\t\t}\n\t}\n\n\t// Layout the beams and add the stems to the beamed notes.\n\tfor (i = 0; i < abctune.lines.length; i++) {\n\t\tabcLine = abctune.lines[i];\n\t\tif (abcLine.staffGroup && abcLine.staffGroup.voices) {\n\t\t\tfor (var j = 0; j < abcLine.staffGroup.voices.length; j++)\n\t\t\t\tlayoutVoice(abcLine.staffGroup.voices[j]);\n\t\t\tsetUpperAndLowerElements(renderer, abcLine.staffGroup);\n\t\t}\n\t}\n\n\t// Set the staff spacing\n\t// TODO-PER: we should have been able to do this by the time we called setUpperAndLowerElements, but for some reason the \"bottom\" element seems to be set as a side effect of setting the X spacing.\n\tfor (i = 0; i < abctune.lines.length; i++) {\n\t\tabcLine = abctune.lines[i];\n\t\tif (abcLine.staffGroup) {\n\t\t\tabcLine.staffGroup.setHeight();\n\t\t}\n\t}\n\treturn maxWidth;\n}\n// Do the x-axis positioning for a single line (a group of related staffs)\nvar setXSpacing = function (renderer, width, space, staffGroup, formatting, isLastLine, debug) {\n\tvar leftEdge = getLeftEdgeOfStaff(renderer, staffGroup.getTextSize, staffGroup.voices, staffGroup.brace, staffGroup.bracket);\n\tvar newspace = space;\n\t//dumpGroup(\"before\", staffGroup)\n\tfor (var it = 0; it < 8; it++) { // TODO-PER: shouldn't need multiple passes, but each pass gets it closer to the right spacing. (Only affects long lines: normal lines break out of this loop quickly.)\n\t\t// console.log(\"iteration\", it)\n\t\tvar ret = layoutStaffGroup(newspace, renderer.minPadding, debug, staffGroup, leftEdge);\n\t\tnewspace = calcHorizontalSpacing(isLastLine, formatting.stretchlast, width + renderer.padding.left, staffGroup.w, newspace, ret.spacingUnits, ret.minSpace, renderer.padding.left + renderer.padding.right);\n\t\tif (debug)\n\t\t\tconsole.log(\"setXSpace\", it, staffGroup.w, newspace, staffGroup.minspace);\n\t\tif (newspace === null) break;\n\t}\n\t//dumpGroup(\"after\",staffGroup)\n\tcenterWholeRests(staffGroup.voices);\n\treturn staffGroup.w - leftEdge\n};\n\nfunction replacer(key, value) {\n\t// Filtering out properties\n\tif (key === 'parent') {\n\t\treturn 'parent';\n\t}\n\tif (key === 'beam') {\n\t\treturn 'beam';\n\t}\n\treturn value;\n}\n\nfunction dumpGroup(label, staffGroup) {\n\tconsole.log(\"=================== \" + label + \" =========================\")\n\tconsole.log(staffGroup)\n\tconsole.log(JSON.stringify(staffGroup, replacer, \"\\t\"))\n}\n\nfunction calcHorizontalSpacing(isLastLine, stretchLast, targetWidth, lineWidth, spacing, spacingUnits, minSpace, padding) {\n\tif (isLastLine) {\n\t\tif (stretchLast === undefined) {\n\t\t\tif (lineWidth / targetWidth < 0.66) return null; // keep this for backward compatibility. The break isn't quite the same for some reason.\n\t\t} else {\n\t\t\t// \"Stretch the last music line of a tune when it lacks less than the float fraction of the page width.\"\n\t\t\tvar lack = 1 - (lineWidth + padding) / targetWidth;\n\t\t\tvar stretch = lack < stretchLast;\n\t\t\tif (!stretch) return null; // don't stretch last line too much\n\t\t}\n\t}\n\tif (Math.abs(targetWidth - lineWidth) < 2) return null; // if we are already near the target width, we're done.\n\tvar relSpace = spacingUnits * spacing;\n\tvar constSpace = lineWidth - relSpace;\n\tif (spacingUnits > 0) {\n\t\tspacing = (targetWidth - constSpace) / spacingUnits;\n\t\tif (spacing * minSpace > 50) {\n\t\t\tspacing = 50 / minSpace;\n\t\t}\n\t\treturn spacing;\n\t}\n\treturn null;\n}\n\nfunction centerWholeRests(voices) {\n\t// whole rests are a special case: if they are by themselves in a measure, then they should be centered.\n\t// (If they are not by themselves, that is probably a user error, but we'll just center it between the two items to either side of it.)\n\tfor (var i = 0; i < voices.length; i++) {\n\t\tvar voice = voices[i];\n\t\t// Look through all of the elements except for the first and last. If the whole note appears there then there isn't anything to center it between anyway.\n\t\tfor (var j = 1; j < voice.children.length - 1; j++) {\n\t\t\tvar absElem = voice.children[j];\n\t\t\tif (absElem.abcelem.rest && (absElem.abcelem.rest.type === 'whole' || absElem.abcelem.rest.type === 'multimeasure')) {\n\t\t\t\tvar before = voice.children[j - 1];\n\t\t\t\tvar after = voice.children[j + 1];\n\t\t\t\tabsElem.center(before, after);\n\t\t\t}\n\t\t}\n\t}\n}\n\nmodule.exports = layout;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2xheW91dC9sYXlvdXQuanMiLCJtYXBwaW5ncyI6IkFBQUEsa0JBQWtCLG1CQUFPLENBQUMscUVBQVM7QUFDbkMsK0JBQStCLG1CQUFPLENBQUMsbUhBQWdDO0FBQ3ZFLHVCQUF1QixtQkFBTyxDQUFDLGlGQUFlO0FBQzlDLHlCQUF5QixtQkFBTyxDQUFDLHVHQUEwQjtBQUMzRCxtQkFBbUIsbUJBQU8sQ0FBQyx1RkFBa0I7O0FBRTdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDBCQUEwQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQ7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYSwwQkFBMEI7QUFDdkM7QUFDQTtBQUNBLG1CQUFtQixzQ0FBc0M7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsMEJBQTBCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixRQUFRLFFBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQSx5REFBeUQ7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQSxrQkFBa0IsK0JBQStCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9sYXlvdXQvbGF5b3V0LmpzP2E0ZDgiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGxheW91dFZvaWNlID0gcmVxdWlyZSgnLi92b2ljZScpO1xudmFyIHNldFVwcGVyQW5kTG93ZXJFbGVtZW50cyA9IHJlcXVpcmUoJy4vc2V0LXVwcGVyLWFuZC1sb3dlci1lbGVtZW50cycpO1xudmFyIGxheW91dFN0YWZmR3JvdXAgPSByZXF1aXJlKCcuL3N0YWZmLWdyb3VwJyk7XG52YXIgZ2V0TGVmdEVkZ2VPZlN0YWZmID0gcmVxdWlyZSgnLi9nZXQtbGVmdC1lZGdlLW9mLXN0YWZmJyk7XG52YXIgbGF5b3V0SW5HcmlkID0gcmVxdWlyZSgnLi9sYXlvdXQtaW4tZ3JpZCcpO1xuXG4vLyBUaGlzIHNldHMgdGhlIFwieFwiIGF0dHJpYnV0ZSBvbiBhbGwgdGhlIGNoaWxkcmVuIGluIGFiY3R1bmUubGluZXNcbi8vIEl0IGFsc28gc2V0cyB0aGUgXCJ3XCIgYW5kIFwic3RhcnR4XCIgYXR0cmlidXRlcyBvbiBcInZvaWNlc1wiXG4vLyBJdCBhbHNvIHNldHMgdGhlIFwid1wiIGFuZCBcInN0YXJ0eFwiIGF0dHJpYnV0ZXMgb24gXCJ2b2ljZXMuY2hpbGRyZW5cIlxudmFyIGxheW91dCA9IGZ1bmN0aW9uIChyZW5kZXJlciwgYWJjdHVuZSwgd2lkdGgsIHNwYWNlLCBleHBhbmRUb1dpZGVzdCwgdGltZUJhc2VkTGF5b3V0KSB7XG5cdHZhciBpO1xuXHR2YXIgYWJjTGluZTtcblx0Ly8gQWRqdXN0IHRoZSB4LWNvb3JkaW5hdGVzIHRvIHRoZWlyIGFic29sdXRlIHBvc2l0aW9uc1xuXHR2YXIgbWF4V2lkdGggPSB3aWR0aDtcblx0Zm9yIChpID0gMDsgaSA8IGFiY3R1bmUubGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRhYmNMaW5lID0gYWJjdHVuZS5saW5lc1tpXTtcblx0XHRpZiAoYWJjTGluZS5zdGFmZikge1xuXHRcdFx0Ly8gY29uc29sZS5sb2coXCI9PT0gbGluZVwiLCBpKVxuXHRcdFx0dmFyIHRoaXNXaWR0aDtcblx0XHRcdGlmICh0aW1lQmFzZWRMYXlvdXQgIT09IHVuZGVmaW5lZClcblx0XHRcdFx0dGhpc1dpZHRoID0gbGF5b3V0SW5HcmlkKHJlbmRlcmVyLCBhYmNMaW5lLnN0YWZmR3JvdXAsIHRpbWVCYXNlZExheW91dCk7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdHRoaXNXaWR0aCA9IHNldFhTcGFjaW5nKHJlbmRlcmVyLCBtYXhXaWR0aCwgc3BhY2UsIGFiY0xpbmUuc3RhZmZHcm91cCwgYWJjdHVuZS5mb3JtYXR0aW5nLCBpID09PSBhYmN0dW5lLmxpbmVzLmxlbmd0aCAtIDEsIGZhbHNlKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKHRoaXNXaWR0aCwgbWF4V2lkdGgpXG5cdFx0XHRpZiAoTWF0aC5yb3VuZCh0aGlzV2lkdGgpID4gTWF0aC5yb3VuZChtYXhXaWR0aCkpIHsgLy8gdG8gdGFrZSBjYXJlIG9mIGZsb2F0aW5nIHBvaW50IHdlaXJkbmVzc1xuXHRcdFx0XHRtYXhXaWR0aCA9IHRoaXNXaWR0aFxuXHRcdFx0XHRpZiAoZXhwYW5kVG9XaWRlc3QpXG5cdFx0XHRcdFx0aSA9IC0xIC8vIGRvIHRoZSBjYWxjdWxhdGlvbnMgb3ZlciB3aXRoIHRoZSBuZXcgd2lkdGhcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBMYXlvdXQgdGhlIGJlYW1zIGFuZCBhZGQgdGhlIHN0ZW1zIHRvIHRoZSBiZWFtZWQgbm90ZXMuXG5cdGZvciAoaSA9IDA7IGkgPCBhYmN0dW5lLmxpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0YWJjTGluZSA9IGFiY3R1bmUubGluZXNbaV07XG5cdFx0aWYgKGFiY0xpbmUuc3RhZmZHcm91cCAmJiBhYmNMaW5lLnN0YWZmR3JvdXAudm9pY2VzKSB7XG5cdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGFiY0xpbmUuc3RhZmZHcm91cC52b2ljZXMubGVuZ3RoOyBqKyspXG5cdFx0XHRcdGxheW91dFZvaWNlKGFiY0xpbmUuc3RhZmZHcm91cC52b2ljZXNbal0pO1xuXHRcdFx0c2V0VXBwZXJBbmRMb3dlckVsZW1lbnRzKHJlbmRlcmVyLCBhYmNMaW5lLnN0YWZmR3JvdXApO1xuXHRcdH1cblx0fVxuXG5cdC8vIFNldCB0aGUgc3RhZmYgc3BhY2luZ1xuXHQvLyBUT0RPLVBFUjogd2Ugc2hvdWxkIGhhdmUgYmVlbiBhYmxlIHRvIGRvIHRoaXMgYnkgdGhlIHRpbWUgd2UgY2FsbGVkIHNldFVwcGVyQW5kTG93ZXJFbGVtZW50cywgYnV0IGZvciBzb21lIHJlYXNvbiB0aGUgXCJib3R0b21cIiBlbGVtZW50IHNlZW1zIHRvIGJlIHNldCBhcyBhIHNpZGUgZWZmZWN0IG9mIHNldHRpbmcgdGhlIFggc3BhY2luZy5cblx0Zm9yIChpID0gMDsgaSA8IGFiY3R1bmUubGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRhYmNMaW5lID0gYWJjdHVuZS5saW5lc1tpXTtcblx0XHRpZiAoYWJjTGluZS5zdGFmZkdyb3VwKSB7XG5cdFx0XHRhYmNMaW5lLnN0YWZmR3JvdXAuc2V0SGVpZ2h0KCk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBtYXhXaWR0aDtcbn1cbi8vIERvIHRoZSB4LWF4aXMgcG9zaXRpb25pbmcgZm9yIGEgc2luZ2xlIGxpbmUgKGEgZ3JvdXAgb2YgcmVsYXRlZCBzdGFmZnMpXG52YXIgc2V0WFNwYWNpbmcgPSBmdW5jdGlvbiAocmVuZGVyZXIsIHdpZHRoLCBzcGFjZSwgc3RhZmZHcm91cCwgZm9ybWF0dGluZywgaXNMYXN0TGluZSwgZGVidWcpIHtcblx0dmFyIGxlZnRFZGdlID0gZ2V0TGVmdEVkZ2VPZlN0YWZmKHJlbmRlcmVyLCBzdGFmZkdyb3VwLmdldFRleHRTaXplLCBzdGFmZkdyb3VwLnZvaWNlcywgc3RhZmZHcm91cC5icmFjZSwgc3RhZmZHcm91cC5icmFja2V0KTtcblx0dmFyIG5ld3NwYWNlID0gc3BhY2U7XG5cdC8vZHVtcEdyb3VwKFwiYmVmb3JlXCIsIHN0YWZmR3JvdXApXG5cdGZvciAodmFyIGl0ID0gMDsgaXQgPCA4OyBpdCsrKSB7IC8vIFRPRE8tUEVSOiBzaG91bGRuJ3QgbmVlZCBtdWx0aXBsZSBwYXNzZXMsIGJ1dCBlYWNoIHBhc3MgZ2V0cyBpdCBjbG9zZXIgdG8gdGhlIHJpZ2h0IHNwYWNpbmcuIChPbmx5IGFmZmVjdHMgbG9uZyBsaW5lczogbm9ybWFsIGxpbmVzIGJyZWFrIG91dCBvZiB0aGlzIGxvb3AgcXVpY2tseS4pXG5cdFx0Ly8gY29uc29sZS5sb2coXCJpdGVyYXRpb25cIiwgaXQpXG5cdFx0dmFyIHJldCA9IGxheW91dFN0YWZmR3JvdXAobmV3c3BhY2UsIHJlbmRlcmVyLm1pblBhZGRpbmcsIGRlYnVnLCBzdGFmZkdyb3VwLCBsZWZ0RWRnZSk7XG5cdFx0bmV3c3BhY2UgPSBjYWxjSG9yaXpvbnRhbFNwYWNpbmcoaXNMYXN0TGluZSwgZm9ybWF0dGluZy5zdHJldGNobGFzdCwgd2lkdGggKyByZW5kZXJlci5wYWRkaW5nLmxlZnQsIHN0YWZmR3JvdXAudywgbmV3c3BhY2UsIHJldC5zcGFjaW5nVW5pdHMsIHJldC5taW5TcGFjZSwgcmVuZGVyZXIucGFkZGluZy5sZWZ0ICsgcmVuZGVyZXIucGFkZGluZy5yaWdodCk7XG5cdFx0aWYgKGRlYnVnKVxuXHRcdFx0Y29uc29sZS5sb2coXCJzZXRYU3BhY2VcIiwgaXQsIHN0YWZmR3JvdXAudywgbmV3c3BhY2UsIHN0YWZmR3JvdXAubWluc3BhY2UpO1xuXHRcdGlmIChuZXdzcGFjZSA9PT0gbnVsbCkgYnJlYWs7XG5cdH1cblx0Ly9kdW1wR3JvdXAoXCJhZnRlclwiLHN0YWZmR3JvdXApXG5cdGNlbnRlcldob2xlUmVzdHMoc3RhZmZHcm91cC52b2ljZXMpO1xuXHRyZXR1cm4gc3RhZmZHcm91cC53IC0gbGVmdEVkZ2Vcbn07XG5cbmZ1bmN0aW9uIHJlcGxhY2VyKGtleSwgdmFsdWUpIHtcblx0Ly8gRmlsdGVyaW5nIG91dCBwcm9wZXJ0aWVzXG5cdGlmIChrZXkgPT09ICdwYXJlbnQnKSB7XG5cdFx0cmV0dXJuICdwYXJlbnQnO1xuXHR9XG5cdGlmIChrZXkgPT09ICdiZWFtJykge1xuXHRcdHJldHVybiAnYmVhbSc7XG5cdH1cblx0cmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBkdW1wR3JvdXAobGFiZWwsIHN0YWZmR3JvdXApIHtcblx0Y29uc29sZS5sb2coXCI9PT09PT09PT09PT09PT09PT09IFwiICsgbGFiZWwgKyBcIiA9PT09PT09PT09PT09PT09PT09PT09PT09XCIpXG5cdGNvbnNvbGUubG9nKHN0YWZmR3JvdXApXG5cdGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHN0YWZmR3JvdXAsIHJlcGxhY2VyLCBcIlxcdFwiKSlcbn1cblxuZnVuY3Rpb24gY2FsY0hvcml6b250YWxTcGFjaW5nKGlzTGFzdExpbmUsIHN0cmV0Y2hMYXN0LCB0YXJnZXRXaWR0aCwgbGluZVdpZHRoLCBzcGFjaW5nLCBzcGFjaW5nVW5pdHMsIG1pblNwYWNlLCBwYWRkaW5nKSB7XG5cdGlmIChpc0xhc3RMaW5lKSB7XG5cdFx0aWYgKHN0cmV0Y2hMYXN0ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdGlmIChsaW5lV2lkdGggLyB0YXJnZXRXaWR0aCA8IDAuNjYpIHJldHVybiBudWxsOyAvLyBrZWVwIHRoaXMgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkuIFRoZSBicmVhayBpc24ndCBxdWl0ZSB0aGUgc2FtZSBmb3Igc29tZSByZWFzb24uXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFwiU3RyZXRjaCB0aGUgbGFzdCBtdXNpYyBsaW5lIG9mIGEgdHVuZSB3aGVuIGl0IGxhY2tzIGxlc3MgdGhhbiB0aGUgZmxvYXQgZnJhY3Rpb24gb2YgdGhlIHBhZ2Ugd2lkdGguXCJcblx0XHRcdHZhciBsYWNrID0gMSAtIChsaW5lV2lkdGggKyBwYWRkaW5nKSAvIHRhcmdldFdpZHRoO1xuXHRcdFx0dmFyIHN0cmV0Y2ggPSBsYWNrIDwgc3RyZXRjaExhc3Q7XG5cdFx0XHRpZiAoIXN0cmV0Y2gpIHJldHVybiBudWxsOyAvLyBkb24ndCBzdHJldGNoIGxhc3QgbGluZSB0b28gbXVjaFxuXHRcdH1cblx0fVxuXHRpZiAoTWF0aC5hYnModGFyZ2V0V2lkdGggLSBsaW5lV2lkdGgpIDwgMikgcmV0dXJuIG51bGw7IC8vIGlmIHdlIGFyZSBhbHJlYWR5IG5lYXIgdGhlIHRhcmdldCB3aWR0aCwgd2UncmUgZG9uZS5cblx0dmFyIHJlbFNwYWNlID0gc3BhY2luZ1VuaXRzICogc3BhY2luZztcblx0dmFyIGNvbnN0U3BhY2UgPSBsaW5lV2lkdGggLSByZWxTcGFjZTtcblx0aWYgKHNwYWNpbmdVbml0cyA+IDApIHtcblx0XHRzcGFjaW5nID0gKHRhcmdldFdpZHRoIC0gY29uc3RTcGFjZSkgLyBzcGFjaW5nVW5pdHM7XG5cdFx0aWYgKHNwYWNpbmcgKiBtaW5TcGFjZSA+IDUwKSB7XG5cdFx0XHRzcGFjaW5nID0gNTAgLyBtaW5TcGFjZTtcblx0XHR9XG5cdFx0cmV0dXJuIHNwYWNpbmc7XG5cdH1cblx0cmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGNlbnRlcldob2xlUmVzdHModm9pY2VzKSB7XG5cdC8vIHdob2xlIHJlc3RzIGFyZSBhIHNwZWNpYWwgY2FzZTogaWYgdGhleSBhcmUgYnkgdGhlbXNlbHZlcyBpbiBhIG1lYXN1cmUsIHRoZW4gdGhleSBzaG91bGQgYmUgY2VudGVyZWQuXG5cdC8vIChJZiB0aGV5IGFyZSBub3QgYnkgdGhlbXNlbHZlcywgdGhhdCBpcyBwcm9iYWJseSBhIHVzZXIgZXJyb3IsIGJ1dCB3ZSdsbCBqdXN0IGNlbnRlciBpdCBiZXR3ZWVuIHRoZSB0d28gaXRlbXMgdG8gZWl0aGVyIHNpZGUgb2YgaXQuKVxuXHRmb3IgKHZhciBpID0gMDsgaSA8IHZvaWNlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciB2b2ljZSA9IHZvaWNlc1tpXTtcblx0XHQvLyBMb29rIHRocm91Z2ggYWxsIG9mIHRoZSBlbGVtZW50cyBleGNlcHQgZm9yIHRoZSBmaXJzdCBhbmQgbGFzdC4gSWYgdGhlIHdob2xlIG5vdGUgYXBwZWFycyB0aGVyZSB0aGVuIHRoZXJlIGlzbid0IGFueXRoaW5nIHRvIGNlbnRlciBpdCBiZXR3ZWVuIGFueXdheS5cblx0XHRmb3IgKHZhciBqID0gMTsgaiA8IHZvaWNlLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGorKykge1xuXHRcdFx0dmFyIGFic0VsZW0gPSB2b2ljZS5jaGlsZHJlbltqXTtcblx0XHRcdGlmIChhYnNFbGVtLmFiY2VsZW0ucmVzdCAmJiAoYWJzRWxlbS5hYmNlbGVtLnJlc3QudHlwZSA9PT0gJ3dob2xlJyB8fCBhYnNFbGVtLmFiY2VsZW0ucmVzdC50eXBlID09PSAnbXVsdGltZWFzdXJlJykpIHtcblx0XHRcdFx0dmFyIGJlZm9yZSA9IHZvaWNlLmNoaWxkcmVuW2ogLSAxXTtcblx0XHRcdFx0dmFyIGFmdGVyID0gdm9pY2UuY2hpbGRyZW5baiArIDFdO1xuXHRcdFx0XHRhYnNFbGVtLmNlbnRlcihiZWZvcmUsIGFmdGVyKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBsYXlvdXQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/layout/layout.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/layout/set-upper-and-lower-elements.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/abcjs/src/write/layout/set-upper-and-lower-elements.js ***!
  \*****************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var spacing = __webpack_require__(/*! ../helpers/spacing */ \"(ssr)/./node_modules/abcjs/src/write/helpers/spacing.js\");\n\nvar setUpperAndLowerElements = function (renderer, staffGroup) {\n\t// Each staff already has the top and bottom set, now we see if there are elements that are always on top and bottom, and resolve their pitch.\n\t// Also, get the overall height of all the staves in this group.\n\tvar lastStaffBottom;\n\tfor (var i = 0; i < staffGroup.staffs.length; i++) {\n\t\tvar staff = staffGroup.staffs[i];\n\t\t// the vertical order of elements that are above is: tempo, part, volume/dynamic, ending/chord, lyric\n\t\t// the vertical order of elements that are below is: lyric, chord, volume/dynamic\n\t\tvar positionY = {\n\t\t\ttempoHeightAbove: 0,\n\t\t\tpartHeightAbove: 0,\n\t\t\tvolumeHeightAbove: 0,\n\t\t\tdynamicHeightAbove: 0,\n\t\t\tendingHeightAbove: 0,\n\t\t\tchordHeightAbove: 0,\n\t\t\tlyricHeightAbove: 0,\n\n\t\t\tlyricHeightBelow: 0,\n\t\t\tchordHeightBelow: 0,\n\t\t\tvolumeHeightBelow: 0,\n\t\t\tdynamicHeightBelow: 0\n\t\t};\n\n\t\tif (renderer.showDebug && renderer.showDebug.indexOf(\"box\") >= 0) {\n\t\t\tstaff.originalTop = staff.top; // This is just being stored for debugging purposes.\n\t\t\tstaff.originalBottom = staff.bottom; // This is just being stored for debugging purposes.\n\t\t}\n\n\t\tincTop(staff, positionY, 'lyricHeightAbove');\n\t\tincTop(staff, positionY, 'chordHeightAbove', staff.specialY.chordLines.above);\n\t\tif (staff.specialY.endingHeightAbove) {\n\t\t\tif (staff.specialY.chordHeightAbove)\n\t\t\t\tstaff.top += 2;\n\t\t\telse\n\t\t\t\tstaff.top += staff.specialY.endingHeightAbove + margin;\n\t\t\tpositionY.endingHeightAbove = staff.top;\n\t\t}\n\t\tif (staff.specialY.dynamicHeightAbove && staff.specialY.volumeHeightAbove) {\n\t\t\tstaff.top += Math.max(staff.specialY.dynamicHeightAbove, staff.specialY.volumeHeightAbove) + margin;\n\t\t\tpositionY.dynamicHeightAbove = staff.top;\n\t\t\tpositionY.volumeHeightAbove = staff.top;\n\t\t} else {\n\t\t\tincTop(staff, positionY, 'dynamicHeightAbove');\n\t\t\tincTop(staff, positionY, 'volumeHeightAbove');\n\t\t}\n\t\tincTop(staff, positionY, 'partHeightAbove');\n\t\tincTop(staff, positionY, 'tempoHeightAbove');\n\n\t\tif (staff.specialY.lyricHeightBelow) {\n\t\t\tstaff.specialY.lyricHeightBelow += renderer.spacing.vocal / spacing.STEP;\n\t\t\tpositionY.lyricHeightBelow = staff.bottom;\n\t\t\tstaff.bottom -= (staff.specialY.lyricHeightBelow + margin);\n\t\t}\n\t\tif (staff.specialY.chordHeightBelow) {\n\t\t\tpositionY.chordHeightBelow = staff.bottom;\n\t\t\tvar hgt = staff.specialY.chordHeightBelow;\n\t\t\tif (staff.specialY.chordLines.below)\n\t\t\t\thgt *= staff.specialY.chordLines.below;\n\t\t\tstaff.bottom -= (hgt + margin);\n\t\t}\n\t\tif (staff.specialY.volumeHeightBelow && staff.specialY.dynamicHeightBelow) {\n\t\t\tpositionY.volumeHeightBelow = staff.bottom;\n\t\t\tpositionY.dynamicHeightBelow = staff.bottom;\n\t\t\tstaff.bottom -= (Math.max(staff.specialY.volumeHeightBelow, staff.specialY.dynamicHeightBelow) + margin);\n\t\t} else if (staff.specialY.volumeHeightBelow) {\n\t\t\tpositionY.volumeHeightBelow = staff.bottom; staff.bottom -= (staff.specialY.volumeHeightBelow + margin);\n\t\t} else if (staff.specialY.dynamicHeightBelow) {\n\t\t\tpositionY.dynamicHeightBelow = staff.bottom; staff.bottom -= (staff.specialY.dynamicHeightBelow + margin);\n\t\t}\n\n\t\tif (renderer.showDebug && renderer.showDebug.indexOf(\"box\") >= 0)\n\t\t\tstaff.positionY = positionY; // This is just being stored for debugging purposes.\n\n\t\tfor (var j = 0; j < staff.voices.length; j++) {\n\t\t\tvar voice = staffGroup.voices[staff.voices[j]];\n\t\t\tsetUpperAndLowerVoiceElements(positionY, voice, renderer.spacing);\n\t\t}\n\t\t// We might need a little space in between staves if the staves haven't been pushed far enough apart by notes or extra vertical stuff.\n\t\t// Only try to put in extra space if this isn't the top staff.\n\t\tif (lastStaffBottom !== undefined) {\n\t\t\tvar thisStaffTop = staff.top - 10;\n\t\t\tvar forcedSpacingBetween = lastStaffBottom + thisStaffTop;\n\t\t\tvar minSpacingInPitches = renderer.spacing.systemStaffSeparation / spacing.STEP;\n\t\t\tvar addedSpace = minSpacingInPitches - forcedSpacingBetween;\n\t\t\tif (addedSpace > 0)\n\t\t\t\tstaff.top += addedSpace;\n\t\t}\n\t\tstaff.top += renderer.spacing.staffTopMargin / spacing.STEP\n\n\t\tlastStaffBottom = 2 - staff.bottom; // the staff starts at position 2 and the bottom variable is negative. Therefore to find out how large the bottom is, we reverse the sign of the bottom, and add the 2 in.\n\n\t\t// Now we need a little margin on the top, so we'll just throw that in.\n\t\t//staff.top += 4;\n\t\t//console.log(\"Staff Y: \",i,heightInPitches,staff.top,staff.bottom);\n\t}\n\t//console.log(\"Staff Height: \",heightInPitches,this.height);\n};\n\nvar margin = 1;\nfunction incTop(staff, positionY, item, count) {\n\tif (staff.specialY[item]) {\n\t\tvar height = staff.specialY[item];\n\t\tif (count)\n\t\t\theight *= count;\n\t\tstaff.top += height + margin;\n\t\tpositionY[item] = staff.top;\n\t}\n}\n\nfunction setUpperAndLowerVoiceElements(positionY, voice, spacing) {\n\tvar i;\n\tvar abselem;\n\tfor (i = 0; i < voice.children.length; i++) {\n\t\tabselem = voice.children[i];\n\t\tsetUpperAndLowerAbsoluteElements(positionY, abselem, spacing);\n\t}\n\tfor (i = 0; i < voice.otherchildren.length; i++) {\n\t\tabselem = voice.otherchildren[i];\n\t\tswitch (abselem.type) {\n\t\t\tcase 'CrescendoElem':\n\t\t\t\tsetUpperAndLowerCrescendoElements(positionY, abselem);\n\t\t\t\tbreak;\n\t\t\tcase 'DynamicDecoration':\n\t\t\t\tsetUpperAndLowerDynamicElements(positionY, abselem);\n\t\t\t\tbreak;\n\t\t\tcase 'EndingElem':\n\t\t\t\tsetUpperAndLowerEndingElements(positionY, abselem);\n\t\t\t\tbreak;\n\t\t\tcase 'TieElem':\n\t\t\t\t// If a tie element is the highest or lowest thing then space might need to make room for it.\n\t\t\t\tvar yBounds = abselem.getYBounds()\n\t\t\t\tvoice.staff.top = Math.max(voice.staff.top, yBounds[0])\n\t\t\t\tvoice.staff.top = Math.max(voice.staff.top, yBounds[1])\n\t\t\t\tvoice.staff.bottom = Math.min(voice.staff.bottom, yBounds[0])\n\t\t\t\tvoice.staff.bottom = Math.min(voice.staff.bottom, yBounds[1])\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n\n// For each of the relative elements that can't be placed in advance (because their vertical placement depends on everything\n// else on the line), this iterates through them and sets their pitch. By the time this is called, specialYResolved contains a\n// hash with the vertical placement (in pitch units) for each type.\n// TODO-PER: I think this needs to be separated by \"above\" and \"below\". How do we know that for dynamics at the point where they are being defined, though? We need a pass through all the relative elements to set \"above\" and \"below\".\nfunction setUpperAndLowerAbsoluteElements(specialYResolved, element, spacing) {\n\t// specialYResolved contains the actual pitch for each of the classes of elements.\n\tfor (var i = 0; i < element.children.length; i++) {\n\t\tvar child = element.children[i];\n\t\tfor (var key in element.specialY) { // for each class of element that needs to be placed vertically\n\t\t\tif (element.specialY.hasOwnProperty(key)) {\n\t\t\t\tif (child[key]) { // If this relative element has defined a height for this class of element\n\t\t\t\t\tchild.pitch = specialYResolved[key];\n\t\t\t\t\tif (child.top === undefined) { // TODO-PER: HACK! Not sure this is the right place to do this.\n\t\t\t\t\t\tif (child.type === 'TempoElement') {\n\t\t\t\t\t\t\tsetUpperAndLowerTempoElement(specialYResolved, child);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetUpperAndLowerRelativeElements(specialYResolved, child, spacing);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telement.pushTop(child.top);\n\t\t\t\t\t\telement.pushBottom(child.bottom);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction setUpperAndLowerCrescendoElements(positionY, element) {\n\tif (element.dynamicHeightAbove)\n\t\telement.pitch = positionY.dynamicHeightAbove;\n\telse\n\t\telement.pitch = positionY.dynamicHeightBelow;\n}\n\nfunction setUpperAndLowerDynamicElements(positionY, element) {\n\tif (element.volumeHeightAbove)\n\t\telement.pitch = positionY.volumeHeightAbove;\n\telse\n\t\telement.pitch = positionY.volumeHeightBelow;\n}\n\nfunction setUpperAndLowerEndingElements(positionY, element) {\n\telement.pitch = positionY.endingHeightAbove - 2;\n}\n\nfunction setUpperAndLowerTempoElement(positionY, element) {\n\telement.pitch = positionY.tempoHeightAbove;\n\telement.top = positionY.tempoHeightAbove;\n\telement.bottom = positionY.tempoHeightAbove;\n\tif (element.note) {\n\t\tvar tempoPitch = element.pitch - element.totalHeightInPitches + 1; // The pitch we receive is the top of the allotted area: change that to practically the bottom.\n\t\telement.note.top = tempoPitch;\n\t\telement.note.bottom = tempoPitch;\n\t\tfor (var i = 0; i < element.note.children.length; i++) {\n\t\t\tvar child = element.note.children[i];\n\t\t\tchild.top += tempoPitch;\n\t\t\tchild.bottom += tempoPitch;\n\t\t\tchild.pitch += tempoPitch;\n\t\t\tif (child.pitch2 !== undefined)\n\t\t\t\tchild.pitch2 += tempoPitch;\n\t\t}\n\t}\n}\n\nfunction setUpperAndLowerRelativeElements(positionY, element, renderSpacing) {\n\tswitch (element.type) {\n\t\tcase \"part\":\n\t\t\telement.top = positionY.partHeightAbove + element.height;\n\t\t\telement.bottom = positionY.partHeightAbove;\n\t\t\tbreak;\n\t\tcase \"text\":\n\t\tcase \"chord\":\n\t\t\tif (element.chordHeightAbove) {\n\t\t\t\telement.top = positionY.chordHeightAbove;\n\t\t\t\telement.bottom = positionY.chordHeightAbove;\n\t\t\t} else {\n\t\t\t\telement.top = positionY.chordHeightBelow;\n\t\t\t\telement.bottom = positionY.chordHeightBelow;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"lyric\":\n\t\t\tif (element.lyricHeightAbove) {\n\t\t\t\telement.top = positionY.lyricHeightAbove;\n\t\t\t\telement.bottom = positionY.lyricHeightAbove;\n\t\t\t} else {\n\t\t\t\telement.top = positionY.lyricHeightBelow + renderSpacing.vocal / spacing.STEP;\n\t\t\t\telement.bottom = positionY.lyricHeightBelow + renderSpacing.vocal / spacing.STEP;\n\t\t\t\telement.pitch -= renderSpacing.vocal / spacing.STEP;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"debug\":\n\t\t\telement.top = positionY.chordHeightAbove;\n\t\t\telement.bottom = positionY.chordHeightAbove;\n\t\t\tbreak;\n\t}\n\tif (element.pitch === undefined || element.top === undefined)\n\t\tconsole.error(\"RelativeElement position not set.\", element.type, element.pitch, element.top, positionY);\n}\n\nmodule.exports = setUpperAndLowerElements;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2xheW91dC9zZXQtdXBwZXItYW5kLWxvd2VyLWVsZW1lbnRzLmpzIiwibWFwcGluZ3MiOiJBQUFBLGNBQWMsbUJBQU8sQ0FBQyxtRkFBb0I7O0FBRTFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDhCQUE4QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQ0FBa0M7QUFDbEMsd0NBQXdDO0FBQ3hDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osK0NBQStDO0FBQy9DLElBQUk7QUFDSixnREFBZ0Q7QUFDaEQ7O0FBRUE7QUFDQSxnQ0FBZ0M7O0FBRWhDLGtCQUFrQix5QkFBeUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxzQ0FBc0M7O0FBRXRDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDJCQUEyQjtBQUN4QztBQUNBO0FBQ0E7QUFDQSxhQUFhLGdDQUFnQztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsNkJBQTZCO0FBQzlDO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRTtBQUNyRTtBQUNBO0FBQ0Esa0JBQWtCLGtDQUFrQztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2xheW91dC9zZXQtdXBwZXItYW5kLWxvd2VyLWVsZW1lbnRzLmpzPzljZDYiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHNwYWNpbmcgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3NwYWNpbmcnKTtcblxudmFyIHNldFVwcGVyQW5kTG93ZXJFbGVtZW50cyA9IGZ1bmN0aW9uIChyZW5kZXJlciwgc3RhZmZHcm91cCkge1xuXHQvLyBFYWNoIHN0YWZmIGFscmVhZHkgaGFzIHRoZSB0b3AgYW5kIGJvdHRvbSBzZXQsIG5vdyB3ZSBzZWUgaWYgdGhlcmUgYXJlIGVsZW1lbnRzIHRoYXQgYXJlIGFsd2F5cyBvbiB0b3AgYW5kIGJvdHRvbSwgYW5kIHJlc29sdmUgdGhlaXIgcGl0Y2guXG5cdC8vIEFsc28sIGdldCB0aGUgb3ZlcmFsbCBoZWlnaHQgb2YgYWxsIHRoZSBzdGF2ZXMgaW4gdGhpcyBncm91cC5cblx0dmFyIGxhc3RTdGFmZkJvdHRvbTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdGFmZkdyb3VwLnN0YWZmcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBzdGFmZiA9IHN0YWZmR3JvdXAuc3RhZmZzW2ldO1xuXHRcdC8vIHRoZSB2ZXJ0aWNhbCBvcmRlciBvZiBlbGVtZW50cyB0aGF0IGFyZSBhYm92ZSBpczogdGVtcG8sIHBhcnQsIHZvbHVtZS9keW5hbWljLCBlbmRpbmcvY2hvcmQsIGx5cmljXG5cdFx0Ly8gdGhlIHZlcnRpY2FsIG9yZGVyIG9mIGVsZW1lbnRzIHRoYXQgYXJlIGJlbG93IGlzOiBseXJpYywgY2hvcmQsIHZvbHVtZS9keW5hbWljXG5cdFx0dmFyIHBvc2l0aW9uWSA9IHtcblx0XHRcdHRlbXBvSGVpZ2h0QWJvdmU6IDAsXG5cdFx0XHRwYXJ0SGVpZ2h0QWJvdmU6IDAsXG5cdFx0XHR2b2x1bWVIZWlnaHRBYm92ZTogMCxcblx0XHRcdGR5bmFtaWNIZWlnaHRBYm92ZTogMCxcblx0XHRcdGVuZGluZ0hlaWdodEFib3ZlOiAwLFxuXHRcdFx0Y2hvcmRIZWlnaHRBYm92ZTogMCxcblx0XHRcdGx5cmljSGVpZ2h0QWJvdmU6IDAsXG5cblx0XHRcdGx5cmljSGVpZ2h0QmVsb3c6IDAsXG5cdFx0XHRjaG9yZEhlaWdodEJlbG93OiAwLFxuXHRcdFx0dm9sdW1lSGVpZ2h0QmVsb3c6IDAsXG5cdFx0XHRkeW5hbWljSGVpZ2h0QmVsb3c6IDBcblx0XHR9O1xuXG5cdFx0aWYgKHJlbmRlcmVyLnNob3dEZWJ1ZyAmJiByZW5kZXJlci5zaG93RGVidWcuaW5kZXhPZihcImJveFwiKSA+PSAwKSB7XG5cdFx0XHRzdGFmZi5vcmlnaW5hbFRvcCA9IHN0YWZmLnRvcDsgLy8gVGhpcyBpcyBqdXN0IGJlaW5nIHN0b3JlZCBmb3IgZGVidWdnaW5nIHB1cnBvc2VzLlxuXHRcdFx0c3RhZmYub3JpZ2luYWxCb3R0b20gPSBzdGFmZi5ib3R0b207IC8vIFRoaXMgaXMganVzdCBiZWluZyBzdG9yZWQgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlcy5cblx0XHR9XG5cblx0XHRpbmNUb3Aoc3RhZmYsIHBvc2l0aW9uWSwgJ2x5cmljSGVpZ2h0QWJvdmUnKTtcblx0XHRpbmNUb3Aoc3RhZmYsIHBvc2l0aW9uWSwgJ2Nob3JkSGVpZ2h0QWJvdmUnLCBzdGFmZi5zcGVjaWFsWS5jaG9yZExpbmVzLmFib3ZlKTtcblx0XHRpZiAoc3RhZmYuc3BlY2lhbFkuZW5kaW5nSGVpZ2h0QWJvdmUpIHtcblx0XHRcdGlmIChzdGFmZi5zcGVjaWFsWS5jaG9yZEhlaWdodEFib3ZlKVxuXHRcdFx0XHRzdGFmZi50b3AgKz0gMjtcblx0XHRcdGVsc2Vcblx0XHRcdFx0c3RhZmYudG9wICs9IHN0YWZmLnNwZWNpYWxZLmVuZGluZ0hlaWdodEFib3ZlICsgbWFyZ2luO1xuXHRcdFx0cG9zaXRpb25ZLmVuZGluZ0hlaWdodEFib3ZlID0gc3RhZmYudG9wO1xuXHRcdH1cblx0XHRpZiAoc3RhZmYuc3BlY2lhbFkuZHluYW1pY0hlaWdodEFib3ZlICYmIHN0YWZmLnNwZWNpYWxZLnZvbHVtZUhlaWdodEFib3ZlKSB7XG5cdFx0XHRzdGFmZi50b3AgKz0gTWF0aC5tYXgoc3RhZmYuc3BlY2lhbFkuZHluYW1pY0hlaWdodEFib3ZlLCBzdGFmZi5zcGVjaWFsWS52b2x1bWVIZWlnaHRBYm92ZSkgKyBtYXJnaW47XG5cdFx0XHRwb3NpdGlvblkuZHluYW1pY0hlaWdodEFib3ZlID0gc3RhZmYudG9wO1xuXHRcdFx0cG9zaXRpb25ZLnZvbHVtZUhlaWdodEFib3ZlID0gc3RhZmYudG9wO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpbmNUb3Aoc3RhZmYsIHBvc2l0aW9uWSwgJ2R5bmFtaWNIZWlnaHRBYm92ZScpO1xuXHRcdFx0aW5jVG9wKHN0YWZmLCBwb3NpdGlvblksICd2b2x1bWVIZWlnaHRBYm92ZScpO1xuXHRcdH1cblx0XHRpbmNUb3Aoc3RhZmYsIHBvc2l0aW9uWSwgJ3BhcnRIZWlnaHRBYm92ZScpO1xuXHRcdGluY1RvcChzdGFmZiwgcG9zaXRpb25ZLCAndGVtcG9IZWlnaHRBYm92ZScpO1xuXG5cdFx0aWYgKHN0YWZmLnNwZWNpYWxZLmx5cmljSGVpZ2h0QmVsb3cpIHtcblx0XHRcdHN0YWZmLnNwZWNpYWxZLmx5cmljSGVpZ2h0QmVsb3cgKz0gcmVuZGVyZXIuc3BhY2luZy52b2NhbCAvIHNwYWNpbmcuU1RFUDtcblx0XHRcdHBvc2l0aW9uWS5seXJpY0hlaWdodEJlbG93ID0gc3RhZmYuYm90dG9tO1xuXHRcdFx0c3RhZmYuYm90dG9tIC09IChzdGFmZi5zcGVjaWFsWS5seXJpY0hlaWdodEJlbG93ICsgbWFyZ2luKTtcblx0XHR9XG5cdFx0aWYgKHN0YWZmLnNwZWNpYWxZLmNob3JkSGVpZ2h0QmVsb3cpIHtcblx0XHRcdHBvc2l0aW9uWS5jaG9yZEhlaWdodEJlbG93ID0gc3RhZmYuYm90dG9tO1xuXHRcdFx0dmFyIGhndCA9IHN0YWZmLnNwZWNpYWxZLmNob3JkSGVpZ2h0QmVsb3c7XG5cdFx0XHRpZiAoc3RhZmYuc3BlY2lhbFkuY2hvcmRMaW5lcy5iZWxvdylcblx0XHRcdFx0aGd0ICo9IHN0YWZmLnNwZWNpYWxZLmNob3JkTGluZXMuYmVsb3c7XG5cdFx0XHRzdGFmZi5ib3R0b20gLT0gKGhndCArIG1hcmdpbik7XG5cdFx0fVxuXHRcdGlmIChzdGFmZi5zcGVjaWFsWS52b2x1bWVIZWlnaHRCZWxvdyAmJiBzdGFmZi5zcGVjaWFsWS5keW5hbWljSGVpZ2h0QmVsb3cpIHtcblx0XHRcdHBvc2l0aW9uWS52b2x1bWVIZWlnaHRCZWxvdyA9IHN0YWZmLmJvdHRvbTtcblx0XHRcdHBvc2l0aW9uWS5keW5hbWljSGVpZ2h0QmVsb3cgPSBzdGFmZi5ib3R0b207XG5cdFx0XHRzdGFmZi5ib3R0b20gLT0gKE1hdGgubWF4KHN0YWZmLnNwZWNpYWxZLnZvbHVtZUhlaWdodEJlbG93LCBzdGFmZi5zcGVjaWFsWS5keW5hbWljSGVpZ2h0QmVsb3cpICsgbWFyZ2luKTtcblx0XHR9IGVsc2UgaWYgKHN0YWZmLnNwZWNpYWxZLnZvbHVtZUhlaWdodEJlbG93KSB7XG5cdFx0XHRwb3NpdGlvblkudm9sdW1lSGVpZ2h0QmVsb3cgPSBzdGFmZi5ib3R0b207IHN0YWZmLmJvdHRvbSAtPSAoc3RhZmYuc3BlY2lhbFkudm9sdW1lSGVpZ2h0QmVsb3cgKyBtYXJnaW4pO1xuXHRcdH0gZWxzZSBpZiAoc3RhZmYuc3BlY2lhbFkuZHluYW1pY0hlaWdodEJlbG93KSB7XG5cdFx0XHRwb3NpdGlvblkuZHluYW1pY0hlaWdodEJlbG93ID0gc3RhZmYuYm90dG9tOyBzdGFmZi5ib3R0b20gLT0gKHN0YWZmLnNwZWNpYWxZLmR5bmFtaWNIZWlnaHRCZWxvdyArIG1hcmdpbik7XG5cdFx0fVxuXG5cdFx0aWYgKHJlbmRlcmVyLnNob3dEZWJ1ZyAmJiByZW5kZXJlci5zaG93RGVidWcuaW5kZXhPZihcImJveFwiKSA+PSAwKVxuXHRcdFx0c3RhZmYucG9zaXRpb25ZID0gcG9zaXRpb25ZOyAvLyBUaGlzIGlzIGp1c3QgYmVpbmcgc3RvcmVkIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMuXG5cblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHN0YWZmLnZvaWNlcy5sZW5ndGg7IGorKykge1xuXHRcdFx0dmFyIHZvaWNlID0gc3RhZmZHcm91cC52b2ljZXNbc3RhZmYudm9pY2VzW2pdXTtcblx0XHRcdHNldFVwcGVyQW5kTG93ZXJWb2ljZUVsZW1lbnRzKHBvc2l0aW9uWSwgdm9pY2UsIHJlbmRlcmVyLnNwYWNpbmcpO1xuXHRcdH1cblx0XHQvLyBXZSBtaWdodCBuZWVkIGEgbGl0dGxlIHNwYWNlIGluIGJldHdlZW4gc3RhdmVzIGlmIHRoZSBzdGF2ZXMgaGF2ZW4ndCBiZWVuIHB1c2hlZCBmYXIgZW5vdWdoIGFwYXJ0IGJ5IG5vdGVzIG9yIGV4dHJhIHZlcnRpY2FsIHN0dWZmLlxuXHRcdC8vIE9ubHkgdHJ5IHRvIHB1dCBpbiBleHRyYSBzcGFjZSBpZiB0aGlzIGlzbid0IHRoZSB0b3Agc3RhZmYuXG5cdFx0aWYgKGxhc3RTdGFmZkJvdHRvbSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHR2YXIgdGhpc1N0YWZmVG9wID0gc3RhZmYudG9wIC0gMTA7XG5cdFx0XHR2YXIgZm9yY2VkU3BhY2luZ0JldHdlZW4gPSBsYXN0U3RhZmZCb3R0b20gKyB0aGlzU3RhZmZUb3A7XG5cdFx0XHR2YXIgbWluU3BhY2luZ0luUGl0Y2hlcyA9IHJlbmRlcmVyLnNwYWNpbmcuc3lzdGVtU3RhZmZTZXBhcmF0aW9uIC8gc3BhY2luZy5TVEVQO1xuXHRcdFx0dmFyIGFkZGVkU3BhY2UgPSBtaW5TcGFjaW5nSW5QaXRjaGVzIC0gZm9yY2VkU3BhY2luZ0JldHdlZW47XG5cdFx0XHRpZiAoYWRkZWRTcGFjZSA+IDApXG5cdFx0XHRcdHN0YWZmLnRvcCArPSBhZGRlZFNwYWNlO1xuXHRcdH1cblx0XHRzdGFmZi50b3AgKz0gcmVuZGVyZXIuc3BhY2luZy5zdGFmZlRvcE1hcmdpbiAvIHNwYWNpbmcuU1RFUFxuXG5cdFx0bGFzdFN0YWZmQm90dG9tID0gMiAtIHN0YWZmLmJvdHRvbTsgLy8gdGhlIHN0YWZmIHN0YXJ0cyBhdCBwb3NpdGlvbiAyIGFuZCB0aGUgYm90dG9tIHZhcmlhYmxlIGlzIG5lZ2F0aXZlLiBUaGVyZWZvcmUgdG8gZmluZCBvdXQgaG93IGxhcmdlIHRoZSBib3R0b20gaXMsIHdlIHJldmVyc2UgdGhlIHNpZ24gb2YgdGhlIGJvdHRvbSwgYW5kIGFkZCB0aGUgMiBpbi5cblxuXHRcdC8vIE5vdyB3ZSBuZWVkIGEgbGl0dGxlIG1hcmdpbiBvbiB0aGUgdG9wLCBzbyB3ZSdsbCBqdXN0IHRocm93IHRoYXQgaW4uXG5cdFx0Ly9zdGFmZi50b3AgKz0gNDtcblx0XHQvL2NvbnNvbGUubG9nKFwiU3RhZmYgWTogXCIsaSxoZWlnaHRJblBpdGNoZXMsc3RhZmYudG9wLHN0YWZmLmJvdHRvbSk7XG5cdH1cblx0Ly9jb25zb2xlLmxvZyhcIlN0YWZmIEhlaWdodDogXCIsaGVpZ2h0SW5QaXRjaGVzLHRoaXMuaGVpZ2h0KTtcbn07XG5cbnZhciBtYXJnaW4gPSAxO1xuZnVuY3Rpb24gaW5jVG9wKHN0YWZmLCBwb3NpdGlvblksIGl0ZW0sIGNvdW50KSB7XG5cdGlmIChzdGFmZi5zcGVjaWFsWVtpdGVtXSkge1xuXHRcdHZhciBoZWlnaHQgPSBzdGFmZi5zcGVjaWFsWVtpdGVtXTtcblx0XHRpZiAoY291bnQpXG5cdFx0XHRoZWlnaHQgKj0gY291bnQ7XG5cdFx0c3RhZmYudG9wICs9IGhlaWdodCArIG1hcmdpbjtcblx0XHRwb3NpdGlvbllbaXRlbV0gPSBzdGFmZi50b3A7XG5cdH1cbn1cblxuZnVuY3Rpb24gc2V0VXBwZXJBbmRMb3dlclZvaWNlRWxlbWVudHMocG9zaXRpb25ZLCB2b2ljZSwgc3BhY2luZykge1xuXHR2YXIgaTtcblx0dmFyIGFic2VsZW07XG5cdGZvciAoaSA9IDA7IGkgPCB2b2ljZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuXHRcdGFic2VsZW0gPSB2b2ljZS5jaGlsZHJlbltpXTtcblx0XHRzZXRVcHBlckFuZExvd2VyQWJzb2x1dGVFbGVtZW50cyhwb3NpdGlvblksIGFic2VsZW0sIHNwYWNpbmcpO1xuXHR9XG5cdGZvciAoaSA9IDA7IGkgPCB2b2ljZS5vdGhlcmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdFx0YWJzZWxlbSA9IHZvaWNlLm90aGVyY2hpbGRyZW5baV07XG5cdFx0c3dpdGNoIChhYnNlbGVtLnR5cGUpIHtcblx0XHRcdGNhc2UgJ0NyZXNjZW5kb0VsZW0nOlxuXHRcdFx0XHRzZXRVcHBlckFuZExvd2VyQ3Jlc2NlbmRvRWxlbWVudHMocG9zaXRpb25ZLCBhYnNlbGVtKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdEeW5hbWljRGVjb3JhdGlvbic6XG5cdFx0XHRcdHNldFVwcGVyQW5kTG93ZXJEeW5hbWljRWxlbWVudHMocG9zaXRpb25ZLCBhYnNlbGVtKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdFbmRpbmdFbGVtJzpcblx0XHRcdFx0c2V0VXBwZXJBbmRMb3dlckVuZGluZ0VsZW1lbnRzKHBvc2l0aW9uWSwgYWJzZWxlbSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnVGllRWxlbSc6XG5cdFx0XHRcdC8vIElmIGEgdGllIGVsZW1lbnQgaXMgdGhlIGhpZ2hlc3Qgb3IgbG93ZXN0IHRoaW5nIHRoZW4gc3BhY2UgbWlnaHQgbmVlZCB0byBtYWtlIHJvb20gZm9yIGl0LlxuXHRcdFx0XHR2YXIgeUJvdW5kcyA9IGFic2VsZW0uZ2V0WUJvdW5kcygpXG5cdFx0XHRcdHZvaWNlLnN0YWZmLnRvcCA9IE1hdGgubWF4KHZvaWNlLnN0YWZmLnRvcCwgeUJvdW5kc1swXSlcblx0XHRcdFx0dm9pY2Uuc3RhZmYudG9wID0gTWF0aC5tYXgodm9pY2Uuc3RhZmYudG9wLCB5Qm91bmRzWzFdKVxuXHRcdFx0XHR2b2ljZS5zdGFmZi5ib3R0b20gPSBNYXRoLm1pbih2b2ljZS5zdGFmZi5ib3R0b20sIHlCb3VuZHNbMF0pXG5cdFx0XHRcdHZvaWNlLnN0YWZmLmJvdHRvbSA9IE1hdGgubWluKHZvaWNlLnN0YWZmLmJvdHRvbSwgeUJvdW5kc1sxXSlcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9XG59XG5cbi8vIEZvciBlYWNoIG9mIHRoZSByZWxhdGl2ZSBlbGVtZW50cyB0aGF0IGNhbid0IGJlIHBsYWNlZCBpbiBhZHZhbmNlIChiZWNhdXNlIHRoZWlyIHZlcnRpY2FsIHBsYWNlbWVudCBkZXBlbmRzIG9uIGV2ZXJ5dGhpbmdcbi8vIGVsc2Ugb24gdGhlIGxpbmUpLCB0aGlzIGl0ZXJhdGVzIHRocm91Z2ggdGhlbSBhbmQgc2V0cyB0aGVpciBwaXRjaC4gQnkgdGhlIHRpbWUgdGhpcyBpcyBjYWxsZWQsIHNwZWNpYWxZUmVzb2x2ZWQgY29udGFpbnMgYVxuLy8gaGFzaCB3aXRoIHRoZSB2ZXJ0aWNhbCBwbGFjZW1lbnQgKGluIHBpdGNoIHVuaXRzKSBmb3IgZWFjaCB0eXBlLlxuLy8gVE9ETy1QRVI6IEkgdGhpbmsgdGhpcyBuZWVkcyB0byBiZSBzZXBhcmF0ZWQgYnkgXCJhYm92ZVwiIGFuZCBcImJlbG93XCIuIEhvdyBkbyB3ZSBrbm93IHRoYXQgZm9yIGR5bmFtaWNzIGF0IHRoZSBwb2ludCB3aGVyZSB0aGV5IGFyZSBiZWluZyBkZWZpbmVkLCB0aG91Z2g/IFdlIG5lZWQgYSBwYXNzIHRocm91Z2ggYWxsIHRoZSByZWxhdGl2ZSBlbGVtZW50cyB0byBzZXQgXCJhYm92ZVwiIGFuZCBcImJlbG93XCIuXG5mdW5jdGlvbiBzZXRVcHBlckFuZExvd2VyQWJzb2x1dGVFbGVtZW50cyhzcGVjaWFsWVJlc29sdmVkLCBlbGVtZW50LCBzcGFjaW5nKSB7XG5cdC8vIHNwZWNpYWxZUmVzb2x2ZWQgY29udGFpbnMgdGhlIGFjdHVhbCBwaXRjaCBmb3IgZWFjaCBvZiB0aGUgY2xhc3NlcyBvZiBlbGVtZW50cy5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGNoaWxkID0gZWxlbWVudC5jaGlsZHJlbltpXTtcblx0XHRmb3IgKHZhciBrZXkgaW4gZWxlbWVudC5zcGVjaWFsWSkgeyAvLyBmb3IgZWFjaCBjbGFzcyBvZiBlbGVtZW50IHRoYXQgbmVlZHMgdG8gYmUgcGxhY2VkIHZlcnRpY2FsbHlcblx0XHRcdGlmIChlbGVtZW50LnNwZWNpYWxZLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0XHRcdFx0aWYgKGNoaWxkW2tleV0pIHsgLy8gSWYgdGhpcyByZWxhdGl2ZSBlbGVtZW50IGhhcyBkZWZpbmVkIGEgaGVpZ2h0IGZvciB0aGlzIGNsYXNzIG9mIGVsZW1lbnRcblx0XHRcdFx0XHRjaGlsZC5waXRjaCA9IHNwZWNpYWxZUmVzb2x2ZWRba2V5XTtcblx0XHRcdFx0XHRpZiAoY2hpbGQudG9wID09PSB1bmRlZmluZWQpIHsgLy8gVE9ETy1QRVI6IEhBQ0shIE5vdCBzdXJlIHRoaXMgaXMgdGhlIHJpZ2h0IHBsYWNlIHRvIGRvIHRoaXMuXG5cdFx0XHRcdFx0XHRpZiAoY2hpbGQudHlwZSA9PT0gJ1RlbXBvRWxlbWVudCcpIHtcblx0XHRcdFx0XHRcdFx0c2V0VXBwZXJBbmRMb3dlclRlbXBvRWxlbWVudChzcGVjaWFsWVJlc29sdmVkLCBjaGlsZCk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRzZXRVcHBlckFuZExvd2VyUmVsYXRpdmVFbGVtZW50cyhzcGVjaWFsWVJlc29sdmVkLCBjaGlsZCwgc3BhY2luZyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbGVtZW50LnB1c2hUb3AoY2hpbGQudG9wKTtcblx0XHRcdFx0XHRcdGVsZW1lbnQucHVzaEJvdHRvbShjaGlsZC5ib3R0b20pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBzZXRVcHBlckFuZExvd2VyQ3Jlc2NlbmRvRWxlbWVudHMocG9zaXRpb25ZLCBlbGVtZW50KSB7XG5cdGlmIChlbGVtZW50LmR5bmFtaWNIZWlnaHRBYm92ZSlcblx0XHRlbGVtZW50LnBpdGNoID0gcG9zaXRpb25ZLmR5bmFtaWNIZWlnaHRBYm92ZTtcblx0ZWxzZVxuXHRcdGVsZW1lbnQucGl0Y2ggPSBwb3NpdGlvblkuZHluYW1pY0hlaWdodEJlbG93O1xufVxuXG5mdW5jdGlvbiBzZXRVcHBlckFuZExvd2VyRHluYW1pY0VsZW1lbnRzKHBvc2l0aW9uWSwgZWxlbWVudCkge1xuXHRpZiAoZWxlbWVudC52b2x1bWVIZWlnaHRBYm92ZSlcblx0XHRlbGVtZW50LnBpdGNoID0gcG9zaXRpb25ZLnZvbHVtZUhlaWdodEFib3ZlO1xuXHRlbHNlXG5cdFx0ZWxlbWVudC5waXRjaCA9IHBvc2l0aW9uWS52b2x1bWVIZWlnaHRCZWxvdztcbn1cblxuZnVuY3Rpb24gc2V0VXBwZXJBbmRMb3dlckVuZGluZ0VsZW1lbnRzKHBvc2l0aW9uWSwgZWxlbWVudCkge1xuXHRlbGVtZW50LnBpdGNoID0gcG9zaXRpb25ZLmVuZGluZ0hlaWdodEFib3ZlIC0gMjtcbn1cblxuZnVuY3Rpb24gc2V0VXBwZXJBbmRMb3dlclRlbXBvRWxlbWVudChwb3NpdGlvblksIGVsZW1lbnQpIHtcblx0ZWxlbWVudC5waXRjaCA9IHBvc2l0aW9uWS50ZW1wb0hlaWdodEFib3ZlO1xuXHRlbGVtZW50LnRvcCA9IHBvc2l0aW9uWS50ZW1wb0hlaWdodEFib3ZlO1xuXHRlbGVtZW50LmJvdHRvbSA9IHBvc2l0aW9uWS50ZW1wb0hlaWdodEFib3ZlO1xuXHRpZiAoZWxlbWVudC5ub3RlKSB7XG5cdFx0dmFyIHRlbXBvUGl0Y2ggPSBlbGVtZW50LnBpdGNoIC0gZWxlbWVudC50b3RhbEhlaWdodEluUGl0Y2hlcyArIDE7IC8vIFRoZSBwaXRjaCB3ZSByZWNlaXZlIGlzIHRoZSB0b3Agb2YgdGhlIGFsbG90dGVkIGFyZWE6IGNoYW5nZSB0aGF0IHRvIHByYWN0aWNhbGx5IHRoZSBib3R0b20uXG5cdFx0ZWxlbWVudC5ub3RlLnRvcCA9IHRlbXBvUGl0Y2g7XG5cdFx0ZWxlbWVudC5ub3RlLmJvdHRvbSA9IHRlbXBvUGl0Y2g7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50Lm5vdGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBjaGlsZCA9IGVsZW1lbnQubm90ZS5jaGlsZHJlbltpXTtcblx0XHRcdGNoaWxkLnRvcCArPSB0ZW1wb1BpdGNoO1xuXHRcdFx0Y2hpbGQuYm90dG9tICs9IHRlbXBvUGl0Y2g7XG5cdFx0XHRjaGlsZC5waXRjaCArPSB0ZW1wb1BpdGNoO1xuXHRcdFx0aWYgKGNoaWxkLnBpdGNoMiAhPT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRjaGlsZC5waXRjaDIgKz0gdGVtcG9QaXRjaDtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gc2V0VXBwZXJBbmRMb3dlclJlbGF0aXZlRWxlbWVudHMocG9zaXRpb25ZLCBlbGVtZW50LCByZW5kZXJTcGFjaW5nKSB7XG5cdHN3aXRjaCAoZWxlbWVudC50eXBlKSB7XG5cdFx0Y2FzZSBcInBhcnRcIjpcblx0XHRcdGVsZW1lbnQudG9wID0gcG9zaXRpb25ZLnBhcnRIZWlnaHRBYm92ZSArIGVsZW1lbnQuaGVpZ2h0O1xuXHRcdFx0ZWxlbWVudC5ib3R0b20gPSBwb3NpdGlvblkucGFydEhlaWdodEFib3ZlO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcInRleHRcIjpcblx0XHRjYXNlIFwiY2hvcmRcIjpcblx0XHRcdGlmIChlbGVtZW50LmNob3JkSGVpZ2h0QWJvdmUpIHtcblx0XHRcdFx0ZWxlbWVudC50b3AgPSBwb3NpdGlvblkuY2hvcmRIZWlnaHRBYm92ZTtcblx0XHRcdFx0ZWxlbWVudC5ib3R0b20gPSBwb3NpdGlvblkuY2hvcmRIZWlnaHRBYm92ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsZW1lbnQudG9wID0gcG9zaXRpb25ZLmNob3JkSGVpZ2h0QmVsb3c7XG5cdFx0XHRcdGVsZW1lbnQuYm90dG9tID0gcG9zaXRpb25ZLmNob3JkSGVpZ2h0QmVsb3c7XG5cdFx0XHR9XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwibHlyaWNcIjpcblx0XHRcdGlmIChlbGVtZW50Lmx5cmljSGVpZ2h0QWJvdmUpIHtcblx0XHRcdFx0ZWxlbWVudC50b3AgPSBwb3NpdGlvblkubHlyaWNIZWlnaHRBYm92ZTtcblx0XHRcdFx0ZWxlbWVudC5ib3R0b20gPSBwb3NpdGlvblkubHlyaWNIZWlnaHRBYm92ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsZW1lbnQudG9wID0gcG9zaXRpb25ZLmx5cmljSGVpZ2h0QmVsb3cgKyByZW5kZXJTcGFjaW5nLnZvY2FsIC8gc3BhY2luZy5TVEVQO1xuXHRcdFx0XHRlbGVtZW50LmJvdHRvbSA9IHBvc2l0aW9uWS5seXJpY0hlaWdodEJlbG93ICsgcmVuZGVyU3BhY2luZy52b2NhbCAvIHNwYWNpbmcuU1RFUDtcblx0XHRcdFx0ZWxlbWVudC5waXRjaCAtPSByZW5kZXJTcGFjaW5nLnZvY2FsIC8gc3BhY2luZy5TVEVQO1xuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcImRlYnVnXCI6XG5cdFx0XHRlbGVtZW50LnRvcCA9IHBvc2l0aW9uWS5jaG9yZEhlaWdodEFib3ZlO1xuXHRcdFx0ZWxlbWVudC5ib3R0b20gPSBwb3NpdGlvblkuY2hvcmRIZWlnaHRBYm92ZTtcblx0XHRcdGJyZWFrO1xuXHR9XG5cdGlmIChlbGVtZW50LnBpdGNoID09PSB1bmRlZmluZWQgfHwgZWxlbWVudC50b3AgPT09IHVuZGVmaW5lZClcblx0XHRjb25zb2xlLmVycm9yKFwiUmVsYXRpdmVFbGVtZW50IHBvc2l0aW9uIG5vdCBzZXQuXCIsIGVsZW1lbnQudHlwZSwgZWxlbWVudC5waXRjaCwgZWxlbWVudC50b3AsIHBvc2l0aW9uWSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0VXBwZXJBbmRMb3dlckVsZW1lbnRzO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/layout/set-upper-and-lower-elements.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/layout/staff-group.js":
/*!************************************************************!*\
  !*** ./node_modules/abcjs/src/write/layout/staff-group.js ***!
  \************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var layoutVoiceElements = __webpack_require__(/*! ./voice-elements */ \"(ssr)/./node_modules/abcjs/src/write/layout/voice-elements.js\");\n\nfunction checkLastBarX(voices) {\n\tvar maxX = 0;\n\tfor (var i = 0; i < voices.length; i++) {\n\t\tvar curVoice = voices[i];\n\t\tif (curVoice.children.length > 0) {\n\t\t\tvar lastChild = curVoice.children.length - 1;\n\t\t\tvar maxChild = curVoice.children[lastChild];\n\t\t\tif (maxChild.abcelem.el_type === 'bar') {\n\t\t\t\tvar barX = maxChild.children[0].x;\n\t\t\t\tif (barX > maxX) {\n\t\t\t\t\tmaxX = barX;\n\t\t\t\t} else {\n\t\t\t\t\tmaxChild.children[0].x = maxX;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nvar layoutStaffGroup = function (spacing, minPadding, debug, staffGroup, leftEdge) {\n\tvar epsilon = 0.0000001; // Fudging for inexactness of floating point math.\n\tvar spacingunits = 0; // number of times we will have ended up using the spacing distance (as opposed to fixed width distances)\n\tvar minspace = 1000; // a big number to start off with - used to find out what the smallest space between two notes is -- GD 2014.1.7\n\n\tvar x = leftEdge;\n\tstaffGroup.startx = x;\n\tvar i;\n\n\tvar currentduration = 0;\n\tif (debug) console.log(\"init layout\", spacing);\n\tfor (i = 0; i < staffGroup.voices.length; i++) {\n\t\tlayoutVoiceElements.beginLayout(x, staffGroup.voices[i]);\n\t}\n\n\tvar spacingunit = 0; // number of spacingunits coming from the previously laid out element to this one\n\twhile (!finished(staffGroup.voices)) {\n\t\t// find first duration level to be laid out among candidates across voices\n\t\tcurrentduration = null; // candidate smallest duration level\n\t\tfor (i = 0; i < staffGroup.voices.length; i++) {\n\t\t\tif (!layoutVoiceElements.layoutEnded(staffGroup.voices[i]) && (!currentduration || getDurationIndex(staffGroup.voices[i]) < currentduration))\n\t\t\t\tcurrentduration = getDurationIndex(staffGroup.voices[i]);\n\t\t}\n\n\n\t\t// isolate voices at current duration level\n\t\tvar currentvoices = [];\n\t\tvar othervoices = [];\n\t\tfor (i = 0; i < staffGroup.voices.length; i++) {\n\t\t\tvar durationIndex = getDurationIndex(staffGroup.voices[i]);\n\t\t\t// PER: Because of the inexactness of JS floating point math, we just get close.\n\t\t\tif (durationIndex - currentduration > epsilon) {\n\t\t\t\tothervoices.push(staffGroup.voices[i]);\n\t\t\t\t//console.log(\"out: voice \",i);\n\t\t\t} else {\n\t\t\t\tcurrentvoices.push(staffGroup.voices[i]);\n\t\t\t\t//if (debug) console.log(\"in: voice \",i);\n\t\t\t}\n\t\t}\n\n\t\t// among the current duration level find the one which needs starting furthest right\n\t\tspacingunit = 0; // number of spacingunits coming from the previously laid out element to this one\n\t\tvar spacingduration = 0;\n\t\tfor (i = 0; i < currentvoices.length; i++) {\n\t\t\t//console.log(\"greatest spacing unit\", x, layoutVoiceElements.getNextX(currentvoices[i]), layoutVoiceElements.getSpacingUnits(currentvoices[i]), currentvoices[i].spacingduration);\n\t\t\tif (layoutVoiceElements.getNextX(currentvoices[i]) > x) {\n\t\t\t\tx = layoutVoiceElements.getNextX(currentvoices[i]);\n\t\t\t\tspacingunit = layoutVoiceElements.getSpacingUnits(currentvoices[i]);\n\t\t\t\tspacingduration = currentvoices[i].spacingduration;\n\t\t\t}\n\t\t}\n\t\tspacingunits += spacingunit;\n\t\tminspace = Math.min(minspace, spacingunit);\n\t\tif (debug) console.log(\"currentduration: \", currentduration, spacingunits, minspace);\n\n\t\tvar lastTopVoice = undefined;\n\t\tfor (i = 0; i < currentvoices.length; i++) {\n\t\t\tvar v = currentvoices[i];\n\t\t\tif (v.voicenumber === 0)\n\t\t\t\tlastTopVoice = i;\n\t\t\tvar topVoice = (lastTopVoice !== undefined && currentvoices[lastTopVoice].voicenumber !== v.voicenumber) ? currentvoices[lastTopVoice] : undefined;\n\t\t\tif (!isSameStaff(v, topVoice))\n\t\t\t\ttopVoice = undefined;\n\t\t\tvar voicechildx = layoutVoiceElements.layoutOneItem(x, spacing, v, minPadding, topVoice);\n\t\t\tvar dx = voicechildx - x;\n\t\t\tif (dx > 0) {\n\t\t\t\tx = voicechildx; //update x\n\t\t\t\tfor (var j = 0; j < i; j++) { // shift over all previously laid out elements\n\t\t\t\t\tlayoutVoiceElements.shiftRight(dx, currentvoices[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// remove the value of already counted spacing units in other voices (e.g. if a voice had planned to use up 5 spacing units but is not in line to be laid out at this duration level - where we've used 2 spacing units - then we must use up 3 spacing units, not 5)\n\t\tfor (i = 0; i < othervoices.length; i++) {\n\t\t\tothervoices[i].spacingduration -= spacingduration;\n\t\t\tlayoutVoiceElements.updateNextX(x, spacing, othervoices[i]); // adjust other voices expectations\n\t\t}\n\n\t\t// update indexes of currently laid out elems\n\t\tfor (i = 0; i < currentvoices.length; i++) {\n\t\t\tvar voice = currentvoices[i];\n\t\t\tlayoutVoiceElements.updateIndices(voice);\n\t\t}\n\t} // finished laying out\n\n\n\t// find the greatest remaining x as a base for the width\n\tfor (i = 0; i < staffGroup.voices.length; i++) {\n\t\tif (layoutVoiceElements.getNextX(staffGroup.voices[i]) > x) {\n\t\t\tx = layoutVoiceElements.getNextX(staffGroup.voices[i]);\n\t\t\tspacingunit = layoutVoiceElements.getSpacingUnits(staffGroup.voices[i]);\n\t\t}\n\t}\n\n\t// adjust lastBar when needed (multi staves)\n\tcheckLastBarX(staffGroup.voices);\n\t//console.log(\"greatest remaining\",spacingunit,x);\n\tspacingunits += spacingunit;\n\tstaffGroup.setWidth(x);\n\n\treturn { spacingUnits: spacingunits, minSpace: minspace };\n};\n\n\nfunction finished(voices) {\n\tfor (var i = 0; i < voices.length; i++) {\n\t\tif (!layoutVoiceElements.layoutEnded(voices[i])) return false;\n\t}\n\treturn true;\n}\n\nfunction getDurationIndex(element) {\n\treturn element.durationindex - (element.children[element.i] && (element.children[element.i].duration > 0) ? 0 : 0.0000005); // if the ith element doesn't have a duration (is not a note), its duration index is fractionally before. This enables CLEF KEYSIG TIMESIG PART, etc. to be laid out before we get to the first note of other voices\n}\n\nfunction isSameStaff(voice1, voice2) {\n\tif (!voice1 || !voice1.staff || !voice1.staff.voices || voice1.staff.voices.length === 0)\n\t\treturn false;\n\tif (!voice2 || !voice2.staff || !voice2.staff.voices || voice2.staff.voices.length === 0)\n\t\treturn false;\n\treturn (voice1.staff.voices[0] === voice2.staff.voices[0]);\n}\n\nmodule.exports = layoutStaffGroup;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2xheW91dC9zdGFmZi1ncm91cC5qcyIsIm1hcHBpbmdzIjoiQUFBQSwwQkFBMEIsbUJBQU8sQ0FBQyx1RkFBa0I7O0FBRXBEO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCLHVCQUF1QjtBQUN2QixzQkFBc0I7O0FBRXRCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSw4QkFBOEI7QUFDM0M7QUFDQTs7QUFFQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQixjQUFjLDhCQUE4QjtBQUM1QztBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsOEJBQThCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQSxjQUFjLDBCQUEwQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGNBQWMsMEJBQTBCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixvQkFBb0IsT0FBTyxPQUFPO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYyx3QkFBd0I7QUFDdEM7QUFDQSxnRUFBZ0U7QUFDaEU7O0FBRUE7QUFDQSxjQUFjLDBCQUEwQjtBQUN4QztBQUNBO0FBQ0E7QUFDQSxHQUFHOzs7QUFHSDtBQUNBLGFBQWEsOEJBQThCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxVQUFVO0FBQ1Y7OztBQUdBO0FBQ0EsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZIQUE2SDtBQUM3SDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3NyYy93cml0ZS9sYXlvdXQvc3RhZmYtZ3JvdXAuanM/YWE2YSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbGF5b3V0Vm9pY2VFbGVtZW50cyA9IHJlcXVpcmUoJy4vdm9pY2UtZWxlbWVudHMnKTtcblxuZnVuY3Rpb24gY2hlY2tMYXN0QmFyWCh2b2ljZXMpIHtcblx0dmFyIG1heFggPSAwO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHZvaWNlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBjdXJWb2ljZSA9IHZvaWNlc1tpXTtcblx0XHRpZiAoY3VyVm9pY2UuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuXHRcdFx0dmFyIGxhc3RDaGlsZCA9IGN1clZvaWNlLmNoaWxkcmVuLmxlbmd0aCAtIDE7XG5cdFx0XHR2YXIgbWF4Q2hpbGQgPSBjdXJWb2ljZS5jaGlsZHJlbltsYXN0Q2hpbGRdO1xuXHRcdFx0aWYgKG1heENoaWxkLmFiY2VsZW0uZWxfdHlwZSA9PT0gJ2JhcicpIHtcblx0XHRcdFx0dmFyIGJhclggPSBtYXhDaGlsZC5jaGlsZHJlblswXS54O1xuXHRcdFx0XHRpZiAoYmFyWCA+IG1heFgpIHtcblx0XHRcdFx0XHRtYXhYID0gYmFyWDtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRtYXhDaGlsZC5jaGlsZHJlblswXS54ID0gbWF4WDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG52YXIgbGF5b3V0U3RhZmZHcm91cCA9IGZ1bmN0aW9uIChzcGFjaW5nLCBtaW5QYWRkaW5nLCBkZWJ1Zywgc3RhZmZHcm91cCwgbGVmdEVkZ2UpIHtcblx0dmFyIGVwc2lsb24gPSAwLjAwMDAwMDE7IC8vIEZ1ZGdpbmcgZm9yIGluZXhhY3RuZXNzIG9mIGZsb2F0aW5nIHBvaW50IG1hdGguXG5cdHZhciBzcGFjaW5ndW5pdHMgPSAwOyAvLyBudW1iZXIgb2YgdGltZXMgd2Ugd2lsbCBoYXZlIGVuZGVkIHVwIHVzaW5nIHRoZSBzcGFjaW5nIGRpc3RhbmNlIChhcyBvcHBvc2VkIHRvIGZpeGVkIHdpZHRoIGRpc3RhbmNlcylcblx0dmFyIG1pbnNwYWNlID0gMTAwMDsgLy8gYSBiaWcgbnVtYmVyIHRvIHN0YXJ0IG9mZiB3aXRoIC0gdXNlZCB0byBmaW5kIG91dCB3aGF0IHRoZSBzbWFsbGVzdCBzcGFjZSBiZXR3ZWVuIHR3byBub3RlcyBpcyAtLSBHRCAyMDE0LjEuN1xuXG5cdHZhciB4ID0gbGVmdEVkZ2U7XG5cdHN0YWZmR3JvdXAuc3RhcnR4ID0geDtcblx0dmFyIGk7XG5cblx0dmFyIGN1cnJlbnRkdXJhdGlvbiA9IDA7XG5cdGlmIChkZWJ1ZykgY29uc29sZS5sb2coXCJpbml0IGxheW91dFwiLCBzcGFjaW5nKTtcblx0Zm9yIChpID0gMDsgaSA8IHN0YWZmR3JvdXAudm9pY2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0bGF5b3V0Vm9pY2VFbGVtZW50cy5iZWdpbkxheW91dCh4LCBzdGFmZkdyb3VwLnZvaWNlc1tpXSk7XG5cdH1cblxuXHR2YXIgc3BhY2luZ3VuaXQgPSAwOyAvLyBudW1iZXIgb2Ygc3BhY2luZ3VuaXRzIGNvbWluZyBmcm9tIHRoZSBwcmV2aW91c2x5IGxhaWQgb3V0IGVsZW1lbnQgdG8gdGhpcyBvbmVcblx0d2hpbGUgKCFmaW5pc2hlZChzdGFmZkdyb3VwLnZvaWNlcykpIHtcblx0XHQvLyBmaW5kIGZpcnN0IGR1cmF0aW9uIGxldmVsIHRvIGJlIGxhaWQgb3V0IGFtb25nIGNhbmRpZGF0ZXMgYWNyb3NzIHZvaWNlc1xuXHRcdGN1cnJlbnRkdXJhdGlvbiA9IG51bGw7IC8vIGNhbmRpZGF0ZSBzbWFsbGVzdCBkdXJhdGlvbiBsZXZlbFxuXHRcdGZvciAoaSA9IDA7IGkgPCBzdGFmZkdyb3VwLnZvaWNlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKCFsYXlvdXRWb2ljZUVsZW1lbnRzLmxheW91dEVuZGVkKHN0YWZmR3JvdXAudm9pY2VzW2ldKSAmJiAoIWN1cnJlbnRkdXJhdGlvbiB8fCBnZXREdXJhdGlvbkluZGV4KHN0YWZmR3JvdXAudm9pY2VzW2ldKSA8IGN1cnJlbnRkdXJhdGlvbikpXG5cdFx0XHRcdGN1cnJlbnRkdXJhdGlvbiA9IGdldER1cmF0aW9uSW5kZXgoc3RhZmZHcm91cC52b2ljZXNbaV0pO1xuXHRcdH1cblxuXG5cdFx0Ly8gaXNvbGF0ZSB2b2ljZXMgYXQgY3VycmVudCBkdXJhdGlvbiBsZXZlbFxuXHRcdHZhciBjdXJyZW50dm9pY2VzID0gW107XG5cdFx0dmFyIG90aGVydm9pY2VzID0gW107XG5cdFx0Zm9yIChpID0gMDsgaSA8IHN0YWZmR3JvdXAudm9pY2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZHVyYXRpb25JbmRleCA9IGdldER1cmF0aW9uSW5kZXgoc3RhZmZHcm91cC52b2ljZXNbaV0pO1xuXHRcdFx0Ly8gUEVSOiBCZWNhdXNlIG9mIHRoZSBpbmV4YWN0bmVzcyBvZiBKUyBmbG9hdGluZyBwb2ludCBtYXRoLCB3ZSBqdXN0IGdldCBjbG9zZS5cblx0XHRcdGlmIChkdXJhdGlvbkluZGV4IC0gY3VycmVudGR1cmF0aW9uID4gZXBzaWxvbikge1xuXHRcdFx0XHRvdGhlcnZvaWNlcy5wdXNoKHN0YWZmR3JvdXAudm9pY2VzW2ldKTtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyhcIm91dDogdm9pY2UgXCIsaSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjdXJyZW50dm9pY2VzLnB1c2goc3RhZmZHcm91cC52b2ljZXNbaV0pO1xuXHRcdFx0XHQvL2lmIChkZWJ1ZykgY29uc29sZS5sb2coXCJpbjogdm9pY2UgXCIsaSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gYW1vbmcgdGhlIGN1cnJlbnQgZHVyYXRpb24gbGV2ZWwgZmluZCB0aGUgb25lIHdoaWNoIG5lZWRzIHN0YXJ0aW5nIGZ1cnRoZXN0IHJpZ2h0XG5cdFx0c3BhY2luZ3VuaXQgPSAwOyAvLyBudW1iZXIgb2Ygc3BhY2luZ3VuaXRzIGNvbWluZyBmcm9tIHRoZSBwcmV2aW91c2x5IGxhaWQgb3V0IGVsZW1lbnQgdG8gdGhpcyBvbmVcblx0XHR2YXIgc3BhY2luZ2R1cmF0aW9uID0gMDtcblx0XHRmb3IgKGkgPSAwOyBpIDwgY3VycmVudHZvaWNlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhcImdyZWF0ZXN0IHNwYWNpbmcgdW5pdFwiLCB4LCBsYXlvdXRWb2ljZUVsZW1lbnRzLmdldE5leHRYKGN1cnJlbnR2b2ljZXNbaV0pLCBsYXlvdXRWb2ljZUVsZW1lbnRzLmdldFNwYWNpbmdVbml0cyhjdXJyZW50dm9pY2VzW2ldKSwgY3VycmVudHZvaWNlc1tpXS5zcGFjaW5nZHVyYXRpb24pO1xuXHRcdFx0aWYgKGxheW91dFZvaWNlRWxlbWVudHMuZ2V0TmV4dFgoY3VycmVudHZvaWNlc1tpXSkgPiB4KSB7XG5cdFx0XHRcdHggPSBsYXlvdXRWb2ljZUVsZW1lbnRzLmdldE5leHRYKGN1cnJlbnR2b2ljZXNbaV0pO1xuXHRcdFx0XHRzcGFjaW5ndW5pdCA9IGxheW91dFZvaWNlRWxlbWVudHMuZ2V0U3BhY2luZ1VuaXRzKGN1cnJlbnR2b2ljZXNbaV0pO1xuXHRcdFx0XHRzcGFjaW5nZHVyYXRpb24gPSBjdXJyZW50dm9pY2VzW2ldLnNwYWNpbmdkdXJhdGlvbjtcblx0XHRcdH1cblx0XHR9XG5cdFx0c3BhY2luZ3VuaXRzICs9IHNwYWNpbmd1bml0O1xuXHRcdG1pbnNwYWNlID0gTWF0aC5taW4obWluc3BhY2UsIHNwYWNpbmd1bml0KTtcblx0XHRpZiAoZGVidWcpIGNvbnNvbGUubG9nKFwiY3VycmVudGR1cmF0aW9uOiBcIiwgY3VycmVudGR1cmF0aW9uLCBzcGFjaW5ndW5pdHMsIG1pbnNwYWNlKTtcblxuXHRcdHZhciBsYXN0VG9wVm9pY2UgPSB1bmRlZmluZWQ7XG5cdFx0Zm9yIChpID0gMDsgaSA8IGN1cnJlbnR2b2ljZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciB2ID0gY3VycmVudHZvaWNlc1tpXTtcblx0XHRcdGlmICh2LnZvaWNlbnVtYmVyID09PSAwKVxuXHRcdFx0XHRsYXN0VG9wVm9pY2UgPSBpO1xuXHRcdFx0dmFyIHRvcFZvaWNlID0gKGxhc3RUb3BWb2ljZSAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnR2b2ljZXNbbGFzdFRvcFZvaWNlXS52b2ljZW51bWJlciAhPT0gdi52b2ljZW51bWJlcikgPyBjdXJyZW50dm9pY2VzW2xhc3RUb3BWb2ljZV0gOiB1bmRlZmluZWQ7XG5cdFx0XHRpZiAoIWlzU2FtZVN0YWZmKHYsIHRvcFZvaWNlKSlcblx0XHRcdFx0dG9wVm9pY2UgPSB1bmRlZmluZWQ7XG5cdFx0XHR2YXIgdm9pY2VjaGlsZHggPSBsYXlvdXRWb2ljZUVsZW1lbnRzLmxheW91dE9uZUl0ZW0oeCwgc3BhY2luZywgdiwgbWluUGFkZGluZywgdG9wVm9pY2UpO1xuXHRcdFx0dmFyIGR4ID0gdm9pY2VjaGlsZHggLSB4O1xuXHRcdFx0aWYgKGR4ID4gMCkge1xuXHRcdFx0XHR4ID0gdm9pY2VjaGlsZHg7IC8vdXBkYXRlIHhcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBpOyBqKyspIHsgLy8gc2hpZnQgb3ZlciBhbGwgcHJldmlvdXNseSBsYWlkIG91dCBlbGVtZW50c1xuXHRcdFx0XHRcdGxheW91dFZvaWNlRWxlbWVudHMuc2hpZnRSaWdodChkeCwgY3VycmVudHZvaWNlc1tqXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyByZW1vdmUgdGhlIHZhbHVlIG9mIGFscmVhZHkgY291bnRlZCBzcGFjaW5nIHVuaXRzIGluIG90aGVyIHZvaWNlcyAoZS5nLiBpZiBhIHZvaWNlIGhhZCBwbGFubmVkIHRvIHVzZSB1cCA1IHNwYWNpbmcgdW5pdHMgYnV0IGlzIG5vdCBpbiBsaW5lIHRvIGJlIGxhaWQgb3V0IGF0IHRoaXMgZHVyYXRpb24gbGV2ZWwgLSB3aGVyZSB3ZSd2ZSB1c2VkIDIgc3BhY2luZyB1bml0cyAtIHRoZW4gd2UgbXVzdCB1c2UgdXAgMyBzcGFjaW5nIHVuaXRzLCBub3QgNSlcblx0XHRmb3IgKGkgPSAwOyBpIDwgb3RoZXJ2b2ljZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdG90aGVydm9pY2VzW2ldLnNwYWNpbmdkdXJhdGlvbiAtPSBzcGFjaW5nZHVyYXRpb247XG5cdFx0XHRsYXlvdXRWb2ljZUVsZW1lbnRzLnVwZGF0ZU5leHRYKHgsIHNwYWNpbmcsIG90aGVydm9pY2VzW2ldKTsgLy8gYWRqdXN0IG90aGVyIHZvaWNlcyBleHBlY3RhdGlvbnNcblx0XHR9XG5cblx0XHQvLyB1cGRhdGUgaW5kZXhlcyBvZiBjdXJyZW50bHkgbGFpZCBvdXQgZWxlbXNcblx0XHRmb3IgKGkgPSAwOyBpIDwgY3VycmVudHZvaWNlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIHZvaWNlID0gY3VycmVudHZvaWNlc1tpXTtcblx0XHRcdGxheW91dFZvaWNlRWxlbWVudHMudXBkYXRlSW5kaWNlcyh2b2ljZSk7XG5cdFx0fVxuXHR9IC8vIGZpbmlzaGVkIGxheWluZyBvdXRcblxuXG5cdC8vIGZpbmQgdGhlIGdyZWF0ZXN0IHJlbWFpbmluZyB4IGFzIGEgYmFzZSBmb3IgdGhlIHdpZHRoXG5cdGZvciAoaSA9IDA7IGkgPCBzdGFmZkdyb3VwLnZvaWNlcy5sZW5ndGg7IGkrKykge1xuXHRcdGlmIChsYXlvdXRWb2ljZUVsZW1lbnRzLmdldE5leHRYKHN0YWZmR3JvdXAudm9pY2VzW2ldKSA+IHgpIHtcblx0XHRcdHggPSBsYXlvdXRWb2ljZUVsZW1lbnRzLmdldE5leHRYKHN0YWZmR3JvdXAudm9pY2VzW2ldKTtcblx0XHRcdHNwYWNpbmd1bml0ID0gbGF5b3V0Vm9pY2VFbGVtZW50cy5nZXRTcGFjaW5nVW5pdHMoc3RhZmZHcm91cC52b2ljZXNbaV0pO1xuXHRcdH1cblx0fVxuXG5cdC8vIGFkanVzdCBsYXN0QmFyIHdoZW4gbmVlZGVkIChtdWx0aSBzdGF2ZXMpXG5cdGNoZWNrTGFzdEJhclgoc3RhZmZHcm91cC52b2ljZXMpO1xuXHQvL2NvbnNvbGUubG9nKFwiZ3JlYXRlc3QgcmVtYWluaW5nXCIsc3BhY2luZ3VuaXQseCk7XG5cdHNwYWNpbmd1bml0cyArPSBzcGFjaW5ndW5pdDtcblx0c3RhZmZHcm91cC5zZXRXaWR0aCh4KTtcblxuXHRyZXR1cm4geyBzcGFjaW5nVW5pdHM6IHNwYWNpbmd1bml0cywgbWluU3BhY2U6IG1pbnNwYWNlIH07XG59O1xuXG5cbmZ1bmN0aW9uIGZpbmlzaGVkKHZvaWNlcykge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHZvaWNlcy5sZW5ndGg7IGkrKykge1xuXHRcdGlmICghbGF5b3V0Vm9pY2VFbGVtZW50cy5sYXlvdXRFbmRlZCh2b2ljZXNbaV0pKSByZXR1cm4gZmFsc2U7XG5cdH1cblx0cmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGdldER1cmF0aW9uSW5kZXgoZWxlbWVudCkge1xuXHRyZXR1cm4gZWxlbWVudC5kdXJhdGlvbmluZGV4IC0gKGVsZW1lbnQuY2hpbGRyZW5bZWxlbWVudC5pXSAmJiAoZWxlbWVudC5jaGlsZHJlbltlbGVtZW50LmldLmR1cmF0aW9uID4gMCkgPyAwIDogMC4wMDAwMDA1KTsgLy8gaWYgdGhlIGl0aCBlbGVtZW50IGRvZXNuJ3QgaGF2ZSBhIGR1cmF0aW9uIChpcyBub3QgYSBub3RlKSwgaXRzIGR1cmF0aW9uIGluZGV4IGlzIGZyYWN0aW9uYWxseSBiZWZvcmUuIFRoaXMgZW5hYmxlcyBDTEVGIEtFWVNJRyBUSU1FU0lHIFBBUlQsIGV0Yy4gdG8gYmUgbGFpZCBvdXQgYmVmb3JlIHdlIGdldCB0byB0aGUgZmlyc3Qgbm90ZSBvZiBvdGhlciB2b2ljZXNcbn1cblxuZnVuY3Rpb24gaXNTYW1lU3RhZmYodm9pY2UxLCB2b2ljZTIpIHtcblx0aWYgKCF2b2ljZTEgfHwgIXZvaWNlMS5zdGFmZiB8fCAhdm9pY2UxLnN0YWZmLnZvaWNlcyB8fCB2b2ljZTEuc3RhZmYudm9pY2VzLmxlbmd0aCA9PT0gMClcblx0XHRyZXR1cm4gZmFsc2U7XG5cdGlmICghdm9pY2UyIHx8ICF2b2ljZTIuc3RhZmYgfHwgIXZvaWNlMi5zdGFmZi52b2ljZXMgfHwgdm9pY2UyLnN0YWZmLnZvaWNlcy5sZW5ndGggPT09IDApXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHRyZXR1cm4gKHZvaWNlMS5zdGFmZi52b2ljZXNbMF0gPT09IHZvaWNlMi5zdGFmZi52b2ljZXNbMF0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGxheW91dFN0YWZmR3JvdXA7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/layout/staff-group.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/layout/triplet.js":
/*!********************************************************!*\
  !*** ./node_modules/abcjs/src/write/layout/triplet.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var getBarYAt = __webpack_require__(/*! ./get-bar-y-at */ \"(ssr)/./node_modules/abcjs/src/write/layout/get-bar-y-at.js\");\n\nfunction layoutTriplet(element) {\n\t// TODO end and beginning of line (PER: P.S. I'm not sure this can happen: I think the parser will always specify both the start and end points.)\n\tif (element.anchor1 && element.anchor2) {\n\t\telement.hasBeam = !!element.anchor1.parent.beam && element.anchor1.parent.beam === element.anchor2.parent.beam;\n\t\tvar beam = element.anchor1.parent.beam;\n\t\t// if hasBeam is true, then the first and last element in the triplet have the same beam.\n\t\t// We also need to check if the beam doesn't contain other notes so that `(3 dcdcc` will do a bracket.\n\t\tif (element.hasBeam && (beam.elems[0] !== element.anchor1.parent || beam.elems[beam.elems.length - 1] !== element.anchor2.parent))\n\t\t\telement.hasBeam = false;\n\n\t\tif (element.hasBeam) {\n\t\t\t// If there is a beam then we don't need to draw anything except the text. The beam could either be above or below.\n\t\t\tvar left = isAbove(beam) ? element.anchor1.x + element.anchor1.w : element.anchor1.x;\n\t\t\telement.yTextPos = heightAtMidpoint(left, element.anchor2.x, beam);\n\t\t\telement.yTextPos += isAbove(beam) ? 3 : -2; // This creates some space between the beam and the number.\n\t\t\telement.xTextPos = xAtMidpoint(left, element.anchor2.x);\n\t\t\telement.top = element.yTextPos + 1;\n\t\t\telement.bottom = element.yTextPos - 2;\n\t\t\tif (isAbove(beam))\n\t\t\t\telement.endingHeightAbove = 4;\n\t\t} else {\n\t\t\t// If there isn't a beam, then we need to draw the bracket and the text. The bracket is always above.\n\t\t\t// The bracket is never lower than the 'a' line, but is 4 pitches above the first and last notes. If there is\n\t\t\t// a tall note in the middle, the bracket is horizontal and above the highest note.\n\t\t\telement.startNote = Math.max(element.anchor1.parent.top, 9) + 4;\n\t\t\telement.endNote = Math.max(element.anchor2.parent.top, 9) + 4;\n\t\t\t// If it starts or ends on a rest, make the beam horizontal\n\t\t\tif (element.anchor1.parent.type === \"rest\" && element.anchor2.parent.type !== \"rest\")\n\t\t\t\telement.startNote = element.endNote;\n\t\t\telse if (element.anchor2.parent.type === \"rest\" && element.anchor1.parent.type !== \"rest\")\n\t\t\t\telement.endNote = element.startNote;\n\t\t\t// See if the middle note is really high.\n\t\t\tvar max = 0;\n\t\t\tfor (var i = 0; i < element.middleElems.length; i++) {\n\t\t\t\tmax = Math.max(max, element.middleElems[i].top);\n\t\t\t}\n\t\t\tmax += 4;\n\t\t\tif (max > element.startNote || max > element.endNote) {\n\t\t\t\telement.startNote = max;\n\t\t\t\telement.endNote = max;\n\t\t\t}\n\t\t\tif (element.flatBeams) {\n\t\t\t\telement.startNote = Math.max(element.startNote, element.endNote);\n\t\t\t\telement.endNote = Math.max(element.startNote, element.endNote);\n\t\t\t}\n\n\t\t\telement.yTextPos = element.startNote + (element.endNote - element.startNote) / 2;\n\t\t\telement.xTextPos = element.anchor1.x + (element.anchor2.x + element.anchor2.w - element.anchor1.x) / 2;\n\t\t\telement.top = element.yTextPos + 1;\n\t\t}\n\t}\n\tdelete element.middleElems;\n\tdelete element.flatBeams;\n}\n\nfunction isAbove(beam) {\n\treturn beam.stemsUp;\n}\n\n// We can't just use the entire beam for the calculation. The range has to be passed in, because the beam might extend into some unrelated notes. for instance, (3_a'f'e'f'2 when L:16\nfunction heightAtMidpoint(startX, endX, beam) {\n\tif (beam.beams.length === 0)\n\t\treturn 0;\n\tbeam = beam.beams[0];\n\tvar midPoint = startX + (endX - startX) / 2;\n\treturn getBarYAt(beam.startX, beam.startY, beam.endX, beam.endY, midPoint);\n}\n\nfunction xAtMidpoint(startX, endX) {\n\treturn startX + (endX - startX) / 2;\n}\n\nmodule.exports = layoutTriplet;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2xheW91dC90cmlwbGV0LmpzIiwibWFwcGluZ3MiOiJBQUFBLGdCQUFnQixtQkFBTyxDQUFDLG1GQUFnQjs7QUFFeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGdDQUFnQztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2xheW91dC90cmlwbGV0LmpzPzQ5MTIiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGdldEJhcllBdCA9IHJlcXVpcmUoJy4vZ2V0LWJhci15LWF0Jyk7XG5cbmZ1bmN0aW9uIGxheW91dFRyaXBsZXQoZWxlbWVudCkge1xuXHQvLyBUT0RPIGVuZCBhbmQgYmVnaW5uaW5nIG9mIGxpbmUgKFBFUjogUC5TLiBJJ20gbm90IHN1cmUgdGhpcyBjYW4gaGFwcGVuOiBJIHRoaW5rIHRoZSBwYXJzZXIgd2lsbCBhbHdheXMgc3BlY2lmeSBib3RoIHRoZSBzdGFydCBhbmQgZW5kIHBvaW50cy4pXG5cdGlmIChlbGVtZW50LmFuY2hvcjEgJiYgZWxlbWVudC5hbmNob3IyKSB7XG5cdFx0ZWxlbWVudC5oYXNCZWFtID0gISFlbGVtZW50LmFuY2hvcjEucGFyZW50LmJlYW0gJiYgZWxlbWVudC5hbmNob3IxLnBhcmVudC5iZWFtID09PSBlbGVtZW50LmFuY2hvcjIucGFyZW50LmJlYW07XG5cdFx0dmFyIGJlYW0gPSBlbGVtZW50LmFuY2hvcjEucGFyZW50LmJlYW07XG5cdFx0Ly8gaWYgaGFzQmVhbSBpcyB0cnVlLCB0aGVuIHRoZSBmaXJzdCBhbmQgbGFzdCBlbGVtZW50IGluIHRoZSB0cmlwbGV0IGhhdmUgdGhlIHNhbWUgYmVhbS5cblx0XHQvLyBXZSBhbHNvIG5lZWQgdG8gY2hlY2sgaWYgdGhlIGJlYW0gZG9lc24ndCBjb250YWluIG90aGVyIG5vdGVzIHNvIHRoYXQgYCgzIGRjZGNjYCB3aWxsIGRvIGEgYnJhY2tldC5cblx0XHRpZiAoZWxlbWVudC5oYXNCZWFtICYmIChiZWFtLmVsZW1zWzBdICE9PSBlbGVtZW50LmFuY2hvcjEucGFyZW50IHx8IGJlYW0uZWxlbXNbYmVhbS5lbGVtcy5sZW5ndGggLSAxXSAhPT0gZWxlbWVudC5hbmNob3IyLnBhcmVudCkpXG5cdFx0XHRlbGVtZW50Lmhhc0JlYW0gPSBmYWxzZTtcblxuXHRcdGlmIChlbGVtZW50Lmhhc0JlYW0pIHtcblx0XHRcdC8vIElmIHRoZXJlIGlzIGEgYmVhbSB0aGVuIHdlIGRvbid0IG5lZWQgdG8gZHJhdyBhbnl0aGluZyBleGNlcHQgdGhlIHRleHQuIFRoZSBiZWFtIGNvdWxkIGVpdGhlciBiZSBhYm92ZSBvciBiZWxvdy5cblx0XHRcdHZhciBsZWZ0ID0gaXNBYm92ZShiZWFtKSA/IGVsZW1lbnQuYW5jaG9yMS54ICsgZWxlbWVudC5hbmNob3IxLncgOiBlbGVtZW50LmFuY2hvcjEueDtcblx0XHRcdGVsZW1lbnQueVRleHRQb3MgPSBoZWlnaHRBdE1pZHBvaW50KGxlZnQsIGVsZW1lbnQuYW5jaG9yMi54LCBiZWFtKTtcblx0XHRcdGVsZW1lbnQueVRleHRQb3MgKz0gaXNBYm92ZShiZWFtKSA/IDMgOiAtMjsgLy8gVGhpcyBjcmVhdGVzIHNvbWUgc3BhY2UgYmV0d2VlbiB0aGUgYmVhbSBhbmQgdGhlIG51bWJlci5cblx0XHRcdGVsZW1lbnQueFRleHRQb3MgPSB4QXRNaWRwb2ludChsZWZ0LCBlbGVtZW50LmFuY2hvcjIueCk7XG5cdFx0XHRlbGVtZW50LnRvcCA9IGVsZW1lbnQueVRleHRQb3MgKyAxO1xuXHRcdFx0ZWxlbWVudC5ib3R0b20gPSBlbGVtZW50LnlUZXh0UG9zIC0gMjtcblx0XHRcdGlmIChpc0Fib3ZlKGJlYW0pKVxuXHRcdFx0XHRlbGVtZW50LmVuZGluZ0hlaWdodEFib3ZlID0gNDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gSWYgdGhlcmUgaXNuJ3QgYSBiZWFtLCB0aGVuIHdlIG5lZWQgdG8gZHJhdyB0aGUgYnJhY2tldCBhbmQgdGhlIHRleHQuIFRoZSBicmFja2V0IGlzIGFsd2F5cyBhYm92ZS5cblx0XHRcdC8vIFRoZSBicmFja2V0IGlzIG5ldmVyIGxvd2VyIHRoYW4gdGhlICdhJyBsaW5lLCBidXQgaXMgNCBwaXRjaGVzIGFib3ZlIHRoZSBmaXJzdCBhbmQgbGFzdCBub3Rlcy4gSWYgdGhlcmUgaXNcblx0XHRcdC8vIGEgdGFsbCBub3RlIGluIHRoZSBtaWRkbGUsIHRoZSBicmFja2V0IGlzIGhvcml6b250YWwgYW5kIGFib3ZlIHRoZSBoaWdoZXN0IG5vdGUuXG5cdFx0XHRlbGVtZW50LnN0YXJ0Tm90ZSA9IE1hdGgubWF4KGVsZW1lbnQuYW5jaG9yMS5wYXJlbnQudG9wLCA5KSArIDQ7XG5cdFx0XHRlbGVtZW50LmVuZE5vdGUgPSBNYXRoLm1heChlbGVtZW50LmFuY2hvcjIucGFyZW50LnRvcCwgOSkgKyA0O1xuXHRcdFx0Ly8gSWYgaXQgc3RhcnRzIG9yIGVuZHMgb24gYSByZXN0LCBtYWtlIHRoZSBiZWFtIGhvcml6b250YWxcblx0XHRcdGlmIChlbGVtZW50LmFuY2hvcjEucGFyZW50LnR5cGUgPT09IFwicmVzdFwiICYmIGVsZW1lbnQuYW5jaG9yMi5wYXJlbnQudHlwZSAhPT0gXCJyZXN0XCIpXG5cdFx0XHRcdGVsZW1lbnQuc3RhcnROb3RlID0gZWxlbWVudC5lbmROb3RlO1xuXHRcdFx0ZWxzZSBpZiAoZWxlbWVudC5hbmNob3IyLnBhcmVudC50eXBlID09PSBcInJlc3RcIiAmJiBlbGVtZW50LmFuY2hvcjEucGFyZW50LnR5cGUgIT09IFwicmVzdFwiKVxuXHRcdFx0XHRlbGVtZW50LmVuZE5vdGUgPSBlbGVtZW50LnN0YXJ0Tm90ZTtcblx0XHRcdC8vIFNlZSBpZiB0aGUgbWlkZGxlIG5vdGUgaXMgcmVhbGx5IGhpZ2guXG5cdFx0XHR2YXIgbWF4ID0gMDtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5taWRkbGVFbGVtcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRtYXggPSBNYXRoLm1heChtYXgsIGVsZW1lbnQubWlkZGxlRWxlbXNbaV0udG9wKTtcblx0XHRcdH1cblx0XHRcdG1heCArPSA0O1xuXHRcdFx0aWYgKG1heCA+IGVsZW1lbnQuc3RhcnROb3RlIHx8IG1heCA+IGVsZW1lbnQuZW5kTm90ZSkge1xuXHRcdFx0XHRlbGVtZW50LnN0YXJ0Tm90ZSA9IG1heDtcblx0XHRcdFx0ZWxlbWVudC5lbmROb3RlID0gbWF4O1xuXHRcdFx0fVxuXHRcdFx0aWYgKGVsZW1lbnQuZmxhdEJlYW1zKSB7XG5cdFx0XHRcdGVsZW1lbnQuc3RhcnROb3RlID0gTWF0aC5tYXgoZWxlbWVudC5zdGFydE5vdGUsIGVsZW1lbnQuZW5kTm90ZSk7XG5cdFx0XHRcdGVsZW1lbnQuZW5kTm90ZSA9IE1hdGgubWF4KGVsZW1lbnQuc3RhcnROb3RlLCBlbGVtZW50LmVuZE5vdGUpO1xuXHRcdFx0fVxuXG5cdFx0XHRlbGVtZW50LnlUZXh0UG9zID0gZWxlbWVudC5zdGFydE5vdGUgKyAoZWxlbWVudC5lbmROb3RlIC0gZWxlbWVudC5zdGFydE5vdGUpIC8gMjtcblx0XHRcdGVsZW1lbnQueFRleHRQb3MgPSBlbGVtZW50LmFuY2hvcjEueCArIChlbGVtZW50LmFuY2hvcjIueCArIGVsZW1lbnQuYW5jaG9yMi53IC0gZWxlbWVudC5hbmNob3IxLngpIC8gMjtcblx0XHRcdGVsZW1lbnQudG9wID0gZWxlbWVudC55VGV4dFBvcyArIDE7XG5cdFx0fVxuXHR9XG5cdGRlbGV0ZSBlbGVtZW50Lm1pZGRsZUVsZW1zO1xuXHRkZWxldGUgZWxlbWVudC5mbGF0QmVhbXM7XG59XG5cbmZ1bmN0aW9uIGlzQWJvdmUoYmVhbSkge1xuXHRyZXR1cm4gYmVhbS5zdGVtc1VwO1xufVxuXG4vLyBXZSBjYW4ndCBqdXN0IHVzZSB0aGUgZW50aXJlIGJlYW0gZm9yIHRoZSBjYWxjdWxhdGlvbi4gVGhlIHJhbmdlIGhhcyB0byBiZSBwYXNzZWQgaW4sIGJlY2F1c2UgdGhlIGJlYW0gbWlnaHQgZXh0ZW5kIGludG8gc29tZSB1bnJlbGF0ZWQgbm90ZXMuIGZvciBpbnN0YW5jZSwgKDNfYSdmJ2UnZicyIHdoZW4gTDoxNlxuZnVuY3Rpb24gaGVpZ2h0QXRNaWRwb2ludChzdGFydFgsIGVuZFgsIGJlYW0pIHtcblx0aWYgKGJlYW0uYmVhbXMubGVuZ3RoID09PSAwKVxuXHRcdHJldHVybiAwO1xuXHRiZWFtID0gYmVhbS5iZWFtc1swXTtcblx0dmFyIG1pZFBvaW50ID0gc3RhcnRYICsgKGVuZFggLSBzdGFydFgpIC8gMjtcblx0cmV0dXJuIGdldEJhcllBdChiZWFtLnN0YXJ0WCwgYmVhbS5zdGFydFksIGJlYW0uZW5kWCwgYmVhbS5lbmRZLCBtaWRQb2ludCk7XG59XG5cbmZ1bmN0aW9uIHhBdE1pZHBvaW50KHN0YXJ0WCwgZW5kWCkge1xuXHRyZXR1cm4gc3RhcnRYICsgKGVuZFggLSBzdGFydFgpIC8gMjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBsYXlvdXRUcmlwbGV0O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/layout/triplet.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/layout/voice-elements.js":
/*!***************************************************************!*\
  !*** ./node_modules/abcjs/src/write/layout/voice-elements.js ***!
  \***************************************************************/
/***/ ((module) => {

eval("var VoiceElement = function VoiceElements() { }\n\nVoiceElement.beginLayout = function (startx, voice) {\n\tvoice.i = 0;\n\tvoice.durationindex = 0;\n\t//this.ii=this.children.length;\n\tvoice.startx = startx;\n\tvoice.minx = startx; // furthest left to where negatively positioned elements are allowed to go\n\tvoice.nextx = startx; // x position where the next element of this voice should be placed assuming no other voices and no fixed width constraints\n\tvoice.spacingduration = 0; // duration left to be laid out in current iteration (omitting additional spacing due to other aspects, such as bars, dots, sharps and flats)\n};\n\nVoiceElement.layoutEnded = function (voice) {\n\treturn (voice.i >= voice.children.length);\n};\n\nVoiceElement.getNextX = function (voice) {\n\treturn Math.max(voice.minx, voice.nextx);\n};\n\n// number of spacing units expected for next positioning\nVoiceElement.getSpacingUnits = function (voice) {\n\treturn Math.sqrt(voice.spacingduration * 8);\n};\n\n// Try to layout the element at index this.i\n// x - position to try to layout the element at\n// spacing - base spacing\n// can't call this function more than once per iteration\nVoiceElement.layoutOneItem = function (x, spacing, voice, minPadding, firstVoice) {\n\tvar child = voice.children[voice.i];\n\tif (!child) return 0;\n\tvar er = x - voice.minx; // available extrawidth to the left\n\tvar pad = voice.durationindex + child.duration > 0 ? minPadding : 0; // only add padding to the items that aren't fixed to the left edge.\n\t// See if this item overlaps the item in the first voice. If firstVoice is undefined then there's nothing to compare.\n\tif (child.abcelem.el_type === \"note\" && !child.abcelem.rest && voice.voicenumber !== 0 && firstVoice) {\n\t\tvar firstChild = firstVoice.children[firstVoice.i];\n\t\t// It overlaps if the either the child's top or bottom is inside the firstChild's or at least within 1\n\t\t// A special case is if the element is on the same line then it can share a note head, if the notehead is the same\n\t\tvar overlaps = firstChild &&\n\t\t\t((child.abcelem.maxpitch <= firstChild.abcelem.maxpitch + 1 && child.abcelem.maxpitch >= firstChild.abcelem.minpitch - 1) ||\n\t\t\t\t(child.abcelem.minpitch <= firstChild.abcelem.maxpitch + 1 && child.abcelem.minpitch >= firstChild.abcelem.minpitch - 1))\n\t\t// See if they can share a note head\n\t\tif (overlaps && child.abcelem.minpitch === firstChild.abcelem.minpitch && child.abcelem.maxpitch === firstChild.abcelem.maxpitch &&\n\t\t\tfirstChild.heads && firstChild.heads.length > 0 && child.heads && child.heads.length > 0 &&\n\t\t\tfirstChild.heads[0].c === child.heads[0].c)\n\t\t\toverlaps = false;\n\t\t// If this note overlaps the note in the first voice and we haven't moved the note yet (this can be called multiple times)\n\t\tif (overlaps) {\n\t\t\t// I think that firstChild should always have at least one note head, but defensively make sure.\n\t\t\t// There was a problem with this being called more than once so if a value is adjusted then it is saved so it is only adjusted once.\n\t\t\tvar firstChildNoteWidth = firstChild.heads && firstChild.heads.length > 0 ? firstChild.heads[0].realWidth : firstChild.fixed.w;\n\t\t\tif (!child.adjustedWidth)\n\t\t\t\tchild.adjustedWidth = firstChildNoteWidth + child.w;\n\t\t\tchild.w = child.adjustedWidth\n\t\t\tfor (var j = 0; j < child.children.length; j++) {\n\t\t\t\tvar relativeChild = child.children[j];\n\t\t\t\tif (relativeChild.name.indexOf(\"accidental\") < 0) {\n\t\t\t\t\tif (!relativeChild.adjustedWidth)\n\t\t\t\t\t\trelativeChild.adjustedWidth = relativeChild.dx + firstChildNoteWidth;\n\t\t\t\t\trelativeChild.dx = relativeChild.adjustedWidth\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\tvar extraWidth = getExtraWidth(child, pad);\n\tif (er < extraWidth) { // shift right by needed amount\n\t\t// There's an exception if a bar element is after a Part element, there is no shift.\n\t\tif (voice.i === 0 || child.type !== 'bar' || (voice.children[voice.i - 1].type !== 'part' && voice.children[voice.i - 1].type !== 'tempo'))\n\t\t\tx += extraWidth - er;\n\t}\n\tchild.setX(x);\n\n\tvoice.spacingduration = child.duration;\n\t//update minx\n\tvoice.minx = x + getMinWidth(child); // add necessary layout space\n\tif (voice.i !== voice.children.length - 1) voice.minx += child.minspacing; // add minimumspacing except on last elem\n\n\tthis.updateNextX(x, spacing, voice);\n\n\t// contribute to staff y position\n\t//this.staff.top = Math.max(child.top,this.staff.top);\n\t//this.staff.bottom = Math.min(child.bottom,this.staff.bottom);\n\n\treturn x; // where we end up having placed the child\n};\n\nVoiceElement.shiftRight = function (dx, voice) {\n\tvar child = voice.children[voice.i];\n\tif (!child) return;\n\tchild.setX(child.x + dx);\n\tvoice.minx += dx;\n\tvoice.nextx += dx;\n};\n\n// call when spacingduration has been updated\nVoiceElement.updateNextX = function (x, spacing, voice) {\n\tvoice.nextx = x + (spacing * this.getSpacingUnits(voice));\n};\n\nVoiceElement.updateIndices = function (voice) {\n\tif (!this.layoutEnded(voice)) {\n\t\tvoice.durationindex += voice.children[voice.i].duration;\n\t\tif (voice.children[voice.i].type === 'bar') voice.durationindex = Math.round(voice.durationindex * 64) / 64; // everytime we meet a barline, do rounding to nearest 64th\n\t\tvoice.i++;\n\t}\n};\n\nfunction getExtraWidth(child, minPadding) { // space needed to the left of the note\n\tvar padding = 0;\n\tif (child.type === 'note' || child.type === 'bar')\n\t\tpadding = minPadding;\n\treturn -child.extraw + padding;\n}\n\nfunction getMinWidth(child) { // absolute space taken to the right of the note\n\treturn child.w;\n}\n\nmodule.exports = VoiceElement;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2xheW91dC92b2ljZS1lbGVtZW50cy5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCLHVCQUF1QjtBQUN2Qiw0QkFBNEI7QUFDNUI7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQixzRUFBc0U7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDJCQUEyQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDLDRFQUE0RTs7QUFFNUU7O0FBRUE7QUFDQTtBQUNBOztBQUVBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwrR0FBK0c7QUFDL0c7QUFDQTtBQUNBOztBQUVBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDhCQUE4QjtBQUM5QjtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2xheW91dC92b2ljZS1lbGVtZW50cy5qcz9iNmNiIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBWb2ljZUVsZW1lbnQgPSBmdW5jdGlvbiBWb2ljZUVsZW1lbnRzKCkgeyB9XG5cblZvaWNlRWxlbWVudC5iZWdpbkxheW91dCA9IGZ1bmN0aW9uIChzdGFydHgsIHZvaWNlKSB7XG5cdHZvaWNlLmkgPSAwO1xuXHR2b2ljZS5kdXJhdGlvbmluZGV4ID0gMDtcblx0Ly90aGlzLmlpPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO1xuXHR2b2ljZS5zdGFydHggPSBzdGFydHg7XG5cdHZvaWNlLm1pbnggPSBzdGFydHg7IC8vIGZ1cnRoZXN0IGxlZnQgdG8gd2hlcmUgbmVnYXRpdmVseSBwb3NpdGlvbmVkIGVsZW1lbnRzIGFyZSBhbGxvd2VkIHRvIGdvXG5cdHZvaWNlLm5leHR4ID0gc3RhcnR4OyAvLyB4IHBvc2l0aW9uIHdoZXJlIHRoZSBuZXh0IGVsZW1lbnQgb2YgdGhpcyB2b2ljZSBzaG91bGQgYmUgcGxhY2VkIGFzc3VtaW5nIG5vIG90aGVyIHZvaWNlcyBhbmQgbm8gZml4ZWQgd2lkdGggY29uc3RyYWludHNcblx0dm9pY2Uuc3BhY2luZ2R1cmF0aW9uID0gMDsgLy8gZHVyYXRpb24gbGVmdCB0byBiZSBsYWlkIG91dCBpbiBjdXJyZW50IGl0ZXJhdGlvbiAob21pdHRpbmcgYWRkaXRpb25hbCBzcGFjaW5nIGR1ZSB0byBvdGhlciBhc3BlY3RzLCBzdWNoIGFzIGJhcnMsIGRvdHMsIHNoYXJwcyBhbmQgZmxhdHMpXG59O1xuXG5Wb2ljZUVsZW1lbnQubGF5b3V0RW5kZWQgPSBmdW5jdGlvbiAodm9pY2UpIHtcblx0cmV0dXJuICh2b2ljZS5pID49IHZvaWNlLmNoaWxkcmVuLmxlbmd0aCk7XG59O1xuXG5Wb2ljZUVsZW1lbnQuZ2V0TmV4dFggPSBmdW5jdGlvbiAodm9pY2UpIHtcblx0cmV0dXJuIE1hdGgubWF4KHZvaWNlLm1pbngsIHZvaWNlLm5leHR4KTtcbn07XG5cbi8vIG51bWJlciBvZiBzcGFjaW5nIHVuaXRzIGV4cGVjdGVkIGZvciBuZXh0IHBvc2l0aW9uaW5nXG5Wb2ljZUVsZW1lbnQuZ2V0U3BhY2luZ1VuaXRzID0gZnVuY3Rpb24gKHZvaWNlKSB7XG5cdHJldHVybiBNYXRoLnNxcnQodm9pY2Uuc3BhY2luZ2R1cmF0aW9uICogOCk7XG59O1xuXG4vLyBUcnkgdG8gbGF5b3V0IHRoZSBlbGVtZW50IGF0IGluZGV4IHRoaXMuaVxuLy8geCAtIHBvc2l0aW9uIHRvIHRyeSB0byBsYXlvdXQgdGhlIGVsZW1lbnQgYXRcbi8vIHNwYWNpbmcgLSBiYXNlIHNwYWNpbmdcbi8vIGNhbid0IGNhbGwgdGhpcyBmdW5jdGlvbiBtb3JlIHRoYW4gb25jZSBwZXIgaXRlcmF0aW9uXG5Wb2ljZUVsZW1lbnQubGF5b3V0T25lSXRlbSA9IGZ1bmN0aW9uICh4LCBzcGFjaW5nLCB2b2ljZSwgbWluUGFkZGluZywgZmlyc3RWb2ljZSkge1xuXHR2YXIgY2hpbGQgPSB2b2ljZS5jaGlsZHJlblt2b2ljZS5pXTtcblx0aWYgKCFjaGlsZCkgcmV0dXJuIDA7XG5cdHZhciBlciA9IHggLSB2b2ljZS5taW54OyAvLyBhdmFpbGFibGUgZXh0cmF3aWR0aCB0byB0aGUgbGVmdFxuXHR2YXIgcGFkID0gdm9pY2UuZHVyYXRpb25pbmRleCArIGNoaWxkLmR1cmF0aW9uID4gMCA/IG1pblBhZGRpbmcgOiAwOyAvLyBvbmx5IGFkZCBwYWRkaW5nIHRvIHRoZSBpdGVtcyB0aGF0IGFyZW4ndCBmaXhlZCB0byB0aGUgbGVmdCBlZGdlLlxuXHQvLyBTZWUgaWYgdGhpcyBpdGVtIG92ZXJsYXBzIHRoZSBpdGVtIGluIHRoZSBmaXJzdCB2b2ljZS4gSWYgZmlyc3RWb2ljZSBpcyB1bmRlZmluZWQgdGhlbiB0aGVyZSdzIG5vdGhpbmcgdG8gY29tcGFyZS5cblx0aWYgKGNoaWxkLmFiY2VsZW0uZWxfdHlwZSA9PT0gXCJub3RlXCIgJiYgIWNoaWxkLmFiY2VsZW0ucmVzdCAmJiB2b2ljZS52b2ljZW51bWJlciAhPT0gMCAmJiBmaXJzdFZvaWNlKSB7XG5cdFx0dmFyIGZpcnN0Q2hpbGQgPSBmaXJzdFZvaWNlLmNoaWxkcmVuW2ZpcnN0Vm9pY2UuaV07XG5cdFx0Ly8gSXQgb3ZlcmxhcHMgaWYgdGhlIGVpdGhlciB0aGUgY2hpbGQncyB0b3Agb3IgYm90dG9tIGlzIGluc2lkZSB0aGUgZmlyc3RDaGlsZCdzIG9yIGF0IGxlYXN0IHdpdGhpbiAxXG5cdFx0Ly8gQSBzcGVjaWFsIGNhc2UgaXMgaWYgdGhlIGVsZW1lbnQgaXMgb24gdGhlIHNhbWUgbGluZSB0aGVuIGl0IGNhbiBzaGFyZSBhIG5vdGUgaGVhZCwgaWYgdGhlIG5vdGVoZWFkIGlzIHRoZSBzYW1lXG5cdFx0dmFyIG92ZXJsYXBzID0gZmlyc3RDaGlsZCAmJlxuXHRcdFx0KChjaGlsZC5hYmNlbGVtLm1heHBpdGNoIDw9IGZpcnN0Q2hpbGQuYWJjZWxlbS5tYXhwaXRjaCArIDEgJiYgY2hpbGQuYWJjZWxlbS5tYXhwaXRjaCA+PSBmaXJzdENoaWxkLmFiY2VsZW0ubWlucGl0Y2ggLSAxKSB8fFxuXHRcdFx0XHQoY2hpbGQuYWJjZWxlbS5taW5waXRjaCA8PSBmaXJzdENoaWxkLmFiY2VsZW0ubWF4cGl0Y2ggKyAxICYmIGNoaWxkLmFiY2VsZW0ubWlucGl0Y2ggPj0gZmlyc3RDaGlsZC5hYmNlbGVtLm1pbnBpdGNoIC0gMSkpXG5cdFx0Ly8gU2VlIGlmIHRoZXkgY2FuIHNoYXJlIGEgbm90ZSBoZWFkXG5cdFx0aWYgKG92ZXJsYXBzICYmIGNoaWxkLmFiY2VsZW0ubWlucGl0Y2ggPT09IGZpcnN0Q2hpbGQuYWJjZWxlbS5taW5waXRjaCAmJiBjaGlsZC5hYmNlbGVtLm1heHBpdGNoID09PSBmaXJzdENoaWxkLmFiY2VsZW0ubWF4cGl0Y2ggJiZcblx0XHRcdGZpcnN0Q2hpbGQuaGVhZHMgJiYgZmlyc3RDaGlsZC5oZWFkcy5sZW5ndGggPiAwICYmIGNoaWxkLmhlYWRzICYmIGNoaWxkLmhlYWRzLmxlbmd0aCA+IDAgJiZcblx0XHRcdGZpcnN0Q2hpbGQuaGVhZHNbMF0uYyA9PT0gY2hpbGQuaGVhZHNbMF0uYylcblx0XHRcdG92ZXJsYXBzID0gZmFsc2U7XG5cdFx0Ly8gSWYgdGhpcyBub3RlIG92ZXJsYXBzIHRoZSBub3RlIGluIHRoZSBmaXJzdCB2b2ljZSBhbmQgd2UgaGF2ZW4ndCBtb3ZlZCB0aGUgbm90ZSB5ZXQgKHRoaXMgY2FuIGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcylcblx0XHRpZiAob3ZlcmxhcHMpIHtcblx0XHRcdC8vIEkgdGhpbmsgdGhhdCBmaXJzdENoaWxkIHNob3VsZCBhbHdheXMgaGF2ZSBhdCBsZWFzdCBvbmUgbm90ZSBoZWFkLCBidXQgZGVmZW5zaXZlbHkgbWFrZSBzdXJlLlxuXHRcdFx0Ly8gVGhlcmUgd2FzIGEgcHJvYmxlbSB3aXRoIHRoaXMgYmVpbmcgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIHNvIGlmIGEgdmFsdWUgaXMgYWRqdXN0ZWQgdGhlbiBpdCBpcyBzYXZlZCBzbyBpdCBpcyBvbmx5IGFkanVzdGVkIG9uY2UuXG5cdFx0XHR2YXIgZmlyc3RDaGlsZE5vdGVXaWR0aCA9IGZpcnN0Q2hpbGQuaGVhZHMgJiYgZmlyc3RDaGlsZC5oZWFkcy5sZW5ndGggPiAwID8gZmlyc3RDaGlsZC5oZWFkc1swXS5yZWFsV2lkdGggOiBmaXJzdENoaWxkLmZpeGVkLnc7XG5cdFx0XHRpZiAoIWNoaWxkLmFkanVzdGVkV2lkdGgpXG5cdFx0XHRcdGNoaWxkLmFkanVzdGVkV2lkdGggPSBmaXJzdENoaWxkTm90ZVdpZHRoICsgY2hpbGQudztcblx0XHRcdGNoaWxkLncgPSBjaGlsZC5hZGp1c3RlZFdpZHRoXG5cdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNoaWxkLmNoaWxkcmVuLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHZhciByZWxhdGl2ZUNoaWxkID0gY2hpbGQuY2hpbGRyZW5bal07XG5cdFx0XHRcdGlmIChyZWxhdGl2ZUNoaWxkLm5hbWUuaW5kZXhPZihcImFjY2lkZW50YWxcIikgPCAwKSB7XG5cdFx0XHRcdFx0aWYgKCFyZWxhdGl2ZUNoaWxkLmFkanVzdGVkV2lkdGgpXG5cdFx0XHRcdFx0XHRyZWxhdGl2ZUNoaWxkLmFkanVzdGVkV2lkdGggPSByZWxhdGl2ZUNoaWxkLmR4ICsgZmlyc3RDaGlsZE5vdGVXaWR0aDtcblx0XHRcdFx0XHRyZWxhdGl2ZUNoaWxkLmR4ID0gcmVsYXRpdmVDaGlsZC5hZGp1c3RlZFdpZHRoXG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdH1cblx0fVxuXHR2YXIgZXh0cmFXaWR0aCA9IGdldEV4dHJhV2lkdGgoY2hpbGQsIHBhZCk7XG5cdGlmIChlciA8IGV4dHJhV2lkdGgpIHsgLy8gc2hpZnQgcmlnaHQgYnkgbmVlZGVkIGFtb3VudFxuXHRcdC8vIFRoZXJlJ3MgYW4gZXhjZXB0aW9uIGlmIGEgYmFyIGVsZW1lbnQgaXMgYWZ0ZXIgYSBQYXJ0IGVsZW1lbnQsIHRoZXJlIGlzIG5vIHNoaWZ0LlxuXHRcdGlmICh2b2ljZS5pID09PSAwIHx8IGNoaWxkLnR5cGUgIT09ICdiYXInIHx8ICh2b2ljZS5jaGlsZHJlblt2b2ljZS5pIC0gMV0udHlwZSAhPT0gJ3BhcnQnICYmIHZvaWNlLmNoaWxkcmVuW3ZvaWNlLmkgLSAxXS50eXBlICE9PSAndGVtcG8nKSlcblx0XHRcdHggKz0gZXh0cmFXaWR0aCAtIGVyO1xuXHR9XG5cdGNoaWxkLnNldFgoeCk7XG5cblx0dm9pY2Uuc3BhY2luZ2R1cmF0aW9uID0gY2hpbGQuZHVyYXRpb247XG5cdC8vdXBkYXRlIG1pbnhcblx0dm9pY2UubWlueCA9IHggKyBnZXRNaW5XaWR0aChjaGlsZCk7IC8vIGFkZCBuZWNlc3NhcnkgbGF5b3V0IHNwYWNlXG5cdGlmICh2b2ljZS5pICE9PSB2b2ljZS5jaGlsZHJlbi5sZW5ndGggLSAxKSB2b2ljZS5taW54ICs9IGNoaWxkLm1pbnNwYWNpbmc7IC8vIGFkZCBtaW5pbXVtc3BhY2luZyBleGNlcHQgb24gbGFzdCBlbGVtXG5cblx0dGhpcy51cGRhdGVOZXh0WCh4LCBzcGFjaW5nLCB2b2ljZSk7XG5cblx0Ly8gY29udHJpYnV0ZSB0byBzdGFmZiB5IHBvc2l0aW9uXG5cdC8vdGhpcy5zdGFmZi50b3AgPSBNYXRoLm1heChjaGlsZC50b3AsdGhpcy5zdGFmZi50b3ApO1xuXHQvL3RoaXMuc3RhZmYuYm90dG9tID0gTWF0aC5taW4oY2hpbGQuYm90dG9tLHRoaXMuc3RhZmYuYm90dG9tKTtcblxuXHRyZXR1cm4geDsgLy8gd2hlcmUgd2UgZW5kIHVwIGhhdmluZyBwbGFjZWQgdGhlIGNoaWxkXG59O1xuXG5Wb2ljZUVsZW1lbnQuc2hpZnRSaWdodCA9IGZ1bmN0aW9uIChkeCwgdm9pY2UpIHtcblx0dmFyIGNoaWxkID0gdm9pY2UuY2hpbGRyZW5bdm9pY2UuaV07XG5cdGlmICghY2hpbGQpIHJldHVybjtcblx0Y2hpbGQuc2V0WChjaGlsZC54ICsgZHgpO1xuXHR2b2ljZS5taW54ICs9IGR4O1xuXHR2b2ljZS5uZXh0eCArPSBkeDtcbn07XG5cbi8vIGNhbGwgd2hlbiBzcGFjaW5nZHVyYXRpb24gaGFzIGJlZW4gdXBkYXRlZFxuVm9pY2VFbGVtZW50LnVwZGF0ZU5leHRYID0gZnVuY3Rpb24gKHgsIHNwYWNpbmcsIHZvaWNlKSB7XG5cdHZvaWNlLm5leHR4ID0geCArIChzcGFjaW5nICogdGhpcy5nZXRTcGFjaW5nVW5pdHModm9pY2UpKTtcbn07XG5cblZvaWNlRWxlbWVudC51cGRhdGVJbmRpY2VzID0gZnVuY3Rpb24gKHZvaWNlKSB7XG5cdGlmICghdGhpcy5sYXlvdXRFbmRlZCh2b2ljZSkpIHtcblx0XHR2b2ljZS5kdXJhdGlvbmluZGV4ICs9IHZvaWNlLmNoaWxkcmVuW3ZvaWNlLmldLmR1cmF0aW9uO1xuXHRcdGlmICh2b2ljZS5jaGlsZHJlblt2b2ljZS5pXS50eXBlID09PSAnYmFyJykgdm9pY2UuZHVyYXRpb25pbmRleCA9IE1hdGgucm91bmQodm9pY2UuZHVyYXRpb25pbmRleCAqIDY0KSAvIDY0OyAvLyBldmVyeXRpbWUgd2UgbWVldCBhIGJhcmxpbmUsIGRvIHJvdW5kaW5nIHRvIG5lYXJlc3QgNjR0aFxuXHRcdHZvaWNlLmkrKztcblx0fVxufTtcblxuZnVuY3Rpb24gZ2V0RXh0cmFXaWR0aChjaGlsZCwgbWluUGFkZGluZykgeyAvLyBzcGFjZSBuZWVkZWQgdG8gdGhlIGxlZnQgb2YgdGhlIG5vdGVcblx0dmFyIHBhZGRpbmcgPSAwO1xuXHRpZiAoY2hpbGQudHlwZSA9PT0gJ25vdGUnIHx8IGNoaWxkLnR5cGUgPT09ICdiYXInKVxuXHRcdHBhZGRpbmcgPSBtaW5QYWRkaW5nO1xuXHRyZXR1cm4gLWNoaWxkLmV4dHJhdyArIHBhZGRpbmc7XG59XG5cbmZ1bmN0aW9uIGdldE1pbldpZHRoKGNoaWxkKSB7IC8vIGFic29sdXRlIHNwYWNlIHRha2VuIHRvIHRoZSByaWdodCBvZiB0aGUgbm90ZVxuXHRyZXR1cm4gY2hpbGQudztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBWb2ljZUVsZW1lbnQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/layout/voice-elements.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/layout/voice.js":
/*!******************************************************!*\
  !*** ./node_modules/abcjs/src/write/layout/voice.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var layoutBeam = __webpack_require__(/*! ./beam */ \"(ssr)/./node_modules/abcjs/src/write/layout/beam.js\");\nvar getBarYAt = __webpack_require__(/*! ./get-bar-y-at */ \"(ssr)/./node_modules/abcjs/src/write/layout/get-bar-y-at.js\");\nvar layoutTriplet = __webpack_require__(/*! ./triplet */ \"(ssr)/./node_modules/abcjs/src/write/layout/triplet.js\");\n\nvar layoutVoice = function (voice) {\n\tfor (var i = 0; i < voice.beams.length; i++) {\n\t\tif (voice.beams[i].type === 'BeamElem') {\n\t\t\tlayoutBeam(voice.beams[i]);\n\t\t\tmoveDecorations(voice.beams[i]);\n\t\t\t// The above will change the top and bottom of the abselem children, so see if we need to expand our range.\n\t\t\tfor (var j = 0; j < voice.beams[i].elems.length; j++) {\n\t\t\t\tvoice.adjustRange(voice.beams[i].elems[j]);\n\t\t\t}\n\t\t}\n\t}\n\tvoice.staff.specialY.chordLines = setLaneForChord(voice.children);\n\n\t// Now we can layout the triplets\n\tfor (i = 0; i < voice.otherchildren.length; i++) {\n\t\tvar child = voice.otherchildren[i];\n\t\tif (child.type === 'TripletElem') {\n\t\t\tlayoutTriplet(child);\n\t\t\tvoice.adjustRange(child);\n\t\t}\n\t}\n\tvoice.staff.top = Math.max(voice.staff.top, voice.top);\n\tvoice.staff.bottom = Math.min(voice.staff.bottom, voice.bottom);\n};\n\nfunction moveDecorations(beam) {\n\tvar padding = 1.5; // This is the vertical padding between elements, in pitches.\n\tfor (var ch = 0; ch < beam.elems.length; ch++) {\n\t\tvar child = beam.elems[ch];\n\t\tif (child.top) {\n\t\t\t// We now know where the ornaments should have been placed, so move them if they would overlap.\n\t\t\tvar top = yAtNote(child, beam);\n\t\t\tfor (var i = 0; i < child.children.length; i++) {\n\t\t\t\tvar el = child.children[i];\n\t\t\t\tif (el.klass === 'ornament' && el.position !== 'below') {\n\t\t\t\t\tif (el.bottom - padding < top) {\n\t\t\t\t\t\tvar distance = top - el.bottom + padding; // Find the distance that it needs to move and add a little margin so the element doesn't touch the beam.\n\t\t\t\t\t\tel.bottom += distance;\n\t\t\t\t\t\tel.top += distance;\n\t\t\t\t\t\tel.pitch += distance;\n\t\t\t\t\t\ttop = child.top = el.top;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction placeInLane(rightMost, relElem) {\n\t// These items are centered so figure the coordinates accordingly.\n\t// The font reports some extra space so the margin is built in.\n\tvar xCoords = relElem.getChordDim();\n\tif (xCoords) {\n\t\tfor (var i = 0; i < rightMost.length; i++) {\n\t\t\tvar fits = rightMost[i] < xCoords.left;\n\t\t\tif (fits) {\n\t\t\t\tif (i > 0)\n\t\t\t\t\trelElem.putChordInLane(i);\n\t\t\t\trightMost[i] = xCoords.right;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t// If we didn't return early, then we need a new row\n\t\trightMost.push(xCoords.right);\n\t\trelElem.putChordInLane(rightMost.length - 1);\n\t}\n}\n\nfunction setLaneForChord(absElems) {\n\t// Criteria:\n\t// 1) lane numbers start from the bottom so that as many items as possible are in lane 0, closest to the music.\n\t// 2) a chord can have more than one line (for instance \"C\\nD\") each line is a lane.\n\t// 3) if two adjoining items would touch then push the second one to the next lane.\n\t// 4) use as many lanes as is necessary to get everything to not touch.\n\t// 5) leave a margin between items, so use another lane if the chords would have less than a character's width.\n\t// 6) if the chord only has one character, allow it to be closer than if the chord has more than one character.\n\tvar rightMostAbove = [0];\n\tvar rightMostBelow = [0];\n\tvar i;\n\tvar j;\n\tvar relElem;\n\tfor (i = 0; i < absElems.length; i++) {\n\t\tfor (j = 0; j < absElems[i].children.length; j++) {\n\t\t\trelElem = absElems[i].children[j];\n\t\t\tif (relElem.chordHeightAbove) {\n\t\t\t\tplaceInLane(rightMostAbove, relElem);\n\t\t\t}\n\t\t}\n\t\tfor (j = absElems[i].children.length - 1; j >= 0; j--) {\n\t\t\trelElem = absElems[i].children[j];\n\t\t\tif (relElem.chordHeightBelow) {\n\t\t\t\tplaceInLane(rightMostBelow, relElem);\n\t\t\t}\n\t\t}\n\t}\n\t// If we used a second line, then we need to go back and set the first lines.\n\t// Also we need to flip the indexes of the names so that we can count from the top line.\n\tif (rightMostAbove.length > 1 || rightMostBelow.length > 1)\n\t\tsetLane(absElems, rightMostAbove.length, rightMostBelow.length);\n\treturn { above: rightMostAbove.length, below: rightMostBelow.length };\n}\n\nfunction numAnnotationsBelow(absElem) {\n\tvar count = 0;\n\tfor (var j = 0; j < absElem.children.length; j++) {\n\t\tvar relElem = absElem.children[j];\n\t\tif (relElem.chordHeightBelow)\n\t\t\tcount++;\n\t}\n\treturn count;\n}\n\nfunction setLane(absElems, numLanesAbove, numLanesBelow) {\n\tfor (var i = 0; i < absElems.length; i++) {\n\t\tvar below = numAnnotationsBelow(absElems[i]);\n\t\tfor (var j = 0; j < absElems[i].children.length; j++) {\n\t\t\tvar relElem = absElems[i].children[j];\n\t\t\tif (relElem.chordHeightAbove) {\n\t\t\t\trelElem.invertLane(numLanesAbove);\n\t\t\t\t// } else if (relElem.chordHeightBelow) {\n\t\t\t\t// \trelElem.invertLane(below);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction yAtNote(element, beam) {\n\tbeam = beam.beams[0];\n\treturn getBarYAt(beam.startX, beam.startY, beam.endX, beam.endY, element.x);\n}\n\n\nmodule.exports = layoutVoice;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2xheW91dC92b2ljZS5qcyIsIm1hcHBpbmdzIjoiQUFBQSxpQkFBaUIsbUJBQU8sQ0FBQyxtRUFBUTtBQUNqQyxnQkFBZ0IsbUJBQU8sQ0FBQyxtRkFBZ0I7QUFDeEMsb0JBQW9CLG1CQUFPLENBQUMseUVBQVc7O0FBRXZDO0FBQ0EsaUJBQWlCLHdCQUF3QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixpQ0FBaUM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGFBQWEsZ0NBQWdDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQjtBQUNwQixrQkFBa0Isd0JBQXdCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDJCQUEyQjtBQUM5QztBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixzQkFBc0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHFCQUFxQjtBQUNsQyxjQUFjLGlDQUFpQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLFFBQVE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQiw2QkFBNkI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLHFCQUFxQjtBQUN0QztBQUNBLGtCQUFrQixpQ0FBaUM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL2xheW91dC92b2ljZS5qcz9kMjdjIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBsYXlvdXRCZWFtID0gcmVxdWlyZSgnLi9iZWFtJyk7XG52YXIgZ2V0QmFyWUF0ID0gcmVxdWlyZSgnLi9nZXQtYmFyLXktYXQnKTtcbnZhciBsYXlvdXRUcmlwbGV0ID0gcmVxdWlyZSgnLi90cmlwbGV0Jyk7XG5cbnZhciBsYXlvdXRWb2ljZSA9IGZ1bmN0aW9uICh2b2ljZSkge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHZvaWNlLmJlYW1zLmxlbmd0aDsgaSsrKSB7XG5cdFx0aWYgKHZvaWNlLmJlYW1zW2ldLnR5cGUgPT09ICdCZWFtRWxlbScpIHtcblx0XHRcdGxheW91dEJlYW0odm9pY2UuYmVhbXNbaV0pO1xuXHRcdFx0bW92ZURlY29yYXRpb25zKHZvaWNlLmJlYW1zW2ldKTtcblx0XHRcdC8vIFRoZSBhYm92ZSB3aWxsIGNoYW5nZSB0aGUgdG9wIGFuZCBib3R0b20gb2YgdGhlIGFic2VsZW0gY2hpbGRyZW4sIHNvIHNlZSBpZiB3ZSBuZWVkIHRvIGV4cGFuZCBvdXIgcmFuZ2UuXG5cdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHZvaWNlLmJlYW1zW2ldLmVsZW1zLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHZvaWNlLmFkanVzdFJhbmdlKHZvaWNlLmJlYW1zW2ldLmVsZW1zW2pdKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0dm9pY2Uuc3RhZmYuc3BlY2lhbFkuY2hvcmRMaW5lcyA9IHNldExhbmVGb3JDaG9yZCh2b2ljZS5jaGlsZHJlbik7XG5cblx0Ly8gTm93IHdlIGNhbiBsYXlvdXQgdGhlIHRyaXBsZXRzXG5cdGZvciAoaSA9IDA7IGkgPCB2b2ljZS5vdGhlcmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGNoaWxkID0gdm9pY2Uub3RoZXJjaGlsZHJlbltpXTtcblx0XHRpZiAoY2hpbGQudHlwZSA9PT0gJ1RyaXBsZXRFbGVtJykge1xuXHRcdFx0bGF5b3V0VHJpcGxldChjaGlsZCk7XG5cdFx0XHR2b2ljZS5hZGp1c3RSYW5nZShjaGlsZCk7XG5cdFx0fVxuXHR9XG5cdHZvaWNlLnN0YWZmLnRvcCA9IE1hdGgubWF4KHZvaWNlLnN0YWZmLnRvcCwgdm9pY2UudG9wKTtcblx0dm9pY2Uuc3RhZmYuYm90dG9tID0gTWF0aC5taW4odm9pY2Uuc3RhZmYuYm90dG9tLCB2b2ljZS5ib3R0b20pO1xufTtcblxuZnVuY3Rpb24gbW92ZURlY29yYXRpb25zKGJlYW0pIHtcblx0dmFyIHBhZGRpbmcgPSAxLjU7IC8vIFRoaXMgaXMgdGhlIHZlcnRpY2FsIHBhZGRpbmcgYmV0d2VlbiBlbGVtZW50cywgaW4gcGl0Y2hlcy5cblx0Zm9yICh2YXIgY2ggPSAwOyBjaCA8IGJlYW0uZWxlbXMubGVuZ3RoOyBjaCsrKSB7XG5cdFx0dmFyIGNoaWxkID0gYmVhbS5lbGVtc1tjaF07XG5cdFx0aWYgKGNoaWxkLnRvcCkge1xuXHRcdFx0Ly8gV2Ugbm93IGtub3cgd2hlcmUgdGhlIG9ybmFtZW50cyBzaG91bGQgaGF2ZSBiZWVuIHBsYWNlZCwgc28gbW92ZSB0aGVtIGlmIHRoZXkgd291bGQgb3ZlcmxhcC5cblx0XHRcdHZhciB0b3AgPSB5QXROb3RlKGNoaWxkLCBiZWFtKTtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGQuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIGVsID0gY2hpbGQuY2hpbGRyZW5baV07XG5cdFx0XHRcdGlmIChlbC5rbGFzcyA9PT0gJ29ybmFtZW50JyAmJiBlbC5wb3NpdGlvbiAhPT0gJ2JlbG93Jykge1xuXHRcdFx0XHRcdGlmIChlbC5ib3R0b20gLSBwYWRkaW5nIDwgdG9wKSB7XG5cdFx0XHRcdFx0XHR2YXIgZGlzdGFuY2UgPSB0b3AgLSBlbC5ib3R0b20gKyBwYWRkaW5nOyAvLyBGaW5kIHRoZSBkaXN0YW5jZSB0aGF0IGl0IG5lZWRzIHRvIG1vdmUgYW5kIGFkZCBhIGxpdHRsZSBtYXJnaW4gc28gdGhlIGVsZW1lbnQgZG9lc24ndCB0b3VjaCB0aGUgYmVhbS5cblx0XHRcdFx0XHRcdGVsLmJvdHRvbSArPSBkaXN0YW5jZTtcblx0XHRcdFx0XHRcdGVsLnRvcCArPSBkaXN0YW5jZTtcblx0XHRcdFx0XHRcdGVsLnBpdGNoICs9IGRpc3RhbmNlO1xuXHRcdFx0XHRcdFx0dG9wID0gY2hpbGQudG9wID0gZWwudG9wO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBwbGFjZUluTGFuZShyaWdodE1vc3QsIHJlbEVsZW0pIHtcblx0Ly8gVGhlc2UgaXRlbXMgYXJlIGNlbnRlcmVkIHNvIGZpZ3VyZSB0aGUgY29vcmRpbmF0ZXMgYWNjb3JkaW5nbHkuXG5cdC8vIFRoZSBmb250IHJlcG9ydHMgc29tZSBleHRyYSBzcGFjZSBzbyB0aGUgbWFyZ2luIGlzIGJ1aWx0IGluLlxuXHR2YXIgeENvb3JkcyA9IHJlbEVsZW0uZ2V0Q2hvcmREaW0oKTtcblx0aWYgKHhDb29yZHMpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHJpZ2h0TW9zdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGZpdHMgPSByaWdodE1vc3RbaV0gPCB4Q29vcmRzLmxlZnQ7XG5cdFx0XHRpZiAoZml0cykge1xuXHRcdFx0XHRpZiAoaSA+IDApXG5cdFx0XHRcdFx0cmVsRWxlbS5wdXRDaG9yZEluTGFuZShpKTtcblx0XHRcdFx0cmlnaHRNb3N0W2ldID0geENvb3Jkcy5yaWdodDtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBJZiB3ZSBkaWRuJ3QgcmV0dXJuIGVhcmx5LCB0aGVuIHdlIG5lZWQgYSBuZXcgcm93XG5cdFx0cmlnaHRNb3N0LnB1c2goeENvb3Jkcy5yaWdodCk7XG5cdFx0cmVsRWxlbS5wdXRDaG9yZEluTGFuZShyaWdodE1vc3QubGVuZ3RoIC0gMSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gc2V0TGFuZUZvckNob3JkKGFic0VsZW1zKSB7XG5cdC8vIENyaXRlcmlhOlxuXHQvLyAxKSBsYW5lIG51bWJlcnMgc3RhcnQgZnJvbSB0aGUgYm90dG9tIHNvIHRoYXQgYXMgbWFueSBpdGVtcyBhcyBwb3NzaWJsZSBhcmUgaW4gbGFuZSAwLCBjbG9zZXN0IHRvIHRoZSBtdXNpYy5cblx0Ly8gMikgYSBjaG9yZCBjYW4gaGF2ZSBtb3JlIHRoYW4gb25lIGxpbmUgKGZvciBpbnN0YW5jZSBcIkNcXG5EXCIpIGVhY2ggbGluZSBpcyBhIGxhbmUuXG5cdC8vIDMpIGlmIHR3byBhZGpvaW5pbmcgaXRlbXMgd291bGQgdG91Y2ggdGhlbiBwdXNoIHRoZSBzZWNvbmQgb25lIHRvIHRoZSBuZXh0IGxhbmUuXG5cdC8vIDQpIHVzZSBhcyBtYW55IGxhbmVzIGFzIGlzIG5lY2Vzc2FyeSB0byBnZXQgZXZlcnl0aGluZyB0byBub3QgdG91Y2guXG5cdC8vIDUpIGxlYXZlIGEgbWFyZ2luIGJldHdlZW4gaXRlbXMsIHNvIHVzZSBhbm90aGVyIGxhbmUgaWYgdGhlIGNob3JkcyB3b3VsZCBoYXZlIGxlc3MgdGhhbiBhIGNoYXJhY3RlcidzIHdpZHRoLlxuXHQvLyA2KSBpZiB0aGUgY2hvcmQgb25seSBoYXMgb25lIGNoYXJhY3RlciwgYWxsb3cgaXQgdG8gYmUgY2xvc2VyIHRoYW4gaWYgdGhlIGNob3JkIGhhcyBtb3JlIHRoYW4gb25lIGNoYXJhY3Rlci5cblx0dmFyIHJpZ2h0TW9zdEFib3ZlID0gWzBdO1xuXHR2YXIgcmlnaHRNb3N0QmVsb3cgPSBbMF07XG5cdHZhciBpO1xuXHR2YXIgajtcblx0dmFyIHJlbEVsZW07XG5cdGZvciAoaSA9IDA7IGkgPCBhYnNFbGVtcy5sZW5ndGg7IGkrKykge1xuXHRcdGZvciAoaiA9IDA7IGogPCBhYnNFbGVtc1tpXS5jaGlsZHJlbi5sZW5ndGg7IGorKykge1xuXHRcdFx0cmVsRWxlbSA9IGFic0VsZW1zW2ldLmNoaWxkcmVuW2pdO1xuXHRcdFx0aWYgKHJlbEVsZW0uY2hvcmRIZWlnaHRBYm92ZSkge1xuXHRcdFx0XHRwbGFjZUluTGFuZShyaWdodE1vc3RBYm92ZSwgcmVsRWxlbSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGZvciAoaiA9IGFic0VsZW1zW2ldLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG5cdFx0XHRyZWxFbGVtID0gYWJzRWxlbXNbaV0uY2hpbGRyZW5bal07XG5cdFx0XHRpZiAocmVsRWxlbS5jaG9yZEhlaWdodEJlbG93KSB7XG5cdFx0XHRcdHBsYWNlSW5MYW5lKHJpZ2h0TW9zdEJlbG93LCByZWxFbGVtKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0Ly8gSWYgd2UgdXNlZCBhIHNlY29uZCBsaW5lLCB0aGVuIHdlIG5lZWQgdG8gZ28gYmFjayBhbmQgc2V0IHRoZSBmaXJzdCBsaW5lcy5cblx0Ly8gQWxzbyB3ZSBuZWVkIHRvIGZsaXAgdGhlIGluZGV4ZXMgb2YgdGhlIG5hbWVzIHNvIHRoYXQgd2UgY2FuIGNvdW50IGZyb20gdGhlIHRvcCBsaW5lLlxuXHRpZiAocmlnaHRNb3N0QWJvdmUubGVuZ3RoID4gMSB8fCByaWdodE1vc3RCZWxvdy5sZW5ndGggPiAxKVxuXHRcdHNldExhbmUoYWJzRWxlbXMsIHJpZ2h0TW9zdEFib3ZlLmxlbmd0aCwgcmlnaHRNb3N0QmVsb3cubGVuZ3RoKTtcblx0cmV0dXJuIHsgYWJvdmU6IHJpZ2h0TW9zdEFib3ZlLmxlbmd0aCwgYmVsb3c6IHJpZ2h0TW9zdEJlbG93Lmxlbmd0aCB9O1xufVxuXG5mdW5jdGlvbiBudW1Bbm5vdGF0aW9uc0JlbG93KGFic0VsZW0pIHtcblx0dmFyIGNvdW50ID0gMDtcblx0Zm9yICh2YXIgaiA9IDA7IGogPCBhYnNFbGVtLmNoaWxkcmVuLmxlbmd0aDsgaisrKSB7XG5cdFx0dmFyIHJlbEVsZW0gPSBhYnNFbGVtLmNoaWxkcmVuW2pdO1xuXHRcdGlmIChyZWxFbGVtLmNob3JkSGVpZ2h0QmVsb3cpXG5cdFx0XHRjb3VudCsrO1xuXHR9XG5cdHJldHVybiBjb3VudDtcbn1cblxuZnVuY3Rpb24gc2V0TGFuZShhYnNFbGVtcywgbnVtTGFuZXNBYm92ZSwgbnVtTGFuZXNCZWxvdykge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGFic0VsZW1zLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGJlbG93ID0gbnVtQW5ub3RhdGlvbnNCZWxvdyhhYnNFbGVtc1tpXSk7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBhYnNFbGVtc1tpXS5jaGlsZHJlbi5sZW5ndGg7IGorKykge1xuXHRcdFx0dmFyIHJlbEVsZW0gPSBhYnNFbGVtc1tpXS5jaGlsZHJlbltqXTtcblx0XHRcdGlmIChyZWxFbGVtLmNob3JkSGVpZ2h0QWJvdmUpIHtcblx0XHRcdFx0cmVsRWxlbS5pbnZlcnRMYW5lKG51bUxhbmVzQWJvdmUpO1xuXHRcdFx0XHQvLyB9IGVsc2UgaWYgKHJlbEVsZW0uY2hvcmRIZWlnaHRCZWxvdykge1xuXHRcdFx0XHQvLyBcdHJlbEVsZW0uaW52ZXJ0TGFuZShiZWxvdyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIHlBdE5vdGUoZWxlbWVudCwgYmVhbSkge1xuXHRiZWFtID0gYmVhbS5iZWFtc1swXTtcblx0cmV0dXJuIGdldEJhcllBdChiZWFtLnN0YXJ0WCwgYmVhbS5zdGFydFksIGJlYW0uZW5kWCwgYmVhbS5lbmRZLCBlbGVtZW50LngpO1xufVxuXG5cbm1vZHVsZS5leHBvcnRzID0gbGF5b3V0Vm9pY2U7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/layout/voice.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/renderer.js":
/*!**************************************************!*\
  !*** ./node_modules/abcjs/src/write/renderer.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("//    abc_renderer.js: API to render to SVG/Raphael/whatever rendering engine\n\n/*global Math */\n\nvar spacing = __webpack_require__(/*! ./helpers/spacing */ \"(ssr)/./node_modules/abcjs/src/write/helpers/spacing.js\");\nvar Svg = __webpack_require__(/*! ./svg */ \"(ssr)/./node_modules/abcjs/src/write/svg.js\");\n\n/**\n * Implements the API for rendering ABCJS Abstract Rendering Structure to a canvas/paper (e.g. SVG, Raphael, etc)\n * @param {Object} paper\n */\nvar Renderer = function (paper) {\n\tthis.paper = new Svg(paper);\n\tthis.controller = null;\n\n\tthis.space = 3 * spacing.SPACE;\n\tthis.padding = {}; // renderer's padding is managed by the controller\n\tthis.reset();\n\tthis.firefox112 = navigator.userAgent.indexOf('Firefox/112.0') >= 0\n};\n\nRenderer.prototype.reset = function () {\n\n\tthis.paper.clear();\n\tthis.y = 0;\n\tthis.abctune = null;\n\tthis.path = null;\n\tthis.isPrint = false;\n\tthis.lineThickness = 0;\n\tthis.initVerticalSpace();\n};\n\nRenderer.prototype.newTune = function (abcTune) {\n\tthis.abctune = abcTune; // TODO-PER: this is just to get the font info.\n\tthis.setVerticalSpace(abcTune.formatting);\n\t//this.measureNumber = null;\n\t//this.noteNumber = null;\n\tthis.isPrint = abcTune.media === 'print';\n\tthis.setPadding(abcTune);\n};\n\nRenderer.prototype.setLineThickness = function (lineThickness) {\n\tthis.lineThickness = lineThickness\n};\n\nRenderer.prototype.setPaddingOverride = function (params) {\n\tthis.paddingOverride = {\n\t\ttop: params.paddingtop, bottom: params.paddingbottom,\n\t\tright: params.paddingright, left: params.paddingleft\n\t};\n};\n\nRenderer.prototype.setPadding = function (abctune) {\n\t// If the padding is set in the tune, then use that.\n\t// Otherwise, if the padding is set in the override, use that.\n\t// Otherwise, use the defaults (there are a different set of defaults for screen and print.)\n\tfunction setPaddingVariable(self, paddingKey, formattingKey, printDefault, screenDefault) {\n\t\tif (abctune.formatting[formattingKey] !== undefined)\n\t\t\tself.padding[paddingKey] = abctune.formatting[formattingKey];\n\t\telse if (self.paddingOverride[paddingKey] !== undefined)\n\t\t\tself.padding[paddingKey] = self.paddingOverride[paddingKey];\n\t\telse if (self.isPrint)\n\t\t\tself.padding[paddingKey] = printDefault;\n\t\telse\n\t\t\tself.padding[paddingKey] = screenDefault;\n\t}\n\t// 1cm x 0.393701in/cm x 72pt/in x 1.33px/pt = 38px\n\t// 1.8cm x 0.393701in/cm x 72pt/in x 1.33px/pt = 68px\n\tsetPaddingVariable(this, 'top', 'topmargin', 38, 15);\n\tsetPaddingVariable(this, 'bottom', 'botmargin', 38, 15);\n\tsetPaddingVariable(this, 'left', 'leftmargin', 68, 15);\n\tsetPaddingVariable(this, 'right', 'rightmargin', 68, 15);\n};\n\n/**\n * Some of the items on the page are not scaled, so adjust them in the opposite direction of scaling to cancel out the scaling.\n * @param {float} scale\n */\nRenderer.prototype.adjustNonScaledItems = function (scale) {\n\tthis.padding.top /= scale;\n\tthis.padding.bottom /= scale;\n\tthis.padding.left /= scale;\n\tthis.padding.right /= scale;\n\tthis.abctune.formatting.headerfont.size /= scale;\n\tthis.abctune.formatting.footerfont.size /= scale;\n};\n\n/**\n * Set the the values for all the configurable vertical space options.\n */\nRenderer.prototype.initVerticalSpace = function () {\n\t// conversion: 37.7953 = conversion factor for cm to px.\n\t// All of the following values are in px.\n\tthis.spacing = {\n\t\tcomposer: 7.56, // Set the vertical space above the composer.\n\t\tgraceBefore: 8.67, // Define the space before, inside and after the grace notes.\n\t\tgraceInside: 10.67,\n\t\tgraceAfter: 16,\n\t\tinfo: 0, // Set the vertical space above the infoline.\n\t\tlineSkipFactor: 1.1, // Set the factor for spacing between lines of text. (multiply this by the font size)\n\t\tmusic: 7.56, // Set the vertical space above the first staff.\n\t\tparagraphSkipFactor: 0.4, // Set the factor for spacing between text paragraphs. (multiply this by the font size)\n\t\tparts: 11.33, // Set the vertical space above a new part.\n\t\tslurHeight: 1.0, // Set the slur height factor.\n\t\tstaffSeparation: 61.33, // Do not put a staff system closer than <unit> from the previous system.\n\t\tstaffTopMargin: 0,\n\t\tstemHeight: 26.67 + 10, // Set the stem height.\n\t\tsubtitle: 3.78, // Set the vertical space above the subtitle.\n\t\tsystemStaffSeparation: 48, // Do not place the staves closer than <unit> inside a system. * This values applies to all staves when in the tune header. Otherwise, it applies to the next staff\n\t\ttext: 18.9, // Set the vertical space above the history.\n\t\ttitle: 7.56, // Set the vertical space above the title.\n\t\ttop: 30.24, //Set the vertical space above the tunes and on the top of the continuation pages.\n\t\tvocal: 0, // Set the vertical space above the lyrics under the staves.\n\t\twords: 0 // Set the vertical space above the lyrics at the end of the tune.\n\t};\n\t/*\n\tTODO-PER: Handle the x-coordinate spacing items, too.\nmaxshrink <float>Default: 0.65\nSet how much to compress horizontally when music line breaks\nare automatic.\n<float> must be between 0 (natural spacing)\nand 1 (max shrinking).\n\n// This next value is used to compute the natural spacing of\n// the notes. The base spacing of the crotchet is always\n// 40 pts. When the duration of a note type is twice the\n// duration of an other note type, its spacing is multiplied\n// by this factor.\n// The default value causes the note spacing to be multiplied\n// by 2 when its duration is multiplied by 4, i.e. the\n// space of the semibreve is 80 pts and the space of the\n// semiquaver is 20 pts.\n// Setting this value to 1 sets all note spacing to 40 pts.\nnoteSpacingFactor: 1.414, // Set the note spacing factor to <float> (range 1..2).\n\nscale <float> Default: 0.75 Set the page scale factor. Note that the header and footer are not scaled.\n\nstretchlast <float>Default: 0.8\nStretch the last music line of a tune when it exceeds\nthe <float> fraction of the page width.\n<float> range is 0.0 to 1.0.\n\t */\n};\n\nRenderer.prototype.setVerticalSpace = function (formatting) {\n\t// conversion from pts to px 4/3\n\tif (formatting.staffsep !== undefined)\n\t\tthis.spacing.staffSeparation = formatting.staffsep * 4 / 3;\n\tif (formatting.composerspace !== undefined)\n\t\tthis.spacing.composer = formatting.composerspace * 4 / 3;\n\tif (formatting.partsspace !== undefined)\n\t\tthis.spacing.parts = formatting.partsspace * 4 / 3;\n\tif (formatting.textspace !== undefined)\n\t\tthis.spacing.text = formatting.textspace * 4 / 3;\n\tif (formatting.musicspace !== undefined)\n\t\tthis.spacing.music = formatting.musicspace * 4 / 3;\n\tif (formatting.titlespace !== undefined)\n\t\tthis.spacing.title = formatting.titlespace * 4 / 3;\n\tif (formatting.sysstaffsep !== undefined)\n\t\tthis.spacing.systemStaffSeparation = formatting.sysstaffsep * 4 / 3;\n\tif (formatting.stafftopmargin !== undefined)\n\t\tthis.spacing.staffTopMargin = formatting.stafftopmargin * 4 / 3;\n\tif (formatting.subtitlespace !== undefined)\n\t\tthis.spacing.subtitle = formatting.subtitlespace * 4 / 3;\n\tif (formatting.topspace !== undefined)\n\t\tthis.spacing.top = formatting.topspace * 4 / 3;\n\tif (formatting.vocalspace !== undefined)\n\t\tthis.spacing.vocal = formatting.vocalspace * 4 / 3;\n\tif (formatting.wordsspace !== undefined)\n\t\tthis.spacing.words = formatting.wordsspace * 4 / 3;\n};\n\n\n/**\n * Calculates the y for a given pitch value (relative to the stave the renderer is currently printing)\n * @param {number} ofs pitch value (bottom C on a G clef = 0, D=1, etc.)\n */\nRenderer.prototype.calcY = function (ofs) {\n\treturn this.y - ofs * spacing.STEP;\n};\n\nRenderer.prototype.moveY = function (em, numLines) {\n\tif (numLines === undefined) numLines = 1;\n\tthis.y += em * numLines;\n};\n\nRenderer.prototype.absolutemoveY = function (y) {\n\tthis.y = y;\n};\n\nmodule.exports = Renderer;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL3JlbmRlcmVyLmpzIiwibWFwcGluZ3MiOiJBQUFBOztBQUVBOztBQUVBLGNBQWMsbUJBQU8sQ0FBQyxrRkFBbUI7QUFDekMsVUFBVSxtQkFBTyxDQUFDLDBEQUFPOztBQUV6QjtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuLWFydGlmYWN0cy8uL25vZGVfbW9kdWxlcy9hYmNqcy9zcmMvd3JpdGUvcmVuZGVyZXIuanM/MjFlNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAgICBhYmNfcmVuZGVyZXIuanM6IEFQSSB0byByZW5kZXIgdG8gU1ZHL1JhcGhhZWwvd2hhdGV2ZXIgcmVuZGVyaW5nIGVuZ2luZVxuXG4vKmdsb2JhbCBNYXRoICovXG5cbnZhciBzcGFjaW5nID0gcmVxdWlyZSgnLi9oZWxwZXJzL3NwYWNpbmcnKTtcbnZhciBTdmcgPSByZXF1aXJlKCcuL3N2ZycpO1xuXG4vKipcbiAqIEltcGxlbWVudHMgdGhlIEFQSSBmb3IgcmVuZGVyaW5nIEFCQ0pTIEFic3RyYWN0IFJlbmRlcmluZyBTdHJ1Y3R1cmUgdG8gYSBjYW52YXMvcGFwZXIgKGUuZy4gU1ZHLCBSYXBoYWVsLCBldGMpXG4gKiBAcGFyYW0ge09iamVjdH0gcGFwZXJcbiAqL1xudmFyIFJlbmRlcmVyID0gZnVuY3Rpb24gKHBhcGVyKSB7XG5cdHRoaXMucGFwZXIgPSBuZXcgU3ZnKHBhcGVyKTtcblx0dGhpcy5jb250cm9sbGVyID0gbnVsbDtcblxuXHR0aGlzLnNwYWNlID0gMyAqIHNwYWNpbmcuU1BBQ0U7XG5cdHRoaXMucGFkZGluZyA9IHt9OyAvLyByZW5kZXJlcidzIHBhZGRpbmcgaXMgbWFuYWdlZCBieSB0aGUgY29udHJvbGxlclxuXHR0aGlzLnJlc2V0KCk7XG5cdHRoaXMuZmlyZWZveDExMiA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveC8xMTIuMCcpID49IDBcbn07XG5cblJlbmRlcmVyLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcblxuXHR0aGlzLnBhcGVyLmNsZWFyKCk7XG5cdHRoaXMueSA9IDA7XG5cdHRoaXMuYWJjdHVuZSA9IG51bGw7XG5cdHRoaXMucGF0aCA9IG51bGw7XG5cdHRoaXMuaXNQcmludCA9IGZhbHNlO1xuXHR0aGlzLmxpbmVUaGlja25lc3MgPSAwO1xuXHR0aGlzLmluaXRWZXJ0aWNhbFNwYWNlKCk7XG59O1xuXG5SZW5kZXJlci5wcm90b3R5cGUubmV3VHVuZSA9IGZ1bmN0aW9uIChhYmNUdW5lKSB7XG5cdHRoaXMuYWJjdHVuZSA9IGFiY1R1bmU7IC8vIFRPRE8tUEVSOiB0aGlzIGlzIGp1c3QgdG8gZ2V0IHRoZSBmb250IGluZm8uXG5cdHRoaXMuc2V0VmVydGljYWxTcGFjZShhYmNUdW5lLmZvcm1hdHRpbmcpO1xuXHQvL3RoaXMubWVhc3VyZU51bWJlciA9IG51bGw7XG5cdC8vdGhpcy5ub3RlTnVtYmVyID0gbnVsbDtcblx0dGhpcy5pc1ByaW50ID0gYWJjVHVuZS5tZWRpYSA9PT0gJ3ByaW50Jztcblx0dGhpcy5zZXRQYWRkaW5nKGFiY1R1bmUpO1xufTtcblxuUmVuZGVyZXIucHJvdG90eXBlLnNldExpbmVUaGlja25lc3MgPSBmdW5jdGlvbiAobGluZVRoaWNrbmVzcykge1xuXHR0aGlzLmxpbmVUaGlja25lc3MgPSBsaW5lVGhpY2tuZXNzXG59O1xuXG5SZW5kZXJlci5wcm90b3R5cGUuc2V0UGFkZGluZ092ZXJyaWRlID0gZnVuY3Rpb24gKHBhcmFtcykge1xuXHR0aGlzLnBhZGRpbmdPdmVycmlkZSA9IHtcblx0XHR0b3A6IHBhcmFtcy5wYWRkaW5ndG9wLCBib3R0b206IHBhcmFtcy5wYWRkaW5nYm90dG9tLFxuXHRcdHJpZ2h0OiBwYXJhbXMucGFkZGluZ3JpZ2h0LCBsZWZ0OiBwYXJhbXMucGFkZGluZ2xlZnRcblx0fTtcbn07XG5cblJlbmRlcmVyLnByb3RvdHlwZS5zZXRQYWRkaW5nID0gZnVuY3Rpb24gKGFiY3R1bmUpIHtcblx0Ly8gSWYgdGhlIHBhZGRpbmcgaXMgc2V0IGluIHRoZSB0dW5lLCB0aGVuIHVzZSB0aGF0LlxuXHQvLyBPdGhlcndpc2UsIGlmIHRoZSBwYWRkaW5nIGlzIHNldCBpbiB0aGUgb3ZlcnJpZGUsIHVzZSB0aGF0LlxuXHQvLyBPdGhlcndpc2UsIHVzZSB0aGUgZGVmYXVsdHMgKHRoZXJlIGFyZSBhIGRpZmZlcmVudCBzZXQgb2YgZGVmYXVsdHMgZm9yIHNjcmVlbiBhbmQgcHJpbnQuKVxuXHRmdW5jdGlvbiBzZXRQYWRkaW5nVmFyaWFibGUoc2VsZiwgcGFkZGluZ0tleSwgZm9ybWF0dGluZ0tleSwgcHJpbnREZWZhdWx0LCBzY3JlZW5EZWZhdWx0KSB7XG5cdFx0aWYgKGFiY3R1bmUuZm9ybWF0dGluZ1tmb3JtYXR0aW5nS2V5XSAhPT0gdW5kZWZpbmVkKVxuXHRcdFx0c2VsZi5wYWRkaW5nW3BhZGRpbmdLZXldID0gYWJjdHVuZS5mb3JtYXR0aW5nW2Zvcm1hdHRpbmdLZXldO1xuXHRcdGVsc2UgaWYgKHNlbGYucGFkZGluZ092ZXJyaWRlW3BhZGRpbmdLZXldICE9PSB1bmRlZmluZWQpXG5cdFx0XHRzZWxmLnBhZGRpbmdbcGFkZGluZ0tleV0gPSBzZWxmLnBhZGRpbmdPdmVycmlkZVtwYWRkaW5nS2V5XTtcblx0XHRlbHNlIGlmIChzZWxmLmlzUHJpbnQpXG5cdFx0XHRzZWxmLnBhZGRpbmdbcGFkZGluZ0tleV0gPSBwcmludERlZmF1bHQ7XG5cdFx0ZWxzZVxuXHRcdFx0c2VsZi5wYWRkaW5nW3BhZGRpbmdLZXldID0gc2NyZWVuRGVmYXVsdDtcblx0fVxuXHQvLyAxY20geCAwLjM5MzcwMWluL2NtIHggNzJwdC9pbiB4IDEuMzNweC9wdCA9IDM4cHhcblx0Ly8gMS44Y20geCAwLjM5MzcwMWluL2NtIHggNzJwdC9pbiB4IDEuMzNweC9wdCA9IDY4cHhcblx0c2V0UGFkZGluZ1ZhcmlhYmxlKHRoaXMsICd0b3AnLCAndG9wbWFyZ2luJywgMzgsIDE1KTtcblx0c2V0UGFkZGluZ1ZhcmlhYmxlKHRoaXMsICdib3R0b20nLCAnYm90bWFyZ2luJywgMzgsIDE1KTtcblx0c2V0UGFkZGluZ1ZhcmlhYmxlKHRoaXMsICdsZWZ0JywgJ2xlZnRtYXJnaW4nLCA2OCwgMTUpO1xuXHRzZXRQYWRkaW5nVmFyaWFibGUodGhpcywgJ3JpZ2h0JywgJ3JpZ2h0bWFyZ2luJywgNjgsIDE1KTtcbn07XG5cbi8qKlxuICogU29tZSBvZiB0aGUgaXRlbXMgb24gdGhlIHBhZ2UgYXJlIG5vdCBzY2FsZWQsIHNvIGFkanVzdCB0aGVtIGluIHRoZSBvcHBvc2l0ZSBkaXJlY3Rpb24gb2Ygc2NhbGluZyB0byBjYW5jZWwgb3V0IHRoZSBzY2FsaW5nLlxuICogQHBhcmFtIHtmbG9hdH0gc2NhbGVcbiAqL1xuUmVuZGVyZXIucHJvdG90eXBlLmFkanVzdE5vblNjYWxlZEl0ZW1zID0gZnVuY3Rpb24gKHNjYWxlKSB7XG5cdHRoaXMucGFkZGluZy50b3AgLz0gc2NhbGU7XG5cdHRoaXMucGFkZGluZy5ib3R0b20gLz0gc2NhbGU7XG5cdHRoaXMucGFkZGluZy5sZWZ0IC89IHNjYWxlO1xuXHR0aGlzLnBhZGRpbmcucmlnaHQgLz0gc2NhbGU7XG5cdHRoaXMuYWJjdHVuZS5mb3JtYXR0aW5nLmhlYWRlcmZvbnQuc2l6ZSAvPSBzY2FsZTtcblx0dGhpcy5hYmN0dW5lLmZvcm1hdHRpbmcuZm9vdGVyZm9udC5zaXplIC89IHNjYWxlO1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIHRoZSB2YWx1ZXMgZm9yIGFsbCB0aGUgY29uZmlndXJhYmxlIHZlcnRpY2FsIHNwYWNlIG9wdGlvbnMuXG4gKi9cblJlbmRlcmVyLnByb3RvdHlwZS5pbml0VmVydGljYWxTcGFjZSA9IGZ1bmN0aW9uICgpIHtcblx0Ly8gY29udmVyc2lvbjogMzcuNzk1MyA9IGNvbnZlcnNpb24gZmFjdG9yIGZvciBjbSB0byBweC5cblx0Ly8gQWxsIG9mIHRoZSBmb2xsb3dpbmcgdmFsdWVzIGFyZSBpbiBweC5cblx0dGhpcy5zcGFjaW5nID0ge1xuXHRcdGNvbXBvc2VyOiA3LjU2LCAvLyBTZXQgdGhlIHZlcnRpY2FsIHNwYWNlIGFib3ZlIHRoZSBjb21wb3Nlci5cblx0XHRncmFjZUJlZm9yZTogOC42NywgLy8gRGVmaW5lIHRoZSBzcGFjZSBiZWZvcmUsIGluc2lkZSBhbmQgYWZ0ZXIgdGhlIGdyYWNlIG5vdGVzLlxuXHRcdGdyYWNlSW5zaWRlOiAxMC42Nyxcblx0XHRncmFjZUFmdGVyOiAxNixcblx0XHRpbmZvOiAwLCAvLyBTZXQgdGhlIHZlcnRpY2FsIHNwYWNlIGFib3ZlIHRoZSBpbmZvbGluZS5cblx0XHRsaW5lU2tpcEZhY3RvcjogMS4xLCAvLyBTZXQgdGhlIGZhY3RvciBmb3Igc3BhY2luZyBiZXR3ZWVuIGxpbmVzIG9mIHRleHQuIChtdWx0aXBseSB0aGlzIGJ5IHRoZSBmb250IHNpemUpXG5cdFx0bXVzaWM6IDcuNTYsIC8vIFNldCB0aGUgdmVydGljYWwgc3BhY2UgYWJvdmUgdGhlIGZpcnN0IHN0YWZmLlxuXHRcdHBhcmFncmFwaFNraXBGYWN0b3I6IDAuNCwgLy8gU2V0IHRoZSBmYWN0b3IgZm9yIHNwYWNpbmcgYmV0d2VlbiB0ZXh0IHBhcmFncmFwaHMuIChtdWx0aXBseSB0aGlzIGJ5IHRoZSBmb250IHNpemUpXG5cdFx0cGFydHM6IDExLjMzLCAvLyBTZXQgdGhlIHZlcnRpY2FsIHNwYWNlIGFib3ZlIGEgbmV3IHBhcnQuXG5cdFx0c2x1ckhlaWdodDogMS4wLCAvLyBTZXQgdGhlIHNsdXIgaGVpZ2h0IGZhY3Rvci5cblx0XHRzdGFmZlNlcGFyYXRpb246IDYxLjMzLCAvLyBEbyBub3QgcHV0IGEgc3RhZmYgc3lzdGVtIGNsb3NlciB0aGFuIDx1bml0PiBmcm9tIHRoZSBwcmV2aW91cyBzeXN0ZW0uXG5cdFx0c3RhZmZUb3BNYXJnaW46IDAsXG5cdFx0c3RlbUhlaWdodDogMjYuNjcgKyAxMCwgLy8gU2V0IHRoZSBzdGVtIGhlaWdodC5cblx0XHRzdWJ0aXRsZTogMy43OCwgLy8gU2V0IHRoZSB2ZXJ0aWNhbCBzcGFjZSBhYm92ZSB0aGUgc3VidGl0bGUuXG5cdFx0c3lzdGVtU3RhZmZTZXBhcmF0aW9uOiA0OCwgLy8gRG8gbm90IHBsYWNlIHRoZSBzdGF2ZXMgY2xvc2VyIHRoYW4gPHVuaXQ+IGluc2lkZSBhIHN5c3RlbS4gKiBUaGlzIHZhbHVlcyBhcHBsaWVzIHRvIGFsbCBzdGF2ZXMgd2hlbiBpbiB0aGUgdHVuZSBoZWFkZXIuIE90aGVyd2lzZSwgaXQgYXBwbGllcyB0byB0aGUgbmV4dCBzdGFmZlxuXHRcdHRleHQ6IDE4LjksIC8vIFNldCB0aGUgdmVydGljYWwgc3BhY2UgYWJvdmUgdGhlIGhpc3RvcnkuXG5cdFx0dGl0bGU6IDcuNTYsIC8vIFNldCB0aGUgdmVydGljYWwgc3BhY2UgYWJvdmUgdGhlIHRpdGxlLlxuXHRcdHRvcDogMzAuMjQsIC8vU2V0IHRoZSB2ZXJ0aWNhbCBzcGFjZSBhYm92ZSB0aGUgdHVuZXMgYW5kIG9uIHRoZSB0b3Agb2YgdGhlIGNvbnRpbnVhdGlvbiBwYWdlcy5cblx0XHR2b2NhbDogMCwgLy8gU2V0IHRoZSB2ZXJ0aWNhbCBzcGFjZSBhYm92ZSB0aGUgbHlyaWNzIHVuZGVyIHRoZSBzdGF2ZXMuXG5cdFx0d29yZHM6IDAgLy8gU2V0IHRoZSB2ZXJ0aWNhbCBzcGFjZSBhYm92ZSB0aGUgbHlyaWNzIGF0IHRoZSBlbmQgb2YgdGhlIHR1bmUuXG5cdH07XG5cdC8qXG5cdFRPRE8tUEVSOiBIYW5kbGUgdGhlIHgtY29vcmRpbmF0ZSBzcGFjaW5nIGl0ZW1zLCB0b28uXG5tYXhzaHJpbmsgPGZsb2F0PkRlZmF1bHQ6IDAuNjVcblNldCBob3cgbXVjaCB0byBjb21wcmVzcyBob3Jpem9udGFsbHkgd2hlbiBtdXNpYyBsaW5lIGJyZWFrc1xuYXJlIGF1dG9tYXRpYy5cbjxmbG9hdD4gbXVzdCBiZSBiZXR3ZWVuIDAgKG5hdHVyYWwgc3BhY2luZylcbmFuZCAxIChtYXggc2hyaW5raW5nKS5cblxuLy8gVGhpcyBuZXh0IHZhbHVlIGlzIHVzZWQgdG8gY29tcHV0ZSB0aGUgbmF0dXJhbCBzcGFjaW5nIG9mXG4vLyB0aGUgbm90ZXMuIFRoZSBiYXNlIHNwYWNpbmcgb2YgdGhlIGNyb3RjaGV0IGlzIGFsd2F5c1xuLy8gNDAgcHRzLiBXaGVuIHRoZSBkdXJhdGlvbiBvZiBhIG5vdGUgdHlwZSBpcyB0d2ljZSB0aGVcbi8vIGR1cmF0aW9uIG9mIGFuIG90aGVyIG5vdGUgdHlwZSwgaXRzIHNwYWNpbmcgaXMgbXVsdGlwbGllZFxuLy8gYnkgdGhpcyBmYWN0b3IuXG4vLyBUaGUgZGVmYXVsdCB2YWx1ZSBjYXVzZXMgdGhlIG5vdGUgc3BhY2luZyB0byBiZSBtdWx0aXBsaWVkXG4vLyBieSAyIHdoZW4gaXRzIGR1cmF0aW9uIGlzIG11bHRpcGxpZWQgYnkgNCwgaS5lLiB0aGVcbi8vIHNwYWNlIG9mIHRoZSBzZW1pYnJldmUgaXMgODAgcHRzIGFuZCB0aGUgc3BhY2Ugb2YgdGhlXG4vLyBzZW1pcXVhdmVyIGlzIDIwIHB0cy5cbi8vIFNldHRpbmcgdGhpcyB2YWx1ZSB0byAxIHNldHMgYWxsIG5vdGUgc3BhY2luZyB0byA0MCBwdHMuXG5ub3RlU3BhY2luZ0ZhY3RvcjogMS40MTQsIC8vIFNldCB0aGUgbm90ZSBzcGFjaW5nIGZhY3RvciB0byA8ZmxvYXQ+IChyYW5nZSAxLi4yKS5cblxuc2NhbGUgPGZsb2F0PiBEZWZhdWx0OiAwLjc1IFNldCB0aGUgcGFnZSBzY2FsZSBmYWN0b3IuIE5vdGUgdGhhdCB0aGUgaGVhZGVyIGFuZCBmb290ZXIgYXJlIG5vdCBzY2FsZWQuXG5cbnN0cmV0Y2hsYXN0IDxmbG9hdD5EZWZhdWx0OiAwLjhcblN0cmV0Y2ggdGhlIGxhc3QgbXVzaWMgbGluZSBvZiBhIHR1bmUgd2hlbiBpdCBleGNlZWRzXG50aGUgPGZsb2F0PiBmcmFjdGlvbiBvZiB0aGUgcGFnZSB3aWR0aC5cbjxmbG9hdD4gcmFuZ2UgaXMgMC4wIHRvIDEuMC5cblx0ICovXG59O1xuXG5SZW5kZXJlci5wcm90b3R5cGUuc2V0VmVydGljYWxTcGFjZSA9IGZ1bmN0aW9uIChmb3JtYXR0aW5nKSB7XG5cdC8vIGNvbnZlcnNpb24gZnJvbSBwdHMgdG8gcHggNC8zXG5cdGlmIChmb3JtYXR0aW5nLnN0YWZmc2VwICE9PSB1bmRlZmluZWQpXG5cdFx0dGhpcy5zcGFjaW5nLnN0YWZmU2VwYXJhdGlvbiA9IGZvcm1hdHRpbmcuc3RhZmZzZXAgKiA0IC8gMztcblx0aWYgKGZvcm1hdHRpbmcuY29tcG9zZXJzcGFjZSAhPT0gdW5kZWZpbmVkKVxuXHRcdHRoaXMuc3BhY2luZy5jb21wb3NlciA9IGZvcm1hdHRpbmcuY29tcG9zZXJzcGFjZSAqIDQgLyAzO1xuXHRpZiAoZm9ybWF0dGluZy5wYXJ0c3NwYWNlICE9PSB1bmRlZmluZWQpXG5cdFx0dGhpcy5zcGFjaW5nLnBhcnRzID0gZm9ybWF0dGluZy5wYXJ0c3NwYWNlICogNCAvIDM7XG5cdGlmIChmb3JtYXR0aW5nLnRleHRzcGFjZSAhPT0gdW5kZWZpbmVkKVxuXHRcdHRoaXMuc3BhY2luZy50ZXh0ID0gZm9ybWF0dGluZy50ZXh0c3BhY2UgKiA0IC8gMztcblx0aWYgKGZvcm1hdHRpbmcubXVzaWNzcGFjZSAhPT0gdW5kZWZpbmVkKVxuXHRcdHRoaXMuc3BhY2luZy5tdXNpYyA9IGZvcm1hdHRpbmcubXVzaWNzcGFjZSAqIDQgLyAzO1xuXHRpZiAoZm9ybWF0dGluZy50aXRsZXNwYWNlICE9PSB1bmRlZmluZWQpXG5cdFx0dGhpcy5zcGFjaW5nLnRpdGxlID0gZm9ybWF0dGluZy50aXRsZXNwYWNlICogNCAvIDM7XG5cdGlmIChmb3JtYXR0aW5nLnN5c3N0YWZmc2VwICE9PSB1bmRlZmluZWQpXG5cdFx0dGhpcy5zcGFjaW5nLnN5c3RlbVN0YWZmU2VwYXJhdGlvbiA9IGZvcm1hdHRpbmcuc3lzc3RhZmZzZXAgKiA0IC8gMztcblx0aWYgKGZvcm1hdHRpbmcuc3RhZmZ0b3BtYXJnaW4gIT09IHVuZGVmaW5lZClcblx0XHR0aGlzLnNwYWNpbmcuc3RhZmZUb3BNYXJnaW4gPSBmb3JtYXR0aW5nLnN0YWZmdG9wbWFyZ2luICogNCAvIDM7XG5cdGlmIChmb3JtYXR0aW5nLnN1YnRpdGxlc3BhY2UgIT09IHVuZGVmaW5lZClcblx0XHR0aGlzLnNwYWNpbmcuc3VidGl0bGUgPSBmb3JtYXR0aW5nLnN1YnRpdGxlc3BhY2UgKiA0IC8gMztcblx0aWYgKGZvcm1hdHRpbmcudG9wc3BhY2UgIT09IHVuZGVmaW5lZClcblx0XHR0aGlzLnNwYWNpbmcudG9wID0gZm9ybWF0dGluZy50b3BzcGFjZSAqIDQgLyAzO1xuXHRpZiAoZm9ybWF0dGluZy52b2NhbHNwYWNlICE9PSB1bmRlZmluZWQpXG5cdFx0dGhpcy5zcGFjaW5nLnZvY2FsID0gZm9ybWF0dGluZy52b2NhbHNwYWNlICogNCAvIDM7XG5cdGlmIChmb3JtYXR0aW5nLndvcmRzc3BhY2UgIT09IHVuZGVmaW5lZClcblx0XHR0aGlzLnNwYWNpbmcud29yZHMgPSBmb3JtYXR0aW5nLndvcmRzc3BhY2UgKiA0IC8gMztcbn07XG5cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSB5IGZvciBhIGdpdmVuIHBpdGNoIHZhbHVlIChyZWxhdGl2ZSB0byB0aGUgc3RhdmUgdGhlIHJlbmRlcmVyIGlzIGN1cnJlbnRseSBwcmludGluZylcbiAqIEBwYXJhbSB7bnVtYmVyfSBvZnMgcGl0Y2ggdmFsdWUgKGJvdHRvbSBDIG9uIGEgRyBjbGVmID0gMCwgRD0xLCBldGMuKVxuICovXG5SZW5kZXJlci5wcm90b3R5cGUuY2FsY1kgPSBmdW5jdGlvbiAob2ZzKSB7XG5cdHJldHVybiB0aGlzLnkgLSBvZnMgKiBzcGFjaW5nLlNURVA7XG59O1xuXG5SZW5kZXJlci5wcm90b3R5cGUubW92ZVkgPSBmdW5jdGlvbiAoZW0sIG51bUxpbmVzKSB7XG5cdGlmIChudW1MaW5lcyA9PT0gdW5kZWZpbmVkKSBudW1MaW5lcyA9IDE7XG5cdHRoaXMueSArPSBlbSAqIG51bUxpbmVzO1xufTtcblxuUmVuZGVyZXIucHJvdG90eXBlLmFic29sdXRlbW92ZVkgPSBmdW5jdGlvbiAoeSkge1xuXHR0aGlzLnkgPSB5O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZW5kZXJlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/renderer.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/src/write/svg.js":
/*!*********************************************!*\
  !*** ./node_modules/abcjs/src/write/svg.js ***!
  \*********************************************/
/***/ ((module) => {

eval("//    abc_voice_element.js: Definition of the VoiceElement class.\n\n/*global module */\n\nvar svgNS = \"http://www.w3.org/2000/svg\";\n\nfunction Svg(wrapper) {\n\tthis.svg = createSvg();\n\tthis.currentGroup = [];\n\twrapper.appendChild(this.svg);\n}\n\nSvg.prototype.clear = function () {\n\tif (this.svg) {\n\t\tvar wrapper = this.svg.parentNode;\n\t\tthis.svg = createSvg();\n\t\tthis.currentGroup = [];\n\t\tif (wrapper) {\n\t\t\t// TODO-PER: If the wrapper is not present, then the underlying div was pulled out from under this instance. It's possible that is still useful (for creating the music off page?)\n\t\t\twrapper.innerHTML = \"\";\n\t\t\twrapper.appendChild(this.svg);\n\t\t}\n\t}\n};\n\nSvg.prototype.setTitle = function (title) {\n\tvar titleEl = document.createElement(\"title\");\n\tvar titleNode = document.createTextNode(title);\n\ttitleEl.appendChild(titleNode);\n\tthis.svg.insertBefore(titleEl, this.svg.firstChild);\n};\n\nSvg.prototype.setResponsiveWidth = function (w, h) {\n\t// this technique is from: http://thenewcode.com/744/Make-SVG-Responsive, thx to https://github.com/iantresman\n\tthis.svg.setAttribute(\"viewBox\", \"0 0 \" + w + \" \" + h);\n\tthis.svg.setAttribute(\"preserveAspectRatio\", \"xMinYMin meet\");\n\tthis.svg.removeAttribute(\"height\");\n\tthis.svg.removeAttribute(\"width\");\n\tthis.svg.style['display'] = \"inline-block\";\n\tthis.svg.style['position'] = \"absolute\";\n\tthis.svg.style['top'] = \"0\";\n\tthis.svg.style['left'] = \"0\";\n\n\tif (this.svg.parentNode) {\n\t\tvar cls = this.svg.parentNode.getAttribute(\"class\");\n\t\tif (!cls)\n\t\t\tthis.svg.parentNode.setAttribute(\"class\", \"abcjs-container\");\n\t\telse if (cls.indexOf(\"abcjs-container\") < 0)\n\t\t\tthis.svg.parentNode.setAttribute(\"class\", cls + \" abcjs-container\");\n\t\tthis.svg.parentNode.style['display'] = \"inline-block\";\n\t\tthis.svg.parentNode.style['position'] = \"relative\";\n\t\tthis.svg.parentNode.style['width'] = \"100%\";\n\t\t// PER: I changed the padding from 100% to this through trial and error.\n\t\t// The example was using a square image, but this music might be either wider or taller.\n\t\tvar padding = h / w * 100;\n\t\tthis.svg.parentNode.style['padding-bottom'] = padding + \"%\";\n\t\tthis.svg.parentNode.style['vertical-align'] = \"middle\";\n\t\tthis.svg.parentNode.style['overflow'] = \"hidden\";\n\t}\n};\n\nSvg.prototype.setSize = function (w, h) {\n\tthis.svg.setAttribute('width', w);\n\tthis.svg.setAttribute('height', h);\n};\n\nSvg.prototype.setAttribute = function (attr, value) {\n\tthis.svg.setAttribute(attr, value);\n};\n\nSvg.prototype.setScale = function (scale) {\n\tif (scale !== 1) {\n\t\tthis.svg.style.transform = \"scale(\" + scale + \",\" + scale + \")\";\n\t\tthis.svg.style['-ms-transform'] = \"scale(\" + scale + \",\" + scale + \")\";\n\t\tthis.svg.style['-webkit-transform'] = \"scale(\" + scale + \",\" + scale + \")\";\n\t\tthis.svg.style['transform-origin'] = \"0 0\";\n\t\tthis.svg.style['-ms-transform-origin-x'] = \"0\";\n\t\tthis.svg.style['-ms-transform-origin-y'] = \"0\";\n\t\tthis.svg.style['-webkit-transform-origin-x'] = \"0\";\n\t\tthis.svg.style['-webkit-transform-origin-y'] = \"0\";\n\t} else {\n\t\tthis.svg.style.transform = \"\";\n\t\tthis.svg.style['-ms-transform'] = \"\";\n\t\tthis.svg.style['-webkit-transform'] = \"\";\n\t}\n};\n\nSvg.prototype.insertStyles = function (styles) {\n\tvar el = document.createElementNS(svgNS, \"style\");\n\tel.textContent = styles;\n\tthis.svg.insertBefore(el, this.svg.firstChild); // prepend is not available on older browsers.\n\t//\tthis.svg.prepend(el);\n};\n\nSvg.prototype.setParentStyles = function (attr) {\n\t// This is needed to get the size right when there is scaling involved.\n\tfor (var key in attr) {\n\t\tif (attr.hasOwnProperty(key)) {\n\t\t\tif (this.svg.parentNode)\n\t\t\t\tthis.svg.parentNode.style[key] = attr[key];\n\t\t}\n\t}\n\t// This is the last thing that gets called, so delete the temporary SVG if one was created\n\tif (this.dummySvg) {\n\t\tvar body = document.querySelector('body');\n\t\tbody.removeChild(this.dummySvg);\n\t\tthis.dummySvg = null;\n\t}\n\n};\n\nfunction constructHLine(x1, y1, x2) {\n\tvar len = x2 - x1;\n\treturn \"M \" + x1 + \" \" + y1 +\n\t\t\" l \" + len + ' ' + 0 +\n\t\t\" l \" + 0 + \" \" + 1 + \" \" +\n\t\t\" l \" + (-len) + \" \" + 0 + \" \" + \" z \";\n}\n\nfunction constructVLine(x1, y1, y2) {\n\tvar len = y2 - y1;\n\treturn \"M \" + x1 + \" \" + y1 +\n\t\t\" l \" + 0 + ' ' + len +\n\t\t\" l \" + 1 + \" \" + 0 + \" \" +\n\t\t\" l \" + 0 + \" \" + (-len) + \" \" + \" z \";\n}\n\nSvg.prototype.rect = function (attr) {\n\t// This uses path instead of rect so that it can be hollow and the color changes with \"fill\" instead of \"stroke\".\n\tvar lines = [];\n\tvar x1 = attr.x;\n\tvar y1 = attr.y;\n\tvar x2 = attr.x + attr.width;\n\tvar y2 = attr.y + attr.height;\n\tlines.push(constructHLine(x1, y1, x2));\n\tlines.push(constructHLine(x1, y2, x2));\n\tlines.push(constructVLine(x2, y1, y2));\n\tlines.push(constructVLine(x1, y2, y1));\n\n\treturn this.path({ path: lines.join(\" \"), stroke: \"none\", \"data-name\": attr[\"data-name\"] });\n};\n\nSvg.prototype.dottedLine = function (attr) {\n\tvar el = document.createElementNS(svgNS, 'line');\n\tel.setAttribute(\"x1\", attr.x1);\n\tel.setAttribute(\"x2\", attr.x2);\n\tel.setAttribute(\"y1\", attr.y1);\n\tel.setAttribute(\"y2\", attr.y2);\n\tel.setAttribute(\"stroke\", attr.stroke);\n\tel.setAttribute(\"stroke-dasharray\", \"5,5\");\n\tthis.svg.insertBefore(el, this.svg.firstChild);\n};\n\nSvg.prototype.rectBeneath = function (attr) {\n\tvar el = document.createElementNS(svgNS, 'rect');\n\tel.setAttribute(\"x\", attr.x);\n\tel.setAttribute(\"width\", attr.width);\n\tel.setAttribute(\"y\", attr.y);\n\tel.setAttribute(\"height\", attr.height);\n\tif (attr.stroke)\n\t\tel.setAttribute(\"stroke\", attr.stroke);\n\tif (attr['stroke-opacity'])\n\t\tel.setAttribute(\"stroke-opacity\", attr['stroke-opacity']);\n\tif (attr.fill)\n\t\tel.setAttribute(\"fill\", attr.fill);\n\tif (attr['fill-opacity'])\n\t\tel.setAttribute(\"fill-opacity\", attr['fill-opacity']);\n\tthis.svg.insertBefore(el, this.svg.firstChild);\n};\n\nSvg.prototype.text = function (text, attr, target) {\n\tvar el = document.createElementNS(svgNS, 'text');\n\tel.setAttribute(\"stroke\", \"none\");\n\tfor (var key in attr) {\n\t\tif (attr.hasOwnProperty(key)) {\n\t\t\tel.setAttribute(key, attr[key]);\n\t\t}\n\t}\n\tvar isFreeText = (attr[\"data-name\"] == \"free-text\");\n\tvar lines = (\"\" + text).split(\"\\n\");\n\tfor (var i = 0; i < lines.length; i++) {\n\t\tif (isFreeText && (lines[i] == \"\")){\n\t      // Don't draw empty lines\n\t      continue;\n\t    }\n\n\t\tvar line = document.createElementNS(svgNS, 'tspan');\n\t\tline.setAttribute(\"x\", attr.x ? attr.x : 0);\n\t\tif (i !== 0)\n\t\t\tline.setAttribute(\"dy\", \"1.2em\");\n\t\tif (lines[i].indexOf(\"\\x03\") !== -1) {\n\t\t\tvar parts = lines[i].split('\\x03')\n\t\t\tline.textContent = parts[0];\n\t\t\tif (parts[1]) {\n\t\t\t\tvar ts2 = document.createElementNS(svgNS, 'tspan');\n\t\t\t\tts2.setAttribute(\"dy\", \"-0.3em\");\n\t\t\t\tts2.setAttribute(\"style\", \"font-size:0.7em\");\n\t\t\t\tts2.textContent = parts[1];\n\t\t\t\tline.appendChild(ts2);\n\t\t\t}\n\t\t\tif (parts[2]) {\n\t\t\t\tvar dist = parts[1] ? \"0.4em\" : \"0.1em\";\n\t\t\t\tvar ts3 = document.createElementNS(svgNS, 'tspan');\n\t\t\t\tts3.setAttribute(\"dy\", dist);\n\t\t\t\tts3.setAttribute(\"style\", \"font-size:0.7em\");\n\t\t\t\tts3.textContent = parts[2];\n\t\t\t\tline.appendChild(ts3);\n\t\t\t}\n\t\t}     \n\t\telse \n    \t{\n\t      // MAE 9 May 2025 - For improved block text\n\t      if (isFreeText){\n\t        // Fixes issue where blank lines in text blocks didn't take up any vertical\n\t        if (lines[i].trim() == \"\"){\n\t          line.innerHTML = \"&nbsp;\";\n\t        }\n\t        else{\n\t          line.textContent = lines[i];\n\t        }\n\t      }\n\t      else{\n\t        line.textContent = lines[i];\n\t      }\n    \t}\t\n\t\tel.appendChild(line);\n\t}\n\tif (target)\n\t\ttarget.appendChild(el);\n\telse\n\t\tthis.append(el);\n\treturn el;\n};\n\nSvg.prototype.richTextLine = function (phrases, x, y, klass, anchor, target) {\n\tvar el = document.createElementNS(svgNS, 'text');\n\tel.setAttribute(\"stroke\", \"none\");\n\tel.setAttribute(\"class\", klass);\n\tel.setAttribute(\"x\", x);\n\tel.setAttribute(\"y\", y);\n\tel.setAttribute(\"text-anchor\", anchor);\n\tel.setAttribute(\"dominant-baseline\", \"middle\");\n\n\tfor (var i = 0; i < phrases.length; i++) {\n\t\tvar phrase = phrases[i]\n\t\tvar tspan = document.createElementNS(svgNS, 'tspan');\n\t\tvar attrs = Object.keys(phrase.attrs)\n\t\tfor (var j = 0; j < attrs.length; j++) {\n\t\t\tvar value = phrase.attrs[attrs[j]]\n\t\t\tif (value !== '')\n\t\t\t\ttspan.setAttribute(attrs[j], value)\n\t\t}\n\t\ttspan.textContent = phrase.content;\n\n\t\tel.appendChild(tspan);\n\t}\n\n\tif (target)\n\t\ttarget.appendChild(el);\n\telse\n\t\tthis.append(el);\n\treturn el;\n}\n\nSvg.prototype.guessWidth = function (text, attr) {\n\tvar svg = this.createDummySvg();\n\tvar el = this.text(text, attr, svg);\n\tvar size;\n\ttry {\n\t\tsize = el.getBBox();\n\t\tif (isNaN(size.height) || !size.height) // TODO-PER: I don't think this can happen unless there isn't a browser at all.\n\t\t\tsize = { width: attr['font-size'] / 2, height: attr['font-size'] + 2 }; // Just a wild guess.\n\t\telse\n\t\t\tsize = { width: size.width, height: size.height };\n\t} catch (ex) {\n\t\tsize = { width: attr['font-size'] / 2, height: attr['font-size'] + 2 }; // Just a wild guess.\n\t}\n\tsvg.removeChild(el);\n\treturn size;\n};\n\nSvg.prototype.createDummySvg = function () {\n\tif (!this.dummySvg) {\n\t\tthis.dummySvg = createSvg();\n\t\tvar styles = [\n\t\t\t\"display: block !important;\",\n\t\t\t\"height: 1px;\",\n\t\t\t\"width: 1px;\",\n\t\t\t\"position: absolute;\"\n\t\t];\n\t\tthis.dummySvg.setAttribute('style', styles.join(\"\"));\n\t\tvar body = document.querySelector('body');\n\t\tbody.appendChild(this.dummySvg);\n\t}\n\n\treturn this.dummySvg;\n};\n\nvar sizeCache = {};\n\nSvg.prototype.getTextSize = function (text, attr, el) {\n\tif (typeof text === 'number')\n\t\ttext = '' + text;\n\tif (!text || text.match(/^\\s+$/))\n\t\treturn { width: 0, height: 0 };\n\tvar key;\n\tif (text.length < 20) {\n\t\t// The short text tends to be repetitive and getBBox is really slow, so lets cache.\n\t\tkey = text + JSON.stringify(attr);\n\t\tif (sizeCache[key])\n\t\t\treturn sizeCache[key];\n\t}\n\tvar removeLater = !el;\n\tif (!el)\n\t\tel = this.text(text, attr);\n\tvar size;\n\ttry {\n\t\tsize = el.getBBox();\n\t\tif (isNaN(size.height) || !size.height)\n\t\t\tsize = this.guessWidth(text, attr);\n\t\telse\n\t\t\tsize = { width: size.width, height: size.height };\n\t} catch (ex) {\n\t\tsize = this.guessWidth(text, attr);\n\t}\n\tif (removeLater) {\n\t\tif (this.currentGroup.length > 0)\n\t\t\tthis.currentGroup[0].removeChild(el);\n\t\telse\n\t\t\tthis.svg.removeChild(el);\n\t}\n\tif (key)\n\t\tsizeCache[key] = size;\n\treturn size;\n};\n\nSvg.prototype.openGroup = function (options) {\n\toptions = options ? options : {};\n\tvar el = document.createElementNS(svgNS, \"g\");\n\tif (options.klass)\n\t\tel.setAttribute(\"class\", options.klass);\n\tif (options.fill)\n\t\tel.setAttribute(\"fill\", options.fill);\n\tif (options.stroke)\n\t\tel.setAttribute(\"stroke\", options.stroke);\n\tif (options['data-name'])\n\t\tel.setAttribute(\"data-name\", options['data-name']);\n\n\tif (options.prepend)\n\t\tthis.prepend(el);\n\telse\n\t\tthis.append(el);\n\tthis.currentGroup.unshift(el);\n\treturn el;\n};\n\nSvg.prototype.closeGroup = function () {\n\tvar g = this.currentGroup.shift();\n\tif (g && g.children.length === 0) {\n\t\t// If nothing was added to the group it is because all the elements were invisible. We don't need the group, then.\n\t\tg.parentElement.removeChild(g);\n\t\treturn null;\n\t}\n\treturn g;\n};\n\nSvg.prototype.path = function (attr) {\n\tvar el = document.createElementNS(svgNS, \"path\");\n\tfor (var key in attr) {\n\t\tif (attr.hasOwnProperty(key)) {\n\t\t\tif (key === 'path')\n\t\t\t\tel.setAttributeNS(null, 'd', attr.path);\n\t\t\telse if (key === 'klass')\n\t\t\t\tel.setAttributeNS(null, \"class\", attr[key]);\n\t\t\telse if (attr[key] !== undefined)\n\t\t\t\tel.setAttributeNS(null, key, attr[key]);\n\t\t}\n\t}\n\tthis.append(el);\n\treturn el;\n};\n\nSvg.prototype.pathToBack = function (attr) {\n\tvar el = document.createElementNS(svgNS, \"path\");\n\tfor (var key in attr) {\n\t\tif (attr.hasOwnProperty(key)) {\n\t\t\tif (key === 'path')\n\t\t\t\tel.setAttributeNS(null, 'd', attr.path);\n\t\t\telse if (key === 'klass')\n\t\t\t\tel.setAttributeNS(null, \"class\", attr[key]);\n\t\t\telse\n\t\t\t\tel.setAttributeNS(null, key, attr[key]);\n\t\t}\n\t}\n\tthis.prepend(el);\n\treturn el;\n};\n\nSvg.prototype.lineToBack = function (attr) {\n\tvar el = document.createElementNS(svgNS, 'line');\n\tvar keys = Object.keys(attr)\n\tfor (var i = 0; i < keys.length; i++)\n\t\tel.setAttribute(keys[i], attr[keys[i]]);\n\tthis.prepend(el);\n\treturn el;\n};\n\n\nSvg.prototype.append = function (el) {\n\tif (this.currentGroup.length > 0)\n\t\tthis.currentGroup[0].appendChild(el);\n\telse\n\t\tthis.svg.appendChild(el);\n};\n\nSvg.prototype.prepend = function (el) {\n\t// The entire group is prepended, so don't prepend the individual elements.\n\tif (this.currentGroup.length > 0)\n\t\tthis.currentGroup[0].appendChild(el);\n\telse\n\t\tthis.svg.insertBefore(el, this.svg.firstChild);\n};\n\nSvg.prototype.setAttributeOnElement = function (el, attr) {\n\tfor (var key in attr) {\n\t\tif (attr.hasOwnProperty(key)) {\n\t\t\tel.setAttributeNS(null, key, attr[key]);\n\t\t}\n\t}\n};\n\nSvg.prototype.moveElementToChild = function (parent, child) {\n\tparent.appendChild(child);\n};\n\nfunction createSvg() {\n\tvar svg = document.createElementNS(svgNS, \"svg\");\n\tsvg.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\n\tsvg.setAttribute('role', 'img');    // for accessibility\n\tsvg.setAttribute('fill', 'currentColor');    // for automatically picking up dark mode and high contrast\n\tsvg.setAttribute('stroke', 'currentColor');    // for automatically picking up dark mode and high contrast\n\treturn svg;\n}\n\n\nmodule.exports = Svg;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL3N2Zy5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CLHVFQUF1RTtBQUMzRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUJBQWlCLG9CQUFvQjtBQUNyQztBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLCtEQUErRDtBQUMzRTtBQUNBLFlBQVk7QUFDWixHQUFHO0FBQ0gsV0FBVywrREFBK0Q7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUIsZ0JBQWdCO0FBQ2hCLGVBQWU7QUFDZix1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsaUJBQWlCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQyw4Q0FBOEM7QUFDOUMsZ0RBQWdEO0FBQ2hEO0FBQ0E7OztBQUdBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3Blbi1hcnRpZmFjdHMvLi9ub2RlX21vZHVsZXMvYWJjanMvc3JjL3dyaXRlL3N2Zy5qcz9jNWQwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vICAgIGFiY192b2ljZV9lbGVtZW50LmpzOiBEZWZpbml0aW9uIG9mIHRoZSBWb2ljZUVsZW1lbnQgY2xhc3MuXG5cbi8qZ2xvYmFsIG1vZHVsZSAqL1xuXG52YXIgc3ZnTlMgPSBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI7XG5cbmZ1bmN0aW9uIFN2Zyh3cmFwcGVyKSB7XG5cdHRoaXMuc3ZnID0gY3JlYXRlU3ZnKCk7XG5cdHRoaXMuY3VycmVudEdyb3VwID0gW107XG5cdHdyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy5zdmcpO1xufVxuXG5TdmcucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuXHRpZiAodGhpcy5zdmcpIHtcblx0XHR2YXIgd3JhcHBlciA9IHRoaXMuc3ZnLnBhcmVudE5vZGU7XG5cdFx0dGhpcy5zdmcgPSBjcmVhdGVTdmcoKTtcblx0XHR0aGlzLmN1cnJlbnRHcm91cCA9IFtdO1xuXHRcdGlmICh3cmFwcGVyKSB7XG5cdFx0XHQvLyBUT0RPLVBFUjogSWYgdGhlIHdyYXBwZXIgaXMgbm90IHByZXNlbnQsIHRoZW4gdGhlIHVuZGVybHlpbmcgZGl2IHdhcyBwdWxsZWQgb3V0IGZyb20gdW5kZXIgdGhpcyBpbnN0YW5jZS4gSXQncyBwb3NzaWJsZSB0aGF0IGlzIHN0aWxsIHVzZWZ1bCAoZm9yIGNyZWF0aW5nIHRoZSBtdXNpYyBvZmYgcGFnZT8pXG5cdFx0XHR3cmFwcGVyLmlubmVySFRNTCA9IFwiXCI7XG5cdFx0XHR3cmFwcGVyLmFwcGVuZENoaWxkKHRoaXMuc3ZnKTtcblx0XHR9XG5cdH1cbn07XG5cblN2Zy5wcm90b3R5cGUuc2V0VGl0bGUgPSBmdW5jdGlvbiAodGl0bGUpIHtcblx0dmFyIHRpdGxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGl0bGVcIik7XG5cdHZhciB0aXRsZU5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aXRsZSk7XG5cdHRpdGxlRWwuYXBwZW5kQ2hpbGQodGl0bGVOb2RlKTtcblx0dGhpcy5zdmcuaW5zZXJ0QmVmb3JlKHRpdGxlRWwsIHRoaXMuc3ZnLmZpcnN0Q2hpbGQpO1xufTtcblxuU3ZnLnByb3RvdHlwZS5zZXRSZXNwb25zaXZlV2lkdGggPSBmdW5jdGlvbiAodywgaCkge1xuXHQvLyB0aGlzIHRlY2huaXF1ZSBpcyBmcm9tOiBodHRwOi8vdGhlbmV3Y29kZS5jb20vNzQ0L01ha2UtU1ZHLVJlc3BvbnNpdmUsIHRoeCB0byBodHRwczovL2dpdGh1Yi5jb20vaWFudHJlc21hblxuXHR0aGlzLnN2Zy5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIFwiMCAwIFwiICsgdyArIFwiIFwiICsgaCk7XG5cdHRoaXMuc3ZnLnNldEF0dHJpYnV0ZShcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJ4TWluWU1pbiBtZWV0XCIpO1xuXHR0aGlzLnN2Zy5yZW1vdmVBdHRyaWJ1dGUoXCJoZWlnaHRcIik7XG5cdHRoaXMuc3ZnLnJlbW92ZUF0dHJpYnV0ZShcIndpZHRoXCIpO1xuXHR0aGlzLnN2Zy5zdHlsZVsnZGlzcGxheSddID0gXCJpbmxpbmUtYmxvY2tcIjtcblx0dGhpcy5zdmcuc3R5bGVbJ3Bvc2l0aW9uJ10gPSBcImFic29sdXRlXCI7XG5cdHRoaXMuc3ZnLnN0eWxlWyd0b3AnXSA9IFwiMFwiO1xuXHR0aGlzLnN2Zy5zdHlsZVsnbGVmdCddID0gXCIwXCI7XG5cblx0aWYgKHRoaXMuc3ZnLnBhcmVudE5vZGUpIHtcblx0XHR2YXIgY2xzID0gdGhpcy5zdmcucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcblx0XHRpZiAoIWNscylcblx0XHRcdHRoaXMuc3ZnLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJhYmNqcy1jb250YWluZXJcIik7XG5cdFx0ZWxzZSBpZiAoY2xzLmluZGV4T2YoXCJhYmNqcy1jb250YWluZXJcIikgPCAwKVxuXHRcdFx0dGhpcy5zdmcucGFyZW50Tm9kZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBjbHMgKyBcIiBhYmNqcy1jb250YWluZXJcIik7XG5cdFx0dGhpcy5zdmcucGFyZW50Tm9kZS5zdHlsZVsnZGlzcGxheSddID0gXCJpbmxpbmUtYmxvY2tcIjtcblx0XHR0aGlzLnN2Zy5wYXJlbnROb2RlLnN0eWxlWydwb3NpdGlvbiddID0gXCJyZWxhdGl2ZVwiO1xuXHRcdHRoaXMuc3ZnLnBhcmVudE5vZGUuc3R5bGVbJ3dpZHRoJ10gPSBcIjEwMCVcIjtcblx0XHQvLyBQRVI6IEkgY2hhbmdlZCB0aGUgcGFkZGluZyBmcm9tIDEwMCUgdG8gdGhpcyB0aHJvdWdoIHRyaWFsIGFuZCBlcnJvci5cblx0XHQvLyBUaGUgZXhhbXBsZSB3YXMgdXNpbmcgYSBzcXVhcmUgaW1hZ2UsIGJ1dCB0aGlzIG11c2ljIG1pZ2h0IGJlIGVpdGhlciB3aWRlciBvciB0YWxsZXIuXG5cdFx0dmFyIHBhZGRpbmcgPSBoIC8gdyAqIDEwMDtcblx0XHR0aGlzLnN2Zy5wYXJlbnROb2RlLnN0eWxlWydwYWRkaW5nLWJvdHRvbSddID0gcGFkZGluZyArIFwiJVwiO1xuXHRcdHRoaXMuc3ZnLnBhcmVudE5vZGUuc3R5bGVbJ3ZlcnRpY2FsLWFsaWduJ10gPSBcIm1pZGRsZVwiO1xuXHRcdHRoaXMuc3ZnLnBhcmVudE5vZGUuc3R5bGVbJ292ZXJmbG93J10gPSBcImhpZGRlblwiO1xuXHR9XG59O1xuXG5TdmcucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbiAodywgaCkge1xuXHR0aGlzLnN2Zy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgdyk7XG5cdHRoaXMuc3ZnLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgaCk7XG59O1xuXG5TdmcucHJvdG90eXBlLnNldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChhdHRyLCB2YWx1ZSkge1xuXHR0aGlzLnN2Zy5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUpO1xufTtcblxuU3ZnLnByb3RvdHlwZS5zZXRTY2FsZSA9IGZ1bmN0aW9uIChzY2FsZSkge1xuXHRpZiAoc2NhbGUgIT09IDEpIHtcblx0XHR0aGlzLnN2Zy5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlKFwiICsgc2NhbGUgKyBcIixcIiArIHNjYWxlICsgXCIpXCI7XG5cdFx0dGhpcy5zdmcuc3R5bGVbJy1tcy10cmFuc2Zvcm0nXSA9IFwic2NhbGUoXCIgKyBzY2FsZSArIFwiLFwiICsgc2NhbGUgKyBcIilcIjtcblx0XHR0aGlzLnN2Zy5zdHlsZVsnLXdlYmtpdC10cmFuc2Zvcm0nXSA9IFwic2NhbGUoXCIgKyBzY2FsZSArIFwiLFwiICsgc2NhbGUgKyBcIilcIjtcblx0XHR0aGlzLnN2Zy5zdHlsZVsndHJhbnNmb3JtLW9yaWdpbiddID0gXCIwIDBcIjtcblx0XHR0aGlzLnN2Zy5zdHlsZVsnLW1zLXRyYW5zZm9ybS1vcmlnaW4teCddID0gXCIwXCI7XG5cdFx0dGhpcy5zdmcuc3R5bGVbJy1tcy10cmFuc2Zvcm0tb3JpZ2luLXknXSA9IFwiMFwiO1xuXHRcdHRoaXMuc3ZnLnN0eWxlWyctd2Via2l0LXRyYW5zZm9ybS1vcmlnaW4teCddID0gXCIwXCI7XG5cdFx0dGhpcy5zdmcuc3R5bGVbJy13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbi15J10gPSBcIjBcIjtcblx0fSBlbHNlIHtcblx0XHR0aGlzLnN2Zy5zdHlsZS50cmFuc2Zvcm0gPSBcIlwiO1xuXHRcdHRoaXMuc3ZnLnN0eWxlWyctbXMtdHJhbnNmb3JtJ10gPSBcIlwiO1xuXHRcdHRoaXMuc3ZnLnN0eWxlWyctd2Via2l0LXRyYW5zZm9ybSddID0gXCJcIjtcblx0fVxufTtcblxuU3ZnLnByb3RvdHlwZS5pbnNlcnRTdHlsZXMgPSBmdW5jdGlvbiAoc3R5bGVzKSB7XG5cdHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzdmdOUywgXCJzdHlsZVwiKTtcblx0ZWwudGV4dENvbnRlbnQgPSBzdHlsZXM7XG5cdHRoaXMuc3ZnLmluc2VydEJlZm9yZShlbCwgdGhpcy5zdmcuZmlyc3RDaGlsZCk7IC8vIHByZXBlbmQgaXMgbm90IGF2YWlsYWJsZSBvbiBvbGRlciBicm93c2Vycy5cblx0Ly9cdHRoaXMuc3ZnLnByZXBlbmQoZWwpO1xufTtcblxuU3ZnLnByb3RvdHlwZS5zZXRQYXJlbnRTdHlsZXMgPSBmdW5jdGlvbiAoYXR0cikge1xuXHQvLyBUaGlzIGlzIG5lZWRlZCB0byBnZXQgdGhlIHNpemUgcmlnaHQgd2hlbiB0aGVyZSBpcyBzY2FsaW5nIGludm9sdmVkLlxuXHRmb3IgKHZhciBrZXkgaW4gYXR0cikge1xuXHRcdGlmIChhdHRyLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0XHRcdGlmICh0aGlzLnN2Zy5wYXJlbnROb2RlKVxuXHRcdFx0XHR0aGlzLnN2Zy5wYXJlbnROb2RlLnN0eWxlW2tleV0gPSBhdHRyW2tleV07XG5cdFx0fVxuXHR9XG5cdC8vIFRoaXMgaXMgdGhlIGxhc3QgdGhpbmcgdGhhdCBnZXRzIGNhbGxlZCwgc28gZGVsZXRlIHRoZSB0ZW1wb3JhcnkgU1ZHIGlmIG9uZSB3YXMgY3JlYXRlZFxuXHRpZiAodGhpcy5kdW1teVN2Zykge1xuXHRcdHZhciBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuXHRcdGJvZHkucmVtb3ZlQ2hpbGQodGhpcy5kdW1teVN2Zyk7XG5cdFx0dGhpcy5kdW1teVN2ZyA9IG51bGw7XG5cdH1cblxufTtcblxuZnVuY3Rpb24gY29uc3RydWN0SExpbmUoeDEsIHkxLCB4Mikge1xuXHR2YXIgbGVuID0geDIgLSB4MTtcblx0cmV0dXJuIFwiTSBcIiArIHgxICsgXCIgXCIgKyB5MSArXG5cdFx0XCIgbCBcIiArIGxlbiArICcgJyArIDAgK1xuXHRcdFwiIGwgXCIgKyAwICsgXCIgXCIgKyAxICsgXCIgXCIgK1xuXHRcdFwiIGwgXCIgKyAoLWxlbikgKyBcIiBcIiArIDAgKyBcIiBcIiArIFwiIHogXCI7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFZMaW5lKHgxLCB5MSwgeTIpIHtcblx0dmFyIGxlbiA9IHkyIC0geTE7XG5cdHJldHVybiBcIk0gXCIgKyB4MSArIFwiIFwiICsgeTEgK1xuXHRcdFwiIGwgXCIgKyAwICsgJyAnICsgbGVuICtcblx0XHRcIiBsIFwiICsgMSArIFwiIFwiICsgMCArIFwiIFwiICtcblx0XHRcIiBsIFwiICsgMCArIFwiIFwiICsgKC1sZW4pICsgXCIgXCIgKyBcIiB6IFwiO1xufVxuXG5TdmcucHJvdG90eXBlLnJlY3QgPSBmdW5jdGlvbiAoYXR0cikge1xuXHQvLyBUaGlzIHVzZXMgcGF0aCBpbnN0ZWFkIG9mIHJlY3Qgc28gdGhhdCBpdCBjYW4gYmUgaG9sbG93IGFuZCB0aGUgY29sb3IgY2hhbmdlcyB3aXRoIFwiZmlsbFwiIGluc3RlYWQgb2YgXCJzdHJva2VcIi5cblx0dmFyIGxpbmVzID0gW107XG5cdHZhciB4MSA9IGF0dHIueDtcblx0dmFyIHkxID0gYXR0ci55O1xuXHR2YXIgeDIgPSBhdHRyLnggKyBhdHRyLndpZHRoO1xuXHR2YXIgeTIgPSBhdHRyLnkgKyBhdHRyLmhlaWdodDtcblx0bGluZXMucHVzaChjb25zdHJ1Y3RITGluZSh4MSwgeTEsIHgyKSk7XG5cdGxpbmVzLnB1c2goY29uc3RydWN0SExpbmUoeDEsIHkyLCB4MikpO1xuXHRsaW5lcy5wdXNoKGNvbnN0cnVjdFZMaW5lKHgyLCB5MSwgeTIpKTtcblx0bGluZXMucHVzaChjb25zdHJ1Y3RWTGluZSh4MSwgeTIsIHkxKSk7XG5cblx0cmV0dXJuIHRoaXMucGF0aCh7IHBhdGg6IGxpbmVzLmpvaW4oXCIgXCIpLCBzdHJva2U6IFwibm9uZVwiLCBcImRhdGEtbmFtZVwiOiBhdHRyW1wiZGF0YS1uYW1lXCJdIH0pO1xufTtcblxuU3ZnLnByb3RvdHlwZS5kb3R0ZWRMaW5lID0gZnVuY3Rpb24gKGF0dHIpIHtcblx0dmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHN2Z05TLCAnbGluZScpO1xuXHRlbC5zZXRBdHRyaWJ1dGUoXCJ4MVwiLCBhdHRyLngxKTtcblx0ZWwuc2V0QXR0cmlidXRlKFwieDJcIiwgYXR0ci54Mik7XG5cdGVsLnNldEF0dHJpYnV0ZShcInkxXCIsIGF0dHIueTEpO1xuXHRlbC5zZXRBdHRyaWJ1dGUoXCJ5MlwiLCBhdHRyLnkyKTtcblx0ZWwuc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsIGF0dHIuc3Ryb2tlKTtcblx0ZWwuc2V0QXR0cmlidXRlKFwic3Ryb2tlLWRhc2hhcnJheVwiLCBcIjUsNVwiKTtcblx0dGhpcy5zdmcuaW5zZXJ0QmVmb3JlKGVsLCB0aGlzLnN2Zy5maXJzdENoaWxkKTtcbn07XG5cblN2Zy5wcm90b3R5cGUucmVjdEJlbmVhdGggPSBmdW5jdGlvbiAoYXR0cikge1xuXHR2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoc3ZnTlMsICdyZWN0Jyk7XG5cdGVsLnNldEF0dHJpYnV0ZShcInhcIiwgYXR0ci54KTtcblx0ZWwuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgYXR0ci53aWR0aCk7XG5cdGVsLnNldEF0dHJpYnV0ZShcInlcIiwgYXR0ci55KTtcblx0ZWwuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIGF0dHIuaGVpZ2h0KTtcblx0aWYgKGF0dHIuc3Ryb2tlKVxuXHRcdGVsLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBhdHRyLnN0cm9rZSk7XG5cdGlmIChhdHRyWydzdHJva2Utb3BhY2l0eSddKVxuXHRcdGVsLnNldEF0dHJpYnV0ZShcInN0cm9rZS1vcGFjaXR5XCIsIGF0dHJbJ3N0cm9rZS1vcGFjaXR5J10pO1xuXHRpZiAoYXR0ci5maWxsKVxuXHRcdGVsLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgYXR0ci5maWxsKTtcblx0aWYgKGF0dHJbJ2ZpbGwtb3BhY2l0eSddKVxuXHRcdGVsLnNldEF0dHJpYnV0ZShcImZpbGwtb3BhY2l0eVwiLCBhdHRyWydmaWxsLW9wYWNpdHknXSk7XG5cdHRoaXMuc3ZnLmluc2VydEJlZm9yZShlbCwgdGhpcy5zdmcuZmlyc3RDaGlsZCk7XG59O1xuXG5TdmcucHJvdG90eXBlLnRleHQgPSBmdW5jdGlvbiAodGV4dCwgYXR0ciwgdGFyZ2V0KSB7XG5cdHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzdmdOUywgJ3RleHQnKTtcblx0ZWwuc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsIFwibm9uZVwiKTtcblx0Zm9yICh2YXIga2V5IGluIGF0dHIpIHtcblx0XHRpZiAoYXR0ci5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRlbC5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyW2tleV0pO1xuXHRcdH1cblx0fVxuXHR2YXIgaXNGcmVlVGV4dCA9IChhdHRyW1wiZGF0YS1uYW1lXCJdID09IFwiZnJlZS10ZXh0XCIpO1xuXHR2YXIgbGluZXMgPSAoXCJcIiArIHRleHQpLnNwbGl0KFwiXFxuXCIpO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0aWYgKGlzRnJlZVRleHQgJiYgKGxpbmVzW2ldID09IFwiXCIpKXtcblx0ICAgICAgLy8gRG9uJ3QgZHJhdyBlbXB0eSBsaW5lc1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblxuXHRcdHZhciBsaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHN2Z05TLCAndHNwYW4nKTtcblx0XHRsaW5lLnNldEF0dHJpYnV0ZShcInhcIiwgYXR0ci54ID8gYXR0ci54IDogMCk7XG5cdFx0aWYgKGkgIT09IDApXG5cdFx0XHRsaW5lLnNldEF0dHJpYnV0ZShcImR5XCIsIFwiMS4yZW1cIik7XG5cdFx0aWYgKGxpbmVzW2ldLmluZGV4T2YoXCJcXHgwM1wiKSAhPT0gLTEpIHtcblx0XHRcdHZhciBwYXJ0cyA9IGxpbmVzW2ldLnNwbGl0KCdcXHgwMycpXG5cdFx0XHRsaW5lLnRleHRDb250ZW50ID0gcGFydHNbMF07XG5cdFx0XHRpZiAocGFydHNbMV0pIHtcblx0XHRcdFx0dmFyIHRzMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzdmdOUywgJ3RzcGFuJyk7XG5cdFx0XHRcdHRzMi5zZXRBdHRyaWJ1dGUoXCJkeVwiLCBcIi0wLjNlbVwiKTtcblx0XHRcdFx0dHMyLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiZm9udC1zaXplOjAuN2VtXCIpO1xuXHRcdFx0XHR0czIudGV4dENvbnRlbnQgPSBwYXJ0c1sxXTtcblx0XHRcdFx0bGluZS5hcHBlbmRDaGlsZCh0czIpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHBhcnRzWzJdKSB7XG5cdFx0XHRcdHZhciBkaXN0ID0gcGFydHNbMV0gPyBcIjAuNGVtXCIgOiBcIjAuMWVtXCI7XG5cdFx0XHRcdHZhciB0czMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoc3ZnTlMsICd0c3BhbicpO1xuXHRcdFx0XHR0czMuc2V0QXR0cmlidXRlKFwiZHlcIiwgZGlzdCk7XG5cdFx0XHRcdHRzMy5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImZvbnQtc2l6ZTowLjdlbVwiKTtcblx0XHRcdFx0dHMzLnRleHRDb250ZW50ID0gcGFydHNbMl07XG5cdFx0XHRcdGxpbmUuYXBwZW5kQ2hpbGQodHMzKTtcblx0XHRcdH1cblx0XHR9ICAgICBcblx0XHRlbHNlIFxuICAgIFx0e1xuXHQgICAgICAvLyBNQUUgOSBNYXkgMjAyNSAtIEZvciBpbXByb3ZlZCBibG9jayB0ZXh0XG5cdCAgICAgIGlmIChpc0ZyZWVUZXh0KXtcblx0ICAgICAgICAvLyBGaXhlcyBpc3N1ZSB3aGVyZSBibGFuayBsaW5lcyBpbiB0ZXh0IGJsb2NrcyBkaWRuJ3QgdGFrZSB1cCBhbnkgdmVydGljYWxcblx0ICAgICAgICBpZiAobGluZXNbaV0udHJpbSgpID09IFwiXCIpe1xuXHQgICAgICAgICAgbGluZS5pbm5lckhUTUwgPSBcIiZuYnNwO1wiO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNle1xuXHQgICAgICAgICAgbGluZS50ZXh0Q29udGVudCA9IGxpbmVzW2ldO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBlbHNle1xuXHQgICAgICAgIGxpbmUudGV4dENvbnRlbnQgPSBsaW5lc1tpXTtcblx0ICAgICAgfVxuICAgIFx0fVx0XG5cdFx0ZWwuYXBwZW5kQ2hpbGQobGluZSk7XG5cdH1cblx0aWYgKHRhcmdldClcblx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuXHRlbHNlXG5cdFx0dGhpcy5hcHBlbmQoZWwpO1xuXHRyZXR1cm4gZWw7XG59O1xuXG5TdmcucHJvdG90eXBlLnJpY2hUZXh0TGluZSA9IGZ1bmN0aW9uIChwaHJhc2VzLCB4LCB5LCBrbGFzcywgYW5jaG9yLCB0YXJnZXQpIHtcblx0dmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHN2Z05TLCAndGV4dCcpO1xuXHRlbC5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIiwgXCJub25lXCIpO1xuXHRlbC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBrbGFzcyk7XG5cdGVsLnNldEF0dHJpYnV0ZShcInhcIiwgeCk7XG5cdGVsLnNldEF0dHJpYnV0ZShcInlcIiwgeSk7XG5cdGVsLnNldEF0dHJpYnV0ZShcInRleHQtYW5jaG9yXCIsIGFuY2hvcik7XG5cdGVsLnNldEF0dHJpYnV0ZShcImRvbWluYW50LWJhc2VsaW5lXCIsIFwibWlkZGxlXCIpO1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgcGhyYXNlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBwaHJhc2UgPSBwaHJhc2VzW2ldXG5cdFx0dmFyIHRzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHN2Z05TLCAndHNwYW4nKTtcblx0XHR2YXIgYXR0cnMgPSBPYmplY3Qua2V5cyhwaHJhc2UuYXR0cnMpXG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBhdHRycy5sZW5ndGg7IGorKykge1xuXHRcdFx0dmFyIHZhbHVlID0gcGhyYXNlLmF0dHJzW2F0dHJzW2pdXVxuXHRcdFx0aWYgKHZhbHVlICE9PSAnJylcblx0XHRcdFx0dHNwYW4uc2V0QXR0cmlidXRlKGF0dHJzW2pdLCB2YWx1ZSlcblx0XHR9XG5cdFx0dHNwYW4udGV4dENvbnRlbnQgPSBwaHJhc2UuY29udGVudDtcblxuXHRcdGVsLmFwcGVuZENoaWxkKHRzcGFuKTtcblx0fVxuXG5cdGlmICh0YXJnZXQpXG5cdFx0dGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcblx0ZWxzZVxuXHRcdHRoaXMuYXBwZW5kKGVsKTtcblx0cmV0dXJuIGVsO1xufVxuXG5TdmcucHJvdG90eXBlLmd1ZXNzV2lkdGggPSBmdW5jdGlvbiAodGV4dCwgYXR0cikge1xuXHR2YXIgc3ZnID0gdGhpcy5jcmVhdGVEdW1teVN2ZygpO1xuXHR2YXIgZWwgPSB0aGlzLnRleHQodGV4dCwgYXR0ciwgc3ZnKTtcblx0dmFyIHNpemU7XG5cdHRyeSB7XG5cdFx0c2l6ZSA9IGVsLmdldEJCb3goKTtcblx0XHRpZiAoaXNOYU4oc2l6ZS5oZWlnaHQpIHx8ICFzaXplLmhlaWdodCkgLy8gVE9ETy1QRVI6IEkgZG9uJ3QgdGhpbmsgdGhpcyBjYW4gaGFwcGVuIHVubGVzcyB0aGVyZSBpc24ndCBhIGJyb3dzZXIgYXQgYWxsLlxuXHRcdFx0c2l6ZSA9IHsgd2lkdGg6IGF0dHJbJ2ZvbnQtc2l6ZSddIC8gMiwgaGVpZ2h0OiBhdHRyWydmb250LXNpemUnXSArIDIgfTsgLy8gSnVzdCBhIHdpbGQgZ3Vlc3MuXG5cdFx0ZWxzZVxuXHRcdFx0c2l6ZSA9IHsgd2lkdGg6IHNpemUud2lkdGgsIGhlaWdodDogc2l6ZS5oZWlnaHQgfTtcblx0fSBjYXRjaCAoZXgpIHtcblx0XHRzaXplID0geyB3aWR0aDogYXR0clsnZm9udC1zaXplJ10gLyAyLCBoZWlnaHQ6IGF0dHJbJ2ZvbnQtc2l6ZSddICsgMiB9OyAvLyBKdXN0IGEgd2lsZCBndWVzcy5cblx0fVxuXHRzdmcucmVtb3ZlQ2hpbGQoZWwpO1xuXHRyZXR1cm4gc2l6ZTtcbn07XG5cblN2Zy5wcm90b3R5cGUuY3JlYXRlRHVtbXlTdmcgPSBmdW5jdGlvbiAoKSB7XG5cdGlmICghdGhpcy5kdW1teVN2Zykge1xuXHRcdHRoaXMuZHVtbXlTdmcgPSBjcmVhdGVTdmcoKTtcblx0XHR2YXIgc3R5bGVzID0gW1xuXHRcdFx0XCJkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50O1wiLFxuXHRcdFx0XCJoZWlnaHQ6IDFweDtcIixcblx0XHRcdFwid2lkdGg6IDFweDtcIixcblx0XHRcdFwicG9zaXRpb246IGFic29sdXRlO1wiXG5cdFx0XTtcblx0XHR0aGlzLmR1bW15U3ZnLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBzdHlsZXMuam9pbihcIlwiKSk7XG5cdFx0dmFyIGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5cdFx0Ym9keS5hcHBlbmRDaGlsZCh0aGlzLmR1bW15U3ZnKTtcblx0fVxuXG5cdHJldHVybiB0aGlzLmR1bW15U3ZnO1xufTtcblxudmFyIHNpemVDYWNoZSA9IHt9O1xuXG5TdmcucHJvdG90eXBlLmdldFRleHRTaXplID0gZnVuY3Rpb24gKHRleHQsIGF0dHIsIGVsKSB7XG5cdGlmICh0eXBlb2YgdGV4dCA9PT0gJ251bWJlcicpXG5cdFx0dGV4dCA9ICcnICsgdGV4dDtcblx0aWYgKCF0ZXh0IHx8IHRleHQubWF0Y2goL15cXHMrJC8pKVxuXHRcdHJldHVybiB7IHdpZHRoOiAwLCBoZWlnaHQ6IDAgfTtcblx0dmFyIGtleTtcblx0aWYgKHRleHQubGVuZ3RoIDwgMjApIHtcblx0XHQvLyBUaGUgc2hvcnQgdGV4dCB0ZW5kcyB0byBiZSByZXBldGl0aXZlIGFuZCBnZXRCQm94IGlzIHJlYWxseSBzbG93LCBzbyBsZXRzIGNhY2hlLlxuXHRcdGtleSA9IHRleHQgKyBKU09OLnN0cmluZ2lmeShhdHRyKTtcblx0XHRpZiAoc2l6ZUNhY2hlW2tleV0pXG5cdFx0XHRyZXR1cm4gc2l6ZUNhY2hlW2tleV07XG5cdH1cblx0dmFyIHJlbW92ZUxhdGVyID0gIWVsO1xuXHRpZiAoIWVsKVxuXHRcdGVsID0gdGhpcy50ZXh0KHRleHQsIGF0dHIpO1xuXHR2YXIgc2l6ZTtcblx0dHJ5IHtcblx0XHRzaXplID0gZWwuZ2V0QkJveCgpO1xuXHRcdGlmIChpc05hTihzaXplLmhlaWdodCkgfHwgIXNpemUuaGVpZ2h0KVxuXHRcdFx0c2l6ZSA9IHRoaXMuZ3Vlc3NXaWR0aCh0ZXh0LCBhdHRyKTtcblx0XHRlbHNlXG5cdFx0XHRzaXplID0geyB3aWR0aDogc2l6ZS53aWR0aCwgaGVpZ2h0OiBzaXplLmhlaWdodCB9O1xuXHR9IGNhdGNoIChleCkge1xuXHRcdHNpemUgPSB0aGlzLmd1ZXNzV2lkdGgodGV4dCwgYXR0cik7XG5cdH1cblx0aWYgKHJlbW92ZUxhdGVyKSB7XG5cdFx0aWYgKHRoaXMuY3VycmVudEdyb3VwLmxlbmd0aCA+IDApXG5cdFx0XHR0aGlzLmN1cnJlbnRHcm91cFswXS5yZW1vdmVDaGlsZChlbCk7XG5cdFx0ZWxzZVxuXHRcdFx0dGhpcy5zdmcucmVtb3ZlQ2hpbGQoZWwpO1xuXHR9XG5cdGlmIChrZXkpXG5cdFx0c2l6ZUNhY2hlW2tleV0gPSBzaXplO1xuXHRyZXR1cm4gc2l6ZTtcbn07XG5cblN2Zy5wcm90b3R5cGUub3Blbkdyb3VwID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcblx0b3B0aW9ucyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XG5cdHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzdmdOUywgXCJnXCIpO1xuXHRpZiAob3B0aW9ucy5rbGFzcylcblx0XHRlbC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBvcHRpb25zLmtsYXNzKTtcblx0aWYgKG9wdGlvbnMuZmlsbClcblx0XHRlbC5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIG9wdGlvbnMuZmlsbCk7XG5cdGlmIChvcHRpb25zLnN0cm9rZSlcblx0XHRlbC5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIiwgb3B0aW9ucy5zdHJva2UpO1xuXHRpZiAob3B0aW9uc1snZGF0YS1uYW1lJ10pXG5cdFx0ZWwuc2V0QXR0cmlidXRlKFwiZGF0YS1uYW1lXCIsIG9wdGlvbnNbJ2RhdGEtbmFtZSddKTtcblxuXHRpZiAob3B0aW9ucy5wcmVwZW5kKVxuXHRcdHRoaXMucHJlcGVuZChlbCk7XG5cdGVsc2Vcblx0XHR0aGlzLmFwcGVuZChlbCk7XG5cdHRoaXMuY3VycmVudEdyb3VwLnVuc2hpZnQoZWwpO1xuXHRyZXR1cm4gZWw7XG59O1xuXG5TdmcucHJvdG90eXBlLmNsb3NlR3JvdXAgPSBmdW5jdGlvbiAoKSB7XG5cdHZhciBnID0gdGhpcy5jdXJyZW50R3JvdXAuc2hpZnQoKTtcblx0aWYgKGcgJiYgZy5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcblx0XHQvLyBJZiBub3RoaW5nIHdhcyBhZGRlZCB0byB0aGUgZ3JvdXAgaXQgaXMgYmVjYXVzZSBhbGwgdGhlIGVsZW1lbnRzIHdlcmUgaW52aXNpYmxlLiBXZSBkb24ndCBuZWVkIHRoZSBncm91cCwgdGhlbi5cblx0XHRnLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoZyk7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblx0cmV0dXJuIGc7XG59O1xuXG5TdmcucHJvdG90eXBlLnBhdGggPSBmdW5jdGlvbiAoYXR0cikge1xuXHR2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoc3ZnTlMsIFwicGF0aFwiKTtcblx0Zm9yICh2YXIga2V5IGluIGF0dHIpIHtcblx0XHRpZiAoYXR0ci5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRpZiAoa2V5ID09PSAncGF0aCcpXG5cdFx0XHRcdGVsLnNldEF0dHJpYnV0ZU5TKG51bGwsICdkJywgYXR0ci5wYXRoKTtcblx0XHRcdGVsc2UgaWYgKGtleSA9PT0gJ2tsYXNzJylcblx0XHRcdFx0ZWwuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJjbGFzc1wiLCBhdHRyW2tleV0pO1xuXHRcdFx0ZWxzZSBpZiAoYXR0cltrZXldICE9PSB1bmRlZmluZWQpXG5cdFx0XHRcdGVsLnNldEF0dHJpYnV0ZU5TKG51bGwsIGtleSwgYXR0cltrZXldKTtcblx0XHR9XG5cdH1cblx0dGhpcy5hcHBlbmQoZWwpO1xuXHRyZXR1cm4gZWw7XG59O1xuXG5TdmcucHJvdG90eXBlLnBhdGhUb0JhY2sgPSBmdW5jdGlvbiAoYXR0cikge1xuXHR2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoc3ZnTlMsIFwicGF0aFwiKTtcblx0Zm9yICh2YXIga2V5IGluIGF0dHIpIHtcblx0XHRpZiAoYXR0ci5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRpZiAoa2V5ID09PSAncGF0aCcpXG5cdFx0XHRcdGVsLnNldEF0dHJpYnV0ZU5TKG51bGwsICdkJywgYXR0ci5wYXRoKTtcblx0XHRcdGVsc2UgaWYgKGtleSA9PT0gJ2tsYXNzJylcblx0XHRcdFx0ZWwuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJjbGFzc1wiLCBhdHRyW2tleV0pO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHRlbC5zZXRBdHRyaWJ1dGVOUyhudWxsLCBrZXksIGF0dHJba2V5XSk7XG5cdFx0fVxuXHR9XG5cdHRoaXMucHJlcGVuZChlbCk7XG5cdHJldHVybiBlbDtcbn07XG5cblN2Zy5wcm90b3R5cGUubGluZVRvQmFjayA9IGZ1bmN0aW9uIChhdHRyKSB7XG5cdHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzdmdOUywgJ2xpbmUnKTtcblx0dmFyIGtleXMgPSBPYmplY3Qua2V5cyhhdHRyKVxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspXG5cdFx0ZWwuc2V0QXR0cmlidXRlKGtleXNbaV0sIGF0dHJba2V5c1tpXV0pO1xuXHR0aGlzLnByZXBlbmQoZWwpO1xuXHRyZXR1cm4gZWw7XG59O1xuXG5cblN2Zy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24gKGVsKSB7XG5cdGlmICh0aGlzLmN1cnJlbnRHcm91cC5sZW5ndGggPiAwKVxuXHRcdHRoaXMuY3VycmVudEdyb3VwWzBdLmFwcGVuZENoaWxkKGVsKTtcblx0ZWxzZVxuXHRcdHRoaXMuc3ZnLmFwcGVuZENoaWxkKGVsKTtcbn07XG5cblN2Zy5wcm90b3R5cGUucHJlcGVuZCA9IGZ1bmN0aW9uIChlbCkge1xuXHQvLyBUaGUgZW50aXJlIGdyb3VwIGlzIHByZXBlbmRlZCwgc28gZG9uJ3QgcHJlcGVuZCB0aGUgaW5kaXZpZHVhbCBlbGVtZW50cy5cblx0aWYgKHRoaXMuY3VycmVudEdyb3VwLmxlbmd0aCA+IDApXG5cdFx0dGhpcy5jdXJyZW50R3JvdXBbMF0uYXBwZW5kQ2hpbGQoZWwpO1xuXHRlbHNlXG5cdFx0dGhpcy5zdmcuaW5zZXJ0QmVmb3JlKGVsLCB0aGlzLnN2Zy5maXJzdENoaWxkKTtcbn07XG5cblN2Zy5wcm90b3R5cGUuc2V0QXR0cmlidXRlT25FbGVtZW50ID0gZnVuY3Rpb24gKGVsLCBhdHRyKSB7XG5cdGZvciAodmFyIGtleSBpbiBhdHRyKSB7XG5cdFx0aWYgKGF0dHIuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0ZWwuc2V0QXR0cmlidXRlTlMobnVsbCwga2V5LCBhdHRyW2tleV0pO1xuXHRcdH1cblx0fVxufTtcblxuU3ZnLnByb3RvdHlwZS5tb3ZlRWxlbWVudFRvQ2hpbGQgPSBmdW5jdGlvbiAocGFyZW50LCBjaGlsZCkge1xuXHRwYXJlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlU3ZnKCkge1xuXHR2YXIgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHN2Z05TLCBcInN2Z1wiKTtcblx0c3ZnLnNldEF0dHJpYnV0ZU5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC94bWxucy9cIiwgXCJ4bWxuczp4bGlua1wiLCBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIik7XG5cdHN2Zy5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnaW1nJyk7ICAgIC8vIGZvciBhY2Nlc3NpYmlsaXR5XG5cdHN2Zy5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnY3VycmVudENvbG9yJyk7ICAgIC8vIGZvciBhdXRvbWF0aWNhbGx5IHBpY2tpbmcgdXAgZGFyayBtb2RlIGFuZCBoaWdoIGNvbnRyYXN0XG5cdHN2Zy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICdjdXJyZW50Q29sb3InKTsgICAgLy8gZm9yIGF1dG9tYXRpY2FsbHkgcGlja2luZyB1cCBkYXJrIG1vZGUgYW5kIGhpZ2ggY29udHJhc3Rcblx0cmV0dXJuIHN2Zztcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IFN2ZztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/src/write/svg.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/abcjs/version.js":
/*!***************************************!*\
  !*** ./node_modules/abcjs/version.js ***!
  \***************************************/
/***/ ((module) => {

eval("var version = '6.5.2';\n\nmodule.exports = version;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWJjanMvdmVyc2lvbi5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW4tYXJ0aWZhY3RzLy4vbm9kZV9tb2R1bGVzL2FiY2pzL3ZlcnNpb24uanM/YTk4OCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdmVyc2lvbiA9ICc2LjUuMic7XG5cbm1vZHVsZS5leHBvcnRzID0gdmVyc2lvbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/abcjs/version.js\n");

/***/ })

};
;